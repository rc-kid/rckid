#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_77)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_77) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 77 0001
        gbc.setState(0xc99b, 0x536c, 0x57c0, 0x6c98, 0xafab, 0x81f8, 0x1, 0x1);
        gbc.writeMem(0x81f8, { 0x0 });
        gbc.writeMem(0xc99b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x536c);
        EXPECT(gbc.pc(), 0xc99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f8), 0x57);
        EXPECT(gbc.readMem(0xc99b), 0x77);
        // 77 0007
        gbc.setState(0x2f0e, 0x2063, 0x3e30, 0x350a, 0x549d, 0xf6bf, 0x1, 0x0);
        gbc.writeMem(0x2f0e, { 0x77 });
        gbc.writeMem(0xf6bf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2063);
        EXPECT(gbc.pc(), 0x2f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6bf), 0x3e);
        // 77 0009
        gbc.setState(0x262c, 0xbed2, 0x2e10, 0x9263, 0xa2f, 0xedf2, 0x1, 0x1);
        gbc.writeMem(0x262c, { 0x77 });
        gbc.writeMem(0xedf2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbed2);
        EXPECT(gbc.pc(), 0x262d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf2), 0x2e);
        // 77 000A
        gbc.setState(0x8b14, 0x7cc4, 0x950, 0x65fb, 0x10a7, 0x9845, 0x1, 0x0);
        gbc.writeMem(0x8b14, { 0x77 });
        gbc.writeMem(0x9845, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7cc4);
        EXPECT(gbc.pc(), 0x8b15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b14), 0x77);
        EXPECT(gbc.readMem(0x9845), 0x9);
        // 77 000B
        gbc.setState(0xc52c, 0xa7ad, 0x8050, 0xd996, 0x93fb, 0xd213, 0x0, 0x0);
        gbc.writeMem(0xc52c, { 0x77 });
        gbc.writeMem(0xd213, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa7ad);
        EXPECT(gbc.pc(), 0xc52d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52c), 0x77);
        EXPECT(gbc.readMem(0xd213), 0x80);
        // 77 000D
        gbc.setState(0x1af0, 0xa043, 0x27c0, 0xdc1b, 0xd8ed, 0x96e8, 0x0, 0x1);
        gbc.writeMem(0x1af0, { 0x77 });
        gbc.writeMem(0x96e8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa043);
        EXPECT(gbc.pc(), 0x1af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e8), 0x27);
        // 77 000F
        gbc.setState(0x93cd, 0x4fb1, 0xf0a0, 0x34e0, 0x1985, 0xa2cb, 0x0, 0x1);
        gbc.writeMem(0x93cd, { 0x77 });
        gbc.writeMem(0xa2cb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4fb1);
        EXPECT(gbc.pc(), 0x93ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93cd), 0x77);
        EXPECT(gbc.readMem(0xa2cb), 0xf0);
        // 77 0010
        gbc.setState(0x1628, 0x85a4, 0x360, 0x7312, 0xa483, 0xd0e0, 0x0, 0x0);
        gbc.writeMem(0x1628, { 0x77 });
        gbc.writeMem(0xd0e0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x85a4);
        EXPECT(gbc.pc(), 0x1629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e0), 0x3);
        // 77 0011
        gbc.setState(0xd7a3, 0x1394, 0x30, 0xcaf3, 0xca09, 0xc224, 0x0, 0x0);
        gbc.writeMem(0xc224, { 0x0 });
        gbc.writeMem(0xd7a3, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1394);
        EXPECT(gbc.pc(), 0xd7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc224), 0x0);
        EXPECT(gbc.readMem(0xd7a3), 0x77);
        // 77 0013
        gbc.setState(0x1598, 0xb0f8, 0x1530, 0xf1f5, 0x1f4b, 0x8967, 0x1, 0x1);
        gbc.writeMem(0x1598, { 0x77 });
        gbc.writeMem(0x8967, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb0f8);
        EXPECT(gbc.pc(), 0x1599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8967), 0x15);
        // 77 0014
        gbc.setState(0x29ee, 0xbc1c, 0xde70, 0xd781, 0x1047, 0xf5f9, 0x0, 0x0);
        gbc.writeMem(0x29ee, { 0x77 });
        gbc.writeMem(0xf5f9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbc1c);
        EXPECT(gbc.pc(), 0x29ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5f9), 0xde);
        // 77 0016
        gbc.setState(0x1d22, 0xe383, 0xed40, 0xc0fb, 0x8e03, 0xbddd, 0x1, 0x0);
        gbc.writeMem(0x1d22, { 0x77 });
        gbc.writeMem(0xbddd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe383);
        EXPECT(gbc.pc(), 0x1d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbddd), 0xed);
        // 77 001B
        gbc.setState(0x72f, 0x314f, 0x90d0, 0x34b4, 0xbed5, 0x90c6, 0x1, 0x1);
        gbc.writeMem(0x72f, { 0x77 });
        gbc.writeMem(0x90c6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x314f);
        EXPECT(gbc.pc(), 0x730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c6), 0x90);
        // 77 0020
        gbc.setState(0x4fd6, 0xee23, 0x1bf0, 0x985e, 0x9c72, 0x801a, 0x0, 0x1);
        gbc.writeMem(0x4fd6, { 0x77 });
        gbc.writeMem(0x801a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xee23);
        EXPECT(gbc.pc(), 0x4fd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801a), 0x1b);
        // 77 0021
        gbc.setState(0x7db1, 0x1fb, 0x1f60, 0xdc12, 0x7837, 0xe44a, 0x0, 0x1);
        gbc.writeMem(0x7db1, { 0x77 });
        gbc.writeMem(0xe44a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0x7db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44a), 0x1f);
        // 77 0022
        gbc.setState(0xa5ad, 0xbb8f, 0x4960, 0x9fea, 0xefb, 0x97f6, 0x0, 0x0);
        gbc.writeMem(0x97f6, { 0x0 });
        gbc.writeMem(0xa5ad, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbb8f);
        EXPECT(gbc.pc(), 0xa5ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97f6), 0x49);
        EXPECT(gbc.readMem(0xa5ad), 0x77);
        // 77 0023
        gbc.setState(0x16ea, 0xb672, 0x9a0, 0x6dda, 0xc318, 0x821e, 0x0, 0x1);
        gbc.writeMem(0x16ea, { 0x77 });
        gbc.writeMem(0x821e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb672);
        EXPECT(gbc.pc(), 0x16eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821e), 0x9);
        // 77 0025
        gbc.setState(0xc4b8, 0x2787, 0x4ac0, 0x67c3, 0x95c3, 0xcd2d, 0x1, 0x1);
        gbc.writeMem(0xc4b8, { 0x77 });
        gbc.writeMem(0xcd2d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2787);
        EXPECT(gbc.pc(), 0xc4b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b8), 0x77);
        EXPECT(gbc.readMem(0xcd2d), 0x4a);
        // 77 002A
        gbc.setState(0x87c9, 0xb9be, 0x1220, 0x13ad, 0x3d2c, 0x9ef5, 0x0, 0x0);
        gbc.writeMem(0x87c9, { 0x77 });
        gbc.writeMem(0x9ef5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb9be);
        EXPECT(gbc.pc(), 0x87ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c9), 0x77);
        EXPECT(gbc.readMem(0x9ef5), 0x12);
        // 77 002B
        gbc.setState(0x1ceb, 0xbc59, 0x6270, 0x9142, 0xbb1c, 0x9fb8, 0x1, 0x0);
        gbc.writeMem(0x1ceb, { 0x77 });
        gbc.writeMem(0x9fb8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbc59);
        EXPECT(gbc.pc(), 0x1cec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb8), 0x62);
        // 77 002C
        gbc.setState(0x6971, 0xa186, 0x34f0, 0x3054, 0x7082, 0xe740, 0x1, 0x1);
        gbc.writeMem(0x6971, { 0x77 });
        gbc.writeMem(0xe740, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa186);
        EXPECT(gbc.pc(), 0x6972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe740), 0x34);
        // 77 002D
        gbc.setState(0xc271, 0x9cb8, 0x3e80, 0x10cc, 0xb3d2, 0xef60, 0x0, 0x0);
        gbc.writeMem(0xc271, { 0x77 });
        gbc.writeMem(0xef60, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9cb8);
        EXPECT(gbc.pc(), 0xc272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc271), 0x77);
        EXPECT(gbc.readMem(0xef60), 0x3e);
        // 77 002E
        gbc.setState(0xb42, 0x881e, 0x6c90, 0x420, 0x5bfd, 0xd2ee, 0x1, 0x0);
        gbc.writeMem(0xb42, { 0x77 });
        gbc.writeMem(0xd2ee, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x881e);
        EXPECT(gbc.pc(), 0xb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ee), 0x6c);
        // 77 0031
        gbc.setState(0x9c27, 0xffec, 0x7400, 0x2b1c, 0xebbd, 0xb7c9, 0x1, 0x0);
        gbc.writeMem(0x9c27, { 0x77 });
        gbc.writeMem(0xb7c9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xffec);
        EXPECT(gbc.pc(), 0x9c28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c27), 0x77);
        EXPECT(gbc.readMem(0xb7c9), 0x74);
        // 77 0032
        gbc.setState(0xbbf3, 0xf851, 0xb680, 0x5c08, 0x3546, 0xd366, 0x1, 0x0);
        gbc.writeMem(0xbbf3, { 0x77 });
        gbc.writeMem(0xd366, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf851);
        EXPECT(gbc.pc(), 0xbbf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf3), 0x77);
        EXPECT(gbc.readMem(0xd366), 0xb6);
        // 77 0033
        gbc.setState(0xed7a, 0xd489, 0x5710, 0x8f30, 0xcc57, 0xefd4, 0x0, 0x0);
        gbc.writeMem(0xed7a, { 0x77 });
        gbc.writeMem(0xefd4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd489);
        EXPECT(gbc.pc(), 0xed7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed7a), 0x77);
        EXPECT(gbc.readMem(0xefd4), 0x57);
        // 77 0034
        gbc.setState(0x2cc8, 0xd175, 0x96b0, 0xc2b9, 0x8a03, 0xf29a, 0x1, 0x0);
        gbc.writeMem(0x2cc8, { 0x77 });
        gbc.writeMem(0xf29a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd175);
        EXPECT(gbc.pc(), 0x2cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf29a), 0x96);
        // 77 0036
        gbc.setState(0xa755, 0x5cc8, 0x67e0, 0x1049, 0xfdb2, 0xcd97, 0x0, 0x1);
        gbc.writeMem(0xa755, { 0x77 });
        gbc.writeMem(0xcd97, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x5cc8);
        EXPECT(gbc.pc(), 0xa756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa755), 0x77);
        EXPECT(gbc.readMem(0xcd97), 0x67);
        // 77 0039
        gbc.setState(0x1c3b, 0xce12, 0x37d0, 0x864f, 0xaeac, 0xe2ba, 0x0, 0x0);
        gbc.writeMem(0x1c3b, { 0x77 });
        gbc.writeMem(0xe2ba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xce12);
        EXPECT(gbc.pc(), 0x1c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ba), 0x37);
        // 77 003A
        gbc.setState(0x8ae8, 0xcabc, 0xa410, 0xe073, 0x5b4e, 0xea97, 0x0, 0x1);
        gbc.writeMem(0x8ae8, { 0x77 });
        gbc.writeMem(0xea97, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcabc);
        EXPECT(gbc.pc(), 0x8ae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae8), 0x77);
        EXPECT(gbc.readMem(0xea97), 0xa4);
        // 77 003B
        gbc.setState(0xc276, 0xf7d4, 0xc6f0, 0xd77d, 0x93a7, 0xc17d, 0x0, 0x0);
        gbc.writeMem(0xc17d, { 0x0 });
        gbc.writeMem(0xc276, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf7d4);
        EXPECT(gbc.pc(), 0xc277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc17d), 0xc6);
        EXPECT(gbc.readMem(0xc276), 0x77);
        // 77 003D
        gbc.setState(0x27ab, 0x630a, 0xb4d0, 0xa7cd, 0x6e52, 0xaad8, 0x1, 0x0);
        gbc.writeMem(0x27ab, { 0x77 });
        gbc.writeMem(0xaad8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x630a);
        EXPECT(gbc.pc(), 0x27ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad8), 0xb4);
        // 77 003F
        gbc.setState(0x40b8, 0x4e79, 0x9690, 0xcd7c, 0xa983, 0xa139, 0x0, 0x1);
        gbc.writeMem(0x40b8, { 0x77 });
        gbc.writeMem(0xa139, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4e79);
        EXPECT(gbc.pc(), 0x40b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa139), 0x96);
        // 77 0041
        gbc.setState(0x6228, 0x51c, 0x8170, 0xafa8, 0xd122, 0xfc8f, 0x0, 0x1);
        gbc.writeMem(0x6228, { 0x77 });
        gbc.writeMem(0xfc8f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x51c);
        EXPECT(gbc.pc(), 0x6229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc8f), 0x81);
        // 77 0042
        gbc.setState(0x4f99, 0x12b3, 0x6d00, 0x1d4c, 0x2d0a, 0xe4c6, 0x0, 0x0);
        gbc.writeMem(0x4f99, { 0x77 });
        gbc.writeMem(0xe4c6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x12b3);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c6), 0x6d);
        // 77 0047
        gbc.setState(0x763b, 0x17c2, 0x7e60, 0xdd9d, 0xe64d, 0xd3cd, 0x1, 0x0);
        gbc.writeMem(0x763b, { 0x77 });
        gbc.writeMem(0xd3cd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x17c2);
        EXPECT(gbc.pc(), 0x763c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3cd), 0x7e);
        // 77 0048
        gbc.setState(0x7641, 0x7b31, 0xce40, 0xd83, 0x9698, 0xd02e, 0x1, 0x0);
        gbc.writeMem(0x7641, { 0x77 });
        gbc.writeMem(0xd02e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7b31);
        EXPECT(gbc.pc(), 0x7642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02e), 0xce);
        // 77 004A
        gbc.setState(0xd24c, 0xedab, 0x5e50, 0x2f82, 0x15d4, 0xdd90, 0x0, 0x0);
        gbc.writeMem(0xd24c, { 0x77 });
        gbc.writeMem(0xdd90, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xedab);
        EXPECT(gbc.pc(), 0xd24d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd24c), 0x77);
        EXPECT(gbc.readMem(0xdd90), 0x5e);
        // 77 004D
        gbc.setState(0xe7fb, 0x756f, 0x4960, 0x2634, 0xb177, 0xb436, 0x1, 0x1);
        gbc.writeMem(0xb436, { 0x0 });
        gbc.writeMem(0xe7fb, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x756f);
        EXPECT(gbc.pc(), 0xe7fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb436), 0x49);
        EXPECT(gbc.readMem(0xe7fb), 0x77);
        // 77 004F
        gbc.setState(0x35a4, 0x3ae2, 0x63a0, 0xf784, 0x4a03, 0xc0bd, 0x1, 0x1);
        gbc.writeMem(0x35a4, { 0x77 });
        gbc.writeMem(0xc0bd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3ae2);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0bd), 0x63);
        // 77 0051
        gbc.setState(0x4466, 0x38af, 0x1140, 0x15e2, 0x86bf, 0xf0e3, 0x1, 0x0);
        gbc.writeMem(0x4466, { 0x77 });
        gbc.writeMem(0xf0e3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x38af);
        EXPECT(gbc.pc(), 0x4467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0e3), 0x11);
        // 77 0054
        gbc.setState(0xa171, 0x4099, 0x5ca0, 0xa9f5, 0xd5c6, 0x8c6d, 0x0, 0x0);
        gbc.writeMem(0x8c6d, { 0x0 });
        gbc.writeMem(0xa171, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4099);
        EXPECT(gbc.pc(), 0xa172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c6d), 0x5c);
        EXPECT(gbc.readMem(0xa171), 0x77);
        // 77 0055
        gbc.setState(0xa4a6, 0x7744, 0xbda0, 0xeec0, 0x2ad9, 0xe8ed, 0x0, 0x1);
        gbc.writeMem(0xa4a6, { 0x77 });
        gbc.writeMem(0xe8ed, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7744);
        EXPECT(gbc.pc(), 0xa4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a6), 0x77);
        EXPECT(gbc.readMem(0xe8ed), 0xbd);
        // 77 0056
        gbc.setState(0x9ea7, 0xcfbe, 0xa1a0, 0x8629, 0x54e1, 0xbe8c, 0x1, 0x0);
        gbc.writeMem(0x9ea7, { 0x77 });
        gbc.writeMem(0xbe8c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcfbe);
        EXPECT(gbc.pc(), 0x9ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea7), 0x77);
        EXPECT(gbc.readMem(0xbe8c), 0xa1);
        // 77 0057
        gbc.setState(0x9172, 0x885, 0x3250, 0x4763, 0x15df, 0xc9c7, 0x0, 0x0);
        gbc.writeMem(0x9172, { 0x77 });
        gbc.writeMem(0xc9c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x885);
        EXPECT(gbc.pc(), 0x9173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9172), 0x77);
        EXPECT(gbc.readMem(0xc9c7), 0x32);
        // 77 0058
        gbc.setState(0xc32b, 0xea3, 0x2460, 0x1819, 0xce7d, 0x91ca, 0x1, 0x0);
        gbc.writeMem(0x91ca, { 0x0 });
        gbc.writeMem(0xc32b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xea3);
        EXPECT(gbc.pc(), 0xc32c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ca), 0x24);
        EXPECT(gbc.readMem(0xc32b), 0x77);
        // 77 0059
        gbc.setState(0x5271, 0xc968, 0x8970, 0xd8b6, 0xba29, 0xe70c, 0x1, 0x1);
        gbc.writeMem(0x5271, { 0x77 });
        gbc.writeMem(0xe70c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc968);
        EXPECT(gbc.pc(), 0x5272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70c), 0x89);
        // 77 005C
        gbc.setState(0x5b86, 0x2337, 0xe420, 0xb222, 0xfd94, 0x9746, 0x1, 0x1);
        gbc.writeMem(0x5b86, { 0x77 });
        gbc.writeMem(0x9746, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2337);
        EXPECT(gbc.pc(), 0x5b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9746), 0xe4);
        // 77 005D
        gbc.setState(0xd2e2, 0x3727, 0x6380, 0xdea3, 0xd973, 0xfefe, 0x1, 0x1);
        gbc.writeMem(0xd2e2, { 0x77 });
        gbc.writeMem(0xfefe, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3727);
        EXPECT(gbc.pc(), 0xd2e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e2), 0x77);
        EXPECT(gbc.readMem(0xfefe), 0x63);
        // 77 005E
        gbc.setState(0x4d88, 0xeff8, 0x5860, 0x60cc, 0x9406, 0xb4d6, 0x1, 0x1);
        gbc.writeMem(0x4d88, { 0x77 });
        gbc.writeMem(0xb4d6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xeff8);
        EXPECT(gbc.pc(), 0x4d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d6), 0x58);
        // 77 0060
        gbc.setState(0x866a, 0xa1e6, 0x34a0, 0xb7de, 0xcb80, 0xd49f, 0x0, 0x1);
        gbc.writeMem(0x866a, { 0x77 });
        gbc.writeMem(0xd49f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa1e6);
        EXPECT(gbc.pc(), 0x866b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866a), 0x77);
        EXPECT(gbc.readMem(0xd49f), 0x34);
        // 77 0062
        gbc.setState(0x892e, 0xc3df, 0x3470, 0xe13c, 0x9203, 0x922d, 0x1, 0x1);
        gbc.writeMem(0x892e, { 0x77 });
        gbc.writeMem(0x922d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc3df);
        EXPECT(gbc.pc(), 0x892f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x892e), 0x77);
        EXPECT(gbc.readMem(0x922d), 0x34);
        // 77 0063
        gbc.setState(0x60d7, 0x7385, 0x65a0, 0xd22a, 0x86ff, 0xbad2, 0x0, 0x1);
        gbc.writeMem(0x60d7, { 0x77 });
        gbc.writeMem(0xbad2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7385);
        EXPECT(gbc.pc(), 0x60d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad2), 0x65);
        // 77 0065
        gbc.setState(0x1a0a, 0x4982, 0x1ec0, 0xc9b3, 0x5a54, 0xd030, 0x0, 0x0);
        gbc.writeMem(0x1a0a, { 0x77 });
        gbc.writeMem(0xd030, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4982);
        EXPECT(gbc.pc(), 0x1a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd030), 0x1e);
        // 77 0067
        gbc.setState(0x60ae, 0xbfab, 0x1e00, 0xb8e3, 0x5b0, 0xac96, 0x1, 0x1);
        gbc.writeMem(0x60ae, { 0x77 });
        gbc.writeMem(0xac96, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xbfab);
        EXPECT(gbc.pc(), 0x60af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac96), 0x1e);
        // 77 0068
        gbc.setState(0x9963, 0x7d85, 0xce0, 0xf537, 0x6127, 0xa650, 0x1, 0x1);
        gbc.writeMem(0x9963, { 0x77 });
        gbc.writeMem(0xa650, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7d85);
        EXPECT(gbc.pc(), 0x9964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9963), 0x77);
        EXPECT(gbc.readMem(0xa650), 0xc);
        // 77 006B
        gbc.setState(0xcc44, 0x6cf2, 0xb5d0, 0x183, 0x184b, 0xb0e6, 0x1, 0x1);
        gbc.writeMem(0xb0e6, { 0x0 });
        gbc.writeMem(0xcc44, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6cf2);
        EXPECT(gbc.pc(), 0xcc45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0e6), 0xb5);
        EXPECT(gbc.readMem(0xcc44), 0x77);
        // 77 0070
        gbc.setState(0x80d9, 0xe9cb, 0xfc40, 0x1990, 0x1ccf, 0xd951, 0x1, 0x1);
        gbc.writeMem(0x80d9, { 0x77 });
        gbc.writeMem(0xd951, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe9cb);
        EXPECT(gbc.pc(), 0x80da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d9), 0x77);
        EXPECT(gbc.readMem(0xd951), 0xfc);
        // 77 0072
        gbc.setState(0x8c63, 0x9bc6, 0xd200, 0xc537, 0xf3ca, 0xf4ef, 0x0, 0x1);
        gbc.writeMem(0x8c63, { 0x77 });
        gbc.writeMem(0xf4ef, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9bc6);
        EXPECT(gbc.pc(), 0x8c64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c63), 0x77);
        EXPECT(gbc.readMem(0xf4ef), 0xd2);
        // 77 0073
        gbc.setState(0xe005, 0xa3df, 0x35a0, 0x5c6e, 0x6934, 0x8e1b, 0x0, 0x1);
        gbc.writeMem(0x8e1b, { 0x0 });
        gbc.writeMem(0xe005, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa3df);
        EXPECT(gbc.pc(), 0xe006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1b), 0x35);
        EXPECT(gbc.readMem(0xe005), 0x77);
        // 77 0075
        gbc.setState(0x5156, 0xccc5, 0x6d50, 0x36e5, 0xdb7c, 0xf00b, 0x1, 0x1);
        gbc.writeMem(0x5156, { 0x77 });
        gbc.writeMem(0xf00b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xccc5);
        EXPECT(gbc.pc(), 0x5157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf00b), 0x6d);
        // 77 0076
        gbc.setState(0x5d78, 0x56dd, 0x6210, 0x133b, 0x42d4, 0xc4f6, 0x1, 0x0);
        gbc.writeMem(0x5d78, { 0x77 });
        gbc.writeMem(0xc4f6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x56dd);
        EXPECT(gbc.pc(), 0x5d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f6), 0x62);
        // 77 0078
        gbc.setState(0x573a, 0x918f, 0xd1c0, 0x577a, 0x50e8, 0xe68c, 0x0, 0x1);
        gbc.writeMem(0x573a, { 0x77 });
        gbc.writeMem(0xe68c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x918f);
        EXPECT(gbc.pc(), 0x573b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68c), 0xd1);
        // 77 007A
        gbc.setState(0x1345, 0x746d, 0xc140, 0x2230, 0xf651, 0xf675, 0x0, 0x1);
        gbc.writeMem(0x1345, { 0x77 });
        gbc.writeMem(0xf675, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x746d);
        EXPECT(gbc.pc(), 0x1346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf675), 0xc1);
        // 77 007C
        gbc.setState(0x839b, 0x78b8, 0x23e0, 0x5fee, 0x55aa, 0xf125, 0x0, 0x1);
        gbc.writeMem(0x839b, { 0x77 });
        gbc.writeMem(0xf125, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x78b8);
        EXPECT(gbc.pc(), 0x839c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839b), 0x77);
        EXPECT(gbc.readMem(0xf125), 0x23);
        // 77 0081
        gbc.setState(0x5119, 0xdbdd, 0xd980, 0x78a9, 0xf0fe, 0x97dc, 0x0, 0x0);
        gbc.writeMem(0x5119, { 0x77 });
        gbc.writeMem(0x97dc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xdbdd);
        EXPECT(gbc.pc(), 0x511a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97dc), 0xd9);
        // 77 0082
        gbc.setState(0x2c10, 0x130d, 0xef0, 0x3559, 0xc79d, 0xc7a4, 0x1, 0x0);
        gbc.writeMem(0x2c10, { 0x77 });
        gbc.writeMem(0xc7a4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x130d);
        EXPECT(gbc.pc(), 0x2c11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a4), 0xe);
        // 77 0083
        gbc.setState(0x7e56, 0x53c5, 0xafd0, 0x992, 0xd3e2, 0x8a9c, 0x1, 0x1);
        gbc.writeMem(0x7e56, { 0x77 });
        gbc.writeMem(0x8a9c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x53c5);
        EXPECT(gbc.pc(), 0x7e57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9c), 0xaf);
        // 77 0086
        gbc.setState(0x52fb, 0x5e59, 0x90b0, 0x5d78, 0xdc8a, 0xe111, 0x1, 0x0);
        gbc.writeMem(0x52fb, { 0x77 });
        gbc.writeMem(0xe111, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5e59);
        EXPECT(gbc.pc(), 0x52fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe111), 0x90);
        // 77 0088
        gbc.setState(0xd842, 0xfa16, 0x6c80, 0x9356, 0xfadc, 0xdd3c, 0x0, 0x1);
        gbc.writeMem(0xd842, { 0x77 });
        gbc.writeMem(0xdd3c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfa16);
        EXPECT(gbc.pc(), 0xd843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd842), 0x77);
        EXPECT(gbc.readMem(0xdd3c), 0x6c);
        // 77 0089
        gbc.setState(0x7b73, 0xd5ea, 0x9140, 0xde2a, 0x6916, 0xd2a1, 0x1, 0x1);
        gbc.writeMem(0x7b73, { 0x77 });
        gbc.writeMem(0xd2a1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd5ea);
        EXPECT(gbc.pc(), 0x7b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a1), 0x91);
        // 77 008A
        gbc.setState(0xcc8e, 0xd656, 0x2cc0, 0x90ee, 0x34b6, 0x8579, 0x1, 0x0);
        gbc.writeMem(0x8579, { 0x0 });
        gbc.writeMem(0xcc8e, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xd656);
        EXPECT(gbc.pc(), 0xcc8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8579), 0x2c);
        EXPECT(gbc.readMem(0xcc8e), 0x77);
        // 77 008B
        gbc.setState(0x2059, 0x455a, 0x2fc0, 0x6e8e, 0x4824, 0xfed5, 0x1, 0x0);
        gbc.writeMem(0x2059, { 0x77 });
        gbc.writeMem(0xfed5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x455a);
        EXPECT(gbc.pc(), 0x205a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfed5), 0x2f);
        // 77 008C
        gbc.setState(0xc7c2, 0x1a98, 0xbfe0, 0x51f8, 0xf4db, 0xbe79, 0x0, 0x0);
        gbc.writeMem(0xbe79, { 0x0 });
        gbc.writeMem(0xc7c2, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1a98);
        EXPECT(gbc.pc(), 0xc7c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe79), 0xbf);
        EXPECT(gbc.readMem(0xc7c2), 0x77);
        // 77 008D
        gbc.setState(0xaa75, 0xeffc, 0x4b70, 0xe459, 0x443d, 0xf236, 0x0, 0x1);
        gbc.writeMem(0xaa75, { 0x77 });
        gbc.writeMem(0xf236, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xeffc);
        EXPECT(gbc.pc(), 0xaa76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa75), 0x77);
        EXPECT(gbc.readMem(0xf236), 0x4b);
        // 77 0090
        gbc.setState(0x7e06, 0xc4c6, 0x8510, 0x4148, 0xd4fd, 0x9782, 0x0, 0x1);
        gbc.writeMem(0x7e06, { 0x77 });
        gbc.writeMem(0x9782, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc4c6);
        EXPECT(gbc.pc(), 0x7e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9782), 0x85);
        // 77 0091
        gbc.setState(0xb0ae, 0xb9a1, 0xbf30, 0xed56, 0x67c0, 0xc76e, 0x1, 0x0);
        gbc.writeMem(0xb0ae, { 0x77 });
        gbc.writeMem(0xc76e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb9a1);
        EXPECT(gbc.pc(), 0xb0af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ae), 0x77);
        EXPECT(gbc.readMem(0xc76e), 0xbf);
        // 77 0093
        gbc.setState(0x3205, 0x4f67, 0x2d40, 0x7aba, 0x1e3f, 0xbc06, 0x0, 0x0);
        gbc.writeMem(0x3205, { 0x77 });
        gbc.writeMem(0xbc06, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4f67);
        EXPECT(gbc.pc(), 0x3206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc06), 0x2d);
        // 77 0097
        gbc.setState(0x23f2, 0xd991, 0x5a10, 0x8936, 0xfc3c, 0xd440, 0x0, 0x0);
        gbc.writeMem(0x23f2, { 0x77 });
        gbc.writeMem(0xd440, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd991);
        EXPECT(gbc.pc(), 0x23f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd440), 0x5a);
        // 77 0099
        gbc.setState(0x5cdc, 0xa73e, 0xb0b0, 0xcdb4, 0x2e96, 0x8ba9, 0x1, 0x1);
        gbc.writeMem(0x5cdc, { 0x77 });
        gbc.writeMem(0x8ba9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa73e);
        EXPECT(gbc.pc(), 0x5cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba9), 0xb0);
        // 77 009A
        gbc.setState(0xa2bb, 0xe419, 0xb370, 0xac69, 0xaf8d, 0xd48c, 0x1, 0x0);
        gbc.writeMem(0xa2bb, { 0x77 });
        gbc.writeMem(0xd48c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe419);
        EXPECT(gbc.pc(), 0xa2bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2bb), 0x77);
        EXPECT(gbc.readMem(0xd48c), 0xb3);
        // 77 009C
        gbc.setState(0x8093, 0xc053, 0x1800, 0x1d0a, 0x12dd, 0xa9b9, 0x1, 0x0);
        gbc.writeMem(0x8093, { 0x77 });
        gbc.writeMem(0xa9b9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc053);
        EXPECT(gbc.pc(), 0x8094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8093), 0x77);
        EXPECT(gbc.readMem(0xa9b9), 0x18);
        // 77 009E
        gbc.setState(0xdeab, 0x18f6, 0x1200, 0xf877, 0x33fb, 0xd988, 0x1, 0x0);
        gbc.writeMem(0xd988, { 0x0 });
        gbc.writeMem(0xdeab, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x18f6);
        EXPECT(gbc.pc(), 0xdeac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd988), 0x12);
        EXPECT(gbc.readMem(0xdeab), 0x77);
        // 77 009F
        gbc.setState(0x3fd4, 0xdeb6, 0x34d0, 0x91a6, 0x44ed, 0x9d14, 0x1, 0x1);
        gbc.writeMem(0x3fd4, { 0x77 });
        gbc.writeMem(0x9d14, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdeb6);
        EXPECT(gbc.pc(), 0x3fd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d14), 0x34);
        // 77 00A2
        gbc.setState(0xd968, 0xd982, 0x8e90, 0x7277, 0x4c79, 0xc600, 0x0, 0x1);
        gbc.writeMem(0xc600, { 0x0 });
        gbc.writeMem(0xd968, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd982);
        EXPECT(gbc.pc(), 0xd969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc600), 0x8e);
        EXPECT(gbc.readMem(0xd968), 0x77);
        // 77 00A4
        gbc.setState(0x9cc3, 0x9b07, 0x4ea0, 0x61c0, 0xa8df, 0xec5a, 0x0, 0x1);
        gbc.writeMem(0x9cc3, { 0x77 });
        gbc.writeMem(0xec5a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9b07);
        EXPECT(gbc.pc(), 0x9cc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cc3), 0x77);
        EXPECT(gbc.readMem(0xec5a), 0x4e);
        // 77 00A7
        gbc.setState(0xce0a, 0x7f52, 0x7170, 0x2fb, 0x7ec, 0xa198, 0x0, 0x0);
        gbc.writeMem(0xa198, { 0x0 });
        gbc.writeMem(0xce0a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7f52);
        EXPECT(gbc.pc(), 0xce0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa198), 0x71);
        EXPECT(gbc.readMem(0xce0a), 0x77);
        // 77 00AA
        gbc.setState(0x8ec9, 0xd696, 0xea40, 0x9791, 0x2930, 0x96a9, 0x0, 0x1);
        gbc.writeMem(0x8ec9, { 0x77 });
        gbc.writeMem(0x96a9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd696);
        EXPECT(gbc.pc(), 0x8eca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec9), 0x77);
        EXPECT(gbc.readMem(0x96a9), 0xea);
        // 77 00B2
        gbc.setState(0xb737, 0x3ebc, 0x1220, 0xbf3c, 0xd0be, 0xc155, 0x0, 0x1);
        gbc.writeMem(0xb737, { 0x77 });
        gbc.writeMem(0xc155, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3ebc);
        EXPECT(gbc.pc(), 0xb738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb737), 0x77);
        EXPECT(gbc.readMem(0xc155), 0x12);
        // 77 00B3
        gbc.setState(0xda3a, 0x1ca, 0x2d0, 0x81ba, 0x3067, 0x9201, 0x1, 0x1);
        gbc.writeMem(0x9201, { 0x0 });
        gbc.writeMem(0xda3a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1ca);
        EXPECT(gbc.pc(), 0xda3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9201), 0x2);
        EXPECT(gbc.readMem(0xda3a), 0x77);
        // 77 00BA
        gbc.setState(0xc000, 0xd834, 0x53e0, 0xf2f7, 0xed2e, 0xae11, 0x0, 0x1);
        gbc.writeMem(0xae11, { 0x0 });
        gbc.writeMem(0xc000, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd834);
        EXPECT(gbc.pc(), 0xc001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae11), 0x53);
        EXPECT(gbc.readMem(0xc000), 0x77);
        // 77 00BB
        gbc.setState(0x4902, 0x8e9d, 0xd5b0, 0x1783, 0xa064, 0xa0bb, 0x1, 0x1);
        gbc.writeMem(0x4902, { 0x77 });
        gbc.writeMem(0xa0bb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8e9d);
        EXPECT(gbc.pc(), 0x4903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0bb), 0xd5);
        // 77 00BD
        gbc.setState(0x495d, 0xf2ee, 0x6850, 0x79ef, 0x3a64, 0x87f5, 0x0, 0x1);
        gbc.writeMem(0x495d, { 0x77 });
        gbc.writeMem(0x87f5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf2ee);
        EXPECT(gbc.pc(), 0x495e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f5), 0x68);
        // 77 00BE
        gbc.setState(0xa9c0, 0x917, 0x6260, 0x4e0b, 0xda78, 0xe642, 0x1, 0x0);
        gbc.writeMem(0xa9c0, { 0x77 });
        gbc.writeMem(0xe642, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x917);
        EXPECT(gbc.pc(), 0xa9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c0), 0x77);
        EXPECT(gbc.readMem(0xe642), 0x62);
        // 77 00C1
        gbc.setState(0x206f, 0xe833, 0x6720, 0xb686, 0xeb41, 0xecd0, 0x0, 0x0);
        gbc.writeMem(0x206f, { 0x77 });
        gbc.writeMem(0xecd0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe833);
        EXPECT(gbc.pc(), 0x2070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecd0), 0x67);
        // 77 00C2
        gbc.setState(0xb59f, 0xa2c7, 0x5890, 0x594b, 0x3ff0, 0x887b, 0x0, 0x1);
        gbc.writeMem(0x887b, { 0x0 });
        gbc.writeMem(0xb59f, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa2c7);
        EXPECT(gbc.pc(), 0xb5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887b), 0x58);
        EXPECT(gbc.readMem(0xb59f), 0x77);
        // 77 00C3
        gbc.setState(0x697f, 0x96a, 0xee10, 0x4ec9, 0xdb19, 0xe897, 0x1, 0x1);
        gbc.writeMem(0x697f, { 0x77 });
        gbc.writeMem(0xe897, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x96a);
        EXPECT(gbc.pc(), 0x6980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe897), 0xee);
        // 77 00C5
        gbc.setState(0x4ea9, 0xaecd, 0x2c70, 0xd77, 0xb597, 0xc471, 0x1, 0x1);
        gbc.writeMem(0x4ea9, { 0x77 });
        gbc.writeMem(0xc471, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xaecd);
        EXPECT(gbc.pc(), 0x4eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc471), 0x2c);
        // 77 00C6
        gbc.setState(0x780, 0x1082, 0x8930, 0xfc93, 0x948d, 0xdc42, 0x0, 0x0);
        gbc.writeMem(0x780, { 0x77 });
        gbc.writeMem(0xdc42, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1082);
        EXPECT(gbc.pc(), 0x781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc42), 0x89);
        // 77 00C8
        gbc.setState(0x376b, 0x104b, 0xbcf0, 0xac64, 0xb85, 0xcd72, 0x0, 0x0);
        gbc.writeMem(0x376b, { 0x77 });
        gbc.writeMem(0xcd72, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x104b);
        EXPECT(gbc.pc(), 0x376c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd72), 0xbc);
        // 77 00C9
        gbc.setState(0xa5c4, 0x5f6e, 0x8070, 0x3bf3, 0x15c, 0xbf1c, 0x0, 0x1);
        gbc.writeMem(0xa5c4, { 0x77 });
        gbc.writeMem(0xbf1c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5f6e);
        EXPECT(gbc.pc(), 0xa5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c4), 0x77);
        EXPECT(gbc.readMem(0xbf1c), 0x80);
        // 77 00CB
        gbc.setState(0xe749, 0xe9d5, 0x2be0, 0x5053, 0xc4f7, 0xc8f7, 0x1, 0x0);
        gbc.writeMem(0xc8f7, { 0x0 });
        gbc.writeMem(0xe749, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe9d5);
        EXPECT(gbc.pc(), 0xe74a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8f7), 0x2b);
        EXPECT(gbc.readMem(0xe749), 0x77);
        // 77 00CD
        gbc.setState(0xa027, 0x12c2, 0x14d0, 0x533, 0xbf23, 0xc8fd, 0x0, 0x1);
        gbc.writeMem(0xa027, { 0x77 });
        gbc.writeMem(0xc8fd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x12c2);
        EXPECT(gbc.pc(), 0xa028);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa027), 0x77);
        EXPECT(gbc.readMem(0xc8fd), 0x14);
        // 77 00CF
        gbc.setState(0xa03e, 0x63ec, 0x8650, 0x76e8, 0x80b2, 0xc47a, 0x1, 0x1);
        gbc.writeMem(0xa03e, { 0x77 });
        gbc.writeMem(0xc47a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x63ec);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa03e), 0x77);
        EXPECT(gbc.readMem(0xc47a), 0x86);
        // 77 00D0
        gbc.setState(0xb313, 0xa3b, 0x3f00, 0x9e44, 0x40bd, 0xf280, 0x1, 0x1);
        gbc.writeMem(0xb313, { 0x77 });
        gbc.writeMem(0xf280, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa3b);
        EXPECT(gbc.pc(), 0xb314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb313), 0x77);
        EXPECT(gbc.readMem(0xf280), 0x3f);
        // 77 00D1
        gbc.setState(0x4efa, 0x1ede, 0xaf80, 0x9023, 0x4fd3, 0xdb9e, 0x0, 0x1);
        gbc.writeMem(0x4efa, { 0x77 });
        gbc.writeMem(0xdb9e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1ede);
        EXPECT(gbc.pc(), 0x4efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9e), 0xaf);
        // 77 00D3
        gbc.setState(0x90d7, 0xaab0, 0x5ee0, 0xf7d2, 0xadc3, 0xcbba, 0x0, 0x0);
        gbc.writeMem(0x90d7, { 0x77 });
        gbc.writeMem(0xcbba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaab0);
        EXPECT(gbc.pc(), 0x90d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90d7), 0x77);
        EXPECT(gbc.readMem(0xcbba), 0x5e);
        // 77 00D9
        gbc.setState(0xbde5, 0xcb4, 0x15a0, 0x5e5a, 0x2147, 0xb49d, 0x1, 0x1);
        gbc.writeMem(0xb49d, { 0x0 });
        gbc.writeMem(0xbde5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xcb4);
        EXPECT(gbc.pc(), 0xbde6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb49d), 0x15);
        EXPECT(gbc.readMem(0xbde5), 0x77);
        // 77 00DA
        gbc.setState(0x4564, 0x7cc3, 0xcb60, 0x7769, 0xd2ba, 0xc85a, 0x1, 0x1);
        gbc.writeMem(0x4564, { 0x77 });
        gbc.writeMem(0xc85a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7cc3);
        EXPECT(gbc.pc(), 0x4565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc85a), 0xcb);
        // 77 00DC
        gbc.setState(0x5c6d, 0x4cf7, 0xc650, 0x85b9, 0x7225, 0xf2d7, 0x1, 0x0);
        gbc.writeMem(0x5c6d, { 0x77 });
        gbc.writeMem(0xf2d7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4cf7);
        EXPECT(gbc.pc(), 0x5c6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf2d7), 0xc6);
        // 77 00DE
        gbc.setState(0x3f8e, 0x4828, 0xd990, 0xa6c0, 0x665e, 0xba8c, 0x1, 0x1);
        gbc.writeMem(0x3f8e, { 0x77 });
        gbc.writeMem(0xba8c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4828);
        EXPECT(gbc.pc(), 0x3f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba8c), 0xd9);
        // 77 00E0
        gbc.setState(0x8006, 0xf781, 0x3870, 0xbc3c, 0x852f, 0x8b00, 0x1, 0x0);
        gbc.writeMem(0x8006, { 0x77 });
        gbc.writeMem(0x8b00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf781);
        EXPECT(gbc.pc(), 0x8007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8006), 0x77);
        EXPECT(gbc.readMem(0x8b00), 0x38);
        // 77 00E3
        gbc.setState(0xbe0c, 0x8b55, 0xc600, 0xef2b, 0xf3f, 0xd26a, 0x1, 0x0);
        gbc.writeMem(0xbe0c, { 0x77 });
        gbc.writeMem(0xd26a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8b55);
        EXPECT(gbc.pc(), 0xbe0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe0c), 0x77);
        EXPECT(gbc.readMem(0xd26a), 0xc6);
        // 77 00E6
        gbc.setState(0x52b9, 0x813a, 0x7770, 0xb745, 0x214e, 0xd312, 0x1, 0x0);
        gbc.writeMem(0x52b9, { 0x77 });
        gbc.writeMem(0xd312, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x813a);
        EXPECT(gbc.pc(), 0x52ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd312), 0x77);
        // 77 00E7
        gbc.setState(0xcd74, 0xafcd, 0x4390, 0x4965, 0x63a, 0xeebd, 0x0, 0x1);
        gbc.writeMem(0xcd74, { 0x77 });
        gbc.writeMem(0xeebd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xafcd);
        EXPECT(gbc.pc(), 0xcd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd74), 0x77);
        EXPECT(gbc.readMem(0xeebd), 0x43);
        // 77 00E8
        gbc.setState(0x1f88, 0x3ba1, 0x1320, 0xf66f, 0xda7c, 0xcbf3, 0x0, 0x1);
        gbc.writeMem(0x1f88, { 0x77 });
        gbc.writeMem(0xcbf3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3ba1);
        EXPECT(gbc.pc(), 0x1f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf3), 0x13);
        // 77 00E9
        gbc.setState(0x1b08, 0xcdef, 0xf2d0, 0x7bb4, 0xdc80, 0xaf40, 0x0, 0x1);
        gbc.writeMem(0x1b08, { 0x77 });
        gbc.writeMem(0xaf40, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xcdef);
        EXPECT(gbc.pc(), 0x1b09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf40), 0xf2);
        // 77 00ED
        gbc.setState(0x5591, 0xdc5e, 0x7100, 0xcc15, 0x38ac, 0xf0cb, 0x0, 0x1);
        gbc.writeMem(0x5591, { 0x77 });
        gbc.writeMem(0xf0cb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xdc5e);
        EXPECT(gbc.pc(), 0x5592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0cb), 0x71);
        // 77 00F0
        gbc.setState(0x23e6, 0x795d, 0x2540, 0xdba5, 0x942, 0xbfd9, 0x1, 0x0);
        gbc.writeMem(0x23e6, { 0x77 });
        gbc.writeMem(0xbfd9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x795d);
        EXPECT(gbc.pc(), 0x23e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd9), 0x25);
        // 77 00F1
        gbc.setState(0x8dc0, 0x454a, 0xf4c0, 0x93ef, 0xf30d, 0xcf31, 0x1, 0x0);
        gbc.writeMem(0x8dc0, { 0x77 });
        gbc.writeMem(0xcf31, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x454a);
        EXPECT(gbc.pc(), 0x8dc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc0), 0x77);
        EXPECT(gbc.readMem(0xcf31), 0xf4);
        // 77 00F2
        gbc.setState(0xa779, 0x3b42, 0xb500, 0xab63, 0x3055, 0xcbd5, 0x0, 0x1);
        gbc.writeMem(0xa779, { 0x77 });
        gbc.writeMem(0xcbd5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3b42);
        EXPECT(gbc.pc(), 0xa77a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa779), 0x77);
        EXPECT(gbc.readMem(0xcbd5), 0xb5);
        // 77 00F3
        gbc.setState(0x91f4, 0x161e, 0x3460, 0xaa6a, 0x3ba1, 0xe13b, 0x1, 0x1);
        gbc.writeMem(0x91f4, { 0x77 });
        gbc.writeMem(0xe13b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0x91f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f4), 0x77);
        EXPECT(gbc.readMem(0xe13b), 0x34);
        // 77 00F6
        gbc.setState(0xbe2d, 0xbcf2, 0x4410, 0xc0aa, 0x48c4, 0xf16e, 0x1, 0x0);
        gbc.writeMem(0xbe2d, { 0x77 });
        gbc.writeMem(0xf16e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbcf2);
        EXPECT(gbc.pc(), 0xbe2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe2d), 0x77);
        EXPECT(gbc.readMem(0xf16e), 0x44);
        // 77 00F7
        gbc.setState(0x7f12, 0x63f3, 0xe450, 0x19, 0x49fa, 0xb734, 0x0, 0x1);
        gbc.writeMem(0x7f12, { 0x77 });
        gbc.writeMem(0xb734, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x63f3);
        EXPECT(gbc.pc(), 0x7f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb734), 0xe4);
        // 77 00F8
        gbc.setState(0xb852, 0xec27, 0x3850, 0xe789, 0x4764, 0x81a1, 0x1, 0x1);
        gbc.writeMem(0x81a1, { 0x0 });
        gbc.writeMem(0xb852, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xec27);
        EXPECT(gbc.pc(), 0xb853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a1), 0x38);
        EXPECT(gbc.readMem(0xb852), 0x77);
        // 77 00FA
        gbc.setState(0x1346, 0x6577, 0x3ba0, 0x2258, 0x9fe, 0xb243, 0x0, 0x0);
        gbc.writeMem(0x1346, { 0x77 });
        gbc.writeMem(0xb243, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6577);
        EXPECT(gbc.pc(), 0x1347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb243), 0x3b);
        // 77 00FB
        gbc.setState(0xdd92, 0x892f, 0xfcf0, 0x963, 0x86e8, 0xd9eb, 0x1, 0x1);
        gbc.writeMem(0xd9eb, { 0x0 });
        gbc.writeMem(0xdd92, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x892f);
        EXPECT(gbc.pc(), 0xdd93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9eb), 0xfc);
        EXPECT(gbc.readMem(0xdd92), 0x77);
        // 77 00FC
        gbc.setState(0x395f, 0xe778, 0x8cf0, 0x1e8d, 0xae34, 0xab00, 0x1, 0x1);
        gbc.writeMem(0x395f, { 0x77 });
        gbc.writeMem(0xab00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe778);
        EXPECT(gbc.pc(), 0x3960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab00), 0x8c);
        // 77 00FE
        gbc.setState(0xa7d4, 0xac27, 0x76f0, 0x572a, 0x937b, 0xa955, 0x0, 0x0);
        gbc.writeMem(0xa7d4, { 0x77 });
        gbc.writeMem(0xa955, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xac27);
        EXPECT(gbc.pc(), 0xa7d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d4), 0x77);
        EXPECT(gbc.readMem(0xa955), 0x76);
        // 77 00FF
        gbc.setState(0x3bb5, 0xc7ae, 0x3de0, 0xd0b2, 0x4372, 0xc598, 0x0, 0x0);
        gbc.writeMem(0x3bb5, { 0x77 });
        gbc.writeMem(0xc598, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc7ae);
        EXPECT(gbc.pc(), 0x3bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc598), 0x3d);
        // 77 0100
        gbc.setState(0x7a3c, 0x34db, 0xbc10, 0xc00b, 0xae4e, 0xe0ed, 0x0, 0x1);
        gbc.writeMem(0x7a3c, { 0x77 });
        gbc.writeMem(0xe0ed, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x34db);
        EXPECT(gbc.pc(), 0x7a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ed), 0xbc);
        // 77 0105
        gbc.setState(0x113a, 0xd9a8, 0xd1e0, 0xb4ed, 0xab81, 0xf82c, 0x0, 0x0);
        gbc.writeMem(0x113a, { 0x77 });
        gbc.writeMem(0xf82c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd9a8);
        EXPECT(gbc.pc(), 0x113b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf82c), 0xd1);
        // 77 0109
        gbc.setState(0x6e83, 0x3012, 0xdb70, 0x39e0, 0xd25a, 0xf824, 0x1, 0x0);
        gbc.writeMem(0x6e83, { 0x77 });
        gbc.writeMem(0xf824, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3012);
        EXPECT(gbc.pc(), 0x6e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf824), 0xdb);
        // 77 010C
        gbc.setState(0x6fe1, 0x1d52, 0x3280, 0xacf9, 0x96ac, 0x8600, 0x0, 0x0);
        gbc.writeMem(0x6fe1, { 0x77 });
        gbc.writeMem(0x8600, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1d52);
        EXPECT(gbc.pc(), 0x6fe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8600), 0x32);
        // 77 010D
        gbc.setState(0x4185, 0xbca, 0xb560, 0x1786, 0x8cb2, 0xa41e, 0x0, 0x0);
        gbc.writeMem(0x4185, { 0x77 });
        gbc.writeMem(0xa41e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xbca);
        EXPECT(gbc.pc(), 0x4186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41e), 0xb5);
        // 77 010F
        gbc.setState(0x4be4, 0x3ff9, 0x7f80, 0xee88, 0xb3a7, 0xc7ce, 0x1, 0x0);
        gbc.writeMem(0x4be4, { 0x77 });
        gbc.writeMem(0xc7ce, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3ff9);
        EXPECT(gbc.pc(), 0x4be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ce), 0x7f);
        // 77 0112
        gbc.setState(0x998d, 0xbdd6, 0x3300, 0x92f2, 0xccea, 0xf862, 0x0, 0x1);
        gbc.writeMem(0x998d, { 0x77 });
        gbc.writeMem(0xf862, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbdd6);
        EXPECT(gbc.pc(), 0x998e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x998d), 0x77);
        EXPECT(gbc.readMem(0xf862), 0x33);
        // 77 0113
        gbc.setState(0xc0c4, 0x2770, 0x2120, 0x4e71, 0xf4c2, 0xced6, 0x1, 0x0);
        gbc.writeMem(0xc0c4, { 0x77 });
        gbc.writeMem(0xced6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2770);
        EXPECT(gbc.pc(), 0xc0c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c4), 0x77);
        EXPECT(gbc.readMem(0xced6), 0x21);
        // 77 0114
        gbc.setState(0x683, 0x4242, 0x97d0, 0xcb00, 0x405d, 0x9ce4, 0x0, 0x1);
        gbc.writeMem(0x683, { 0x77 });
        gbc.writeMem(0x9ce4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4242);
        EXPECT(gbc.pc(), 0x684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce4), 0x97);
        // 77 0116
        gbc.setState(0x7516, 0x5871, 0xd040, 0x540f, 0xaa2d, 0xf6d7, 0x1, 0x1);
        gbc.writeMem(0x7516, { 0x77 });
        gbc.writeMem(0xf6d7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5871);
        EXPECT(gbc.pc(), 0x7517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6d7), 0xd0);
        // 77 0117
        gbc.setState(0x84c5, 0x1f1a, 0x3090, 0xaa9e, 0x83e9, 0x9f30, 0x1, 0x0);
        gbc.writeMem(0x84c5, { 0x77 });
        gbc.writeMem(0x9f30, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1f1a);
        EXPECT(gbc.pc(), 0x84c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c5), 0x77);
        EXPECT(gbc.readMem(0x9f30), 0x30);
        // 77 011E
        gbc.setState(0x3046, 0x9ec4, 0x13c0, 0x7b98, 0x53d6, 0xcae1, 0x1, 0x1);
        gbc.writeMem(0x3046, { 0x77 });
        gbc.writeMem(0xcae1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9ec4);
        EXPECT(gbc.pc(), 0x3047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae1), 0x13);
        // 77 011F
        gbc.setState(0x74ee, 0x7723, 0xd520, 0x61f5, 0x4dcf, 0xb770, 0x0, 0x1);
        gbc.writeMem(0x74ee, { 0x77 });
        gbc.writeMem(0xb770, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7723);
        EXPECT(gbc.pc(), 0x74ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb770), 0xd5);
        // 77 0122
        gbc.setState(0x1a11, 0xbbcf, 0x3890, 0x35ea, 0x74ad, 0xd097, 0x1, 0x1);
        gbc.writeMem(0x1a11, { 0x77 });
        gbc.writeMem(0xd097, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbbcf);
        EXPECT(gbc.pc(), 0x1a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd097), 0x38);
        // 77 0123
        gbc.setState(0xed95, 0xe323, 0xf750, 0xd741, 0x1817, 0xbd0c, 0x1, 0x0);
        gbc.writeMem(0xbd0c, { 0x0 });
        gbc.writeMem(0xed95, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe323);
        EXPECT(gbc.pc(), 0xed96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd0c), 0xf7);
        EXPECT(gbc.readMem(0xed95), 0x77);
        // 77 0125
        gbc.setState(0xede5, 0xe231, 0x3910, 0x8e78, 0x349f, 0xc2b6, 0x0, 0x1);
        gbc.writeMem(0xc2b6, { 0x0 });
        gbc.writeMem(0xede5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe231);
        EXPECT(gbc.pc(), 0xede6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b6), 0x39);
        EXPECT(gbc.readMem(0xede5), 0x77);
        // 77 0126
        gbc.setState(0x5e05, 0x3f12, 0xa7a0, 0x1991, 0xc065, 0xdc98, 0x0, 0x0);
        gbc.writeMem(0x5e05, { 0x77 });
        gbc.writeMem(0xdc98, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3f12);
        EXPECT(gbc.pc(), 0x5e06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc98), 0xa7);
        // 77 0128
        gbc.setState(0xcafc, 0x6b5d, 0x2170, 0x87a7, 0x74e0, 0x8f2a, 0x1, 0x1);
        gbc.writeMem(0x8f2a, { 0x0 });
        gbc.writeMem(0xcafc, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6b5d);
        EXPECT(gbc.pc(), 0xcafd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f2a), 0x21);
        EXPECT(gbc.readMem(0xcafc), 0x77);
        // 77 0129
        gbc.setState(0x68b7, 0x9c5c, 0xcfd0, 0xafa9, 0x9140, 0xc7e8, 0x0, 0x1);
        gbc.writeMem(0x68b7, { 0x77 });
        gbc.writeMem(0xc7e8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9c5c);
        EXPECT(gbc.pc(), 0x68b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e8), 0xcf);
        // 77 012A
        gbc.setState(0xea23, 0x6a3c, 0x3cb0, 0x512a, 0x655c, 0x9847, 0x1, 0x1);
        gbc.writeMem(0x9847, { 0x0 });
        gbc.writeMem(0xea23, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6a3c);
        EXPECT(gbc.pc(), 0xea24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9847), 0x3c);
        EXPECT(gbc.readMem(0xea23), 0x77);
        // 77 012B
        gbc.setState(0x2ddc, 0x8eb8, 0xe960, 0x2a65, 0xbd5b, 0xca2b, 0x1, 0x0);
        gbc.writeMem(0x2ddc, { 0x77 });
        gbc.writeMem(0xca2b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8eb8);
        EXPECT(gbc.pc(), 0x2ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2b), 0xe9);
        // 77 012C
        gbc.setState(0xcabe, 0x262f, 0x4920, 0x28f3, 0x98f4, 0xe87a, 0x1, 0x1);
        gbc.writeMem(0xcabe, { 0x77 });
        gbc.writeMem(0xe87a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x262f);
        EXPECT(gbc.pc(), 0xcabf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcabe), 0x77);
        EXPECT(gbc.readMem(0xe87a), 0x49);
        // 77 012D
        gbc.setState(0x6179, 0xc47a, 0xedf0, 0x6180, 0x68a, 0xaac3, 0x1, 0x0);
        gbc.writeMem(0x6179, { 0x77 });
        gbc.writeMem(0xaac3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc47a);
        EXPECT(gbc.pc(), 0x617a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaac3), 0xed);
        // 77 0132
        gbc.setState(0x22cd, 0x9f0b, 0x49f0, 0x6a3f, 0xef16, 0x9b4f, 0x0, 0x1);
        gbc.writeMem(0x22cd, { 0x77 });
        gbc.writeMem(0x9b4f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9f0b);
        EXPECT(gbc.pc(), 0x22ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b4f), 0x49);
        // 77 0134
        gbc.setState(0x81ed, 0x9f6c, 0x5c50, 0xa7, 0x884, 0xc921, 0x0, 0x0);
        gbc.writeMem(0x81ed, { 0x77 });
        gbc.writeMem(0xc921, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9f6c);
        EXPECT(gbc.pc(), 0x81ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ed), 0x77);
        EXPECT(gbc.readMem(0xc921), 0x5c);
        // 77 0135
        gbc.setState(0x42c2, 0x4be9, 0x8550, 0x2c34, 0x4d73, 0xd2ff, 0x1, 0x1);
        gbc.writeMem(0x42c2, { 0x77 });
        gbc.writeMem(0xd2ff, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4be9);
        EXPECT(gbc.pc(), 0x42c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ff), 0x85);
        // 77 0137
        gbc.setState(0x1a41, 0xf7a3, 0x3ff0, 0x54f1, 0xd23, 0xff6b, 0x1, 0x0);
        gbc.writeMem(0x1a41, { 0x77 });
        gbc.writeMem(0xff6b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf7a3);
        EXPECT(gbc.pc(), 0x1a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff6b), 0x3f);
        // 77 0138
        gbc.setState(0xeb0d, 0x662f, 0x9b60, 0xc823, 0x8720, 0xe2da, 0x1, 0x0);
        gbc.writeMem(0xe2da, { 0x0 });
        gbc.writeMem(0xeb0d, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x662f);
        EXPECT(gbc.pc(), 0xeb0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2da), 0x9b);
        EXPECT(gbc.readMem(0xeb0d), 0x77);
        // 77 0139
        gbc.setState(0x5723, 0xbafe, 0xb4b0, 0xdec, 0xe947, 0xd272, 0x0, 0x1);
        gbc.writeMem(0x5723, { 0x77 });
        gbc.writeMem(0xd272, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xbafe);
        EXPECT(gbc.pc(), 0x5724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd272), 0xb4);
        // 77 013F
        gbc.setState(0x9ef9, 0x27b0, 0x8a30, 0x9b47, 0xaf41, 0xf7e7, 0x0, 0x1);
        gbc.writeMem(0x9ef9, { 0x77 });
        gbc.writeMem(0xf7e7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x27b0);
        EXPECT(gbc.pc(), 0x9efa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef9), 0x77);
        EXPECT(gbc.readMem(0xf7e7), 0x8a);
        // 77 0141
        gbc.setState(0x1e4e, 0x8409, 0xcfc0, 0xe837, 0xe67d, 0x8249, 0x0, 0x1);
        gbc.writeMem(0x1e4e, { 0x77 });
        gbc.writeMem(0x8249, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8409);
        EXPECT(gbc.pc(), 0x1e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8249), 0xcf);
        // 77 0143
        gbc.setState(0x7fbb, 0x14ea, 0xe370, 0x558b, 0x1525, 0xa414, 0x1, 0x1);
        gbc.writeMem(0x7fbb, { 0x77 });
        gbc.writeMem(0xa414, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x14ea);
        EXPECT(gbc.pc(), 0x7fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa414), 0xe3);
        // 77 0145
        gbc.setState(0x48b0, 0xc82d, 0xd190, 0x8f40, 0x8d43, 0xa929, 0x0, 0x0);
        gbc.writeMem(0x48b0, { 0x77 });
        gbc.writeMem(0xa929, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc82d);
        EXPECT(gbc.pc(), 0x48b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa929), 0xd1);
        // 77 0149
        gbc.setState(0xc278, 0x16b0, 0xa940, 0x650a, 0x7a59, 0xd086, 0x0, 0x1);
        gbc.writeMem(0xc278, { 0x77 });
        gbc.writeMem(0xd086, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x16b0);
        EXPECT(gbc.pc(), 0xc279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc278), 0x77);
        EXPECT(gbc.readMem(0xd086), 0xa9);
        // 77 014B
        gbc.setState(0x6b20, 0x54d, 0xcc80, 0xceed, 0x4ae2, 0xc15d, 0x1, 0x1);
        gbc.writeMem(0x6b20, { 0x77 });
        gbc.writeMem(0xc15d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x54d);
        EXPECT(gbc.pc(), 0x6b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15d), 0xcc);
        // 77 014D
        gbc.setState(0x1946, 0xef26, 0x33a0, 0x43d8, 0xad4b, 0x9bf4, 0x1, 0x1);
        gbc.writeMem(0x1946, { 0x77 });
        gbc.writeMem(0x9bf4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xef26);
        EXPECT(gbc.pc(), 0x1947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf4), 0x33);
        // 77 014F
        gbc.setState(0x6457, 0x54b0, 0xf9c0, 0xc550, 0x3972, 0x9189, 0x0, 0x1);
        gbc.writeMem(0x6457, { 0x77 });
        gbc.writeMem(0x9189, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x54b0);
        EXPECT(gbc.pc(), 0x6458);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9189), 0xf9);
        // 77 0152
        gbc.setState(0x1ddc, 0x2742, 0x46c0, 0x9258, 0x29c5, 0xae9e, 0x0, 0x0);
        gbc.writeMem(0x1ddc, { 0x77 });
        gbc.writeMem(0xae9e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2742);
        EXPECT(gbc.pc(), 0x1ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9e), 0x46);
        // 77 0153
        gbc.setState(0xc9d8, 0x812, 0x7f70, 0x4489, 0xf636, 0x9142, 0x0, 0x1);
        gbc.writeMem(0x9142, { 0x0 });
        gbc.writeMem(0xc9d8, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x812);
        EXPECT(gbc.pc(), 0xc9d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9142), 0x7f);
        EXPECT(gbc.readMem(0xc9d8), 0x77);
        // 77 0154
        gbc.setState(0x3f10, 0x9f78, 0xbf00, 0x6aba, 0x1d13, 0xdc0a, 0x0, 0x0);
        gbc.writeMem(0x3f10, { 0x77 });
        gbc.writeMem(0xdc0a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9f78);
        EXPECT(gbc.pc(), 0x3f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc0a), 0xbf);
        // 77 0155
        gbc.setState(0x7d42, 0x6ce7, 0xcf90, 0x3348, 0x23e, 0xb80a, 0x0, 0x0);
        gbc.writeMem(0x7d42, { 0x77 });
        gbc.writeMem(0xb80a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6ce7);
        EXPECT(gbc.pc(), 0x7d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80a), 0xcf);
        // 77 0158
        gbc.setState(0xe134, 0x6ce3, 0xa840, 0x90f0, 0x9c7f, 0xc6dc, 0x0, 0x0);
        gbc.writeMem(0xc6dc, { 0x0 });
        gbc.writeMem(0xe134, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6ce3);
        EXPECT(gbc.pc(), 0xe135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6dc), 0xa8);
        EXPECT(gbc.readMem(0xe134), 0x77);
        // 77 015A
        gbc.setState(0xdb91, 0x73f8, 0xc130, 0xae, 0xb06d, 0xb2a6, 0x0, 0x0);
        gbc.writeMem(0xb2a6, { 0x0 });
        gbc.writeMem(0xdb91, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x73f8);
        EXPECT(gbc.pc(), 0xdb92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a6), 0xc1);
        EXPECT(gbc.readMem(0xdb91), 0x77);
        // 77 015C
        gbc.setState(0x8812, 0xf9d6, 0xb9a0, 0xdc71, 0xae5d, 0xeabb, 0x1, 0x0);
        gbc.writeMem(0x8812, { 0x77 });
        gbc.writeMem(0xeabb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf9d6);
        EXPECT(gbc.pc(), 0x8813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8812), 0x77);
        EXPECT(gbc.readMem(0xeabb), 0xb9);
        // 77 015D
        gbc.setState(0x2fc2, 0xf5de, 0x6510, 0x6f4b, 0xd28e, 0x8503, 0x1, 0x0);
        gbc.writeMem(0x2fc2, { 0x77 });
        gbc.writeMem(0x8503, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf5de);
        EXPECT(gbc.pc(), 0x2fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8503), 0x65);
        // 77 015F
        gbc.setState(0xa77d, 0x35dd, 0x5280, 0xad7f, 0xed06, 0xb558, 0x1, 0x1);
        gbc.writeMem(0xa77d, { 0x77 });
        gbc.writeMem(0xb558, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x35dd);
        EXPECT(gbc.pc(), 0xa77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77d), 0x77);
        EXPECT(gbc.readMem(0xb558), 0x52);
        // 77 0160
        gbc.setState(0x3b3, 0x3570, 0xf600, 0x2ab3, 0x5998, 0xdec2, 0x0, 0x0);
        gbc.writeMem(0x3b3, { 0x77 });
        gbc.writeMem(0xdec2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3570);
        EXPECT(gbc.pc(), 0x3b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec2), 0xf6);
        // 77 0162
        gbc.setState(0xe66, 0x8941, 0x8ca0, 0x72bc, 0xd49a, 0xc6d5, 0x1, 0x0);
        gbc.writeMem(0xe66, { 0x77 });
        gbc.writeMem(0xc6d5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d5), 0x8c);
        // 77 0163
        gbc.setState(0x2543, 0x445b, 0x8d10, 0x67f3, 0x56c7, 0x9a0f, 0x0, 0x0);
        gbc.writeMem(0x2543, { 0x77 });
        gbc.writeMem(0x9a0f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x445b);
        EXPECT(gbc.pc(), 0x2544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0f), 0x8d);
        // 77 0164
        gbc.setState(0x41dd, 0x8a7, 0x8250, 0x297e, 0x477f, 0xc85b, 0x0, 0x1);
        gbc.writeMem(0x41dd, { 0x77 });
        gbc.writeMem(0xc85b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8a7);
        EXPECT(gbc.pc(), 0x41de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc85b), 0x82);
        // 77 0165
        gbc.setState(0xdc99, 0xcdc, 0x26f0, 0xd69f, 0xa44, 0xd10a, 0x0, 0x0);
        gbc.writeMem(0xd10a, { 0x0 });
        gbc.writeMem(0xdc99, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcdc);
        EXPECT(gbc.pc(), 0xdc9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10a), 0x26);
        EXPECT(gbc.readMem(0xdc99), 0x77);
        // 77 0167
        gbc.setState(0x75ea, 0xcbef, 0xc040, 0x5fe, 0x5f62, 0xca30, 0x0, 0x0);
        gbc.writeMem(0x75ea, { 0x77 });
        gbc.writeMem(0xca30, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xcbef);
        EXPECT(gbc.pc(), 0x75eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca30), 0xc0);
        // 77 0168
        gbc.setState(0x1c94, 0xbcb5, 0x4bd0, 0xe0fc, 0x42a8, 0xb3bb, 0x1, 0x1);
        gbc.writeMem(0x1c94, { 0x77 });
        gbc.writeMem(0xb3bb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbcb5);
        EXPECT(gbc.pc(), 0x1c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3bb), 0x4b);
        // 77 0171
        gbc.setState(0x25dc, 0xfee4, 0xd20, 0x59ab, 0xda86, 0xe85f, 0x1, 0x1);
        gbc.writeMem(0x25dc, { 0x77 });
        gbc.writeMem(0xe85f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfee4);
        EXPECT(gbc.pc(), 0x25dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe85f), 0xd);
        // 77 0174
        gbc.setState(0x4705, 0x41ac, 0x8d80, 0x107, 0xd7bc, 0xf808, 0x1, 0x0);
        gbc.writeMem(0x4705, { 0x77 });
        gbc.writeMem(0xf808, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x41ac);
        EXPECT(gbc.pc(), 0x4706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf808), 0x8d);
        // 77 0177
        gbc.setState(0x117f, 0xe81f, 0x1470, 0xf2d2, 0x53f1, 0xc630, 0x1, 0x1);
        gbc.writeMem(0x117f, { 0x77 });
        gbc.writeMem(0xc630, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe81f);
        EXPECT(gbc.pc(), 0x1180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc630), 0x14);
        // 77 0181
        gbc.setState(0x6673, 0x3616, 0x7e90, 0xf8dd, 0xdca, 0x98f0, 0x1, 0x0);
        gbc.writeMem(0x6673, { 0x77 });
        gbc.writeMem(0x98f0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3616);
        EXPECT(gbc.pc(), 0x6674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f0), 0x7e);
        // 77 0183
        gbc.setState(0x273f, 0xcfdb, 0x3f80, 0xcb43, 0xa501, 0xc026, 0x0, 0x0);
        gbc.writeMem(0x273f, { 0x77 });
        gbc.writeMem(0xc026, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcfdb);
        EXPECT(gbc.pc(), 0x2740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc026), 0x3f);
        // 77 0188
        gbc.setState(0x10d0, 0x9ab0, 0x990, 0xec0c, 0xe904, 0xe204, 0x1, 0x0);
        gbc.writeMem(0x10d0, { 0x77 });
        gbc.writeMem(0xe204, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9ab0);
        EXPECT(gbc.pc(), 0x10d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe204), 0x9);
        // 77 0189
        gbc.setState(0x5f95, 0x6c1b, 0x73a0, 0xf799, 0x3afa, 0xf6a7, 0x0, 0x1);
        gbc.writeMem(0x5f95, { 0x77 });
        gbc.writeMem(0xf6a7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6c1b);
        EXPECT(gbc.pc(), 0x5f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6a7), 0x73);
        // 77 018A
        gbc.setState(0xe770, 0xa8d2, 0x9760, 0x3890, 0x4efa, 0xe589, 0x1, 0x0);
        gbc.writeMem(0xe589, { 0x0 });
        gbc.writeMem(0xe770, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa8d2);
        EXPECT(gbc.pc(), 0xe771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe589), 0x97);
        EXPECT(gbc.readMem(0xe770), 0x77);
        // 77 018B
        gbc.setState(0x6f2a, 0x1454, 0x19f0, 0x404, 0xe017, 0xb217, 0x1, 0x0);
        gbc.writeMem(0x6f2a, { 0x77 });
        gbc.writeMem(0xb217, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x1454);
        EXPECT(gbc.pc(), 0x6f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb217), 0x19);
        // 77 018D
        gbc.setState(0x435d, 0x74d3, 0x4180, 0x28a1, 0x6fd2, 0x9541, 0x1, 0x1);
        gbc.writeMem(0x435d, { 0x77 });
        gbc.writeMem(0x9541, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x74d3);
        EXPECT(gbc.pc(), 0x435e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9541), 0x41);
        // 77 018E
        gbc.setState(0xbc5d, 0x3bcc, 0x1f50, 0xbc8d, 0x74d5, 0xbfc8, 0x1, 0x0);
        gbc.writeMem(0xbc5d, { 0x77 });
        gbc.writeMem(0xbfc8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3bcc);
        EXPECT(gbc.pc(), 0xbc5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5d), 0x77);
        EXPECT(gbc.readMem(0xbfc8), 0x1f);
        // 77 0191
        gbc.setState(0xadf5, 0x8ae4, 0xd7c0, 0xe65d, 0x2b75, 0xf017, 0x1, 0x0);
        gbc.writeMem(0xadf5, { 0x77 });
        gbc.writeMem(0xf017, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8ae4);
        EXPECT(gbc.pc(), 0xadf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf5), 0x77);
        EXPECT(gbc.readMem(0xf017), 0xd7);
        // 77 0192
        gbc.setState(0x96fe, 0x1088, 0x5fe0, 0x878a, 0x9d4f, 0xbdf0, 0x1, 0x1);
        gbc.writeMem(0x96fe, { 0x77 });
        gbc.writeMem(0xbdf0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1088);
        EXPECT(gbc.pc(), 0x96ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96fe), 0x77);
        EXPECT(gbc.readMem(0xbdf0), 0x5f);
        // 77 0194
        gbc.setState(0x7dec, 0x9f8e, 0x8250, 0xb801, 0x4af1, 0xd0b1, 0x0, 0x1);
        gbc.writeMem(0x7dec, { 0x77 });
        gbc.writeMem(0xd0b1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9f8e);
        EXPECT(gbc.pc(), 0x7ded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b1), 0x82);
        // 77 0196
        gbc.setState(0xbc9b, 0x1962, 0x17e0, 0xdbfc, 0xfe22, 0xe5d0, 0x1, 0x1);
        gbc.writeMem(0xbc9b, { 0x77 });
        gbc.writeMem(0xe5d0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1962);
        EXPECT(gbc.pc(), 0xbc9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9b), 0x77);
        EXPECT(gbc.readMem(0xe5d0), 0x17);
        // 77 0197
        gbc.setState(0xd0c4, 0x7437, 0xc750, 0x26b3, 0xf597, 0xba02, 0x0, 0x0);
        gbc.writeMem(0xba02, { 0x0 });
        gbc.writeMem(0xd0c4, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7437);
        EXPECT(gbc.pc(), 0xd0c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba02), 0xc7);
        EXPECT(gbc.readMem(0xd0c4), 0x77);
        // 77 0198
        gbc.setState(0x81bd, 0xbeb0, 0x93c0, 0xc2a0, 0x5386, 0xe9c7, 0x0, 0x1);
        gbc.writeMem(0x81bd, { 0x77 });
        gbc.writeMem(0xe9c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbeb0);
        EXPECT(gbc.pc(), 0x81be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bd), 0x77);
        EXPECT(gbc.readMem(0xe9c7), 0x93);
        // 77 0199
        gbc.setState(0x1689, 0xcdc, 0xb4b0, 0xe088, 0x6a75, 0xc3dc, 0x0, 0x1);
        gbc.writeMem(0x1689, { 0x77 });
        gbc.writeMem(0xc3dc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcdc);
        EXPECT(gbc.pc(), 0x168a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3dc), 0xb4);
        // 77 019B
        gbc.setState(0x837c, 0x78ad, 0x4f70, 0x2c66, 0x736e, 0xf554, 0x0, 0x1);
        gbc.writeMem(0x837c, { 0x77 });
        gbc.writeMem(0xf554, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x78ad);
        EXPECT(gbc.pc(), 0x837d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837c), 0x77);
        EXPECT(gbc.readMem(0xf554), 0x4f);
        // 77 019C
        gbc.setState(0x19a4, 0x8681, 0xc020, 0xa3b9, 0x3977, 0xa8e7, 0x0, 0x0);
        gbc.writeMem(0x19a4, { 0x77 });
        gbc.writeMem(0xa8e7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8681);
        EXPECT(gbc.pc(), 0x19a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e7), 0xc0);
        // 77 019E
        gbc.setState(0x5591, 0x9f3a, 0x4b00, 0x6400, 0x8040, 0xf74d, 0x1, 0x1);
        gbc.writeMem(0x5591, { 0x77 });
        gbc.writeMem(0xf74d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9f3a);
        EXPECT(gbc.pc(), 0x5592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf74d), 0x4b);
        // 77 019F
        gbc.setState(0x8aa3, 0x4581, 0x5f80, 0x79f3, 0xa0c5, 0xc547, 0x1, 0x1);
        gbc.writeMem(0x8aa3, { 0x77 });
        gbc.writeMem(0xc547, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4581);
        EXPECT(gbc.pc(), 0x8aa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa3), 0x77);
        EXPECT(gbc.readMem(0xc547), 0x5f);
        // 77 01A0
        gbc.setState(0xea8, 0x3d58, 0x6c10, 0x3c9d, 0xd2fc, 0xf460, 0x1, 0x1);
        gbc.writeMem(0xea8, { 0x77 });
        gbc.writeMem(0xf460, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3d58);
        EXPECT(gbc.pc(), 0xea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf460), 0x6c);
        // 77 01A2
        gbc.setState(0xd890, 0xaeaf, 0x3100, 0x5220, 0x5561, 0x83ca, 0x1, 0x0);
        gbc.writeMem(0x83ca, { 0x0 });
        gbc.writeMem(0xd890, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xaeaf);
        EXPECT(gbc.pc(), 0xd891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ca), 0x31);
        EXPECT(gbc.readMem(0xd890), 0x77);
        // 77 01A3
        gbc.setState(0x8864, 0x8830, 0xb4d0, 0x5fc8, 0x942d, 0xa443, 0x0, 0x0);
        gbc.writeMem(0x8864, { 0x77 });
        gbc.writeMem(0xa443, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8830);
        EXPECT(gbc.pc(), 0x8865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8864), 0x77);
        EXPECT(gbc.readMem(0xa443), 0xb4);
        // 77 01A4
        gbc.setState(0xbe0b, 0x2d41, 0x84f0, 0x4aae, 0xc16, 0xd38c, 0x1, 0x1);
        gbc.writeMem(0xbe0b, { 0x77 });
        gbc.writeMem(0xd38c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2d41);
        EXPECT(gbc.pc(), 0xbe0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe0b), 0x77);
        EXPECT(gbc.readMem(0xd38c), 0x84);
        // 77 01A6
        gbc.setState(0x22b4, 0x6195, 0x3780, 0x2877, 0xa53a, 0xd947, 0x1, 0x1);
        gbc.writeMem(0x22b4, { 0x77 });
        gbc.writeMem(0xd947, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6195);
        EXPECT(gbc.pc(), 0x22b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd947), 0x37);
        // 77 01A9
        gbc.setState(0xd1f0, 0x7c95, 0x3450, 0xd892, 0xedba, 0x8d65, 0x0, 0x1);
        gbc.writeMem(0x8d65, { 0x0 });
        gbc.writeMem(0xd1f0, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7c95);
        EXPECT(gbc.pc(), 0xd1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d65), 0x34);
        EXPECT(gbc.readMem(0xd1f0), 0x77);
        // 77 01AA
        gbc.setState(0x1b39, 0x9728, 0xe50, 0x505, 0x273e, 0xf1ef, 0x0, 0x1);
        gbc.writeMem(0x1b39, { 0x77 });
        gbc.writeMem(0xf1ef, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9728);
        EXPECT(gbc.pc(), 0x1b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1ef), 0xe);
        // 77 01AC
        gbc.setState(0x7a29, 0x186b, 0x2480, 0xda79, 0xf2b6, 0xf886, 0x1, 0x1);
        gbc.writeMem(0x7a29, { 0x77 });
        gbc.writeMem(0xf886, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x186b);
        EXPECT(gbc.pc(), 0x7a2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf886), 0x24);
        // 77 01AD
        gbc.setState(0xa94b, 0xea35, 0x2d50, 0x7bf0, 0x4327, 0xd0e2, 0x0, 0x0);
        gbc.writeMem(0xa94b, { 0x77 });
        gbc.writeMem(0xd0e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xea35);
        EXPECT(gbc.pc(), 0xa94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94b), 0x77);
        EXPECT(gbc.readMem(0xd0e2), 0x2d);
        // 77 01AE
        gbc.setState(0x61ee, 0x284f, 0xd550, 0x1d65, 0x79a0, 0xac04, 0x1, 0x1);
        gbc.writeMem(0x61ee, { 0x77 });
        gbc.writeMem(0xac04, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x284f);
        EXPECT(gbc.pc(), 0x61ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac04), 0xd5);
        // 77 01B0
        gbc.setState(0x7a1a, 0xb1d9, 0x7030, 0x1a97, 0xa1a6, 0x975c, 0x0, 0x0);
        gbc.writeMem(0x7a1a, { 0x77 });
        gbc.writeMem(0x975c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb1d9);
        EXPECT(gbc.pc(), 0x7a1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975c), 0x70);
        // 77 01B1
        gbc.setState(0xb37b, 0x7b00, 0xea10, 0xd95c, 0x7aa7, 0x9aa4, 0x1, 0x1);
        gbc.writeMem(0x9aa4, { 0x0 });
        gbc.writeMem(0xb37b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7b00);
        EXPECT(gbc.pc(), 0xb37c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa4), 0xea);
        EXPECT(gbc.readMem(0xb37b), 0x77);
        // 77 01B3
        gbc.setState(0x7db, 0xbd94, 0xc760, 0x3be, 0xa0f1, 0xcf0c, 0x0, 0x0);
        gbc.writeMem(0x7db, { 0x77 });
        gbc.writeMem(0xcf0c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbd94);
        EXPECT(gbc.pc(), 0x7dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0c), 0xc7);
        // 77 01B5
        gbc.setState(0x7fb, 0x2a2d, 0xe420, 0xf177, 0xe0c1, 0x8b44, 0x1, 0x1);
        gbc.writeMem(0x7fb, { 0x77 });
        gbc.writeMem(0x8b44, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2a2d);
        EXPECT(gbc.pc(), 0x7fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b44), 0xe4);
        // 77 01B6
        gbc.setState(0x9d25, 0x6a78, 0x51d0, 0x8794, 0x18f3, 0xf5b6, 0x0, 0x1);
        gbc.writeMem(0x9d25, { 0x77 });
        gbc.writeMem(0xf5b6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6a78);
        EXPECT(gbc.pc(), 0x9d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d25), 0x77);
        EXPECT(gbc.readMem(0xf5b6), 0x51);
        // 77 01B8
        gbc.setState(0x889c, 0xff8d, 0xf1a0, 0x5abe, 0x9931, 0xb8d4, 0x0, 0x0);
        gbc.writeMem(0x889c, { 0x77 });
        gbc.writeMem(0xb8d4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xff8d);
        EXPECT(gbc.pc(), 0x889d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889c), 0x77);
        EXPECT(gbc.readMem(0xb8d4), 0xf1);
        // 77 01B9
        gbc.setState(0x44a3, 0x24fb, 0xc730, 0xb7cb, 0x5fb5, 0xbbc0, 0x1, 0x0);
        gbc.writeMem(0x44a3, { 0x77 });
        gbc.writeMem(0xbbc0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x24fb);
        EXPECT(gbc.pc(), 0x44a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc0), 0xc7);
        // 77 01BB
        gbc.setState(0x77a5, 0xce0e, 0x73d0, 0x1ee2, 0xd72d, 0xd1c4, 0x1, 0x1);
        gbc.writeMem(0x77a5, { 0x77 });
        gbc.writeMem(0xd1c4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xce0e);
        EXPECT(gbc.pc(), 0x77a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1c4), 0x73);
        // 77 01BC
        gbc.setState(0xabe9, 0xbacc, 0xa650, 0x1442, 0x7ec8, 0xed3d, 0x1, 0x1);
        gbc.writeMem(0xabe9, { 0x77 });
        gbc.writeMem(0xed3d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xbacc);
        EXPECT(gbc.pc(), 0xabea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe9), 0x77);
        EXPECT(gbc.readMem(0xed3d), 0xa6);
        // 77 01BE
        gbc.setState(0x9099, 0x335a, 0x6870, 0x50b8, 0xde7b, 0xfc3c, 0x1, 0x1);
        gbc.writeMem(0x9099, { 0x77 });
        gbc.writeMem(0xfc3c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x335a);
        EXPECT(gbc.pc(), 0x909a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9099), 0x77);
        EXPECT(gbc.readMem(0xfc3c), 0x68);
        // 77 01BF
        gbc.setState(0xa9c8, 0x610d, 0xf290, 0xd15a, 0xc007, 0xa005, 0x1, 0x0);
        gbc.writeMem(0xa005, { 0x0 });
        gbc.writeMem(0xa9c8, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x610d);
        EXPECT(gbc.pc(), 0xa9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa005), 0xf2);
        EXPECT(gbc.readMem(0xa9c8), 0x77);
        // 77 01C0
        gbc.setState(0x4d36, 0xeceb, 0x3a80, 0xe23f, 0x6855, 0xe398, 0x1, 0x0);
        gbc.writeMem(0x4d36, { 0x77 });
        gbc.writeMem(0xe398, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xeceb);
        EXPECT(gbc.pc(), 0x4d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe398), 0x3a);
        // 77 01C1
        gbc.setState(0x12a1, 0xd213, 0x2220, 0x6913, 0xec6b, 0xd9a0, 0x0, 0x0);
        gbc.writeMem(0x12a1, { 0x77 });
        gbc.writeMem(0xd9a0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd213);
        EXPECT(gbc.pc(), 0x12a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a0), 0x22);
        // 77 01C5
        gbc.setState(0x34ca, 0xbe39, 0xc1c0, 0xf0cc, 0x9afa, 0xd35b, 0x1, 0x0);
        gbc.writeMem(0x34ca, { 0x77 });
        gbc.writeMem(0xd35b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xbe39);
        EXPECT(gbc.pc(), 0x34cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35b), 0xc1);
        // 77 01C7
        gbc.setState(0x37a1, 0x5bf1, 0x4720, 0xd769, 0xb1af, 0xc880, 0x1, 0x1);
        gbc.writeMem(0x37a1, { 0x77 });
        gbc.writeMem(0xc880, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5bf1);
        EXPECT(gbc.pc(), 0x37a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc880), 0x47);
        // 77 01C8
        gbc.setState(0x40bf, 0xcf7f, 0x8b20, 0x570b, 0xbc88, 0xee3b, 0x1, 0x0);
        gbc.writeMem(0x40bf, { 0x77 });
        gbc.writeMem(0xee3b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xcf7f);
        EXPECT(gbc.pc(), 0x40c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee3b), 0x8b);
        // 77 01C9
        gbc.setState(0x116c, 0xdb78, 0x5960, 0x8e2, 0x5264, 0x9677, 0x0, 0x0);
        gbc.writeMem(0x116c, { 0x77 });
        gbc.writeMem(0x9677, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdb78);
        EXPECT(gbc.pc(), 0x116d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9677), 0x59);
        // 77 01CA
        gbc.setState(0xd3b5, 0x4f63, 0x7870, 0x5bef, 0x13b4, 0x9d1f, 0x1, 0x1);
        gbc.writeMem(0x9d1f, { 0x0 });
        gbc.writeMem(0xd3b5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x4f63);
        EXPECT(gbc.pc(), 0xd3b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d1f), 0x78);
        EXPECT(gbc.readMem(0xd3b5), 0x77);
        // 77 01CB
        gbc.setState(0x5655, 0x9266, 0x5b00, 0x5535, 0xe44a, 0x8772, 0x0, 0x1);
        gbc.writeMem(0x5655, { 0x77 });
        gbc.writeMem(0x8772, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9266);
        EXPECT(gbc.pc(), 0x5656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8772), 0x5b);
        // 77 01CD
        gbc.setState(0x6d3, 0x7ec5, 0x9d50, 0x3bad, 0x91c5, 0xf931, 0x1, 0x0);
        gbc.writeMem(0x6d3, { 0x77 });
        gbc.writeMem(0xf931, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7ec5);
        EXPECT(gbc.pc(), 0x6d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf931), 0x9d);
        // 77 01CF
        gbc.setState(0xebbc, 0xb148, 0xda20, 0x655b, 0x4e9d, 0xd448, 0x0, 0x1);
        gbc.writeMem(0xd448, { 0x0 });
        gbc.writeMem(0xebbc, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb148);
        EXPECT(gbc.pc(), 0xebbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd448), 0xda);
        EXPECT(gbc.readMem(0xebbc), 0x77);
        // 77 01D1
        gbc.setState(0x50a4, 0x6352, 0x8610, 0x6968, 0x169f, 0xd773, 0x0, 0x1);
        gbc.writeMem(0x50a4, { 0x77 });
        gbc.writeMem(0xd773, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6352);
        EXPECT(gbc.pc(), 0x50a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd773), 0x86);
        // 77 01D3
        gbc.setState(0x842e, 0x1ed1, 0xb220, 0xa6e6, 0x12d7, 0xe0e9, 0x0, 0x1);
        gbc.writeMem(0x842e, { 0x77 });
        gbc.writeMem(0xe0e9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1ed1);
        EXPECT(gbc.pc(), 0x842f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x842e), 0x77);
        EXPECT(gbc.readMem(0xe0e9), 0xb2);
        // 77 01D6
        gbc.setState(0x73f7, 0x471e, 0xb040, 0x9d7c, 0xf4a0, 0xf81f, 0x1, 0x0);
        gbc.writeMem(0x73f7, { 0x77 });
        gbc.writeMem(0xf81f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x471e);
        EXPECT(gbc.pc(), 0x73f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf81f), 0xb0);
        // 77 01D8
        gbc.setState(0x54f8, 0xd045, 0x92c0, 0x6831, 0x891b, 0x84bd, 0x0, 0x0);
        gbc.writeMem(0x54f8, { 0x77 });
        gbc.writeMem(0x84bd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd045);
        EXPECT(gbc.pc(), 0x54f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84bd), 0x92);
        // 77 01D9
        gbc.setState(0xcd21, 0x6772, 0x4970, 0xf85a, 0xa3bb, 0xe537, 0x0, 0x0);
        gbc.writeMem(0xcd21, { 0x77 });
        gbc.writeMem(0xe537, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6772);
        EXPECT(gbc.pc(), 0xcd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd21), 0x77);
        EXPECT(gbc.readMem(0xe537), 0x49);
        // 77 01DA
        gbc.setState(0x2a25, 0xb13b, 0x150, 0x43aa, 0x3cf2, 0x972b, 0x0, 0x1);
        gbc.writeMem(0x2a25, { 0x77 });
        gbc.writeMem(0x972b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb13b);
        EXPECT(gbc.pc(), 0x2a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x972b), 0x1);
        // 77 01DC
        gbc.setState(0x56de, 0x6b88, 0xae40, 0xd916, 0x6976, 0x9a14, 0x0, 0x1);
        gbc.writeMem(0x56de, { 0x77 });
        gbc.writeMem(0x9a14, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6b88);
        EXPECT(gbc.pc(), 0x56df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a14), 0xae);
        // 77 01DE
        gbc.setState(0x7808, 0x2e17, 0x4710, 0x735b, 0x8a9b, 0xa6fa, 0x0, 0x0);
        gbc.writeMem(0x7808, { 0x77 });
        gbc.writeMem(0xa6fa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2e17);
        EXPECT(gbc.pc(), 0x7809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6fa), 0x47);
        // 77 01E1
        gbc.setState(0x45fe, 0xae0e, 0xab60, 0x9e7a, 0xf610, 0x892b, 0x0, 0x1);
        gbc.writeMem(0x45fe, { 0x77 });
        gbc.writeMem(0x892b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xae0e);
        EXPECT(gbc.pc(), 0x45ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x892b), 0xab);
        // 77 01E8
        gbc.setState(0x80b7, 0xcaf7, 0xb4d0, 0x8eab, 0xe00a, 0xf563, 0x0, 0x0);
        gbc.writeMem(0x80b7, { 0x77 });
        gbc.writeMem(0xf563, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcaf7);
        EXPECT(gbc.pc(), 0x80b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b7), 0x77);
        EXPECT(gbc.readMem(0xf563), 0xb4);
        // 77 01EA
        gbc.setState(0xd142, 0x4b2, 0xc1b0, 0x769, 0x3dda, 0xe445, 0x1, 0x0);
        gbc.writeMem(0xd142, { 0x77 });
        gbc.writeMem(0xe445, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4b2);
        EXPECT(gbc.pc(), 0xd143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd142), 0x77);
        EXPECT(gbc.readMem(0xe445), 0xc1);
        // 77 01EB
        gbc.setState(0x3eb6, 0x90cf, 0x6d00, 0x26c4, 0x27e, 0xd53c, 0x1, 0x0);
        gbc.writeMem(0x3eb6, { 0x77 });
        gbc.writeMem(0xd53c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x90cf);
        EXPECT(gbc.pc(), 0x3eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53c), 0x6d);
        // 77 01F0
        gbc.setState(0x4e42, 0x540f, 0x66c0, 0x2a14, 0x5791, 0x9d0d, 0x1, 0x1);
        gbc.writeMem(0x4e42, { 0x77 });
        gbc.writeMem(0x9d0d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x540f);
        EXPECT(gbc.pc(), 0x4e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d0d), 0x66);
        // 77 01F1
        gbc.setState(0xc2ae, 0xac2d, 0xd920, 0x7820, 0x38fd, 0xedc7, 0x1, 0x1);
        gbc.writeMem(0xc2ae, { 0x77 });
        gbc.writeMem(0xedc7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xac2d);
        EXPECT(gbc.pc(), 0xc2af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ae), 0x77);
        EXPECT(gbc.readMem(0xedc7), 0xd9);
        // 77 01F2
        gbc.setState(0x6ef1, 0x7a40, 0xfd90, 0x8f77, 0x1d8d, 0xe094, 0x0, 0x1);
        gbc.writeMem(0x6ef1, { 0x77 });
        gbc.writeMem(0xe094, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7a40);
        EXPECT(gbc.pc(), 0x6ef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe094), 0xfd);
        // 77 01F5
        gbc.setState(0x502e, 0x2287, 0x3d90, 0xed73, 0xd6e5, 0xd273, 0x1, 0x0);
        gbc.writeMem(0x502e, { 0x77 });
        gbc.writeMem(0xd273, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2287);
        EXPECT(gbc.pc(), 0x502f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd273), 0x3d);
        // 77 01F9
        gbc.setState(0xecba, 0x8379, 0x2bf0, 0xa5ef, 0xee86, 0xc2dd, 0x0, 0x0);
        gbc.writeMem(0xc2dd, { 0x0 });
        gbc.writeMem(0xecba, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8379);
        EXPECT(gbc.pc(), 0xecbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2dd), 0x2b);
        EXPECT(gbc.readMem(0xecba), 0x77);
        // 77 01FE
        gbc.setState(0xbfe5, 0xbc7c, 0x30, 0x84cc, 0x862a, 0x764e, 0x1, 0x1);
        gbc.writeMem(0x764e, { 0x0 });
        gbc.writeMem(0xbfe5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbc7c);
        EXPECT(gbc.pc(), 0xbfe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe5), 0x77);
        // 77 01FF
        gbc.setState(0x9931, 0x66f2, 0xa310, 0xca63, 0xe1f7, 0xdf7e, 0x1, 0x1);
        gbc.writeMem(0x9931, { 0x77 });
        gbc.writeMem(0xdf7e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x66f2);
        EXPECT(gbc.pc(), 0x9932);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9931), 0x77);
        EXPECT(gbc.readMem(0xdf7e), 0xa3);
        // 77 0200
        gbc.setState(0x71b1, 0x605f, 0xbe20, 0x6bd1, 0xbf3e, 0xfb8b, 0x0, 0x1);
        gbc.writeMem(0x71b1, { 0x77 });
        gbc.writeMem(0xfb8b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x605f);
        EXPECT(gbc.pc(), 0x71b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb8b), 0xbe);
        // 77 0203
        gbc.setState(0x9d80, 0xd635, 0xdc30, 0x7f57, 0x237d, 0xc2c4, 0x1, 0x0);
        gbc.writeMem(0x9d80, { 0x77 });
        gbc.writeMem(0xc2c4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd635);
        EXPECT(gbc.pc(), 0x9d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d80), 0x77);
        EXPECT(gbc.readMem(0xc2c4), 0xdc);
        // 77 0206
        gbc.setState(0x1a0f, 0x93a, 0x5bc0, 0x83c3, 0xa830, 0xee96, 0x1, 0x0);
        gbc.writeMem(0x1a0f, { 0x77 });
        gbc.writeMem(0xee96, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x93a);
        EXPECT(gbc.pc(), 0x1a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee96), 0x5b);
        // 77 0207
        gbc.setState(0x531e, 0x3cad, 0xdaf0, 0x2814, 0x1fe4, 0xa489, 0x0, 0x0);
        gbc.writeMem(0x531e, { 0x77 });
        gbc.writeMem(0xa489, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3cad);
        EXPECT(gbc.pc(), 0x531f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa489), 0xda);
        // 77 020A
        gbc.setState(0x8648, 0xe6d9, 0x5c10, 0x1236, 0x6604, 0xdf42, 0x1, 0x1);
        gbc.writeMem(0x8648, { 0x77 });
        gbc.writeMem(0xdf42, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe6d9);
        EXPECT(gbc.pc(), 0x8649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8648), 0x77);
        EXPECT(gbc.readMem(0xdf42), 0x5c);
        // 77 020B
        gbc.setState(0xb03d, 0x1221, 0xa1b0, 0xdfd0, 0xdc2f, 0x90e3, 0x0, 0x1);
        gbc.writeMem(0x90e3, { 0x0 });
        gbc.writeMem(0xb03d, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1221);
        EXPECT(gbc.pc(), 0xb03e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e3), 0xa1);
        EXPECT(gbc.readMem(0xb03d), 0x77);
        // 77 020C
        gbc.setState(0x3142, 0x458b, 0x2940, 0x6373, 0x3d87, 0xf8c2, 0x1, 0x1);
        gbc.writeMem(0x3142, { 0x77 });
        gbc.writeMem(0xf8c2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x458b);
        EXPECT(gbc.pc(), 0x3143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8c2), 0x29);
        // 77 020D
        gbc.setState(0x6779, 0x6f3e, 0xce70, 0xf1cf, 0xd26d, 0xd902, 0x1, 0x0);
        gbc.writeMem(0x6779, { 0x77 });
        gbc.writeMem(0xd902, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6f3e);
        EXPECT(gbc.pc(), 0x677a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd902), 0xce);
        // 77 020F
        gbc.setState(0x36ca, 0xa4c4, 0xfa10, 0x4054, 0x7474, 0xe5c8, 0x0, 0x0);
        gbc.writeMem(0x36ca, { 0x77 });
        gbc.writeMem(0xe5c8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa4c4);
        EXPECT(gbc.pc(), 0x36cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c8), 0xfa);
        // 77 0210
        gbc.setState(0x69d2, 0xc708, 0x19c0, 0x3bc9, 0xfca2, 0x9bf4, 0x0, 0x0);
        gbc.writeMem(0x69d2, { 0x77 });
        gbc.writeMem(0x9bf4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc708);
        EXPECT(gbc.pc(), 0x69d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf4), 0x19);
        // 77 0211
        gbc.setState(0xcf35, 0x448d, 0x29b0, 0xb19a, 0x17cd, 0xf87f, 0x1, 0x1);
        gbc.writeMem(0xcf35, { 0x77 });
        gbc.writeMem(0xf87f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x448d);
        EXPECT(gbc.pc(), 0xcf36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf35), 0x77);
        EXPECT(gbc.readMem(0xf87f), 0x29);
        // 77 0212
        gbc.setState(0x3a3, 0xddc2, 0x1350, 0xd011, 0x76f2, 0x8764, 0x0, 0x1);
        gbc.writeMem(0x3a3, { 0x77 });
        gbc.writeMem(0x8764, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xddc2);
        EXPECT(gbc.pc(), 0x3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8764), 0x13);
        // 77 0214
        gbc.setState(0xe48d, 0xd7ba, 0x25a0, 0xbed, 0xf222, 0xc998, 0x1, 0x1);
        gbc.writeMem(0xc998, { 0x0 });
        gbc.writeMem(0xe48d, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd7ba);
        EXPECT(gbc.pc(), 0xe48e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc998), 0x25);
        EXPECT(gbc.readMem(0xe48d), 0x77);
        // 77 0216
        gbc.setState(0x16e7, 0xe199, 0xec20, 0x8652, 0x7d5c, 0x9586, 0x0, 0x1);
        gbc.writeMem(0x16e7, { 0x77 });
        gbc.writeMem(0x9586, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe199);
        EXPECT(gbc.pc(), 0x16e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9586), 0xec);
        // 77 0217
        gbc.setState(0x9e3, 0xc898, 0x35f0, 0x67ba, 0x4457, 0xbce3, 0x0, 0x0);
        gbc.writeMem(0x9e3, { 0x77 });
        gbc.writeMem(0xbce3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc898);
        EXPECT(gbc.pc(), 0x9e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce3), 0x35);
        // 77 0219
        gbc.setState(0xbdce, 0xc4c9, 0x4ea0, 0xa26f, 0x64b8, 0xbab1, 0x0, 0x0);
        gbc.writeMem(0xbab1, { 0x0 });
        gbc.writeMem(0xbdce, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc4c9);
        EXPECT(gbc.pc(), 0xbdcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab1), 0x4e);
        EXPECT(gbc.readMem(0xbdce), 0x77);
        // 77 021A
        gbc.setState(0x7e8f, 0xbd35, 0x7fd0, 0x56ee, 0x2471, 0xe219, 0x0, 0x1);
        gbc.writeMem(0x7e8f, { 0x77 });
        gbc.writeMem(0xe219, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbd35);
        EXPECT(gbc.pc(), 0x7e90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe219), 0x7f);
        // 77 021B
        gbc.setState(0xd7cc, 0x1bae, 0xa2b0, 0x9962, 0xaa6f, 0x8a85, 0x1, 0x0);
        gbc.writeMem(0x8a85, { 0x0 });
        gbc.writeMem(0xd7cc, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1bae);
        EXPECT(gbc.pc(), 0xd7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a85), 0xa2);
        EXPECT(gbc.readMem(0xd7cc), 0x77);
        // 77 021E
        gbc.setState(0x4314, 0x318b, 0x1280, 0xfd13, 0x1e15, 0xa85c, 0x1, 0x1);
        gbc.writeMem(0x4314, { 0x77 });
        gbc.writeMem(0xa85c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x318b);
        EXPECT(gbc.pc(), 0x4315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa85c), 0x12);
        // 77 021F
        gbc.setState(0xb03b, 0x9620, 0x20b0, 0x5a4b, 0xc5c7, 0xa1dd, 0x0, 0x0);
        gbc.writeMem(0xa1dd, { 0x0 });
        gbc.writeMem(0xb03b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9620);
        EXPECT(gbc.pc(), 0xb03c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1dd), 0x20);
        EXPECT(gbc.readMem(0xb03b), 0x77);
        // 77 0222
        gbc.setState(0x1bc4, 0x8935, 0xc490, 0xa42f, 0x5a59, 0x9315, 0x0, 0x0);
        gbc.writeMem(0x1bc4, { 0x77 });
        gbc.writeMem(0x9315, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8935);
        EXPECT(gbc.pc(), 0x1bc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9315), 0xc4);
        // 77 0224
        gbc.setState(0x19d2, 0x8220, 0x5b40, 0xddba, 0x4f66, 0xafde, 0x0, 0x1);
        gbc.writeMem(0x19d2, { 0x77 });
        gbc.writeMem(0xafde, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8220);
        EXPECT(gbc.pc(), 0x19d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafde), 0x5b);
        // 77 0226
        gbc.setState(0x6490, 0x3224, 0xccf0, 0xb3fc, 0xf666, 0x86fc, 0x0, 0x1);
        gbc.writeMem(0x6490, { 0x77 });
        gbc.writeMem(0x86fc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3224);
        EXPECT(gbc.pc(), 0x6491);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86fc), 0xcc);
        // 77 022A
        gbc.setState(0x605b, 0xf9ab, 0xe6e0, 0x788b, 0x5114, 0xe038, 0x1, 0x1);
        gbc.writeMem(0x605b, { 0x77 });
        gbc.writeMem(0xe038, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf9ab);
        EXPECT(gbc.pc(), 0x605c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe038), 0xe6);
        // 77 022C
        gbc.setState(0x9aa, 0x799c, 0xe3c0, 0x93dd, 0xf15e, 0x88fd, 0x1, 0x0);
        gbc.writeMem(0x9aa, { 0x77 });
        gbc.writeMem(0x88fd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x799c);
        EXPECT(gbc.pc(), 0x9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88fd), 0xe3);
        // 77 022D
        gbc.setState(0xe300, 0x80e3, 0xbba0, 0x838, 0x4335, 0xb990, 0x0, 0x0);
        gbc.writeMem(0xb990, { 0x0 });
        gbc.writeMem(0xe300, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x80e3);
        EXPECT(gbc.pc(), 0xe301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb990), 0xbb);
        EXPECT(gbc.readMem(0xe300), 0x77);
        // 77 022F
        gbc.setState(0xb8fc, 0x1573, 0x21d0, 0x23c8, 0xa7e, 0xa37b, 0x0, 0x0);
        gbc.writeMem(0xa37b, { 0x0 });
        gbc.writeMem(0xb8fc, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1573);
        EXPECT(gbc.pc(), 0xb8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa37b), 0x21);
        EXPECT(gbc.readMem(0xb8fc), 0x77);
        // 77 0230
        gbc.setState(0x843c, 0xccf6, 0x5570, 0xc8e4, 0x9f79, 0xbd83, 0x0, 0x0);
        gbc.writeMem(0x843c, { 0x77 });
        gbc.writeMem(0xbd83, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xccf6);
        EXPECT(gbc.pc(), 0x843d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x843c), 0x77);
        EXPECT(gbc.readMem(0xbd83), 0x55);
        // 77 0232
        gbc.setState(0x460, 0x2bf6, 0xa050, 0x3add, 0x1b27, 0xc521, 0x1, 0x0);
        gbc.writeMem(0x460, { 0x77 });
        gbc.writeMem(0xc521, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2bf6);
        EXPECT(gbc.pc(), 0x461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc521), 0xa0);
        // 77 0233
        gbc.setState(0x4a9, 0xe8a3, 0xc650, 0x1a67, 0xc66e, 0xbe91, 0x1, 0x1);
        gbc.writeMem(0x4a9, { 0x77 });
        gbc.writeMem(0xbe91, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe8a3);
        EXPECT(gbc.pc(), 0x4aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe91), 0xc6);
        // 77 0236
        gbc.setState(0x515, 0xf089, 0x31a0, 0x6cd9, 0x6cfa, 0xd844, 0x0, 0x1);
        gbc.writeMem(0x515, { 0x77 });
        gbc.writeMem(0xd844, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf089);
        EXPECT(gbc.pc(), 0x516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd844), 0x31);
        // 77 0238
        gbc.setState(0xb7b5, 0x7686, 0x2150, 0x795b, 0xc449, 0xadf1, 0x1, 0x1);
        gbc.writeMem(0xadf1, { 0x0 });
        gbc.writeMem(0xb7b5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7686);
        EXPECT(gbc.pc(), 0xb7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf1), 0x21);
        EXPECT(gbc.readMem(0xb7b5), 0x77);
        // 77 023A
        gbc.setState(0xccf1, 0x13c8, 0x31e0, 0x72f4, 0x46c1, 0xcd4b, 0x0, 0x1);
        gbc.writeMem(0xccf1, { 0x77 });
        gbc.writeMem(0xcd4b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x13c8);
        EXPECT(gbc.pc(), 0xccf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf1), 0x77);
        EXPECT(gbc.readMem(0xcd4b), 0x31);
        // 77 023B
        gbc.setState(0xd67a, 0xed25, 0x3830, 0x3d68, 0x6d45, 0xf4e3, 0x0, 0x0);
        gbc.writeMem(0xd67a, { 0x77 });
        gbc.writeMem(0xf4e3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xed25);
        EXPECT(gbc.pc(), 0xd67b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67a), 0x77);
        EXPECT(gbc.readMem(0xf4e3), 0x38);
        // 77 0240
        gbc.setState(0x2d95, 0x4e50, 0xca80, 0xe2f5, 0x1d0f, 0xec1e, 0x0, 0x0);
        gbc.writeMem(0x2d95, { 0x77 });
        gbc.writeMem(0xec1e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4e50);
        EXPECT(gbc.pc(), 0x2d96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec1e), 0xca);
        // 77 0241
        gbc.setState(0xc205, 0x29ca, 0xecf0, 0x8ee3, 0xbee5, 0xbe0b, 0x1, 0x0);
        gbc.writeMem(0xbe0b, { 0x0 });
        gbc.writeMem(0xc205, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x29ca);
        EXPECT(gbc.pc(), 0xc206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe0b), 0xec);
        EXPECT(gbc.readMem(0xc205), 0x77);
        // 77 0242
        gbc.setState(0x440, 0xa3b1, 0xe850, 0x6893, 0x5452, 0xaa47, 0x1, 0x0);
        gbc.writeMem(0x440, { 0x77 });
        gbc.writeMem(0xaa47, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa3b1);
        EXPECT(gbc.pc(), 0x441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa47), 0xe8);
        // 77 0243
        gbc.setState(0x5f52, 0xaf7a, 0x7a0, 0x39e2, 0x466d, 0xb524, 0x0, 0x1);
        gbc.writeMem(0x5f52, { 0x77 });
        gbc.writeMem(0xb524, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xaf7a);
        EXPECT(gbc.pc(), 0x5f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb524), 0x7);
        // 77 0245
        gbc.setState(0x8c50, 0x99d6, 0xb070, 0x3bd0, 0x6216, 0xdbb5, 0x0, 0x0);
        gbc.writeMem(0x8c50, { 0x77 });
        gbc.writeMem(0xdbb5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x99d6);
        EXPECT(gbc.pc(), 0x8c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c50), 0x77);
        EXPECT(gbc.readMem(0xdbb5), 0xb0);
        // 77 0246
        gbc.setState(0x38b2, 0xdf95, 0xd7f0, 0x60ab, 0x971e, 0x9254, 0x1, 0x1);
        gbc.writeMem(0x38b2, { 0x77 });
        gbc.writeMem(0x9254, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdf95);
        EXPECT(gbc.pc(), 0x38b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9254), 0xd7);
        // 77 0249
        gbc.setState(0x5dff, 0x25e5, 0xb990, 0x4124, 0xe908, 0xbdf8, 0x0, 0x0);
        gbc.writeMem(0x5dff, { 0x77 });
        gbc.writeMem(0xbdf8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x25e5);
        EXPECT(gbc.pc(), 0x5e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf8), 0xb9);
        // 77 024A
        gbc.setState(0x26b6, 0x314a, 0xab10, 0x9a59, 0x5aa, 0x8dd6, 0x1, 0x0);
        gbc.writeMem(0x26b6, { 0x77 });
        gbc.writeMem(0x8dd6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x314a);
        EXPECT(gbc.pc(), 0x26b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd6), 0xab);
        // 77 024B
        gbc.setState(0x59fa, 0xb599, 0xe0c0, 0xe865, 0xc409, 0x96e9, 0x0, 0x0);
        gbc.writeMem(0x59fa, { 0x77 });
        gbc.writeMem(0x96e9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb599);
        EXPECT(gbc.pc(), 0x59fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e9), 0xe0);
        // 77 024C
        gbc.setState(0x99b9, 0xe3da, 0xd950, 0x1332, 0x7ea8, 0xaf76, 0x1, 0x1);
        gbc.writeMem(0x99b9, { 0x77 });
        gbc.writeMem(0xaf76, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe3da);
        EXPECT(gbc.pc(), 0x99ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b9), 0x77);
        EXPECT(gbc.readMem(0xaf76), 0xd9);
        // 77 0250
        gbc.setState(0x72fb, 0x14d, 0xdaf0, 0x38b5, 0xd563, 0xf72b, 0x1, 0x0);
        gbc.writeMem(0x72fb, { 0x77 });
        gbc.writeMem(0xf72b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x14d);
        EXPECT(gbc.pc(), 0x72fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf72b), 0xda);
        // 77 0252
        gbc.setState(0x24ae, 0x1b8f, 0xd6f0, 0x65db, 0xc283, 0xc5a6, 0x0, 0x1);
        gbc.writeMem(0x24ae, { 0x77 });
        gbc.writeMem(0xc5a6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x1b8f);
        EXPECT(gbc.pc(), 0x24af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a6), 0xd6);
        // 77 0255
        gbc.setState(0x1113, 0xf63c, 0x7690, 0x55e, 0x8710, 0x8033, 0x1, 0x0);
        gbc.writeMem(0x1113, { 0x77 });
        gbc.writeMem(0x8033, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf63c);
        EXPECT(gbc.pc(), 0x1114);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8033), 0x76);
        // 77 0259
        gbc.setState(0xc1eb, 0xe91a, 0x62d0, 0xe4d2, 0x1067, 0xaa05, 0x1, 0x1);
        gbc.writeMem(0xaa05, { 0x0 });
        gbc.writeMem(0xc1eb, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe91a);
        EXPECT(gbc.pc(), 0xc1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa05), 0x62);
        EXPECT(gbc.readMem(0xc1eb), 0x77);
        // 77 025A
        gbc.setState(0x366d, 0x30bd, 0x810, 0x274b, 0xbd9f, 0x801f, 0x0, 0x1);
        gbc.writeMem(0x366d, { 0x77 });
        gbc.writeMem(0x801f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x30bd);
        EXPECT(gbc.pc(), 0x366e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x801f), 0x8);
        // 77 025C
        gbc.setState(0x4df5, 0xb473, 0x88d0, 0xa3e9, 0x3b3b, 0xe5d3, 0x1, 0x1);
        gbc.writeMem(0x4df5, { 0x77 });
        gbc.writeMem(0xe5d3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb473);
        EXPECT(gbc.pc(), 0x4df6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d3), 0x88);
        // 77 025E
        gbc.setState(0x4435, 0xe1eb, 0x8a0, 0x48c1, 0x7b26, 0xc951, 0x0, 0x0);
        gbc.writeMem(0x4435, { 0x77 });
        gbc.writeMem(0xc951, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe1eb);
        EXPECT(gbc.pc(), 0x4436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc951), 0x8);
        // 77 025F
        gbc.setState(0x6afd, 0x5d70, 0x60d0, 0x6225, 0x5e03, 0xdc99, 0x0, 0x1);
        gbc.writeMem(0x6afd, { 0x77 });
        gbc.writeMem(0xdc99, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5d70);
        EXPECT(gbc.pc(), 0x6afe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc99), 0x60);
        // 77 0260
        gbc.setState(0xfc1, 0xdbcc, 0x94a0, 0xf47b, 0x3a5b, 0xfefb, 0x0, 0x1);
        gbc.writeMem(0xfc1, { 0x77 });
        gbc.writeMem(0xfefb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdbcc);
        EXPECT(gbc.pc(), 0xfc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfefb), 0x94);
        // 77 0262
        gbc.setState(0xe49f, 0xaef1, 0xa070, 0x63c3, 0x2c8, 0x8aa8, 0x0, 0x0);
        gbc.writeMem(0x8aa8, { 0x0 });
        gbc.writeMem(0xe49f, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0xe4a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa8), 0xa0);
        EXPECT(gbc.readMem(0xe49f), 0x77);
        // 77 0263
        gbc.setState(0x7097, 0x974e, 0xca80, 0xa72f, 0x5b95, 0xa2df, 0x1, 0x1);
        gbc.writeMem(0x7097, { 0x77 });
        gbc.writeMem(0xa2df, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x974e);
        EXPECT(gbc.pc(), 0x7098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2df), 0xca);
        // 77 0265
        gbc.setState(0xb35e, 0x5ebf, 0x2d30, 0x94c5, 0xa3a5, 0xdbff, 0x1, 0x1);
        gbc.writeMem(0xb35e, { 0x77 });
        gbc.writeMem(0xdbff, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5ebf);
        EXPECT(gbc.pc(), 0xb35f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35e), 0x77);
        EXPECT(gbc.readMem(0xdbff), 0x2d);
        // 77 0266
        gbc.setState(0xa66, 0x479c, 0xcd10, 0xee6a, 0x6451, 0xe5e8, 0x1, 0x1);
        gbc.writeMem(0xa66, { 0x77 });
        gbc.writeMem(0xe5e8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x479c);
        EXPECT(gbc.pc(), 0xa67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e8), 0xcd);
        // 77 026B
        gbc.setState(0xc07, 0x2c4b, 0x2180, 0x7193, 0x470a, 0xbccd, 0x1, 0x1);
        gbc.writeMem(0xc07, { 0x77 });
        gbc.writeMem(0xbccd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2c4b);
        EXPECT(gbc.pc(), 0xc08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbccd), 0x21);
        // 77 026D
        gbc.setState(0x7a87, 0xac7, 0xee60, 0x88c8, 0xbaf2, 0x8be4, 0x1, 0x1);
        gbc.writeMem(0x7a87, { 0x77 });
        gbc.writeMem(0x8be4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xac7);
        EXPECT(gbc.pc(), 0x7a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8be4), 0xee);
        // 77 026E
        gbc.setState(0xe974, 0x804c, 0x8950, 0xe2f1, 0x20fd, 0xd375, 0x0, 0x0);
        gbc.writeMem(0xd375, { 0x0 });
        gbc.writeMem(0xe974, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x804c);
        EXPECT(gbc.pc(), 0xe975);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd375), 0x89);
        EXPECT(gbc.readMem(0xe974), 0x77);
        // 77 026F
        gbc.setState(0x92b5, 0x4045, 0xd0b0, 0xf9b8, 0x2b99, 0x8a82, 0x1, 0x0);
        gbc.writeMem(0x8a82, { 0x0 });
        gbc.writeMem(0x92b5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4045);
        EXPECT(gbc.pc(), 0x92b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a82), 0xd0);
        EXPECT(gbc.readMem(0x92b5), 0x77);
        // 77 0270
        gbc.setState(0xe1d5, 0xdeca, 0xf780, 0xab4d, 0x37b0, 0xfe1a, 0x0, 0x1);
        gbc.writeMem(0xe1d5, { 0x77 });
        gbc.writeMem(0xfe1a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xdeca);
        EXPECT(gbc.pc(), 0xe1d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1d5), 0x77);
        EXPECT(gbc.readMem(0xfe1a), 0xf7);
        // 77 0271
        gbc.setState(0xc5b7, 0x4fb8, 0x18c0, 0x75dc, 0xf8b6, 0xc4ac, 0x1, 0x0);
        gbc.writeMem(0xc4ac, { 0x0 });
        gbc.writeMem(0xc5b7, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4fb8);
        EXPECT(gbc.pc(), 0xc5b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ac), 0x18);
        EXPECT(gbc.readMem(0xc5b7), 0x77);
        // 77 0278
        gbc.setState(0x7fc9, 0xae7c, 0x6860, 0xd66, 0x1c4a, 0x850b, 0x1, 0x0);
        gbc.writeMem(0x7fc9, { 0x77 });
        gbc.writeMem(0x850b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xae7c);
        EXPECT(gbc.pc(), 0x7fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850b), 0x68);
        // 77 0279
        gbc.setState(0xca9a, 0xd2de, 0xb120, 0x4307, 0xbdb3, 0xb99b, 0x1, 0x1);
        gbc.writeMem(0xb99b, { 0x0 });
        gbc.writeMem(0xca9a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xd2de);
        EXPECT(gbc.pc(), 0xca9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99b), 0xb1);
        EXPECT(gbc.readMem(0xca9a), 0x77);
        // 77 027A
        gbc.setState(0x2785, 0x5b72, 0x5fe0, 0xc81d, 0xdf04, 0xf4ab, 0x0, 0x1);
        gbc.writeMem(0x2785, { 0x77 });
        gbc.writeMem(0xf4ab, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5b72);
        EXPECT(gbc.pc(), 0x2786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4ab), 0x5f);
        // 77 027C
        gbc.setState(0xbf93, 0x3290, 0xd0, 0x8fde, 0x5cff, 0x12bf, 0x1, 0x1);
        gbc.writeMem(0x12bf, { 0x0 });
        gbc.writeMem(0xbf93, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3290);
        EXPECT(gbc.pc(), 0xbf94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf93), 0x77);
        // 77 027F
        gbc.setState(0x17f1, 0x1469, 0x5ec0, 0xb74, 0x6b17, 0xc623, 0x1, 0x1);
        gbc.writeMem(0x17f1, { 0x77 });
        gbc.writeMem(0xc623, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1469);
        EXPECT(gbc.pc(), 0x17f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc623), 0x5e);
        // 77 0284
        gbc.setState(0xa8a8, 0x411a, 0xb100, 0x2b58, 0xfdfd, 0xc6bd, 0x0, 0x0);
        gbc.writeMem(0xa8a8, { 0x77 });
        gbc.writeMem(0xc6bd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x411a);
        EXPECT(gbc.pc(), 0xa8a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0x77);
        EXPECT(gbc.readMem(0xc6bd), 0xb1);
        // 77 0287
        gbc.setState(0x4893, 0x46f0, 0x6320, 0x3f24, 0x5d89, 0xc569, 0x0, 0x1);
        gbc.writeMem(0x4893, { 0x77 });
        gbc.writeMem(0xc569, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x46f0);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc569), 0x63);
        // 77 0289
        gbc.setState(0xe816, 0x394d, 0x9e0, 0xc89, 0xa7ee, 0xcfe4, 0x0, 0x1);
        gbc.writeMem(0xcfe4, { 0x0 });
        gbc.writeMem(0xe816, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x394d);
        EXPECT(gbc.pc(), 0xe817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe4), 0x9);
        EXPECT(gbc.readMem(0xe816), 0x77);
        // 77 028A
        gbc.setState(0x4635, 0x6b23, 0xe500, 0x519d, 0x2069, 0x9044, 0x1, 0x0);
        gbc.writeMem(0x4635, { 0x77 });
        gbc.writeMem(0x9044, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6b23);
        EXPECT(gbc.pc(), 0x4636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9044), 0xe5);
        // 77 028B
        gbc.setState(0x3c41, 0x98eb, 0xd620, 0x1c2d, 0xc332, 0xaf67, 0x0, 0x1);
        gbc.writeMem(0x3c41, { 0x77 });
        gbc.writeMem(0xaf67, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x98eb);
        EXPECT(gbc.pc(), 0x3c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf67), 0xd6);
        // 77 028D
        gbc.setState(0x821a, 0xab4c, 0xcf00, 0x6e5, 0x3f32, 0xfa3c, 0x0, 0x0);
        gbc.writeMem(0x821a, { 0x77 });
        gbc.writeMem(0xfa3c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xab4c);
        EXPECT(gbc.pc(), 0x821b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821a), 0x77);
        EXPECT(gbc.readMem(0xfa3c), 0xcf);
        // 77 028E
        gbc.setState(0x149, 0x2b9c, 0xfc90, 0x957, 0xae76, 0xb514, 0x0, 0x1);
        gbc.writeMem(0x149, { 0x77 });
        gbc.writeMem(0xb514, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2b9c);
        EXPECT(gbc.pc(), 0x14a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb514), 0xfc);
        // 77 028F
        gbc.setState(0xe6ce, 0x6678, 0x450, 0x46aa, 0xf6b1, 0x9912, 0x0, 0x0);
        gbc.writeMem(0x9912, { 0x0 });
        gbc.writeMem(0xe6ce, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6678);
        EXPECT(gbc.pc(), 0xe6cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9912), 0x4);
        EXPECT(gbc.readMem(0xe6ce), 0x77);
        // 77 0290
        gbc.setState(0x7eef, 0x10ae, 0x6710, 0xd88d, 0xc913, 0xda00, 0x0, 0x0);
        gbc.writeMem(0x7eef, { 0x77 });
        gbc.writeMem(0xda00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x10ae);
        EXPECT(gbc.pc(), 0x7ef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda00), 0x67);
        // 77 0294
        gbc.setState(0x330d, 0x464b, 0x4890, 0xb0cf, 0x1b99, 0xf5ba, 0x0, 0x0);
        gbc.writeMem(0x330d, { 0x77 });
        gbc.writeMem(0xf5ba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x464b);
        EXPECT(gbc.pc(), 0x330e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5ba), 0x48);
        // 77 0295
        gbc.setState(0x7e42, 0x76c2, 0x2760, 0xc2c4, 0x7ba9, 0xe649, 0x1, 0x1);
        gbc.writeMem(0x7e42, { 0x77 });
        gbc.writeMem(0xe649, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x76c2);
        EXPECT(gbc.pc(), 0x7e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe649), 0x27);
        // 77 0299
        gbc.setState(0x7b82, 0xabee, 0xc0d0, 0x78d2, 0x7ce9, 0xd1e6, 0x0, 0x1);
        gbc.writeMem(0x7b82, { 0x77 });
        gbc.writeMem(0xd1e6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xabee);
        EXPECT(gbc.pc(), 0x7b83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e6), 0xc0);
        // 77 029D
        gbc.setState(0x839e, 0x5346, 0xd5a0, 0x88af, 0x9ca4, 0xb83d, 0x1, 0x0);
        gbc.writeMem(0x839e, { 0x77 });
        gbc.writeMem(0xb83d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5346);
        EXPECT(gbc.pc(), 0x839f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x839e), 0x77);
        EXPECT(gbc.readMem(0xb83d), 0xd5);
        // 77 02A3
        gbc.setState(0x83a6, 0xb290, 0x7d80, 0x7400, 0x76cf, 0xe910, 0x1, 0x1);
        gbc.writeMem(0x83a6, { 0x77 });
        gbc.writeMem(0xe910, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb290);
        EXPECT(gbc.pc(), 0x83a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a6), 0x77);
        EXPECT(gbc.readMem(0xe910), 0x7d);
        // 77 02A6
        gbc.setState(0xef82, 0xb107, 0xa8a0, 0x5c38, 0xc60c, 0xa9e0, 0x0, 0x1);
        gbc.writeMem(0xa9e0, { 0x0 });
        gbc.writeMem(0xef82, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb107);
        EXPECT(gbc.pc(), 0xef83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e0), 0xa8);
        EXPECT(gbc.readMem(0xef82), 0x77);
        // 77 02A8
        gbc.setState(0xcb7c, 0x704b, 0xe700, 0x8da6, 0xd66a, 0xf278, 0x0, 0x1);
        gbc.writeMem(0xcb7c, { 0x77 });
        gbc.writeMem(0xf278, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x704b);
        EXPECT(gbc.pc(), 0xcb7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0x77);
        EXPECT(gbc.readMem(0xf278), 0xe7);
        // 77 02AD
        gbc.setState(0x7ed1, 0x82d2, 0x86d0, 0xf985, 0xa23b, 0xb764, 0x1, 0x0);
        gbc.writeMem(0x7ed1, { 0x77 });
        gbc.writeMem(0xb764, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x82d2);
        EXPECT(gbc.pc(), 0x7ed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb764), 0x86);
        // 77 02AE
        gbc.setState(0x1ed, 0x1f1b, 0x9b20, 0xadea, 0x342f, 0xbc01, 0x0, 0x1);
        gbc.writeMem(0x1ed, { 0x77 });
        gbc.writeMem(0xbc01, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1f1b);
        EXPECT(gbc.pc(), 0x1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc01), 0x9b);
        // 77 02AF
        gbc.setState(0x70f3, 0x5c90, 0x32e0, 0xee82, 0x9b5d, 0x9d4f, 0x0, 0x1);
        gbc.writeMem(0x70f3, { 0x77 });
        gbc.writeMem(0x9d4f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5c90);
        EXPECT(gbc.pc(), 0x70f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4f), 0x32);
        // 77 02B0
        gbc.setState(0x3e67, 0x86c1, 0x2e80, 0xebe7, 0x6ddc, 0xda9e, 0x1, 0x0);
        gbc.writeMem(0x3e67, { 0x77 });
        gbc.writeMem(0xda9e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x86c1);
        EXPECT(gbc.pc(), 0x3e68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda9e), 0x2e);
        // 77 02B3
        gbc.setState(0x31bc, 0xe2a9, 0x9d80, 0xc832, 0xcf5e, 0xa674, 0x1, 0x1);
        gbc.writeMem(0x31bc, { 0x77 });
        gbc.writeMem(0xa674, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe2a9);
        EXPECT(gbc.pc(), 0x31bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa674), 0x9d);
        // 77 02B9
        gbc.setState(0x33bb, 0x894d, 0x34e0, 0xe99b, 0x2417, 0xf8e5, 0x1, 0x1);
        gbc.writeMem(0x33bb, { 0x77 });
        gbc.writeMem(0xf8e5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x894d);
        EXPECT(gbc.pc(), 0x33bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8e5), 0x34);
        // 77 02BC
        gbc.setState(0x80fe, 0x24c6, 0x4000, 0xd76d, 0x27e6, 0x87be, 0x0, 0x1);
        gbc.writeMem(0x80fe, { 0x77 });
        gbc.writeMem(0x87be, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x24c6);
        EXPECT(gbc.pc(), 0x80ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80fe), 0x77);
        EXPECT(gbc.readMem(0x87be), 0x40);
        // 77 02BF
        gbc.setState(0xdf8d, 0xe26b, 0xd390, 0x7415, 0x3f95, 0xf78f, 0x0, 0x0);
        gbc.writeMem(0xdf8d, { 0x77 });
        gbc.writeMem(0xf78f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe26b);
        EXPECT(gbc.pc(), 0xdf8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8d), 0x77);
        EXPECT(gbc.readMem(0xf78f), 0xd3);
        // 77 02C0
        gbc.setState(0xb6a8, 0x978d, 0xd6a0, 0x3b59, 0xc26d, 0xf227, 0x0, 0x1);
        gbc.writeMem(0xb6a8, { 0x77 });
        gbc.writeMem(0xf227, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x978d);
        EXPECT(gbc.pc(), 0xb6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a8), 0x77);
        EXPECT(gbc.readMem(0xf227), 0xd6);
        // 77 02C1
        gbc.setState(0x631e, 0x4a45, 0x25d0, 0x9581, 0x48d2, 0xc655, 0x1, 0x1);
        gbc.writeMem(0x631e, { 0x77 });
        gbc.writeMem(0xc655, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4a45);
        EXPECT(gbc.pc(), 0x631f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc655), 0x25);
        // 77 02C3
        gbc.setState(0xa6ed, 0x7654, 0x31e0, 0xa2ba, 0x51a1, 0xecda, 0x0, 0x0);
        gbc.writeMem(0xa6ed, { 0x77 });
        gbc.writeMem(0xecda, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7654);
        EXPECT(gbc.pc(), 0xa6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ed), 0x77);
        EXPECT(gbc.readMem(0xecda), 0x31);
        // 77 02C6
        gbc.setState(0x3d90, 0x3ffd, 0x57e0, 0x7d5c, 0xd9f3, 0xf030, 0x0, 0x0);
        gbc.writeMem(0x3d90, { 0x77 });
        gbc.writeMem(0xf030, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3ffd);
        EXPECT(gbc.pc(), 0x3d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf030), 0x57);
        // 77 02C7
        gbc.setState(0x512, 0xf998, 0x6f0, 0xeb93, 0x7ddc, 0xb681, 0x1, 0x0);
        gbc.writeMem(0x512, { 0x77 });
        gbc.writeMem(0xb681, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf998);
        EXPECT(gbc.pc(), 0x513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb681), 0x6);
        // 77 02C8
        gbc.setState(0x8e29, 0x4ea4, 0x6920, 0xc595, 0x3bb8, 0xd6ba, 0x0, 0x1);
        gbc.writeMem(0x8e29, { 0x77 });
        gbc.writeMem(0xd6ba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4ea4);
        EXPECT(gbc.pc(), 0x8e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e29), 0x77);
        EXPECT(gbc.readMem(0xd6ba), 0x69);
        // 77 02CA
        gbc.setState(0xd6fe, 0xa63b, 0x2f30, 0x43e, 0x5e93, 0xad40, 0x1, 0x1);
        gbc.writeMem(0xad40, { 0x0 });
        gbc.writeMem(0xd6fe, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa63b);
        EXPECT(gbc.pc(), 0xd6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad40), 0x2f);
        EXPECT(gbc.readMem(0xd6fe), 0x77);
        // 77 02CD
        gbc.setState(0xbb5f, 0x755, 0x5880, 0x692a, 0xf218, 0xfa97, 0x1, 0x1);
        gbc.writeMem(0xbb5f, { 0x77 });
        gbc.writeMem(0xfa97, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x755);
        EXPECT(gbc.pc(), 0xbb60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb5f), 0x77);
        EXPECT(gbc.readMem(0xfa97), 0x58);
        // 77 02D0
        gbc.setState(0x52c3, 0x1747, 0x8b40, 0x8516, 0xec32, 0x9652, 0x1, 0x1);
        gbc.writeMem(0x52c3, { 0x77 });
        gbc.writeMem(0x9652, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1747);
        EXPECT(gbc.pc(), 0x52c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9652), 0x8b);
        // 77 02D2
        gbc.setState(0xd1da, 0x7cab, 0xb4c0, 0xc301, 0xe1b4, 0xd5f6, 0x1, 0x0);
        gbc.writeMem(0xd1da, { 0x77 });
        gbc.writeMem(0xd5f6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7cab);
        EXPECT(gbc.pc(), 0xd1db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1da), 0x77);
        EXPECT(gbc.readMem(0xd5f6), 0xb4);
        // 77 02D6
        gbc.setState(0x1422, 0x7b96, 0xb450, 0x1d01, 0x6819, 0x8be6, 0x1, 0x1);
        gbc.writeMem(0x1422, { 0x77 });
        gbc.writeMem(0x8be6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7b96);
        EXPECT(gbc.pc(), 0x1423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8be6), 0xb4);
        // 77 02D9
        gbc.setState(0x69a9, 0x3a11, 0xb8c0, 0x9a0, 0x4cde, 0xea6b, 0x1, 0x1);
        gbc.writeMem(0x69a9, { 0x77 });
        gbc.writeMem(0xea6b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3a11);
        EXPECT(gbc.pc(), 0x69aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea6b), 0xb8);
        // 77 02DE
        gbc.setState(0x330e, 0xc9b4, 0x1020, 0x9f24, 0xef5, 0xe765, 0x0, 0x1);
        gbc.writeMem(0x330e, { 0x77 });
        gbc.writeMem(0xe765, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc9b4);
        EXPECT(gbc.pc(), 0x330f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe765), 0x10);
        // 77 02DF
        gbc.setState(0x2673, 0x77a7, 0x7fe0, 0x233c, 0x10e2, 0x85cb, 0x0, 0x0);
        gbc.writeMem(0x2673, { 0x77 });
        gbc.writeMem(0x85cb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x77a7);
        EXPECT(gbc.pc(), 0x2674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85cb), 0x7f);
        // 77 02E0
        gbc.setState(0x3233, 0x8b16, 0x9550, 0x79dc, 0x407, 0xc6bb, 0x1, 0x1);
        gbc.writeMem(0x3233, { 0x77 });
        gbc.writeMem(0xc6bb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8b16);
        EXPECT(gbc.pc(), 0x3234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6bb), 0x95);
        // 77 02E3
        gbc.setState(0xd2a3, 0xf83a, 0x94b0, 0xce53, 0xbc7d, 0xa509, 0x0, 0x0);
        gbc.writeMem(0xa509, { 0x0 });
        gbc.writeMem(0xd2a3, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf83a);
        EXPECT(gbc.pc(), 0xd2a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa509), 0x94);
        EXPECT(gbc.readMem(0xd2a3), 0x77);
        // 77 02E4
        gbc.setState(0xeb20, 0x35dd, 0x3660, 0x2dff, 0x8b22, 0x8213, 0x1, 0x1);
        gbc.writeMem(0x8213, { 0x0 });
        gbc.writeMem(0xeb20, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x35dd);
        EXPECT(gbc.pc(), 0xeb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8213), 0x36);
        EXPECT(gbc.readMem(0xeb20), 0x77);
        // 77 02E6
        gbc.setState(0x3474, 0x4293, 0xdcc0, 0xe768, 0x9e7a, 0x881b, 0x0, 0x1);
        gbc.writeMem(0x3474, { 0x77 });
        gbc.writeMem(0x881b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x4293);
        EXPECT(gbc.pc(), 0x3475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881b), 0xdc);
        // 77 02EB
        gbc.setState(0xb574, 0x9310, 0x1e80, 0xf1ad, 0xf512, 0x8ea8, 0x0, 0x0);
        gbc.writeMem(0x8ea8, { 0x0 });
        gbc.writeMem(0xb574, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9310);
        EXPECT(gbc.pc(), 0xb575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea8), 0x1e);
        EXPECT(gbc.readMem(0xb574), 0x77);
        // 77 02ED
        gbc.setState(0xdb0b, 0x4c46, 0x6210, 0x9bf6, 0x533f, 0xa86a, 0x1, 0x1);
        gbc.writeMem(0xa86a, { 0x0 });
        gbc.writeMem(0xdb0b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4c46);
        EXPECT(gbc.pc(), 0xdb0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa86a), 0x62);
        EXPECT(gbc.readMem(0xdb0b), 0x77);
        // 77 02EE
        gbc.setState(0xeccb, 0xdbfd, 0x6b30, 0x2433, 0x767a, 0x94b8, 0x1, 0x0);
        gbc.writeMem(0x94b8, { 0x0 });
        gbc.writeMem(0xeccb, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdbfd);
        EXPECT(gbc.pc(), 0xeccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94b8), 0x6b);
        EXPECT(gbc.readMem(0xeccb), 0x77);
        // 77 02EF
        gbc.setState(0x4e69, 0xa6e3, 0xa8b0, 0xb415, 0x9853, 0xbf13, 0x0, 0x1);
        gbc.writeMem(0x4e69, { 0x77 });
        gbc.writeMem(0xbf13, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa6e3);
        EXPECT(gbc.pc(), 0x4e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf13), 0xa8);
        // 77 02F0
        gbc.setState(0xd2cc, 0x793d, 0xd5b0, 0x1fb8, 0xf6ac, 0xe1ba, 0x0, 0x0);
        gbc.writeMem(0xd2cc, { 0x77 });
        gbc.writeMem(0xe1ba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x793d);
        EXPECT(gbc.pc(), 0xd2cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2cc), 0x77);
        EXPECT(gbc.readMem(0xe1ba), 0xd5);
        // 77 02F5
        gbc.setState(0x1ef8, 0x9717, 0x14b0, 0x5816, 0xe5ae, 0xffda, 0x1, 0x0);
        gbc.writeMem(0x1ef8, { 0x77 });
        gbc.writeMem(0xffda, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9717);
        EXPECT(gbc.pc(), 0x1ef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffda), 0x14);
        // 77 02FA
        gbc.setState(0x8492, 0xc9b7, 0xf1a0, 0x696c, 0x51b, 0xbadc, 0x0, 0x0);
        gbc.writeMem(0x8492, { 0x77 });
        gbc.writeMem(0xbadc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc9b7);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8492), 0x77);
        EXPECT(gbc.readMem(0xbadc), 0xf1);
        // 77 02FB
        gbc.setState(0x85cc, 0xc185, 0x2c70, 0x1abc, 0x9de, 0xa4a8, 0x0, 0x1);
        gbc.writeMem(0x85cc, { 0x77 });
        gbc.writeMem(0xa4a8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc185);
        EXPECT(gbc.pc(), 0x85cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cc), 0x77);
        EXPECT(gbc.readMem(0xa4a8), 0x2c);
        // 77 02FC
        gbc.setState(0x75df, 0x5ce, 0xebf0, 0xbd46, 0xb685, 0xcbfa, 0x0, 0x1);
        gbc.writeMem(0x75df, { 0x77 });
        gbc.writeMem(0xcbfa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5ce);
        EXPECT(gbc.pc(), 0x75e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbfa), 0xeb);
        // 77 02FF
        gbc.setState(0x33da, 0xc023, 0x97d0, 0x8dfd, 0xb97e, 0xf092, 0x1, 0x0);
        gbc.writeMem(0x33da, { 0x77 });
        gbc.writeMem(0xf092, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc023);
        EXPECT(gbc.pc(), 0x33db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf092), 0x97);
        // 77 0300
        gbc.setState(0x4038, 0xc39b, 0xf10, 0xa624, 0xc6d7, 0xf1f6, 0x0, 0x0);
        gbc.writeMem(0x4038, { 0x77 });
        gbc.writeMem(0xf1f6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc39b);
        EXPECT(gbc.pc(), 0x4039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1f6), 0xf);
        // 77 0303
        gbc.setState(0x5b60, 0x3f90, 0x61f0, 0x4eda, 0x388b, 0xec4e, 0x0, 0x0);
        gbc.writeMem(0x5b60, { 0x77 });
        gbc.writeMem(0xec4e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3f90);
        EXPECT(gbc.pc(), 0x5b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec4e), 0x61);
        // 77 0304
        gbc.setState(0xde38, 0xb7cd, 0xf0, 0xb6d1, 0x6c7d, 0xe59, 0x1, 0x0);
        gbc.writeMem(0xe59, { 0x0 });
        gbc.writeMem(0xde38, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb7cd);
        EXPECT(gbc.pc(), 0xde39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde38), 0x77);
        // 77 0307
        gbc.setState(0x719, 0xf5ad, 0xe1a0, 0x78bc, 0x9a4e, 0xb6a4, 0x0, 0x1);
        gbc.writeMem(0x719, { 0x77 });
        gbc.writeMem(0xb6a4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf5ad);
        EXPECT(gbc.pc(), 0x71a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a4), 0xe1);
        // 77 0309
        gbc.setState(0x5fe7, 0xc44f, 0xb240, 0x6cec, 0x59e2, 0x91ce, 0x0, 0x0);
        gbc.writeMem(0x5fe7, { 0x77 });
        gbc.writeMem(0x91ce, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc44f);
        EXPECT(gbc.pc(), 0x5fe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ce), 0xb2);
        // 77 030B
        gbc.setState(0xa5fc, 0x1acf, 0x8100, 0x74f5, 0x3950, 0x855d, 0x1, 0x1);
        gbc.writeMem(0x855d, { 0x0 });
        gbc.writeMem(0xa5fc, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1acf);
        EXPECT(gbc.pc(), 0xa5fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x855d), 0x81);
        EXPECT(gbc.readMem(0xa5fc), 0x77);
        // 77 030C
        gbc.setState(0xef74, 0xef2d, 0xf010, 0x6f3f, 0x2265, 0xc4df, 0x0, 0x0);
        gbc.writeMem(0xc4df, { 0x0 });
        gbc.writeMem(0xef74, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xef2d);
        EXPECT(gbc.pc(), 0xef75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4df), 0xf0);
        EXPECT(gbc.readMem(0xef74), 0x77);
        // 77 030D
        gbc.setState(0x3a77, 0x3aba, 0xe610, 0xeb5a, 0x43b4, 0xcbbd, 0x0, 0x0);
        gbc.writeMem(0x3a77, { 0x77 });
        gbc.writeMem(0xcbbd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3aba);
        EXPECT(gbc.pc(), 0x3a78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbbd), 0xe6);
        // 77 030F
        gbc.setState(0x56dd, 0xbb17, 0x3b20, 0xf17d, 0xf488, 0x9355, 0x1, 0x0);
        gbc.writeMem(0x56dd, { 0x77 });
        gbc.writeMem(0x9355, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xbb17);
        EXPECT(gbc.pc(), 0x56de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9355), 0x3b);
        // 77 0310
        gbc.setState(0x7e1a, 0x99e5, 0x9680, 0x987d, 0x5320, 0x930d, 0x1, 0x1);
        gbc.writeMem(0x7e1a, { 0x77 });
        gbc.writeMem(0x930d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x99e5);
        EXPECT(gbc.pc(), 0x7e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930d), 0x96);
        // 77 0311
        gbc.setState(0x19d9, 0x5521, 0x28d0, 0x8fff, 0xfad8, 0xfa55, 0x0, 0x1);
        gbc.writeMem(0x19d9, { 0x77 });
        gbc.writeMem(0xfa55, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5521);
        EXPECT(gbc.pc(), 0x19da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa55), 0x28);
        // 77 0312
        gbc.setState(0x26e9, 0xb28f, 0x1630, 0x9fae, 0x63dc, 0xe8a7, 0x0, 0x0);
        gbc.writeMem(0x26e9, { 0x77 });
        gbc.writeMem(0xe8a7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb28f);
        EXPECT(gbc.pc(), 0x26ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a7), 0x16);
        // 77 0313
        gbc.setState(0x2582, 0xf302, 0x1150, 0x564e, 0xc8fb, 0xd8a5, 0x0, 0x0);
        gbc.writeMem(0x2582, { 0x77 });
        gbc.writeMem(0xd8a5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf302);
        EXPECT(gbc.pc(), 0x2583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8a5), 0x11);
        // 77 0315
        gbc.setState(0x2d9a, 0xb70, 0xb150, 0xe0f3, 0xc94d, 0xb7e0, 0x1, 0x0);
        gbc.writeMem(0x2d9a, { 0x77 });
        gbc.writeMem(0xb7e0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb70);
        EXPECT(gbc.pc(), 0x2d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7e0), 0xb1);
        // 77 0316
        gbc.setState(0x9d0a, 0xceee, 0xff80, 0x27a5, 0x12e6, 0xdc92, 0x1, 0x0);
        gbc.writeMem(0x9d0a, { 0x77 });
        gbc.writeMem(0xdc92, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0x9d0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d0a), 0x77);
        EXPECT(gbc.readMem(0xdc92), 0xff);
        // 77 0317
        gbc.setState(0xa9ed, 0x1a02, 0x21b0, 0x8d3c, 0x95b4, 0x83fa, 0x0, 0x1);
        gbc.writeMem(0x83fa, { 0x0 });
        gbc.writeMem(0xa9ed, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1a02);
        EXPECT(gbc.pc(), 0xa9ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83fa), 0x21);
        EXPECT(gbc.readMem(0xa9ed), 0x77);
        // 77 0318
        gbc.setState(0xe315, 0x4df8, 0x8950, 0xcde2, 0x4057, 0xd048, 0x0, 0x0);
        gbc.writeMem(0xd048, { 0x0 });
        gbc.writeMem(0xe315, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4df8);
        EXPECT(gbc.pc(), 0xe316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd048), 0x89);
        EXPECT(gbc.readMem(0xe315), 0x77);
        // 77 0319
        gbc.setState(0x793b, 0x16a, 0x7920, 0x6301, 0xc31d, 0xd818, 0x1, 0x0);
        gbc.writeMem(0x793b, { 0x77 });
        gbc.writeMem(0xd818, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x16a);
        EXPECT(gbc.pc(), 0x793c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd818), 0x79);
        // 77 031C
        gbc.setState(0x56af, 0xe77a, 0x7640, 0xece3, 0x592e, 0xb09e, 0x0, 0x0);
        gbc.writeMem(0x56af, { 0x77 });
        gbc.writeMem(0xb09e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe77a);
        EXPECT(gbc.pc(), 0x56b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09e), 0x76);
        // 77 031D
        gbc.setState(0x8940, 0x2821, 0x4f70, 0x59a2, 0x6a93, 0x9f10, 0x0, 0x1);
        gbc.writeMem(0x8940, { 0x77 });
        gbc.writeMem(0x9f10, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2821);
        EXPECT(gbc.pc(), 0x8941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8940), 0x77);
        EXPECT(gbc.readMem(0x9f10), 0x4f);
        // 77 031E
        gbc.setState(0x847d, 0x23e, 0x6220, 0x2142, 0x75a8, 0xaddd, 0x0, 0x1);
        gbc.writeMem(0x847d, { 0x77 });
        gbc.writeMem(0xaddd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x23e);
        EXPECT(gbc.pc(), 0x847e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x847d), 0x77);
        EXPECT(gbc.readMem(0xaddd), 0x62);
        // 77 031F
        gbc.setState(0x2303, 0x4b74, 0x8010, 0xb70f, 0xdddd, 0xb08b, 0x1, 0x0);
        gbc.writeMem(0x2303, { 0x77 });
        gbc.writeMem(0xb08b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4b74);
        EXPECT(gbc.pc(), 0x2304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb08b), 0x80);
        // 77 0320
        gbc.setState(0xcc6, 0x21f9, 0x1340, 0x853f, 0xdf01, 0xdc61, 0x1, 0x0);
        gbc.writeMem(0xcc6, { 0x77 });
        gbc.writeMem(0xdc61, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x21f9);
        EXPECT(gbc.pc(), 0xcc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc61), 0x13);
        // 77 0324
        gbc.setState(0xb370, 0xb961, 0xefd0, 0xf464, 0x5518, 0xd3c8, 0x1, 0x0);
        gbc.writeMem(0xb370, { 0x77 });
        gbc.writeMem(0xd3c8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb961);
        EXPECT(gbc.pc(), 0xb371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb370), 0x77);
        EXPECT(gbc.readMem(0xd3c8), 0xef);
        // 77 0325
        gbc.setState(0xcaec, 0x6f91, 0x7d80, 0x7eef, 0xb8c6, 0xca52, 0x1, 0x0);
        gbc.writeMem(0xca52, { 0x0 });
        gbc.writeMem(0xcaec, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6f91);
        EXPECT(gbc.pc(), 0xcaed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca52), 0x7d);
        EXPECT(gbc.readMem(0xcaec), 0x77);
        // 77 0327
        gbc.setState(0x459e, 0xcbfe, 0x7280, 0x13a, 0xc575, 0xeb59, 0x0, 0x0);
        gbc.writeMem(0x459e, { 0x77 });
        gbc.writeMem(0xeb59, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xcbfe);
        EXPECT(gbc.pc(), 0x459f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb59), 0x72);
        // 77 032A
        gbc.setState(0x1da8, 0x52ae, 0x91a0, 0x8e8f, 0x83d6, 0xd71c, 0x0, 0x0);
        gbc.writeMem(0x1da8, { 0x77 });
        gbc.writeMem(0xd71c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x52ae);
        EXPECT(gbc.pc(), 0x1da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd71c), 0x91);
        // 77 032B
        gbc.setState(0x1884, 0x64d, 0x720, 0x12d5, 0x4859, 0xaefa, 0x0, 0x1);
        gbc.writeMem(0x1884, { 0x77 });
        gbc.writeMem(0xaefa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x64d);
        EXPECT(gbc.pc(), 0x1885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaefa), 0x7);
        // 77 0331
        gbc.setState(0x14c2, 0xb4ba, 0x5cc0, 0x28d4, 0x7e02, 0xf7fb, 0x0, 0x1);
        gbc.writeMem(0x14c2, { 0x77 });
        gbc.writeMem(0xf7fb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb4ba);
        EXPECT(gbc.pc(), 0x14c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf7fb), 0x5c);
        // 77 0332
        gbc.setState(0x79e3, 0xd633, 0x5360, 0xb9e9, 0x2f4f, 0x9e4c, 0x1, 0x0);
        gbc.writeMem(0x79e3, { 0x77 });
        gbc.writeMem(0x9e4c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd633);
        EXPECT(gbc.pc(), 0x79e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4c), 0x53);
        // 77 0333
        gbc.setState(0x710e, 0xe250, 0x70f0, 0x2b86, 0xe1d8, 0x874a, 0x0, 0x0);
        gbc.writeMem(0x710e, { 0x77 });
        gbc.writeMem(0x874a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe250);
        EXPECT(gbc.pc(), 0x710f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x874a), 0x70);
        // 77 0335
        gbc.setState(0x8c88, 0x46f0, 0xfef0, 0xf15d, 0xc303, 0xd78e, 0x0, 0x1);
        gbc.writeMem(0x8c88, { 0x77 });
        gbc.writeMem(0xd78e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x46f0);
        EXPECT(gbc.pc(), 0x8c89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c88), 0x77);
        EXPECT(gbc.readMem(0xd78e), 0xfe);
        // 77 0339
        gbc.setState(0xa881, 0xab0b, 0x6a90, 0x591f, 0xb629, 0xb051, 0x1, 0x0);
        gbc.writeMem(0xa881, { 0x77 });
        gbc.writeMem(0xb051, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xab0b);
        EXPECT(gbc.pc(), 0xa882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa881), 0x77);
        EXPECT(gbc.readMem(0xb051), 0x6a);
        // 77 033A
        gbc.setState(0xd309, 0x6775, 0xf270, 0x9a12, 0xf7d7, 0x8097, 0x1, 0x1);
        gbc.writeMem(0x8097, { 0x0 });
        gbc.writeMem(0xd309, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6775);
        EXPECT(gbc.pc(), 0xd30a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8097), 0xf2);
        EXPECT(gbc.readMem(0xd309), 0x77);
        // 77 033D
        gbc.setState(0x63cf, 0x1cef, 0xec20, 0x1c18, 0xca07, 0x9113, 0x1, 0x1);
        gbc.writeMem(0x63cf, { 0x77 });
        gbc.writeMem(0x9113, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1cef);
        EXPECT(gbc.pc(), 0x63d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9113), 0xec);
        // 77 033E
        gbc.setState(0xd174, 0xbdbf, 0xef00, 0xba0a, 0x7118, 0xf921, 0x1, 0x0);
        gbc.writeMem(0xd174, { 0x77 });
        gbc.writeMem(0xf921, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xbdbf);
        EXPECT(gbc.pc(), 0xd175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd174), 0x77);
        EXPECT(gbc.readMem(0xf921), 0xef);
        // 77 033F
        gbc.setState(0x59ba, 0xba1a, 0x3a0, 0x57d3, 0xc3e0, 0x8403, 0x1, 0x1);
        gbc.writeMem(0x59ba, { 0x77 });
        gbc.writeMem(0x8403, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xba1a);
        EXPECT(gbc.pc(), 0x59bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8403), 0x3);
        // 77 0340
        gbc.setState(0xb208, 0x1100, 0xa090, 0x5568, 0xb511, 0x8f4d, 0x1, 0x1);
        gbc.writeMem(0x8f4d, { 0x0 });
        gbc.writeMem(0xb208, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1100);
        EXPECT(gbc.pc(), 0xb209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f4d), 0xa0);
        EXPECT(gbc.readMem(0xb208), 0x77);
        // 77 0348
        gbc.setState(0x1d4e, 0xae50, 0x48a0, 0x6c49, 0x789a, 0xec26, 0x0, 0x0);
        gbc.writeMem(0x1d4e, { 0x77 });
        gbc.writeMem(0xec26, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xae50);
        EXPECT(gbc.pc(), 0x1d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec26), 0x48);
        // 77 034B
        gbc.setState(0x2ca, 0xe884, 0xca00, 0x93e1, 0x63c5, 0x9eaa, 0x1, 0x0);
        gbc.writeMem(0x2ca, { 0x77 });
        gbc.writeMem(0x9eaa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe884);
        EXPECT(gbc.pc(), 0x2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eaa), 0xca);
        // 77 034C
        gbc.setState(0x9493, 0x899c, 0x9040, 0xab12, 0xc786, 0xd7c4, 0x0, 0x1);
        gbc.writeMem(0x9493, { 0x77 });
        gbc.writeMem(0xd7c4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x899c);
        EXPECT(gbc.pc(), 0x9494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9493), 0x77);
        EXPECT(gbc.readMem(0xd7c4), 0x90);
        // 77 0350
        gbc.setState(0xc55a, 0xf79e, 0x7010, 0x1b47, 0x68c5, 0x9c99, 0x0, 0x0);
        gbc.writeMem(0x9c99, { 0x0 });
        gbc.writeMem(0xc55a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf79e);
        EXPECT(gbc.pc(), 0xc55b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c99), 0x70);
        EXPECT(gbc.readMem(0xc55a), 0x77);
        // 77 0353
        gbc.setState(0x5da9, 0xe8cf, 0xd320, 0x2bcf, 0x93ac, 0xd918, 0x1, 0x0);
        gbc.writeMem(0x5da9, { 0x77 });
        gbc.writeMem(0xd918, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe8cf);
        EXPECT(gbc.pc(), 0x5daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd918), 0xd3);
        // 77 0354
        gbc.setState(0x93b5, 0x62d2, 0x4770, 0xd033, 0x6147, 0xb751, 0x1, 0x1);
        gbc.writeMem(0x93b5, { 0x77 });
        gbc.writeMem(0xb751, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x62d2);
        EXPECT(gbc.pc(), 0x93b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93b5), 0x77);
        EXPECT(gbc.readMem(0xb751), 0x47);
        // 77 0355
        gbc.setState(0xd5ba, 0xfad2, 0xdf00, 0x9323, 0x1305, 0xf84f, 0x1, 0x1);
        gbc.writeMem(0xd5ba, { 0x77 });
        gbc.writeMem(0xf84f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfad2);
        EXPECT(gbc.pc(), 0xd5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ba), 0x77);
        EXPECT(gbc.readMem(0xf84f), 0xdf);
        // 77 0356
        gbc.setState(0x8cc8, 0x3adc, 0x12c0, 0x9e30, 0xc32b, 0x85d5, 0x1, 0x0);
        gbc.writeMem(0x85d5, { 0x0 });
        gbc.writeMem(0x8cc8, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3adc);
        EXPECT(gbc.pc(), 0x8cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d5), 0x12);
        EXPECT(gbc.readMem(0x8cc8), 0x77);
        // 77 0358
        gbc.setState(0x5667, 0x3531, 0xd1e0, 0x4b2e, 0xa7ea, 0x93ad, 0x1, 0x1);
        gbc.writeMem(0x5667, { 0x77 });
        gbc.writeMem(0x93ad, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3531);
        EXPECT(gbc.pc(), 0x5668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ad), 0xd1);
        // 77 035A
        gbc.setState(0x2082, 0x39d3, 0x4cf0, 0x97ad, 0xefbc, 0x9bbd, 0x1, 0x0);
        gbc.writeMem(0x2082, { 0x77 });
        gbc.writeMem(0x9bbd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x39d3);
        EXPECT(gbc.pc(), 0x2083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bbd), 0x4c);
        // 77 035B
        gbc.setState(0xe085, 0x5d18, 0xd330, 0x1d9f, 0x7602, 0xad05, 0x1, 0x0);
        gbc.writeMem(0xad05, { 0x0 });
        gbc.writeMem(0xe085, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5d18);
        EXPECT(gbc.pc(), 0xe086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad05), 0xd3);
        EXPECT(gbc.readMem(0xe085), 0x77);
        // 77 035C
        gbc.setState(0x780b, 0x6402, 0x1ba0, 0x36f6, 0xec05, 0xd87a, 0x1, 0x1);
        gbc.writeMem(0x780b, { 0x77 });
        gbc.writeMem(0xd87a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6402);
        EXPECT(gbc.pc(), 0x780c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd87a), 0x1b);
        // 77 035E
        gbc.setState(0xe310, 0x51f2, 0xe690, 0x87a5, 0x1805, 0xac93, 0x0, 0x1);
        gbc.writeMem(0xac93, { 0x0 });
        gbc.writeMem(0xe310, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x51f2);
        EXPECT(gbc.pc(), 0xe311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac93), 0xe6);
        EXPECT(gbc.readMem(0xe310), 0x77);
        // 77 035F
        gbc.setState(0xd9aa, 0x2da0, 0xd270, 0xed2b, 0xb10, 0xac05, 0x1, 0x1);
        gbc.writeMem(0xac05, { 0x0 });
        gbc.writeMem(0xd9aa, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2da0);
        EXPECT(gbc.pc(), 0xd9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac05), 0xd2);
        EXPECT(gbc.readMem(0xd9aa), 0x77);
        // 77 0360
        gbc.setState(0x9496, 0x92e9, 0x49b0, 0x66b, 0xcbbf, 0xb84b, 0x1, 0x0);
        gbc.writeMem(0x9496, { 0x77 });
        gbc.writeMem(0xb84b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x92e9);
        EXPECT(gbc.pc(), 0x9497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9496), 0x77);
        EXPECT(gbc.readMem(0xb84b), 0x49);
        // 77 0361
        gbc.setState(0xcaf2, 0x96eb, 0x4fd0, 0x1c53, 0x1a83, 0xe88b, 0x0, 0x1);
        gbc.writeMem(0xcaf2, { 0x77 });
        gbc.writeMem(0xe88b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x96eb);
        EXPECT(gbc.pc(), 0xcaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf2), 0x77);
        EXPECT(gbc.readMem(0xe88b), 0x4f);
        // 77 0362
        gbc.setState(0xde3b, 0xef18, 0x5f80, 0xb24c, 0x9263, 0xfeef, 0x1, 0x1);
        gbc.writeMem(0xde3b, { 0x77 });
        gbc.writeMem(0xfeef, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xef18);
        EXPECT(gbc.pc(), 0xde3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde3b), 0x77);
        EXPECT(gbc.readMem(0xfeef), 0x5f);
        // 77 0364
        gbc.setState(0x2915, 0x5dfe, 0x4db0, 0x3e27, 0x825f, 0xf32a, 0x1, 0x0);
        gbc.writeMem(0x2915, { 0x77 });
        gbc.writeMem(0xf32a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5dfe);
        EXPECT(gbc.pc(), 0x2916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf32a), 0x4d);
        // 77 0366
        gbc.setState(0x28cb, 0x472f, 0xd430, 0x27af, 0xd75a, 0xc814, 0x0, 0x1);
        gbc.writeMem(0x28cb, { 0x77 });
        gbc.writeMem(0xc814, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x472f);
        EXPECT(gbc.pc(), 0x28cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc814), 0xd4);
        // 77 0368
        gbc.setState(0x28c2, 0xbfdb, 0x8620, 0x1c22, 0x7f5b, 0xde9b, 0x1, 0x1);
        gbc.writeMem(0x28c2, { 0x77 });
        gbc.writeMem(0xde9b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xbfdb);
        EXPECT(gbc.pc(), 0x28c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde9b), 0x86);
        // 77 036D
        gbc.setState(0xcd2a, 0x8fd7, 0x2760, 0x75b6, 0x71f3, 0x9cf3, 0x0, 0x0);
        gbc.writeMem(0x9cf3, { 0x0 });
        gbc.writeMem(0xcd2a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8fd7);
        EXPECT(gbc.pc(), 0xcd2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf3), 0x27);
        EXPECT(gbc.readMem(0xcd2a), 0x77);
        // 77 036F
        gbc.setState(0x6a4c, 0xb6e9, 0x19a0, 0xc63a, 0xe576, 0x98fe, 0x1, 0x0);
        gbc.writeMem(0x6a4c, { 0x77 });
        gbc.writeMem(0x98fe, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xb6e9);
        EXPECT(gbc.pc(), 0x6a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98fe), 0x19);
        // 77 0371
        gbc.setState(0x74d4, 0x2b98, 0x75c0, 0xc541, 0x5f29, 0x9053, 0x1, 0x0);
        gbc.writeMem(0x74d4, { 0x77 });
        gbc.writeMem(0x9053, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x2b98);
        EXPECT(gbc.pc(), 0x74d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9053), 0x75);
        // 77 0372
        gbc.setState(0x281c, 0x7826, 0x3e90, 0xb2d1, 0xae43, 0xf6db, 0x0, 0x1);
        gbc.writeMem(0x281c, { 0x77 });
        gbc.writeMem(0xf6db, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7826);
        EXPECT(gbc.pc(), 0x281d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6db), 0x3e);
        // 77 0373
        gbc.setState(0xb2f4, 0x18c0, 0x5000, 0xa144, 0xabd8, 0x8919, 0x1, 0x0);
        gbc.writeMem(0x8919, { 0x0 });
        gbc.writeMem(0xb2f4, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x18c0);
        EXPECT(gbc.pc(), 0xb2f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8919), 0x50);
        EXPECT(gbc.readMem(0xb2f4), 0x77);
        // 77 0375
        gbc.setState(0xe61a, 0x9263, 0xe440, 0xf985, 0x599b, 0xd30f, 0x1, 0x0);
        gbc.writeMem(0xd30f, { 0x0 });
        gbc.writeMem(0xe61a, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9263);
        EXPECT(gbc.pc(), 0xe61b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd30f), 0xe4);
        EXPECT(gbc.readMem(0xe61a), 0x77);
        // 77 0376
        gbc.setState(0x94f4, 0x7b86, 0x9070, 0xf199, 0xaea7, 0x812d, 0x0, 0x1);
        gbc.writeMem(0x812d, { 0x0 });
        gbc.writeMem(0x94f4, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7b86);
        EXPECT(gbc.pc(), 0x94f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812d), 0x90);
        EXPECT(gbc.readMem(0x94f4), 0x77);
        // 77 0377
        gbc.setState(0x4b5, 0x86d3, 0xc2e0, 0xe694, 0x52b4, 0xa1b5, 0x1, 0x1);
        gbc.writeMem(0x4b5, { 0x77 });
        gbc.writeMem(0xa1b5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x86d3);
        EXPECT(gbc.pc(), 0x4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b5), 0xc2);
        // 77 0378
        gbc.setState(0x2617, 0x4768, 0xbed0, 0xf5ce, 0x4137, 0x866d, 0x1, 0x0);
        gbc.writeMem(0x2617, { 0x77 });
        gbc.writeMem(0x866d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4768);
        EXPECT(gbc.pc(), 0x2618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866d), 0xbe);
        // 77 0379
        gbc.setState(0xa534, 0x8ab3, 0x2ac0, 0x54d4, 0x1f16, 0x99e9, 0x1, 0x0);
        gbc.writeMem(0x99e9, { 0x0 });
        gbc.writeMem(0xa534, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8ab3);
        EXPECT(gbc.pc(), 0xa535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e9), 0x2a);
        EXPECT(gbc.readMem(0xa534), 0x77);
        // 77 037C
        gbc.setState(0xda14, 0x93ff, 0x2dd0, 0xce9c, 0x2926, 0xe6bd, 0x0, 0x1);
        gbc.writeMem(0xda14, { 0x77 });
        gbc.writeMem(0xe6bd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x93ff);
        EXPECT(gbc.pc(), 0xda15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda14), 0x77);
        EXPECT(gbc.readMem(0xe6bd), 0x2d);
        // 77 037E
        gbc.setState(0xb6b4, 0xbcd, 0xbda0, 0x5149, 0x831d, 0x8266, 0x0, 0x1);
        gbc.writeMem(0x8266, { 0x0 });
        gbc.writeMem(0xb6b4, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbcd);
        EXPECT(gbc.pc(), 0xb6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8266), 0xbd);
        EXPECT(gbc.readMem(0xb6b4), 0x77);
        // 77 0381
        gbc.setState(0x9100, 0xc727, 0xc1d0, 0xc744, 0xb210, 0xb007, 0x0, 0x1);
        gbc.writeMem(0x9100, { 0x77 });
        gbc.writeMem(0xb007, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc727);
        EXPECT(gbc.pc(), 0x9101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9100), 0x77);
        EXPECT(gbc.readMem(0xb007), 0xc1);
        // 77 0382
        gbc.setState(0x3163, 0x5f1e, 0xbf40, 0x422c, 0x3f7a, 0x8d2d, 0x0, 0x1);
        gbc.writeMem(0x3163, { 0x77 });
        gbc.writeMem(0x8d2d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5f1e);
        EXPECT(gbc.pc(), 0x3164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d2d), 0xbf);
        // 77 0385
        gbc.setState(0x5d6, 0xf210, 0x7720, 0xff7a, 0x9914, 0xbfbc, 0x0, 0x0);
        gbc.writeMem(0x5d6, { 0x77 });
        gbc.writeMem(0xbfbc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf210);
        EXPECT(gbc.pc(), 0x5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfbc), 0x77);
        // 77 0386
        gbc.setState(0x3036, 0x7a15, 0xac10, 0xfcf9, 0x5c7, 0xbfa7, 0x1, 0x1);
        gbc.writeMem(0x3036, { 0x77 });
        gbc.writeMem(0xbfa7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7a15);
        EXPECT(gbc.pc(), 0x3037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa7), 0xac);
        // 77 0387
        gbc.setState(0x37a5, 0x4fed, 0xb110, 0xf0d4, 0xc343, 0xc386, 0x1, 0x0);
        gbc.writeMem(0x37a5, { 0x77 });
        gbc.writeMem(0xc386, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4fed);
        EXPECT(gbc.pc(), 0x37a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc386), 0xb1);
        // 77 038A
        gbc.setState(0x2efa, 0x4051, 0xe6e0, 0xca42, 0xb3a9, 0x8e2e, 0x1, 0x1);
        gbc.writeMem(0x2efa, { 0x77 });
        gbc.writeMem(0x8e2e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4051);
        EXPECT(gbc.pc(), 0x2efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2e), 0xe6);
        // 77 038D
        gbc.setState(0x2178, 0x3166, 0xdbe0, 0x7de1, 0xcf70, 0xc69e, 0x0, 0x1);
        gbc.writeMem(0x2178, { 0x77 });
        gbc.writeMem(0xc69e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3166);
        EXPECT(gbc.pc(), 0x2179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc69e), 0xdb);
        // 77 038E
        gbc.setState(0x42cb, 0x2015, 0xa400, 0x8880, 0xe4c5, 0xd116, 0x1, 0x1);
        gbc.writeMem(0x42cb, { 0x77 });
        gbc.writeMem(0xd116, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2015);
        EXPECT(gbc.pc(), 0x42cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd116), 0xa4);
        // 77 0392
        gbc.setState(0xe282, 0x7f60, 0xd940, 0xb942, 0x60d6, 0x9c22, 0x1, 0x0);
        gbc.writeMem(0x9c22, { 0x0 });
        gbc.writeMem(0xe282, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7f60);
        EXPECT(gbc.pc(), 0xe283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c22), 0xd9);
        EXPECT(gbc.readMem(0xe282), 0x77);
        // 77 0398
        gbc.setState(0xc4c2, 0xe322, 0xe7a0, 0x4fba, 0x775d, 0x8b16, 0x1, 0x1);
        gbc.writeMem(0x8b16, { 0x0 });
        gbc.writeMem(0xc4c2, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe322);
        EXPECT(gbc.pc(), 0xc4c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b16), 0xe7);
        EXPECT(gbc.readMem(0xc4c2), 0x77);
        // 77 039A
        gbc.setState(0x734, 0xae0e, 0x39d0, 0x4e84, 0x5de0, 0xef52, 0x0, 0x0);
        gbc.writeMem(0x734, { 0x77 });
        gbc.writeMem(0xef52, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xae0e);
        EXPECT(gbc.pc(), 0x735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef52), 0x39);
        // 77 039C
        gbc.setState(0xdd24, 0x1136, 0x680, 0xf94e, 0x5a57, 0x87d4, 0x0, 0x1);
        gbc.writeMem(0x87d4, { 0x0 });
        gbc.writeMem(0xdd24, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1136);
        EXPECT(gbc.pc(), 0xdd25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d4), 0x6);
        EXPECT(gbc.readMem(0xdd24), 0x77);
        // 77 039F
        gbc.setState(0x4d4b, 0xb52e, 0x59d0, 0xbde0, 0xea, 0xc11c, 0x1, 0x1);
        gbc.writeMem(0x4d4b, { 0x77 });
        gbc.writeMem(0xc11c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb52e);
        EXPECT(gbc.pc(), 0x4d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc11c), 0x59);
        // 77 03A3
        gbc.setState(0xc58f, 0x908, 0x6f0, 0x48b1, 0xff7b, 0xe2d0, 0x1, 0x0);
        gbc.writeMem(0xc58f, { 0x77 });
        gbc.writeMem(0xe2d0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x908);
        EXPECT(gbc.pc(), 0xc590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58f), 0x77);
        EXPECT(gbc.readMem(0xe2d0), 0x6);
        // 77 03A4
        gbc.setState(0x55c7, 0x3530, 0x9e80, 0x975d, 0x7a3e, 0x97da, 0x1, 0x0);
        gbc.writeMem(0x55c7, { 0x77 });
        gbc.writeMem(0x97da, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3530);
        EXPECT(gbc.pc(), 0x55c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97da), 0x9e);
        // 77 03A5
        gbc.setState(0x93c0, 0x75ab, 0xf4f0, 0xc44c, 0xf831, 0xb6f1, 0x0, 0x0);
        gbc.writeMem(0x93c0, { 0x77 });
        gbc.writeMem(0xb6f1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x75ab);
        EXPECT(gbc.pc(), 0x93c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c0), 0x77);
        EXPECT(gbc.readMem(0xb6f1), 0xf4);
        // 77 03A6
        gbc.setState(0x87bc, 0xeee4, 0xa610, 0xf1e0, 0x536a, 0xa74b, 0x0, 0x1);
        gbc.writeMem(0x87bc, { 0x77 });
        gbc.writeMem(0xa74b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xeee4);
        EXPECT(gbc.pc(), 0x87bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87bc), 0x77);
        EXPECT(gbc.readMem(0xa74b), 0xa6);
        // 77 03AA
        gbc.setState(0x53cc, 0xe849, 0x8a40, 0xd46d, 0x46f9, 0xbae6, 0x0, 0x1);
        gbc.writeMem(0x53cc, { 0x77 });
        gbc.writeMem(0xbae6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe849);
        EXPECT(gbc.pc(), 0x53cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae6), 0x8a);
        // 77 03AB
        gbc.setState(0xd024, 0x299f, 0xae60, 0xc32a, 0xb9c4, 0xe4d5, 0x0, 0x1);
        gbc.writeMem(0xd024, { 0x77 });
        gbc.writeMem(0xe4d5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x299f);
        EXPECT(gbc.pc(), 0xd025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd024), 0x77);
        EXPECT(gbc.readMem(0xe4d5), 0xae);
        // 77 03AE
        gbc.setState(0x4fca, 0xa911, 0x11a0, 0xc8c1, 0x2079, 0xbede, 0x0, 0x1);
        gbc.writeMem(0x4fca, { 0x77 });
        gbc.writeMem(0xbede, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xa911);
        EXPECT(gbc.pc(), 0x4fcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbede), 0x11);
        // 77 03B1
        gbc.setState(0xbbf9, 0x3855, 0xd0c0, 0x819, 0xf290, 0xf0f3, 0x1, 0x1);
        gbc.writeMem(0xbbf9, { 0x77 });
        gbc.writeMem(0xf0f3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3855);
        EXPECT(gbc.pc(), 0xbbfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbf9), 0x77);
        EXPECT(gbc.readMem(0xf0f3), 0xd0);
        // 77 03B2
        gbc.setState(0x9731, 0xe285, 0xef0, 0xff86, 0x65b3, 0xa03f, 0x0, 0x1);
        gbc.writeMem(0x9731, { 0x77 });
        gbc.writeMem(0xa03f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe285);
        EXPECT(gbc.pc(), 0x9732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9731), 0x77);
        EXPECT(gbc.readMem(0xa03f), 0xe);
        // 77 03B3
        gbc.setState(0x1914, 0xda5c, 0x7520, 0xab8e, 0xcb85, 0xac64, 0x0, 0x0);
        gbc.writeMem(0x1914, { 0x77 });
        gbc.writeMem(0xac64, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xda5c);
        EXPECT(gbc.pc(), 0x1915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac64), 0x75);
        // 77 03B4
        gbc.setState(0x41f1, 0x93ea, 0x7310, 0xf20, 0x23a7, 0x85cf, 0x0, 0x0);
        gbc.writeMem(0x41f1, { 0x77 });
        gbc.writeMem(0x85cf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x93ea);
        EXPECT(gbc.pc(), 0x41f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cf), 0x73);
        // 77 03B7
        gbc.setState(0x6237, 0x95b1, 0x4890, 0x30e5, 0xe887, 0xb1e2, 0x1, 0x1);
        gbc.writeMem(0x6237, { 0x77 });
        gbc.writeMem(0xb1e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x95b1);
        EXPECT(gbc.pc(), 0x6238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1e2), 0x48);
        // 77 03BC
        gbc.setState(0xb34f, 0xb4ee, 0xb740, 0x7db8, 0x9143, 0x9bea, 0x1, 0x0);
        gbc.writeMem(0x9bea, { 0x0 });
        gbc.writeMem(0xb34f, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb4ee);
        EXPECT(gbc.pc(), 0xb350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bea), 0xb7);
        EXPECT(gbc.readMem(0xb34f), 0x77);
        // 77 03BE
        gbc.setState(0x8290, 0x76fa, 0xef30, 0x8332, 0xb0f5, 0xbb9f, 0x1, 0x1);
        gbc.writeMem(0x8290, { 0x77 });
        gbc.writeMem(0xbb9f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x76fa);
        EXPECT(gbc.pc(), 0x8291);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8290), 0x77);
        EXPECT(gbc.readMem(0xbb9f), 0xef);
        // 77 03C0
        gbc.setState(0xc2c1, 0x48cf, 0xb370, 0x44d2, 0xff80, 0xe2a4, 0x1, 0x0);
        gbc.writeMem(0xc2c1, { 0x77 });
        gbc.writeMem(0xe2a4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x48cf);
        EXPECT(gbc.pc(), 0xc2c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c1), 0x77);
        EXPECT(gbc.readMem(0xe2a4), 0xb3);
        // 77 03C2
        gbc.setState(0x91ee, 0xc759, 0xa8a0, 0xc8f7, 0x531, 0x940a, 0x0, 0x1);
        gbc.writeMem(0x91ee, { 0x77 });
        gbc.writeMem(0x940a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc759);
        EXPECT(gbc.pc(), 0x91ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91ee), 0x77);
        EXPECT(gbc.readMem(0x940a), 0xa8);
        // 77 03C3
        gbc.setState(0x3582, 0x8dd8, 0xed80, 0x2c5d, 0xe793, 0xfddf, 0x0, 0x0);
        gbc.writeMem(0x3582, { 0x77 });
        gbc.writeMem(0xfddf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8dd8);
        EXPECT(gbc.pc(), 0x3583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfddf), 0xed);
        // 77 03C7
        gbc.setState(0x5926, 0xbc83, 0x1ca0, 0xcaa3, 0x1f2d, 0xcc30, 0x0, 0x1);
        gbc.writeMem(0x5926, { 0x77 });
        gbc.writeMem(0xcc30, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbc83);
        EXPECT(gbc.pc(), 0x5927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc30), 0x1c);
        // 77 03CA
        gbc.setState(0x6f7f, 0x676a, 0xac0, 0xb452, 0x1d4, 0x8523, 0x0, 0x0);
        gbc.writeMem(0x6f7f, { 0x77 });
        gbc.writeMem(0x8523, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x676a);
        EXPECT(gbc.pc(), 0x6f80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8523), 0xa);
        // 77 03CC
        gbc.setState(0x42b2, 0x6115, 0xd490, 0x63c, 0xf400, 0xb433, 0x1, 0x0);
        gbc.writeMem(0x42b2, { 0x77 });
        gbc.writeMem(0xb433, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6115);
        EXPECT(gbc.pc(), 0x42b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb433), 0xd4);
        // 77 03CD
        gbc.setState(0x1b7d, 0x87f6, 0x2d0, 0x9f59, 0x46db, 0xb7ff, 0x0, 0x1);
        gbc.writeMem(0x1b7d, { 0x77 });
        gbc.writeMem(0xb7ff, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x87f6);
        EXPECT(gbc.pc(), 0x1b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ff), 0x2);
        // 77 03D0
        gbc.setState(0x4efe, 0xd46f, 0xbdd0, 0x670c, 0x50d3, 0x8d08, 0x1, 0x1);
        gbc.writeMem(0x4efe, { 0x77 });
        gbc.writeMem(0x8d08, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd46f);
        EXPECT(gbc.pc(), 0x4eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d08), 0xbd);
        // 77 03D3
        gbc.setState(0x90a8, 0xc6d4, 0xaeb0, 0xd631, 0x46ed, 0x95a9, 0x1, 0x0);
        gbc.writeMem(0x90a8, { 0x77 });
        gbc.writeMem(0x95a9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc6d4);
        EXPECT(gbc.pc(), 0x90a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90a8), 0x77);
        EXPECT(gbc.readMem(0x95a9), 0xae);
        // 77 03D6
        gbc.setState(0xcc3b, 0x3d9, 0x1490, 0xc61e, 0x8c85, 0xb9c2, 0x0, 0x0);
        gbc.writeMem(0xb9c2, { 0x0 });
        gbc.writeMem(0xcc3b, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3d9);
        EXPECT(gbc.pc(), 0xcc3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c2), 0x14);
        EXPECT(gbc.readMem(0xcc3b), 0x77);
        // 77 03DC
        gbc.setState(0x83fc, 0x12be, 0x2fa0, 0x55cd, 0xbaec, 0xb45c, 0x1, 0x1);
        gbc.writeMem(0x83fc, { 0x77 });
        gbc.writeMem(0xb45c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x12be);
        EXPECT(gbc.pc(), 0x83fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83fc), 0x77);
        EXPECT(gbc.readMem(0xb45c), 0x2f);
        // 77 03DD
        gbc.setState(0x3709, 0x3596, 0x7870, 0x4b58, 0xa3f6, 0xdcf4, 0x0, 0x0);
        gbc.writeMem(0x3709, { 0x77 });
        gbc.writeMem(0xdcf4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3596);
        EXPECT(gbc.pc(), 0x370a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf4), 0x78);
        // 77 03DE
        gbc.setState(0x8d79, 0xd21d, 0xbd70, 0xf814, 0x13fa, 0x8a1f, 0x1, 0x0);
        gbc.writeMem(0x8a1f, { 0x0 });
        gbc.writeMem(0x8d79, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd21d);
        EXPECT(gbc.pc(), 0x8d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a1f), 0xbd);
        EXPECT(gbc.readMem(0x8d79), 0x77);
        // 77 03E0
        gbc.setState(0x5db5, 0xb9a3, 0xc400, 0x6732, 0xfcc9, 0xdee1, 0x1, 0x0);
        gbc.writeMem(0x5db5, { 0x77 });
        gbc.writeMem(0xdee1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb9a3);
        EXPECT(gbc.pc(), 0x5db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdee1), 0xc4);
        // 77 03E2
        gbc.setState(0x150d, 0x798d, 0xcc40, 0xf8ae, 0x1b56, 0xbe2c, 0x0, 0x0);
        gbc.writeMem(0x150d, { 0x77 });
        gbc.writeMem(0xbe2c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x798d);
        EXPECT(gbc.pc(), 0x150e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2c), 0xcc);
        // 77 03E4
        gbc.setState(0xd06f, 0xe157, 0xb740, 0xad09, 0x6dfc, 0xd535, 0x0, 0x0);
        gbc.writeMem(0xd06f, { 0x77 });
        gbc.writeMem(0xd535, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe157);
        EXPECT(gbc.pc(), 0xd070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd06f), 0x77);
        EXPECT(gbc.readMem(0xd535), 0xb7);
        // 77 03E5
        gbc.setState(0x5d93, 0xa5f5, 0x9850, 0xbfde, 0xc017, 0xa4d1, 0x0, 0x1);
        gbc.writeMem(0x5d93, { 0x77 });
        gbc.writeMem(0xa4d1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa5f5);
        EXPECT(gbc.pc(), 0x5d94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4d1), 0x98);
        // 77 03E7
        gbc.setState(0x4d63, 0xed18, 0xadc0, 0x4d4, 0x5dec, 0xa4da, 0x1, 0x1);
        gbc.writeMem(0x4d63, { 0x77 });
        gbc.writeMem(0xa4da, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xed18);
        EXPECT(gbc.pc(), 0x4d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4da), 0xad);
    }
}
#endif
