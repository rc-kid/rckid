#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_ec)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_ec) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB EC 0000
        gbc.setState(0xde64, 0x7477, 0xbde0, 0x9db1, 0x240, 0x8968, 0x1, 0x0);
        gbc.writeMem(0xde64, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7477);
        EXPECT(gbc.pc(), 0xde66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde64), 0xcb);
        EXPECT(gbc.readMem(0xde65), 0xec);
        // CB EC 0001
        gbc.setState(0x74d9, 0x6f6e, 0x2850, 0x8d78, 0x861e, 0x7e91, 0x1, 0x1);
        gbc.writeMem(0x74d9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6f6e);
        EXPECT(gbc.pc(), 0x74db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0002
        gbc.setState(0x4fb1, 0x271e, 0xb9d0, 0x943e, 0xd960, 0x7fed, 0x0, 0x0);
        gbc.writeMem(0x4fb1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x271e);
        EXPECT(gbc.pc(), 0x4fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0003
        gbc.setState(0x6b7a, 0x708b, 0x8cd0, 0xaddb, 0xe025, 0x49bf, 0x1, 0x1);
        gbc.writeMem(0x6b7a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x708b);
        EXPECT(gbc.pc(), 0x6b7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0004
        gbc.setState(0xbb2e, 0x20d9, 0xcfd0, 0x6c2c, 0x84b2, 0xf66c, 0x0, 0x1);
        gbc.writeMem(0xbb2e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x20d9);
        EXPECT(gbc.pc(), 0xbb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb2e), 0xcb);
        EXPECT(gbc.readMem(0xbb2f), 0xec);
        // CB EC 0005
        gbc.setState(0x42ec, 0x4db3, 0xf160, 0x2839, 0xf503, 0x7a63, 0x0, 0x1);
        gbc.writeMem(0x42ec, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4db3);
        EXPECT(gbc.pc(), 0x42ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0006
        gbc.setState(0xc23f, 0xa687, 0x4010, 0x942a, 0x3f0, 0x9849, 0x1, 0x1);
        gbc.writeMem(0xc23f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa687);
        EXPECT(gbc.pc(), 0xc241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23f), 0xcb);
        EXPECT(gbc.readMem(0xc240), 0xec);
        // CB EC 0007
        gbc.setState(0x1485, 0x5b81, 0x1e70, 0xd073, 0x2d57, 0x60a3, 0x1, 0x0);
        gbc.writeMem(0x1485, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5b81);
        EXPECT(gbc.pc(), 0x1487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0008
        gbc.setState(0xcd27, 0xfa1, 0x2120, 0x234f, 0xc758, 0x6376, 0x1, 0x0);
        gbc.writeMem(0xcd27, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfa1);
        EXPECT(gbc.pc(), 0xcd29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd27), 0xcb);
        EXPECT(gbc.readMem(0xcd28), 0xec);
        // CB EC 000A
        gbc.setState(0x992c, 0x3c2f, 0xe1b0, 0x15b3, 0xac22, 0xa3e6, 0x1, 0x0);
        gbc.writeMem(0x992c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3c2f);
        EXPECT(gbc.pc(), 0x992e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x992c), 0xcb);
        EXPECT(gbc.readMem(0x992d), 0xec);
        // CB EC 000B
        gbc.setState(0x8ba2, 0x8891, 0xd610, 0x5ff9, 0xac8a, 0x2815, 0x1, 0x1);
        gbc.writeMem(0x8ba2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8891);
        EXPECT(gbc.pc(), 0x8ba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba2), 0xcb);
        EXPECT(gbc.readMem(0x8ba3), 0xec);
        // CB EC 000C
        gbc.setState(0xa125, 0xefda, 0xbde0, 0xacdd, 0x6c91, 0x2dca, 0x1, 0x0);
        gbc.writeMem(0xa125, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xefda);
        EXPECT(gbc.pc(), 0xa127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa125), 0xcb);
        EXPECT(gbc.readMem(0xa126), 0xec);
        // CB EC 000D
        gbc.setState(0x4c89, 0xe933, 0x87c0, 0x3291, 0xadd8, 0xc0cc, 0x0, 0x1);
        gbc.writeMem(0x4c89, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe933);
        EXPECT(gbc.pc(), 0x4c8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 000E
        gbc.setState(0x3fee, 0x3727, 0x4ff0, 0xa09d, 0x2199, 0x3ffb, 0x0, 0x1);
        gbc.writeMem(0x3fee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3727);
        EXPECT(gbc.pc(), 0x3ff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 000F
        gbc.setState(0xdd46, 0xa106, 0x5120, 0x9804, 0xd90c, 0xa479, 0x1, 0x0);
        gbc.writeMem(0xdd46, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa106);
        EXPECT(gbc.pc(), 0xdd48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd46), 0xcb);
        EXPECT(gbc.readMem(0xdd47), 0xec);
        // CB EC 0010
        gbc.setState(0x7bce, 0x3bd4, 0xfd60, 0xa6af, 0xe16f, 0x901c, 0x0, 0x0);
        gbc.writeMem(0x7bce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3bd4);
        EXPECT(gbc.pc(), 0x7bd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0011
        gbc.setState(0x708a, 0x6997, 0x3290, 0x8e0, 0x71f8, 0x2, 0x0, 0x0);
        gbc.writeMem(0x708a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6997);
        EXPECT(gbc.pc(), 0x708c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0012
        gbc.setState(0x3569, 0x2466, 0x63e0, 0x8ad4, 0xed7f, 0x1713, 0x1, 0x0);
        gbc.writeMem(0x3569, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2466);
        EXPECT(gbc.pc(), 0x356b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0013
        gbc.setState(0xbe4f, 0x47c, 0xb5c0, 0x781f, 0x2f7f, 0x850f, 0x1, 0x1);
        gbc.writeMem(0xbe4f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x47c);
        EXPECT(gbc.pc(), 0xbe51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4f), 0xcb);
        EXPECT(gbc.readMem(0xbe50), 0xec);
        // CB EC 0014
        gbc.setState(0xdb0e, 0xf565, 0x1d60, 0x14dc, 0xf72b, 0x1262, 0x0, 0x1);
        gbc.writeMem(0xdb0e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf565);
        EXPECT(gbc.pc(), 0xdb10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0e), 0xcb);
        EXPECT(gbc.readMem(0xdb0f), 0xec);
        // CB EC 0015
        gbc.setState(0xd8e2, 0x2662, 0x6aa0, 0x3836, 0x93fa, 0x8063, 0x1, 0x1);
        gbc.writeMem(0xd8e2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2662);
        EXPECT(gbc.pc(), 0xd8e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e2), 0xcb);
        EXPECT(gbc.readMem(0xd8e3), 0xec);
        // CB EC 0016
        gbc.setState(0x2201, 0xd8ee, 0x25a0, 0x1875, 0x4c7a, 0x15a7, 0x1, 0x1);
        gbc.writeMem(0x2201, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd8ee);
        EXPECT(gbc.pc(), 0x2203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0017
        gbc.setState(0xdc68, 0x95db, 0x7330, 0xa29f, 0x5c10, 0xbe3e, 0x0, 0x0);
        gbc.writeMem(0xdc68, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x95db);
        EXPECT(gbc.pc(), 0xdc6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc68), 0xcb);
        EXPECT(gbc.readMem(0xdc69), 0xec);
        // CB EC 0018
        gbc.setState(0x9892, 0xb5f3, 0x5320, 0x8ec0, 0x4626, 0xbf80, 0x1, 0x1);
        gbc.writeMem(0x9892, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb5f3);
        EXPECT(gbc.pc(), 0x9894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9892), 0xcb);
        EXPECT(gbc.readMem(0x9893), 0xec);
        // CB EC 0019
        gbc.setState(0xbb89, 0xc8c4, 0xac50, 0xf0c7, 0x8f0, 0xa8a1, 0x0, 0x1);
        gbc.writeMem(0xbb89, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc8c4);
        EXPECT(gbc.pc(), 0xbb8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb89), 0xcb);
        EXPECT(gbc.readMem(0xbb8a), 0xec);
        // CB EC 001B
        gbc.setState(0xa821, 0x989f, 0x1540, 0x8eaa, 0x3fe5, 0xff3d, 0x1, 0x0);
        gbc.writeMem(0xa821, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x989f);
        EXPECT(gbc.pc(), 0xa823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa821), 0xcb);
        EXPECT(gbc.readMem(0xa822), 0xec);
        // CB EC 001C
        gbc.setState(0xe1d0, 0x3d67, 0x1060, 0x961e, 0xef95, 0x565, 0x1, 0x0);
        gbc.writeMem(0xe1d0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3d67);
        EXPECT(gbc.pc(), 0xe1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1d0), 0xcb);
        EXPECT(gbc.readMem(0xe1d1), 0xec);
        // CB EC 001D
        gbc.setState(0x67a, 0xdab, 0xb600, 0xf138, 0x5c65, 0x60c3, 0x1, 0x0);
        gbc.writeMem(0x67a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdab);
        EXPECT(gbc.pc(), 0x67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 001E
        gbc.setState(0xc20, 0x1a58, 0xf640, 0x1204, 0xabc, 0x8bb3, 0x0, 0x0);
        gbc.writeMem(0xc20, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1a58);
        EXPECT(gbc.pc(), 0xc22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 001F
        gbc.setState(0x6c3d, 0x9dc, 0x3ad0, 0x861a, 0xf0be, 0x9e6d, 0x0, 0x1);
        gbc.writeMem(0x6c3d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9dc);
        EXPECT(gbc.pc(), 0x6c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0020
        gbc.setState(0x2efa, 0x4cdd, 0xc210, 0x923d, 0x18bd, 0xf1b6, 0x0, 0x1);
        gbc.writeMem(0x2efa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4cdd);
        EXPECT(gbc.pc(), 0x2efc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0021
        gbc.setState(0x79bb, 0xc139, 0xf950, 0x77ec, 0xa8da, 0x86ae, 0x1, 0x1);
        gbc.writeMem(0x79bb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc139);
        EXPECT(gbc.pc(), 0x79bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0022
        gbc.setState(0xb54c, 0x95c5, 0x500, 0xbf97, 0x57d0, 0x4a40, 0x0, 0x1);
        gbc.writeMem(0xb54c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x95c5);
        EXPECT(gbc.pc(), 0xb54e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb54c), 0xcb);
        EXPECT(gbc.readMem(0xb54d), 0xec);
        // CB EC 0023
        gbc.setState(0x8ed4, 0xf6b3, 0xf930, 0x1dd9, 0x81f3, 0xfa64, 0x0, 0x1);
        gbc.writeMem(0x8ed4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0x8ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed4), 0xcb);
        EXPECT(gbc.readMem(0x8ed5), 0xec);
        // CB EC 0024
        gbc.setState(0x9a5, 0x4fe4, 0xfcb0, 0xaadb, 0x7f35, 0xcc20, 0x0, 0x0);
        gbc.writeMem(0x9a5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4fe4);
        EXPECT(gbc.pc(), 0x9a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0025
        gbc.setState(0x44cb, 0xd289, 0xe100, 0x2eea, 0x9ce4, 0x3777, 0x1, 0x0);
        gbc.writeMem(0x44cb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd289);
        EXPECT(gbc.pc(), 0x44cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0026
        gbc.setState(0x8897, 0x76bf, 0x8710, 0x1dfc, 0x6f5f, 0xc239, 0x1, 0x0);
        gbc.writeMem(0x8897, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x76bf);
        EXPECT(gbc.pc(), 0x8899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8897), 0xcb);
        EXPECT(gbc.readMem(0x8898), 0xec);
        // CB EC 0027
        gbc.setState(0x1298, 0x455f, 0x3790, 0xfc67, 0xcb7c, 0x3ddd, 0x1, 0x0);
        gbc.writeMem(0x1298, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x455f);
        EXPECT(gbc.pc(), 0x129a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0028
        gbc.setState(0xb0da, 0xb7b6, 0x4c0, 0xbb22, 0x2b1, 0x6a12, 0x0, 0x0);
        gbc.writeMem(0xb0da, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb7b6);
        EXPECT(gbc.pc(), 0xb0dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0da), 0xcb);
        EXPECT(gbc.readMem(0xb0db), 0xec);
        // CB EC 0029
        gbc.setState(0x2fb9, 0xcb86, 0xbf60, 0xce6e, 0xec66, 0xe55d, 0x1, 0x0);
        gbc.writeMem(0x2fb9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcb86);
        EXPECT(gbc.pc(), 0x2fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 002A
        gbc.setState(0xe42, 0xe245, 0x7c20, 0xdb29, 0xaedf, 0x7b9b, 0x1, 0x1);
        gbc.writeMem(0xe42, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe245);
        EXPECT(gbc.pc(), 0xe44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 002B
        gbc.setState(0x1058, 0xfa29, 0xf020, 0x9cd2, 0x1de1, 0xf5c8, 0x0, 0x0);
        gbc.writeMem(0x1058, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfa29);
        EXPECT(gbc.pc(), 0x105a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 002C
        gbc.setState(0xceba, 0xcdee, 0x6c30, 0x5f71, 0x3385, 0x9cac, 0x0, 0x1);
        gbc.writeMem(0xceba, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xcdee);
        EXPECT(gbc.pc(), 0xcebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceba), 0xcb);
        EXPECT(gbc.readMem(0xcebb), 0xec);
        // CB EC 002D
        gbc.setState(0x7f95, 0x4d8, 0xca50, 0x6e7, 0x7dcc, 0x8c2e, 0x1, 0x0);
        gbc.writeMem(0x7f95, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4d8);
        EXPECT(gbc.pc(), 0x7f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 002F
        gbc.setState(0x9622, 0x8075, 0x2cf0, 0xf96, 0x7950, 0xb7a8, 0x0, 0x0);
        gbc.writeMem(0x9622, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8075);
        EXPECT(gbc.pc(), 0x9624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9622), 0xcb);
        EXPECT(gbc.readMem(0x9623), 0xec);
        // CB EC 0030
        gbc.setState(0xb1d8, 0x871c, 0xf790, 0xcccc, 0xac71, 0x6dec, 0x0, 0x1);
        gbc.writeMem(0xb1d8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x871c);
        EXPECT(gbc.pc(), 0xb1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1d8), 0xcb);
        EXPECT(gbc.readMem(0xb1d9), 0xec);
        // CB EC 0032
        gbc.setState(0x9435, 0xc7c5, 0x2e50, 0x22e, 0x5c04, 0xf020, 0x0, 0x0);
        gbc.writeMem(0x9435, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc7c5);
        EXPECT(gbc.pc(), 0x9437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9435), 0xcb);
        EXPECT(gbc.readMem(0x9436), 0xec);
        // CB EC 0033
        gbc.setState(0x3051, 0x69e8, 0xfe10, 0x2190, 0xa5a0, 0xc159, 0x0, 0x1);
        gbc.writeMem(0x3051, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x69e8);
        EXPECT(gbc.pc(), 0x3053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0034
        gbc.setState(0xe3cd, 0xdc9d, 0xcd00, 0x1347, 0x7061, 0x6025, 0x1, 0x1);
        gbc.writeMem(0xe3cd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xdc9d);
        EXPECT(gbc.pc(), 0xe3cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3cd), 0xcb);
        EXPECT(gbc.readMem(0xe3ce), 0xec);
        // CB EC 0035
        gbc.setState(0x513a, 0x20d5, 0x8500, 0xebb4, 0x870a, 0xa70c, 0x1, 0x1);
        gbc.writeMem(0x513a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x20d5);
        EXPECT(gbc.pc(), 0x513c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0036
        gbc.setState(0x7c3f, 0x73bc, 0x7fb0, 0xa32e, 0x5ab2, 0xa361, 0x0, 0x0);
        gbc.writeMem(0x7c3f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x73bc);
        EXPECT(gbc.pc(), 0x7c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0037
        gbc.setState(0x98e9, 0x1372, 0xde50, 0x9d3b, 0xe74, 0x2cfd, 0x1, 0x0);
        gbc.writeMem(0x98e9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1372);
        EXPECT(gbc.pc(), 0x98eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e9), 0xcb);
        EXPECT(gbc.readMem(0x98ea), 0xec);
        // CB EC 0038
        gbc.setState(0x3ac0, 0xffa0, 0x5cd0, 0xade6, 0xf5a3, 0x7ee3, 0x0, 0x0);
        gbc.writeMem(0x3ac0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xffa0);
        EXPECT(gbc.pc(), 0x3ac2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0039
        gbc.setState(0xa501, 0x28de, 0x1860, 0x9b8e, 0xdc62, 0x3f8, 0x0, 0x1);
        gbc.writeMem(0xa501, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x28de);
        EXPECT(gbc.pc(), 0xa503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa501), 0xcb);
        EXPECT(gbc.readMem(0xa502), 0xec);
        // CB EC 003B
        gbc.setState(0xcb2f, 0x5978, 0xe9a0, 0x1c51, 0xa416, 0xe66c, 0x0, 0x1);
        gbc.writeMem(0xcb2f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5978);
        EXPECT(gbc.pc(), 0xcb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2f), 0xcb);
        EXPECT(gbc.readMem(0xcb30), 0xec);
        // CB EC 003E
        gbc.setState(0x6955, 0xff81, 0xb2c0, 0xefaa, 0x5e30, 0xa1c9, 0x0, 0x0);
        gbc.writeMem(0x6955, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xff81);
        EXPECT(gbc.pc(), 0x6957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 003F
        gbc.setState(0xdafd, 0xdb6c, 0xed10, 0xe0c5, 0x6074, 0xf0d1, 0x0, 0x1);
        gbc.writeMem(0xdafd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdb6c);
        EXPECT(gbc.pc(), 0xdaff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdafd), 0xcb);
        EXPECT(gbc.readMem(0xdafe), 0xec);
        // CB EC 0040
        gbc.setState(0x925b, 0x5217, 0x4880, 0x25ad, 0xc40b, 0xdfc1, 0x1, 0x1);
        gbc.writeMem(0x925b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5217);
        EXPECT(gbc.pc(), 0x925d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x925b), 0xcb);
        EXPECT(gbc.readMem(0x925c), 0xec);
        // CB EC 0041
        gbc.setState(0xc012, 0x1f50, 0x4e10, 0xb947, 0x92cb, 0xd86b, 0x0, 0x1);
        gbc.writeMem(0xc012, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1f50);
        EXPECT(gbc.pc(), 0xc014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc012), 0xcb);
        EXPECT(gbc.readMem(0xc013), 0xec);
        // CB EC 0042
        gbc.setState(0x8812, 0x277f, 0x3af0, 0xcc2d, 0x3916, 0x2fbb, 0x0, 0x1);
        gbc.writeMem(0x8812, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x277f);
        EXPECT(gbc.pc(), 0x8814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8812), 0xcb);
        EXPECT(gbc.readMem(0x8813), 0xec);
        // CB EC 0043
        gbc.setState(0x74f6, 0x64d0, 0x2c80, 0x8dfb, 0x9f4b, 0x755c, 0x1, 0x0);
        gbc.writeMem(0x74f6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x64d0);
        EXPECT(gbc.pc(), 0x74f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0044
        gbc.setState(0x7435, 0xba60, 0x3600, 0x1a06, 0x1695, 0xe42a, 0x1, 0x0);
        gbc.writeMem(0x7435, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xba60);
        EXPECT(gbc.pc(), 0x7437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0045
        gbc.setState(0xab0a, 0x7d65, 0x2c20, 0x47e0, 0xa556, 0xc6ad, 0x0, 0x0);
        gbc.writeMem(0xab0a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7d65);
        EXPECT(gbc.pc(), 0xab0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0a), 0xcb);
        EXPECT(gbc.readMem(0xab0b), 0xec);
        // CB EC 0046
        gbc.setState(0x1d2c, 0x6b4c, 0x58d0, 0x38d7, 0x42ae, 0x8b14, 0x0, 0x0);
        gbc.writeMem(0x1d2c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6b4c);
        EXPECT(gbc.pc(), 0x1d2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0047
        gbc.setState(0x7f3b, 0xf229, 0xe300, 0xcf4c, 0xa385, 0x4964, 0x1, 0x1);
        gbc.writeMem(0x7f3b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xf229);
        EXPECT(gbc.pc(), 0x7f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0048
        gbc.setState(0xdb3, 0xcbef, 0x7a0, 0x5e23, 0xd2b, 0xa72e, 0x1, 0x1);
        gbc.writeMem(0xdb3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcbef);
        EXPECT(gbc.pc(), 0xdb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0049
        gbc.setState(0xda87, 0x13e1, 0xa580, 0xa8bd, 0x8a63, 0xcf0d, 0x1, 0x0);
        gbc.writeMem(0xda87, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x13e1);
        EXPECT(gbc.pc(), 0xda89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda87), 0xcb);
        EXPECT(gbc.readMem(0xda88), 0xec);
        // CB EC 004A
        gbc.setState(0xdee, 0xf6f8, 0x11e0, 0x139, 0xd518, 0x98a0, 0x1, 0x1);
        gbc.writeMem(0xdee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf6f8);
        EXPECT(gbc.pc(), 0xdf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 004B
        gbc.setState(0x2dce, 0x6237, 0xeac0, 0xf559, 0x270b, 0x6a88, 0x1, 0x1);
        gbc.writeMem(0x2dce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6237);
        EXPECT(gbc.pc(), 0x2dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 004C
        gbc.setState(0xc9f8, 0x22e3, 0x570, 0xb2de, 0xd284, 0x16f5, 0x0, 0x1);
        gbc.writeMem(0xc9f8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x22e3);
        EXPECT(gbc.pc(), 0xc9fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f8), 0xcb);
        EXPECT(gbc.readMem(0xc9f9), 0xec);
        // CB EC 004D
        gbc.setState(0x198c, 0xf395, 0x2e50, 0xd0b7, 0xca7, 0x7199, 0x1, 0x1);
        gbc.writeMem(0x198c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf395);
        EXPECT(gbc.pc(), 0x198e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 004E
        gbc.setState(0x2614, 0x383a, 0x1890, 0x2505, 0x55a0, 0xd2da, 0x1, 0x0);
        gbc.writeMem(0x2614, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x383a);
        EXPECT(gbc.pc(), 0x2616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 004F
        gbc.setState(0x86c5, 0x954a, 0xcd70, 0xe8c2, 0xb872, 0xb243, 0x1, 0x0);
        gbc.writeMem(0x86c5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x954a);
        EXPECT(gbc.pc(), 0x86c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c5), 0xcb);
        EXPECT(gbc.readMem(0x86c6), 0xec);
        // CB EC 0050
        gbc.setState(0xe0a2, 0xffb8, 0xcad0, 0x46fc, 0x98c4, 0x2585, 0x0, 0x0);
        gbc.writeMem(0xe0a2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xffb8);
        EXPECT(gbc.pc(), 0xe0a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a2), 0xcb);
        EXPECT(gbc.readMem(0xe0a3), 0xec);
        // CB EC 0051
        gbc.setState(0x5cb0, 0xb93e, 0xeda0, 0xbd71, 0x622e, 0xc335, 0x0, 0x0);
        gbc.writeMem(0x5cb0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb93e);
        EXPECT(gbc.pc(), 0x5cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0052
        gbc.setState(0x2b04, 0x8ce7, 0xd330, 0x63cf, 0xa201, 0x528a, 0x1, 0x0);
        gbc.writeMem(0x2b04, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8ce7);
        EXPECT(gbc.pc(), 0x2b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0053
        gbc.setState(0xe5ac, 0xe5ff, 0xed50, 0xbd25, 0x13ed, 0xb4d1, 0x0, 0x0);
        gbc.writeMem(0xe5ac, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe5ff);
        EXPECT(gbc.pc(), 0xe5ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ac), 0xcb);
        EXPECT(gbc.readMem(0xe5ad), 0xec);
        // CB EC 0054
        gbc.setState(0x4621, 0xf9b9, 0x6020, 0x33e2, 0x53c6, 0xfa43, 0x1, 0x0);
        gbc.writeMem(0x4621, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf9b9);
        EXPECT(gbc.pc(), 0x4623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0055
        gbc.setState(0x4f41, 0x882, 0x2570, 0xe1, 0x24a, 0x843a, 0x0, 0x1);
        gbc.writeMem(0x4f41, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x882);
        EXPECT(gbc.pc(), 0x4f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0056
        gbc.setState(0x7503, 0xe1df, 0x89d0, 0xf8bb, 0x729b, 0xce1d, 0x0, 0x1);
        gbc.writeMem(0x7503, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe1df);
        EXPECT(gbc.pc(), 0x7505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0057
        gbc.setState(0x22f4, 0xbe0, 0x59a0, 0x522d, 0x3ca2, 0xcad5, 0x1, 0x0);
        gbc.writeMem(0x22f4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbe0);
        EXPECT(gbc.pc(), 0x22f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0059
        gbc.setState(0x2d27, 0xcb93, 0x17d0, 0xa976, 0x26c3, 0xb520, 0x0, 0x0);
        gbc.writeMem(0x2d27, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcb93);
        EXPECT(gbc.pc(), 0x2d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 005A
        gbc.setState(0x2b02, 0x4348, 0x65f0, 0xff07, 0xb4b1, 0xa8ac, 0x1, 0x1);
        gbc.writeMem(0x2b02, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4348);
        EXPECT(gbc.pc(), 0x2b04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 005B
        gbc.setState(0x5dd9, 0x4d9a, 0x2ce0, 0xc887, 0xfaf0, 0x9fda, 0x1, 0x0);
        gbc.writeMem(0x5dd9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4d9a);
        EXPECT(gbc.pc(), 0x5ddb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 005C
        gbc.setState(0x9341, 0x6b41, 0xb020, 0xe858, 0x6130, 0x66dd, 0x1, 0x0);
        gbc.writeMem(0x9341, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6b41);
        EXPECT(gbc.pc(), 0x9343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9341), 0xcb);
        EXPECT(gbc.readMem(0x9342), 0xec);
        // CB EC 005D
        gbc.setState(0x5aaf, 0x86ad, 0x2d90, 0xe866, 0x7e65, 0xef54, 0x1, 0x1);
        gbc.writeMem(0x5aaf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x86ad);
        EXPECT(gbc.pc(), 0x5ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 005E
        gbc.setState(0x592d, 0xccad, 0x9f30, 0xd6a5, 0x6c92, 0x7c45, 0x1, 0x0);
        gbc.writeMem(0x592d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xccad);
        EXPECT(gbc.pc(), 0x592f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 005F
        gbc.setState(0x28ee, 0xe10c, 0xc140, 0x485e, 0x810, 0xe5fb, 0x1, 0x1);
        gbc.writeMem(0x28ee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe10c);
        EXPECT(gbc.pc(), 0x28f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0060
        gbc.setState(0x8d, 0x30d8, 0xbac0, 0x4e5c, 0x4aae, 0x8dbf, 0x1, 0x0);
        gbc.writeMem(0x8d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x30d8);
        EXPECT(gbc.pc(), 0x8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0061
        gbc.setState(0x114e, 0xc8fd, 0xab00, 0x47fe, 0xec4, 0x8a7a, 0x1, 0x1);
        gbc.writeMem(0x114e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc8fd);
        EXPECT(gbc.pc(), 0x1150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0062
        gbc.setState(0x93f9, 0x3257, 0xb1f0, 0x456f, 0x8031, 0x7590, 0x0, 0x1);
        gbc.writeMem(0x93f9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3257);
        EXPECT(gbc.pc(), 0x93fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f9), 0xcb);
        EXPECT(gbc.readMem(0x93fa), 0xec);
        // CB EC 0063
        gbc.setState(0x83dc, 0x68e8, 0x8340, 0x8d5b, 0x5749, 0x2a37, 0x1, 0x0);
        gbc.writeMem(0x83dc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x68e8);
        EXPECT(gbc.pc(), 0x83de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83dc), 0xcb);
        EXPECT(gbc.readMem(0x83dd), 0xec);
        // CB EC 0064
        gbc.setState(0x8f, 0xf4da, 0xfb10, 0x7b3a, 0xdda7, 0x732a, 0x1, 0x1);
        gbc.writeMem(0x8f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf4da);
        EXPECT(gbc.pc(), 0x91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0065
        gbc.setState(0xe7a, 0x41cb, 0xd2c0, 0xae2d, 0x7bca, 0x3dcd, 0x0, 0x0);
        gbc.writeMem(0xe7a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x41cb);
        EXPECT(gbc.pc(), 0xe7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0066
        gbc.setState(0xbc79, 0x1511, 0x96a0, 0x4c87, 0x7b8d, 0x4bd6, 0x1, 0x0);
        gbc.writeMem(0xbc79, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1511);
        EXPECT(gbc.pc(), 0xbc7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc79), 0xcb);
        EXPECT(gbc.readMem(0xbc7a), 0xec);
        // CB EC 0067
        gbc.setState(0xa2cf, 0x993f, 0x9220, 0xecac, 0x1e5d, 0x5a4f, 0x1, 0x1);
        gbc.writeMem(0xa2cf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x993f);
        EXPECT(gbc.pc(), 0xa2d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2cf), 0xcb);
        EXPECT(gbc.readMem(0xa2d0), 0xec);
        // CB EC 0068
        gbc.setState(0xb701, 0x40fd, 0xb4a0, 0x4d53, 0xfea3, 0xbcf9, 0x0, 0x0);
        gbc.writeMem(0xb701, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x40fd);
        EXPECT(gbc.pc(), 0xb703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb701), 0xcb);
        EXPECT(gbc.readMem(0xb702), 0xec);
        // CB EC 0069
        gbc.setState(0x5cc, 0x6cff, 0xe7b0, 0xe5fc, 0x185, 0x3252, 0x1, 0x0);
        gbc.writeMem(0x5cc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6cff);
        EXPECT(gbc.pc(), 0x5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 006A
        gbc.setState(0xe6f0, 0x5142, 0x1bc0, 0x3466, 0xee4a, 0x44be, 0x0, 0x1);
        gbc.writeMem(0xe6f0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5142);
        EXPECT(gbc.pc(), 0xe6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f0), 0xcb);
        EXPECT(gbc.readMem(0xe6f1), 0xec);
        // CB EC 006B
        gbc.setState(0xa7f4, 0xdfd8, 0xb690, 0xc2f7, 0xf5d9, 0xec28, 0x1, 0x1);
        gbc.writeMem(0xa7f4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdfd8);
        EXPECT(gbc.pc(), 0xa7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f4), 0xcb);
        EXPECT(gbc.readMem(0xa7f5), 0xec);
        // CB EC 006C
        gbc.setState(0x7b9, 0x8616, 0xc2c0, 0xff94, 0xd29f, 0xeeaa, 0x0, 0x1);
        gbc.writeMem(0x7b9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8616);
        EXPECT(gbc.pc(), 0x7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 006D
        gbc.setState(0x387f, 0xcefe, 0x1df0, 0x58cd, 0xd577, 0xc9a0, 0x0, 0x1);
        gbc.writeMem(0x387f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xcefe);
        EXPECT(gbc.pc(), 0x3881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 006E
        gbc.setState(0x55ad, 0xee70, 0x9d40, 0x7e8d, 0x42d, 0xc345, 0x0, 0x1);
        gbc.writeMem(0x55ad, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xee70);
        EXPECT(gbc.pc(), 0x55af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 006F
        gbc.setState(0x7f52, 0x227, 0x5d0, 0x3895, 0x1e95, 0xa4d4, 0x0, 0x1);
        gbc.writeMem(0x7f52, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x227);
        EXPECT(gbc.pc(), 0x7f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0071
        gbc.setState(0xa98, 0xb4ae, 0x5d00, 0xe98d, 0xf0bd, 0xe6, 0x1, 0x0);
        gbc.writeMem(0xa98, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb4ae);
        EXPECT(gbc.pc(), 0xa9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0072
        gbc.setState(0x589b, 0x3a37, 0x8880, 0x4ac5, 0xb5a3, 0x23d1, 0x1, 0x0);
        gbc.writeMem(0x589b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3a37);
        EXPECT(gbc.pc(), 0x589d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0073
        gbc.setState(0x4bf6, 0x7584, 0xd8c0, 0x933, 0x1926, 0xbab7, 0x1, 0x1);
        gbc.writeMem(0x4bf6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7584);
        EXPECT(gbc.pc(), 0x4bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0074
        gbc.setState(0x19d3, 0x1430, 0x5890, 0xecc4, 0xe6d9, 0xa514, 0x0, 0x0);
        gbc.writeMem(0x19d3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1430);
        EXPECT(gbc.pc(), 0x19d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0075
        gbc.setState(0xe60c, 0xea2f, 0xf7b0, 0xbb4, 0xd1b7, 0x3a2c, 0x0, 0x0);
        gbc.writeMem(0xe60c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xea2f);
        EXPECT(gbc.pc(), 0xe60e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe60c), 0xcb);
        EXPECT(gbc.readMem(0xe60d), 0xec);
        // CB EC 0076
        gbc.setState(0xb712, 0x801c, 0x5380, 0x394a, 0xef0f, 0xd74c, 0x1, 0x1);
        gbc.writeMem(0xb712, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x801c);
        EXPECT(gbc.pc(), 0xb714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb712), 0xcb);
        EXPECT(gbc.readMem(0xb713), 0xec);
        // CB EC 0077
        gbc.setState(0x5c7f, 0xa0ed, 0x6aa0, 0xee57, 0x4ff0, 0xe6ab, 0x1, 0x1);
        gbc.writeMem(0x5c7f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa0ed);
        EXPECT(gbc.pc(), 0x5c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0078
        gbc.setState(0xdfa7, 0xa311, 0xbb0, 0xa19b, 0xecc, 0x94e9, 0x1, 0x0);
        gbc.writeMem(0xdfa7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa311);
        EXPECT(gbc.pc(), 0xdfa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa7), 0xcb);
        EXPECT(gbc.readMem(0xdfa8), 0xec);
        // CB EC 007A
        gbc.setState(0xe178, 0xe683, 0x5260, 0x5778, 0x8113, 0xa11a, 0x1, 0x1);
        gbc.writeMem(0xe178, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe683);
        EXPECT(gbc.pc(), 0xe17a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe178), 0xcb);
        EXPECT(gbc.readMem(0xe179), 0xec);
        // CB EC 007B
        gbc.setState(0xc485, 0x7a8b, 0x70b0, 0x8758, 0x6482, 0x1430, 0x0, 0x1);
        gbc.writeMem(0xc485, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7a8b);
        EXPECT(gbc.pc(), 0xc487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc485), 0xcb);
        EXPECT(gbc.readMem(0xc486), 0xec);
        // CB EC 007C
        gbc.setState(0x4fc1, 0x3647, 0x78b0, 0x270a, 0xdb1d, 0x267a, 0x0, 0x0);
        gbc.writeMem(0x4fc1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3647);
        EXPECT(gbc.pc(), 0x4fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 007D
        gbc.setState(0xebb2, 0x7bee, 0x95c0, 0x3dda, 0xae42, 0xd3d5, 0x1, 0x0);
        gbc.writeMem(0xebb2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7bee);
        EXPECT(gbc.pc(), 0xebb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb2), 0xcb);
        EXPECT(gbc.readMem(0xebb3), 0xec);
        // CB EC 007E
        gbc.setState(0xc832, 0x137f, 0x640, 0xba0e, 0xc1e4, 0xc6c, 0x0, 0x0);
        gbc.writeMem(0xc832, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x137f);
        EXPECT(gbc.pc(), 0xc834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc832), 0xcb);
        EXPECT(gbc.readMem(0xc833), 0xec);
        // CB EC 007F
        gbc.setState(0xe8ca, 0x788a, 0xd360, 0x98c1, 0x7d99, 0xe421, 0x1, 0x0);
        gbc.writeMem(0xe8ca, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x788a);
        EXPECT(gbc.pc(), 0xe8cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ca), 0xcb);
        EXPECT(gbc.readMem(0xe8cb), 0xec);
        // CB EC 0080
        gbc.setState(0x2804, 0x5b76, 0xca60, 0x9784, 0x3f76, 0x8f20, 0x1, 0x1);
        gbc.writeMem(0x2804, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5b76);
        EXPECT(gbc.pc(), 0x2806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0081
        gbc.setState(0xd67b, 0xfb6e, 0xe6d0, 0x654e, 0x7c49, 0xd395, 0x0, 0x1);
        gbc.writeMem(0xd67b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfb6e);
        EXPECT(gbc.pc(), 0xd67d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd67b), 0xcb);
        EXPECT(gbc.readMem(0xd67c), 0xec);
        // CB EC 0082
        gbc.setState(0x84f6, 0x431a, 0x7f90, 0x4914, 0xcc4c, 0x509b, 0x1, 0x1);
        gbc.writeMem(0x84f6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x431a);
        EXPECT(gbc.pc(), 0x84f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84f6), 0xcb);
        EXPECT(gbc.readMem(0x84f7), 0xec);
        // CB EC 0083
        gbc.setState(0x5a60, 0x4d35, 0xf9b0, 0x9f0e, 0x31f4, 0xe5c2, 0x0, 0x0);
        gbc.writeMem(0x5a60, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4d35);
        EXPECT(gbc.pc(), 0x5a62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0084
        gbc.setState(0xef4e, 0x37b1, 0x91c0, 0x3037, 0xd645, 0x630a, 0x0, 0x0);
        gbc.writeMem(0xef4e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x37b1);
        EXPECT(gbc.pc(), 0xef50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4e), 0xcb);
        EXPECT(gbc.readMem(0xef4f), 0xec);
        // CB EC 0085
        gbc.setState(0xb961, 0xf422, 0x3130, 0x753c, 0x3ddb, 0xd9bc, 0x1, 0x0);
        gbc.writeMem(0xb961, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf422);
        EXPECT(gbc.pc(), 0xb963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb961), 0xcb);
        EXPECT(gbc.readMem(0xb962), 0xec);
        // CB EC 0086
        gbc.setState(0xb616, 0x8d64, 0x2190, 0x3bbe, 0x9af7, 0x81f4, 0x0, 0x1);
        gbc.writeMem(0xb616, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8d64);
        EXPECT(gbc.pc(), 0xb618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb616), 0xcb);
        EXPECT(gbc.readMem(0xb617), 0xec);
        // CB EC 0087
        gbc.setState(0x8cca, 0xb17d, 0x4940, 0xe261, 0x4446, 0x7fd1, 0x0, 0x0);
        gbc.writeMem(0x8cca, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb17d);
        EXPECT(gbc.pc(), 0x8ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cca), 0xcb);
        EXPECT(gbc.readMem(0x8ccb), 0xec);
        // CB EC 0088
        gbc.setState(0xe75, 0x8e82, 0xae20, 0xd2bd, 0xc5a9, 0x5936, 0x0, 0x0);
        gbc.writeMem(0xe75, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8e82);
        EXPECT(gbc.pc(), 0xe77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0089
        gbc.setState(0xd6e6, 0xd146, 0x3300, 0xf9dd, 0x7b22, 0x66c1, 0x1, 0x1);
        gbc.writeMem(0xd6e6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd146);
        EXPECT(gbc.pc(), 0xd6e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e6), 0xcb);
        EXPECT(gbc.readMem(0xd6e7), 0xec);
        // CB EC 008A
        gbc.setState(0xd28a, 0x221f, 0xd980, 0xbe83, 0xa63a, 0x67c5, 0x0, 0x1);
        gbc.writeMem(0xd28a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x221f);
        EXPECT(gbc.pc(), 0xd28c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28a), 0xcb);
        EXPECT(gbc.readMem(0xd28b), 0xec);
        // CB EC 008B
        gbc.setState(0x2544, 0x7be9, 0x86c0, 0x6b52, 0x236c, 0x819d, 0x0, 0x0);
        gbc.writeMem(0x2544, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7be9);
        EXPECT(gbc.pc(), 0x2546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 008C
        gbc.setState(0x3219, 0x1796, 0x9cc0, 0x5a49, 0x3e77, 0x3e29, 0x1, 0x0);
        gbc.writeMem(0x3219, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1796);
        EXPECT(gbc.pc(), 0x321b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 008E
        gbc.setState(0xb355, 0xd059, 0x4c30, 0x27a3, 0xcedc, 0xdf65, 0x0, 0x0);
        gbc.writeMem(0xb355, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd059);
        EXPECT(gbc.pc(), 0xb357);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb355), 0xcb);
        EXPECT(gbc.readMem(0xb356), 0xec);
        // CB EC 008F
        gbc.setState(0xb0c9, 0x22a4, 0xf770, 0x149b, 0xf2c1, 0xc759, 0x1, 0x0);
        gbc.writeMem(0xb0c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x22a4);
        EXPECT(gbc.pc(), 0xb0cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0c9), 0xcb);
        EXPECT(gbc.readMem(0xb0ca), 0xec);
        // CB EC 0090
        gbc.setState(0xeadb, 0xdda7, 0x9c80, 0x5ecd, 0x958e, 0xc925, 0x1, 0x0);
        gbc.writeMem(0xeadb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xdda7);
        EXPECT(gbc.pc(), 0xeadd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeadb), 0xcb);
        EXPECT(gbc.readMem(0xeadc), 0xec);
        // CB EC 0091
        gbc.setState(0xe2eb, 0xd25b, 0xc0f0, 0x2069, 0x6992, 0xf4e3, 0x0, 0x1);
        gbc.writeMem(0xe2eb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd25b);
        EXPECT(gbc.pc(), 0xe2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2eb), 0xcb);
        EXPECT(gbc.readMem(0xe2ec), 0xec);
        // CB EC 0092
        gbc.setState(0x15f2, 0x3d0e, 0xaf20, 0x93c2, 0xb2b3, 0x3dfb, 0x0, 0x0);
        gbc.writeMem(0x15f2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3d0e);
        EXPECT(gbc.pc(), 0x15f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0093
        gbc.setState(0xa96c, 0xcf31, 0x8b40, 0x5db2, 0xd656, 0x6ba5, 0x1, 0x0);
        gbc.writeMem(0xa96c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcf31);
        EXPECT(gbc.pc(), 0xa96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96c), 0xcb);
        EXPECT(gbc.readMem(0xa96d), 0xec);
        // CB EC 0094
        gbc.setState(0x88cb, 0xa6d7, 0xe00, 0xac94, 0x8c60, 0x2a92, 0x1, 0x0);
        gbc.writeMem(0x88cb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa6d7);
        EXPECT(gbc.pc(), 0x88cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88cb), 0xcb);
        EXPECT(gbc.readMem(0x88cc), 0xec);
        // CB EC 0095
        gbc.setState(0xdc1b, 0x91c2, 0x2830, 0x7a66, 0x6282, 0x5874, 0x1, 0x1);
        gbc.writeMem(0xdc1b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x91c2);
        EXPECT(gbc.pc(), 0xdc1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc1b), 0xcb);
        EXPECT(gbc.readMem(0xdc1c), 0xec);
        // CB EC 0096
        gbc.setState(0xe0a7, 0xe17a, 0xa9d0, 0x97a, 0xc82c, 0xdd17, 0x1, 0x1);
        gbc.writeMem(0xe0a7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe17a);
        EXPECT(gbc.pc(), 0xe0a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a7), 0xcb);
        EXPECT(gbc.readMem(0xe0a8), 0xec);
        // CB EC 0097
        gbc.setState(0xc936, 0xdb4b, 0xfe20, 0xcc67, 0x5f9, 0x9498, 0x1, 0x1);
        gbc.writeMem(0xc936, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdb4b);
        EXPECT(gbc.pc(), 0xc938);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc936), 0xcb);
        EXPECT(gbc.readMem(0xc937), 0xec);
        // CB EC 0098
        gbc.setState(0x4dc1, 0x278, 0x7610, 0x2440, 0xce35, 0x2780, 0x1, 0x1);
        gbc.writeMem(0x4dc1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x278);
        EXPECT(gbc.pc(), 0x4dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0099
        gbc.setState(0x5321, 0x3980, 0xe3a0, 0xc2c, 0x61dd, 0x11d, 0x1, 0x1);
        gbc.writeMem(0x5321, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3980);
        EXPECT(gbc.pc(), 0x5323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 009A
        gbc.setState(0x6652, 0xa00f, 0x9100, 0x4b7, 0xcbee, 0x768a, 0x1, 0x1);
        gbc.writeMem(0x6652, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa00f);
        EXPECT(gbc.pc(), 0x6654);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 009B
        gbc.setState(0x9999, 0xee7d, 0xfe00, 0x1eeb, 0xc49c, 0x653e, 0x1, 0x1);
        gbc.writeMem(0x9999, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xee7d);
        EXPECT(gbc.pc(), 0x999b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9999), 0xcb);
        EXPECT(gbc.readMem(0x999a), 0xec);
        // CB EC 009C
        gbc.setState(0x84ce, 0x647a, 0x8b00, 0x1553, 0x27cf, 0xf9e8, 0x0, 0x1);
        gbc.writeMem(0x84ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x647a);
        EXPECT(gbc.pc(), 0x84d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ce), 0xcb);
        EXPECT(gbc.readMem(0x84cf), 0xec);
        // CB EC 009D
        gbc.setState(0x208e, 0xcb3b, 0x2830, 0x90f2, 0x2732, 0x2c55, 0x1, 0x0);
        gbc.writeMem(0x208e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xcb3b);
        EXPECT(gbc.pc(), 0x2090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 009F
        gbc.setState(0x29a2, 0x8beb, 0xe090, 0xd55e, 0xb1, 0x6040, 0x0, 0x1);
        gbc.writeMem(0x29a2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8beb);
        EXPECT(gbc.pc(), 0x29a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00A0
        gbc.setState(0x873d, 0xc614, 0x2cf0, 0xb594, 0x8301, 0x185d, 0x1, 0x0);
        gbc.writeMem(0x873d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc614);
        EXPECT(gbc.pc(), 0x873f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873d), 0xcb);
        EXPECT(gbc.readMem(0x873e), 0xec);
        // CB EC 00A1
        gbc.setState(0x7353, 0xae66, 0x1310, 0xbc23, 0xd75f, 0x57d8, 0x1, 0x1);
        gbc.writeMem(0x7353, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xae66);
        EXPECT(gbc.pc(), 0x7355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00A2
        gbc.setState(0x3ff8, 0xf631, 0x1a40, 0xce8b, 0x16b, 0x2a20, 0x0, 0x0);
        gbc.writeMem(0x3ff8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf631);
        EXPECT(gbc.pc(), 0x3ffa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00A3
        gbc.setState(0xa083, 0x944f, 0x8bd0, 0x2a28, 0x1ed1, 0xce0, 0x1, 0x1);
        gbc.writeMem(0xa083, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x944f);
        EXPECT(gbc.pc(), 0xa085);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa083), 0xcb);
        EXPECT(gbc.readMem(0xa084), 0xec);
        // CB EC 00A4
        gbc.setState(0x8c18, 0x7a7c, 0x8640, 0xb20a, 0x4652, 0x5ae5, 0x0, 0x1);
        gbc.writeMem(0x8c18, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7a7c);
        EXPECT(gbc.pc(), 0x8c1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c18), 0xcb);
        EXPECT(gbc.readMem(0x8c19), 0xec);
        // CB EC 00A5
        gbc.setState(0xe4c7, 0x45e0, 0x60a0, 0x6baf, 0xf734, 0x5b55, 0x1, 0x1);
        gbc.writeMem(0xe4c7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x45e0);
        EXPECT(gbc.pc(), 0xe4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c7), 0xcb);
        EXPECT(gbc.readMem(0xe4c8), 0xec);
        // CB EC 00A6
        gbc.setState(0x48d4, 0xd235, 0x4cd0, 0xa927, 0xf528, 0xccba, 0x1, 0x0);
        gbc.writeMem(0x48d4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd235);
        EXPECT(gbc.pc(), 0x48d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00A7
        gbc.setState(0x35cb, 0x180e, 0xa650, 0xa2c9, 0x91, 0x7047, 0x1, 0x1);
        gbc.writeMem(0x35cb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x180e);
        EXPECT(gbc.pc(), 0x35cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00A8
        gbc.setState(0xd2e8, 0x449c, 0xff90, 0xd10e, 0xac64, 0x4b04, 0x1, 0x0);
        gbc.writeMem(0xd2e8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x449c);
        EXPECT(gbc.pc(), 0xd2ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e8), 0xcb);
        EXPECT(gbc.readMem(0xd2e9), 0xec);
        // CB EC 00A9
        gbc.setState(0x1c64, 0xb6f0, 0xfa80, 0xc7b1, 0xcbb3, 0x4719, 0x0, 0x1);
        gbc.writeMem(0x1c64, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb6f0);
        EXPECT(gbc.pc(), 0x1c66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00AA
        gbc.setState(0x43f, 0xa12e, 0x9700, 0xff1e, 0xed70, 0xd3f7, 0x0, 0x0);
        gbc.writeMem(0x43f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa12e);
        EXPECT(gbc.pc(), 0x441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00AB
        gbc.setState(0x7ab3, 0x78d8, 0xdbd0, 0x3e27, 0x8f06, 0xe16f, 0x1, 0x1);
        gbc.writeMem(0x7ab3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x78d8);
        EXPECT(gbc.pc(), 0x7ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00AC
        gbc.setState(0xeac5, 0xf588, 0xb060, 0xc884, 0x1dd0, 0x7394, 0x0, 0x0);
        gbc.writeMem(0xeac5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf588);
        EXPECT(gbc.pc(), 0xeac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeac5), 0xcb);
        EXPECT(gbc.readMem(0xeac6), 0xec);
        // CB EC 00AD
        gbc.setState(0x898d, 0x665d, 0xb1b0, 0xbbce, 0xf8fb, 0x2cb6, 0x1, 0x0);
        gbc.writeMem(0x898d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x665d);
        EXPECT(gbc.pc(), 0x898f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898d), 0xcb);
        EXPECT(gbc.readMem(0x898e), 0xec);
        // CB EC 00AE
        gbc.setState(0x2de5, 0xe6f7, 0x520, 0x75ee, 0xf51, 0x5650, 0x0, 0x0);
        gbc.writeMem(0x2de5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe6f7);
        EXPECT(gbc.pc(), 0x2de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00AF
        gbc.setState(0x9f97, 0x270b, 0x2e70, 0x2175, 0x9d34, 0x1cf3, 0x0, 0x0);
        gbc.writeMem(0x9f97, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x270b);
        EXPECT(gbc.pc(), 0x9f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f97), 0xcb);
        EXPECT(gbc.readMem(0x9f98), 0xec);
        // CB EC 00B0
        gbc.setState(0x8fef, 0x65f5, 0xfef0, 0x29e, 0x36d0, 0x37ce, 0x0, 0x1);
        gbc.writeMem(0x8fef, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x65f5);
        EXPECT(gbc.pc(), 0x8ff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fef), 0xcb);
        EXPECT(gbc.readMem(0x8ff0), 0xec);
        // CB EC 00B1
        gbc.setState(0x13ec, 0x6bfc, 0x9900, 0xe3b6, 0x2855, 0x22da, 0x0, 0x1);
        gbc.writeMem(0x13ec, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6bfc);
        EXPECT(gbc.pc(), 0x13ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00B2
        gbc.setState(0xbd82, 0x6a9f, 0xdc0, 0xc59c, 0x7640, 0x3b5e, 0x0, 0x1);
        gbc.writeMem(0xbd82, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6a9f);
        EXPECT(gbc.pc(), 0xbd84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd82), 0xcb);
        EXPECT(gbc.readMem(0xbd83), 0xec);
        // CB EC 00B3
        gbc.setState(0x1ca1, 0xab71, 0x6dd0, 0xe1b4, 0x8e07, 0x8b3e, 0x1, 0x0);
        gbc.writeMem(0x1ca1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xab71);
        EXPECT(gbc.pc(), 0x1ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00B4
        gbc.setState(0x6462, 0x281b, 0x1f00, 0x227c, 0x9011, 0x5cb4, 0x0, 0x1);
        gbc.writeMem(0x6462, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x281b);
        EXPECT(gbc.pc(), 0x6464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00B5
        gbc.setState(0x2791, 0x1514, 0x86d0, 0x6b35, 0xbdcf, 0x114e, 0x1, 0x0);
        gbc.writeMem(0x2791, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1514);
        EXPECT(gbc.pc(), 0x2793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00B6
        gbc.setState(0x75a, 0xbc27, 0xb6e0, 0xfb48, 0x3112, 0xa895, 0x1, 0x1);
        gbc.writeMem(0x75a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbc27);
        EXPECT(gbc.pc(), 0x75c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00B7
        gbc.setState(0x364, 0x5ebd, 0x4a90, 0x7c79, 0x83b2, 0x3e6, 0x1, 0x0);
        gbc.writeMem(0x364, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5ebd);
        EXPECT(gbc.pc(), 0x366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00B8
        gbc.setState(0xa788, 0xbced, 0x8940, 0x5aa0, 0xa17d, 0x5ebb, 0x0, 0x0);
        gbc.writeMem(0xa788, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbced);
        EXPECT(gbc.pc(), 0xa78a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa788), 0xcb);
        EXPECT(gbc.readMem(0xa789), 0xec);
        // CB EC 00B9
        gbc.setState(0xb59d, 0x9a4d, 0xa990, 0xea23, 0x175a, 0xdcae, 0x0, 0x1);
        gbc.writeMem(0xb59d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9a4d);
        EXPECT(gbc.pc(), 0xb59f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59d), 0xcb);
        EXPECT(gbc.readMem(0xb59e), 0xec);
        // CB EC 00BA
        gbc.setState(0x4549, 0xef7d, 0x1a80, 0xba59, 0x93d8, 0xea2c, 0x0, 0x0);
        gbc.writeMem(0x4549, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xef7d);
        EXPECT(gbc.pc(), 0x454b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00BB
        gbc.setState(0x9c1b, 0xa122, 0x9270, 0xfb24, 0x281a, 0x13ee, 0x1, 0x1);
        gbc.writeMem(0x9c1b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa122);
        EXPECT(gbc.pc(), 0x9c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c1b), 0xcb);
        EXPECT(gbc.readMem(0x9c1c), 0xec);
        // CB EC 00BC
        gbc.setState(0x1474, 0x536f, 0xf890, 0xf53a, 0x1167, 0x7ef, 0x0, 0x0);
        gbc.writeMem(0x1474, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x536f);
        EXPECT(gbc.pc(), 0x1476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00BD
        gbc.setState(0xd36, 0x2fbb, 0x5da0, 0x77e3, 0x5c47, 0xa001, 0x0, 0x0);
        gbc.writeMem(0xd36, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2fbb);
        EXPECT(gbc.pc(), 0xd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00BE
        gbc.setState(0xc94f, 0xe8a7, 0x2960, 0x282e, 0xb59b, 0x96a0, 0x1, 0x0);
        gbc.writeMem(0xc94f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe8a7);
        EXPECT(gbc.pc(), 0xc951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94f), 0xcb);
        EXPECT(gbc.readMem(0xc950), 0xec);
        // CB EC 00BF
        gbc.setState(0xc926, 0x5097, 0xedd0, 0x73fb, 0x435f, 0x8590, 0x1, 0x1);
        gbc.writeMem(0xc926, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5097);
        EXPECT(gbc.pc(), 0xc928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc926), 0xcb);
        EXPECT(gbc.readMem(0xc927), 0xec);
        // CB EC 00C0
        gbc.setState(0x572a, 0x5c5c, 0x7d40, 0x4028, 0xdd4c, 0xdb3, 0x0, 0x0);
        gbc.writeMem(0x572a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5c5c);
        EXPECT(gbc.pc(), 0x572c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00C1
        gbc.setState(0xc27f, 0x614b, 0x7a60, 0x5984, 0xe5b, 0xde15, 0x0, 0x1);
        gbc.writeMem(0xc27f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x614b);
        EXPECT(gbc.pc(), 0xc281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27f), 0xcb);
        EXPECT(gbc.readMem(0xc280), 0xec);
        // CB EC 00C2
        gbc.setState(0x5da, 0x1ca7, 0x4fc0, 0xd59a, 0x3206, 0xe740, 0x0, 0x0);
        gbc.writeMem(0x5da, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1ca7);
        EXPECT(gbc.pc(), 0x5dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00C3
        gbc.setState(0xb89e, 0x733a, 0xd0d0, 0xf4fa, 0x70bd, 0x1831, 0x0, 0x0);
        gbc.writeMem(0xb89e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x733a);
        EXPECT(gbc.pc(), 0xb8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb89e), 0xcb);
        EXPECT(gbc.readMem(0xb89f), 0xec);
        // CB EC 00C5
        gbc.setState(0xb6bf, 0x24c2, 0x2230, 0x15d4, 0xc6e2, 0x5bcb, 0x0, 0x0);
        gbc.writeMem(0xb6bf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x24c2);
        EXPECT(gbc.pc(), 0xb6c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6bf), 0xcb);
        EXPECT(gbc.readMem(0xb6c0), 0xec);
        // CB EC 00C6
        gbc.setState(0xb87, 0x805c, 0x9800, 0xf92a, 0x6f9a, 0x28ae, 0x0, 0x1);
        gbc.writeMem(0xb87, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x805c);
        EXPECT(gbc.pc(), 0xb89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00C7
        gbc.setState(0xcb6, 0xbded, 0xa1b0, 0x642, 0x95d5, 0x1e03, 0x1, 0x1);
        gbc.writeMem(0xcb6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbded);
        EXPECT(gbc.pc(), 0xcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00C8
        gbc.setState(0x6f46, 0x2c61, 0x2500, 0x1706, 0xacd3, 0x983b, 0x0, 0x0);
        gbc.writeMem(0x6f46, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2c61);
        EXPECT(gbc.pc(), 0x6f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00C9
        gbc.setState(0x59c6, 0xbbe9, 0x79c0, 0xe945, 0xef8c, 0x9e14, 0x1, 0x0);
        gbc.writeMem(0x59c6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbbe9);
        EXPECT(gbc.pc(), 0x59c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00CA
        gbc.setState(0xa4da, 0x5627, 0xb060, 0x482c, 0xeee, 0x8576, 0x1, 0x0);
        gbc.writeMem(0xa4da, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5627);
        EXPECT(gbc.pc(), 0xa4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4da), 0xcb);
        EXPECT(gbc.readMem(0xa4db), 0xec);
        // CB EC 00CB
        gbc.setState(0xd64d, 0x4089, 0xe6f0, 0x996d, 0x85b4, 0x2299, 0x1, 0x1);
        gbc.writeMem(0xd64d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4089);
        EXPECT(gbc.pc(), 0xd64f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd64d), 0xcb);
        EXPECT(gbc.readMem(0xd64e), 0xec);
        // CB EC 00CC
        gbc.setState(0x248f, 0x4202, 0xa890, 0xaf3c, 0x9915, 0xf63a, 0x1, 0x0);
        gbc.writeMem(0x248f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4202);
        EXPECT(gbc.pc(), 0x2491);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00CD
        gbc.setState(0x692c, 0x7140, 0x3fe0, 0x24fc, 0xa0c3, 0xd2d8, 0x1, 0x1);
        gbc.writeMem(0x692c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7140);
        EXPECT(gbc.pc(), 0x692e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00CE
        gbc.setState(0x5ee5, 0x4dc1, 0xc880, 0xf5dc, 0xc773, 0xb889, 0x1, 0x1);
        gbc.writeMem(0x5ee5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4dc1);
        EXPECT(gbc.pc(), 0x5ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00D0
        gbc.setState(0xaa65, 0x8a38, 0xfd50, 0xa00b, 0x8536, 0x69af, 0x1, 0x1);
        gbc.writeMem(0xaa65, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8a38);
        EXPECT(gbc.pc(), 0xaa67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa65), 0xcb);
        EXPECT(gbc.readMem(0xaa66), 0xec);
        // CB EC 00D1
        gbc.setState(0x7314, 0x62cf, 0x17a0, 0x5518, 0x9f2, 0x39d9, 0x1, 0x0);
        gbc.writeMem(0x7314, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x62cf);
        EXPECT(gbc.pc(), 0x7316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00D2
        gbc.setState(0x7f10, 0x5e0c, 0xa190, 0x345e, 0x9a15, 0xecf8, 0x0, 0x0);
        gbc.writeMem(0x7f10, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5e0c);
        EXPECT(gbc.pc(), 0x7f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00D3
        gbc.setState(0x5a0, 0x8263, 0x3e40, 0x1134, 0x66eb, 0xb104, 0x0, 0x1);
        gbc.writeMem(0x5a0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8263);
        EXPECT(gbc.pc(), 0x5a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00D4
        gbc.setState(0x7dbe, 0xf0fc, 0x8890, 0x3b8a, 0x5cc3, 0x105d, 0x1, 0x1);
        gbc.writeMem(0x7dbe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf0fc);
        EXPECT(gbc.pc(), 0x7dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00D5
        gbc.setState(0xdf89, 0x590f, 0xd8a0, 0x6da2, 0xbdab, 0xdd1a, 0x0, 0x1);
        gbc.writeMem(0xdf89, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x590f);
        EXPECT(gbc.pc(), 0xdf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf89), 0xcb);
        EXPECT(gbc.readMem(0xdf8a), 0xec);
        // CB EC 00D6
        gbc.setState(0x9175, 0x6955, 0xad90, 0xe310, 0xce50, 0xd409, 0x0, 0x0);
        gbc.writeMem(0x9175, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6955);
        EXPECT(gbc.pc(), 0x9177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9175), 0xcb);
        EXPECT(gbc.readMem(0x9176), 0xec);
        // CB EC 00D7
        gbc.setState(0x176a, 0x1353, 0x4f0, 0x93a, 0x8e68, 0x495, 0x1, 0x1);
        gbc.writeMem(0x176a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1353);
        EXPECT(gbc.pc(), 0x176c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00D8
        gbc.setState(0xc044, 0xa0ef, 0x51c0, 0xb5dc, 0x8d56, 0xbdb, 0x1, 0x0);
        gbc.writeMem(0xc044, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa0ef);
        EXPECT(gbc.pc(), 0xc046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc044), 0xcb);
        EXPECT(gbc.readMem(0xc045), 0xec);
        // CB EC 00D9
        gbc.setState(0x20ce, 0xdb09, 0xb10, 0xedd3, 0x9077, 0x8a04, 0x1, 0x0);
        gbc.writeMem(0x20ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdb09);
        EXPECT(gbc.pc(), 0x20d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00DA
        gbc.setState(0x921d, 0xaada, 0xe340, 0x994a, 0x7e9e, 0x42ae, 0x1, 0x0);
        gbc.writeMem(0x921d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xaada);
        EXPECT(gbc.pc(), 0x921f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921d), 0xcb);
        EXPECT(gbc.readMem(0x921e), 0xec);
        // CB EC 00DB
        gbc.setState(0x532a, 0xb10, 0x4b30, 0x65c7, 0xcda, 0x6ee0, 0x1, 0x0);
        gbc.writeMem(0x532a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb10);
        EXPECT(gbc.pc(), 0x532c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00DC
        gbc.setState(0x518c, 0xbc43, 0x8e30, 0x619c, 0xd404, 0x42ae, 0x1, 0x0);
        gbc.writeMem(0x518c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xbc43);
        EXPECT(gbc.pc(), 0x518e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00DD
        gbc.setState(0x61df, 0x97dd, 0x33f0, 0x33eb, 0xbe68, 0x8524, 0x0, 0x0);
        gbc.writeMem(0x61df, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x97dd);
        EXPECT(gbc.pc(), 0x61e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00DE
        gbc.setState(0xb5ce, 0x380, 0x13c0, 0x6cf6, 0xbf71, 0xe072, 0x1, 0x0);
        gbc.writeMem(0xb5ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x380);
        EXPECT(gbc.pc(), 0xb5d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ce), 0xcb);
        EXPECT(gbc.readMem(0xb5cf), 0xec);
        // CB EC 00DF
        gbc.setState(0x5046, 0xf9a, 0x74c0, 0x2d60, 0xa25c, 0xcf76, 0x1, 0x0);
        gbc.writeMem(0x5046, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf9a);
        EXPECT(gbc.pc(), 0x5048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00E0
        gbc.setState(0x24b9, 0xe5b5, 0xe3d0, 0x4693, 0x397d, 0x31f7, 0x1, 0x0);
        gbc.writeMem(0x24b9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe5b5);
        EXPECT(gbc.pc(), 0x24bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00E1
        gbc.setState(0xef85, 0x38ec, 0xc400, 0x9aec, 0xdef6, 0x94b5, 0x1, 0x1);
        gbc.writeMem(0xef85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x38ec);
        EXPECT(gbc.pc(), 0xef87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef85), 0xcb);
        EXPECT(gbc.readMem(0xef86), 0xec);
        // CB EC 00E2
        gbc.setState(0x2da, 0x29e5, 0x7dc0, 0x8ea7, 0xd978, 0x73f2, 0x0, 0x1);
        gbc.writeMem(0x2da, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x29e5);
        EXPECT(gbc.pc(), 0x2dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00E3
        gbc.setState(0xddf, 0x61cb, 0x4320, 0x2750, 0xf65, 0x7cb6, 0x0, 0x1);
        gbc.writeMem(0xddf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x61cb);
        EXPECT(gbc.pc(), 0xde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00E4
        gbc.setState(0x7a0a, 0x3104, 0xa9b0, 0xf726, 0xe327, 0x5080, 0x1, 0x1);
        gbc.writeMem(0x7a0a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3104);
        EXPECT(gbc.pc(), 0x7a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00E6
        gbc.setState(0x3e09, 0x2222, 0xf3e0, 0x54b7, 0x93c1, 0xf6fb, 0x0, 0x0);
        gbc.writeMem(0x3e09, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2222);
        EXPECT(gbc.pc(), 0x3e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00E7
        gbc.setState(0xdf81, 0x5b72, 0x6f10, 0x928e, 0x46c1, 0x8ffd, 0x1, 0x1);
        gbc.writeMem(0xdf81, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5b72);
        EXPECT(gbc.pc(), 0xdf83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf81), 0xcb);
        EXPECT(gbc.readMem(0xdf82), 0xec);
        // CB EC 00E8
        gbc.setState(0x68d2, 0x557d, 0x9ba0, 0xcbc3, 0xa9ab, 0xb029, 0x1, 0x0);
        gbc.writeMem(0x68d2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x557d);
        EXPECT(gbc.pc(), 0x68d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00E9
        gbc.setState(0xe77a, 0x62ac, 0xbb80, 0xdde1, 0x2720, 0x90ee, 0x1, 0x0);
        gbc.writeMem(0xe77a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x62ac);
        EXPECT(gbc.pc(), 0xe77c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe77a), 0xcb);
        EXPECT(gbc.readMem(0xe77b), 0xec);
        // CB EC 00EA
        gbc.setState(0xdf13, 0x7675, 0x6250, 0x4703, 0x4c0e, 0x549f, 0x1, 0x1);
        gbc.writeMem(0xdf13, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7675);
        EXPECT(gbc.pc(), 0xdf15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf13), 0xcb);
        EXPECT(gbc.readMem(0xdf14), 0xec);
        // CB EC 00EB
        gbc.setState(0xea0b, 0xfe43, 0x7d00, 0x51fd, 0xb3f0, 0x40a, 0x0, 0x1);
        gbc.writeMem(0xea0b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfe43);
        EXPECT(gbc.pc(), 0xea0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0b), 0xcb);
        EXPECT(gbc.readMem(0xea0c), 0xec);
        // CB EC 00EC
        gbc.setState(0xbad9, 0xd48b, 0xe650, 0x8eca, 0x30e0, 0x828b, 0x1, 0x0);
        gbc.writeMem(0xbad9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd48b);
        EXPECT(gbc.pc(), 0xbadb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad9), 0xcb);
        EXPECT(gbc.readMem(0xbada), 0xec);
        // CB EC 00ED
        gbc.setState(0xa730, 0x2086, 0xd080, 0x734b, 0x6aa6, 0x4e13, 0x1, 0x1);
        gbc.writeMem(0xa730, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2086);
        EXPECT(gbc.pc(), 0xa732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa730), 0xcb);
        EXPECT(gbc.readMem(0xa731), 0xec);
        // CB EC 00EE
        gbc.setState(0xbf24, 0x6a53, 0x7e30, 0x8ef6, 0x5225, 0xdc65, 0x0, 0x0);
        gbc.writeMem(0xbf24, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6a53);
        EXPECT(gbc.pc(), 0xbf26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf24), 0xcb);
        EXPECT(gbc.readMem(0xbf25), 0xec);
        // CB EC 00EF
        gbc.setState(0x8f42, 0xd943, 0xf840, 0xb132, 0xa666, 0x86f2, 0x1, 0x0);
        gbc.writeMem(0x8f42, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd943);
        EXPECT(gbc.pc(), 0x8f44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f42), 0xcb);
        EXPECT(gbc.readMem(0x8f43), 0xec);
        // CB EC 00F0
        gbc.setState(0xa58d, 0xad9a, 0x2f20, 0x254b, 0x6a91, 0x8d37, 0x0, 0x0);
        gbc.writeMem(0xa58d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xad9a);
        EXPECT(gbc.pc(), 0xa58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa58d), 0xcb);
        EXPECT(gbc.readMem(0xa58e), 0xec);
        // CB EC 00F1
        gbc.setState(0x2d49, 0x6536, 0x2b60, 0x291c, 0xca0a, 0x1709, 0x1, 0x1);
        gbc.writeMem(0x2d49, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6536);
        EXPECT(gbc.pc(), 0x2d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00F2
        gbc.setState(0x1523, 0x1c0e, 0x2c80, 0xd1b8, 0x93d3, 0xc187, 0x1, 0x0);
        gbc.writeMem(0x1523, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1c0e);
        EXPECT(gbc.pc(), 0x1525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00F3
        gbc.setState(0xef4d, 0x4309, 0xf00, 0xd295, 0x153e, 0xfbcb, 0x1, 0x0);
        gbc.writeMem(0xef4d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4309);
        EXPECT(gbc.pc(), 0xef4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4d), 0xcb);
        EXPECT(gbc.readMem(0xef4e), 0xec);
        // CB EC 00F4
        gbc.setState(0x3aca, 0xdd7f, 0xd690, 0xc609, 0x8f72, 0x1384, 0x0, 0x0);
        gbc.writeMem(0x3aca, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xdd7f);
        EXPECT(gbc.pc(), 0x3acc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00F5
        gbc.setState(0xd0e0, 0xa15c, 0x5540, 0x5a4c, 0x9fb, 0x14a8, 0x1, 0x1);
        gbc.writeMem(0xd0e0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa15c);
        EXPECT(gbc.pc(), 0xd0e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0e0), 0xcb);
        EXPECT(gbc.readMem(0xd0e1), 0xec);
        // CB EC 00F6
        gbc.setState(0x33b4, 0x4cca, 0xd230, 0x905d, 0xb16c, 0xa56e, 0x1, 0x1);
        gbc.writeMem(0x33b4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4cca);
        EXPECT(gbc.pc(), 0x33b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00F7
        gbc.setState(0x9279, 0x9473, 0x1f70, 0xa2fd, 0xdb71, 0x8c43, 0x0, 0x0);
        gbc.writeMem(0x9279, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9473);
        EXPECT(gbc.pc(), 0x927b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9279), 0xcb);
        EXPECT(gbc.readMem(0x927a), 0xec);
        // CB EC 00F8
        gbc.setState(0x4430, 0x2508, 0xcc80, 0x1fe4, 0xf947, 0xf66f, 0x1, 0x1);
        gbc.writeMem(0x4430, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0x4432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00F9
        gbc.setState(0x9462, 0x5b7e, 0x9900, 0x41cc, 0xa7dc, 0xfdde, 0x1, 0x0);
        gbc.writeMem(0x9462, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5b7e);
        EXPECT(gbc.pc(), 0x9464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9462), 0xcb);
        EXPECT(gbc.readMem(0x9463), 0xec);
        // CB EC 00FA
        gbc.setState(0x9636, 0x8eaa, 0xb950, 0x6cc8, 0xf31c, 0x203d, 0x0, 0x1);
        gbc.writeMem(0x9636, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8eaa);
        EXPECT(gbc.pc(), 0x9638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9636), 0xcb);
        EXPECT(gbc.readMem(0x9637), 0xec);
        // CB EC 00FB
        gbc.setState(0x526d, 0x1c52, 0x3bf0, 0x6f79, 0x8031, 0x8758, 0x1, 0x1);
        gbc.writeMem(0x526d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1c52);
        EXPECT(gbc.pc(), 0x526f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 00FC
        gbc.setState(0xbe76, 0xab03, 0xf600, 0x7f95, 0x8090, 0xccc3, 0x0, 0x1);
        gbc.writeMem(0xbe76, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xab03);
        EXPECT(gbc.pc(), 0xbe78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe76), 0xcb);
        EXPECT(gbc.readMem(0xbe77), 0xec);
        // CB EC 00FD
        gbc.setState(0x5cfd, 0xa4f6, 0x9a40, 0x6d44, 0xd680, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x5cfd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa4f6);
        EXPECT(gbc.pc(), 0x5cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 00FE
        gbc.setState(0x82fc, 0xc4ff, 0x6400, 0xb84c, 0x811e, 0xdac3, 0x1, 0x0);
        gbc.writeMem(0x82fc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc4ff);
        EXPECT(gbc.pc(), 0x82fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82fc), 0xcb);
        EXPECT(gbc.readMem(0x82fd), 0xec);
        // CB EC 00FF
        gbc.setState(0x3cd5, 0xb3e0, 0x8090, 0x7ff1, 0xff01, 0x15e2, 0x1, 0x1);
        gbc.writeMem(0x3cd5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb3e0);
        EXPECT(gbc.pc(), 0x3cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0100
        gbc.setState(0x5a98, 0x759a, 0x9d70, 0x6f47, 0xdf93, 0xe4c8, 0x0, 0x0);
        gbc.writeMem(0x5a98, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x759a);
        EXPECT(gbc.pc(), 0x5a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0101
        gbc.setState(0xe88e, 0xcb62, 0x45d0, 0xa968, 0x6f1a, 0xd2e9, 0x1, 0x1);
        gbc.writeMem(0xe88e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcb62);
        EXPECT(gbc.pc(), 0xe890);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88e), 0xcb);
        EXPECT(gbc.readMem(0xe88f), 0xec);
        // CB EC 0102
        gbc.setState(0x65c9, 0x52c9, 0x7b0, 0xec85, 0xa293, 0x40f8, 0x1, 0x0);
        gbc.writeMem(0x65c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x52c9);
        EXPECT(gbc.pc(), 0x65cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0103
        gbc.setState(0x5ec0, 0x8a86, 0x5630, 0x7690, 0x1d27, 0xc64d, 0x1, 0x1);
        gbc.writeMem(0x5ec0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8a86);
        EXPECT(gbc.pc(), 0x5ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0104
        gbc.setState(0xe326, 0xb41a, 0x4840, 0x596c, 0xaf7d, 0x5b7b, 0x0, 0x1);
        gbc.writeMem(0xe326, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb41a);
        EXPECT(gbc.pc(), 0xe328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe326), 0xcb);
        EXPECT(gbc.readMem(0xe327), 0xec);
        // CB EC 0105
        gbc.setState(0x6199, 0x57af, 0x5250, 0x834b, 0xd052, 0xeb18, 0x0, 0x1);
        gbc.writeMem(0x6199, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x57af);
        EXPECT(gbc.pc(), 0x619b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0106
        gbc.setState(0x147a, 0xc80e, 0xadd0, 0x9bf7, 0xf336, 0xebf7, 0x0, 0x1);
        gbc.writeMem(0x147a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc80e);
        EXPECT(gbc.pc(), 0x147c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0107
        gbc.setState(0xe63f, 0x6161, 0xc4e0, 0x6609, 0xe323, 0x372b, 0x1, 0x1);
        gbc.writeMem(0xe63f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6161);
        EXPECT(gbc.pc(), 0xe641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe63f), 0xcb);
        EXPECT(gbc.readMem(0xe640), 0xec);
        // CB EC 0108
        gbc.setState(0x5093, 0x459c, 0x2990, 0xfd9c, 0x6bf1, 0x17cf, 0x1, 0x1);
        gbc.writeMem(0x5093, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x459c);
        EXPECT(gbc.pc(), 0x5095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0109
        gbc.setState(0x2297, 0x155, 0x85b0, 0xf4e2, 0x4aff, 0x17b0, 0x1, 0x1);
        gbc.writeMem(0x2297, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x155);
        EXPECT(gbc.pc(), 0x2299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 010A
        gbc.setState(0xbb56, 0xfc3, 0xc6a0, 0xea89, 0x1746, 0xb4fb, 0x0, 0x0);
        gbc.writeMem(0xbb56, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfc3);
        EXPECT(gbc.pc(), 0xbb58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb56), 0xcb);
        EXPECT(gbc.readMem(0xbb57), 0xec);
        // CB EC 010B
        gbc.setState(0xbd85, 0xf9ff, 0xc810, 0x3bac, 0x14f, 0x8afa, 0x1, 0x0);
        gbc.writeMem(0xbd85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf9ff);
        EXPECT(gbc.pc(), 0xbd87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd85), 0xcb);
        EXPECT(gbc.readMem(0xbd86), 0xec);
        // CB EC 010C
        gbc.setState(0x6a1e, 0xe903, 0xf430, 0x85c7, 0xf30a, 0x94fe, 0x0, 0x1);
        gbc.writeMem(0x6a1e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe903);
        EXPECT(gbc.pc(), 0x6a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 010D
        gbc.setState(0xe55b, 0xe4d9, 0x1530, 0xa58f, 0xb303, 0xff36, 0x0, 0x1);
        gbc.writeMem(0xe55b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe4d9);
        EXPECT(gbc.pc(), 0xe55d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe55b), 0xcb);
        EXPECT(gbc.readMem(0xe55c), 0xec);
        // CB EC 010E
        gbc.setState(0x3d5c, 0xeeea, 0xe5c0, 0xd04e, 0xb6d2, 0x9df8, 0x0, 0x1);
        gbc.writeMem(0x3d5c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xeeea);
        EXPECT(gbc.pc(), 0x3d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 010F
        gbc.setState(0x4a39, 0x5d06, 0x5440, 0x62d3, 0x44ee, 0x4b6b, 0x0, 0x0);
        gbc.writeMem(0x4a39, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5d06);
        EXPECT(gbc.pc(), 0x4a3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0110
        gbc.setState(0x4cee, 0x37c4, 0x49d0, 0x4b73, 0x5f43, 0x2b81, 0x1, 0x0);
        gbc.writeMem(0x4cee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x37c4);
        EXPECT(gbc.pc(), 0x4cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0111
        gbc.setState(0xea8e, 0x84bd, 0xd610, 0x288, 0xa097, 0xcb63, 0x1, 0x0);
        gbc.writeMem(0xea8e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x84bd);
        EXPECT(gbc.pc(), 0xea90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8e), 0xcb);
        EXPECT(gbc.readMem(0xea8f), 0xec);
        // CB EC 0112
        gbc.setState(0x62b2, 0x9076, 0x7500, 0x5533, 0x381, 0x270d, 0x1, 0x1);
        gbc.writeMem(0x62b2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9076);
        EXPECT(gbc.pc(), 0x62b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0113
        gbc.setState(0x6ec0, 0x8f6f, 0x8dc0, 0x6f83, 0xc7a0, 0x3ed4, 0x0, 0x0);
        gbc.writeMem(0x6ec0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8f6f);
        EXPECT(gbc.pc(), 0x6ec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0114
        gbc.setState(0xa07, 0x68c2, 0xa930, 0x63ce, 0xaeb9, 0x425f, 0x1, 0x0);
        gbc.writeMem(0xa07, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x68c2);
        EXPECT(gbc.pc(), 0xa09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0115
        gbc.setState(0x93c9, 0xedb2, 0x7370, 0x4957, 0x9bd8, 0x59ee, 0x1, 0x0);
        gbc.writeMem(0x93c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xedb2);
        EXPECT(gbc.pc(), 0x93cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c9), 0xcb);
        EXPECT(gbc.readMem(0x93ca), 0xec);
        // CB EC 0116
        gbc.setState(0xb2dd, 0xea6, 0x25f0, 0x27d9, 0xbedf, 0x1ee0, 0x0, 0x1);
        gbc.writeMem(0xb2dd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xea6);
        EXPECT(gbc.pc(), 0xb2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2dd), 0xcb);
        EXPECT(gbc.readMem(0xb2de), 0xec);
        // CB EC 0117
        gbc.setState(0xa1, 0x84e3, 0x70d0, 0x8cf2, 0xe336, 0x1982, 0x0, 0x1);
        gbc.writeMem(0xa1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x84e3);
        EXPECT(gbc.pc(), 0xa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0118
        gbc.setState(0xa651, 0xadc2, 0x98f0, 0xd5b7, 0x5aa8, 0x6d12, 0x1, 0x0);
        gbc.writeMem(0xa651, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xadc2);
        EXPECT(gbc.pc(), 0xa653);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa651), 0xcb);
        EXPECT(gbc.readMem(0xa652), 0xec);
        // CB EC 0119
        gbc.setState(0xa4e9, 0x7f4d, 0xb20, 0x24df, 0x7cd6, 0x2442, 0x0, 0x1);
        gbc.writeMem(0xa4e9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7f4d);
        EXPECT(gbc.pc(), 0xa4eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e9), 0xcb);
        EXPECT(gbc.readMem(0xa4ea), 0xec);
        // CB EC 011A
        gbc.setState(0x1883, 0xd94e, 0x9b00, 0xe3f7, 0xde64, 0x6500, 0x0, 0x1);
        gbc.writeMem(0x1883, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd94e);
        EXPECT(gbc.pc(), 0x1885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 011B
        gbc.setState(0x9629, 0xa48e, 0x1b70, 0x7bb0, 0xff6f, 0x61b7, 0x1, 0x0);
        gbc.writeMem(0x9629, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa48e);
        EXPECT(gbc.pc(), 0x962b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9629), 0xcb);
        EXPECT(gbc.readMem(0x962a), 0xec);
        // CB EC 011C
        gbc.setState(0x8bf3, 0xd7f0, 0x4190, 0x5cba, 0xe566, 0x6355, 0x0, 0x0);
        gbc.writeMem(0x8bf3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd7f0);
        EXPECT(gbc.pc(), 0x8bf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf3), 0xcb);
        EXPECT(gbc.readMem(0x8bf4), 0xec);
        // CB EC 011D
        gbc.setState(0x4ca5, 0xbd1f, 0x38f0, 0xaed1, 0x7dbb, 0x8971, 0x0, 0x1);
        gbc.writeMem(0x4ca5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xbd1f);
        EXPECT(gbc.pc(), 0x4ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 011E
        gbc.setState(0xb0a9, 0xd726, 0x7800, 0x6aca, 0xc45, 0x438a, 0x1, 0x0);
        gbc.writeMem(0xb0a9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd726);
        EXPECT(gbc.pc(), 0xb0ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a9), 0xcb);
        EXPECT(gbc.readMem(0xb0aa), 0xec);
        // CB EC 011F
        gbc.setState(0x2ff6, 0x4392, 0x30e0, 0xc393, 0xadd3, 0x99c2, 0x0, 0x0);
        gbc.writeMem(0x2ff6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4392);
        EXPECT(gbc.pc(), 0x2ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0120
        gbc.setState(0xe41b, 0xb713, 0xbb70, 0xb1cc, 0x9697, 0xcd27, 0x0, 0x1);
        gbc.writeMem(0xe41b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb713);
        EXPECT(gbc.pc(), 0xe41d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe41b), 0xcb);
        EXPECT(gbc.readMem(0xe41c), 0xec);
        // CB EC 0121
        gbc.setState(0x1ec5, 0xf666, 0xde80, 0xe1ea, 0xa064, 0x57ea, 0x0, 0x0);
        gbc.writeMem(0x1ec5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf666);
        EXPECT(gbc.pc(), 0x1ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0122
        gbc.setState(0x767b, 0x3fc0, 0x8450, 0x2e03, 0x1072, 0xb37e, 0x0, 0x0);
        gbc.writeMem(0x767b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3fc0);
        EXPECT(gbc.pc(), 0x767d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0123
        gbc.setState(0xb369, 0x9f8e, 0x8d30, 0xf107, 0x1768, 0xa59, 0x0, 0x0);
        gbc.writeMem(0xb369, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9f8e);
        EXPECT(gbc.pc(), 0xb36b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb369), 0xcb);
        EXPECT(gbc.readMem(0xb36a), 0xec);
        // CB EC 0124
        gbc.setState(0x2ba1, 0x8f65, 0x14a0, 0xb673, 0x1509, 0xb89c, 0x0, 0x0);
        gbc.writeMem(0x2ba1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8f65);
        EXPECT(gbc.pc(), 0x2ba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0125
        gbc.setState(0x4260, 0xad5, 0x64c0, 0x9983, 0x2549, 0xb4f8, 0x0, 0x0);
        gbc.writeMem(0x4260, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xad5);
        EXPECT(gbc.pc(), 0x4262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0126
        gbc.setState(0xd73d, 0xdb31, 0x6e80, 0x3571, 0xa1f3, 0xc79, 0x1, 0x1);
        gbc.writeMem(0xd73d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdb31);
        EXPECT(gbc.pc(), 0xd73f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73d), 0xcb);
        EXPECT(gbc.readMem(0xd73e), 0xec);
        // CB EC 0127
        gbc.setState(0x8de, 0x5f2e, 0x8700, 0x6b1e, 0x7af2, 0x4af9, 0x0, 0x1);
        gbc.writeMem(0x8de, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5f2e);
        EXPECT(gbc.pc(), 0x8e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0128
        gbc.setState(0x8b72, 0x22b, 0x6620, 0x9728, 0xe058, 0x3291, 0x0, 0x1);
        gbc.writeMem(0x8b72, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x22b);
        EXPECT(gbc.pc(), 0x8b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b72), 0xcb);
        EXPECT(gbc.readMem(0x8b73), 0xec);
        // CB EC 0129
        gbc.setState(0xdc88, 0x421e, 0x70c0, 0xbf88, 0xc848, 0x2a64, 0x1, 0x1);
        gbc.writeMem(0xdc88, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x421e);
        EXPECT(gbc.pc(), 0xdc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc88), 0xcb);
        EXPECT(gbc.readMem(0xdc89), 0xec);
        // CB EC 012A
        gbc.setState(0x6b18, 0x3216, 0x8c80, 0xea9f, 0x8a9c, 0x2148, 0x1, 0x1);
        gbc.writeMem(0x6b18, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3216);
        EXPECT(gbc.pc(), 0x6b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 012B
        gbc.setState(0x3b18, 0xdfe6, 0xdfd0, 0xa3fc, 0xd406, 0x9aee, 0x0, 0x0);
        gbc.writeMem(0x3b18, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdfe6);
        EXPECT(gbc.pc(), 0x3b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 012C
        gbc.setState(0x53fb, 0x11c4, 0xe120, 0x49ea, 0xd73, 0x2075, 0x1, 0x1);
        gbc.writeMem(0x53fb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x11c4);
        EXPECT(gbc.pc(), 0x53fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 012D
        gbc.setState(0xdbe1, 0xd59, 0x7390, 0x662d, 0xaa06, 0x553d, 0x1, 0x0);
        gbc.writeMem(0xdbe1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd59);
        EXPECT(gbc.pc(), 0xdbe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe1), 0xcb);
        EXPECT(gbc.readMem(0xdbe2), 0xec);
        // CB EC 012E
        gbc.setState(0x6e89, 0x991d, 0xb5f0, 0x4188, 0xfbb4, 0x8e83, 0x0, 0x0);
        gbc.writeMem(0x6e89, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x991d);
        EXPECT(gbc.pc(), 0x6e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 012F
        gbc.setState(0x261, 0xf885, 0x3a30, 0xcbae, 0x62a6, 0xf595, 0x1, 0x1);
        gbc.writeMem(0x261, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf885);
        EXPECT(gbc.pc(), 0x263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0130
        gbc.setState(0xd3de, 0x2531, 0x39a0, 0xfe9, 0x5125, 0xa1ab, 0x0, 0x0);
        gbc.writeMem(0xd3de, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2531);
        EXPECT(gbc.pc(), 0xd3e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3de), 0xcb);
        EXPECT(gbc.readMem(0xd3df), 0xec);
        // CB EC 0131
        gbc.setState(0x53f3, 0x3151, 0xf3b0, 0x594c, 0x4aed, 0x63c9, 0x1, 0x0);
        gbc.writeMem(0x53f3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3151);
        EXPECT(gbc.pc(), 0x53f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0132
        gbc.setState(0x7992, 0x69a2, 0xdde0, 0x1664, 0xb6e6, 0x1b2c, 0x0, 0x1);
        gbc.writeMem(0x7992, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x69a2);
        EXPECT(gbc.pc(), 0x7994);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0133
        gbc.setState(0x1446, 0x47bf, 0xc580, 0xd8c7, 0x80f0, 0xa2, 0x1, 0x1);
        gbc.writeMem(0x1446, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x47bf);
        EXPECT(gbc.pc(), 0x1448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0134
        gbc.setState(0xde1, 0x3289, 0x9530, 0x2523, 0x786e, 0xe29b, 0x0, 0x1);
        gbc.writeMem(0xde1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3289);
        EXPECT(gbc.pc(), 0xde3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0135
        gbc.setState(0xb4d9, 0xb4eb, 0xdc10, 0x6b31, 0x42e8, 0xa5fb, 0x1, 0x0);
        gbc.writeMem(0xb4d9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb4eb);
        EXPECT(gbc.pc(), 0xb4db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d9), 0xcb);
        EXPECT(gbc.readMem(0xb4da), 0xec);
        // CB EC 0136
        gbc.setState(0x870a, 0x7c1c, 0x2f40, 0x1309, 0xf7d3, 0x1731, 0x0, 0x0);
        gbc.writeMem(0x870a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7c1c);
        EXPECT(gbc.pc(), 0x870c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870a), 0xcb);
        EXPECT(gbc.readMem(0x870b), 0xec);
        // CB EC 0138
        gbc.setState(0x89d8, 0xf9e, 0xe1c0, 0xb6da, 0x2717, 0x1a04, 0x1, 0x0);
        gbc.writeMem(0x89d8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf9e);
        EXPECT(gbc.pc(), 0x89da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d8), 0xcb);
        EXPECT(gbc.readMem(0x89d9), 0xec);
        // CB EC 0139
        gbc.setState(0x60d1, 0x7e94, 0x8be0, 0x2e71, 0xc13b, 0x21b1, 0x1, 0x1);
        gbc.writeMem(0x60d1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7e94);
        EXPECT(gbc.pc(), 0x60d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 013A
        gbc.setState(0xcb9f, 0xce6a, 0x4e90, 0x48fd, 0x670b, 0x8f25, 0x1, 0x1);
        gbc.writeMem(0xcb9f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xce6a);
        EXPECT(gbc.pc(), 0xcba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb9f), 0xcb);
        EXPECT(gbc.readMem(0xcba0), 0xec);
        // CB EC 013C
        gbc.setState(0x8bbd, 0x8866, 0x97c0, 0xe66d, 0x1010, 0x744b, 0x1, 0x1);
        gbc.writeMem(0x8bbd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8866);
        EXPECT(gbc.pc(), 0x8bbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bbd), 0xcb);
        EXPECT(gbc.readMem(0x8bbe), 0xec);
        // CB EC 013D
        gbc.setState(0x6b99, 0xdf42, 0xd900, 0xae0d, 0x5f98, 0x3167, 0x1, 0x0);
        gbc.writeMem(0x6b99, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xdf42);
        EXPECT(gbc.pc(), 0x6b9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 013E
        gbc.setState(0xca95, 0xa9a5, 0x2dc0, 0x4af2, 0x9d15, 0x406e, 0x0, 0x0);
        gbc.writeMem(0xca95, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa9a5);
        EXPECT(gbc.pc(), 0xca97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca95), 0xcb);
        EXPECT(gbc.readMem(0xca96), 0xec);
        // CB EC 013F
        gbc.setState(0x184e, 0x8b12, 0x35f0, 0xb0ec, 0x6099, 0xa717, 0x1, 0x0);
        gbc.writeMem(0x184e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8b12);
        EXPECT(gbc.pc(), 0x1850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0140
        gbc.setState(0xa13e, 0x12f7, 0xd800, 0xfb9d, 0x80d, 0x25c0, 0x0, 0x0);
        gbc.writeMem(0xa13e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x12f7);
        EXPECT(gbc.pc(), 0xa140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13e), 0xcb);
        EXPECT(gbc.readMem(0xa13f), 0xec);
        // CB EC 0141
        gbc.setState(0x96d2, 0x2f31, 0x6470, 0x2770, 0xa17a, 0x7cc6, 0x1, 0x0);
        gbc.writeMem(0x96d2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2f31);
        EXPECT(gbc.pc(), 0x96d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96d2), 0xcb);
        EXPECT(gbc.readMem(0x96d3), 0xec);
        // CB EC 0142
        gbc.setState(0xacb4, 0xf0cf, 0x27b0, 0x7ca8, 0x9815, 0x6722, 0x0, 0x0);
        gbc.writeMem(0xacb4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf0cf);
        EXPECT(gbc.pc(), 0xacb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb4), 0xcb);
        EXPECT(gbc.readMem(0xacb5), 0xec);
        // CB EC 0143
        gbc.setState(0xeea3, 0x85e0, 0x41d0, 0x35ea, 0x9171, 0xe9b6, 0x1, 0x1);
        gbc.writeMem(0xeea3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x85e0);
        EXPECT(gbc.pc(), 0xeea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea3), 0xcb);
        EXPECT(gbc.readMem(0xeea4), 0xec);
        // CB EC 0144
        gbc.setState(0x2ab9, 0xfdec, 0xf150, 0xd8c6, 0x2032, 0x2cbf, 0x0, 0x1);
        gbc.writeMem(0x2ab9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfdec);
        EXPECT(gbc.pc(), 0x2abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0145
        gbc.setState(0x57fe, 0xaae6, 0x94e0, 0x2499, 0x91f6, 0x9ed, 0x0, 0x1);
        gbc.writeMem(0x57fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xaae6);
        EXPECT(gbc.pc(), 0x5800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0146
        gbc.setState(0x7b4f, 0xa4cd, 0x5150, 0x5bbf, 0x4ee7, 0x3422, 0x1, 0x1);
        gbc.writeMem(0x7b4f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa4cd);
        EXPECT(gbc.pc(), 0x7b51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0147
        gbc.setState(0xe248, 0x7159, 0x53d0, 0x671c, 0x5ae6, 0x2bc7, 0x1, 0x1);
        gbc.writeMem(0xe248, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7159);
        EXPECT(gbc.pc(), 0xe24a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe248), 0xcb);
        EXPECT(gbc.readMem(0xe249), 0xec);
        // CB EC 0148
        gbc.setState(0x6c3f, 0x61b6, 0xd760, 0x28e2, 0x8627, 0x78c, 0x1, 0x1);
        gbc.writeMem(0x6c3f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x61b6);
        EXPECT(gbc.pc(), 0x6c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0149
        gbc.setState(0x7e36, 0xf737, 0xe280, 0xb3c0, 0x1303, 0xa923, 0x0, 0x0);
        gbc.writeMem(0x7e36, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf737);
        EXPECT(gbc.pc(), 0x7e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 014A
        gbc.setState(0xc189, 0x836f, 0xeeb0, 0xc216, 0xb7e3, 0xe43, 0x1, 0x0);
        gbc.writeMem(0xc189, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x836f);
        EXPECT(gbc.pc(), 0xc18b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc189), 0xcb);
        EXPECT(gbc.readMem(0xc18a), 0xec);
        // CB EC 014B
        gbc.setState(0x7b57, 0xfc8e, 0xb240, 0x6c16, 0x5406, 0xb8fa, 0x1, 0x1);
        gbc.writeMem(0x7b57, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xfc8e);
        EXPECT(gbc.pc(), 0x7b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 014C
        gbc.setState(0x5da6, 0x7776, 0xee0, 0xd147, 0xedea, 0xc00, 0x0, 0x0);
        gbc.writeMem(0x5da6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7776);
        EXPECT(gbc.pc(), 0x5da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 014D
        gbc.setState(0x5ae2, 0x4812, 0xafd0, 0x1ab0, 0xeee8, 0xe3ec, 0x0, 0x1);
        gbc.writeMem(0x5ae2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4812);
        EXPECT(gbc.pc(), 0x5ae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0150
        gbc.setState(0x5777, 0x5a3b, 0x45b0, 0x18fb, 0x5edb, 0xd7ea, 0x0, 0x1);
        gbc.writeMem(0x5777, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5a3b);
        EXPECT(gbc.pc(), 0x5779);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0151
        gbc.setState(0xd3c0, 0xb900, 0xe760, 0x1cea, 0x7f74, 0xcb18, 0x1, 0x0);
        gbc.writeMem(0xd3c0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb900);
        EXPECT(gbc.pc(), 0xd3c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c0), 0xcb);
        EXPECT(gbc.readMem(0xd3c1), 0xec);
        // CB EC 0152
        gbc.setState(0xbc2a, 0xf7eb, 0x80c0, 0x42d7, 0x30ca, 0xbb49, 0x1, 0x1);
        gbc.writeMem(0xbc2a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf7eb);
        EXPECT(gbc.pc(), 0xbc2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2a), 0xcb);
        EXPECT(gbc.readMem(0xbc2b), 0xec);
        // CB EC 0153
        gbc.setState(0x627f, 0x5f42, 0xde60, 0x275e, 0x4181, 0x61e, 0x1, 0x1);
        gbc.writeMem(0x627f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5f42);
        EXPECT(gbc.pc(), 0x6281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0155
        gbc.setState(0x8cf1, 0x3108, 0xa1b0, 0xa9a8, 0x73b1, 0x2c04, 0x0, 0x1);
        gbc.writeMem(0x8cf1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3108);
        EXPECT(gbc.pc(), 0x8cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf1), 0xcb);
        EXPECT(gbc.readMem(0x8cf2), 0xec);
        // CB EC 0156
        gbc.setState(0x893c, 0xc44d, 0x9e50, 0x7669, 0xd9df, 0xcd5d, 0x1, 0x0);
        gbc.writeMem(0x893c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc44d);
        EXPECT(gbc.pc(), 0x893e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x893c), 0xcb);
        EXPECT(gbc.readMem(0x893d), 0xec);
        // CB EC 0157
        gbc.setState(0xed47, 0x76c4, 0x5e00, 0xd008, 0xcc73, 0x5300, 0x0, 0x0);
        gbc.writeMem(0xed47, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x76c4);
        EXPECT(gbc.pc(), 0xed49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed47), 0xcb);
        EXPECT(gbc.readMem(0xed48), 0xec);
        // CB EC 0158
        gbc.setState(0x4da7, 0x77ee, 0x2f20, 0x8d98, 0x736f, 0xf7e, 0x0, 0x1);
        gbc.writeMem(0x4da7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x77ee);
        EXPECT(gbc.pc(), 0x4da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 015A
        gbc.setState(0x267e, 0x2b6e, 0xa300, 0xd148, 0x557e, 0x3845, 0x0, 0x1);
        gbc.writeMem(0x267e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2b6e);
        EXPECT(gbc.pc(), 0x2680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 015B
        gbc.setState(0xe9ac, 0xceaa, 0x9000, 0xfbcc, 0xda59, 0x7252, 0x0, 0x1);
        gbc.writeMem(0xe9ac, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xceaa);
        EXPECT(gbc.pc(), 0xe9ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ac), 0xcb);
        EXPECT(gbc.readMem(0xe9ad), 0xec);
        // CB EC 015C
        gbc.setState(0x2e55, 0x8f9c, 0xc690, 0xaec8, 0x75a0, 0x6c92, 0x0, 0x0);
        gbc.writeMem(0x2e55, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8f9c);
        EXPECT(gbc.pc(), 0x2e57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 015D
        gbc.setState(0x73b4, 0xc4a9, 0xca0, 0x9765, 0x1103, 0xd294, 0x0, 0x0);
        gbc.writeMem(0x73b4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc4a9);
        EXPECT(gbc.pc(), 0x73b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 015E
        gbc.setState(0xc7a1, 0x265a, 0x9740, 0x3509, 0x177, 0x54bc, 0x1, 0x0);
        gbc.writeMem(0xc7a1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x265a);
        EXPECT(gbc.pc(), 0xc7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7a1), 0xcb);
        EXPECT(gbc.readMem(0xc7a2), 0xec);
        // CB EC 015F
        gbc.setState(0xc68b, 0xca5c, 0x670, 0x6827, 0xdad9, 0xe2b5, 0x0, 0x1);
        gbc.writeMem(0xc68b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xca5c);
        EXPECT(gbc.pc(), 0xc68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc68b), 0xcb);
        EXPECT(gbc.readMem(0xc68c), 0xec);
        // CB EC 0160
        gbc.setState(0x8f76, 0x5f44, 0x4af0, 0x6d55, 0xb5c7, 0x24b5, 0x0, 0x0);
        gbc.writeMem(0x8f76, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5f44);
        EXPECT(gbc.pc(), 0x8f78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f76), 0xcb);
        EXPECT(gbc.readMem(0x8f77), 0xec);
        // CB EC 0161
        gbc.setState(0x86d4, 0xa107, 0x7880, 0x6d63, 0x4614, 0xf240, 0x0, 0x0);
        gbc.writeMem(0x86d4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa107);
        EXPECT(gbc.pc(), 0x86d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86d4), 0xcb);
        EXPECT(gbc.readMem(0x86d5), 0xec);
        // CB EC 0162
        gbc.setState(0x755a, 0xda92, 0x5040, 0x1f2d, 0x8335, 0xfb13, 0x0, 0x0);
        gbc.writeMem(0x755a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xda92);
        EXPECT(gbc.pc(), 0x755c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0163
        gbc.setState(0xad88, 0xb40d, 0x27a0, 0x9d2e, 0xe318, 0xf4ee, 0x0, 0x1);
        gbc.writeMem(0xad88, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb40d);
        EXPECT(gbc.pc(), 0xad8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad88), 0xcb);
        EXPECT(gbc.readMem(0xad89), 0xec);
        // CB EC 0164
        gbc.setState(0x1300, 0xfc77, 0x5d80, 0xf32c, 0x7a39, 0xd1d, 0x1, 0x1);
        gbc.writeMem(0x1300, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfc77);
        EXPECT(gbc.pc(), 0x1302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0165
        gbc.setState(0xa48e, 0x21fd, 0x8050, 0xe483, 0x8db3, 0x1a59, 0x0, 0x0);
        gbc.writeMem(0xa48e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x21fd);
        EXPECT(gbc.pc(), 0xa490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa48e), 0xcb);
        EXPECT(gbc.readMem(0xa48f), 0xec);
        // CB EC 0166
        gbc.setState(0xe285, 0x2961, 0xa600, 0x9240, 0x52a0, 0x3545, 0x1, 0x1);
        gbc.writeMem(0xe285, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0xe287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe285), 0xcb);
        EXPECT(gbc.readMem(0xe286), 0xec);
        // CB EC 0167
        gbc.setState(0x2808, 0xddff, 0x4db0, 0x22f1, 0x18b7, 0xd0cf, 0x0, 0x1);
        gbc.writeMem(0x2808, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xddff);
        EXPECT(gbc.pc(), 0x280a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0169
        gbc.setState(0xd21, 0x4be7, 0x4b00, 0x3a5a, 0x8fb0, 0x1f6, 0x0, 0x0);
        gbc.writeMem(0xd21, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4be7);
        EXPECT(gbc.pc(), 0xd23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 016A
        gbc.setState(0xa4dd, 0x2dcc, 0x8fa0, 0x4777, 0xa47a, 0xf219, 0x1, 0x0);
        gbc.writeMem(0xa4dd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2dcc);
        EXPECT(gbc.pc(), 0xa4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4dd), 0xcb);
        EXPECT(gbc.readMem(0xa4de), 0xec);
        // CB EC 016B
        gbc.setState(0x884, 0xa7d1, 0xd190, 0x94c2, 0xbaab, 0x5464, 0x0, 0x1);
        gbc.writeMem(0x884, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa7d1);
        EXPECT(gbc.pc(), 0x886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 016C
        gbc.setState(0x5860, 0xf2f, 0x5170, 0x36d7, 0xf3fd, 0x9b7b, 0x1, 0x1);
        gbc.writeMem(0x5860, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf2f);
        EXPECT(gbc.pc(), 0x5862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 016D
        gbc.setState(0xa78c, 0x3822, 0x6130, 0x442c, 0x69c4, 0xb110, 0x1, 0x1);
        gbc.writeMem(0xa78c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3822);
        EXPECT(gbc.pc(), 0xa78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78c), 0xcb);
        EXPECT(gbc.readMem(0xa78d), 0xec);
        // CB EC 016E
        gbc.setState(0x37cf, 0xd30d, 0x4d80, 0xe49a, 0xbe4c, 0x8e75, 0x0, 0x1);
        gbc.writeMem(0x37cf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd30d);
        EXPECT(gbc.pc(), 0x37d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 016F
        gbc.setState(0x5ead, 0x64da, 0xd2f0, 0x649f, 0x15b, 0x79f6, 0x1, 0x0);
        gbc.writeMem(0x5ead, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x64da);
        EXPECT(gbc.pc(), 0x5eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0170
        gbc.setState(0xac15, 0x7694, 0x1df0, 0x992b, 0x175e, 0x2b5a, 0x0, 0x1);
        gbc.writeMem(0xac15, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7694);
        EXPECT(gbc.pc(), 0xac17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac15), 0xcb);
        EXPECT(gbc.readMem(0xac16), 0xec);
        // CB EC 0172
        gbc.setState(0x4c48, 0xfa54, 0xa0c0, 0x5a00, 0xc79, 0x7357, 0x0, 0x0);
        gbc.writeMem(0x4c48, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfa54);
        EXPECT(gbc.pc(), 0x4c4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0173
        gbc.setState(0xe86a, 0xa682, 0x3900, 0x50a2, 0xf5e3, 0xc72b, 0x0, 0x0);
        gbc.writeMem(0xe86a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa682);
        EXPECT(gbc.pc(), 0xe86c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86a), 0xcb);
        EXPECT(gbc.readMem(0xe86b), 0xec);
        // CB EC 0174
        gbc.setState(0xcbe7, 0xccda, 0xb990, 0xc5ca, 0xad0f, 0xd9a8, 0x0, 0x1);
        gbc.writeMem(0xcbe7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xccda);
        EXPECT(gbc.pc(), 0xcbe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe7), 0xcb);
        EXPECT(gbc.readMem(0xcbe8), 0xec);
        // CB EC 0175
        gbc.setState(0x961d, 0xb68d, 0xe4b0, 0xb4ec, 0x9296, 0x739d, 0x1, 0x0);
        gbc.writeMem(0x961d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb68d);
        EXPECT(gbc.pc(), 0x961f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x961d), 0xcb);
        EXPECT(gbc.readMem(0x961e), 0xec);
        // CB EC 0176
        gbc.setState(0x7e41, 0x787e, 0xfc20, 0xfdd, 0xd144, 0xb1f4, 0x0, 0x0);
        gbc.writeMem(0x7e41, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x787e);
        EXPECT(gbc.pc(), 0x7e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0177
        gbc.setState(0x4d58, 0x54f8, 0x9cc0, 0x6e80, 0xd09c, 0xb833, 0x1, 0x0);
        gbc.writeMem(0x4d58, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x54f8);
        EXPECT(gbc.pc(), 0x4d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0178
        gbc.setState(0x203f, 0xfb41, 0x260, 0x32de, 0x3491, 0x4f7a, 0x0, 0x0);
        gbc.writeMem(0x203f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xfb41);
        EXPECT(gbc.pc(), 0x2041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0179
        gbc.setState(0xdf9e, 0x9bb2, 0x5cd0, 0xc55b, 0x90dc, 0x23a9, 0x1, 0x0);
        gbc.writeMem(0xdf9e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9bb2);
        EXPECT(gbc.pc(), 0xdfa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf9e), 0xcb);
        EXPECT(gbc.readMem(0xdf9f), 0xec);
        // CB EC 017A
        gbc.setState(0xeeda, 0x917b, 0x6060, 0xb455, 0x85e, 0xdc76, 0x1, 0x1);
        gbc.writeMem(0xeeda, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x917b);
        EXPECT(gbc.pc(), 0xeedc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeda), 0xcb);
        EXPECT(gbc.readMem(0xeedb), 0xec);
        // CB EC 017B
        gbc.setState(0x4d6a, 0x7726, 0xc520, 0x4aa9, 0xfa74, 0xb344, 0x1, 0x0);
        gbc.writeMem(0x4d6a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7726);
        EXPECT(gbc.pc(), 0x4d6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 017C
        gbc.setState(0xc5a4, 0x6c1d, 0x9480, 0xee7d, 0x4e81, 0xcd80, 0x1, 0x1);
        gbc.writeMem(0xc5a4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6c1d);
        EXPECT(gbc.pc(), 0xc5a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a4), 0xcb);
        EXPECT(gbc.readMem(0xc5a5), 0xec);
        // CB EC 017D
        gbc.setState(0x50db, 0xfa73, 0x2820, 0xa600, 0x3e19, 0xaa2d, 0x1, 0x0);
        gbc.writeMem(0x50db, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfa73);
        EXPECT(gbc.pc(), 0x50dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 017E
        gbc.setState(0xe4b4, 0xccc, 0x4f90, 0x3932, 0xc026, 0x11c4, 0x1, 0x1);
        gbc.writeMem(0xe4b4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xccc);
        EXPECT(gbc.pc(), 0xe4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4b4), 0xcb);
        EXPECT(gbc.readMem(0xe4b5), 0xec);
        // CB EC 017F
        gbc.setState(0x51f2, 0xe18, 0x64a0, 0xd95e, 0xaed0, 0x40f3, 0x1, 0x0);
        gbc.writeMem(0x51f2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe18);
        EXPECT(gbc.pc(), 0x51f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0180
        gbc.setState(0x9e40, 0xf9b5, 0xbea0, 0x36ae, 0x1d7c, 0x187b, 0x1, 0x0);
        gbc.writeMem(0x9e40, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf9b5);
        EXPECT(gbc.pc(), 0x9e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e40), 0xcb);
        EXPECT(gbc.readMem(0x9e41), 0xec);
        // CB EC 0181
        gbc.setState(0xc50e, 0x9881, 0x3a40, 0xb524, 0x8d66, 0x485c, 0x1, 0x1);
        gbc.writeMem(0xc50e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x9881);
        EXPECT(gbc.pc(), 0xc510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50e), 0xcb);
        EXPECT(gbc.readMem(0xc50f), 0xec);
        // CB EC 0182
        gbc.setState(0x1e41, 0x43d6, 0x7d60, 0x72d9, 0xf839, 0x2baa, 0x0, 0x1);
        gbc.writeMem(0x1e41, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x43d6);
        EXPECT(gbc.pc(), 0x1e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0183
        gbc.setState(0x9e72, 0xee79, 0xf60, 0x8276, 0x9c22, 0x95ec, 0x0, 0x0);
        gbc.writeMem(0x9e72, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xee79);
        EXPECT(gbc.pc(), 0x9e74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e72), 0xcb);
        EXPECT(gbc.readMem(0x9e73), 0xec);
        // CB EC 0184
        gbc.setState(0x8c7a, 0xcd94, 0x9360, 0x7dec, 0x87a4, 0x7c0a, 0x0, 0x0);
        gbc.writeMem(0x8c7a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcd94);
        EXPECT(gbc.pc(), 0x8c7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7a), 0xcb);
        EXPECT(gbc.readMem(0x8c7b), 0xec);
        // CB EC 0185
        gbc.setState(0xc14f, 0x5490, 0x7ce0, 0x1c5c, 0xb99e, 0x7837, 0x0, 0x1);
        gbc.writeMem(0xc14f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5490);
        EXPECT(gbc.pc(), 0xc151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc14f), 0xcb);
        EXPECT(gbc.readMem(0xc150), 0xec);
        // CB EC 0186
        gbc.setState(0x4efe, 0x453c, 0x7e50, 0xeb13, 0x675b, 0xdc2, 0x0, 0x0);
        gbc.writeMem(0x4efe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x453c);
        EXPECT(gbc.pc(), 0x4f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0187
        gbc.setState(0x3a10, 0x4380, 0x560, 0x6ccf, 0x423b, 0x6925, 0x0, 0x1);
        gbc.writeMem(0x3a10, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4380);
        EXPECT(gbc.pc(), 0x3a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0188
        gbc.setState(0x83fa, 0x1c38, 0x2a90, 0xd9a8, 0x9666, 0x81aa, 0x1, 0x1);
        gbc.writeMem(0x83fa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1c38);
        EXPECT(gbc.pc(), 0x83fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83fa), 0xcb);
        EXPECT(gbc.readMem(0x83fb), 0xec);
        // CB EC 0189
        gbc.setState(0x1c8a, 0xab2b, 0xcf30, 0x6d21, 0x6018, 0x6fe6, 0x1, 0x0);
        gbc.writeMem(0x1c8a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xab2b);
        EXPECT(gbc.pc(), 0x1c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 018A
        gbc.setState(0x34d6, 0x8f45, 0xa700, 0xa2ef, 0x9391, 0x88c0, 0x0, 0x0);
        gbc.writeMem(0x34d6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8f45);
        EXPECT(gbc.pc(), 0x34d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 018B
        gbc.setState(0x7bec, 0xea4a, 0xc6d0, 0x9bdd, 0xeca0, 0xac24, 0x1, 0x1);
        gbc.writeMem(0x7bec, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xea4a);
        EXPECT(gbc.pc(), 0x7bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 018C
        gbc.setState(0x3730, 0xe704, 0x6610, 0x42f2, 0x14ae, 0x54d3, 0x0, 0x0);
        gbc.writeMem(0x3730, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe704);
        EXPECT(gbc.pc(), 0x3732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 018D
        gbc.setState(0x1ca8, 0x2264, 0x1630, 0x35a2, 0x7728, 0x6367, 0x1, 0x1);
        gbc.writeMem(0x1ca8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2264);
        EXPECT(gbc.pc(), 0x1caa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 018E
        gbc.setState(0xdf11, 0xebea, 0x34b0, 0xfeca, 0xdad3, 0x777b, 0x0, 0x1);
        gbc.writeMem(0xdf11, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xebea);
        EXPECT(gbc.pc(), 0xdf13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf11), 0xcb);
        EXPECT(gbc.readMem(0xdf12), 0xec);
        // CB EC 018F
        gbc.setState(0x5359, 0x8a62, 0xd200, 0x7703, 0x3699, 0x6d7b, 0x1, 0x1);
        gbc.writeMem(0x5359, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8a62);
        EXPECT(gbc.pc(), 0x535b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0190
        gbc.setState(0xb5e1, 0x64dc, 0xc6a0, 0xcdd1, 0xd2fd, 0x65fb, 0x0, 0x0);
        gbc.writeMem(0xb5e1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x64dc);
        EXPECT(gbc.pc(), 0xb5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e1), 0xcb);
        EXPECT(gbc.readMem(0xb5e2), 0xec);
        // CB EC 0191
        gbc.setState(0x4b85, 0x931a, 0xa200, 0x7a64, 0x2752, 0x69e4, 0x0, 0x0);
        gbc.writeMem(0x4b85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x931a);
        EXPECT(gbc.pc(), 0x4b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0192
        gbc.setState(0x824f, 0xe132, 0xf5e0, 0x422, 0x1c45, 0xed06, 0x0, 0x1);
        gbc.writeMem(0x824f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe132);
        EXPECT(gbc.pc(), 0x8251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824f), 0xcb);
        EXPECT(gbc.readMem(0x8250), 0xec);
        // CB EC 0194
        gbc.setState(0x82b0, 0x60ab, 0x9140, 0xaedf, 0xc2a4, 0x7c7d, 0x1, 0x0);
        gbc.writeMem(0x82b0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x60ab);
        EXPECT(gbc.pc(), 0x82b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b0), 0xcb);
        EXPECT(gbc.readMem(0x82b1), 0xec);
        // CB EC 0195
        gbc.setState(0xcfd1, 0x3b72, 0xd310, 0xe89d, 0xc409, 0xd80f, 0x0, 0x1);
        gbc.writeMem(0xcfd1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3b72);
        EXPECT(gbc.pc(), 0xcfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd1), 0xcb);
        EXPECT(gbc.readMem(0xcfd2), 0xec);
        // CB EC 0196
        gbc.setState(0x2a2d, 0x6941, 0x8880, 0xc6ca, 0xf17d, 0x19f8, 0x0, 0x1);
        gbc.writeMem(0x2a2d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6941);
        EXPECT(gbc.pc(), 0x2a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0197
        gbc.setState(0x6d6a, 0x516b, 0x1e10, 0x1c1d, 0x6b4f, 0x8fa4, 0x1, 0x0);
        gbc.writeMem(0x6d6a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x516b);
        EXPECT(gbc.pc(), 0x6d6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0198
        gbc.setState(0xbe9, 0xecce, 0x2dd0, 0xed8e, 0xf92b, 0x7beb, 0x0, 0x0);
        gbc.writeMem(0xbe9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xecce);
        EXPECT(gbc.pc(), 0xbeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0199
        gbc.setState(0x5578, 0x463f, 0x46f0, 0x17db, 0x890e, 0x80c5, 0x0, 0x1);
        gbc.writeMem(0x5578, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x463f);
        EXPECT(gbc.pc(), 0x557a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 019A
        gbc.setState(0x2902, 0xfcda, 0x9840, 0x7e5d, 0xb08a, 0x34bc, 0x1, 0x0);
        gbc.writeMem(0x2902, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfcda);
        EXPECT(gbc.pc(), 0x2904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 019B
        gbc.setState(0x2227, 0x17f6, 0x8440, 0x36b, 0xfebc, 0xe5a1, 0x1, 0x1);
        gbc.writeMem(0x2227, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x17f6);
        EXPECT(gbc.pc(), 0x2229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 019C
        gbc.setState(0x5426, 0x5d53, 0xca20, 0x94a9, 0x361b, 0x59d7, 0x1, 0x0);
        gbc.writeMem(0x5426, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5d53);
        EXPECT(gbc.pc(), 0x5428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 019D
        gbc.setState(0xdfa6, 0x9b08, 0x530, 0xd7e6, 0x9427, 0x48cc, 0x1, 0x0);
        gbc.writeMem(0xdfa6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9b08);
        EXPECT(gbc.pc(), 0xdfa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa6), 0xcb);
        EXPECT(gbc.readMem(0xdfa7), 0xec);
        // CB EC 019E
        gbc.setState(0x442b, 0x1e2b, 0xc1d0, 0x2108, 0xd806, 0x2fb2, 0x0, 0x1);
        gbc.writeMem(0x442b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1e2b);
        EXPECT(gbc.pc(), 0x442d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 019F
        gbc.setState(0x853f, 0x6141, 0x1150, 0xc6c9, 0xda22, 0xe2ec, 0x0, 0x1);
        gbc.writeMem(0x853f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6141);
        EXPECT(gbc.pc(), 0x8541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x853f), 0xcb);
        EXPECT(gbc.readMem(0x8540), 0xec);
        // CB EC 01A0
        gbc.setState(0x21c3, 0x5cef, 0x3140, 0x5e8f, 0x19a7, 0x7a51, 0x0, 0x1);
        gbc.writeMem(0x21c3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5cef);
        EXPECT(gbc.pc(), 0x21c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01A1
        gbc.setState(0x3059, 0x743b, 0xbd00, 0xc44, 0xd48c, 0x6874, 0x0, 0x0);
        gbc.writeMem(0x3059, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x743b);
        EXPECT(gbc.pc(), 0x305b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01A2
        gbc.setState(0x757f, 0xb3ab, 0xf580, 0x7dad, 0x4059, 0x2b3f, 0x1, 0x1);
        gbc.writeMem(0x757f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb3ab);
        EXPECT(gbc.pc(), 0x7581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01A4
        gbc.setState(0x2d30, 0x4abd, 0xec40, 0x7eb, 0xf5, 0xccd3, 0x1, 0x1);
        gbc.writeMem(0x2d30, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4abd);
        EXPECT(gbc.pc(), 0x2d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01A5
        gbc.setState(0x5cbb, 0x1cf2, 0x3af0, 0xa9f6, 0x3141, 0xe9e4, 0x0, 0x1);
        gbc.writeMem(0x5cbb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1cf2);
        EXPECT(gbc.pc(), 0x5cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01A6
        gbc.setState(0xeb00, 0xc594, 0xc60, 0x3ce5, 0x205b, 0x3a62, 0x1, 0x0);
        gbc.writeMem(0xeb00, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc594);
        EXPECT(gbc.pc(), 0xeb02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb00), 0xcb);
        EXPECT(gbc.readMem(0xeb01), 0xec);
        // CB EC 01A7
        gbc.setState(0x7047, 0x190e, 0xb040, 0xfa7, 0x9cfd, 0xdd3e, 0x0, 0x0);
        gbc.writeMem(0x7047, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x190e);
        EXPECT(gbc.pc(), 0x7049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01A8
        gbc.setState(0x8f1a, 0x6e51, 0x7b90, 0xfa85, 0x8063, 0xc51e, 0x0, 0x0);
        gbc.writeMem(0x8f1a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6e51);
        EXPECT(gbc.pc(), 0x8f1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f1a), 0xcb);
        EXPECT(gbc.readMem(0x8f1b), 0xec);
        // CB EC 01A9
        gbc.setState(0x3de, 0xd098, 0xfbe0, 0xb06e, 0x9bb7, 0xc72d, 0x1, 0x0);
        gbc.writeMem(0x3de, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd098);
        EXPECT(gbc.pc(), 0x3e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01AA
        gbc.setState(0xe907, 0xb0a0, 0x3cf0, 0x6c9b, 0x66d2, 0xcf8, 0x1, 0x1);
        gbc.writeMem(0xe907, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb0a0);
        EXPECT(gbc.pc(), 0xe909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe907), 0xcb);
        EXPECT(gbc.readMem(0xe908), 0xec);
        // CB EC 01AB
        gbc.setState(0xc3e, 0x2319, 0xfe80, 0xa210, 0xe369, 0xb0e4, 0x0, 0x0);
        gbc.writeMem(0xc3e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2319);
        EXPECT(gbc.pc(), 0xc40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01AC
        gbc.setState(0x56c7, 0xe7c5, 0xb9f0, 0x5183, 0x7676, 0x4441, 0x0, 0x1);
        gbc.writeMem(0x56c7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe7c5);
        EXPECT(gbc.pc(), 0x56c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01AD
        gbc.setState(0xd5ec, 0xc277, 0x9030, 0x9757, 0x4e2c, 0x3889, 0x1, 0x0);
        gbc.writeMem(0xd5ec, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc277);
        EXPECT(gbc.pc(), 0xd5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ec), 0xcb);
        EXPECT(gbc.readMem(0xd5ed), 0xec);
        // CB EC 01AE
        gbc.setState(0xedaf, 0x6f65, 0x6ff0, 0x2017, 0x49ee, 0x6ae6, 0x1, 0x0);
        gbc.writeMem(0xedaf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6f65);
        EXPECT(gbc.pc(), 0xedb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedaf), 0xcb);
        EXPECT(gbc.readMem(0xedb0), 0xec);
        // CB EC 01AF
        gbc.setState(0x608f, 0xd167, 0xd7b0, 0x98f4, 0x3c73, 0x4566, 0x0, 0x0);
        gbc.writeMem(0x608f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd167);
        EXPECT(gbc.pc(), 0x6091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01B0
        gbc.setState(0x71a8, 0xed88, 0x60a0, 0x60fa, 0x1850, 0x213, 0x0, 0x1);
        gbc.writeMem(0x71a8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xed88);
        EXPECT(gbc.pc(), 0x71aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01B2
        gbc.setState(0x73f5, 0x5e4f, 0x3ed0, 0x3d52, 0xa259, 0x3a90, 0x0, 0x1);
        gbc.writeMem(0x73f5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5e4f);
        EXPECT(gbc.pc(), 0x73f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01B3
        gbc.setState(0x2e2e, 0x1fb0, 0x2300, 0xa43a, 0x1b4f, 0xcea2, 0x0, 0x0);
        gbc.writeMem(0x2e2e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1fb0);
        EXPECT(gbc.pc(), 0x2e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01B4
        gbc.setState(0x8377, 0x135, 0x51b0, 0xc3c5, 0xb0d4, 0xc733, 0x1, 0x1);
        gbc.writeMem(0x8377, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x135);
        EXPECT(gbc.pc(), 0x8379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8377), 0xcb);
        EXPECT(gbc.readMem(0x8378), 0xec);
        // CB EC 01B5
        gbc.setState(0x739a, 0x446f, 0x8f60, 0xeaad, 0xb81d, 0x5897, 0x0, 0x1);
        gbc.writeMem(0x739a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x446f);
        EXPECT(gbc.pc(), 0x739c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01B6
        gbc.setState(0x5d90, 0xc130, 0x93a0, 0xfdf2, 0x5fea, 0x9514, 0x0, 0x0);
        gbc.writeMem(0x5d90, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc130);
        EXPECT(gbc.pc(), 0x5d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01B7
        gbc.setState(0x1978, 0xb185, 0xc0f0, 0x152, 0xb765, 0xd21d, 0x1, 0x0);
        gbc.writeMem(0x1978, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb185);
        EXPECT(gbc.pc(), 0x197a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01B8
        gbc.setState(0xefc1, 0x372d, 0x7f0, 0x80dc, 0xbeb6, 0xdd1b, 0x0, 0x0);
        gbc.writeMem(0xefc1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x372d);
        EXPECT(gbc.pc(), 0xefc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefc1), 0xcb);
        EXPECT(gbc.readMem(0xefc2), 0xec);
        // CB EC 01B9
        gbc.setState(0xbbe0, 0x761d, 0x54c0, 0x3a4a, 0x16ac, 0x2e88, 0x1, 0x1);
        gbc.writeMem(0xbbe0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x761d);
        EXPECT(gbc.pc(), 0xbbe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbe0), 0xcb);
        EXPECT(gbc.readMem(0xbbe1), 0xec);
        // CB EC 01BA
        gbc.setState(0x23a2, 0x120a, 0x830, 0x1d50, 0xe852, 0xc404, 0x0, 0x1);
        gbc.writeMem(0x23a2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x120a);
        EXPECT(gbc.pc(), 0x23a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01BB
        gbc.setState(0x498, 0xbbda, 0x7a80, 0x6748, 0x8c36, 0xd756, 0x1, 0x0);
        gbc.writeMem(0x498, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbbda);
        EXPECT(gbc.pc(), 0x49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01BC
        gbc.setState(0x3b0b, 0xb921, 0xd240, 0x71e, 0xfd15, 0x84e0, 0x1, 0x1);
        gbc.writeMem(0x3b0b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb921);
        EXPECT(gbc.pc(), 0x3b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01BD
        gbc.setState(0x1ea5, 0x9a16, 0x2360, 0x2b1f, 0x6d2f, 0xb355, 0x0, 0x0);
        gbc.writeMem(0x1ea5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9a16);
        EXPECT(gbc.pc(), 0x1ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01BE
        gbc.setState(0x77d7, 0xf103, 0x9ee0, 0x6bea, 0x9a29, 0x41ee, 0x0, 0x0);
        gbc.writeMem(0x77d7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf103);
        EXPECT(gbc.pc(), 0x77d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01BF
        gbc.setState(0x1990, 0xa099, 0x8550, 0xcc0e, 0xaa93, 0xfe3a, 0x0, 0x1);
        gbc.writeMem(0x1990, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa099);
        EXPECT(gbc.pc(), 0x1992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01C0
        gbc.setState(0x5006, 0x9058, 0x9490, 0xd5c7, 0x40c4, 0x1b7c, 0x1, 0x1);
        gbc.writeMem(0x5006, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9058);
        EXPECT(gbc.pc(), 0x5008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01C1
        gbc.setState(0x1be5, 0xad65, 0x1fb0, 0x2fdd, 0x43c4, 0x4b3c, 0x1, 0x0);
        gbc.writeMem(0x1be5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xad65);
        EXPECT(gbc.pc(), 0x1be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01C2
        gbc.setState(0x4f9d, 0xf0b, 0xf8a0, 0x9d16, 0x2c23, 0xfb71, 0x0, 0x1);
        gbc.writeMem(0x4f9d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf0b);
        EXPECT(gbc.pc(), 0x4f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01C3
        gbc.setState(0x7d99, 0x485, 0x6870, 0x416b, 0xf1ad, 0x663e, 0x1, 0x1);
        gbc.writeMem(0x7d99, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x485);
        EXPECT(gbc.pc(), 0x7d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01C4
        gbc.setState(0x77a, 0xa999, 0x94e0, 0xb086, 0xe0f3, 0x650d, 0x0, 0x1);
        gbc.writeMem(0x77a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa999);
        EXPECT(gbc.pc(), 0x77c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01C5
        gbc.setState(0xa349, 0xefb, 0x2130, 0x68f5, 0x8af0, 0x57a5, 0x0, 0x0);
        gbc.writeMem(0xa349, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xefb);
        EXPECT(gbc.pc(), 0xa34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa349), 0xcb);
        EXPECT(gbc.readMem(0xa34a), 0xec);
        // CB EC 01C6
        gbc.setState(0x1520, 0x1fe, 0xa630, 0x9740, 0x4f78, 0x12b3, 0x0, 0x1);
        gbc.writeMem(0x1520, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1fe);
        EXPECT(gbc.pc(), 0x1522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01C7
        gbc.setState(0xab, 0xe87a, 0x11c0, 0xd294, 0xbaa9, 0x218, 0x1, 0x1);
        gbc.writeMem(0xab, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe87a);
        EXPECT(gbc.pc(), 0xad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01C8
        gbc.setState(0x400e, 0x2303, 0xffe0, 0x86b0, 0x43b1, 0x8906, 0x1, 0x0);
        gbc.writeMem(0x400e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2303);
        EXPECT(gbc.pc(), 0x4010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01C9
        gbc.setState(0x26be, 0xa54e, 0xe260, 0x3d3e, 0x6df6, 0xf2d5, 0x0, 0x0);
        gbc.writeMem(0x26be, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa54e);
        EXPECT(gbc.pc(), 0x26c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01CA
        gbc.setState(0xd451, 0x2307, 0x1190, 0x41c4, 0xbc39, 0x9cfd, 0x1, 0x1);
        gbc.writeMem(0xd451, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2307);
        EXPECT(gbc.pc(), 0xd453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd451), 0xcb);
        EXPECT(gbc.readMem(0xd452), 0xec);
        // CB EC 01CB
        gbc.setState(0xa1c7, 0x9c0a, 0xc710, 0x1002, 0xbc1e, 0x42ae, 0x0, 0x0);
        gbc.writeMem(0xa1c7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9c0a);
        EXPECT(gbc.pc(), 0xa1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c7), 0xcb);
        EXPECT(gbc.readMem(0xa1c8), 0xec);
        // CB EC 01CC
        gbc.setState(0x5e1, 0x707, 0xc360, 0x2cff, 0xd4e3, 0x20dc, 0x1, 0x0);
        gbc.writeMem(0x5e1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x707);
        EXPECT(gbc.pc(), 0x5e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01CE
        gbc.setState(0xe438, 0xad5b, 0x2340, 0x99bc, 0x529a, 0x4624, 0x0, 0x1);
        gbc.writeMem(0xe438, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xad5b);
        EXPECT(gbc.pc(), 0xe43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe438), 0xcb);
        EXPECT(gbc.readMem(0xe439), 0xec);
        // CB EC 01CF
        gbc.setState(0xa2ac, 0xb713, 0x2a0, 0x93f1, 0x5468, 0x180f, 0x1, 0x0);
        gbc.writeMem(0xa2ac, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb713);
        EXPECT(gbc.pc(), 0xa2ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ac), 0xcb);
        EXPECT(gbc.readMem(0xa2ad), 0xec);
        // CB EC 01D0
        gbc.setState(0x6f86, 0xbc9b, 0x62c0, 0x3399, 0x7073, 0x8e00, 0x1, 0x0);
        gbc.writeMem(0x6f86, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbc9b);
        EXPECT(gbc.pc(), 0x6f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01D1
        gbc.setState(0x2492, 0x75c4, 0x8690, 0xf21, 0x52e0, 0xb270, 0x1, 0x0);
        gbc.writeMem(0x2492, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x75c4);
        EXPECT(gbc.pc(), 0x2494);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01D2
        gbc.setState(0x8927, 0x41e8, 0x950, 0x2c40, 0x228a, 0x1c3, 0x1, 0x0);
        gbc.writeMem(0x8927, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x41e8);
        EXPECT(gbc.pc(), 0x8929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8927), 0xcb);
        EXPECT(gbc.readMem(0x8928), 0xec);
        // CB EC 01D3
        gbc.setState(0x34e4, 0x500, 0x9660, 0x715b, 0xd6b2, 0xa16, 0x1, 0x0);
        gbc.writeMem(0x34e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x500);
        EXPECT(gbc.pc(), 0x34e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01D4
        gbc.setState(0x719f, 0xa053, 0x5a80, 0x8fde, 0xd951, 0xde6e, 0x1, 0x0);
        gbc.writeMem(0x719f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa053);
        EXPECT(gbc.pc(), 0x71a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01D5
        gbc.setState(0x8fd8, 0x956f, 0x1270, 0x4b67, 0x830e, 0xab1e, 0x1, 0x0);
        gbc.writeMem(0x8fd8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x956f);
        EXPECT(gbc.pc(), 0x8fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd8), 0xcb);
        EXPECT(gbc.readMem(0x8fd9), 0xec);
        // CB EC 01D6
        gbc.setState(0x6602, 0x2840, 0x6a10, 0x6808, 0x6844, 0x8b06, 0x1, 0x0);
        gbc.writeMem(0x6602, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2840);
        EXPECT(gbc.pc(), 0x6604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01D7
        gbc.setState(0x6a64, 0xec64, 0x92e0, 0xce1e, 0xb485, 0xbc43, 0x0, 0x1);
        gbc.writeMem(0x6a64, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xec64);
        EXPECT(gbc.pc(), 0x6a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01D8
        gbc.setState(0xcfd7, 0xd208, 0xa0d0, 0xecef, 0xaa6f, 0x3815, 0x1, 0x0);
        gbc.writeMem(0xcfd7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd208);
        EXPECT(gbc.pc(), 0xcfd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd7), 0xcb);
        EXPECT(gbc.readMem(0xcfd8), 0xec);
        // CB EC 01D9
        gbc.setState(0x84c6, 0xf20b, 0xe170, 0x92a8, 0xcc59, 0xff86, 0x1, 0x0);
        gbc.writeMem(0x84c6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf20b);
        EXPECT(gbc.pc(), 0x84c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c6), 0xcb);
        EXPECT(gbc.readMem(0x84c7), 0xec);
        // CB EC 01DA
        gbc.setState(0x9e4a, 0xda59, 0xb950, 0x6e2e, 0x30c9, 0x8f89, 0x0, 0x0);
        gbc.writeMem(0x9e4a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xda59);
        EXPECT(gbc.pc(), 0x9e4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e4a), 0xcb);
        EXPECT(gbc.readMem(0x9e4b), 0xec);
        // CB EC 01DB
        gbc.setState(0xb146, 0x1189, 0xce40, 0xfe6d, 0x2b4a, 0xe501, 0x0, 0x1);
        gbc.writeMem(0xb146, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1189);
        EXPECT(gbc.pc(), 0xb148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb146), 0xcb);
        EXPECT(gbc.readMem(0xb147), 0xec);
        // CB EC 01DC
        gbc.setState(0xdf36, 0x689, 0x16a0, 0xc5dc, 0xc4a3, 0x389a, 0x1, 0x1);
        gbc.writeMem(0xdf36, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x689);
        EXPECT(gbc.pc(), 0xdf38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf36), 0xcb);
        EXPECT(gbc.readMem(0xdf37), 0xec);
        // CB EC 01DD
        gbc.setState(0x239f, 0x3050, 0xe020, 0x13c, 0x529d, 0x4221, 0x0, 0x1);
        gbc.writeMem(0x239f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3050);
        EXPECT(gbc.pc(), 0x23a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01DE
        gbc.setState(0x9c60, 0x2caa, 0x4ea0, 0x8954, 0x31dc, 0xb4b2, 0x1, 0x0);
        gbc.writeMem(0x9c60, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2caa);
        EXPECT(gbc.pc(), 0x9c62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c60), 0xcb);
        EXPECT(gbc.readMem(0x9c61), 0xec);
        // CB EC 01DF
        gbc.setState(0x3351, 0xad4f, 0x5830, 0xfeaf, 0x1259, 0x3bca, 0x0, 0x0);
        gbc.writeMem(0x3351, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xad4f);
        EXPECT(gbc.pc(), 0x3353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E0
        gbc.setState(0x4e48, 0x5114, 0x9e00, 0x958f, 0xcadb, 0xc4dc, 0x0, 0x0);
        gbc.writeMem(0x4e48, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5114);
        EXPECT(gbc.pc(), 0x4e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01E1
        gbc.setState(0xae17, 0xa31f, 0xed30, 0x9242, 0xde86, 0x4df, 0x1, 0x0);
        gbc.writeMem(0xae17, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa31f);
        EXPECT(gbc.pc(), 0xae19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae17), 0xcb);
        EXPECT(gbc.readMem(0xae18), 0xec);
        // CB EC 01E2
        gbc.setState(0x6eb4, 0x211e, 0xa8c0, 0xec56, 0xff2e, 0xb366, 0x1, 0x1);
        gbc.writeMem(0x6eb4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x211e);
        EXPECT(gbc.pc(), 0x6eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01E3
        gbc.setState(0x2a8, 0xcb6a, 0x7590, 0xeeac, 0xa645, 0xbc79, 0x1, 0x0);
        gbc.writeMem(0x2a8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcb6a);
        EXPECT(gbc.pc(), 0x2aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E4
        gbc.setState(0x231a, 0x830, 0x4f70, 0x619b, 0xa24f, 0xf4b7, 0x0, 0x0);
        gbc.writeMem(0x231a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x830);
        EXPECT(gbc.pc(), 0x231c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E5
        gbc.setState(0x67f8, 0xf933, 0x12b0, 0x6861, 0x9864, 0x632, 0x0, 0x0);
        gbc.writeMem(0x67f8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf933);
        EXPECT(gbc.pc(), 0x67fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E6
        gbc.setState(0x3632, 0x72c, 0x320, 0x6487, 0xa1f8, 0xf48, 0x0, 0x0);
        gbc.writeMem(0x3632, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x72c);
        EXPECT(gbc.pc(), 0x3634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01E7
        gbc.setState(0x7cbd, 0x9690, 0xd9f0, 0x3bca, 0x8850, 0x803, 0x1, 0x0);
        gbc.writeMem(0x7cbd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9690);
        EXPECT(gbc.pc(), 0x7cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E8
        gbc.setState(0x4ac0, 0xa362, 0x4d90, 0xd1ef, 0xca7d, 0x2c5c, 0x1, 0x1);
        gbc.writeMem(0x4ac0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa362);
        EXPECT(gbc.pc(), 0x4ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01E9
        gbc.setState(0x48c0, 0xc9e0, 0xdf20, 0x2668, 0xae29, 0x6b66, 0x1, 0x0);
        gbc.writeMem(0x48c0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc9e0);
        EXPECT(gbc.pc(), 0x48c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01EA
        gbc.setState(0x738b, 0xcf30, 0x8c80, 0xd6b2, 0x188c, 0x49aa, 0x1, 0x0);
        gbc.writeMem(0x738b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcf30);
        EXPECT(gbc.pc(), 0x738d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01EB
        gbc.setState(0x85d0, 0xeaab, 0xc080, 0x3ccb, 0x8265, 0x912f, 0x1, 0x1);
        gbc.writeMem(0x85d0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xeaab);
        EXPECT(gbc.pc(), 0x85d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d0), 0xcb);
        EXPECT(gbc.readMem(0x85d1), 0xec);
        // CB EC 01EC
        gbc.setState(0xb3c3, 0x15de, 0x7bb0, 0x62f3, 0x4a3e, 0x944f, 0x1, 0x1);
        gbc.writeMem(0xb3c3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x15de);
        EXPECT(gbc.pc(), 0xb3c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c3), 0xcb);
        EXPECT(gbc.readMem(0xb3c4), 0xec);
        // CB EC 01ED
        gbc.setState(0xda42, 0x1d53, 0xec90, 0xf94c, 0xe3f0, 0x45ba, 0x1, 0x0);
        gbc.writeMem(0xda42, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1d53);
        EXPECT(gbc.pc(), 0xda44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda42), 0xcb);
        EXPECT(gbc.readMem(0xda43), 0xec);
        // CB EC 01EE
        gbc.setState(0x5aa9, 0xe736, 0x4000, 0x1105, 0xd41c, 0x9df3, 0x1, 0x0);
        gbc.writeMem(0x5aa9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe736);
        EXPECT(gbc.pc(), 0x5aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01EF
        gbc.setState(0x1bc4, 0xc3dd, 0xbfd0, 0x481d, 0x9cb4, 0x1e53, 0x0, 0x1);
        gbc.writeMem(0x1bc4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc3dd);
        EXPECT(gbc.pc(), 0x1bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01F0
        gbc.setState(0x9925, 0x4200, 0xcd10, 0xb4db, 0x1b23, 0x1275, 0x0, 0x1);
        gbc.writeMem(0x9925, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4200);
        EXPECT(gbc.pc(), 0x9927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9925), 0xcb);
        EXPECT(gbc.readMem(0x9926), 0xec);
        // CB EC 01F1
        gbc.setState(0x99b8, 0xa7c3, 0x2ca0, 0x578, 0x8c49, 0xc82d, 0x0, 0x0);
        gbc.writeMem(0x99b8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa7c3);
        EXPECT(gbc.pc(), 0x99ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b8), 0xcb);
        EXPECT(gbc.readMem(0x99b9), 0xec);
        // CB EC 01F2
        gbc.setState(0xb571, 0x1050, 0x9ee0, 0x5064, 0x8d90, 0x926, 0x1, 0x0);
        gbc.writeMem(0xb571, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1050);
        EXPECT(gbc.pc(), 0xb573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb571), 0xcb);
        EXPECT(gbc.readMem(0xb572), 0xec);
        // CB EC 01F3
        gbc.setState(0x1e3a, 0xfeab, 0xc80, 0xe3b6, 0x4cd1, 0x83b4, 0x1, 0x1);
        gbc.writeMem(0x1e3a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfeab);
        EXPECT(gbc.pc(), 0x1e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01F4
        gbc.setState(0x7438, 0x8754, 0x45a0, 0xd83e, 0xf4ac, 0xe12e, 0x0, 0x1);
        gbc.writeMem(0x7438, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8754);
        EXPECT(gbc.pc(), 0x743a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01F5
        gbc.setState(0x9e61, 0x3b55, 0xc80, 0xf5b1, 0x8dcb, 0x519e, 0x1, 0x1);
        gbc.writeMem(0x9e61, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3b55);
        EXPECT(gbc.pc(), 0x9e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e61), 0xcb);
        EXPECT(gbc.readMem(0x9e62), 0xec);
        // CB EC 01F7
        gbc.setState(0x940e, 0xf30f, 0xcf60, 0xee21, 0x6084, 0x8ece, 0x1, 0x0);
        gbc.writeMem(0x940e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xf30f);
        EXPECT(gbc.pc(), 0x9410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x940e), 0xcb);
        EXPECT(gbc.readMem(0x940f), 0xec);
        // CB EC 01F8
        gbc.setState(0xac9c, 0x633c, 0x17a0, 0x1ccd, 0xf4dd, 0xb890, 0x0, 0x0);
        gbc.writeMem(0xac9c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x633c);
        EXPECT(gbc.pc(), 0xac9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac9c), 0xcb);
        EXPECT(gbc.readMem(0xac9d), 0xec);
        // CB EC 01F9
        gbc.setState(0x7239, 0xcf45, 0x1a0, 0xa144, 0x66f4, 0x3cf5, 0x0, 0x0);
        gbc.writeMem(0x7239, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xcf45);
        EXPECT(gbc.pc(), 0x723b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01FA
        gbc.setState(0x67ea, 0x46e3, 0xfb30, 0x5646, 0xfb65, 0xea88, 0x1, 0x1);
        gbc.writeMem(0x67ea, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x46e3);
        EXPECT(gbc.pc(), 0x67ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 01FB
        gbc.setState(0x3e43, 0x11fd, 0xd600, 0x9a2e, 0x6db3, 0x8abd, 0x0, 0x0);
        gbc.writeMem(0x3e43, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x11fd);
        EXPECT(gbc.pc(), 0x3e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 01FC
        gbc.setState(0x8240, 0xb3d3, 0xd270, 0xbd36, 0xa52d, 0xee1f, 0x0, 0x1);
        gbc.writeMem(0x8240, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb3d3);
        EXPECT(gbc.pc(), 0x8242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8240), 0xcb);
        EXPECT(gbc.readMem(0x8241), 0xec);
        // CB EC 01FD
        gbc.setState(0xe2ce, 0x54d2, 0xb4b0, 0xd52e, 0x2c18, 0x8d73, 0x1, 0x1);
        gbc.writeMem(0xe2ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x54d2);
        EXPECT(gbc.pc(), 0xe2d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2ce), 0xcb);
        EXPECT(gbc.readMem(0xe2cf), 0xec);
        // CB EC 01FE
        gbc.setState(0xd73a, 0x8d6a, 0xb510, 0x215c, 0xca29, 0x5c0d, 0x1, 0x0);
        gbc.writeMem(0xd73a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8d6a);
        EXPECT(gbc.pc(), 0xd73c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd73a), 0xcb);
        EXPECT(gbc.readMem(0xd73b), 0xec);
        // CB EC 01FF
        gbc.setState(0xbec0, 0x3f87, 0x57c0, 0xe6d6, 0x6cc6, 0x2175, 0x1, 0x0);
        gbc.writeMem(0xbec0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3f87);
        EXPECT(gbc.pc(), 0xbec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec0), 0xcb);
        EXPECT(gbc.readMem(0xbec1), 0xec);
        // CB EC 0200
        gbc.setState(0x437f, 0x3b0f, 0x1b10, 0x3ef8, 0xe513, 0x7351, 0x0, 0x1);
        gbc.writeMem(0x437f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3b0f);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0201
        gbc.setState(0xec61, 0xc4f3, 0x19a0, 0x10b4, 0x55cf, 0xcab9, 0x0, 0x1);
        gbc.writeMem(0xec61, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc4f3);
        EXPECT(gbc.pc(), 0xec63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec61), 0xcb);
        EXPECT(gbc.readMem(0xec62), 0xec);
        // CB EC 0202
        gbc.setState(0x2200, 0xe82a, 0xffa0, 0x9c6d, 0x806d, 0x188d, 0x0, 0x0);
        gbc.writeMem(0x2200, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe82a);
        EXPECT(gbc.pc(), 0x2202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0203
        gbc.setState(0xc5fe, 0x6e40, 0x3920, 0x8de2, 0xd5bf, 0x99e7, 0x0, 0x1);
        gbc.writeMem(0xc5fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6e40);
        EXPECT(gbc.pc(), 0xc600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fe), 0xcb);
        EXPECT(gbc.readMem(0xc5ff), 0xec);
        // CB EC 0204
        gbc.setState(0x4539, 0x24ad, 0x8120, 0xbbbd, 0x5d30, 0x48ad, 0x0, 0x0);
        gbc.writeMem(0x4539, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x24ad);
        EXPECT(gbc.pc(), 0x453b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0205
        gbc.setState(0xdb2f, 0x5091, 0x1770, 0x1a8, 0x988e, 0xdd6, 0x0, 0x0);
        gbc.writeMem(0xdb2f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5091);
        EXPECT(gbc.pc(), 0xdb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb2f), 0xcb);
        EXPECT(gbc.readMem(0xdb30), 0xec);
        // CB EC 0206
        gbc.setState(0xcae0, 0x139d, 0x4b50, 0xdc4b, 0xe4f, 0x9608, 0x0, 0x0);
        gbc.writeMem(0xcae0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x139d);
        EXPECT(gbc.pc(), 0xcae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae0), 0xcb);
        EXPECT(gbc.readMem(0xcae1), 0xec);
        // CB EC 0207
        gbc.setState(0x5c5e, 0x1c58, 0x340, 0x71ec, 0xb6e0, 0xc18c, 0x1, 0x1);
        gbc.writeMem(0x5c5e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1c58);
        EXPECT(gbc.pc(), 0x5c60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0208
        gbc.setState(0x4f99, 0xe054, 0x2810, 0x9374, 0xbf8a, 0xff06, 0x0, 0x0);
        gbc.writeMem(0x4f99, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe054);
        EXPECT(gbc.pc(), 0x4f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0209
        gbc.setState(0x281d, 0x4318, 0x8fa0, 0xaf3, 0x176, 0x574, 0x0, 0x1);
        gbc.writeMem(0x281d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4318);
        EXPECT(gbc.pc(), 0x281f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 020A
        gbc.setState(0x206e, 0xf7c3, 0x6290, 0x6560, 0xf64c, 0x2e32, 0x1, 0x1);
        gbc.writeMem(0x206e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xf7c3);
        EXPECT(gbc.pc(), 0x2070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 020C
        gbc.setState(0x235c, 0xff8c, 0xb10, 0x37cc, 0x9a08, 0xa105, 0x0, 0x1);
        gbc.writeMem(0x235c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xff8c);
        EXPECT(gbc.pc(), 0x235e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 020D
        gbc.setState(0x642e, 0x3695, 0x51f0, 0x7893, 0x8cb6, 0x9a05, 0x0, 0x1);
        gbc.writeMem(0x642e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3695);
        EXPECT(gbc.pc(), 0x6430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 020E
        gbc.setState(0xb8bc, 0x46ec, 0x69e0, 0x2cae, 0x6aa4, 0xb1f2, 0x0, 0x0);
        gbc.writeMem(0xb8bc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x46ec);
        EXPECT(gbc.pc(), 0xb8be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8bc), 0xcb);
        EXPECT(gbc.readMem(0xb8bd), 0xec);
        // CB EC 020F
        gbc.setState(0xaeaf, 0x5ab3, 0xfb70, 0x919e, 0x1b8f, 0xa594, 0x1, 0x1);
        gbc.writeMem(0xaeaf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5ab3);
        EXPECT(gbc.pc(), 0xaeb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeaf), 0xcb);
        EXPECT(gbc.readMem(0xaeb0), 0xec);
        // CB EC 0210
        gbc.setState(0x9f9, 0xf499, 0x11f0, 0x6766, 0x6ffd, 0x60da, 0x1, 0x1);
        gbc.writeMem(0x9f9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf499);
        EXPECT(gbc.pc(), 0x9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0211
        gbc.setState(0xcefa, 0x2633, 0xb940, 0x54f0, 0xefa9, 0xa47a, 0x1, 0x0);
        gbc.writeMem(0xcefa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2633);
        EXPECT(gbc.pc(), 0xcefc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcefa), 0xcb);
        EXPECT(gbc.readMem(0xcefb), 0xec);
        // CB EC 0212
        gbc.setState(0xe977, 0xe190, 0xd5d0, 0xc39c, 0x5b20, 0x4d10, 0x1, 0x1);
        gbc.writeMem(0xe977, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe190);
        EXPECT(gbc.pc(), 0xe979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe977), 0xcb);
        EXPECT(gbc.readMem(0xe978), 0xec);
        // CB EC 0213
        gbc.setState(0x3fbc, 0xbc9, 0xf6a0, 0xd644, 0x3455, 0xa4a5, 0x0, 0x0);
        gbc.writeMem(0x3fbc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbc9);
        EXPECT(gbc.pc(), 0x3fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0214
        gbc.setState(0xb238, 0x8af, 0x7740, 0xafe4, 0x6707, 0xeed0, 0x1, 0x0);
        gbc.writeMem(0xb238, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8af);
        EXPECT(gbc.pc(), 0xb23a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb238), 0xcb);
        EXPECT(gbc.readMem(0xb239), 0xec);
        // CB EC 0215
        gbc.setState(0xc41f, 0x889c, 0x5af0, 0x8274, 0xf217, 0x9c5f, 0x0, 0x0);
        gbc.writeMem(0xc41f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x889c);
        EXPECT(gbc.pc(), 0xc421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc41f), 0xcb);
        EXPECT(gbc.readMem(0xc420), 0xec);
        // CB EC 0216
        gbc.setState(0x64b6, 0x8e82, 0xd2e0, 0xa94c, 0x5aac, 0x835a, 0x0, 0x1);
        gbc.writeMem(0x64b6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8e82);
        EXPECT(gbc.pc(), 0x64b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0217
        gbc.setState(0xb940, 0x798b, 0xb090, 0x92c5, 0x4cf8, 0xd5bb, 0x1, 0x0);
        gbc.writeMem(0xb940, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x798b);
        EXPECT(gbc.pc(), 0xb942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb940), 0xcb);
        EXPECT(gbc.readMem(0xb941), 0xec);
        // CB EC 0218
        gbc.setState(0xa934, 0xec0e, 0xd4c0, 0x2792, 0x5433, 0x9867, 0x1, 0x1);
        gbc.writeMem(0xa934, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xec0e);
        EXPECT(gbc.pc(), 0xa936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa934), 0xcb);
        EXPECT(gbc.readMem(0xa935), 0xec);
        // CB EC 0219
        gbc.setState(0xc3fe, 0xf3a1, 0xf3a0, 0x868, 0xf7b1, 0x1d2b, 0x1, 0x0);
        gbc.writeMem(0xc3fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf3a1);
        EXPECT(gbc.pc(), 0xc400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3fe), 0xcb);
        EXPECT(gbc.readMem(0xc3ff), 0xec);
        // CB EC 021A
        gbc.setState(0xdf5d, 0x3919, 0x4f00, 0x909e, 0x414d, 0xcde2, 0x0, 0x0);
        gbc.writeMem(0xdf5d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3919);
        EXPECT(gbc.pc(), 0xdf5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5d), 0xcb);
        EXPECT(gbc.readMem(0xdf5e), 0xec);
        // CB EC 021B
        gbc.setState(0x86e0, 0x7ade, 0x1020, 0x82e8, 0xa8d4, 0xa79f, 0x1, 0x1);
        gbc.writeMem(0x86e0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7ade);
        EXPECT(gbc.pc(), 0x86e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e0), 0xcb);
        EXPECT(gbc.readMem(0x86e1), 0xec);
        // CB EC 021C
        gbc.setState(0x879a, 0x3c27, 0xfb30, 0xda1c, 0xb802, 0xdeca, 0x0, 0x0);
        gbc.writeMem(0x879a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3c27);
        EXPECT(gbc.pc(), 0x879c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x879a), 0xcb);
        EXPECT(gbc.readMem(0x879b), 0xec);
        // CB EC 021D
        gbc.setState(0x9f95, 0xa29b, 0x1870, 0x85f0, 0xa0ec, 0xb0f9, 0x1, 0x0);
        gbc.writeMem(0x9f95, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa29b);
        EXPECT(gbc.pc(), 0x9f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f95), 0xcb);
        EXPECT(gbc.readMem(0x9f96), 0xec);
        // CB EC 021E
        gbc.setState(0xa0fa, 0x426b, 0xe930, 0x37b8, 0x4a39, 0xc068, 0x1, 0x1);
        gbc.writeMem(0xa0fa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x426b);
        EXPECT(gbc.pc(), 0xa0fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0fa), 0xcb);
        EXPECT(gbc.readMem(0xa0fb), 0xec);
        // CB EC 021F
        gbc.setState(0xa899, 0xc68d, 0x15a0, 0xc491, 0x8f90, 0xdf10, 0x1, 0x1);
        gbc.writeMem(0xa899, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xa89b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa899), 0xcb);
        EXPECT(gbc.readMem(0xa89a), 0xec);
        // CB EC 0220
        gbc.setState(0x2341, 0x749d, 0x1fa0, 0x537c, 0x50f, 0x2373, 0x1, 0x0);
        gbc.writeMem(0x2341, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x749d);
        EXPECT(gbc.pc(), 0x2343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0221
        gbc.setState(0x11b2, 0x4bdb, 0x1c20, 0xa6e3, 0x6070, 0x47fe, 0x1, 0x0);
        gbc.writeMem(0x11b2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4bdb);
        EXPECT(gbc.pc(), 0x11b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0222
        gbc.setState(0xa9bc, 0x88a0, 0x25b0, 0xf6f9, 0x5738, 0x3f1f, 0x1, 0x0);
        gbc.writeMem(0xa9bc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x88a0);
        EXPECT(gbc.pc(), 0xa9be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9bc), 0xcb);
        EXPECT(gbc.readMem(0xa9bd), 0xec);
        // CB EC 0223
        gbc.setState(0x5d43, 0x7e6, 0xe60, 0x8fa9, 0x68a5, 0xbdd2, 0x1, 0x1);
        gbc.writeMem(0x5d43, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7e6);
        EXPECT(gbc.pc(), 0x5d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0224
        gbc.setState(0x3c76, 0xff3f, 0x2920, 0xead3, 0xee68, 0x9eef, 0x1, 0x1);
        gbc.writeMem(0x3c76, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xff3f);
        EXPECT(gbc.pc(), 0x3c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0225
        gbc.setState(0x949c, 0x7289, 0xacb0, 0xed94, 0x4910, 0x47c2, 0x1, 0x0);
        gbc.writeMem(0x949c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7289);
        EXPECT(gbc.pc(), 0x949e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x949c), 0xcb);
        EXPECT(gbc.readMem(0x949d), 0xec);
        // CB EC 0226
        gbc.setState(0x4fa3, 0x94c4, 0xf9c0, 0x15d9, 0xf08d, 0x1437, 0x0, 0x1);
        gbc.writeMem(0x4fa3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x94c4);
        EXPECT(gbc.pc(), 0x4fa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0227
        gbc.setState(0x9ce1, 0xc167, 0x8fc0, 0x1bfc, 0x94a0, 0x4d78, 0x1, 0x0);
        gbc.writeMem(0x9ce1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc167);
        EXPECT(gbc.pc(), 0x9ce3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce1), 0xcb);
        EXPECT(gbc.readMem(0x9ce2), 0xec);
        // CB EC 0229
        gbc.setState(0x78e0, 0x962, 0xcfb0, 0xc27f, 0x824c, 0x567f, 0x0, 0x0);
        gbc.writeMem(0x78e0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0x78e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 022A
        gbc.setState(0xab2d, 0x5e62, 0x4b20, 0x9929, 0x745, 0xf2f1, 0x1, 0x0);
        gbc.writeMem(0xab2d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5e62);
        EXPECT(gbc.pc(), 0xab2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2d), 0xcb);
        EXPECT(gbc.readMem(0xab2e), 0xec);
        // CB EC 022B
        gbc.setState(0x9502, 0x5955, 0x7fd0, 0x375e, 0xf49d, 0xb08e, 0x0, 0x1);
        gbc.writeMem(0x9502, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5955);
        EXPECT(gbc.pc(), 0x9504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9502), 0xcb);
        EXPECT(gbc.readMem(0x9503), 0xec);
        // CB EC 022C
        gbc.setState(0x60f6, 0x70a3, 0x9b20, 0xb99a, 0x1986, 0x3073, 0x0, 0x0);
        gbc.writeMem(0x60f6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x70a3);
        EXPECT(gbc.pc(), 0x60f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 022D
        gbc.setState(0x34db, 0x3bcc, 0x8530, 0x2ade, 0x4021, 0x3bc6, 0x0, 0x1);
        gbc.writeMem(0x34db, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3bcc);
        EXPECT(gbc.pc(), 0x34dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 022E
        gbc.setState(0x3e3e, 0xd82c, 0xad00, 0x336c, 0xde11, 0xaf9f, 0x0, 0x1);
        gbc.writeMem(0x3e3e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd82c);
        EXPECT(gbc.pc(), 0x3e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 022F
        gbc.setState(0x98ae, 0xc128, 0x3ae0, 0xbea1, 0xfba, 0x67d8, 0x0, 0x1);
        gbc.writeMem(0x98ae, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc128);
        EXPECT(gbc.pc(), 0x98b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ae), 0xcb);
        EXPECT(gbc.readMem(0x98af), 0xec);
        // CB EC 0230
        gbc.setState(0x108e, 0x1651, 0xca30, 0x5bc9, 0xef86, 0x33fb, 0x1, 0x1);
        gbc.writeMem(0x108e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1651);
        EXPECT(gbc.pc(), 0x1090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0231
        gbc.setState(0x7c58, 0x1d05, 0x99c0, 0x1e7c, 0x35ef, 0x40f8, 0x0, 0x0);
        gbc.writeMem(0x7c58, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1d05);
        EXPECT(gbc.pc(), 0x7c5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0232
        gbc.setState(0x639c, 0xcbda, 0x5700, 0x27ce, 0x36e, 0x33b9, 0x1, 0x0);
        gbc.writeMem(0x639c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcbda);
        EXPECT(gbc.pc(), 0x639e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0233
        gbc.setState(0x8841, 0xc8e2, 0x69a0, 0xec8a, 0xea05, 0xa2fe, 0x1, 0x0);
        gbc.writeMem(0x8841, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc8e2);
        EXPECT(gbc.pc(), 0x8843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8841), 0xcb);
        EXPECT(gbc.readMem(0x8842), 0xec);
        // CB EC 0234
        gbc.setState(0xcf6, 0x6698, 0xbd30, 0x870f, 0xa9d8, 0x5a5b, 0x1, 0x1);
        gbc.writeMem(0xcf6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6698);
        EXPECT(gbc.pc(), 0xcf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0235
        gbc.setState(0x2ede, 0x9515, 0xa8d0, 0x5322, 0x5a2, 0x4af8, 0x1, 0x1);
        gbc.writeMem(0x2ede, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9515);
        EXPECT(gbc.pc(), 0x2ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0236
        gbc.setState(0x57e0, 0x56ad, 0xdb0, 0x325, 0x8a20, 0xe7d0, 0x1, 0x0);
        gbc.writeMem(0x57e0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x56ad);
        EXPECT(gbc.pc(), 0x57e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0237
        gbc.setState(0xc0a4, 0x454, 0xb9f0, 0x9375, 0xc12e, 0x4ba2, 0x0, 0x1);
        gbc.writeMem(0xc0a4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x454);
        EXPECT(gbc.pc(), 0xc0a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0a4), 0xcb);
        EXPECT(gbc.readMem(0xc0a5), 0xec);
        // CB EC 0238
        gbc.setState(0xc7df, 0x4644, 0x27a0, 0x2b74, 0x9cb7, 0x7a2e, 0x1, 0x1);
        gbc.writeMem(0xc7df, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4644);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7df), 0xcb);
        EXPECT(gbc.readMem(0xc7e0), 0xec);
        // CB EC 0239
        gbc.setState(0x138, 0x48ed, 0x5c0, 0x344, 0x8761, 0xcf5f, 0x0, 0x1);
        gbc.writeMem(0x138, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x48ed);
        EXPECT(gbc.pc(), 0x13a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 023A
        gbc.setState(0x2af9, 0xe016, 0xcdb0, 0x3140, 0xb991, 0xeb0b, 0x1, 0x1);
        gbc.writeMem(0x2af9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe016);
        EXPECT(gbc.pc(), 0x2afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 023B
        gbc.setState(0x9190, 0x506e, 0xa100, 0xf022, 0x53a4, 0xc5d1, 0x1, 0x0);
        gbc.writeMem(0x9190, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x506e);
        EXPECT(gbc.pc(), 0x9192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9190), 0xcb);
        EXPECT(gbc.readMem(0x9191), 0xec);
        // CB EC 023C
        gbc.setState(0xa2cb, 0x5c5, 0x58a0, 0xb7c0, 0xaa6a, 0x36ac, 0x0, 0x1);
        gbc.writeMem(0xa2cb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5c5);
        EXPECT(gbc.pc(), 0xa2cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2cb), 0xcb);
        EXPECT(gbc.readMem(0xa2cc), 0xec);
        // CB EC 023E
        gbc.setState(0x5945, 0xf23f, 0x6430, 0xb2e1, 0x92ee, 0xa361, 0x0, 0x0);
        gbc.writeMem(0x5945, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf23f);
        EXPECT(gbc.pc(), 0x5947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 023F
        gbc.setState(0xc85, 0xc557, 0xf6d0, 0x69f7, 0x5097, 0x1a, 0x0, 0x1);
        gbc.writeMem(0xc85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc557);
        EXPECT(gbc.pc(), 0xc87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0240
        gbc.setState(0x6f1c, 0xc00a, 0xcbf0, 0x9983, 0x810e, 0xf512, 0x1, 0x0);
        gbc.writeMem(0x6f1c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc00a);
        EXPECT(gbc.pc(), 0x6f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0241
        gbc.setState(0x8543, 0xbf26, 0x30, 0xd6eb, 0x1ca5, 0xe810, 0x1, 0x0);
        gbc.writeMem(0x8543, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbf26);
        EXPECT(gbc.pc(), 0x8545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8543), 0xcb);
        EXPECT(gbc.readMem(0x8544), 0xec);
        // CB EC 0242
        gbc.setState(0x80d2, 0xaaea, 0xa2a0, 0xe644, 0xd8a8, 0xaa99, 0x0, 0x1);
        gbc.writeMem(0x80d2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xaaea);
        EXPECT(gbc.pc(), 0x80d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80d2), 0xcb);
        EXPECT(gbc.readMem(0x80d3), 0xec);
        // CB EC 0243
        gbc.setState(0x261a, 0x340f, 0x8d50, 0xccb7, 0x758b, 0x5c5f, 0x0, 0x0);
        gbc.writeMem(0x261a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x340f);
        EXPECT(gbc.pc(), 0x261c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0244
        gbc.setState(0x38c, 0xb104, 0xeb00, 0x6a4a, 0xe4da, 0xf315, 0x0, 0x1);
        gbc.writeMem(0x38c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb104);
        EXPECT(gbc.pc(), 0x38e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0245
        gbc.setState(0x3524, 0x4243, 0xf7d0, 0xb454, 0xbfb8, 0x144e, 0x0, 0x1);
        gbc.writeMem(0x3524, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4243);
        EXPECT(gbc.pc(), 0x3526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0246
        gbc.setState(0xc1ee, 0x241e, 0xd460, 0xe147, 0x8b01, 0xd62, 0x1, 0x0);
        gbc.writeMem(0xc1ee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x241e);
        EXPECT(gbc.pc(), 0xc1f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ee), 0xcb);
        EXPECT(gbc.readMem(0xc1ef), 0xec);
        // CB EC 0247
        gbc.setState(0x7a78, 0xb0da, 0x78d0, 0x854c, 0xee61, 0x5c0e, 0x1, 0x0);
        gbc.writeMem(0x7a78, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb0da);
        EXPECT(gbc.pc(), 0x7a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0248
        gbc.setState(0x2007, 0xd946, 0x23c0, 0xe68b, 0xfb30, 0x7c74, 0x1, 0x1);
        gbc.writeMem(0x2007, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd946);
        EXPECT(gbc.pc(), 0x2009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0249
        gbc.setState(0x87c2, 0x520a, 0x5400, 0x706, 0x6ab3, 0x158, 0x1, 0x1);
        gbc.writeMem(0x87c2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x520a);
        EXPECT(gbc.pc(), 0x87c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c2), 0xcb);
        EXPECT(gbc.readMem(0x87c3), 0xec);
        // CB EC 024A
        gbc.setState(0xb5ed, 0xa9ec, 0x9060, 0x802f, 0xa179, 0xeee0, 0x1, 0x1);
        gbc.writeMem(0xb5ed, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa9ec);
        EXPECT(gbc.pc(), 0xb5ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ed), 0xcb);
        EXPECT(gbc.readMem(0xb5ee), 0xec);
        // CB EC 024B
        gbc.setState(0x550b, 0x19bf, 0xe740, 0x65b0, 0xcda3, 0x923d, 0x1, 0x0);
        gbc.writeMem(0x550b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x19bf);
        EXPECT(gbc.pc(), 0x550d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 024C
        gbc.setState(0xde7b, 0xe15e, 0xc440, 0x894c, 0x3a48, 0xf553, 0x1, 0x0);
        gbc.writeMem(0xde7b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe15e);
        EXPECT(gbc.pc(), 0xde7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde7b), 0xcb);
        EXPECT(gbc.readMem(0xde7c), 0xec);
        // CB EC 024D
        gbc.setState(0x4a72, 0x47d4, 0x5cc0, 0x5f2e, 0x52ed, 0x76f6, 0x0, 0x1);
        gbc.writeMem(0x4a72, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x47d4);
        EXPECT(gbc.pc(), 0x4a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 024F
        gbc.setState(0xdda3, 0x32d3, 0xec30, 0x10e2, 0xe078, 0xd0a6, 0x1, 0x1);
        gbc.writeMem(0xdda3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x32d3);
        EXPECT(gbc.pc(), 0xdda5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda3), 0xcb);
        EXPECT(gbc.readMem(0xdda4), 0xec);
        // CB EC 0250
        gbc.setState(0x464c, 0x7469, 0x2ff0, 0x7ede, 0x4ebb, 0xc32d, 0x1, 0x1);
        gbc.writeMem(0x464c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7469);
        EXPECT(gbc.pc(), 0x464e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0251
        gbc.setState(0x457b, 0xbf79, 0x47d0, 0x5139, 0x4830, 0x7be8, 0x1, 0x0);
        gbc.writeMem(0x457b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xbf79);
        EXPECT(gbc.pc(), 0x457d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0252
        gbc.setState(0x6b30, 0xba1b, 0xc4f0, 0x563e, 0x1305, 0xaa65, 0x0, 0x0);
        gbc.writeMem(0x6b30, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xba1b);
        EXPECT(gbc.pc(), 0x6b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0253
        gbc.setState(0xd984, 0x9ec4, 0x3a80, 0x2a25, 0x6d86, 0x8c9e, 0x0, 0x0);
        gbc.writeMem(0xd984, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9ec4);
        EXPECT(gbc.pc(), 0xd986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd984), 0xcb);
        EXPECT(gbc.readMem(0xd985), 0xec);
        // CB EC 0254
        gbc.setState(0xcc47, 0x3660, 0x9980, 0x37b, 0x74e7, 0x5c94, 0x0, 0x1);
        gbc.writeMem(0xcc47, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3660);
        EXPECT(gbc.pc(), 0xcc49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc47), 0xcb);
        EXPECT(gbc.readMem(0xcc48), 0xec);
        // CB EC 0255
        gbc.setState(0x5ba2, 0x26b5, 0x2c20, 0x5065, 0x598c, 0x9da3, 0x0, 0x1);
        gbc.writeMem(0x5ba2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x26b5);
        EXPECT(gbc.pc(), 0x5ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0256
        gbc.setState(0x1daf, 0x76f, 0xd750, 0xf292, 0xf841, 0x6aad, 0x1, 0x1);
        gbc.writeMem(0x1daf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x76f);
        EXPECT(gbc.pc(), 0x1db1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0257
        gbc.setState(0x43b, 0xf5e0, 0xe70, 0x75be, 0x1533, 0xae3b, 0x1, 0x0);
        gbc.writeMem(0x43b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf5e0);
        EXPECT(gbc.pc(), 0x43d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0258
        gbc.setState(0x5408, 0xb481, 0xd830, 0x3a3f, 0x775c, 0xd313, 0x0, 0x0);
        gbc.writeMem(0x5408, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb481);
        EXPECT(gbc.pc(), 0x540a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0259
        gbc.setState(0x700b, 0xcf72, 0x4390, 0x3d12, 0xf996, 0x93f6, 0x0, 0x1);
        gbc.writeMem(0x700b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xcf72);
        EXPECT(gbc.pc(), 0x700d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 025A
        gbc.setState(0x4e81, 0x47f1, 0xb710, 0xbf39, 0xf94a, 0x47ac, 0x0, 0x1);
        gbc.writeMem(0x4e81, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x47f1);
        EXPECT(gbc.pc(), 0x4e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 025B
        gbc.setState(0xd2e, 0x76a7, 0xf010, 0x2185, 0x2076, 0x5f98, 0x1, 0x0);
        gbc.writeMem(0xd2e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x76a7);
        EXPECT(gbc.pc(), 0xd30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 025C
        gbc.setState(0x4558, 0x7461, 0x94e0, 0xafa8, 0x11b2, 0xbd82, 0x0, 0x1);
        gbc.writeMem(0x4558, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7461);
        EXPECT(gbc.pc(), 0x455a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 025D
        gbc.setState(0x29a8, 0x21d9, 0xfae0, 0x328c, 0xcaca, 0x3fd7, 0x0, 0x0);
        gbc.writeMem(0x29a8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x21d9);
        EXPECT(gbc.pc(), 0x29aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 025E
        gbc.setState(0x5916, 0xf74e, 0xea20, 0x69c3, 0x19d2, 0x2142, 0x0, 0x1);
        gbc.writeMem(0x5916, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf74e);
        EXPECT(gbc.pc(), 0x5918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 025F
        gbc.setState(0x4868, 0x5784, 0x7490, 0xacf4, 0x4eba, 0x33b5, 0x0, 0x1);
        gbc.writeMem(0x4868, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5784);
        EXPECT(gbc.pc(), 0x486a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0260
        gbc.setState(0x2e95, 0xf41a, 0x6e0, 0xc33, 0xe1f6, 0xb8e, 0x1, 0x0);
        gbc.writeMem(0x2e95, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf41a);
        EXPECT(gbc.pc(), 0x2e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0261
        gbc.setState(0x59c9, 0x48d8, 0x4e60, 0x994b, 0xd2f0, 0x47f, 0x0, 0x1);
        gbc.writeMem(0x59c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x48d8);
        EXPECT(gbc.pc(), 0x59cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0262
        gbc.setState(0xa344, 0x970a, 0x5140, 0x6b57, 0x829a, 0xcf8c, 0x1, 0x1);
        gbc.writeMem(0xa344, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x970a);
        EXPECT(gbc.pc(), 0xa346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa344), 0xcb);
        EXPECT(gbc.readMem(0xa345), 0xec);
        // CB EC 0263
        gbc.setState(0x3823, 0x8988, 0x90a0, 0xd1c1, 0xed09, 0xff72, 0x0, 0x1);
        gbc.writeMem(0x3823, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8988);
        EXPECT(gbc.pc(), 0x3825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0264
        gbc.setState(0x820b, 0x9e0a, 0x45f0, 0xfed5, 0x2f40, 0x8013, 0x1, 0x1);
        gbc.writeMem(0x820b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9e0a);
        EXPECT(gbc.pc(), 0x820d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x820b), 0xcb);
        EXPECT(gbc.readMem(0x820c), 0xec);
        // CB EC 0265
        gbc.setState(0xd875, 0xb090, 0xa340, 0xa1a7, 0x4e8c, 0x9595, 0x0, 0x0);
        gbc.writeMem(0xd875, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb090);
        EXPECT(gbc.pc(), 0xd877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd875), 0xcb);
        EXPECT(gbc.readMem(0xd876), 0xec);
        // CB EC 0266
        gbc.setState(0x269c, 0x7ba9, 0xdb30, 0x62b3, 0xa50c, 0xec4f, 0x0, 0x1);
        gbc.writeMem(0x269c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7ba9);
        EXPECT(gbc.pc(), 0x269e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0267
        gbc.setState(0x672c, 0xb48f, 0x8470, 0x1a9e, 0x2988, 0xcbf7, 0x1, 0x0);
        gbc.writeMem(0x672c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb48f);
        EXPECT(gbc.pc(), 0x672e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0268
        gbc.setState(0x482d, 0x796f, 0x7f10, 0x11f8, 0x7074, 0x9933, 0x0, 0x1);
        gbc.writeMem(0x482d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x796f);
        EXPECT(gbc.pc(), 0x482f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0269
        gbc.setState(0x3b, 0x2569, 0x7590, 0x86b3, 0x67c1, 0x5fbe, 0x0, 0x1);
        gbc.writeMem(0x3b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2569);
        EXPECT(gbc.pc(), 0x3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 026A
        gbc.setState(0x49af, 0x7eec, 0xfb00, 0xc7b8, 0x5ac6, 0x1be, 0x1, 0x0);
        gbc.writeMem(0x49af, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7eec);
        EXPECT(gbc.pc(), 0x49b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 026C
        gbc.setState(0xd76e, 0xac67, 0x6400, 0xdeb9, 0x1ce, 0x81e9, 0x1, 0x1);
        gbc.writeMem(0xd76e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xac67);
        EXPECT(gbc.pc(), 0xd770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd76e), 0xcb);
        EXPECT(gbc.readMem(0xd76f), 0xec);
        // CB EC 026D
        gbc.setState(0xdb72, 0x7368, 0x3b90, 0xe926, 0xd1cd, 0x8277, 0x0, 0x1);
        gbc.writeMem(0xdb72, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7368);
        EXPECT(gbc.pc(), 0xdb74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb72), 0xcb);
        EXPECT(gbc.readMem(0xdb73), 0xec);
        // CB EC 026E
        gbc.setState(0x243b, 0x258d, 0x5ee0, 0xb77d, 0x20fa, 0x3ff6, 0x0, 0x0);
        gbc.writeMem(0x243b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x258d);
        EXPECT(gbc.pc(), 0x243d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 026F
        gbc.setState(0x5eab, 0x4efa, 0x180, 0x334, 0x7048, 0x6cd3, 0x1, 0x0);
        gbc.writeMem(0x5eab, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4efa);
        EXPECT(gbc.pc(), 0x5ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0270
        gbc.setState(0xa210, 0xa5c8, 0x1110, 0x5d60, 0x8855, 0xbaf8, 0x0, 0x0);
        gbc.writeMem(0xa210, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa5c8);
        EXPECT(gbc.pc(), 0xa212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa210), 0xcb);
        EXPECT(gbc.readMem(0xa211), 0xec);
        // CB EC 0272
        gbc.setState(0xd62e, 0x2c74, 0x5ee0, 0x9fb3, 0xd9f2, 0xdaa, 0x1, 0x1);
        gbc.writeMem(0xd62e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2c74);
        EXPECT(gbc.pc(), 0xd630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd62e), 0xcb);
        EXPECT(gbc.readMem(0xd62f), 0xec);
        // CB EC 0273
        gbc.setState(0xe5d4, 0x1918, 0xfd30, 0xa1a1, 0x466b, 0x26e2, 0x0, 0x1);
        gbc.writeMem(0xe5d4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1918);
        EXPECT(gbc.pc(), 0xe5d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d4), 0xcb);
        EXPECT(gbc.readMem(0xe5d5), 0xec);
        // CB EC 0274
        gbc.setState(0x2067, 0xb44c, 0x70d0, 0x19ae, 0xccc6, 0x96a3, 0x0, 0x0);
        gbc.writeMem(0x2067, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb44c);
        EXPECT(gbc.pc(), 0x2069);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0275
        gbc.setState(0x997d, 0x2ef3, 0x75f0, 0xb80d, 0x3e56, 0xa983, 0x0, 0x1);
        gbc.writeMem(0x997d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2ef3);
        EXPECT(gbc.pc(), 0x997f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x997d), 0xcb);
        EXPECT(gbc.readMem(0x997e), 0xec);
        // CB EC 0276
        gbc.setState(0x3b3a, 0x3fb, 0xc7c0, 0xbace, 0x7e43, 0xf11c, 0x1, 0x1);
        gbc.writeMem(0x3b3a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3fb);
        EXPECT(gbc.pc(), 0x3b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0277
        gbc.setState(0xcef7, 0xfc88, 0x8fc0, 0xb72d, 0x4c0, 0xcf64, 0x1, 0x1);
        gbc.writeMem(0xcef7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfc88);
        EXPECT(gbc.pc(), 0xcef9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef7), 0xcb);
        EXPECT(gbc.readMem(0xcef8), 0xec);
        // CB EC 0279
        gbc.setState(0x24b9, 0x58de, 0x7890, 0x7a15, 0x5139, 0x89ef, 0x0, 0x0);
        gbc.writeMem(0x24b9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x58de);
        EXPECT(gbc.pc(), 0x24bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 027A
        gbc.setState(0xb4c9, 0x1b8a, 0x54e0, 0x5f10, 0xba05, 0x2797, 0x1, 0x1);
        gbc.writeMem(0xb4c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1b8a);
        EXPECT(gbc.pc(), 0xb4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4c9), 0xcb);
        EXPECT(gbc.readMem(0xb4ca), 0xec);
        // CB EC 027B
        gbc.setState(0xa438, 0x15e2, 0x98c0, 0x63e6, 0x4e9d, 0xf35f, 0x0, 0x0);
        gbc.writeMem(0xa438, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x15e2);
        EXPECT(gbc.pc(), 0xa43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa438), 0xcb);
        EXPECT(gbc.readMem(0xa439), 0xec);
        // CB EC 027C
        gbc.setState(0xacf3, 0xcb61, 0xe210, 0x7acc, 0x2a4a, 0x6ded, 0x1, 0x1);
        gbc.writeMem(0xacf3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcb61);
        EXPECT(gbc.pc(), 0xacf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacf3), 0xcb);
        EXPECT(gbc.readMem(0xacf4), 0xec);
        // CB EC 027D
        gbc.setState(0x98af, 0x4134, 0x7240, 0x9af9, 0xb635, 0x484f, 0x1, 0x0);
        gbc.writeMem(0x98af, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4134);
        EXPECT(gbc.pc(), 0x98b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98af), 0xcb);
        EXPECT(gbc.readMem(0x98b0), 0xec);
        // CB EC 027E
        gbc.setState(0xa3bc, 0x5d7c, 0xc940, 0x325a, 0xbf24, 0x4b66, 0x1, 0x0);
        gbc.writeMem(0xa3bc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5d7c);
        EXPECT(gbc.pc(), 0xa3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3bc), 0xcb);
        EXPECT(gbc.readMem(0xa3bd), 0xec);
        // CB EC 027F
        gbc.setState(0x11f, 0xe0e3, 0xff70, 0x8f76, 0xf5f8, 0xd3, 0x0, 0x0);
        gbc.writeMem(0x11f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe0e3);
        EXPECT(gbc.pc(), 0x121);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0280
        gbc.setState(0x642b, 0x8f2a, 0xf730, 0xbe6c, 0x8458, 0x6f1, 0x1, 0x1);
        gbc.writeMem(0x642b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8f2a);
        EXPECT(gbc.pc(), 0x642d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0281
        gbc.setState(0x471b, 0x1781, 0x7150, 0xf398, 0x5a82, 0x37f7, 0x0, 0x1);
        gbc.writeMem(0x471b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1781);
        EXPECT(gbc.pc(), 0x471d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0282
        gbc.setState(0xd6ae, 0xe961, 0xe270, 0x37c3, 0x3404, 0x4a47, 0x1, 0x0);
        gbc.writeMem(0xd6ae, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe961);
        EXPECT(gbc.pc(), 0xd6b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ae), 0xcb);
        EXPECT(gbc.readMem(0xd6af), 0xec);
        // CB EC 0283
        gbc.setState(0x7db5, 0x8516, 0xf0b0, 0x2948, 0x4857, 0xe14e, 0x0, 0x0);
        gbc.writeMem(0x7db5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8516);
        EXPECT(gbc.pc(), 0x7db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0284
        gbc.setState(0x187a, 0x3f98, 0x62b0, 0x69a7, 0x83e1, 0xd304, 0x1, 0x1);
        gbc.writeMem(0x187a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3f98);
        EXPECT(gbc.pc(), 0x187c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0285
        gbc.setState(0x8990, 0x5eb6, 0xfbe0, 0xfdc2, 0x4590, 0x3e34, 0x1, 0x0);
        gbc.writeMem(0x8990, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5eb6);
        EXPECT(gbc.pc(), 0x8992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8990), 0xcb);
        EXPECT(gbc.readMem(0x8991), 0xec);
        // CB EC 0286
        gbc.setState(0xfb3, 0xf5d6, 0x1490, 0xacd9, 0x9f65, 0x719b, 0x1, 0x1);
        gbc.writeMem(0xfb3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf5d6);
        EXPECT(gbc.pc(), 0xfb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0287
        gbc.setState(0x2b22, 0x9c0f, 0x9da0, 0x89c0, 0x4eee, 0x20c3, 0x0, 0x1);
        gbc.writeMem(0x2b22, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9c0f);
        EXPECT(gbc.pc(), 0x2b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0288
        gbc.setState(0x5c35, 0x6c63, 0x3630, 0x7fe1, 0x5de6, 0x2c00, 0x1, 0x0);
        gbc.writeMem(0x5c35, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6c63);
        EXPECT(gbc.pc(), 0x5c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0289
        gbc.setState(0xab01, 0x3106, 0x37f0, 0xa3d2, 0xb976, 0x848b, 0x0, 0x1);
        gbc.writeMem(0xab01, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3106);
        EXPECT(gbc.pc(), 0xab03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab01), 0xcb);
        EXPECT(gbc.readMem(0xab02), 0xec);
        // CB EC 028A
        gbc.setState(0x9649, 0xac9, 0xb090, 0xd25f, 0x3b15, 0x42b0, 0x0, 0x1);
        gbc.writeMem(0x9649, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xac9);
        EXPECT(gbc.pc(), 0x964b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9649), 0xcb);
        EXPECT(gbc.readMem(0x964a), 0xec);
        // CB EC 028B
        gbc.setState(0x4338, 0xb64, 0x90, 0x7552, 0xbc9, 0x176a, 0x1, 0x1);
        gbc.writeMem(0x4338, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb64);
        EXPECT(gbc.pc(), 0x433a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 028C
        gbc.setState(0x85b, 0x17c6, 0x90a0, 0xe6ff, 0xc580, 0x6589, 0x0, 0x0);
        gbc.writeMem(0x85b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x17c6);
        EXPECT(gbc.pc(), 0x85d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 028D
        gbc.setState(0x6986, 0x454d, 0x1bf0, 0x16b9, 0x8447, 0x9cde, 0x0, 0x1);
        gbc.writeMem(0x6986, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x454d);
        EXPECT(gbc.pc(), 0x6988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 028E
        gbc.setState(0x70a5, 0xeba2, 0x9b80, 0xec84, 0x3c6c, 0x2dd, 0x0, 0x0);
        gbc.writeMem(0x70a5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xeba2);
        EXPECT(gbc.pc(), 0x70a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 028F
        gbc.setState(0x10b0, 0xe6b4, 0x1f60, 0x66af, 0xce73, 0x8142, 0x1, 0x0);
        gbc.writeMem(0x10b0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe6b4);
        EXPECT(gbc.pc(), 0x10b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0290
        gbc.setState(0x3d55, 0x46f1, 0xe9b0, 0x5dab, 0x24bf, 0xb72f, 0x0, 0x0);
        gbc.writeMem(0x3d55, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x46f1);
        EXPECT(gbc.pc(), 0x3d57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0291
        gbc.setState(0xb477, 0x2dd3, 0x3090, 0xfa39, 0x57c0, 0xfe9f, 0x0, 0x0);
        gbc.writeMem(0xb477, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2dd3);
        EXPECT(gbc.pc(), 0xb479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb477), 0xcb);
        EXPECT(gbc.readMem(0xb478), 0xec);
        // CB EC 0292
        gbc.setState(0x292, 0x9556, 0xb390, 0xfb13, 0xd0da, 0x889a, 0x0, 0x0);
        gbc.writeMem(0x292, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9556);
        EXPECT(gbc.pc(), 0x294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0293
        gbc.setState(0x44ae, 0x7a9d, 0x43c0, 0xddb6, 0x4de5, 0x5850, 0x0, 0x0);
        gbc.writeMem(0x44ae, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7a9d);
        EXPECT(gbc.pc(), 0x44b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0294
        gbc.setState(0xbb76, 0xca03, 0x7b90, 0xadee, 0x4b3f, 0x9e78, 0x0, 0x0);
        gbc.writeMem(0xbb76, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xca03);
        EXPECT(gbc.pc(), 0xbb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb76), 0xcb);
        EXPECT(gbc.readMem(0xbb77), 0xec);
        // CB EC 0295
        gbc.setState(0xb36b, 0x933a, 0xa130, 0xcc3f, 0xf3f6, 0xe5a1, 0x1, 0x1);
        gbc.writeMem(0xb36b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x933a);
        EXPECT(gbc.pc(), 0xb36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36b), 0xcb);
        EXPECT(gbc.readMem(0xb36c), 0xec);
        // CB EC 0296
        gbc.setState(0xe6e4, 0xf2ab, 0x1040, 0x706f, 0xdbbb, 0x4bf5, 0x1, 0x1);
        gbc.writeMem(0xe6e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf2ab);
        EXPECT(gbc.pc(), 0xe6e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6e4), 0xcb);
        EXPECT(gbc.readMem(0xe6e5), 0xec);
        // CB EC 0298
        gbc.setState(0xb72c, 0xe6b4, 0x9fb0, 0x7129, 0x8ade, 0x584b, 0x0, 0x1);
        gbc.writeMem(0xb72c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe6b4);
        EXPECT(gbc.pc(), 0xb72e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb72c), 0xcb);
        EXPECT(gbc.readMem(0xb72d), 0xec);
        // CB EC 0299
        gbc.setState(0x486a, 0x6e42, 0x9630, 0xead1, 0xe64, 0x4e6a, 0x0, 0x1);
        gbc.writeMem(0x486a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6e42);
        EXPECT(gbc.pc(), 0x486c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 029A
        gbc.setState(0x135f, 0xe546, 0x2390, 0xc909, 0x1a73, 0xced4, 0x1, 0x0);
        gbc.writeMem(0x135f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe546);
        EXPECT(gbc.pc(), 0x1361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 029B
        gbc.setState(0xd9dc, 0x262, 0x5bf0, 0x98ea, 0xcb17, 0x4b01, 0x0, 0x1);
        gbc.writeMem(0xd9dc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x262);
        EXPECT(gbc.pc(), 0xd9de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9dc), 0xcb);
        EXPECT(gbc.readMem(0xd9dd), 0xec);
        // CB EC 029C
        gbc.setState(0xc2f0, 0xe1c0, 0xe210, 0x8afa, 0x6aa7, 0xe62d, 0x0, 0x1);
        gbc.writeMem(0xc2f0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe1c0);
        EXPECT(gbc.pc(), 0xc2f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2f0), 0xcb);
        EXPECT(gbc.readMem(0xc2f1), 0xec);
        // CB EC 029D
        gbc.setState(0x12ff, 0xe914, 0x7cc0, 0x949d, 0x98ca, 0xce11, 0x0, 0x1);
        gbc.writeMem(0x12ff, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe914);
        EXPECT(gbc.pc(), 0x1301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 029E
        gbc.setState(0x3973, 0xd16c, 0xcf90, 0x40cb, 0x6bb1, 0xfd0d, 0x1, 0x0);
        gbc.writeMem(0x3973, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd16c);
        EXPECT(gbc.pc(), 0x3975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 029F
        gbc.setState(0x5d29, 0x2107, 0x57c0, 0x1a0, 0x6865, 0x52e4, 0x0, 0x0);
        gbc.writeMem(0x5d29, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2107);
        EXPECT(gbc.pc(), 0x5d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02A0
        gbc.setState(0xdc14, 0x380f, 0x2820, 0xb2b8, 0xb158, 0xe87a, 0x1, 0x0);
        gbc.writeMem(0xdc14, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x380f);
        EXPECT(gbc.pc(), 0xdc16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc14), 0xcb);
        EXPECT(gbc.readMem(0xdc15), 0xec);
        // CB EC 02A1
        gbc.setState(0x6594, 0x2171, 0x9070, 0x2a28, 0x3a10, 0x3192, 0x1, 0x0);
        gbc.writeMem(0x6594, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2171);
        EXPECT(gbc.pc(), 0x6596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02A2
        gbc.setState(0x8eb5, 0x804, 0x3a10, 0xb0fd, 0xfb1b, 0xdbd8, 0x1, 0x1);
        gbc.writeMem(0x8eb5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x804);
        EXPECT(gbc.pc(), 0x8eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb5), 0xcb);
        EXPECT(gbc.readMem(0x8eb6), 0xec);
        // CB EC 02A3
        gbc.setState(0xcd8c, 0xd922, 0x780, 0xaacf, 0xf49b, 0x121, 0x1, 0x0);
        gbc.writeMem(0xcd8c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd922);
        EXPECT(gbc.pc(), 0xcd8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd8c), 0xcb);
        EXPECT(gbc.readMem(0xcd8d), 0xec);
        // CB EC 02A4
        gbc.setState(0x334d, 0xd965, 0x9300, 0x61d, 0x7906, 0xd05, 0x0, 0x1);
        gbc.writeMem(0x334d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd965);
        EXPECT(gbc.pc(), 0x334f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02A5
        gbc.setState(0xeef3, 0xdf2, 0x5000, 0x9ed4, 0x6964, 0xbfdf, 0x1, 0x1);
        gbc.writeMem(0xeef3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xdf2);
        EXPECT(gbc.pc(), 0xeef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef3), 0xcb);
        EXPECT(gbc.readMem(0xeef4), 0xec);
        // CB EC 02A6
        gbc.setState(0x7414, 0xc344, 0x2570, 0xe6d8, 0x5922, 0x547e, 0x1, 0x1);
        gbc.writeMem(0x7414, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc344);
        EXPECT(gbc.pc(), 0x7416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02A7
        gbc.setState(0x34a1, 0xd02d, 0x9430, 0x52d6, 0xe053, 0x8864, 0x0, 0x1);
        gbc.writeMem(0x34a1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd02d);
        EXPECT(gbc.pc(), 0x34a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02A8
        gbc.setState(0xbadc, 0xada7, 0x8df0, 0xba08, 0x4d17, 0xd9a2, 0x1, 0x0);
        gbc.writeMem(0xbadc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xada7);
        EXPECT(gbc.pc(), 0xbade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbadc), 0xcb);
        EXPECT(gbc.readMem(0xbadd), 0xec);
        // CB EC 02A9
        gbc.setState(0xb399, 0xb40e, 0x1ff0, 0x88b0, 0xb864, 0xafef, 0x0, 0x0);
        gbc.writeMem(0xb399, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb40e);
        EXPECT(gbc.pc(), 0xb39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb399), 0xcb);
        EXPECT(gbc.readMem(0xb39a), 0xec);
        // CB EC 02AA
        gbc.setState(0xe833, 0xdee1, 0xc400, 0x5cdb, 0xa913, 0x86ec, 0x0, 0x0);
        gbc.writeMem(0xe833, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdee1);
        EXPECT(gbc.pc(), 0xe835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe833), 0xcb);
        EXPECT(gbc.readMem(0xe834), 0xec);
        // CB EC 02AB
        gbc.setState(0x5887, 0xd3d4, 0xeb10, 0x2004, 0x7c83, 0xb6d0, 0x1, 0x0);
        gbc.writeMem(0x5887, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd3d4);
        EXPECT(gbc.pc(), 0x5889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02AC
        gbc.setState(0x91f1, 0x11ac, 0xc350, 0x8f8a, 0xe2eb, 0x91fa, 0x0, 0x1);
        gbc.writeMem(0x91f1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x11ac);
        EXPECT(gbc.pc(), 0x91f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91f1), 0xcb);
        EXPECT(gbc.readMem(0x91f2), 0xec);
        // CB EC 02AD
        gbc.setState(0xd384, 0x7553, 0x4a00, 0xe5e5, 0x305d, 0x263f, 0x1, 0x1);
        gbc.writeMem(0xd384, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7553);
        EXPECT(gbc.pc(), 0xd386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd384), 0xcb);
        EXPECT(gbc.readMem(0xd385), 0xec);
        // CB EC 02AE
        gbc.setState(0xe16e, 0xa2a8, 0xcb40, 0x4e8d, 0xda3, 0x4c5, 0x1, 0x1);
        gbc.writeMem(0xe16e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xa2a8);
        EXPECT(gbc.pc(), 0xe170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe16e), 0xcb);
        EXPECT(gbc.readMem(0xe16f), 0xec);
        // CB EC 02AF
        gbc.setState(0xa29f, 0x9929, 0x4690, 0x6217, 0x4301, 0x9a2d, 0x1, 0x1);
        gbc.writeMem(0xa29f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9929);
        EXPECT(gbc.pc(), 0xa2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29f), 0xcb);
        EXPECT(gbc.readMem(0xa2a0), 0xec);
        // CB EC 02B0
        gbc.setState(0x6a26, 0xa327, 0x1110, 0x310, 0x9d5d, 0x13c3, 0x1, 0x1);
        gbc.writeMem(0x6a26, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa327);
        EXPECT(gbc.pc(), 0x6a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02B1
        gbc.setState(0x418d, 0x6287, 0x2360, 0xea0b, 0xb73d, 0xb712, 0x1, 0x1);
        gbc.writeMem(0x418d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6287);
        EXPECT(gbc.pc(), 0x418f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02B2
        gbc.setState(0xefd3, 0x3f74, 0xb210, 0x2248, 0x93ac, 0xf511, 0x0, 0x0);
        gbc.writeMem(0xefd3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3f74);
        EXPECT(gbc.pc(), 0xefd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd3), 0xcb);
        EXPECT(gbc.readMem(0xefd4), 0xec);
        // CB EC 02B3
        gbc.setState(0x1293, 0xc3a0, 0xd7f0, 0x5db6, 0x7132, 0xb1b4, 0x1, 0x1);
        gbc.writeMem(0x1293, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc3a0);
        EXPECT(gbc.pc(), 0x1295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02B4
        gbc.setState(0x8281, 0x3e8e, 0x99d0, 0x447c, 0xaaf4, 0x8020, 0x1, 0x1);
        gbc.writeMem(0x8281, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3e8e);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8281), 0xcb);
        EXPECT(gbc.readMem(0x8282), 0xec);
        // CB EC 02B5
        gbc.setState(0x6bde, 0xfc63, 0xd00, 0xc146, 0x6575, 0x875, 0x0, 0x1);
        gbc.writeMem(0x6bde, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfc63);
        EXPECT(gbc.pc(), 0x6be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02B6
        gbc.setState(0xc89a, 0x1b7e, 0x1570, 0x874d, 0x7af7, 0x9dc1, 0x0, 0x1);
        gbc.writeMem(0xc89a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1b7e);
        EXPECT(gbc.pc(), 0xc89c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc89a), 0xcb);
        EXPECT(gbc.readMem(0xc89b), 0xec);
        // CB EC 02B7
        gbc.setState(0xb06, 0x5765, 0x6750, 0xc88d, 0xd39a, 0x22be, 0x0, 0x1);
        gbc.writeMem(0xb06, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x5765);
        EXPECT(gbc.pc(), 0xb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02B8
        gbc.setState(0x7b08, 0xd1a6, 0x3f20, 0x79b1, 0xb15a, 0xc7b8, 0x0, 0x1);
        gbc.writeMem(0x7b08, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd1a6);
        EXPECT(gbc.pc(), 0x7b0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02B9
        gbc.setState(0x334f, 0x7a1b, 0xef60, 0xe1c, 0x8b1b, 0x243b, 0x0, 0x1);
        gbc.writeMem(0x334f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7a1b);
        EXPECT(gbc.pc(), 0x3351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02BA
        gbc.setState(0x2953, 0x371e, 0xd580, 0xdda0, 0xb956, 0x2c1d, 0x0, 0x0);
        gbc.writeMem(0x2953, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x371e);
        EXPECT(gbc.pc(), 0x2955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02BB
        gbc.setState(0x1122, 0x4e22, 0x64c0, 0x366b, 0x6038, 0xdc63, 0x1, 0x1);
        gbc.writeMem(0x1122, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4e22);
        EXPECT(gbc.pc(), 0x1124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02BC
        gbc.setState(0x205c, 0x79e4, 0xc5f0, 0x7725, 0x8cca, 0xf97, 0x1, 0x1);
        gbc.writeMem(0x205c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x79e4);
        EXPECT(gbc.pc(), 0x205e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02BD
        gbc.setState(0xd260, 0xf9c9, 0x4120, 0x8c4b, 0xafe2, 0xb157, 0x1, 0x0);
        gbc.writeMem(0xd260, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf9c9);
        EXPECT(gbc.pc(), 0xd262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd260), 0xcb);
        EXPECT(gbc.readMem(0xd261), 0xec);
        // CB EC 02BE
        gbc.setState(0xcc4f, 0xfe3a, 0xb7f0, 0x1446, 0x4c0d, 0x575, 0x1, 0x0);
        gbc.writeMem(0xcc4f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfe3a);
        EXPECT(gbc.pc(), 0xcc51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4f), 0xcb);
        EXPECT(gbc.readMem(0xcc50), 0xec);
        // CB EC 02BF
        gbc.setState(0xda8c, 0x514b, 0x8730, 0xfc37, 0x5af4, 0xed9f, 0x0, 0x0);
        gbc.writeMem(0xda8c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x514b);
        EXPECT(gbc.pc(), 0xda8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8c), 0xcb);
        EXPECT(gbc.readMem(0xda8d), 0xec);
        // CB EC 02C0
        gbc.setState(0xbc5e, 0x1320, 0x4990, 0x9991, 0x6c59, 0x6968, 0x0, 0x0);
        gbc.writeMem(0xbc5e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1320);
        EXPECT(gbc.pc(), 0xbc60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5e), 0xcb);
        EXPECT(gbc.readMem(0xbc5f), 0xec);
        // CB EC 02C1
        gbc.setState(0xce6a, 0xc61e, 0x93a0, 0x8e6e, 0x202a, 0x33be, 0x0, 0x0);
        gbc.writeMem(0xce6a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc61e);
        EXPECT(gbc.pc(), 0xce6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce6a), 0xcb);
        EXPECT(gbc.readMem(0xce6b), 0xec);
        // CB EC 02C3
        gbc.setState(0x39d6, 0xed14, 0x4960, 0x32b3, 0xa507, 0x2389, 0x1, 0x0);
        gbc.writeMem(0x39d6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xed14);
        EXPECT(gbc.pc(), 0x39d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02C4
        gbc.setState(0x4c46, 0x6bd8, 0x7d30, 0xaafa, 0x5179, 0xe16c, 0x1, 0x1);
        gbc.writeMem(0x4c46, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6bd8);
        EXPECT(gbc.pc(), 0x4c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02C7
        gbc.setState(0x6a92, 0x898f, 0x73e0, 0x516f, 0xb7dc, 0x6629, 0x1, 0x0);
        gbc.writeMem(0x6a92, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x898f);
        EXPECT(gbc.pc(), 0x6a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02C8
        gbc.setState(0x45ba, 0x4fd7, 0xbe90, 0x2bac, 0xac9f, 0x28b2, 0x0, 0x1);
        gbc.writeMem(0x45ba, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4fd7);
        EXPECT(gbc.pc(), 0x45bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02C9
        gbc.setState(0x9e57, 0x6d03, 0x3fa0, 0x7718, 0x605f, 0xf9cd, 0x1, 0x0);
        gbc.writeMem(0x9e57, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6d03);
        EXPECT(gbc.pc(), 0x9e59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e57), 0xcb);
        EXPECT(gbc.readMem(0x9e58), 0xec);
        // CB EC 02CA
        gbc.setState(0x3f64, 0xcae6, 0x78a0, 0x90ea, 0xe210, 0x5137, 0x0, 0x0);
        gbc.writeMem(0x3f64, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xcae6);
        EXPECT(gbc.pc(), 0x3f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02CB
        gbc.setState(0x641e, 0xb931, 0x1320, 0x2242, 0x11f5, 0x5025, 0x1, 0x0);
        gbc.writeMem(0x641e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb931);
        EXPECT(gbc.pc(), 0x6420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02CC
        gbc.setState(0x1b82, 0x28cc, 0xa1d0, 0x6d72, 0x9e15, 0xb39, 0x1, 0x1);
        gbc.writeMem(0x1b82, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x28cc);
        EXPECT(gbc.pc(), 0x1b84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02CD
        gbc.setState(0xd905, 0x743f, 0xf160, 0xe99c, 0xd9f3, 0x361f, 0x1, 0x0);
        gbc.writeMem(0xd905, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x743f);
        EXPECT(gbc.pc(), 0xd907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd905), 0xcb);
        EXPECT(gbc.readMem(0xd906), 0xec);
        // CB EC 02CE
        gbc.setState(0x72fc, 0x6, 0xfdf0, 0xc4aa, 0x368c, 0xd8ee, 0x1, 0x0);
        gbc.writeMem(0x72fc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6);
        EXPECT(gbc.pc(), 0x72fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02CF
        gbc.setState(0xeb0d, 0xa55d, 0x6a90, 0xce4f, 0xc728, 0xd820, 0x1, 0x0);
        gbc.writeMem(0xeb0d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa55d);
        EXPECT(gbc.pc(), 0xeb0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb0d), 0xcb);
        EXPECT(gbc.readMem(0xeb0e), 0xec);
        // CB EC 02D0
        gbc.setState(0x2aa7, 0xaeb3, 0x2ea0, 0x5dc, 0xb9ad, 0xe693, 0x0, 0x1);
        gbc.writeMem(0x2aa7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xaeb3);
        EXPECT(gbc.pc(), 0x2aa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02D1
        gbc.setState(0x48dc, 0x563b, 0x7f10, 0x8364, 0xccf7, 0xde84, 0x1, 0x1);
        gbc.writeMem(0x48dc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x563b);
        EXPECT(gbc.pc(), 0x48de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02D2
        gbc.setState(0xaa9e, 0x4f4c, 0x1a00, 0xff86, 0x8a4, 0x505f, 0x1, 0x0);
        gbc.writeMem(0xaa9e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4f4c);
        EXPECT(gbc.pc(), 0xaaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa9e), 0xcb);
        EXPECT(gbc.readMem(0xaa9f), 0xec);
        // CB EC 02D3
        gbc.setState(0x4f6f, 0x3466, 0x140, 0xa18c, 0x4c, 0x47a1, 0x0, 0x0);
        gbc.writeMem(0x4f6f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3466);
        EXPECT(gbc.pc(), 0x4f71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02D4
        gbc.setState(0x2ddc, 0xb06, 0x3f70, 0x1ae0, 0x55ba, 0x13f3, 0x0, 0x0);
        gbc.writeMem(0x2ddc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb06);
        EXPECT(gbc.pc(), 0x2dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02D5
        gbc.setState(0x6d12, 0x6e8d, 0x8470, 0x7719, 0xa0e9, 0x96a4, 0x1, 0x1);
        gbc.writeMem(0x6d12, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6e8d);
        EXPECT(gbc.pc(), 0x6d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02D6
        gbc.setState(0xb6bb, 0x4900, 0x4d30, 0x855c, 0x8ee2, 0x5036, 0x1, 0x0);
        gbc.writeMem(0xb6bb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4900);
        EXPECT(gbc.pc(), 0xb6bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6bb), 0xcb);
        EXPECT(gbc.readMem(0xb6bc), 0xec);
        // CB EC 02D7
        gbc.setState(0x7fdf, 0x6a4f, 0x4260, 0x6b7e, 0x6c2e, 0x634a, 0x1, 0x0);
        gbc.writeMem(0x7fdf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6a4f);
        EXPECT(gbc.pc(), 0x7fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02D8
        gbc.setState(0x40a, 0x51ba, 0x3f90, 0xd65c, 0x8445, 0x6680, 0x0, 0x1);
        gbc.writeMem(0x40a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x51ba);
        EXPECT(gbc.pc(), 0x40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02D9
        gbc.setState(0x9d23, 0xd260, 0xd6a0, 0xfd2f, 0xa79, 0xbe76, 0x1, 0x0);
        gbc.writeMem(0x9d23, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd260);
        EXPECT(gbc.pc(), 0x9d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d23), 0xcb);
        EXPECT(gbc.readMem(0x9d24), 0xec);
        // CB EC 02DA
        gbc.setState(0x2c8f, 0xba9b, 0x870, 0xa689, 0x778c, 0xb6b6, 0x1, 0x1);
        gbc.writeMem(0x2c8f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xba9b);
        EXPECT(gbc.pc(), 0x2c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02DB
        gbc.setState(0x55fe, 0xa421, 0x7130, 0xe202, 0xd98f, 0xd05a, 0x0, 0x1);
        gbc.writeMem(0x55fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa421);
        EXPECT(gbc.pc(), 0x5600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02DC
        gbc.setState(0x7ec0, 0x207e, 0x7520, 0x6f57, 0x8142, 0x67ea, 0x1, 0x0);
        gbc.writeMem(0x7ec0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x207e);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02DD
        gbc.setState(0x2ea3, 0xa947, 0x7c10, 0xb0f8, 0x6d3e, 0x27db, 0x1, 0x0);
        gbc.writeMem(0x2ea3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa947);
        EXPECT(gbc.pc(), 0x2ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02DE
        gbc.setState(0x6e2, 0x2266, 0x3100, 0x8426, 0x66ac, 0x3303, 0x0, 0x1);
        gbc.writeMem(0x6e2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2266);
        EXPECT(gbc.pc(), 0x6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02E0
        gbc.setState(0x4578, 0x6631, 0xcba0, 0xf74, 0x1cb1, 0x8384, 0x1, 0x0);
        gbc.writeMem(0x4578, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6631);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02E1
        gbc.setState(0xdcd7, 0x7493, 0x4ef0, 0xf1b0, 0xb49d, 0x78ef, 0x0, 0x1);
        gbc.writeMem(0xdcd7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7493);
        EXPECT(gbc.pc(), 0xdcd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcd7), 0xcb);
        EXPECT(gbc.readMem(0xdcd8), 0xec);
        // CB EC 02E2
        gbc.setState(0xc34b, 0x8a26, 0x9bc0, 0x89e9, 0x99de, 0xc6be, 0x0, 0x1);
        gbc.writeMem(0xc34b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8a26);
        EXPECT(gbc.pc(), 0xc34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34b), 0xcb);
        EXPECT(gbc.readMem(0xc34c), 0xec);
        // CB EC 02E3
        gbc.setState(0x8e5e, 0xa9f0, 0x7040, 0xed33, 0x2ac4, 0x1781, 0x0, 0x0);
        gbc.writeMem(0x8e5e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa9f0);
        EXPECT(gbc.pc(), 0x8e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5e), 0xcb);
        EXPECT(gbc.readMem(0x8e5f), 0xec);
        // CB EC 02E4
        gbc.setState(0x7ad0, 0x9e82, 0xa3f0, 0x72ee, 0x81fa, 0x17e, 0x0, 0x0);
        gbc.writeMem(0x7ad0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9e82);
        EXPECT(gbc.pc(), 0x7ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02E5
        gbc.setState(0x24fe, 0xef0c, 0xa0c0, 0x1e22, 0xea8c, 0x7856, 0x1, 0x0);
        gbc.writeMem(0x24fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xef0c);
        EXPECT(gbc.pc(), 0x2500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02E6
        gbc.setState(0xd45f, 0x7a3a, 0x3f10, 0xdeef, 0x3815, 0xa870, 0x1, 0x0);
        gbc.writeMem(0xd45f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7a3a);
        EXPECT(gbc.pc(), 0xd461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd45f), 0xcb);
        EXPECT(gbc.readMem(0xd460), 0xec);
        // CB EC 02E7
        gbc.setState(0x2d5f, 0x672a, 0xbf50, 0x328b, 0xb475, 0x8ef6, 0x0, 0x1);
        gbc.writeMem(0x2d5f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x672a);
        EXPECT(gbc.pc(), 0x2d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 02E8
        gbc.setState(0x86f2, 0x24c7, 0x8750, 0x68a8, 0x8d11, 0x1f87, 0x1, 0x1);
        gbc.writeMem(0x86f2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x24c7);
        EXPECT(gbc.pc(), 0x86f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f2), 0xcb);
        EXPECT(gbc.readMem(0x86f3), 0xec);
        // CB EC 02E9
        gbc.setState(0x8824, 0xc860, 0xbb40, 0x7525, 0x437, 0xac22, 0x1, 0x0);
        gbc.writeMem(0x8824, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc860);
        EXPECT(gbc.pc(), 0x8826);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8824), 0xcb);
        EXPECT(gbc.readMem(0x8825), 0xec);
        // CB EC 02EA
        gbc.setState(0x5ddb, 0x1baa, 0x4fc0, 0x9a14, 0x6d37, 0x930c, 0x0, 0x0);
        gbc.writeMem(0x5ddb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1baa);
        EXPECT(gbc.pc(), 0x5ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02EC
        gbc.setState(0xe6a9, 0xa86a, 0xc080, 0x19bb, 0xde41, 0xa534, 0x1, 0x0);
        gbc.writeMem(0xe6a9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa86a);
        EXPECT(gbc.pc(), 0xe6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a9), 0xcb);
        EXPECT(gbc.readMem(0xe6aa), 0xec);
        // CB EC 02ED
        gbc.setState(0xbde5, 0x796a, 0xc790, 0x1c48, 0xa3a7, 0xb7a8, 0x0, 0x0);
        gbc.writeMem(0xbde5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x796a);
        EXPECT(gbc.pc(), 0xbde7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde5), 0xcb);
        EXPECT(gbc.readMem(0xbde6), 0xec);
        // CB EC 02EE
        gbc.setState(0x94d4, 0x87d6, 0x5c00, 0x72a3, 0x42f3, 0xdc3d, 0x1, 0x1);
        gbc.writeMem(0x94d4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x87d6);
        EXPECT(gbc.pc(), 0x94d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d4), 0xcb);
        EXPECT(gbc.readMem(0x94d5), 0xec);
        // CB EC 02F0
        gbc.setState(0x5764, 0x4b07, 0xad80, 0xa5b5, 0xbf1e, 0x4bc1, 0x1, 0x1);
        gbc.writeMem(0x5764, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4b07);
        EXPECT(gbc.pc(), 0x5766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02F1
        gbc.setState(0xc269, 0xc0c3, 0xf490, 0x41e, 0xe854, 0x1b9, 0x0, 0x1);
        gbc.writeMem(0xc269, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc0c3);
        EXPECT(gbc.pc(), 0xc26b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc269), 0xcb);
        EXPECT(gbc.readMem(0xc26a), 0xec);
        // CB EC 02F2
        gbc.setState(0xabfa, 0xf7e1, 0x5030, 0x35cd, 0x4d9, 0xe3ca, 0x0, 0x0);
        gbc.writeMem(0xabfa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf7e1);
        EXPECT(gbc.pc(), 0xabfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabfa), 0xcb);
        EXPECT(gbc.readMem(0xabfb), 0xec);
        // CB EC 02F3
        gbc.setState(0xd1ae, 0x60f0, 0x50a0, 0x19f, 0x3d01, 0x87a0, 0x1, 0x0);
        gbc.writeMem(0xd1ae, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x60f0);
        EXPECT(gbc.pc(), 0xd1b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ae), 0xcb);
        EXPECT(gbc.readMem(0xd1af), 0xec);
        // CB EC 02F4
        gbc.setState(0xafb3, 0x85f4, 0x8e10, 0x62f4, 0x619f, 0xc3a6, 0x0, 0x0);
        gbc.writeMem(0xafb3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x85f4);
        EXPECT(gbc.pc(), 0xafb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb3), 0xcb);
        EXPECT(gbc.readMem(0xafb4), 0xec);
        // CB EC 02F5
        gbc.setState(0x9fce, 0xa25, 0x7380, 0x59e4, 0xc4f1, 0xcb13, 0x1, 0x1);
        gbc.writeMem(0x9fce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa25);
        EXPECT(gbc.pc(), 0x9fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fce), 0xcb);
        EXPECT(gbc.readMem(0x9fcf), 0xec);
        // CB EC 02F7
        gbc.setState(0x43f6, 0x6724, 0x7620, 0x4815, 0xd798, 0x210e, 0x0, 0x1);
        gbc.writeMem(0x43f6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6724);
        EXPECT(gbc.pc(), 0x43f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02F8
        gbc.setState(0x2a68, 0x2788, 0x4f80, 0xf051, 0x72b7, 0x3811, 0x1, 0x0);
        gbc.writeMem(0x2a68, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2788);
        EXPECT(gbc.pc(), 0x2a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02F9
        gbc.setState(0xd139, 0x87c2, 0x2940, 0xa35b, 0x800e, 0x3c0b, 0x1, 0x1);
        gbc.writeMem(0xd139, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x87c2);
        EXPECT(gbc.pc(), 0xd13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd139), 0xcb);
        EXPECT(gbc.readMem(0xd13a), 0xec);
        // CB EC 02FA
        gbc.setState(0x5ec7, 0xa53e, 0x7dc0, 0xcb1d, 0x6db0, 0xb039, 0x1, 0x0);
        gbc.writeMem(0x5ec7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa53e);
        EXPECT(gbc.pc(), 0x5ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 02FB
        gbc.setState(0xc3f5, 0x3fc3, 0x9920, 0x7da, 0xfc68, 0x1b56, 0x0, 0x0);
        gbc.writeMem(0xc3f5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3fc3);
        EXPECT(gbc.pc(), 0xc3f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f5), 0xcb);
        EXPECT(gbc.readMem(0xc3f6), 0xec);
        // CB EC 02FC
        gbc.setState(0xcd0e, 0x38a2, 0xefa0, 0x4571, 0x150c, 0x6c3f, 0x1, 0x1);
        gbc.writeMem(0xcd0e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x38a2);
        EXPECT(gbc.pc(), 0xcd10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0e), 0xcb);
        EXPECT(gbc.readMem(0xcd0f), 0xec);
        // CB EC 02FD
        gbc.setState(0xd506, 0x134f, 0x19d0, 0xbf2d, 0x8355, 0x5d4e, 0x0, 0x0);
        gbc.writeMem(0xd506, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x134f);
        EXPECT(gbc.pc(), 0xd508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd506), 0xcb);
        EXPECT(gbc.readMem(0xd507), 0xec);
        // CB EC 02FF
        gbc.setState(0x628f, 0x9328, 0x51f0, 0xc6b7, 0xad61, 0x4ddd, 0x0, 0x0);
        gbc.writeMem(0x628f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9328);
        EXPECT(gbc.pc(), 0x6291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0300
        gbc.setState(0x1c69, 0x9e9c, 0xfef0, 0xd426, 0x9074, 0xebf4, 0x0, 0x1);
        gbc.writeMem(0x1c69, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9e9c);
        EXPECT(gbc.pc(), 0x1c6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0301
        gbc.setState(0x9128, 0x42f4, 0x9e70, 0xedde, 0xf0c3, 0x388a, 0x1, 0x1);
        gbc.writeMem(0x9128, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x42f4);
        EXPECT(gbc.pc(), 0x912a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9128), 0xcb);
        EXPECT(gbc.readMem(0x9129), 0xec);
        // CB EC 0302
        gbc.setState(0xdbf0, 0x3dd3, 0xc2e0, 0x7a3c, 0xc467, 0xcd64, 0x0, 0x0);
        gbc.writeMem(0xdbf0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3dd3);
        EXPECT(gbc.pc(), 0xdbf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf0), 0xcb);
        EXPECT(gbc.readMem(0xdbf1), 0xec);
        // CB EC 0303
        gbc.setState(0x57b2, 0x513d, 0x8c50, 0x650, 0x3255, 0xf2e4, 0x0, 0x1);
        gbc.writeMem(0x57b2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x513d);
        EXPECT(gbc.pc(), 0x57b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0305
        gbc.setState(0x8dec, 0x68f1, 0x4a50, 0x26ab, 0xcf44, 0xe41c, 0x1, 0x0);
        gbc.writeMem(0x8dec, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x68f1);
        EXPECT(gbc.pc(), 0x8dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dec), 0xcb);
        EXPECT(gbc.readMem(0x8ded), 0xec);
        // CB EC 0306
        gbc.setState(0x8087, 0xbf7e, 0x1ae0, 0xfb1a, 0x1743, 0x785f, 0x1, 0x0);
        gbc.writeMem(0x8087, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbf7e);
        EXPECT(gbc.pc(), 0x8089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8087), 0xcb);
        EXPECT(gbc.readMem(0x8088), 0xec);
        // CB EC 0307
        gbc.setState(0x8f64, 0x579e, 0xa760, 0xe4d0, 0x3b53, 0xef6b, 0x0, 0x0);
        gbc.writeMem(0x8f64, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x579e);
        EXPECT(gbc.pc(), 0x8f66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f64), 0xcb);
        EXPECT(gbc.readMem(0x8f65), 0xec);
        // CB EC 0308
        gbc.setState(0x215e, 0xd1dc, 0x4d50, 0x323, 0x6118, 0x9d61, 0x1, 0x1);
        gbc.writeMem(0x215e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd1dc);
        EXPECT(gbc.pc(), 0x2160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0309
        gbc.setState(0x1ede, 0x1ce2, 0xe170, 0x85e8, 0x2545, 0x9bdc, 0x1, 0x1);
        gbc.writeMem(0x1ede, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1ce2);
        EXPECT(gbc.pc(), 0x1ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 030A
        gbc.setState(0x33ee, 0x3850, 0x43b0, 0x8165, 0x57fa, 0x55b, 0x1, 0x1);
        gbc.writeMem(0x33ee, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3850);
        EXPECT(gbc.pc(), 0x33f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 030B
        gbc.setState(0xbd70, 0x5445, 0x3320, 0xb372, 0x5b2b, 0x19b0, 0x1, 0x0);
        gbc.writeMem(0xbd70, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5445);
        EXPECT(gbc.pc(), 0xbd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd70), 0xcb);
        EXPECT(gbc.readMem(0xbd71), 0xec);
        // CB EC 030C
        gbc.setState(0x9d3, 0xf08f, 0x8fc0, 0xec76, 0xc95a, 0x5d44, 0x1, 0x1);
        gbc.writeMem(0x9d3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf08f);
        EXPECT(gbc.pc(), 0x9d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 030D
        gbc.setState(0x35a3, 0xf02d, 0x9d50, 0xa04d, 0xef60, 0xd066, 0x1, 0x0);
        gbc.writeMem(0x35a3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf02d);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 030E
        gbc.setState(0x7997, 0xbe9c, 0x93c0, 0xc6d7, 0x9502, 0x3b56, 0x0, 0x1);
        gbc.writeMem(0x7997, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbe9c);
        EXPECT(gbc.pc(), 0x7999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 030F
        gbc.setState(0x5496, 0xa60a, 0xcca0, 0x670b, 0x94f1, 0xb122, 0x1, 0x1);
        gbc.writeMem(0x5496, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa60a);
        EXPECT(gbc.pc(), 0x5498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0310
        gbc.setState(0xacf6, 0x99a1, 0xd8e0, 0x8d07, 0x206c, 0x9913, 0x0, 0x0);
        gbc.writeMem(0xacf6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x99a1);
        EXPECT(gbc.pc(), 0xacf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf6), 0xcb);
        EXPECT(gbc.readMem(0xacf7), 0xec);
        // CB EC 0311
        gbc.setState(0x639d, 0xe22d, 0xfee0, 0x2af1, 0x3a61, 0xa8ce, 0x1, 0x0);
        gbc.writeMem(0x639d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe22d);
        EXPECT(gbc.pc(), 0x639f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0312
        gbc.setState(0xef6f, 0x38a6, 0x5630, 0xa7e5, 0x9692, 0xf2a6, 0x0, 0x1);
        gbc.writeMem(0xef6f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x38a6);
        EXPECT(gbc.pc(), 0xef71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef6f), 0xcb);
        EXPECT(gbc.readMem(0xef70), 0xec);
        // CB EC 0313
        gbc.setState(0xbea, 0xc19e, 0xac20, 0xb54c, 0x468f, 0x45b, 0x1, 0x0);
        gbc.writeMem(0xbea, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc19e);
        EXPECT(gbc.pc(), 0xbec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0314
        gbc.setState(0xac2d, 0xfbb1, 0x1120, 0xd9bc, 0x5dde, 0x573, 0x0, 0x1);
        gbc.writeMem(0xac2d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xfbb1);
        EXPECT(gbc.pc(), 0xac2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2d), 0xcb);
        EXPECT(gbc.readMem(0xac2e), 0xec);
        // CB EC 0318
        gbc.setState(0xb091, 0xf6d7, 0x6210, 0x71d8, 0x8cb3, 0xa5f5, 0x0, 0x0);
        gbc.writeMem(0xb091, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf6d7);
        EXPECT(gbc.pc(), 0xb093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb091), 0xcb);
        EXPECT(gbc.readMem(0xb092), 0xec);
        // CB EC 0319
        gbc.setState(0x4ac3, 0x26e6, 0x83b0, 0xecd, 0xe07e, 0x1aeb, 0x0, 0x0);
        gbc.writeMem(0x4ac3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x26e6);
        EXPECT(gbc.pc(), 0x4ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 031B
        gbc.setState(0x5e1b, 0xb2b1, 0xf390, 0xe156, 0x2a90, 0xaac2, 0x1, 0x1);
        gbc.writeMem(0x5e1b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb2b1);
        EXPECT(gbc.pc(), 0x5e1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 031C
        gbc.setState(0xd04d, 0x353c, 0x88b0, 0xbd57, 0xe7a0, 0xdd89, 0x1, 0x0);
        gbc.writeMem(0xd04d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x353c);
        EXPECT(gbc.pc(), 0xd04f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04d), 0xcb);
        EXPECT(gbc.readMem(0xd04e), 0xec);
        // CB EC 031D
        gbc.setState(0x50bd, 0xb480, 0x88a0, 0x23a5, 0x7696, 0x9d10, 0x0, 0x0);
        gbc.writeMem(0x50bd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb480);
        EXPECT(gbc.pc(), 0x50bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 031E
        gbc.setState(0x38ef, 0x3f5a, 0x8e40, 0x4b3c, 0xc392, 0xee07, 0x0, 0x1);
        gbc.writeMem(0x38ef, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3f5a);
        EXPECT(gbc.pc(), 0x38f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 031F
        gbc.setState(0x7509, 0xfe05, 0x1090, 0xb9d8, 0xa88, 0x5321, 0x1, 0x1);
        gbc.writeMem(0x7509, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfe05);
        EXPECT(gbc.pc(), 0x750b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0320
        gbc.setState(0x56fb, 0xfb21, 0x8870, 0x32db, 0x7770, 0x822d, 0x1, 0x0);
        gbc.writeMem(0x56fb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfb21);
        EXPECT(gbc.pc(), 0x56fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0321
        gbc.setState(0x66e3, 0xbe34, 0xac50, 0x69b5, 0x2606, 0xd857, 0x1, 0x0);
        gbc.writeMem(0x66e3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xbe34);
        EXPECT(gbc.pc(), 0x66e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0322
        gbc.setState(0x8ac8, 0x3133, 0x57e0, 0x1ae7, 0xc20, 0x1c17, 0x0, 0x1);
        gbc.writeMem(0x8ac8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3133);
        EXPECT(gbc.pc(), 0x8aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac8), 0xcb);
        EXPECT(gbc.readMem(0x8ac9), 0xec);
        // CB EC 0323
        gbc.setState(0xec7e, 0xcbd6, 0x1220, 0x50a7, 0x6a4b, 0x92b9, 0x1, 0x0);
        gbc.writeMem(0xec7e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcbd6);
        EXPECT(gbc.pc(), 0xec80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7e), 0xcb);
        EXPECT(gbc.readMem(0xec7f), 0xec);
        // CB EC 0324
        gbc.setState(0x4053, 0xb6f2, 0x7910, 0x57b0, 0x8d2f, 0x8628, 0x1, 0x0);
        gbc.writeMem(0x4053, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb6f2);
        EXPECT(gbc.pc(), 0x4055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0325
        gbc.setState(0x5079, 0xd05c, 0xfa60, 0xfc4b, 0xab2, 0x5360, 0x1, 0x1);
        gbc.writeMem(0x5079, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd05c);
        EXPECT(gbc.pc(), 0x507b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0326
        gbc.setState(0x23c4, 0xecb9, 0x4320, 0xc3e8, 0x5cca, 0x2f47, 0x0, 0x1);
        gbc.writeMem(0x23c4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xecb9);
        EXPECT(gbc.pc(), 0x23c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0327
        gbc.setState(0x1ecc, 0x66d4, 0x15d0, 0x6ea6, 0x92a0, 0x1871, 0x0, 0x0);
        gbc.writeMem(0x1ecc, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x66d4);
        EXPECT(gbc.pc(), 0x1ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0328
        gbc.setState(0xde1d, 0xe480, 0x2460, 0x8ce3, 0xe865, 0xbf1, 0x1, 0x0);
        gbc.writeMem(0xde1d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe480);
        EXPECT(gbc.pc(), 0xde1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1d), 0xcb);
        EXPECT(gbc.readMem(0xde1e), 0xec);
        // CB EC 0329
        gbc.setState(0xca00, 0x20fb, 0x1600, 0x3366, 0xa023, 0xb705, 0x0, 0x0);
        gbc.writeMem(0xca00, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x20fb);
        EXPECT(gbc.pc(), 0xca02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca00), 0xcb);
        EXPECT(gbc.readMem(0xca01), 0xec);
        // CB EC 032A
        gbc.setState(0x71d6, 0x5b15, 0xbc90, 0xc7d3, 0x93ef, 0x93f4, 0x0, 0x0);
        gbc.writeMem(0x71d6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5b15);
        EXPECT(gbc.pc(), 0x71d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 032B
        gbc.setState(0x8fb4, 0xf5d3, 0x7480, 0x2b6e, 0xf684, 0x5f76, 0x1, 0x0);
        gbc.writeMem(0x8fb4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf5d3);
        EXPECT(gbc.pc(), 0x8fb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb4), 0xcb);
        EXPECT(gbc.readMem(0x8fb5), 0xec);
        // CB EC 032C
        gbc.setState(0x55d1, 0x4240, 0x6360, 0x95f3, 0x7f09, 0xc1d7, 0x1, 0x0);
        gbc.writeMem(0x55d1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4240);
        EXPECT(gbc.pc(), 0x55d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 032D
        gbc.setState(0x80c9, 0x695b, 0xd50, 0xdb64, 0x9b35, 0xf19, 0x1, 0x0);
        gbc.writeMem(0x80c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x695b);
        EXPECT(gbc.pc(), 0x80cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c9), 0xcb);
        EXPECT(gbc.readMem(0x80ca), 0xec);
        // CB EC 032E
        gbc.setState(0x6996, 0x4874, 0x5c20, 0x2057, 0xb8d4, 0xa3ea, 0x1, 0x0);
        gbc.writeMem(0x6996, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4874);
        EXPECT(gbc.pc(), 0x6998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 032F
        gbc.setState(0x6606, 0x28c1, 0xaca0, 0x2737, 0x6e75, 0x60d, 0x0, 0x0);
        gbc.writeMem(0x6606, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x28c1);
        EXPECT(gbc.pc(), 0x6608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0330
        gbc.setState(0xef13, 0x792a, 0xb8e0, 0x8b2b, 0xf0f7, 0xf84b, 0x1, 0x1);
        gbc.writeMem(0xef13, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x792a);
        EXPECT(gbc.pc(), 0xef15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef13), 0xcb);
        EXPECT(gbc.readMem(0xef14), 0xec);
        // CB EC 0331
        gbc.setState(0xc1cf, 0x17c8, 0x4c10, 0x8192, 0x9e5e, 0xb5a2, 0x1, 0x0);
        gbc.writeMem(0xc1cf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x17c8);
        EXPECT(gbc.pc(), 0xc1d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1cf), 0xcb);
        EXPECT(gbc.readMem(0xc1d0), 0xec);
        // CB EC 0332
        gbc.setState(0xebd6, 0xaf0b, 0x6540, 0x6d2a, 0xa127, 0xd0b6, 0x1, 0x0);
        gbc.writeMem(0xebd6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xaf0b);
        EXPECT(gbc.pc(), 0xebd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd6), 0xcb);
        EXPECT(gbc.readMem(0xebd7), 0xec);
        // CB EC 0333
        gbc.setState(0xe844, 0x32e5, 0x3bf0, 0x2205, 0xa50b, 0xb992, 0x0, 0x0);
        gbc.writeMem(0xe844, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x32e5);
        EXPECT(gbc.pc(), 0xe846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe844), 0xcb);
        EXPECT(gbc.readMem(0xe845), 0xec);
        // CB EC 0334
        gbc.setState(0x1532, 0xc27e, 0x4e00, 0xacd, 0xdf64, 0x15bc, 0x0, 0x0);
        gbc.writeMem(0x1532, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc27e);
        EXPECT(gbc.pc(), 0x1534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0335
        gbc.setState(0xa871, 0xd303, 0xd2e0, 0x275c, 0x6982, 0xdd1, 0x1, 0x1);
        gbc.writeMem(0xa871, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd303);
        EXPECT(gbc.pc(), 0xa873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa871), 0xcb);
        EXPECT(gbc.readMem(0xa872), 0xec);
        // CB EC 0336
        gbc.setState(0x266e, 0x4e93, 0x8bb0, 0xc496, 0xa0aa, 0x7c85, 0x1, 0x1);
        gbc.writeMem(0x266e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4e93);
        EXPECT(gbc.pc(), 0x2670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0337
        gbc.setState(0x2eab, 0x8a6b, 0xf030, 0x578d, 0x4284, 0x3075, 0x1, 0x0);
        gbc.writeMem(0x2eab, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8a6b);
        EXPECT(gbc.pc(), 0x2ead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0338
        gbc.setState(0x64e3, 0x7cac, 0xf030, 0xebf3, 0xb89f, 0xe722, 0x1, 0x0);
        gbc.writeMem(0x64e3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7cac);
        EXPECT(gbc.pc(), 0x64e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0339
        gbc.setState(0x8b96, 0x9459, 0xd6f0, 0x9d10, 0xabd9, 0xcc2d, 0x0, 0x0);
        gbc.writeMem(0x8b96, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9459);
        EXPECT(gbc.pc(), 0x8b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b96), 0xcb);
        EXPECT(gbc.readMem(0x8b97), 0xec);
        // CB EC 033A
        gbc.setState(0xcf31, 0xde33, 0xdb60, 0x9b6e, 0xc15, 0xac7a, 0x1, 0x0);
        gbc.writeMem(0xcf31, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xde33);
        EXPECT(gbc.pc(), 0xcf33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf31), 0xcb);
        EXPECT(gbc.readMem(0xcf32), 0xec);
        // CB EC 033B
        gbc.setState(0x8668, 0x58e3, 0xb80, 0xb415, 0xfaa9, 0xcd17, 0x1, 0x0);
        gbc.writeMem(0x8668, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x58e3);
        EXPECT(gbc.pc(), 0x866a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8668), 0xcb);
        EXPECT(gbc.readMem(0x8669), 0xec);
        // CB EC 033C
        gbc.setState(0x924f, 0x3575, 0xd920, 0x7c50, 0x3e4b, 0x3756, 0x1, 0x1);
        gbc.writeMem(0x924f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3575);
        EXPECT(gbc.pc(), 0x9251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x924f), 0xcb);
        EXPECT(gbc.readMem(0x9250), 0xec);
        // CB EC 033D
        gbc.setState(0x4024, 0x55b7, 0x9600, 0xd9fa, 0x45f0, 0xab47, 0x1, 0x1);
        gbc.writeMem(0x4024, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x55b7);
        EXPECT(gbc.pc(), 0x4026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 033F
        gbc.setState(0xb999, 0xa5e1, 0x6800, 0xaf54, 0x1eec, 0x690a, 0x1, 0x0);
        gbc.writeMem(0xb999, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa5e1);
        EXPECT(gbc.pc(), 0xb99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb999), 0xcb);
        EXPECT(gbc.readMem(0xb99a), 0xec);
        // CB EC 0340
        gbc.setState(0x4b1c, 0x1d80, 0x8b70, 0xdaae, 0x682a, 0x8ebc, 0x0, 0x1);
        gbc.writeMem(0x4b1c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1d80);
        EXPECT(gbc.pc(), 0x4b1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0341
        gbc.setState(0x4100, 0xb404, 0x1750, 0x32e5, 0x8d21, 0x9a03, 0x0, 0x1);
        gbc.writeMem(0x4100, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb404);
        EXPECT(gbc.pc(), 0x4102);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0342
        gbc.setState(0x430f, 0xb3a7, 0x2500, 0xb046, 0x16a0, 0xcd8c, 0x0, 0x0);
        gbc.writeMem(0x430f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb3a7);
        EXPECT(gbc.pc(), 0x4311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0343
        gbc.setState(0x2592, 0xa455, 0x9e0, 0x858c, 0x32c8, 0xf789, 0x0, 0x1);
        gbc.writeMem(0x2592, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa455);
        EXPECT(gbc.pc(), 0x2594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0344
        gbc.setState(0x8c8d, 0xf629, 0xbd60, 0x3c1c, 0x9a86, 0x4cea, 0x1, 0x0);
        gbc.writeMem(0x8c8d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf629);
        EXPECT(gbc.pc(), 0x8c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c8d), 0xcb);
        EXPECT(gbc.readMem(0x8c8e), 0xec);
        // CB EC 0345
        gbc.setState(0x1c3a, 0x8e82, 0xc400, 0x928b, 0xefbd, 0x9d16, 0x0, 0x0);
        gbc.writeMem(0x1c3a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8e82);
        EXPECT(gbc.pc(), 0x1c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0346
        gbc.setState(0x74c0, 0x3328, 0xb240, 0xe1d8, 0x117f, 0xa0be, 0x1, 0x0);
        gbc.writeMem(0x74c0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3328);
        EXPECT(gbc.pc(), 0x74c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0347
        gbc.setState(0x64ff, 0xae86, 0xf190, 0x80ab, 0x5439, 0xfc14, 0x1, 0x0);
        gbc.writeMem(0x64ff, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xae86);
        EXPECT(gbc.pc(), 0x6501);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0348
        gbc.setState(0xc705, 0x55ec, 0x5da0, 0x379e, 0x5f7a, 0x2b29, 0x1, 0x1);
        gbc.writeMem(0xc705, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x55ec);
        EXPECT(gbc.pc(), 0xc707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc705), 0xcb);
        EXPECT(gbc.readMem(0xc706), 0xec);
        // CB EC 0349
        gbc.setState(0x39a1, 0x45e0, 0xb130, 0xa095, 0x136c, 0xf76d, 0x1, 0x1);
        gbc.writeMem(0x39a1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x45e0);
        EXPECT(gbc.pc(), 0x39a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 034A
        gbc.setState(0xc017, 0xa526, 0xee50, 0x758b, 0x7ad4, 0x54f5, 0x1, 0x0);
        gbc.writeMem(0xc017, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa526);
        EXPECT(gbc.pc(), 0xc019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc017), 0xcb);
        EXPECT(gbc.readMem(0xc018), 0xec);
        // CB EC 034B
        gbc.setState(0x9d8b, 0xce7e, 0xf910, 0x4add, 0x5676, 0xd96a, 0x1, 0x1);
        gbc.writeMem(0x9d8b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xce7e);
        EXPECT(gbc.pc(), 0x9d8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8b), 0xcb);
        EXPECT(gbc.readMem(0x9d8c), 0xec);
        // CB EC 034C
        gbc.setState(0xdeda, 0x9f79, 0xf6e0, 0x235d, 0xa61c, 0x1ee9, 0x1, 0x1);
        gbc.writeMem(0xdeda, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9f79);
        EXPECT(gbc.pc(), 0xdedc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeda), 0xcb);
        EXPECT(gbc.readMem(0xdedb), 0xec);
        // CB EC 034D
        gbc.setState(0xb25b, 0x30b7, 0x80b0, 0x5974, 0x6361, 0x8ef2, 0x1, 0x1);
        gbc.writeMem(0xb25b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x30b7);
        EXPECT(gbc.pc(), 0xb25d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25b), 0xcb);
        EXPECT(gbc.readMem(0xb25c), 0xec);
        // CB EC 034E
        gbc.setState(0x137b, 0x43ae, 0x490, 0xd3e, 0x9d9a, 0xfb14, 0x0, 0x1);
        gbc.writeMem(0x137b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x43ae);
        EXPECT(gbc.pc(), 0x137d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 034F
        gbc.setState(0x334e, 0x66ab, 0x4c80, 0xfc65, 0x57b8, 0x5f1, 0x1, 0x1);
        gbc.writeMem(0x334e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x66ab);
        EXPECT(gbc.pc(), 0x3350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0350
        gbc.setState(0x3dff, 0xebf, 0x6660, 0xd4e9, 0x1142, 0x3199, 0x1, 0x1);
        gbc.writeMem(0x3dff, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xebf);
        EXPECT(gbc.pc(), 0x3e01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0351
        gbc.setState(0xf4e, 0x3ef6, 0x1070, 0xd801, 0xf7b7, 0xeb1c, 0x1, 0x0);
        gbc.writeMem(0xf4e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3ef6);
        EXPECT(gbc.pc(), 0xf50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0352
        gbc.setState(0x5292, 0xdb06, 0xc650, 0x658d, 0xac95, 0x8c1c, 0x0, 0x0);
        gbc.writeMem(0x5292, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdb06);
        EXPECT(gbc.pc(), 0x5294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0353
        gbc.setState(0x5f7f, 0xccc8, 0x9b00, 0xf41a, 0x6b7, 0x677f, 0x0, 0x1);
        gbc.writeMem(0x5f7f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xccc8);
        EXPECT(gbc.pc(), 0x5f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0354
        gbc.setState(0x7a0e, 0x56ba, 0xa270, 0xfbcb, 0x657d, 0x16b1, 0x1, 0x1);
        gbc.writeMem(0x7a0e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x56ba);
        EXPECT(gbc.pc(), 0x7a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0355
        gbc.setState(0xc244, 0xae3e, 0xc4b0, 0xe882, 0x9fda, 0x19a2, 0x0, 0x1);
        gbc.writeMem(0xc244, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xae3e);
        EXPECT(gbc.pc(), 0xc246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc244), 0xcb);
        EXPECT(gbc.readMem(0xc245), 0xec);
        // CB EC 0356
        gbc.setState(0xc1f, 0xa9c6, 0x4740, 0x4e1f, 0x126b, 0xece9, 0x1, 0x0);
        gbc.writeMem(0xc1f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa9c6);
        EXPECT(gbc.pc(), 0xc21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0357
        gbc.setState(0x7889, 0xd923, 0x49a0, 0x28aa, 0x249f, 0xd24f, 0x1, 0x1);
        gbc.writeMem(0x7889, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd923);
        EXPECT(gbc.pc(), 0x788b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0358
        gbc.setState(0x19ca, 0x1c6b, 0x8e70, 0x4aec, 0x5d4d, 0x8b41, 0x1, 0x1);
        gbc.writeMem(0x19ca, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1c6b);
        EXPECT(gbc.pc(), 0x19cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0359
        gbc.setState(0x5ff3, 0x859e, 0x6100, 0xfb1e, 0x8172, 0x8369, 0x0, 0x1);
        gbc.writeMem(0x5ff3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x859e);
        EXPECT(gbc.pc(), 0x5ff5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 035A
        gbc.setState(0x8525, 0x556d, 0x8840, 0x59a0, 0x1f11, 0x6d66, 0x1, 0x1);
        gbc.writeMem(0x8525, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x556d);
        EXPECT(gbc.pc(), 0x8527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8525), 0xcb);
        EXPECT(gbc.readMem(0x8526), 0xec);
        // CB EC 035B
        gbc.setState(0x6bba, 0xd738, 0x5c00, 0x4290, 0x8e3e, 0x4f85, 0x1, 0x0);
        gbc.writeMem(0x6bba, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd738);
        EXPECT(gbc.pc(), 0x6bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 035C
        gbc.setState(0x8fc6, 0xb7b9, 0x1e90, 0xf079, 0x82a8, 0x74bd, 0x1, 0x1);
        gbc.writeMem(0x8fc6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb7b9);
        EXPECT(gbc.pc(), 0x8fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fc6), 0xcb);
        EXPECT(gbc.readMem(0x8fc7), 0xec);
        // CB EC 035D
        gbc.setState(0x5a5a, 0x9e36, 0x5330, 0x526, 0x6ef4, 0x370e, 0x0, 0x1);
        gbc.writeMem(0x5a5a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9e36);
        EXPECT(gbc.pc(), 0x5a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 035E
        gbc.setState(0x18e2, 0xc76d, 0x24c0, 0xa4c2, 0xa16, 0xbfdc, 0x1, 0x0);
        gbc.writeMem(0x18e2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc76d);
        EXPECT(gbc.pc(), 0x18e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 035F
        gbc.setState(0x1b0d, 0xf58f, 0xc8c0, 0x329c, 0x2237, 0x2226, 0x0, 0x1);
        gbc.writeMem(0x1b0d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf58f);
        EXPECT(gbc.pc(), 0x1b0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0360
        gbc.setState(0xda0c, 0xbebd, 0x6d80, 0xa2fa, 0x4e07, 0xdf76, 0x0, 0x1);
        gbc.writeMem(0xda0c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbebd);
        EXPECT(gbc.pc(), 0xda0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda0c), 0xcb);
        EXPECT(gbc.readMem(0xda0d), 0xec);
        // CB EC 0361
        gbc.setState(0x6847, 0x4113, 0x6b20, 0x8b66, 0x2106, 0xa5ed, 0x1, 0x0);
        gbc.writeMem(0x6847, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4113);
        EXPECT(gbc.pc(), 0x6849);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0362
        gbc.setState(0xacc4, 0x8f9e, 0x6830, 0x566b, 0xfe80, 0xac41, 0x1, 0x0);
        gbc.writeMem(0xacc4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8f9e);
        EXPECT(gbc.pc(), 0xacc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc4), 0xcb);
        EXPECT(gbc.readMem(0xacc5), 0xec);
        // CB EC 0363
        gbc.setState(0x4645, 0xd344, 0xa00, 0x5734, 0xc6b3, 0x55b1, 0x1, 0x0);
        gbc.writeMem(0x4645, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd344);
        EXPECT(gbc.pc(), 0x4647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0364
        gbc.setState(0x3469, 0xc6fc, 0x3700, 0x2165, 0xa098, 0x31d8, 0x0, 0x0);
        gbc.writeMem(0x3469, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc6fc);
        EXPECT(gbc.pc(), 0x346b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0365
        gbc.setState(0x6de1, 0x562, 0xe480, 0x1169, 0x63ef, 0x2a96, 0x0, 0x0);
        gbc.writeMem(0x6de1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x562);
        EXPECT(gbc.pc(), 0x6de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0366
        gbc.setState(0x859b, 0x2bd8, 0x7b0, 0x1a63, 0x60a6, 0x84ad, 0x1, 0x1);
        gbc.writeMem(0x859b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2bd8);
        EXPECT(gbc.pc(), 0x859d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x859b), 0xcb);
        EXPECT(gbc.readMem(0x859c), 0xec);
        // CB EC 0367
        gbc.setState(0xad06, 0x11af, 0x60f0, 0xd6bf, 0x9c05, 0x3dc7, 0x0, 0x1);
        gbc.writeMem(0xad06, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x11af);
        EXPECT(gbc.pc(), 0xad08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad06), 0xcb);
        EXPECT(gbc.readMem(0xad07), 0xec);
        // CB EC 0368
        gbc.setState(0x9506, 0x1839, 0x1c0, 0xc14f, 0xd3ba, 0xe607, 0x0, 0x1);
        gbc.writeMem(0x9506, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1839);
        EXPECT(gbc.pc(), 0x9508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9506), 0xcb);
        EXPECT(gbc.readMem(0x9507), 0xec);
        // CB EC 0369
        gbc.setState(0x6505, 0xc926, 0x57e0, 0xb7d0, 0x3d3e, 0xa55f, 0x0, 0x1);
        gbc.writeMem(0x6505, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc926);
        EXPECT(gbc.pc(), 0x6507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 036A
        gbc.setState(0xc03, 0xf150, 0xdf0, 0xc89f, 0xacf8, 0xb68e, 0x0, 0x0);
        gbc.writeMem(0xc03, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf150);
        EXPECT(gbc.pc(), 0xc05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 036B
        gbc.setState(0x234, 0x44a2, 0x4c60, 0xe25b, 0x17d2, 0xc41c, 0x1, 0x0);
        gbc.writeMem(0x234, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x44a2);
        EXPECT(gbc.pc(), 0x236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 036C
        gbc.setState(0x308f, 0xa9de, 0x9320, 0x23c9, 0xd9c3, 0x4fa5, 0x1, 0x1);
        gbc.writeMem(0x308f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa9de);
        EXPECT(gbc.pc(), 0x3091);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 036D
        gbc.setState(0xc7e4, 0x198e, 0xa660, 0xe52a, 0xa4d2, 0x2adc, 0x0, 0x1);
        gbc.writeMem(0xc7e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x198e);
        EXPECT(gbc.pc(), 0xc7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e4), 0xcb);
        EXPECT(gbc.readMem(0xc7e5), 0xec);
        // CB EC 036E
        gbc.setState(0xac, 0xf98d, 0x7ee0, 0x26c1, 0x3544, 0x2ff4, 0x1, 0x0);
        gbc.writeMem(0xac, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf98d);
        EXPECT(gbc.pc(), 0xae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 036F
        gbc.setState(0x84c8, 0x54fb, 0x9710, 0xfd31, 0x147d, 0xb108, 0x0, 0x1);
        gbc.writeMem(0x84c8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x54fb);
        EXPECT(gbc.pc(), 0x84ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c8), 0xcb);
        EXPECT(gbc.readMem(0x84c9), 0xec);
        // CB EC 0370
        gbc.setState(0xb4d9, 0x6509, 0x6320, 0xa127, 0xb468, 0xa758, 0x1, 0x0);
        gbc.writeMem(0xb4d9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6509);
        EXPECT(gbc.pc(), 0xb4db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d9), 0xcb);
        EXPECT(gbc.readMem(0xb4da), 0xec);
        // CB EC 0371
        gbc.setState(0x7598, 0x4b71, 0xe350, 0xa5f1, 0x5e9c, 0xa2a9, 0x1, 0x0);
        gbc.writeMem(0x7598, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4b71);
        EXPECT(gbc.pc(), 0x759a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0372
        gbc.setState(0x4349, 0xba63, 0x5d10, 0xc753, 0x38f0, 0x5c2b, 0x1, 0x0);
        gbc.writeMem(0x4349, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xba63);
        EXPECT(gbc.pc(), 0x434b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0373
        gbc.setState(0x9449, 0x3ce6, 0x9020, 0x4182, 0x21f7, 0x70d5, 0x1, 0x1);
        gbc.writeMem(0x9449, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3ce6);
        EXPECT(gbc.pc(), 0x944b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9449), 0xcb);
        EXPECT(gbc.readMem(0x944a), 0xec);
        // CB EC 0374
        gbc.setState(0x8726, 0x9321, 0xdf60, 0x4128, 0xf817, 0xe322, 0x0, 0x1);
        gbc.writeMem(0x8726, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9321);
        EXPECT(gbc.pc(), 0x8728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8726), 0xcb);
        EXPECT(gbc.readMem(0x8727), 0xec);
        // CB EC 0375
        gbc.setState(0x6072, 0x9963, 0x8a0, 0x597f, 0x7bdf, 0x79a6, 0x1, 0x0);
        gbc.writeMem(0x6072, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9963);
        EXPECT(gbc.pc(), 0x6074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0376
        gbc.setState(0xa7ad, 0xac09, 0x3ad0, 0x4992, 0xfc22, 0xf593, 0x0, 0x1);
        gbc.writeMem(0xa7ad, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xac09);
        EXPECT(gbc.pc(), 0xa7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ad), 0xcb);
        EXPECT(gbc.readMem(0xa7ae), 0xec);
        // CB EC 0377
        gbc.setState(0xc9d8, 0x3606, 0x2e00, 0xf4b7, 0x22fe, 0xf795, 0x0, 0x0);
        gbc.writeMem(0xc9d8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3606);
        EXPECT(gbc.pc(), 0xc9da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d8), 0xcb);
        EXPECT(gbc.readMem(0xc9d9), 0xec);
        // CB EC 0378
        gbc.setState(0xa012, 0xbd4b, 0x2ca0, 0x5506, 0x161e, 0x3eb3, 0x1, 0x0);
        gbc.writeMem(0xa012, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbd4b);
        EXPECT(gbc.pc(), 0xa014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa012), 0xcb);
        EXPECT(gbc.readMem(0xa013), 0xec);
        // CB EC 0379
        gbc.setState(0xa273, 0x4359, 0x32f0, 0xf492, 0xa534, 0x23b2, 0x1, 0x0);
        gbc.writeMem(0xa273, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4359);
        EXPECT(gbc.pc(), 0xa275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa273), 0xcb);
        EXPECT(gbc.readMem(0xa274), 0xec);
        // CB EC 037A
        gbc.setState(0xde22, 0x79ef, 0xc9b0, 0xaa82, 0xcc09, 0xb7ad, 0x1, 0x1);
        gbc.writeMem(0xde22, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x79ef);
        EXPECT(gbc.pc(), 0xde24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde22), 0xcb);
        EXPECT(gbc.readMem(0xde23), 0xec);
        // CB EC 037B
        gbc.setState(0xd7b0, 0x942d, 0x2e60, 0x5c1a, 0xf50d, 0x82a5, 0x1, 0x0);
        gbc.writeMem(0xd7b0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x942d);
        EXPECT(gbc.pc(), 0xd7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b0), 0xcb);
        EXPECT(gbc.readMem(0xd7b1), 0xec);
        // CB EC 037C
        gbc.setState(0x9d8e, 0xe5b0, 0xa430, 0xf997, 0x3f14, 0xe4a7, 0x0, 0x0);
        gbc.writeMem(0x9d8e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe5b0);
        EXPECT(gbc.pc(), 0x9d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8e), 0xcb);
        EXPECT(gbc.readMem(0x9d8f), 0xec);
        // CB EC 037D
        gbc.setState(0xb891, 0x9c06, 0x8990, 0x172e, 0xc0ba, 0xdd5a, 0x0, 0x0);
        gbc.writeMem(0xb891, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9c06);
        EXPECT(gbc.pc(), 0xb893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb891), 0xcb);
        EXPECT(gbc.readMem(0xb892), 0xec);
        // CB EC 037E
        gbc.setState(0x5117, 0x1a22, 0x6170, 0xcf3d, 0x9f62, 0xf5bc, 0x1, 0x1);
        gbc.writeMem(0x5117, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1a22);
        EXPECT(gbc.pc(), 0x5119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0380
        gbc.setState(0x4e4, 0xe301, 0xa540, 0x1c3b, 0x4771, 0xca76, 0x0, 0x1);
        gbc.writeMem(0x4e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe301);
        EXPECT(gbc.pc(), 0x4e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0381
        gbc.setState(0x131f, 0x21f, 0x5f80, 0x92c6, 0xe466, 0xce12, 0x0, 0x1);
        gbc.writeMem(0x131f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x21f);
        EXPECT(gbc.pc(), 0x1321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0382
        gbc.setState(0xce85, 0x3fac, 0xe250, 0x2f08, 0xbde4, 0xf753, 0x0, 0x1);
        gbc.writeMem(0xce85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3fac);
        EXPECT(gbc.pc(), 0xce87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce85), 0xcb);
        EXPECT(gbc.readMem(0xce86), 0xec);
        // CB EC 0384
        gbc.setState(0x4a58, 0x7515, 0xf300, 0x473a, 0x118c, 0x5bfc, 0x1, 0x0);
        gbc.writeMem(0x4a58, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7515);
        EXPECT(gbc.pc(), 0x4a5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0386
        gbc.setState(0xa7e3, 0x8bf6, 0xbdf0, 0x1b90, 0x7e6d, 0x82c8, 0x1, 0x0);
        gbc.writeMem(0xa7e3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8bf6);
        EXPECT(gbc.pc(), 0xa7e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7e3), 0xcb);
        EXPECT(gbc.readMem(0xa7e4), 0xec);
        // CB EC 0387
        gbc.setState(0xec81, 0x64c2, 0xd1c0, 0xed01, 0xbcfc, 0x4fc7, 0x1, 0x1);
        gbc.writeMem(0xec81, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x64c2);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec81), 0xcb);
        EXPECT(gbc.readMem(0xec82), 0xec);
        // CB EC 0388
        gbc.setState(0x1f4, 0xd6de, 0xc40, 0x7739, 0x7476, 0x821b, 0x1, 0x1);
        gbc.writeMem(0x1f4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd6de);
        EXPECT(gbc.pc(), 0x1f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0389
        gbc.setState(0x954, 0xa83f, 0x6a50, 0xeae7, 0x5ddd, 0xee1e, 0x1, 0x0);
        gbc.writeMem(0x954, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa83f);
        EXPECT(gbc.pc(), 0x956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 038A
        gbc.setState(0x9c4d, 0xe17b, 0x10b0, 0x6eb1, 0x51bd, 0x5d85, 0x1, 0x0);
        gbc.writeMem(0x9c4d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe17b);
        EXPECT(gbc.pc(), 0x9c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4d), 0xcb);
        EXPECT(gbc.readMem(0x9c4e), 0xec);
        // CB EC 038B
        gbc.setState(0x9a85, 0xd075, 0x4570, 0xb301, 0x11a4, 0xf0dd, 0x0, 0x1);
        gbc.writeMem(0x9a85, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd075);
        EXPECT(gbc.pc(), 0x9a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a85), 0xcb);
        EXPECT(gbc.readMem(0x9a86), 0xec);
        // CB EC 038C
        gbc.setState(0x29cf, 0x513a, 0x4120, 0xc99, 0xa95c, 0x9cd9, 0x0, 0x0);
        gbc.writeMem(0x29cf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x513a);
        EXPECT(gbc.pc(), 0x29d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 038D
        gbc.setState(0xc2e7, 0x1ba3, 0x93b0, 0xd6cd, 0x8eb, 0x1e78, 0x1, 0x1);
        gbc.writeMem(0xc2e7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1ba3);
        EXPECT(gbc.pc(), 0xc2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e7), 0xcb);
        EXPECT(gbc.readMem(0xc2e8), 0xec);
        // CB EC 038E
        gbc.setState(0xb488, 0x94c2, 0xbbf0, 0xc96c, 0x2dad, 0xb10, 0x0, 0x1);
        gbc.writeMem(0xb488, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x94c2);
        EXPECT(gbc.pc(), 0xb48a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb488), 0xcb);
        EXPECT(gbc.readMem(0xb489), 0xec);
        // CB EC 038F
        gbc.setState(0xb8c0, 0xbba9, 0xfc70, 0xc83d, 0x9ec6, 0x7e1a, 0x0, 0x0);
        gbc.writeMem(0xb8c0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbba9);
        EXPECT(gbc.pc(), 0xb8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c0), 0xcb);
        EXPECT(gbc.readMem(0xb8c1), 0xec);
        // CB EC 0390
        gbc.setState(0x9bfe, 0xf870, 0x5ad0, 0xf1b1, 0x8eca, 0x2fbb, 0x1, 0x1);
        gbc.writeMem(0x9bfe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf870);
        EXPECT(gbc.pc(), 0x9c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfe), 0xcb);
        EXPECT(gbc.readMem(0x9bff), 0xec);
        // CB EC 0391
        gbc.setState(0x4b3d, 0x7e74, 0x8e00, 0xab65, 0x119d, 0xbee2, 0x0, 0x1);
        gbc.writeMem(0x4b3d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7e74);
        EXPECT(gbc.pc(), 0x4b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0392
        gbc.setState(0xa6dd, 0xe498, 0xd730, 0xa9ca, 0xfa72, 0x483f, 0x1, 0x0);
        gbc.writeMem(0xa6dd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe498);
        EXPECT(gbc.pc(), 0xa6df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6dd), 0xcb);
        EXPECT(gbc.readMem(0xa6de), 0xec);
        // CB EC 0393
        gbc.setState(0xabde, 0x42fd, 0x5350, 0xf896, 0x7bfc, 0xfd8c, 0x0, 0x1);
        gbc.writeMem(0xabde, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x42fd);
        EXPECT(gbc.pc(), 0xabe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabde), 0xcb);
        EXPECT(gbc.readMem(0xabdf), 0xec);
        // CB EC 0394
        gbc.setState(0x2167, 0x86b0, 0xba20, 0x544d, 0xfc97, 0x46c0, 0x1, 0x1);
        gbc.writeMem(0x2167, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x86b0);
        EXPECT(gbc.pc(), 0x2169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 0395
        gbc.setState(0xb3f7, 0x8fd3, 0xd290, 0x5a20, 0x6bb2, 0xd75c, 0x0, 0x1);
        gbc.writeMem(0xb3f7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8fd3);
        EXPECT(gbc.pc(), 0xb3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f7), 0xcb);
        EXPECT(gbc.readMem(0xb3f8), 0xec);
        // CB EC 0396
        gbc.setState(0xdd1f, 0x1062, 0x4ed0, 0x42a8, 0x1499, 0x22bb, 0x0, 0x1);
        gbc.writeMem(0xdd1f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1062);
        EXPECT(gbc.pc(), 0xdd21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd1f), 0xcb);
        EXPECT(gbc.readMem(0xdd20), 0xec);
        // CB EC 0397
        gbc.setState(0x74e7, 0x6f08, 0xe790, 0xa0d0, 0x6ff3, 0xa470, 0x1, 0x1);
        gbc.writeMem(0x74e7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0x74e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0398
        gbc.setState(0x5b01, 0x610a, 0xcb30, 0x152d, 0xb87e, 0xb55d, 0x1, 0x0);
        gbc.writeMem(0x5b01, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x610a);
        EXPECT(gbc.pc(), 0x5b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 0399
        gbc.setState(0x408c, 0xfa4, 0xd210, 0xd327, 0xd37a, 0xb537, 0x0, 0x0);
        gbc.writeMem(0x408c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfa4);
        EXPECT(gbc.pc(), 0x408e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 039A
        gbc.setState(0xcffe, 0x7391, 0x4960, 0x4c32, 0x1f72, 0x4216, 0x0, 0x1);
        gbc.writeMem(0xcffe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7391);
        EXPECT(gbc.pc(), 0xd000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffe), 0xcb);
        EXPECT(gbc.readMem(0xcfff), 0xec);
        // CB EC 039B
        gbc.setState(0xb7b1, 0x2fae, 0x42f0, 0xa7b3, 0xf240, 0x37e2, 0x1, 0x0);
        gbc.writeMem(0xb7b1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2fae);
        EXPECT(gbc.pc(), 0xb7b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7b1), 0xcb);
        EXPECT(gbc.readMem(0xb7b2), 0xec);
        // CB EC 039C
        gbc.setState(0x82ca, 0xa0d3, 0x1bb0, 0xcc31, 0xab7f, 0xf0a8, 0x1, 0x0);
        gbc.writeMem(0x82ca, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa0d3);
        EXPECT(gbc.pc(), 0x82cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ca), 0xcb);
        EXPECT(gbc.readMem(0x82cb), 0xec);
        // CB EC 039D
        gbc.setState(0x722e, 0xf296, 0xa40, 0x1fed, 0x5b43, 0x1114, 0x0, 0x0);
        gbc.writeMem(0x722e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf296);
        EXPECT(gbc.pc(), 0x7230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 039E
        gbc.setState(0x8857, 0xe96d, 0xbe0, 0x9f9f, 0x4256, 0x6288, 0x1, 0x1);
        gbc.writeMem(0x8857, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe96d);
        EXPECT(gbc.pc(), 0x8859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8857), 0xcb);
        EXPECT(gbc.readMem(0x8858), 0xec);
        // CB EC 039F
        gbc.setState(0x7d9, 0x539d, 0x45f0, 0x4a99, 0x58e, 0x95, 0x1, 0x1);
        gbc.writeMem(0x7d9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x539d);
        EXPECT(gbc.pc(), 0x7db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03A0
        gbc.setState(0xdc24, 0x1fc8, 0xb300, 0x7f80, 0xb3fc, 0xc247, 0x1, 0x0);
        gbc.writeMem(0xdc24, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1fc8);
        EXPECT(gbc.pc(), 0xdc26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc24), 0xcb);
        EXPECT(gbc.readMem(0xdc25), 0xec);
        // CB EC 03A1
        gbc.setState(0x40f5, 0x1aef, 0x9960, 0xae05, 0xab42, 0x871, 0x0, 0x1);
        gbc.writeMem(0x40f5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1aef);
        EXPECT(gbc.pc(), 0x40f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03A2
        gbc.setState(0x423e, 0xe05, 0x2c10, 0x90e8, 0x9ed1, 0x2a95, 0x1, 0x1);
        gbc.writeMem(0x423e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe05);
        EXPECT(gbc.pc(), 0x4240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03A3
        gbc.setState(0xd6c9, 0x54e5, 0xb060, 0x4612, 0x5f97, 0x21a9, 0x1, 0x1);
        gbc.writeMem(0xd6c9, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x54e5);
        EXPECT(gbc.pc(), 0xd6cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c9), 0xcb);
        EXPECT(gbc.readMem(0xd6ca), 0xec);
        // CB EC 03A4
        gbc.setState(0x2c63, 0x6649, 0x3830, 0x47ae, 0x78fe, 0xab4a, 0x1, 0x0);
        gbc.writeMem(0x2c63, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6649);
        EXPECT(gbc.pc(), 0x2c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03A5
        gbc.setState(0x1671, 0xd39c, 0x32c0, 0x5449, 0x250f, 0x59f, 0x1, 0x1);
        gbc.writeMem(0x1671, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd39c);
        EXPECT(gbc.pc(), 0x1673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03A6
        gbc.setState(0xe9eb, 0xac7d, 0x3500, 0xdde2, 0xc53d, 0x15e4, 0x1, 0x0);
        gbc.writeMem(0xe9eb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xac7d);
        EXPECT(gbc.pc(), 0xe9ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9eb), 0xcb);
        EXPECT(gbc.readMem(0xe9ec), 0xec);
        // CB EC 03A7
        gbc.setState(0x9778, 0x6912, 0xa180, 0xd9e4, 0x1d61, 0x5e82, 0x0, 0x1);
        gbc.writeMem(0x9778, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6912);
        EXPECT(gbc.pc(), 0x977a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9778), 0xcb);
        EXPECT(gbc.readMem(0x9779), 0xec);
        // CB EC 03A8
        gbc.setState(0x3242, 0xfc2a, 0xde90, 0x5922, 0x57bb, 0x5cfb, 0x1, 0x0);
        gbc.writeMem(0x3242, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfc2a);
        EXPECT(gbc.pc(), 0x3244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03A9
        gbc.setState(0x5b66, 0xb9c4, 0x7b00, 0x1435, 0x53ff, 0x5fc2, 0x1, 0x1);
        gbc.writeMem(0x5b66, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb9c4);
        EXPECT(gbc.pc(), 0x5b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03AA
        gbc.setState(0xe330, 0xe943, 0x43a0, 0x453e, 0xac30, 0xeaec, 0x0, 0x0);
        gbc.writeMem(0xe330, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe943);
        EXPECT(gbc.pc(), 0xe332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe330), 0xcb);
        EXPECT(gbc.readMem(0xe331), 0xec);
        // CB EC 03AB
        gbc.setState(0x9709, 0x8089, 0x1960, 0x3a3c, 0xfa5a, 0x7bb, 0x0, 0x0);
        gbc.writeMem(0x9709, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8089);
        EXPECT(gbc.pc(), 0x970b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9709), 0xcb);
        EXPECT(gbc.readMem(0x970a), 0xec);
        // CB EC 03AC
        gbc.setState(0x81e, 0x804e, 0xcce0, 0xf14e, 0xbee9, 0xa546, 0x1, 0x0);
        gbc.writeMem(0x81e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x804e);
        EXPECT(gbc.pc(), 0x820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03AD
        gbc.setState(0xa2e2, 0x5747, 0x1310, 0x1003, 0x1e6f, 0xd45d, 0x0, 0x1);
        gbc.writeMem(0xa2e2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5747);
        EXPECT(gbc.pc(), 0xa2e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e2), 0xcb);
        EXPECT(gbc.readMem(0xa2e3), 0xec);
        // CB EC 03AE
        gbc.setState(0xa75c, 0xc191, 0x2ed0, 0x8146, 0x2e22, 0x49f6, 0x0, 0x1);
        gbc.writeMem(0xa75c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc191);
        EXPECT(gbc.pc(), 0xa75e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa75c), 0xcb);
        EXPECT(gbc.readMem(0xa75d), 0xec);
        // CB EC 03AF
        gbc.setState(0x9bbf, 0xf1db, 0x14a0, 0xa184, 0x90fa, 0xddee, 0x0, 0x0);
        gbc.writeMem(0x9bbf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf1db);
        EXPECT(gbc.pc(), 0x9bc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bbf), 0xcb);
        EXPECT(gbc.readMem(0x9bc0), 0xec);
        // CB EC 03B0
        gbc.setState(0x29d4, 0xe46f, 0x6a70, 0xd9bb, 0x213a, 0x8e32, 0x0, 0x0);
        gbc.writeMem(0x29d4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe46f);
        EXPECT(gbc.pc(), 0x29d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03B1
        gbc.setState(0xd6ce, 0x406b, 0xd510, 0x7e13, 0xde9f, 0x5a02, 0x1, 0x1);
        gbc.writeMem(0xd6ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x406b);
        EXPECT(gbc.pc(), 0xd6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ce), 0xcb);
        EXPECT(gbc.readMem(0xd6cf), 0xec);
        // CB EC 03B2
        gbc.setState(0x228d, 0x439e, 0xc520, 0xd78e, 0x4691, 0xed4b, 0x0, 0x0);
        gbc.writeMem(0x228d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x439e);
        EXPECT(gbc.pc(), 0x228f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03B3
        gbc.setState(0xab6c, 0x5630, 0xe4b0, 0x4dda, 0xd9fb, 0x784b, 0x1, 0x1);
        gbc.writeMem(0xab6c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5630);
        EXPECT(gbc.pc(), 0xab6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6c), 0xcb);
        EXPECT(gbc.readMem(0xab6d), 0xec);
        // CB EC 03B4
        gbc.setState(0x5b89, 0xb15e, 0xb190, 0x6527, 0xc1ec, 0xb002, 0x1, 0x0);
        gbc.writeMem(0x5b89, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb15e);
        EXPECT(gbc.pc(), 0x5b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03B5
        gbc.setState(0x20fa, 0xf421, 0xe370, 0x3f43, 0xa22d, 0x64fb, 0x0, 0x1);
        gbc.writeMem(0x20fa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf421);
        EXPECT(gbc.pc(), 0x20fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03B6
        gbc.setState(0x1d0, 0x2fe0, 0xa7f0, 0x781a, 0x5f43, 0xf6b6, 0x1, 0x0);
        gbc.writeMem(0x1d0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2fe0);
        EXPECT(gbc.pc(), 0x1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03B7
        gbc.setState(0xc13e, 0xccbd, 0xc870, 0x9cb5, 0xab38, 0x8902, 0x0, 0x1);
        gbc.writeMem(0xc13e, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xccbd);
        EXPECT(gbc.pc(), 0xc140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc13e), 0xcb);
        EXPECT(gbc.readMem(0xc13f), 0xec);
        // CB EC 03B8
        gbc.setState(0x568c, 0x66f7, 0xa120, 0x923, 0x280b, 0x6a73, 0x0, 0x0);
        gbc.writeMem(0x568c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x66f7);
        EXPECT(gbc.pc(), 0x568e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03B9
        gbc.setState(0xe52d, 0xc6db, 0xfd70, 0xde28, 0x6d10, 0x66ff, 0x0, 0x1);
        gbc.writeMem(0xe52d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc6db);
        EXPECT(gbc.pc(), 0xe52f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe52d), 0xcb);
        EXPECT(gbc.readMem(0xe52e), 0xec);
        // CB EC 03BA
        gbc.setState(0x6af1, 0x9d3b, 0x6260, 0x688d, 0x47c0, 0xffb2, 0x1, 0x0);
        gbc.writeMem(0x6af1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9d3b);
        EXPECT(gbc.pc(), 0x6af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03BB
        gbc.setState(0x2d4d, 0xe487, 0x8f0, 0x3506, 0xf060, 0xef87, 0x1, 0x0);
        gbc.writeMem(0x2d4d, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe487);
        EXPECT(gbc.pc(), 0x2d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03BC
        gbc.setState(0x968c, 0x6be0, 0xfa40, 0xe798, 0x726a, 0x5f4a, 0x0, 0x1);
        gbc.writeMem(0x968c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6be0);
        EXPECT(gbc.pc(), 0x968e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x968c), 0xcb);
        EXPECT(gbc.readMem(0x968d), 0xec);
        // CB EC 03BD
        gbc.setState(0x14c, 0xa750, 0xf80, 0x1a22, 0xc750, 0x9d8, 0x1, 0x0);
        gbc.writeMem(0x14c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa750);
        EXPECT(gbc.pc(), 0x14e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03BE
        gbc.setState(0x8bb1, 0x91e8, 0xecf0, 0x6b65, 0x227d, 0x50f, 0x0, 0x1);
        gbc.writeMem(0x8bb1, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x91e8);
        EXPECT(gbc.pc(), 0x8bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bb1), 0xcb);
        EXPECT(gbc.readMem(0x8bb2), 0xec);
        // CB EC 03BF
        gbc.setState(0xdf6b, 0xed09, 0xbec0, 0x9c99, 0xcf6b, 0xa665, 0x0, 0x1);
        gbc.writeMem(0xdf6b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xed09);
        EXPECT(gbc.pc(), 0xdf6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf6b), 0xcb);
        EXPECT(gbc.readMem(0xdf6c), 0xec);
        // CB EC 03C0
        gbc.setState(0xea2, 0xfe28, 0x4ee0, 0xfade, 0x5c38, 0xd616, 0x1, 0x0);
        gbc.writeMem(0xea2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xfe28);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03C1
        gbc.setState(0x16ce, 0x7ca5, 0x46b0, 0xaf00, 0xb576, 0x49fc, 0x1, 0x0);
        gbc.writeMem(0x16ce, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7ca5);
        EXPECT(gbc.pc(), 0x16d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03C2
        gbc.setState(0xe81, 0x893d, 0xd4e0, 0xcc4a, 0xa2ef, 0xa2ed, 0x1, 0x1);
        gbc.writeMem(0xe81, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x893d);
        EXPECT(gbc.pc(), 0xe83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03C3
        gbc.setState(0x35fa, 0x29d0, 0x96d0, 0x646a, 0x1dc, 0xe8f6, 0x0, 0x0);
        gbc.writeMem(0x35fa, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x29d0);
        EXPECT(gbc.pc(), 0x35fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03C4
        gbc.setState(0x4bb8, 0xb05c, 0xcd0, 0xdb99, 0xfaab, 0xee74, 0x0, 0x0);
        gbc.writeMem(0x4bb8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb05c);
        EXPECT(gbc.pc(), 0x4bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03C5
        gbc.setState(0x51a6, 0xa0fc, 0xfae0, 0xf7c9, 0x6287, 0x3ba5, 0x0, 0x1);
        gbc.writeMem(0x51a6, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa0fc);
        EXPECT(gbc.pc(), 0x51a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03C6
        gbc.setState(0xd3e3, 0x11e3, 0xb790, 0x56ba, 0xfc75, 0x843, 0x1, 0x0);
        gbc.writeMem(0xd3e3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x11e3);
        EXPECT(gbc.pc(), 0xd3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3e3), 0xcb);
        EXPECT(gbc.readMem(0xd3e4), 0xec);
        // CB EC 03C7
        gbc.setState(0x9486, 0xbbd5, 0xcf60, 0xc3cc, 0xd375, 0x8e56, 0x0, 0x0);
        gbc.writeMem(0x9486, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbbd5);
        EXPECT(gbc.pc(), 0x9488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9486), 0xcb);
        EXPECT(gbc.readMem(0x9487), 0xec);
        // CB EC 03C8
        gbc.setState(0x259f, 0xbf1a, 0x3170, 0x52f, 0xdb67, 0xdd2, 0x0, 0x1);
        gbc.writeMem(0x259f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbf1a);
        EXPECT(gbc.pc(), 0x25a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03C9
        gbc.setState(0xe938, 0x114a, 0x300, 0x5557, 0x9a4a, 0x2727, 0x0, 0x0);
        gbc.writeMem(0xe938, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x114a);
        EXPECT(gbc.pc(), 0xe93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe938), 0xcb);
        EXPECT(gbc.readMem(0xe939), 0xec);
        // CB EC 03CA
        gbc.setState(0xdc86, 0x4db0, 0x99b0, 0x813, 0xee9, 0x5fa0, 0x1, 0x1);
        gbc.writeMem(0xdc86, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4db0);
        EXPECT(gbc.pc(), 0xdc88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc86), 0xcb);
        EXPECT(gbc.readMem(0xdc87), 0xec);
        // CB EC 03CB
        gbc.setState(0x29c2, 0x1d89, 0x9e10, 0xdc6d, 0x4b62, 0x3142, 0x1, 0x1);
        gbc.writeMem(0x29c2, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1d89);
        EXPECT(gbc.pc(), 0x29c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03CC
        gbc.setState(0xa0af, 0xd694, 0xbdc0, 0x96c5, 0x4dd, 0x6e53, 0x0, 0x1);
        gbc.writeMem(0xa0af, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd694);
        EXPECT(gbc.pc(), 0xa0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0af), 0xcb);
        EXPECT(gbc.readMem(0xa0b0), 0xec);
        // CB EC 03CD
        gbc.setState(0x9e0a, 0xd82d, 0xed60, 0x518c, 0xff14, 0x928d, 0x0, 0x1);
        gbc.writeMem(0x9e0a, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd82d);
        EXPECT(gbc.pc(), 0x9e0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e0a), 0xcb);
        EXPECT(gbc.readMem(0x9e0b), 0xec);
        // CB EC 03CE
        gbc.setState(0xd230, 0x93c5, 0xb160, 0x46b2, 0xcda6, 0xdafe, 0x1, 0x0);
        gbc.writeMem(0xd230, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x93c5);
        EXPECT(gbc.pc(), 0xd232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd230), 0xcb);
        EXPECT(gbc.readMem(0xd231), 0xec);
        // CB EC 03CF
        gbc.setState(0x2329, 0xa3b5, 0x9940, 0xd298, 0x2122, 0xaf53, 0x1, 0x1);
        gbc.writeMem(0x2329, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa3b5);
        EXPECT(gbc.pc(), 0x232b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03D0
        gbc.setState(0x674b, 0x5095, 0xda80, 0x2f24, 0x333, 0x568f, 0x0, 0x1);
        gbc.writeMem(0x674b, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5095);
        EXPECT(gbc.pc(), 0x674d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03D1
        gbc.setState(0xd128, 0xe6f8, 0xdf90, 0x1bba, 0xd2bd, 0xef1b, 0x0, 0x1);
        gbc.writeMem(0xd128, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe6f8);
        EXPECT(gbc.pc(), 0xd12a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd128), 0xcb);
        EXPECT(gbc.readMem(0xd129), 0xec);
        // CB EC 03D2
        gbc.setState(0xcc31, 0x9a0a, 0x1160, 0xcb39, 0x992f, 0xa4b6, 0x1, 0x0);
        gbc.writeMem(0xcc31, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9a0a);
        EXPECT(gbc.pc(), 0xcc33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc31), 0xcb);
        EXPECT(gbc.readMem(0xcc32), 0xec);
        // CB EC 03D3
        gbc.setState(0x4adf, 0xdc29, 0x4170, 0x546a, 0x7f05, 0xff1, 0x1, 0x0);
        gbc.writeMem(0x4adf, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdc29);
        EXPECT(gbc.pc(), 0x4ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03D4
        gbc.setState(0xc7fb, 0xb42b, 0x1e30, 0x7193, 0xdf65, 0x72a8, 0x0, 0x0);
        gbc.writeMem(0xc7fb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb42b);
        EXPECT(gbc.pc(), 0xc7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7fb), 0xcb);
        EXPECT(gbc.readMem(0xc7fc), 0xec);
        // CB EC 03D5
        gbc.setState(0x194f, 0xfd1c, 0x3b50, 0x479d, 0xfac7, 0xa51b, 0x1, 0x1);
        gbc.writeMem(0x194f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfd1c);
        EXPECT(gbc.pc(), 0x1951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03D6
        gbc.setState(0x18ea, 0x6552, 0x6b40, 0x1312, 0x49c2, 0x540, 0x0, 0x1);
        gbc.writeMem(0x18ea, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6552);
        EXPECT(gbc.pc(), 0x18ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03D7
        gbc.setState(0xa81, 0x201a, 0x8700, 0x9af1, 0x55af, 0xf34f, 0x0, 0x0);
        gbc.writeMem(0xa81, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x201a);
        EXPECT(gbc.pc(), 0xa83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03D8
        gbc.setState(0x78eb, 0xcb6c, 0xd400, 0xcbf4, 0xba85, 0xcc22, 0x1, 0x1);
        gbc.writeMem(0x78eb, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcb6c);
        EXPECT(gbc.pc(), 0x78ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03D9
        gbc.setState(0xd1d8, 0xfc42, 0x3ec0, 0x7979, 0xa808, 0xd406, 0x0, 0x1);
        gbc.writeMem(0xd1d8, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfc42);
        EXPECT(gbc.pc(), 0xd1da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d8), 0xcb);
        EXPECT(gbc.readMem(0xd1d9), 0xec);
        // CB EC 03DA
        gbc.setState(0x9240, 0xb88e, 0xcf20, 0x54c1, 0x3ea1, 0x131e, 0x1, 0x1);
        gbc.writeMem(0x9240, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb88e);
        EXPECT(gbc.pc(), 0x9242);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9240), 0xcb);
        EXPECT(gbc.readMem(0x9241), 0xec);
        // CB EC 03DB
        gbc.setState(0x528f, 0x9d5f, 0x7c80, 0x3e56, 0x5fbc, 0xdae4, 0x0, 0x1);
        gbc.writeMem(0x528f, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9d5f);
        EXPECT(gbc.pc(), 0x5291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03DC
        gbc.setState(0xa5fe, 0x378b, 0x95c0, 0x6b11, 0xa4fb, 0x4ed0, 0x1, 0x1);
        gbc.writeMem(0xa5fe, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x378b);
        EXPECT(gbc.pc(), 0xa600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fe), 0xcb);
        EXPECT(gbc.readMem(0xa5ff), 0xec);
        // CB EC 03DD
        gbc.setState(0x7c, 0xbdbb, 0xce00, 0x281e, 0x7100, 0x2baf, 0x0, 0x0);
        gbc.writeMem(0x7c, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbdbb);
        EXPECT(gbc.pc(), 0x7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03DE
        gbc.setState(0x4e4, 0xe553, 0x6ad0, 0x976d, 0x933f, 0xefdd, 0x1, 0x0);
        gbc.writeMem(0x4e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe553);
        EXPECT(gbc.pc(), 0x4e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03DF
        gbc.setState(0xb3d0, 0xdf61, 0xac10, 0xcd9, 0x78d3, 0x86e2, 0x1, 0x0);
        gbc.writeMem(0xb3d0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdf61);
        EXPECT(gbc.pc(), 0xb3d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d0), 0xcb);
        EXPECT(gbc.readMem(0xb3d1), 0xec);
        // CB EC 03E0
        gbc.setState(0x67e7, 0xb260, 0x50c0, 0x6179, 0xd673, 0x3fa, 0x1, 0x0);
        gbc.writeMem(0x67e7, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb260);
        EXPECT(gbc.pc(), 0x67e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03E1
        gbc.setState(0x30e4, 0x72b9, 0xe8f0, 0x9481, 0xdd43, 0xd5dc, 0x0, 0x0);
        gbc.writeMem(0x30e4, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x72b9);
        EXPECT(gbc.pc(), 0x30e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB EC 03E2
        gbc.setState(0x4fa5, 0xc20d, 0x75c0, 0x553c, 0xd9ab, 0x2630, 0x1, 0x0);
        gbc.writeMem(0x4fa5, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xc20d);
        EXPECT(gbc.pc(), 0x4fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03E3
        gbc.setState(0x8c68, 0xeb50, 0x8c0, 0xd266, 0x1c2c, 0x493b, 0x1, 0x1);
        gbc.writeMem(0x8c68, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xeb50);
        EXPECT(gbc.pc(), 0x8c6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c68), 0xcb);
        EXPECT(gbc.readMem(0x8c69), 0xec);
        // CB EC 03E4
        gbc.setState(0x4a79, 0x3b32, 0x7860, 0x3e23, 0xe359, 0x8048, 0x1, 0x0);
        gbc.writeMem(0x4a79, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3b32);
        EXPECT(gbc.pc(), 0x4a7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB EC 03E5
        gbc.setState(0xa3fd, 0xbf38, 0xc9f0, 0xdae, 0x29fb, 0x3e23, 0x1, 0x1);
        gbc.writeMem(0xa3fd, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbf38);
        EXPECT(gbc.pc(), 0xa3ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fd), 0xcb);
        EXPECT(gbc.readMem(0xa3fe), 0xec);
        // CB EC 03E6
        gbc.setState(0x8ed0, 0x7f8d, 0x2040, 0xce56, 0x38d1, 0x132b, 0x1, 0x0);
        gbc.writeMem(0x8ed0, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7f8d);
        EXPECT(gbc.pc(), 0x8ed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed0), 0xcb);
        EXPECT(gbc.readMem(0x8ed1), 0xec);
        // CB EC 03E7
        gbc.setState(0xe6f3, 0xe6ab, 0xa580, 0x5a41, 0xc4b1, 0xcda1, 0x0, 0x1);
        gbc.writeMem(0xe6f3, { 0xcb, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe6ab);
        EXPECT(gbc.pc(), 0xe6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f3), 0xcb);
        EXPECT(gbc.readMem(0xe6f4), 0xec);
    }
}
#endif
