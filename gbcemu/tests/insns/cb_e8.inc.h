    TEST(gbcemu, opcode_cb_e8) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB E8 0000
        gbc.setState(0x2a0c, 0xf374, 0x6980, 0xfebc, 0x2ce, 0x5cae, 0x1, 0x1);
        gbc.writeMem(0x2a0c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf374);
        EXPECT(gbc.pc(), 0x2a0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0001
        gbc.setState(0x83f8, 0x20b0, 0x56d0, 0x4cdc, 0x2fa, 0x533b, 0x0, 0x1);
        gbc.writeMem(0x83f8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x20b0);
        EXPECT(gbc.pc(), 0x83fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f8), 0xcb);
        EXPECT(gbc.readMem(0x83f9), 0xe8);
        // CB E8 0002
        gbc.setState(0x3be1, 0x1b04, 0x3310, 0x4564, 0xa405, 0xcea1, 0x1, 0x1);
        gbc.writeMem(0x3be1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1b04);
        EXPECT(gbc.pc(), 0x3be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0004
        gbc.setState(0x3428, 0x775b, 0xcf70, 0x723, 0x6b35, 0xb443, 0x0, 0x0);
        gbc.writeMem(0x3428, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x775b);
        EXPECT(gbc.pc(), 0x342a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0005
        gbc.setState(0x611c, 0x5a24, 0xa540, 0xba5a, 0x1aaf, 0x61eb, 0x1, 0x1);
        gbc.writeMem(0x611c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5a24);
        EXPECT(gbc.pc(), 0x611e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0006
        gbc.setState(0xc691, 0xfb5a, 0x8d90, 0x3d94, 0x4198, 0xf4d5, 0x1, 0x0);
        gbc.writeMem(0xc691, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xfb5a);
        EXPECT(gbc.pc(), 0xc693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc691), 0xcb);
        EXPECT(gbc.readMem(0xc692), 0xe8);
        // CB E8 0007
        gbc.setState(0xbbfe, 0xe5ba, 0xa4d0, 0x5126, 0xd98c, 0xbfd9, 0x1, 0x1);
        gbc.writeMem(0xbbfe, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe5ba);
        EXPECT(gbc.pc(), 0xbc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfe), 0xcb);
        EXPECT(gbc.readMem(0xbbff), 0xe8);
        // CB E8 0008
        gbc.setState(0xafe6, 0x1828, 0x2000, 0xd978, 0xce8a, 0x1e4, 0x0, 0x0);
        gbc.writeMem(0xafe6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1828);
        EXPECT(gbc.pc(), 0xafe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe6), 0xcb);
        EXPECT(gbc.readMem(0xafe7), 0xe8);
        // CB E8 0009
        gbc.setState(0xb2eb, 0xba07, 0xabb0, 0xe467, 0xe64a, 0xb40a, 0x0, 0x0);
        gbc.writeMem(0xb2eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xba07);
        EXPECT(gbc.pc(), 0xb2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2eb), 0xcb);
        EXPECT(gbc.readMem(0xb2ec), 0xe8);
        // CB E8 000A
        gbc.setState(0xe5a9, 0xa522, 0x370, 0xc74b, 0x5a37, 0x1406, 0x0, 0x0);
        gbc.writeMem(0xe5a9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa522);
        EXPECT(gbc.pc(), 0xe5ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a9), 0xcb);
        EXPECT(gbc.readMem(0xe5aa), 0xe8);
        // CB E8 000B
        gbc.setState(0x27a9, 0x7e10, 0xa9a0, 0x8054, 0x2125, 0x4ed0, 0x0, 0x0);
        gbc.writeMem(0x27a9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7e10);
        EXPECT(gbc.pc(), 0x27ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 000C
        gbc.setState(0xebe6, 0x856c, 0x9370, 0x2370, 0xfc1, 0x84d3, 0x0, 0x0);
        gbc.writeMem(0xebe6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x856c);
        EXPECT(gbc.pc(), 0xebe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe6), 0xcb);
        EXPECT(gbc.readMem(0xebe7), 0xe8);
        // CB E8 000D
        gbc.setState(0xe814, 0x7c6b, 0x2340, 0xc981, 0x7b0, 0x881c, 0x1, 0x1);
        gbc.writeMem(0xe814, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7c6b);
        EXPECT(gbc.pc(), 0xe816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe814), 0xcb);
        EXPECT(gbc.readMem(0xe815), 0xe8);
        // CB E8 000E
        gbc.setState(0x43bf, 0x79de, 0xf1d0, 0x5c27, 0xd425, 0x8c4e, 0x1, 0x1);
        gbc.writeMem(0x43bf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x79de);
        EXPECT(gbc.pc(), 0x43c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 000F
        gbc.setState(0x5a3b, 0x3203, 0x48c0, 0x8ffc, 0x6d62, 0x1b2e, 0x1, 0x1);
        gbc.writeMem(0x5a3b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3203);
        EXPECT(gbc.pc(), 0x5a3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0010
        gbc.setState(0xb93a, 0x156d, 0x70d0, 0xb047, 0xb503, 0x42b5, 0x1, 0x0);
        gbc.writeMem(0xb93a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x156d);
        EXPECT(gbc.pc(), 0xb93c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb93a), 0xcb);
        EXPECT(gbc.readMem(0xb93b), 0xe8);
        // CB E8 0011
        gbc.setState(0xee43, 0xad06, 0x3680, 0x60a, 0x623d, 0xa839, 0x1, 0x0);
        gbc.writeMem(0xee43, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xad06);
        EXPECT(gbc.pc(), 0xee45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee43), 0xcb);
        EXPECT(gbc.readMem(0xee44), 0xe8);
        // CB E8 0012
        gbc.setState(0xa9a3, 0xf28, 0xfcd0, 0x5a52, 0xd1c8, 0xe47e, 0x0, 0x1);
        gbc.writeMem(0xa9a3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf28);
        EXPECT(gbc.pc(), 0xa9a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a3), 0xcb);
        EXPECT(gbc.readMem(0xa9a4), 0xe8);
        // CB E8 0013
        gbc.setState(0xa19f, 0x1782, 0xf080, 0x3369, 0xf3da, 0x9ec0, 0x0, 0x1);
        gbc.writeMem(0xa19f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1782);
        EXPECT(gbc.pc(), 0xa1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa19f), 0xcb);
        EXPECT(gbc.readMem(0xa1a0), 0xe8);
        // CB E8 0014
        gbc.setState(0xd44a, 0x3561, 0xff60, 0x6d1b, 0x2816, 0x8d76, 0x0, 0x1);
        gbc.writeMem(0xd44a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3561);
        EXPECT(gbc.pc(), 0xd44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd44a), 0xcb);
        EXPECT(gbc.readMem(0xd44b), 0xe8);
        // CB E8 0015
        gbc.setState(0x3bf5, 0xfd73, 0x740, 0xe00d, 0xa186, 0xe9fc, 0x1, 0x1);
        gbc.writeMem(0x3bf5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfd73);
        EXPECT(gbc.pc(), 0x3bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0016
        gbc.setState(0x1d75, 0xfff3, 0x88b0, 0x5d, 0x7804, 0xdf71, 0x1, 0x1);
        gbc.writeMem(0x1d75, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfff3);
        EXPECT(gbc.pc(), 0x1d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0018
        gbc.setState(0x2999, 0xddb4, 0xfaa0, 0x4668, 0x4b78, 0x7ee7, 0x1, 0x0);
        gbc.writeMem(0x2999, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xddb4);
        EXPECT(gbc.pc(), 0x299b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0019
        gbc.setState(0x9eb5, 0x8e18, 0xb4a0, 0xcc0a, 0x7249, 0x562c, 0x0, 0x1);
        gbc.writeMem(0x9eb5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8e18);
        EXPECT(gbc.pc(), 0x9eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb5), 0xcb);
        EXPECT(gbc.readMem(0x9eb6), 0xe8);
        // CB E8 001B
        gbc.setState(0xcd09, 0x914, 0x5db0, 0xf268, 0xe0d4, 0x57e, 0x1, 0x0);
        gbc.writeMem(0xcd09, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x914);
        EXPECT(gbc.pc(), 0xcd0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd09), 0xcb);
        EXPECT(gbc.readMem(0xcd0a), 0xe8);
        // CB E8 001C
        gbc.setState(0x6c97, 0xdfd4, 0xa600, 0x29cc, 0x507, 0x9a53, 0x0, 0x0);
        gbc.writeMem(0x6c97, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdfd4);
        EXPECT(gbc.pc(), 0x6c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 001D
        gbc.setState(0xc8e4, 0xf344, 0x1be0, 0x6cf, 0x3951, 0xb392, 0x0, 0x1);
        gbc.writeMem(0xc8e4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf344);
        EXPECT(gbc.pc(), 0xc8e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e4), 0xcb);
        EXPECT(gbc.readMem(0xc8e5), 0xe8);
        // CB E8 001E
        gbc.setState(0x1d10, 0xbc45, 0xc7a0, 0x85da, 0x7c97, 0x1d5a, 0x1, 0x1);
        gbc.writeMem(0x1d10, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbc45);
        EXPECT(gbc.pc(), 0x1d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 001F
        gbc.setState(0x2579, 0xd669, 0x9380, 0xda16, 0x92bc, 0x6fea, 0x0, 0x0);
        gbc.writeMem(0x2579, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd669);
        EXPECT(gbc.pc(), 0x257b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0020
        gbc.setState(0x10f5, 0x1802, 0x43f0, 0x3f6, 0x62d5, 0x3e47, 0x1, 0x0);
        gbc.writeMem(0x10f5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1802);
        EXPECT(gbc.pc(), 0x10f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0021
        gbc.setState(0x4519, 0x5df5, 0x9970, 0xaaa5, 0x2e4, 0x6ea5, 0x1, 0x1);
        gbc.writeMem(0x4519, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5df5);
        EXPECT(gbc.pc(), 0x451b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0022
        gbc.setState(0xc5eb, 0x150e, 0x8470, 0xb24e, 0xe4b, 0xe520, 0x0, 0x0);
        gbc.writeMem(0xc5eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x150e);
        EXPECT(gbc.pc(), 0xc5ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5eb), 0xcb);
        EXPECT(gbc.readMem(0xc5ec), 0xe8);
        // CB E8 0024
        gbc.setState(0x856d, 0xc9dd, 0x900, 0x5b92, 0xb838, 0xa5b1, 0x1, 0x1);
        gbc.writeMem(0x856d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc9dd);
        EXPECT(gbc.pc(), 0x856f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856d), 0xcb);
        EXPECT(gbc.readMem(0x856e), 0xe8);
        // CB E8 0025
        gbc.setState(0x51e9, 0x65da, 0xfb90, 0x605c, 0xcf79, 0x4364, 0x0, 0x1);
        gbc.writeMem(0x51e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x65da);
        EXPECT(gbc.pc(), 0x51eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0026
        gbc.setState(0x137a, 0xd5cd, 0xfa80, 0x932b, 0x29f6, 0x2fbd, 0x1, 0x1);
        gbc.writeMem(0x137a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd5cd);
        EXPECT(gbc.pc(), 0x137c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0027
        gbc.setState(0x8a9a, 0x8012, 0x12b0, 0x8e48, 0xe020, 0xaeef, 0x0, 0x0);
        gbc.writeMem(0x8a9a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8012);
        EXPECT(gbc.pc(), 0x8a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9a), 0xcb);
        EXPECT(gbc.readMem(0x8a9b), 0xe8);
        // CB E8 0028
        gbc.setState(0xd5de, 0xe5e3, 0xe170, 0x3006, 0xc125, 0x6b83, 0x0, 0x1);
        gbc.writeMem(0xd5de, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe5e3);
        EXPECT(gbc.pc(), 0xd5e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5de), 0xcb);
        EXPECT(gbc.readMem(0xd5df), 0xe8);
        // CB E8 0029
        gbc.setState(0x1925, 0xb5ef, 0x40a0, 0xd9e8, 0xbe0b, 0x2e5, 0x0, 0x0);
        gbc.writeMem(0x1925, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb5ef);
        EXPECT(gbc.pc(), 0x1927);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 002A
        gbc.setState(0x58c4, 0xba5d, 0x9050, 0xe7bf, 0x330a, 0xee49, 0x0, 0x0);
        gbc.writeMem(0x58c4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xba5d);
        EXPECT(gbc.pc(), 0x58c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 002C
        gbc.setState(0x2c51, 0xdef7, 0x440, 0xcb45, 0x82e7, 0x42ed, 0x0, 0x0);
        gbc.writeMem(0x2c51, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdef7);
        EXPECT(gbc.pc(), 0x2c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 002D
        gbc.setState(0xea62, 0xc9c7, 0x90b0, 0xe795, 0xc319, 0x1b58, 0x0, 0x0);
        gbc.writeMem(0xea62, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc9c7);
        EXPECT(gbc.pc(), 0xea64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea62), 0xcb);
        EXPECT(gbc.readMem(0xea63), 0xe8);
        // CB E8 002E
        gbc.setState(0xab20, 0xc65d, 0x8cc0, 0x907f, 0xe3de, 0xcaf3, 0x1, 0x1);
        gbc.writeMem(0xab20, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc65d);
        EXPECT(gbc.pc(), 0xab22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab20), 0xcb);
        EXPECT(gbc.readMem(0xab21), 0xe8);
        // CB E8 002F
        gbc.setState(0x29f6, 0x4aa1, 0x1ba0, 0x26bc, 0xcea0, 0x80a1, 0x0, 0x1);
        gbc.writeMem(0x29f6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4aa1);
        EXPECT(gbc.pc(), 0x29f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0030
        gbc.setState(0x623e, 0xe8a9, 0x60e0, 0x1887, 0xd1c, 0x6beb, 0x0, 0x1);
        gbc.writeMem(0x623e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe8a9);
        EXPECT(gbc.pc(), 0x6240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0031
        gbc.setState(0x5e6, 0xe433, 0xf130, 0x2b6d, 0x81df, 0x9a9b, 0x1, 0x0);
        gbc.writeMem(0x5e6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe433);
        EXPECT(gbc.pc(), 0x5e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0032
        gbc.setState(0xe666, 0x59fd, 0xf150, 0x692d, 0x336f, 0x7057, 0x1, 0x0);
        gbc.writeMem(0xe666, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x59fd);
        EXPECT(gbc.pc(), 0xe668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe666), 0xcb);
        EXPECT(gbc.readMem(0xe667), 0xe8);
        // CB E8 0033
        gbc.setState(0x7a0b, 0x1e66, 0x7bb0, 0x845, 0x9e6b, 0x6615, 0x0, 0x0);
        gbc.writeMem(0x7a0b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1e66);
        EXPECT(gbc.pc(), 0x7a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0034
        gbc.setState(0x56da, 0xd896, 0xcf30, 0x3a34, 0x1ddd, 0xb39, 0x1, 0x1);
        gbc.writeMem(0x56da, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd896);
        EXPECT(gbc.pc(), 0x56dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0035
        gbc.setState(0xd514, 0xe44b, 0x3870, 0x88a7, 0x32d5, 0xb5c0, 0x0, 0x0);
        gbc.writeMem(0xd514, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe44b);
        EXPECT(gbc.pc(), 0xd516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd514), 0xcb);
        EXPECT(gbc.readMem(0xd515), 0xe8);
        // CB E8 0036
        gbc.setState(0xa5e5, 0x1425, 0xdb40, 0x9ae0, 0xcbe1, 0x6b48, 0x0, 0x1);
        gbc.writeMem(0xa5e5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1425);
        EXPECT(gbc.pc(), 0xa5e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e5), 0xcb);
        EXPECT(gbc.readMem(0xa5e6), 0xe8);
        // CB E8 0037
        gbc.setState(0x33ef, 0xb871, 0x6600, 0xe655, 0x9c22, 0x257, 0x0, 0x0);
        gbc.writeMem(0x33ef, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb871);
        EXPECT(gbc.pc(), 0x33f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0038
        gbc.setState(0x4f15, 0x66ea, 0xd990, 0x27ac, 0x291b, 0xf3a1, 0x1, 0x0);
        gbc.writeMem(0x4f15, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x66ea);
        EXPECT(gbc.pc(), 0x4f17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0039
        gbc.setState(0x9320, 0xb25b, 0x1220, 0xe9c, 0x819d, 0x8f03, 0x1, 0x1);
        gbc.writeMem(0x9320, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb25b);
        EXPECT(gbc.pc(), 0x9322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9320), 0xcb);
        EXPECT(gbc.readMem(0x9321), 0xe8);
        // CB E8 003A
        gbc.setState(0xbee2, 0xef37, 0xb0a0, 0x9924, 0xa636, 0x6fca, 0x0, 0x0);
        gbc.writeMem(0xbee2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xef37);
        EXPECT(gbc.pc(), 0xbee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee2), 0xcb);
        EXPECT(gbc.readMem(0xbee3), 0xe8);
        // CB E8 003B
        gbc.setState(0x1eae, 0xec0e, 0xd030, 0x63a8, 0x1763, 0x6ec3, 0x1, 0x1);
        gbc.writeMem(0x1eae, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xec0e);
        EXPECT(gbc.pc(), 0x1eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 003C
        gbc.setState(0x209b, 0x596, 0x6a30, 0xb10a, 0x9ce6, 0x6490, 0x1, 0x0);
        gbc.writeMem(0x209b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x596);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 003D
        gbc.setState(0xa621, 0x9aef, 0xe380, 0x8b7, 0x873, 0x735b, 0x0, 0x0);
        gbc.writeMem(0xa621, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9aef);
        EXPECT(gbc.pc(), 0xa623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa621), 0xcb);
        EXPECT(gbc.readMem(0xa622), 0xe8);
        // CB E8 003E
        gbc.setState(0xb31b, 0xcdc4, 0xdc20, 0x8539, 0xae46, 0xa26b, 0x1, 0x0);
        gbc.writeMem(0xb31b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcdc4);
        EXPECT(gbc.pc(), 0xb31d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31b), 0xcb);
        EXPECT(gbc.readMem(0xb31c), 0xe8);
        // CB E8 003F
        gbc.setState(0x8766, 0x3f12, 0xa0d0, 0x415e, 0xf443, 0xc57c, 0x1, 0x0);
        gbc.writeMem(0x8766, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3f12);
        EXPECT(gbc.pc(), 0x8768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8766), 0xcb);
        EXPECT(gbc.readMem(0x8767), 0xe8);
        // CB E8 0040
        gbc.setState(0x5d98, 0x12ce, 0xde70, 0x239, 0x82a9, 0xb5af, 0x1, 0x1);
        gbc.writeMem(0x5d98, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x12ce);
        EXPECT(gbc.pc(), 0x5d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0041
        gbc.setState(0xbc5c, 0xc7ae, 0xb240, 0xb77e, 0x7b5c, 0xc937, 0x0, 0x0);
        gbc.writeMem(0xbc5c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc7ae);
        EXPECT(gbc.pc(), 0xbc5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5c), 0xcb);
        EXPECT(gbc.readMem(0xbc5d), 0xe8);
        // CB E8 0042
        gbc.setState(0x2cdb, 0xc6ff, 0x18e0, 0x5c89, 0xe7a0, 0x4cc2, 0x1, 0x0);
        gbc.writeMem(0x2cdb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc6ff);
        EXPECT(gbc.pc(), 0x2cdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0044
        gbc.setState(0x37ce, 0x1b02, 0x2620, 0x70e, 0x5d7d, 0xc777, 0x1, 0x1);
        gbc.writeMem(0x37ce, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1b02);
        EXPECT(gbc.pc(), 0x37d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0045
        gbc.setState(0xe4e7, 0xb11f, 0xdb50, 0xcf66, 0xfc3f, 0x499, 0x1, 0x1);
        gbc.writeMem(0xe4e7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb11f);
        EXPECT(gbc.pc(), 0xe4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e7), 0xcb);
        EXPECT(gbc.readMem(0xe4e8), 0xe8);
        // CB E8 0046
        gbc.setState(0x6d3c, 0x761c, 0xebc0, 0xd323, 0x4f7b, 0x7986, 0x1, 0x1);
        gbc.writeMem(0x6d3c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x761c);
        EXPECT(gbc.pc(), 0x6d3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0047
        gbc.setState(0x4084, 0x1f48, 0x5440, 0x5ea0, 0xbbb1, 0xdbca, 0x0, 0x1);
        gbc.writeMem(0x4084, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1f48);
        EXPECT(gbc.pc(), 0x4086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0049
        gbc.setState(0x2e01, 0x2aec, 0xf0d0, 0x8130, 0x68a0, 0x3c13, 0x1, 0x0);
        gbc.writeMem(0x2e01, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2aec);
        EXPECT(gbc.pc(), 0x2e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 004A
        gbc.setState(0xf4e, 0x1539, 0x6cc0, 0x9bc4, 0x712a, 0xacff, 0x0, 0x0);
        gbc.writeMem(0xf4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1539);
        EXPECT(gbc.pc(), 0xf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 004C
        gbc.setState(0x9b5b, 0xc038, 0xf840, 0xd0f0, 0x8186, 0x2a3d, 0x0, 0x1);
        gbc.writeMem(0x9b5b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc038);
        EXPECT(gbc.pc(), 0x9b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5b), 0xcb);
        EXPECT(gbc.readMem(0x9b5c), 0xe8);
        // CB E8 004D
        gbc.setState(0x723b, 0xa9e, 0x43a0, 0xf0f6, 0xc209, 0x904, 0x1, 0x0);
        gbc.writeMem(0x723b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa9e);
        EXPECT(gbc.pc(), 0x723d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 004E
        gbc.setState(0xd26b, 0xc367, 0xb1c0, 0x882d, 0xe25d, 0xdfb0, 0x1, 0x1);
        gbc.writeMem(0xd26b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc367);
        EXPECT(gbc.pc(), 0xd26d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26b), 0xcb);
        EXPECT(gbc.readMem(0xd26c), 0xe8);
        // CB E8 004F
        gbc.setState(0x36d6, 0x7dbc, 0xd530, 0x3200, 0x40aa, 0xa415, 0x0, 0x1);
        gbc.writeMem(0x36d6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7dbc);
        EXPECT(gbc.pc(), 0x36d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0050
        gbc.setState(0x5cc2, 0xc5c1, 0x88c0, 0xb8ff, 0x43d5, 0x98d0, 0x1, 0x0);
        gbc.writeMem(0x5cc2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc5c1);
        EXPECT(gbc.pc(), 0x5cc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0051
        gbc.setState(0x2ee4, 0xbcf9, 0x5860, 0x4d46, 0xd9e, 0x71a5, 0x0, 0x1);
        gbc.writeMem(0x2ee4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbcf9);
        EXPECT(gbc.pc(), 0x2ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0052
        gbc.setState(0x3e86, 0x6f7f, 0xdd70, 0x15b3, 0x1322, 0xc353, 0x1, 0x0);
        gbc.writeMem(0x3e86, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6f7f);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0053
        gbc.setState(0xef6d, 0x3895, 0x40, 0xc90, 0x48cf, 0xdd82, 0x0, 0x1);
        gbc.writeMem(0xef6d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3895);
        EXPECT(gbc.pc(), 0xef6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6d), 0xcb);
        EXPECT(gbc.readMem(0xef6e), 0xe8);
        // CB E8 0054
        gbc.setState(0xb262, 0xf840, 0xac0, 0x2375, 0xa15b, 0x23d6, 0x1, 0x0);
        gbc.writeMem(0xb262, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf840);
        EXPECT(gbc.pc(), 0xb264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb262), 0xcb);
        EXPECT(gbc.readMem(0xb263), 0xe8);
        // CB E8 0055
        gbc.setState(0x5575, 0x7470, 0xaba0, 0x405b, 0x1ef1, 0xc9b8, 0x0, 0x0);
        gbc.writeMem(0x5575, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7470);
        EXPECT(gbc.pc(), 0x5577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0056
        gbc.setState(0x3121, 0xaae4, 0xfb50, 0x6870, 0xb1a8, 0x3fc1, 0x0, 0x1);
        gbc.writeMem(0x3121, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xaae4);
        EXPECT(gbc.pc(), 0x3123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0057
        gbc.setState(0x7e97, 0x8161, 0xa8a0, 0x583e, 0xffeb, 0x28ba, 0x0, 0x1);
        gbc.writeMem(0x7e97, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8161);
        EXPECT(gbc.pc(), 0x7e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0058
        gbc.setState(0x10bb, 0x7288, 0xf950, 0x62fa, 0xe3a6, 0xb8d9, 0x0, 0x1);
        gbc.writeMem(0x10bb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7288);
        EXPECT(gbc.pc(), 0x10bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0059
        gbc.setState(0x97f0, 0xe81d, 0x88b0, 0x7d16, 0xb961, 0x5d1f, 0x0, 0x1);
        gbc.writeMem(0x97f0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe81d);
        EXPECT(gbc.pc(), 0x97f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f0), 0xcb);
        EXPECT(gbc.readMem(0x97f1), 0xe8);
        // CB E8 005A
        gbc.setState(0x6ad2, 0xb1f1, 0x5d20, 0x94ea, 0xa8e, 0xab29, 0x1, 0x0);
        gbc.writeMem(0x6ad2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0x6ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 005B
        gbc.setState(0x71f0, 0x746e, 0x8ac0, 0xd712, 0xdc66, 0x6bb8, 0x0, 0x1);
        gbc.writeMem(0x71f0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x746e);
        EXPECT(gbc.pc(), 0x71f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 005C
        gbc.setState(0xaf0, 0xcfc4, 0xe0f0, 0x49, 0x5bc8, 0x9b32, 0x1, 0x0);
        gbc.writeMem(0xaf0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcfc4);
        EXPECT(gbc.pc(), 0xaf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 005D
        gbc.setState(0x5dd6, 0xa66c, 0xaf0, 0x7450, 0x598d, 0x6f8b, 0x0, 0x0);
        gbc.writeMem(0x5dd6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa66c);
        EXPECT(gbc.pc(), 0x5dd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 005E
        gbc.setState(0xd5b6, 0xfb49, 0xf8a0, 0xc9b4, 0x69e9, 0x138c, 0x0, 0x0);
        gbc.writeMem(0xd5b6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfb49);
        EXPECT(gbc.pc(), 0xd5b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b6), 0xcb);
        EXPECT(gbc.readMem(0xd5b7), 0xe8);
        // CB E8 005F
        gbc.setState(0x858a, 0xe305, 0xe110, 0x599f, 0x2b61, 0x1af8, 0x0, 0x1);
        gbc.writeMem(0x858a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe305);
        EXPECT(gbc.pc(), 0x858c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858a), 0xcb);
        EXPECT(gbc.readMem(0x858b), 0xe8);
        // CB E8 0060
        gbc.setState(0x1b17, 0x4242, 0x6660, 0x45c9, 0x8e88, 0xeae, 0x0, 0x1);
        gbc.writeMem(0x1b17, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4242);
        EXPECT(gbc.pc(), 0x1b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0061
        gbc.setState(0x1971, 0x6c40, 0xfc30, 0x75d3, 0x9951, 0x840d, 0x1, 0x1);
        gbc.writeMem(0x1971, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6c40);
        EXPECT(gbc.pc(), 0x1973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0062
        gbc.setState(0x2708, 0xa7dd, 0x9580, 0xfe16, 0x6d99, 0xe25a, 0x1, 0x0);
        gbc.writeMem(0x2708, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa7dd);
        EXPECT(gbc.pc(), 0x270a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0063
        gbc.setState(0x6b46, 0xa335, 0x11c0, 0x1e42, 0xaf46, 0xbbff, 0x1, 0x1);
        gbc.writeMem(0x6b46, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa335);
        EXPECT(gbc.pc(), 0x6b48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0064
        gbc.setState(0xe4a4, 0x962e, 0xe6b0, 0x3fb3, 0x1d12, 0x6209, 0x1, 0x0);
        gbc.writeMem(0xe4a4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x962e);
        EXPECT(gbc.pc(), 0xe4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a4), 0xcb);
        EXPECT(gbc.readMem(0xe4a5), 0xe8);
        // CB E8 0065
        gbc.setState(0x28b0, 0x8bc6, 0x37f0, 0xfa52, 0x520d, 0x6650, 0x1, 0x0);
        gbc.writeMem(0x28b0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x8bc6);
        EXPECT(gbc.pc(), 0x28b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0066
        gbc.setState(0x87, 0x5d4f, 0x38f0, 0x43bc, 0x94fb, 0x1873, 0x1, 0x0);
        gbc.writeMem(0x87, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5d4f);
        EXPECT(gbc.pc(), 0x89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0067
        gbc.setState(0x17ea, 0x697a, 0xf900, 0x2278, 0x4e97, 0xbdab, 0x1, 0x0);
        gbc.writeMem(0x17ea, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x697a);
        EXPECT(gbc.pc(), 0x17ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0068
        gbc.setState(0x529f, 0x10ea, 0xd300, 0x2d95, 0x9902, 0x8b7a, 0x0, 0x1);
        gbc.writeMem(0x529f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x10ea);
        EXPECT(gbc.pc(), 0x52a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0069
        gbc.setState(0x25da, 0x47ff, 0xac80, 0x4aac, 0xc07a, 0x1484, 0x0, 0x0);
        gbc.writeMem(0x25da, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x47ff);
        EXPECT(gbc.pc(), 0x25dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 006A
        gbc.setState(0x4b2d, 0xee75, 0xfe30, 0xd7d2, 0x1087, 0x2e83, 0x1, 0x1);
        gbc.writeMem(0x4b2d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xee75);
        EXPECT(gbc.pc(), 0x4b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 006B
        gbc.setState(0xdf11, 0x3137, 0x8190, 0xf752, 0xda3a, 0xb43d, 0x1, 0x1);
        gbc.writeMem(0xdf11, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3137);
        EXPECT(gbc.pc(), 0xdf13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf11), 0xcb);
        EXPECT(gbc.readMem(0xdf12), 0xe8);
        // CB E8 006C
        gbc.setState(0xb53d, 0xbf90, 0xe680, 0xc106, 0xa8ff, 0xb243, 0x1, 0x1);
        gbc.writeMem(0xb53d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbf90);
        EXPECT(gbc.pc(), 0xb53f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb53d), 0xcb);
        EXPECT(gbc.readMem(0xb53e), 0xe8);
        // CB E8 006D
        gbc.setState(0x4165, 0x3770, 0xa7a0, 0xb054, 0x1208, 0xcb8b, 0x0, 0x0);
        gbc.writeMem(0x4165, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3770);
        EXPECT(gbc.pc(), 0x4167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 006E
        gbc.setState(0xb4ac, 0x13fd, 0x3020, 0xb29a, 0x1db1, 0x5003, 0x0, 0x1);
        gbc.writeMem(0xb4ac, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x13fd);
        EXPECT(gbc.pc(), 0xb4ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ac), 0xcb);
        EXPECT(gbc.readMem(0xb4ad), 0xe8);
        // CB E8 006F
        gbc.setState(0x4e4b, 0x7ead, 0xa3f0, 0xf84c, 0xa8ac, 0x4701, 0x0, 0x0);
        gbc.writeMem(0x4e4b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7ead);
        EXPECT(gbc.pc(), 0x4e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0070
        gbc.setState(0xd655, 0xac24, 0x4ad0, 0x9811, 0x572, 0xd823, 0x1, 0x0);
        gbc.writeMem(0xd655, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xac24);
        EXPECT(gbc.pc(), 0xd657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd655), 0xcb);
        EXPECT(gbc.readMem(0xd656), 0xe8);
        // CB E8 0071
        gbc.setState(0xd2c3, 0xb482, 0x2000, 0x80b6, 0xc730, 0xd287, 0x1, 0x1);
        gbc.writeMem(0xd2c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb482);
        EXPECT(gbc.pc(), 0xd2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c3), 0xcb);
        EXPECT(gbc.readMem(0xd2c4), 0xe8);
        // CB E8 0072
        gbc.setState(0x7ae5, 0x5876, 0x84d0, 0xf03e, 0x961c, 0x7c6a, 0x0, 0x1);
        gbc.writeMem(0x7ae5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5876);
        EXPECT(gbc.pc(), 0x7ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0073
        gbc.setState(0xdeaf, 0xb586, 0x620, 0x85c, 0x9dbf, 0x6c9b, 0x0, 0x0);
        gbc.writeMem(0xdeaf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb586);
        EXPECT(gbc.pc(), 0xdeb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeaf), 0xcb);
        EXPECT(gbc.readMem(0xdeb0), 0xe8);
        // CB E8 0074
        gbc.setState(0xb2fe, 0xfa8b, 0xb450, 0x51e2, 0xd274, 0x83bf, 0x0, 0x1);
        gbc.writeMem(0xb2fe, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfa8b);
        EXPECT(gbc.pc(), 0xb300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2fe), 0xcb);
        EXPECT(gbc.readMem(0xb2ff), 0xe8);
        // CB E8 0075
        gbc.setState(0xec53, 0x4b4, 0x1f00, 0x7d0c, 0xa90a, 0xfc11, 0x1, 0x1);
        gbc.writeMem(0xec53, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4b4);
        EXPECT(gbc.pc(), 0xec55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec53), 0xcb);
        EXPECT(gbc.readMem(0xec54), 0xe8);
        // CB E8 0076
        gbc.setState(0x8e9, 0x27db, 0x77c0, 0x3fbd, 0xb219, 0xe54e, 0x1, 0x0);
        gbc.writeMem(0x8e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x27db);
        EXPECT(gbc.pc(), 0x8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0077
        gbc.setState(0xd530, 0x8fd, 0x1820, 0xeedd, 0xbd83, 0xc921, 0x1, 0x1);
        gbc.writeMem(0xd530, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8fd);
        EXPECT(gbc.pc(), 0xd532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd530), 0xcb);
        EXPECT(gbc.readMem(0xd531), 0xe8);
        // CB E8 0078
        gbc.setState(0xd99b, 0x7a91, 0x1270, 0x766e, 0xa6ad, 0x484c, 0x0, 0x1);
        gbc.writeMem(0xd99b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7a91);
        EXPECT(gbc.pc(), 0xd99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd99b), 0xcb);
        EXPECT(gbc.readMem(0xd99c), 0xe8);
        // CB E8 0079
        gbc.setState(0xa02f, 0x839a, 0x4120, 0x281f, 0x28e4, 0x174e, 0x1, 0x0);
        gbc.writeMem(0xa02f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x839a);
        EXPECT(gbc.pc(), 0xa031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02f), 0xcb);
        EXPECT(gbc.readMem(0xa030), 0xe8);
        // CB E8 007A
        gbc.setState(0xbab6, 0x421e, 0x1020, 0x6c55, 0x5b8c, 0xd5ad, 0x0, 0x1);
        gbc.writeMem(0xbab6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x421e);
        EXPECT(gbc.pc(), 0xbab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab6), 0xcb);
        EXPECT(gbc.readMem(0xbab7), 0xe8);
        // CB E8 007B
        gbc.setState(0x5b26, 0xd2b9, 0x6c30, 0xac51, 0x36f4, 0x40bc, 0x0, 0x1);
        gbc.writeMem(0x5b26, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd2b9);
        EXPECT(gbc.pc(), 0x5b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 007C
        gbc.setState(0x6cc8, 0x78ad, 0x8950, 0x4373, 0x9553, 0x66c7, 0x1, 0x0);
        gbc.writeMem(0x6cc8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x78ad);
        EXPECT(gbc.pc(), 0x6cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 007D
        gbc.setState(0x1d97, 0xa55b, 0xc770, 0xe4a3, 0x40dd, 0x1aa0, 0x0, 0x0);
        gbc.writeMem(0x1d97, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa55b);
        EXPECT(gbc.pc(), 0x1d99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 007E
        gbc.setState(0x5c02, 0xadb7, 0xb0b0, 0x8d6a, 0x6235, 0x72f6, 0x0, 0x0);
        gbc.writeMem(0x5c02, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xadb7);
        EXPECT(gbc.pc(), 0x5c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0080
        gbc.setState(0x6640, 0x3ba2, 0x9cc0, 0x6d33, 0xaf79, 0xfaef, 0x0, 0x0);
        gbc.writeMem(0x6640, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3ba2);
        EXPECT(gbc.pc(), 0x6642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0081
        gbc.setState(0x87f, 0x4a42, 0x7b80, 0xb06b, 0x43ed, 0xe742, 0x1, 0x0);
        gbc.writeMem(0x87f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4a42);
        EXPECT(gbc.pc(), 0x881);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0082
        gbc.setState(0xb6c9, 0xac26, 0x9310, 0x8261, 0xa7c1, 0xc1d0, 0x0, 0x1);
        gbc.writeMem(0xb6c9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xac26);
        EXPECT(gbc.pc(), 0xb6cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c9), 0xcb);
        EXPECT(gbc.readMem(0xb6ca), 0xe8);
        // CB E8 0083
        gbc.setState(0x889f, 0x61f0, 0x5470, 0x15dd, 0x2a9, 0xa974, 0x0, 0x1);
        gbc.writeMem(0x889f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x61f0);
        EXPECT(gbc.pc(), 0x88a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x889f), 0xcb);
        EXPECT(gbc.readMem(0x88a0), 0xe8);
        // CB E8 0084
        gbc.setState(0x4650, 0x137c, 0xbae0, 0x81c6, 0xa7a8, 0x4734, 0x1, 0x1);
        gbc.writeMem(0x4650, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x137c);
        EXPECT(gbc.pc(), 0x4652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0085
        gbc.setState(0x8fd1, 0x4e08, 0x7fc0, 0x9b42, 0xd0fc, 0x6d34, 0x1, 0x1);
        gbc.writeMem(0x8fd1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4e08);
        EXPECT(gbc.pc(), 0x8fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd1), 0xcb);
        EXPECT(gbc.readMem(0x8fd2), 0xe8);
        // CB E8 0086
        gbc.setState(0xd10c, 0xf6d7, 0xcd40, 0x5607, 0xa681, 0x759, 0x0, 0x1);
        gbc.writeMem(0xd10c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf6d7);
        EXPECT(gbc.pc(), 0xd10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd10c), 0xcb);
        EXPECT(gbc.readMem(0xd10d), 0xe8);
        // CB E8 0087
        gbc.setState(0x69cd, 0xe467, 0xbfe0, 0xcfd4, 0xfe90, 0x7e1b, 0x1, 0x1);
        gbc.writeMem(0x69cd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xe467);
        EXPECT(gbc.pc(), 0x69cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0088
        gbc.setState(0xefb7, 0xae68, 0x7ff0, 0xe3b4, 0xe843, 0xe137, 0x1, 0x0);
        gbc.writeMem(0xefb7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xae68);
        EXPECT(gbc.pc(), 0xefb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefb7), 0xcb);
        EXPECT(gbc.readMem(0xefb8), 0xe8);
        // CB E8 008A
        gbc.setState(0x11a0, 0x395e, 0x31e0, 0xd6b7, 0xc82e, 0x16a3, 0x0, 0x0);
        gbc.writeMem(0x11a0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x395e);
        EXPECT(gbc.pc(), 0x11a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 008B
        gbc.setState(0x9d37, 0xeed7, 0x1e0, 0x30d7, 0xa3ae, 0x471e, 0x0, 0x0);
        gbc.writeMem(0x9d37, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xeed7);
        EXPECT(gbc.pc(), 0x9d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d37), 0xcb);
        EXPECT(gbc.readMem(0x9d38), 0xe8);
        // CB E8 008C
        gbc.setState(0xaf88, 0xeaf0, 0xa610, 0x8412, 0x1ac0, 0x3841, 0x0, 0x0);
        gbc.writeMem(0xaf88, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xeaf0);
        EXPECT(gbc.pc(), 0xaf8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf88), 0xcb);
        EXPECT(gbc.readMem(0xaf89), 0xe8);
        // CB E8 008D
        gbc.setState(0xa8c7, 0x4a11, 0xd780, 0x443b, 0x2279, 0x51ac, 0x0, 0x1);
        gbc.writeMem(0xa8c7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4a11);
        EXPECT(gbc.pc(), 0xa8c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c7), 0xcb);
        EXPECT(gbc.readMem(0xa8c8), 0xe8);
        // CB E8 008E
        gbc.setState(0x4500, 0xeb53, 0x5050, 0x2ab3, 0xcc04, 0x643, 0x1, 0x1);
        gbc.writeMem(0x4500, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xeb53);
        EXPECT(gbc.pc(), 0x4502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 008F
        gbc.setState(0x3a69, 0xaf13, 0x6180, 0x9a64, 0x82d3, 0xd0ae, 0x0, 0x1);
        gbc.writeMem(0x3a69, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xaf13);
        EXPECT(gbc.pc(), 0x3a6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0090
        gbc.setState(0x33ce, 0x453d, 0xc3a0, 0xb58a, 0x8b05, 0x82fe, 0x1, 0x1);
        gbc.writeMem(0x33ce, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x453d);
        EXPECT(gbc.pc(), 0x33d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0091
        gbc.setState(0x6fa1, 0xe9fc, 0x1ed0, 0xb227, 0xc30a, 0x58f0, 0x0, 0x0);
        gbc.writeMem(0x6fa1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe9fc);
        EXPECT(gbc.pc(), 0x6fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0092
        gbc.setState(0xae42, 0x1550, 0xa350, 0xd7fd, 0xcc63, 0xff6d, 0x0, 0x1);
        gbc.writeMem(0xae42, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1550);
        EXPECT(gbc.pc(), 0xae44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae42), 0xcb);
        EXPECT(gbc.readMem(0xae43), 0xe8);
        // CB E8 0093
        gbc.setState(0x85e9, 0x7799, 0x57b0, 0xf61b, 0xedd9, 0x47df, 0x0, 0x0);
        gbc.writeMem(0x85e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7799);
        EXPECT(gbc.pc(), 0x85eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e9), 0xcb);
        EXPECT(gbc.readMem(0x85ea), 0xe8);
        // CB E8 0094
        gbc.setState(0x905b, 0xf9a2, 0x6cb0, 0x8ba9, 0x46fc, 0xf995, 0x1, 0x0);
        gbc.writeMem(0x905b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf9a2);
        EXPECT(gbc.pc(), 0x905d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x905b), 0xcb);
        EXPECT(gbc.readMem(0x905c), 0xe8);
        // CB E8 0095
        gbc.setState(0xa6b, 0x80b2, 0xb7f0, 0xe2ec, 0xd96d, 0x54e0, 0x1, 0x1);
        gbc.writeMem(0xa6b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x80b2);
        EXPECT(gbc.pc(), 0xa6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0096
        gbc.setState(0x20bf, 0x715a, 0x5c70, 0xfce3, 0xe2f1, 0x5fa2, 0x0, 0x1);
        gbc.writeMem(0x20bf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x715a);
        EXPECT(gbc.pc(), 0x20c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0097
        gbc.setState(0x8f2c, 0x4b4d, 0xa650, 0x15df, 0x2602, 0x33f7, 0x1, 0x0);
        gbc.writeMem(0x8f2c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4b4d);
        EXPECT(gbc.pc(), 0x8f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f2c), 0xcb);
        EXPECT(gbc.readMem(0x8f2d), 0xe8);
        // CB E8 0099
        gbc.setState(0x4a25, 0x3e09, 0xc590, 0x1e9, 0x515, 0xf0e6, 0x0, 0x0);
        gbc.writeMem(0x4a25, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3e09);
        EXPECT(gbc.pc(), 0x4a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 009A
        gbc.setState(0xcf7d, 0x1877, 0x80, 0xe5c9, 0xd658, 0x24ab, 0x0, 0x1);
        gbc.writeMem(0xcf7d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1877);
        EXPECT(gbc.pc(), 0xcf7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf7d), 0xcb);
        EXPECT(gbc.readMem(0xcf7e), 0xe8);
        // CB E8 009C
        gbc.setState(0xa39, 0xbe71, 0x3a0, 0x20e5, 0x251d, 0x11da, 0x1, 0x0);
        gbc.writeMem(0xa39, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbe71);
        EXPECT(gbc.pc(), 0xa3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 009D
        gbc.setState(0xe411, 0xdb6f, 0x9780, 0x93c4, 0x990f, 0x58ac, 0x0, 0x1);
        gbc.writeMem(0xe411, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdb6f);
        EXPECT(gbc.pc(), 0xe413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe411), 0xcb);
        EXPECT(gbc.readMem(0xe412), 0xe8);
        // CB E8 009E
        gbc.setState(0xd29a, 0x5c1b, 0x29e0, 0x538e, 0x2453, 0x6ea4, 0x0, 0x1);
        gbc.writeMem(0xd29a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5c1b);
        EXPECT(gbc.pc(), 0xd29c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29a), 0xcb);
        EXPECT(gbc.readMem(0xd29b), 0xe8);
        // CB E8 009F
        gbc.setState(0x423b, 0xb3e9, 0x65f0, 0x5057, 0xb1a0, 0xe28b, 0x1, 0x0);
        gbc.writeMem(0x423b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb3e9);
        EXPECT(gbc.pc(), 0x423d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00A1
        gbc.setState(0x67d, 0xf0c8, 0x12c0, 0x5a8a, 0xa91f, 0xb103, 0x1, 0x0);
        gbc.writeMem(0x67d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf0c8);
        EXPECT(gbc.pc(), 0x67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00A2
        gbc.setState(0x97c6, 0x6459, 0x1850, 0x6476, 0x3111, 0xfa03, 0x1, 0x1);
        gbc.writeMem(0x97c6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6459);
        EXPECT(gbc.pc(), 0x97c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c6), 0xcb);
        EXPECT(gbc.readMem(0x97c7), 0xe8);
        // CB E8 00A3
        gbc.setState(0x7f73, 0xb5d7, 0xcf0, 0x207d, 0x6655, 0x365b, 0x0, 0x1);
        gbc.writeMem(0x7f73, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb5d7);
        EXPECT(gbc.pc(), 0x7f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00A4
        gbc.setState(0x98bc, 0xbbe0, 0xb2a0, 0x5ded, 0xb708, 0x3297, 0x1, 0x0);
        gbc.writeMem(0x98bc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbbe0);
        EXPECT(gbc.pc(), 0x98be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98bc), 0xcb);
        EXPECT(gbc.readMem(0x98bd), 0xe8);
        // CB E8 00A5
        gbc.setState(0x52d7, 0x7086, 0x99e0, 0x9191, 0x77c8, 0x164b, 0x0, 0x1);
        gbc.writeMem(0x52d7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7086);
        EXPECT(gbc.pc(), 0x52d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00A6
        gbc.setState(0x9d78, 0x2b3, 0x96a0, 0xc336, 0x6bf, 0xc6c, 0x0, 0x0);
        gbc.writeMem(0x9d78, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2b3);
        EXPECT(gbc.pc(), 0x9d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d78), 0xcb);
        EXPECT(gbc.readMem(0x9d79), 0xe8);
        // CB E8 00A7
        gbc.setState(0x1d02, 0x68fd, 0x9620, 0xe943, 0x4b9c, 0xd85b, 0x1, 0x1);
        gbc.writeMem(0x1d02, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x68fd);
        EXPECT(gbc.pc(), 0x1d04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00A8
        gbc.setState(0x39cf, 0x8a5e, 0x2300, 0xe2c8, 0x9189, 0x2dbb, 0x0, 0x1);
        gbc.writeMem(0x39cf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8a5e);
        EXPECT(gbc.pc(), 0x39d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00A9
        gbc.setState(0xb236, 0x231c, 0x5220, 0xf25b, 0x17a2, 0xf6f9, 0x1, 0x0);
        gbc.writeMem(0xb236, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x231c);
        EXPECT(gbc.pc(), 0xb238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb236), 0xcb);
        EXPECT(gbc.readMem(0xb237), 0xe8);
        // CB E8 00AA
        gbc.setState(0xe232, 0xa3c7, 0xf590, 0x5a3, 0xb436, 0x5649, 0x0, 0x1);
        gbc.writeMem(0xe232, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa3c7);
        EXPECT(gbc.pc(), 0xe234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe232), 0xcb);
        EXPECT(gbc.readMem(0xe233), 0xe8);
        // CB E8 00AB
        gbc.setState(0x601, 0xe4a6, 0x2cc0, 0x405c, 0xda56, 0x2cf, 0x0, 0x0);
        gbc.writeMem(0x601, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe4a6);
        EXPECT(gbc.pc(), 0x603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00AD
        gbc.setState(0x9a70, 0x97c3, 0x4380, 0x276, 0x37e, 0x2627, 0x1, 0x0);
        gbc.writeMem(0x9a70, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x97c3);
        EXPECT(gbc.pc(), 0x9a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a70), 0xcb);
        EXPECT(gbc.readMem(0x9a71), 0xe8);
        // CB E8 00AE
        gbc.setState(0xb06e, 0x13a1, 0x5970, 0x202e, 0x8f35, 0x812f, 0x0, 0x1);
        gbc.writeMem(0xb06e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x13a1);
        EXPECT(gbc.pc(), 0xb070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06e), 0xcb);
        EXPECT(gbc.readMem(0xb06f), 0xe8);
        // CB E8 00AF
        gbc.setState(0x9fcd, 0x3124, 0xe0b0, 0xcd8b, 0x9122, 0x8e3b, 0x1, 0x1);
        gbc.writeMem(0x9fcd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3124);
        EXPECT(gbc.pc(), 0x9fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fcd), 0xcb);
        EXPECT(gbc.readMem(0x9fce), 0xe8);
        // CB E8 00B0
        gbc.setState(0xc3b1, 0xb53e, 0xde70, 0xd9cb, 0x42dc, 0x8f86, 0x1, 0x0);
        gbc.writeMem(0xc3b1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb53e);
        EXPECT(gbc.pc(), 0xc3b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3b1), 0xcb);
        EXPECT(gbc.readMem(0xc3b2), 0xe8);
        // CB E8 00B1
        gbc.setState(0xc2a4, 0x2b56, 0x22e0, 0x10c9, 0x1e85, 0xed67, 0x1, 0x1);
        gbc.writeMem(0xc2a4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2b56);
        EXPECT(gbc.pc(), 0xc2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2a4), 0xcb);
        EXPECT(gbc.readMem(0xc2a5), 0xe8);
        // CB E8 00B2
        gbc.setState(0x689d, 0x7331, 0x7230, 0xf055, 0xf07f, 0xa0c0, 0x1, 0x0);
        gbc.writeMem(0x689d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7331);
        EXPECT(gbc.pc(), 0x689f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00B3
        gbc.setState(0x5c52, 0x658e, 0x9d80, 0xbbbe, 0x9702, 0x739, 0x1, 0x0);
        gbc.writeMem(0x5c52, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x658e);
        EXPECT(gbc.pc(), 0x5c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00B4
        gbc.setState(0xe70f, 0x8e0f, 0x8e90, 0x8469, 0x2328, 0x1ece, 0x0, 0x1);
        gbc.writeMem(0xe70f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8e0f);
        EXPECT(gbc.pc(), 0xe711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70f), 0xcb);
        EXPECT(gbc.readMem(0xe710), 0xe8);
        // CB E8 00B5
        gbc.setState(0x5057, 0x4b0d, 0x4550, 0xce6f, 0x5102, 0xc9fa, 0x1, 0x0);
        gbc.writeMem(0x5057, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0x5059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00B6
        gbc.setState(0xae6, 0x5215, 0x4dd0, 0x728e, 0x4fbd, 0xcfe6, 0x1, 0x0);
        gbc.writeMem(0xae6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5215);
        EXPECT(gbc.pc(), 0xae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00B7
        gbc.setState(0xcc2d, 0xf364, 0xc980, 0xb28b, 0xbf8c, 0x62d5, 0x0, 0x1);
        gbc.writeMem(0xcc2d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf364);
        EXPECT(gbc.pc(), 0xcc2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2d), 0xcb);
        EXPECT(gbc.readMem(0xcc2e), 0xe8);
        // CB E8 00B8
        gbc.setState(0x1bbf, 0x3e5a, 0xfe10, 0xa7f9, 0x7281, 0x286, 0x1, 0x1);
        gbc.writeMem(0x1bbf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3e5a);
        EXPECT(gbc.pc(), 0x1bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00B9
        gbc.setState(0x99, 0xbcd3, 0xaf90, 0x3c3f, 0x2f95, 0x68f6, 0x1, 0x1);
        gbc.writeMem(0x99, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbcd3);
        EXPECT(gbc.pc(), 0x9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00BA
        gbc.setState(0xebab, 0x5077, 0xd540, 0xb35a, 0xa849, 0x77d7, 0x0, 0x1);
        gbc.writeMem(0xebab, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5077);
        EXPECT(gbc.pc(), 0xebad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebab), 0xcb);
        EXPECT(gbc.readMem(0xebac), 0xe8);
        // CB E8 00BB
        gbc.setState(0xaa93, 0xf2dc, 0x7c10, 0x3fda, 0x7ffd, 0x3566, 0x1, 0x0);
        gbc.writeMem(0xaa93, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf2dc);
        EXPECT(gbc.pc(), 0xaa95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa93), 0xcb);
        EXPECT(gbc.readMem(0xaa94), 0xe8);
        // CB E8 00BC
        gbc.setState(0x9fa0, 0x9bc6, 0x85f0, 0xfc97, 0xd7c7, 0x5e50, 0x1, 0x1);
        gbc.writeMem(0x9fa0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9bc6);
        EXPECT(gbc.pc(), 0x9fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa0), 0xcb);
        EXPECT(gbc.readMem(0x9fa1), 0xe8);
        // CB E8 00BD
        gbc.setState(0xd80a, 0xf6b3, 0xa10, 0x51cf, 0xe8b2, 0x3007, 0x1, 0x0);
        gbc.writeMem(0xd80a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0xd80c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80a), 0xcb);
        EXPECT(gbc.readMem(0xd80b), 0xe8);
        // CB E8 00BE
        gbc.setState(0xc02, 0x4624, 0x8080, 0xf664, 0x5174, 0xbafc, 0x1, 0x0);
        gbc.writeMem(0xc02, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4624);
        EXPECT(gbc.pc(), 0xc04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00BF
        gbc.setState(0x5f95, 0x3bc0, 0xf520, 0xe0b4, 0x2930, 0xd312, 0x1, 0x1);
        gbc.writeMem(0x5f95, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3bc0);
        EXPECT(gbc.pc(), 0x5f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00C0
        gbc.setState(0x52e7, 0xea30, 0xe410, 0xfdd9, 0xb375, 0x5bfe, 0x1, 0x1);
        gbc.writeMem(0x52e7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xea30);
        EXPECT(gbc.pc(), 0x52e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00C2
        gbc.setState(0x53de, 0x156c, 0xf8e0, 0x611f, 0xc5b5, 0x2e47, 0x0, 0x1);
        gbc.writeMem(0x53de, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x156c);
        EXPECT(gbc.pc(), 0x53e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00C3
        gbc.setState(0xbeba, 0xe65c, 0x7c0, 0xaa74, 0xff0a, 0xe349, 0x0, 0x0);
        gbc.writeMem(0xbeba, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe65c);
        EXPECT(gbc.pc(), 0xbebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeba), 0xcb);
        EXPECT(gbc.readMem(0xbebb), 0xe8);
        // CB E8 00C4
        gbc.setState(0xe027, 0x8e27, 0x5370, 0x22ea, 0x8040, 0x1924, 0x1, 0x0);
        gbc.writeMem(0xe027, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8e27);
        EXPECT(gbc.pc(), 0xe029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe027), 0xcb);
        EXPECT(gbc.readMem(0xe028), 0xe8);
        // CB E8 00C5
        gbc.setState(0x9116, 0x516, 0x5ef0, 0x2b8a, 0x252, 0x44d5, 0x1, 0x0);
        gbc.writeMem(0x9116, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x516);
        EXPECT(gbc.pc(), 0x9118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9116), 0xcb);
        EXPECT(gbc.readMem(0x9117), 0xe8);
        // CB E8 00C8
        gbc.setState(0x91a5, 0x98b9, 0x3b20, 0xf928, 0x4077, 0xfdd, 0x0, 0x0);
        gbc.writeMem(0x91a5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x98b9);
        EXPECT(gbc.pc(), 0x91a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a5), 0xcb);
        EXPECT(gbc.readMem(0x91a6), 0xe8);
        // CB E8 00C9
        gbc.setState(0x7181, 0x9993, 0x7670, 0x3b78, 0x15ee, 0xa534, 0x1, 0x0);
        gbc.writeMem(0x7181, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9993);
        EXPECT(gbc.pc(), 0x7183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00CA
        gbc.setState(0x2000, 0x5b8d, 0xc5a0, 0x706e, 0x52d6, 0xb433, 0x1, 0x1);
        gbc.writeMem(0x2000, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5b8d);
        EXPECT(gbc.pc(), 0x2002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00CB
        gbc.setState(0x9ab4, 0x329a, 0x1ea0, 0xbeb4, 0x8c3d, 0x68c6, 0x1, 0x1);
        gbc.writeMem(0x9ab4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x329a);
        EXPECT(gbc.pc(), 0x9ab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab4), 0xcb);
        EXPECT(gbc.readMem(0x9ab5), 0xe8);
        // CB E8 00CC
        gbc.setState(0xa4ef, 0x6be1, 0xa7c0, 0xe4ba, 0xa079, 0x292d, 0x1, 0x0);
        gbc.writeMem(0xa4ef, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6be1);
        EXPECT(gbc.pc(), 0xa4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ef), 0xcb);
        EXPECT(gbc.readMem(0xa4f0), 0xe8);
        // CB E8 00CD
        gbc.setState(0x3daa, 0x3867, 0xa3d0, 0xecf1, 0x451e, 0x7fd1, 0x1, 0x0);
        gbc.writeMem(0x3daa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3867);
        EXPECT(gbc.pc(), 0x3dac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00CE
        gbc.setState(0x7378, 0x328c, 0xbfe0, 0x85a7, 0xc0f8, 0x5a29, 0x0, 0x1);
        gbc.writeMem(0x7378, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x328c);
        EXPECT(gbc.pc(), 0x737a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00CF
        gbc.setState(0xc139, 0xc9c4, 0xd5a0, 0xa0ca, 0xbd8e, 0x68f0, 0x0, 0x1);
        gbc.writeMem(0xc139, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc9c4);
        EXPECT(gbc.pc(), 0xc13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc139), 0xcb);
        EXPECT(gbc.readMem(0xc13a), 0xe8);
        // CB E8 00D0
        gbc.setState(0x9348, 0x178c, 0x96c0, 0xca6c, 0x6529, 0xad47, 0x0, 0x1);
        gbc.writeMem(0x9348, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x178c);
        EXPECT(gbc.pc(), 0x934a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9348), 0xcb);
        EXPECT(gbc.readMem(0x9349), 0xe8);
        // CB E8 00D2
        gbc.setState(0x873c, 0xb242, 0x8430, 0xef07, 0x9626, 0xf614, 0x1, 0x0);
        gbc.writeMem(0x873c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xb242);
        EXPECT(gbc.pc(), 0x873e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873c), 0xcb);
        EXPECT(gbc.readMem(0x873d), 0xe8);
        // CB E8 00D3
        gbc.setState(0xc95d, 0xcf33, 0xe0c0, 0xea81, 0xb3e6, 0xe09b, 0x0, 0x1);
        gbc.writeMem(0xc95d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xcf33);
        EXPECT(gbc.pc(), 0xc95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95d), 0xcb);
        EXPECT(gbc.readMem(0xc95e), 0xe8);
        // CB E8 00D4
        gbc.setState(0x75, 0x5172, 0x9130, 0xb330, 0xb29a, 0x9855, 0x0, 0x0);
        gbc.writeMem(0x75, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5172);
        EXPECT(gbc.pc(), 0x77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00D5
        gbc.setState(0x535b, 0x66ea, 0xa10, 0x5bd4, 0x408e, 0xccc9, 0x0, 0x1);
        gbc.writeMem(0x535b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x66ea);
        EXPECT(gbc.pc(), 0x535d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00D6
        gbc.setState(0x5de6, 0xe7ca, 0x3120, 0x735a, 0x1672, 0x6d07, 0x1, 0x1);
        gbc.writeMem(0x5de6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe7ca);
        EXPECT(gbc.pc(), 0x5de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00D7
        gbc.setState(0x59af, 0xe8bb, 0x4380, 0xc835, 0x5607, 0xae75, 0x0, 0x0);
        gbc.writeMem(0x59af, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe8bb);
        EXPECT(gbc.pc(), 0x59b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00D8
        gbc.setState(0xeae8, 0x7309, 0x8580, 0xb617, 0x7c02, 0x89b4, 0x1, 0x1);
        gbc.writeMem(0xeae8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7309);
        EXPECT(gbc.pc(), 0xeaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae8), 0xcb);
        EXPECT(gbc.readMem(0xeae9), 0xe8);
        // CB E8 00D9
        gbc.setState(0xcf4e, 0xecf7, 0x8490, 0x57b9, 0xc882, 0xf6c6, 0x0, 0x1);
        gbc.writeMem(0xcf4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xecf7);
        EXPECT(gbc.pc(), 0xcf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf4e), 0xcb);
        EXPECT(gbc.readMem(0xcf4f), 0xe8);
        // CB E8 00DA
        gbc.setState(0x5b41, 0x381e, 0xdcf0, 0x46fa, 0x4ae, 0x18cf, 0x0, 0x1);
        gbc.writeMem(0x5b41, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x381e);
        EXPECT(gbc.pc(), 0x5b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00DB
        gbc.setState(0x84cd, 0xa5c0, 0x3ef0, 0x9048, 0x3cca, 0x2764, 0x0, 0x1);
        gbc.writeMem(0x84cd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa5c0);
        EXPECT(gbc.pc(), 0x84cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cd), 0xcb);
        EXPECT(gbc.readMem(0x84ce), 0xe8);
        // CB E8 00DC
        gbc.setState(0x694d, 0x2ff1, 0x2240, 0x1d4, 0x5abd, 0x4241, 0x1, 0x1);
        gbc.writeMem(0x694d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2ff1);
        EXPECT(gbc.pc(), 0x694f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00DD
        gbc.setState(0x854f, 0xebc8, 0xe4f0, 0x4619, 0x2d07, 0x39fd, 0x0, 0x1);
        gbc.writeMem(0x854f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xebc8);
        EXPECT(gbc.pc(), 0x8551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x854f), 0xcb);
        EXPECT(gbc.readMem(0x8550), 0xe8);
        // CB E8 00DE
        gbc.setState(0x268b, 0x2ebb, 0x8fe0, 0xe36d, 0xd3c3, 0x5515, 0x0, 0x0);
        gbc.writeMem(0x268b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2ebb);
        EXPECT(gbc.pc(), 0x268d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00DF
        gbc.setState(0x9b39, 0xb9d0, 0xf990, 0x83a6, 0x3ed7, 0x9000, 0x0, 0x1);
        gbc.writeMem(0x9b39, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb9d0);
        EXPECT(gbc.pc(), 0x9b3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b39), 0xcb);
        EXPECT(gbc.readMem(0x9b3a), 0xe8);
        // CB E8 00E0
        gbc.setState(0x3b11, 0x31dd, 0xa390, 0xd37f, 0xf5d1, 0x882a, 0x0, 0x0);
        gbc.writeMem(0x3b11, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x31dd);
        EXPECT(gbc.pc(), 0x3b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00E1
        gbc.setState(0x43e9, 0x5a82, 0x1150, 0x34be, 0xa660, 0x95dc, 0x0, 0x0);
        gbc.writeMem(0x43e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5a82);
        EXPECT(gbc.pc(), 0x43eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00E2
        gbc.setState(0x6467, 0xea37, 0x5500, 0xbc36, 0x35ff, 0xe33, 0x0, 0x1);
        gbc.writeMem(0x6467, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xea37);
        EXPECT(gbc.pc(), 0x6469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00E3
        gbc.setState(0x467, 0xc7df, 0x3a30, 0x53a2, 0x1f01, 0x572d, 0x1, 0x1);
        gbc.writeMem(0x467, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc7df);
        EXPECT(gbc.pc(), 0x469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00E4
        gbc.setState(0x714e, 0xdea5, 0x2e40, 0xfd0a, 0x5e75, 0x2b64, 0x1, 0x1);
        gbc.writeMem(0x714e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xdea5);
        EXPECT(gbc.pc(), 0x7150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00E5
        gbc.setState(0x8c87, 0x47f5, 0x2940, 0x210c, 0x9f19, 0x9ff0, 0x0, 0x1);
        gbc.writeMem(0x8c87, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x47f5);
        EXPECT(gbc.pc(), 0x8c89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c87), 0xcb);
        EXPECT(gbc.readMem(0x8c88), 0xe8);
        // CB E8 00E6
        gbc.setState(0xa713, 0xb6d2, 0x7440, 0x5d60, 0x6037, 0x4023, 0x1, 0x0);
        gbc.writeMem(0xa713, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb6d2);
        EXPECT(gbc.pc(), 0xa715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa713), 0xcb);
        EXPECT(gbc.readMem(0xa714), 0xe8);
        // CB E8 00E7
        gbc.setState(0x7b00, 0x73d2, 0x7080, 0xf2af, 0x4fe0, 0xc995, 0x1, 0x1);
        gbc.writeMem(0x7b00, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x73d2);
        EXPECT(gbc.pc(), 0x7b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00E8
        gbc.setState(0x8e3e, 0xa321, 0x7b10, 0x987a, 0x858f, 0x4b50, 0x0, 0x0);
        gbc.writeMem(0x8e3e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa321);
        EXPECT(gbc.pc(), 0x8e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3e), 0xcb);
        EXPECT(gbc.readMem(0x8e3f), 0xe8);
        // CB E8 00E9
        gbc.setState(0x9b7b, 0x9e7e, 0xec40, 0x8fcc, 0x1a3, 0x3f0e, 0x0, 0x0);
        gbc.writeMem(0x9b7b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9e7e);
        EXPECT(gbc.pc(), 0x9b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b7b), 0xcb);
        EXPECT(gbc.readMem(0x9b7c), 0xe8);
        // CB E8 00EA
        gbc.setState(0xab2c, 0xa91, 0x3ac0, 0x7dfd, 0x8666, 0xabaf, 0x1, 0x0);
        gbc.writeMem(0xab2c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa91);
        EXPECT(gbc.pc(), 0xab2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2c), 0xcb);
        EXPECT(gbc.readMem(0xab2d), 0xe8);
        // CB E8 00EB
        gbc.setState(0x7738, 0x7466, 0x2ae0, 0x9ad6, 0x5f3c, 0x4016, 0x0, 0x1);
        gbc.writeMem(0x7738, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7466);
        EXPECT(gbc.pc(), 0x773a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00ED
        gbc.setState(0xb132, 0xbb78, 0xe090, 0xd275, 0x8894, 0xe663, 0x1, 0x0);
        gbc.writeMem(0xb132, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbb78);
        EXPECT(gbc.pc(), 0xb134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb132), 0xcb);
        EXPECT(gbc.readMem(0xb133), 0xe8);
        // CB E8 00EE
        gbc.setState(0xaab0, 0x4f18, 0x4430, 0xf601, 0x8e, 0xb793, 0x1, 0x1);
        gbc.writeMem(0xaab0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4f18);
        EXPECT(gbc.pc(), 0xaab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaab0), 0xcb);
        EXPECT(gbc.readMem(0xaab1), 0xe8);
        // CB E8 00EF
        gbc.setState(0x6e43, 0x6d7f, 0xd3a0, 0x5f91, 0x8e36, 0xb42, 0x1, 0x1);
        gbc.writeMem(0x6e43, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6d7f);
        EXPECT(gbc.pc(), 0x6e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00F0
        gbc.setState(0x5655, 0x2d8d, 0x17f0, 0x19c8, 0x64c3, 0xa661, 0x1, 0x0);
        gbc.writeMem(0x5655, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2d8d);
        EXPECT(gbc.pc(), 0x5657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00F1
        gbc.setState(0x80fc, 0x4e73, 0x3790, 0x819c, 0xb6fb, 0xbdd0, 0x1, 0x1);
        gbc.writeMem(0x80fc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4e73);
        EXPECT(gbc.pc(), 0x80fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80fc), 0xcb);
        EXPECT(gbc.readMem(0x80fd), 0xe8);
        // CB E8 00F2
        gbc.setState(0xacc3, 0xe6e5, 0xa2c0, 0xac3c, 0xb1f5, 0xc4d8, 0x0, 0x1);
        gbc.writeMem(0xacc3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe6e5);
        EXPECT(gbc.pc(), 0xacc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc3), 0xcb);
        EXPECT(gbc.readMem(0xacc4), 0xe8);
        // CB E8 00F3
        gbc.setState(0xc62, 0xe25e, 0x4830, 0x27fc, 0xb17d, 0x3d71, 0x0, 0x1);
        gbc.writeMem(0xc62, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe25e);
        EXPECT(gbc.pc(), 0xc64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00F4
        gbc.setState(0x986, 0x120c, 0x3580, 0xe0f1, 0x1d0e, 0x90e2, 0x0, 0x1);
        gbc.writeMem(0x986, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x120c);
        EXPECT(gbc.pc(), 0x988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00F5
        gbc.setState(0xd147, 0xd19e, 0x1a10, 0xaa74, 0x8265, 0x5e33, 0x0, 0x1);
        gbc.writeMem(0xd147, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd19e);
        EXPECT(gbc.pc(), 0xd149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd147), 0xcb);
        EXPECT(gbc.readMem(0xd148), 0xe8);
        // CB E8 00F6
        gbc.setState(0x1a3c, 0x68af, 0x99c0, 0xc04, 0x912d, 0x1199, 0x1, 0x0);
        gbc.writeMem(0x1a3c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x68af);
        EXPECT(gbc.pc(), 0x1a3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00F7
        gbc.setState(0x2b8d, 0x2242, 0x11e0, 0xdc6a, 0x70ac, 0xce51, 0x0, 0x0);
        gbc.writeMem(0x2b8d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2242);
        EXPECT(gbc.pc(), 0x2b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00F8
        gbc.setState(0x3a5c, 0xc07a, 0xc940, 0x39fb, 0x1da1, 0x5c61, 0x1, 0x0);
        gbc.writeMem(0x3a5c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc07a);
        EXPECT(gbc.pc(), 0x3a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 00F9
        gbc.setState(0xc82d, 0xfacb, 0x1470, 0xc18, 0x563d, 0xaf04, 0x0, 0x0);
        gbc.writeMem(0xc82d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfacb);
        EXPECT(gbc.pc(), 0xc82f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc82d), 0xcb);
        EXPECT(gbc.readMem(0xc82e), 0xe8);
        // CB E8 00FA
        gbc.setState(0xd517, 0x4d50, 0x42b0, 0x51ed, 0xdbe6, 0x124f, 0x0, 0x0);
        gbc.writeMem(0xd517, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4d50);
        EXPECT(gbc.pc(), 0xd519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd517), 0xcb);
        EXPECT(gbc.readMem(0xd518), 0xe8);
        // CB E8 00FB
        gbc.setState(0xe807, 0xf34c, 0xac20, 0xd657, 0x8b05, 0x9337, 0x0, 0x1);
        gbc.writeMem(0xe807, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xf34c);
        EXPECT(gbc.pc(), 0xe809);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe807), 0xcb);
        EXPECT(gbc.readMem(0xe808), 0xe8);
        // CB E8 00FC
        gbc.setState(0x8b61, 0x79ca, 0x77c0, 0xbbd4, 0x3797, 0x8b4d, 0x0, 0x0);
        gbc.writeMem(0x8b61, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x79ca);
        EXPECT(gbc.pc(), 0x8b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b61), 0xcb);
        EXPECT(gbc.readMem(0x8b62), 0xe8);
        // CB E8 00FD
        gbc.setState(0xd20, 0xbd6e, 0xe910, 0x485, 0xaa20, 0x4eb9, 0x1, 0x0);
        gbc.writeMem(0xd20, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbd6e);
        EXPECT(gbc.pc(), 0xd22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00FE
        gbc.setState(0x15ee, 0x4cd1, 0x9630, 0x3fb, 0x6883, 0x5226, 0x1, 0x1);
        gbc.writeMem(0x15ee, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4cd1);
        EXPECT(gbc.pc(), 0x15f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 00FF
        gbc.setState(0xa31f, 0x5e7c, 0x9cf0, 0x8070, 0x9646, 0xcca0, 0x0, 0x0);
        gbc.writeMem(0xa31f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5e7c);
        EXPECT(gbc.pc(), 0xa321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa31f), 0xcb);
        EXPECT(gbc.readMem(0xa320), 0xe8);
        // CB E8 0100
        gbc.setState(0xb5c2, 0xc0a6, 0xb480, 0xaf45, 0x2476, 0x1a2a, 0x0, 0x0);
        gbc.writeMem(0xb5c2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc0a6);
        EXPECT(gbc.pc(), 0xb5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c2), 0xcb);
        EXPECT(gbc.readMem(0xb5c3), 0xe8);
        // CB E8 0101
        gbc.setState(0xc42f, 0x569f, 0xd20, 0x6acb, 0x96fc, 0xdd1b, 0x1, 0x1);
        gbc.writeMem(0xc42f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x569f);
        EXPECT(gbc.pc(), 0xc431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42f), 0xcb);
        EXPECT(gbc.readMem(0xc430), 0xe8);
        // CB E8 0102
        gbc.setState(0xe4ee, 0x31af, 0x2fa0, 0x7e4a, 0x551a, 0x6e57, 0x0, 0x1);
        gbc.writeMem(0xe4ee, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x31af);
        EXPECT(gbc.pc(), 0xe4f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ee), 0xcb);
        EXPECT(gbc.readMem(0xe4ef), 0xe8);
        // CB E8 0103
        gbc.setState(0x554d, 0x5a90, 0xaf20, 0x6f41, 0x2dfc, 0x68c9, 0x1, 0x0);
        gbc.writeMem(0x554d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5a90);
        EXPECT(gbc.pc(), 0x554f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0104
        gbc.setState(0x4c71, 0xa557, 0x6e80, 0x2b96, 0xfe2a, 0xeea0, 0x1, 0x0);
        gbc.writeMem(0x4c71, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa557);
        EXPECT(gbc.pc(), 0x4c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0105
        gbc.setState(0x9bf, 0x63d1, 0x3fa0, 0x19d, 0x1b62, 0x66f3, 0x0, 0x0);
        gbc.writeMem(0x9bf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x63d1);
        EXPECT(gbc.pc(), 0x9c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0106
        gbc.setState(0x41a3, 0x3071, 0x74d0, 0xd367, 0xed90, 0xcbe0, 0x0, 0x0);
        gbc.writeMem(0x41a3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3071);
        EXPECT(gbc.pc(), 0x41a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0107
        gbc.setState(0xddf6, 0xcab6, 0x8e90, 0x6487, 0xcc3, 0x59b1, 0x0, 0x1);
        gbc.writeMem(0xddf6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcab6);
        EXPECT(gbc.pc(), 0xddf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddf6), 0xcb);
        EXPECT(gbc.readMem(0xddf7), 0xe8);
        // CB E8 0108
        gbc.setState(0x4ee6, 0x170f, 0xaf00, 0x65d2, 0x67ce, 0xa6e0, 0x1, 0x1);
        gbc.writeMem(0x4ee6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x170f);
        EXPECT(gbc.pc(), 0x4ee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0109
        gbc.setState(0x1698, 0xf233, 0xd770, 0x33b5, 0xbfef, 0xbb31, 0x1, 0x1);
        gbc.writeMem(0x1698, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf233);
        EXPECT(gbc.pc(), 0x169a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 010A
        gbc.setState(0x442c, 0x79b2, 0x70b0, 0x3c3e, 0x8ee6, 0xfe0f, 0x1, 0x0);
        gbc.writeMem(0x442c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x79b2);
        EXPECT(gbc.pc(), 0x442e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 010B
        gbc.setState(0x3b56, 0x23e4, 0xc920, 0xda58, 0x9a08, 0x10d5, 0x1, 0x1);
        gbc.writeMem(0x3b56, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x23e4);
        EXPECT(gbc.pc(), 0x3b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 010C
        gbc.setState(0xbe2, 0x9b03, 0x1e50, 0x6e6a, 0x476b, 0xb84c, 0x0, 0x1);
        gbc.writeMem(0xbe2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9b03);
        EXPECT(gbc.pc(), 0xbe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 010D
        gbc.setState(0xcc3e, 0xce7a, 0x6180, 0x3860, 0x3290, 0x4c53, 0x1, 0x0);
        gbc.writeMem(0xcc3e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xce7a);
        EXPECT(gbc.pc(), 0xcc40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc3e), 0xcb);
        EXPECT(gbc.readMem(0xcc3f), 0xe8);
        // CB E8 010E
        gbc.setState(0xafd8, 0x9ac5, 0x7a90, 0xc34a, 0x8796, 0xec3e, 0x1, 0x0);
        gbc.writeMem(0xafd8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9ac5);
        EXPECT(gbc.pc(), 0xafda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd8), 0xcb);
        EXPECT(gbc.readMem(0xafd9), 0xe8);
        // CB E8 0110
        gbc.setState(0x707e, 0x1116, 0x1be0, 0x11c4, 0x4b6a, 0x8e2b, 0x1, 0x1);
        gbc.writeMem(0x707e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1116);
        EXPECT(gbc.pc(), 0x7080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0111
        gbc.setState(0x29bf, 0xd864, 0x3740, 0x9c91, 0x6313, 0xd05, 0x0, 0x1);
        gbc.writeMem(0x29bf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd864);
        EXPECT(gbc.pc(), 0x29c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0112
        gbc.setState(0x1f2, 0xecc8, 0x2130, 0xcec3, 0xaea9, 0x2f00, 0x1, 0x1);
        gbc.writeMem(0x1f2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xecc8);
        EXPECT(gbc.pc(), 0x1f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0113
        gbc.setState(0x8ef6, 0x2356, 0xe970, 0xd52, 0xaa09, 0xe182, 0x1, 0x0);
        gbc.writeMem(0x8ef6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2356);
        EXPECT(gbc.pc(), 0x8ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ef6), 0xcb);
        EXPECT(gbc.readMem(0x8ef7), 0xe8);
        // CB E8 0114
        gbc.setState(0x2340, 0xa383, 0xfb30, 0x2956, 0xaac, 0x6a98, 0x1, 0x1);
        gbc.writeMem(0x2340, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa383);
        EXPECT(gbc.pc(), 0x2342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0115
        gbc.setState(0xe46c, 0x9016, 0xeb00, 0x83f, 0x4aea, 0xd855, 0x0, 0x1);
        gbc.writeMem(0xe46c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9016);
        EXPECT(gbc.pc(), 0xe46e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46c), 0xcb);
        EXPECT(gbc.readMem(0xe46d), 0xe8);
        // CB E8 0116
        gbc.setState(0x607f, 0x9f05, 0x6b30, 0xd234, 0x60b1, 0x1d85, 0x1, 0x1);
        gbc.writeMem(0x607f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9f05);
        EXPECT(gbc.pc(), 0x6081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0117
        gbc.setState(0xe47c, 0x942, 0x9fb0, 0x5855, 0x5b8, 0x6bd9, 0x1, 0x0);
        gbc.writeMem(0xe47c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x942);
        EXPECT(gbc.pc(), 0xe47e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe47c), 0xcb);
        EXPECT(gbc.readMem(0xe47d), 0xe8);
        // CB E8 0118
        gbc.setState(0x7402, 0xfd98, 0xc910, 0x3672, 0xb348, 0xaf9d, 0x0, 0x0);
        gbc.writeMem(0x7402, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfd98);
        EXPECT(gbc.pc(), 0x7404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0119
        gbc.setState(0x3fdf, 0x1ccb, 0xab20, 0x620f, 0x2b65, 0x9403, 0x1, 0x1);
        gbc.writeMem(0x3fdf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1ccb);
        EXPECT(gbc.pc(), 0x3fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 011A
        gbc.setState(0xb22, 0x9773, 0x46a0, 0xb5bd, 0x4c9f, 0xbad9, 0x1, 0x1);
        gbc.writeMem(0xb22, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x9773);
        EXPECT(gbc.pc(), 0xb24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 011B
        gbc.setState(0x97aa, 0xf7fa, 0x7760, 0x381, 0x2d29, 0x6c82, 0x0, 0x1);
        gbc.writeMem(0x97aa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf7fa);
        EXPECT(gbc.pc(), 0x97ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97aa), 0xcb);
        EXPECT(gbc.readMem(0x97ab), 0xe8);
        // CB E8 011C
        gbc.setState(0xb7b1, 0x842, 0x7000, 0x29e1, 0xe8cd, 0xedf0, 0x1, 0x0);
        gbc.writeMem(0xb7b1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x842);
        EXPECT(gbc.pc(), 0xb7b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b1), 0xcb);
        EXPECT(gbc.readMem(0xb7b2), 0xe8);
        // CB E8 011D
        gbc.setState(0x926a, 0x890a, 0x7570, 0x1266, 0x94cb, 0x73f7, 0x1, 0x1);
        gbc.writeMem(0x926a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x890a);
        EXPECT(gbc.pc(), 0x926c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926a), 0xcb);
        EXPECT(gbc.readMem(0x926b), 0xe8);
        // CB E8 011E
        gbc.setState(0x78b2, 0x5430, 0x4170, 0xc807, 0xb4c2, 0xa7ef, 0x0, 0x1);
        gbc.writeMem(0x78b2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5430);
        EXPECT(gbc.pc(), 0x78b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 011F
        gbc.setState(0x195, 0xa74, 0xa5e0, 0x2ad, 0x88d4, 0x247a, 0x0, 0x1);
        gbc.writeMem(0x195, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa74);
        EXPECT(gbc.pc(), 0x197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0120
        gbc.setState(0xa4d3, 0x1863, 0x3fc0, 0xb4d5, 0xe94a, 0xed81, 0x1, 0x0);
        gbc.writeMem(0xa4d3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1863);
        EXPECT(gbc.pc(), 0xa4d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d3), 0xcb);
        EXPECT(gbc.readMem(0xa4d4), 0xe8);
        // CB E8 0121
        gbc.setState(0xae76, 0x6675, 0xb130, 0x7e3b, 0xe61c, 0x8539, 0x0, 0x0);
        gbc.writeMem(0xae76, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6675);
        EXPECT(gbc.pc(), 0xae78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae76), 0xcb);
        EXPECT(gbc.readMem(0xae77), 0xe8);
        // CB E8 0122
        gbc.setState(0xb6ec, 0x25da, 0xaaa0, 0xf0ea, 0xb73b, 0xd071, 0x0, 0x0);
        gbc.writeMem(0xb6ec, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x25da);
        EXPECT(gbc.pc(), 0xb6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ec), 0xcb);
        EXPECT(gbc.readMem(0xb6ed), 0xe8);
        // CB E8 0123
        gbc.setState(0x5844, 0xf6e4, 0x8e80, 0x7155, 0x11c9, 0x6cf0, 0x1, 0x0);
        gbc.writeMem(0x5844, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf6e4);
        EXPECT(gbc.pc(), 0x5846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0124
        gbc.setState(0x20f4, 0x3bb2, 0x2120, 0x26ed, 0xd918, 0x8c4f, 0x1, 0x1);
        gbc.writeMem(0x20f4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3bb2);
        EXPECT(gbc.pc(), 0x20f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0125
        gbc.setState(0xa3bb, 0xa1a3, 0x90d0, 0x1e6e, 0x714, 0xb24c, 0x0, 0x1);
        gbc.writeMem(0xa3bb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa1a3);
        EXPECT(gbc.pc(), 0xa3bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3bb), 0xcb);
        EXPECT(gbc.readMem(0xa3bc), 0xe8);
        // CB E8 0126
        gbc.setState(0x8ed7, 0xce2a, 0xd560, 0x40c4, 0xa1c9, 0x26fd, 0x1, 0x0);
        gbc.writeMem(0x8ed7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xce2a);
        EXPECT(gbc.pc(), 0x8ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed7), 0xcb);
        EXPECT(gbc.readMem(0x8ed8), 0xe8);
        // CB E8 0128
        gbc.setState(0x6752, 0xe537, 0x8390, 0xb50c, 0xa45f, 0x75ae, 0x0, 0x0);
        gbc.writeMem(0x6752, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe537);
        EXPECT(gbc.pc(), 0x6754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0129
        gbc.setState(0xabab, 0x31ce, 0x1390, 0x4b05, 0x22d7, 0xe15f, 0x0, 0x0);
        gbc.writeMem(0xabab, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x31ce);
        EXPECT(gbc.pc(), 0xabad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabab), 0xcb);
        EXPECT(gbc.readMem(0xabac), 0xe8);
        // CB E8 012A
        gbc.setState(0x542a, 0x753b, 0x3200, 0x109e, 0x62a6, 0x385f, 0x1, 0x1);
        gbc.writeMem(0x542a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x753b);
        EXPECT(gbc.pc(), 0x542c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 012B
        gbc.setState(0xd17e, 0x59a7, 0x8a10, 0x7685, 0x3bb9, 0xab09, 0x0, 0x0);
        gbc.writeMem(0xd17e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x59a7);
        EXPECT(gbc.pc(), 0xd180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd17e), 0xcb);
        EXPECT(gbc.readMem(0xd17f), 0xe8);
        // CB E8 012C
        gbc.setState(0x51f8, 0xf7ad, 0x63d0, 0xdf0a, 0xbb09, 0x78ea, 0x0, 0x0);
        gbc.writeMem(0x51f8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf7ad);
        EXPECT(gbc.pc(), 0x51fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 012D
        gbc.setState(0xcc7f, 0x2175, 0xafe0, 0x6f76, 0xe48b, 0xad51, 0x1, 0x0);
        gbc.writeMem(0xcc7f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2175);
        EXPECT(gbc.pc(), 0xcc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7f), 0xcb);
        EXPECT(gbc.readMem(0xcc80), 0xe8);
        // CB E8 012E
        gbc.setState(0x6dd0, 0xe8c4, 0x1370, 0xe637, 0x5ec9, 0xa97b, 0x0, 0x0);
        gbc.writeMem(0x6dd0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe8c4);
        EXPECT(gbc.pc(), 0x6dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 012F
        gbc.setState(0xb2d1, 0x5a73, 0x7990, 0x1574, 0x8dc5, 0xf2b7, 0x0, 0x1);
        gbc.writeMem(0xb2d1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5a73);
        EXPECT(gbc.pc(), 0xb2d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d1), 0xcb);
        EXPECT(gbc.readMem(0xb2d2), 0xe8);
        // CB E8 0130
        gbc.setState(0xe006, 0xdadd, 0x5a30, 0xfea6, 0x9400, 0xa560, 0x1, 0x0);
        gbc.writeMem(0xe006, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xdadd);
        EXPECT(gbc.pc(), 0xe008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe006), 0xcb);
        EXPECT(gbc.readMem(0xe007), 0xe8);
        // CB E8 0131
        gbc.setState(0x4952, 0xb582, 0x2b20, 0xd4c6, 0x3beb, 0xa509, 0x1, 0x0);
        gbc.writeMem(0x4952, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb582);
        EXPECT(gbc.pc(), 0x4954);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0132
        gbc.setState(0x9c79, 0x864f, 0xffb0, 0xcdd9, 0x9f76, 0xc045, 0x0, 0x0);
        gbc.writeMem(0x9c79, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x864f);
        EXPECT(gbc.pc(), 0x9c7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c79), 0xcb);
        EXPECT(gbc.readMem(0x9c7a), 0xe8);
        // CB E8 0133
        gbc.setState(0x2e39, 0x9851, 0xf730, 0xff62, 0xd3cf, 0x9951, 0x1, 0x0);
        gbc.writeMem(0x2e39, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9851);
        EXPECT(gbc.pc(), 0x2e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0134
        gbc.setState(0x260, 0x3b87, 0x74d0, 0xeb46, 0x2812, 0xe13a, 0x1, 0x0);
        gbc.writeMem(0x260, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3b87);
        EXPECT(gbc.pc(), 0x262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0135
        gbc.setState(0x57d1, 0xcf51, 0x8e50, 0x7fe0, 0xab01, 0x64e6, 0x1, 0x1);
        gbc.writeMem(0x57d1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xcf51);
        EXPECT(gbc.pc(), 0x57d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0136
        gbc.setState(0x2891, 0x958, 0x5600, 0x8227, 0xee84, 0x5a98, 0x1, 0x0);
        gbc.writeMem(0x2891, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x958);
        EXPECT(gbc.pc(), 0x2893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0137
        gbc.setState(0x59e7, 0xa16d, 0x48d0, 0x9828, 0x18a1, 0x1766, 0x1, 0x1);
        gbc.writeMem(0x59e7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa16d);
        EXPECT(gbc.pc(), 0x59e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0138
        gbc.setState(0xca66, 0x59f1, 0x8f00, 0xdf16, 0x67dc, 0x8f53, 0x1, 0x0);
        gbc.writeMem(0xca66, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x59f1);
        EXPECT(gbc.pc(), 0xca68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca66), 0xcb);
        EXPECT(gbc.readMem(0xca67), 0xe8);
        // CB E8 0139
        gbc.setState(0x9c58, 0x5400, 0x5340, 0x879a, 0x93f6, 0x6b04, 0x1, 0x0);
        gbc.writeMem(0x9c58, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5400);
        EXPECT(gbc.pc(), 0x9c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c58), 0xcb);
        EXPECT(gbc.readMem(0x9c59), 0xe8);
        // CB E8 013A
        gbc.setState(0xc624, 0xacf0, 0x4870, 0x88d7, 0xb6ee, 0x8927, 0x0, 0x1);
        gbc.writeMem(0xc624, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xacf0);
        EXPECT(gbc.pc(), 0xc626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc624), 0xcb);
        EXPECT(gbc.readMem(0xc625), 0xe8);
        // CB E8 013B
        gbc.setState(0xb7db, 0x71ee, 0x4c40, 0x5845, 0x8ec2, 0xfcd0, 0x1, 0x1);
        gbc.writeMem(0xb7db, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x71ee);
        EXPECT(gbc.pc(), 0xb7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7db), 0xcb);
        EXPECT(gbc.readMem(0xb7dc), 0xe8);
        // CB E8 013C
        gbc.setState(0xed91, 0x9077, 0x6670, 0x6946, 0xdc40, 0xa99f, 0x0, 0x1);
        gbc.writeMem(0xed91, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9077);
        EXPECT(gbc.pc(), 0xed93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed91), 0xcb);
        EXPECT(gbc.readMem(0xed92), 0xe8);
        // CB E8 013D
        gbc.setState(0xa3b8, 0x9c0c, 0xbdb0, 0x3c07, 0x8cdf, 0x6575, 0x1, 0x0);
        gbc.writeMem(0xa3b8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9c0c);
        EXPECT(gbc.pc(), 0xa3ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3b8), 0xcb);
        EXPECT(gbc.readMem(0xa3b9), 0xe8);
        // CB E8 013E
        gbc.setState(0xd773, 0xa18f, 0xf670, 0x35a8, 0x94ad, 0xac34, 0x1, 0x0);
        gbc.writeMem(0xd773, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa18f);
        EXPECT(gbc.pc(), 0xd775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd773), 0xcb);
        EXPECT(gbc.readMem(0xd774), 0xe8);
        // CB E8 013F
        gbc.setState(0x5e16, 0xde29, 0x55b0, 0xed18, 0x7855, 0xd29e, 0x0, 0x1);
        gbc.writeMem(0x5e16, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xde29);
        EXPECT(gbc.pc(), 0x5e18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0140
        gbc.setState(0x7bb4, 0x7aef, 0x4580, 0x8df5, 0x605d, 0x2dfa, 0x0, 0x1);
        gbc.writeMem(0x7bb4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7aef);
        EXPECT(gbc.pc(), 0x7bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0141
        gbc.setState(0x12a2, 0x5243, 0x2050, 0xc83c, 0xc594, 0x9b12, 0x0, 0x1);
        gbc.writeMem(0x12a2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5243);
        EXPECT(gbc.pc(), 0x12a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0142
        gbc.setState(0xafb0, 0x7f9e, 0xf480, 0x4c61, 0x8aa, 0x57fb, 0x0, 0x0);
        gbc.writeMem(0xafb0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7f9e);
        EXPECT(gbc.pc(), 0xafb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb0), 0xcb);
        EXPECT(gbc.readMem(0xafb1), 0xe8);
        // CB E8 0143
        gbc.setState(0x8a52, 0x6d08, 0xe7a0, 0x80a7, 0xca28, 0x2054, 0x0, 0x1);
        gbc.writeMem(0x8a52, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6d08);
        EXPECT(gbc.pc(), 0x8a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a52), 0xcb);
        EXPECT(gbc.readMem(0x8a53), 0xe8);
        // CB E8 0144
        gbc.setState(0x4b09, 0x7e90, 0x2990, 0x7739, 0x11d1, 0x7e30, 0x1, 0x0);
        gbc.writeMem(0x4b09, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7e90);
        EXPECT(gbc.pc(), 0x4b0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0145
        gbc.setState(0x268d, 0x3546, 0xef00, 0x2f69, 0x4dad, 0x2ceb, 0x1, 0x1);
        gbc.writeMem(0x268d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3546);
        EXPECT(gbc.pc(), 0x268f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0146
        gbc.setState(0xc19a, 0x3e5c, 0x2d0, 0x4069, 0xdd93, 0x6931, 0x0, 0x1);
        gbc.writeMem(0xc19a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3e5c);
        EXPECT(gbc.pc(), 0xc19c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc19a), 0xcb);
        EXPECT(gbc.readMem(0xc19b), 0xe8);
        // CB E8 0148
        gbc.setState(0x7c8c, 0xd2a9, 0xd60, 0xb766, 0xde6f, 0x7dfa, 0x0, 0x0);
        gbc.writeMem(0x7c8c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd2a9);
        EXPECT(gbc.pc(), 0x7c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0149
        gbc.setState(0x788f, 0xb63, 0xf5d0, 0xa13d, 0x160b, 0x9962, 0x1, 0x0);
        gbc.writeMem(0x788f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb63);
        EXPECT(gbc.pc(), 0x7891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 014A
        gbc.setState(0x6337, 0xd6a3, 0x5ba0, 0x562b, 0x267b, 0xf749, 0x1, 0x0);
        gbc.writeMem(0x6337, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd6a3);
        EXPECT(gbc.pc(), 0x6339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 014B
        gbc.setState(0xdb46, 0x83d5, 0xe300, 0xcb51, 0x93, 0x41aa, 0x0, 0x0);
        gbc.writeMem(0xdb46, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x83d5);
        EXPECT(gbc.pc(), 0xdb48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb46), 0xcb);
        EXPECT(gbc.readMem(0xdb47), 0xe8);
        // CB E8 014C
        gbc.setState(0x89d4, 0x7ea0, 0x15e0, 0x9809, 0x4cf3, 0xc375, 0x1, 0x1);
        gbc.writeMem(0x89d4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7ea0);
        EXPECT(gbc.pc(), 0x89d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d4), 0xcb);
        EXPECT(gbc.readMem(0x89d5), 0xe8);
        // CB E8 014E
        gbc.setState(0x635d, 0x4201, 0x8860, 0x9540, 0xd9c8, 0x1a6a, 0x1, 0x1);
        gbc.writeMem(0x635d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4201);
        EXPECT(gbc.pc(), 0x635f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 014F
        gbc.setState(0x65a4, 0x7c28, 0x5480, 0xff28, 0x1c82, 0xbc91, 0x1, 0x1);
        gbc.writeMem(0x65a4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7c28);
        EXPECT(gbc.pc(), 0x65a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0150
        gbc.setState(0x34f4, 0xd1b8, 0xa7e0, 0x67fb, 0xe3a8, 0x22f5, 0x0, 0x0);
        gbc.writeMem(0x34f4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd1b8);
        EXPECT(gbc.pc(), 0x34f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0151
        gbc.setState(0x773a, 0xd176, 0xb2b0, 0x4346, 0x9f8c, 0x8914, 0x0, 0x1);
        gbc.writeMem(0x773a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd176);
        EXPECT(gbc.pc(), 0x773c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0152
        gbc.setState(0x2ca5, 0x81e, 0x7720, 0xf2bf, 0x505a, 0x5c4b, 0x1, 0x0);
        gbc.writeMem(0x2ca5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x81e);
        EXPECT(gbc.pc(), 0x2ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0153
        gbc.setState(0x1a4d, 0xa105, 0x7ea0, 0x2d2f, 0x3060, 0x633e, 0x1, 0x0);
        gbc.writeMem(0x1a4d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa105);
        EXPECT(gbc.pc(), 0x1a4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0154
        gbc.setState(0xc7b2, 0x9238, 0x1010, 0xb0be, 0x4920, 0xbfa5, 0x1, 0x1);
        gbc.writeMem(0xc7b2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9238);
        EXPECT(gbc.pc(), 0xc7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b2), 0xcb);
        EXPECT(gbc.readMem(0xc7b3), 0xe8);
        // CB E8 0155
        gbc.setState(0x5cf5, 0x73b6, 0xd540, 0xb693, 0xfe4b, 0xa33f, 0x0, 0x0);
        gbc.writeMem(0x5cf5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x73b6);
        EXPECT(gbc.pc(), 0x5cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0156
        gbc.setState(0xc917, 0x8b76, 0x4d80, 0xb8cc, 0x2a2d, 0x2056, 0x1, 0x1);
        gbc.writeMem(0xc917, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8b76);
        EXPECT(gbc.pc(), 0xc919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc917), 0xcb);
        EXPECT(gbc.readMem(0xc918), 0xe8);
        // CB E8 0157
        gbc.setState(0xaf59, 0x7809, 0xf0, 0xcccb, 0x8c42, 0xa0a, 0x0, 0x1);
        gbc.writeMem(0xaf59, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7809);
        EXPECT(gbc.pc(), 0xaf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf59), 0xcb);
        EXPECT(gbc.readMem(0xaf5a), 0xe8);
        // CB E8 0158
        gbc.setState(0x6655, 0x44c5, 0x9b20, 0x41f0, 0x77e8, 0x4bf5, 0x1, 0x1);
        gbc.writeMem(0x6655, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x44c5);
        EXPECT(gbc.pc(), 0x6657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0159
        gbc.setState(0x417b, 0x4f97, 0x33e0, 0xa345, 0x9d6e, 0x5732, 0x1, 0x1);
        gbc.writeMem(0x417b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4f97);
        EXPECT(gbc.pc(), 0x417d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 015A
        gbc.setState(0x301e, 0xd25d, 0x84e0, 0xd03, 0x506d, 0xb328, 0x0, 0x0);
        gbc.writeMem(0x301e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd25d);
        EXPECT(gbc.pc(), 0x3020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 015B
        gbc.setState(0xd1b0, 0x418a, 0x8240, 0xeafd, 0x762f, 0xf26b, 0x1, 0x0);
        gbc.writeMem(0xd1b0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x418a);
        EXPECT(gbc.pc(), 0xd1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b0), 0xcb);
        EXPECT(gbc.readMem(0xd1b1), 0xe8);
        // CB E8 015C
        gbc.setState(0x3ea0, 0x4120, 0xc8f0, 0x104f, 0xbbe3, 0x7e67, 0x0, 0x0);
        gbc.writeMem(0x3ea0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4120);
        EXPECT(gbc.pc(), 0x3ea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 015D
        gbc.setState(0x4c60, 0x5f9, 0xc990, 0xfeda, 0x2adb, 0xddfc, 0x1, 0x1);
        gbc.writeMem(0x4c60, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5f9);
        EXPECT(gbc.pc(), 0x4c62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 015E
        gbc.setState(0x1055, 0x1f58, 0x9a30, 0xc53a, 0xd389, 0x4aee, 0x0, 0x1);
        gbc.writeMem(0x1055, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1f58);
        EXPECT(gbc.pc(), 0x1057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 015F
        gbc.setState(0x78e5, 0x3c4d, 0xd4f0, 0x5ff9, 0x73d6, 0x8a3a, 0x0, 0x0);
        gbc.writeMem(0x78e5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3c4d);
        EXPECT(gbc.pc(), 0x78e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0160
        gbc.setState(0xb569, 0x3c4f, 0x4f20, 0x7aca, 0xf354, 0x9b50, 0x0, 0x0);
        gbc.writeMem(0xb569, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x3c4f);
        EXPECT(gbc.pc(), 0xb56b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb569), 0xcb);
        EXPECT(gbc.readMem(0xb56a), 0xe8);
        // CB E8 0161
        gbc.setState(0x78e9, 0x82d3, 0x10d0, 0xdf71, 0x8def, 0x6c8d, 0x1, 0x0);
        gbc.writeMem(0x78e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x82d3);
        EXPECT(gbc.pc(), 0x78eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0162
        gbc.setState(0x19d1, 0x6ee9, 0x2c0, 0x3bcb, 0xfb2b, 0x662, 0x0, 0x1);
        gbc.writeMem(0x19d1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6ee9);
        EXPECT(gbc.pc(), 0x19d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0163
        gbc.setState(0xe236, 0x877f, 0xf810, 0x7f5c, 0x6294, 0xbd9d, 0x1, 0x0);
        gbc.writeMem(0xe236, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x877f);
        EXPECT(gbc.pc(), 0xe238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe236), 0xcb);
        EXPECT(gbc.readMem(0xe237), 0xe8);
        // CB E8 0164
        gbc.setState(0xb571, 0x4d9c, 0x83e0, 0x7504, 0x8c25, 0xccf7, 0x1, 0x1);
        gbc.writeMem(0xb571, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4d9c);
        EXPECT(gbc.pc(), 0xb573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb571), 0xcb);
        EXPECT(gbc.readMem(0xb572), 0xe8);
        // CB E8 0165
        gbc.setState(0x9385, 0xbdf4, 0x34b0, 0x6cca, 0x1656, 0x1f49, 0x1, 0x0);
        gbc.writeMem(0x9385, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbdf4);
        EXPECT(gbc.pc(), 0x9387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9385), 0xcb);
        EXPECT(gbc.readMem(0x9386), 0xe8);
        // CB E8 0166
        gbc.setState(0x464b, 0x2fd, 0x8890, 0x20ae, 0xd0ac, 0x52a0, 0x1, 0x0);
        gbc.writeMem(0x464b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2fd);
        EXPECT(gbc.pc(), 0x464d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0167
        gbc.setState(0xa49, 0x820, 0xd1e0, 0x75dd, 0x10f7, 0x7957, 0x1, 0x0);
        gbc.writeMem(0xa49, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x820);
        EXPECT(gbc.pc(), 0xa4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0168
        gbc.setState(0x2d2e, 0x6e1c, 0x7f40, 0x4099, 0x23ae, 0xc537, 0x0, 0x1);
        gbc.writeMem(0x2d2e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6e1c);
        EXPECT(gbc.pc(), 0x2d30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0169
        gbc.setState(0x2c45, 0x9c5c, 0xcc70, 0x8428, 0xa933, 0xec70, 0x0, 0x0);
        gbc.writeMem(0x2c45, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9c5c);
        EXPECT(gbc.pc(), 0x2c47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 016A
        gbc.setState(0xb1c, 0xb958, 0x2d80, 0xb5c5, 0xcaa3, 0xaaf, 0x0, 0x1);
        gbc.writeMem(0xb1c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb958);
        EXPECT(gbc.pc(), 0xb1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 016B
        gbc.setState(0x7d99, 0xcbfe, 0x4b10, 0x7acd, 0xbe02, 0x7b88, 0x1, 0x0);
        gbc.writeMem(0x7d99, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xcbfe);
        EXPECT(gbc.pc(), 0x7d9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 016C
        gbc.setState(0xc607, 0x3f63, 0x5720, 0xb9a2, 0xdcff, 0x42fe, 0x0, 0x1);
        gbc.writeMem(0xc607, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3f63);
        EXPECT(gbc.pc(), 0xc609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc607), 0xcb);
        EXPECT(gbc.readMem(0xc608), 0xe8);
        // CB E8 016D
        gbc.setState(0x8c06, 0x1e50, 0x6620, 0x708f, 0x8af1, 0x1572, 0x0, 0x0);
        gbc.writeMem(0x8c06, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1e50);
        EXPECT(gbc.pc(), 0x8c08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c06), 0xcb);
        EXPECT(gbc.readMem(0x8c07), 0xe8);
        // CB E8 016E
        gbc.setState(0xc820, 0xa345, 0x55c0, 0x751f, 0x8ed9, 0xa8d, 0x0, 0x0);
        gbc.writeMem(0xc820, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa345);
        EXPECT(gbc.pc(), 0xc822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc820), 0xcb);
        EXPECT(gbc.readMem(0xc821), 0xe8);
        // CB E8 016F
        gbc.setState(0x97f9, 0x3db9, 0xa050, 0x9256, 0x5a77, 0x8435, 0x0, 0x1);
        gbc.writeMem(0x97f9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3db9);
        EXPECT(gbc.pc(), 0x97fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f9), 0xcb);
        EXPECT(gbc.readMem(0x97fa), 0xe8);
        // CB E8 0170
        gbc.setState(0x2eea, 0x4041, 0x2a60, 0x761, 0xda51, 0x4cbb, 0x1, 0x0);
        gbc.writeMem(0x2eea, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4041);
        EXPECT(gbc.pc(), 0x2eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0172
        gbc.setState(0x991e, 0x9ca1, 0x5c30, 0xd49f, 0xad32, 0x874e, 0x0, 0x1);
        gbc.writeMem(0x991e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9ca1);
        EXPECT(gbc.pc(), 0x9920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991e), 0xcb);
        EXPECT(gbc.readMem(0x991f), 0xe8);
        // CB E8 0173
        gbc.setState(0xae0f, 0x16f5, 0x75d0, 0x5703, 0x2efc, 0xfd51, 0x1, 0x1);
        gbc.writeMem(0xae0f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x16f5);
        EXPECT(gbc.pc(), 0xae11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae0f), 0xcb);
        EXPECT(gbc.readMem(0xae10), 0xe8);
        // CB E8 0174
        gbc.setState(0x7af5, 0xc3d8, 0x4aa0, 0xe9e5, 0x2cdd, 0x944a, 0x1, 0x1);
        gbc.writeMem(0x7af5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc3d8);
        EXPECT(gbc.pc(), 0x7af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0175
        gbc.setState(0x2bde, 0x8403, 0xc240, 0x56ec, 0xb7ea, 0xb64, 0x1, 0x1);
        gbc.writeMem(0x2bde, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8403);
        EXPECT(gbc.pc(), 0x2be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0176
        gbc.setState(0x1786, 0xf80c, 0x9730, 0x1d2f, 0x1383, 0xeb4b, 0x1, 0x1);
        gbc.writeMem(0x1786, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf80c);
        EXPECT(gbc.pc(), 0x1788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0177
        gbc.setState(0x569a, 0x253f, 0x2de0, 0xe018, 0x38b6, 0x41a7, 0x1, 0x1);
        gbc.writeMem(0x569a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x253f);
        EXPECT(gbc.pc(), 0x569c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0178
        gbc.setState(0x55c3, 0xa1b, 0xf500, 0x4c13, 0xe9a3, 0x521, 0x1, 0x0);
        gbc.writeMem(0x55c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa1b);
        EXPECT(gbc.pc(), 0x55c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0179
        gbc.setState(0xc543, 0x4906, 0x1720, 0x3c2d, 0xfe00, 0xb999, 0x1, 0x1);
        gbc.writeMem(0xc543, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4906);
        EXPECT(gbc.pc(), 0xc545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc543), 0xcb);
        EXPECT(gbc.readMem(0xc544), 0xe8);
        // CB E8 017A
        gbc.setState(0x7368, 0x3807, 0xc650, 0xc95f, 0x17be, 0x8f5d, 0x0, 0x0);
        gbc.writeMem(0x7368, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3807);
        EXPECT(gbc.pc(), 0x736a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 017B
        gbc.setState(0xa824, 0xdfe9, 0xe230, 0x793, 0x5d73, 0xbb74, 0x0, 0x0);
        gbc.writeMem(0xa824, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xdfe9);
        EXPECT(gbc.pc(), 0xa826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa824), 0xcb);
        EXPECT(gbc.readMem(0xa825), 0xe8);
        // CB E8 017D
        gbc.setState(0x4df7, 0x4551, 0xc880, 0x54a4, 0xbcef, 0x2108, 0x1, 0x1);
        gbc.writeMem(0x4df7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4551);
        EXPECT(gbc.pc(), 0x4df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 017E
        gbc.setState(0x59e2, 0xc0ec, 0xfda0, 0x9427, 0x45e3, 0x785d, 0x0, 0x0);
        gbc.writeMem(0x59e2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc0ec);
        EXPECT(gbc.pc(), 0x59e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 017F
        gbc.setState(0xbfb4, 0x7239, 0xb750, 0xadca, 0x71d0, 0xfadf, 0x0, 0x0);
        gbc.writeMem(0xbfb4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7239);
        EXPECT(gbc.pc(), 0xbfb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb4), 0xcb);
        EXPECT(gbc.readMem(0xbfb5), 0xe8);
        // CB E8 0180
        gbc.setState(0xe85, 0x3f6e, 0x6bb0, 0xa69a, 0xc44d, 0xdbd8, 0x1, 0x0);
        gbc.writeMem(0xe85, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3f6e);
        EXPECT(gbc.pc(), 0xe87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0182
        gbc.setState(0xba4, 0x4c5, 0xff00, 0xa73e, 0xf819, 0x8903, 0x0, 0x1);
        gbc.writeMem(0xba4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4c5);
        EXPECT(gbc.pc(), 0xba6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0183
        gbc.setState(0x3844, 0x6c05, 0x27e0, 0xeed, 0x3aad, 0x6d10, 0x0, 0x1);
        gbc.writeMem(0x3844, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6c05);
        EXPECT(gbc.pc(), 0x3846);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0184
        gbc.setState(0x9ded, 0x3280, 0xe090, 0x52c0, 0x3241, 0xf72, 0x1, 0x0);
        gbc.writeMem(0x9ded, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3280);
        EXPECT(gbc.pc(), 0x9def);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ded), 0xcb);
        EXPECT(gbc.readMem(0x9dee), 0xe8);
        // CB E8 0185
        gbc.setState(0x95da, 0x8ccb, 0xe4b0, 0xb443, 0x76b3, 0xe769, 0x0, 0x0);
        gbc.writeMem(0x95da, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8ccb);
        EXPECT(gbc.pc(), 0x95dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95da), 0xcb);
        EXPECT(gbc.readMem(0x95db), 0xe8);
        // CB E8 0186
        gbc.setState(0xce4e, 0x36bf, 0x52d0, 0x9805, 0xdcc5, 0x6a03, 0x0, 0x0);
        gbc.writeMem(0xce4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x36bf);
        EXPECT(gbc.pc(), 0xce50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4e), 0xcb);
        EXPECT(gbc.readMem(0xce4f), 0xe8);
        // CB E8 0187
        gbc.setState(0xadb9, 0x8111, 0xa8e0, 0x2097, 0x562e, 0x763d, 0x1, 0x0);
        gbc.writeMem(0xadb9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8111);
        EXPECT(gbc.pc(), 0xadbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb9), 0xcb);
        EXPECT(gbc.readMem(0xadba), 0xe8);
        // CB E8 0188
        gbc.setState(0x9903, 0xf69a, 0xfc20, 0xfb49, 0xd423, 0x1f58, 0x1, 0x1);
        gbc.writeMem(0x9903, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf69a);
        EXPECT(gbc.pc(), 0x9905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9903), 0xcb);
        EXPECT(gbc.readMem(0x9904), 0xe8);
        // CB E8 0189
        gbc.setState(0x1ad0, 0x1f83, 0x3e60, 0xb903, 0x8ac3, 0xc5c5, 0x0, 0x0);
        gbc.writeMem(0x1ad0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1f83);
        EXPECT(gbc.pc(), 0x1ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 018A
        gbc.setState(0xac78, 0xa7d, 0xe770, 0xd2eb, 0x3280, 0xb015, 0x1, 0x1);
        gbc.writeMem(0xac78, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xa7d);
        EXPECT(gbc.pc(), 0xac7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac78), 0xcb);
        EXPECT(gbc.readMem(0xac79), 0xe8);
        // CB E8 018B
        gbc.setState(0xda8, 0x228d, 0x3570, 0x713a, 0x2a5b, 0xf7ce, 0x1, 0x0);
        gbc.writeMem(0xda8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x228d);
        EXPECT(gbc.pc(), 0xdaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 018C
        gbc.setState(0x84c7, 0x9759, 0x3900, 0x7a67, 0xdb8f, 0xd578, 0x0, 0x0);
        gbc.writeMem(0x84c7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9759);
        EXPECT(gbc.pc(), 0x84c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c7), 0xcb);
        EXPECT(gbc.readMem(0x84c8), 0xe8);
        // CB E8 018D
        gbc.setState(0x5339, 0xbb60, 0x8d10, 0x58a1, 0x9ae, 0xebf7, 0x1, 0x0);
        gbc.writeMem(0x5339, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xbb60);
        EXPECT(gbc.pc(), 0x533b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 018E
        gbc.setState(0xa7bd, 0x85ba, 0x91c0, 0x340f, 0x9895, 0xd8f8, 0x0, 0x0);
        gbc.writeMem(0xa7bd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x85ba);
        EXPECT(gbc.pc(), 0xa7bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7bd), 0xcb);
        EXPECT(gbc.readMem(0xa7be), 0xe8);
        // CB E8 018F
        gbc.setState(0xcbbf, 0xd9f5, 0x7a40, 0x4680, 0x25e, 0x3ac, 0x0, 0x0);
        gbc.writeMem(0xcbbf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd9f5);
        EXPECT(gbc.pc(), 0xcbc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbf), 0xcb);
        EXPECT(gbc.readMem(0xcbc0), 0xe8);
        // CB E8 0190
        gbc.setState(0xd8c2, 0x97eb, 0x6c50, 0x6210, 0xc05a, 0x2f8b, 0x1, 0x1);
        gbc.writeMem(0xd8c2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x97eb);
        EXPECT(gbc.pc(), 0xd8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c2), 0xcb);
        EXPECT(gbc.readMem(0xd8c3), 0xe8);
        // CB E8 0192
        gbc.setState(0xe6fd, 0xd158, 0xe0c0, 0x8c24, 0x6a2e, 0x64fc, 0x1, 0x1);
        gbc.writeMem(0xe6fd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd158);
        EXPECT(gbc.pc(), 0xe6ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6fd), 0xcb);
        EXPECT(gbc.readMem(0xe6fe), 0xe8);
        // CB E8 0193
        gbc.setState(0x6835, 0x8b00, 0x6070, 0x5343, 0x7be6, 0xcd5a, 0x1, 0x0);
        gbc.writeMem(0x6835, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8b00);
        EXPECT(gbc.pc(), 0x6837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0194
        gbc.setState(0xcb2a, 0x28ea, 0x12a0, 0xc374, 0x605, 0x1245, 0x0, 0x1);
        gbc.writeMem(0xcb2a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x28ea);
        EXPECT(gbc.pc(), 0xcb2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2a), 0xcb);
        EXPECT(gbc.readMem(0xcb2b), 0xe8);
        // CB E8 0195
        gbc.setState(0xb73b, 0x7bde, 0xb8e0, 0xedee, 0xa838, 0xb1c9, 0x1, 0x0);
        gbc.writeMem(0xb73b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7bde);
        EXPECT(gbc.pc(), 0xb73d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb73b), 0xcb);
        EXPECT(gbc.readMem(0xb73c), 0xe8);
        // CB E8 0196
        gbc.setState(0x83e6, 0x77b6, 0xd7b0, 0x5806, 0x2e5e, 0x2334, 0x1, 0x1);
        gbc.writeMem(0x83e6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x77b6);
        EXPECT(gbc.pc(), 0x83e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83e6), 0xcb);
        EXPECT(gbc.readMem(0x83e7), 0xe8);
        // CB E8 0197
        gbc.setState(0x8a4e, 0x46ce, 0xdd20, 0xf145, 0xf56d, 0xab32, 0x1, 0x0);
        gbc.writeMem(0x8a4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x46ce);
        EXPECT(gbc.pc(), 0x8a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a4e), 0xcb);
        EXPECT(gbc.readMem(0x8a4f), 0xe8);
        // CB E8 0198
        gbc.setState(0x588b, 0x307b, 0x2450, 0x2896, 0xcb41, 0xdcc1, 0x1, 0x0);
        gbc.writeMem(0x588b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x307b);
        EXPECT(gbc.pc(), 0x588d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0199
        gbc.setState(0xa8, 0x405c, 0x8b10, 0x5fbc, 0xd4fb, 0xb7df, 0x1, 0x1);
        gbc.writeMem(0xa8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x405c);
        EXPECT(gbc.pc(), 0xaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 019A
        gbc.setState(0xa1be, 0xe8d5, 0xd530, 0x9145, 0x9579, 0xe34d, 0x1, 0x1);
        gbc.writeMem(0xa1be, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe8d5);
        EXPECT(gbc.pc(), 0xa1c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1be), 0xcb);
        EXPECT(gbc.readMem(0xa1bf), 0xe8);
        // CB E8 019B
        gbc.setState(0xe58, 0x4db1, 0x6970, 0xe972, 0x847f, 0x4a8, 0x0, 0x0);
        gbc.writeMem(0xe58, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4db1);
        EXPECT(gbc.pc(), 0xe5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 019C
        gbc.setState(0xda9, 0x5ab3, 0x15a0, 0x3e7a, 0x2d0d, 0xd0a9, 0x0, 0x1);
        gbc.writeMem(0xda9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5ab3);
        EXPECT(gbc.pc(), 0xdab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 019D
        gbc.setState(0xa4f6, 0x63dd, 0x4e10, 0x6de8, 0xa8e5, 0x1aa, 0x0, 0x0);
        gbc.writeMem(0xa4f6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x63dd);
        EXPECT(gbc.pc(), 0xa4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4f6), 0xcb);
        EXPECT(gbc.readMem(0xa4f7), 0xe8);
        // CB E8 019E
        gbc.setState(0xdb10, 0xc408, 0x2d70, 0xa3ee, 0xc9c5, 0xd044, 0x0, 0x0);
        gbc.writeMem(0xdb10, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc408);
        EXPECT(gbc.pc(), 0xdb12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb10), 0xcb);
        EXPECT(gbc.readMem(0xdb11), 0xe8);
        // CB E8 019F
        gbc.setState(0x8d30, 0xda60, 0xe080, 0x323f, 0x9a63, 0x2d0a, 0x0, 0x0);
        gbc.writeMem(0x8d30, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xda60);
        EXPECT(gbc.pc(), 0x8d32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d30), 0xcb);
        EXPECT(gbc.readMem(0x8d31), 0xe8);
        // CB E8 01A0
        gbc.setState(0x2592, 0x10ee, 0x4da0, 0x580c, 0xe224, 0xf6d8, 0x0, 0x1);
        gbc.writeMem(0x2592, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x10ee);
        EXPECT(gbc.pc(), 0x2594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01A1
        gbc.setState(0x4001, 0xfec1, 0x4e30, 0xc788, 0x60b, 0x686c, 0x1, 0x0);
        gbc.writeMem(0x4001, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfec1);
        EXPECT(gbc.pc(), 0x4003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01A2
        gbc.setState(0xc9f5, 0xf242, 0xabf0, 0xff9e, 0xb4f0, 0x2b50, 0x1, 0x1);
        gbc.writeMem(0xc9f5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf242);
        EXPECT(gbc.pc(), 0xc9f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f5), 0xcb);
        EXPECT(gbc.readMem(0xc9f6), 0xe8);
        // CB E8 01A3
        gbc.setState(0x363b, 0x4adb, 0x6a00, 0xe00b, 0x21c0, 0x65bf, 0x1, 0x1);
        gbc.writeMem(0x363b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4adb);
        EXPECT(gbc.pc(), 0x363d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01A4
        gbc.setState(0xcd10, 0x77a6, 0x53b0, 0xd5f6, 0x6cc8, 0xacbc, 0x0, 0x0);
        gbc.writeMem(0xcd10, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x77a6);
        EXPECT(gbc.pc(), 0xcd12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd10), 0xcb);
        EXPECT(gbc.readMem(0xcd11), 0xe8);
        // CB E8 01A6
        gbc.setState(0x948c, 0x314, 0x1510, 0xfde4, 0x2a4e, 0x9898, 0x1, 0x0);
        gbc.writeMem(0x948c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x314);
        EXPECT(gbc.pc(), 0x948e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x948c), 0xcb);
        EXPECT(gbc.readMem(0x948d), 0xe8);
        // CB E8 01A7
        gbc.setState(0x6dd3, 0xbb7e, 0xcaf0, 0x18f0, 0x7b18, 0xca38, 0x0, 0x1);
        gbc.writeMem(0x6dd3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xbb7e);
        EXPECT(gbc.pc(), 0x6dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01A8
        gbc.setState(0xa027, 0x6485, 0x67a0, 0xc47d, 0xe6a4, 0x3647, 0x0, 0x1);
        gbc.writeMem(0xa027, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6485);
        EXPECT(gbc.pc(), 0xa029);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa027), 0xcb);
        EXPECT(gbc.readMem(0xa028), 0xe8);
        // CB E8 01A9
        gbc.setState(0x8df1, 0x44b9, 0x2810, 0xced7, 0x97e5, 0x6269, 0x1, 0x0);
        gbc.writeMem(0x8df1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x44b9);
        EXPECT(gbc.pc(), 0x8df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df1), 0xcb);
        EXPECT(gbc.readMem(0x8df2), 0xe8);
        // CB E8 01AA
        gbc.setState(0x415c, 0x6aa0, 0xd630, 0xd9b3, 0xc6b1, 0x7ef5, 0x1, 0x0);
        gbc.writeMem(0x415c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6aa0);
        EXPECT(gbc.pc(), 0x415e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01AB
        gbc.setState(0xc565, 0x10c, 0xa680, 0xa475, 0x56dc, 0xfd84, 0x1, 0x1);
        gbc.writeMem(0xc565, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x10c);
        EXPECT(gbc.pc(), 0xc567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc565), 0xcb);
        EXPECT(gbc.readMem(0xc566), 0xe8);
        // CB E8 01AC
        gbc.setState(0x2273, 0xba13, 0x1cd0, 0xb432, 0x96d0, 0x5033, 0x1, 0x0);
        gbc.writeMem(0x2273, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xba13);
        EXPECT(gbc.pc(), 0x2275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01AD
        gbc.setState(0xcb86, 0xc3c7, 0x23d0, 0xeb51, 0x55a7, 0xf142, 0x0, 0x0);
        gbc.writeMem(0xcb86, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc3c7);
        EXPECT(gbc.pc(), 0xcb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb86), 0xcb);
        EXPECT(gbc.readMem(0xcb87), 0xe8);
        // CB E8 01AE
        gbc.setState(0xcaf3, 0xd456, 0xd9c0, 0x3a7e, 0x9ae2, 0xce6b, 0x0, 0x0);
        gbc.writeMem(0xcaf3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd456);
        EXPECT(gbc.pc(), 0xcaf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf3), 0xcb);
        EXPECT(gbc.readMem(0xcaf4), 0xe8);
        // CB E8 01AF
        gbc.setState(0x6840, 0xca1e, 0x3f00, 0x5283, 0x13ad, 0x94ef, 0x1, 0x1);
        gbc.writeMem(0x6840, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xca1e);
        EXPECT(gbc.pc(), 0x6842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01B0
        gbc.setState(0x1500, 0x66f6, 0xff40, 0xf0e7, 0x54f5, 0xf336, 0x0, 0x0);
        gbc.writeMem(0x1500, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x66f6);
        EXPECT(gbc.pc(), 0x1502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01B1
        gbc.setState(0xe7e, 0x3980, 0x6010, 0x77bc, 0x3d94, 0x5e83, 0x1, 0x1);
        gbc.writeMem(0xe7e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3980);
        EXPECT(gbc.pc(), 0xe80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01B2
        gbc.setState(0x8783, 0x554f, 0x1070, 0x2c88, 0xe326, 0xb491, 0x1, 0x1);
        gbc.writeMem(0x8783, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x554f);
        EXPECT(gbc.pc(), 0x8785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8783), 0xcb);
        EXPECT(gbc.readMem(0x8784), 0xe8);
        // CB E8 01B3
        gbc.setState(0x21a4, 0x46f8, 0x2f40, 0x6204, 0xb72, 0xd845, 0x1, 0x0);
        gbc.writeMem(0x21a4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x46f8);
        EXPECT(gbc.pc(), 0x21a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01B4
        gbc.setState(0x6de5, 0xaa8c, 0x2a50, 0xbb6e, 0x8b97, 0x6dbf, 0x1, 0x1);
        gbc.writeMem(0x6de5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaa8c);
        EXPECT(gbc.pc(), 0x6de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01B5
        gbc.setState(0x1b4f, 0xb1de, 0x3b20, 0x7fe6, 0x6059, 0x795a, 0x0, 0x0);
        gbc.writeMem(0x1b4f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb1de);
        EXPECT(gbc.pc(), 0x1b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01B6
        gbc.setState(0xc595, 0xbba2, 0xdd10, 0x5e5d, 0x75f6, 0x8080, 0x1, 0x1);
        gbc.writeMem(0xc595, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbba2);
        EXPECT(gbc.pc(), 0xc597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc595), 0xcb);
        EXPECT(gbc.readMem(0xc596), 0xe8);
        // CB E8 01B7
        gbc.setState(0x2290, 0x8dc7, 0xd8e0, 0x3d7a, 0xc1b9, 0xa1ed, 0x0, 0x1);
        gbc.writeMem(0x2290, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8dc7);
        EXPECT(gbc.pc(), 0x2292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01B8
        gbc.setState(0xdf28, 0xae1f, 0x1250, 0x392f, 0xe61d, 0x6cc0, 0x1, 0x1);
        gbc.writeMem(0xdf28, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xae1f);
        EXPECT(gbc.pc(), 0xdf2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf28), 0xcb);
        EXPECT(gbc.readMem(0xdf29), 0xe8);
        // CB E8 01B9
        gbc.setState(0xab17, 0x111f, 0x4750, 0xde28, 0x5bc0, 0xc64b, 0x1, 0x1);
        gbc.writeMem(0xab17, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x111f);
        EXPECT(gbc.pc(), 0xab19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab17), 0xcb);
        EXPECT(gbc.readMem(0xab18), 0xe8);
        // CB E8 01BA
        gbc.setState(0x8358, 0x9bed, 0x70d0, 0x70b7, 0x264d, 0xeaae, 0x0, 0x1);
        gbc.writeMem(0x8358, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9bed);
        EXPECT(gbc.pc(), 0x835a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8358), 0xcb);
        EXPECT(gbc.readMem(0x8359), 0xe8);
        // CB E8 01BB
        gbc.setState(0xa979, 0x6121, 0x3f10, 0x4fc5, 0x471a, 0x2cb2, 0x1, 0x0);
        gbc.writeMem(0xa979, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6121);
        EXPECT(gbc.pc(), 0xa97b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa979), 0xcb);
        EXPECT(gbc.readMem(0xa97a), 0xe8);
        // CB E8 01BC
        gbc.setState(0xa95d, 0xd066, 0xf040, 0x4be3, 0xab94, 0x8a65, 0x1, 0x1);
        gbc.writeMem(0xa95d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd066);
        EXPECT(gbc.pc(), 0xa95f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa95d), 0xcb);
        EXPECT(gbc.readMem(0xa95e), 0xe8);
        // CB E8 01BD
        gbc.setState(0xe764, 0xa61d, 0x5490, 0xcc06, 0x887d, 0x167a, 0x0, 0x1);
        gbc.writeMem(0xe764, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa61d);
        EXPECT(gbc.pc(), 0xe766);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe764), 0xcb);
        EXPECT(gbc.readMem(0xe765), 0xe8);
        // CB E8 01BE
        gbc.setState(0x3b50, 0x72ce, 0x38b0, 0xe87f, 0xa552, 0x79d7, 0x0, 0x0);
        gbc.writeMem(0x3b50, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x72ce);
        EXPECT(gbc.pc(), 0x3b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01BF
        gbc.setState(0xcabd, 0xa014, 0x3c10, 0x5338, 0x63ff, 0x7191, 0x0, 0x1);
        gbc.writeMem(0xcabd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa014);
        EXPECT(gbc.pc(), 0xcabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcabd), 0xcb);
        EXPECT(gbc.readMem(0xcabe), 0xe8);
        // CB E8 01C0
        gbc.setState(0x2478, 0x40a1, 0xfc0, 0x3190, 0x4b26, 0xe7fa, 0x0, 0x0);
        gbc.writeMem(0x2478, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x40a1);
        EXPECT(gbc.pc(), 0x247a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01C1
        gbc.setState(0xc529, 0x28a6, 0xc560, 0x125, 0x1981, 0xf533, 0x1, 0x1);
        gbc.writeMem(0xc529, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x28a6);
        EXPECT(gbc.pc(), 0xc52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc529), 0xcb);
        EXPECT(gbc.readMem(0xc52a), 0xe8);
        // CB E8 01C2
        gbc.setState(0x12f, 0x447e, 0x710, 0x5cf1, 0x89b4, 0xbc98, 0x0, 0x1);
        gbc.writeMem(0x12f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x447e);
        EXPECT(gbc.pc(), 0x131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01C3
        gbc.setState(0xdf9b, 0xb3b7, 0xc740, 0x419a, 0x116d, 0x33fc, 0x1, 0x0);
        gbc.writeMem(0xdf9b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb3b7);
        EXPECT(gbc.pc(), 0xdf9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf9b), 0xcb);
        EXPECT(gbc.readMem(0xdf9c), 0xe8);
        // CB E8 01C4
        gbc.setState(0x629b, 0xefa1, 0xef40, 0x8129, 0x86f4, 0xe537, 0x0, 0x0);
        gbc.writeMem(0x629b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xefa1);
        EXPECT(gbc.pc(), 0x629d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01C5
        gbc.setState(0xd7fa, 0x13f7, 0x9b60, 0xe020, 0xa783, 0xdc73, 0x1, 0x0);
        gbc.writeMem(0xd7fa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x13f7);
        EXPECT(gbc.pc(), 0xd7fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7fa), 0xcb);
        EXPECT(gbc.readMem(0xd7fb), 0xe8);
        // CB E8 01C6
        gbc.setState(0xa253, 0x9c74, 0xb1b0, 0xfa3b, 0xd734, 0xee97, 0x1, 0x1);
        gbc.writeMem(0xa253, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9c74);
        EXPECT(gbc.pc(), 0xa255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa253), 0xcb);
        EXPECT(gbc.readMem(0xa254), 0xe8);
        // CB E8 01C7
        gbc.setState(0x5fc, 0x8f0, 0x2c30, 0xef50, 0x7c17, 0xf2e0, 0x1, 0x1);
        gbc.writeMem(0x5fc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8f0);
        EXPECT(gbc.pc(), 0x5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01C8
        gbc.setState(0xde1f, 0x3845, 0xf3b0, 0x29e9, 0x78f9, 0x88f, 0x1, 0x0);
        gbc.writeMem(0xde1f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3845);
        EXPECT(gbc.pc(), 0xde21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde1f), 0xcb);
        EXPECT(gbc.readMem(0xde20), 0xe8);
        // CB E8 01CA
        gbc.setState(0xbc65, 0xbfa8, 0xcbd0, 0x1198, 0x4a9d, 0x4303, 0x1, 0x0);
        gbc.writeMem(0xbc65, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbfa8);
        EXPECT(gbc.pc(), 0xbc67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc65), 0xcb);
        EXPECT(gbc.readMem(0xbc66), 0xe8);
        // CB E8 01CB
        gbc.setState(0xcd70, 0xc6ba, 0xd1d0, 0xc476, 0xca4e, 0x687, 0x0, 0x1);
        gbc.writeMem(0xcd70, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc6ba);
        EXPECT(gbc.pc(), 0xcd72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd70), 0xcb);
        EXPECT(gbc.readMem(0xcd71), 0xe8);
        // CB E8 01CC
        gbc.setState(0x9915, 0x2e29, 0xd800, 0xd495, 0x82cd, 0x3675, 0x0, 0x1);
        gbc.writeMem(0x9915, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2e29);
        EXPECT(gbc.pc(), 0x9917);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9915), 0xcb);
        EXPECT(gbc.readMem(0x9916), 0xe8);
        // CB E8 01CD
        gbc.setState(0xa59b, 0xe66a, 0xa620, 0x13e, 0x5cc6, 0xbcb3, 0x0, 0x0);
        gbc.writeMem(0xa59b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe66a);
        EXPECT(gbc.pc(), 0xa59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59b), 0xcb);
        EXPECT(gbc.readMem(0xa59c), 0xe8);
        // CB E8 01CE
        gbc.setState(0x7d4e, 0x4500, 0x5590, 0xc37b, 0x5d37, 0xed03, 0x1, 0x0);
        gbc.writeMem(0x7d4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4500);
        EXPECT(gbc.pc(), 0x7d50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01CF
        gbc.setState(0xbf04, 0xd0b0, 0x8240, 0x3e8b, 0x8b6e, 0x6a4a, 0x1, 0x1);
        gbc.writeMem(0xbf04, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd0b0);
        EXPECT(gbc.pc(), 0xbf06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf04), 0xcb);
        EXPECT(gbc.readMem(0xbf05), 0xe8);
        // CB E8 01D0
        gbc.setState(0x9d80, 0x6ad2, 0x740, 0x597a, 0x60d4, 0xf9df, 0x1, 0x1);
        gbc.writeMem(0x9d80, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6ad2);
        EXPECT(gbc.pc(), 0x9d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d80), 0xcb);
        EXPECT(gbc.readMem(0x9d81), 0xe8);
        // CB E8 01D1
        gbc.setState(0x6e0d, 0xcf9b, 0x6e70, 0x503f, 0x6268, 0x978, 0x1, 0x1);
        gbc.writeMem(0x6e0d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xcf9b);
        EXPECT(gbc.pc(), 0x6e0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01D2
        gbc.setState(0x75ee, 0x626b, 0xd1e0, 0x2d42, 0xc4c0, 0xb1f9, 0x1, 0x0);
        gbc.writeMem(0x75ee, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x626b);
        EXPECT(gbc.pc(), 0x75f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01D3
        gbc.setState(0xa59a, 0x94f4, 0xf660, 0x4efe, 0xe4b9, 0x22be, 0x0, 0x0);
        gbc.writeMem(0xa59a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x94f4);
        EXPECT(gbc.pc(), 0xa59c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59a), 0xcb);
        EXPECT(gbc.readMem(0xa59b), 0xe8);
        // CB E8 01D4
        gbc.setState(0xed65, 0x208a, 0x9f0, 0x2170, 0xa21, 0xd753, 0x0, 0x1);
        gbc.writeMem(0xed65, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x208a);
        EXPECT(gbc.pc(), 0xed67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed65), 0xcb);
        EXPECT(gbc.readMem(0xed66), 0xe8);
        // CB E8 01D5
        gbc.setState(0xe274, 0x9419, 0x4b50, 0x8ca8, 0xa292, 0xd084, 0x1, 0x0);
        gbc.writeMem(0xe274, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9419);
        EXPECT(gbc.pc(), 0xe276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe274), 0xcb);
        EXPECT(gbc.readMem(0xe275), 0xe8);
        // CB E8 01D6
        gbc.setState(0xf15, 0x5e6d, 0xdcf0, 0xabe0, 0xce10, 0x21e5, 0x1, 0x1);
        gbc.writeMem(0xf15, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5e6d);
        EXPECT(gbc.pc(), 0xf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01D7
        gbc.setState(0x6bd0, 0xebfb, 0x59e0, 0xd12c, 0xb732, 0x5a22, 0x1, 0x1);
        gbc.writeMem(0x6bd0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xebfb);
        EXPECT(gbc.pc(), 0x6bd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01D8
        gbc.setState(0x180, 0x4b8e, 0xdd20, 0xef03, 0xa59d, 0x4e7c, 0x0, 0x0);
        gbc.writeMem(0x180, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4b8e);
        EXPECT(gbc.pc(), 0x182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01D9
        gbc.setState(0xefb6, 0x9be4, 0x7440, 0x81f7, 0x4088, 0x1b80, 0x0, 0x1);
        gbc.writeMem(0xefb6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9be4);
        EXPECT(gbc.pc(), 0xefb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb6), 0xcb);
        EXPECT(gbc.readMem(0xefb7), 0xe8);
        // CB E8 01DA
        gbc.setState(0x465c, 0x4b90, 0x79f0, 0x6ede, 0x71a2, 0x8fce, 0x1, 0x1);
        gbc.writeMem(0x465c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4b90);
        EXPECT(gbc.pc(), 0x465e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01DB
        gbc.setState(0xcce, 0x805c, 0x8b40, 0xd0c1, 0x1f87, 0xa9e2, 0x0, 0x1);
        gbc.writeMem(0xcce, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x805c);
        EXPECT(gbc.pc(), 0xcd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01DC
        gbc.setState(0x9709, 0xe10c, 0xe790, 0xc21d, 0xad45, 0xdb30, 0x1, 0x0);
        gbc.writeMem(0x9709, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe10c);
        EXPECT(gbc.pc(), 0x970b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9709), 0xcb);
        EXPECT(gbc.readMem(0x970a), 0xe8);
        // CB E8 01DD
        gbc.setState(0xa662, 0xd5db, 0x5680, 0x4746, 0x11bc, 0x1b13, 0x1, 0x0);
        gbc.writeMem(0xa662, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xd5db);
        EXPECT(gbc.pc(), 0xa664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa662), 0xcb);
        EXPECT(gbc.readMem(0xa663), 0xe8);
        // CB E8 01DE
        gbc.setState(0xe885, 0x4ce0, 0xe300, 0xb6db, 0xebc9, 0x11c2, 0x0, 0x1);
        gbc.writeMem(0xe885, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4ce0);
        EXPECT(gbc.pc(), 0xe887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe885), 0xcb);
        EXPECT(gbc.readMem(0xe886), 0xe8);
        // CB E8 01DF
        gbc.setState(0xe448, 0xc53f, 0x1d50, 0x7d44, 0x304, 0xa16, 0x0, 0x0);
        gbc.writeMem(0xe448, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc53f);
        EXPECT(gbc.pc(), 0xe44a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe448), 0xcb);
        EXPECT(gbc.readMem(0xe449), 0xe8);
        // CB E8 01E0
        gbc.setState(0x53d0, 0xd275, 0x5c60, 0xf6bc, 0xbef7, 0x6354, 0x0, 0x0);
        gbc.writeMem(0x53d0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd275);
        EXPECT(gbc.pc(), 0x53d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01E1
        gbc.setState(0xd325, 0x6628, 0x2f0, 0x88ee, 0x19ef, 0x5ac8, 0x1, 0x0);
        gbc.writeMem(0xd325, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6628);
        EXPECT(gbc.pc(), 0xd327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd325), 0xcb);
        EXPECT(gbc.readMem(0xd326), 0xe8);
        // CB E8 01E2
        gbc.setState(0x623e, 0xd08, 0xd5a0, 0xd810, 0x33fe, 0x9170, 0x1, 0x1);
        gbc.writeMem(0x623e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd08);
        EXPECT(gbc.pc(), 0x6240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01E3
        gbc.setState(0x7d41, 0xb448, 0x9240, 0x766c, 0xaca2, 0x8ddd, 0x0, 0x0);
        gbc.writeMem(0x7d41, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb448);
        EXPECT(gbc.pc(), 0x7d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01E4
        gbc.setState(0x6560, 0xe4c7, 0xb570, 0x9ac4, 0xaf08, 0x109b, 0x0, 0x0);
        gbc.writeMem(0x6560, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe4c7);
        EXPECT(gbc.pc(), 0x6562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01E6
        gbc.setState(0x96c2, 0x1804, 0x50b0, 0x1339, 0xaf17, 0x3297, 0x1, 0x0);
        gbc.writeMem(0x96c2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1804);
        EXPECT(gbc.pc(), 0x96c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c2), 0xcb);
        EXPECT(gbc.readMem(0x96c3), 0xe8);
        // CB E8 01E8
        gbc.setState(0x4231, 0x26f9, 0x50f0, 0xb4a7, 0xb44b, 0x81e4, 0x0, 0x1);
        gbc.writeMem(0x4231, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x26f9);
        EXPECT(gbc.pc(), 0x4233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01E9
        gbc.setState(0xa7bb, 0xf284, 0x11d0, 0x18f7, 0x4938, 0x366f, 0x1, 0x0);
        gbc.writeMem(0xa7bb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf284);
        EXPECT(gbc.pc(), 0xa7bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7bb), 0xcb);
        EXPECT(gbc.readMem(0xa7bc), 0xe8);
        // CB E8 01EA
        gbc.setState(0x5389, 0xf4a0, 0xf3f0, 0x75a8, 0xaa46, 0x434e, 0x0, 0x0);
        gbc.writeMem(0x5389, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf4a0);
        EXPECT(gbc.pc(), 0x538b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01EB
        gbc.setState(0x564b, 0x1b5a, 0x49d0, 0x25f7, 0x8807, 0xd635, 0x0, 0x1);
        gbc.writeMem(0x564b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1b5a);
        EXPECT(gbc.pc(), 0x564d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01EC
        gbc.setState(0xd196, 0xbca0, 0xb850, 0x879c, 0xb59f, 0xac09, 0x0, 0x1);
        gbc.writeMem(0xd196, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbca0);
        EXPECT(gbc.pc(), 0xd198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd196), 0xcb);
        EXPECT(gbc.readMem(0xd197), 0xe8);
        // CB E8 01ED
        gbc.setState(0x6292, 0x2133, 0xd7d0, 0xc220, 0xfcea, 0x6ee9, 0x0, 0x1);
        gbc.writeMem(0x6292, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2133);
        EXPECT(gbc.pc(), 0x6294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01EE
        gbc.setState(0x5f46, 0x8351, 0xe4a0, 0x52da, 0xc3d1, 0xfa89, 0x0, 0x1);
        gbc.writeMem(0x5f46, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8351);
        EXPECT(gbc.pc(), 0x5f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01EF
        gbc.setState(0xb0cf, 0xcf49, 0x700, 0x2d0, 0x8f2e, 0xa782, 0x0, 0x1);
        gbc.writeMem(0xb0cf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcf49);
        EXPECT(gbc.pc(), 0xb0d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0cf), 0xcb);
        EXPECT(gbc.readMem(0xb0d0), 0xe8);
        // CB E8 01F0
        gbc.setState(0x2e26, 0xa7a1, 0x4830, 0x429b, 0xc3f4, 0xf831, 0x0, 0x1);
        gbc.writeMem(0x2e26, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa7a1);
        EXPECT(gbc.pc(), 0x2e28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01F1
        gbc.setState(0x6b42, 0x1447, 0xd9c0, 0x4f5, 0x9a62, 0x6ca3, 0x1, 0x0);
        gbc.writeMem(0x6b42, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1447);
        EXPECT(gbc.pc(), 0x6b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01F2
        gbc.setState(0x854d, 0xbfba, 0x7ed0, 0x38f6, 0xe891, 0x4ddc, 0x1, 0x1);
        gbc.writeMem(0x854d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xbfba);
        EXPECT(gbc.pc(), 0x854f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x854d), 0xcb);
        EXPECT(gbc.readMem(0x854e), 0xe8);
        // CB E8 01F3
        gbc.setState(0x9f1e, 0x276d, 0xe2a0, 0x6d60, 0x1884, 0xb95, 0x0, 0x1);
        gbc.writeMem(0x9f1e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x276d);
        EXPECT(gbc.pc(), 0x9f20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1e), 0xcb);
        EXPECT(gbc.readMem(0x9f1f), 0xe8);
        // CB E8 01F4
        gbc.setState(0x4550, 0xe3ce, 0x9e90, 0x6097, 0xf2ca, 0xd51, 0x1, 0x0);
        gbc.writeMem(0x4550, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe3ce);
        EXPECT(gbc.pc(), 0x4552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 01F5
        gbc.setState(0xc6cd, 0xc6e, 0x8860, 0x4d60, 0x28ad, 0x9707, 0x1, 0x1);
        gbc.writeMem(0xc6cd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc6e);
        EXPECT(gbc.pc(), 0xc6cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6cd), 0xcb);
        EXPECT(gbc.readMem(0xc6ce), 0xe8);
        // CB E8 01F6
        gbc.setState(0xb5c4, 0xb985, 0x7920, 0xf079, 0x7429, 0xe663, 0x0, 0x1);
        gbc.writeMem(0xb5c4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb985);
        EXPECT(gbc.pc(), 0xb5c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c4), 0xcb);
        EXPECT(gbc.readMem(0xb5c5), 0xe8);
        // CB E8 01F7
        gbc.setState(0x30b, 0x4b0, 0xd3a0, 0x819c, 0xd4fb, 0xe4f1, 0x1, 0x0);
        gbc.writeMem(0x30b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4b0);
        EXPECT(gbc.pc(), 0x30d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01F8
        gbc.setState(0x9033, 0x579d, 0xdec0, 0xb664, 0x8db2, 0x3db2, 0x0, 0x1);
        gbc.writeMem(0x9033, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x579d);
        EXPECT(gbc.pc(), 0x9035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9033), 0xcb);
        EXPECT(gbc.readMem(0x9034), 0xe8);
        // CB E8 01F9
        gbc.setState(0x4925, 0xfee1, 0x1940, 0xa215, 0xab23, 0xa595, 0x1, 0x0);
        gbc.writeMem(0x4925, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfee1);
        EXPECT(gbc.pc(), 0x4927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01FA
        gbc.setState(0x3058, 0xa50c, 0x8fc0, 0x3e3d, 0xeff0, 0xbff6, 0x1, 0x0);
        gbc.writeMem(0x3058, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa50c);
        EXPECT(gbc.pc(), 0x305a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01FB
        gbc.setState(0xb3d8, 0x7e1, 0x3600, 0xf41a, 0xe996, 0x8736, 0x0, 0x1);
        gbc.writeMem(0xb3d8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7e1);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d8), 0xcb);
        EXPECT(gbc.readMem(0xb3d9), 0xe8);
        // CB E8 01FC
        gbc.setState(0x3da1, 0xbca6, 0x4b00, 0xe5b3, 0x689b, 0x458, 0x0, 0x1);
        gbc.writeMem(0x3da1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbca6);
        EXPECT(gbc.pc(), 0x3da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01FD
        gbc.setState(0x8af3, 0xb380, 0x5aa0, 0x50fe, 0x832d, 0xadb8, 0x0, 0x1);
        gbc.writeMem(0x8af3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb380);
        EXPECT(gbc.pc(), 0x8af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af3), 0xcb);
        EXPECT(gbc.readMem(0x8af4), 0xe8);
        // CB E8 01FE
        gbc.setState(0x362a, 0x9046, 0x5360, 0x1970, 0x45e, 0xcb49, 0x0, 0x0);
        gbc.writeMem(0x362a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9046);
        EXPECT(gbc.pc(), 0x362c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 01FF
        gbc.setState(0x69e2, 0xe2b6, 0x240, 0x6b32, 0x4637, 0x3d94, 0x0, 0x0);
        gbc.writeMem(0x69e2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe2b6);
        EXPECT(gbc.pc(), 0x69e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0200
        gbc.setState(0x92e9, 0x8043, 0xa8d0, 0x6fb, 0x1628, 0xc72d, 0x1, 0x0);
        gbc.writeMem(0x92e9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8043);
        EXPECT(gbc.pc(), 0x92eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e9), 0xcb);
        EXPECT(gbc.readMem(0x92ea), 0xe8);
        // CB E8 0201
        gbc.setState(0xa00a, 0xc8c6, 0x49e0, 0x7fd1, 0xd567, 0x481, 0x1, 0x0);
        gbc.writeMem(0xa00a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc8c6);
        EXPECT(gbc.pc(), 0xa00c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa00a), 0xcb);
        EXPECT(gbc.readMem(0xa00b), 0xe8);
        // CB E8 0202
        gbc.setState(0x1bf8, 0x3c2c, 0x8dd0, 0xf237, 0xddc3, 0x89c, 0x0, 0x1);
        gbc.writeMem(0x1bf8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3c2c);
        EXPECT(gbc.pc(), 0x1bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0203
        gbc.setState(0x1d31, 0x4f22, 0x9860, 0x8eeb, 0x190e, 0x33c6, 0x1, 0x0);
        gbc.writeMem(0x1d31, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x4f22);
        EXPECT(gbc.pc(), 0x1d33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0204
        gbc.setState(0xd1d, 0xaa12, 0x820, 0x7638, 0xff31, 0xa7f7, 0x0, 0x0);
        gbc.writeMem(0xd1d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaa12);
        EXPECT(gbc.pc(), 0xd1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0205
        gbc.setState(0x4d75, 0x5ecc, 0xca00, 0x7237, 0x2345, 0xd08b, 0x1, 0x1);
        gbc.writeMem(0x4d75, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5ecc);
        EXPECT(gbc.pc(), 0x4d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0206
        gbc.setState(0xca77, 0x84a1, 0x6f20, 0xe5c6, 0x3ab9, 0x6b5, 0x1, 0x0);
        gbc.writeMem(0xca77, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x84a1);
        EXPECT(gbc.pc(), 0xca79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca77), 0xcb);
        EXPECT(gbc.readMem(0xca78), 0xe8);
        // CB E8 0207
        gbc.setState(0x7d, 0xe2d5, 0xa040, 0x6f2b, 0xb224, 0xe7d2, 0x1, 0x0);
        gbc.writeMem(0x7d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe2d5);
        EXPECT(gbc.pc(), 0x7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0208
        gbc.setState(0xc52, 0x845, 0xb3f0, 0xb277, 0xba88, 0xb3b0, 0x1, 0x1);
        gbc.writeMem(0xc52, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x845);
        EXPECT(gbc.pc(), 0xc54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 020A
        gbc.setState(0x8e00, 0x8b22, 0x4c90, 0x8cf4, 0xd33c, 0x87d9, 0x0, 0x1);
        gbc.writeMem(0x8e00, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8b22);
        EXPECT(gbc.pc(), 0x8e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e00), 0xcb);
        EXPECT(gbc.readMem(0x8e01), 0xe8);
        // CB E8 020B
        gbc.setState(0x7140, 0xb974, 0x3970, 0xf21f, 0x99cc, 0x4712, 0x1, 0x0);
        gbc.writeMem(0x7140, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb974);
        EXPECT(gbc.pc(), 0x7142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 020C
        gbc.setState(0x7fff, 0xc4f, 0x7180, 0x19ec, 0x6bca, 0x74cb, 0x1, 0x1);
        gbc.writeMem(0x7fff, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc4f);
        EXPECT(gbc.pc(), 0x8001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8000), 0xe8);
        // CB E8 020D
        gbc.setState(0x61e2, 0x9db4, 0xfe50, 0x488b, 0xe002, 0x7dfc, 0x1, 0x0);
        gbc.writeMem(0x61e2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9db4);
        EXPECT(gbc.pc(), 0x61e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 020E
        gbc.setState(0xda88, 0x3b83, 0xe200, 0x6ec, 0xcc7b, 0x8e1e, 0x1, 0x0);
        gbc.writeMem(0xda88, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3b83);
        EXPECT(gbc.pc(), 0xda8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda88), 0xcb);
        EXPECT(gbc.readMem(0xda89), 0xe8);
        // CB E8 020F
        gbc.setState(0x8840, 0xa463, 0xa260, 0x30b8, 0x69b5, 0xef30, 0x0, 0x1);
        gbc.writeMem(0x8840, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa463);
        EXPECT(gbc.pc(), 0x8842);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8840), 0xcb);
        EXPECT(gbc.readMem(0x8841), 0xe8);
        // CB E8 0210
        gbc.setState(0xead7, 0x6f39, 0xd4d0, 0x53e1, 0xa9c7, 0x5cbd, 0x0, 0x1);
        gbc.writeMem(0xead7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6f39);
        EXPECT(gbc.pc(), 0xead9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead7), 0xcb);
        EXPECT(gbc.readMem(0xead8), 0xe8);
        // CB E8 0211
        gbc.setState(0xc3c0, 0x8a24, 0x14a0, 0xd306, 0xcffc, 0xcde9, 0x0, 0x1);
        gbc.writeMem(0xc3c0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8a24);
        EXPECT(gbc.pc(), 0xc3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c0), 0xcb);
        EXPECT(gbc.readMem(0xc3c1), 0xe8);
        // CB E8 0212
        gbc.setState(0x94d5, 0x90eb, 0x5a0, 0x267e, 0xec78, 0x2b5f, 0x1, 0x1);
        gbc.writeMem(0x94d5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x90eb);
        EXPECT(gbc.pc(), 0x94d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d5), 0xcb);
        EXPECT(gbc.readMem(0x94d6), 0xe8);
        // CB E8 0213
        gbc.setState(0x1b4e, 0xa807, 0x9290, 0x3d30, 0xb9d6, 0x4dd1, 0x1, 0x1);
        gbc.writeMem(0x1b4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa807);
        EXPECT(gbc.pc(), 0x1b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0214
        gbc.setState(0xb02b, 0x9b2e, 0x5530, 0x6120, 0x9f67, 0x4be2, 0x0, 0x0);
        gbc.writeMem(0xb02b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9b2e);
        EXPECT(gbc.pc(), 0xb02d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02b), 0xcb);
        EXPECT(gbc.readMem(0xb02c), 0xe8);
        // CB E8 0215
        gbc.setState(0x6c3, 0x30b2, 0x9980, 0x95bf, 0x709d, 0xf4e2, 0x1, 0x0);
        gbc.writeMem(0x6c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x30b2);
        EXPECT(gbc.pc(), 0x6c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0216
        gbc.setState(0x6b85, 0x6beb, 0x48c0, 0xc122, 0xb739, 0xc1e1, 0x0, 0x1);
        gbc.writeMem(0x6b85, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6beb);
        EXPECT(gbc.pc(), 0x6b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0217
        gbc.setState(0x262b, 0xfe8c, 0x40b0, 0x986e, 0x9a82, 0xdcbb, 0x0, 0x0);
        gbc.writeMem(0x262b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfe8c);
        EXPECT(gbc.pc(), 0x262d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0218
        gbc.setState(0xfb8, 0x482d, 0x7020, 0x99d6, 0x7bc9, 0xe69, 0x0, 0x0);
        gbc.writeMem(0xfb8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x482d);
        EXPECT(gbc.pc(), 0xfba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0219
        gbc.setState(0xaf16, 0xfcde, 0x2ce0, 0x59c0, 0x8246, 0xdac6, 0x1, 0x1);
        gbc.writeMem(0xaf16, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfcde);
        EXPECT(gbc.pc(), 0xaf18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf16), 0xcb);
        EXPECT(gbc.readMem(0xaf17), 0xe8);
        // CB E8 021A
        gbc.setState(0xf92, 0xbe2d, 0x1e10, 0xfd9a, 0xb50e, 0x1709, 0x1, 0x0);
        gbc.writeMem(0xf92, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbe2d);
        EXPECT(gbc.pc(), 0xf94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 021B
        gbc.setState(0x743f, 0x77a0, 0xf1b0, 0x65bd, 0xf0f2, 0xa14, 0x0, 0x0);
        gbc.writeMem(0x743f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x77a0);
        EXPECT(gbc.pc(), 0x7441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 021C
        gbc.setState(0x11eb, 0xa080, 0xe40, 0x3afe, 0x37ba, 0x11aa, 0x0, 0x1);
        gbc.writeMem(0x11eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa080);
        EXPECT(gbc.pc(), 0x11ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 021D
        gbc.setState(0x5cef, 0x424c, 0x1460, 0xe3d7, 0xa58f, 0xcd5f, 0x0, 0x1);
        gbc.writeMem(0x5cef, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x424c);
        EXPECT(gbc.pc(), 0x5cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 021E
        gbc.setState(0xd31, 0x85c8, 0x6d30, 0x140a, 0xb613, 0x79f, 0x1, 0x0);
        gbc.writeMem(0xd31, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x85c8);
        EXPECT(gbc.pc(), 0xd33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 021F
        gbc.setState(0x79ef, 0x36eb, 0x93f0, 0x31ea, 0xbecc, 0x8c28, 0x0, 0x0);
        gbc.writeMem(0x79ef, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x36eb);
        EXPECT(gbc.pc(), 0x79f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0220
        gbc.setState(0x5c79, 0x659f, 0xe1b0, 0x36b0, 0xbf81, 0xbd86, 0x1, 0x0);
        gbc.writeMem(0x5c79, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x659f);
        EXPECT(gbc.pc(), 0x5c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0221
        gbc.setState(0x1c14, 0xe8c0, 0xeb80, 0xa6ca, 0xc0c9, 0x8919, 0x0, 0x1);
        gbc.writeMem(0x1c14, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe8c0);
        EXPECT(gbc.pc(), 0x1c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0222
        gbc.setState(0x67d5, 0xfd84, 0x44f0, 0x3e19, 0x2255, 0x6a09, 0x1, 0x0);
        gbc.writeMem(0x67d5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfd84);
        EXPECT(gbc.pc(), 0x67d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0223
        gbc.setState(0x5525, 0xab45, 0x3020, 0xf847, 0xc924, 0x4b61, 0x1, 0x1);
        gbc.writeMem(0x5525, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xab45);
        EXPECT(gbc.pc(), 0x5527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0225
        gbc.setState(0x5a0c, 0x86af, 0xe480, 0x6735, 0x8a7b, 0x3092, 0x1, 0x1);
        gbc.writeMem(0x5a0c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x86af);
        EXPECT(gbc.pc(), 0x5a0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0226
        gbc.setState(0xb863, 0xefaa, 0x8c80, 0xbdf1, 0xb2a6, 0xa7af, 0x0, 0x1);
        gbc.writeMem(0xb863, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xefaa);
        EXPECT(gbc.pc(), 0xb865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb863), 0xcb);
        EXPECT(gbc.readMem(0xb864), 0xe8);
        // CB E8 0227
        gbc.setState(0x819a, 0x21c, 0x1f40, 0x2ae1, 0xb799, 0x90ab, 0x1, 0x1);
        gbc.writeMem(0x819a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x21c);
        EXPECT(gbc.pc(), 0x819c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x819a), 0xcb);
        EXPECT(gbc.readMem(0x819b), 0xe8);
        // CB E8 0228
        gbc.setState(0x75d9, 0xdb61, 0xbdd0, 0x1f11, 0x62a1, 0x5952, 0x1, 0x1);
        gbc.writeMem(0x75d9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdb61);
        EXPECT(gbc.pc(), 0x75db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0229
        gbc.setState(0xe035, 0x3058, 0x7b40, 0xa2de, 0xfa53, 0x427f, 0x0, 0x1);
        gbc.writeMem(0xe035, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3058);
        EXPECT(gbc.pc(), 0xe037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe035), 0xcb);
        EXPECT(gbc.readMem(0xe036), 0xe8);
        // CB E8 022A
        gbc.setState(0xc8fb, 0x6c87, 0xb580, 0x76cb, 0x2fad, 0x97fb, 0x0, 0x0);
        gbc.writeMem(0xc8fb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6c87);
        EXPECT(gbc.pc(), 0xc8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fb), 0xcb);
        EXPECT(gbc.readMem(0xc8fc), 0xe8);
        // CB E8 022B
        gbc.setState(0xed8, 0x8009, 0xa850, 0x7a73, 0x38ad, 0x2918, 0x1, 0x0);
        gbc.writeMem(0xed8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8009);
        EXPECT(gbc.pc(), 0xeda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 022C
        gbc.setState(0x1895, 0xa7b5, 0x4ae0, 0xbfad, 0xb26e, 0x125b, 0x1, 0x0);
        gbc.writeMem(0x1895, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa7b5);
        EXPECT(gbc.pc(), 0x1897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 022D
        gbc.setState(0xdfc1, 0x7da3, 0xb3c0, 0x5f3, 0x78c0, 0x7e14, 0x0, 0x1);
        gbc.writeMem(0xdfc1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7da3);
        EXPECT(gbc.pc(), 0xdfc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc1), 0xcb);
        EXPECT(gbc.readMem(0xdfc2), 0xe8);
        // CB E8 022E
        gbc.setState(0x8974, 0x3e48, 0xbb30, 0x7fdd, 0x254b, 0xb9d0, 0x0, 0x1);
        gbc.writeMem(0x8974, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x3e48);
        EXPECT(gbc.pc(), 0x8976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8974), 0xcb);
        EXPECT(gbc.readMem(0x8975), 0xe8);
        // CB E8 022F
        gbc.setState(0xbcba, 0x3487, 0x46c0, 0x7a09, 0x230, 0x8ba6, 0x1, 0x0);
        gbc.writeMem(0xbcba, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3487);
        EXPECT(gbc.pc(), 0xbcbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcba), 0xcb);
        EXPECT(gbc.readMem(0xbcbb), 0xe8);
        // CB E8 0230
        gbc.setState(0xbfbd, 0x3432, 0x2660, 0x730c, 0xa48c, 0x4318, 0x0, 0x1);
        gbc.writeMem(0xbfbd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3432);
        EXPECT(gbc.pc(), 0xbfbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfbd), 0xcb);
        EXPECT(gbc.readMem(0xbfbe), 0xe8);
        // CB E8 0231
        gbc.setState(0x8b21, 0x2b7a, 0xc740, 0x2d3d, 0x5cab, 0xbe1, 0x0, 0x1);
        gbc.writeMem(0x8b21, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2b7a);
        EXPECT(gbc.pc(), 0x8b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b21), 0xcb);
        EXPECT(gbc.readMem(0x8b22), 0xe8);
        // CB E8 0232
        gbc.setState(0x9f3f, 0x3ba2, 0xa6f0, 0xffb7, 0x931f, 0x9799, 0x0, 0x0);
        gbc.writeMem(0x9f3f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3ba2);
        EXPECT(gbc.pc(), 0x9f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3f), 0xcb);
        EXPECT(gbc.readMem(0x9f40), 0xe8);
        // CB E8 0233
        gbc.setState(0xdb16, 0x15ee, 0xd820, 0xe7fd, 0x1680, 0x22ce, 0x0, 0x1);
        gbc.writeMem(0xdb16, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x15ee);
        EXPECT(gbc.pc(), 0xdb18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb16), 0xcb);
        EXPECT(gbc.readMem(0xdb17), 0xe8);
        // CB E8 0234
        gbc.setState(0x1dae, 0xfd59, 0xd4e0, 0x573d, 0x87e1, 0x1af9, 0x1, 0x0);
        gbc.writeMem(0x1dae, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xfd59);
        EXPECT(gbc.pc(), 0x1db0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0235
        gbc.setState(0xa9e4, 0x3cb8, 0x9ce0, 0x5b11, 0xcd54, 0xd58b, 0x0, 0x1);
        gbc.writeMem(0xa9e4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3cb8);
        EXPECT(gbc.pc(), 0xa9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e4), 0xcb);
        EXPECT(gbc.readMem(0xa9e5), 0xe8);
        // CB E8 0236
        gbc.setState(0x965b, 0x72a2, 0x2c30, 0x26be, 0x6011, 0xc83, 0x0, 0x0);
        gbc.writeMem(0x965b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x72a2);
        EXPECT(gbc.pc(), 0x965d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965b), 0xcb);
        EXPECT(gbc.readMem(0x965c), 0xe8);
        // CB E8 0237
        gbc.setState(0xe536, 0xb7b5, 0xbcf0, 0xf255, 0x160c, 0x5702, 0x0, 0x0);
        gbc.writeMem(0xe536, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb7b5);
        EXPECT(gbc.pc(), 0xe538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe536), 0xcb);
        EXPECT(gbc.readMem(0xe537), 0xe8);
        // CB E8 0238
        gbc.setState(0x6958, 0x94aa, 0x9a50, 0xeb04, 0x9318, 0x9f38, 0x1, 0x1);
        gbc.writeMem(0x6958, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x94aa);
        EXPECT(gbc.pc(), 0x695a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0239
        gbc.setState(0x8a31, 0xa211, 0xf3a0, 0xa1d1, 0xeaa0, 0x3f95, 0x1, 0x1);
        gbc.writeMem(0x8a31, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa211);
        EXPECT(gbc.pc(), 0x8a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a31), 0xcb);
        EXPECT(gbc.readMem(0x8a32), 0xe8);
        // CB E8 023A
        gbc.setState(0x738a, 0x60f6, 0x73e0, 0xc8d4, 0xcf66, 0x171f, 0x0, 0x0);
        gbc.writeMem(0x738a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x60f6);
        EXPECT(gbc.pc(), 0x738c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 023B
        gbc.setState(0x819f, 0x3976, 0x9e10, 0x9353, 0x2635, 0xb393, 0x1, 0x0);
        gbc.writeMem(0x819f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3976);
        EXPECT(gbc.pc(), 0x81a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x819f), 0xcb);
        EXPECT(gbc.readMem(0x81a0), 0xe8);
        // CB E8 023C
        gbc.setState(0xd0c1, 0x1ecd, 0xb080, 0x242b, 0x4e11, 0xaaf9, 0x1, 0x0);
        gbc.writeMem(0xd0c1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1ecd);
        EXPECT(gbc.pc(), 0xd0c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c1), 0xcb);
        EXPECT(gbc.readMem(0xd0c2), 0xe8);
        // CB E8 023D
        gbc.setState(0xccdd, 0x6c7f, 0x140, 0x38b3, 0x5991, 0x301e, 0x0, 0x0);
        gbc.writeMem(0xccdd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6c7f);
        EXPECT(gbc.pc(), 0xccdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccdd), 0xcb);
        EXPECT(gbc.readMem(0xccde), 0xe8);
        // CB E8 023E
        gbc.setState(0xb9fa, 0xa0d5, 0xaf90, 0x3a4b, 0x4645, 0xee7d, 0x0, 0x0);
        gbc.writeMem(0xb9fa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa0d5);
        EXPECT(gbc.pc(), 0xb9fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9fa), 0xcb);
        EXPECT(gbc.readMem(0xb9fb), 0xe8);
        // CB E8 023F
        gbc.setState(0x300f, 0xf787, 0x80c0, 0x4ae1, 0x640d, 0x6cb3, 0x0, 0x1);
        gbc.writeMem(0x300f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf787);
        EXPECT(gbc.pc(), 0x3011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0240
        gbc.setState(0x335e, 0x59fb, 0x2610, 0x8f32, 0xb04c, 0x3bd8, 0x0, 0x1);
        gbc.writeMem(0x335e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x59fb);
        EXPECT(gbc.pc(), 0x3360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0241
        gbc.setState(0x878b, 0x3d71, 0x360, 0xca05, 0x7282, 0x461, 0x1, 0x0);
        gbc.writeMem(0x878b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3d71);
        EXPECT(gbc.pc(), 0x878d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878b), 0xcb);
        EXPECT(gbc.readMem(0x878c), 0xe8);
        // CB E8 0242
        gbc.setState(0xe9a5, 0x2b, 0x9af0, 0x5aa8, 0x472a, 0x27df, 0x0, 0x1);
        gbc.writeMem(0xe9a5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2b);
        EXPECT(gbc.pc(), 0xe9a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a5), 0xcb);
        EXPECT(gbc.readMem(0xe9a6), 0xe8);
        // CB E8 0243
        gbc.setState(0xda20, 0x41c6, 0x9960, 0x5bcd, 0x5471, 0xaff6, 0x0, 0x1);
        gbc.writeMem(0xda20, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x41c6);
        EXPECT(gbc.pc(), 0xda22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda20), 0xcb);
        EXPECT(gbc.readMem(0xda21), 0xe8);
        // CB E8 0244
        gbc.setState(0x7bf5, 0x7c90, 0x1450, 0xf248, 0xdb24, 0x21ae, 0x0, 0x1);
        gbc.writeMem(0x7bf5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7c90);
        EXPECT(gbc.pc(), 0x7bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0245
        gbc.setState(0x1f77, 0x1932, 0x8c90, 0xfebb, 0xbfb, 0x4631, 0x1, 0x0);
        gbc.writeMem(0x1f77, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1932);
        EXPECT(gbc.pc(), 0x1f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0246
        gbc.setState(0x6cce, 0x16cb, 0x66a0, 0xf16c, 0x3a75, 0x7eb6, 0x1, 0x0);
        gbc.writeMem(0x6cce, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x16cb);
        EXPECT(gbc.pc(), 0x6cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0247
        gbc.setState(0x1f3f, 0x3ce2, 0xe580, 0xf569, 0x49d2, 0xeadc, 0x1, 0x1);
        gbc.writeMem(0x1f3f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3ce2);
        EXPECT(gbc.pc(), 0x1f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0248
        gbc.setState(0xbf82, 0x2772, 0x1f50, 0x182a, 0xc847, 0xb6f1, 0x0, 0x0);
        gbc.writeMem(0xbf82, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2772);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf82), 0xcb);
        EXPECT(gbc.readMem(0xbf83), 0xe8);
        // CB E8 0249
        gbc.setState(0x14db, 0x4230, 0x5830, 0x7650, 0xb909, 0x941a, 0x1, 0x1);
        gbc.writeMem(0x14db, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4230);
        EXPECT(gbc.pc(), 0x14dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 024A
        gbc.setState(0xa0e0, 0x4930, 0x5da0, 0xef3b, 0x753d, 0xe2dd, 0x0, 0x0);
        gbc.writeMem(0xa0e0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4930);
        EXPECT(gbc.pc(), 0xa0e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0e0), 0xcb);
        EXPECT(gbc.readMem(0xa0e1), 0xe8);
        // CB E8 024B
        gbc.setState(0xaff, 0xc46a, 0x40f0, 0xc7d2, 0xc040, 0x4f07, 0x0, 0x1);
        gbc.writeMem(0xaff, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc46a);
        EXPECT(gbc.pc(), 0xb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 024C
        gbc.setState(0x9c46, 0x79ee, 0xa4f0, 0xb021, 0x6a6e, 0x1031, 0x1, 0x0);
        gbc.writeMem(0x9c46, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x79ee);
        EXPECT(gbc.pc(), 0x9c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c46), 0xcb);
        EXPECT(gbc.readMem(0x9c47), 0xe8);
        // CB E8 024D
        gbc.setState(0xe5b7, 0x4846, 0xd6e0, 0x41bf, 0x19d0, 0xed39, 0x0, 0x1);
        gbc.writeMem(0xe5b7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4846);
        EXPECT(gbc.pc(), 0xe5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5b7), 0xcb);
        EXPECT(gbc.readMem(0xe5b8), 0xe8);
        // CB E8 024E
        gbc.setState(0x5b1b, 0xe615, 0x2ea0, 0x4e41, 0xa70f, 0x2d35, 0x1, 0x1);
        gbc.writeMem(0x5b1b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe615);
        EXPECT(gbc.pc(), 0x5b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 024F
        gbc.setState(0x82c1, 0xaf91, 0x8220, 0x657a, 0xc58e, 0x4dc, 0x1, 0x1);
        gbc.writeMem(0x82c1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xaf91);
        EXPECT(gbc.pc(), 0x82c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c1), 0xcb);
        EXPECT(gbc.readMem(0x82c2), 0xe8);
        // CB E8 0250
        gbc.setState(0xc9df, 0x4dc7, 0x7920, 0xe929, 0x4f21, 0x6e3e, 0x1, 0x1);
        gbc.writeMem(0xc9df, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4dc7);
        EXPECT(gbc.pc(), 0xc9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9df), 0xcb);
        EXPECT(gbc.readMem(0xc9e0), 0xe8);
        // CB E8 0251
        gbc.setState(0x6a, 0xe651, 0x6680, 0x89d7, 0x10dc, 0xc10f, 0x0, 0x0);
        gbc.writeMem(0x6a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe651);
        EXPECT(gbc.pc(), 0x6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0252
        gbc.setState(0x6891, 0xbfa7, 0x88c0, 0x8a61, 0xb76b, 0x87fb, 0x1, 0x0);
        gbc.writeMem(0x6891, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xbfa7);
        EXPECT(gbc.pc(), 0x6893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0253
        gbc.setState(0xafc3, 0xfb1e, 0x6ae0, 0xa738, 0x2744, 0x91c5, 0x0, 0x0);
        gbc.writeMem(0xafc3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xfb1e);
        EXPECT(gbc.pc(), 0xafc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc3), 0xcb);
        EXPECT(gbc.readMem(0xafc4), 0xe8);
        // CB E8 0255
        gbc.setState(0x6bf, 0xfd24, 0xad80, 0xd27, 0xb0f, 0x82f, 0x0, 0x1);
        gbc.writeMem(0x6bf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfd24);
        EXPECT(gbc.pc(), 0x6c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0256
        gbc.setState(0x9bba, 0xd2c5, 0xac10, 0xd3cc, 0xe3f1, 0xf6f5, 0x1, 0x1);
        gbc.writeMem(0x9bba, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd2c5);
        EXPECT(gbc.pc(), 0x9bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bba), 0xcb);
        EXPECT(gbc.readMem(0x9bbb), 0xe8);
        // CB E8 0257
        gbc.setState(0xe9ea, 0xed9a, 0xf0, 0x285e, 0x522d, 0xe3b3, 0x1, 0x1);
        gbc.writeMem(0xe9ea, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xed9a);
        EXPECT(gbc.pc(), 0xe9ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ea), 0xcb);
        EXPECT(gbc.readMem(0xe9eb), 0xe8);
        // CB E8 0258
        gbc.setState(0x12b7, 0xacbe, 0xaed0, 0x3617, 0x1362, 0x404e, 0x1, 0x0);
        gbc.writeMem(0x12b7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xacbe);
        EXPECT(gbc.pc(), 0x12b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0259
        gbc.setState(0x514b, 0x722d, 0xfd50, 0xd3a2, 0xb19, 0xfa03, 0x1, 0x1);
        gbc.writeMem(0x514b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x722d);
        EXPECT(gbc.pc(), 0x514d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 025A
        gbc.setState(0xef65, 0xcd04, 0x4a90, 0x6eb, 0x842f, 0x98cc, 0x1, 0x0);
        gbc.writeMem(0xef65, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xcd04);
        EXPECT(gbc.pc(), 0xef67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef65), 0xcb);
        EXPECT(gbc.readMem(0xef66), 0xe8);
        // CB E8 025B
        gbc.setState(0x6f7c, 0x9558, 0xce60, 0xe557, 0x7fb7, 0x62f8, 0x1, 0x1);
        gbc.writeMem(0x6f7c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9558);
        EXPECT(gbc.pc(), 0x6f7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 025C
        gbc.setState(0x49cb, 0x6eff, 0xf4b0, 0x7258, 0xbed3, 0x39c3, 0x0, 0x1);
        gbc.writeMem(0x49cb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6eff);
        EXPECT(gbc.pc(), 0x49cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 025D
        gbc.setState(0x729c, 0x2318, 0x1fa0, 0xe4f2, 0x3786, 0x26d0, 0x1, 0x0);
        gbc.writeMem(0x729c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2318);
        EXPECT(gbc.pc(), 0x729e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 025E
        gbc.setState(0x8c3, 0x8f4d, 0xa30, 0xd8be, 0x293a, 0xf983, 0x1, 0x1);
        gbc.writeMem(0x8c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8f4d);
        EXPECT(gbc.pc(), 0x8c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 025F
        gbc.setState(0x1b66, 0x7502, 0x5ff0, 0xc8a, 0xc02b, 0xf02e, 0x1, 0x1);
        gbc.writeMem(0x1b66, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7502);
        EXPECT(gbc.pc(), 0x1b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0260
        gbc.setState(0x4f21, 0xe163, 0x2af0, 0x592d, 0xa432, 0x3f93, 0x1, 0x1);
        gbc.writeMem(0x4f21, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe163);
        EXPECT(gbc.pc(), 0x4f23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0261
        gbc.setState(0x55cc, 0xa973, 0xbc50, 0xa37a, 0x41a, 0x4945, 0x0, 0x0);
        gbc.writeMem(0x55cc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa973);
        EXPECT(gbc.pc(), 0x55ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0262
        gbc.setState(0x60f5, 0x4be4, 0xa900, 0x4f97, 0xd542, 0x84de, 0x0, 0x0);
        gbc.writeMem(0x60f5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4be4);
        EXPECT(gbc.pc(), 0x60f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0263
        gbc.setState(0x992c, 0xc544, 0x8bc0, 0x420, 0x327, 0x9af5, 0x1, 0x0);
        gbc.writeMem(0x992c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc544);
        EXPECT(gbc.pc(), 0x992e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992c), 0xcb);
        EXPECT(gbc.readMem(0x992d), 0xe8);
        // CB E8 0264
        gbc.setState(0x9680, 0x78ed, 0xedb0, 0x96a7, 0x2686, 0xf574, 0x0, 0x1);
        gbc.writeMem(0x9680, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x78ed);
        EXPECT(gbc.pc(), 0x9682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9680), 0xcb);
        EXPECT(gbc.readMem(0x9681), 0xe8);
        // CB E8 0265
        gbc.setState(0x2d9a, 0x3eb1, 0xf4e0, 0xce30, 0xaf23, 0x5d03, 0x0, 0x1);
        gbc.writeMem(0x2d9a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3eb1);
        EXPECT(gbc.pc(), 0x2d9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0266
        gbc.setState(0x13d5, 0xace5, 0xaca0, 0xc886, 0x1871, 0xdeb6, 0x1, 0x1);
        gbc.writeMem(0x13d5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xace5);
        EXPECT(gbc.pc(), 0x13d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0267
        gbc.setState(0x7780, 0x729b, 0x90a0, 0xcd69, 0x7d38, 0xee90, 0x0, 0x1);
        gbc.writeMem(0x7780, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x729b);
        EXPECT(gbc.pc(), 0x7782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0268
        gbc.setState(0x3b32, 0xa7cf, 0x6a00, 0x4655, 0xb552, 0x1c10, 0x1, 0x1);
        gbc.writeMem(0x3b32, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa7cf);
        EXPECT(gbc.pc(), 0x3b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0269
        gbc.setState(0x51a7, 0x93c7, 0xeed0, 0x7670, 0x3039, 0xa70d, 0x1, 0x0);
        gbc.writeMem(0x51a7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x93c7);
        EXPECT(gbc.pc(), 0x51a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 026A
        gbc.setState(0x9a74, 0x439, 0x4430, 0xde0f, 0x821d, 0x218c, 0x1, 0x0);
        gbc.writeMem(0x9a74, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x439);
        EXPECT(gbc.pc(), 0x9a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a74), 0xcb);
        EXPECT(gbc.readMem(0x9a75), 0xe8);
        // CB E8 026B
        gbc.setState(0x33b2, 0x1013, 0x4680, 0x3bad, 0xffd2, 0xbcb6, 0x0, 0x1);
        gbc.writeMem(0x33b2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x1013);
        EXPECT(gbc.pc(), 0x33b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 026C
        gbc.setState(0xba58, 0x3caf, 0xd590, 0x5e1f, 0x834a, 0xa9b3, 0x0, 0x0);
        gbc.writeMem(0xba58, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3caf);
        EXPECT(gbc.pc(), 0xba5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba58), 0xcb);
        EXPECT(gbc.readMem(0xba59), 0xe8);
        // CB E8 026E
        gbc.setState(0xa59e, 0x22ac, 0x17e0, 0x255b, 0x1409, 0xe680, 0x1, 0x0);
        gbc.writeMem(0xa59e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x22ac);
        EXPECT(gbc.pc(), 0xa5a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59e), 0xcb);
        EXPECT(gbc.readMem(0xa59f), 0xe8);
        // CB E8 026F
        gbc.setState(0x70b9, 0x5193, 0x4b00, 0x8e7, 0xe63e, 0x630, 0x0, 0x0);
        gbc.writeMem(0x70b9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5193);
        EXPECT(gbc.pc(), 0x70bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0271
        gbc.setState(0x4ede, 0x41a, 0xdd20, 0xc53d, 0xde53, 0x61fd, 0x0, 0x0);
        gbc.writeMem(0x4ede, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x41a);
        EXPECT(gbc.pc(), 0x4ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0272
        gbc.setState(0x566c, 0xf57, 0x6c0, 0x8e49, 0xb59, 0x59b3, 0x0, 0x0);
        gbc.writeMem(0x566c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf57);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0273
        gbc.setState(0x4630, 0xef14, 0x2140, 0xb0cd, 0x5994, 0x7fa0, 0x1, 0x1);
        gbc.writeMem(0x4630, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xef14);
        EXPECT(gbc.pc(), 0x4632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0274
        gbc.setState(0xee4c, 0x29f, 0x3710, 0xb441, 0x59d0, 0x98c3, 0x0, 0x1);
        gbc.writeMem(0xee4c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x29f);
        EXPECT(gbc.pc(), 0xee4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee4c), 0xcb);
        EXPECT(gbc.readMem(0xee4d), 0xe8);
        // CB E8 0275
        gbc.setState(0x7483, 0x8a2c, 0x4cb0, 0x8b11, 0x84d, 0x698f, 0x0, 0x0);
        gbc.writeMem(0x7483, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8a2c);
        EXPECT(gbc.pc(), 0x7485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0276
        gbc.setState(0xe815, 0xb81a, 0x6960, 0x9d41, 0xe9c7, 0xef46, 0x1, 0x1);
        gbc.writeMem(0xe815, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb81a);
        EXPECT(gbc.pc(), 0xe817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe815), 0xcb);
        EXPECT(gbc.readMem(0xe816), 0xe8);
        // CB E8 0277
        gbc.setState(0x21d4, 0x480d, 0xcf80, 0xf03b, 0x3ab3, 0x278d, 0x0, 0x1);
        gbc.writeMem(0x21d4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x480d);
        EXPECT(gbc.pc(), 0x21d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0278
        gbc.setState(0xac88, 0x390a, 0x24a0, 0xe03c, 0xedec, 0xca09, 0x0, 0x0);
        gbc.writeMem(0xac88, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x390a);
        EXPECT(gbc.pc(), 0xac8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac88), 0xcb);
        EXPECT(gbc.readMem(0xac89), 0xe8);
        // CB E8 0279
        gbc.setState(0x78ed, 0xdf00, 0x76d0, 0xe173, 0x6c2b, 0x93a9, 0x1, 0x0);
        gbc.writeMem(0x78ed, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdf00);
        EXPECT(gbc.pc(), 0x78ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 027B
        gbc.setState(0x6f0f, 0x4ce, 0x7c00, 0x1b6c, 0x732a, 0x79b1, 0x0, 0x1);
        gbc.writeMem(0x6f0f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4ce);
        EXPECT(gbc.pc(), 0x6f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 027C
        gbc.setState(0xba45, 0x7a36, 0x7b80, 0x7ff8, 0x48e6, 0x8585, 0x0, 0x1);
        gbc.writeMem(0xba45, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7a36);
        EXPECT(gbc.pc(), 0xba47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba45), 0xcb);
        EXPECT(gbc.readMem(0xba46), 0xe8);
        // CB E8 027D
        gbc.setState(0x7cad, 0xea7d, 0x47e0, 0xbca0, 0x45f, 0xd7ae, 0x0, 0x1);
        gbc.writeMem(0x7cad, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xea7d);
        EXPECT(gbc.pc(), 0x7caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 027E
        gbc.setState(0x6ba3, 0xabe9, 0xe70, 0x1991, 0x2561, 0x45de, 0x0, 0x0);
        gbc.writeMem(0x6ba3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xabe9);
        EXPECT(gbc.pc(), 0x6ba5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 027F
        gbc.setState(0xe0af, 0x8020, 0xfdb0, 0x406e, 0x99da, 0x6f65, 0x0, 0x0);
        gbc.writeMem(0xe0af, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8020);
        EXPECT(gbc.pc(), 0xe0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0af), 0xcb);
        EXPECT(gbc.readMem(0xe0b0), 0xe8);
        // CB E8 0280
        gbc.setState(0x53ec, 0x813e, 0xd2e0, 0x2c20, 0xcd55, 0xfe5b, 0x0, 0x0);
        gbc.writeMem(0x53ec, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x813e);
        EXPECT(gbc.pc(), 0x53ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0281
        gbc.setState(0xe997, 0xf513, 0xdcc0, 0xde89, 0x253d, 0x29f8, 0x1, 0x1);
        gbc.writeMem(0xe997, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf513);
        EXPECT(gbc.pc(), 0xe999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe997), 0xcb);
        EXPECT(gbc.readMem(0xe998), 0xe8);
        // CB E8 0282
        gbc.setState(0x677e, 0x52ca, 0xecb0, 0x9c13, 0x32eb, 0xd34, 0x1, 0x1);
        gbc.writeMem(0x677e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x52ca);
        EXPECT(gbc.pc(), 0x6780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0283
        gbc.setState(0x2265, 0xad5c, 0x6a70, 0x7a1, 0xebab, 0x712d, 0x1, 0x1);
        gbc.writeMem(0x2265, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xad5c);
        EXPECT(gbc.pc(), 0x2267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0284
        gbc.setState(0x8a62, 0x5fef, 0x5390, 0x2116, 0x70a, 0xbb88, 0x1, 0x1);
        gbc.writeMem(0x8a62, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5fef);
        EXPECT(gbc.pc(), 0x8a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a62), 0xcb);
        EXPECT(gbc.readMem(0x8a63), 0xe8);
        // CB E8 0285
        gbc.setState(0x5f3e, 0x3f05, 0x28d0, 0x1540, 0x3125, 0xf231, 0x1, 0x0);
        gbc.writeMem(0x5f3e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3f05);
        EXPECT(gbc.pc(), 0x5f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0286
        gbc.setState(0xd2, 0x7a9a, 0xe940, 0xbc34, 0x207d, 0xa45f, 0x0, 0x1);
        gbc.writeMem(0xd2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7a9a);
        EXPECT(gbc.pc(), 0xd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0287
        gbc.setState(0xb076, 0xe109, 0x2e80, 0x6db1, 0xb66c, 0xfb4f, 0x1, 0x0);
        gbc.writeMem(0xb076, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe109);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb076), 0xcb);
        EXPECT(gbc.readMem(0xb077), 0xe8);
        // CB E8 0289
        gbc.setState(0x7df7, 0x6b3c, 0x7d60, 0xf3a8, 0x7a95, 0x585, 0x1, 0x0);
        gbc.writeMem(0x7df7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6b3c);
        EXPECT(gbc.pc(), 0x7df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 028A
        gbc.setState(0x48d8, 0x402c, 0x1bf0, 0x7c37, 0xe8d6, 0xa82e, 0x0, 0x0);
        gbc.writeMem(0x48d8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x402c);
        EXPECT(gbc.pc(), 0x48da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 028B
        gbc.setState(0x43e6, 0x3925, 0xb2d0, 0x2847, 0xede4, 0x9f76, 0x0, 0x1);
        gbc.writeMem(0x43e6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3925);
        EXPECT(gbc.pc(), 0x43e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 028D
        gbc.setState(0xc345, 0xdb5f, 0xaea0, 0xad44, 0xf497, 0xb1bc, 0x1, 0x0);
        gbc.writeMem(0xc345, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdb5f);
        EXPECT(gbc.pc(), 0xc347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc345), 0xcb);
        EXPECT(gbc.readMem(0xc346), 0xe8);
        // CB E8 028E
        gbc.setState(0x8fb8, 0xe0e0, 0xc270, 0x5ceb, 0x48f2, 0xae7c, 0x0, 0x1);
        gbc.writeMem(0x8fb8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe0e0);
        EXPECT(gbc.pc(), 0x8fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fb8), 0xcb);
        EXPECT(gbc.readMem(0x8fb9), 0xe8);
        // CB E8 028F
        gbc.setState(0x315d, 0x1552, 0x78b0, 0x11b7, 0xde43, 0xf04, 0x0, 0x1);
        gbc.writeMem(0x315d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1552);
        EXPECT(gbc.pc(), 0x315f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0290
        gbc.setState(0x6800, 0x8958, 0x7c90, 0x9189, 0x206e, 0xd299, 0x0, 0x1);
        gbc.writeMem(0x6800, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8958);
        EXPECT(gbc.pc(), 0x6802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0291
        gbc.setState(0xe0d9, 0x83cc, 0x2d60, 0x3c18, 0xf2a, 0xc797, 0x0, 0x1);
        gbc.writeMem(0xe0d9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x83cc);
        EXPECT(gbc.pc(), 0xe0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d9), 0xcb);
        EXPECT(gbc.readMem(0xe0da), 0xe8);
        // CB E8 0292
        gbc.setState(0x6f9e, 0x999, 0xc050, 0xf94f, 0x5f7, 0x24f2, 0x1, 0x1);
        gbc.writeMem(0x6f9e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x999);
        EXPECT(gbc.pc(), 0x6fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0293
        gbc.setState(0x17be, 0xdd99, 0x2c60, 0xa79b, 0x2fee, 0x4a83, 0x0, 0x1);
        gbc.writeMem(0x17be, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdd99);
        EXPECT(gbc.pc(), 0x17c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0294
        gbc.setState(0x1910, 0x1bba, 0x36a0, 0x140e, 0x6377, 0x70e7, 0x0, 0x0);
        gbc.writeMem(0x1910, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1bba);
        EXPECT(gbc.pc(), 0x1912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0295
        gbc.setState(0x6514, 0x6be2, 0xcd20, 0x4f13, 0x243e, 0x1be, 0x0, 0x0);
        gbc.writeMem(0x6514, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6be2);
        EXPECT(gbc.pc(), 0x6516);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0296
        gbc.setState(0x6f1c, 0x1d8d, 0x7190, 0x747a, 0x2d73, 0x737e, 0x0, 0x0);
        gbc.writeMem(0x6f1c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1d8d);
        EXPECT(gbc.pc(), 0x6f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0297
        gbc.setState(0x41a8, 0x1e03, 0x7c10, 0x52e5, 0x64e4, 0xd3b4, 0x0, 0x1);
        gbc.writeMem(0x41a8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1e03);
        EXPECT(gbc.pc(), 0x41aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0298
        gbc.setState(0xb6d1, 0xa702, 0x6450, 0xd702, 0x8ee5, 0xf288, 0x0, 0x1);
        gbc.writeMem(0xb6d1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa702);
        EXPECT(gbc.pc(), 0xb6d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d1), 0xcb);
        EXPECT(gbc.readMem(0xb6d2), 0xe8);
        // CB E8 0299
        gbc.setState(0x87ff, 0xb083, 0xa900, 0x8456, 0xe968, 0x6a93, 0x1, 0x1);
        gbc.writeMem(0x87ff, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb083);
        EXPECT(gbc.pc(), 0x8801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ff), 0xcb);
        EXPECT(gbc.readMem(0x8800), 0xe8);
        // CB E8 029A
        gbc.setState(0x3af7, 0x7f91, 0x30a0, 0x6064, 0xf3d8, 0xbfb8, 0x0, 0x1);
        gbc.writeMem(0x3af7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7f91);
        EXPECT(gbc.pc(), 0x3af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 029B
        gbc.setState(0xa9a2, 0x4c53, 0x2620, 0x25bf, 0x413e, 0x7dd1, 0x0, 0x0);
        gbc.writeMem(0xa9a2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4c53);
        EXPECT(gbc.pc(), 0xa9a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a2), 0xcb);
        EXPECT(gbc.readMem(0xa9a3), 0xe8);
        // CB E8 029C
        gbc.setState(0x90da, 0x432, 0x2180, 0xd54, 0x15f, 0xa7ad, 0x1, 0x1);
        gbc.writeMem(0x90da, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x432);
        EXPECT(gbc.pc(), 0x90dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90da), 0xcb);
        EXPECT(gbc.readMem(0x90db), 0xe8);
        // CB E8 029D
        gbc.setState(0xe540, 0x6ad, 0x9300, 0xf3e9, 0x6485, 0x220e, 0x0, 0x1);
        gbc.writeMem(0xe540, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6ad);
        EXPECT(gbc.pc(), 0xe542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe540), 0xcb);
        EXPECT(gbc.readMem(0xe541), 0xe8);
        // CB E8 029E
        gbc.setState(0xd79, 0x3cc4, 0x7d80, 0x1885, 0x861d, 0xfcdb, 0x1, 0x1);
        gbc.writeMem(0xd79, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3cc4);
        EXPECT(gbc.pc(), 0xd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 029F
        gbc.setState(0xb193, 0xeec4, 0x6f60, 0x6be3, 0x8d37, 0x7ea2, 0x1, 0x0);
        gbc.writeMem(0xb193, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xeec4);
        EXPECT(gbc.pc(), 0xb195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb193), 0xcb);
        EXPECT(gbc.readMem(0xb194), 0xe8);
        // CB E8 02A0
        gbc.setState(0xd4c6, 0x9cea, 0x70, 0xf20c, 0xba19, 0x9f16, 0x1, 0x1);
        gbc.writeMem(0xd4c6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9cea);
        EXPECT(gbc.pc(), 0xd4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c6), 0xcb);
        EXPECT(gbc.readMem(0xd4c7), 0xe8);
        // CB E8 02A1
        gbc.setState(0x5cee, 0x50f0, 0x12f0, 0x5efd, 0xf4d0, 0x4f8, 0x1, 0x0);
        gbc.writeMem(0x5cee, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x50f0);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02A3
        gbc.setState(0x3745, 0x2e16, 0x5f30, 0xa22c, 0xcf7b, 0x3b99, 0x1, 0x1);
        gbc.writeMem(0x3745, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2e16);
        EXPECT(gbc.pc(), 0x3747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02A4
        gbc.setState(0xdb16, 0x491, 0xeb00, 0xb7e0, 0xcf3f, 0xcad, 0x0, 0x1);
        gbc.writeMem(0xdb16, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x491);
        EXPECT(gbc.pc(), 0xdb18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb16), 0xcb);
        EXPECT(gbc.readMem(0xdb17), 0xe8);
        // CB E8 02A6
        gbc.setState(0xa5b4, 0x3ae6, 0x37d0, 0x618e, 0x7034, 0xc39c, 0x1, 0x1);
        gbc.writeMem(0xa5b4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3ae6);
        EXPECT(gbc.pc(), 0xa5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5b4), 0xcb);
        EXPECT(gbc.readMem(0xa5b5), 0xe8);
        // CB E8 02A7
        gbc.setState(0x320, 0xec0d, 0x5720, 0xc1a6, 0x646f, 0xc8ff, 0x1, 0x1);
        gbc.writeMem(0x320, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xec0d);
        EXPECT(gbc.pc(), 0x322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02A8
        gbc.setState(0x8634, 0xeccc, 0x5380, 0x3018, 0x48f8, 0xa2fb, 0x1, 0x0);
        gbc.writeMem(0x8634, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xeccc);
        EXPECT(gbc.pc(), 0x8636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8634), 0xcb);
        EXPECT(gbc.readMem(0x8635), 0xe8);
        // CB E8 02A9
        gbc.setState(0x1689, 0x8c93, 0xcc0, 0xc283, 0x6781, 0xa28f, 0x1, 0x0);
        gbc.writeMem(0x1689, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8c93);
        EXPECT(gbc.pc(), 0x168b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02AA
        gbc.setState(0xa05c, 0xaddf, 0x3500, 0x6388, 0x428f, 0x772e, 0x0, 0x1);
        gbc.writeMem(0xa05c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xaddf);
        EXPECT(gbc.pc(), 0xa05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa05c), 0xcb);
        EXPECT(gbc.readMem(0xa05d), 0xe8);
        // CB E8 02AB
        gbc.setState(0x69, 0xa6e7, 0xe3a0, 0xaaa8, 0x4667, 0xfbd3, 0x1, 0x1);
        gbc.writeMem(0x69, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa6e7);
        EXPECT(gbc.pc(), 0x6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02AC
        gbc.setState(0xd5f7, 0x8711, 0x8e70, 0xc842, 0x7be5, 0xb474, 0x0, 0x1);
        gbc.writeMem(0xd5f7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8711);
        EXPECT(gbc.pc(), 0xd5f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5f7), 0xcb);
        EXPECT(gbc.readMem(0xd5f8), 0xe8);
        // CB E8 02AD
        gbc.setState(0x437c, 0x2ef5, 0x1720, 0xcba4, 0x9458, 0x3c94, 0x1, 0x1);
        gbc.writeMem(0x437c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2ef5);
        EXPECT(gbc.pc(), 0x437e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02AE
        gbc.setState(0x5df9, 0x6814, 0xde50, 0x894a, 0xdb3, 0x14de, 0x0, 0x1);
        gbc.writeMem(0x5df9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6814);
        EXPECT(gbc.pc(), 0x5dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02AF
        gbc.setState(0x760d, 0x702d, 0x7ad0, 0x8fe3, 0x3ad8, 0x5289, 0x1, 0x1);
        gbc.writeMem(0x760d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x702d);
        EXPECT(gbc.pc(), 0x760f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02B0
        gbc.setState(0x140f, 0x9465, 0x5cb0, 0xeac1, 0x3fd6, 0x7525, 0x1, 0x0);
        gbc.writeMem(0x140f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9465);
        EXPECT(gbc.pc(), 0x1411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02B2
        gbc.setState(0xfda, 0x41aa, 0xa410, 0x5859, 0x1eb4, 0x2e9d, 0x0, 0x1);
        gbc.writeMem(0xfda, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x41aa);
        EXPECT(gbc.pc(), 0xfdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02B3
        gbc.setState(0xa6f8, 0x2f3d, 0x38c0, 0xf607, 0x870c, 0x8b02, 0x1, 0x1);
        gbc.writeMem(0xa6f8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2f3d);
        EXPECT(gbc.pc(), 0xa6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f8), 0xcb);
        EXPECT(gbc.readMem(0xa6f9), 0xe8);
        // CB E8 02B4
        gbc.setState(0xcfa, 0xda4f, 0x86d0, 0x3cbf, 0xac61, 0x3352, 0x1, 0x0);
        gbc.writeMem(0xcfa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xda4f);
        EXPECT(gbc.pc(), 0xcfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02B5
        gbc.setState(0x8dc4, 0x54e7, 0xe680, 0x3c94, 0xe54e, 0x71e, 0x1, 0x0);
        gbc.writeMem(0x8dc4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x54e7);
        EXPECT(gbc.pc(), 0x8dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc4), 0xcb);
        EXPECT(gbc.readMem(0x8dc5), 0xe8);
        // CB E8 02B6
        gbc.setState(0x42e5, 0x83d4, 0xc920, 0xe05c, 0x1848, 0x4fb0, 0x0, 0x1);
        gbc.writeMem(0x42e5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x83d4);
        EXPECT(gbc.pc(), 0x42e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02B7
        gbc.setState(0x5b66, 0x8237, 0x6130, 0x8028, 0x28f, 0x4f8c, 0x1, 0x1);
        gbc.writeMem(0x5b66, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8237);
        EXPECT(gbc.pc(), 0x5b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02B8
        gbc.setState(0xeced, 0x84be, 0x6450, 0x3b1d, 0xd3be, 0x25aa, 0x0, 0x0);
        gbc.writeMem(0xeced, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x84be);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeced), 0xcb);
        EXPECT(gbc.readMem(0xecee), 0xe8);
        // CB E8 02B9
        gbc.setState(0x96fa, 0xf21a, 0xfe0, 0xb174, 0x8d4d, 0xbac5, 0x0, 0x0);
        gbc.writeMem(0x96fa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf21a);
        EXPECT(gbc.pc(), 0x96fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96fa), 0xcb);
        EXPECT(gbc.readMem(0x96fb), 0xe8);
        // CB E8 02BA
        gbc.setState(0x3816, 0x9ad1, 0x7dd0, 0xbd22, 0x5436, 0x2b96, 0x0, 0x1);
        gbc.writeMem(0x3816, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9ad1);
        EXPECT(gbc.pc(), 0x3818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02BB
        gbc.setState(0x4251, 0x7acb, 0x5ea0, 0xe1be, 0xc416, 0x8158, 0x1, 0x1);
        gbc.writeMem(0x4251, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7acb);
        EXPECT(gbc.pc(), 0x4253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02BC
        gbc.setState(0x4204, 0xc448, 0x57c0, 0x98af, 0x2106, 0x2c5, 0x1, 0x1);
        gbc.writeMem(0x4204, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc448);
        EXPECT(gbc.pc(), 0x4206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02BD
        gbc.setState(0x6b35, 0xea69, 0xcdf0, 0x8ad9, 0x732a, 0xdb5b, 0x1, 0x1);
        gbc.writeMem(0x6b35, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xea69);
        EXPECT(gbc.pc(), 0x6b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02BF
        gbc.setState(0x369a, 0x9a22, 0xd600, 0xfb29, 0xbc47, 0x477a, 0x1, 0x1);
        gbc.writeMem(0x369a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9a22);
        EXPECT(gbc.pc(), 0x369c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02C0
        gbc.setState(0xa3d0, 0x2f0d, 0xb880, 0x298a, 0x32cd, 0x7f14, 0x1, 0x1);
        gbc.writeMem(0xa3d0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2f0d);
        EXPECT(gbc.pc(), 0xa3d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d0), 0xcb);
        EXPECT(gbc.readMem(0xa3d1), 0xe8);
        // CB E8 02C1
        gbc.setState(0x729d, 0xaed1, 0xe890, 0xcde4, 0x1225, 0x6e33, 0x1, 0x0);
        gbc.writeMem(0x729d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xaed1);
        EXPECT(gbc.pc(), 0x729f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02C3
        gbc.setState(0xbd0d, 0x3b90, 0x4760, 0x2669, 0xa93, 0xda90, 0x1, 0x0);
        gbc.writeMem(0xbd0d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3b90);
        EXPECT(gbc.pc(), 0xbd0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd0d), 0xcb);
        EXPECT(gbc.readMem(0xbd0e), 0xe8);
        // CB E8 02C4
        gbc.setState(0x785, 0xf37a, 0x3c10, 0x8612, 0x90cc, 0x8b2b, 0x0, 0x1);
        gbc.writeMem(0x785, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf37a);
        EXPECT(gbc.pc(), 0x787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02C5
        gbc.setState(0x812, 0x8998, 0x7e90, 0xb7b3, 0xe625, 0x32fc, 0x0, 0x0);
        gbc.writeMem(0x812, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8998);
        EXPECT(gbc.pc(), 0x814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02C6
        gbc.setState(0x3d08, 0x4aa1, 0x1100, 0xed64, 0x5fd, 0x25e3, 0x0, 0x0);
        gbc.writeMem(0x3d08, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4aa1);
        EXPECT(gbc.pc(), 0x3d0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02C7
        gbc.setState(0x6476, 0x3576, 0xb190, 0xe28b, 0x9bec, 0xa257, 0x1, 0x0);
        gbc.writeMem(0x6476, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3576);
        EXPECT(gbc.pc(), 0x6478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02C8
        gbc.setState(0x8701, 0x4a3b, 0xd1e0, 0x4651, 0xe61e, 0x567c, 0x1, 0x1);
        gbc.writeMem(0x8701, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4a3b);
        EXPECT(gbc.pc(), 0x8703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8701), 0xcb);
        EXPECT(gbc.readMem(0x8702), 0xe8);
        // CB E8 02C9
        gbc.setState(0x4703, 0x7c98, 0x75f0, 0x6bff, 0xf3b2, 0xa893, 0x0, 0x1);
        gbc.writeMem(0x4703, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7c98);
        EXPECT(gbc.pc(), 0x4705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02CA
        gbc.setState(0xc433, 0xeb3, 0x3cf0, 0x44cb, 0x53eb, 0xc231, 0x0, 0x1);
        gbc.writeMem(0xc433, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xeb3);
        EXPECT(gbc.pc(), 0xc435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc433), 0xcb);
        EXPECT(gbc.readMem(0xc434), 0xe8);
        // CB E8 02CB
        gbc.setState(0xa8d1, 0xde3d, 0x43e0, 0xfd73, 0xac42, 0x3703, 0x0, 0x1);
        gbc.writeMem(0xa8d1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xde3d);
        EXPECT(gbc.pc(), 0xa8d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d1), 0xcb);
        EXPECT(gbc.readMem(0xa8d2), 0xe8);
        // CB E8 02CC
        gbc.setState(0x1a36, 0x6154, 0xa500, 0x94df, 0x8320, 0x3746, 0x1, 0x1);
        gbc.writeMem(0x1a36, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6154);
        EXPECT(gbc.pc(), 0x1a38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02CD
        gbc.setState(0x7c82, 0xf399, 0xf410, 0xab2d, 0xe260, 0x1778, 0x0, 0x0);
        gbc.writeMem(0x7c82, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf399);
        EXPECT(gbc.pc(), 0x7c84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02CE
        gbc.setState(0xc173, 0xff28, 0x2690, 0x1638, 0xc4e9, 0xc696, 0x1, 0x0);
        gbc.writeMem(0xc173, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xff28);
        EXPECT(gbc.pc(), 0xc175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc173), 0xcb);
        EXPECT(gbc.readMem(0xc174), 0xe8);
        // CB E8 02CF
        gbc.setState(0xa8ba, 0xbdcb, 0x6010, 0x73d0, 0x4696, 0x83b3, 0x1, 0x0);
        gbc.writeMem(0xa8ba, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbdcb);
        EXPECT(gbc.pc(), 0xa8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ba), 0xcb);
        EXPECT(gbc.readMem(0xa8bb), 0xe8);
        // CB E8 02D0
        gbc.setState(0x2a88, 0x6a75, 0x5930, 0xb6bc, 0xae04, 0x61f8, 0x1, 0x0);
        gbc.writeMem(0x2a88, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6a75);
        EXPECT(gbc.pc(), 0x2a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02D1
        gbc.setState(0x7f1a, 0xd78f, 0xb6e0, 0xbe78, 0xad89, 0xce04, 0x1, 0x0);
        gbc.writeMem(0x7f1a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd78f);
        EXPECT(gbc.pc(), 0x7f1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02D2
        gbc.setState(0xadbf, 0x73ce, 0x5570, 0x7cdd, 0x86a, 0x3ed6, 0x0, 0x1);
        gbc.writeMem(0xadbf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x73ce);
        EXPECT(gbc.pc(), 0xadc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadbf), 0xcb);
        EXPECT(gbc.readMem(0xadc0), 0xe8);
        // CB E8 02D3
        gbc.setState(0x2574, 0xed08, 0x65c0, 0x9835, 0xe442, 0x12c4, 0x0, 0x0);
        gbc.writeMem(0x2574, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xed08);
        EXPECT(gbc.pc(), 0x2576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02D5
        gbc.setState(0x73e2, 0xab79, 0xa9c0, 0x577d, 0x6001, 0x1c26, 0x0, 0x0);
        gbc.writeMem(0x73e2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xab79);
        EXPECT(gbc.pc(), 0x73e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02D6
        gbc.setState(0xdc9, 0xd20a, 0x8a70, 0x7f4f, 0xaa1b, 0xc418, 0x0, 0x0);
        gbc.writeMem(0xdc9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd20a);
        EXPECT(gbc.pc(), 0xdcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02D7
        gbc.setState(0xc58b, 0xd018, 0x5120, 0xb026, 0xd268, 0xf51c, 0x0, 0x1);
        gbc.writeMem(0xc58b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd018);
        EXPECT(gbc.pc(), 0xc58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58b), 0xcb);
        EXPECT(gbc.readMem(0xc58c), 0xe8);
        // CB E8 02D8
        gbc.setState(0x371a, 0x4d9f, 0x75d0, 0x5e1, 0x74b0, 0xfcc3, 0x1, 0x1);
        gbc.writeMem(0x371a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4d9f);
        EXPECT(gbc.pc(), 0x371c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02D9
        gbc.setState(0x3d35, 0xcfe6, 0xb1d0, 0xb7bd, 0x139d, 0x78f2, 0x0, 0x0);
        gbc.writeMem(0x3d35, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcfe6);
        EXPECT(gbc.pc(), 0x3d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02DA
        gbc.setState(0x1d1c, 0xf764, 0x0, 0x6399, 0x37a7, 0xecb5, 0x0, 0x0);
        gbc.writeMem(0x1d1c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf764);
        EXPECT(gbc.pc(), 0x1d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02DB
        gbc.setState(0xd6b6, 0x88fd, 0xabc0, 0xe04d, 0xffe0, 0xac5c, 0x0, 0x1);
        gbc.writeMem(0xd6b6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x88fd);
        EXPECT(gbc.pc(), 0xd6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b6), 0xcb);
        EXPECT(gbc.readMem(0xd6b7), 0xe8);
        // CB E8 02DC
        gbc.setState(0xe590, 0x73cd, 0x1a60, 0xc83e, 0x203a, 0xcb67, 0x1, 0x1);
        gbc.writeMem(0xe590, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x73cd);
        EXPECT(gbc.pc(), 0xe592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe590), 0xcb);
        EXPECT(gbc.readMem(0xe591), 0xe8);
        // CB E8 02DD
        gbc.setState(0xf29, 0x3953, 0x9230, 0xdba, 0xad74, 0xcc8b, 0x0, 0x1);
        gbc.writeMem(0xf29, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3953);
        EXPECT(gbc.pc(), 0xf2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02DE
        gbc.setState(0x45e3, 0xe528, 0xc170, 0x9761, 0xb413, 0x93f6, 0x1, 0x1);
        gbc.writeMem(0x45e3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe528);
        EXPECT(gbc.pc(), 0x45e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02DF
        gbc.setState(0xeb3e, 0xbc5c, 0x4d60, 0x65e8, 0xebb1, 0xed6, 0x0, 0x1);
        gbc.writeMem(0xeb3e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbc5c);
        EXPECT(gbc.pc(), 0xeb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb3e), 0xcb);
        EXPECT(gbc.readMem(0xeb3f), 0xe8);
        // CB E8 02E1
        gbc.setState(0xdd4b, 0x1d30, 0x2690, 0x3809, 0x2d3b, 0x37a0, 0x0, 0x0);
        gbc.writeMem(0xdd4b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1d30);
        EXPECT(gbc.pc(), 0xdd4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd4b), 0xcb);
        EXPECT(gbc.readMem(0xdd4c), 0xe8);
        // CB E8 02E2
        gbc.setState(0x6b14, 0xffcf, 0xe50, 0x5a25, 0x69ba, 0x97c7, 0x1, 0x0);
        gbc.writeMem(0x6b14, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xffcf);
        EXPECT(gbc.pc(), 0x6b16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02E3
        gbc.setState(0x9896, 0x2b75, 0x9b80, 0xe53a, 0xa78f, 0x572a, 0x1, 0x0);
        gbc.writeMem(0x9896, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2b75);
        EXPECT(gbc.pc(), 0x9898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9896), 0xcb);
        EXPECT(gbc.readMem(0x9897), 0xe8);
        // CB E8 02E4
        gbc.setState(0x6ba3, 0xca57, 0xcae0, 0x616c, 0x95fb, 0x512b, 0x0, 0x1);
        gbc.writeMem(0x6ba3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xca57);
        EXPECT(gbc.pc(), 0x6ba5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02E5
        gbc.setState(0x808f, 0xe97b, 0x2fd0, 0x5cf8, 0x1976, 0xf457, 0x0, 0x1);
        gbc.writeMem(0x808f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe97b);
        EXPECT(gbc.pc(), 0x8091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x808f), 0xcb);
        EXPECT(gbc.readMem(0x8090), 0xe8);
        // CB E8 02E6
        gbc.setState(0x8247, 0x2318, 0xcdb0, 0x5721, 0x85e5, 0x6402, 0x1, 0x0);
        gbc.writeMem(0x8247, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2318);
        EXPECT(gbc.pc(), 0x8249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8247), 0xcb);
        EXPECT(gbc.readMem(0x8248), 0xe8);
        // CB E8 02E7
        gbc.setState(0x3fb6, 0xd8ee, 0xada0, 0xda6, 0xcd30, 0x3657, 0x0, 0x0);
        gbc.writeMem(0x3fb6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd8ee);
        EXPECT(gbc.pc(), 0x3fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02E8
        gbc.setState(0x71c9, 0xdc5b, 0x5b30, 0xe172, 0xc18, 0x4687, 0x0, 0x1);
        gbc.writeMem(0x71c9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdc5b);
        EXPECT(gbc.pc(), 0x71cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02E9
        gbc.setState(0x92b6, 0x63b7, 0x7210, 0xc792, 0x6e5d, 0xdaf0, 0x0, 0x0);
        gbc.writeMem(0x92b6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x63b7);
        EXPECT(gbc.pc(), 0x92b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b6), 0xcb);
        EXPECT(gbc.readMem(0x92b7), 0xe8);
        // CB E8 02EA
        gbc.setState(0xfff, 0x9a5f, 0xebd0, 0xb15f, 0xc0d8, 0xb2c7, 0x0, 0x1);
        gbc.writeMem(0xfff, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9a5f);
        EXPECT(gbc.pc(), 0x1001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02EB
        gbc.setState(0x7201, 0xa2f, 0x2550, 0x4f18, 0xc54b, 0xba30, 0x1, 0x0);
        gbc.writeMem(0x7201, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa2f);
        EXPECT(gbc.pc(), 0x7203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02EC
        gbc.setState(0xa2c7, 0x4fe1, 0x1e50, 0xd935, 0x4374, 0xf767, 0x0, 0x0);
        gbc.writeMem(0xa2c7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4fe1);
        EXPECT(gbc.pc(), 0xa2c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c7), 0xcb);
        EXPECT(gbc.readMem(0xa2c8), 0xe8);
        // CB E8 02ED
        gbc.setState(0x8ae9, 0xb748, 0x7730, 0x77b5, 0x249d, 0x96dd, 0x1, 0x0);
        gbc.writeMem(0x8ae9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb748);
        EXPECT(gbc.pc(), 0x8aeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae9), 0xcb);
        EXPECT(gbc.readMem(0x8aea), 0xe8);
        // CB E8 02EE
        gbc.setState(0x5451, 0x8e51, 0x2180, 0x798a, 0x7b81, 0x66f9, 0x1, 0x0);
        gbc.writeMem(0x5451, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8e51);
        EXPECT(gbc.pc(), 0x5453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02EF
        gbc.setState(0xe9b5, 0xd59c, 0x2150, 0x7f66, 0xf019, 0x71dd, 0x1, 0x0);
        gbc.writeMem(0xe9b5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0xe9b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b5), 0xcb);
        EXPECT(gbc.readMem(0xe9b6), 0xe8);
        // CB E8 02F0
        gbc.setState(0xc14e, 0x991d, 0xdce0, 0xdaae, 0x501e, 0xd0de, 0x1, 0x0);
        gbc.writeMem(0xc14e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x991d);
        EXPECT(gbc.pc(), 0xc150);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc14e), 0xcb);
        EXPECT(gbc.readMem(0xc14f), 0xe8);
        // CB E8 02F1
        gbc.setState(0x20cc, 0xe20, 0x3d30, 0xaae7, 0x65bc, 0x35cf, 0x0, 0x0);
        gbc.writeMem(0x20cc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe20);
        EXPECT(gbc.pc(), 0x20ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02F2
        gbc.setState(0xc1d5, 0xab95, 0x3db0, 0x30e, 0x766f, 0xdbf8, 0x1, 0x0);
        gbc.writeMem(0xc1d5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xab95);
        EXPECT(gbc.pc(), 0xc1d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d5), 0xcb);
        EXPECT(gbc.readMem(0xc1d6), 0xe8);
        // CB E8 02F3
        gbc.setState(0x8b4e, 0x5fd2, 0xc1a0, 0xa69d, 0xd250, 0x9bdf, 0x0, 0x0);
        gbc.writeMem(0x8b4e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x5fd2);
        EXPECT(gbc.pc(), 0x8b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b4e), 0xcb);
        EXPECT(gbc.readMem(0x8b4f), 0xe8);
        // CB E8 02F5
        gbc.setState(0x3917, 0x5970, 0x20, 0xdbab, 0x9689, 0xa95d, 0x0, 0x0);
        gbc.writeMem(0x3917, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5970);
        EXPECT(gbc.pc(), 0x3919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02F6
        gbc.setState(0x2b26, 0x991b, 0x1850, 0x27da, 0x1511, 0xec1b, 0x1, 0x0);
        gbc.writeMem(0x2b26, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x991b);
        EXPECT(gbc.pc(), 0x2b28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02F7
        gbc.setState(0x7475, 0xa092, 0xc4c0, 0xce8b, 0x1581, 0x1ce3, 0x1, 0x0);
        gbc.writeMem(0x7475, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa092);
        EXPECT(gbc.pc(), 0x7477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 02F8
        gbc.setState(0x8f0e, 0x5acd, 0x730, 0x141b, 0x418b, 0xdfee, 0x1, 0x0);
        gbc.writeMem(0x8f0e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5acd);
        EXPECT(gbc.pc(), 0x8f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f0e), 0xcb);
        EXPECT(gbc.readMem(0x8f0f), 0xe8);
        // CB E8 02F9
        gbc.setState(0xc6a2, 0x50b4, 0xf7e0, 0x39cc, 0x831a, 0x74a4, 0x0, 0x1);
        gbc.writeMem(0xc6a2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x50b4);
        EXPECT(gbc.pc(), 0xc6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a2), 0xcb);
        EXPECT(gbc.readMem(0xc6a3), 0xe8);
        // CB E8 02FA
        gbc.setState(0x163a, 0xf6dd, 0x1650, 0x30c0, 0xdd90, 0x509d, 0x1, 0x0);
        gbc.writeMem(0x163a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf6dd);
        EXPECT(gbc.pc(), 0x163c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02FB
        gbc.setState(0x8c3f, 0xc501, 0x4d90, 0xfaf7, 0x54ec, 0xe46, 0x0, 0x1);
        gbc.writeMem(0x8c3f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc501);
        EXPECT(gbc.pc(), 0x8c41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3f), 0xcb);
        EXPECT(gbc.readMem(0x8c40), 0xe8);
        // CB E8 02FC
        gbc.setState(0x3bc5, 0xf6c1, 0x6630, 0x6952, 0x9410, 0x2d87, 0x1, 0x0);
        gbc.writeMem(0x3bc5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf6c1);
        EXPECT(gbc.pc(), 0x3bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02FD
        gbc.setState(0x3c68, 0x337d, 0x9c30, 0x7fbc, 0x9c2e, 0x7d63, 0x0, 0x0);
        gbc.writeMem(0x3c68, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x337d);
        EXPECT(gbc.pc(), 0x3c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02FE
        gbc.setState(0x535f, 0xcb9d, 0x1cb0, 0xff72, 0x3f41, 0x92aa, 0x1, 0x0);
        gbc.writeMem(0x535f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcb9d);
        EXPECT(gbc.pc(), 0x5361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 02FF
        gbc.setState(0xbfcc, 0x2ad9, 0x8780, 0xdd7d, 0x11d7, 0xc7b2, 0x0, 0x0);
        gbc.writeMem(0xbfcc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2ad9);
        EXPECT(gbc.pc(), 0xbfce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfcc), 0xcb);
        EXPECT(gbc.readMem(0xbfcd), 0xe8);
        // CB E8 0300
        gbc.setState(0xce4a, 0x58c8, 0x3900, 0xf3d6, 0x5867, 0x16f5, 0x0, 0x0);
        gbc.writeMem(0xce4a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x58c8);
        EXPECT(gbc.pc(), 0xce4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce4a), 0xcb);
        EXPECT(gbc.readMem(0xce4b), 0xe8);
        // CB E8 0301
        gbc.setState(0xcbbd, 0x28d6, 0x430, 0x9d81, 0xbd0e, 0x9742, 0x0, 0x1);
        gbc.writeMem(0xcbbd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x28d6);
        EXPECT(gbc.pc(), 0xcbbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbbd), 0xcb);
        EXPECT(gbc.readMem(0xcbbe), 0xe8);
        // CB E8 0302
        gbc.setState(0x8b97, 0xe5d0, 0x5a20, 0x9de5, 0x75f8, 0x388, 0x0, 0x0);
        gbc.writeMem(0x8b97, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe5d0);
        EXPECT(gbc.pc(), 0x8b99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b97), 0xcb);
        EXPECT(gbc.readMem(0x8b98), 0xe8);
        // CB E8 0303
        gbc.setState(0x6537, 0x7b6, 0x7a20, 0x73, 0x71b7, 0x7110, 0x0, 0x0);
        gbc.writeMem(0x6537, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7b6);
        EXPECT(gbc.pc(), 0x6539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0304
        gbc.setState(0x114b, 0x59e3, 0xbb50, 0x64e8, 0x1ab, 0x475e, 0x0, 0x0);
        gbc.writeMem(0x114b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x59e3);
        EXPECT(gbc.pc(), 0x114d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0305
        gbc.setState(0x68ce, 0xba5d, 0x1c30, 0xb95c, 0x578e, 0x9636, 0x1, 0x0);
        gbc.writeMem(0x68ce, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xba5d);
        EXPECT(gbc.pc(), 0x68d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0306
        gbc.setState(0x377a, 0x969, 0x8e40, 0x13b0, 0x46d0, 0x34b8, 0x1, 0x0);
        gbc.writeMem(0x377a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x969);
        EXPECT(gbc.pc(), 0x377c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0307
        gbc.setState(0xd171, 0xee0f, 0x9030, 0xd3a6, 0x57c1, 0x88c3, 0x1, 0x1);
        gbc.writeMem(0xd171, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xee0f);
        EXPECT(gbc.pc(), 0xd173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd171), 0xcb);
        EXPECT(gbc.readMem(0xd172), 0xe8);
        // CB E8 0308
        gbc.setState(0xa7dd, 0xa56, 0x940, 0xef41, 0x2d8a, 0x6543, 0x1, 0x0);
        gbc.writeMem(0xa7dd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa56);
        EXPECT(gbc.pc(), 0xa7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7dd), 0xcb);
        EXPECT(gbc.readMem(0xa7de), 0xe8);
        // CB E8 0309
        gbc.setState(0xe92, 0xbc68, 0xed0, 0xe312, 0xb1b6, 0xbd8, 0x0, 0x1);
        gbc.writeMem(0xe92, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbc68);
        EXPECT(gbc.pc(), 0xe94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 030A
        gbc.setState(0x568e, 0x56d1, 0x9c50, 0xdbff, 0x4c3, 0x60e8, 0x0, 0x1);
        gbc.writeMem(0x568e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x56d1);
        EXPECT(gbc.pc(), 0x5690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 030B
        gbc.setState(0x266a, 0x39d7, 0xc090, 0x9ab4, 0xfee7, 0xb0d2, 0x1, 0x1);
        gbc.writeMem(0x266a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x39d7);
        EXPECT(gbc.pc(), 0x266c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 030C
        gbc.setState(0x421e, 0xb549, 0x2f30, 0x1810, 0x3ecf, 0x9304, 0x1, 0x0);
        gbc.writeMem(0x421e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb549);
        EXPECT(gbc.pc(), 0x4220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 030D
        gbc.setState(0x65ef, 0x1b1f, 0x1ea0, 0x2261, 0x7cbf, 0x2274, 0x0, 0x0);
        gbc.writeMem(0x65ef, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1b1f);
        EXPECT(gbc.pc(), 0x65f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 030E
        gbc.setState(0xe390, 0xd2a, 0x5730, 0x26cd, 0x193a, 0xabd5, 0x1, 0x0);
        gbc.writeMem(0xe390, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd2a);
        EXPECT(gbc.pc(), 0xe392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe390), 0xcb);
        EXPECT(gbc.readMem(0xe391), 0xe8);
        // CB E8 030F
        gbc.setState(0xca4f, 0x6737, 0xa010, 0x8896, 0xbb7c, 0xb82b, 0x1, 0x0);
        gbc.writeMem(0xca4f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6737);
        EXPECT(gbc.pc(), 0xca51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca4f), 0xcb);
        EXPECT(gbc.readMem(0xca50), 0xe8);
        // CB E8 0310
        gbc.setState(0x61c5, 0xcfc7, 0x2270, 0x44e, 0x17c4, 0x38f8, 0x0, 0x1);
        gbc.writeMem(0x61c5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xcfc7);
        EXPECT(gbc.pc(), 0x61c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0311
        gbc.setState(0x1c67, 0xbe82, 0x6700, 0x61cd, 0xd6df, 0x84e1, 0x0, 0x1);
        gbc.writeMem(0x1c67, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xbe82);
        EXPECT(gbc.pc(), 0x1c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0312
        gbc.setState(0x3e39, 0xd4f8, 0xdc0, 0xb5a4, 0x2555, 0xd4c8, 0x1, 0x1);
        gbc.writeMem(0x3e39, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd4f8);
        EXPECT(gbc.pc(), 0x3e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0313
        gbc.setState(0x44eb, 0xf931, 0x1bf0, 0xdd92, 0xa317, 0x3586, 0x0, 0x1);
        gbc.writeMem(0x44eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf931);
        EXPECT(gbc.pc(), 0x44ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0314
        gbc.setState(0x1508, 0x3d1a, 0x2560, 0x5587, 0x57a3, 0x3423, 0x1, 0x0);
        gbc.writeMem(0x1508, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3d1a);
        EXPECT(gbc.pc(), 0x150a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0315
        gbc.setState(0x3fd, 0x10c9, 0xe4c0, 0x3d4a, 0x87f9, 0x3b66, 0x0, 0x0);
        gbc.writeMem(0x3fd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x10c9);
        EXPECT(gbc.pc(), 0x3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0316
        gbc.setState(0x770a, 0xfe0, 0xdd30, 0x9882, 0xa44e, 0xf0a0, 0x1, 0x1);
        gbc.writeMem(0x770a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfe0);
        EXPECT(gbc.pc(), 0x770c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0317
        gbc.setState(0x2d77, 0x79f, 0x9ab0, 0x107c, 0x56ef, 0xa5a6, 0x0, 0x1);
        gbc.writeMem(0x2d77, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x79f);
        EXPECT(gbc.pc(), 0x2d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0318
        gbc.setState(0x644, 0xe2e3, 0xfdc0, 0x774a, 0xe169, 0x2bdb, 0x1, 0x1);
        gbc.writeMem(0x644, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe2e3);
        EXPECT(gbc.pc(), 0x646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0319
        gbc.setState(0x92b4, 0x15a5, 0xede0, 0xb2b, 0xce02, 0x36b3, 0x1, 0x0);
        gbc.writeMem(0x92b4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x15a5);
        EXPECT(gbc.pc(), 0x92b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92b4), 0xcb);
        EXPECT(gbc.readMem(0x92b5), 0xe8);
        // CB E8 031A
        gbc.setState(0x6f38, 0xc0e0, 0x9f30, 0xfc45, 0xca55, 0xe8df, 0x1, 0x1);
        gbc.writeMem(0x6f38, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc0e0);
        EXPECT(gbc.pc(), 0x6f3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 031B
        gbc.setState(0xcd72, 0x7161, 0x8fd0, 0xd763, 0x2083, 0x737c, 0x0, 0x1);
        gbc.writeMem(0xcd72, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7161);
        EXPECT(gbc.pc(), 0xcd74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd72), 0xcb);
        EXPECT(gbc.readMem(0xcd73), 0xe8);
        // CB E8 031C
        gbc.setState(0x7cb, 0xe419, 0xa470, 0x5f0c, 0x4f01, 0xe9ef, 0x1, 0x1);
        gbc.writeMem(0x7cb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe419);
        EXPECT(gbc.pc(), 0x7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 031D
        gbc.setState(0xa400, 0x9cf6, 0xf260, 0xdf4b, 0x39f, 0xd120, 0x0, 0x1);
        gbc.writeMem(0xa400, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9cf6);
        EXPECT(gbc.pc(), 0xa402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa400), 0xcb);
        EXPECT(gbc.readMem(0xa401), 0xe8);
        // CB E8 031E
        gbc.setState(0x553a, 0x4baf, 0x1830, 0x8f8f, 0x1062, 0x1fb5, 0x0, 0x0);
        gbc.writeMem(0x553a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4baf);
        EXPECT(gbc.pc(), 0x553c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0320
        gbc.setState(0x39c5, 0xac91, 0x1d10, 0x3ea3, 0x35e8, 0xb7a6, 0x0, 0x0);
        gbc.writeMem(0x39c5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xac91);
        EXPECT(gbc.pc(), 0x39c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0321
        gbc.setState(0x243e, 0x5042, 0xc1a0, 0x5505, 0xc9ed, 0x296, 0x0, 0x0);
        gbc.writeMem(0x243e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5042);
        EXPECT(gbc.pc(), 0x2440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0322
        gbc.setState(0x5fd, 0x2ff5, 0x5520, 0x7d8, 0x9f7d, 0x88d6, 0x1, 0x1);
        gbc.writeMem(0x5fd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2ff5);
        EXPECT(gbc.pc(), 0x5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0323
        gbc.setState(0x3e62, 0xdde0, 0x8ad0, 0x99a4, 0x712c, 0xfd54, 0x1, 0x1);
        gbc.writeMem(0x3e62, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdde0);
        EXPECT(gbc.pc(), 0x3e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0324
        gbc.setState(0xb5f, 0xda16, 0xc8d0, 0x2114, 0x5b80, 0x3c71, 0x1, 0x1);
        gbc.writeMem(0xb5f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xda16);
        EXPECT(gbc.pc(), 0xb61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0325
        gbc.setState(0x3710, 0x7a9d, 0x1830, 0xe501, 0x2a55, 0x51c4, 0x0, 0x1);
        gbc.writeMem(0x3710, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7a9d);
        EXPECT(gbc.pc(), 0x3712);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0326
        gbc.setState(0x3e49, 0x67dd, 0xdae0, 0x336e, 0x2755, 0xa259, 0x1, 0x0);
        gbc.writeMem(0x3e49, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x67dd);
        EXPECT(gbc.pc(), 0x3e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0327
        gbc.setState(0x1ea7, 0x6970, 0xf5f0, 0x1a91, 0xd1c7, 0x1908, 0x0, 0x1);
        gbc.writeMem(0x1ea7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6970);
        EXPECT(gbc.pc(), 0x1ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0328
        gbc.setState(0x41eb, 0xa556, 0x8290, 0x601f, 0x2041, 0x80e8, 0x0, 0x0);
        gbc.writeMem(0x41eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa556);
        EXPECT(gbc.pc(), 0x41ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0329
        gbc.setState(0x462a, 0x6f59, 0x8190, 0x5817, 0xf4d2, 0xc9c7, 0x0, 0x0);
        gbc.writeMem(0x462a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6f59);
        EXPECT(gbc.pc(), 0x462c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 032A
        gbc.setState(0x70da, 0x7d85, 0xb650, 0x582d, 0x50c0, 0xc208, 0x1, 0x0);
        gbc.writeMem(0x70da, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7d85);
        EXPECT(gbc.pc(), 0x70dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 032B
        gbc.setState(0x3959, 0x448a, 0x70a0, 0xfeb8, 0x2df8, 0x5036, 0x1, 0x0);
        gbc.writeMem(0x3959, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x448a);
        EXPECT(gbc.pc(), 0x395b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 032D
        gbc.setState(0x8ab3, 0x1391, 0x1120, 0x22fb, 0x37e0, 0xc8c6, 0x1, 0x0);
        gbc.writeMem(0x8ab3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1391);
        EXPECT(gbc.pc(), 0x8ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab3), 0xcb);
        EXPECT(gbc.readMem(0x8ab4), 0xe8);
        // CB E8 032E
        gbc.setState(0x5309, 0xd220, 0xba60, 0x4287, 0xa20f, 0xc49f, 0x1, 0x1);
        gbc.writeMem(0x5309, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd220);
        EXPECT(gbc.pc(), 0x530b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 032F
        gbc.setState(0xa5fe, 0x6a50, 0xbe80, 0x31f3, 0x79ad, 0x3b29, 0x1, 0x0);
        gbc.writeMem(0xa5fe, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6a50);
        EXPECT(gbc.pc(), 0xa600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fe), 0xcb);
        EXPECT(gbc.readMem(0xa5ff), 0xe8);
        // CB E8 0330
        gbc.setState(0x5df4, 0xcff1, 0xca00, 0xb499, 0xd6ce, 0xdf1d, 0x1, 0x0);
        gbc.writeMem(0x5df4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcff1);
        EXPECT(gbc.pc(), 0x5df6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0331
        gbc.setState(0x5c1, 0x3e2f, 0x5010, 0x384e, 0xcc41, 0xb00c, 0x1, 0x1);
        gbc.writeMem(0x5c1, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3e2f);
        EXPECT(gbc.pc(), 0x5c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0332
        gbc.setState(0x2a5, 0xdc99, 0xb040, 0x529f, 0xa40, 0x67bd, 0x0, 0x0);
        gbc.writeMem(0x2a5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xdc99);
        EXPECT(gbc.pc(), 0x2a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0333
        gbc.setState(0x8209, 0x7692, 0x5660, 0xb24b, 0x3bcc, 0x7479, 0x0, 0x0);
        gbc.writeMem(0x8209, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7692);
        EXPECT(gbc.pc(), 0x820b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8209), 0xcb);
        EXPECT(gbc.readMem(0x820a), 0xe8);
        // CB E8 0334
        gbc.setState(0xedfe, 0xeab, 0x6d60, 0xe627, 0xf7db, 0x7673, 0x1, 0x1);
        gbc.writeMem(0xedfe, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xeab);
        EXPECT(gbc.pc(), 0xee00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedfe), 0xcb);
        EXPECT(gbc.readMem(0xedff), 0xe8);
        // CB E8 0335
        gbc.setState(0x775, 0x2747, 0x3190, 0x2bcf, 0xd298, 0x4bd6, 0x0, 0x1);
        gbc.writeMem(0x775, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2747);
        EXPECT(gbc.pc(), 0x777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0336
        gbc.setState(0xd3ff, 0x576b, 0xdad0, 0x340e, 0x6575, 0x11f3, 0x0, 0x0);
        gbc.writeMem(0xd3ff, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x576b);
        EXPECT(gbc.pc(), 0xd401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3ff), 0xcb);
        EXPECT(gbc.readMem(0xd400), 0xe8);
        // CB E8 0337
        gbc.setState(0x51eb, 0xc202, 0x59e0, 0x3266, 0xcb24, 0xaf4b, 0x0, 0x0);
        gbc.writeMem(0x51eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc202);
        EXPECT(gbc.pc(), 0x51ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0338
        gbc.setState(0x1eb, 0xf068, 0x4ae0, 0x2953, 0x9334, 0xf658, 0x0, 0x1);
        gbc.writeMem(0x1eb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf068);
        EXPECT(gbc.pc(), 0x1ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0339
        gbc.setState(0xa7c3, 0xbefb, 0x9490, 0x7f16, 0x431b, 0xc96c, 0x1, 0x1);
        gbc.writeMem(0xa7c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbefb);
        EXPECT(gbc.pc(), 0xa7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c3), 0xcb);
        EXPECT(gbc.readMem(0xa7c4), 0xe8);
        // CB E8 033A
        gbc.setState(0xde01, 0x8cd5, 0x1e00, 0x9536, 0xbaa3, 0xa1e1, 0x1, 0x1);
        gbc.writeMem(0xde01, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8cd5);
        EXPECT(gbc.pc(), 0xde03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde01), 0xcb);
        EXPECT(gbc.readMem(0xde02), 0xe8);
        // CB E8 033B
        gbc.setState(0x885d, 0x58b2, 0x3e80, 0xff40, 0x4ed2, 0x524c, 0x0, 0x1);
        gbc.writeMem(0x885d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x58b2);
        EXPECT(gbc.pc(), 0x885f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885d), 0xcb);
        EXPECT(gbc.readMem(0x885e), 0xe8);
        // CB E8 033C
        gbc.setState(0xb643, 0x5448, 0x4a80, 0x4bfc, 0xd0e0, 0xf38d, 0x1, 0x0);
        gbc.writeMem(0xb643, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5448);
        EXPECT(gbc.pc(), 0xb645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb643), 0xcb);
        EXPECT(gbc.readMem(0xb644), 0xe8);
        // CB E8 033D
        gbc.setState(0x1d12, 0xc33c, 0x93b0, 0xf678, 0x81a8, 0x833f, 0x0, 0x0);
        gbc.writeMem(0x1d12, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc33c);
        EXPECT(gbc.pc(), 0x1d14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 033E
        gbc.setState(0x763, 0x18b2, 0x53c0, 0xfed3, 0x3935, 0xf81, 0x0, 0x1);
        gbc.writeMem(0x763, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x18b2);
        EXPECT(gbc.pc(), 0x765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 033F
        gbc.setState(0x1220, 0x32d, 0x3c00, 0x3565, 0x2855, 0x2481, 0x0, 0x1);
        gbc.writeMem(0x1220, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x32d);
        EXPECT(gbc.pc(), 0x1222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0340
        gbc.setState(0x9abb, 0xf350, 0x8780, 0xdbe5, 0x84ef, 0xe9af, 0x0, 0x0);
        gbc.writeMem(0x9abb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf350);
        EXPECT(gbc.pc(), 0x9abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abb), 0xcb);
        EXPECT(gbc.readMem(0x9abc), 0xe8);
        // CB E8 0341
        gbc.setState(0x9ffa, 0x211d, 0x7a80, 0x68c9, 0x52ef, 0xedbc, 0x1, 0x0);
        gbc.writeMem(0x9ffa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x211d);
        EXPECT(gbc.pc(), 0x9ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffa), 0xcb);
        EXPECT(gbc.readMem(0x9ffb), 0xe8);
        // CB E8 0342
        gbc.setState(0x8bd5, 0xd0c0, 0x78b0, 0xec9, 0x57bf, 0x26dd, 0x1, 0x1);
        gbc.writeMem(0x8bd5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd0c0);
        EXPECT(gbc.pc(), 0x8bd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bd5), 0xcb);
        EXPECT(gbc.readMem(0x8bd6), 0xe8);
        // CB E8 0344
        gbc.setState(0xa5c, 0x9cb1, 0xeb10, 0x1f6a, 0x782e, 0x92c6, 0x0, 0x0);
        gbc.writeMem(0xa5c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9cb1);
        EXPECT(gbc.pc(), 0xa5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0345
        gbc.setState(0x67c3, 0xe04b, 0xcfc0, 0xd8e3, 0xf9ce, 0x951e, 0x1, 0x0);
        gbc.writeMem(0x67c3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe04b);
        EXPECT(gbc.pc(), 0x67c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0346
        gbc.setState(0xd5b2, 0xc3b6, 0xf9d0, 0x1f0a, 0xcfb3, 0xfd0b, 0x0, 0x1);
        gbc.writeMem(0xd5b2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc3b6);
        EXPECT(gbc.pc(), 0xd5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b2), 0xcb);
        EXPECT(gbc.readMem(0xd5b3), 0xe8);
        // CB E8 0347
        gbc.setState(0x36be, 0x32bd, 0x2fa0, 0x1784, 0x494b, 0x3638, 0x1, 0x0);
        gbc.writeMem(0x36be, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x32bd);
        EXPECT(gbc.pc(), 0x36c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0348
        gbc.setState(0x6b8a, 0x795a, 0x12e0, 0xfb15, 0x8b8d, 0x762f, 0x1, 0x0);
        gbc.writeMem(0x6b8a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x795a);
        EXPECT(gbc.pc(), 0x6b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0349
        gbc.setState(0x32bd, 0xd9a5, 0xa670, 0xa839, 0x8b1, 0x98dd, 0x0, 0x1);
        gbc.writeMem(0x32bd, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd9a5);
        EXPECT(gbc.pc(), 0x32bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 034B
        gbc.setState(0x3425, 0x669a, 0x4580, 0xf79f, 0x609a, 0xeff, 0x0, 0x0);
        gbc.writeMem(0x3425, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x669a);
        EXPECT(gbc.pc(), 0x3427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 034C
        gbc.setState(0xbe4, 0xe2d9, 0x6950, 0x2510, 0xb364, 0xe2d, 0x1, 0x0);
        gbc.writeMem(0xbe4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe2d9);
        EXPECT(gbc.pc(), 0xbe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 034D
        gbc.setState(0x3726, 0xa9c4, 0xb070, 0xf3ff, 0xcb11, 0xcb24, 0x0, 0x0);
        gbc.writeMem(0x3726, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa9c4);
        EXPECT(gbc.pc(), 0x3728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 034E
        gbc.setState(0x40f4, 0xa250, 0x4000, 0x4965, 0x7d3b, 0x1047, 0x0, 0x1);
        gbc.writeMem(0x40f4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa250);
        EXPECT(gbc.pc(), 0x40f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 034F
        gbc.setState(0x1214, 0xd117, 0x24d0, 0xed3e, 0x95d8, 0x569, 0x0, 0x0);
        gbc.writeMem(0x1214, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd117);
        EXPECT(gbc.pc(), 0x1216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0350
        gbc.setState(0xcc94, 0xc3f3, 0x4fd0, 0x5e0c, 0x9e0, 0x956c, 0x1, 0x0);
        gbc.writeMem(0xcc94, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc3f3);
        EXPECT(gbc.pc(), 0xcc96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc94), 0xcb);
        EXPECT(gbc.readMem(0xcc95), 0xe8);
        // CB E8 0351
        gbc.setState(0xe14a, 0xa3f5, 0xf4c0, 0x871a, 0xce73, 0xb249, 0x0, 0x1);
        gbc.writeMem(0xe14a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa3f5);
        EXPECT(gbc.pc(), 0xe14c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14a), 0xcb);
        EXPECT(gbc.readMem(0xe14b), 0xe8);
        // CB E8 0352
        gbc.setState(0xed9e, 0x1c3d, 0x8f50, 0x3882, 0x13c1, 0x6851, 0x0, 0x1);
        gbc.writeMem(0xed9e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1c3d);
        EXPECT(gbc.pc(), 0xeda0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed9e), 0xcb);
        EXPECT(gbc.readMem(0xed9f), 0xe8);
        // CB E8 0353
        gbc.setState(0x960e, 0x9f9e, 0xd240, 0x9b3e, 0xaec9, 0xb86c, 0x1, 0x0);
        gbc.writeMem(0x960e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9f9e);
        EXPECT(gbc.pc(), 0x9610);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x960e), 0xcb);
        EXPECT(gbc.readMem(0x960f), 0xe8);
        // CB E8 0354
        gbc.setState(0x1b7a, 0xcde7, 0x7ee0, 0x82b6, 0x6da9, 0xc6bc, 0x0, 0x0);
        gbc.writeMem(0x1b7a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xcde7);
        EXPECT(gbc.pc(), 0x1b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0355
        gbc.setState(0x1aa6, 0x9954, 0x7d30, 0x13fc, 0x8fca, 0x7ac7, 0x0, 0x1);
        gbc.writeMem(0x1aa6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9954);
        EXPECT(gbc.pc(), 0x1aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0356
        gbc.setState(0x557, 0xce93, 0xc410, 0x78a3, 0x1b6b, 0x330d, 0x1, 0x0);
        gbc.writeMem(0x557, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xce93);
        EXPECT(gbc.pc(), 0x559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0357
        gbc.setState(0x6df2, 0x579, 0x8ab0, 0x546b, 0xec9c, 0x3ab2, 0x0, 0x0);
        gbc.writeMem(0x6df2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x579);
        EXPECT(gbc.pc(), 0x6df4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0358
        gbc.setState(0xcc72, 0x2d08, 0x4dd0, 0x9af5, 0xe79, 0xe291, 0x0, 0x0);
        gbc.writeMem(0xcc72, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x2d08);
        EXPECT(gbc.pc(), 0xcc74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc72), 0xcb);
        EXPECT(gbc.readMem(0xcc73), 0xe8);
        // CB E8 0359
        gbc.setState(0x4210, 0x58cc, 0x5990, 0x834e, 0xd919, 0x2928, 0x0, 0x1);
        gbc.writeMem(0x4210, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x58cc);
        EXPECT(gbc.pc(), 0x4212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 035A
        gbc.setState(0xcab5, 0xcb5e, 0x7200, 0x4e47, 0xeb35, 0x4abd, 0x0, 0x1);
        gbc.writeMem(0xcab5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcb5e);
        EXPECT(gbc.pc(), 0xcab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab5), 0xcb);
        EXPECT(gbc.readMem(0xcab6), 0xe8);
        // CB E8 035B
        gbc.setState(0x2807, 0x6431, 0xe800, 0xd32, 0xc2ab, 0xa947, 0x1, 0x0);
        gbc.writeMem(0x2807, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6431);
        EXPECT(gbc.pc(), 0x2809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 035D
        gbc.setState(0x7c2f, 0x7d5f, 0x4fd0, 0x77f1, 0x4f48, 0x7456, 0x1, 0x0);
        gbc.writeMem(0x7c2f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7d5f);
        EXPECT(gbc.pc(), 0x7c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 035E
        gbc.setState(0xb76f, 0x53d0, 0xdd00, 0xb0a0, 0x7e05, 0x3dd9, 0x0, 0x0);
        gbc.writeMem(0xb76f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x53d0);
        EXPECT(gbc.pc(), 0xb771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb76f), 0xcb);
        EXPECT(gbc.readMem(0xb770), 0xe8);
        // CB E8 035F
        gbc.setState(0xbc02, 0x8fe, 0x92f0, 0x1419, 0x9347, 0xe6e, 0x0, 0x0);
        gbc.writeMem(0xbc02, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8fe);
        EXPECT(gbc.pc(), 0xbc04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc02), 0xcb);
        EXPECT(gbc.readMem(0xbc03), 0xe8);
        // CB E8 0360
        gbc.setState(0xeaa6, 0x7685, 0x2140, 0x71f4, 0xcc7b, 0x5a60, 0x1, 0x1);
        gbc.writeMem(0xeaa6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7685);
        EXPECT(gbc.pc(), 0xeaa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaa6), 0xcb);
        EXPECT(gbc.readMem(0xeaa7), 0xe8);
        // CB E8 0361
        gbc.setState(0x5b42, 0xe420, 0x7860, 0xbecd, 0xfdba, 0x7035, 0x1, 0x1);
        gbc.writeMem(0x5b42, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe420);
        EXPECT(gbc.pc(), 0x5b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0362
        gbc.setState(0x791e, 0x5d4, 0x48d0, 0x35f8, 0x26db, 0x2d7d, 0x1, 0x0);
        gbc.writeMem(0x791e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5d4);
        EXPECT(gbc.pc(), 0x7920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0363
        gbc.setState(0x44a9, 0xc384, 0xc380, 0x719, 0xa0bf, 0x6dc1, 0x0, 0x0);
        gbc.writeMem(0x44a9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc384);
        EXPECT(gbc.pc(), 0x44ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0364
        gbc.setState(0xff5, 0x58ed, 0x77e0, 0xed7, 0x1590, 0x636f, 0x0, 0x0);
        gbc.writeMem(0xff5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x58ed);
        EXPECT(gbc.pc(), 0xff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0365
        gbc.setState(0xa658, 0xa3e9, 0xfbb0, 0x3724, 0x489a, 0x9a0e, 0x1, 0x0);
        gbc.writeMem(0xa658, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa3e9);
        EXPECT(gbc.pc(), 0xa65a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa658), 0xcb);
        EXPECT(gbc.readMem(0xa659), 0xe8);
        // CB E8 0366
        gbc.setState(0x509, 0xe551, 0xcb30, 0x59bd, 0x909, 0xba63, 0x1, 0x0);
        gbc.writeMem(0x509, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe551);
        EXPECT(gbc.pc(), 0x50b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0367
        gbc.setState(0x7a3f, 0xfc96, 0x580, 0x3610, 0xfb1f, 0x37a9, 0x0, 0x0);
        gbc.writeMem(0x7a3f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfc96);
        EXPECT(gbc.pc(), 0x7a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0368
        gbc.setState(0xc61e, 0xa938, 0x8eb0, 0xa0b4, 0x3e05, 0xb35f, 0x1, 0x0);
        gbc.writeMem(0xc61e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa938);
        EXPECT(gbc.pc(), 0xc620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc61e), 0xcb);
        EXPECT(gbc.readMem(0xc61f), 0xe8);
        // CB E8 0369
        gbc.setState(0x833c, 0xa56a, 0xc7d0, 0x42fc, 0x751e, 0xa2df, 0x1, 0x0);
        gbc.writeMem(0x833c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0x833e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x833c), 0xcb);
        EXPECT(gbc.readMem(0x833d), 0xe8);
        // CB E8 036A
        gbc.setState(0xbfcf, 0x9fd0, 0xf8d0, 0xeb45, 0xd3f6, 0x6b7f, 0x1, 0x1);
        gbc.writeMem(0xbfcf, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9fd0);
        EXPECT(gbc.pc(), 0xbfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfcf), 0xcb);
        EXPECT(gbc.readMem(0xbfd0), 0xe8);
        // CB E8 036B
        gbc.setState(0xda22, 0xb1a8, 0xfc30, 0xabd6, 0x5520, 0x598e, 0x1, 0x1);
        gbc.writeMem(0xda22, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb1a8);
        EXPECT(gbc.pc(), 0xda24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda22), 0xcb);
        EXPECT(gbc.readMem(0xda23), 0xe8);
        // CB E8 036C
        gbc.setState(0x98dc, 0x72c2, 0x8680, 0xdcbc, 0x51a2, 0x5bcf, 0x1, 0x0);
        gbc.writeMem(0x98dc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x72c2);
        EXPECT(gbc.pc(), 0x98de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98dc), 0xcb);
        EXPECT(gbc.readMem(0x98dd), 0xe8);
        // CB E8 036E
        gbc.setState(0x2afb, 0xf787, 0xfc50, 0x2aa7, 0xe459, 0x7220, 0x1, 0x1);
        gbc.writeMem(0x2afb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf787);
        EXPECT(gbc.pc(), 0x2afd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 036F
        gbc.setState(0xc11e, 0x22ce, 0x52e0, 0x39e2, 0x38b0, 0xdf81, 0x1, 0x0);
        gbc.writeMem(0xc11e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x22ce);
        EXPECT(gbc.pc(), 0xc120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11e), 0xcb);
        EXPECT(gbc.readMem(0xc11f), 0xe8);
        // CB E8 0370
        gbc.setState(0x166d, 0x339d, 0x6120, 0x5328, 0x11c9, 0xea33, 0x0, 0x1);
        gbc.writeMem(0x166d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x339d);
        EXPECT(gbc.pc(), 0x166f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0371
        gbc.setState(0x6d9e, 0x5277, 0xec60, 0xcbb7, 0x1c4c, 0x1ad2, 0x1, 0x0);
        gbc.writeMem(0x6d9e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5277);
        EXPECT(gbc.pc(), 0x6da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0372
        gbc.setState(0x9da0, 0x200, 0x8330, 0x344e, 0x92b, 0x7ef8, 0x1, 0x1);
        gbc.writeMem(0x9da0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x200);
        EXPECT(gbc.pc(), 0x9da2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9da0), 0xcb);
        EXPECT(gbc.readMem(0x9da1), 0xe8);
        // CB E8 0373
        gbc.setState(0xbdb, 0x47a5, 0x10d0, 0xf43f, 0xb1af, 0xe971, 0x1, 0x0);
        gbc.writeMem(0xbdb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x47a5);
        EXPECT(gbc.pc(), 0xbdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0374
        gbc.setState(0xa7b5, 0x81b6, 0xb7c0, 0xea26, 0xda3e, 0x4c58, 0x0, 0x1);
        gbc.writeMem(0xa7b5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x81b6);
        EXPECT(gbc.pc(), 0xa7b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b5), 0xcb);
        EXPECT(gbc.readMem(0xa7b6), 0xe8);
        // CB E8 0375
        gbc.setState(0x899b, 0x190f, 0x7570, 0x29d6, 0xef17, 0xc9f3, 0x1, 0x0);
        gbc.writeMem(0x899b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x190f);
        EXPECT(gbc.pc(), 0x899d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x899b), 0xcb);
        EXPECT(gbc.readMem(0x899c), 0xe8);
        // CB E8 0376
        gbc.setState(0xbb31, 0x2d2e, 0x32c0, 0xc3e4, 0xdbb4, 0x7982, 0x0, 0x1);
        gbc.writeMem(0xbb31, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2d2e);
        EXPECT(gbc.pc(), 0xbb33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb31), 0xcb);
        EXPECT(gbc.readMem(0xbb32), 0xe8);
        // CB E8 0377
        gbc.setState(0xbc0f, 0xdbda, 0x6780, 0xc463, 0x689f, 0x4fb8, 0x1, 0x1);
        gbc.writeMem(0xbc0f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdbda);
        EXPECT(gbc.pc(), 0xbc11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0f), 0xcb);
        EXPECT(gbc.readMem(0xbc10), 0xe8);
        // CB E8 0378
        gbc.setState(0x1e67, 0x9c44, 0x40e0, 0xf139, 0xe01e, 0xee1, 0x1, 0x1);
        gbc.writeMem(0x1e67, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9c44);
        EXPECT(gbc.pc(), 0x1e69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 037A
        gbc.setState(0x1bd7, 0x52de, 0x35a0, 0x2707, 0x9c98, 0xd202, 0x0, 0x1);
        gbc.writeMem(0x1bd7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x52de);
        EXPECT(gbc.pc(), 0x1bd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 037B
        gbc.setState(0x535b, 0x2c27, 0xda00, 0xc7ac, 0x1f3, 0x8ea, 0x1, 0x0);
        gbc.writeMem(0x535b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2c27);
        EXPECT(gbc.pc(), 0x535d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 037C
        gbc.setState(0x40a7, 0x5286, 0xb90, 0x85e3, 0x962a, 0x1483, 0x1, 0x0);
        gbc.writeMem(0x40a7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5286);
        EXPECT(gbc.pc(), 0x40a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 037D
        gbc.setState(0xa63b, 0x523c, 0x88f0, 0xf600, 0xf338, 0xca43, 0x1, 0x0);
        gbc.writeMem(0xa63b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x523c);
        EXPECT(gbc.pc(), 0xa63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa63b), 0xcb);
        EXPECT(gbc.readMem(0xa63c), 0xe8);
        // CB E8 037E
        gbc.setState(0xa509, 0x6f37, 0x5d80, 0x47cf, 0x6726, 0xfb7c, 0x0, 0x0);
        gbc.writeMem(0xa509, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6f37);
        EXPECT(gbc.pc(), 0xa50b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa509), 0xcb);
        EXPECT(gbc.readMem(0xa50a), 0xe8);
        // CB E8 0380
        gbc.setState(0x15c, 0xb1c3, 0x2ee0, 0x2c70, 0x182d, 0xd547, 0x0, 0x0);
        gbc.writeMem(0x15c, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb1c3);
        EXPECT(gbc.pc(), 0x15e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0381
        gbc.setState(0x1650, 0xd61, 0x3d50, 0x7c66, 0x87ea, 0x5de4, 0x1, 0x0);
        gbc.writeMem(0x1650, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd61);
        EXPECT(gbc.pc(), 0x1652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0382
        gbc.setState(0x89a3, 0x3aef, 0xf9c0, 0x50d6, 0xb682, 0xc892, 0x0, 0x0);
        gbc.writeMem(0x89a3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3aef);
        EXPECT(gbc.pc(), 0x89a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89a3), 0xcb);
        EXPECT(gbc.readMem(0x89a4), 0xe8);
        // CB E8 0383
        gbc.setState(0xc0c4, 0xc0f, 0x2af0, 0x1a8, 0x85b0, 0xf83b, 0x1, 0x1);
        gbc.writeMem(0xc0c4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc0f);
        EXPECT(gbc.pc(), 0xc0c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0c4), 0xcb);
        EXPECT(gbc.readMem(0xc0c5), 0xe8);
        // CB E8 0385
        gbc.setState(0x9432, 0xcb35, 0xe4b0, 0xfeac, 0xbbc4, 0x13df, 0x1, 0x1);
        gbc.writeMem(0x9432, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcb35);
        EXPECT(gbc.pc(), 0x9434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9432), 0xcb);
        EXPECT(gbc.readMem(0x9433), 0xe8);
        // CB E8 0386
        gbc.setState(0xad3d, 0xaa7c, 0x1000, 0x709c, 0x5470, 0xed5, 0x0, 0x1);
        gbc.writeMem(0xad3d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xaa7c);
        EXPECT(gbc.pc(), 0xad3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3d), 0xcb);
        EXPECT(gbc.readMem(0xad3e), 0xe8);
        // CB E8 0387
        gbc.setState(0x9ec4, 0x16f9, 0xe420, 0x23d8, 0xdd75, 0xd4f1, 0x1, 0x1);
        gbc.writeMem(0x9ec4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x16f9);
        EXPECT(gbc.pc(), 0x9ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ec4), 0xcb);
        EXPECT(gbc.readMem(0x9ec5), 0xe8);
        // CB E8 0389
        gbc.setState(0xe9ea, 0x353c, 0x7ef0, 0x1777, 0xd0b, 0xcda6, 0x0, 0x1);
        gbc.writeMem(0xe9ea, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x353c);
        EXPECT(gbc.pc(), 0xe9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ea), 0xcb);
        EXPECT(gbc.readMem(0xe9eb), 0xe8);
        // CB E8 038A
        gbc.setState(0x4fc4, 0xae7d, 0xc6c0, 0x108c, 0xddc0, 0x6c1b, 0x1, 0x0);
        gbc.writeMem(0x4fc4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xae7d);
        EXPECT(gbc.pc(), 0x4fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 038B
        gbc.setState(0xe5f, 0x273e, 0x1ce0, 0xcaa8, 0x9425, 0x24c1, 0x0, 0x0);
        gbc.writeMem(0xe5f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x273e);
        EXPECT(gbc.pc(), 0xe61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 038C
        gbc.setState(0xc9a3, 0x88d4, 0x39e0, 0x1c67, 0xac50, 0xc4, 0x1, 0x0);
        gbc.writeMem(0xc9a3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x88d4);
        EXPECT(gbc.pc(), 0xc9a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a3), 0xcb);
        EXPECT(gbc.readMem(0xc9a4), 0xe8);
        // CB E8 038D
        gbc.setState(0x188d, 0xd9bd, 0xe510, 0x9adc, 0x916, 0xf372, 0x1, 0x0);
        gbc.writeMem(0x188d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd9bd);
        EXPECT(gbc.pc(), 0x188f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 038E
        gbc.setState(0x53b9, 0x29b, 0x5800, 0x1019, 0x93c5, 0x8c4d, 0x0, 0x0);
        gbc.writeMem(0x53b9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x29b);
        EXPECT(gbc.pc(), 0x53bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 038F
        gbc.setState(0x1fa4, 0xd7b7, 0x67d0, 0xe8e4, 0x70b4, 0xd7d4, 0x0, 0x1);
        gbc.writeMem(0x1fa4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd7b7);
        EXPECT(gbc.pc(), 0x1fa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0390
        gbc.setState(0x840a, 0x35ba, 0x210, 0x8ba3, 0x41d4, 0x1623, 0x1, 0x0);
        gbc.writeMem(0x840a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x35ba);
        EXPECT(gbc.pc(), 0x840c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x840a), 0xcb);
        EXPECT(gbc.readMem(0x840b), 0xe8);
        // CB E8 0391
        gbc.setState(0x9c96, 0xdae6, 0x3800, 0xd37, 0xc16f, 0x1d78, 0x0, 0x0);
        gbc.writeMem(0x9c96, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xdae6);
        EXPECT(gbc.pc(), 0x9c98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c96), 0xcb);
        EXPECT(gbc.readMem(0x9c97), 0xe8);
        // CB E8 0392
        gbc.setState(0x1165, 0x9a3d, 0xf0c0, 0x4c1d, 0x5269, 0xd5e7, 0x1, 0x0);
        gbc.writeMem(0x1165, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9a3d);
        EXPECT(gbc.pc(), 0x1167);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0393
        gbc.setState(0x5b70, 0x1dfc, 0x51e0, 0x95ac, 0xf986, 0xce96, 0x0, 0x0);
        gbc.writeMem(0x5b70, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1dfc);
        EXPECT(gbc.pc(), 0x5b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0394
        gbc.setState(0x4b25, 0x5559, 0x28b0, 0x2f5, 0x4dbf, 0xd9ee, 0x0, 0x0);
        gbc.writeMem(0x4b25, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5559);
        EXPECT(gbc.pc(), 0x4b27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0395
        gbc.setState(0x74fa, 0x73fd, 0x95c0, 0xf6e5, 0x4320, 0x22e, 0x1, 0x1);
        gbc.writeMem(0x74fa, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x73fd);
        EXPECT(gbc.pc(), 0x74fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0396
        gbc.setState(0xd2db, 0x68b0, 0xf390, 0x9547, 0xac87, 0xef20, 0x1, 0x0);
        gbc.writeMem(0xd2db, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x68b0);
        EXPECT(gbc.pc(), 0xd2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2db), 0xcb);
        EXPECT(gbc.readMem(0xd2dc), 0xe8);
        // CB E8 0397
        gbc.setState(0x74a5, 0x9168, 0x8880, 0x3475, 0x661a, 0xb2c, 0x1, 0x0);
        gbc.writeMem(0x74a5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9168);
        EXPECT(gbc.pc(), 0x74a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 0398
        gbc.setState(0x5388, 0xbcdf, 0x7b50, 0x6c24, 0xcbad, 0x678c, 0x0, 0x0);
        gbc.writeMem(0x5388, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xbcdf);
        EXPECT(gbc.pc(), 0x538a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 0399
        gbc.setState(0xe5b, 0xf039, 0x6150, 0xf279, 0x48c8, 0x3d27, 0x1, 0x0);
        gbc.writeMem(0xe5b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf039);
        EXPECT(gbc.pc(), 0xe5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 039A
        gbc.setState(0x6e06, 0x8442, 0xa600, 0xeb31, 0x92ad, 0x71b5, 0x1, 0x1);
        gbc.writeMem(0x6e06, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8442);
        EXPECT(gbc.pc(), 0x6e08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 039B
        gbc.setState(0x22f2, 0x78f1, 0x8ce0, 0xb435, 0x658e, 0x7235, 0x0, 0x0);
        gbc.writeMem(0x22f2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x78f1);
        EXPECT(gbc.pc(), 0x22f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 039C
        gbc.setState(0x782b, 0x46e5, 0x2780, 0x3c99, 0x62ad, 0x6dd, 0x0, 0x1);
        gbc.writeMem(0x782b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x46e5);
        EXPECT(gbc.pc(), 0x782d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 039D
        gbc.setState(0x44e5, 0xfa1f, 0x9200, 0xae76, 0x531a, 0xc83b, 0x1, 0x1);
        gbc.writeMem(0x44e5, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfa1f);
        EXPECT(gbc.pc(), 0x44e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 039E
        gbc.setState(0x2814, 0x7621, 0x5700, 0x4d72, 0x8483, 0x46a0, 0x1, 0x1);
        gbc.writeMem(0x2814, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7621);
        EXPECT(gbc.pc(), 0x2816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 039F
        gbc.setState(0x6525, 0x7a04, 0x9d00, 0x8354, 0x5132, 0x5a08, 0x1, 0x0);
        gbc.writeMem(0x6525, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7a04);
        EXPECT(gbc.pc(), 0x6527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03A0
        gbc.setState(0x56cb, 0x1fbc, 0xa230, 0xf8a1, 0xc12b, 0xe567, 0x0, 0x1);
        gbc.writeMem(0x56cb, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1fbc);
        EXPECT(gbc.pc(), 0x56cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03A1
        gbc.setState(0x37d3, 0x9bd8, 0x1940, 0x7efc, 0x10b5, 0x52ef, 0x0, 0x0);
        gbc.writeMem(0x37d3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9bd8);
        EXPECT(gbc.pc(), 0x37d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03A2
        gbc.setState(0x7334, 0x66a6, 0x4f10, 0x1533, 0xb8e8, 0x1f28, 0x0, 0x0);
        gbc.writeMem(0x7334, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x66a6);
        EXPECT(gbc.pc(), 0x7336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03A3
        gbc.setState(0xde22, 0x5f04, 0xd20, 0x3277, 0x161a, 0x4d6c, 0x1, 0x0);
        gbc.writeMem(0xde22, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5f04);
        EXPECT(gbc.pc(), 0xde24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde22), 0xcb);
        EXPECT(gbc.readMem(0xde23), 0xe8);
        // CB E8 03A4
        gbc.setState(0x4630, 0xa726, 0xa7c0, 0xdf39, 0x7e08, 0xb555, 0x1, 0x0);
        gbc.writeMem(0x4630, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa726);
        EXPECT(gbc.pc(), 0x4632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03A5
        gbc.setState(0x3a68, 0xb317, 0xac60, 0x3477, 0xb1a3, 0xe4ee, 0x0, 0x1);
        gbc.writeMem(0x3a68, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb317);
        EXPECT(gbc.pc(), 0x3a6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03A6
        gbc.setState(0x80c9, 0x7a46, 0xf910, 0x3283, 0x5924, 0x7e, 0x0, 0x1);
        gbc.writeMem(0x80c9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7a46);
        EXPECT(gbc.pc(), 0x80cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c9), 0xcb);
        EXPECT(gbc.readMem(0x80ca), 0xe8);
        // CB E8 03A7
        gbc.setState(0x8085, 0xabae, 0x2220, 0x975c, 0xfb12, 0x959b, 0x0, 0x1);
        gbc.writeMem(0x8085, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xabae);
        EXPECT(gbc.pc(), 0x8087);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8085), 0xcb);
        EXPECT(gbc.readMem(0x8086), 0xe8);
        // CB E8 03A8
        gbc.setState(0x3615, 0xb3e5, 0x98b0, 0x46b7, 0xf89b, 0x2ff1, 0x1, 0x1);
        gbc.writeMem(0x3615, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb3e5);
        EXPECT(gbc.pc(), 0x3617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03A9
        gbc.setState(0x9ed2, 0x8faa, 0xb2c0, 0x2a6, 0x6060, 0x6739, 0x0, 0x1);
        gbc.writeMem(0x9ed2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8faa);
        EXPECT(gbc.pc(), 0x9ed4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed2), 0xcb);
        EXPECT(gbc.readMem(0x9ed3), 0xe8);
        // CB E8 03AA
        gbc.setState(0x26f7, 0xdd2e, 0x4e80, 0xec77, 0x8e6f, 0xc3f1, 0x0, 0x0);
        gbc.writeMem(0x26f7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdd2e);
        EXPECT(gbc.pc(), 0x26f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03AB
        gbc.setState(0x4550, 0x80e6, 0xb460, 0x64cf, 0x2692, 0xfa2a, 0x0, 0x1);
        gbc.writeMem(0x4550, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x80e6);
        EXPECT(gbc.pc(), 0x4552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03AC
        gbc.setState(0x6789, 0xcb49, 0xdf90, 0xbc9c, 0x35bf, 0x63f2, 0x1, 0x1);
        gbc.writeMem(0x6789, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcb49);
        EXPECT(gbc.pc(), 0x678b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03AE
        gbc.setState(0x93d0, 0xded0, 0x9a80, 0x32ab, 0xa2ec, 0x3258, 0x0, 0x1);
        gbc.writeMem(0x93d0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xded0);
        EXPECT(gbc.pc(), 0x93d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d0), 0xcb);
        EXPECT(gbc.readMem(0x93d1), 0xe8);
        // CB E8 03AF
        gbc.setState(0x50fc, 0xfe3b, 0xbf50, 0x2761, 0x5805, 0x50e7, 0x0, 0x0);
        gbc.writeMem(0x50fc, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfe3b);
        EXPECT(gbc.pc(), 0x50fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03B0
        gbc.setState(0x17af, 0x9c1b, 0x8bf0, 0xfa52, 0x373b, 0x46a4, 0x0, 0x0);
        gbc.writeMem(0x17af, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9c1b);
        EXPECT(gbc.pc(), 0x17b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03B2
        gbc.setState(0x2161, 0xcb90, 0xbad0, 0x2013, 0x1071, 0xb4b, 0x1, 0x0);
        gbc.writeMem(0x2161, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xcb90);
        EXPECT(gbc.pc(), 0x2163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03B3
        gbc.setState(0xcd18, 0xce34, 0xcb80, 0x174, 0xc520, 0xa740, 0x0, 0x1);
        gbc.writeMem(0xcd18, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xce34);
        EXPECT(gbc.pc(), 0xcd1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd18), 0xcb);
        EXPECT(gbc.readMem(0xcd19), 0xe8);
        // CB E8 03B4
        gbc.setState(0x9f8f, 0xd0e5, 0x2070, 0x67ee, 0x92a7, 0xb77a, 0x0, 0x1);
        gbc.writeMem(0x9f8f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd0e5);
        EXPECT(gbc.pc(), 0x9f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f8f), 0xcb);
        EXPECT(gbc.readMem(0x9f90), 0xe8);
        // CB E8 03B5
        gbc.setState(0xd126, 0xf408, 0x1700, 0x6ebf, 0x40ff, 0x31e4, 0x1, 0x1);
        gbc.writeMem(0xd126, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf408);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd126), 0xcb);
        EXPECT(gbc.readMem(0xd127), 0xe8);
        // CB E8 03B6
        gbc.setState(0xc7b0, 0x480e, 0x9ff0, 0xb084, 0x7365, 0x2025, 0x0, 0x0);
        gbc.writeMem(0xc7b0, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x480e);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b0), 0xcb);
        EXPECT(gbc.readMem(0xc7b1), 0xe8);
        // CB E8 03B7
        gbc.setState(0x2c7f, 0xac53, 0x7660, 0x6ffc, 0x817a, 0xd56d, 0x1, 0x0);
        gbc.writeMem(0x2c7f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xac53);
        EXPECT(gbc.pc(), 0x2c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03B8
        gbc.setState(0x57af, 0x8e6, 0xba00, 0xaed2, 0xf9a3, 0xe228, 0x0, 0x1);
        gbc.writeMem(0x57af, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8e6);
        EXPECT(gbc.pc(), 0x57b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03B9
        gbc.setState(0x9b12, 0xca1, 0x48d0, 0x180f, 0xb72d, 0x2918, 0x0, 0x0);
        gbc.writeMem(0x9b12, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xca1);
        EXPECT(gbc.pc(), 0x9b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b12), 0xcb);
        EXPECT(gbc.readMem(0x9b13), 0xe8);
        // CB E8 03BA
        gbc.setState(0xa6, 0x2318, 0x8dd0, 0xdf49, 0xb2cf, 0x5be, 0x0, 0x0);
        gbc.writeMem(0xa6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2318);
        EXPECT(gbc.pc(), 0xa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03BB
        gbc.setState(0xa5c8, 0xd128, 0x5040, 0xe3e1, 0x285c, 0x1612, 0x1, 0x0);
        gbc.writeMem(0xa5c8, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd128);
        EXPECT(gbc.pc(), 0xa5ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5c8), 0xcb);
        EXPECT(gbc.readMem(0xa5c9), 0xe8);
        // CB E8 03BD
        gbc.setState(0x690f, 0xd0cf, 0x8150, 0xf265, 0x5d42, 0xde24, 0x0, 0x1);
        gbc.writeMem(0x690f, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd0cf);
        EXPECT(gbc.pc(), 0x6911);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03BE
        gbc.setState(0xb4ac, 0xc741, 0x6200, 0x4178, 0xc533, 0x851c, 0x1, 0x0);
        gbc.writeMem(0xb4ac, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc741);
        EXPECT(gbc.pc(), 0xb4ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ac), 0xcb);
        EXPECT(gbc.readMem(0xb4ad), 0xe8);
        // CB E8 03BF
        gbc.setState(0x7713, 0x5ae6, 0xec80, 0x13f1, 0xdbaa, 0x93, 0x0, 0x1);
        gbc.writeMem(0x7713, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5ae6);
        EXPECT(gbc.pc(), 0x7715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03C0
        gbc.setState(0xd89b, 0xb1ca, 0x9410, 0x53e0, 0xf133, 0x3e01, 0x0, 0x1);
        gbc.writeMem(0xd89b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb1ca);
        EXPECT(gbc.pc(), 0xd89d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89b), 0xcb);
        EXPECT(gbc.readMem(0xd89c), 0xe8);
        // CB E8 03C1
        gbc.setState(0xc366, 0x73df, 0x7fa0, 0x2217, 0x4a50, 0xce30, 0x1, 0x1);
        gbc.writeMem(0xc366, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x73df);
        EXPECT(gbc.pc(), 0xc368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc366), 0xcb);
        EXPECT(gbc.readMem(0xc367), 0xe8);
        // CB E8 03C2
        gbc.setState(0x5a00, 0xe088, 0xd20, 0xc399, 0x31d, 0x7dc5, 0x1, 0x0);
        gbc.writeMem(0x5a00, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe088);
        EXPECT(gbc.pc(), 0x5a02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03C3
        gbc.setState(0x9dc6, 0xa634, 0x4b60, 0xc29e, 0x4e75, 0x3d30, 0x0, 0x1);
        gbc.writeMem(0x9dc6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa634);
        EXPECT(gbc.pc(), 0x9dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc6), 0xcb);
        EXPECT(gbc.readMem(0x9dc7), 0xe8);
        // CB E8 03C4
        gbc.setState(0xc94e, 0x88f0, 0xe630, 0x72f7, 0xefee, 0x87b7, 0x0, 0x0);
        gbc.writeMem(0xc94e, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x88f0);
        EXPECT(gbc.pc(), 0xc950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc94e), 0xcb);
        EXPECT(gbc.readMem(0xc94f), 0xe8);
        // CB E8 03C5
        gbc.setState(0xd69, 0xaa13, 0x78d0, 0x1c5, 0x10a2, 0x481f, 0x1, 0x1);
        gbc.writeMem(0xd69, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xaa13);
        EXPECT(gbc.pc(), 0xd6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03C6
        gbc.setState(0xa228, 0x64ab, 0xd8b0, 0xe1fc, 0x7124, 0xd4be, 0x1, 0x1);
        gbc.writeMem(0xa228, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x64ab);
        EXPECT(gbc.pc(), 0xa22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa228), 0xcb);
        EXPECT(gbc.readMem(0xa229), 0xe8);
        // CB E8 03C8
        gbc.setState(0xa9d, 0xa0da, 0x5320, 0x9cfa, 0x5bcd, 0xc95d, 0x0, 0x1);
        gbc.writeMem(0xa9d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa0da);
        EXPECT(gbc.pc(), 0xa9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03C9
        gbc.setState(0xd105, 0xcdc, 0x8f30, 0x13ac, 0xa4a3, 0x5a7, 0x1, 0x1);
        gbc.writeMem(0xd105, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcdc);
        EXPECT(gbc.pc(), 0xd107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd105), 0xcb);
        EXPECT(gbc.readMem(0xd106), 0xe8);
        // CB E8 03CA
        gbc.setState(0x14ac, 0x3be, 0xd010, 0x35c2, 0x1eaf, 0xa848, 0x0, 0x1);
        gbc.writeMem(0x14ac, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3be);
        EXPECT(gbc.pc(), 0x14ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03CB
        gbc.setState(0x7be3, 0x7d9d, 0x22c0, 0x4327, 0xabe4, 0x165c, 0x0, 0x0);
        gbc.writeMem(0x7be3, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7d9d);
        EXPECT(gbc.pc(), 0x7be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03CC
        gbc.setState(0x5cd9, 0x714c, 0x6910, 0xe813, 0xb5d9, 0xb00c, 0x0, 0x1);
        gbc.writeMem(0x5cd9, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x714c);
        EXPECT(gbc.pc(), 0x5cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03CD
        gbc.setState(0x65f6, 0x21c9, 0x5fa0, 0xed7c, 0xc662, 0x4a7a, 0x1, 0x1);
        gbc.writeMem(0x65f6, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x21c9);
        EXPECT(gbc.pc(), 0x65f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03CE
        gbc.setState(0xd9ca, 0x618d, 0xdd80, 0x873b, 0x37c1, 0x39, 0x1, 0x1);
        gbc.writeMem(0xd9ca, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x618d);
        EXPECT(gbc.pc(), 0xd9cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ca), 0xcb);
        EXPECT(gbc.readMem(0xd9cb), 0xe8);
        // CB E8 03CF
        gbc.setState(0x9e03, 0x1b9e, 0xc3b0, 0x861, 0x2d6c, 0xd381, 0x0, 0x0);
        gbc.writeMem(0x9e03, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1b9e);
        EXPECT(gbc.pc(), 0x9e05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e03), 0xcb);
        EXPECT(gbc.readMem(0x9e04), 0xe8);
        // CB E8 03D0
        gbc.setState(0x623a, 0x6bd9, 0xd160, 0x250c, 0x243, 0x444b, 0x0, 0x0);
        gbc.writeMem(0x623a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6bd9);
        EXPECT(gbc.pc(), 0x623c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03D1
        gbc.setState(0xe75d, 0xed23, 0xf5c0, 0x8ac3, 0x8bcf, 0x3f23, 0x1, 0x1);
        gbc.writeMem(0xe75d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xed23);
        EXPECT(gbc.pc(), 0xe75f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe75d), 0xcb);
        EXPECT(gbc.readMem(0xe75e), 0xe8);
        // CB E8 03D2
        gbc.setState(0x3d05, 0xbad8, 0x5160, 0xf7a9, 0xcedf, 0x951b, 0x1, 0x0);
        gbc.writeMem(0x3d05, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbad8);
        EXPECT(gbc.pc(), 0x3d07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03D3
        gbc.setState(0x4fe2, 0x775a, 0x99d0, 0xbf61, 0x34ca, 0x69c9, 0x1, 0x0);
        gbc.writeMem(0x4fe2, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x775a);
        EXPECT(gbc.pc(), 0x4fe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03D4
        gbc.setState(0x6852, 0x7032, 0xfe0, 0xebea, 0x7702, 0x591a, 0x0, 0x0);
        gbc.writeMem(0x6852, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7032);
        EXPECT(gbc.pc(), 0x6854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03D5
        gbc.setState(0xcade, 0x55ea, 0xe70, 0x68ae, 0xb961, 0x4695, 0x0, 0x0);
        gbc.writeMem(0xcade, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x55ea);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcade), 0xcb);
        EXPECT(gbc.readMem(0xcadf), 0xe8);
        // CB E8 03D6
        gbc.setState(0x5552, 0x4f88, 0x35e0, 0x538, 0xc8b3, 0x192, 0x1, 0x0);
        gbc.writeMem(0x5552, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4f88);
        EXPECT(gbc.pc(), 0x5554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E8 03D7
        gbc.setState(0x501, 0x9ee7, 0x31b0, 0xa418, 0x53a2, 0xfa1, 0x0, 0x0);
        gbc.writeMem(0x501, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9ee7);
        EXPECT(gbc.pc(), 0x503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03D8
        gbc.setState(0xbfb7, 0x98fc, 0x190, 0x8d7e, 0x29eb, 0x2ece, 0x1, 0x0);
        gbc.writeMem(0xbfb7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x98fc);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb7), 0xcb);
        EXPECT(gbc.readMem(0xbfb8), 0xe8);
        // CB E8 03D9
        gbc.setState(0xe657, 0x6dfd, 0x8540, 0xcff1, 0xa7d6, 0x30a2, 0x0, 0x1);
        gbc.writeMem(0xe657, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6dfd);
        EXPECT(gbc.pc(), 0xe659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe657), 0xcb);
        EXPECT(gbc.readMem(0xe658), 0xe8);
        // CB E8 03DA
        gbc.setState(0x3827, 0x5d46, 0xe8d0, 0x9452, 0x447d, 0xf58c, 0x0, 0x1);
        gbc.writeMem(0x3827, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5d46);
        EXPECT(gbc.pc(), 0x3829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03DB
        gbc.setState(0xdb5b, 0xcd2d, 0xe3b0, 0x4b97, 0xe3b9, 0xb758, 0x1, 0x1);
        gbc.writeMem(0xdb5b, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xcd2d);
        EXPECT(gbc.pc(), 0xdb5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5b), 0xcb);
        EXPECT(gbc.readMem(0xdb5c), 0xe8);
        // CB E8 03DC
        gbc.setState(0xd380, 0xee78, 0x9830, 0x301c, 0x3cf0, 0xfd6d, 0x0, 0x0);
        gbc.writeMem(0xd380, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xee78);
        EXPECT(gbc.pc(), 0xd382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd380), 0xcb);
        EXPECT(gbc.readMem(0xd381), 0xe8);
        // CB E8 03DD
        gbc.setState(0x6821, 0xd0c, 0x23d0, 0x4ea8, 0x9c6, 0xd520, 0x1, 0x1);
        gbc.writeMem(0x6821, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd0c);
        EXPECT(gbc.pc(), 0x6823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03DE
        gbc.setState(0x1bf7, 0xde62, 0x17b0, 0x7b83, 0x7046, 0x7f31, 0x1, 0x1);
        gbc.writeMem(0x1bf7, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xde62);
        EXPECT(gbc.pc(), 0x1bf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03DF
        gbc.setState(0x4e1a, 0xb149, 0x55d0, 0x518a, 0xd0fb, 0xf4e5, 0x1, 0x1);
        gbc.writeMem(0x4e1a, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb149);
        EXPECT(gbc.pc(), 0x4e1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03E0
        gbc.setState(0x84ae, 0x7684, 0x31d0, 0xfeeb, 0xa5f7, 0x2abf, 0x0, 0x0);
        gbc.writeMem(0x84ae, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7684);
        EXPECT(gbc.pc(), 0x84b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ae), 0xcb);
        EXPECT(gbc.readMem(0x84af), 0xe8);
        // CB E8 03E2
        gbc.setState(0xc384, 0x8f30, 0xe460, 0xe2e0, 0xa16, 0x47c0, 0x1, 0x0);
        gbc.writeMem(0xc384, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8f30);
        EXPECT(gbc.pc(), 0xc386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc384), 0xcb);
        EXPECT(gbc.readMem(0xc385), 0xe8);
        // CB E8 03E4
        gbc.setState(0x6142, 0x36ee, 0xe370, 0x8da6, 0xf5ff, 0xcd13, 0x0, 0x1);
        gbc.writeMem(0x6142, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x36ee);
        EXPECT(gbc.pc(), 0x6144);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03E5
        gbc.setState(0x4174, 0x37f3, 0x43d0, 0xd052, 0x2366, 0x31bb, 0x1, 0x1);
        gbc.writeMem(0x4174, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x37f3);
        EXPECT(gbc.pc(), 0x4176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E8 03E6
        gbc.setState(0xcfa4, 0x920f, 0xcac0, 0xd232, 0x5b3f, 0x471, 0x0, 0x0);
        gbc.writeMem(0xcfa4, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x920f);
        EXPECT(gbc.pc(), 0xcfa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa4), 0xcb);
        EXPECT(gbc.readMem(0xcfa5), 0xe8);
        // CB E8 03E7
        gbc.setState(0x4a9d, 0x86fc, 0x2190, 0x1bed, 0xe3c6, 0x823e, 0x1, 0x0);
        gbc.writeMem(0x4a9d, { 0xcb, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x86fc);
        EXPECT(gbc.pc(), 0x4a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
