    TEST(gbcemu, opcode_cb_37) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 37 0000
        gbc.setState(0x4796, 0xf9c9, 0x4e60, 0x3853, 0x24f7, 0x469f, 0x1, 0x0);
        gbc.writeMem(0x4796, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf9c9);
        EXPECT(gbc.pc(), 0x4798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0001
        gbc.setState(0x90dd, 0x127f, 0x7750, 0xa330, 0x888c, 0x512c, 0x0, 0x0);
        gbc.writeMem(0x90dd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x127f);
        EXPECT(gbc.pc(), 0x90df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90dd), 0xcb);
        EXPECT(gbc.readMem(0x90de), 0x37);
        // CB 37 0002
        gbc.setState(0xe72a, 0xb3bd, 0x2ff0, 0x3182, 0xcb8, 0xa83f, 0x0, 0x0);
        gbc.writeMem(0xe72a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb3bd);
        EXPECT(gbc.pc(), 0xe72c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe72a), 0xcb);
        EXPECT(gbc.readMem(0xe72b), 0x37);
        // CB 37 0003
        gbc.setState(0xe800, 0x261d, 0x2b0, 0x192e, 0x876e, 0xac4c, 0x1, 0x1);
        gbc.writeMem(0xe800, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x261d);
        EXPECT(gbc.pc(), 0xe802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe800), 0xcb);
        EXPECT(gbc.readMem(0xe801), 0x37);
        // CB 37 0004
        gbc.setState(0x67a2, 0x6331, 0xf710, 0xa914, 0xb9de, 0xbb4, 0x1, 0x1);
        gbc.writeMem(0x67a2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6331);
        EXPECT(gbc.pc(), 0x67a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0005
        gbc.setState(0xa25e, 0x8b88, 0x9020, 0x2418, 0x3806, 0xd39a, 0x0, 0x0);
        gbc.writeMem(0xa25e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8b88);
        EXPECT(gbc.pc(), 0xa260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa25e), 0xcb);
        EXPECT(gbc.readMem(0xa25f), 0x37);
        // CB 37 0006
        gbc.setState(0x84d8, 0x1b9d, 0xfc00, 0xd3d5, 0x89af, 0x51ef, 0x1, 0x0);
        gbc.writeMem(0x84d8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1b9d);
        EXPECT(gbc.pc(), 0x84da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d8), 0xcb);
        EXPECT(gbc.readMem(0x84d9), 0x37);
        // CB 37 0007
        gbc.setState(0x8ac2, 0x4269, 0xc470, 0xc939, 0x2e0f, 0xa2a4, 0x1, 0x1);
        gbc.writeMem(0x8ac2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4269);
        EXPECT(gbc.pc(), 0x8ac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac2), 0xcb);
        EXPECT(gbc.readMem(0x8ac3), 0x37);
        // CB 37 0008
        gbc.setState(0x7a2c, 0xb9e2, 0xe740, 0xb159, 0xb25d, 0xa43f, 0x1, 0x0);
        gbc.writeMem(0x7a2c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb9e2);
        EXPECT(gbc.pc(), 0x7a2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0009
        gbc.setState(0x1aff, 0x44bd, 0x80e0, 0xbc59, 0xa787, 0xae57, 0x1, 0x0);
        gbc.writeMem(0x1aff, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x44bd);
        EXPECT(gbc.pc(), 0x1b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 000A
        gbc.setState(0xe5bb, 0xfc37, 0xe350, 0x15cf, 0x4d67, 0x4b62, 0x0, 0x0);
        gbc.writeMem(0xe5bb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfc37);
        EXPECT(gbc.pc(), 0xe5bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5bb), 0xcb);
        EXPECT(gbc.readMem(0xe5bc), 0x37);
        // CB 37 000B
        gbc.setState(0x78a3, 0x4680, 0x9020, 0x91d1, 0x3a20, 0xb6ba, 0x0, 0x1);
        gbc.writeMem(0x78a3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4680);
        EXPECT(gbc.pc(), 0x78a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 000C
        gbc.setState(0x5c3b, 0x9a8a, 0xd80, 0x7c7e, 0xf4e4, 0xbba, 0x0, 0x1);
        gbc.writeMem(0x5c3b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9a8a);
        EXPECT(gbc.pc(), 0x5c3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 000D
        gbc.setState(0x1dab, 0x783a, 0x8bb0, 0x126f, 0xc0bd, 0x526c, 0x0, 0x1);
        gbc.writeMem(0x1dab, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x783a);
        EXPECT(gbc.pc(), 0x1dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 000E
        gbc.setState(0x4388, 0xe288, 0x3510, 0xc466, 0xec39, 0xd6aa, 0x0, 0x1);
        gbc.writeMem(0x4388, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe288);
        EXPECT(gbc.pc(), 0x438a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 000F
        gbc.setState(0xd4ee, 0x57c3, 0xfd00, 0x90ac, 0x99c, 0xb06c, 0x0, 0x0);
        gbc.writeMem(0xd4ee, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x57c3);
        EXPECT(gbc.pc(), 0xd4f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ee), 0xcb);
        EXPECT(gbc.readMem(0xd4ef), 0x37);
        // CB 37 0010
        gbc.setState(0x6741, 0x5dcb, 0xe20, 0x924f, 0x687a, 0x4b83, 0x1, 0x0);
        gbc.writeMem(0x6741, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5dcb);
        EXPECT(gbc.pc(), 0x6743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0011
        gbc.setState(0x9e99, 0xcb8c, 0x1cc0, 0x59e4, 0xa048, 0xeab5, 0x1, 0x1);
        gbc.writeMem(0x9e99, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xcb8c);
        EXPECT(gbc.pc(), 0x9e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e99), 0xcb);
        EXPECT(gbc.readMem(0x9e9a), 0x37);
        // CB 37 0012
        gbc.setState(0xdc5c, 0x6d6e, 0xc800, 0xd90c, 0xf9b1, 0x329, 0x1, 0x1);
        gbc.writeMem(0xdc5c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6d6e);
        EXPECT(gbc.pc(), 0xdc5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5c), 0xcb);
        EXPECT(gbc.readMem(0xdc5d), 0x37);
        // CB 37 0013
        gbc.setState(0xe30, 0xbcb, 0xb0d0, 0xd441, 0xb740, 0x8089, 0x0, 0x1);
        gbc.writeMem(0xe30, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbcb);
        EXPECT(gbc.pc(), 0xe32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0014
        gbc.setState(0xe785, 0x9fa9, 0x63b0, 0xeb6a, 0xf348, 0xaf11, 0x0, 0x0);
        gbc.writeMem(0xe785, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9fa9);
        EXPECT(gbc.pc(), 0xe787);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe785), 0xcb);
        EXPECT(gbc.readMem(0xe786), 0x37);
        // CB 37 0015
        gbc.setState(0xb5a5, 0x3ae3, 0xe1a0, 0x6ad2, 0xed99, 0xb0d, 0x1, 0x1);
        gbc.writeMem(0xb5a5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3ae3);
        EXPECT(gbc.pc(), 0xb5a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a5), 0xcb);
        EXPECT(gbc.readMem(0xb5a6), 0x37);
        // CB 37 0016
        gbc.setState(0xc5c4, 0x99c0, 0xe370, 0x737, 0x1ee5, 0x8bdd, 0x1, 0x0);
        gbc.writeMem(0xc5c4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x99c0);
        EXPECT(gbc.pc(), 0xc5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c4), 0xcb);
        EXPECT(gbc.readMem(0xc5c5), 0x37);
        // CB 37 0017
        gbc.setState(0x2b97, 0xe492, 0xaed0, 0xd75e, 0xeffa, 0x587b, 0x1, 0x1);
        gbc.writeMem(0x2b97, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe492);
        EXPECT(gbc.pc(), 0x2b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0018
        gbc.setState(0x365b, 0x44f4, 0xd940, 0xed64, 0x9e07, 0x5d8d, 0x1, 0x1);
        gbc.writeMem(0x365b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x44f4);
        EXPECT(gbc.pc(), 0x365d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0019
        gbc.setState(0x2281, 0xfd23, 0x44c0, 0xd863, 0x2d9d, 0xdf71, 0x1, 0x0);
        gbc.writeMem(0x2281, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfd23);
        EXPECT(gbc.pc(), 0x2283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 001A
        gbc.setState(0xe701, 0x6573, 0xc2c0, 0xdf84, 0x5b7c, 0xc3af, 0x0, 0x0);
        gbc.writeMem(0xe701, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6573);
        EXPECT(gbc.pc(), 0xe703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe701), 0xcb);
        EXPECT(gbc.readMem(0xe702), 0x37);
        // CB 37 001B
        gbc.setState(0xc7df, 0xc284, 0x3e40, 0x85ee, 0x24e2, 0x9be5, 0x1, 0x1);
        gbc.writeMem(0xc7df, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc284);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7df), 0xcb);
        EXPECT(gbc.readMem(0xc7e0), 0x37);
        // CB 37 001C
        gbc.setState(0x21d4, 0xe584, 0xac60, 0x359d, 0xf71b, 0x1661, 0x1, 0x0);
        gbc.writeMem(0x21d4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe584);
        EXPECT(gbc.pc(), 0x21d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 001D
        gbc.setState(0xd2f2, 0xca40, 0xdcf0, 0x27a6, 0xb477, 0xc462, 0x0, 0x0);
        gbc.writeMem(0xd2f2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xca40);
        EXPECT(gbc.pc(), 0xd2f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2f2), 0xcb);
        EXPECT(gbc.readMem(0xd2f3), 0x37);
        // CB 37 001E
        gbc.setState(0x6aaf, 0x5052, 0x550, 0xd7d, 0x449d, 0x2d02, 0x1, 0x1);
        gbc.writeMem(0x6aaf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5052);
        EXPECT(gbc.pc(), 0x6ab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 001F
        gbc.setState(0x1f, 0x7644, 0x5da0, 0x8a8b, 0xaf21, 0x8254, 0x1, 0x0);
        gbc.writeMem(0x1f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7644);
        EXPECT(gbc.pc(), 0x21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0020
        gbc.setState(0xa02e, 0xbf8b, 0xd590, 0xa8a9, 0x1b7e, 0xc03d, 0x1, 0x1);
        gbc.writeMem(0xa02e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xbf8b);
        EXPECT(gbc.pc(), 0xa030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02e), 0xcb);
        EXPECT(gbc.readMem(0xa02f), 0x37);
        // CB 37 0021
        gbc.setState(0x8a7b, 0x2353, 0x22c0, 0x1354, 0x8cfb, 0x9a62, 0x1, 0x0);
        gbc.writeMem(0x8a7b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2353);
        EXPECT(gbc.pc(), 0x8a7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a7b), 0xcb);
        EXPECT(gbc.readMem(0x8a7c), 0x37);
        // CB 37 0022
        gbc.setState(0x5c4a, 0xe618, 0xdf00, 0x6c9, 0xaac8, 0xb797, 0x0, 0x0);
        gbc.writeMem(0x5c4a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe618);
        EXPECT(gbc.pc(), 0x5c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0023
        gbc.setState(0xab73, 0x967a, 0xd590, 0x9947, 0x8fa1, 0x6a95, 0x0, 0x1);
        gbc.writeMem(0xab73, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x967a);
        EXPECT(gbc.pc(), 0xab75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab73), 0xcb);
        EXPECT(gbc.readMem(0xab74), 0x37);
        // CB 37 0024
        gbc.setState(0xb3d3, 0x7bfa, 0x6490, 0x4546, 0x7acb, 0x6334, 0x0, 0x1);
        gbc.writeMem(0xb3d3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7bfa);
        EXPECT(gbc.pc(), 0xb3d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d3), 0xcb);
        EXPECT(gbc.readMem(0xb3d4), 0x37);
        // CB 37 0025
        gbc.setState(0x6109, 0xcdf6, 0xcfe0, 0xac3b, 0x7434, 0x11af, 0x1, 0x0);
        gbc.writeMem(0x6109, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcdf6);
        EXPECT(gbc.pc(), 0x610b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0026
        gbc.setState(0x8065, 0x2512, 0x4c60, 0x318e, 0x62fe, 0xbc15, 0x0, 0x0);
        gbc.writeMem(0x8065, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2512);
        EXPECT(gbc.pc(), 0x8067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8065), 0xcb);
        EXPECT(gbc.readMem(0x8066), 0x37);
        // CB 37 0027
        gbc.setState(0x5c6f, 0xb4e3, 0xd990, 0x2f0c, 0xa79c, 0x44c7, 0x0, 0x0);
        gbc.writeMem(0x5c6f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb4e3);
        EXPECT(gbc.pc(), 0x5c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0028
        gbc.setState(0x45d2, 0x62a5, 0x53e0, 0xe5e2, 0x448a, 0xec2c, 0x1, 0x1);
        gbc.writeMem(0x45d2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x62a5);
        EXPECT(gbc.pc(), 0x45d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0029
        gbc.setState(0x6b87, 0xcff3, 0x830, 0x9667, 0x9ee, 0x635c, 0x0, 0x1);
        gbc.writeMem(0x6b87, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcff3);
        EXPECT(gbc.pc(), 0x6b89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 002A
        gbc.setState(0xa6ec, 0x4569, 0x3810, 0x58c4, 0x13c3, 0x8626, 0x1, 0x0);
        gbc.writeMem(0xa6ec, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4569);
        EXPECT(gbc.pc(), 0xa6ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ec), 0xcb);
        EXPECT(gbc.readMem(0xa6ed), 0x37);
        // CB 37 002B
        gbc.setState(0xc249, 0xcb68, 0x6940, 0xfc26, 0x1ed3, 0x12a7, 0x1, 0x0);
        gbc.writeMem(0xc249, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcb68);
        EXPECT(gbc.pc(), 0xc24b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc249), 0xcb);
        EXPECT(gbc.readMem(0xc24a), 0x37);
        // CB 37 002C
        gbc.setState(0x7e34, 0x5501, 0xf370, 0x5dda, 0xcd2f, 0xd4d4, 0x0, 0x1);
        gbc.writeMem(0x7e34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5501);
        EXPECT(gbc.pc(), 0x7e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 002D
        gbc.setState(0x6484, 0x7ef6, 0x6d20, 0x56a6, 0x44a0, 0x4ef6, 0x1, 0x0);
        gbc.writeMem(0x6484, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7ef6);
        EXPECT(gbc.pc(), 0x6486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 002E
        gbc.setState(0xc33f, 0x39c1, 0xd1a0, 0xe72, 0xc2fb, 0x101, 0x0, 0x0);
        gbc.writeMem(0xc33f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x39c1);
        EXPECT(gbc.pc(), 0xc341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33f), 0xcb);
        EXPECT(gbc.readMem(0xc340), 0x37);
        // CB 37 002F
        gbc.setState(0x8afd, 0x8662, 0x370, 0xa4f1, 0xc6e5, 0x2a25, 0x0, 0x1);
        gbc.writeMem(0x8afd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8662);
        EXPECT(gbc.pc(), 0x8aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8afd), 0xcb);
        EXPECT(gbc.readMem(0x8afe), 0x37);
        // CB 37 0030
        gbc.setState(0xd6be, 0xaa80, 0x9310, 0x18e9, 0xbd62, 0xc493, 0x1, 0x0);
        gbc.writeMem(0xd6be, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xaa80);
        EXPECT(gbc.pc(), 0xd6c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6be), 0xcb);
        EXPECT(gbc.readMem(0xd6bf), 0x37);
        // CB 37 0031
        gbc.setState(0xa906, 0xd221, 0xd010, 0x9992, 0x47f6, 0x6e4, 0x1, 0x1);
        gbc.writeMem(0xa906, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd221);
        EXPECT(gbc.pc(), 0xa908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa906), 0xcb);
        EXPECT(gbc.readMem(0xa907), 0x37);
        // CB 37 0032
        gbc.setState(0xc99b, 0xed49, 0x9320, 0x9205, 0xde35, 0xacc7, 0x1, 0x0);
        gbc.writeMem(0xc99b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xed49);
        EXPECT(gbc.pc(), 0xc99d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99b), 0xcb);
        EXPECT(gbc.readMem(0xc99c), 0x37);
        // CB 37 0033
        gbc.setState(0x7232, 0xe8ee, 0x2270, 0xeb22, 0x291, 0xa522, 0x0, 0x0);
        gbc.writeMem(0x7232, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe8ee);
        EXPECT(gbc.pc(), 0x7234);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0034
        gbc.setState(0x60d2, 0x7160, 0xf4f0, 0xcfe5, 0xf12, 0x2482, 0x1, 0x1);
        gbc.writeMem(0x60d2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7160);
        EXPECT(gbc.pc(), 0x60d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0035
        gbc.setState(0xe758, 0x18c9, 0x4db0, 0xe311, 0xa1eb, 0x1234, 0x0, 0x0);
        gbc.writeMem(0xe758, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x18c9);
        EXPECT(gbc.pc(), 0xe75a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe758), 0xcb);
        EXPECT(gbc.readMem(0xe759), 0x37);
        // CB 37 0036
        gbc.setState(0x8d35, 0xe9e, 0x1e30, 0x8f9b, 0x2cd0, 0x375c, 0x1, 0x1);
        gbc.writeMem(0x8d35, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe9e);
        EXPECT(gbc.pc(), 0x8d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d35), 0xcb);
        EXPECT(gbc.readMem(0x8d36), 0x37);
        // CB 37 0037
        gbc.setState(0xb141, 0x7e26, 0x79e0, 0x8ac3, 0xa1db, 0xa0e5, 0x0, 0x1);
        gbc.writeMem(0xb141, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7e26);
        EXPECT(gbc.pc(), 0xb143);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb141), 0xcb);
        EXPECT(gbc.readMem(0xb142), 0x37);
        // CB 37 0038
        gbc.setState(0xdd08, 0x7289, 0x4110, 0x3a73, 0x6b56, 0x25f7, 0x0, 0x1);
        gbc.writeMem(0xdd08, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7289);
        EXPECT(gbc.pc(), 0xdd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd08), 0xcb);
        EXPECT(gbc.readMem(0xdd09), 0x37);
        // CB 37 0039
        gbc.setState(0x28ba, 0x2b9a, 0xd9c0, 0x58f9, 0x974a, 0x947a, 0x1, 0x0);
        gbc.writeMem(0x28ba, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2b9a);
        EXPECT(gbc.pc(), 0x28bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 003A
        gbc.setState(0xebb0, 0xc9a4, 0x38c0, 0xb9eb, 0x7e3d, 0xa26c, 0x1, 0x0);
        gbc.writeMem(0xebb0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc9a4);
        EXPECT(gbc.pc(), 0xebb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb0), 0xcb);
        EXPECT(gbc.readMem(0xebb1), 0x37);
        // CB 37 003B
        gbc.setState(0xcf0c, 0x10f7, 0x2570, 0x11e4, 0x90a2, 0xeb77, 0x1, 0x1);
        gbc.writeMem(0xcf0c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x10f7);
        EXPECT(gbc.pc(), 0xcf0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0c), 0xcb);
        EXPECT(gbc.readMem(0xcf0d), 0x37);
        // CB 37 003C
        gbc.setState(0xb381, 0x829a, 0x8740, 0xa4d2, 0xc14d, 0x82e8, 0x0, 0x0);
        gbc.writeMem(0xb381, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x829a);
        EXPECT(gbc.pc(), 0xb383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb381), 0xcb);
        EXPECT(gbc.readMem(0xb382), 0x37);
        // CB 37 003E
        gbc.setState(0x3724, 0x1cfa, 0x4000, 0xf478, 0xb2b7, 0x22a3, 0x1, 0x1);
        gbc.writeMem(0x3724, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1cfa);
        EXPECT(gbc.pc(), 0x3726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 003F
        gbc.setState(0x43b8, 0xf554, 0xfbf0, 0xb721, 0x9b71, 0x4719, 0x1, 0x0);
        gbc.writeMem(0x43b8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf554);
        EXPECT(gbc.pc(), 0x43ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0040
        gbc.setState(0xa309, 0xcca9, 0xe400, 0x9266, 0x6582, 0x55d0, 0x0, 0x0);
        gbc.writeMem(0xa309, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xcca9);
        EXPECT(gbc.pc(), 0xa30b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa309), 0xcb);
        EXPECT(gbc.readMem(0xa30a), 0x37);
        // CB 37 0041
        gbc.setState(0xd7b4, 0xf0de, 0xe920, 0x19f4, 0xc737, 0xb99d, 0x1, 0x0);
        gbc.writeMem(0xd7b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf0de);
        EXPECT(gbc.pc(), 0xd7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b4), 0xcb);
        EXPECT(gbc.readMem(0xd7b5), 0x37);
        // CB 37 0042
        gbc.setState(0x41f, 0xed53, 0xe7d0, 0x179b, 0x14db, 0xaee2, 0x0, 0x0);
        gbc.writeMem(0x41f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xed53);
        EXPECT(gbc.pc(), 0x421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0043
        gbc.setState(0x4132, 0x9e56, 0xe600, 0xdd55, 0xc001, 0xa68a, 0x1, 0x1);
        gbc.writeMem(0x4132, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9e56);
        EXPECT(gbc.pc(), 0x4134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0045
        gbc.setState(0x87e9, 0x841b, 0xa640, 0x1ed9, 0x62d7, 0xcf1e, 0x1, 0x0);
        gbc.writeMem(0x87e9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x841b);
        EXPECT(gbc.pc(), 0x87eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e9), 0xcb);
        EXPECT(gbc.readMem(0x87ea), 0x37);
        // CB 37 0046
        gbc.setState(0xbb73, 0x8d5e, 0xbdf0, 0x89a4, 0xa291, 0x9de0, 0x1, 0x1);
        gbc.writeMem(0xbb73, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8d5e);
        EXPECT(gbc.pc(), 0xbb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb73), 0xcb);
        EXPECT(gbc.readMem(0xbb74), 0x37);
        // CB 37 0047
        gbc.setState(0x1e03, 0xea42, 0xc740, 0xd8b4, 0x7d0e, 0xd843, 0x1, 0x0);
        gbc.writeMem(0x1e03, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xea42);
        EXPECT(gbc.pc(), 0x1e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0048
        gbc.setState(0x32c9, 0x61ae, 0x86e0, 0x16f3, 0x9c55, 0x69ce, 0x0, 0x0);
        gbc.writeMem(0x32c9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x61ae);
        EXPECT(gbc.pc(), 0x32cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0049
        gbc.setState(0xcb34, 0xe147, 0xded0, 0x4dd1, 0x15b8, 0xccdf, 0x0, 0x0);
        gbc.writeMem(0xcb34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe147);
        EXPECT(gbc.pc(), 0xcb36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb34), 0xcb);
        EXPECT(gbc.readMem(0xcb35), 0x37);
        // CB 37 004A
        gbc.setState(0x279a, 0x69bd, 0xf50, 0x3c29, 0xcf9f, 0xcd6e, 0x0, 0x0);
        gbc.writeMem(0x279a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x69bd);
        EXPECT(gbc.pc(), 0x279c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 004B
        gbc.setState(0xc158, 0x6ad7, 0xef50, 0x2c0c, 0xb8a, 0x6964, 0x0, 0x1);
        gbc.writeMem(0xc158, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6ad7);
        EXPECT(gbc.pc(), 0xc15a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc158), 0xcb);
        EXPECT(gbc.readMem(0xc159), 0x37);
        // CB 37 004C
        gbc.setState(0x9880, 0xb8ee, 0x8580, 0xd971, 0xc807, 0xd8d5, 0x1, 0x1);
        gbc.writeMem(0x9880, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb8ee);
        EXPECT(gbc.pc(), 0x9882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9880), 0xcb);
        EXPECT(gbc.readMem(0x9881), 0x37);
        // CB 37 004D
        gbc.setState(0x8b74, 0xb89d, 0x4410, 0x4757, 0x57e4, 0xfb0e, 0x1, 0x0);
        gbc.writeMem(0x8b74, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb89d);
        EXPECT(gbc.pc(), 0x8b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b74), 0xcb);
        EXPECT(gbc.readMem(0x8b75), 0x37);
        // CB 37 004E
        gbc.setState(0x100b, 0x94d6, 0x6d70, 0x58a9, 0xe4e3, 0x418b, 0x0, 0x1);
        gbc.writeMem(0x100b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x94d6);
        EXPECT(gbc.pc(), 0x100d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 004F
        gbc.setState(0x9bb1, 0xf04, 0x9160, 0x3288, 0x2e52, 0x54e2, 0x1, 0x0);
        gbc.writeMem(0x9bb1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf04);
        EXPECT(gbc.pc(), 0x9bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb1), 0xcb);
        EXPECT(gbc.readMem(0x9bb2), 0x37);
        // CB 37 0051
        gbc.setState(0x408, 0x694c, 0xd370, 0x91f2, 0x330a, 0xb92b, 0x1, 0x1);
        gbc.writeMem(0x408, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x694c);
        EXPECT(gbc.pc(), 0x40a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0052
        gbc.setState(0x925b, 0x4a67, 0x7d30, 0x96a0, 0x789a, 0x1850, 0x0, 0x0);
        gbc.writeMem(0x925b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4a67);
        EXPECT(gbc.pc(), 0x925d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x925b), 0xcb);
        EXPECT(gbc.readMem(0x925c), 0x37);
        // CB 37 0053
        gbc.setState(0x659c, 0xaf78, 0x1f80, 0xac47, 0x2fe3, 0xae3e, 0x0, 0x0);
        gbc.writeMem(0x659c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xaf78);
        EXPECT(gbc.pc(), 0x659e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0054
        gbc.setState(0x2b17, 0x2e41, 0xd3a0, 0xfa80, 0x380f, 0x8644, 0x0, 0x0);
        gbc.writeMem(0x2b17, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2e41);
        EXPECT(gbc.pc(), 0x2b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0055
        gbc.setState(0xd91f, 0x6f4f, 0xf5a0, 0x53de, 0xacb6, 0x5808, 0x0, 0x0);
        gbc.writeMem(0xd91f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6f4f);
        EXPECT(gbc.pc(), 0xd921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91f), 0xcb);
        EXPECT(gbc.readMem(0xd920), 0x37);
        // CB 37 0056
        gbc.setState(0xaee8, 0x8b3e, 0xdf80, 0x7204, 0xb5d6, 0x1f18, 0x1, 0x1);
        gbc.writeMem(0xaee8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8b3e);
        EXPECT(gbc.pc(), 0xaeea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee8), 0xcb);
        EXPECT(gbc.readMem(0xaee9), 0x37);
        // CB 37 0057
        gbc.setState(0x620b, 0xba19, 0xf8a0, 0xd817, 0x1442, 0x292a, 0x0, 0x1);
        gbc.writeMem(0x620b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xba19);
        EXPECT(gbc.pc(), 0x620d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0058
        gbc.setState(0x6021, 0x24af, 0xfed0, 0x9d26, 0x4fa, 0x741b, 0x1, 0x1);
        gbc.writeMem(0x6021, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x24af);
        EXPECT(gbc.pc(), 0x6023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0059
        gbc.setState(0x1a24, 0xe4d9, 0x6bc0, 0xba14, 0x5c4, 0x4d71, 0x0, 0x0);
        gbc.writeMem(0x1a24, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe4d9);
        EXPECT(gbc.pc(), 0x1a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 005A
        gbc.setState(0xd89d, 0x5818, 0x3c0, 0xa567, 0x6b29, 0xce6c, 0x0, 0x1);
        gbc.writeMem(0xd89d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5818);
        EXPECT(gbc.pc(), 0xd89f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd89d), 0xcb);
        EXPECT(gbc.readMem(0xd89e), 0x37);
        // CB 37 005B
        gbc.setState(0xe69e, 0x94, 0xb240, 0x4043, 0xa81c, 0xaa16, 0x1, 0x1);
        gbc.writeMem(0xe69e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x94);
        EXPECT(gbc.pc(), 0xe6a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69e), 0xcb);
        EXPECT(gbc.readMem(0xe69f), 0x37);
        // CB 37 005C
        gbc.setState(0x291a, 0x524f, 0xeb50, 0x93fb, 0xae80, 0x5ea8, 0x0, 0x1);
        gbc.writeMem(0x291a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x524f);
        EXPECT(gbc.pc(), 0x291c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 005D
        gbc.setState(0x200f, 0xf0b6, 0xbde0, 0xdc3d, 0x274e, 0x5d1b, 0x1, 0x0);
        gbc.writeMem(0x200f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf0b6);
        EXPECT(gbc.pc(), 0x2011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 005E
        gbc.setState(0xcf4b, 0x4e53, 0x1390, 0x9906, 0xcc78, 0x56c7, 0x0, 0x1);
        gbc.writeMem(0xcf4b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4e53);
        EXPECT(gbc.pc(), 0xcf4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf4b), 0xcb);
        EXPECT(gbc.readMem(0xcf4c), 0x37);
        // CB 37 005F
        gbc.setState(0x199a, 0xadc3, 0xc1f0, 0xd3e, 0x62e5, 0x4dee, 0x0, 0x0);
        gbc.writeMem(0x199a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xadc3);
        EXPECT(gbc.pc(), 0x199c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0060
        gbc.setState(0x5e74, 0x1713, 0x3b20, 0xb619, 0x1cdc, 0xadc0, 0x1, 0x0);
        gbc.writeMem(0x5e74, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1713);
        EXPECT(gbc.pc(), 0x5e76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0061
        gbc.setState(0xd61d, 0xf1c9, 0x99b0, 0x73b1, 0x8b7c, 0xb56f, 0x1, 0x1);
        gbc.writeMem(0xd61d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf1c9);
        EXPECT(gbc.pc(), 0xd61f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd61d), 0xcb);
        EXPECT(gbc.readMem(0xd61e), 0x37);
        // CB 37 0062
        gbc.setState(0x50b4, 0x7cf9, 0xe100, 0xc8f5, 0x30a8, 0xe3d8, 0x1, 0x0);
        gbc.writeMem(0x50b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7cf9);
        EXPECT(gbc.pc(), 0x50b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0063
        gbc.setState(0x63f8, 0xa90e, 0xc280, 0x9678, 0x51cb, 0x868b, 0x0, 0x1);
        gbc.writeMem(0x63f8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa90e);
        EXPECT(gbc.pc(), 0x63fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0064
        gbc.setState(0x4b3b, 0x16ae, 0xd770, 0x7901, 0x952d, 0xe58, 0x0, 0x1);
        gbc.writeMem(0x4b3b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x16ae);
        EXPECT(gbc.pc(), 0x4b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0065
        gbc.setState(0xb6b1, 0xcae0, 0x3a30, 0x8041, 0x4e, 0x27d5, 0x1, 0x1);
        gbc.writeMem(0xb6b1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcae0);
        EXPECT(gbc.pc(), 0xb6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b1), 0xcb);
        EXPECT(gbc.readMem(0xb6b2), 0x37);
        // CB 37 0066
        gbc.setState(0xd7f5, 0xb720, 0xbc10, 0x6683, 0x3da, 0x3a9c, 0x0, 0x0);
        gbc.writeMem(0xd7f5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb720);
        EXPECT(gbc.pc(), 0xd7f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f5), 0xcb);
        EXPECT(gbc.readMem(0xd7f6), 0x37);
        // CB 37 0068
        gbc.setState(0x1f07, 0x3cfb, 0x8410, 0x1281, 0x346e, 0xb336, 0x0, 0x1);
        gbc.writeMem(0x1f07, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3cfb);
        EXPECT(gbc.pc(), 0x1f09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0069
        gbc.setState(0xc888, 0x7998, 0x7240, 0x807a, 0x9d94, 0x9443, 0x1, 0x1);
        gbc.writeMem(0xc888, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7998);
        EXPECT(gbc.pc(), 0xc88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc888), 0xcb);
        EXPECT(gbc.readMem(0xc889), 0x37);
        // CB 37 006A
        gbc.setState(0xa078, 0xf923, 0xa440, 0x71b7, 0x1b3f, 0xed3, 0x1, 0x0);
        gbc.writeMem(0xa078, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf923);
        EXPECT(gbc.pc(), 0xa07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa078), 0xcb);
        EXPECT(gbc.readMem(0xa079), 0x37);
        // CB 37 006B
        gbc.setState(0x3f52, 0xbf5b, 0x4ca0, 0x6d36, 0x8477, 0x2a58, 0x0, 0x1);
        gbc.writeMem(0x3f52, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbf5b);
        EXPECT(gbc.pc(), 0x3f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 006C
        gbc.setState(0x5cdf, 0x39f2, 0xb540, 0xde8a, 0x4d13, 0x8972, 0x1, 0x1);
        gbc.writeMem(0x5cdf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x39f2);
        EXPECT(gbc.pc(), 0x5ce1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 006D
        gbc.setState(0xa1ab, 0x5a04, 0x74c0, 0x925b, 0x1072, 0xadcd, 0x1, 0x1);
        gbc.writeMem(0xa1ab, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5a04);
        EXPECT(gbc.pc(), 0xa1ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ab), 0xcb);
        EXPECT(gbc.readMem(0xa1ac), 0x37);
        // CB 37 006E
        gbc.setState(0x58d5, 0xa5df, 0x57c0, 0xb5a9, 0x527c, 0xc5a5, 0x1, 0x0);
        gbc.writeMem(0x58d5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa5df);
        EXPECT(gbc.pc(), 0x58d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 006F
        gbc.setState(0x5e0e, 0xf5f, 0x4060, 0xe5c9, 0x9ae9, 0xeeb8, 0x0, 0x0);
        gbc.writeMem(0x5e0e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf5f);
        EXPECT(gbc.pc(), 0x5e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0070
        gbc.setState(0xee76, 0xbe74, 0x2a40, 0x5544, 0xedf8, 0xfe64, 0x0, 0x1);
        gbc.writeMem(0xee76, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbe74);
        EXPECT(gbc.pc(), 0xee78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee76), 0xcb);
        EXPECT(gbc.readMem(0xee77), 0x37);
        // CB 37 0071
        gbc.setState(0x1ab5, 0x7890, 0x6c0, 0x64f6, 0x53dc, 0xc59e, 0x1, 0x0);
        gbc.writeMem(0x1ab5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7890);
        EXPECT(gbc.pc(), 0x1ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0072
        gbc.setState(0xcd3c, 0xe357, 0x11e0, 0x2d13, 0x217c, 0x5427, 0x1, 0x1);
        gbc.writeMem(0xcd3c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe357);
        EXPECT(gbc.pc(), 0xcd3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3c), 0xcb);
        EXPECT(gbc.readMem(0xcd3d), 0x37);
        // CB 37 0073
        gbc.setState(0xe3f2, 0xca4e, 0xa840, 0x75a8, 0xd5a8, 0xc8ac, 0x0, 0x1);
        gbc.writeMem(0xe3f2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xca4e);
        EXPECT(gbc.pc(), 0xe3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3f2), 0xcb);
        EXPECT(gbc.readMem(0xe3f3), 0x37);
        // CB 37 0074
        gbc.setState(0x11e4, 0x24ae, 0xdd70, 0x74c0, 0xccd1, 0x8c7, 0x0, 0x1);
        gbc.writeMem(0x11e4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x24ae);
        EXPECT(gbc.pc(), 0x11e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0075
        gbc.setState(0x10d0, 0x8fd2, 0x48c0, 0xdfe4, 0x244, 0x64a2, 0x0, 0x0);
        gbc.writeMem(0x10d0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8fd2);
        EXPECT(gbc.pc(), 0x10d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0076
        gbc.setState(0x5a20, 0x688, 0xf40, 0x451f, 0x5937, 0xcbb6, 0x0, 0x1);
        gbc.writeMem(0x5a20, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x688);
        EXPECT(gbc.pc(), 0x5a22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0077
        gbc.setState(0xae6d, 0xcf0, 0xeab0, 0x6e1b, 0x4209, 0xca05, 0x0, 0x0);
        gbc.writeMem(0xae6d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcf0);
        EXPECT(gbc.pc(), 0xae6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6d), 0xcb);
        EXPECT(gbc.readMem(0xae6e), 0x37);
        // CB 37 0078
        gbc.setState(0x1399, 0x9858, 0x93e0, 0xf96f, 0xffab, 0xaa04, 0x0, 0x1);
        gbc.writeMem(0x1399, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9858);
        EXPECT(gbc.pc(), 0x139b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0079
        gbc.setState(0xba4f, 0xa7fe, 0xf440, 0x9783, 0xba49, 0xbab8, 0x0, 0x0);
        gbc.writeMem(0xba4f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa7fe);
        EXPECT(gbc.pc(), 0xba51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba4f), 0xcb);
        EXPECT(gbc.readMem(0xba50), 0x37);
        // CB 37 007A
        gbc.setState(0x8c4, 0xc857, 0x9e10, 0x3137, 0x258f, 0x4e87, 0x0, 0x1);
        gbc.writeMem(0x8c4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc857);
        EXPECT(gbc.pc(), 0x8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 007B
        gbc.setState(0x44b7, 0x8ead, 0x3070, 0x5fc2, 0x8bfa, 0x9bc1, 0x1, 0x1);
        gbc.writeMem(0x44b7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8ead);
        EXPECT(gbc.pc(), 0x44b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 007C
        gbc.setState(0x4295, 0xba78, 0x90, 0x6c2c, 0x78fb, 0x148b, 0x0, 0x1);
        gbc.writeMem(0x4295, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xba78);
        EXPECT(gbc.pc(), 0x4297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 007D
        gbc.setState(0x8899, 0xf8ea, 0x5f00, 0x5658, 0xbd78, 0xd1, 0x1, 0x0);
        gbc.writeMem(0x8899, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf8ea);
        EXPECT(gbc.pc(), 0x889b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8899), 0xcb);
        EXPECT(gbc.readMem(0x889a), 0x37);
        // CB 37 007E
        gbc.setState(0x9679, 0xffbc, 0xb970, 0x4d1f, 0xda0d, 0xd86c, 0x0, 0x1);
        gbc.writeMem(0x9679, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xffbc);
        EXPECT(gbc.pc(), 0x967b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9679), 0xcb);
        EXPECT(gbc.readMem(0x967a), 0x37);
        // CB 37 007F
        gbc.setState(0xb9a6, 0x81a4, 0x1280, 0xcdf4, 0xc42a, 0xe4d4, 0x0, 0x0);
        gbc.writeMem(0xb9a6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x81a4);
        EXPECT(gbc.pc(), 0xb9a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9a6), 0xcb);
        EXPECT(gbc.readMem(0xb9a7), 0x37);
        // CB 37 0080
        gbc.setState(0x87aa, 0xf243, 0xb8c0, 0x5622, 0xa2a1, 0xc5e, 0x1, 0x1);
        gbc.writeMem(0x87aa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf243);
        EXPECT(gbc.pc(), 0x87ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87aa), 0xcb);
        EXPECT(gbc.readMem(0x87ab), 0x37);
        // CB 37 0082
        gbc.setState(0xcdec, 0x560d, 0xc670, 0x3d9e, 0xb8aa, 0x210, 0x0, 0x0);
        gbc.writeMem(0xcdec, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x560d);
        EXPECT(gbc.pc(), 0xcdee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdec), 0xcb);
        EXPECT(gbc.readMem(0xcded), 0x37);
        // CB 37 0083
        gbc.setState(0xb857, 0x563b, 0x2e40, 0xa760, 0x7c55, 0x36cb, 0x1, 0x1);
        gbc.writeMem(0xb857, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x563b);
        EXPECT(gbc.pc(), 0xb859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb857), 0xcb);
        EXPECT(gbc.readMem(0xb858), 0x37);
        // CB 37 0084
        gbc.setState(0xd59b, 0x2eed, 0x8bd0, 0x95ba, 0x9f10, 0xcd1d, 0x0, 0x0);
        gbc.writeMem(0xd59b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2eed);
        EXPECT(gbc.pc(), 0xd59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd59b), 0xcb);
        EXPECT(gbc.readMem(0xd59c), 0x37);
        // CB 37 0085
        gbc.setState(0x76e, 0x197, 0x4a80, 0x46ad, 0xf826, 0xdce0, 0x1, 0x0);
        gbc.writeMem(0x76e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x197);
        EXPECT(gbc.pc(), 0x770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0086
        gbc.setState(0x45c1, 0xa0a3, 0xd3e0, 0xc890, 0xba5c, 0x8a8d, 0x0, 0x1);
        gbc.writeMem(0x45c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa0a3);
        EXPECT(gbc.pc(), 0x45c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0087
        gbc.setState(0xc2b4, 0xf5de, 0xcc0, 0x8ac3, 0xd195, 0xfa46, 0x1, 0x0);
        gbc.writeMem(0xc2b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf5de);
        EXPECT(gbc.pc(), 0xc2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2b4), 0xcb);
        EXPECT(gbc.readMem(0xc2b5), 0x37);
        // CB 37 0088
        gbc.setState(0x2f4e, 0xfbdc, 0xea90, 0x85bb, 0x782b, 0xceeb, 0x1, 0x0);
        gbc.writeMem(0x2f4e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xfbdc);
        EXPECT(gbc.pc(), 0x2f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0089
        gbc.setState(0x6438, 0x28a7, 0x3020, 0xb1c4, 0x353c, 0xb942, 0x1, 0x1);
        gbc.writeMem(0x6438, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x28a7);
        EXPECT(gbc.pc(), 0x643a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 008A
        gbc.setState(0x9b24, 0xadbd, 0xc380, 0x9564, 0x8cc2, 0xf46c, 0x0, 0x0);
        gbc.writeMem(0x9b24, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xadbd);
        EXPECT(gbc.pc(), 0x9b26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b24), 0xcb);
        EXPECT(gbc.readMem(0x9b25), 0x37);
        // CB 37 008B
        gbc.setState(0xc2ef, 0x47f9, 0xc6b0, 0x28e0, 0xbbd, 0x3077, 0x1, 0x0);
        gbc.writeMem(0xc2ef, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x47f9);
        EXPECT(gbc.pc(), 0xc2f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ef), 0xcb);
        EXPECT(gbc.readMem(0xc2f0), 0x37);
        // CB 37 008C
        gbc.setState(0x70f, 0xb9e5, 0xbdf0, 0x5037, 0xc839, 0x691c, 0x0, 0x0);
        gbc.writeMem(0x70f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb9e5);
        EXPECT(gbc.pc(), 0x711);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 008D
        gbc.setState(0x884e, 0x21bf, 0x9ce0, 0xc2d1, 0x6d0c, 0x5e43, 0x1, 0x1);
        gbc.writeMem(0x884e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x21bf);
        EXPECT(gbc.pc(), 0x8850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884e), 0xcb);
        EXPECT(gbc.readMem(0x884f), 0x37);
        // CB 37 008E
        gbc.setState(0xeadb, 0xeec2, 0x28a0, 0xdf39, 0x3c8b, 0x97ed, 0x0, 0x1);
        gbc.writeMem(0xeadb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xeec2);
        EXPECT(gbc.pc(), 0xeadd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeadb), 0xcb);
        EXPECT(gbc.readMem(0xeadc), 0x37);
        // CB 37 008F
        gbc.setState(0x1f3, 0xfdb9, 0x6750, 0xdd77, 0xbed5, 0xd1bc, 0x0, 0x0);
        gbc.writeMem(0x1f3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfdb9);
        EXPECT(gbc.pc(), 0x1f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0090
        gbc.setState(0x2f9e, 0xabf2, 0x44d0, 0xa708, 0xd095, 0x7489, 0x1, 0x1);
        gbc.writeMem(0x2f9e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xabf2);
        EXPECT(gbc.pc(), 0x2fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0091
        gbc.setState(0x4a06, 0xd889, 0xb9a0, 0xdf05, 0x2bb3, 0xbd1e, 0x1, 0x1);
        gbc.writeMem(0x4a06, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd889);
        EXPECT(gbc.pc(), 0x4a08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0092
        gbc.setState(0x463e, 0xac85, 0xf010, 0xb16d, 0x1fbe, 0xccf, 0x1, 0x1);
        gbc.writeMem(0x463e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xac85);
        EXPECT(gbc.pc(), 0x4640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0095
        gbc.setState(0x76c4, 0xb5d6, 0x24d0, 0xd8ad, 0xceba, 0x24fb, 0x0, 0x0);
        gbc.writeMem(0x76c4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb5d6);
        EXPECT(gbc.pc(), 0x76c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0096
        gbc.setState(0x1765, 0x33d3, 0x2d10, 0xe961, 0x7df9, 0xfea, 0x1, 0x1);
        gbc.writeMem(0x1765, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x33d3);
        EXPECT(gbc.pc(), 0x1767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0097
        gbc.setState(0x4e5e, 0x2940, 0x2af0, 0xec35, 0xf169, 0x3bf4, 0x0, 0x0);
        gbc.writeMem(0x4e5e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2940);
        EXPECT(gbc.pc(), 0x4e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0098
        gbc.setState(0xb425, 0xa6c0, 0x7d0, 0x51a8, 0xf255, 0x5226, 0x0, 0x1);
        gbc.writeMem(0xb425, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa6c0);
        EXPECT(gbc.pc(), 0xb427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb425), 0xcb);
        EXPECT(gbc.readMem(0xb426), 0x37);
        // CB 37 0099
        gbc.setState(0x80e9, 0xba41, 0xbf60, 0x1511, 0xdfba, 0x391f, 0x0, 0x1);
        gbc.writeMem(0x80e9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xba41);
        EXPECT(gbc.pc(), 0x80eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e9), 0xcb);
        EXPECT(gbc.readMem(0x80ea), 0x37);
        // CB 37 009A
        gbc.setState(0xd5ce, 0x8355, 0xfce0, 0x558e, 0x7f19, 0x28f4, 0x0, 0x0);
        gbc.writeMem(0xd5ce, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8355);
        EXPECT(gbc.pc(), 0xd5d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ce), 0xcb);
        EXPECT(gbc.readMem(0xd5cf), 0x37);
        // CB 37 009B
        gbc.setState(0x45d6, 0x8496, 0x2250, 0xd3fe, 0x79a, 0xbb3a, 0x0, 0x1);
        gbc.writeMem(0x45d6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8496);
        EXPECT(gbc.pc(), 0x45d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 009C
        gbc.setState(0x2cbf, 0x3fc0, 0x3170, 0xa772, 0x9191, 0xedaa, 0x1, 0x0);
        gbc.writeMem(0x2cbf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3fc0);
        EXPECT(gbc.pc(), 0x2cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 009D
        gbc.setState(0x7316, 0x4cfc, 0x7660, 0x871e, 0xd27, 0x1332, 0x1, 0x1);
        gbc.writeMem(0x7316, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4cfc);
        EXPECT(gbc.pc(), 0x7318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 009E
        gbc.setState(0xaa9b, 0xd1d4, 0xe180, 0xdc7b, 0xfed6, 0x49eb, 0x0, 0x0);
        gbc.writeMem(0xaa9b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd1d4);
        EXPECT(gbc.pc(), 0xaa9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa9b), 0xcb);
        EXPECT(gbc.readMem(0xaa9c), 0x37);
        // CB 37 009F
        gbc.setState(0x3d0b, 0xb11c, 0x4e90, 0xdf77, 0xfb73, 0x1a30, 0x0, 0x0);
        gbc.writeMem(0x3d0b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb11c);
        EXPECT(gbc.pc(), 0x3d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A0
        gbc.setState(0x4860, 0xc096, 0x33f0, 0x46d8, 0x8b06, 0x607b, 0x0, 0x1);
        gbc.writeMem(0x4860, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc096);
        EXPECT(gbc.pc(), 0x4862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A1
        gbc.setState(0x4bd4, 0xe185, 0xf380, 0x1f41, 0x2754, 0x2928, 0x1, 0x1);
        gbc.writeMem(0x4bd4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe185);
        EXPECT(gbc.pc(), 0x4bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A2
        gbc.setState(0x67b3, 0x3932, 0x9c00, 0x7fab, 0x32e7, 0x8b7e, 0x0, 0x0);
        gbc.writeMem(0x67b3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3932);
        EXPECT(gbc.pc(), 0x67b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A3
        gbc.setState(0x8cee, 0x8f29, 0xfe10, 0xd15f, 0x182b, 0xff1b, 0x0, 0x1);
        gbc.writeMem(0x8cee, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8f29);
        EXPECT(gbc.pc(), 0x8cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cee), 0xcb);
        EXPECT(gbc.readMem(0x8cef), 0x37);
        // CB 37 00A4
        gbc.setState(0x9205, 0x5a66, 0xc890, 0xc60a, 0xdf60, 0x28c7, 0x1, 0x1);
        gbc.writeMem(0x9205, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5a66);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9205), 0xcb);
        EXPECT(gbc.readMem(0x9206), 0x37);
        // CB 37 00A5
        gbc.setState(0x7f60, 0xc903, 0x8980, 0x351, 0xcf44, 0x3c92, 0x1, 0x0);
        gbc.writeMem(0x7f60, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc903);
        EXPECT(gbc.pc(), 0x7f62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A6
        gbc.setState(0xc3b8, 0xedb, 0x8e60, 0x8a90, 0x8660, 0x2d34, 0x1, 0x0);
        gbc.writeMem(0xc3b8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xedb);
        EXPECT(gbc.pc(), 0xc3ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b8), 0xcb);
        EXPECT(gbc.readMem(0xc3b9), 0x37);
        // CB 37 00A7
        gbc.setState(0x17c, 0x71a5, 0xb670, 0x1dc8, 0xc02f, 0x9ea9, 0x0, 0x0);
        gbc.writeMem(0x17c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x71a5);
        EXPECT(gbc.pc(), 0x17e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00A8
        gbc.setState(0x87d8, 0x93b8, 0x3190, 0xeff9, 0xc7f1, 0x3a28, 0x1, 0x0);
        gbc.writeMem(0x87d8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x93b8);
        EXPECT(gbc.pc(), 0x87da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d8), 0xcb);
        EXPECT(gbc.readMem(0x87d9), 0x37);
        // CB 37 00A9
        gbc.setState(0x730c, 0xacc2, 0x4a10, 0xc3d0, 0xd57e, 0x3d54, 0x0, 0x1);
        gbc.writeMem(0x730c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xacc2);
        EXPECT(gbc.pc(), 0x730e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00AA
        gbc.setState(0x7cc2, 0x3c53, 0xd40, 0xafd9, 0x3436, 0x3eac, 0x0, 0x1);
        gbc.writeMem(0x7cc2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3c53);
        EXPECT(gbc.pc(), 0x7cc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00AB
        gbc.setState(0x2bc5, 0xfe5a, 0xb650, 0xff90, 0x257c, 0xcf5d, 0x1, 0x1);
        gbc.writeMem(0x2bc5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfe5a);
        EXPECT(gbc.pc(), 0x2bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00AC
        gbc.setState(0xd7c2, 0x1e7e, 0x3610, 0x5acc, 0xdcb3, 0xdd9c, 0x1, 0x0);
        gbc.writeMem(0xd7c2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1e7e);
        EXPECT(gbc.pc(), 0xd7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c2), 0xcb);
        EXPECT(gbc.readMem(0xd7c3), 0x37);
        // CB 37 00AD
        gbc.setState(0x6b73, 0x4cc8, 0xe30, 0x4004, 0xb077, 0x7891, 0x0, 0x0);
        gbc.writeMem(0x6b73, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4cc8);
        EXPECT(gbc.pc(), 0x6b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00AE
        gbc.setState(0x8f2d, 0xf237, 0xb600, 0xf49f, 0x9ec9, 0x30, 0x0, 0x0);
        gbc.writeMem(0x8f2d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf237);
        EXPECT(gbc.pc(), 0x8f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2d), 0xcb);
        EXPECT(gbc.readMem(0x8f2e), 0x37);
        // CB 37 00AF
        gbc.setState(0xd70b, 0xb522, 0x4c60, 0x2d99, 0x1dad, 0xe534, 0x0, 0x0);
        gbc.writeMem(0xd70b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb522);
        EXPECT(gbc.pc(), 0xd70d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70b), 0xcb);
        EXPECT(gbc.readMem(0xd70c), 0x37);
        // CB 37 00B0
        gbc.setState(0x1abb, 0xcf40, 0xc8b0, 0x1487, 0xc775, 0x22d8, 0x0, 0x1);
        gbc.writeMem(0x1abb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcf40);
        EXPECT(gbc.pc(), 0x1abd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00B1
        gbc.setState(0xe879, 0x1ac1, 0x4b80, 0xd15b, 0x1300, 0x2d79, 0x1, 0x0);
        gbc.writeMem(0xe879, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1ac1);
        EXPECT(gbc.pc(), 0xe87b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe879), 0xcb);
        EXPECT(gbc.readMem(0xe87a), 0x37);
        // CB 37 00B2
        gbc.setState(0x5f0f, 0xee97, 0xcf00, 0x32ed, 0x5cce, 0xadbf, 0x0, 0x0);
        gbc.writeMem(0x5f0f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xee97);
        EXPECT(gbc.pc(), 0x5f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00B3
        gbc.setState(0x9f16, 0xd904, 0x95b0, 0x87de, 0xdb65, 0x5356, 0x1, 0x0);
        gbc.writeMem(0x9f16, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd904);
        EXPECT(gbc.pc(), 0x9f18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f16), 0xcb);
        EXPECT(gbc.readMem(0x9f17), 0x37);
        // CB 37 00B4
        gbc.setState(0x4031, 0xd0a0, 0xe530, 0x38a9, 0x5ab8, 0xd656, 0x1, 0x0);
        gbc.writeMem(0x4031, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd0a0);
        EXPECT(gbc.pc(), 0x4033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00B5
        gbc.setState(0xe68c, 0x23d2, 0x0, 0x1a9d, 0xcd17, 0x21c2, 0x0, 0x0);
        gbc.writeMem(0xe68c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x23d2);
        EXPECT(gbc.pc(), 0xe68e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68c), 0xcb);
        EXPECT(gbc.readMem(0xe68d), 0x37);
        // CB 37 00B6
        gbc.setState(0x9115, 0x897, 0xf1d0, 0xd2d4, 0xb18, 0x3572, 0x0, 0x1);
        gbc.writeMem(0x9115, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x897);
        EXPECT(gbc.pc(), 0x9117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9115), 0xcb);
        EXPECT(gbc.readMem(0x9116), 0x37);
        // CB 37 00B7
        gbc.setState(0x361e, 0x6d3b, 0x6d60, 0x37b8, 0x8b78, 0xfc0d, 0x1, 0x0);
        gbc.writeMem(0x361e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6d3b);
        EXPECT(gbc.pc(), 0x3620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00B8
        gbc.setState(0x57ef, 0xd445, 0xcea0, 0xae06, 0xaf94, 0x469d, 0x1, 0x0);
        gbc.writeMem(0x57ef, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd445);
        EXPECT(gbc.pc(), 0x57f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00B9
        gbc.setState(0xa38e, 0x4833, 0x4840, 0xcb99, 0xda5d, 0xbc6b, 0x1, 0x1);
        gbc.writeMem(0xa38e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4833);
        EXPECT(gbc.pc(), 0xa390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38e), 0xcb);
        EXPECT(gbc.readMem(0xa38f), 0x37);
        // CB 37 00BB
        gbc.setState(0x6988, 0xef2d, 0x2e0, 0xf5bc, 0xe883, 0x87c7, 0x0, 0x0);
        gbc.writeMem(0x6988, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xef2d);
        EXPECT(gbc.pc(), 0x698a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00BC
        gbc.setState(0x611a, 0x5349, 0x240, 0x423, 0xef48, 0xa88, 0x0, 0x1);
        gbc.writeMem(0x611a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5349);
        EXPECT(gbc.pc(), 0x611c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00BD
        gbc.setState(0x1453, 0x50cc, 0x6d30, 0x6a46, 0x9633, 0xd2ab, 0x1, 0x0);
        gbc.writeMem(0x1453, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x50cc);
        EXPECT(gbc.pc(), 0x1455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00BE
        gbc.setState(0x4c7f, 0xc562, 0xffe0, 0xec00, 0xc8ba, 0x7cf7, 0x1, 0x1);
        gbc.writeMem(0x4c7f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc562);
        EXPECT(gbc.pc(), 0x4c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00BF
        gbc.setState(0x37b9, 0x62e7, 0x2d10, 0xeef5, 0x579f, 0x5db3, 0x0, 0x0);
        gbc.writeMem(0x37b9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x62e7);
        EXPECT(gbc.pc(), 0x37bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00C0
        gbc.setState(0x80e5, 0x3b12, 0xd5d0, 0xc3e1, 0x1e6a, 0x702d, 0x0, 0x1);
        gbc.writeMem(0x80e5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3b12);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e5), 0xcb);
        EXPECT(gbc.readMem(0x80e6), 0x37);
        // CB 37 00C1
        gbc.setState(0x5b15, 0x3e8a, 0xae90, 0xfe61, 0xb012, 0xefa6, 0x0, 0x1);
        gbc.writeMem(0x5b15, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3e8a);
        EXPECT(gbc.pc(), 0x5b17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00C2
        gbc.setState(0xec1b, 0x2717, 0x6b10, 0xd47, 0x2251, 0xe809, 0x1, 0x0);
        gbc.writeMem(0xec1b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2717);
        EXPECT(gbc.pc(), 0xec1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec1b), 0xcb);
        EXPECT(gbc.readMem(0xec1c), 0x37);
        // CB 37 00C3
        gbc.setState(0x604d, 0x9533, 0x9020, 0xac88, 0xc990, 0x8b30, 0x0, 0x0);
        gbc.writeMem(0x604d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9533);
        EXPECT(gbc.pc(), 0x604f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00C4
        gbc.setState(0xe66c, 0x4903, 0x4c60, 0x3e80, 0x1ee8, 0x48ef, 0x1, 0x0);
        gbc.writeMem(0xe66c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4903);
        EXPECT(gbc.pc(), 0xe66e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe66c), 0xcb);
        EXPECT(gbc.readMem(0xe66d), 0x37);
        // CB 37 00C5
        gbc.setState(0x383e, 0x9342, 0x9e40, 0xaa7e, 0x2713, 0x1a6c, 0x0, 0x1);
        gbc.writeMem(0x383e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9342);
        EXPECT(gbc.pc(), 0x3840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00C6
        gbc.setState(0x6423, 0x599c, 0x8cc0, 0xe6c3, 0x26c5, 0xdcb4, 0x0, 0x1);
        gbc.writeMem(0x6423, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x599c);
        EXPECT(gbc.pc(), 0x6425);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00C7
        gbc.setState(0xa16c, 0xbf9, 0x1750, 0x6b82, 0x644d, 0x55c6, 0x1, 0x0);
        gbc.writeMem(0xa16c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbf9);
        EXPECT(gbc.pc(), 0xa16e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16c), 0xcb);
        EXPECT(gbc.readMem(0xa16d), 0x37);
        // CB 37 00C8
        gbc.setState(0x86c6, 0x6590, 0x97b0, 0xb120, 0xeaea, 0xeb23, 0x1, 0x1);
        gbc.writeMem(0x86c6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6590);
        EXPECT(gbc.pc(), 0x86c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c6), 0xcb);
        EXPECT(gbc.readMem(0x86c7), 0x37);
        // CB 37 00C9
        gbc.setState(0x8b09, 0x4c13, 0xa720, 0xc08e, 0x6b71, 0x92e, 0x0, 0x1);
        gbc.writeMem(0x8b09, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4c13);
        EXPECT(gbc.pc(), 0x8b0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b09), 0xcb);
        EXPECT(gbc.readMem(0x8b0a), 0x37);
        // CB 37 00CA
        gbc.setState(0x10d0, 0xb4f1, 0xe7b0, 0x4603, 0xb4d, 0x8a54, 0x0, 0x0);
        gbc.writeMem(0x10d0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb4f1);
        EXPECT(gbc.pc(), 0x10d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00CC
        gbc.setState(0x3045, 0x7665, 0x5fb0, 0x5ae4, 0xcc84, 0x4fb0, 0x1, 0x0);
        gbc.writeMem(0x3045, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7665);
        EXPECT(gbc.pc(), 0x3047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00CD
        gbc.setState(0xb3ca, 0x907f, 0x70f0, 0xa3a, 0x8ac8, 0xb5e7, 0x1, 0x1);
        gbc.writeMem(0xb3ca, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x907f);
        EXPECT(gbc.pc(), 0xb3cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ca), 0xcb);
        EXPECT(gbc.readMem(0xb3cb), 0x37);
        // CB 37 00CE
        gbc.setState(0xd2bb, 0xa824, 0x5d30, 0x5545, 0x3cd7, 0x659, 0x0, 0x1);
        gbc.writeMem(0xd2bb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa824);
        EXPECT(gbc.pc(), 0xd2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2bb), 0xcb);
        EXPECT(gbc.readMem(0xd2bc), 0x37);
        // CB 37 00CF
        gbc.setState(0x103e, 0x2fc, 0x4730, 0x3e64, 0x3e77, 0x3757, 0x0, 0x1);
        gbc.writeMem(0x103e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2fc);
        EXPECT(gbc.pc(), 0x1040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D0
        gbc.setState(0x9265, 0x1ef5, 0x5e60, 0x8e8d, 0x4bc7, 0x5ac3, 0x1, 0x1);
        gbc.writeMem(0x9265, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1ef5);
        EXPECT(gbc.pc(), 0x9267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9265), 0xcb);
        EXPECT(gbc.readMem(0x9266), 0x37);
        // CB 37 00D1
        gbc.setState(0x5941, 0x26dd, 0x6cd0, 0xb4cc, 0x7d63, 0xd9c0, 0x0, 0x1);
        gbc.writeMem(0x5941, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x26dd);
        EXPECT(gbc.pc(), 0x5943);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D2
        gbc.setState(0xe0f, 0x91ce, 0xccb0, 0x2fcd, 0xbf4b, 0xb754, 0x0, 0x1);
        gbc.writeMem(0xe0f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x91ce);
        EXPECT(gbc.pc(), 0xe11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D3
        gbc.setState(0x75e6, 0x2433, 0xa790, 0xb6a1, 0x2d0b, 0xb356, 0x1, 0x1);
        gbc.writeMem(0x75e6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2433);
        EXPECT(gbc.pc(), 0x75e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D4
        gbc.setState(0x6585, 0x4a83, 0x6dc0, 0x8edc, 0x33fd, 0x73e1, 0x0, 0x1);
        gbc.writeMem(0x6585, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4a83);
        EXPECT(gbc.pc(), 0x6587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D5
        gbc.setState(0xf99, 0xae46, 0xe20, 0x5c75, 0x2c9f, 0x7033, 0x1, 0x0);
        gbc.writeMem(0xf99, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xae46);
        EXPECT(gbc.pc(), 0xf9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D6
        gbc.setState(0x9bea, 0x40df, 0x8040, 0x8d99, 0x38f4, 0xc4a9, 0x0, 0x0);
        gbc.writeMem(0x9bea, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x40df);
        EXPECT(gbc.pc(), 0x9bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bea), 0xcb);
        EXPECT(gbc.readMem(0x9beb), 0x37);
        // CB 37 00D7
        gbc.setState(0x7e6a, 0xe8c0, 0xf960, 0xcc06, 0x5c5c, 0x8a30, 0x0, 0x0);
        gbc.writeMem(0x7e6a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe8c0);
        EXPECT(gbc.pc(), 0x7e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00D8
        gbc.setState(0x8071, 0x6516, 0xf380, 0x787, 0x30c4, 0xec0f, 0x0, 0x0);
        gbc.writeMem(0x8071, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6516);
        EXPECT(gbc.pc(), 0x8073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8071), 0xcb);
        EXPECT(gbc.readMem(0x8072), 0x37);
        // CB 37 00D9
        gbc.setState(0xc67e, 0x1d83, 0xfd30, 0xf00c, 0xcdb1, 0xc9aa, 0x1, 0x0);
        gbc.writeMem(0xc67e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1d83);
        EXPECT(gbc.pc(), 0xc680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67e), 0xcb);
        EXPECT(gbc.readMem(0xc67f), 0x37);
        // CB 37 00DA
        gbc.setState(0x652b, 0xa5f4, 0xaa10, 0x192f, 0x4c19, 0x5328, 0x0, 0x0);
        gbc.writeMem(0x652b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa5f4);
        EXPECT(gbc.pc(), 0x652d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00DB
        gbc.setState(0xd357, 0x7d1e, 0xb8d0, 0x40b8, 0x7073, 0x1d2d, 0x0, 0x0);
        gbc.writeMem(0xd357, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7d1e);
        EXPECT(gbc.pc(), 0xd359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd357), 0xcb);
        EXPECT(gbc.readMem(0xd358), 0x37);
        // CB 37 00DC
        gbc.setState(0xee9c, 0xa625, 0xe920, 0x7d80, 0x60bf, 0x93d3, 0x1, 0x1);
        gbc.writeMem(0xee9c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa625);
        EXPECT(gbc.pc(), 0xee9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9c), 0xcb);
        EXPECT(gbc.readMem(0xee9d), 0x37);
        // CB 37 00DD
        gbc.setState(0x5815, 0x85e3, 0x8c60, 0x6413, 0xc559, 0x9651, 0x1, 0x0);
        gbc.writeMem(0x5815, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x85e3);
        EXPECT(gbc.pc(), 0x5817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00DE
        gbc.setState(0xeadb, 0x54a8, 0xb000, 0x4c3b, 0xbd01, 0xb873, 0x0, 0x0);
        gbc.writeMem(0xeadb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x54a8);
        EXPECT(gbc.pc(), 0xeadd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeadb), 0xcb);
        EXPECT(gbc.readMem(0xeadc), 0x37);
        // CB 37 00DF
        gbc.setState(0x75d3, 0x406b, 0x3410, 0xe454, 0xcddf, 0xf041, 0x1, 0x1);
        gbc.writeMem(0x75d3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x406b);
        EXPECT(gbc.pc(), 0x75d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E0
        gbc.setState(0x754f, 0x4e80, 0xf30, 0xd6e9, 0x2eb3, 0x257e, 0x1, 0x0);
        gbc.writeMem(0x754f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4e80);
        EXPECT(gbc.pc(), 0x7551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E1
        gbc.setState(0x3f9a, 0x760a, 0x6170, 0x55de, 0x811d, 0xcd7c, 0x0, 0x0);
        gbc.writeMem(0x3f9a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x760a);
        EXPECT(gbc.pc(), 0x3f9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E2
        gbc.setState(0x1da3, 0xe36c, 0xd0a0, 0x3c1a, 0x4541, 0x8445, 0x0, 0x0);
        gbc.writeMem(0x1da3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe36c);
        EXPECT(gbc.pc(), 0x1da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E3
        gbc.setState(0x1859, 0x1d5e, 0x9b60, 0x1b2a, 0xd5f9, 0x5f8b, 0x1, 0x0);
        gbc.writeMem(0x1859, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1d5e);
        EXPECT(gbc.pc(), 0x185b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E4
        gbc.setState(0xdfd1, 0xc360, 0xb370, 0x59aa, 0x7787, 0x3c61, 0x0, 0x0);
        gbc.writeMem(0xdfd1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xc360);
        EXPECT(gbc.pc(), 0xdfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd1), 0xcb);
        EXPECT(gbc.readMem(0xdfd2), 0x37);
        // CB 37 00E5
        gbc.setState(0x9ccb, 0x4dd0, 0x180, 0x4e96, 0x6d62, 0x297f, 0x1, 0x1);
        gbc.writeMem(0x9ccb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4dd0);
        EXPECT(gbc.pc(), 0x9ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccb), 0xcb);
        EXPECT(gbc.readMem(0x9ccc), 0x37);
        // CB 37 00E6
        gbc.setState(0x6848, 0x8fe4, 0x7100, 0x438e, 0x4103, 0x3f42, 0x0, 0x0);
        gbc.writeMem(0x6848, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8fe4);
        EXPECT(gbc.pc(), 0x684a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00E7
        gbc.setState(0x89fd, 0x5968, 0x9700, 0x2a6a, 0x69d3, 0x5de, 0x0, 0x1);
        gbc.writeMem(0x89fd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5968);
        EXPECT(gbc.pc(), 0x89ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89fd), 0xcb);
        EXPECT(gbc.readMem(0x89fe), 0x37);
        // CB 37 00E8
        gbc.setState(0xdc7f, 0x6e04, 0xc710, 0x569e, 0xf57, 0x5f44, 0x1, 0x0);
        gbc.writeMem(0xdc7f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6e04);
        EXPECT(gbc.pc(), 0xdc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7f), 0xcb);
        EXPECT(gbc.readMem(0xdc80), 0x37);
        // CB 37 00E9
        gbc.setState(0x14bc, 0x283a, 0x9ac0, 0x35b5, 0x5b0c, 0xddec, 0x0, 0x0);
        gbc.writeMem(0x14bc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x283a);
        EXPECT(gbc.pc(), 0x14be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00EA
        gbc.setState(0x66ec, 0x7fd, 0xcf90, 0x386c, 0x3c96, 0x1ad7, 0x0, 0x0);
        gbc.writeMem(0x66ec, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7fd);
        EXPECT(gbc.pc(), 0x66ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00EB
        gbc.setState(0x62e6, 0xfe68, 0x9b0, 0x7ae8, 0xae4e, 0x40f0, 0x1, 0x0);
        gbc.writeMem(0x62e6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xfe68);
        EXPECT(gbc.pc(), 0x62e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00ED
        gbc.setState(0xca24, 0x9bca, 0xb120, 0x2413, 0x2d3c, 0xff57, 0x1, 0x0);
        gbc.writeMem(0xca24, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9bca);
        EXPECT(gbc.pc(), 0xca26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca24), 0xcb);
        EXPECT(gbc.readMem(0xca25), 0x37);
        // CB 37 00EE
        gbc.setState(0xdc2e, 0x6fde, 0xaac0, 0x551a, 0x82e1, 0x3bd6, 0x1, 0x0);
        gbc.writeMem(0xdc2e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6fde);
        EXPECT(gbc.pc(), 0xdc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc2e), 0xcb);
        EXPECT(gbc.readMem(0xdc2f), 0x37);
        // CB 37 00EF
        gbc.setState(0x2cdd, 0xb37d, 0xc7c0, 0xd36e, 0x977c, 0x2f25, 0x0, 0x0);
        gbc.writeMem(0x2cdd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb37d);
        EXPECT(gbc.pc(), 0x2cdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F0
        gbc.setState(0x9157, 0x6dba, 0x6bd0, 0x79a6, 0xd1d3, 0x6a04, 0x1, 0x1);
        gbc.writeMem(0x9157, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6dba);
        EXPECT(gbc.pc(), 0x9159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9157), 0xcb);
        EXPECT(gbc.readMem(0x9158), 0x37);
        // CB 37 00F1
        gbc.setState(0x9a4e, 0xeb9c, 0x8970, 0x692f, 0xe9c7, 0xbef8, 0x0, 0x0);
        gbc.writeMem(0x9a4e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xeb9c);
        EXPECT(gbc.pc(), 0x9a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4e), 0xcb);
        EXPECT(gbc.readMem(0x9a4f), 0x37);
        // CB 37 00F2
        gbc.setState(0x485c, 0xba66, 0xd180, 0xc9ae, 0xdde7, 0x23a0, 0x0, 0x0);
        gbc.writeMem(0x485c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xba66);
        EXPECT(gbc.pc(), 0x485e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F3
        gbc.setState(0xea41, 0xecc1, 0x3e90, 0x18ff, 0x37db, 0x3f37, 0x1, 0x1);
        gbc.writeMem(0xea41, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xecc1);
        EXPECT(gbc.pc(), 0xea43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea41), 0xcb);
        EXPECT(gbc.readMem(0xea42), 0x37);
        // CB 37 00F4
        gbc.setState(0x6a1b, 0xe4d0, 0x5280, 0x1d3a, 0x5736, 0x4616, 0x1, 0x1);
        gbc.writeMem(0x6a1b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe4d0);
        EXPECT(gbc.pc(), 0x6a1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F5
        gbc.setState(0xa7b, 0xe570, 0x9600, 0x25e8, 0x4dee, 0x66c6, 0x1, 0x0);
        gbc.writeMem(0xa7b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0xa7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F6
        gbc.setState(0xcfba, 0xba, 0x9100, 0xe539, 0x6c00, 0xee8, 0x1, 0x0);
        gbc.writeMem(0xcfba, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xba);
        EXPECT(gbc.pc(), 0xcfbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfba), 0xcb);
        EXPECT(gbc.readMem(0xcfbb), 0x37);
        // CB 37 00F7
        gbc.setState(0x620, 0x78ea, 0xd9d0, 0xacb1, 0x21be, 0x2ba9, 0x1, 0x0);
        gbc.writeMem(0x620, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x78ea);
        EXPECT(gbc.pc(), 0x622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F8
        gbc.setState(0x2480, 0xabbd, 0x6300, 0xac33, 0xfbf9, 0x975d, 0x0, 0x1);
        gbc.writeMem(0x2480, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xabbd);
        EXPECT(gbc.pc(), 0x2482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00F9
        gbc.setState(0xe7b2, 0xb478, 0x2940, 0xb31a, 0x9a5d, 0x8e06, 0x1, 0x1);
        gbc.writeMem(0xe7b2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb478);
        EXPECT(gbc.pc(), 0xe7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b2), 0xcb);
        EXPECT(gbc.readMem(0xe7b3), 0x37);
        // CB 37 00FA
        gbc.setState(0xe101, 0x1bf3, 0x6380, 0xae3d, 0xff15, 0x7cff, 0x0, 0x0);
        gbc.writeMem(0xe101, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1bf3);
        EXPECT(gbc.pc(), 0xe103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe101), 0xcb);
        EXPECT(gbc.readMem(0xe102), 0x37);
        // CB 37 00FB
        gbc.setState(0xbc54, 0x95fb, 0x1f90, 0x5ae2, 0xdda1, 0x5356, 0x0, 0x1);
        gbc.writeMem(0xbc54, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x95fb);
        EXPECT(gbc.pc(), 0xbc56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc54), 0xcb);
        EXPECT(gbc.readMem(0xbc55), 0x37);
        // CB 37 00FC
        gbc.setState(0xe047, 0x8a97, 0xa7f0, 0xcd, 0xbb5c, 0xc0b9, 0x1, 0x1);
        gbc.writeMem(0xe047, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8a97);
        EXPECT(gbc.pc(), 0xe049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe047), 0xcb);
        EXPECT(gbc.readMem(0xe048), 0x37);
        // CB 37 00FD
        gbc.setState(0x4559, 0x173d, 0xd340, 0xa19e, 0x8f54, 0xacdc, 0x1, 0x0);
        gbc.writeMem(0x4559, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x173d);
        EXPECT(gbc.pc(), 0x455b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 00FE
        gbc.setState(0xaa05, 0xc4ec, 0xa5a0, 0x1ea1, 0xeaf6, 0x36df, 0x1, 0x1);
        gbc.writeMem(0xaa05, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc4ec);
        EXPECT(gbc.pc(), 0xaa07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa05), 0xcb);
        EXPECT(gbc.readMem(0xaa06), 0x37);
        // CB 37 00FF
        gbc.setState(0x998d, 0xd5e6, 0x9320, 0x13e8, 0x5b16, 0xaaf0, 0x0, 0x1);
        gbc.writeMem(0x998d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd5e6);
        EXPECT(gbc.pc(), 0x998f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x998d), 0xcb);
        EXPECT(gbc.readMem(0x998e), 0x37);
        // CB 37 0100
        gbc.setState(0x7fb5, 0xa692, 0xb40, 0x8e6f, 0xb6fe, 0xe71a, 0x1, 0x1);
        gbc.writeMem(0x7fb5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa692);
        EXPECT(gbc.pc(), 0x7fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0101
        gbc.setState(0xcd18, 0xc24b, 0x40f0, 0x3a31, 0x9f48, 0x6011, 0x0, 0x0);
        gbc.writeMem(0xcd18, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc24b);
        EXPECT(gbc.pc(), 0xcd1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd18), 0xcb);
        EXPECT(gbc.readMem(0xcd19), 0x37);
        // CB 37 0102
        gbc.setState(0x7032, 0xb5c8, 0x1d60, 0xf5cc, 0x8e5a, 0x4c53, 0x1, 0x1);
        gbc.writeMem(0x7032, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb5c8);
        EXPECT(gbc.pc(), 0x7034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0103
        gbc.setState(0x2ddf, 0x4f77, 0x6940, 0x2bf9, 0x6b9d, 0x68bb, 0x0, 0x1);
        gbc.writeMem(0x2ddf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4f77);
        EXPECT(gbc.pc(), 0x2de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0104
        gbc.setState(0x3330, 0xa39a, 0x9af0, 0x86da, 0xb118, 0x2301, 0x0, 0x0);
        gbc.writeMem(0x3330, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa39a);
        EXPECT(gbc.pc(), 0x3332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0105
        gbc.setState(0x4179, 0x544a, 0xd9d0, 0xf029, 0x1b07, 0x6da5, 0x0, 0x0);
        gbc.writeMem(0x4179, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x544a);
        EXPECT(gbc.pc(), 0x417b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0106
        gbc.setState(0x1f7c, 0xf279, 0x7d80, 0x312f, 0x7c14, 0x663a, 0x0, 0x1);
        gbc.writeMem(0x1f7c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf279);
        EXPECT(gbc.pc(), 0x1f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0107
        gbc.setState(0xe94, 0xe1a5, 0x6090, 0x35c7, 0x1688, 0x51e6, 0x0, 0x1);
        gbc.writeMem(0xe94, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe1a5);
        EXPECT(gbc.pc(), 0xe96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0108
        gbc.setState(0x66f8, 0x713, 0xb270, 0xb112, 0x593e, 0xb84e, 0x1, 0x0);
        gbc.writeMem(0x66f8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x713);
        EXPECT(gbc.pc(), 0x66fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0109
        gbc.setState(0xbfe5, 0x56fd, 0x6c60, 0x6a21, 0xc77b, 0x8c7c, 0x1, 0x0);
        gbc.writeMem(0xbfe5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x56fd);
        EXPECT(gbc.pc(), 0xbfe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe5), 0xcb);
        EXPECT(gbc.readMem(0xbfe6), 0x37);
        // CB 37 010A
        gbc.setState(0x7416, 0x22c5, 0x54e0, 0xa1d9, 0x1bcd, 0x287b, 0x1, 0x1);
        gbc.writeMem(0x7416, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x22c5);
        EXPECT(gbc.pc(), 0x7418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 010B
        gbc.setState(0x4b27, 0x1048, 0x2b40, 0xed42, 0x4422, 0x3951, 0x0, 0x0);
        gbc.writeMem(0x4b27, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1048);
        EXPECT(gbc.pc(), 0x4b29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 010C
        gbc.setState(0x6647, 0x9d6f, 0x9ca0, 0xb764, 0xc51, 0x8102, 0x1, 0x0);
        gbc.writeMem(0x6647, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9d6f);
        EXPECT(gbc.pc(), 0x6649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 010D
        gbc.setState(0xb816, 0x9569, 0xd030, 0xeb3e, 0x90ed, 0x7dbe, 0x0, 0x0);
        gbc.writeMem(0xb816, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9569);
        EXPECT(gbc.pc(), 0xb818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb816), 0xcb);
        EXPECT(gbc.readMem(0xb817), 0x37);
        // CB 37 010E
        gbc.setState(0x92d6, 0x539b, 0x1fc0, 0x5bd0, 0xce47, 0xc6d6, 0x0, 0x1);
        gbc.writeMem(0x92d6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x539b);
        EXPECT(gbc.pc(), 0x92d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d6), 0xcb);
        EXPECT(gbc.readMem(0x92d7), 0x37);
        // CB 37 010F
        gbc.setState(0xd9d1, 0x24f1, 0xa3c0, 0xc73d, 0x9587, 0x436, 0x1, 0x1);
        gbc.writeMem(0xd9d1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x24f1);
        EXPECT(gbc.pc(), 0xd9d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d1), 0xcb);
        EXPECT(gbc.readMem(0xd9d2), 0x37);
        // CB 37 0110
        gbc.setState(0xdc2c, 0xf6b1, 0xeba0, 0x366a, 0xde33, 0x7d63, 0x0, 0x0);
        gbc.writeMem(0xdc2c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0xdc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc2c), 0xcb);
        EXPECT(gbc.readMem(0xdc2d), 0x37);
        // CB 37 0111
        gbc.setState(0xff2, 0x61e7, 0x3880, 0x129d, 0x6d35, 0x5e33, 0x0, 0x0);
        gbc.writeMem(0xff2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x61e7);
        EXPECT(gbc.pc(), 0xff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0112
        gbc.setState(0xee9c, 0xd86b, 0xb990, 0x79c6, 0xbd, 0x84b9, 0x1, 0x1);
        gbc.writeMem(0xee9c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd86b);
        EXPECT(gbc.pc(), 0xee9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9c), 0xcb);
        EXPECT(gbc.readMem(0xee9d), 0x37);
        // CB 37 0113
        gbc.setState(0x4d01, 0x1bf1, 0xa9b0, 0x8dee, 0x6593, 0x5ce5, 0x1, 0x0);
        gbc.writeMem(0x4d01, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1bf1);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0115
        gbc.setState(0x8913, 0x7f6a, 0x75a0, 0xef5b, 0xf467, 0x8e59, 0x0, 0x0);
        gbc.writeMem(0x8913, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7f6a);
        EXPECT(gbc.pc(), 0x8915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8913), 0xcb);
        EXPECT(gbc.readMem(0x8914), 0x37);
        // CB 37 0117
        gbc.setState(0xc21f, 0xdd04, 0x3a70, 0x78e, 0xb91d, 0x5b00, 0x1, 0x1);
        gbc.writeMem(0xc21f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xdd04);
        EXPECT(gbc.pc(), 0xc221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc21f), 0xcb);
        EXPECT(gbc.readMem(0xc220), 0x37);
        // CB 37 0118
        gbc.setState(0xea63, 0x74c7, 0x9bc0, 0xb232, 0x8aa4, 0x2e1e, 0x1, 0x1);
        gbc.writeMem(0xea63, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x74c7);
        EXPECT(gbc.pc(), 0xea65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea63), 0xcb);
        EXPECT(gbc.readMem(0xea64), 0x37);
        // CB 37 0119
        gbc.setState(0xb11a, 0xe73, 0xdf70, 0x1a2e, 0x6f20, 0x9a42, 0x0, 0x1);
        gbc.writeMem(0xb11a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe73);
        EXPECT(gbc.pc(), 0xb11c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11a), 0xcb);
        EXPECT(gbc.readMem(0xb11b), 0x37);
        // CB 37 011A
        gbc.setState(0x4b3d, 0xb2ee, 0x2f30, 0xc316, 0x96af, 0xbd4a, 0x1, 0x1);
        gbc.writeMem(0x4b3d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb2ee);
        EXPECT(gbc.pc(), 0x4b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 011B
        gbc.setState(0x6855, 0xb081, 0x7110, 0xa87a, 0x8eeb, 0xd446, 0x1, 0x0);
        gbc.writeMem(0x6855, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb081);
        EXPECT(gbc.pc(), 0x6857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 011C
        gbc.setState(0xc685, 0xc1ac, 0xdfa0, 0x8c27, 0x60f9, 0x7bb7, 0x0, 0x0);
        gbc.writeMem(0xc685, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc1ac);
        EXPECT(gbc.pc(), 0xc687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc685), 0xcb);
        EXPECT(gbc.readMem(0xc686), 0x37);
        // CB 37 011D
        gbc.setState(0x9e55, 0x68e3, 0x5b00, 0x53f6, 0xe7d5, 0x988c, 0x1, 0x0);
        gbc.writeMem(0x9e55, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x68e3);
        EXPECT(gbc.pc(), 0x9e57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e55), 0xcb);
        EXPECT(gbc.readMem(0x9e56), 0x37);
        // CB 37 011E
        gbc.setState(0xb8ff, 0xa1a2, 0x64d0, 0x92f9, 0x5c6f, 0x4a6e, 0x0, 0x0);
        gbc.writeMem(0xb8ff, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa1a2);
        EXPECT(gbc.pc(), 0xb901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ff), 0xcb);
        EXPECT(gbc.readMem(0xb900), 0x37);
        // CB 37 011F
        gbc.setState(0xd6bb, 0x93ee, 0xf010, 0x2c47, 0xdc19, 0x945e, 0x0, 0x0);
        gbc.writeMem(0xd6bb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x93ee);
        EXPECT(gbc.pc(), 0xd6bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bb), 0xcb);
        EXPECT(gbc.readMem(0xd6bc), 0x37);
        // CB 37 0120
        gbc.setState(0x71c, 0xfdc, 0x75f0, 0xc83, 0x75a7, 0x61f2, 0x1, 0x1);
        gbc.writeMem(0x71c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xfdc);
        EXPECT(gbc.pc(), 0x71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0121
        gbc.setState(0x16fe, 0x714a, 0x3a0, 0xff5a, 0x5462, 0xc118, 0x1, 0x1);
        gbc.writeMem(0x16fe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x714a);
        EXPECT(gbc.pc(), 0x1700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0122
        gbc.setState(0xebb6, 0x3815, 0xeda0, 0x7e34, 0x30dd, 0xf212, 0x1, 0x1);
        gbc.writeMem(0xebb6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3815);
        EXPECT(gbc.pc(), 0xebb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb6), 0xcb);
        EXPECT(gbc.readMem(0xebb7), 0x37);
        // CB 37 0123
        gbc.setState(0x4a8f, 0x2a1c, 0x6ea0, 0x6338, 0x26c, 0xd42c, 0x1, 0x0);
        gbc.writeMem(0x4a8f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2a1c);
        EXPECT(gbc.pc(), 0x4a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0124
        gbc.setState(0xebb3, 0x5a83, 0xbb10, 0xaa80, 0x56a, 0xf10f, 0x1, 0x1);
        gbc.writeMem(0xebb3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5a83);
        EXPECT(gbc.pc(), 0xebb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb3), 0xcb);
        EXPECT(gbc.readMem(0xebb4), 0x37);
        // CB 37 0125
        gbc.setState(0xd6af, 0xbb02, 0xee20, 0x42f6, 0x7ff2, 0x8371, 0x0, 0x1);
        gbc.writeMem(0xd6af, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xbb02);
        EXPECT(gbc.pc(), 0xd6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6af), 0xcb);
        EXPECT(gbc.readMem(0xd6b0), 0x37);
        // CB 37 0126
        gbc.setState(0x238e, 0x51b3, 0x48b0, 0x22e7, 0x395d, 0x3a2b, 0x0, 0x1);
        gbc.writeMem(0x238e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x51b3);
        EXPECT(gbc.pc(), 0x2390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0127
        gbc.setState(0x35b, 0x96da, 0x6800, 0x900a, 0x62e2, 0xb602, 0x0, 0x1);
        gbc.writeMem(0x35b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x96da);
        EXPECT(gbc.pc(), 0x35d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0128
        gbc.setState(0x4c14, 0x66cd, 0x42c0, 0xc9c1, 0x8bb6, 0xd171, 0x0, 0x1);
        gbc.writeMem(0x4c14, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x66cd);
        EXPECT(gbc.pc(), 0x4c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0129
        gbc.setState(0xcd3b, 0x3f5f, 0x6d10, 0xad15, 0xc68a, 0x7e1, 0x1, 0x1);
        gbc.writeMem(0xcd3b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3f5f);
        EXPECT(gbc.pc(), 0xcd3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd3b), 0xcb);
        EXPECT(gbc.readMem(0xcd3c), 0x37);
        // CB 37 012B
        gbc.setState(0xa190, 0xd7e2, 0x15a0, 0xa163, 0xaaf7, 0x9f0f, 0x1, 0x0);
        gbc.writeMem(0xa190, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd7e2);
        EXPECT(gbc.pc(), 0xa192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa190), 0xcb);
        EXPECT(gbc.readMem(0xa191), 0x37);
        // CB 37 012C
        gbc.setState(0xd502, 0x71b7, 0x9be0, 0x9347, 0xcd33, 0xd2a2, 0x1, 0x0);
        gbc.writeMem(0xd502, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x71b7);
        EXPECT(gbc.pc(), 0xd504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd502), 0xcb);
        EXPECT(gbc.readMem(0xd503), 0x37);
        // CB 37 012D
        gbc.setState(0xbfee, 0x8b61, 0x58e0, 0x8f39, 0x6a12, 0x9081, 0x1, 0x1);
        gbc.writeMem(0xbfee, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8b61);
        EXPECT(gbc.pc(), 0xbff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfee), 0xcb);
        EXPECT(gbc.readMem(0xbfef), 0x37);
        // CB 37 012E
        gbc.setState(0x6b16, 0xbefc, 0x3cb0, 0x3e64, 0x29f, 0x9f45, 0x1, 0x0);
        gbc.writeMem(0x6b16, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbefc);
        EXPECT(gbc.pc(), 0x6b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 012F
        gbc.setState(0xe272, 0xc0f6, 0x9490, 0x458b, 0x8c5, 0x3e4b, 0x0, 0x0);
        gbc.writeMem(0xe272, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc0f6);
        EXPECT(gbc.pc(), 0xe274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe272), 0xcb);
        EXPECT(gbc.readMem(0xe273), 0x37);
        // CB 37 0130
        gbc.setState(0x6689, 0xcb6a, 0x4ed0, 0xc4ed, 0x1fb6, 0x475c, 0x0, 0x1);
        gbc.writeMem(0x6689, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcb6a);
        EXPECT(gbc.pc(), 0x668b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0131
        gbc.setState(0xb691, 0xc06, 0xa00, 0xddde, 0xf4fa, 0x2065, 0x1, 0x1);
        gbc.writeMem(0xb691, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc06);
        EXPECT(gbc.pc(), 0xb693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb691), 0xcb);
        EXPECT(gbc.readMem(0xb692), 0x37);
        // CB 37 0132
        gbc.setState(0x222d, 0x49f6, 0x2140, 0x6216, 0x583d, 0x4a5d, 0x1, 0x0);
        gbc.writeMem(0x222d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x49f6);
        EXPECT(gbc.pc(), 0x222f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0133
        gbc.setState(0x251f, 0x718f, 0xce60, 0x2a3b, 0x8773, 0x3f4a, 0x0, 0x1);
        gbc.writeMem(0x251f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x718f);
        EXPECT(gbc.pc(), 0x2521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0134
        gbc.setState(0x35b8, 0x4883, 0xb660, 0x70e0, 0xa610, 0x14af, 0x0, 0x1);
        gbc.writeMem(0x35b8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4883);
        EXPECT(gbc.pc(), 0x35ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0135
        gbc.setState(0xe427, 0x7543, 0x2bb0, 0x492e, 0x93e5, 0x20db, 0x1, 0x0);
        gbc.writeMem(0xe427, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7543);
        EXPECT(gbc.pc(), 0xe429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe427), 0xcb);
        EXPECT(gbc.readMem(0xe428), 0x37);
        // CB 37 0136
        gbc.setState(0x2e94, 0x491c, 0xbde0, 0x6fc8, 0x1d59, 0x35c4, 0x0, 0x1);
        gbc.writeMem(0x2e94, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x491c);
        EXPECT(gbc.pc(), 0x2e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0137
        gbc.setState(0xaac8, 0x6eb0, 0x9120, 0x20ad, 0x9680, 0x7ba8, 0x1, 0x0);
        gbc.writeMem(0xaac8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6eb0);
        EXPECT(gbc.pc(), 0xaaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac8), 0xcb);
        EXPECT(gbc.readMem(0xaac9), 0x37);
        // CB 37 0138
        gbc.setState(0x5024, 0x6d4d, 0x8300, 0x5809, 0x23a1, 0xe4aa, 0x0, 0x0);
        gbc.writeMem(0x5024, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6d4d);
        EXPECT(gbc.pc(), 0x5026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0139
        gbc.setState(0x68b4, 0xfe6b, 0x6670, 0x4166, 0x3b67, 0xe504, 0x1, 0x0);
        gbc.writeMem(0x68b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfe6b);
        EXPECT(gbc.pc(), 0x68b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 013A
        gbc.setState(0x5833, 0x8f86, 0x67d0, 0x3ee3, 0xe997, 0x3786, 0x1, 0x1);
        gbc.writeMem(0x5833, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8f86);
        EXPECT(gbc.pc(), 0x5835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 013B
        gbc.setState(0xc947, 0x91cd, 0xd00, 0x8198, 0xb28a, 0xc00a, 0x1, 0x1);
        gbc.writeMem(0xc947, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x91cd);
        EXPECT(gbc.pc(), 0xc949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc947), 0xcb);
        EXPECT(gbc.readMem(0xc948), 0x37);
        // CB 37 013C
        gbc.setState(0xe9c1, 0x17f7, 0x7db0, 0x67e, 0x7e41, 0x7a45, 0x0, 0x0);
        gbc.writeMem(0xe9c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x17f7);
        EXPECT(gbc.pc(), 0xe9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9c1), 0xcb);
        EXPECT(gbc.readMem(0xe9c2), 0x37);
        // CB 37 013D
        gbc.setState(0x2683, 0x2e15, 0xaf50, 0xb525, 0x1953, 0x8d33, 0x0, 0x1);
        gbc.writeMem(0x2683, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2e15);
        EXPECT(gbc.pc(), 0x2685);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 013E
        gbc.setState(0x198e, 0xacd4, 0x1730, 0xc896, 0x69c5, 0x4744, 0x1, 0x1);
        gbc.writeMem(0x198e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xacd4);
        EXPECT(gbc.pc(), 0x1990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 013F
        gbc.setState(0x8851, 0x31b0, 0x9240, 0xb2bf, 0x76cc, 0x67fd, 0x1, 0x0);
        gbc.writeMem(0x8851, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x31b0);
        EXPECT(gbc.pc(), 0x8853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8851), 0xcb);
        EXPECT(gbc.readMem(0x8852), 0x37);
        // CB 37 0140
        gbc.setState(0xc2c9, 0xd15e, 0x9280, 0xe4, 0x41cf, 0xad5b, 0x0, 0x0);
        gbc.writeMem(0xc2c9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd15e);
        EXPECT(gbc.pc(), 0xc2cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c9), 0xcb);
        EXPECT(gbc.readMem(0xc2ca), 0x37);
        // CB 37 0141
        gbc.setState(0x911, 0x716, 0x2710, 0xc720, 0x836f, 0x1a48, 0x0, 0x0);
        gbc.writeMem(0x911, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x716);
        EXPECT(gbc.pc(), 0x913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0142
        gbc.setState(0x70a3, 0x6e65, 0x5630, 0x646e, 0x1749, 0xd465, 0x0, 0x0);
        gbc.writeMem(0x70a3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6e65);
        EXPECT(gbc.pc(), 0x70a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0143
        gbc.setState(0xfe, 0xf060, 0xd460, 0xe356, 0xba04, 0x8ffc, 0x1, 0x0);
        gbc.writeMem(0xfe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf060);
        EXPECT(gbc.pc(), 0x100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0144
        gbc.setState(0x8888, 0x3ef, 0xa80, 0xbf2b, 0x5d14, 0x44d1, 0x1, 0x1);
        gbc.writeMem(0x8888, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3ef);
        EXPECT(gbc.pc(), 0x888a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8888), 0xcb);
        EXPECT(gbc.readMem(0x8889), 0x37);
        // CB 37 0145
        gbc.setState(0xd8fc, 0x3d9d, 0xe700, 0x3d67, 0xfac, 0xad54, 0x1, 0x1);
        gbc.writeMem(0xd8fc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3d9d);
        EXPECT(gbc.pc(), 0xd8fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8fc), 0xcb);
        EXPECT(gbc.readMem(0xd8fd), 0x37);
        // CB 37 0146
        gbc.setState(0xbe91, 0x12ea, 0x58c0, 0x7d49, 0x741c, 0x6321, 0x0, 0x0);
        gbc.writeMem(0xbe91, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x12ea);
        EXPECT(gbc.pc(), 0xbe93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe91), 0xcb);
        EXPECT(gbc.readMem(0xbe92), 0x37);
        // CB 37 0147
        gbc.setState(0x75c, 0x8eb7, 0xdf20, 0x99ee, 0xd1e1, 0x67d, 0x0, 0x0);
        gbc.writeMem(0x75c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8eb7);
        EXPECT(gbc.pc(), 0x75e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0148
        gbc.setState(0xe7f6, 0x5565, 0xa70, 0x7b7, 0xeb7, 0xdaa3, 0x0, 0x1);
        gbc.writeMem(0xe7f6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5565);
        EXPECT(gbc.pc(), 0xe7f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f6), 0xcb);
        EXPECT(gbc.readMem(0xe7f7), 0x37);
        // CB 37 0149
        gbc.setState(0x8869, 0x445e, 0x3460, 0x29c7, 0x9051, 0xaba9, 0x1, 0x0);
        gbc.writeMem(0x8869, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x445e);
        EXPECT(gbc.pc(), 0x886b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xcb);
        EXPECT(gbc.readMem(0x886a), 0x37);
        // CB 37 014A
        gbc.setState(0xd8ff, 0xe7c7, 0x8c0, 0x5467, 0x679c, 0x8c30, 0x0, 0x1);
        gbc.writeMem(0xd8ff, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe7c7);
        EXPECT(gbc.pc(), 0xd901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ff), 0xcb);
        EXPECT(gbc.readMem(0xd900), 0x37);
        // CB 37 014B
        gbc.setState(0xad55, 0x997b, 0x3ad0, 0x124f, 0xe59d, 0x8603, 0x1, 0x1);
        gbc.writeMem(0xad55, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x997b);
        EXPECT(gbc.pc(), 0xad57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad55), 0xcb);
        EXPECT(gbc.readMem(0xad56), 0x37);
        // CB 37 014C
        gbc.setState(0x1e2b, 0x3644, 0xe9a0, 0x2eca, 0x3324, 0xdb82, 0x0, 0x1);
        gbc.writeMem(0x1e2b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3644);
        EXPECT(gbc.pc(), 0x1e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 014D
        gbc.setState(0x3228, 0xa84e, 0x3360, 0x17, 0x1111, 0xad3e, 0x1, 0x1);
        gbc.writeMem(0x3228, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa84e);
        EXPECT(gbc.pc(), 0x322a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 014E
        gbc.setState(0x8d7e, 0xe19b, 0x6ed0, 0xbe, 0xb6be, 0xce76, 0x0, 0x0);
        gbc.writeMem(0x8d7e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe19b);
        EXPECT(gbc.pc(), 0x8d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7e), 0xcb);
        EXPECT(gbc.readMem(0x8d7f), 0x37);
        // CB 37 014F
        gbc.setState(0x1572, 0x20cf, 0x57e0, 0x66d4, 0x4e43, 0x21e4, 0x1, 0x1);
        gbc.writeMem(0x1572, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x20cf);
        EXPECT(gbc.pc(), 0x1574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0150
        gbc.setState(0x5ed5, 0x6008, 0xca40, 0xc305, 0x7617, 0x4845, 0x0, 0x1);
        gbc.writeMem(0x5ed5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6008);
        EXPECT(gbc.pc(), 0x5ed7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0151
        gbc.setState(0xc968, 0x66ac, 0xe700, 0x1fc0, 0xd923, 0x1104, 0x1, 0x1);
        gbc.writeMem(0xc968, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x66ac);
        EXPECT(gbc.pc(), 0xc96a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc968), 0xcb);
        EXPECT(gbc.readMem(0xc969), 0x37);
        // CB 37 0152
        gbc.setState(0xefbb, 0xf14d, 0x55b0, 0x6596, 0xffd0, 0xaeed, 0x0, 0x1);
        gbc.writeMem(0xefbb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xf14d);
        EXPECT(gbc.pc(), 0xefbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefbb), 0xcb);
        EXPECT(gbc.readMem(0xefbc), 0x37);
        // CB 37 0153
        gbc.setState(0xd19, 0x85ba, 0xa8b0, 0x1e2a, 0x146d, 0x2995, 0x0, 0x0);
        gbc.writeMem(0xd19, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x85ba);
        EXPECT(gbc.pc(), 0xd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0154
        gbc.setState(0x86fa, 0xc9b5, 0x2400, 0x7ec5, 0xc088, 0xaa24, 0x1, 0x0);
        gbc.writeMem(0x86fa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc9b5);
        EXPECT(gbc.pc(), 0x86fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fa), 0xcb);
        EXPECT(gbc.readMem(0x86fb), 0x37);
        // CB 37 0155
        gbc.setState(0x2be0, 0x22bd, 0x5770, 0xfceb, 0x6e5e, 0x1eee, 0x0, 0x1);
        gbc.writeMem(0x2be0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x22bd);
        EXPECT(gbc.pc(), 0x2be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0156
        gbc.setState(0xd209, 0xf6b1, 0xc470, 0xc558, 0xa2e1, 0x2aa6, 0x0, 0x1);
        gbc.writeMem(0xd209, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0xd20b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd209), 0xcb);
        EXPECT(gbc.readMem(0xd20a), 0x37);
        // CB 37 0157
        gbc.setState(0x32cd, 0x74b6, 0xfd90, 0xfc2c, 0x5ed8, 0xcf53, 0x1, 0x0);
        gbc.writeMem(0x32cd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x74b6);
        EXPECT(gbc.pc(), 0x32cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0158
        gbc.setState(0x8ca9, 0xa5a, 0xcb40, 0xb372, 0x2a0d, 0x9e5e, 0x1, 0x0);
        gbc.writeMem(0x8ca9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa5a);
        EXPECT(gbc.pc(), 0x8cab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca9), 0xcb);
        EXPECT(gbc.readMem(0x8caa), 0x37);
        // CB 37 0159
        gbc.setState(0x2823, 0xff59, 0xa2c0, 0x3024, 0xe2b4, 0x5a7a, 0x0, 0x0);
        gbc.writeMem(0x2823, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xff59);
        EXPECT(gbc.pc(), 0x2825);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 015A
        gbc.setState(0x2e50, 0x357c, 0x9f40, 0x1a3b, 0xb4d7, 0x7bf6, 0x0, 0x0);
        gbc.writeMem(0x2e50, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x357c);
        EXPECT(gbc.pc(), 0x2e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 015C
        gbc.setState(0x3448, 0x8eb, 0x6990, 0x738f, 0x33b1, 0x35cc, 0x0, 0x0);
        gbc.writeMem(0x3448, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8eb);
        EXPECT(gbc.pc(), 0x344a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 015D
        gbc.setState(0xa178, 0x6801, 0xeb60, 0x44f2, 0x588c, 0xae77, 0x0, 0x1);
        gbc.writeMem(0xa178, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6801);
        EXPECT(gbc.pc(), 0xa17a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa178), 0xcb);
        EXPECT(gbc.readMem(0xa179), 0x37);
        // CB 37 015E
        gbc.setState(0xed5c, 0x4c43, 0x1f20, 0x4e43, 0x2a29, 0x5b09, 0x0, 0x1);
        gbc.writeMem(0xed5c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4c43);
        EXPECT(gbc.pc(), 0xed5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5c), 0xcb);
        EXPECT(gbc.readMem(0xed5d), 0x37);
        // CB 37 015F
        gbc.setState(0x39db, 0xfe5f, 0xc060, 0x1828, 0x1a09, 0xb73b, 0x0, 0x0);
        gbc.writeMem(0x39db, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfe5f);
        EXPECT(gbc.pc(), 0x39dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0160
        gbc.setState(0x3aa4, 0x2932, 0x2510, 0x2689, 0x7569, 0x5d8a, 0x0, 0x0);
        gbc.writeMem(0x3aa4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2932);
        EXPECT(gbc.pc(), 0x3aa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0161
        gbc.setState(0x4327, 0x5279, 0xb4c0, 0x1ee9, 0x4058, 0xe18a, 0x0, 0x0);
        gbc.writeMem(0x4327, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5279);
        EXPECT(gbc.pc(), 0x4329);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0162
        gbc.setState(0x61c0, 0xa7ae, 0xbeb0, 0x3233, 0xae83, 0x4702, 0x1, 0x0);
        gbc.writeMem(0x61c0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa7ae);
        EXPECT(gbc.pc(), 0x61c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0163
        gbc.setState(0xc81e, 0x3ba8, 0xe470, 0x2679, 0x5e49, 0x353d, 0x0, 0x0);
        gbc.writeMem(0xc81e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3ba8);
        EXPECT(gbc.pc(), 0xc820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc81e), 0xcb);
        EXPECT(gbc.readMem(0xc81f), 0x37);
        // CB 37 0164
        gbc.setState(0x515a, 0x5176, 0xc1f0, 0xe2, 0xa091, 0xa2e6, 0x0, 0x0);
        gbc.writeMem(0x515a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5176);
        EXPECT(gbc.pc(), 0x515c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0165
        gbc.setState(0xab77, 0xcfd2, 0xb410, 0x8121, 0xeb9, 0x1627, 0x0, 0x1);
        gbc.writeMem(0xab77, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xcfd2);
        EXPECT(gbc.pc(), 0xab79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab77), 0xcb);
        EXPECT(gbc.readMem(0xab78), 0x37);
        // CB 37 0166
        gbc.setState(0x6fef, 0x3804, 0x6490, 0x8066, 0x5454, 0xad98, 0x1, 0x1);
        gbc.writeMem(0x6fef, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3804);
        EXPECT(gbc.pc(), 0x6ff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0167
        gbc.setState(0x14f6, 0xfce4, 0x3a30, 0xeba2, 0x4f1a, 0x8835, 0x1, 0x0);
        gbc.writeMem(0x14f6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0x14f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0168
        gbc.setState(0x384e, 0xc485, 0xe270, 0x9b3c, 0x3f84, 0xc7b3, 0x1, 0x0);
        gbc.writeMem(0x384e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc485);
        EXPECT(gbc.pc(), 0x3850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0169
        gbc.setState(0x598c, 0x50cb, 0x4900, 0xf912, 0x5979, 0xd9ca, 0x0, 0x1);
        gbc.writeMem(0x598c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x50cb);
        EXPECT(gbc.pc(), 0x598e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 016A
        gbc.setState(0x8481, 0xdbbd, 0x8400, 0x1769, 0xb64e, 0x5df2, 0x1, 0x1);
        gbc.writeMem(0x8481, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdbbd);
        EXPECT(gbc.pc(), 0x8483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8481), 0xcb);
        EXPECT(gbc.readMem(0x8482), 0x37);
        // CB 37 016B
        gbc.setState(0x3a09, 0x7db0, 0xff0, 0x7ee4, 0x2e, 0xcb55, 0x1, 0x0);
        gbc.writeMem(0x3a09, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7db0);
        EXPECT(gbc.pc(), 0x3a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 016C
        gbc.setState(0x804, 0x1407, 0x9d60, 0x32bc, 0x5fa6, 0x1670, 0x0, 0x0);
        gbc.writeMem(0x804, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1407);
        EXPECT(gbc.pc(), 0x806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 016D
        gbc.setState(0x5ba6, 0xaea8, 0x8f30, 0x337e, 0xd423, 0x3ff7, 0x0, 0x0);
        gbc.writeMem(0x5ba6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaea8);
        EXPECT(gbc.pc(), 0x5ba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 016E
        gbc.setState(0x2ea1, 0xdc68, 0x6d00, 0x9b17, 0x149f, 0xb3f3, 0x1, 0x1);
        gbc.writeMem(0x2ea1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdc68);
        EXPECT(gbc.pc(), 0x2ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 016F
        gbc.setState(0xee9d, 0xccf7, 0x8550, 0x2a0d, 0x3e61, 0xe8cb, 0x1, 0x1);
        gbc.writeMem(0xee9d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xccf7);
        EXPECT(gbc.pc(), 0xee9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee9d), 0xcb);
        EXPECT(gbc.readMem(0xee9e), 0x37);
        // CB 37 0170
        gbc.setState(0xe99b, 0xa402, 0x4170, 0x8f5, 0x441d, 0xceaf, 0x1, 0x1);
        gbc.writeMem(0xe99b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa402);
        EXPECT(gbc.pc(), 0xe99d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99b), 0xcb);
        EXPECT(gbc.readMem(0xe99c), 0x37);
        // CB 37 0171
        gbc.setState(0xd1b4, 0xb0ed, 0xdac0, 0x4c42, 0x263e, 0x46f0, 0x0, 0x0);
        gbc.writeMem(0xd1b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb0ed);
        EXPECT(gbc.pc(), 0xd1b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b4), 0xcb);
        EXPECT(gbc.readMem(0xd1b5), 0x37);
        // CB 37 0172
        gbc.setState(0xc604, 0x7561, 0x2ce0, 0xa131, 0xd904, 0xc47, 0x0, 0x0);
        gbc.writeMem(0xc604, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7561);
        EXPECT(gbc.pc(), 0xc606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc604), 0xcb);
        EXPECT(gbc.readMem(0xc605), 0x37);
        // CB 37 0173
        gbc.setState(0x1acf, 0x16fe, 0x480, 0x85e6, 0x3d22, 0xe499, 0x0, 0x0);
        gbc.writeMem(0x1acf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x16fe);
        EXPECT(gbc.pc(), 0x1ad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0174
        gbc.setState(0x9e4b, 0x9cf9, 0xb360, 0x6dad, 0x6a39, 0x30f5, 0x1, 0x1);
        gbc.writeMem(0x9e4b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9cf9);
        EXPECT(gbc.pc(), 0x9e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4b), 0xcb);
        EXPECT(gbc.readMem(0x9e4c), 0x37);
        // CB 37 0175
        gbc.setState(0xbbcb, 0x471c, 0x5bb0, 0xbcd9, 0x4103, 0x9d81, 0x0, 0x1);
        gbc.writeMem(0xbbcb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x471c);
        EXPECT(gbc.pc(), 0xbbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbcb), 0xcb);
        EXPECT(gbc.readMem(0xbbcc), 0x37);
        // CB 37 0176
        gbc.setState(0xdbb3, 0x8586, 0xf0f0, 0x9b0a, 0x1b1f, 0x9861, 0x1, 0x0);
        gbc.writeMem(0xdbb3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8586);
        EXPECT(gbc.pc(), 0xdbb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb3), 0xcb);
        EXPECT(gbc.readMem(0xdbb4), 0x37);
        // CB 37 0177
        gbc.setState(0x84d4, 0xd8cf, 0x3810, 0xda0, 0x6b6c, 0x6d95, 0x0, 0x1);
        gbc.writeMem(0x84d4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd8cf);
        EXPECT(gbc.pc(), 0x84d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84d4), 0xcb);
        EXPECT(gbc.readMem(0x84d5), 0x37);
        // CB 37 0178
        gbc.setState(0xb078, 0x5ebf, 0x7280, 0xd984, 0x800, 0x5d15, 0x1, 0x1);
        gbc.writeMem(0xb078, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5ebf);
        EXPECT(gbc.pc(), 0xb07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb078), 0xcb);
        EXPECT(gbc.readMem(0xb079), 0x37);
        // CB 37 0179
        gbc.setState(0x6b2a, 0x1c9a, 0x5710, 0xad84, 0xfca4, 0xee39, 0x1, 0x0);
        gbc.writeMem(0x6b2a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1c9a);
        EXPECT(gbc.pc(), 0x6b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 017A
        gbc.setState(0xb130, 0xc152, 0x6f10, 0xab45, 0x2172, 0xa90e, 0x1, 0x1);
        gbc.writeMem(0xb130, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc152);
        EXPECT(gbc.pc(), 0xb132);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb130), 0xcb);
        EXPECT(gbc.readMem(0xb131), 0x37);
        // CB 37 017B
        gbc.setState(0x506a, 0x88cf, 0x81e0, 0xd8e3, 0xcae9, 0x869b, 0x1, 0x1);
        gbc.writeMem(0x506a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x88cf);
        EXPECT(gbc.pc(), 0x506c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 017C
        gbc.setState(0x8467, 0x3994, 0x9670, 0xb52b, 0x8676, 0x7f78, 0x0, 0x1);
        gbc.writeMem(0x8467, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3994);
        EXPECT(gbc.pc(), 0x8469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8467), 0xcb);
        EXPECT(gbc.readMem(0x8468), 0x37);
        // CB 37 017D
        gbc.setState(0xde9f, 0x3698, 0xe530, 0x8413, 0x6aae, 0xec5a, 0x0, 0x1);
        gbc.writeMem(0xde9f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3698);
        EXPECT(gbc.pc(), 0xdea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde9f), 0xcb);
        EXPECT(gbc.readMem(0xdea0), 0x37);
        // CB 37 017E
        gbc.setState(0x507, 0x769e, 0xfe70, 0xea, 0x6483, 0x9b67, 0x1, 0x0);
        gbc.writeMem(0x507, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x769e);
        EXPECT(gbc.pc(), 0x509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 017F
        gbc.setState(0xb8f, 0x9fa9, 0xb060, 0x534c, 0x7f0d, 0x8f15, 0x0, 0x0);
        gbc.writeMem(0xb8f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9fa9);
        EXPECT(gbc.pc(), 0xb91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0180
        gbc.setState(0x7a5e, 0x7f5, 0x8ae0, 0x6d04, 0xe826, 0xbd86, 0x1, 0x1);
        gbc.writeMem(0x7a5e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7f5);
        EXPECT(gbc.pc(), 0x7a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0181
        gbc.setState(0xbb9f, 0x1165, 0x6340, 0xdc82, 0xa65, 0xc5ab, 0x1, 0x0);
        gbc.writeMem(0xbb9f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1165);
        EXPECT(gbc.pc(), 0xbba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb9f), 0xcb);
        EXPECT(gbc.readMem(0xbba0), 0x37);
        // CB 37 0182
        gbc.setState(0x9de5, 0xe2d8, 0x3180, 0xdc3f, 0x4e6c, 0x7d4a, 0x1, 0x0);
        gbc.writeMem(0x9de5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe2d8);
        EXPECT(gbc.pc(), 0x9de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de5), 0xcb);
        EXPECT(gbc.readMem(0x9de6), 0x37);
        // CB 37 0183
        gbc.setState(0x5726, 0xd32, 0x5c30, 0x6315, 0x9cb8, 0xbedc, 0x0, 0x1);
        gbc.writeMem(0x5726, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd32);
        EXPECT(gbc.pc(), 0x5728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0184
        gbc.setState(0x524c, 0xf881, 0x5420, 0x1d54, 0x33ac, 0x9012, 0x0, 0x0);
        gbc.writeMem(0x524c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf881);
        EXPECT(gbc.pc(), 0x524e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0185
        gbc.setState(0xd1ed, 0x4184, 0x44e0, 0x1d37, 0xdd4c, 0xab14, 0x1, 0x0);
        gbc.writeMem(0xd1ed, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4184);
        EXPECT(gbc.pc(), 0xd1ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ed), 0xcb);
        EXPECT(gbc.readMem(0xd1ee), 0x37);
        // CB 37 0186
        gbc.setState(0xc5be, 0xb0d0, 0xbf10, 0x596d, 0x8455, 0x2c22, 0x0, 0x0);
        gbc.writeMem(0xc5be, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb0d0);
        EXPECT(gbc.pc(), 0xc5c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5be), 0xcb);
        EXPECT(gbc.readMem(0xc5bf), 0x37);
        // CB 37 0187
        gbc.setState(0x49f5, 0xc7, 0x2f00, 0xc8ec, 0x38f9, 0x2e89, 0x1, 0x0);
        gbc.writeMem(0x49f5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc7);
        EXPECT(gbc.pc(), 0x49f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0188
        gbc.setState(0x4cce, 0x846, 0x320, 0xf535, 0x5826, 0x1e03, 0x0, 0x0);
        gbc.writeMem(0x4cce, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x846);
        EXPECT(gbc.pc(), 0x4cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0189
        gbc.setState(0x1e40, 0x8499, 0xa0f0, 0xccd3, 0xd443, 0xdf85, 0x1, 0x0);
        gbc.writeMem(0x1e40, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8499);
        EXPECT(gbc.pc(), 0x1e42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 018A
        gbc.setState(0xed11, 0xa2d9, 0xba10, 0x5786, 0xb732, 0xe0f, 0x1, 0x0);
        gbc.writeMem(0xed11, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa2d9);
        EXPECT(gbc.pc(), 0xed13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed11), 0xcb);
        EXPECT(gbc.readMem(0xed12), 0x37);
        // CB 37 018B
        gbc.setState(0x9e89, 0x4810, 0xe840, 0xda78, 0xa04d, 0x4d86, 0x0, 0x1);
        gbc.writeMem(0x9e89, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4810);
        EXPECT(gbc.pc(), 0x9e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e89), 0xcb);
        EXPECT(gbc.readMem(0x9e8a), 0x37);
        // CB 37 018C
        gbc.setState(0xa662, 0x8a60, 0x1e50, 0x71e8, 0xd05, 0xdaf1, 0x1, 0x0);
        gbc.writeMem(0xa662, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8a60);
        EXPECT(gbc.pc(), 0xa664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa662), 0xcb);
        EXPECT(gbc.readMem(0xa663), 0x37);
        // CB 37 018D
        gbc.setState(0xb70a, 0xbe13, 0x4080, 0x168, 0x52d3, 0xe1b9, 0x1, 0x0);
        gbc.writeMem(0xb70a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbe13);
        EXPECT(gbc.pc(), 0xb70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70a), 0xcb);
        EXPECT(gbc.readMem(0xb70b), 0x37);
        // CB 37 018E
        gbc.setState(0xa6a6, 0x2fe0, 0x7c60, 0x38b7, 0xf60e, 0xeeb, 0x1, 0x1);
        gbc.writeMem(0xa6a6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2fe0);
        EXPECT(gbc.pc(), 0xa6a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a6), 0xcb);
        EXPECT(gbc.readMem(0xa6a7), 0x37);
        // CB 37 018F
        gbc.setState(0x6e4c, 0x7809, 0xc70, 0xca20, 0xb8f6, 0x384b, 0x1, 0x1);
        gbc.writeMem(0x6e4c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7809);
        EXPECT(gbc.pc(), 0x6e4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0190
        gbc.setState(0xc6f9, 0xa675, 0xfdf0, 0xda1, 0x89fa, 0x26b4, 0x1, 0x0);
        gbc.writeMem(0xc6f9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa675);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0x37);
        // CB 37 0191
        gbc.setState(0x16d7, 0x42e3, 0x4af0, 0x6226, 0x6961, 0x3674, 0x1, 0x1);
        gbc.writeMem(0x16d7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x42e3);
        EXPECT(gbc.pc(), 0x16d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0193
        gbc.setState(0x2be2, 0x1b41, 0x240, 0xf3d7, 0x4ba5, 0xcce4, 0x0, 0x1);
        gbc.writeMem(0x2be2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1b41);
        EXPECT(gbc.pc(), 0x2be4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0194
        gbc.setState(0x13be, 0x58e6, 0x3d80, 0x6ffa, 0xf750, 0xe254, 0x1, 0x1);
        gbc.writeMem(0x13be, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x58e6);
        EXPECT(gbc.pc(), 0x13c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0195
        gbc.setState(0xcfd2, 0x82da, 0x4e10, 0xd916, 0x9d42, 0x57a0, 0x1, 0x0);
        gbc.writeMem(0xcfd2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x82da);
        EXPECT(gbc.pc(), 0xcfd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd2), 0xcb);
        EXPECT(gbc.readMem(0xcfd3), 0x37);
        // CB 37 0196
        gbc.setState(0xe0dd, 0x18b4, 0x5b50, 0xdb89, 0x5ebb, 0xc7f7, 0x0, 0x1);
        gbc.writeMem(0xe0dd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x18b4);
        EXPECT(gbc.pc(), 0xe0df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0dd), 0xcb);
        EXPECT(gbc.readMem(0xe0de), 0x37);
        // CB 37 0197
        gbc.setState(0xd340, 0x1372, 0x9460, 0x5870, 0x8d61, 0x75d4, 0x0, 0x1);
        gbc.writeMem(0xd340, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1372);
        EXPECT(gbc.pc(), 0xd342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd340), 0xcb);
        EXPECT(gbc.readMem(0xd341), 0x37);
        // CB 37 0198
        gbc.setState(0xacd, 0x6046, 0x8310, 0xbd4f, 0xa9f3, 0xdeb9, 0x0, 0x1);
        gbc.writeMem(0xacd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6046);
        EXPECT(gbc.pc(), 0xacf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0199
        gbc.setState(0xd9de, 0x96af, 0x2740, 0x5502, 0x5000, 0x22ac, 0x0, 0x1);
        gbc.writeMem(0xd9de, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x96af);
        EXPECT(gbc.pc(), 0xd9e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9de), 0xcb);
        EXPECT(gbc.readMem(0xd9df), 0x37);
        // CB 37 019A
        gbc.setState(0x6584, 0x537e, 0x92d0, 0xe9a6, 0xdec1, 0x982, 0x0, 0x0);
        gbc.writeMem(0x6584, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x537e);
        EXPECT(gbc.pc(), 0x6586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 019B
        gbc.setState(0x46e6, 0x46b9, 0xcea0, 0xb8e2, 0x687f, 0x9ca9, 0x1, 0x1);
        gbc.writeMem(0x46e6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x46b9);
        EXPECT(gbc.pc(), 0x46e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 019C
        gbc.setState(0x3388, 0xce46, 0x46b0, 0x653d, 0x937, 0x5097, 0x1, 0x1);
        gbc.writeMem(0x3388, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xce46);
        EXPECT(gbc.pc(), 0x338a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 019D
        gbc.setState(0x7935, 0xe74e, 0x90e0, 0x111e, 0xa922, 0x4a28, 0x1, 0x1);
        gbc.writeMem(0x7935, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe74e);
        EXPECT(gbc.pc(), 0x7937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 019E
        gbc.setState(0x19a2, 0xb48e, 0x2c80, 0x705f, 0xc241, 0x66d3, 0x1, 0x1);
        gbc.writeMem(0x19a2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb48e);
        EXPECT(gbc.pc(), 0x19a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 019F
        gbc.setState(0x43e8, 0x192c, 0x9060, 0x6b3, 0xb2eb, 0x55f1, 0x1, 0x0);
        gbc.writeMem(0x43e8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x192c);
        EXPECT(gbc.pc(), 0x43ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A0
        gbc.setState(0x1616, 0x8360, 0xcd70, 0x871f, 0x55e, 0xcfaa, 0x0, 0x1);
        gbc.writeMem(0x1616, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8360);
        EXPECT(gbc.pc(), 0x1618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A1
        gbc.setState(0x9547, 0xb315, 0xb310, 0xc5c2, 0x42e3, 0x239b, 0x0, 0x0);
        gbc.writeMem(0x9547, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb315);
        EXPECT(gbc.pc(), 0x9549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9547), 0xcb);
        EXPECT(gbc.readMem(0x9548), 0x37);
        // CB 37 01A2
        gbc.setState(0x259c, 0xaa8e, 0x4a20, 0x1eca, 0xf530, 0x1efb, 0x0, 0x0);
        gbc.writeMem(0x259c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaa8e);
        EXPECT(gbc.pc(), 0x259e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A3
        gbc.setState(0x22e8, 0x6cba, 0x5230, 0x5527, 0xda4f, 0x1be7, 0x0, 0x1);
        gbc.writeMem(0x22e8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x6cba);
        EXPECT(gbc.pc(), 0x22ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A4
        gbc.setState(0x829c, 0x19a1, 0x5ad0, 0x12e2, 0xfeef, 0x261f, 0x0, 0x1);
        gbc.writeMem(0x829c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x19a1);
        EXPECT(gbc.pc(), 0x829e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829c), 0xcb);
        EXPECT(gbc.readMem(0x829d), 0x37);
        // CB 37 01A5
        gbc.setState(0x1702, 0x2381, 0x53e0, 0xbaf1, 0xf76, 0x8f9d, 0x1, 0x1);
        gbc.writeMem(0x1702, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2381);
        EXPECT(gbc.pc(), 0x1704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A6
        gbc.setState(0x9a6f, 0x3827, 0xba90, 0xf253, 0x53a2, 0x68ba, 0x0, 0x1);
        gbc.writeMem(0x9a6f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3827);
        EXPECT(gbc.pc(), 0x9a71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a6f), 0xcb);
        EXPECT(gbc.readMem(0x9a70), 0x37);
        // CB 37 01A7
        gbc.setState(0xd895, 0xb515, 0x98f0, 0x80f8, 0x171d, 0x4b10, 0x1, 0x0);
        gbc.writeMem(0xd895, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb515);
        EXPECT(gbc.pc(), 0xd897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd895), 0xcb);
        EXPECT(gbc.readMem(0xd896), 0x37);
        // CB 37 01A8
        gbc.setState(0x6be9, 0xc5c9, 0x91d0, 0xfa12, 0x4e3f, 0x17c8, 0x1, 0x0);
        gbc.writeMem(0x6be9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc5c9);
        EXPECT(gbc.pc(), 0x6beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01A9
        gbc.setState(0x20fd, 0x3f59, 0xb910, 0xeec7, 0x3c8b, 0x136f, 0x1, 0x0);
        gbc.writeMem(0x20fd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3f59);
        EXPECT(gbc.pc(), 0x20ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01AA
        gbc.setState(0x5e81, 0x5ba5, 0x5aa0, 0xed4, 0x5e0f, 0x67f7, 0x1, 0x0);
        gbc.writeMem(0x5e81, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5ba5);
        EXPECT(gbc.pc(), 0x5e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01AB
        gbc.setState(0x96e8, 0x76aa, 0x2860, 0xb297, 0x2363, 0xd458, 0x0, 0x0);
        gbc.writeMem(0x96e8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x76aa);
        EXPECT(gbc.pc(), 0x96ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e8), 0xcb);
        EXPECT(gbc.readMem(0x96e9), 0x37);
        // CB 37 01AC
        gbc.setState(0x7be4, 0x294f, 0x3250, 0xb30c, 0x629, 0xb35a, 0x1, 0x1);
        gbc.writeMem(0x7be4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x294f);
        EXPECT(gbc.pc(), 0x7be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01AD
        gbc.setState(0x7c1d, 0xda1d, 0xa20, 0xb8b9, 0x92df, 0x3224, 0x0, 0x0);
        gbc.writeMem(0x7c1d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xda1d);
        EXPECT(gbc.pc(), 0x7c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01AE
        gbc.setState(0xe3c1, 0x5b40, 0xfa60, 0x1021, 0xd581, 0x4b20, 0x0, 0x0);
        gbc.writeMem(0xe3c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5b40);
        EXPECT(gbc.pc(), 0xe3c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c1), 0xcb);
        EXPECT(gbc.readMem(0xe3c2), 0x37);
        // CB 37 01AF
        gbc.setState(0xe05b, 0x808a, 0xa420, 0x2f54, 0x79d, 0xbd59, 0x0, 0x1);
        gbc.writeMem(0xe05b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x808a);
        EXPECT(gbc.pc(), 0xe05d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe05b), 0xcb);
        EXPECT(gbc.readMem(0xe05c), 0x37);
        // CB 37 01B0
        gbc.setState(0xb442, 0xfabc, 0xfa00, 0xb3d4, 0x3629, 0x3f60, 0x1, 0x0);
        gbc.writeMem(0xb442, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfabc);
        EXPECT(gbc.pc(), 0xb444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb442), 0xcb);
        EXPECT(gbc.readMem(0xb443), 0x37);
        // CB 37 01B1
        gbc.setState(0x9460, 0x7838, 0xe130, 0x6da6, 0xe8e7, 0x1995, 0x1, 0x1);
        gbc.writeMem(0x9460, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7838);
        EXPECT(gbc.pc(), 0x9462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9460), 0xcb);
        EXPECT(gbc.readMem(0x9461), 0x37);
        // CB 37 01B2
        gbc.setState(0x73a3, 0x2912, 0xb350, 0x753e, 0x7cd0, 0x9a0f, 0x1, 0x1);
        gbc.writeMem(0x73a3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2912);
        EXPECT(gbc.pc(), 0x73a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01B3
        gbc.setState(0x53d0, 0xd195, 0x7190, 0xc99, 0xc3f8, 0x8127, 0x0, 0x1);
        gbc.writeMem(0x53d0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd195);
        EXPECT(gbc.pc(), 0x53d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01B4
        gbc.setState(0xedfe, 0xb02d, 0x1490, 0x742, 0xcb8b, 0x4f00, 0x0, 0x1);
        gbc.writeMem(0xedfe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb02d);
        EXPECT(gbc.pc(), 0xee00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedfe), 0xcb);
        EXPECT(gbc.readMem(0xedff), 0x37);
        // CB 37 01B5
        gbc.setState(0xabbe, 0x38b6, 0x2be0, 0x18ab, 0x781a, 0x4ffa, 0x1, 0x1);
        gbc.writeMem(0xabbe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x38b6);
        EXPECT(gbc.pc(), 0xabc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbe), 0xcb);
        EXPECT(gbc.readMem(0xabbf), 0x37);
        // CB 37 01B6
        gbc.setState(0xbc9d, 0x3fc3, 0x5160, 0x8a0c, 0x7622, 0x7181, 0x1, 0x1);
        gbc.writeMem(0xbc9d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3fc3);
        EXPECT(gbc.pc(), 0xbc9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9d), 0xcb);
        EXPECT(gbc.readMem(0xbc9e), 0x37);
        // CB 37 01B7
        gbc.setState(0xd69c, 0xfdc4, 0xc8b0, 0x82d3, 0x8c74, 0xdb9f, 0x0, 0x1);
        gbc.writeMem(0xd69c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfdc4);
        EXPECT(gbc.pc(), 0xd69e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69c), 0xcb);
        EXPECT(gbc.readMem(0xd69d), 0x37);
        // CB 37 01B8
        gbc.setState(0x1dd0, 0xada1, 0xb00, 0x728b, 0x5f11, 0x4434, 0x0, 0x1);
        gbc.writeMem(0x1dd0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xada1);
        EXPECT(gbc.pc(), 0x1dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01B9
        gbc.setState(0x75c1, 0xe284, 0x6700, 0x8e3f, 0x226e, 0xcd6a, 0x1, 0x1);
        gbc.writeMem(0x75c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe284);
        EXPECT(gbc.pc(), 0x75c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01BA
        gbc.setState(0xc175, 0x4b6e, 0x7620, 0xede8, 0x6a51, 0x6aed, 0x1, 0x0);
        gbc.writeMem(0xc175, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4b6e);
        EXPECT(gbc.pc(), 0xc177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc175), 0xcb);
        EXPECT(gbc.readMem(0xc176), 0x37);
        // CB 37 01BC
        gbc.setState(0xb98e, 0xe51b, 0xbdf0, 0x467d, 0x2ef1, 0x9d4, 0x1, 0x0);
        gbc.writeMem(0xb98e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe51b);
        EXPECT(gbc.pc(), 0xb990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98e), 0xcb);
        EXPECT(gbc.readMem(0xb98f), 0x37);
        // CB 37 01BD
        gbc.setState(0x9342, 0x9f53, 0x8560, 0x938d, 0x9b21, 0x3a83, 0x1, 0x1);
        gbc.writeMem(0x9342, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9f53);
        EXPECT(gbc.pc(), 0x9344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9342), 0xcb);
        EXPECT(gbc.readMem(0x9343), 0x37);
        // CB 37 01BE
        gbc.setState(0x5dbf, 0xc49d, 0xf120, 0xe617, 0xd473, 0x302f, 0x1, 0x1);
        gbc.writeMem(0x5dbf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc49d);
        EXPECT(gbc.pc(), 0x5dc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01BF
        gbc.setState(0xcbb4, 0x44a1, 0x2aa0, 0x5416, 0x5d0a, 0x6eb0, 0x0, 0x1);
        gbc.writeMem(0xcbb4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x44a1);
        EXPECT(gbc.pc(), 0xcbb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb4), 0xcb);
        EXPECT(gbc.readMem(0xcbb5), 0x37);
        // CB 37 01C0
        gbc.setState(0x649a, 0x7bfd, 0x2af0, 0x28a4, 0xef2e, 0xb82c, 0x0, 0x1);
        gbc.writeMem(0x649a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7bfd);
        EXPECT(gbc.pc(), 0x649c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C1
        gbc.setState(0x5314, 0xc450, 0x8f00, 0x2660, 0x3db9, 0x6617, 0x0, 0x1);
        gbc.writeMem(0x5314, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc450);
        EXPECT(gbc.pc(), 0x5316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C2
        gbc.setState(0xbd23, 0x18aa, 0x3c40, 0x3c7f, 0x4d13, 0x8951, 0x1, 0x1);
        gbc.writeMem(0xbd23, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x18aa);
        EXPECT(gbc.pc(), 0xbd25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd23), 0xcb);
        EXPECT(gbc.readMem(0xbd24), 0x37);
        // CB 37 01C3
        gbc.setState(0x9bfb, 0xe396, 0x4370, 0x7146, 0xcea0, 0xc41e, 0x1, 0x0);
        gbc.writeMem(0x9bfb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe396);
        EXPECT(gbc.pc(), 0x9bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bfb), 0xcb);
        EXPECT(gbc.readMem(0x9bfc), 0x37);
        // CB 37 01C4
        gbc.setState(0x45c8, 0xf708, 0xe1b0, 0xb345, 0x7d5f, 0xb3bc, 0x0, 0x1);
        gbc.writeMem(0x45c8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf708);
        EXPECT(gbc.pc(), 0x45ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C5
        gbc.setState(0x243c, 0x818a, 0x2990, 0x24e0, 0x46f2, 0x83f2, 0x0, 0x0);
        gbc.writeMem(0x243c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x818a);
        EXPECT(gbc.pc(), 0x243e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C6
        gbc.setState(0x3c5b, 0x941b, 0x1a80, 0xb750, 0x7260, 0x94ee, 0x0, 0x0);
        gbc.writeMem(0x3c5b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x941b);
        EXPECT(gbc.pc(), 0x3c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C7
        gbc.setState(0xd9c9, 0x2b44, 0xad60, 0xf56d, 0xf60b, 0x7d84, 0x1, 0x1);
        gbc.writeMem(0xd9c9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2b44);
        EXPECT(gbc.pc(), 0xd9cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c9), 0xcb);
        EXPECT(gbc.readMem(0xd9ca), 0x37);
        // CB 37 01C8
        gbc.setState(0x7a16, 0xc89b, 0xc70, 0x741b, 0xe770, 0xc819, 0x1, 0x0);
        gbc.writeMem(0x7a16, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc89b);
        EXPECT(gbc.pc(), 0x7a18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01C9
        gbc.setState(0x2f17, 0x3b8a, 0xd480, 0x180d, 0x8b6, 0x2a37, 0x1, 0x1);
        gbc.writeMem(0x2f17, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3b8a);
        EXPECT(gbc.pc(), 0x2f19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01CB
        gbc.setState(0x49fa, 0x7a1c, 0x7460, 0x2c4f, 0x7b14, 0xf839, 0x0, 0x1);
        gbc.writeMem(0x49fa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7a1c);
        EXPECT(gbc.pc(), 0x49fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01CC
        gbc.setState(0xeff8, 0xb586, 0xe820, 0x2042, 0xda85, 0x9358, 0x1, 0x1);
        gbc.writeMem(0xeff8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb586);
        EXPECT(gbc.pc(), 0xeffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeff8), 0xcb);
        EXPECT(gbc.readMem(0xeff9), 0x37);
        // CB 37 01CD
        gbc.setState(0x3489, 0x7c53, 0xc5d0, 0xd97c, 0x4625, 0x3532, 0x1, 0x0);
        gbc.writeMem(0x3489, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7c53);
        EXPECT(gbc.pc(), 0x348b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01CE
        gbc.setState(0x8bf5, 0xddc8, 0x20b0, 0xd582, 0x188e, 0xba15, 0x0, 0x1);
        gbc.writeMem(0x8bf5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xddc8);
        EXPECT(gbc.pc(), 0x8bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf5), 0xcb);
        EXPECT(gbc.readMem(0x8bf6), 0x37);
        // CB 37 01CF
        gbc.setState(0x6aeb, 0x208b, 0x3f40, 0xbef6, 0xaaa2, 0xabff, 0x0, 0x0);
        gbc.writeMem(0x6aeb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x208b);
        EXPECT(gbc.pc(), 0x6aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01D0
        gbc.setState(0x8df9, 0xb7df, 0x73d0, 0xb7e3, 0xaa3, 0xd21, 0x0, 0x1);
        gbc.writeMem(0x8df9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb7df);
        EXPECT(gbc.pc(), 0x8dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8df9), 0xcb);
        EXPECT(gbc.readMem(0x8dfa), 0x37);
        // CB 37 01D1
        gbc.setState(0xa19c, 0x5043, 0x8650, 0x58cb, 0x8941, 0x72b6, 0x0, 0x0);
        gbc.writeMem(0xa19c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5043);
        EXPECT(gbc.pc(), 0xa19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa19c), 0xcb);
        EXPECT(gbc.readMem(0xa19d), 0x37);
        // CB 37 01D2
        gbc.setState(0xaa82, 0xff35, 0x6760, 0xef9e, 0x51a1, 0xee55, 0x1, 0x0);
        gbc.writeMem(0xaa82, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xff35);
        EXPECT(gbc.pc(), 0xaa84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa82), 0xcb);
        EXPECT(gbc.readMem(0xaa83), 0x37);
        // CB 37 01D3
        gbc.setState(0x4a49, 0x4b86, 0x9d40, 0x44f1, 0x1997, 0x674c, 0x1, 0x1);
        gbc.writeMem(0x4a49, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4b86);
        EXPECT(gbc.pc(), 0x4a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01D4
        gbc.setState(0xcb6b, 0x52f4, 0xedf0, 0x263e, 0x44b8, 0x6689, 0x1, 0x0);
        gbc.writeMem(0xcb6b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x52f4);
        EXPECT(gbc.pc(), 0xcb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6b), 0xcb);
        EXPECT(gbc.readMem(0xcb6c), 0x37);
        // CB 37 01D6
        gbc.setState(0x565c, 0xfbe5, 0xf7d0, 0xd7bc, 0xe14a, 0x8b33, 0x1, 0x1);
        gbc.writeMem(0x565c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfbe5);
        EXPECT(gbc.pc(), 0x565e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01D7
        gbc.setState(0x1768, 0xbcb, 0xde40, 0x7078, 0xc53e, 0xa828, 0x0, 0x1);
        gbc.writeMem(0x1768, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbcb);
        EXPECT(gbc.pc(), 0x176a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01D8
        gbc.setState(0xd3c3, 0xe264, 0x7ce0, 0xd921, 0xe4ff, 0x1f43, 0x0, 0x1);
        gbc.writeMem(0xd3c3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe264);
        EXPECT(gbc.pc(), 0xd3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c3), 0xcb);
        EXPECT(gbc.readMem(0xd3c4), 0x37);
        // CB 37 01D9
        gbc.setState(0xbe43, 0x3f3, 0xb890, 0xc3d7, 0x508e, 0xb203, 0x0, 0x0);
        gbc.writeMem(0xbe43, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3f3);
        EXPECT(gbc.pc(), 0xbe45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe43), 0xcb);
        EXPECT(gbc.readMem(0xbe44), 0x37);
        // CB 37 01DA
        gbc.setState(0x5208, 0xcf1c, 0x4250, 0x19ad, 0xf8b9, 0xe6df, 0x0, 0x0);
        gbc.writeMem(0x5208, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcf1c);
        EXPECT(gbc.pc(), 0x520a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01DB
        gbc.setState(0x8da2, 0xe3d1, 0x78c0, 0x46bd, 0x45c8, 0x5eed, 0x0, 0x1);
        gbc.writeMem(0x8da2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe3d1);
        EXPECT(gbc.pc(), 0x8da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8da2), 0xcb);
        EXPECT(gbc.readMem(0x8da3), 0x37);
        // CB 37 01DC
        gbc.setState(0x7a5d, 0x1bbe, 0x8310, 0x4010, 0x5aec, 0xfe8b, 0x0, 0x1);
        gbc.writeMem(0x7a5d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1bbe);
        EXPECT(gbc.pc(), 0x7a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01DD
        gbc.setState(0x8795, 0x7a16, 0x5a00, 0x1cc7, 0xb67, 0x57a2, 0x1, 0x0);
        gbc.writeMem(0x8795, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7a16);
        EXPECT(gbc.pc(), 0x8797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8795), 0xcb);
        EXPECT(gbc.readMem(0x8796), 0x37);
        // CB 37 01DE
        gbc.setState(0xccf3, 0xaea8, 0xdaf0, 0x3175, 0x8ae8, 0x2c0d, 0x1, 0x0);
        gbc.writeMem(0xccf3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaea8);
        EXPECT(gbc.pc(), 0xccf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccf3), 0xcb);
        EXPECT(gbc.readMem(0xccf4), 0x37);
        // CB 37 01DF
        gbc.setState(0xe09d, 0x8250, 0xa690, 0x3b7e, 0x1eff, 0x2547, 0x1, 0x0);
        gbc.writeMem(0xe09d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8250);
        EXPECT(gbc.pc(), 0xe09f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe09d), 0xcb);
        EXPECT(gbc.readMem(0xe09e), 0x37);
        // CB 37 01E0
        gbc.setState(0x2f25, 0x5a44, 0x47a0, 0xfd35, 0xed20, 0x6a9, 0x0, 0x0);
        gbc.writeMem(0x2f25, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5a44);
        EXPECT(gbc.pc(), 0x2f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01E1
        gbc.setState(0xdda7, 0xd343, 0x4a50, 0x1d6b, 0x59f8, 0x6efc, 0x0, 0x0);
        gbc.writeMem(0xdda7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd343);
        EXPECT(gbc.pc(), 0xdda9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda7), 0xcb);
        EXPECT(gbc.readMem(0xdda8), 0x37);
        // CB 37 01E2
        gbc.setState(0xaff0, 0x744e, 0x6ab0, 0x84c8, 0x3c9a, 0xcc4e, 0x0, 0x0);
        gbc.writeMem(0xaff0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x744e);
        EXPECT(gbc.pc(), 0xaff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff0), 0xcb);
        EXPECT(gbc.readMem(0xaff1), 0x37);
        // CB 37 01E3
        gbc.setState(0x2596, 0x658f, 0x1310, 0x4d07, 0x214a, 0xe928, 0x1, 0x1);
        gbc.writeMem(0x2596, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x658f);
        EXPECT(gbc.pc(), 0x2598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01E4
        gbc.setState(0xe390, 0xa4ef, 0x96c0, 0x4b0, 0x184e, 0x81b7, 0x0, 0x0);
        gbc.writeMem(0xe390, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa4ef);
        EXPECT(gbc.pc(), 0xe392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe390), 0xcb);
        EXPECT(gbc.readMem(0xe391), 0x37);
        // CB 37 01E5
        gbc.setState(0x8aa5, 0x7a50, 0x72f0, 0xbc8, 0xc2cd, 0xb4eb, 0x0, 0x0);
        gbc.writeMem(0x8aa5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7a50);
        EXPECT(gbc.pc(), 0x8aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa5), 0xcb);
        EXPECT(gbc.readMem(0x8aa6), 0x37);
        // CB 37 01E6
        gbc.setState(0x8ab9, 0xa89e, 0xc290, 0xe988, 0x200, 0x62ac, 0x1, 0x1);
        gbc.writeMem(0x8ab9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa89e);
        EXPECT(gbc.pc(), 0x8abb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab9), 0xcb);
        EXPECT(gbc.readMem(0x8aba), 0x37);
        // CB 37 01E8
        gbc.setState(0xcc8e, 0x24b2, 0x9f20, 0xbeda, 0x6311, 0x874, 0x0, 0x0);
        gbc.writeMem(0xcc8e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x24b2);
        EXPECT(gbc.pc(), 0xcc90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8e), 0xcb);
        EXPECT(gbc.readMem(0xcc8f), 0x37);
        // CB 37 01E9
        gbc.setState(0x4bbc, 0x9301, 0xa170, 0x80c7, 0xb9a6, 0xbe36, 0x0, 0x0);
        gbc.writeMem(0x4bbc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9301);
        EXPECT(gbc.pc(), 0x4bbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01EA
        gbc.setState(0x9e81, 0xfaf5, 0x57f0, 0x224a, 0x290d, 0x9b6b, 0x0, 0x0);
        gbc.writeMem(0x9e81, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfaf5);
        EXPECT(gbc.pc(), 0x9e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e81), 0xcb);
        EXPECT(gbc.readMem(0x9e82), 0x37);
        // CB 37 01EB
        gbc.setState(0x3901, 0x1f25, 0x45e0, 0x69f4, 0xe9d8, 0x5c44, 0x0, 0x0);
        gbc.writeMem(0x3901, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1f25);
        EXPECT(gbc.pc(), 0x3903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01EC
        gbc.setState(0x9d10, 0xe1cf, 0x3c70, 0x169, 0x84e0, 0x7e6c, 0x0, 0x1);
        gbc.writeMem(0x9d10, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe1cf);
        EXPECT(gbc.pc(), 0x9d12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d10), 0xcb);
        EXPECT(gbc.readMem(0x9d11), 0x37);
        // CB 37 01ED
        gbc.setState(0xc9c3, 0x6b1d, 0xeb90, 0xb80c, 0x601d, 0xe2, 0x1, 0x0);
        gbc.writeMem(0xc9c3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6b1d);
        EXPECT(gbc.pc(), 0xc9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c3), 0xcb);
        EXPECT(gbc.readMem(0xc9c4), 0x37);
        // CB 37 01EE
        gbc.setState(0xc0c2, 0xf886, 0x5e90, 0xfdbe, 0x3e02, 0x7062, 0x0, 0x1);
        gbc.writeMem(0xc0c2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf886);
        EXPECT(gbc.pc(), 0xc0c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c2), 0xcb);
        EXPECT(gbc.readMem(0xc0c3), 0x37);
        // CB 37 01EF
        gbc.setState(0xe3db, 0x4e1f, 0x9340, 0x416f, 0x4706, 0xabad, 0x0, 0x0);
        gbc.writeMem(0xe3db, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4e1f);
        EXPECT(gbc.pc(), 0xe3dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3db), 0xcb);
        EXPECT(gbc.readMem(0xe3dc), 0x37);
        // CB 37 01F0
        gbc.setState(0xaad6, 0x8f4b, 0x70, 0x7bf9, 0x7061, 0x5b23, 0x1, 0x0);
        gbc.writeMem(0xaad6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8f4b);
        EXPECT(gbc.pc(), 0xaad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad6), 0xcb);
        EXPECT(gbc.readMem(0xaad7), 0x37);
        // CB 37 01F1
        gbc.setState(0x65d7, 0xa51, 0x44f0, 0x54d1, 0x7ac1, 0xe742, 0x0, 0x0);
        gbc.writeMem(0x65d7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa51);
        EXPECT(gbc.pc(), 0x65d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F2
        gbc.setState(0xb5fb, 0xe13, 0x5a10, 0xe4be, 0x3243, 0x795c, 0x0, 0x1);
        gbc.writeMem(0xb5fb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe13);
        EXPECT(gbc.pc(), 0xb5fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5fb), 0xcb);
        EXPECT(gbc.readMem(0xb5fc), 0x37);
        // CB 37 01F3
        gbc.setState(0x7e73, 0x6ed2, 0xa330, 0xb0ec, 0xe872, 0x3d9f, 0x1, 0x0);
        gbc.writeMem(0x7e73, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6ed2);
        EXPECT(gbc.pc(), 0x7e75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F4
        gbc.setState(0x67f8, 0xc5aa, 0x5810, 0x1c98, 0x8e23, 0x57b7, 0x0, 0x0);
        gbc.writeMem(0x67f8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc5aa);
        EXPECT(gbc.pc(), 0x67fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F5
        gbc.setState(0x6c4a, 0x6e46, 0x34b0, 0xd2fb, 0xb79b, 0x7bcf, 0x0, 0x1);
        gbc.writeMem(0x6c4a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6e46);
        EXPECT(gbc.pc(), 0x6c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F6
        gbc.setState(0x5e25, 0x2911, 0x4320, 0x5a1b, 0x9d16, 0x4fde, 0x0, 0x1);
        gbc.writeMem(0x5e25, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2911);
        EXPECT(gbc.pc(), 0x5e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F7
        gbc.setState(0x3fc2, 0x3f77, 0x74e0, 0x403d, 0x857b, 0x7dbb, 0x0, 0x0);
        gbc.writeMem(0x3fc2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3f77);
        EXPECT(gbc.pc(), 0x3fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F8
        gbc.setState(0x4b1f, 0x5811, 0xb80, 0xf9b3, 0x7bf, 0xe93f, 0x0, 0x1);
        gbc.writeMem(0x4b1f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5811);
        EXPECT(gbc.pc(), 0x4b21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01F9
        gbc.setState(0x2106, 0x62c4, 0xd4d0, 0xda6, 0x2d5b, 0x9d82, 0x0, 0x0);
        gbc.writeMem(0x2106, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x62c4);
        EXPECT(gbc.pc(), 0x2108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01FA
        gbc.setState(0x5c3b, 0x4a8f, 0xd500, 0x382b, 0xe2d9, 0xf019, 0x1, 0x1);
        gbc.writeMem(0x5c3b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4a8f);
        EXPECT(gbc.pc(), 0x5c3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01FB
        gbc.setState(0x10a3, 0x8648, 0xea20, 0x63d6, 0xfe3e, 0x26cc, 0x1, 0x0);
        gbc.writeMem(0x10a3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8648);
        EXPECT(gbc.pc(), 0x10a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01FD
        gbc.setState(0x7c40, 0x891a, 0x11c0, 0x300f, 0x4b6c, 0x508e, 0x0, 0x1);
        gbc.writeMem(0x7c40, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x891a);
        EXPECT(gbc.pc(), 0x7c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01FE
        gbc.setState(0x3c67, 0x60a3, 0x8300, 0x3a76, 0xba46, 0x9afe, 0x0, 0x1);
        gbc.writeMem(0x3c67, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x60a3);
        EXPECT(gbc.pc(), 0x3c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 01FF
        gbc.setState(0x6cd7, 0x7d92, 0x18f0, 0x635a, 0x2f30, 0xa737, 0x1, 0x0);
        gbc.writeMem(0x6cd7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0x6cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0200
        gbc.setState(0x4718, 0xffbc, 0x87f0, 0xb0f4, 0x224c, 0x9f5e, 0x0, 0x1);
        gbc.writeMem(0x4718, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xffbc);
        EXPECT(gbc.pc(), 0x471a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0201
        gbc.setState(0xa5d9, 0x69e6, 0x290, 0xd24, 0x3b10, 0x140a, 0x0, 0x0);
        gbc.writeMem(0xa5d9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x69e6);
        EXPECT(gbc.pc(), 0xa5db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d9), 0xcb);
        EXPECT(gbc.readMem(0xa5da), 0x37);
        // CB 37 0202
        gbc.setState(0xb056, 0x425c, 0x4030, 0xbfd3, 0x8144, 0xc819, 0x0, 0x0);
        gbc.writeMem(0xb056, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x425c);
        EXPECT(gbc.pc(), 0xb058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb056), 0xcb);
        EXPECT(gbc.readMem(0xb057), 0x37);
        // CB 37 0203
        gbc.setState(0xa429, 0xe72d, 0x7710, 0xb692, 0x7700, 0xcd14, 0x0, 0x1);
        gbc.writeMem(0xa429, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe72d);
        EXPECT(gbc.pc(), 0xa42b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa429), 0xcb);
        EXPECT(gbc.readMem(0xa42a), 0x37);
        // CB 37 0204
        gbc.setState(0x935a, 0x1893, 0xe6f0, 0x1092, 0x3842, 0x6933, 0x1, 0x0);
        gbc.writeMem(0x935a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1893);
        EXPECT(gbc.pc(), 0x935c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935a), 0xcb);
        EXPECT(gbc.readMem(0x935b), 0x37);
        // CB 37 0205
        gbc.setState(0xcdf8, 0xff75, 0x2b10, 0xfbbe, 0x8b0a, 0xdcc4, 0x0, 0x1);
        gbc.writeMem(0xcdf8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xff75);
        EXPECT(gbc.pc(), 0xcdfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf8), 0xcb);
        EXPECT(gbc.readMem(0xcdf9), 0x37);
        // CB 37 0206
        gbc.setState(0x8556, 0x39dd, 0xd310, 0x502c, 0x7f77, 0x5a81, 0x0, 0x0);
        gbc.writeMem(0x8556, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x39dd);
        EXPECT(gbc.pc(), 0x8558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8556), 0xcb);
        EXPECT(gbc.readMem(0x8557), 0x37);
        // CB 37 0207
        gbc.setState(0x91a1, 0x18a2, 0xd720, 0xb34b, 0xe433, 0xdf3f, 0x1, 0x1);
        gbc.writeMem(0x91a1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x18a2);
        EXPECT(gbc.pc(), 0x91a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a1), 0xcb);
        EXPECT(gbc.readMem(0x91a2), 0x37);
        // CB 37 0208
        gbc.setState(0x152d, 0xb903, 0x3fc0, 0xb11b, 0x3b9, 0xd400, 0x1, 0x0);
        gbc.writeMem(0x152d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb903);
        EXPECT(gbc.pc(), 0x152f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0209
        gbc.setState(0xc139, 0x98e0, 0xc980, 0x28f2, 0x91dd, 0x7c33, 0x1, 0x0);
        gbc.writeMem(0xc139, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x98e0);
        EXPECT(gbc.pc(), 0xc13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc139), 0xcb);
        EXPECT(gbc.readMem(0xc13a), 0x37);
        // CB 37 020A
        gbc.setState(0xd568, 0xf92f, 0xb9a0, 0xcc2c, 0x91bc, 0x3f11, 0x1, 0x0);
        gbc.writeMem(0xd568, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf92f);
        EXPECT(gbc.pc(), 0xd56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd568), 0xcb);
        EXPECT(gbc.readMem(0xd569), 0x37);
        // CB 37 020B
        gbc.setState(0xdc99, 0xd784, 0x11c0, 0x301d, 0xa0cf, 0x33a5, 0x0, 0x0);
        gbc.writeMem(0xdc99, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd784);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc99), 0xcb);
        EXPECT(gbc.readMem(0xdc9a), 0x37);
        // CB 37 020C
        gbc.setState(0x98d5, 0x25d4, 0xc730, 0x25eb, 0x998d, 0x421, 0x1, 0x1);
        gbc.writeMem(0x98d5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x25d4);
        EXPECT(gbc.pc(), 0x98d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d5), 0xcb);
        EXPECT(gbc.readMem(0x98d6), 0x37);
        // CB 37 020D
        gbc.setState(0x2d76, 0x439a, 0x8a50, 0xdd5f, 0x8781, 0x83a4, 0x1, 0x0);
        gbc.writeMem(0x2d76, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x439a);
        EXPECT(gbc.pc(), 0x2d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 020E
        gbc.setState(0xae4b, 0xa606, 0x8dd0, 0xae59, 0xc856, 0xc324, 0x1, 0x0);
        gbc.writeMem(0xae4b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa606);
        EXPECT(gbc.pc(), 0xae4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4b), 0xcb);
        EXPECT(gbc.readMem(0xae4c), 0x37);
        // CB 37 020F
        gbc.setState(0xe65, 0xfb75, 0x2590, 0x5e03, 0x237c, 0xafbb, 0x1, 0x0);
        gbc.writeMem(0xe65, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfb75);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0211
        gbc.setState(0x1f34, 0x5c68, 0xcfd0, 0x6b46, 0x13cf, 0x648e, 0x1, 0x0);
        gbc.writeMem(0x1f34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5c68);
        EXPECT(gbc.pc(), 0x1f36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0213
        gbc.setState(0x8e43, 0xc86a, 0xdbe0, 0x551b, 0x1e71, 0x8cda, 0x0, 0x1);
        gbc.writeMem(0x8e43, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc86a);
        EXPECT(gbc.pc(), 0x8e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e43), 0xcb);
        EXPECT(gbc.readMem(0x8e44), 0x37);
        // CB 37 0214
        gbc.setState(0x6a26, 0x7528, 0x8b10, 0xea53, 0x9b1a, 0x7a6e, 0x1, 0x0);
        gbc.writeMem(0x6a26, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7528);
        EXPECT(gbc.pc(), 0x6a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0215
        gbc.setState(0x6215, 0x4f86, 0x2b20, 0x690, 0xcc6e, 0x2e14, 0x0, 0x1);
        gbc.writeMem(0x6215, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4f86);
        EXPECT(gbc.pc(), 0x6217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0216
        gbc.setState(0x8715, 0xcac8, 0xc6a0, 0x3d24, 0x437f, 0xa10b, 0x1, 0x0);
        gbc.writeMem(0x8715, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcac8);
        EXPECT(gbc.pc(), 0x8717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8715), 0xcb);
        EXPECT(gbc.readMem(0x8716), 0x37);
        // CB 37 0217
        gbc.setState(0x4010, 0xb1ee, 0x5470, 0x3783, 0x6e4a, 0x7e04, 0x1, 0x0);
        gbc.writeMem(0x4010, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb1ee);
        EXPECT(gbc.pc(), 0x4012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0218
        gbc.setState(0x2984, 0xd9c0, 0xeb80, 0x40a2, 0x3dcb, 0x742c, 0x1, 0x1);
        gbc.writeMem(0x2984, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd9c0);
        EXPECT(gbc.pc(), 0x2986);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0219
        gbc.setState(0xe9df, 0xa4a4, 0x4fe0, 0xfa84, 0x4430, 0xb94a, 0x0, 0x0);
        gbc.writeMem(0xe9df, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa4a4);
        EXPECT(gbc.pc(), 0xe9e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9df), 0xcb);
        EXPECT(gbc.readMem(0xe9e0), 0x37);
        // CB 37 021B
        gbc.setState(0xbf0f, 0xe6ac, 0xd730, 0x1866, 0x936f, 0xd370, 0x0, 0x0);
        gbc.writeMem(0xbf0f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe6ac);
        EXPECT(gbc.pc(), 0xbf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0f), 0xcb);
        EXPECT(gbc.readMem(0xbf10), 0x37);
        // CB 37 021C
        gbc.setState(0x7787, 0x60fe, 0x3a60, 0xcdac, 0xfbca, 0x7bef, 0x0, 0x0);
        gbc.writeMem(0x7787, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x60fe);
        EXPECT(gbc.pc(), 0x7789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 021D
        gbc.setState(0x66d7, 0xef33, 0x63b0, 0xe973, 0xf03f, 0x54a1, 0x0, 0x1);
        gbc.writeMem(0x66d7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xef33);
        EXPECT(gbc.pc(), 0x66d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 021E
        gbc.setState(0xde7d, 0x61af, 0xfc40, 0xed4, 0x794, 0x7c9f, 0x1, 0x1);
        gbc.writeMem(0xde7d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x61af);
        EXPECT(gbc.pc(), 0xde7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde7d), 0xcb);
        EXPECT(gbc.readMem(0xde7e), 0x37);
        // CB 37 021F
        gbc.setState(0xae2b, 0x8ed5, 0x8800, 0x59a7, 0xd0cd, 0xcf20, 0x1, 0x1);
        gbc.writeMem(0xae2b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8ed5);
        EXPECT(gbc.pc(), 0xae2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2b), 0xcb);
        EXPECT(gbc.readMem(0xae2c), 0x37);
        // CB 37 0220
        gbc.setState(0x86dd, 0x6342, 0x84d0, 0xfc16, 0x5ec0, 0x779f, 0x1, 0x1);
        gbc.writeMem(0x86dd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6342);
        EXPECT(gbc.pc(), 0x86df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86dd), 0xcb);
        EXPECT(gbc.readMem(0x86de), 0x37);
        // CB 37 0221
        gbc.setState(0xb768, 0x2426, 0x1770, 0x7814, 0x89b4, 0x41ee, 0x1, 0x0);
        gbc.writeMem(0xb768, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2426);
        EXPECT(gbc.pc(), 0xb76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb768), 0xcb);
        EXPECT(gbc.readMem(0xb769), 0x37);
        // CB 37 0222
        gbc.setState(0x1128, 0xc804, 0x260, 0xadc9, 0x56d0, 0xb793, 0x1, 0x0);
        gbc.writeMem(0x1128, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc804);
        EXPECT(gbc.pc(), 0x112a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0223
        gbc.setState(0xb974, 0xe19c, 0x3ca0, 0x13fd, 0x89ee, 0xee20, 0x0, 0x1);
        gbc.writeMem(0xb974, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe19c);
        EXPECT(gbc.pc(), 0xb976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb974), 0xcb);
        EXPECT(gbc.readMem(0xb975), 0x37);
        // CB 37 0224
        gbc.setState(0xd0d, 0xcf60, 0x6b30, 0x8cbe, 0xbb6c, 0xd51a, 0x0, 0x0);
        gbc.writeMem(0xd0d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xcf60);
        EXPECT(gbc.pc(), 0xd0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0225
        gbc.setState(0xb0eb, 0x5faa, 0x5580, 0x65da, 0xd0da, 0x1703, 0x1, 0x1);
        gbc.writeMem(0xb0eb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5faa);
        EXPECT(gbc.pc(), 0xb0ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0eb), 0xcb);
        EXPECT(gbc.readMem(0xb0ec), 0x37);
        // CB 37 0227
        gbc.setState(0x6cd8, 0xa6e5, 0x9c20, 0x736a, 0x717a, 0xa984, 0x1, 0x0);
        gbc.writeMem(0x6cd8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa6e5);
        EXPECT(gbc.pc(), 0x6cda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0228
        gbc.setState(0x45d1, 0x89be, 0xde70, 0xa241, 0xf61a, 0x2e96, 0x1, 0x1);
        gbc.writeMem(0x45d1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x89be);
        EXPECT(gbc.pc(), 0x45d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0229
        gbc.setState(0x76d4, 0x4e00, 0x7ea0, 0xff0c, 0x90b4, 0x7392, 0x0, 0x0);
        gbc.writeMem(0x76d4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4e00);
        EXPECT(gbc.pc(), 0x76d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 022A
        gbc.setState(0x4ed1, 0x76ed, 0xc8c0, 0x3545, 0x8d0, 0x9219, 0x1, 0x1);
        gbc.writeMem(0x4ed1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x76ed);
        EXPECT(gbc.pc(), 0x4ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 022B
        gbc.setState(0x25da, 0xf449, 0x9110, 0xd5b5, 0xb525, 0x886f, 0x1, 0x1);
        gbc.writeMem(0x25da, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf449);
        EXPECT(gbc.pc(), 0x25dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 022C
        gbc.setState(0x89c2, 0x6e1a, 0x2520, 0xce1d, 0xeeed, 0x6891, 0x0, 0x0);
        gbc.writeMem(0x89c2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6e1a);
        EXPECT(gbc.pc(), 0x89c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c2), 0xcb);
        EXPECT(gbc.readMem(0x89c3), 0x37);
        // CB 37 022D
        gbc.setState(0xadcc, 0xf321, 0x6030, 0x7e38, 0xb53b, 0x8d12, 0x1, 0x0);
        gbc.writeMem(0xadcc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf321);
        EXPECT(gbc.pc(), 0xadce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadcc), 0xcb);
        EXPECT(gbc.readMem(0xadcd), 0x37);
        // CB 37 022E
        gbc.setState(0x805a, 0x3c7b, 0x3460, 0x86ed, 0xaa44, 0x62fc, 0x0, 0x0);
        gbc.writeMem(0x805a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3c7b);
        EXPECT(gbc.pc(), 0x805c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x805a), 0xcb);
        EXPECT(gbc.readMem(0x805b), 0x37);
        // CB 37 022F
        gbc.setState(0x9653, 0x1fed, 0xbaf0, 0x3f9, 0x34db, 0xdd7c, 0x1, 0x0);
        gbc.writeMem(0x9653, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1fed);
        EXPECT(gbc.pc(), 0x9655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9653), 0xcb);
        EXPECT(gbc.readMem(0x9654), 0x37);
        // CB 37 0230
        gbc.setState(0x421a, 0x549a, 0x210, 0x8618, 0xab81, 0x8130, 0x1, 0x0);
        gbc.writeMem(0x421a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x549a);
        EXPECT(gbc.pc(), 0x421c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0231
        gbc.setState(0x25b3, 0xbc15, 0x4510, 0xb571, 0xa037, 0x68ed, 0x0, 0x0);
        gbc.writeMem(0x25b3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbc15);
        EXPECT(gbc.pc(), 0x25b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0232
        gbc.setState(0x8b04, 0x1e72, 0xcf80, 0xf44, 0xd2c1, 0xca36, 0x1, 0x0);
        gbc.writeMem(0x8b04, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1e72);
        EXPECT(gbc.pc(), 0x8b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b04), 0xcb);
        EXPECT(gbc.readMem(0x8b05), 0x37);
        // CB 37 0233
        gbc.setState(0xa420, 0x19e6, 0xda00, 0xeb95, 0xa388, 0x1dcb, 0x1, 0x1);
        gbc.writeMem(0xa420, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x19e6);
        EXPECT(gbc.pc(), 0xa422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa420), 0xcb);
        EXPECT(gbc.readMem(0xa421), 0x37);
        // CB 37 0234
        gbc.setState(0xc44a, 0xe126, 0xd730, 0x567d, 0x68c2, 0xe413, 0x0, 0x0);
        gbc.writeMem(0xc44a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe126);
        EXPECT(gbc.pc(), 0xc44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc44a), 0xcb);
        EXPECT(gbc.readMem(0xc44b), 0x37);
        // CB 37 0235
        gbc.setState(0x68ef, 0xb2fc, 0x91e0, 0xe7d3, 0xe60, 0xf585, 0x0, 0x1);
        gbc.writeMem(0x68ef, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb2fc);
        EXPECT(gbc.pc(), 0x68f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0236
        gbc.setState(0xa6af, 0x2f0, 0xeeb0, 0xd7e1, 0x32ab, 0xb74f, 0x0, 0x1);
        gbc.writeMem(0xa6af, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2f0);
        EXPECT(gbc.pc(), 0xa6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6af), 0xcb);
        EXPECT(gbc.readMem(0xa6b0), 0x37);
        // CB 37 0237
        gbc.setState(0x84a9, 0xe48b, 0x5850, 0xe48c, 0x2365, 0xd6ad, 0x0, 0x1);
        gbc.writeMem(0x84a9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe48b);
        EXPECT(gbc.pc(), 0x84ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a9), 0xcb);
        EXPECT(gbc.readMem(0x84aa), 0x37);
        // CB 37 0239
        gbc.setState(0x223b, 0x1c25, 0xc300, 0x29dd, 0xec12, 0x1dc2, 0x0, 0x0);
        gbc.writeMem(0x223b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1c25);
        EXPECT(gbc.pc(), 0x223d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 023A
        gbc.setState(0x87d4, 0x7e90, 0x7570, 0xfabb, 0x85fc, 0xede3, 0x1, 0x1);
        gbc.writeMem(0x87d4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7e90);
        EXPECT(gbc.pc(), 0x87d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d4), 0xcb);
        EXPECT(gbc.readMem(0x87d5), 0x37);
        // CB 37 023B
        gbc.setState(0x5df1, 0xd434, 0x6d90, 0x2596, 0x1e10, 0xfea, 0x1, 0x0);
        gbc.writeMem(0x5df1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd434);
        EXPECT(gbc.pc(), 0x5df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 023C
        gbc.setState(0x5ce5, 0xfc12, 0xed00, 0xfc96, 0x4cb2, 0x24b9, 0x0, 0x1);
        gbc.writeMem(0x5ce5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfc12);
        EXPECT(gbc.pc(), 0x5ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 023D
        gbc.setState(0x9e9e, 0x7761, 0x3ba0, 0xc166, 0xcf12, 0x4191, 0x1, 0x1);
        gbc.writeMem(0x9e9e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7761);
        EXPECT(gbc.pc(), 0x9ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9e), 0xcb);
        EXPECT(gbc.readMem(0x9e9f), 0x37);
        // CB 37 023E
        gbc.setState(0x5dff, 0x6089, 0xa840, 0xb473, 0x37b4, 0xfc83, 0x0, 0x1);
        gbc.writeMem(0x5dff, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6089);
        EXPECT(gbc.pc(), 0x5e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 023F
        gbc.setState(0x1df5, 0x8861, 0x4f0, 0x87d4, 0xbaf3, 0x5895, 0x0, 0x0);
        gbc.writeMem(0x1df5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0x1df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0240
        gbc.setState(0x1de0, 0xad4e, 0x31a0, 0x305c, 0x762d, 0x8287, 0x1, 0x0);
        gbc.writeMem(0x1de0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xad4e);
        EXPECT(gbc.pc(), 0x1de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0241
        gbc.setState(0x16a3, 0xa9f3, 0x3200, 0xfb6c, 0x7639, 0x9a06, 0x1, 0x1);
        gbc.writeMem(0x16a3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa9f3);
        EXPECT(gbc.pc(), 0x16a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0242
        gbc.setState(0x22b5, 0xea0a, 0x890, 0x132f, 0xae5, 0xd4f1, 0x1, 0x0);
        gbc.writeMem(0x22b5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xea0a);
        EXPECT(gbc.pc(), 0x22b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0243
        gbc.setState(0xb9f5, 0x4f1b, 0x4210, 0x6a86, 0x738e, 0xe954, 0x1, 0x1);
        gbc.writeMem(0xb9f5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4f1b);
        EXPECT(gbc.pc(), 0xb9f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f5), 0xcb);
        EXPECT(gbc.readMem(0xb9f6), 0x37);
        // CB 37 0244
        gbc.setState(0x2182, 0x4fb1, 0xce50, 0xf4f1, 0xef5e, 0x7324, 0x1, 0x1);
        gbc.writeMem(0x2182, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4fb1);
        EXPECT(gbc.pc(), 0x2184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0245
        gbc.setState(0x1431, 0x2292, 0x11f0, 0x33ba, 0x4ed0, 0xd6f9, 0x0, 0x0);
        gbc.writeMem(0x1431, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2292);
        EXPECT(gbc.pc(), 0x1433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0246
        gbc.setState(0x43c, 0x14fe, 0x61c0, 0x942b, 0x7edc, 0x9297, 0x0, 0x1);
        gbc.writeMem(0x43c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x14fe);
        EXPECT(gbc.pc(), 0x43e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0247
        gbc.setState(0xab34, 0x6750, 0xfda0, 0x5ddb, 0xeed7, 0xd477, 0x0, 0x0);
        gbc.writeMem(0xab34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6750);
        EXPECT(gbc.pc(), 0xab36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab34), 0xcb);
        EXPECT(gbc.readMem(0xab35), 0x37);
        // CB 37 0248
        gbc.setState(0x7ecf, 0x744c, 0x46e0, 0x9584, 0xb0e8, 0x9261, 0x1, 0x0);
        gbc.writeMem(0x7ecf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x744c);
        EXPECT(gbc.pc(), 0x7ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0249
        gbc.setState(0x2604, 0x6d2a, 0xc910, 0xfc41, 0x7d96, 0xd347, 0x1, 0x1);
        gbc.writeMem(0x2604, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6d2a);
        EXPECT(gbc.pc(), 0x2606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 024B
        gbc.setState(0x711f, 0xc7ae, 0x5db0, 0x79ca, 0x7567, 0xf034, 0x0, 0x0);
        gbc.writeMem(0x711f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc7ae);
        EXPECT(gbc.pc(), 0x7121);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 024C
        gbc.setState(0x409f, 0x1fbe, 0x2ca0, 0xece4, 0x2d4f, 0xc466, 0x0, 0x1);
        gbc.writeMem(0x409f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1fbe);
        EXPECT(gbc.pc(), 0x40a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 024D
        gbc.setState(0x84b9, 0x4394, 0xf230, 0x338c, 0x7766, 0x8863, 0x0, 0x0);
        gbc.writeMem(0x84b9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4394);
        EXPECT(gbc.pc(), 0x84bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b9), 0xcb);
        EXPECT(gbc.readMem(0x84ba), 0x37);
        // CB 37 024E
        gbc.setState(0x4c4f, 0x5f79, 0xe70, 0xee18, 0x9485, 0x3fff, 0x1, 0x0);
        gbc.writeMem(0x4c4f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5f79);
        EXPECT(gbc.pc(), 0x4c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 024F
        gbc.setState(0xeae8, 0x86b4, 0xe940, 0x82ce, 0xf10b, 0x4dc7, 0x1, 0x0);
        gbc.writeMem(0xeae8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x86b4);
        EXPECT(gbc.pc(), 0xeaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae8), 0xcb);
        EXPECT(gbc.readMem(0xeae9), 0x37);
        // CB 37 0250
        gbc.setState(0xb45d, 0x8eb7, 0x4a50, 0xb16d, 0x9e8c, 0x5fff, 0x0, 0x0);
        gbc.writeMem(0xb45d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8eb7);
        EXPECT(gbc.pc(), 0xb45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45d), 0xcb);
        EXPECT(gbc.readMem(0xb45e), 0x37);
        // CB 37 0251
        gbc.setState(0x2741, 0x33b5, 0x8b10, 0x8498, 0x1512, 0x4819, 0x1, 0x0);
        gbc.writeMem(0x2741, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x33b5);
        EXPECT(gbc.pc(), 0x2743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0252
        gbc.setState(0xe10f, 0xcc38, 0xacf0, 0x7df3, 0x8ff3, 0x77c3, 0x0, 0x0);
        gbc.writeMem(0xe10f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcc38);
        EXPECT(gbc.pc(), 0xe111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10f), 0xcb);
        EXPECT(gbc.readMem(0xe110), 0x37);
        // CB 37 0253
        gbc.setState(0x2262, 0xceb, 0xee30, 0x2cab, 0x3412, 0xf91f, 0x1, 0x0);
        gbc.writeMem(0x2262, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xceb);
        EXPECT(gbc.pc(), 0x2264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0254
        gbc.setState(0x347b, 0x5c75, 0xb2d0, 0x2af7, 0xc721, 0xec11, 0x1, 0x0);
        gbc.writeMem(0x347b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5c75);
        EXPECT(gbc.pc(), 0x347d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0255
        gbc.setState(0xeac6, 0xdc03, 0xafb0, 0x6587, 0x2e1c, 0x43ef, 0x0, 0x0);
        gbc.writeMem(0xeac6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdc03);
        EXPECT(gbc.pc(), 0xeac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeac6), 0xcb);
        EXPECT(gbc.readMem(0xeac7), 0x37);
        // CB 37 0256
        gbc.setState(0x938b, 0x29d6, 0xc050, 0x2655, 0x14d, 0x5954, 0x0, 0x0);
        gbc.writeMem(0x938b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x29d6);
        EXPECT(gbc.pc(), 0x938d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x938b), 0xcb);
        EXPECT(gbc.readMem(0x938c), 0x37);
        // CB 37 0257
        gbc.setState(0xc67a, 0xc429, 0x6d50, 0x7bbb, 0xbeb6, 0x237d, 0x1, 0x0);
        gbc.writeMem(0xc67a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc429);
        EXPECT(gbc.pc(), 0xc67c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67a), 0xcb);
        EXPECT(gbc.readMem(0xc67b), 0x37);
        // CB 37 0258
        gbc.setState(0x9189, 0x9f91, 0x36d0, 0x542a, 0x47a3, 0x3938, 0x0, 0x0);
        gbc.writeMem(0x9189, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9f91);
        EXPECT(gbc.pc(), 0x918b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9189), 0xcb);
        EXPECT(gbc.readMem(0x918a), 0x37);
        // CB 37 0259
        gbc.setState(0x91eb, 0x5ea6, 0xf4a0, 0x3f14, 0xf555, 0xa4a5, 0x0, 0x0);
        gbc.writeMem(0x91eb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5ea6);
        EXPECT(gbc.pc(), 0x91ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91eb), 0xcb);
        EXPECT(gbc.readMem(0x91ec), 0x37);
        // CB 37 025A
        gbc.setState(0x313c, 0x184e, 0x7dd0, 0x6429, 0x6248, 0x532a, 0x0, 0x0);
        gbc.writeMem(0x313c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x184e);
        EXPECT(gbc.pc(), 0x313e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 025B
        gbc.setState(0x5eee, 0x4c, 0xe1b0, 0x373, 0xf375, 0xe964, 0x1, 0x1);
        gbc.writeMem(0x5eee, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4c);
        EXPECT(gbc.pc(), 0x5ef0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 025C
        gbc.setState(0xd934, 0x7547, 0xb4e0, 0xfb8b, 0x52ae, 0xcdf0, 0x0, 0x1);
        gbc.writeMem(0xd934, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7547);
        EXPECT(gbc.pc(), 0xd936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd934), 0xcb);
        EXPECT(gbc.readMem(0xd935), 0x37);
        // CB 37 025D
        gbc.setState(0x1307, 0xbff2, 0x92c0, 0x3a60, 0x4dc, 0x7cb4, 0x1, 0x0);
        gbc.writeMem(0x1307, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbff2);
        EXPECT(gbc.pc(), 0x1309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 025E
        gbc.setState(0x5e0b, 0x687, 0xbe60, 0x8ec9, 0x7cbe, 0xb1c4, 0x0, 0x1);
        gbc.writeMem(0x5e0b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x687);
        EXPECT(gbc.pc(), 0x5e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 025F
        gbc.setState(0xe2d2, 0xa648, 0x1af0, 0xc32b, 0xc041, 0xa3e5, 0x1, 0x1);
        gbc.writeMem(0xe2d2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa648);
        EXPECT(gbc.pc(), 0xe2d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d2), 0xcb);
        EXPECT(gbc.readMem(0xe2d3), 0x37);
        // CB 37 0260
        gbc.setState(0x96c9, 0x3da9, 0x7920, 0x5bd3, 0xfc01, 0xfc6d, 0x1, 0x1);
        gbc.writeMem(0x96c9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3da9);
        EXPECT(gbc.pc(), 0x96cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c9), 0xcb);
        EXPECT(gbc.readMem(0x96ca), 0x37);
        // CB 37 0261
        gbc.setState(0x13d7, 0xb350, 0xceb0, 0xb440, 0x1eb4, 0xa024, 0x1, 0x0);
        gbc.writeMem(0x13d7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb350);
        EXPECT(gbc.pc(), 0x13d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0262
        gbc.setState(0xe0f1, 0xd3bb, 0x31b0, 0xf237, 0xffbc, 0x770a, 0x0, 0x0);
        gbc.writeMem(0xe0f1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd3bb);
        EXPECT(gbc.pc(), 0xe0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f1), 0xcb);
        EXPECT(gbc.readMem(0xe0f2), 0x37);
        // CB 37 0263
        gbc.setState(0x8e5d, 0x7c6d, 0x6680, 0x2989, 0xf87e, 0x60ea, 0x0, 0x0);
        gbc.writeMem(0x8e5d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7c6d);
        EXPECT(gbc.pc(), 0x8e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5d), 0xcb);
        EXPECT(gbc.readMem(0x8e5e), 0x37);
        // CB 37 0265
        gbc.setState(0x2a32, 0x4856, 0xa460, 0x80fe, 0x3285, 0x2ad7, 0x1, 0x0);
        gbc.writeMem(0x2a32, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4856);
        EXPECT(gbc.pc(), 0x2a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0266
        gbc.setState(0x7429, 0x3b57, 0xaa40, 0xc935, 0x8643, 0x52be, 0x0, 0x1);
        gbc.writeMem(0x7429, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3b57);
        EXPECT(gbc.pc(), 0x742b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0267
        gbc.setState(0xb6a2, 0xaeb5, 0x16f0, 0xf979, 0x8137, 0xa526, 0x0, 0x0);
        gbc.writeMem(0xb6a2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xaeb5);
        EXPECT(gbc.pc(), 0xb6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a2), 0xcb);
        EXPECT(gbc.readMem(0xb6a3), 0x37);
        // CB 37 0269
        gbc.setState(0x989e, 0x1ed5, 0x2f50, 0xd3e9, 0xeb02, 0x7e75, 0x0, 0x1);
        gbc.writeMem(0x989e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1ed5);
        EXPECT(gbc.pc(), 0x98a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x989e), 0xcb);
        EXPECT(gbc.readMem(0x989f), 0x37);
        // CB 37 026A
        gbc.setState(0xa12e, 0xba43, 0xdb0, 0xb146, 0x9f98, 0x6820, 0x1, 0x0);
        gbc.writeMem(0xa12e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xba43);
        EXPECT(gbc.pc(), 0xa130);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa12e), 0xcb);
        EXPECT(gbc.readMem(0xa12f), 0x37);
        // CB 37 026B
        gbc.setState(0xb2f1, 0xe794, 0x9830, 0xb58b, 0xafa8, 0xbea0, 0x1, 0x0);
        gbc.writeMem(0xb2f1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe794);
        EXPECT(gbc.pc(), 0xb2f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f1), 0xcb);
        EXPECT(gbc.readMem(0xb2f2), 0x37);
        // CB 37 026C
        gbc.setState(0x6dcc, 0xbc59, 0xdbe0, 0x3846, 0x471a, 0x3520, 0x1, 0x0);
        gbc.writeMem(0x6dcc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xbc59);
        EXPECT(gbc.pc(), 0x6dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 026D
        gbc.setState(0x442, 0x2073, 0x6e40, 0x8ca3, 0x907, 0xaa6f, 0x1, 0x0);
        gbc.writeMem(0x442, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2073);
        EXPECT(gbc.pc(), 0x444);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 026E
        gbc.setState(0x28dc, 0xcf20, 0xf6f0, 0xf2c3, 0x5fb9, 0x35fe, 0x0, 0x1);
        gbc.writeMem(0x28dc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xcf20);
        EXPECT(gbc.pc(), 0x28de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 026F
        gbc.setState(0xe39c, 0xdb2b, 0x50d0, 0xeabf, 0x67eb, 0x8cd5, 0x1, 0x1);
        gbc.writeMem(0xe39c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdb2b);
        EXPECT(gbc.pc(), 0xe39e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe39c), 0xcb);
        EXPECT(gbc.readMem(0xe39d), 0x37);
        // CB 37 0270
        gbc.setState(0xae7d, 0x61bd, 0xd950, 0x7224, 0xf01d, 0x3e28, 0x0, 0x1);
        gbc.writeMem(0xae7d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x61bd);
        EXPECT(gbc.pc(), 0xae7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7d), 0xcb);
        EXPECT(gbc.readMem(0xae7e), 0x37);
        // CB 37 0271
        gbc.setState(0x4543, 0xc465, 0x5b40, 0xa8a5, 0x562, 0xef7d, 0x1, 0x1);
        gbc.writeMem(0x4543, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc465);
        EXPECT(gbc.pc(), 0x4545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0272
        gbc.setState(0x5acf, 0xb78f, 0xee70, 0x3064, 0xe166, 0xc3f8, 0x1, 0x1);
        gbc.writeMem(0x5acf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb78f);
        EXPECT(gbc.pc(), 0x5ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0273
        gbc.setState(0x14cc, 0x4ef6, 0x1620, 0xac2d, 0x620c, 0x2b40, 0x0, 0x1);
        gbc.writeMem(0x14cc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4ef6);
        EXPECT(gbc.pc(), 0x14ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0274
        gbc.setState(0xfaf, 0x1c41, 0x97b0, 0x3146, 0x993e, 0xb4c6, 0x1, 0x1);
        gbc.writeMem(0xfaf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1c41);
        EXPECT(gbc.pc(), 0xfb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0275
        gbc.setState(0x5c8d, 0xf93c, 0xab60, 0x9625, 0x8ea5, 0x7c1c, 0x1, 0x0);
        gbc.writeMem(0x5c8d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf93c);
        EXPECT(gbc.pc(), 0x5c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0276
        gbc.setState(0xa14b, 0x513f, 0xab20, 0x96c2, 0x4327, 0xb4e6, 0x0, 0x1);
        gbc.writeMem(0xa14b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x513f);
        EXPECT(gbc.pc(), 0xa14d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa14b), 0xcb);
        EXPECT(gbc.readMem(0xa14c), 0x37);
        // CB 37 0278
        gbc.setState(0x1cfe, 0x5ab7, 0x45c0, 0x5359, 0x59bc, 0xf0a0, 0x1, 0x0);
        gbc.writeMem(0x1cfe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5ab7);
        EXPECT(gbc.pc(), 0x1d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0279
        gbc.setState(0x427b, 0x8695, 0x50e0, 0x4b75, 0x48d1, 0xd658, 0x1, 0x1);
        gbc.writeMem(0x427b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8695);
        EXPECT(gbc.pc(), 0x427d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 027A
        gbc.setState(0xe76c, 0xf7b8, 0x68a0, 0x5c3b, 0xc025, 0x3b00, 0x1, 0x0);
        gbc.writeMem(0xe76c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf7b8);
        EXPECT(gbc.pc(), 0xe76e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76c), 0xcb);
        EXPECT(gbc.readMem(0xe76d), 0x37);
        // CB 37 027B
        gbc.setState(0x5f64, 0xad3, 0x79e0, 0xfff5, 0x1879, 0xc1e8, 0x1, 0x1);
        gbc.writeMem(0x5f64, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xad3);
        EXPECT(gbc.pc(), 0x5f66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 027C
        gbc.setState(0xdbb9, 0x531c, 0x9eb0, 0x47ae, 0x5a3, 0x4f32, 0x1, 0x1);
        gbc.writeMem(0xdbb9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x531c);
        EXPECT(gbc.pc(), 0xdbbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb9), 0xcb);
        EXPECT(gbc.readMem(0xdbba), 0x37);
        // CB 37 027D
        gbc.setState(0xe74c, 0xadf6, 0xbbe0, 0x63aa, 0x47ac, 0x50ee, 0x0, 0x1);
        gbc.writeMem(0xe74c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xadf6);
        EXPECT(gbc.pc(), 0xe74e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe74c), 0xcb);
        EXPECT(gbc.readMem(0xe74d), 0x37);
        // CB 37 027E
        gbc.setState(0xc76d, 0x8edd, 0x9450, 0x7912, 0x4a57, 0xea18, 0x0, 0x0);
        gbc.writeMem(0xc76d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8edd);
        EXPECT(gbc.pc(), 0xc76f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc76d), 0xcb);
        EXPECT(gbc.readMem(0xc76e), 0x37);
        // CB 37 027F
        gbc.setState(0x1ea4, 0x55f3, 0x4e80, 0xd89f, 0xfbac, 0xdaa1, 0x1, 0x1);
        gbc.writeMem(0x1ea4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x55f3);
        EXPECT(gbc.pc(), 0x1ea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0280
        gbc.setState(0x1ab3, 0xe8dc, 0xe750, 0xe0d, 0x27dc, 0x55da, 0x0, 0x0);
        gbc.writeMem(0x1ab3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0x1ab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0281
        gbc.setState(0xe243, 0x9f10, 0xb90, 0xa071, 0x7dcd, 0x72e9, 0x1, 0x1);
        gbc.writeMem(0xe243, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9f10);
        EXPECT(gbc.pc(), 0xe245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe243), 0xcb);
        EXPECT(gbc.readMem(0xe244), 0x37);
        // CB 37 0282
        gbc.setState(0x7cbe, 0xa6f7, 0x90a0, 0x10a6, 0xcd62, 0x313d, 0x0, 0x1);
        gbc.writeMem(0x7cbe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa6f7);
        EXPECT(gbc.pc(), 0x7cc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0284
        gbc.setState(0x180b, 0xe782, 0x7c40, 0xf7fb, 0x75be, 0x2f5f, 0x0, 0x0);
        gbc.writeMem(0x180b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe782);
        EXPECT(gbc.pc(), 0x180d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0285
        gbc.setState(0x115e, 0x9a4e, 0x42a0, 0x45a1, 0x2247, 0x63fc, 0x0, 0x0);
        gbc.writeMem(0x115e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9a4e);
        EXPECT(gbc.pc(), 0x1160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0286
        gbc.setState(0x2709, 0x2bea, 0x32a0, 0x729e, 0x6cde, 0xdeb, 0x0, 0x0);
        gbc.writeMem(0x2709, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2bea);
        EXPECT(gbc.pc(), 0x270b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0287
        gbc.setState(0x32fd, 0xfb95, 0x84b0, 0xf8dc, 0x7643, 0x7514, 0x1, 0x0);
        gbc.writeMem(0x32fd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfb95);
        EXPECT(gbc.pc(), 0x32ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0288
        gbc.setState(0xa6e6, 0xfc08, 0x7ee0, 0xa7cb, 0xfb9, 0xb13e, 0x1, 0x1);
        gbc.writeMem(0xa6e6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfc08);
        EXPECT(gbc.pc(), 0xa6e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e6), 0xcb);
        EXPECT(gbc.readMem(0xa6e7), 0x37);
        // CB 37 0289
        gbc.setState(0xa724, 0x454d, 0xe800, 0x602, 0x1b63, 0x5006, 0x1, 0x0);
        gbc.writeMem(0xa724, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x454d);
        EXPECT(gbc.pc(), 0xa726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa724), 0xcb);
        EXPECT(gbc.readMem(0xa725), 0x37);
        // CB 37 028A
        gbc.setState(0x3db2, 0x2799, 0x7a70, 0xcdf5, 0x49cc, 0xa1a7, 0x1, 0x1);
        gbc.writeMem(0x3db2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2799);
        EXPECT(gbc.pc(), 0x3db4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 028B
        gbc.setState(0x5aff, 0x1cb4, 0x8240, 0xab10, 0x343b, 0x17d4, 0x1, 0x0);
        gbc.writeMem(0x5aff, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1cb4);
        EXPECT(gbc.pc(), 0x5b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 028C
        gbc.setState(0x478f, 0x5292, 0x34f0, 0xd092, 0x762, 0x95a3, 0x0, 0x1);
        gbc.writeMem(0x478f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5292);
        EXPECT(gbc.pc(), 0x4791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 028D
        gbc.setState(0x3279, 0x93a1, 0xad0, 0x455f, 0x578e, 0x1b9f, 0x1, 0x0);
        gbc.writeMem(0x3279, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x93a1);
        EXPECT(gbc.pc(), 0x327b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 028E
        gbc.setState(0x227f, 0xab9f, 0x3ba0, 0x39cb, 0xaef2, 0x7079, 0x0, 0x1);
        gbc.writeMem(0x227f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xab9f);
        EXPECT(gbc.pc(), 0x2281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 028F
        gbc.setState(0x708b, 0x9ec0, 0xa8b0, 0x5b9e, 0x91a4, 0x731d, 0x1, 0x0);
        gbc.writeMem(0x708b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9ec0);
        EXPECT(gbc.pc(), 0x708d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0290
        gbc.setState(0x6ce2, 0x3aea, 0x40a0, 0x253a, 0x76bd, 0x2860, 0x1, 0x0);
        gbc.writeMem(0x6ce2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3aea);
        EXPECT(gbc.pc(), 0x6ce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0291
        gbc.setState(0x9620, 0xaebb, 0x9d50, 0x2c83, 0x8fc8, 0xdfb, 0x1, 0x0);
        gbc.writeMem(0x9620, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaebb);
        EXPECT(gbc.pc(), 0x9622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9620), 0xcb);
        EXPECT(gbc.readMem(0x9621), 0x37);
        // CB 37 0292
        gbc.setState(0xb1d, 0xf51, 0xa3b0, 0xbfdc, 0xf5d5, 0x7e60, 0x1, 0x1);
        gbc.writeMem(0xb1d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf51);
        EXPECT(gbc.pc(), 0xb1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0293
        gbc.setState(0x73cb, 0x69b8, 0x1190, 0x707b, 0x1f93, 0xe847, 0x1, 0x1);
        gbc.writeMem(0x73cb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x69b8);
        EXPECT(gbc.pc(), 0x73cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0294
        gbc.setState(0xc380, 0x4243, 0xca0, 0xcfaa, 0xb9a2, 0x878b, 0x1, 0x1);
        gbc.writeMem(0xc380, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4243);
        EXPECT(gbc.pc(), 0xc382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc380), 0xcb);
        EXPECT(gbc.readMem(0xc381), 0x37);
        // CB 37 0295
        gbc.setState(0xa0f, 0xa130, 0xb80, 0x4226, 0x789b, 0x2c78, 0x1, 0x1);
        gbc.writeMem(0xa0f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa130);
        EXPECT(gbc.pc(), 0xa11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0296
        gbc.setState(0x835, 0xd192, 0x19a0, 0xa080, 0x3d23, 0xcba9, 0x1, 0x0);
        gbc.writeMem(0x835, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd192);
        EXPECT(gbc.pc(), 0x837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0297
        gbc.setState(0xa7ca, 0x4246, 0xefc0, 0xf748, 0x918b, 0xb200, 0x1, 0x1);
        gbc.writeMem(0xa7ca, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4246);
        EXPECT(gbc.pc(), 0xa7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ca), 0xcb);
        EXPECT(gbc.readMem(0xa7cb), 0x37);
        // CB 37 0298
        gbc.setState(0x7aab, 0xcd24, 0x83e0, 0x9309, 0xa617, 0x784f, 0x0, 0x1);
        gbc.writeMem(0x7aab, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcd24);
        EXPECT(gbc.pc(), 0x7aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0299
        gbc.setState(0xeca, 0xb86, 0x4a50, 0xd1ac, 0x4aa7, 0x1ae5, 0x0, 0x1);
        gbc.writeMem(0xeca, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb86);
        EXPECT(gbc.pc(), 0xecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 029A
        gbc.setState(0x86e3, 0x96e6, 0x31b0, 0xcadc, 0xd6e4, 0x17dd, 0x0, 0x0);
        gbc.writeMem(0x86e3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x96e6);
        EXPECT(gbc.pc(), 0x86e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e3), 0xcb);
        EXPECT(gbc.readMem(0x86e4), 0x37);
        // CB 37 029B
        gbc.setState(0x7aba, 0x8171, 0xe640, 0x7008, 0x3a7d, 0x4c51, 0x1, 0x0);
        gbc.writeMem(0x7aba, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8171);
        EXPECT(gbc.pc(), 0x7abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 029C
        gbc.setState(0x265b, 0x27d3, 0xc270, 0x3289, 0x1a9a, 0xd514, 0x0, 0x0);
        gbc.writeMem(0x265b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x27d3);
        EXPECT(gbc.pc(), 0x265d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 029D
        gbc.setState(0xa7ae, 0xe1ee, 0x8b10, 0x6502, 0x9c27, 0xf7b6, 0x1, 0x1);
        gbc.writeMem(0xa7ae, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe1ee);
        EXPECT(gbc.pc(), 0xa7b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ae), 0xcb);
        EXPECT(gbc.readMem(0xa7af), 0x37);
        // CB 37 029F
        gbc.setState(0x13b9, 0x9c14, 0x3480, 0x852a, 0x635c, 0x5e2d, 0x1, 0x0);
        gbc.writeMem(0x13b9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9c14);
        EXPECT(gbc.pc(), 0x13bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02A1
        gbc.setState(0xb0af, 0xeb03, 0x1000, 0xbf2c, 0xbce6, 0xf21, 0x0, 0x0);
        gbc.writeMem(0xb0af, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xeb03);
        EXPECT(gbc.pc(), 0xb0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0af), 0xcb);
        EXPECT(gbc.readMem(0xb0b0), 0x37);
        // CB 37 02A2
        gbc.setState(0x2c01, 0x900, 0xc640, 0x95, 0x776b, 0xeb5c, 0x1, 0x1);
        gbc.writeMem(0x2c01, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x900);
        EXPECT(gbc.pc(), 0x2c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02A3
        gbc.setState(0x1be6, 0x62b0, 0xbd50, 0xee76, 0xedb4, 0xb155, 0x1, 0x1);
        gbc.writeMem(0x1be6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x62b0);
        EXPECT(gbc.pc(), 0x1be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02A4
        gbc.setState(0x99e2, 0xf161, 0xc5e0, 0x3bc4, 0x7aac, 0x6c0, 0x0, 0x1);
        gbc.writeMem(0x99e2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf161);
        EXPECT(gbc.pc(), 0x99e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e2), 0xcb);
        EXPECT(gbc.readMem(0x99e3), 0x37);
        // CB 37 02A5
        gbc.setState(0x379d, 0x8af9, 0x1aa0, 0x1bc7, 0xb4c9, 0x7535, 0x0, 0x1);
        gbc.writeMem(0x379d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8af9);
        EXPECT(gbc.pc(), 0x379f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02A6
        gbc.setState(0xec5d, 0x2691, 0xecc0, 0x2194, 0x80d1, 0xd55d, 0x1, 0x1);
        gbc.writeMem(0xec5d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2691);
        EXPECT(gbc.pc(), 0xec5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5d), 0xcb);
        EXPECT(gbc.readMem(0xec5e), 0x37);
        // CB 37 02A7
        gbc.setState(0x92f, 0xf7c5, 0x9f50, 0x2fd2, 0x7a2d, 0x47c6, 0x1, 0x0);
        gbc.writeMem(0x92f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf7c5);
        EXPECT(gbc.pc(), 0x931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02A8
        gbc.setState(0xb269, 0x2183, 0x390, 0xaaaf, 0xee66, 0x5f9d, 0x1, 0x0);
        gbc.writeMem(0xb269, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2183);
        EXPECT(gbc.pc(), 0xb26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb269), 0xcb);
        EXPECT(gbc.readMem(0xb26a), 0x37);
        // CB 37 02A9
        gbc.setState(0xf42, 0xcc21, 0x18a0, 0xc12, 0x687c, 0x74, 0x1, 0x1);
        gbc.writeMem(0xf42, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xcc21);
        EXPECT(gbc.pc(), 0xf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02AA
        gbc.setState(0xe6b4, 0x5bd0, 0xdfb0, 0x3c97, 0xe251, 0xb3e4, 0x1, 0x1);
        gbc.writeMem(0xe6b4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5bd0);
        EXPECT(gbc.pc(), 0xe6b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b4), 0xcb);
        EXPECT(gbc.readMem(0xe6b5), 0x37);
        // CB 37 02AB
        gbc.setState(0xf41, 0x47ed, 0xe8a0, 0x1b62, 0xdb6b, 0xeced, 0x0, 0x1);
        gbc.writeMem(0xf41, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x47ed);
        EXPECT(gbc.pc(), 0xf43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02AC
        gbc.setState(0xa4ab, 0x9469, 0xc210, 0x9081, 0xb315, 0x3456, 0x0, 0x0);
        gbc.writeMem(0xa4ab, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9469);
        EXPECT(gbc.pc(), 0xa4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ab), 0xcb);
        EXPECT(gbc.readMem(0xa4ac), 0x37);
        // CB 37 02AD
        gbc.setState(0x8cd4, 0xb6ab, 0x2580, 0x8fd4, 0x1bd9, 0x7f89, 0x1, 0x1);
        gbc.writeMem(0x8cd4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb6ab);
        EXPECT(gbc.pc(), 0x8cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd4), 0xcb);
        EXPECT(gbc.readMem(0x8cd5), 0x37);
        // CB 37 02AE
        gbc.setState(0x316a, 0x97ef, 0x6e80, 0x665a, 0x32e5, 0x8b7b, 0x0, 0x1);
        gbc.writeMem(0x316a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x97ef);
        EXPECT(gbc.pc(), 0x316c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02AF
        gbc.setState(0xefe3, 0x1649, 0x78a0, 0x99a6, 0x609b, 0xca4d, 0x0, 0x0);
        gbc.writeMem(0xefe3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1649);
        EXPECT(gbc.pc(), 0xefe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe3), 0xcb);
        EXPECT(gbc.readMem(0xefe4), 0x37);
        // CB 37 02B0
        gbc.setState(0x672c, 0x18e8, 0x770, 0x37ea, 0x4536, 0x7d49, 0x0, 0x1);
        gbc.writeMem(0x672c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x18e8);
        EXPECT(gbc.pc(), 0x672e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02B1
        gbc.setState(0xa979, 0x25b8, 0x6890, 0xcc8b, 0x132, 0xc701, 0x1, 0x0);
        gbc.writeMem(0xa979, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x25b8);
        EXPECT(gbc.pc(), 0xa97b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa979), 0xcb);
        EXPECT(gbc.readMem(0xa97a), 0x37);
        // CB 37 02B2
        gbc.setState(0xa26c, 0xa8ad, 0xa5c0, 0xb614, 0x4788, 0x76b1, 0x1, 0x0);
        gbc.writeMem(0xa26c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa8ad);
        EXPECT(gbc.pc(), 0xa26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa26c), 0xcb);
        EXPECT(gbc.readMem(0xa26d), 0x37);
        // CB 37 02B3
        gbc.setState(0x94f5, 0x96b5, 0xfc30, 0x68b0, 0x218a, 0x7a8a, 0x0, 0x1);
        gbc.writeMem(0x94f5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x96b5);
        EXPECT(gbc.pc(), 0x94f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f5), 0xcb);
        EXPECT(gbc.readMem(0x94f6), 0x37);
        // CB 37 02B4
        gbc.setState(0xb93a, 0x3eb2, 0x43f0, 0xd66c, 0x3f7, 0x4959, 0x0, 0x0);
        gbc.writeMem(0xb93a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3eb2);
        EXPECT(gbc.pc(), 0xb93c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93a), 0xcb);
        EXPECT(gbc.readMem(0xb93b), 0x37);
        // CB 37 02B5
        gbc.setState(0xd587, 0x194a, 0xbed0, 0x82be, 0xebfa, 0xa203, 0x1, 0x0);
        gbc.writeMem(0xd587, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x194a);
        EXPECT(gbc.pc(), 0xd589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd587), 0xcb);
        EXPECT(gbc.readMem(0xd588), 0x37);
        // CB 37 02B6
        gbc.setState(0xbc6c, 0x9ae1, 0x7d70, 0xb53b, 0x7884, 0xf59a, 0x0, 0x1);
        gbc.writeMem(0xbc6c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9ae1);
        EXPECT(gbc.pc(), 0xbc6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6c), 0xcb);
        EXPECT(gbc.readMem(0xbc6d), 0x37);
        // CB 37 02B7
        gbc.setState(0xa5d5, 0xa15b, 0x48c0, 0x7488, 0xd72e, 0xecb9, 0x1, 0x0);
        gbc.writeMem(0xa5d5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa15b);
        EXPECT(gbc.pc(), 0xa5d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d5), 0xcb);
        EXPECT(gbc.readMem(0xa5d6), 0x37);
        // CB 37 02B8
        gbc.setState(0x9d00, 0x7e67, 0xd6c0, 0x5250, 0x208a, 0x264b, 0x0, 0x1);
        gbc.writeMem(0x9d00, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7e67);
        EXPECT(gbc.pc(), 0x9d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d00), 0xcb);
        EXPECT(gbc.readMem(0x9d01), 0x37);
        // CB 37 02B9
        gbc.setState(0x9725, 0x6c89, 0xb7d0, 0xfbd4, 0xc130, 0x183e, 0x0, 0x0);
        gbc.writeMem(0x9725, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6c89);
        EXPECT(gbc.pc(), 0x9727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9725), 0xcb);
        EXPECT(gbc.readMem(0x9726), 0x37);
        // CB 37 02BA
        gbc.setState(0x52f5, 0x21c0, 0xb520, 0x3fe5, 0x8711, 0x383e, 0x1, 0x0);
        gbc.writeMem(0x52f5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x21c0);
        EXPECT(gbc.pc(), 0x52f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02BC
        gbc.setState(0x306c, 0xad27, 0xedd0, 0x5822, 0x5956, 0x334f, 0x1, 0x0);
        gbc.writeMem(0x306c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xad27);
        EXPECT(gbc.pc(), 0x306e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02BD
        gbc.setState(0xd8db, 0xc6ca, 0xe540, 0x718f, 0xdbb2, 0xbdca, 0x1, 0x1);
        gbc.writeMem(0xd8db, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xc6ca);
        EXPECT(gbc.pc(), 0xd8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8db), 0xcb);
        EXPECT(gbc.readMem(0xd8dc), 0x37);
        // CB 37 02BE
        gbc.setState(0x12e0, 0x8ee4, 0xf7e0, 0x333c, 0x16b0, 0xe45c, 0x1, 0x0);
        gbc.writeMem(0x12e0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8ee4);
        EXPECT(gbc.pc(), 0x12e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02BF
        gbc.setState(0xdd3e, 0xd98f, 0x2800, 0xd318, 0xa6d8, 0x74aa, 0x1, 0x0);
        gbc.writeMem(0xdd3e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd98f);
        EXPECT(gbc.pc(), 0xdd40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd3e), 0xcb);
        EXPECT(gbc.readMem(0xdd3f), 0x37);
        // CB 37 02C0
        gbc.setState(0xf94, 0x7573, 0x8120, 0x634b, 0xc83c, 0x144d, 0x0, 0x1);
        gbc.writeMem(0xf94, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7573);
        EXPECT(gbc.pc(), 0xf96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C1
        gbc.setState(0x5c0b, 0x3d98, 0x4b00, 0x1e15, 0xb5f5, 0x9cdb, 0x0, 0x0);
        gbc.writeMem(0x5c0b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3d98);
        EXPECT(gbc.pc(), 0x5c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C3
        gbc.setState(0x5b6f, 0x2460, 0x79d0, 0x267a, 0x4207, 0xc63d, 0x1, 0x1);
        gbc.writeMem(0x5b6f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2460);
        EXPECT(gbc.pc(), 0x5b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C4
        gbc.setState(0x3ba6, 0xe9b4, 0x34b0, 0x51bb, 0x2b28, 0x7969, 0x1, 0x1);
        gbc.writeMem(0x3ba6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe9b4);
        EXPECT(gbc.pc(), 0x3ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C5
        gbc.setState(0x2e46, 0x2b47, 0x3680, 0x9bee, 0x5061, 0xa4b2, 0x1, 0x1);
        gbc.writeMem(0x2e46, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2b47);
        EXPECT(gbc.pc(), 0x2e48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C6
        gbc.setState(0xa489, 0x51ed, 0xfd20, 0x3103, 0x5671, 0xb226, 0x0, 0x0);
        gbc.writeMem(0xa489, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x51ed);
        EXPECT(gbc.pc(), 0xa48b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa489), 0xcb);
        EXPECT(gbc.readMem(0xa48a), 0x37);
        // CB 37 02C7
        gbc.setState(0xde79, 0x8786, 0x8830, 0x8ece, 0x7a9a, 0xb70b, 0x0, 0x1);
        gbc.writeMem(0xde79, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8786);
        EXPECT(gbc.pc(), 0xde7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde79), 0xcb);
        EXPECT(gbc.readMem(0xde7a), 0x37);
        // CB 37 02C8
        gbc.setState(0x58e2, 0xbec7, 0xab20, 0xb36b, 0x7103, 0x7587, 0x0, 0x0);
        gbc.writeMem(0x58e2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbec7);
        EXPECT(gbc.pc(), 0x58e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02C9
        gbc.setState(0xd581, 0x1cc3, 0xcf50, 0xdddc, 0xe201, 0xf421, 0x0, 0x1);
        gbc.writeMem(0xd581, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1cc3);
        EXPECT(gbc.pc(), 0xd583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd581), 0xcb);
        EXPECT(gbc.readMem(0xd582), 0x37);
        // CB 37 02CA
        gbc.setState(0x2d42, 0x6948, 0xc260, 0x68b1, 0x86da, 0x1406, 0x0, 0x0);
        gbc.writeMem(0x2d42, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6948);
        EXPECT(gbc.pc(), 0x2d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02CB
        gbc.setState(0xbd71, 0xc8ba, 0x3b0, 0xa05b, 0x3088, 0x2199, 0x0, 0x0);
        gbc.writeMem(0xbd71, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc8ba);
        EXPECT(gbc.pc(), 0xbd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd71), 0xcb);
        EXPECT(gbc.readMem(0xbd72), 0x37);
        // CB 37 02CC
        gbc.setState(0x8061, 0xd0ab, 0xcd30, 0x3b08, 0xb157, 0x8e21, 0x1, 0x1);
        gbc.writeMem(0x8061, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd0ab);
        EXPECT(gbc.pc(), 0x8063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8061), 0xcb);
        EXPECT(gbc.readMem(0x8062), 0x37);
        // CB 37 02CD
        gbc.setState(0x49d1, 0xe54, 0xaed0, 0x1ab7, 0xa284, 0x8722, 0x1, 0x1);
        gbc.writeMem(0x49d1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe54);
        EXPECT(gbc.pc(), 0x49d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02CE
        gbc.setState(0x6c11, 0x8396, 0xb2f0, 0xaa9, 0x941c, 0xb545, 0x1, 0x0);
        gbc.writeMem(0x6c11, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8396);
        EXPECT(gbc.pc(), 0x6c13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02CF
        gbc.setState(0x6f16, 0x6b08, 0x9b90, 0xd92a, 0x188f, 0x991, 0x0, 0x0);
        gbc.writeMem(0x6f16, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6b08);
        EXPECT(gbc.pc(), 0x6f18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02D0
        gbc.setState(0xaf47, 0x63ff, 0x7f40, 0xd8e8, 0x274b, 0xb7a9, 0x1, 0x0);
        gbc.writeMem(0xaf47, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x63ff);
        EXPECT(gbc.pc(), 0xaf49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf47), 0xcb);
        EXPECT(gbc.readMem(0xaf48), 0x37);
        // CB 37 02D1
        gbc.setState(0x8f81, 0x1f9f, 0x7e70, 0xa25f, 0xdb0e, 0x335e, 0x0, 0x1);
        gbc.writeMem(0x8f81, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x1f9f);
        EXPECT(gbc.pc(), 0x8f83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f81), 0xcb);
        EXPECT(gbc.readMem(0x8f82), 0x37);
        // CB 37 02D2
        gbc.setState(0x3e5a, 0xbff4, 0x1850, 0x90dd, 0xa7e1, 0x8343, 0x0, 0x1);
        gbc.writeMem(0x3e5a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbff4);
        EXPECT(gbc.pc(), 0x3e5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02D3
        gbc.setState(0x332b, 0x777a, 0x9080, 0xf4f1, 0x2e3c, 0xc3a4, 0x0, 0x1);
        gbc.writeMem(0x332b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x777a);
        EXPECT(gbc.pc(), 0x332d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02D5
        gbc.setState(0xe30a, 0x16a8, 0xcb70, 0x4b7, 0x39a1, 0x455a, 0x1, 0x0);
        gbc.writeMem(0xe30a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x16a8);
        EXPECT(gbc.pc(), 0xe30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe30a), 0xcb);
        EXPECT(gbc.readMem(0xe30b), 0x37);
        // CB 37 02D6
        gbc.setState(0x321a, 0x6df3, 0x2a10, 0x6e48, 0x6dc0, 0x70c9, 0x1, 0x1);
        gbc.writeMem(0x321a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6df3);
        EXPECT(gbc.pc(), 0x321c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02D7
        gbc.setState(0xcd36, 0x3e5a, 0x9f10, 0xbca6, 0x555a, 0x9b5e, 0x0, 0x1);
        gbc.writeMem(0xcd36, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3e5a);
        EXPECT(gbc.pc(), 0xcd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd36), 0xcb);
        EXPECT(gbc.readMem(0xcd37), 0x37);
        // CB 37 02D8
        gbc.setState(0x212d, 0x2e62, 0x4c0, 0xe0cb, 0x660e, 0x4b9d, 0x0, 0x1);
        gbc.writeMem(0x212d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2e62);
        EXPECT(gbc.pc(), 0x212f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02D9
        gbc.setState(0xb2d5, 0x59e6, 0x5be0, 0xd4a9, 0xa3d0, 0xa5a4, 0x0, 0x1);
        gbc.writeMem(0xb2d5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x59e6);
        EXPECT(gbc.pc(), 0xb2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d5), 0xcb);
        EXPECT(gbc.readMem(0xb2d6), 0x37);
        // CB 37 02DA
        gbc.setState(0x7730, 0x4d2a, 0xa880, 0x2fd5, 0xf1bb, 0xde0e, 0x0, 0x1);
        gbc.writeMem(0x7730, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4d2a);
        EXPECT(gbc.pc(), 0x7732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02DB
        gbc.setState(0x56c3, 0x8f21, 0xb90, 0x5d44, 0x9cc9, 0xa4b7, 0x1, 0x0);
        gbc.writeMem(0x56c3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8f21);
        EXPECT(gbc.pc(), 0x56c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02DC
        gbc.setState(0x31b5, 0x370c, 0xa630, 0x991c, 0xe174, 0x4a56, 0x0, 0x1);
        gbc.writeMem(0x31b5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x370c);
        EXPECT(gbc.pc(), 0x31b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02DD
        gbc.setState(0xce23, 0xf02b, 0xa180, 0x27c, 0x19d8, 0xd3fb, 0x1, 0x0);
        gbc.writeMem(0xce23, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf02b);
        EXPECT(gbc.pc(), 0xce25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce23), 0xcb);
        EXPECT(gbc.readMem(0xce24), 0x37);
        // CB 37 02DE
        gbc.setState(0xc2cc, 0x1408, 0xe6d0, 0xb210, 0xfa24, 0x211, 0x1, 0x1);
        gbc.writeMem(0xc2cc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1408);
        EXPECT(gbc.pc(), 0xc2ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2cc), 0xcb);
        EXPECT(gbc.readMem(0xc2cd), 0x37);
        // CB 37 02DF
        gbc.setState(0x36ba, 0xcd24, 0x4d80, 0xcc72, 0x3646, 0xdce4, 0x0, 0x1);
        gbc.writeMem(0x36ba, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcd24);
        EXPECT(gbc.pc(), 0x36bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02E0
        gbc.setState(0x5130, 0xd48e, 0xe190, 0xbe9b, 0x9554, 0x70c6, 0x0, 0x1);
        gbc.writeMem(0x5130, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd48e);
        EXPECT(gbc.pc(), 0x5132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02E1
        gbc.setState(0xcef7, 0x8088, 0x77b0, 0xf163, 0x8301, 0x8bea, 0x0, 0x0);
        gbc.writeMem(0xcef7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8088);
        EXPECT(gbc.pc(), 0xcef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef7), 0xcb);
        EXPECT(gbc.readMem(0xcef8), 0x37);
        // CB 37 02E2
        gbc.setState(0x5cfe, 0x54bb, 0xede0, 0x8b20, 0x8c46, 0x6595, 0x1, 0x1);
        gbc.writeMem(0x5cfe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x54bb);
        EXPECT(gbc.pc(), 0x5d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02E3
        gbc.setState(0xcffd, 0xd9e3, 0x630, 0xcf0f, 0x71c8, 0x727f, 0x1, 0x1);
        gbc.writeMem(0xcffd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd9e3);
        EXPECT(gbc.pc(), 0xcfff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffd), 0xcb);
        EXPECT(gbc.readMem(0xcffe), 0x37);
        // CB 37 02E4
        gbc.setState(0x68d, 0xb82d, 0xd860, 0x1e51, 0xf964, 0x448d, 0x1, 0x0);
        gbc.writeMem(0x68d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb82d);
        EXPECT(gbc.pc(), 0x68f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02E5
        gbc.setState(0xa76b, 0xa6ec, 0xa620, 0xfa70, 0x5741, 0xd7a7, 0x0, 0x0);
        gbc.writeMem(0xa76b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa6ec);
        EXPECT(gbc.pc(), 0xa76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa76b), 0xcb);
        EXPECT(gbc.readMem(0xa76c), 0x37);
        // CB 37 02E6
        gbc.setState(0xecc9, 0xf136, 0x8130, 0xa6c2, 0x6861, 0x5815, 0x0, 0x1);
        gbc.writeMem(0xecc9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf136);
        EXPECT(gbc.pc(), 0xeccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecc9), 0xcb);
        EXPECT(gbc.readMem(0xecca), 0x37);
        // CB 37 02E8
        gbc.setState(0xa8d3, 0x9de2, 0x3f60, 0x5885, 0x6bed, 0xca5, 0x0, 0x0);
        gbc.writeMem(0xa8d3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9de2);
        EXPECT(gbc.pc(), 0xa8d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d3), 0xcb);
        EXPECT(gbc.readMem(0xa8d4), 0x37);
        // CB 37 02E9
        gbc.setState(0x199a, 0xe933, 0x5bd0, 0x3304, 0xf1f3, 0x2cfa, 0x1, 0x1);
        gbc.writeMem(0x199a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe933);
        EXPECT(gbc.pc(), 0x199c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02EA
        gbc.setState(0x8961, 0x4e3e, 0x4430, 0xc436, 0xbe62, 0x6289, 0x1, 0x1);
        gbc.writeMem(0x8961, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4e3e);
        EXPECT(gbc.pc(), 0x8963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8961), 0xcb);
        EXPECT(gbc.readMem(0x8962), 0x37);
        // CB 37 02EB
        gbc.setState(0x81c1, 0xbba2, 0x1110, 0x757e, 0xe71, 0x4aa1, 0x1, 0x1);
        gbc.writeMem(0x81c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbba2);
        EXPECT(gbc.pc(), 0x81c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c1), 0xcb);
        EXPECT(gbc.readMem(0x81c2), 0x37);
        // CB 37 02EC
        gbc.setState(0x7157, 0xb2f0, 0x3660, 0x392a, 0xfc18, 0xc568, 0x0, 0x1);
        gbc.writeMem(0x7157, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb2f0);
        EXPECT(gbc.pc(), 0x7159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02ED
        gbc.setState(0xc503, 0x8300, 0x2e70, 0xf3c0, 0xdb9e, 0xc6ee, 0x1, 0x0);
        gbc.writeMem(0xc503, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8300);
        EXPECT(gbc.pc(), 0xc505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc503), 0xcb);
        EXPECT(gbc.readMem(0xc504), 0x37);
        // CB 37 02EE
        gbc.setState(0x7b1d, 0xc989, 0xca10, 0x7224, 0xba6c, 0x9fea, 0x0, 0x1);
        gbc.writeMem(0x7b1d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc989);
        EXPECT(gbc.pc(), 0x7b1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02EF
        gbc.setState(0xc4b0, 0x8e9f, 0xfd20, 0xb6e5, 0x24ed, 0x2d24, 0x0, 0x1);
        gbc.writeMem(0xc4b0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8e9f);
        EXPECT(gbc.pc(), 0xc4b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b0), 0xcb);
        EXPECT(gbc.readMem(0xc4b1), 0x37);
        // CB 37 02F0
        gbc.setState(0x3d61, 0x22df, 0xdb0, 0x4a37, 0x90ca, 0xab87, 0x0, 0x1);
        gbc.writeMem(0x3d61, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x22df);
        EXPECT(gbc.pc(), 0x3d63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02F1
        gbc.setState(0x132e, 0xe030, 0x9500, 0x4760, 0x5a27, 0x246e, 0x0, 0x1);
        gbc.writeMem(0x132e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe030);
        EXPECT(gbc.pc(), 0x1330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02F2
        gbc.setState(0x999a, 0x4205, 0xf680, 0xf6d1, 0x72b6, 0xb8bc, 0x1, 0x0);
        gbc.writeMem(0x999a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4205);
        EXPECT(gbc.pc(), 0x999c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999a), 0xcb);
        EXPECT(gbc.readMem(0x999b), 0x37);
        // CB 37 02F3
        gbc.setState(0x49d6, 0xd48a, 0xb090, 0x553e, 0x66fb, 0x18e5, 0x1, 0x1);
        gbc.writeMem(0x49d6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd48a);
        EXPECT(gbc.pc(), 0x49d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02F4
        gbc.setState(0x790f, 0x60a0, 0x3b90, 0x27ff, 0xd315, 0xb8d8, 0x1, 0x0);
        gbc.writeMem(0x790f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x60a0);
        EXPECT(gbc.pc(), 0x7911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02F5
        gbc.setState(0xcbbe, 0xd676, 0x5c80, 0x4a57, 0xb54e, 0xea80, 0x1, 0x0);
        gbc.writeMem(0xcbbe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd676);
        EXPECT(gbc.pc(), 0xcbc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbe), 0xcb);
        EXPECT(gbc.readMem(0xcbbf), 0x37);
        // CB 37 02F6
        gbc.setState(0xc40f, 0xe71, 0x6420, 0x6ffa, 0x48f1, 0x9eab, 0x1, 0x0);
        gbc.writeMem(0xc40f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe71);
        EXPECT(gbc.pc(), 0xc411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc40f), 0xcb);
        EXPECT(gbc.readMem(0xc410), 0x37);
        // CB 37 02F7
        gbc.setState(0x3e93, 0x9155, 0xe260, 0xdc51, 0xf652, 0x190, 0x1, 0x0);
        gbc.writeMem(0x3e93, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9155);
        EXPECT(gbc.pc(), 0x3e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02F8
        gbc.setState(0xd7a9, 0xa198, 0xd2a0, 0x8390, 0xee81, 0xb24c, 0x1, 0x1);
        gbc.writeMem(0xd7a9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa198);
        EXPECT(gbc.pc(), 0xd7ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a9), 0xcb);
        EXPECT(gbc.readMem(0xd7aa), 0x37);
        // CB 37 02F9
        gbc.setState(0xed63, 0xe09b, 0xbc00, 0xefd4, 0x23dc, 0x8191, 0x0, 0x1);
        gbc.writeMem(0xed63, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe09b);
        EXPECT(gbc.pc(), 0xed65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed63), 0xcb);
        EXPECT(gbc.readMem(0xed64), 0x37);
        // CB 37 02FA
        gbc.setState(0x87c6, 0xbba6, 0x70d0, 0xf5af, 0x458b, 0xe6f8, 0x1, 0x1);
        gbc.writeMem(0x87c6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbba6);
        EXPECT(gbc.pc(), 0x87c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c6), 0xcb);
        EXPECT(gbc.readMem(0x87c7), 0x37);
        // CB 37 02FB
        gbc.setState(0x2314, 0x977, 0x2860, 0x630f, 0xf342, 0x6141, 0x0, 0x1);
        gbc.writeMem(0x2314, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x977);
        EXPECT(gbc.pc(), 0x2316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 02FD
        gbc.setState(0xa483, 0xa2c6, 0x50e0, 0x5a54, 0x4817, 0xb644, 0x1, 0x0);
        gbc.writeMem(0xa483, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa2c6);
        EXPECT(gbc.pc(), 0xa485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa483), 0xcb);
        EXPECT(gbc.readMem(0xa484), 0x37);
        // CB 37 02FE
        gbc.setState(0xbca3, 0x500c, 0xd0b0, 0xdffa, 0xfc28, 0xaa26, 0x0, 0x0);
        gbc.writeMem(0xbca3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x500c);
        EXPECT(gbc.pc(), 0xbca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca3), 0xcb);
        EXPECT(gbc.readMem(0xbca4), 0x37);
        // CB 37 02FF
        gbc.setState(0xa096, 0x1426, 0xcda0, 0x9f4c, 0x525c, 0xf174, 0x1, 0x1);
        gbc.writeMem(0xa096, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1426);
        EXPECT(gbc.pc(), 0xa098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa096), 0xcb);
        EXPECT(gbc.readMem(0xa097), 0x37);
        // CB 37 0300
        gbc.setState(0x6fb2, 0x309, 0x96b0, 0xfd2d, 0xaaa, 0xd6b3, 0x0, 0x1);
        gbc.writeMem(0x6fb2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x309);
        EXPECT(gbc.pc(), 0x6fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0302
        gbc.setState(0x4eb3, 0xe8f5, 0xceb0, 0x7574, 0x5223, 0x3e5f, 0x0, 0x1);
        gbc.writeMem(0x4eb3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe8f5);
        EXPECT(gbc.pc(), 0x4eb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0303
        gbc.setState(0xd060, 0x1178, 0xa90, 0x4113, 0xb9f2, 0x66e9, 0x0, 0x1);
        gbc.writeMem(0xd060, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1178);
        EXPECT(gbc.pc(), 0xd062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd060), 0xcb);
        EXPECT(gbc.readMem(0xd061), 0x37);
        // CB 37 0304
        gbc.setState(0x821d, 0x21a4, 0x48f0, 0xa885, 0x4119, 0xe525, 0x1, 0x0);
        gbc.writeMem(0x821d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0x821f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821d), 0xcb);
        EXPECT(gbc.readMem(0x821e), 0x37);
        // CB 37 0305
        gbc.setState(0x4ed4, 0x5d1a, 0xd4a0, 0xf8f9, 0x2717, 0xab0c, 0x1, 0x1);
        gbc.writeMem(0x4ed4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5d1a);
        EXPECT(gbc.pc(), 0x4ed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0307
        gbc.setState(0x347a, 0x4cdf, 0x9a50, 0x3c8f, 0xea98, 0xda07, 0x1, 0x0);
        gbc.writeMem(0x347a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4cdf);
        EXPECT(gbc.pc(), 0x347c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0308
        gbc.setState(0x7f0a, 0x5320, 0x7ef0, 0x6433, 0x17e0, 0xc3f0, 0x0, 0x1);
        gbc.writeMem(0x7f0a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5320);
        EXPECT(gbc.pc(), 0x7f0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0309
        gbc.setState(0x37f0, 0x5345, 0xf690, 0x7c25, 0xced0, 0x70a7, 0x1, 0x1);
        gbc.writeMem(0x37f0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5345);
        EXPECT(gbc.pc(), 0x37f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 030A
        gbc.setState(0x8599, 0x6987, 0x6fa0, 0xbdea, 0xafcd, 0x1d6c, 0x1, 0x1);
        gbc.writeMem(0x8599, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6987);
        EXPECT(gbc.pc(), 0x859b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8599), 0xcb);
        EXPECT(gbc.readMem(0x859a), 0x37);
        // CB 37 030B
        gbc.setState(0x20ae, 0x442d, 0xd4f0, 0x5727, 0x4ea0, 0x2c9b, 0x0, 0x1);
        gbc.writeMem(0x20ae, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x442d);
        EXPECT(gbc.pc(), 0x20b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 030C
        gbc.setState(0xad3d, 0xc9b6, 0x9880, 0xe670, 0xfd48, 0x7575, 0x0, 0x0);
        gbc.writeMem(0xad3d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc9b6);
        EXPECT(gbc.pc(), 0xad3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3d), 0xcb);
        EXPECT(gbc.readMem(0xad3e), 0x37);
        // CB 37 030D
        gbc.setState(0x2405, 0xd9bc, 0xdcb0, 0xea74, 0x9924, 0xff01, 0x0, 0x0);
        gbc.writeMem(0x2405, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd9bc);
        EXPECT(gbc.pc(), 0x2407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 030E
        gbc.setState(0x5c1a, 0x67a6, 0x71b0, 0x8ce4, 0x27de, 0x9e7e, 0x1, 0x0);
        gbc.writeMem(0x5c1a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x67a6);
        EXPECT(gbc.pc(), 0x5c1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 030F
        gbc.setState(0x4de4, 0xa996, 0x3440, 0xa18, 0x7792, 0x1f1, 0x1, 0x0);
        gbc.writeMem(0x4de4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa996);
        EXPECT(gbc.pc(), 0x4de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0310
        gbc.setState(0x4f8d, 0x294b, 0xacb0, 0x7f4e, 0x1bc1, 0x22ed, 0x1, 0x0);
        gbc.writeMem(0x4f8d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x294b);
        EXPECT(gbc.pc(), 0x4f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0311
        gbc.setState(0xa866, 0xcd4d, 0x7360, 0x4374, 0x8c66, 0xafb4, 0x1, 0x0);
        gbc.writeMem(0xa866, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xcd4d);
        EXPECT(gbc.pc(), 0xa868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa866), 0xcb);
        EXPECT(gbc.readMem(0xa867), 0x37);
        // CB 37 0312
        gbc.setState(0x80e1, 0xd556, 0x6220, 0x5851, 0x8204, 0xeeb2, 0x1, 0x1);
        gbc.writeMem(0x80e1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd556);
        EXPECT(gbc.pc(), 0x80e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e1), 0xcb);
        EXPECT(gbc.readMem(0x80e2), 0x37);
        // CB 37 0313
        gbc.setState(0x2c7c, 0xaaca, 0xbdb0, 0xc5e9, 0xef4d, 0x9db3, 0x1, 0x1);
        gbc.writeMem(0x2c7c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xaaca);
        EXPECT(gbc.pc(), 0x2c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0314
        gbc.setState(0x8c18, 0xc2a3, 0xae80, 0x44af, 0x7827, 0x82c, 0x1, 0x0);
        gbc.writeMem(0x8c18, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc2a3);
        EXPECT(gbc.pc(), 0x8c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c18), 0xcb);
        EXPECT(gbc.readMem(0x8c19), 0x37);
        // CB 37 0315
        gbc.setState(0x1695, 0x354c, 0x4cb0, 0xdaba, 0xa3ce, 0xcf90, 0x1, 0x0);
        gbc.writeMem(0x1695, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x354c);
        EXPECT(gbc.pc(), 0x1697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0316
        gbc.setState(0x9c6, 0x686b, 0x4ce0, 0xb3b2, 0x6413, 0xe40a, 0x0, 0x0);
        gbc.writeMem(0x9c6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x686b);
        EXPECT(gbc.pc(), 0x9c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0317
        gbc.setState(0x8efe, 0x29f5, 0xf450, 0x2ac6, 0x81e5, 0x84ad, 0x0, 0x0);
        gbc.writeMem(0x8efe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x29f5);
        EXPECT(gbc.pc(), 0x8f00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8efe), 0xcb);
        EXPECT(gbc.readMem(0x8eff), 0x37);
        // CB 37 0318
        gbc.setState(0x3e7e, 0x954, 0xf000, 0xa63c, 0xa7a5, 0x66c8, 0x1, 0x1);
        gbc.writeMem(0x3e7e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x954);
        EXPECT(gbc.pc(), 0x3e80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0319
        gbc.setState(0x70d5, 0x5db8, 0x5380, 0x63fc, 0x3678, 0x21db, 0x0, 0x0);
        gbc.writeMem(0x70d5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5db8);
        EXPECT(gbc.pc(), 0x70d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 031A
        gbc.setState(0x98a2, 0xb968, 0xdde0, 0x349, 0x5fd6, 0xf463, 0x0, 0x1);
        gbc.writeMem(0x98a2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb968);
        EXPECT(gbc.pc(), 0x98a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a2), 0xcb);
        EXPECT(gbc.readMem(0x98a3), 0x37);
        // CB 37 031B
        gbc.setState(0x9603, 0xaba4, 0xbc20, 0x528c, 0xf4fa, 0xbc0e, 0x0, 0x1);
        gbc.writeMem(0x9603, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaba4);
        EXPECT(gbc.pc(), 0x9605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9603), 0xcb);
        EXPECT(gbc.readMem(0x9604), 0x37);
        // CB 37 031C
        gbc.setState(0xed59, 0xf54e, 0xab0, 0xee03, 0xcb78, 0xdb67, 0x0, 0x0);
        gbc.writeMem(0xed59, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf54e);
        EXPECT(gbc.pc(), 0xed5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed59), 0xcb);
        EXPECT(gbc.readMem(0xed5a), 0x37);
        // CB 37 031D
        gbc.setState(0x1dd8, 0x1b56, 0xc2e0, 0xfd3e, 0x43ba, 0x2404, 0x1, 0x1);
        gbc.writeMem(0x1dd8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1b56);
        EXPECT(gbc.pc(), 0x1dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 031E
        gbc.setState(0x85c1, 0x6c77, 0x4ed0, 0x37a0, 0xf0ec, 0xa5bc, 0x1, 0x1);
        gbc.writeMem(0x85c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6c77);
        EXPECT(gbc.pc(), 0x85c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85c1), 0xcb);
        EXPECT(gbc.readMem(0x85c2), 0x37);
        // CB 37 031F
        gbc.setState(0xd0f9, 0x69fa, 0xf070, 0xf4f9, 0x111b, 0x4e4f, 0x1, 0x0);
        gbc.writeMem(0xd0f9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x69fa);
        EXPECT(gbc.pc(), 0xd0fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0f9), 0xcb);
        EXPECT(gbc.readMem(0xd0fa), 0x37);
        // CB 37 0320
        gbc.setState(0x9332, 0xc932, 0x3010, 0x4d1f, 0x2960, 0x5ebe, 0x0, 0x0);
        gbc.writeMem(0x9332, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc932);
        EXPECT(gbc.pc(), 0x9334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9332), 0xcb);
        EXPECT(gbc.readMem(0x9333), 0x37);
        // CB 37 0321
        gbc.setState(0x22c1, 0x4812, 0x2c50, 0x681c, 0xd720, 0x431c, 0x0, 0x1);
        gbc.writeMem(0x22c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4812);
        EXPECT(gbc.pc(), 0x22c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0322
        gbc.setState(0x6fc9, 0xe44c, 0xdb90, 0xe74b, 0xe4a5, 0xde44, 0x0, 0x0);
        gbc.writeMem(0x6fc9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe44c);
        EXPECT(gbc.pc(), 0x6fcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0323
        gbc.setState(0x3878, 0x468b, 0x2380, 0x56d2, 0xde52, 0x4ec, 0x0, 0x1);
        gbc.writeMem(0x3878, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x468b);
        EXPECT(gbc.pc(), 0x387a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0325
        gbc.setState(0xa691, 0x6590, 0x4a0, 0x49a2, 0x7b8f, 0xea5d, 0x1, 0x1);
        gbc.writeMem(0xa691, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6590);
        EXPECT(gbc.pc(), 0xa693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa691), 0xcb);
        EXPECT(gbc.readMem(0xa692), 0x37);
        // CB 37 0326
        gbc.setState(0x4423, 0xf301, 0x5070, 0xb3cd, 0xad55, 0x680a, 0x1, 0x1);
        gbc.writeMem(0x4423, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf301);
        EXPECT(gbc.pc(), 0x4425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0327
        gbc.setState(0x1542, 0xe214, 0xf270, 0xda6a, 0xa316, 0x8f13, 0x0, 0x1);
        gbc.writeMem(0x1542, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe214);
        EXPECT(gbc.pc(), 0x1544);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0328
        gbc.setState(0xad7c, 0xbb46, 0xb350, 0xff7b, 0x6642, 0xd9eb, 0x0, 0x1);
        gbc.writeMem(0xad7c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbb46);
        EXPECT(gbc.pc(), 0xad7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad7c), 0xcb);
        EXPECT(gbc.readMem(0xad7d), 0x37);
        // CB 37 0329
        gbc.setState(0x4dfa, 0x7a1c, 0x65d0, 0xd616, 0x51d2, 0x53e5, 0x1, 0x0);
        gbc.writeMem(0x4dfa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7a1c);
        EXPECT(gbc.pc(), 0x4dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 032A
        gbc.setState(0xc1c3, 0xe9b, 0x84b0, 0xe618, 0x1be0, 0x9950, 0x1, 0x1);
        gbc.writeMem(0xc1c3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe9b);
        EXPECT(gbc.pc(), 0xc1c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c3), 0xcb);
        EXPECT(gbc.readMem(0xc1c4), 0x37);
        // CB 37 032B
        gbc.setState(0x41af, 0x4917, 0xfe50, 0x9f7a, 0x8a58, 0x5ce3, 0x1, 0x1);
        gbc.writeMem(0x41af, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4917);
        EXPECT(gbc.pc(), 0x41b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 032C
        gbc.setState(0xda52, 0x908, 0xf940, 0x8e33, 0x4a5c, 0x3b6b, 0x0, 0x0);
        gbc.writeMem(0xda52, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x908);
        EXPECT(gbc.pc(), 0xda54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda52), 0xcb);
        EXPECT(gbc.readMem(0xda53), 0x37);
        // CB 37 032D
        gbc.setState(0x945b, 0xe4e2, 0xad70, 0xdb92, 0xe312, 0xaeb9, 0x1, 0x1);
        gbc.writeMem(0x945b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe4e2);
        EXPECT(gbc.pc(), 0x945d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x945b), 0xcb);
        EXPECT(gbc.readMem(0x945c), 0x37);
        // CB 37 032E
        gbc.setState(0x6a33, 0x3853, 0xf170, 0x15fd, 0xfd5e, 0xf34e, 0x0, 0x0);
        gbc.writeMem(0x6a33, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x3853);
        EXPECT(gbc.pc(), 0x6a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 032F
        gbc.setState(0x8065, 0xa0ec, 0xd20, 0xbd3e, 0x7a66, 0x1657, 0x1, 0x0);
        gbc.writeMem(0x8065, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa0ec);
        EXPECT(gbc.pc(), 0x8067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8065), 0xcb);
        EXPECT(gbc.readMem(0x8066), 0x37);
        // CB 37 0330
        gbc.setState(0xc00f, 0x133b, 0x14f0, 0xbdb8, 0x799f, 0xd97f, 0x0, 0x0);
        gbc.writeMem(0xc00f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x133b);
        EXPECT(gbc.pc(), 0xc011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc00f), 0xcb);
        EXPECT(gbc.readMem(0xc010), 0x37);
        // CB 37 0331
        gbc.setState(0xdd80, 0x192f, 0xcd00, 0xb241, 0xe3c6, 0x4162, 0x1, 0x0);
        gbc.writeMem(0xdd80, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x192f);
        EXPECT(gbc.pc(), 0xdd82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd80), 0xcb);
        EXPECT(gbc.readMem(0xdd81), 0x37);
        // CB 37 0332
        gbc.setState(0xba25, 0x99ba, 0x5d0, 0xc10a, 0xd674, 0x18cc, 0x0, 0x0);
        gbc.writeMem(0xba25, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x99ba);
        EXPECT(gbc.pc(), 0xba27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba25), 0xcb);
        EXPECT(gbc.readMem(0xba26), 0x37);
        // CB 37 0333
        gbc.setState(0xd368, 0xdb7e, 0x84e0, 0x6697, 0x78cb, 0xb5ec, 0x0, 0x1);
        gbc.writeMem(0xd368, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdb7e);
        EXPECT(gbc.pc(), 0xd36a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd368), 0xcb);
        EXPECT(gbc.readMem(0xd369), 0x37);
        // CB 37 0334
        gbc.setState(0x1c6d, 0xb86b, 0x55b0, 0x9502, 0xaacc, 0x473e, 0x0, 0x1);
        gbc.writeMem(0x1c6d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb86b);
        EXPECT(gbc.pc(), 0x1c6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0335
        gbc.setState(0xe815, 0x2a42, 0x3110, 0xc642, 0x889, 0xbfbc, 0x0, 0x1);
        gbc.writeMem(0xe815, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2a42);
        EXPECT(gbc.pc(), 0xe817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe815), 0xcb);
        EXPECT(gbc.readMem(0xe816), 0x37);
        // CB 37 0337
        gbc.setState(0xc77d, 0x11b4, 0x2080, 0x6820, 0xcc1b, 0xd745, 0x0, 0x0);
        gbc.writeMem(0xc77d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x11b4);
        EXPECT(gbc.pc(), 0xc77f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77d), 0xcb);
        EXPECT(gbc.readMem(0xc77e), 0x37);
        // CB 37 0338
        gbc.setState(0x781b, 0xf163, 0x62e0, 0x9693, 0xaf11, 0xc2df, 0x0, 0x0);
        gbc.writeMem(0x781b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf163);
        EXPECT(gbc.pc(), 0x781d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0339
        gbc.setState(0x2bbe, 0x335a, 0x69f0, 0xad81, 0x27ff, 0xdfb0, 0x0, 0x1);
        gbc.writeMem(0x2bbe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x335a);
        EXPECT(gbc.pc(), 0x2bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033A
        gbc.setState(0xd5c, 0xda42, 0x9bb0, 0xcbf0, 0xe41f, 0x1159, 0x1, 0x0);
        gbc.writeMem(0xd5c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xda42);
        EXPECT(gbc.pc(), 0xd5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033B
        gbc.setState(0x5038, 0xbd3d, 0x9f40, 0x23ff, 0x75ab, 0xa7f5, 0x0, 0x0);
        gbc.writeMem(0x5038, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbd3d);
        EXPECT(gbc.pc(), 0x503a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033C
        gbc.setState(0x46f0, 0x58e0, 0xf870, 0x155f, 0xb9e6, 0xa67a, 0x0, 0x1);
        gbc.writeMem(0x46f0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x58e0);
        EXPECT(gbc.pc(), 0x46f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033D
        gbc.setState(0x333b, 0xe554, 0xc0b0, 0x766d, 0x613d, 0x36be, 0x0, 0x1);
        gbc.writeMem(0x333b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe554);
        EXPECT(gbc.pc(), 0x333d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033E
        gbc.setState(0x1987, 0xcfab, 0x3690, 0xb043, 0xd2e1, 0xc72e, 0x0, 0x1);
        gbc.writeMem(0x1987, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcfab);
        EXPECT(gbc.pc(), 0x1989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 033F
        gbc.setState(0x5b2b, 0xfb31, 0x8120, 0xa707, 0x7569, 0x427e, 0x0, 0x0);
        gbc.writeMem(0x5b2b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfb31);
        EXPECT(gbc.pc(), 0x5b2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0340
        gbc.setState(0xb8d8, 0x7a0, 0x3a70, 0xdbdf, 0x2cea, 0xe92d, 0x0, 0x0);
        gbc.writeMem(0xb8d8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7a0);
        EXPECT(gbc.pc(), 0xb8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d8), 0xcb);
        EXPECT(gbc.readMem(0xb8d9), 0x37);
        // CB 37 0341
        gbc.setState(0x9faa, 0x5f9e, 0x1f30, 0x7337, 0x7791, 0x481b, 0x0, 0x0);
        gbc.writeMem(0x9faa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5f9e);
        EXPECT(gbc.pc(), 0x9fac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9faa), 0xcb);
        EXPECT(gbc.readMem(0x9fab), 0x37);
        // CB 37 0342
        gbc.setState(0x4f52, 0x5d3f, 0xa640, 0x146, 0xd7f5, 0xc407, 0x0, 0x1);
        gbc.writeMem(0x4f52, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5d3f);
        EXPECT(gbc.pc(), 0x4f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0343
        gbc.setState(0x22a5, 0x52a1, 0xc3c0, 0x5b82, 0xeb62, 0x417d, 0x0, 0x1);
        gbc.writeMem(0x22a5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x52a1);
        EXPECT(gbc.pc(), 0x22a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0344
        gbc.setState(0x12fd, 0x97e9, 0x1a50, 0xf4e4, 0x711b, 0x9c70, 0x0, 0x0);
        gbc.writeMem(0x12fd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x97e9);
        EXPECT(gbc.pc(), 0x12ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0345
        gbc.setState(0x26e4, 0xd79b, 0x29e0, 0xe42d, 0x7020, 0x83b4, 0x0, 0x0);
        gbc.writeMem(0x26e4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd79b);
        EXPECT(gbc.pc(), 0x26e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0346
        gbc.setState(0x135c, 0x98c7, 0x7350, 0xa3c8, 0xe602, 0xe848, 0x1, 0x0);
        gbc.writeMem(0x135c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x98c7);
        EXPECT(gbc.pc(), 0x135e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0347
        gbc.setState(0x899d, 0x3958, 0x6050, 0xa327, 0xb2f3, 0x2e3e, 0x0, 0x0);
        gbc.writeMem(0x899d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3958);
        EXPECT(gbc.pc(), 0x899f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899d), 0xcb);
        EXPECT(gbc.readMem(0x899e), 0x37);
        // CB 37 0348
        gbc.setState(0xbda, 0x3807, 0x4b00, 0x5995, 0x2a82, 0xe6ab, 0x1, 0x1);
        gbc.writeMem(0xbda, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3807);
        EXPECT(gbc.pc(), 0xbdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0349
        gbc.setState(0x5c62, 0x82a0, 0x6b0, 0x8521, 0x7245, 0x75e2, 0x1, 0x0);
        gbc.writeMem(0x5c62, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x82a0);
        EXPECT(gbc.pc(), 0x5c64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 034A
        gbc.setState(0xe740, 0x694f, 0xd900, 0x6c18, 0x7dd1, 0x96e6, 0x0, 0x0);
        gbc.writeMem(0xe740, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x694f);
        EXPECT(gbc.pc(), 0xe742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe740), 0xcb);
        EXPECT(gbc.readMem(0xe741), 0x37);
        // CB 37 034B
        gbc.setState(0x3588, 0xd705, 0xfda0, 0xf021, 0xa05f, 0x10fd, 0x1, 0x0);
        gbc.writeMem(0x3588, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd705);
        EXPECT(gbc.pc(), 0x358a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 034C
        gbc.setState(0x10e3, 0xf0b0, 0xe350, 0x31eb, 0xfa9c, 0x249e, 0x0, 0x1);
        gbc.writeMem(0x10e3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf0b0);
        EXPECT(gbc.pc(), 0x10e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 034D
        gbc.setState(0x6b00, 0x42e0, 0xe4a0, 0x9e78, 0x431a, 0x6d75, 0x1, 0x0);
        gbc.writeMem(0x6b00, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x42e0);
        EXPECT(gbc.pc(), 0x6b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 034E
        gbc.setState(0xbd4e, 0xb9f1, 0x2710, 0xba39, 0xb5f7, 0x54d3, 0x1, 0x0);
        gbc.writeMem(0xbd4e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb9f1);
        EXPECT(gbc.pc(), 0xbd50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4e), 0xcb);
        EXPECT(gbc.readMem(0xbd4f), 0x37);
        // CB 37 034F
        gbc.setState(0xe069, 0xa816, 0xa000, 0x65a0, 0x7769, 0x97e9, 0x0, 0x1);
        gbc.writeMem(0xe069, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa816);
        EXPECT(gbc.pc(), 0xe06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe069), 0xcb);
        EXPECT(gbc.readMem(0xe06a), 0x37);
        // CB 37 0350
        gbc.setState(0x2758, 0xf62a, 0x3780, 0x4428, 0xb69b, 0x975, 0x0, 0x1);
        gbc.writeMem(0x2758, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf62a);
        EXPECT(gbc.pc(), 0x275a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0351
        gbc.setState(0xda82, 0x18da, 0x60d0, 0xc585, 0x7990, 0x7d41, 0x0, 0x1);
        gbc.writeMem(0xda82, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x18da);
        EXPECT(gbc.pc(), 0xda84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda82), 0xcb);
        EXPECT(gbc.readMem(0xda83), 0x37);
        // CB 37 0352
        gbc.setState(0x10c4, 0x51f7, 0x9d60, 0xcd47, 0x67d4, 0x41ae, 0x1, 0x0);
        gbc.writeMem(0x10c4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x51f7);
        EXPECT(gbc.pc(), 0x10c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0353
        gbc.setState(0xda60, 0xa09c, 0x5ed0, 0x6768, 0xd536, 0x2350, 0x1, 0x0);
        gbc.writeMem(0xda60, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa09c);
        EXPECT(gbc.pc(), 0xda62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda60), 0xcb);
        EXPECT(gbc.readMem(0xda61), 0x37);
        // CB 37 0354
        gbc.setState(0x72eb, 0xebb6, 0x660, 0xd4c3, 0xd680, 0x7ab8, 0x1, 0x1);
        gbc.writeMem(0x72eb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xebb6);
        EXPECT(gbc.pc(), 0x72ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0355
        gbc.setState(0x10c5, 0x5ddf, 0x5060, 0x2b, 0x931a, 0x47b3, 0x1, 0x1);
        gbc.writeMem(0x10c5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5ddf);
        EXPECT(gbc.pc(), 0x10c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0356
        gbc.setState(0x2454, 0x1fbb, 0x8de0, 0xb942, 0x4f85, 0xf151, 0x0, 0x1);
        gbc.writeMem(0x2454, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1fbb);
        EXPECT(gbc.pc(), 0x2456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0357
        gbc.setState(0x505d, 0x4337, 0x9be0, 0xd2c, 0x4caa, 0xd591, 0x0, 0x0);
        gbc.writeMem(0x505d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4337);
        EXPECT(gbc.pc(), 0x505f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0358
        gbc.setState(0x3820, 0xa24f, 0xe170, 0x1894, 0x933c, 0x2a96, 0x0, 0x0);
        gbc.writeMem(0x3820, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa24f);
        EXPECT(gbc.pc(), 0x3822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0359
        gbc.setState(0x178f, 0x3bc1, 0x7770, 0xc649, 0xf03c, 0x7b43, 0x0, 0x1);
        gbc.writeMem(0x178f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3bc1);
        EXPECT(gbc.pc(), 0x1791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 035A
        gbc.setState(0x3a49, 0xd282, 0x10d0, 0x7cdc, 0x762b, 0xe1e7, 0x1, 0x1);
        gbc.writeMem(0x3a49, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd282);
        EXPECT(gbc.pc(), 0x3a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 035B
        gbc.setState(0x30ed, 0x1a27, 0xe1d0, 0x9140, 0xf5f1, 0x5bd9, 0x1, 0x0);
        gbc.writeMem(0x30ed, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1a27);
        EXPECT(gbc.pc(), 0x30ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 035C
        gbc.setState(0x8f6, 0xe1c7, 0x9aa0, 0x73c4, 0xe679, 0x6f21, 0x1, 0x1);
        gbc.writeMem(0x8f6, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe1c7);
        EXPECT(gbc.pc(), 0x8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 035D
        gbc.setState(0xc46c, 0xe27b, 0xbe20, 0x60ad, 0x236a, 0x5ee8, 0x0, 0x0);
        gbc.writeMem(0xc46c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe27b);
        EXPECT(gbc.pc(), 0xc46e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46c), 0xcb);
        EXPECT(gbc.readMem(0xc46d), 0x37);
        // CB 37 035E
        gbc.setState(0xb19, 0xb8b6, 0x110, 0x6cf9, 0x2d40, 0xc0f6, 0x1, 0x1);
        gbc.writeMem(0xb19, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb8b6);
        EXPECT(gbc.pc(), 0xb1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 035F
        gbc.setState(0x71ea, 0x3b61, 0x2eb0, 0xdf5b, 0xb83f, 0xfe5, 0x0, 0x0);
        gbc.writeMem(0x71ea, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3b61);
        EXPECT(gbc.pc(), 0x71ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0360
        gbc.setState(0x5a75, 0x78fc, 0xcac0, 0x847, 0xa962, 0x21d, 0x1, 0x1);
        gbc.writeMem(0x5a75, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x78fc);
        EXPECT(gbc.pc(), 0x5a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0361
        gbc.setState(0x130a, 0x839a, 0x580, 0xf2f6, 0x8bc8, 0x9504, 0x1, 0x0);
        gbc.writeMem(0x130a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x839a);
        EXPECT(gbc.pc(), 0x130c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0362
        gbc.setState(0x2adc, 0xbc9b, 0x8b80, 0x2401, 0x88d0, 0x674e, 0x1, 0x1);
        gbc.writeMem(0x2adc, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbc9b);
        EXPECT(gbc.pc(), 0x2ade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0363
        gbc.setState(0x5330, 0x9ca3, 0xc1c0, 0x66dd, 0x614, 0xb7cd, 0x1, 0x0);
        gbc.writeMem(0x5330, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x9ca3);
        EXPECT(gbc.pc(), 0x5332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0364
        gbc.setState(0x4d58, 0x7def, 0x50f0, 0x10eb, 0x7cd7, 0xf8f8, 0x0, 0x1);
        gbc.writeMem(0x4d58, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7def);
        EXPECT(gbc.pc(), 0x4d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0365
        gbc.setState(0x4e3e, 0xe6b3, 0x7680, 0x2d05, 0x81b8, 0x9f13, 0x1, 0x1);
        gbc.writeMem(0x4e3e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe6b3);
        EXPECT(gbc.pc(), 0x4e40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0366
        gbc.setState(0xae6a, 0x51b6, 0xee80, 0xaa8b, 0x5480, 0x9e93, 0x1, 0x1);
        gbc.writeMem(0xae6a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x51b6);
        EXPECT(gbc.pc(), 0xae6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6a), 0xcb);
        EXPECT(gbc.readMem(0xae6b), 0x37);
        // CB 37 0367
        gbc.setState(0xc50c, 0xcd8, 0x650, 0x8565, 0x8267, 0x9bb6, 0x1, 0x1);
        gbc.writeMem(0xc50c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xcd8);
        EXPECT(gbc.pc(), 0xc50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc50c), 0xcb);
        EXPECT(gbc.readMem(0xc50d), 0x37);
        // CB 37 0368
        gbc.setState(0xceae, 0xa491, 0x8ab0, 0xf6e8, 0x7069, 0x2352, 0x1, 0x1);
        gbc.writeMem(0xceae, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa491);
        EXPECT(gbc.pc(), 0xceb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceae), 0xcb);
        EXPECT(gbc.readMem(0xceaf), 0x37);
        // CB 37 0369
        gbc.setState(0x7872, 0x564f, 0xa010, 0x2d15, 0x7795, 0xd488, 0x0, 0x1);
        gbc.writeMem(0x7872, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x564f);
        EXPECT(gbc.pc(), 0x7874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 036A
        gbc.setState(0x8c9b, 0x428, 0xeed0, 0x2232, 0xa2bc, 0xd77b, 0x0, 0x1);
        gbc.writeMem(0x8c9b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x428);
        EXPECT(gbc.pc(), 0x8c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9b), 0xcb);
        EXPECT(gbc.readMem(0x8c9c), 0x37);
        // CB 37 036B
        gbc.setState(0x1d9d, 0xae74, 0xa010, 0x602c, 0xb25d, 0x69ad, 0x0, 0x1);
        gbc.writeMem(0x1d9d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xae74);
        EXPECT(gbc.pc(), 0x1d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 036C
        gbc.setState(0x6ab4, 0x88fb, 0x4920, 0x5c97, 0x7166, 0x47ce, 0x1, 0x1);
        gbc.writeMem(0x6ab4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x88fb);
        EXPECT(gbc.pc(), 0x6ab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 036D
        gbc.setState(0xac09, 0x472a, 0x81a0, 0xf83d, 0x420c, 0x98f2, 0x0, 0x0);
        gbc.writeMem(0xac09, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x472a);
        EXPECT(gbc.pc(), 0xac0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac09), 0xcb);
        EXPECT(gbc.readMem(0xac0a), 0x37);
        // CB 37 036E
        gbc.setState(0x9313, 0x152f, 0xa0e0, 0xaa22, 0x8ff0, 0xaf41, 0x0, 0x0);
        gbc.writeMem(0x9313, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x152f);
        EXPECT(gbc.pc(), 0x9315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9313), 0xcb);
        EXPECT(gbc.readMem(0x9314), 0x37);
        // CB 37 036F
        gbc.setState(0x9df0, 0x1dc5, 0x1590, 0x7f63, 0xaab9, 0x31cb, 0x0, 0x0);
        gbc.writeMem(0x9df0, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1dc5);
        EXPECT(gbc.pc(), 0x9df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df0), 0xcb);
        EXPECT(gbc.readMem(0x9df1), 0x37);
        // CB 37 0370
        gbc.setState(0x2c06, 0xa72a, 0x5ce0, 0x785, 0xa417, 0x3271, 0x0, 0x1);
        gbc.writeMem(0x2c06, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa72a);
        EXPECT(gbc.pc(), 0x2c08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0371
        gbc.setState(0x9f79, 0x73d7, 0x1370, 0x129a, 0x18d9, 0xce61, 0x0, 0x0);
        gbc.writeMem(0x9f79, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x73d7);
        EXPECT(gbc.pc(), 0x9f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f79), 0xcb);
        EXPECT(gbc.readMem(0x9f7a), 0x37);
        // CB 37 0372
        gbc.setState(0x57a7, 0x420b, 0x18b0, 0x9fc7, 0x8c90, 0xc0b, 0x1, 0x0);
        gbc.writeMem(0x57a7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x420b);
        EXPECT(gbc.pc(), 0x57a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0373
        gbc.setState(0x2329, 0x82e6, 0x5f40, 0x1061, 0x9d3c, 0x3fb5, 0x1, 0x1);
        gbc.writeMem(0x2329, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x82e6);
        EXPECT(gbc.pc(), 0x232b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0374
        gbc.setState(0x7cd, 0x6c68, 0xe090, 0x23ea, 0x2327, 0x5cf8, 0x1, 0x1);
        gbc.writeMem(0x7cd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6c68);
        EXPECT(gbc.pc(), 0x7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0375
        gbc.setState(0x6063, 0xc5f6, 0xa9d0, 0xc51b, 0xf481, 0x9f1f, 0x0, 0x1);
        gbc.writeMem(0x6063, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc5f6);
        EXPECT(gbc.pc(), 0x6065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0376
        gbc.setState(0xd19, 0xf894, 0xb010, 0x4288, 0x7b8f, 0xd4c7, 0x1, 0x0);
        gbc.writeMem(0xd19, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf894);
        EXPECT(gbc.pc(), 0xd1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0377
        gbc.setState(0xc388, 0xef5e, 0x9f10, 0xee0d, 0x342e, 0xad15, 0x0, 0x1);
        gbc.writeMem(0xc388, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xef5e);
        EXPECT(gbc.pc(), 0xc38a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc388), 0xcb);
        EXPECT(gbc.readMem(0xc389), 0x37);
        // CB 37 0378
        gbc.setState(0x55b3, 0xcf8e, 0xe300, 0x24d2, 0x4aa9, 0x1285, 0x1, 0x0);
        gbc.writeMem(0x55b3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcf8e);
        EXPECT(gbc.pc(), 0x55b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0379
        gbc.setState(0xc224, 0xcad8, 0xc0, 0xeb30, 0x8a59, 0xaee9, 0x0, 0x1);
        gbc.writeMem(0xc224, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcad8);
        EXPECT(gbc.pc(), 0xc226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc224), 0xcb);
        EXPECT(gbc.readMem(0xc225), 0x37);
        // CB 37 037A
        gbc.setState(0x64aa, 0xb018, 0xc2b0, 0x93b2, 0x22c, 0x1931, 0x1, 0x1);
        gbc.writeMem(0x64aa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb018);
        EXPECT(gbc.pc(), 0x64ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 037B
        gbc.setState(0x7606, 0x4866, 0xd810, 0x75b3, 0xeb0b, 0xb01a, 0x0, 0x0);
        gbc.writeMem(0x7606, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4866);
        EXPECT(gbc.pc(), 0x7608);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 037C
        gbc.setState(0xa3b5, 0x1ea8, 0x4e60, 0x43cc, 0x39c2, 0x89ca, 0x0, 0x1);
        gbc.writeMem(0xa3b5, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1ea8);
        EXPECT(gbc.pc(), 0xa3b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b5), 0xcb);
        EXPECT(gbc.readMem(0xa3b6), 0x37);
        // CB 37 037E
        gbc.setState(0x7a75, 0xee0a, 0xc500, 0x1d70, 0xc323, 0xf625, 0x1, 0x0);
        gbc.writeMem(0x7a75, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xee0a);
        EXPECT(gbc.pc(), 0x7a77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 037F
        gbc.setState(0x3602, 0x6a90, 0x7f0, 0x1e80, 0x3698, 0x813e, 0x1, 0x1);
        gbc.writeMem(0x3602, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6a90);
        EXPECT(gbc.pc(), 0x3604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0380
        gbc.setState(0xda5f, 0xfc80, 0x9d00, 0x8424, 0xfdbc, 0xbdc7, 0x1, 0x0);
        gbc.writeMem(0xda5f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfc80);
        EXPECT(gbc.pc(), 0xda61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5f), 0xcb);
        EXPECT(gbc.readMem(0xda60), 0x37);
        // CB 37 0381
        gbc.setState(0x4f3f, 0x13ce, 0xd790, 0xd664, 0x9d29, 0x86be, 0x0, 0x0);
        gbc.writeMem(0x4f3f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x13ce);
        EXPECT(gbc.pc(), 0x4f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0382
        gbc.setState(0x7d89, 0x6d0e, 0xeaf0, 0x832e, 0xd5, 0x6be2, 0x1, 0x1);
        gbc.writeMem(0x7d89, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6d0e);
        EXPECT(gbc.pc(), 0x7d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0383
        gbc.setState(0x9052, 0x953f, 0xf1a0, 0x9cf9, 0x2a74, 0x160f, 0x0, 0x0);
        gbc.writeMem(0x9052, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x953f);
        EXPECT(gbc.pc(), 0x9054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9052), 0xcb);
        EXPECT(gbc.readMem(0x9053), 0x37);
        // CB 37 0384
        gbc.setState(0x932a, 0x6623, 0x13b0, 0x572e, 0xe2e4, 0xb6fb, 0x1, 0x1);
        gbc.writeMem(0x932a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6623);
        EXPECT(gbc.pc(), 0x932c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x932a), 0xcb);
        EXPECT(gbc.readMem(0x932b), 0x37);
        // CB 37 0385
        gbc.setState(0x9b9a, 0xecf7, 0x89b0, 0x5cc8, 0xb4da, 0xd2c1, 0x0, 0x1);
        gbc.writeMem(0x9b9a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xecf7);
        EXPECT(gbc.pc(), 0x9b9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b9a), 0xcb);
        EXPECT(gbc.readMem(0x9b9b), 0x37);
        // CB 37 0386
        gbc.setState(0x3fa1, 0x7f71, 0xd240, 0x8302, 0xcc70, 0xfd9a, 0x1, 0x0);
        gbc.writeMem(0x3fa1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7f71);
        EXPECT(gbc.pc(), 0x3fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0387
        gbc.setState(0x15fe, 0x563d, 0x2940, 0x2d01, 0xfba, 0x1435, 0x1, 0x1);
        gbc.writeMem(0x15fe, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x563d);
        EXPECT(gbc.pc(), 0x1600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0388
        gbc.setState(0x572a, 0x2aa2, 0x2b50, 0x4b2f, 0x2cd7, 0x9b5e, 0x1, 0x1);
        gbc.writeMem(0x572a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2aa2);
        EXPECT(gbc.pc(), 0x572c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0389
        gbc.setState(0x7f9, 0x9817, 0x260, 0xb73d, 0xf6e0, 0xa8d7, 0x1, 0x0);
        gbc.writeMem(0x7f9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9817);
        EXPECT(gbc.pc(), 0x7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 038A
        gbc.setState(0x1664, 0x52ff, 0x66d0, 0x97d7, 0x61f8, 0x1dab, 0x1, 0x0);
        gbc.writeMem(0x1664, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x52ff);
        EXPECT(gbc.pc(), 0x1666);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 038B
        gbc.setState(0x4db2, 0xc373, 0x9480, 0x369a, 0x216b, 0x1a22, 0x0, 0x0);
        gbc.writeMem(0x4db2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc373);
        EXPECT(gbc.pc(), 0x4db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 038C
        gbc.setState(0xacb3, 0xe9a0, 0x3700, 0xee4b, 0x8cc2, 0x51ff, 0x1, 0x1);
        gbc.writeMem(0xacb3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe9a0);
        EXPECT(gbc.pc(), 0xacb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacb3), 0xcb);
        EXPECT(gbc.readMem(0xacb4), 0x37);
        // CB 37 038D
        gbc.setState(0x28ef, 0x651f, 0x3620, 0xd214, 0xdc57, 0xca91, 0x0, 0x0);
        gbc.writeMem(0x28ef, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x651f);
        EXPECT(gbc.pc(), 0x28f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 038E
        gbc.setState(0xb3ba, 0xd5b4, 0x650, 0x16ff, 0x9347, 0xdfab, 0x0, 0x0);
        gbc.writeMem(0xb3ba, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd5b4);
        EXPECT(gbc.pc(), 0xb3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ba), 0xcb);
        EXPECT(gbc.readMem(0xb3bb), 0x37);
        // CB 37 038F
        gbc.setState(0xd43, 0xb59, 0x13a0, 0xdac0, 0xdab8, 0xa911, 0x0, 0x0);
        gbc.writeMem(0xd43, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb59);
        EXPECT(gbc.pc(), 0xd45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0390
        gbc.setState(0x9e34, 0xd749, 0xa200, 0x7c95, 0xa166, 0xaa96, 0x1, 0x0);
        gbc.writeMem(0x9e34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd749);
        EXPECT(gbc.pc(), 0x9e36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e34), 0xcb);
        EXPECT(gbc.readMem(0x9e35), 0x37);
        // CB 37 0391
        gbc.setState(0x3b93, 0x54f0, 0x9020, 0xb3cd, 0xf5a5, 0xed, 0x0, 0x0);
        gbc.writeMem(0x3b93, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x54f0);
        EXPECT(gbc.pc(), 0x3b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0392
        gbc.setState(0x5afa, 0x433f, 0x7430, 0x137e, 0x10aa, 0xfd8f, 0x0, 0x0);
        gbc.writeMem(0x5afa, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x433f);
        EXPECT(gbc.pc(), 0x5afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0393
        gbc.setState(0xa3ca, 0x2490, 0x2fe0, 0xb23, 0xe828, 0xc444, 0x0, 0x0);
        gbc.writeMem(0xa3ca, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2490);
        EXPECT(gbc.pc(), 0xa3cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ca), 0xcb);
        EXPECT(gbc.readMem(0xa3cb), 0x37);
        // CB 37 0394
        gbc.setState(0xb90, 0xf1b1, 0x2eb0, 0x43fb, 0xdca9, 0xc46a, 0x0, 0x1);
        gbc.writeMem(0xb90, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf1b1);
        EXPECT(gbc.pc(), 0xb92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0395
        gbc.setState(0x8d5e, 0x9c3f, 0xd6a0, 0x2f7e, 0xd7c7, 0x54b4, 0x1, 0x1);
        gbc.writeMem(0x8d5e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9c3f);
        EXPECT(gbc.pc(), 0x8d60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d5e), 0xcb);
        EXPECT(gbc.readMem(0x8d5f), 0x37);
        // CB 37 0396
        gbc.setState(0xaf88, 0xe9cc, 0xa320, 0x5e04, 0x97a3, 0xcffb, 0x1, 0x1);
        gbc.writeMem(0xaf88, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe9cc);
        EXPECT(gbc.pc(), 0xaf8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf88), 0xcb);
        EXPECT(gbc.readMem(0xaf89), 0x37);
        // CB 37 0397
        gbc.setState(0x6c34, 0xa851, 0xea00, 0x35f3, 0xae1c, 0xdbc7, 0x1, 0x1);
        gbc.writeMem(0x6c34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xa851);
        EXPECT(gbc.pc(), 0x6c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0398
        gbc.setState(0x6151, 0xa7b4, 0xbff0, 0xc78a, 0x4c31, 0x6ac2, 0x1, 0x1);
        gbc.writeMem(0x6151, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa7b4);
        EXPECT(gbc.pc(), 0x6153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 0399
        gbc.setState(0xdb8f, 0xab46, 0x1eb0, 0x94dc, 0xe63d, 0xb2d3, 0x1, 0x0);
        gbc.writeMem(0xdb8f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xab46);
        EXPECT(gbc.pc(), 0xdb91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb8f), 0xcb);
        EXPECT(gbc.readMem(0xdb90), 0x37);
        // CB 37 039A
        gbc.setState(0x470a, 0xc1fd, 0x6fc0, 0x19b3, 0x669f, 0x8f01, 0x0, 0x0);
        gbc.writeMem(0x470a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc1fd);
        EXPECT(gbc.pc(), 0x470c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 039B
        gbc.setState(0xe91b, 0x744a, 0x370, 0xb96, 0xead9, 0x197, 0x1, 0x0);
        gbc.writeMem(0xe91b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x744a);
        EXPECT(gbc.pc(), 0xe91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91b), 0xcb);
        EXPECT(gbc.readMem(0xe91c), 0x37);
        // CB 37 039C
        gbc.setState(0x8151, 0x4e74, 0x9990, 0x1253, 0x2411, 0xc005, 0x0, 0x0);
        gbc.writeMem(0x8151, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4e74);
        EXPECT(gbc.pc(), 0x8153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8151), 0xcb);
        EXPECT(gbc.readMem(0x8152), 0x37);
        // CB 37 039D
        gbc.setState(0xd7d4, 0x517c, 0x50, 0x1a91, 0x9bd1, 0x6dd9, 0x0, 0x1);
        gbc.writeMem(0xd7d4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x517c);
        EXPECT(gbc.pc(), 0xd7d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d4), 0xcb);
        EXPECT(gbc.readMem(0xd7d5), 0x37);
        // CB 37 039E
        gbc.setState(0x988f, 0x86c, 0x3ae0, 0x57c6, 0xdc99, 0xf85e, 0x0, 0x0);
        gbc.writeMem(0x988f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x86c);
        EXPECT(gbc.pc(), 0x9891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x988f), 0xcb);
        EXPECT(gbc.readMem(0x9890), 0x37);
        // CB 37 039F
        gbc.setState(0x7aa4, 0x20ea, 0xc3b0, 0x64d1, 0xf17a, 0x4033, 0x0, 0x0);
        gbc.writeMem(0x7aa4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x20ea);
        EXPECT(gbc.pc(), 0x7aa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A0
        gbc.setState(0x190b, 0x4988, 0xb440, 0x9f15, 0x498b, 0x5ec9, 0x1, 0x0);
        gbc.writeMem(0x190b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4988);
        EXPECT(gbc.pc(), 0x190d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A1
        gbc.setState(0x4069, 0x783, 0x7470, 0x6e55, 0x642, 0xf8e5, 0x0, 0x1);
        gbc.writeMem(0x4069, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x783);
        EXPECT(gbc.pc(), 0x406b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A2
        gbc.setState(0x5998, 0x13c2, 0x3cb0, 0x6048, 0x4506, 0xd89f, 0x0, 0x0);
        gbc.writeMem(0x5998, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x13c2);
        EXPECT(gbc.pc(), 0x599a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A3
        gbc.setState(0x5b34, 0x57f4, 0x3a10, 0xb962, 0x72ec, 0x6882, 0x1, 0x0);
        gbc.writeMem(0x5b34, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x57f4);
        EXPECT(gbc.pc(), 0x5b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A4
        gbc.setState(0x546f, 0x29ea, 0x17d0, 0xf6b2, 0x40b2, 0x3d0d, 0x0, 0x1);
        gbc.writeMem(0x546f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x29ea);
        EXPECT(gbc.pc(), 0x5471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A5
        gbc.setState(0xbec7, 0xe80e, 0x2d30, 0x6cfa, 0xb9d4, 0xc4d4, 0x0, 0x1);
        gbc.writeMem(0xbec7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe80e);
        EXPECT(gbc.pc(), 0xbec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec7), 0xcb);
        EXPECT(gbc.readMem(0xbec8), 0x37);
        // CB 37 03A6
        gbc.setState(0xaf32, 0x6cd7, 0xa0b0, 0x3038, 0x1cb3, 0xe7aa, 0x0, 0x1);
        gbc.writeMem(0xaf32, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6cd7);
        EXPECT(gbc.pc(), 0xaf34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf32), 0xcb);
        EXPECT(gbc.readMem(0xaf33), 0x37);
        // CB 37 03A7
        gbc.setState(0x14e7, 0x3ada, 0xdae0, 0x9b01, 0xcd0e, 0x77b0, 0x0, 0x1);
        gbc.writeMem(0x14e7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3ada);
        EXPECT(gbc.pc(), 0x14e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A8
        gbc.setState(0x25eb, 0x51f, 0xf000, 0x1d4e, 0x4fb, 0x217e, 0x1, 0x1);
        gbc.writeMem(0x25eb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x51f);
        EXPECT(gbc.pc(), 0x25ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03A9
        gbc.setState(0x495f, 0x2d13, 0x1e20, 0x3de1, 0xb710, 0xc226, 0x0, 0x0);
        gbc.writeMem(0x495f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2d13);
        EXPECT(gbc.pc(), 0x4961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03AA
        gbc.setState(0x8b11, 0x29c1, 0xcfb0, 0xeeed, 0x2930, 0xf0d1, 0x0, 0x0);
        gbc.writeMem(0x8b11, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0x8b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b11), 0xcb);
        EXPECT(gbc.readMem(0x8b12), 0x37);
        // CB 37 03AB
        gbc.setState(0x3773, 0xb750, 0x7360, 0xae09, 0xf5a5, 0x33b6, 0x1, 0x1);
        gbc.writeMem(0x3773, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb750);
        EXPECT(gbc.pc(), 0x3775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03AC
        gbc.setState(0x420a, 0x7300, 0x30f0, 0xfcc3, 0x9990, 0x8fa0, 0x1, 0x1);
        gbc.writeMem(0x420a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7300);
        EXPECT(gbc.pc(), 0x420c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03AD
        gbc.setState(0x832a, 0xd0e2, 0x61d0, 0x63, 0x556, 0xa000, 0x1, 0x0);
        gbc.writeMem(0x832a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd0e2);
        EXPECT(gbc.pc(), 0x832c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x832a), 0xcb);
        EXPECT(gbc.readMem(0x832b), 0x37);
        // CB 37 03AF
        gbc.setState(0x9f6e, 0x43c8, 0x90c0, 0x7078, 0x5c8a, 0x3c21, 0x0, 0x1);
        gbc.writeMem(0x9f6e, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x43c8);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6e), 0xcb);
        EXPECT(gbc.readMem(0x9f6f), 0x37);
        // CB 37 03B0
        gbc.setState(0xa461, 0xbfec, 0x1f80, 0x53d0, 0xd463, 0x1dd4, 0x1, 0x1);
        gbc.writeMem(0xa461, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbfec);
        EXPECT(gbc.pc(), 0xa463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa461), 0xcb);
        EXPECT(gbc.readMem(0xa462), 0x37);
        // CB 37 03B1
        gbc.setState(0xdf2, 0x1c9e, 0x2790, 0xf6a6, 0x174, 0x37cb, 0x0, 0x0);
        gbc.writeMem(0xdf2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1c9e);
        EXPECT(gbc.pc(), 0xdf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03B2
        gbc.setState(0x3187, 0x11e9, 0xdd30, 0xb747, 0xb266, 0xa37f, 0x1, 0x0);
        gbc.writeMem(0x3187, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x11e9);
        EXPECT(gbc.pc(), 0x3189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03B3
        gbc.setState(0x9157, 0x5fb6, 0x40a0, 0xd7a7, 0xb5dc, 0x7ad9, 0x1, 0x0);
        gbc.writeMem(0x9157, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5fb6);
        EXPECT(gbc.pc(), 0x9159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9157), 0xcb);
        EXPECT(gbc.readMem(0x9158), 0x37);
        // CB 37 03B4
        gbc.setState(0xa7a2, 0x98cd, 0x2cd0, 0xdf92, 0x1311, 0x3692, 0x0, 0x1);
        gbc.writeMem(0xa7a2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x98cd);
        EXPECT(gbc.pc(), 0xa7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a2), 0xcb);
        EXPECT(gbc.readMem(0xa7a3), 0x37);
        // CB 37 03B5
        gbc.setState(0x79cd, 0x311e, 0x440, 0xd729, 0x9e59, 0x1934, 0x1, 0x1);
        gbc.writeMem(0x79cd, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x311e);
        EXPECT(gbc.pc(), 0x79cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03B6
        gbc.setState(0xa2b9, 0x3e78, 0x70f0, 0x2be2, 0x55bd, 0x6ce7, 0x0, 0x1);
        gbc.writeMem(0xa2b9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x3e78);
        EXPECT(gbc.pc(), 0xa2bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b9), 0xcb);
        EXPECT(gbc.readMem(0xa2ba), 0x37);
        // CB 37 03B7
        gbc.setState(0x9e02, 0xa614, 0x5000, 0x1abc, 0x6a4c, 0x7da4, 0x0, 0x0);
        gbc.writeMem(0x9e02, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa614);
        EXPECT(gbc.pc(), 0x9e04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e02), 0xcb);
        EXPECT(gbc.readMem(0x9e03), 0x37);
        // CB 37 03B8
        gbc.setState(0x94cf, 0x6aaa, 0x3960, 0x7e2f, 0x7f43, 0xd4b, 0x1, 0x1);
        gbc.writeMem(0x94cf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6aaa);
        EXPECT(gbc.pc(), 0x94d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94cf), 0xcb);
        EXPECT(gbc.readMem(0x94d0), 0x37);
        // CB 37 03BA
        gbc.setState(0xd46b, 0x5032, 0xcb80, 0xd35d, 0x602b, 0xab6f, 0x1, 0x1);
        gbc.writeMem(0xd46b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5032);
        EXPECT(gbc.pc(), 0xd46d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd46b), 0xcb);
        EXPECT(gbc.readMem(0xd46c), 0x37);
        // CB 37 03BB
        gbc.setState(0x76a, 0x70a6, 0xbb70, 0x574b, 0xcdb3, 0xe36c, 0x1, 0x1);
        gbc.writeMem(0x76a, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x70a6);
        EXPECT(gbc.pc(), 0x76c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03BC
        gbc.setState(0x804c, 0x1ec2, 0xd610, 0x7526, 0x7d59, 0xf27d, 0x1, 0x1);
        gbc.writeMem(0x804c, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1ec2);
        EXPECT(gbc.pc(), 0x804e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x804c), 0xcb);
        EXPECT(gbc.readMem(0x804d), 0x37);
        // CB 37 03BD
        gbc.setState(0x1736, 0xd1f8, 0x9770, 0x75e8, 0xa9ca, 0x6c4f, 0x1, 0x0);
        gbc.writeMem(0x1736, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd1f8);
        EXPECT(gbc.pc(), 0x1738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03BE
        gbc.setState(0xe3d7, 0xd79f, 0xbed0, 0x1fca, 0x4171, 0xb0f2, 0x0, 0x1);
        gbc.writeMem(0xe3d7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd79f);
        EXPECT(gbc.pc(), 0xe3d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d7), 0xcb);
        EXPECT(gbc.readMem(0xe3d8), 0x37);
        // CB 37 03BF
        gbc.setState(0xbc4d, 0xbee9, 0xa130, 0xf81, 0x9930, 0xf35a, 0x1, 0x1);
        gbc.writeMem(0xbc4d, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbee9);
        EXPECT(gbc.pc(), 0xbc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc4d), 0xcb);
        EXPECT(gbc.readMem(0xbc4e), 0x37);
        // CB 37 03C0
        gbc.setState(0x6b1b, 0x16fc, 0xfc90, 0x671f, 0x5a40, 0x72f2, 0x1, 0x1);
        gbc.writeMem(0x6b1b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x16fc);
        EXPECT(gbc.pc(), 0x6b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03C1
        gbc.setState(0xaf90, 0xaa6, 0xc310, 0x6d50, 0x1ffc, 0x836e, 0x0, 0x0);
        gbc.writeMem(0xaf90, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xaa6);
        EXPECT(gbc.pc(), 0xaf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf90), 0xcb);
        EXPECT(gbc.readMem(0xaf91), 0x37);
        // CB 37 03C2
        gbc.setState(0x34f9, 0xb86a, 0x9950, 0xdd9, 0xcb3a, 0x549, 0x1, 0x1);
        gbc.writeMem(0x34f9, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xb86a);
        EXPECT(gbc.pc(), 0x34fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03C3
        gbc.setState(0x8b11, 0xa700, 0xe4e0, 0xdef3, 0xd446, 0xf973, 0x0, 0x1);
        gbc.writeMem(0x8b11, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa700);
        EXPECT(gbc.pc(), 0x8b13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b11), 0xcb);
        EXPECT(gbc.readMem(0x8b12), 0x37);
        // CB 37 03C4
        gbc.setState(0x2e99, 0xcc7e, 0x7020, 0xeed5, 0x5b87, 0xd8a4, 0x1, 0x0);
        gbc.writeMem(0x2e99, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x2e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03C5
        gbc.setState(0x58e3, 0xd540, 0x3b00, 0xbaa5, 0xbc3f, 0x6755, 0x0, 0x1);
        gbc.writeMem(0x58e3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd540);
        EXPECT(gbc.pc(), 0x58e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03C6
        gbc.setState(0xb977, 0x42c0, 0xd690, 0xdc79, 0x6eb6, 0x7016, 0x0, 0x1);
        gbc.writeMem(0xb977, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x42c0);
        EXPECT(gbc.pc(), 0xb979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb977), 0xcb);
        EXPECT(gbc.readMem(0xb978), 0x37);
        // CB 37 03C7
        gbc.setState(0xce18, 0x54b8, 0x78e0, 0xdb6, 0xa40c, 0x6648, 0x1, 0x0);
        gbc.writeMem(0xce18, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x54b8);
        EXPECT(gbc.pc(), 0xce1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce18), 0xcb);
        EXPECT(gbc.readMem(0xce19), 0x37);
        // CB 37 03C8
        gbc.setState(0x21ea, 0xae10, 0xc330, 0xdf4, 0x6e20, 0x7a57, 0x0, 0x0);
        gbc.writeMem(0x21ea, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xae10);
        EXPECT(gbc.pc(), 0x21ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03C9
        gbc.setState(0xbb86, 0x968f, 0x24f0, 0x4aa5, 0xd542, 0xa739, 0x0, 0x1);
        gbc.writeMem(0xbb86, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x968f);
        EXPECT(gbc.pc(), 0xbb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb86), 0xcb);
        EXPECT(gbc.readMem(0xbb87), 0x37);
        // CB 37 03CA
        gbc.setState(0x8e3f, 0x5d09, 0x8470, 0x64a8, 0xbe31, 0x69c7, 0x0, 0x0);
        gbc.writeMem(0x8e3f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5d09);
        EXPECT(gbc.pc(), 0x8e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e3f), 0xcb);
        EXPECT(gbc.readMem(0x8e40), 0x37);
        // CB 37 03CC
        gbc.setState(0x5c32, 0x828c, 0x6040, 0x1843, 0xbd91, 0xf0f, 0x0, 0x0);
        gbc.writeMem(0x5c32, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x828c);
        EXPECT(gbc.pc(), 0x5c34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03CD
        gbc.setState(0xb643, 0xc57e, 0xea10, 0x98ac, 0xe26e, 0x4d40, 0x0, 0x1);
        gbc.writeMem(0xb643, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc57e);
        EXPECT(gbc.pc(), 0xb645);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb643), 0xcb);
        EXPECT(gbc.readMem(0xb644), 0x37);
        // CB 37 03CE
        gbc.setState(0xcab4, 0x723a, 0x71d0, 0x48af, 0xfa4d, 0x47e6, 0x1, 0x0);
        gbc.writeMem(0xcab4, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x723a);
        EXPECT(gbc.pc(), 0xcab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab4), 0xcb);
        EXPECT(gbc.readMem(0xcab5), 0x37);
        // CB 37 03CF
        gbc.setState(0xbed3, 0xb3e7, 0x4c30, 0x2d72, 0x288f, 0xd99e, 0x0, 0x0);
        gbc.writeMem(0xbed3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb3e7);
        EXPECT(gbc.pc(), 0xbed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed3), 0xcb);
        EXPECT(gbc.readMem(0xbed4), 0x37);
        // CB 37 03D0
        gbc.setState(0x67c1, 0xce26, 0x6dc0, 0x9f21, 0x1336, 0xc64f, 0x1, 0x0);
        gbc.writeMem(0x67c1, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xce26);
        EXPECT(gbc.pc(), 0x67c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03D1
        gbc.setState(0xb272, 0x620c, 0x9f90, 0x83eb, 0xd87f, 0x545d, 0x1, 0x1);
        gbc.writeMem(0xb272, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x620c);
        EXPECT(gbc.pc(), 0xb274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb272), 0xcb);
        EXPECT(gbc.readMem(0xb273), 0x37);
        // CB 37 03D2
        gbc.setState(0xa933, 0x83c8, 0x69e0, 0x34fb, 0x9730, 0x3c3a, 0x0, 0x1);
        gbc.writeMem(0xa933, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x83c8);
        EXPECT(gbc.pc(), 0xa935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa933), 0xcb);
        EXPECT(gbc.readMem(0xa934), 0x37);
        // CB 37 03D3
        gbc.setState(0x76b2, 0xff64, 0x8660, 0x74d1, 0xe01, 0xaf43, 0x1, 0x0);
        gbc.writeMem(0x76b2, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xff64);
        EXPECT(gbc.pc(), 0x76b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03D4
        gbc.setState(0x5832, 0x2707, 0x7ce0, 0x94b3, 0x585b, 0xbb84, 0x0, 0x1);
        gbc.writeMem(0x5832, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2707);
        EXPECT(gbc.pc(), 0x5834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03D5
        gbc.setState(0x47da, 0x393b, 0x5bc0, 0x8492, 0x95d3, 0x3162, 0x0, 0x1);
        gbc.writeMem(0x47da, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x393b);
        EXPECT(gbc.pc(), 0x47dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03D7
        gbc.setState(0xb2e8, 0x782, 0x3310, 0xfe1a, 0xdc0d, 0xd277, 0x1, 0x0);
        gbc.writeMem(0xb2e8, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x782);
        EXPECT(gbc.pc(), 0xb2ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2e8), 0xcb);
        EXPECT(gbc.readMem(0xb2e9), 0x37);
        // CB 37 03D9
        gbc.setState(0xadaf, 0xe284, 0x4c0, 0x4650, 0x7783, 0xb549, 0x1, 0x1);
        gbc.writeMem(0xadaf, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe284);
        EXPECT(gbc.pc(), 0xadb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadaf), 0xcb);
        EXPECT(gbc.readMem(0xadb0), 0x37);
        // CB 37 03DA
        gbc.setState(0x5bbb, 0xaf9f, 0xfea0, 0xf5b, 0xa4ed, 0xc3ee, 0x0, 0x0);
        gbc.writeMem(0x5bbb, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xaf9f);
        EXPECT(gbc.pc(), 0x5bbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03DB
        gbc.setState(0xdd2b, 0x3e07, 0x70a0, 0xb679, 0x664c, 0x63ec, 0x1, 0x1);
        gbc.writeMem(0xdd2b, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3e07);
        EXPECT(gbc.pc(), 0xdd2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2b), 0xcb);
        EXPECT(gbc.readMem(0xdd2c), 0x37);
        // CB 37 03DC
        gbc.setState(0x180f, 0x2a21, 0xbd00, 0x7fde, 0xacf1, 0xa05c, 0x1, 0x1);
        gbc.writeMem(0x180f, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2a21);
        EXPECT(gbc.pc(), 0x1811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03DD
        gbc.setState(0x6ac3, 0x683c, 0x2250, 0xb489, 0x25af, 0x7202, 0x1, 0x1);
        gbc.writeMem(0x6ac3, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x683c);
        EXPECT(gbc.pc(), 0x6ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03DE
        gbc.setState(0x9be7, 0x3418, 0x2e60, 0x8cc8, 0x78c3, 0x93f0, 0x1, 0x1);
        gbc.writeMem(0x9be7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x3418);
        EXPECT(gbc.pc(), 0x9be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be7), 0xcb);
        EXPECT(gbc.readMem(0x9be8), 0x37);
        // CB 37 03DF
        gbc.setState(0x38f7, 0xa73f, 0x2150, 0xb653, 0x5670, 0x16dd, 0x0, 0x1);
        gbc.writeMem(0x38f7, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa73f);
        EXPECT(gbc.pc(), 0x38f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E0
        gbc.setState(0xaade, 0x7bb7, 0x8c0, 0xa6c0, 0xbcbb, 0x3824, 0x1, 0x0);
        gbc.writeMem(0xaade, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7bb7);
        EXPECT(gbc.pc(), 0xaae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaade), 0xcb);
        EXPECT(gbc.readMem(0xaadf), 0x37);
        // CB 37 03E1
        gbc.setState(0x3539, 0x9963, 0xf1d0, 0xce7, 0x18a0, 0xce8c, 0x1, 0x0);
        gbc.writeMem(0x3539, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9963);
        EXPECT(gbc.pc(), 0x353b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E2
        gbc.setState(0x1f80, 0xd6af, 0x3380, 0x4025, 0x4faf, 0x226c, 0x1, 0x0);
        gbc.writeMem(0x1f80, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd6af);
        EXPECT(gbc.pc(), 0x1f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E3
        gbc.setState(0x6930, 0xca98, 0xe060, 0xe027, 0x36a1, 0x43a9, 0x0, 0x1);
        gbc.writeMem(0x6930, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xca98);
        EXPECT(gbc.pc(), 0x6932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E4
        gbc.setState(0x5521, 0xafd2, 0x5600, 0xdcde, 0xb8e2, 0x2451, 0x0, 0x0);
        gbc.writeMem(0x5521, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xafd2);
        EXPECT(gbc.pc(), 0x5523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E5
        gbc.setState(0xac02, 0x3173, 0xb450, 0x79f0, 0x6b87, 0x10ae, 0x0, 0x1);
        gbc.writeMem(0xac02, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3173);
        EXPECT(gbc.pc(), 0xac04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac02), 0xcb);
        EXPECT(gbc.readMem(0xac03), 0x37);
        // CB 37 03E6
        gbc.setState(0x4d01, 0xf36c, 0x3f90, 0x203e, 0xaefd, 0xd878, 0x0, 0x1);
        gbc.writeMem(0x4d01, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf36c);
        EXPECT(gbc.pc(), 0x4d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 37 03E7
        gbc.setState(0x1d89, 0x7480, 0x9610, 0xf148, 0xe5ae, 0x2d9e, 0x0, 0x1);
        gbc.writeMem(0x1d89, { 0xcb, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7480);
        EXPECT(gbc.pc(), 0x1d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
