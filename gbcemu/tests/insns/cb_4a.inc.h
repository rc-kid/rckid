    TEST(gbcemu, opcode_cb_4a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 4A 0002
        gbc.setState(0x6933, 0x591a, 0x3570, 0x66f6, 0x5550, 0xbe2f, 0x1, 0x0);
        gbc.writeMem(0x6933, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x591a);
        EXPECT(gbc.pc(), 0x6935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0003
        gbc.setState(0x6f9d, 0xc1fd, 0x21a0, 0x87ae, 0x7c4a, 0xd166, 0x0, 0x0);
        gbc.writeMem(0x6f9d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc1fd);
        EXPECT(gbc.pc(), 0x6f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0004
        gbc.setState(0xad4d, 0xbf98, 0xb840, 0x1d75, 0x4ea3, 0xbca4, 0x0, 0x0);
        gbc.writeMem(0xad4d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbf98);
        EXPECT(gbc.pc(), 0xad4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4d), 0xcb);
        EXPECT(gbc.readMem(0xad4e), 0x4a);
        // CB 4A 0005
        gbc.setState(0xc17b, 0xd0b8, 0x9960, 0x55a5, 0x776e, 0x25b7, 0x1, 0x0);
        gbc.writeMem(0xc17b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd0b8);
        EXPECT(gbc.pc(), 0xc17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc17b), 0xcb);
        EXPECT(gbc.readMem(0xc17c), 0x4a);
        // CB 4A 0006
        gbc.setState(0xe64e, 0xbd66, 0x4740, 0xd5a0, 0x414b, 0x37b5, 0x1, 0x0);
        gbc.writeMem(0xe64e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbd66);
        EXPECT(gbc.pc(), 0xe650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe64e), 0xcb);
        EXPECT(gbc.readMem(0xe64f), 0x4a);
        // CB 4A 0007
        gbc.setState(0x594b, 0x33fc, 0x4c50, 0x4f7e, 0x7b67, 0xbc74, 0x1, 0x1);
        gbc.writeMem(0x594b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x33fc);
        EXPECT(gbc.pc(), 0x594d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0008
        gbc.setState(0x14fe, 0x3876, 0xfae0, 0xf046, 0x4d51, 0xa7fd, 0x1, 0x0);
        gbc.writeMem(0x14fe, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0x1500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 000A
        gbc.setState(0x13f, 0x1370, 0xf620, 0x992d, 0xa633, 0x6d80, 0x0, 0x0);
        gbc.writeMem(0x13f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1370);
        EXPECT(gbc.pc(), 0x141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 000B
        gbc.setState(0xa5f1, 0x8c1f, 0x47a0, 0x19ed, 0xe2b2, 0xa706, 0x1, 0x0);
        gbc.writeMem(0xa5f1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8c1f);
        EXPECT(gbc.pc(), 0xa5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5f1), 0xcb);
        EXPECT(gbc.readMem(0xa5f2), 0x4a);
        // CB 4A 000D
        gbc.setState(0x32f3, 0x1e32, 0xadb0, 0x6a, 0xd364, 0xc151, 0x1, 0x1);
        gbc.writeMem(0x32f3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1e32);
        EXPECT(gbc.pc(), 0x32f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 000E
        gbc.setState(0x701f, 0x27cb, 0xe080, 0x87ee, 0xf51d, 0xee8d, 0x0, 0x1);
        gbc.writeMem(0x701f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x27cb);
        EXPECT(gbc.pc(), 0x7021);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0010
        gbc.setState(0x5e24, 0x7aa8, 0xc660, 0x9f9d, 0xc655, 0x1071, 0x0, 0x0);
        gbc.writeMem(0x5e24, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7aa8);
        EXPECT(gbc.pc(), 0x5e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0012
        gbc.setState(0x727f, 0x32a6, 0x89d0, 0x90e6, 0x2f13, 0x6b6a, 0x0, 0x0);
        gbc.writeMem(0x727f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x32a6);
        EXPECT(gbc.pc(), 0x7281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0013
        gbc.setState(0xdfc4, 0x21b8, 0x97b0, 0x997c, 0x374e, 0x400b, 0x1, 0x1);
        gbc.writeMem(0xdfc4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x21b8);
        EXPECT(gbc.pc(), 0xdfc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfc4), 0xcb);
        EXPECT(gbc.readMem(0xdfc5), 0x4a);
        // CB 4A 0014
        gbc.setState(0x2a87, 0x1bb5, 0xf3b0, 0x8452, 0x20b1, 0xf996, 0x0, 0x0);
        gbc.writeMem(0x2a87, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1bb5);
        EXPECT(gbc.pc(), 0x2a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0015
        gbc.setState(0x491b, 0x8fb3, 0x370, 0xb30f, 0x94bb, 0x3d73, 0x1, 0x1);
        gbc.writeMem(0x491b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8fb3);
        EXPECT(gbc.pc(), 0x491d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0016
        gbc.setState(0xb255, 0x85e5, 0x2160, 0x4b74, 0x3fbc, 0x8284, 0x1, 0x0);
        gbc.writeMem(0xb255, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x85e5);
        EXPECT(gbc.pc(), 0xb257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb255), 0xcb);
        EXPECT(gbc.readMem(0xb256), 0x4a);
        // CB 4A 0017
        gbc.setState(0x254, 0x3f5f, 0xde20, 0x60ea, 0xa7a8, 0xf49d, 0x0, 0x1);
        gbc.writeMem(0x254, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3f5f);
        EXPECT(gbc.pc(), 0x256);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0018
        gbc.setState(0xac8f, 0x4db3, 0xd2b0, 0xecb0, 0xd186, 0xd3ea, 0x0, 0x1);
        gbc.writeMem(0xac8f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4db3);
        EXPECT(gbc.pc(), 0xac91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8f), 0xcb);
        EXPECT(gbc.readMem(0xac90), 0x4a);
        // CB 4A 0019
        gbc.setState(0x55c8, 0x1d27, 0xb4f0, 0xb4ae, 0xc417, 0x380b, 0x1, 0x1);
        gbc.writeMem(0x55c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1d27);
        EXPECT(gbc.pc(), 0x55ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 001A
        gbc.setState(0x773, 0x266a, 0xced0, 0xd709, 0xe090, 0xe4b2, 0x1, 0x1);
        gbc.writeMem(0x773, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x266a);
        EXPECT(gbc.pc(), 0x775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 001B
        gbc.setState(0xcfdc, 0x4142, 0xe3f0, 0xb8ce, 0xea2e, 0xef43, 0x0, 0x1);
        gbc.writeMem(0xcfdc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4142);
        EXPECT(gbc.pc(), 0xcfde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfdc), 0xcb);
        EXPECT(gbc.readMem(0xcfdd), 0x4a);
        // CB 4A 001C
        gbc.setState(0xaf00, 0x4231, 0xc6b0, 0x3135, 0xacfd, 0x7ef3, 0x1, 0x0);
        gbc.writeMem(0xaf00, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4231);
        EXPECT(gbc.pc(), 0xaf02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf00), 0xcb);
        EXPECT(gbc.readMem(0xaf01), 0x4a);
        // CB 4A 001D
        gbc.setState(0x436f, 0x1e7c, 0xa940, 0x99ee, 0xb199, 0x11d6, 0x0, 0x0);
        gbc.writeMem(0x436f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1e7c);
        EXPECT(gbc.pc(), 0x4371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 001F
        gbc.setState(0xd755, 0x39f1, 0xb990, 0xd14, 0xab32, 0x7683, 0x1, 0x0);
        gbc.writeMem(0xd755, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x39f1);
        EXPECT(gbc.pc(), 0xd757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd755), 0xcb);
        EXPECT(gbc.readMem(0xd756), 0x4a);
        // CB 4A 0020
        gbc.setState(0xd101, 0x2321, 0x4070, 0x5566, 0x66f9, 0x2f7e, 0x0, 0x0);
        gbc.writeMem(0xd101, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2321);
        EXPECT(gbc.pc(), 0xd103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd101), 0xcb);
        EXPECT(gbc.readMem(0xd102), 0x4a);
        // CB 4A 0021
        gbc.setState(0xcbbb, 0x299c, 0x2ea0, 0x6a89, 0x3239, 0x62c3, 0x1, 0x1);
        gbc.writeMem(0xcbbb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x299c);
        EXPECT(gbc.pc(), 0xcbbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbbb), 0xcb);
        EXPECT(gbc.readMem(0xcbbc), 0x4a);
        // CB 4A 0023
        gbc.setState(0x32da, 0x9e75, 0x7940, 0x6b20, 0xa209, 0xbd6e, 0x1, 0x1);
        gbc.writeMem(0x32da, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9e75);
        EXPECT(gbc.pc(), 0x32dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0024
        gbc.setState(0xc48, 0xc8de, 0x1c60, 0xa9b1, 0x63b3, 0x16fe, 0x0, 0x0);
        gbc.writeMem(0xc48, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc8de);
        EXPECT(gbc.pc(), 0xc4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0025
        gbc.setState(0xe316, 0x2f26, 0xd830, 0x961a, 0x5d97, 0x1bde, 0x0, 0x1);
        gbc.writeMem(0xe316, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2f26);
        EXPECT(gbc.pc(), 0xe318);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe316), 0xcb);
        EXPECT(gbc.readMem(0xe317), 0x4a);
        // CB 4A 0026
        gbc.setState(0x4bca, 0xdc4f, 0xf6e0, 0x5750, 0xbf14, 0xd748, 0x0, 0x0);
        gbc.writeMem(0x4bca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdc4f);
        EXPECT(gbc.pc(), 0x4bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0027
        gbc.setState(0x6ab, 0xe238, 0x8100, 0xd91f, 0x8e80, 0x239d, 0x1, 0x0);
        gbc.writeMem(0x6ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe238);
        EXPECT(gbc.pc(), 0x6ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0028
        gbc.setState(0x4cb4, 0x8d60, 0x8370, 0xc64a, 0x3397, 0x8211, 0x0, 0x0);
        gbc.writeMem(0x4cb4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x8d60);
        EXPECT(gbc.pc(), 0x4cb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0029
        gbc.setState(0xe983, 0xafe9, 0x7a10, 0xc68d, 0xd208, 0x2ef3, 0x0, 0x0);
        gbc.writeMem(0xe983, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xafe9);
        EXPECT(gbc.pc(), 0xe985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe983), 0xcb);
        EXPECT(gbc.readMem(0xe984), 0x4a);
        // CB 4A 002A
        gbc.setState(0x361b, 0x5a4d, 0x5680, 0x36e2, 0x6023, 0xda69, 0x1, 0x0);
        gbc.writeMem(0x361b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5a4d);
        EXPECT(gbc.pc(), 0x361d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 002B
        gbc.setState(0x2e99, 0x83ff, 0xf0f0, 0x842d, 0x4dbf, 0xe153, 0x1, 0x0);
        gbc.writeMem(0x2e99, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x83ff);
        EXPECT(gbc.pc(), 0x2e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 002C
        gbc.setState(0xd9c0, 0xf3a3, 0x3fc0, 0xb0a4, 0xa168, 0xebe, 0x0, 0x0);
        gbc.writeMem(0xd9c0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf3a3);
        EXPECT(gbc.pc(), 0xd9c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c0), 0xcb);
        EXPECT(gbc.readMem(0xd9c1), 0x4a);
        // CB 4A 002E
        gbc.setState(0x238f, 0xf179, 0x10a0, 0xbda2, 0x6807, 0x33e5, 0x0, 0x0);
        gbc.writeMem(0x238f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf179);
        EXPECT(gbc.pc(), 0x2391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 002F
        gbc.setState(0xd1da, 0x27a5, 0xf8f0, 0xd07, 0x12ce, 0x8f11, 0x1, 0x1);
        gbc.writeMem(0xd1da, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x27a5);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1da), 0xcb);
        EXPECT(gbc.readMem(0xd1db), 0x4a);
        // CB 4A 0031
        gbc.setState(0x7dd8, 0x7a24, 0x62a0, 0x8c69, 0x44f4, 0xdf68, 0x1, 0x0);
        gbc.writeMem(0x7dd8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7a24);
        EXPECT(gbc.pc(), 0x7dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0032
        gbc.setState(0xd91a, 0xc87c, 0x89e0, 0xeefb, 0x5c6e, 0xc801, 0x0, 0x1);
        gbc.writeMem(0xd91a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc87c);
        EXPECT(gbc.pc(), 0xd91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91a), 0xcb);
        EXPECT(gbc.readMem(0xd91b), 0x4a);
        // CB 4A 0033
        gbc.setState(0x7564, 0xa263, 0xced0, 0x3f66, 0xa373, 0x10fd, 0x1, 0x0);
        gbc.writeMem(0x7564, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa263);
        EXPECT(gbc.pc(), 0x7566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0034
        gbc.setState(0x3ed8, 0x1f07, 0x9680, 0x7202, 0x5922, 0xdae3, 0x1, 0x1);
        gbc.writeMem(0x3ed8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1f07);
        EXPECT(gbc.pc(), 0x3eda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0035
        gbc.setState(0x5ef, 0xad1, 0x8c60, 0x888a, 0x9074, 0x7940, 0x1, 0x0);
        gbc.writeMem(0x5ef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xad1);
        EXPECT(gbc.pc(), 0x5f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0036
        gbc.setState(0x34a, 0x8d85, 0x4390, 0x87c, 0xc90c, 0xf3d7, 0x0, 0x0);
        gbc.writeMem(0x34a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8d85);
        EXPECT(gbc.pc(), 0x34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0037
        gbc.setState(0xad3e, 0x499e, 0xb1c0, 0x1f16, 0x9045, 0x35a3, 0x1, 0x1);
        gbc.writeMem(0xad3e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x499e);
        EXPECT(gbc.pc(), 0xad40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3e), 0xcb);
        EXPECT(gbc.readMem(0xad3f), 0x4a);
        // CB 4A 0038
        gbc.setState(0x3ae6, 0x6f01, 0x9340, 0x5742, 0xcfba, 0x5af0, 0x1, 0x0);
        gbc.writeMem(0x3ae6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6f01);
        EXPECT(gbc.pc(), 0x3ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0039
        gbc.setState(0xb65b, 0xf5c0, 0xcd10, 0x3853, 0x91b0, 0xbb39, 0x0, 0x1);
        gbc.writeMem(0xb65b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf5c0);
        EXPECT(gbc.pc(), 0xb65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb65b), 0xcb);
        EXPECT(gbc.readMem(0xb65c), 0x4a);
        // CB 4A 003A
        gbc.setState(0x1864, 0x4d00, 0xa8c0, 0x4065, 0xb28f, 0xe1de, 0x1, 0x0);
        gbc.writeMem(0x1864, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4d00);
        EXPECT(gbc.pc(), 0x1866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 003B
        gbc.setState(0xb583, 0x8049, 0x5090, 0x2ae3, 0xd2fb, 0x6613, 0x0, 0x1);
        gbc.writeMem(0xb583, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8049);
        EXPECT(gbc.pc(), 0xb585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb583), 0xcb);
        EXPECT(gbc.readMem(0xb584), 0x4a);
        // CB 4A 003C
        gbc.setState(0x7ca0, 0x191f, 0x7a80, 0x9e0f, 0x8dd5, 0x9b76, 0x0, 0x1);
        gbc.writeMem(0x7ca0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x191f);
        EXPECT(gbc.pc(), 0x7ca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 003D
        gbc.setState(0x6701, 0x103a, 0xc500, 0xd12a, 0x6a03, 0xd948, 0x0, 0x1);
        gbc.writeMem(0x6701, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x103a);
        EXPECT(gbc.pc(), 0x6703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 003E
        gbc.setState(0x7978, 0xcbf3, 0xf470, 0x65a4, 0x7b85, 0x23ca, 0x0, 0x0);
        gbc.writeMem(0x7978, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcbf3);
        EXPECT(gbc.pc(), 0x797a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0040
        gbc.setState(0xb22a, 0x1782, 0x3f40, 0x6699, 0x785a, 0xf946, 0x0, 0x1);
        gbc.writeMem(0xb22a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1782);
        EXPECT(gbc.pc(), 0xb22c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22a), 0xcb);
        EXPECT(gbc.readMem(0xb22b), 0x4a);
        // CB 4A 0041
        gbc.setState(0xc38d, 0x7a84, 0xa80, 0x5235, 0x2bff, 0x99a0, 0x1, 0x1);
        gbc.writeMem(0xc38d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7a84);
        EXPECT(gbc.pc(), 0xc38f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38d), 0xcb);
        EXPECT(gbc.readMem(0xc38e), 0x4a);
        // CB 4A 0042
        gbc.setState(0x295e, 0xebf5, 0xe1e0, 0xb307, 0x3998, 0x48a4, 0x0, 0x1);
        gbc.writeMem(0x295e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xebf5);
        EXPECT(gbc.pc(), 0x2960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0043
        gbc.setState(0x7616, 0xe336, 0x8120, 0x8bd1, 0x553, 0x7fef, 0x1, 0x0);
        gbc.writeMem(0x7616, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe336);
        EXPECT(gbc.pc(), 0x7618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0044
        gbc.setState(0x1999, 0x5f, 0x7230, 0x1dbd, 0xe21c, 0x28ab, 0x0, 0x0);
        gbc.writeMem(0x1999, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5f);
        EXPECT(gbc.pc(), 0x199b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0045
        gbc.setState(0x9e0e, 0xea8b, 0x2890, 0x6e1d, 0xe81b, 0xe58b, 0x1, 0x0);
        gbc.writeMem(0x9e0e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xea8b);
        EXPECT(gbc.pc(), 0x9e10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e0e), 0xcb);
        EXPECT(gbc.readMem(0x9e0f), 0x4a);
        // CB 4A 0046
        gbc.setState(0xdb02, 0xc539, 0x7200, 0x7d2e, 0x8711, 0x10ab, 0x0, 0x0);
        gbc.writeMem(0xdb02, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc539);
        EXPECT(gbc.pc(), 0xdb04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb02), 0xcb);
        EXPECT(gbc.readMem(0xdb03), 0x4a);
        // CB 4A 0047
        gbc.setState(0xb58a, 0x9081, 0xdf40, 0xa18c, 0x71e3, 0x153, 0x1, 0x1);
        gbc.writeMem(0xb58a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9081);
        EXPECT(gbc.pc(), 0xb58c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb58a), 0xcb);
        EXPECT(gbc.readMem(0xb58b), 0x4a);
        // CB 4A 0048
        gbc.setState(0x4321, 0x997e, 0xdab0, 0x7fa6, 0x534a, 0x9299, 0x1, 0x1);
        gbc.writeMem(0x4321, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x997e);
        EXPECT(gbc.pc(), 0x4323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0049
        gbc.setState(0xc7b4, 0x1961, 0x45c0, 0x35f4, 0xf834, 0xe146, 0x1, 0x1);
        gbc.writeMem(0xc7b4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1961);
        EXPECT(gbc.pc(), 0xc7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b4), 0xcb);
        EXPECT(gbc.readMem(0xc7b5), 0x4a);
        // CB 4A 004A
        gbc.setState(0x920e, 0xfc73, 0xd590, 0xc370, 0x33f5, 0x209, 0x1, 0x1);
        gbc.writeMem(0x920e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfc73);
        EXPECT(gbc.pc(), 0x9210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x920e), 0xcb);
        EXPECT(gbc.readMem(0x920f), 0x4a);
        // CB 4A 004B
        gbc.setState(0x80f5, 0x783f, 0x9e70, 0x4acf, 0x9a61, 0xb18c, 0x1, 0x0);
        gbc.writeMem(0x80f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x783f);
        EXPECT(gbc.pc(), 0x80f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f5), 0xcb);
        EXPECT(gbc.readMem(0x80f6), 0x4a);
        // CB 4A 004C
        gbc.setState(0x5b5f, 0x9504, 0xe840, 0x37b0, 0x8e37, 0x2074, 0x0, 0x0);
        gbc.writeMem(0x5b5f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9504);
        EXPECT(gbc.pc(), 0x5b61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 004D
        gbc.setState(0x9f87, 0x4fbd, 0x9b80, 0x2e28, 0x9057, 0xed12, 0x1, 0x1);
        gbc.writeMem(0x9f87, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x4fbd);
        EXPECT(gbc.pc(), 0x9f89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f87), 0xcb);
        EXPECT(gbc.readMem(0x9f88), 0x4a);
        // CB 4A 004E
        gbc.setState(0x5ddf, 0xae88, 0xc9f0, 0x2d35, 0xad49, 0xd930, 0x0, 0x1);
        gbc.writeMem(0x5ddf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xae88);
        EXPECT(gbc.pc(), 0x5de1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 004F
        gbc.setState(0x76a0, 0x5d1e, 0x4680, 0x9721, 0x3b8b, 0x74c1, 0x1, 0x0);
        gbc.writeMem(0x76a0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x5d1e);
        EXPECT(gbc.pc(), 0x76a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0050
        gbc.setState(0xd954, 0x1110, 0x3c70, 0x3e93, 0x75fa, 0x5186, 0x1, 0x1);
        gbc.writeMem(0xd954, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1110);
        EXPECT(gbc.pc(), 0xd956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd954), 0xcb);
        EXPECT(gbc.readMem(0xd955), 0x4a);
        // CB 4A 0051
        gbc.setState(0x835b, 0x6589, 0xed10, 0x372c, 0x2d1a, 0x69dc, 0x1, 0x0);
        gbc.writeMem(0x835b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6589);
        EXPECT(gbc.pc(), 0x835d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x835b), 0xcb);
        EXPECT(gbc.readMem(0x835c), 0x4a);
        // CB 4A 0052
        gbc.setState(0xba9a, 0xb054, 0x9d60, 0x19e1, 0x87a0, 0xdaf8, 0x0, 0x1);
        gbc.writeMem(0xba9a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb054);
        EXPECT(gbc.pc(), 0xba9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba9a), 0xcb);
        EXPECT(gbc.readMem(0xba9b), 0x4a);
        // CB 4A 0053
        gbc.setState(0x6c51, 0x66ac, 0x95c0, 0x8075, 0xd1db, 0x1062, 0x0, 0x1);
        gbc.writeMem(0x6c51, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x66ac);
        EXPECT(gbc.pc(), 0x6c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0054
        gbc.setState(0x5e95, 0xf358, 0x6d0, 0x19e6, 0xb341, 0xf735, 0x1, 0x0);
        gbc.writeMem(0x5e95, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf358);
        EXPECT(gbc.pc(), 0x5e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0055
        gbc.setState(0xcb76, 0x2de, 0x9730, 0x74e1, 0x51b5, 0xcd0d, 0x0, 0x1);
        gbc.writeMem(0xcb76, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2de);
        EXPECT(gbc.pc(), 0xcb78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb76), 0xcb);
        EXPECT(gbc.readMem(0xcb77), 0x4a);
        // CB 4A 0056
        gbc.setState(0x7396, 0x1c80, 0xd8e0, 0xe709, 0xbb37, 0x4826, 0x0, 0x0);
        gbc.writeMem(0x7396, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x1c80);
        EXPECT(gbc.pc(), 0x7398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0057
        gbc.setState(0x39db, 0xf8bc, 0x12d0, 0x3f21, 0x3499, 0x13c8, 0x0, 0x0);
        gbc.writeMem(0x39db, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf8bc);
        EXPECT(gbc.pc(), 0x39dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0059
        gbc.setState(0xad4f, 0xd4c6, 0xa870, 0xe2dd, 0x9a48, 0x33a5, 0x1, 0x1);
        gbc.writeMem(0xad4f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd4c6);
        EXPECT(gbc.pc(), 0xad51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4f), 0xcb);
        EXPECT(gbc.readMem(0xad50), 0x4a);
        // CB 4A 005A
        gbc.setState(0xbc2d, 0xba61, 0x75c0, 0x58f4, 0x3a34, 0xf945, 0x1, 0x1);
        gbc.writeMem(0xbc2d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xba61);
        EXPECT(gbc.pc(), 0xbc2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2d), 0xcb);
        EXPECT(gbc.readMem(0xbc2e), 0x4a);
        // CB 4A 005B
        gbc.setState(0xc10a, 0x8b31, 0x5e00, 0x3fed, 0xc5fb, 0x7e4c, 0x0, 0x1);
        gbc.writeMem(0xc10a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8b31);
        EXPECT(gbc.pc(), 0xc10c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc10a), 0xcb);
        EXPECT(gbc.readMem(0xc10b), 0x4a);
        // CB 4A 005C
        gbc.setState(0xcfe2, 0x101, 0x33f0, 0xf1a8, 0x6b17, 0xcfad, 0x1, 0x1);
        gbc.writeMem(0xcfe2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x101);
        EXPECT(gbc.pc(), 0xcfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe2), 0xcb);
        EXPECT(gbc.readMem(0xcfe3), 0x4a);
        // CB 4A 005D
        gbc.setState(0x53e0, 0xd3f5, 0x890, 0xd0e8, 0x5c30, 0x8c77, 0x0, 0x0);
        gbc.writeMem(0x53e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd3f5);
        EXPECT(gbc.pc(), 0x53e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 005E
        gbc.setState(0xa572, 0xdcb2, 0x89a0, 0x624c, 0x4ff2, 0x138, 0x1, 0x0);
        gbc.writeMem(0xa572, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdcb2);
        EXPECT(gbc.pc(), 0xa574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa572), 0xcb);
        EXPECT(gbc.readMem(0xa573), 0x4a);
        // CB 4A 005F
        gbc.setState(0x6035, 0xeb51, 0xa160, 0x708a, 0x5722, 0xb05a, 0x1, 0x0);
        gbc.writeMem(0x6035, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xeb51);
        EXPECT(gbc.pc(), 0x6037);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0060
        gbc.setState(0xbc7f, 0x6fdb, 0xb7c0, 0x4a47, 0xad2b, 0xe51e, 0x1, 0x1);
        gbc.writeMem(0xbc7f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6fdb);
        EXPECT(gbc.pc(), 0xbc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc7f), 0xcb);
        EXPECT(gbc.readMem(0xbc80), 0x4a);
        // CB 4A 0061
        gbc.setState(0x3d80, 0x35c0, 0xa500, 0x133c, 0x15f8, 0xfdbd, 0x0, 0x1);
        gbc.writeMem(0x3d80, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x35c0);
        EXPECT(gbc.pc(), 0x3d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0062
        gbc.setState(0x8209, 0xcb12, 0x91b0, 0xe6c7, 0xa635, 0x6d5d, 0x0, 0x1);
        gbc.writeMem(0x8209, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcb12);
        EXPECT(gbc.pc(), 0x820b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8209), 0xcb);
        EXPECT(gbc.readMem(0x820a), 0x4a);
        // CB 4A 0063
        gbc.setState(0x16f7, 0xde87, 0xb5b0, 0xd5f2, 0x3864, 0xa0e4, 0x1, 0x0);
        gbc.writeMem(0x16f7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xde87);
        EXPECT(gbc.pc(), 0x16f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0065
        gbc.setState(0x53f0, 0x85be, 0xd290, 0xd0b3, 0xf14b, 0x925e, 0x1, 0x0);
        gbc.writeMem(0x53f0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x85be);
        EXPECT(gbc.pc(), 0x53f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0066
        gbc.setState(0x50f1, 0x7eaa, 0x7090, 0xa2c6, 0x51c2, 0x35d3, 0x0, 0x0);
        gbc.writeMem(0x50f1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7eaa);
        EXPECT(gbc.pc(), 0x50f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0067
        gbc.setState(0x39f, 0x9eb2, 0x1170, 0x1f19, 0x3306, 0x11cb, 0x0, 0x1);
        gbc.writeMem(0x39f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9eb2);
        EXPECT(gbc.pc(), 0x3a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0068
        gbc.setState(0xd33f, 0x1d8e, 0x5c20, 0xdc1a, 0xb728, 0x4f34, 0x1, 0x0);
        gbc.writeMem(0xd33f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1d8e);
        EXPECT(gbc.pc(), 0xd341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33f), 0xcb);
        EXPECT(gbc.readMem(0xd340), 0x4a);
        // CB 4A 006A
        gbc.setState(0x3963, 0xb7bd, 0xcfd0, 0xefea, 0x185c, 0x9b2a, 0x0, 0x0);
        gbc.writeMem(0x3963, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb7bd);
        EXPECT(gbc.pc(), 0x3965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 006B
        gbc.setState(0x26b6, 0x512b, 0xc40, 0xa7cc, 0xef68, 0x3e70, 0x0, 0x0);
        gbc.writeMem(0x26b6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x512b);
        EXPECT(gbc.pc(), 0x26b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 006C
        gbc.setState(0x73e1, 0xf1a9, 0xb2d0, 0x213d, 0x963d, 0xcdcc, 0x0, 0x0);
        gbc.writeMem(0x73e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf1a9);
        EXPECT(gbc.pc(), 0x73e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 006D
        gbc.setState(0x5265, 0x51a0, 0xe010, 0x4301, 0x583, 0x3d0a, 0x0, 0x0);
        gbc.writeMem(0x5265, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x51a0);
        EXPECT(gbc.pc(), 0x5267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 006E
        gbc.setState(0x8592, 0x44a8, 0x6030, 0x640c, 0x9f8a, 0xc72f, 0x0, 0x0);
        gbc.writeMem(0x8592, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x44a8);
        EXPECT(gbc.pc(), 0x8594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8592), 0xcb);
        EXPECT(gbc.readMem(0x8593), 0x4a);
        // CB 4A 006F
        gbc.setState(0xbf70, 0x5782, 0xb470, 0x5f02, 0x75a1, 0x82b5, 0x0, 0x1);
        gbc.writeMem(0xbf70, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5782);
        EXPECT(gbc.pc(), 0xbf72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf70), 0xcb);
        EXPECT(gbc.readMem(0xbf71), 0x4a);
        // CB 4A 0070
        gbc.setState(0xde4b, 0xc933, 0xd2c0, 0x84d7, 0x1049, 0xdc9c, 0x0, 0x0);
        gbc.writeMem(0xde4b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc933);
        EXPECT(gbc.pc(), 0xde4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4b), 0xcb);
        EXPECT(gbc.readMem(0xde4c), 0x4a);
        // CB 4A 0071
        gbc.setState(0x203d, 0x435e, 0xbee0, 0x2af5, 0x76ce, 0xc491, 0x1, 0x0);
        gbc.writeMem(0x203d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x435e);
        EXPECT(gbc.pc(), 0x203f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0072
        gbc.setState(0x113, 0x32b7, 0xe330, 0x4521, 0x373e, 0x993c, 0x1, 0x1);
        gbc.writeMem(0x113, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x32b7);
        EXPECT(gbc.pc(), 0x115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0073
        gbc.setState(0xa30b, 0x35ee, 0xca60, 0xebd1, 0xe504, 0x2fd9, 0x0, 0x0);
        gbc.writeMem(0xa30b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x35ee);
        EXPECT(gbc.pc(), 0xa30d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30b), 0xcb);
        EXPECT(gbc.readMem(0xa30c), 0x4a);
        // CB 4A 0074
        gbc.setState(0x2fcd, 0xc25e, 0x6f40, 0xf25, 0x25b1, 0x7d67, 0x1, 0x1);
        gbc.writeMem(0x2fcd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc25e);
        EXPECT(gbc.pc(), 0x2fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0075
        gbc.setState(0xdf99, 0x94e7, 0x5ef0, 0xedd7, 0xcd87, 0xfded, 0x1, 0x0);
        gbc.writeMem(0xdf99, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x94e7);
        EXPECT(gbc.pc(), 0xdf9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf99), 0xcb);
        EXPECT(gbc.readMem(0xdf9a), 0x4a);
        // CB 4A 0076
        gbc.setState(0x8de0, 0xc25, 0x1de0, 0xde93, 0x18fe, 0x7f14, 0x1, 0x1);
        gbc.writeMem(0x8de0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc25);
        EXPECT(gbc.pc(), 0x8de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de0), 0xcb);
        EXPECT(gbc.readMem(0x8de1), 0x4a);
        // CB 4A 0077
        gbc.setState(0x9a9d, 0xf6f1, 0x32d0, 0x1ccb, 0x2b8a, 0x63be, 0x1, 0x0);
        gbc.writeMem(0x9a9d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf6f1);
        EXPECT(gbc.pc(), 0x9a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a9d), 0xcb);
        EXPECT(gbc.readMem(0x9a9e), 0x4a);
        // CB 4A 0079
        gbc.setState(0x5983, 0xa42c, 0xdbc0, 0x8beb, 0xbbb8, 0xf660, 0x1, 0x0);
        gbc.writeMem(0x5983, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa42c);
        EXPECT(gbc.pc(), 0x5985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 007A
        gbc.setState(0x11c9, 0x9bac, 0x1600, 0x69f7, 0x1682, 0xae4, 0x1, 0x0);
        gbc.writeMem(0x11c9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9bac);
        EXPECT(gbc.pc(), 0x11cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 007C
        gbc.setState(0xbbb1, 0x16b6, 0x61f0, 0xcc60, 0x64a, 0x75a9, 0x1, 0x1);
        gbc.writeMem(0xbbb1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x16b6);
        EXPECT(gbc.pc(), 0xbbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbb1), 0xcb);
        EXPECT(gbc.readMem(0xbbb2), 0x4a);
        // CB 4A 007D
        gbc.setState(0x608d, 0x7013, 0xeec0, 0x10ca, 0x8b91, 0xf94c, 0x1, 0x1);
        gbc.writeMem(0x608d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7013);
        EXPECT(gbc.pc(), 0x608f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 007E
        gbc.setState(0x691b, 0x3ba4, 0x30, 0xeccd, 0x147b, 0xdebc, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3ba4);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 007F
        gbc.setState(0xb614, 0x6f83, 0xffa0, 0xc94, 0xa886, 0x287a, 0x0, 0x1);
        gbc.writeMem(0xb614, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6f83);
        EXPECT(gbc.pc(), 0xb616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb614), 0xcb);
        EXPECT(gbc.readMem(0xb615), 0x4a);
        // CB 4A 0080
        gbc.setState(0xce6, 0xa67c, 0xb670, 0xb226, 0xbed8, 0x206f, 0x0, 0x0);
        gbc.writeMem(0xce6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa67c);
        EXPECT(gbc.pc(), 0xce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0081
        gbc.setState(0x4a64, 0x2a3a, 0x39a0, 0xdd13, 0x5bf8, 0xccca, 0x0, 0x0);
        gbc.writeMem(0x4a64, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2a3a);
        EXPECT(gbc.pc(), 0x4a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0082
        gbc.setState(0xa55, 0xda88, 0x6120, 0x2f61, 0x5026, 0xb958, 0x0, 0x1);
        gbc.writeMem(0xa55, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xda88);
        EXPECT(gbc.pc(), 0xa57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0083
        gbc.setState(0x99ba, 0xf2a5, 0xb700, 0x4a19, 0x9503, 0xf797, 0x0, 0x1);
        gbc.writeMem(0x99ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf2a5);
        EXPECT(gbc.pc(), 0x99bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ba), 0xcb);
        EXPECT(gbc.readMem(0x99bb), 0x4a);
        // CB 4A 0084
        gbc.setState(0xc26a, 0x1653, 0x41b0, 0x22bd, 0x1b4b, 0x7077, 0x1, 0x1);
        gbc.writeMem(0xc26a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1653);
        EXPECT(gbc.pc(), 0xc26c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26a), 0xcb);
        EXPECT(gbc.readMem(0xc26b), 0x4a);
        // CB 4A 0085
        gbc.setState(0x85db, 0xdaac, 0xf090, 0x5834, 0x1df3, 0x531d, 0x1, 0x1);
        gbc.writeMem(0x85db, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xdaac);
        EXPECT(gbc.pc(), 0x85dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85db), 0xcb);
        EXPECT(gbc.readMem(0x85dc), 0x4a);
        // CB 4A 0086
        gbc.setState(0x7fab, 0x502f, 0x9ff0, 0x91ca, 0xf117, 0xa302, 0x0, 0x1);
        gbc.writeMem(0x7fab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x502f);
        EXPECT(gbc.pc(), 0x7fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0087
        gbc.setState(0x7509, 0x7766, 0xaff0, 0x4f4, 0xe354, 0x408c, 0x0, 0x1);
        gbc.writeMem(0x7509, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7766);
        EXPECT(gbc.pc(), 0x750b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0088
        gbc.setState(0x2ca2, 0x87df, 0xd910, 0x7ea5, 0x7fab, 0x5216, 0x1, 0x0);
        gbc.writeMem(0x2ca2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x87df);
        EXPECT(gbc.pc(), 0x2ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0089
        gbc.setState(0x36de, 0x5e05, 0x54b0, 0x58fb, 0xca77, 0x6199, 0x1, 0x1);
        gbc.writeMem(0x36de, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5e05);
        EXPECT(gbc.pc(), 0x36e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 008A
        gbc.setState(0xc4f4, 0x8861, 0xdc00, 0xeb1e, 0x8f4c, 0x463f, 0x1, 0x1);
        gbc.writeMem(0xc4f4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0xc4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f4), 0xcb);
        EXPECT(gbc.readMem(0xc4f5), 0x4a);
        // CB 4A 008B
        gbc.setState(0xb257, 0xa245, 0xc3b0, 0x6cd4, 0x980, 0xad7e, 0x1, 0x1);
        gbc.writeMem(0xb257, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa245);
        EXPECT(gbc.pc(), 0xb259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb257), 0xcb);
        EXPECT(gbc.readMem(0xb258), 0x4a);
        // CB 4A 008C
        gbc.setState(0x7b58, 0xeccd, 0x7db0, 0x8d5d, 0xf6e4, 0xe9c1, 0x1, 0x0);
        gbc.writeMem(0x7b58, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xeccd);
        EXPECT(gbc.pc(), 0x7b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 008D
        gbc.setState(0xe4e1, 0xd61, 0x8dc0, 0x82fa, 0x13ae, 0xdeb9, 0x1, 0x1);
        gbc.writeMem(0xe4e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd61);
        EXPECT(gbc.pc(), 0xe4e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e1), 0xcb);
        EXPECT(gbc.readMem(0xe4e2), 0x4a);
        // CB 4A 008E
        gbc.setState(0x431, 0xa51a, 0x2020, 0x3aff, 0x161c, 0xa85e, 0x1, 0x1);
        gbc.writeMem(0x431, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa51a);
        EXPECT(gbc.pc(), 0x433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 008F
        gbc.setState(0x7763, 0x27f8, 0xe450, 0x8748, 0x1c0c, 0x38e8, 0x0, 0x1);
        gbc.writeMem(0x7763, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x27f8);
        EXPECT(gbc.pc(), 0x7765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0090
        gbc.setState(0x7771, 0x5aa3, 0x3730, 0x16a, 0xa16b, 0x60f5, 0x0, 0x0);
        gbc.writeMem(0x7771, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5aa3);
        EXPECT(gbc.pc(), 0x7773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0091
        gbc.setState(0xe725, 0xc8ed, 0x90a0, 0xf64, 0xceda, 0x8b70, 0x1, 0x1);
        gbc.writeMem(0xe725, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc8ed);
        EXPECT(gbc.pc(), 0xe727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe725), 0xcb);
        EXPECT(gbc.readMem(0xe726), 0x4a);
        // CB 4A 0092
        gbc.setState(0x6fc4, 0x42f1, 0xf860, 0x16db, 0x46cb, 0x258f, 0x1, 0x0);
        gbc.writeMem(0x6fc4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x42f1);
        EXPECT(gbc.pc(), 0x6fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0093
        gbc.setState(0xbc09, 0xa698, 0x1150, 0xd37d, 0x24ef, 0x3762, 0x1, 0x1);
        gbc.writeMem(0xbc09, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa698);
        EXPECT(gbc.pc(), 0xbc0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc09), 0xcb);
        EXPECT(gbc.readMem(0xbc0a), 0x4a);
        // CB 4A 0094
        gbc.setState(0xaecb, 0x798c, 0xe4e0, 0xdcb1, 0xaa33, 0xc268, 0x0, 0x1);
        gbc.writeMem(0xaecb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x798c);
        EXPECT(gbc.pc(), 0xaecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaecb), 0xcb);
        EXPECT(gbc.readMem(0xaecc), 0x4a);
        // CB 4A 0095
        gbc.setState(0xa3fd, 0x920f, 0x7180, 0x827f, 0xfc92, 0xd705, 0x0, 0x0);
        gbc.writeMem(0xa3fd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x920f);
        EXPECT(gbc.pc(), 0xa3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fd), 0xcb);
        EXPECT(gbc.readMem(0xa3fe), 0x4a);
        // CB 4A 0096
        gbc.setState(0x335, 0x58a0, 0xaa30, 0x9a65, 0x398a, 0xa122, 0x1, 0x0);
        gbc.writeMem(0x335, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x58a0);
        EXPECT(gbc.pc(), 0x337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0097
        gbc.setState(0x14d, 0x86be, 0x4d20, 0xcd7b, 0x915, 0x5f6f, 0x1, 0x1);
        gbc.writeMem(0x14d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x86be);
        EXPECT(gbc.pc(), 0x14f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0098
        gbc.setState(0x7332, 0xbe69, 0x120, 0xd179, 0x30b7, 0xb395, 0x0, 0x1);
        gbc.writeMem(0x7332, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbe69);
        EXPECT(gbc.pc(), 0x7334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0099
        gbc.setState(0x99d6, 0x8876, 0x5be0, 0xb1be, 0xedd4, 0x46bd, 0x0, 0x1);
        gbc.writeMem(0x99d6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8876);
        EXPECT(gbc.pc(), 0x99d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99d6), 0xcb);
        EXPECT(gbc.readMem(0x99d7), 0x4a);
        // CB 4A 009A
        gbc.setState(0x78f5, 0xbe08, 0xeba0, 0x3de8, 0x6212, 0xd7a4, 0x1, 0x1);
        gbc.writeMem(0x78f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xbe08);
        EXPECT(gbc.pc(), 0x78f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 009B
        gbc.setState(0x508c, 0x487f, 0x5310, 0x9e5, 0x7ba1, 0xa347, 0x0, 0x1);
        gbc.writeMem(0x508c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x487f);
        EXPECT(gbc.pc(), 0x508e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 009C
        gbc.setState(0x69c8, 0x5da4, 0x8b0, 0x4baf, 0x4517, 0x5764, 0x0, 0x0);
        gbc.writeMem(0x69c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5da4);
        EXPECT(gbc.pc(), 0x69ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 009D
        gbc.setState(0xdcd2, 0xb5c0, 0xf9e0, 0x3b86, 0xd14c, 0x44a9, 0x1, 0x1);
        gbc.writeMem(0xdcd2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb5c0);
        EXPECT(gbc.pc(), 0xdcd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd2), 0xcb);
        EXPECT(gbc.readMem(0xdcd3), 0x4a);
        // CB 4A 009E
        gbc.setState(0xc680, 0x43dc, 0xebe0, 0x104a, 0x9f84, 0x26ef, 0x1, 0x0);
        gbc.writeMem(0xc680, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x43dc);
        EXPECT(gbc.pc(), 0xc682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc680), 0xcb);
        EXPECT(gbc.readMem(0xc681), 0x4a);
        // CB 4A 009F
        gbc.setState(0x738d, 0x29fa, 0x3240, 0xb0cd, 0x14dd, 0x3c9a, 0x0, 0x1);
        gbc.writeMem(0x738d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x29fa);
        EXPECT(gbc.pc(), 0x738f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00A0
        gbc.setState(0xdd19, 0xd1f5, 0x8550, 0xf047, 0x565e, 0xef1c, 0x1, 0x1);
        gbc.writeMem(0xdd19, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd1f5);
        EXPECT(gbc.pc(), 0xdd1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd19), 0xcb);
        EXPECT(gbc.readMem(0xdd1a), 0x4a);
        // CB 4A 00A1
        gbc.setState(0x980a, 0xf21b, 0x1fd0, 0xd7d, 0xc9d4, 0x838b, 0x0, 0x1);
        gbc.writeMem(0x980a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf21b);
        EXPECT(gbc.pc(), 0x980c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x980a), 0xcb);
        EXPECT(gbc.readMem(0x980b), 0x4a);
        // CB 4A 00A2
        gbc.setState(0xd66b, 0xa579, 0xdd20, 0x4f59, 0x1b9b, 0xd539, 0x0, 0x1);
        gbc.writeMem(0xd66b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa579);
        EXPECT(gbc.pc(), 0xd66d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd66b), 0xcb);
        EXPECT(gbc.readMem(0xd66c), 0x4a);
        // CB 4A 00A3
        gbc.setState(0x36a5, 0x3331, 0x8180, 0x6dc4, 0xd4ba, 0xe185, 0x1, 0x0);
        gbc.writeMem(0x36a5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3331);
        EXPECT(gbc.pc(), 0x36a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00A4
        gbc.setState(0xb6b6, 0x81c1, 0xfde0, 0xcf7d, 0x480d, 0xbba7, 0x0, 0x0);
        gbc.writeMem(0xb6b6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x81c1);
        EXPECT(gbc.pc(), 0xb6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b6), 0xcb);
        EXPECT(gbc.readMem(0xb6b7), 0x4a);
        // CB 4A 00A5
        gbc.setState(0x2ce0, 0xc47c, 0xa250, 0xea68, 0xf793, 0xf187, 0x1, 0x1);
        gbc.writeMem(0x2ce0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc47c);
        EXPECT(gbc.pc(), 0x2ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00A6
        gbc.setState(0x5fde, 0x69e, 0xeac0, 0x92b, 0xf6d2, 0x30b5, 0x1, 0x1);
        gbc.writeMem(0x5fde, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x69e);
        EXPECT(gbc.pc(), 0x5fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00A7
        gbc.setState(0xe51, 0x5b5a, 0x4ac0, 0x2aa4, 0x9807, 0x3980, 0x0, 0x1);
        gbc.writeMem(0xe51, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5b5a);
        EXPECT(gbc.pc(), 0xe53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00A9
        gbc.setState(0xd6f7, 0xdf2c, 0x8b00, 0xb136, 0xf61f, 0xce6e, 0x0, 0x1);
        gbc.writeMem(0xd6f7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdf2c);
        EXPECT(gbc.pc(), 0xd6f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6f7), 0xcb);
        EXPECT(gbc.readMem(0xd6f8), 0x4a);
        // CB 4A 00AB
        gbc.setState(0xdbf2, 0x6d64, 0xdd30, 0x8af1, 0xbb3f, 0xf5de, 0x0, 0x1);
        gbc.writeMem(0xdbf2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6d64);
        EXPECT(gbc.pc(), 0xdbf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbf2), 0xcb);
        EXPECT(gbc.readMem(0xdbf3), 0x4a);
        // CB 4A 00AC
        gbc.setState(0xde0e, 0x1729, 0x3e30, 0x8366, 0xbd9e, 0x3afd, 0x0, 0x1);
        gbc.writeMem(0xde0e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1729);
        EXPECT(gbc.pc(), 0xde10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde0e), 0xcb);
        EXPECT(gbc.readMem(0xde0f), 0x4a);
        // CB 4A 00AD
        gbc.setState(0x9b9e, 0x913d, 0x4590, 0x58ef, 0x2367, 0x28f2, 0x1, 0x1);
        gbc.writeMem(0x9b9e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x913d);
        EXPECT(gbc.pc(), 0x9ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b9e), 0xcb);
        EXPECT(gbc.readMem(0x9b9f), 0x4a);
        // CB 4A 00AE
        gbc.setState(0x11bf, 0xf41, 0x4e50, 0x46c5, 0x6d11, 0xd2e5, 0x0, 0x1);
        gbc.writeMem(0x11bf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xf41);
        EXPECT(gbc.pc(), 0x11c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00AF
        gbc.setState(0x98a2, 0x179f, 0x3d90, 0xcd6e, 0x9d44, 0x97ba, 0x0, 0x1);
        gbc.writeMem(0x98a2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x179f);
        EXPECT(gbc.pc(), 0x98a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98a2), 0xcb);
        EXPECT(gbc.readMem(0x98a3), 0x4a);
        // CB 4A 00B0
        gbc.setState(0xc8a4, 0xfc6d, 0x48b0, 0xeeab, 0xcd96, 0x9054, 0x1, 0x1);
        gbc.writeMem(0xc8a4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfc6d);
        EXPECT(gbc.pc(), 0xc8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a4), 0xcb);
        EXPECT(gbc.readMem(0xc8a5), 0x4a);
        // CB 4A 00B1
        gbc.setState(0x4dfc, 0x54bc, 0xcc20, 0x70c1, 0x4f35, 0xd172, 0x1, 0x0);
        gbc.writeMem(0x4dfc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x54bc);
        EXPECT(gbc.pc(), 0x4dfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00B2
        gbc.setState(0xb6f3, 0xcf6d, 0x84e0, 0xc94f, 0x5eab, 0x5cc7, 0x0, 0x0);
        gbc.writeMem(0xb6f3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcf6d);
        EXPECT(gbc.pc(), 0xb6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f3), 0xcb);
        EXPECT(gbc.readMem(0xb6f4), 0x4a);
        // CB 4A 00B3
        gbc.setState(0x40ff, 0xa66b, 0xde30, 0x6352, 0x359c, 0x1526, 0x1, 0x0);
        gbc.writeMem(0x40ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa66b);
        EXPECT(gbc.pc(), 0x4101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00B4
        gbc.setState(0xe426, 0x7ea1, 0x8260, 0x52bd, 0x5733, 0x38fb, 0x1, 0x0);
        gbc.writeMem(0xe426, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7ea1);
        EXPECT(gbc.pc(), 0xe428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe426), 0xcb);
        EXPECT(gbc.readMem(0xe427), 0x4a);
        // CB 4A 00B5
        gbc.setState(0x205d, 0x9c96, 0x9b0, 0x8324, 0x1d4a, 0x531d, 0x0, 0x0);
        gbc.writeMem(0x205d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9c96);
        EXPECT(gbc.pc(), 0x205f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00B6
        gbc.setState(0xba19, 0xc730, 0xba0, 0xb3af, 0x7236, 0x7e42, 0x1, 0x0);
        gbc.writeMem(0xba19, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc730);
        EXPECT(gbc.pc(), 0xba1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba19), 0xcb);
        EXPECT(gbc.readMem(0xba1a), 0x4a);
        // CB 4A 00B7
        gbc.setState(0x2bf6, 0xe24, 0xf7e0, 0xc215, 0x7be1, 0xefb, 0x0, 0x1);
        gbc.writeMem(0x2bf6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe24);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00B8
        gbc.setState(0x5486, 0x865f, 0xd820, 0xaaef, 0x3f95, 0xa5b8, 0x0, 0x0);
        gbc.writeMem(0x5486, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x865f);
        EXPECT(gbc.pc(), 0x5488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00B9
        gbc.setState(0x384f, 0x7b7d, 0x9db0, 0x9fbd, 0x44b4, 0xfb04, 0x0, 0x1);
        gbc.writeMem(0x384f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7b7d);
        EXPECT(gbc.pc(), 0x3851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00BA
        gbc.setState(0xe8de, 0x5a8, 0x7df0, 0xc61e, 0xc139, 0x51f4, 0x1, 0x1);
        gbc.writeMem(0xe8de, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5a8);
        EXPECT(gbc.pc(), 0xe8e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8de), 0xcb);
        EXPECT(gbc.readMem(0xe8df), 0x4a);
        // CB 4A 00BB
        gbc.setState(0x10d9, 0x4998, 0x690, 0x84ee, 0xdbd3, 0x3f5b, 0x1, 0x1);
        gbc.writeMem(0x10d9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4998);
        EXPECT(gbc.pc(), 0x10db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00BC
        gbc.setState(0x1bd, 0x843, 0xc1b0, 0x3f82, 0x96a8, 0xf741, 0x1, 0x1);
        gbc.writeMem(0x1bd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x843);
        EXPECT(gbc.pc(), 0x1bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00BD
        gbc.setState(0xde74, 0x1921, 0xc70, 0x3a8b, 0x61ec, 0x7a21, 0x1, 0x1);
        gbc.writeMem(0xde74, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0xde76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde74), 0xcb);
        EXPECT(gbc.readMem(0xde75), 0x4a);
        // CB 4A 00BE
        gbc.setState(0xd173, 0xcbba, 0x15f0, 0x2a83, 0x6238, 0xc086, 0x0, 0x0);
        gbc.writeMem(0xd173, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcbba);
        EXPECT(gbc.pc(), 0xd175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd173), 0xcb);
        EXPECT(gbc.readMem(0xd174), 0x4a);
        // CB 4A 00BF
        gbc.setState(0xe492, 0x6cf1, 0x5030, 0x24bf, 0x183, 0xff71, 0x0, 0x1);
        gbc.writeMem(0xe492, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6cf1);
        EXPECT(gbc.pc(), 0xe494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe492), 0xcb);
        EXPECT(gbc.readMem(0xe493), 0x4a);
        // CB 4A 00C0
        gbc.setState(0x1474, 0x4a64, 0xa0a0, 0xd382, 0x7473, 0x618e, 0x1, 0x1);
        gbc.writeMem(0x1474, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4a64);
        EXPECT(gbc.pc(), 0x1476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00C1
        gbc.setState(0x906e, 0x2882, 0xad00, 0x2ffd, 0xfe7e, 0xe195, 0x0, 0x1);
        gbc.writeMem(0x906e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2882);
        EXPECT(gbc.pc(), 0x9070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906e), 0xcb);
        EXPECT(gbc.readMem(0x906f), 0x4a);
        // CB 4A 00C2
        gbc.setState(0xb98e, 0x5ec4, 0xa6a0, 0xcaba, 0xd5f6, 0x18e1, 0x0, 0x1);
        gbc.writeMem(0xb98e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5ec4);
        EXPECT(gbc.pc(), 0xb990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98e), 0xcb);
        EXPECT(gbc.readMem(0xb98f), 0x4a);
        // CB 4A 00C3
        gbc.setState(0xbd84, 0xa55c, 0x8230, 0x9707, 0x9ece, 0xfbdf, 0x0, 0x1);
        gbc.writeMem(0xbd84, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa55c);
        EXPECT(gbc.pc(), 0xbd86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd84), 0xcb);
        EXPECT(gbc.readMem(0xbd85), 0x4a);
        // CB 4A 00C4
        gbc.setState(0x284e, 0x7e1, 0xecd0, 0x8854, 0xe7a7, 0xe2ea, 0x0, 0x0);
        gbc.writeMem(0x284e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7e1);
        EXPECT(gbc.pc(), 0x2850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00C5
        gbc.setState(0x6396, 0xd90f, 0x6be0, 0xedb8, 0x65d3, 0x84e7, 0x1, 0x0);
        gbc.writeMem(0x6396, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd90f);
        EXPECT(gbc.pc(), 0x6398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00C6
        gbc.setState(0x1750, 0xe606, 0xe720, 0xe79d, 0x8cb3, 0xc6c7, 0x0, 0x1);
        gbc.writeMem(0x1750, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe606);
        EXPECT(gbc.pc(), 0x1752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00C8
        gbc.setState(0x9593, 0xbbad, 0x91f0, 0xd5d5, 0x4019, 0xab52, 0x1, 0x1);
        gbc.writeMem(0x9593, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbbad);
        EXPECT(gbc.pc(), 0x9595);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9593), 0xcb);
        EXPECT(gbc.readMem(0x9594), 0x4a);
        // CB 4A 00C9
        gbc.setState(0xdde3, 0x56a7, 0xe7f0, 0xdd93, 0x868b, 0x6c99, 0x0, 0x1);
        gbc.writeMem(0xdde3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x56a7);
        EXPECT(gbc.pc(), 0xdde5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde3), 0xcb);
        EXPECT(gbc.readMem(0xdde4), 0x4a);
        // CB 4A 00CA
        gbc.setState(0xb359, 0x367d, 0xb650, 0xeb92, 0x112e, 0x19ca, 0x0, 0x1);
        gbc.writeMem(0xb359, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x367d);
        EXPECT(gbc.pc(), 0xb35b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb359), 0xcb);
        EXPECT(gbc.readMem(0xb35a), 0x4a);
        // CB 4A 00CB
        gbc.setState(0xbf86, 0xab23, 0x3290, 0xb6da, 0xa11c, 0x50e, 0x1, 0x0);
        gbc.writeMem(0xbf86, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xab23);
        EXPECT(gbc.pc(), 0xbf88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf86), 0xcb);
        EXPECT(gbc.readMem(0xbf87), 0x4a);
        // CB 4A 00CC
        gbc.setState(0x4acc, 0x12df, 0x57d0, 0x760c, 0x88cc, 0xaca3, 0x1, 0x0);
        gbc.writeMem(0x4acc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x12df);
        EXPECT(gbc.pc(), 0x4ace);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00CD
        gbc.setState(0x133c, 0x1544, 0x21d0, 0x6ebf, 0xa317, 0xe6f2, 0x0, 0x0);
        gbc.writeMem(0x133c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1544);
        EXPECT(gbc.pc(), 0x133e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00CE
        gbc.setState(0x7c91, 0x91a3, 0xbd10, 0x71ea, 0x5f40, 0xedc4, 0x0, 0x1);
        gbc.writeMem(0x7c91, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x91a3);
        EXPECT(gbc.pc(), 0x7c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00CF
        gbc.setState(0x406, 0x5c07, 0x2420, 0x2f4b, 0x5b5f, 0x7ac5, 0x1, 0x0);
        gbc.writeMem(0x406, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5c07);
        EXPECT(gbc.pc(), 0x408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00D0
        gbc.setState(0x2b9e, 0x44eb, 0xd830, 0x1edb, 0xc83c, 0xace3, 0x1, 0x1);
        gbc.writeMem(0x2b9e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x44eb);
        EXPECT(gbc.pc(), 0x2ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00D1
        gbc.setState(0x7794, 0xe2cb, 0x3560, 0x213f, 0x8c7e, 0xccd7, 0x0, 0x1);
        gbc.writeMem(0x7794, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe2cb);
        EXPECT(gbc.pc(), 0x7796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00D2
        gbc.setState(0x7a05, 0xf490, 0x83f0, 0xa953, 0x4387, 0xd130, 0x0, 0x0);
        gbc.writeMem(0x7a05, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf490);
        EXPECT(gbc.pc(), 0x7a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00D3
        gbc.setState(0xa67c, 0xb59, 0xd460, 0xf964, 0x14ab, 0x6a9c, 0x0, 0x1);
        gbc.writeMem(0xa67c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xb59);
        EXPECT(gbc.pc(), 0xa67e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67c), 0xcb);
        EXPECT(gbc.readMem(0xa67d), 0x4a);
        // CB 4A 00D4
        gbc.setState(0x8c72, 0x5677, 0x1d60, 0x378f, 0xebe7, 0x209e, 0x1, 0x0);
        gbc.writeMem(0x8c72, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5677);
        EXPECT(gbc.pc(), 0x8c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c72), 0xcb);
        EXPECT(gbc.readMem(0x8c73), 0x4a);
        // CB 4A 00D5
        gbc.setState(0x13a9, 0x288d, 0x4520, 0x41ce, 0x9088, 0x94a4, 0x0, 0x0);
        gbc.writeMem(0x13a9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x288d);
        EXPECT(gbc.pc(), 0x13ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00D6
        gbc.setState(0x43f2, 0x17ac, 0xc350, 0x3d04, 0x6229, 0xd8f6, 0x0, 0x0);
        gbc.writeMem(0x43f2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x17ac);
        EXPECT(gbc.pc(), 0x43f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00D7
        gbc.setState(0x638b, 0x4410, 0x6470, 0xd3d6, 0xeb0b, 0x1743, 0x1, 0x0);
        gbc.writeMem(0x638b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4410);
        EXPECT(gbc.pc(), 0x638d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00D8
        gbc.setState(0xddad, 0x629b, 0x6e90, 0xa66b, 0x20f1, 0x6823, 0x0, 0x0);
        gbc.writeMem(0xddad, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x629b);
        EXPECT(gbc.pc(), 0xddaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddad), 0xcb);
        EXPECT(gbc.readMem(0xddae), 0x4a);
        // CB 4A 00D9
        gbc.setState(0x4a1c, 0x264e, 0xf4e0, 0x9259, 0x3c82, 0x39c4, 0x0, 0x0);
        gbc.writeMem(0x4a1c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x264e);
        EXPECT(gbc.pc(), 0x4a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00DB
        gbc.setState(0xaf4e, 0x4301, 0x1a0, 0x48e4, 0x1f86, 0x2c1, 0x0, 0x0);
        gbc.writeMem(0xaf4e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4301);
        EXPECT(gbc.pc(), 0xaf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf4e), 0xcb);
        EXPECT(gbc.readMem(0xaf4f), 0x4a);
        // CB 4A 00DC
        gbc.setState(0x6dfc, 0xa152, 0xd560, 0xf404, 0xd6cd, 0xed4d, 0x0, 0x1);
        gbc.writeMem(0x6dfc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa152);
        EXPECT(gbc.pc(), 0x6dfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00DD
        gbc.setState(0x799e, 0x1a87, 0xa600, 0xb2ab, 0x7a8e, 0x5de5, 0x1, 0x0);
        gbc.writeMem(0x799e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1a87);
        EXPECT(gbc.pc(), 0x79a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00DE
        gbc.setState(0x9fe0, 0xa34b, 0xcd20, 0x91b2, 0x7ee0, 0x10e7, 0x1, 0x0);
        gbc.writeMem(0x9fe0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa34b);
        EXPECT(gbc.pc(), 0x9fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe0), 0xcb);
        EXPECT(gbc.readMem(0x9fe1), 0x4a);
        // CB 4A 00DF
        gbc.setState(0xdaef, 0x80b6, 0x51e0, 0x7c1d, 0x91d4, 0x5560, 0x0, 0x1);
        gbc.writeMem(0xdaef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x80b6);
        EXPECT(gbc.pc(), 0xdaf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaef), 0xcb);
        EXPECT(gbc.readMem(0xdaf0), 0x4a);
        // CB 4A 00E0
        gbc.setState(0x3fda, 0xc194, 0xc560, 0xe3f9, 0xce7d, 0x6cb9, 0x1, 0x1);
        gbc.writeMem(0x3fda, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc194);
        EXPECT(gbc.pc(), 0x3fdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00E1
        gbc.setState(0x8ec9, 0x5b66, 0x4910, 0xa3e5, 0x441c, 0x5, 0x1, 0x0);
        gbc.writeMem(0x8ec9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5b66);
        EXPECT(gbc.pc(), 0x8ecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ec9), 0xcb);
        EXPECT(gbc.readMem(0x8eca), 0x4a);
        // CB 4A 00E2
        gbc.setState(0xeb27, 0x4a69, 0xeb10, 0x208a, 0xc8f0, 0xcf09, 0x0, 0x0);
        gbc.writeMem(0xeb27, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4a69);
        EXPECT(gbc.pc(), 0xeb29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb27), 0xcb);
        EXPECT(gbc.readMem(0xeb28), 0x4a);
        // CB 4A 00E3
        gbc.setState(0x675c, 0x868d, 0xae0, 0x85, 0x497b, 0x918e, 0x0, 0x0);
        gbc.writeMem(0x675c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x868d);
        EXPECT(gbc.pc(), 0x675e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00E4
        gbc.setState(0xb09, 0xafd6, 0x5950, 0xc7c4, 0xeada, 0x4821, 0x0, 0x0);
        gbc.writeMem(0xb09, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xafd6);
        EXPECT(gbc.pc(), 0xb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00E5
        gbc.setState(0xc2ce, 0x1e3b, 0x8030, 0x5fcd, 0xe075, 0xddbe, 0x0, 0x0);
        gbc.writeMem(0xc2ce, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1e3b);
        EXPECT(gbc.pc(), 0xc2d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2ce), 0xcb);
        EXPECT(gbc.readMem(0xc2cf), 0x4a);
        // CB 4A 00E7
        gbc.setState(0xd3fe, 0x833d, 0xeb0, 0x5ca9, 0x4f69, 0x8fb4, 0x0, 0x0);
        gbc.writeMem(0xd3fe, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x833d);
        EXPECT(gbc.pc(), 0xd400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3fe), 0xcb);
        EXPECT(gbc.readMem(0xd3ff), 0x4a);
        // CB 4A 00E8
        gbc.setState(0xd315, 0xf989, 0x77a0, 0x7a01, 0xfc79, 0x3223, 0x0, 0x0);
        gbc.writeMem(0xd315, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf989);
        EXPECT(gbc.pc(), 0xd317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd315), 0xcb);
        EXPECT(gbc.readMem(0xd316), 0x4a);
        // CB 4A 00E9
        gbc.setState(0xda22, 0x6100, 0xaab0, 0x2317, 0xc257, 0x9b32, 0x0, 0x0);
        gbc.writeMem(0xda22, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6100);
        EXPECT(gbc.pc(), 0xda24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda22), 0xcb);
        EXPECT(gbc.readMem(0xda23), 0x4a);
        // CB 4A 00EA
        gbc.setState(0x587b, 0xee67, 0x68c0, 0xf67b, 0x953c, 0x4822, 0x0, 0x0);
        gbc.writeMem(0x587b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xee67);
        EXPECT(gbc.pc(), 0x587d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00EB
        gbc.setState(0xee23, 0x2c7a, 0x25c0, 0x416a, 0x5ec2, 0xfb0d, 0x1, 0x1);
        gbc.writeMem(0xee23, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2c7a);
        EXPECT(gbc.pc(), 0xee25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee23), 0xcb);
        EXPECT(gbc.readMem(0xee24), 0x4a);
        // CB 4A 00EC
        gbc.setState(0xb7b2, 0xb833, 0xa100, 0xfcdd, 0x70a, 0x32a7, 0x1, 0x1);
        gbc.writeMem(0xb7b2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb833);
        EXPECT(gbc.pc(), 0xb7b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b2), 0xcb);
        EXPECT(gbc.readMem(0xb7b3), 0x4a);
        // CB 4A 00ED
        gbc.setState(0xd511, 0xc1b7, 0x24f0, 0x3ad1, 0x70d2, 0x9706, 0x1, 0x1);
        gbc.writeMem(0xd511, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc1b7);
        EXPECT(gbc.pc(), 0xd513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd511), 0xcb);
        EXPECT(gbc.readMem(0xd512), 0x4a);
        // CB 4A 00EE
        gbc.setState(0x38ff, 0x62dc, 0x65c0, 0xf3e7, 0x4669, 0xbc44, 0x1, 0x1);
        gbc.writeMem(0x38ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x62dc);
        EXPECT(gbc.pc(), 0x3901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00EF
        gbc.setState(0xb3f, 0xb07d, 0xd390, 0x2a8f, 0x65b2, 0x93fc, 0x1, 0x0);
        gbc.writeMem(0xb3f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb07d);
        EXPECT(gbc.pc(), 0xb41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00F0
        gbc.setState(0x379e, 0xdb6c, 0x7290, 0x848e, 0xd209, 0xcafe, 0x1, 0x1);
        gbc.writeMem(0x379e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdb6c);
        EXPECT(gbc.pc(), 0x37a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00F1
        gbc.setState(0x1f47, 0xc68a, 0x360, 0x98bb, 0xcb62, 0xd6eb, 0x1, 0x0);
        gbc.writeMem(0x1f47, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc68a);
        EXPECT(gbc.pc(), 0x1f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00F2
        gbc.setState(0x9ed3, 0x402d, 0xe30, 0x4c37, 0x2df6, 0x538, 0x0, 0x1);
        gbc.writeMem(0x9ed3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x402d);
        EXPECT(gbc.pc(), 0x9ed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ed3), 0xcb);
        EXPECT(gbc.readMem(0x9ed4), 0x4a);
        // CB 4A 00F3
        gbc.setState(0x3a55, 0x65de, 0x5a10, 0xf653, 0x688d, 0xdf54, 0x1, 0x1);
        gbc.writeMem(0x3a55, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x65de);
        EXPECT(gbc.pc(), 0x3a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00F4
        gbc.setState(0xe88d, 0x9a3f, 0xd830, 0x9a79, 0xcdab, 0x6ff2, 0x0, 0x0);
        gbc.writeMem(0xe88d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9a3f);
        EXPECT(gbc.pc(), 0xe88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88d), 0xcb);
        EXPECT(gbc.readMem(0xe88e), 0x4a);
        // CB 4A 00F5
        gbc.setState(0x180c, 0xfaf, 0x2f00, 0x9ff9, 0x83b9, 0x4f07, 0x0, 0x1);
        gbc.writeMem(0x180c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfaf);
        EXPECT(gbc.pc(), 0x180e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00F6
        gbc.setState(0x9ab0, 0x1144, 0xb040, 0x2e0e, 0x9493, 0xc8e1, 0x0, 0x1);
        gbc.writeMem(0x9ab0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1144);
        EXPECT(gbc.pc(), 0x9ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab0), 0xcb);
        EXPECT(gbc.readMem(0x9ab1), 0x4a);
        // CB 4A 00F7
        gbc.setState(0xa02a, 0x608b, 0xab10, 0x5124, 0x2566, 0x9c82, 0x0, 0x0);
        gbc.writeMem(0xa02a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x608b);
        EXPECT(gbc.pc(), 0xa02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa02a), 0xcb);
        EXPECT(gbc.readMem(0xa02b), 0x4a);
        // CB 4A 00F8
        gbc.setState(0xa11b, 0x159e, 0x69c0, 0xa3ea, 0x2cfb, 0x5ecc, 0x1, 0x0);
        gbc.writeMem(0xa11b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x159e);
        EXPECT(gbc.pc(), 0xa11d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa11b), 0xcb);
        EXPECT(gbc.readMem(0xa11c), 0x4a);
        // CB 4A 00F9
        gbc.setState(0x611, 0xf10f, 0x3280, 0x4628, 0x1ce9, 0x2719, 0x0, 0x1);
        gbc.writeMem(0x611, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf10f);
        EXPECT(gbc.pc(), 0x613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00FA
        gbc.setState(0x5f4c, 0x290d, 0xfe50, 0x8925, 0xae7c, 0x50c2, 0x1, 0x1);
        gbc.writeMem(0x5f4c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x290d);
        EXPECT(gbc.pc(), 0x5f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00FB
        gbc.setState(0x5792, 0x92f2, 0xc710, 0xea95, 0x4091, 0x6c10, 0x0, 0x0);
        gbc.writeMem(0x5792, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x92f2);
        EXPECT(gbc.pc(), 0x5794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 00FC
        gbc.setState(0x3235, 0xdf2f, 0x8a20, 0x76eb, 0x6778, 0x8514, 0x1, 0x1);
        gbc.writeMem(0x3235, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdf2f);
        EXPECT(gbc.pc(), 0x3237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 00FD
        gbc.setState(0x9912, 0xc417, 0x6e30, 0x4de7, 0x9327, 0x22e8, 0x1, 0x0);
        gbc.writeMem(0x9912, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0x9914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9912), 0xcb);
        EXPECT(gbc.readMem(0x9913), 0x4a);
        // CB 4A 00FE
        gbc.setState(0x6e06, 0xfe4, 0x8250, 0x4188, 0xb987, 0x8bba, 0x0, 0x0);
        gbc.writeMem(0x6e06, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfe4);
        EXPECT(gbc.pc(), 0x6e08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0100
        gbc.setState(0x3ecb, 0x84b5, 0xa10, 0xff6a, 0xd86, 0xc8bf, 0x1, 0x0);
        gbc.writeMem(0x3ecb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x84b5);
        EXPECT(gbc.pc(), 0x3ecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0101
        gbc.setState(0xd600, 0x38c5, 0x21d0, 0xb8c5, 0x1dbc, 0xf5f1, 0x0, 0x1);
        gbc.writeMem(0xd600, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x38c5);
        EXPECT(gbc.pc(), 0xd602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd600), 0xcb);
        EXPECT(gbc.readMem(0xd601), 0x4a);
        // CB 4A 0102
        gbc.setState(0xa6ee, 0xdda5, 0xa960, 0x7d31, 0xcd13, 0xd524, 0x0, 0x0);
        gbc.writeMem(0xa6ee, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdda5);
        EXPECT(gbc.pc(), 0xa6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ee), 0xcb);
        EXPECT(gbc.readMem(0xa6ef), 0x4a);
        // CB 4A 0104
        gbc.setState(0x2647, 0xbc7a, 0x3980, 0x1f68, 0xa0cf, 0xa9c9, 0x1, 0x0);
        gbc.writeMem(0x2647, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xbc7a);
        EXPECT(gbc.pc(), 0x2649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0105
        gbc.setState(0x6d68, 0x232f, 0x90a0, 0xb3a4, 0x3bd1, 0xa669, 0x0, 0x0);
        gbc.writeMem(0x6d68, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x232f);
        EXPECT(gbc.pc(), 0x6d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0106
        gbc.setState(0xc555, 0x307, 0x5c40, 0x4db9, 0xd83e, 0x2fe9, 0x0, 0x1);
        gbc.writeMem(0xc555, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x307);
        EXPECT(gbc.pc(), 0xc557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc555), 0xcb);
        EXPECT(gbc.readMem(0xc556), 0x4a);
        // CB 4A 0107
        gbc.setState(0x140e, 0x17a8, 0x7c70, 0xaafc, 0x5954, 0xeba2, 0x1, 0x0);
        gbc.writeMem(0x140e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x17a8);
        EXPECT(gbc.pc(), 0x1410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0108
        gbc.setState(0xa842, 0x51e7, 0xdae0, 0xfea1, 0xb8a4, 0x3ce9, 0x0, 0x0);
        gbc.writeMem(0xa842, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x51e7);
        EXPECT(gbc.pc(), 0xa844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa842), 0xcb);
        EXPECT(gbc.readMem(0xa843), 0x4a);
        // CB 4A 0109
        gbc.setState(0x8e1e, 0xcc7a, 0x3780, 0x3c06, 0xd02c, 0x57f5, 0x0, 0x1);
        gbc.writeMem(0x8e1e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xcc7a);
        EXPECT(gbc.pc(), 0x8e20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1e), 0xcb);
        EXPECT(gbc.readMem(0x8e1f), 0x4a);
        // CB 4A 010A
        gbc.setState(0xc51d, 0xdf69, 0x8660, 0x14f5, 0xf5fe, 0xe3d4, 0x1, 0x0);
        gbc.writeMem(0xc51d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdf69);
        EXPECT(gbc.pc(), 0xc51f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc51d), 0xcb);
        EXPECT(gbc.readMem(0xc51e), 0x4a);
        // CB 4A 010B
        gbc.setState(0x3bd4, 0xae74, 0xa5c0, 0x117a, 0x9915, 0x5ee7, 0x0, 0x1);
        gbc.writeMem(0x3bd4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xae74);
        EXPECT(gbc.pc(), 0x3bd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 010C
        gbc.setState(0x39bf, 0x7bf2, 0xdeb0, 0x4cd1, 0x46c2, 0x9cac, 0x1, 0x0);
        gbc.writeMem(0x39bf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7bf2);
        EXPECT(gbc.pc(), 0x39c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 010D
        gbc.setState(0x5275, 0xf69f, 0x9f60, 0x493d, 0x4428, 0x8d97, 0x1, 0x0);
        gbc.writeMem(0x5275, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf69f);
        EXPECT(gbc.pc(), 0x5277);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 010F
        gbc.setState(0xe32d, 0x8809, 0x9950, 0x752c, 0x4b26, 0xb4a4, 0x0, 0x0);
        gbc.writeMem(0xe32d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8809);
        EXPECT(gbc.pc(), 0xe32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe32d), 0xcb);
        EXPECT(gbc.readMem(0xe32e), 0x4a);
        // CB 4A 0110
        gbc.setState(0x9d55, 0x57cc, 0x9690, 0x2b7d, 0xee20, 0x54c2, 0x1, 0x1);
        gbc.writeMem(0x9d55, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x57cc);
        EXPECT(gbc.pc(), 0x9d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d55), 0xcb);
        EXPECT(gbc.readMem(0x9d56), 0x4a);
        // CB 4A 0111
        gbc.setState(0x429c, 0x3da4, 0x59b0, 0x273e, 0x2984, 0xdf92, 0x1, 0x0);
        gbc.writeMem(0x429c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3da4);
        EXPECT(gbc.pc(), 0x429e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0112
        gbc.setState(0x3804, 0x3f4, 0xea70, 0x6af9, 0x2e9, 0xd157, 0x0, 0x1);
        gbc.writeMem(0x3804, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3f4);
        EXPECT(gbc.pc(), 0x3806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0113
        gbc.setState(0x8d7c, 0x25fb, 0xb20, 0x9bdc, 0x5fb9, 0xc423, 0x0, 0x1);
        gbc.writeMem(0x8d7c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x25fb);
        EXPECT(gbc.pc(), 0x8d7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d7c), 0xcb);
        EXPECT(gbc.readMem(0x8d7d), 0x4a);
        // CB 4A 0114
        gbc.setState(0xbef, 0xd06a, 0x6e70, 0x5abd, 0x2906, 0x170d, 0x0, 0x0);
        gbc.writeMem(0xbef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd06a);
        EXPECT(gbc.pc(), 0xbf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0115
        gbc.setState(0xa3a1, 0x3eb3, 0x84a0, 0xd824, 0xeb33, 0x7de5, 0x0, 0x0);
        gbc.writeMem(0xa3a1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3eb3);
        EXPECT(gbc.pc(), 0xa3a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a1), 0xcb);
        EXPECT(gbc.readMem(0xa3a2), 0x4a);
        // CB 4A 0116
        gbc.setState(0x543d, 0x111d, 0xf6a0, 0xce27, 0x54bc, 0xc64a, 0x0, 0x1);
        gbc.writeMem(0x543d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x111d);
        EXPECT(gbc.pc(), 0x543f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0117
        gbc.setState(0xb11d, 0xc4d, 0xad30, 0x5481, 0xa5a0, 0x4058, 0x1, 0x0);
        gbc.writeMem(0xb11d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc4d);
        EXPECT(gbc.pc(), 0xb11f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb11d), 0xcb);
        EXPECT(gbc.readMem(0xb11e), 0x4a);
        // CB 4A 0118
        gbc.setState(0x7b1, 0xdd7c, 0xce00, 0xa9ee, 0xc85b, 0x22f0, 0x1, 0x0);
        gbc.writeMem(0x7b1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdd7c);
        EXPECT(gbc.pc(), 0x7b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0119
        gbc.setState(0xcb50, 0x78a, 0x7a50, 0xe9c6, 0xf33f, 0x100a, 0x0, 0x1);
        gbc.writeMem(0xcb50, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x78a);
        EXPECT(gbc.pc(), 0xcb52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb50), 0xcb);
        EXPECT(gbc.readMem(0xcb51), 0x4a);
        // CB 4A 011A
        gbc.setState(0x3dc2, 0x3a35, 0x71b0, 0x324b, 0xda83, 0x8641, 0x0, 0x0);
        gbc.writeMem(0x3dc2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3a35);
        EXPECT(gbc.pc(), 0x3dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 011B
        gbc.setState(0x473d, 0xfb91, 0x6f40, 0x443c, 0x9301, 0x7914, 0x0, 0x1);
        gbc.writeMem(0x473d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xfb91);
        EXPECT(gbc.pc(), 0x473f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 011C
        gbc.setState(0x45ad, 0x57d9, 0x6cc0, 0x8e9f, 0x2e1a, 0x3b3a, 0x0, 0x1);
        gbc.writeMem(0x45ad, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x57d9);
        EXPECT(gbc.pc(), 0x45af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 011D
        gbc.setState(0x729c, 0x2e3, 0xe220, 0x15f, 0xce57, 0xb30b, 0x1, 0x0);
        gbc.writeMem(0x729c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2e3);
        EXPECT(gbc.pc(), 0x729e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 011E
        gbc.setState(0xe81b, 0x6f24, 0x8a80, 0xd224, 0xc55e, 0x9318, 0x0, 0x1);
        gbc.writeMem(0xe81b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6f24);
        EXPECT(gbc.pc(), 0xe81d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe81b), 0xcb);
        EXPECT(gbc.readMem(0xe81c), 0x4a);
        // CB 4A 011F
        gbc.setState(0x6deb, 0x9c74, 0x4c90, 0x67fe, 0xaa11, 0x3090, 0x1, 0x1);
        gbc.writeMem(0x6deb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9c74);
        EXPECT(gbc.pc(), 0x6ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0120
        gbc.setState(0xb4a2, 0x5983, 0xe000, 0x3b5, 0xa89f, 0x2359, 0x0, 0x0);
        gbc.writeMem(0xb4a2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5983);
        EXPECT(gbc.pc(), 0xb4a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a2), 0xcb);
        EXPECT(gbc.readMem(0xb4a3), 0x4a);
        // CB 4A 0121
        gbc.setState(0x96a8, 0x6d78, 0xdfd0, 0xf712, 0xb48d, 0xb044, 0x0, 0x0);
        gbc.writeMem(0x96a8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6d78);
        EXPECT(gbc.pc(), 0x96aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96a8), 0xcb);
        EXPECT(gbc.readMem(0x96a9), 0x4a);
        // CB 4A 0122
        gbc.setState(0xca1e, 0x195d, 0x3690, 0x4ea8, 0x5ef0, 0xaaa, 0x0, 0x0);
        gbc.writeMem(0xca1e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x195d);
        EXPECT(gbc.pc(), 0xca20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca1e), 0xcb);
        EXPECT(gbc.readMem(0xca1f), 0x4a);
        // CB 4A 0124
        gbc.setState(0x81e0, 0x8cfa, 0x5460, 0xe42, 0xa881, 0xa186, 0x0, 0x1);
        gbc.writeMem(0x81e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8cfa);
        EXPECT(gbc.pc(), 0x81e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e0), 0xcb);
        EXPECT(gbc.readMem(0x81e1), 0x4a);
        // CB 4A 0126
        gbc.setState(0xe20f, 0xff43, 0xdca0, 0x57da, 0x49b, 0xcb8f, 0x1, 0x0);
        gbc.writeMem(0xe20f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xff43);
        EXPECT(gbc.pc(), 0xe211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20f), 0xcb);
        EXPECT(gbc.readMem(0xe210), 0x4a);
        // CB 4A 0127
        gbc.setState(0xe589, 0x5fb7, 0xb960, 0x8930, 0x5063, 0x626f, 0x1, 0x1);
        gbc.writeMem(0xe589, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5fb7);
        EXPECT(gbc.pc(), 0xe58b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe589), 0xcb);
        EXPECT(gbc.readMem(0xe58a), 0x4a);
        // CB 4A 0128
        gbc.setState(0x5cd5, 0xc6b4, 0x4550, 0xf27e, 0xebc6, 0x34ef, 0x0, 0x1);
        gbc.writeMem(0x5cd5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc6b4);
        EXPECT(gbc.pc(), 0x5cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0129
        gbc.setState(0x4ab8, 0xd1b9, 0xbd00, 0xdb91, 0x4837, 0x77f4, 0x1, 0x1);
        gbc.writeMem(0x4ab8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd1b9);
        EXPECT(gbc.pc(), 0x4aba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 012A
        gbc.setState(0x2577, 0x1939, 0x6be0, 0x8c89, 0x2a3b, 0x59ae, 0x1, 0x1);
        gbc.writeMem(0x2577, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1939);
        EXPECT(gbc.pc(), 0x2579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 012B
        gbc.setState(0xc12b, 0x25b, 0xc9e0, 0x6b85, 0xaa40, 0x662c, 0x1, 0x1);
        gbc.writeMem(0xc12b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x25b);
        EXPECT(gbc.pc(), 0xc12d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12b), 0xcb);
        EXPECT(gbc.readMem(0xc12c), 0x4a);
        // CB 4A 012D
        gbc.setState(0xa89a, 0x1fff, 0x5770, 0x7457, 0xca96, 0xdf90, 0x1, 0x0);
        gbc.writeMem(0xa89a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x1fff);
        EXPECT(gbc.pc(), 0xa89c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89a), 0xcb);
        EXPECT(gbc.readMem(0xa89b), 0x4a);
        // CB 4A 012E
        gbc.setState(0x6c42, 0xbc41, 0xc160, 0xe80a, 0xdd4a, 0x4cb1, 0x1, 0x0);
        gbc.writeMem(0x6c42, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xbc41);
        EXPECT(gbc.pc(), 0x6c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 012F
        gbc.setState(0x4f4e, 0x20f0, 0x5800, 0xb232, 0x339e, 0x5c22, 0x1, 0x1);
        gbc.writeMem(0x4f4e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x20f0);
        EXPECT(gbc.pc(), 0x4f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0130
        gbc.setState(0x5ee1, 0xaa25, 0xe730, 0x1e0b, 0x2c58, 0x7e5d, 0x1, 0x0);
        gbc.writeMem(0x5ee1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaa25);
        EXPECT(gbc.pc(), 0x5ee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0131
        gbc.setState(0x2734, 0x8c69, 0x63f0, 0xdf00, 0x3ee1, 0xac19, 0x0, 0x1);
        gbc.writeMem(0x2734, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8c69);
        EXPECT(gbc.pc(), 0x2736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0132
        gbc.setState(0xae66, 0xd44f, 0xd480, 0x643d, 0xfcf1, 0x6c98, 0x0, 0x0);
        gbc.writeMem(0xae66, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd44f);
        EXPECT(gbc.pc(), 0xae68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae66), 0xcb);
        EXPECT(gbc.readMem(0xae67), 0x4a);
        // CB 4A 0133
        gbc.setState(0xd309, 0x234c, 0x72e0, 0x112d, 0x343e, 0x46db, 0x1, 0x0);
        gbc.writeMem(0xd309, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x234c);
        EXPECT(gbc.pc(), 0xd30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd309), 0xcb);
        EXPECT(gbc.readMem(0xd30a), 0x4a);
        // CB 4A 0134
        gbc.setState(0x994b, 0x9b07, 0xc660, 0xc0c3, 0x3c3c, 0x347a, 0x1, 0x0);
        gbc.writeMem(0x994b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9b07);
        EXPECT(gbc.pc(), 0x994d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x994b), 0xcb);
        EXPECT(gbc.readMem(0x994c), 0x4a);
        // CB 4A 0135
        gbc.setState(0x8dd4, 0xaa48, 0x8c0, 0x4793, 0xb170, 0x7212, 0x0, 0x1);
        gbc.writeMem(0x8dd4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xaa48);
        EXPECT(gbc.pc(), 0x8dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd4), 0xcb);
        EXPECT(gbc.readMem(0x8dd5), 0x4a);
        // CB 4A 0136
        gbc.setState(0x86c8, 0xe35, 0x4490, 0x77af, 0x6842, 0xa447, 0x1, 0x1);
        gbc.writeMem(0x86c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe35);
        EXPECT(gbc.pc(), 0x86ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c8), 0xcb);
        EXPECT(gbc.readMem(0x86c9), 0x4a);
        // CB 4A 0137
        gbc.setState(0x4a5, 0xb1ec, 0xbde0, 0x6ff9, 0x9ddc, 0x85a4, 0x0, 0x1);
        gbc.writeMem(0x4a5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb1ec);
        EXPECT(gbc.pc(), 0x4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0138
        gbc.setState(0xd37, 0x4cab, 0x2780, 0xf55e, 0x5968, 0x7c0, 0x0, 0x1);
        gbc.writeMem(0xd37, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4cab);
        EXPECT(gbc.pc(), 0xd39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0139
        gbc.setState(0xdb6b, 0x443c, 0x5150, 0x8217, 0xf9c7, 0x3e30, 0x0, 0x1);
        gbc.writeMem(0xdb6b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x443c);
        EXPECT(gbc.pc(), 0xdb6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6b), 0xcb);
        EXPECT(gbc.readMem(0xdb6c), 0x4a);
        // CB 4A 013A
        gbc.setState(0x1d06, 0x2d7d, 0xa880, 0x2d9a, 0x83f6, 0x1722, 0x0, 0x1);
        gbc.writeMem(0x1d06, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2d7d);
        EXPECT(gbc.pc(), 0x1d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 013B
        gbc.setState(0x42d5, 0xe718, 0xfed0, 0x6ae5, 0x426f, 0x289c, 0x0, 0x1);
        gbc.writeMem(0x42d5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe718);
        EXPECT(gbc.pc(), 0x42d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 013C
        gbc.setState(0x8bf1, 0x7ea, 0x2100, 0x6c78, 0x3c51, 0xfc5c, 0x1, 0x1);
        gbc.writeMem(0x8bf1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7ea);
        EXPECT(gbc.pc(), 0x8bf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf1), 0xcb);
        EXPECT(gbc.readMem(0x8bf2), 0x4a);
        // CB 4A 013D
        gbc.setState(0x73a4, 0x5afa, 0x9ee0, 0x3feb, 0x72f9, 0x7cda, 0x0, 0x1);
        gbc.writeMem(0x73a4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5afa);
        EXPECT(gbc.pc(), 0x73a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 013E
        gbc.setState(0xea73, 0x30df, 0x1420, 0x2d7c, 0xf1d8, 0xbdc7, 0x1, 0x1);
        gbc.writeMem(0xea73, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x30df);
        EXPECT(gbc.pc(), 0xea75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea73), 0xcb);
        EXPECT(gbc.readMem(0xea74), 0x4a);
        // CB 4A 013F
        gbc.setState(0x5b48, 0xf24a, 0xc270, 0xa10, 0x5e4f, 0x1ba, 0x0, 0x1);
        gbc.writeMem(0x5b48, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf24a);
        EXPECT(gbc.pc(), 0x5b4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0140
        gbc.setState(0xc8e0, 0xb655, 0xf9f0, 0x908c, 0x75f, 0xd21b, 0x0, 0x0);
        gbc.writeMem(0xc8e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb655);
        EXPECT(gbc.pc(), 0xc8e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8e0), 0xcb);
        EXPECT(gbc.readMem(0xc8e1), 0x4a);
        // CB 4A 0141
        gbc.setState(0x3f44, 0xf43b, 0xed60, 0xcff9, 0x7f82, 0xa096, 0x0, 0x1);
        gbc.writeMem(0x3f44, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf43b);
        EXPECT(gbc.pc(), 0x3f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0142
        gbc.setState(0xbcdd, 0xf69c, 0x5a50, 0x863d, 0xc1d7, 0x5da9, 0x1, 0x0);
        gbc.writeMem(0xbcdd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf69c);
        EXPECT(gbc.pc(), 0xbcdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdd), 0xcb);
        EXPECT(gbc.readMem(0xbcde), 0x4a);
        // CB 4A 0143
        gbc.setState(0x5039, 0x2376, 0x5ba0, 0x4269, 0xa510, 0x6e04, 0x1, 0x1);
        gbc.writeMem(0x5039, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2376);
        EXPECT(gbc.pc(), 0x503b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0144
        gbc.setState(0xf42, 0x4144, 0x740, 0x81f0, 0x5489, 0x7e4e, 0x0, 0x1);
        gbc.writeMem(0xf42, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4144);
        EXPECT(gbc.pc(), 0xf44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0145
        gbc.setState(0xa48, 0x4d3d, 0x1890, 0x2e58, 0x9822, 0x4cb, 0x1, 0x0);
        gbc.writeMem(0xa48, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4d3d);
        EXPECT(gbc.pc(), 0xa4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0146
        gbc.setState(0x998d, 0xd813, 0x8780, 0xf95d, 0x5a9c, 0x3f0, 0x1, 0x1);
        gbc.writeMem(0x998d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd813);
        EXPECT(gbc.pc(), 0x998f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x998d), 0xcb);
        EXPECT(gbc.readMem(0x998e), 0x4a);
        // CB 4A 0147
        gbc.setState(0xc1db, 0xdf5, 0x4b60, 0xadfa, 0xe03a, 0xcfe2, 0x1, 0x0);
        gbc.writeMem(0xc1db, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdf5);
        EXPECT(gbc.pc(), 0xc1dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1db), 0xcb);
        EXPECT(gbc.readMem(0xc1dc), 0x4a);
        // CB 4A 0148
        gbc.setState(0x46b4, 0xd5bc, 0x5350, 0x682, 0x5a4a, 0x53d6, 0x1, 0x0);
        gbc.writeMem(0x46b4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd5bc);
        EXPECT(gbc.pc(), 0x46b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0149
        gbc.setState(0xa8e9, 0xc61, 0xd4c0, 0x4a09, 0x75b3, 0xd065, 0x1, 0x1);
        gbc.writeMem(0xa8e9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc61);
        EXPECT(gbc.pc(), 0xa8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e9), 0xcb);
        EXPECT(gbc.readMem(0xa8ea), 0x4a);
        // CB 4A 014A
        gbc.setState(0x7214, 0x911d, 0x1af0, 0x90c5, 0x4065, 0xfdf, 0x0, 0x1);
        gbc.writeMem(0x7214, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x911d);
        EXPECT(gbc.pc(), 0x7216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 014B
        gbc.setState(0x2da7, 0x8981, 0xf8e0, 0x5c6b, 0xfcce, 0x7fe4, 0x1, 0x1);
        gbc.writeMem(0x2da7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8981);
        EXPECT(gbc.pc(), 0x2da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 014C
        gbc.setState(0x7a8a, 0x48, 0x290, 0x4797, 0xc780, 0x2d0d, 0x1, 0x1);
        gbc.writeMem(0x7a8a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x48);
        EXPECT(gbc.pc(), 0x7a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 014D
        gbc.setState(0xa3ba, 0xbfe8, 0xe470, 0xe1f, 0x98d4, 0xcbc6, 0x1, 0x0);
        gbc.writeMem(0xa3ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xbfe8);
        EXPECT(gbc.pc(), 0xa3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ba), 0xcb);
        EXPECT(gbc.readMem(0xa3bb), 0x4a);
        // CB 4A 014E
        gbc.setState(0xa1ef, 0xb01, 0x70a0, 0x6b83, 0x8d29, 0x3c06, 0x1, 0x1);
        gbc.writeMem(0xa1ef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb01);
        EXPECT(gbc.pc(), 0xa1f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ef), 0xcb);
        EXPECT(gbc.readMem(0xa1f0), 0x4a);
        // CB 4A 014F
        gbc.setState(0xd70, 0xfbfb, 0x59b0, 0x7960, 0x4da6, 0xceb0, 0x0, 0x0);
        gbc.writeMem(0xd70, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xfbfb);
        EXPECT(gbc.pc(), 0xd72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0151
        gbc.setState(0xce36, 0x12eb, 0xdd10, 0x90b0, 0xecb3, 0x24fb, 0x1, 0x1);
        gbc.writeMem(0xce36, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x12eb);
        EXPECT(gbc.pc(), 0xce38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce36), 0xcb);
        EXPECT(gbc.readMem(0xce37), 0x4a);
        // CB 4A 0152
        gbc.setState(0x9b89, 0x7ef7, 0xf1c0, 0xcbfa, 0xd247, 0xb8c, 0x1, 0x0);
        gbc.writeMem(0x9b89, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7ef7);
        EXPECT(gbc.pc(), 0x9b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b89), 0xcb);
        EXPECT(gbc.readMem(0x9b8a), 0x4a);
        // CB 4A 0153
        gbc.setState(0xa1f9, 0xec36, 0xc260, 0xedb4, 0x185e, 0xe588, 0x1, 0x0);
        gbc.writeMem(0xa1f9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xec36);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f9), 0xcb);
        EXPECT(gbc.readMem(0xa1fa), 0x4a);
        // CB 4A 0155
        gbc.setState(0x792b, 0xe566, 0x28c0, 0xcd4d, 0x8c50, 0x4606, 0x1, 0x1);
        gbc.writeMem(0x792b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe566);
        EXPECT(gbc.pc(), 0x792d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0156
        gbc.setState(0x40f1, 0xcbbc, 0x1920, 0xd3d, 0xa836, 0xca60, 0x0, 0x1);
        gbc.writeMem(0x40f1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcbbc);
        EXPECT(gbc.pc(), 0x40f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0157
        gbc.setState(0x1348, 0x3a53, 0xf480, 0x5347, 0x3ae8, 0x109d, 0x0, 0x0);
        gbc.writeMem(0x1348, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3a53);
        EXPECT(gbc.pc(), 0x134a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0158
        gbc.setState(0xd5e4, 0x7048, 0x5f0, 0xcb6b, 0xb090, 0x5177, 0x1, 0x1);
        gbc.writeMem(0xd5e4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7048);
        EXPECT(gbc.pc(), 0xd5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e4), 0xcb);
        EXPECT(gbc.readMem(0xd5e5), 0x4a);
        // CB 4A 0159
        gbc.setState(0x676a, 0x8367, 0x9fd0, 0xfec6, 0xd3a, 0x68ec, 0x0, 0x1);
        gbc.writeMem(0x676a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8367);
        EXPECT(gbc.pc(), 0x676c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 015A
        gbc.setState(0x3bf2, 0xcde3, 0xc880, 0xff69, 0xb625, 0x36f3, 0x0, 0x0);
        gbc.writeMem(0x3bf2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcde3);
        EXPECT(gbc.pc(), 0x3bf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 015C
        gbc.setState(0x3316, 0xe026, 0x1230, 0x8df, 0xa089, 0x1063, 0x1, 0x0);
        gbc.writeMem(0x3316, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe026);
        EXPECT(gbc.pc(), 0x3318);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 015D
        gbc.setState(0xcbf1, 0x3a1c, 0xa8f0, 0xeb90, 0x53c9, 0x641c, 0x0, 0x0);
        gbc.writeMem(0xcbf1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3a1c);
        EXPECT(gbc.pc(), 0xcbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf1), 0xcb);
        EXPECT(gbc.readMem(0xcbf2), 0x4a);
        // CB 4A 015E
        gbc.setState(0x96d2, 0x111d, 0x6f0, 0x6e33, 0x9751, 0x397d, 0x0, 0x1);
        gbc.writeMem(0x96d2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x111d);
        EXPECT(gbc.pc(), 0x96d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96d2), 0xcb);
        EXPECT(gbc.readMem(0x96d3), 0x4a);
        // CB 4A 015F
        gbc.setState(0xd190, 0x35d0, 0x71d0, 0xa8f, 0x2858, 0xb998, 0x1, 0x0);
        gbc.writeMem(0xd190, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x35d0);
        EXPECT(gbc.pc(), 0xd192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd190), 0xcb);
        EXPECT(gbc.readMem(0xd191), 0x4a);
        // CB 4A 0160
        gbc.setState(0xbc2, 0x34fe, 0x8680, 0x9fda, 0x79b, 0x8693, 0x0, 0x1);
        gbc.writeMem(0xbc2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x34fe);
        EXPECT(gbc.pc(), 0xbc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0161
        gbc.setState(0xa568, 0xbc30, 0x9050, 0xbbaf, 0x6710, 0x2736, 0x0, 0x0);
        gbc.writeMem(0xa568, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbc30);
        EXPECT(gbc.pc(), 0xa56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa568), 0xcb);
        EXPECT(gbc.readMem(0xa569), 0x4a);
        // CB 4A 0162
        gbc.setState(0x4cec, 0x470f, 0xc020, 0x784b, 0x738c, 0x1fd3, 0x1, 0x0);
        gbc.writeMem(0x4cec, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x470f);
        EXPECT(gbc.pc(), 0x4cee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0163
        gbc.setState(0x2569, 0xf827, 0xf7e0, 0xacda, 0xbc92, 0x450c, 0x0, 0x1);
        gbc.writeMem(0x2569, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf827);
        EXPECT(gbc.pc(), 0x256b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0165
        gbc.setState(0xc867, 0x9ad4, 0xb830, 0xdb29, 0xe17f, 0x4592, 0x0, 0x1);
        gbc.writeMem(0xc867, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9ad4);
        EXPECT(gbc.pc(), 0xc869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc867), 0xcb);
        EXPECT(gbc.readMem(0xc868), 0x4a);
        // CB 4A 0166
        gbc.setState(0x16cb, 0xb808, 0xda0, 0xa43a, 0xc80a, 0xaf0a, 0x0, 0x1);
        gbc.writeMem(0x16cb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb808);
        EXPECT(gbc.pc(), 0x16cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0167
        gbc.setState(0x85d9, 0xb3c9, 0x9140, 0xb461, 0x7b15, 0xfd32, 0x1, 0x0);
        gbc.writeMem(0x85d9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb3c9);
        EXPECT(gbc.pc(), 0x85db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d9), 0xcb);
        EXPECT(gbc.readMem(0x85da), 0x4a);
        // CB 4A 0168
        gbc.setState(0x125f, 0xe6cb, 0xbc60, 0xfa5e, 0xd25c, 0x2bd, 0x1, 0x1);
        gbc.writeMem(0x125f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe6cb);
        EXPECT(gbc.pc(), 0x1261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0169
        gbc.setState(0x6ac1, 0x63ce, 0xf380, 0x74dd, 0xccc6, 0xa4af, 0x1, 0x1);
        gbc.writeMem(0x6ac1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x63ce);
        EXPECT(gbc.pc(), 0x6ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 016A
        gbc.setState(0x1e0b, 0x12f1, 0x16d0, 0x17bb, 0xba3a, 0x8f0b, 0x0, 0x0);
        gbc.writeMem(0x1e0b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x12f1);
        EXPECT(gbc.pc(), 0x1e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 016B
        gbc.setState(0xdb90, 0x6ee3, 0xbc50, 0x6891, 0xc15b, 0x10d, 0x1, 0x1);
        gbc.writeMem(0xdb90, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6ee3);
        EXPECT(gbc.pc(), 0xdb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb90), 0xcb);
        EXPECT(gbc.readMem(0xdb91), 0x4a);
        // CB 4A 016C
        gbc.setState(0xcbf9, 0xf090, 0xfef0, 0xbc45, 0xda30, 0xe6e8, 0x0, 0x0);
        gbc.writeMem(0xcbf9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf090);
        EXPECT(gbc.pc(), 0xcbfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf9), 0xcb);
        EXPECT(gbc.readMem(0xcbfa), 0x4a);
        // CB 4A 016D
        gbc.setState(0xa0e4, 0x3667, 0x2430, 0xa18, 0x1044, 0x3623, 0x1, 0x0);
        gbc.writeMem(0xa0e4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3667);
        EXPECT(gbc.pc(), 0xa0e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e4), 0xcb);
        EXPECT(gbc.readMem(0xa0e5), 0x4a);
        // CB 4A 016E
        gbc.setState(0x8ec9, 0x634b, 0xb730, 0xa2cf, 0x114, 0xfb9f, 0x0, 0x0);
        gbc.writeMem(0x8ec9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x634b);
        EXPECT(gbc.pc(), 0x8ecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ec9), 0xcb);
        EXPECT(gbc.readMem(0x8eca), 0x4a);
        // CB 4A 016F
        gbc.setState(0x5074, 0x45d0, 0x5ef0, 0x44, 0x7d9b, 0xe2fd, 0x0, 0x1);
        gbc.writeMem(0x5074, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x45d0);
        EXPECT(gbc.pc(), 0x5076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0170
        gbc.setState(0xed39, 0x4f42, 0x3ff0, 0x3125, 0xd621, 0xaa84, 0x0, 0x1);
        gbc.writeMem(0xed39, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4f42);
        EXPECT(gbc.pc(), 0xed3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed39), 0xcb);
        EXPECT(gbc.readMem(0xed3a), 0x4a);
        // CB 4A 0171
        gbc.setState(0x42ce, 0x9175, 0x15b0, 0xc1ee, 0x25e3, 0x4ac4, 0x1, 0x0);
        gbc.writeMem(0x42ce, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9175);
        EXPECT(gbc.pc(), 0x42d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0172
        gbc.setState(0x1305, 0x5bd2, 0xb0d0, 0xe0ad, 0x5b3c, 0xc70c, 0x1, 0x0);
        gbc.writeMem(0x1305, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5bd2);
        EXPECT(gbc.pc(), 0x1307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0173
        gbc.setState(0x2c9a, 0xe4e5, 0x5f40, 0x52e1, 0x3a42, 0xcf61, 0x1, 0x1);
        gbc.writeMem(0x2c9a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe4e5);
        EXPECT(gbc.pc(), 0x2c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0174
        gbc.setState(0x2b33, 0x9587, 0x9a50, 0x2480, 0x35aa, 0x4dff, 0x0, 0x0);
        gbc.writeMem(0x2b33, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9587);
        EXPECT(gbc.pc(), 0x2b35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0175
        gbc.setState(0xa70b, 0x52f4, 0xab00, 0xf86c, 0xb64d, 0x377e, 0x1, 0x0);
        gbc.writeMem(0xa70b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x52f4);
        EXPECT(gbc.pc(), 0xa70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa70b), 0xcb);
        EXPECT(gbc.readMem(0xa70c), 0x4a);
        // CB 4A 0176
        gbc.setState(0xb495, 0x4841, 0xfd50, 0xa845, 0xf7d2, 0x3059, 0x1, 0x0);
        gbc.writeMem(0xb495, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4841);
        EXPECT(gbc.pc(), 0xb497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb495), 0xcb);
        EXPECT(gbc.readMem(0xb496), 0x4a);
        // CB 4A 0177
        gbc.setState(0x6b91, 0x310f, 0x3440, 0xa905, 0x1e27, 0xf838, 0x1, 0x1);
        gbc.writeMem(0x6b91, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x310f);
        EXPECT(gbc.pc(), 0x6b93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 017A
        gbc.setState(0xe71, 0xc11f, 0x7970, 0x481, 0x2234, 0x43dc, 0x1, 0x1);
        gbc.writeMem(0xe71, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc11f);
        EXPECT(gbc.pc(), 0xe73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 017B
        gbc.setState(0xaec7, 0x8edd, 0x2470, 0x1667, 0xb58b, 0xfa54, 0x1, 0x0);
        gbc.writeMem(0xaec7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8edd);
        EXPECT(gbc.pc(), 0xaec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec7), 0xcb);
        EXPECT(gbc.readMem(0xaec8), 0x4a);
        // CB 4A 017C
        gbc.setState(0x6de7, 0xeada, 0x1770, 0x2ca1, 0x73c2, 0x7323, 0x1, 0x0);
        gbc.writeMem(0x6de7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xeada);
        EXPECT(gbc.pc(), 0x6de9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 017E
        gbc.setState(0x4a44, 0x250f, 0x1110, 0x45c2, 0xe2a8, 0xb232, 0x0, 0x0);
        gbc.writeMem(0x4a44, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x250f);
        EXPECT(gbc.pc(), 0x4a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 017F
        gbc.setState(0xdb39, 0xd43e, 0x6dd0, 0xe701, 0x7533, 0x8711, 0x0, 0x1);
        gbc.writeMem(0xdb39, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd43e);
        EXPECT(gbc.pc(), 0xdb3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb39), 0xcb);
        EXPECT(gbc.readMem(0xdb3a), 0x4a);
        // CB 4A 0180
        gbc.setState(0x439d, 0xa6e9, 0x3fc0, 0xa66d, 0x620, 0xdbe8, 0x0, 0x1);
        gbc.writeMem(0x439d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa6e9);
        EXPECT(gbc.pc(), 0x439f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0181
        gbc.setState(0x450b, 0x739d, 0x4290, 0x1602, 0x49ff, 0xad78, 0x1, 0x1);
        gbc.writeMem(0x450b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x739d);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0182
        gbc.setState(0x524b, 0xeea4, 0xceb0, 0x6117, 0xd8e9, 0xd8bc, 0x0, 0x1);
        gbc.writeMem(0x524b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xeea4);
        EXPECT(gbc.pc(), 0x524d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0183
        gbc.setState(0x596d, 0xe0d, 0xd4d0, 0xdef0, 0xc086, 0xea3f, 0x1, 0x1);
        gbc.writeMem(0x596d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe0d);
        EXPECT(gbc.pc(), 0x596f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0184
        gbc.setState(0xafe5, 0x944c, 0x4120, 0xdb6e, 0xa837, 0xac97, 0x1, 0x1);
        gbc.writeMem(0xafe5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x944c);
        EXPECT(gbc.pc(), 0xafe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe5), 0xcb);
        EXPECT(gbc.readMem(0xafe6), 0x4a);
        // CB 4A 0185
        gbc.setState(0x2d62, 0x3b35, 0x3990, 0x9af9, 0xe736, 0xb5e4, 0x1, 0x1);
        gbc.writeMem(0x2d62, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3b35);
        EXPECT(gbc.pc(), 0x2d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0186
        gbc.setState(0x8250, 0x210c, 0xaf20, 0xb3e6, 0xcc29, 0xed4f, 0x0, 0x0);
        gbc.writeMem(0x8250, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x210c);
        EXPECT(gbc.pc(), 0x8252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8250), 0xcb);
        EXPECT(gbc.readMem(0x8251), 0x4a);
        // CB 4A 0187
        gbc.setState(0x7187, 0x8f15, 0xeb0, 0xfc5b, 0x9176, 0x58de, 0x1, 0x1);
        gbc.writeMem(0x7187, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8f15);
        EXPECT(gbc.pc(), 0x7189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0188
        gbc.setState(0x126b, 0xa74d, 0xfd90, 0xff0a, 0xb4f8, 0x8cd6, 0x1, 0x0);
        gbc.writeMem(0x126b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xa74d);
        EXPECT(gbc.pc(), 0x126d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0189
        gbc.setState(0xd32b, 0x97dd, 0x2000, 0xc9a3, 0xd64c, 0x34e2, 0x0, 0x1);
        gbc.writeMem(0xd32b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x97dd);
        EXPECT(gbc.pc(), 0xd32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32b), 0xcb);
        EXPECT(gbc.readMem(0xd32c), 0x4a);
        // CB 4A 018A
        gbc.setState(0x74cb, 0x99ee, 0x1ee0, 0x8de7, 0x7fd6, 0xc694, 0x1, 0x0);
        gbc.writeMem(0x74cb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x99ee);
        EXPECT(gbc.pc(), 0x74cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 018B
        gbc.setState(0x797d, 0x434c, 0x37c0, 0xf20e, 0xab76, 0x74d0, 0x1, 0x1);
        gbc.writeMem(0x797d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x434c);
        EXPECT(gbc.pc(), 0x797f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 018C
        gbc.setState(0xaf20, 0xd7f1, 0x9b70, 0xa67a, 0x7f4a, 0xf68, 0x0, 0x0);
        gbc.writeMem(0xaf20, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd7f1);
        EXPECT(gbc.pc(), 0xaf22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf20), 0xcb);
        EXPECT(gbc.readMem(0xaf21), 0x4a);
        // CB 4A 018D
        gbc.setState(0x35ba, 0x7f06, 0x2190, 0xb0f7, 0x24eb, 0x7152, 0x0, 0x0);
        gbc.writeMem(0x35ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7f06);
        EXPECT(gbc.pc(), 0x35bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 018E
        gbc.setState(0x1c7f, 0xd07f, 0xd2b0, 0x3a33, 0x5911, 0xcad0, 0x0, 0x1);
        gbc.writeMem(0x1c7f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd07f);
        EXPECT(gbc.pc(), 0x1c81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 018F
        gbc.setState(0xcfa, 0xa659, 0xe930, 0x365c, 0x6d24, 0x6b5f, 0x0, 0x1);
        gbc.writeMem(0xcfa, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa659);
        EXPECT(gbc.pc(), 0xcfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0190
        gbc.setState(0x35ad, 0xb7af, 0xfe70, 0xf0d5, 0x7f4b, 0x9cb, 0x0, 0x0);
        gbc.writeMem(0x35ad, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb7af);
        EXPECT(gbc.pc(), 0x35af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0191
        gbc.setState(0x5cea, 0x3c67, 0xd450, 0xad4a, 0x52bf, 0xca2, 0x0, 0x0);
        gbc.writeMem(0x5cea, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3c67);
        EXPECT(gbc.pc(), 0x5cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0192
        gbc.setState(0xcc3e, 0xbb3e, 0x4a30, 0x6796, 0x547b, 0xf5ff, 0x0, 0x0);
        gbc.writeMem(0xcc3e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbb3e);
        EXPECT(gbc.pc(), 0xcc40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3e), 0xcb);
        EXPECT(gbc.readMem(0xcc3f), 0x4a);
        // CB 4A 0193
        gbc.setState(0xfa7, 0x5cba, 0xd4b0, 0x25d8, 0x21c6, 0xeefd, 0x0, 0x0);
        gbc.writeMem(0xfa7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5cba);
        EXPECT(gbc.pc(), 0xfa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0194
        gbc.setState(0x1f6a, 0x7ea4, 0x5d80, 0xc2dc, 0x3408, 0x5291, 0x0, 0x1);
        gbc.writeMem(0x1f6a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7ea4);
        EXPECT(gbc.pc(), 0x1f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0195
        gbc.setState(0x1997, 0xff55, 0xbba0, 0xd2a1, 0x4902, 0x9e03, 0x1, 0x1);
        gbc.writeMem(0x1997, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xff55);
        EXPECT(gbc.pc(), 0x1999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0196
        gbc.setState(0x7170, 0x8c3a, 0x9d30, 0x855b, 0xb52e, 0x3f00, 0x0, 0x1);
        gbc.writeMem(0x7170, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8c3a);
        EXPECT(gbc.pc(), 0x7172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0197
        gbc.setState(0x196f, 0x60a8, 0xafd0, 0x12a6, 0x4f63, 0x6b8d, 0x1, 0x1);
        gbc.writeMem(0x196f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x60a8);
        EXPECT(gbc.pc(), 0x1971);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0198
        gbc.setState(0xc39b, 0x71e5, 0x2cc0, 0xd62c, 0xeaa5, 0xd36e, 0x0, 0x1);
        gbc.writeMem(0xc39b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x71e5);
        EXPECT(gbc.pc(), 0xc39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39b), 0xcb);
        EXPECT(gbc.readMem(0xc39c), 0x4a);
        // CB 4A 0199
        gbc.setState(0x95c0, 0xd6c1, 0xc1a0, 0xa2b1, 0xed3b, 0x6a59, 0x0, 0x0);
        gbc.writeMem(0x95c0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xd6c1);
        EXPECT(gbc.pc(), 0x95c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95c0), 0xcb);
        EXPECT(gbc.readMem(0x95c1), 0x4a);
        // CB 4A 019A
        gbc.setState(0x91c5, 0xcfed, 0x8ff0, 0xcd3d, 0xfb8b, 0x86d3, 0x1, 0x0);
        gbc.writeMem(0x91c5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xcfed);
        EXPECT(gbc.pc(), 0x91c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c5), 0xcb);
        EXPECT(gbc.readMem(0x91c6), 0x4a);
        // CB 4A 019B
        gbc.setState(0xa506, 0x4285, 0x7c70, 0xd01a, 0xc4b, 0xd9d9, 0x1, 0x1);
        gbc.writeMem(0xa506, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4285);
        EXPECT(gbc.pc(), 0xa508);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa506), 0xcb);
        EXPECT(gbc.readMem(0xa507), 0x4a);
        // CB 4A 019C
        gbc.setState(0x67da, 0xde9a, 0x7fe0, 0xcd36, 0x3950, 0x7392, 0x0, 0x0);
        gbc.writeMem(0x67da, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xde9a);
        EXPECT(gbc.pc(), 0x67dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 019E
        gbc.setState(0x84c8, 0xc1d1, 0xcfa0, 0x92b3, 0x947, 0x1477, 0x1, 0x0);
        gbc.writeMem(0x84c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc1d1);
        EXPECT(gbc.pc(), 0x84ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c8), 0xcb);
        EXPECT(gbc.readMem(0x84c9), 0x4a);
        // CB 4A 019F
        gbc.setState(0x6a0a, 0x947b, 0x8d50, 0x2258, 0x2b59, 0x64ae, 0x0, 0x1);
        gbc.writeMem(0x6a0a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x947b);
        EXPECT(gbc.pc(), 0x6a0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01A0
        gbc.setState(0x7c9d, 0x6230, 0xa510, 0xefd6, 0x1709, 0x880, 0x1, 0x0);
        gbc.writeMem(0x7c9d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6230);
        EXPECT(gbc.pc(), 0x7c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01A2
        gbc.setState(0x687, 0x6a87, 0xc260, 0x7b98, 0x6527, 0xbcd9, 0x0, 0x0);
        gbc.writeMem(0x687, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6a87);
        EXPECT(gbc.pc(), 0x689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01A3
        gbc.setState(0xbf3a, 0xe811, 0x3960, 0xa556, 0xfb6f, 0x16ec, 0x0, 0x1);
        gbc.writeMem(0xbf3a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe811);
        EXPECT(gbc.pc(), 0xbf3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3a), 0xcb);
        EXPECT(gbc.readMem(0xbf3b), 0x4a);
        // CB 4A 01A4
        gbc.setState(0x435f, 0x2305, 0x51d0, 0x2e9, 0xcfec, 0x865a, 0x1, 0x1);
        gbc.writeMem(0x435f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2305);
        EXPECT(gbc.pc(), 0x4361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01A5
        gbc.setState(0xc938, 0xf9d0, 0x7b10, 0xd8f0, 0xae43, 0x3e9d, 0x0, 0x1);
        gbc.writeMem(0xc938, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf9d0);
        EXPECT(gbc.pc(), 0xc93a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc938), 0xcb);
        EXPECT(gbc.readMem(0xc939), 0x4a);
        // CB 4A 01A7
        gbc.setState(0x27ad, 0xcc8d, 0x81d0, 0x99db, 0x5cac, 0xa975, 0x0, 0x1);
        gbc.writeMem(0x27ad, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xcc8d);
        EXPECT(gbc.pc(), 0x27af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01A8
        gbc.setState(0x3d5f, 0xdb0f, 0x400, 0x8f6e, 0xedbb, 0x76dd, 0x0, 0x0);
        gbc.writeMem(0x3d5f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdb0f);
        EXPECT(gbc.pc(), 0x3d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01A9
        gbc.setState(0x7f9c, 0xe77f, 0x6da0, 0x612b, 0x5d59, 0x6dd1, 0x0, 0x1);
        gbc.writeMem(0x7f9c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe77f);
        EXPECT(gbc.pc(), 0x7f9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01AA
        gbc.setState(0x28a8, 0x84e8, 0x6a60, 0xc064, 0x2178, 0x151d, 0x1, 0x1);
        gbc.writeMem(0x28a8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x84e8);
        EXPECT(gbc.pc(), 0x28aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01AB
        gbc.setState(0x9e3d, 0x39a5, 0xcab0, 0x7ba2, 0x6c27, 0x2b53, 0x0, 0x1);
        gbc.writeMem(0x9e3d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x39a5);
        EXPECT(gbc.pc(), 0x9e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3d), 0xcb);
        EXPECT(gbc.readMem(0x9e3e), 0x4a);
        // CB 4A 01AC
        gbc.setState(0xb4e2, 0x91fd, 0xc290, 0xcbdc, 0xf3d2, 0x2ef7, 0x0, 0x1);
        gbc.writeMem(0xb4e2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x91fd);
        EXPECT(gbc.pc(), 0xb4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4e2), 0xcb);
        EXPECT(gbc.readMem(0xb4e3), 0x4a);
        // CB 4A 01AD
        gbc.setState(0xa553, 0x91ba, 0x9fd0, 0x6a7e, 0x55c6, 0x2f4, 0x1, 0x1);
        gbc.writeMem(0xa553, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x91ba);
        EXPECT(gbc.pc(), 0xa555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa553), 0xcb);
        EXPECT(gbc.readMem(0xa554), 0x4a);
        // CB 4A 01AE
        gbc.setState(0xb4f6, 0x3c5e, 0x5750, 0x63c7, 0xf7ca, 0xac60, 0x0, 0x1);
        gbc.writeMem(0xb4f6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0xb4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f6), 0xcb);
        EXPECT(gbc.readMem(0xb4f7), 0x4a);
        // CB 4A 01AF
        gbc.setState(0x8a3c, 0x6911, 0x69c0, 0xf6df, 0x35d1, 0x6c93, 0x0, 0x1);
        gbc.writeMem(0x8a3c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6911);
        EXPECT(gbc.pc(), 0x8a3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3c), 0xcb);
        EXPECT(gbc.readMem(0x8a3d), 0x4a);
        // CB 4A 01B0
        gbc.setState(0xc39, 0x3085, 0x2650, 0xc65c, 0xd0ed, 0x8a59, 0x0, 0x1);
        gbc.writeMem(0xc39, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3085);
        EXPECT(gbc.pc(), 0xc3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01B1
        gbc.setState(0x1a35, 0x7b8, 0xdf80, 0x3f3f, 0x102f, 0xb577, 0x1, 0x1);
        gbc.writeMem(0x1a35, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7b8);
        EXPECT(gbc.pc(), 0x1a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01B3
        gbc.setState(0x47aa, 0x41ba, 0x3df0, 0xde9e, 0x39ca, 0xa687, 0x1, 0x1);
        gbc.writeMem(0x47aa, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x41ba);
        EXPECT(gbc.pc(), 0x47ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01B4
        gbc.setState(0x7b7a, 0x1d97, 0xba40, 0x8105, 0x14f6, 0xb055, 0x0, 0x0);
        gbc.writeMem(0x7b7a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1d97);
        EXPECT(gbc.pc(), 0x7b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01B5
        gbc.setState(0xdab, 0x80a7, 0x3d0, 0xccc5, 0x4502, 0x3930, 0x1, 0x0);
        gbc.writeMem(0xdab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x80a7);
        EXPECT(gbc.pc(), 0xdad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01B6
        gbc.setState(0x3c7d, 0xded0, 0x5320, 0x6dfd, 0xff42, 0x381, 0x1, 0x1);
        gbc.writeMem(0x3c7d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xded0);
        EXPECT(gbc.pc(), 0x3c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01B7
        gbc.setState(0xd32, 0xb80f, 0x8b50, 0xfee0, 0xcf18, 0x311b, 0x0, 0x1);
        gbc.writeMem(0xd32, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb80f);
        EXPECT(gbc.pc(), 0xd34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01B9
        gbc.setState(0xa1ab, 0x991c, 0x22b0, 0xac42, 0x1505, 0x24ab, 0x1, 0x0);
        gbc.writeMem(0xa1ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x991c);
        EXPECT(gbc.pc(), 0xa1ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ab), 0xcb);
        EXPECT(gbc.readMem(0xa1ac), 0x4a);
        // CB 4A 01BA
        gbc.setState(0x2cfe, 0xe699, 0x340, 0x4a0a, 0x7d82, 0xd19e, 0x1, 0x1);
        gbc.writeMem(0x2cfe, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe699);
        EXPECT(gbc.pc(), 0x2d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01BB
        gbc.setState(0x69cc, 0x69ba, 0x1cf0, 0xfcbf, 0xc9e5, 0x70c2, 0x1, 0x0);
        gbc.writeMem(0x69cc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x69ba);
        EXPECT(gbc.pc(), 0x69ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01BC
        gbc.setState(0xa854, 0x13c0, 0x40d0, 0x285a, 0xb9, 0x3be4, 0x0, 0x0);
        gbc.writeMem(0xa854, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x13c0);
        EXPECT(gbc.pc(), 0xa856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa854), 0xcb);
        EXPECT(gbc.readMem(0xa855), 0x4a);
        // CB 4A 01BD
        gbc.setState(0x47e9, 0xdff0, 0x78b0, 0x71d3, 0x379e, 0x7423, 0x1, 0x1);
        gbc.writeMem(0x47e9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdff0);
        EXPECT(gbc.pc(), 0x47eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01BE
        gbc.setState(0xc1d1, 0xd6e9, 0x9bf0, 0x7cae, 0x7066, 0x6b8d, 0x0, 0x1);
        gbc.writeMem(0xc1d1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd6e9);
        EXPECT(gbc.pc(), 0xc1d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d1), 0xcb);
        EXPECT(gbc.readMem(0xc1d2), 0x4a);
        // CB 4A 01BF
        gbc.setState(0x365a, 0x9e09, 0x3a40, 0xbcce, 0x7f29, 0x20f8, 0x0, 0x0);
        gbc.writeMem(0x365a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9e09);
        EXPECT(gbc.pc(), 0x365c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01C0
        gbc.setState(0xba68, 0x6289, 0x48e0, 0x6f24, 0x566c, 0xe7c9, 0x0, 0x1);
        gbc.writeMem(0xba68, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6289);
        EXPECT(gbc.pc(), 0xba6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba68), 0xcb);
        EXPECT(gbc.readMem(0xba69), 0x4a);
        // CB 4A 01C1
        gbc.setState(0x8cbd, 0x9a86, 0x1ea0, 0x6fa8, 0x10e2, 0x9cfe, 0x1, 0x0);
        gbc.writeMem(0x8cbd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9a86);
        EXPECT(gbc.pc(), 0x8cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cbd), 0xcb);
        EXPECT(gbc.readMem(0x8cbe), 0x4a);
        // CB 4A 01C2
        gbc.setState(0xaf32, 0xcc40, 0xa5b0, 0x5e8c, 0x9bcf, 0x7dd5, 0x1, 0x0);
        gbc.writeMem(0xaf32, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcc40);
        EXPECT(gbc.pc(), 0xaf34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf32), 0xcb);
        EXPECT(gbc.readMem(0xaf33), 0x4a);
        // CB 4A 01C3
        gbc.setState(0x8fda, 0x4b05, 0x40, 0x74f5, 0x64c, 0x20cb, 0x0, 0x0);
        gbc.writeMem(0x8fda, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4b05);
        EXPECT(gbc.pc(), 0x8fdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fda), 0xcb);
        EXPECT(gbc.readMem(0x8fdb), 0x4a);
        // CB 4A 01C4
        gbc.setState(0xa76d, 0xdaea, 0xce30, 0x2f61, 0x8026, 0x7f5c, 0x1, 0x1);
        gbc.writeMem(0xa76d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdaea);
        EXPECT(gbc.pc(), 0xa76f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76d), 0xcb);
        EXPECT(gbc.readMem(0xa76e), 0x4a);
        // CB 4A 01C5
        gbc.setState(0xb91d, 0xcc8e, 0x51e0, 0xad87, 0xc0e5, 0xed67, 0x1, 0x1);
        gbc.writeMem(0xb91d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xcc8e);
        EXPECT(gbc.pc(), 0xb91f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91d), 0xcb);
        EXPECT(gbc.readMem(0xb91e), 0x4a);
        // CB 4A 01C6
        gbc.setState(0x6324, 0xefa5, 0xf690, 0x943b, 0xaf, 0x7f8, 0x1, 0x0);
        gbc.writeMem(0x6324, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xefa5);
        EXPECT(gbc.pc(), 0x6326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01C7
        gbc.setState(0xd1e6, 0x74d3, 0x8160, 0x88c6, 0x3c6c, 0x5b37, 0x1, 0x0);
        gbc.writeMem(0xd1e6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x74d3);
        EXPECT(gbc.pc(), 0xd1e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e6), 0xcb);
        EXPECT(gbc.readMem(0xd1e7), 0x4a);
        // CB 4A 01C8
        gbc.setState(0x87ba, 0x2277, 0x1b10, 0x7837, 0x5643, 0x80c3, 0x1, 0x0);
        gbc.writeMem(0x87ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2277);
        EXPECT(gbc.pc(), 0x87bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87ba), 0xcb);
        EXPECT(gbc.readMem(0x87bb), 0x4a);
        // CB 4A 01C9
        gbc.setState(0x5d1f, 0x2fc1, 0x47c0, 0xa9cc, 0x2679, 0xea82, 0x1, 0x0);
        gbc.writeMem(0x5d1f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2fc1);
        EXPECT(gbc.pc(), 0x5d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01CA
        gbc.setState(0xb6e1, 0xf078, 0xac80, 0xbe0d, 0x1775, 0x1519, 0x0, 0x0);
        gbc.writeMem(0xb6e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf078);
        EXPECT(gbc.pc(), 0xb6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e1), 0xcb);
        EXPECT(gbc.readMem(0xb6e2), 0x4a);
        // CB 4A 01CB
        gbc.setState(0xa244, 0x1a8d, 0xf000, 0x9900, 0xeb1e, 0xd6e8, 0x1, 0x0);
        gbc.writeMem(0xa244, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1a8d);
        EXPECT(gbc.pc(), 0xa246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa244), 0xcb);
        EXPECT(gbc.readMem(0xa245), 0x4a);
        // CB 4A 01CC
        gbc.setState(0x3d0e, 0xfe83, 0x9890, 0x1ca2, 0x2167, 0x91d, 0x1, 0x0);
        gbc.writeMem(0x3d0e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfe83);
        EXPECT(gbc.pc(), 0x3d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01CD
        gbc.setState(0xaad2, 0xd9be, 0x48f0, 0x436, 0x5bf3, 0xc43a, 0x1, 0x0);
        gbc.writeMem(0xaad2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0xaad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad2), 0xcb);
        EXPECT(gbc.readMem(0xaad3), 0x4a);
        // CB 4A 01CE
        gbc.setState(0x28d3, 0x67da, 0x2140, 0xa834, 0x8600, 0xfff3, 0x0, 0x1);
        gbc.writeMem(0x28d3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x67da);
        EXPECT(gbc.pc(), 0x28d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01CF
        gbc.setState(0x68a1, 0xcef9, 0xbee0, 0xbfa1, 0x1a36, 0x747c, 0x1, 0x1);
        gbc.writeMem(0x68a1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcef9);
        EXPECT(gbc.pc(), 0x68a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01D0
        gbc.setState(0x78df, 0x4c6a, 0xe850, 0x8ac7, 0xfaa3, 0xe760, 0x1, 0x1);
        gbc.writeMem(0x78df, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4c6a);
        EXPECT(gbc.pc(), 0x78e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01D1
        gbc.setState(0x5abb, 0x2cdd, 0xd6b0, 0x53cd, 0x3008, 0xcd3d, 0x1, 0x1);
        gbc.writeMem(0x5abb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2cdd);
        EXPECT(gbc.pc(), 0x5abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01D2
        gbc.setState(0x9c2f, 0x14d1, 0x7e0, 0xe7a5, 0x17d6, 0x2c86, 0x0, 0x1);
        gbc.writeMem(0x9c2f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x14d1);
        EXPECT(gbc.pc(), 0x9c31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c2f), 0xcb);
        EXPECT(gbc.readMem(0x9c30), 0x4a);
        // CB 4A 01D3
        gbc.setState(0xb5e9, 0x214d, 0xe390, 0x54b0, 0xa774, 0x402a, 0x1, 0x0);
        gbc.writeMem(0xb5e9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x214d);
        EXPECT(gbc.pc(), 0xb5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5e9), 0xcb);
        EXPECT(gbc.readMem(0xb5ea), 0x4a);
        // CB 4A 01D4
        gbc.setState(0x691b, 0x433b, 0xa750, 0x93ce, 0x350f, 0x93d0, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x433b);
        EXPECT(gbc.pc(), 0x691d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01D5
        gbc.setState(0xece, 0x5a37, 0xeed0, 0xffe4, 0xbc10, 0x61d8, 0x1, 0x0);
        gbc.writeMem(0xece, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5a37);
        EXPECT(gbc.pc(), 0xed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01D6
        gbc.setState(0x641a, 0x2ce2, 0x2fd0, 0x3e88, 0x5b1b, 0x9f2c, 0x0, 0x1);
        gbc.writeMem(0x641a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2ce2);
        EXPECT(gbc.pc(), 0x641c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01D7
        gbc.setState(0xb894, 0xc84f, 0xbf50, 0x3058, 0x2859, 0xa909, 0x1, 0x1);
        gbc.writeMem(0xb894, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc84f);
        EXPECT(gbc.pc(), 0xb896);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb894), 0xcb);
        EXPECT(gbc.readMem(0xb895), 0x4a);
        // CB 4A 01D9
        gbc.setState(0x1084, 0x7576, 0xbe10, 0x7f2d, 0x4e3c, 0xc298, 0x1, 0x1);
        gbc.writeMem(0x1084, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7576);
        EXPECT(gbc.pc(), 0x1086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01DA
        gbc.setState(0x6b71, 0x3a33, 0x8270, 0x71d5, 0xece0, 0x70aa, 0x0, 0x1);
        gbc.writeMem(0x6b71, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3a33);
        EXPECT(gbc.pc(), 0x6b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01DB
        gbc.setState(0xe02f, 0x3e14, 0x3c90, 0xe0ec, 0xd602, 0x9829, 0x1, 0x1);
        gbc.writeMem(0xe02f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3e14);
        EXPECT(gbc.pc(), 0xe031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe02f), 0xcb);
        EXPECT(gbc.readMem(0xe030), 0x4a);
        // CB 4A 01DC
        gbc.setState(0x7dcc, 0x3c43, 0x6610, 0x4609, 0x7549, 0x38fb, 0x1, 0x0);
        gbc.writeMem(0x7dcc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3c43);
        EXPECT(gbc.pc(), 0x7dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01DD
        gbc.setState(0x21a9, 0x9f9f, 0xe1d0, 0x469f, 0x4317, 0x486e, 0x1, 0x1);
        gbc.writeMem(0x21a9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9f9f);
        EXPECT(gbc.pc(), 0x21ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01DE
        gbc.setState(0x687e, 0x10, 0xc400, 0x52b, 0x8beb, 0x3ba5, 0x1, 0x0);
        gbc.writeMem(0x687e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x10);
        EXPECT(gbc.pc(), 0x6880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01DF
        gbc.setState(0xc3f, 0xd7ee, 0x53c0, 0x3069, 0x7ec, 0x733c, 0x0, 0x0);
        gbc.writeMem(0xc3f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd7ee);
        EXPECT(gbc.pc(), 0xc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01E0
        gbc.setState(0x330, 0x6424, 0x8140, 0xe782, 0x1f29, 0xf651, 0x0, 0x0);
        gbc.writeMem(0x330, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6424);
        EXPECT(gbc.pc(), 0x332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01E2
        gbc.setState(0x4c6d, 0xd7a9, 0x5270, 0xcdb3, 0xef5b, 0xcb9, 0x1, 0x1);
        gbc.writeMem(0x4c6d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd7a9);
        EXPECT(gbc.pc(), 0x4c6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01E3
        gbc.setState(0x46bc, 0xbd1e, 0x1a0, 0xbffe, 0x25c3, 0x9445, 0x0, 0x0);
        gbc.writeMem(0x46bc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbd1e);
        EXPECT(gbc.pc(), 0x46be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01E4
        gbc.setState(0xe4c4, 0xda2d, 0xd790, 0x43e6, 0x6278, 0xaa41, 0x0, 0x0);
        gbc.writeMem(0xe4c4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xda2d);
        EXPECT(gbc.pc(), 0xe4c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4c4), 0xcb);
        EXPECT(gbc.readMem(0xe4c5), 0x4a);
        // CB 4A 01E5
        gbc.setState(0x567a, 0xcf93, 0xd4e0, 0x830, 0x45b2, 0xb502, 0x0, 0x1);
        gbc.writeMem(0x567a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcf93);
        EXPECT(gbc.pc(), 0x567c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01E6
        gbc.setState(0x34c9, 0xf1da, 0x41c0, 0x90bd, 0x5d8e, 0xa7f2, 0x1, 0x1);
        gbc.writeMem(0x34c9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf1da);
        EXPECT(gbc.pc(), 0x34cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01E7
        gbc.setState(0xa532, 0xdb18, 0xe7f0, 0x4ea, 0xde04, 0xd370, 0x1, 0x1);
        gbc.writeMem(0xa532, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xdb18);
        EXPECT(gbc.pc(), 0xa534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa532), 0xcb);
        EXPECT(gbc.readMem(0xa533), 0x4a);
        // CB 4A 01E9
        gbc.setState(0xe4f5, 0x807, 0x80e0, 0x8492, 0x344a, 0x3846, 0x0, 0x0);
        gbc.writeMem(0xe4f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x807);
        EXPECT(gbc.pc(), 0xe4f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f5), 0xcb);
        EXPECT(gbc.readMem(0xe4f6), 0x4a);
        // CB 4A 01EA
        gbc.setState(0x2b7c, 0x42c9, 0x7c80, 0x769c, 0xb58d, 0xa561, 0x0, 0x0);
        gbc.writeMem(0x2b7c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x42c9);
        EXPECT(gbc.pc(), 0x2b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01EB
        gbc.setState(0x5e7b, 0xceb7, 0x8d70, 0x5326, 0x966c, 0xbe16, 0x1, 0x0);
        gbc.writeMem(0x5e7b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xceb7);
        EXPECT(gbc.pc(), 0x5e7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01EC
        gbc.setState(0xe08e, 0xc4be, 0xf280, 0xf604, 0x1cc1, 0x9033, 0x1, 0x0);
        gbc.writeMem(0xe08e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc4be);
        EXPECT(gbc.pc(), 0xe090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe08e), 0xcb);
        EXPECT(gbc.readMem(0xe08f), 0x4a);
        // CB 4A 01ED
        gbc.setState(0x4a00, 0x3352, 0x3ac0, 0xd2b0, 0x871c, 0x980b, 0x0, 0x0);
        gbc.writeMem(0x4a00, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3352);
        EXPECT(gbc.pc(), 0x4a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01EE
        gbc.setState(0xe0af, 0x949b, 0x9110, 0xe4d9, 0xc133, 0xe050, 0x0, 0x1);
        gbc.writeMem(0xe0af, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x949b);
        EXPECT(gbc.pc(), 0xe0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0af), 0xcb);
        EXPECT(gbc.readMem(0xe0b0), 0x4a);
        // CB 4A 01F0
        gbc.setState(0x922, 0x8b58, 0x8e40, 0xd7f, 0x5ade, 0xd0fd, 0x0, 0x1);
        gbc.writeMem(0x922, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8b58);
        EXPECT(gbc.pc(), 0x924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F1
        gbc.setState(0x21fd, 0xc94f, 0xcc00, 0x6bb6, 0x53d8, 0xdc62, 0x0, 0x1);
        gbc.writeMem(0x21fd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc94f);
        EXPECT(gbc.pc(), 0x21ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F2
        gbc.setState(0xb6f5, 0x74ac, 0xfc50, 0x7a7a, 0xd0c9, 0x77d2, 0x1, 0x0);
        gbc.writeMem(0xb6f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x74ac);
        EXPECT(gbc.pc(), 0xb6f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f5), 0xcb);
        EXPECT(gbc.readMem(0xb6f6), 0x4a);
        // CB 4A 01F3
        gbc.setState(0x5f96, 0x1430, 0x7c60, 0xb305, 0x450c, 0x6a63, 0x0, 0x1);
        gbc.writeMem(0x5f96, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1430);
        EXPECT(gbc.pc(), 0x5f98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F4
        gbc.setState(0x9b9, 0xa5db, 0xe3c0, 0xc611, 0xeaee, 0x6e44, 0x1, 0x0);
        gbc.writeMem(0x9b9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa5db);
        EXPECT(gbc.pc(), 0x9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F5
        gbc.setState(0x35ab, 0x17e1, 0x2910, 0xa002, 0xd552, 0xa988, 0x0, 0x0);
        gbc.writeMem(0x35ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x17e1);
        EXPECT(gbc.pc(), 0x35ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 01F6
        gbc.setState(0x17ed, 0xada3, 0x1a40, 0x87a3, 0x6f58, 0xfdf7, 0x0, 0x1);
        gbc.writeMem(0x17ed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xada3);
        EXPECT(gbc.pc(), 0x17ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F7
        gbc.setState(0x7cb, 0x14a4, 0x8300, 0x9d44, 0xb47e, 0x1b7c, 0x1, 0x0);
        gbc.writeMem(0x7cb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x14a4);
        EXPECT(gbc.pc(), 0x7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01F8
        gbc.setState(0xc960, 0xb23c, 0xac10, 0xd748, 0x95d1, 0xe61, 0x1, 0x1);
        gbc.writeMem(0xc960, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xb23c);
        EXPECT(gbc.pc(), 0xc962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc960), 0xcb);
        EXPECT(gbc.readMem(0xc961), 0x4a);
        // CB 4A 01F9
        gbc.setState(0xa065, 0x5723, 0x7ab0, 0x9086, 0x90c3, 0xdc94, 0x1, 0x1);
        gbc.writeMem(0xa065, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5723);
        EXPECT(gbc.pc(), 0xa067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa065), 0xcb);
        EXPECT(gbc.readMem(0xa066), 0x4a);
        // CB 4A 01FA
        gbc.setState(0x57c6, 0x485f, 0x6680, 0x4788, 0xd54e, 0x4b00, 0x1, 0x0);
        gbc.writeMem(0x57c6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x485f);
        EXPECT(gbc.pc(), 0x57c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 01FB
        gbc.setState(0xdad2, 0x653f, 0xe440, 0x3214, 0x75f3, 0x5c85, 0x0, 0x1);
        gbc.writeMem(0xdad2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x653f);
        EXPECT(gbc.pc(), 0xdad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad2), 0xcb);
        EXPECT(gbc.readMem(0xdad3), 0x4a);
        // CB 4A 01FC
        gbc.setState(0xc380, 0xbb12, 0x4e00, 0xe659, 0xed65, 0xdd18, 0x0, 0x1);
        gbc.writeMem(0xc380, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xbb12);
        EXPECT(gbc.pc(), 0xc382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc380), 0xcb);
        EXPECT(gbc.readMem(0xc381), 0x4a);
        // CB 4A 01FD
        gbc.setState(0x9826, 0xdfc6, 0xe980, 0x3ee0, 0x8c8, 0xc71b, 0x0, 0x1);
        gbc.writeMem(0x9826, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdfc6);
        EXPECT(gbc.pc(), 0x9828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9826), 0xcb);
        EXPECT(gbc.readMem(0x9827), 0x4a);
        // CB 4A 01FE
        gbc.setState(0xc4cb, 0xde2, 0x5520, 0xdfd1, 0x2ac0, 0x1c42, 0x0, 0x1);
        gbc.writeMem(0xc4cb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xde2);
        EXPECT(gbc.pc(), 0xc4cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cb), 0xcb);
        EXPECT(gbc.readMem(0xc4cc), 0x4a);
        // CB 4A 01FF
        gbc.setState(0xec3c, 0x9fa4, 0x6050, 0xc34d, 0x91f6, 0xc21f, 0x1, 0x0);
        gbc.writeMem(0xec3c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9fa4);
        EXPECT(gbc.pc(), 0xec3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec3c), 0xcb);
        EXPECT(gbc.readMem(0xec3d), 0x4a);
        // CB 4A 0200
        gbc.setState(0x6f66, 0x2038, 0x1be0, 0x65ef, 0x211f, 0x4e7d, 0x0, 0x1);
        gbc.writeMem(0x6f66, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2038);
        EXPECT(gbc.pc(), 0x6f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0201
        gbc.setState(0x606e, 0x7151, 0x8d80, 0x27d2, 0xe244, 0xa71e, 0x0, 0x1);
        gbc.writeMem(0x606e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7151);
        EXPECT(gbc.pc(), 0x6070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0202
        gbc.setState(0x4f52, 0xe7e5, 0x21f0, 0x835e, 0xbe32, 0x2843, 0x0, 0x1);
        gbc.writeMem(0x4f52, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe7e5);
        EXPECT(gbc.pc(), 0x4f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0203
        gbc.setState(0x79c8, 0x129d, 0x82d0, 0xbe13, 0x145c, 0x7a58, 0x0, 0x0);
        gbc.writeMem(0x79c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x129d);
        EXPECT(gbc.pc(), 0x79ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0204
        gbc.setState(0x8a35, 0x8433, 0x2d00, 0x596f, 0x50a8, 0xfb8a, 0x0, 0x0);
        gbc.writeMem(0x8a35, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8433);
        EXPECT(gbc.pc(), 0x8a37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a35), 0xcb);
        EXPECT(gbc.readMem(0x8a36), 0x4a);
        // CB 4A 0205
        gbc.setState(0x209b, 0x90bb, 0xa9a0, 0x7e27, 0x147a, 0xfe7c, 0x1, 0x0);
        gbc.writeMem(0x209b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x90bb);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0206
        gbc.setState(0x2727, 0x7d42, 0x6ad0, 0x3f6f, 0xf8cb, 0x18fb, 0x0, 0x0);
        gbc.writeMem(0x2727, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7d42);
        EXPECT(gbc.pc(), 0x2729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0207
        gbc.setState(0x780b, 0x8989, 0x52d0, 0xa972, 0x38aa, 0xde66, 0x1, 0x0);
        gbc.writeMem(0x780b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8989);
        EXPECT(gbc.pc(), 0x780d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0208
        gbc.setState(0xe5ec, 0x303d, 0x5670, 0xde2d, 0x5d6a, 0x9892, 0x1, 0x1);
        gbc.writeMem(0xe5ec, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x303d);
        EXPECT(gbc.pc(), 0xe5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5ec), 0xcb);
        EXPECT(gbc.readMem(0xe5ed), 0x4a);
        // CB 4A 0209
        gbc.setState(0x4dfd, 0x1f98, 0xe590, 0x49e8, 0xab1d, 0xd61e, 0x1, 0x1);
        gbc.writeMem(0x4dfd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1f98);
        EXPECT(gbc.pc(), 0x4dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 020A
        gbc.setState(0x8a19, 0x3532, 0x1900, 0x9fb, 0x4398, 0x83ae, 0x0, 0x0);
        gbc.writeMem(0x8a19, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3532);
        EXPECT(gbc.pc(), 0x8a1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a19), 0xcb);
        EXPECT(gbc.readMem(0x8a1a), 0x4a);
        // CB 4A 020B
        gbc.setState(0xdb4e, 0x17c6, 0x2f20, 0x4cd7, 0x8e00, 0xbb02, 0x0, 0x1);
        gbc.writeMem(0xdb4e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x17c6);
        EXPECT(gbc.pc(), 0xdb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb4e), 0xcb);
        EXPECT(gbc.readMem(0xdb4f), 0x4a);
        // CB 4A 020C
        gbc.setState(0x51f1, 0xa59e, 0x9a0, 0x9fc3, 0xf0ec, 0x3123, 0x1, 0x1);
        gbc.writeMem(0x51f1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa59e);
        EXPECT(gbc.pc(), 0x51f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 020D
        gbc.setState(0xd1d, 0x831c, 0x5a0, 0x83f8, 0x67e0, 0xd865, 0x0, 0x1);
        gbc.writeMem(0xd1d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x831c);
        EXPECT(gbc.pc(), 0xd1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 020E
        gbc.setState(0x75c0, 0x80f8, 0x5d80, 0x51e6, 0xec7b, 0xb882, 0x0, 0x1);
        gbc.writeMem(0x75c0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x80f8);
        EXPECT(gbc.pc(), 0x75c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 020F
        gbc.setState(0x7385, 0x2c42, 0x1da0, 0xf44f, 0x75c9, 0x3428, 0x1, 0x1);
        gbc.writeMem(0x7385, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2c42);
        EXPECT(gbc.pc(), 0x7387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0210
        gbc.setState(0xd72e, 0x668b, 0xebc0, 0xaee9, 0x9b99, 0x17dd, 0x0, 0x1);
        gbc.writeMem(0xd72e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x668b);
        EXPECT(gbc.pc(), 0xd730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd72e), 0xcb);
        EXPECT(gbc.readMem(0xd72f), 0x4a);
        // CB 4A 0211
        gbc.setState(0xc660, 0x7699, 0x88f0, 0x8f50, 0xf77b, 0x3934, 0x1, 0x1);
        gbc.writeMem(0xc660, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7699);
        EXPECT(gbc.pc(), 0xc662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc660), 0xcb);
        EXPECT(gbc.readMem(0xc661), 0x4a);
        // CB 4A 0212
        gbc.setState(0x5477, 0x5a12, 0xa0c0, 0x37aa, 0x4bda, 0xe69c, 0x1, 0x0);
        gbc.writeMem(0x5477, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5a12);
        EXPECT(gbc.pc(), 0x5479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0214
        gbc.setState(0x8589, 0xd95a, 0xb660, 0x9893, 0x1a44, 0x34c6, 0x0, 0x1);
        gbc.writeMem(0x8589, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd95a);
        EXPECT(gbc.pc(), 0x858b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8589), 0xcb);
        EXPECT(gbc.readMem(0x858a), 0x4a);
        // CB 4A 0215
        gbc.setState(0x8549, 0x4dbf, 0x4a30, 0xad46, 0x797, 0xfb67, 0x1, 0x1);
        gbc.writeMem(0x8549, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4dbf);
        EXPECT(gbc.pc(), 0x854b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8549), 0xcb);
        EXPECT(gbc.readMem(0x854a), 0x4a);
        // CB 4A 0216
        gbc.setState(0x8fed, 0xb6c, 0xa5b0, 0x7f5c, 0xff70, 0x36ca, 0x1, 0x1);
        gbc.writeMem(0x8fed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb6c);
        EXPECT(gbc.pc(), 0x8fef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fed), 0xcb);
        EXPECT(gbc.readMem(0x8fee), 0x4a);
        // CB 4A 0217
        gbc.setState(0x8a94, 0xc839, 0x5fe0, 0xc2df, 0xf9c, 0x1f1, 0x1, 0x1);
        gbc.writeMem(0x8a94, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc839);
        EXPECT(gbc.pc(), 0x8a96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a94), 0xcb);
        EXPECT(gbc.readMem(0x8a95), 0x4a);
        // CB 4A 0218
        gbc.setState(0x1554, 0x3473, 0xc130, 0x2998, 0x4d38, 0xf7d, 0x0, 0x1);
        gbc.writeMem(0x1554, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3473);
        EXPECT(gbc.pc(), 0x1556);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0219
        gbc.setState(0x2243, 0x7d10, 0xcc30, 0x5292, 0x977b, 0xa4d4, 0x0, 0x0);
        gbc.writeMem(0x2243, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7d10);
        EXPECT(gbc.pc(), 0x2245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 021A
        gbc.setState(0x7a9b, 0xb333, 0xc2d0, 0xc7b4, 0xa709, 0xfba4, 0x0, 0x0);
        gbc.writeMem(0x7a9b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb333);
        EXPECT(gbc.pc(), 0x7a9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 021B
        gbc.setState(0x6f5d, 0xe267, 0x1b80, 0xafde, 0x680f, 0x1161, 0x0, 0x1);
        gbc.writeMem(0x6f5d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe267);
        EXPECT(gbc.pc(), 0x6f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 021C
        gbc.setState(0x7fbf, 0xc2ab, 0xdd90, 0xb136, 0x47b0, 0xe667, 0x1, 0x0);
        gbc.writeMem(0x7fbf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xc2ab);
        EXPECT(gbc.pc(), 0x7fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 021D
        gbc.setState(0x7085, 0x3630, 0x8b70, 0x9d4f, 0x6dcc, 0x13ed, 0x1, 0x1);
        gbc.writeMem(0x7085, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3630);
        EXPECT(gbc.pc(), 0x7087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 021E
        gbc.setState(0x4b19, 0x9e30, 0xa370, 0x5a1a, 0x35a7, 0xc437, 0x1, 0x0);
        gbc.writeMem(0x4b19, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9e30);
        EXPECT(gbc.pc(), 0x4b1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 021F
        gbc.setState(0xcb38, 0xe7a2, 0x25a0, 0xc9dd, 0x43d3, 0xc727, 0x0, 0x1);
        gbc.writeMem(0xcb38, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe7a2);
        EXPECT(gbc.pc(), 0xcb3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb38), 0xcb);
        EXPECT(gbc.readMem(0xcb39), 0x4a);
        // CB 4A 0220
        gbc.setState(0x3fc, 0x525d, 0xe5d0, 0x5706, 0x9e3, 0xd524, 0x1, 0x1);
        gbc.writeMem(0x3fc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x525d);
        EXPECT(gbc.pc(), 0x3fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0221
        gbc.setState(0xc1d6, 0x45a7, 0x1870, 0x31c0, 0x5db, 0xa274, 0x1, 0x1);
        gbc.writeMem(0xc1d6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x45a7);
        EXPECT(gbc.pc(), 0xc1d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d6), 0xcb);
        EXPECT(gbc.readMem(0xc1d7), 0x4a);
        // CB 4A 0222
        gbc.setState(0x1a02, 0x31a2, 0xc7a0, 0xc672, 0x6df3, 0xcc67, 0x1, 0x0);
        gbc.writeMem(0x1a02, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x31a2);
        EXPECT(gbc.pc(), 0x1a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0223
        gbc.setState(0x2211, 0x3176, 0x44a0, 0xcc2c, 0x4a01, 0x82cb, 0x0, 0x0);
        gbc.writeMem(0x2211, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3176);
        EXPECT(gbc.pc(), 0x2213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0224
        gbc.setState(0x3c37, 0xf4c2, 0xcd10, 0xff9d, 0x2c8a, 0x8ea6, 0x0, 0x0);
        gbc.writeMem(0x3c37, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf4c2);
        EXPECT(gbc.pc(), 0x3c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0225
        gbc.setState(0x6d45, 0x9d, 0x2720, 0xa9a, 0x63ae, 0x62ef, 0x0, 0x0);
        gbc.writeMem(0x6d45, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9d);
        EXPECT(gbc.pc(), 0x6d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0227
        gbc.setState(0x4e9f, 0x28b0, 0x2bd0, 0x637d, 0x6e88, 0xaac5, 0x1, 0x1);
        gbc.writeMem(0x4e9f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x28b0);
        EXPECT(gbc.pc(), 0x4ea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0228
        gbc.setState(0x20fa, 0xe039, 0xd30, 0xc87, 0xa20b, 0x5cab, 0x0, 0x0);
        gbc.writeMem(0x20fa, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe039);
        EXPECT(gbc.pc(), 0x20fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0229
        gbc.setState(0xc7f1, 0x6f31, 0xa3f0, 0x469b, 0x8832, 0xb523, 0x0, 0x1);
        gbc.writeMem(0xc7f1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6f31);
        EXPECT(gbc.pc(), 0xc7f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7f1), 0xcb);
        EXPECT(gbc.readMem(0xc7f2), 0x4a);
        // CB 4A 022A
        gbc.setState(0x2aca, 0x18a, 0xf9f0, 0xd16, 0xfa7d, 0x82d3, 0x1, 0x1);
        gbc.writeMem(0x2aca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x18a);
        EXPECT(gbc.pc(), 0x2acc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 022B
        gbc.setState(0xed25, 0x231, 0x770, 0x1b7e, 0xbec4, 0xe1ba, 0x1, 0x1);
        gbc.writeMem(0xed25, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x231);
        EXPECT(gbc.pc(), 0xed27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed25), 0xcb);
        EXPECT(gbc.readMem(0xed26), 0x4a);
        // CB 4A 022D
        gbc.setState(0x6e3f, 0x33a9, 0xedb0, 0x1dd, 0xb8ea, 0x77cd, 0x1, 0x1);
        gbc.writeMem(0x6e3f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x33a9);
        EXPECT(gbc.pc(), 0x6e41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 022E
        gbc.setState(0x5102, 0xe8bb, 0xe4b0, 0x2341, 0xbb73, 0x88b, 0x0, 0x1);
        gbc.writeMem(0x5102, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe8bb);
        EXPECT(gbc.pc(), 0x5104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 022F
        gbc.setState(0x2c9, 0xf8a, 0x6310, 0x880c, 0x5fb8, 0x8e5d, 0x1, 0x0);
        gbc.writeMem(0x2c9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf8a);
        EXPECT(gbc.pc(), 0x2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0230
        gbc.setState(0xc2c2, 0x4fd8, 0x4790, 0x8b4, 0x1d3c, 0x5f9a, 0x0, 0x0);
        gbc.writeMem(0xc2c2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4fd8);
        EXPECT(gbc.pc(), 0xc2c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c2), 0xcb);
        EXPECT(gbc.readMem(0xc2c3), 0x4a);
        // CB 4A 0231
        gbc.setState(0x6865, 0xf241, 0x53b0, 0x3cd8, 0x51ab, 0xeebf, 0x0, 0x0);
        gbc.writeMem(0x6865, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf241);
        EXPECT(gbc.pc(), 0x6867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0232
        gbc.setState(0xe003, 0xc452, 0x1040, 0x18e5, 0xcd50, 0xdb69, 0x0, 0x0);
        gbc.writeMem(0xe003, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc452);
        EXPECT(gbc.pc(), 0xe005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe003), 0xcb);
        EXPECT(gbc.readMem(0xe004), 0x4a);
        // CB 4A 0233
        gbc.setState(0xd78e, 0x3fc7, 0xef30, 0x28a6, 0x22a2, 0xdd18, 0x0, 0x1);
        gbc.writeMem(0xd78e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3fc7);
        EXPECT(gbc.pc(), 0xd790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd78e), 0xcb);
        EXPECT(gbc.readMem(0xd78f), 0x4a);
        // CB 4A 0234
        gbc.setState(0x256f, 0x57c4, 0x5d40, 0x5ce8, 0xc7b5, 0x23ec, 0x0, 0x0);
        gbc.writeMem(0x256f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x57c4);
        EXPECT(gbc.pc(), 0x2571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0235
        gbc.setState(0x2a74, 0x376e, 0xf910, 0xc449, 0xadb2, 0xe948, 0x1, 0x0);
        gbc.writeMem(0x2a74, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x376e);
        EXPECT(gbc.pc(), 0x2a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0236
        gbc.setState(0x7474, 0x2c23, 0x5380, 0x276, 0x3136, 0x3a27, 0x0, 0x1);
        gbc.writeMem(0x7474, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x2c23);
        EXPECT(gbc.pc(), 0x7476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0237
        gbc.setState(0x22eb, 0x15a5, 0x2ec0, 0xd8e7, 0x24e7, 0x5ac1, 0x1, 0x1);
        gbc.writeMem(0x22eb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x15a5);
        EXPECT(gbc.pc(), 0x22ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0238
        gbc.setState(0x4c66, 0x8c16, 0x72a0, 0xf89d, 0xb684, 0xb52c, 0x1, 0x1);
        gbc.writeMem(0x4c66, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8c16);
        EXPECT(gbc.pc(), 0x4c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0239
        gbc.setState(0xd41e, 0x823f, 0xf020, 0xa492, 0xfd07, 0xd08b, 0x1, 0x1);
        gbc.writeMem(0xd41e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x823f);
        EXPECT(gbc.pc(), 0xd420);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41e), 0xcb);
        EXPECT(gbc.readMem(0xd41f), 0x4a);
        // CB 4A 023A
        gbc.setState(0xb7e9, 0x361b, 0x9560, 0xebe9, 0x8360, 0xde5c, 0x1, 0x0);
        gbc.writeMem(0xb7e9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x361b);
        EXPECT(gbc.pc(), 0xb7eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e9), 0xcb);
        EXPECT(gbc.readMem(0xb7ea), 0x4a);
        // CB 4A 023B
        gbc.setState(0x69c4, 0xd59e, 0xd510, 0x4e88, 0x5cdb, 0x813a, 0x1, 0x0);
        gbc.writeMem(0x69c4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd59e);
        EXPECT(gbc.pc(), 0x69c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 023C
        gbc.setState(0x72c2, 0x929c, 0xf9c0, 0x1a52, 0x3a7d, 0x3dfb, 0x1, 0x1);
        gbc.writeMem(0x72c2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x929c);
        EXPECT(gbc.pc(), 0x72c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 023D
        gbc.setState(0x6eca, 0x7677, 0x5dc0, 0x6778, 0xf0cb, 0x9a2d, 0x0, 0x1);
        gbc.writeMem(0x6eca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7677);
        EXPECT(gbc.pc(), 0x6ecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 023E
        gbc.setState(0xeaed, 0xaca9, 0x3f80, 0x649b, 0xcebd, 0x3eea, 0x0, 0x1);
        gbc.writeMem(0xeaed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xaca9);
        EXPECT(gbc.pc(), 0xeaef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaed), 0xcb);
        EXPECT(gbc.readMem(0xeaee), 0x4a);
        // CB 4A 023F
        gbc.setState(0xafae, 0xc8f4, 0xd3a0, 0xf815, 0x96e4, 0xc84, 0x1, 0x0);
        gbc.writeMem(0xafae, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc8f4);
        EXPECT(gbc.pc(), 0xafb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafae), 0xcb);
        EXPECT(gbc.readMem(0xafaf), 0x4a);
        // CB 4A 0240
        gbc.setState(0x5ea0, 0xa59a, 0xeab0, 0xad3, 0x6ba4, 0x2559, 0x1, 0x1);
        gbc.writeMem(0x5ea0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa59a);
        EXPECT(gbc.pc(), 0x5ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0241
        gbc.setState(0x92dd, 0xba75, 0x3690, 0x53d7, 0xc207, 0x7bb8, 0x1, 0x0);
        gbc.writeMem(0x92dd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xba75);
        EXPECT(gbc.pc(), 0x92df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92dd), 0xcb);
        EXPECT(gbc.readMem(0x92de), 0x4a);
        // CB 4A 0242
        gbc.setState(0xc3af, 0xe9b5, 0xb6c0, 0x3399, 0x88d9, 0xe409, 0x0, 0x0);
        gbc.writeMem(0xc3af, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe9b5);
        EXPECT(gbc.pc(), 0xc3b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3af), 0xcb);
        EXPECT(gbc.readMem(0xc3b0), 0x4a);
        // CB 4A 0243
        gbc.setState(0x3444, 0x8203, 0xbcf0, 0x6c41, 0x2643, 0xe3f0, 0x0, 0x0);
        gbc.writeMem(0x3444, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8203);
        EXPECT(gbc.pc(), 0x3446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0244
        gbc.setState(0x8729, 0x1e3b, 0x2dc0, 0xbcc7, 0xb58d, 0xe5f9, 0x1, 0x1);
        gbc.writeMem(0x8729, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1e3b);
        EXPECT(gbc.pc(), 0x872b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8729), 0xcb);
        EXPECT(gbc.readMem(0x872a), 0x4a);
        // CB 4A 0245
        gbc.setState(0xc095, 0x529f, 0xe440, 0x8b5a, 0x9871, 0x3c47, 0x0, 0x0);
        gbc.writeMem(0xc095, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x529f);
        EXPECT(gbc.pc(), 0xc097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc095), 0xcb);
        EXPECT(gbc.readMem(0xc096), 0x4a);
        // CB 4A 0246
        gbc.setState(0xc021, 0x7565, 0x6110, 0x284c, 0xfcb5, 0x3fa5, 0x0, 0x1);
        gbc.writeMem(0xc021, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7565);
        EXPECT(gbc.pc(), 0xc023);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc021), 0xcb);
        EXPECT(gbc.readMem(0xc022), 0x4a);
        // CB 4A 0247
        gbc.setState(0x9cfc, 0x3228, 0xf070, 0x1122, 0x4cc2, 0xcc7f, 0x1, 0x1);
        gbc.writeMem(0x9cfc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3228);
        EXPECT(gbc.pc(), 0x9cfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cfc), 0xcb);
        EXPECT(gbc.readMem(0x9cfd), 0x4a);
        // CB 4A 0248
        gbc.setState(0xdbd2, 0x193d, 0xc1f0, 0x1108, 0x751a, 0x93a, 0x1, 0x0);
        gbc.writeMem(0xdbd2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x193d);
        EXPECT(gbc.pc(), 0xdbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd2), 0xcb);
        EXPECT(gbc.readMem(0xdbd3), 0x4a);
        // CB 4A 0249
        gbc.setState(0xcddd, 0xe475, 0xa440, 0x2627, 0x14b3, 0xa608, 0x1, 0x0);
        gbc.writeMem(0xcddd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe475);
        EXPECT(gbc.pc(), 0xcddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcddd), 0xcb);
        EXPECT(gbc.readMem(0xcdde), 0x4a);
        // CB 4A 024A
        gbc.setState(0x9069, 0x39a3, 0x8ff0, 0x9f0d, 0xfbe4, 0x7586, 0x0, 0x0);
        gbc.writeMem(0x9069, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x39a3);
        EXPECT(gbc.pc(), 0x906b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9069), 0xcb);
        EXPECT(gbc.readMem(0x906a), 0x4a);
        // CB 4A 024B
        gbc.setState(0x863b, 0xca5a, 0xd2d0, 0x5dae, 0x6a77, 0x7e5e, 0x0, 0x0);
        gbc.writeMem(0x863b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xca5a);
        EXPECT(gbc.pc(), 0x863d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863b), 0xcb);
        EXPECT(gbc.readMem(0x863c), 0x4a);
        // CB 4A 024C
        gbc.setState(0x6e4a, 0x946f, 0x9ae0, 0x4bbb, 0x44e1, 0x5217, 0x0, 0x1);
        gbc.writeMem(0x6e4a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x946f);
        EXPECT(gbc.pc(), 0x6e4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 024D
        gbc.setState(0xa37e, 0x1bae, 0xae60, 0x2654, 0x71fc, 0x61de, 0x0, 0x0);
        gbc.writeMem(0xa37e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1bae);
        EXPECT(gbc.pc(), 0xa380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa37e), 0xcb);
        EXPECT(gbc.readMem(0xa37f), 0x4a);
        // CB 4A 024E
        gbc.setState(0xa322, 0xf470, 0x240, 0xc39f, 0x2b8c, 0x15a, 0x1, 0x0);
        gbc.writeMem(0xa322, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf470);
        EXPECT(gbc.pc(), 0xa324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa322), 0xcb);
        EXPECT(gbc.readMem(0xa323), 0x4a);
        // CB 4A 024F
        gbc.setState(0x1294, 0xf7c8, 0x4720, 0x5311, 0xbc49, 0xab87, 0x1, 0x0);
        gbc.writeMem(0x1294, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf7c8);
        EXPECT(gbc.pc(), 0x1296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0250
        gbc.setState(0x3675, 0x25f0, 0xe9d0, 0x91e4, 0xff4, 0xa073, 0x0, 0x1);
        gbc.writeMem(0x3675, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x25f0);
        EXPECT(gbc.pc(), 0x3677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0251
        gbc.setState(0x104c, 0x306b, 0x5e40, 0xa40c, 0x495d, 0x3259, 0x1, 0x1);
        gbc.writeMem(0x104c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x306b);
        EXPECT(gbc.pc(), 0x104e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0252
        gbc.setState(0x4243, 0x66d9, 0x3b0, 0x8942, 0x22b0, 0xba7d, 0x0, 0x1);
        gbc.writeMem(0x4243, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x66d9);
        EXPECT(gbc.pc(), 0x4245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0253
        gbc.setState(0x2357, 0xc541, 0x4b00, 0x8925, 0x8e4a, 0x4acb, 0x0, 0x0);
        gbc.writeMem(0x2357, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc541);
        EXPECT(gbc.pc(), 0x2359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0254
        gbc.setState(0x714a, 0x5a42, 0xd9e0, 0x61aa, 0x4eb2, 0xc6c9, 0x1, 0x1);
        gbc.writeMem(0x714a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5a42);
        EXPECT(gbc.pc(), 0x714c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0255
        gbc.setState(0x2958, 0x1392, 0xa5d0, 0x5ce7, 0xa70a, 0xe8cb, 0x1, 0x1);
        gbc.writeMem(0x2958, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1392);
        EXPECT(gbc.pc(), 0x295a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0256
        gbc.setState(0x75e1, 0x47b5, 0x64e0, 0x6c38, 0x38a0, 0xcaa7, 0x0, 0x1);
        gbc.writeMem(0x75e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x47b5);
        EXPECT(gbc.pc(), 0x75e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0257
        gbc.setState(0x91ed, 0x5452, 0x86f0, 0x6b9f, 0x1a40, 0x3a68, 0x1, 0x0);
        gbc.writeMem(0x91ed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5452);
        EXPECT(gbc.pc(), 0x91ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ed), 0xcb);
        EXPECT(gbc.readMem(0x91ee), 0x4a);
        // CB 4A 0258
        gbc.setState(0x1fe7, 0x7dbd, 0x9380, 0x63be, 0xfd70, 0x70fc, 0x1, 0x1);
        gbc.writeMem(0x1fe7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7dbd);
        EXPECT(gbc.pc(), 0x1fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0259
        gbc.setState(0x4d8d, 0xbcb7, 0xc250, 0xcba2, 0x764a, 0x8b26, 0x0, 0x0);
        gbc.writeMem(0x4d8d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbcb7);
        EXPECT(gbc.pc(), 0x4d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 025A
        gbc.setState(0xa121, 0x9985, 0xdfd0, 0x7634, 0x2c59, 0x9a32, 0x0, 0x1);
        gbc.writeMem(0xa121, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9985);
        EXPECT(gbc.pc(), 0xa123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa121), 0xcb);
        EXPECT(gbc.readMem(0xa122), 0x4a);
        // CB 4A 025B
        gbc.setState(0x258e, 0x623c, 0x41a0, 0x8430, 0x8092, 0xf4d5, 0x0, 0x1);
        gbc.writeMem(0x258e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x623c);
        EXPECT(gbc.pc(), 0x2590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 025C
        gbc.setState(0x4834, 0xe07b, 0xfb40, 0xaf5c, 0x3d45, 0x47b3, 0x1, 0x0);
        gbc.writeMem(0x4834, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe07b);
        EXPECT(gbc.pc(), 0x4836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 025D
        gbc.setState(0x23a5, 0xf6c5, 0xa390, 0x5844, 0xc419, 0x7079, 0x0, 0x0);
        gbc.writeMem(0x23a5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf6c5);
        EXPECT(gbc.pc(), 0x23a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 025E
        gbc.setState(0x6e22, 0x1474, 0xd490, 0x645e, 0xef8e, 0x2a51, 0x0, 0x0);
        gbc.writeMem(0x6e22, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1474);
        EXPECT(gbc.pc(), 0x6e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 025F
        gbc.setState(0xa093, 0xce32, 0xcb00, 0x480c, 0xdea6, 0x85dd, 0x0, 0x1);
        gbc.writeMem(0xa093, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xce32);
        EXPECT(gbc.pc(), 0xa095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa093), 0xcb);
        EXPECT(gbc.readMem(0xa094), 0x4a);
        // CB 4A 0260
        gbc.setState(0xa705, 0x44df, 0x2e30, 0x424, 0x482e, 0x7047, 0x0, 0x1);
        gbc.writeMem(0xa705, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x44df);
        EXPECT(gbc.pc(), 0xa707);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa705), 0xcb);
        EXPECT(gbc.readMem(0xa706), 0x4a);
        // CB 4A 0261
        gbc.setState(0x16b3, 0x4030, 0xad30, 0x3090, 0xbd29, 0x930e, 0x1, 0x1);
        gbc.writeMem(0x16b3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x4030);
        EXPECT(gbc.pc(), 0x16b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0262
        gbc.setState(0x66bc, 0x1e13, 0x1d0, 0xc7e1, 0xe41f, 0xebd2, 0x1, 0x0);
        gbc.writeMem(0x66bc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1e13);
        EXPECT(gbc.pc(), 0x66be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0263
        gbc.setState(0x6448, 0xb723, 0xa740, 0xdc5a, 0x51de, 0x67bc, 0x0, 0x0);
        gbc.writeMem(0x6448, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb723);
        EXPECT(gbc.pc(), 0x644a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0264
        gbc.setState(0xbd57, 0x1fd3, 0xd140, 0xab32, 0x3e26, 0x5d40, 0x0, 0x1);
        gbc.writeMem(0xbd57, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1fd3);
        EXPECT(gbc.pc(), 0xbd59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd57), 0xcb);
        EXPECT(gbc.readMem(0xbd58), 0x4a);
        // CB 4A 0265
        gbc.setState(0x2dfe, 0x9f56, 0xcf10, 0x301c, 0x262a, 0x148c, 0x0, 0x0);
        gbc.writeMem(0x2dfe, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9f56);
        EXPECT(gbc.pc(), 0x2e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0266
        gbc.setState(0x7551, 0x60ed, 0x8950, 0x75f6, 0x4a65, 0xc497, 0x1, 0x0);
        gbc.writeMem(0x7551, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x60ed);
        EXPECT(gbc.pc(), 0x7553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0267
        gbc.setState(0xa78d, 0x75d8, 0x53a0, 0xb5db, 0xf6fe, 0xeb81, 0x1, 0x1);
        gbc.writeMem(0xa78d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x75d8);
        EXPECT(gbc.pc(), 0xa78f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa78d), 0xcb);
        EXPECT(gbc.readMem(0xa78e), 0x4a);
        // CB 4A 0268
        gbc.setState(0xc48d, 0x9701, 0xad30, 0x6f7b, 0x3c8, 0x47c1, 0x0, 0x0);
        gbc.writeMem(0xc48d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9701);
        EXPECT(gbc.pc(), 0xc48f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48d), 0xcb);
        EXPECT(gbc.readMem(0xc48e), 0x4a);
        // CB 4A 0269
        gbc.setState(0xe7f2, 0x2e43, 0x5c20, 0x181a, 0x2437, 0x75b1, 0x1, 0x0);
        gbc.writeMem(0xe7f2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2e43);
        EXPECT(gbc.pc(), 0xe7f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f2), 0xcb);
        EXPECT(gbc.readMem(0xe7f3), 0x4a);
        // CB 4A 026A
        gbc.setState(0x99d4, 0x3bd6, 0x2470, 0xd5c1, 0x4a, 0xe262, 0x0, 0x1);
        gbc.writeMem(0x99d4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3bd6);
        EXPECT(gbc.pc(), 0x99d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d4), 0xcb);
        EXPECT(gbc.readMem(0x99d5), 0x4a);
        // CB 4A 026B
        gbc.setState(0x631a, 0x9a18, 0x3b70, 0xdb40, 0x26ce, 0xa877, 0x1, 0x0);
        gbc.writeMem(0x631a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9a18);
        EXPECT(gbc.pc(), 0x631c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 026C
        gbc.setState(0xbfc3, 0xc09, 0xb360, 0x2d21, 0x9b0e, 0x479d, 0x1, 0x1);
        gbc.writeMem(0xbfc3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc09);
        EXPECT(gbc.pc(), 0xbfc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc3), 0xcb);
        EXPECT(gbc.readMem(0xbfc4), 0x4a);
        // CB 4A 026D
        gbc.setState(0xbba1, 0x5577, 0x28a0, 0xe38c, 0xaf01, 0xd7af, 0x1, 0x0);
        gbc.writeMem(0xbba1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5577);
        EXPECT(gbc.pc(), 0xbba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbba1), 0xcb);
        EXPECT(gbc.readMem(0xbba2), 0x4a);
        // CB 4A 026E
        gbc.setState(0xda29, 0xd603, 0xa700, 0xf05b, 0x7222, 0x64d9, 0x1, 0x0);
        gbc.writeMem(0xda29, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd603);
        EXPECT(gbc.pc(), 0xda2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda29), 0xcb);
        EXPECT(gbc.readMem(0xda2a), 0x4a);
        // CB 4A 026F
        gbc.setState(0x80c9, 0x84cf, 0x3e60, 0x3308, 0xbc09, 0xffb, 0x0, 0x0);
        gbc.writeMem(0x80c9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x84cf);
        EXPECT(gbc.pc(), 0x80cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c9), 0xcb);
        EXPECT(gbc.readMem(0x80ca), 0x4a);
        // CB 4A 0270
        gbc.setState(0x68e8, 0x483c, 0xb560, 0xcf3c, 0x9054, 0xa777, 0x1, 0x0);
        gbc.writeMem(0x68e8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x483c);
        EXPECT(gbc.pc(), 0x68ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0271
        gbc.setState(0xef07, 0xb1f6, 0x100, 0xf88a, 0x668c, 0xa7b3, 0x1, 0x1);
        gbc.writeMem(0xef07, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb1f6);
        EXPECT(gbc.pc(), 0xef09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef07), 0xcb);
        EXPECT(gbc.readMem(0xef08), 0x4a);
        // CB 4A 0272
        gbc.setState(0x7aa9, 0xe662, 0x8940, 0x2258, 0x3e22, 0xedce, 0x1, 0x1);
        gbc.writeMem(0x7aa9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe662);
        EXPECT(gbc.pc(), 0x7aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0273
        gbc.setState(0x3ac1, 0x895a, 0xf230, 0x8028, 0xb8bb, 0x8152, 0x1, 0x1);
        gbc.writeMem(0x3ac1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x895a);
        EXPECT(gbc.pc(), 0x3ac3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0274
        gbc.setState(0xee81, 0x8065, 0x3dd0, 0x732f, 0xbd1d, 0x9a6e, 0x1, 0x1);
        gbc.writeMem(0xee81, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8065);
        EXPECT(gbc.pc(), 0xee83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee81), 0xcb);
        EXPECT(gbc.readMem(0xee82), 0x4a);
        // CB 4A 0275
        gbc.setState(0xd202, 0x73cd, 0xeb50, 0x6cf7, 0x286c, 0x7578, 0x1, 0x0);
        gbc.writeMem(0xd202, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x73cd);
        EXPECT(gbc.pc(), 0xd204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd202), 0xcb);
        EXPECT(gbc.readMem(0xd203), 0x4a);
        // CB 4A 0276
        gbc.setState(0xeabb, 0xfd70, 0x2d0, 0x681c, 0x64e0, 0x5296, 0x1, 0x1);
        gbc.writeMem(0xeabb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xfd70);
        EXPECT(gbc.pc(), 0xeabd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeabb), 0xcb);
        EXPECT(gbc.readMem(0xeabc), 0x4a);
        // CB 4A 0277
        gbc.setState(0x9bf4, 0xf541, 0x6c70, 0x342, 0x5c9c, 0x792c, 0x0, 0x0);
        gbc.writeMem(0x9bf4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf541);
        EXPECT(gbc.pc(), 0x9bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf4), 0xcb);
        EXPECT(gbc.readMem(0x9bf5), 0x4a);
        // CB 4A 0278
        gbc.setState(0x8c8, 0x17de, 0xa5e0, 0x1a7f, 0x3c3d, 0xcaf0, 0x0, 0x0);
        gbc.writeMem(0x8c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x17de);
        EXPECT(gbc.pc(), 0x8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0279
        gbc.setState(0x337, 0xaa7a, 0x1670, 0x8e3, 0x3b3b, 0x23ad, 0x0, 0x0);
        gbc.writeMem(0x337, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xaa7a);
        EXPECT(gbc.pc(), 0x339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 027A
        gbc.setState(0x34aa, 0x93a3, 0x1a40, 0xb50e, 0x6b6, 0x4d90, 0x0, 0x0);
        gbc.writeMem(0x34aa, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x93a3);
        EXPECT(gbc.pc(), 0x34ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 027B
        gbc.setState(0x1809, 0x853d, 0x2f70, 0x4a6a, 0xf34, 0x9afb, 0x0, 0x0);
        gbc.writeMem(0x1809, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x853d);
        EXPECT(gbc.pc(), 0x180b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 027C
        gbc.setState(0x5d58, 0x855a, 0x7f0, 0x120b, 0x97f1, 0x854b, 0x1, 0x1);
        gbc.writeMem(0x5d58, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x855a);
        EXPECT(gbc.pc(), 0x5d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 027D
        gbc.setState(0x9032, 0xcb9, 0x9130, 0x9e2a, 0x4479, 0x6b57, 0x1, 0x1);
        gbc.writeMem(0x9032, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xcb9);
        EXPECT(gbc.pc(), 0x9034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9032), 0xcb);
        EXPECT(gbc.readMem(0x9033), 0x4a);
        // CB 4A 027E
        gbc.setState(0xb3f7, 0xf239, 0xfff0, 0x3979, 0xb441, 0xeb53, 0x0, 0x1);
        gbc.writeMem(0xb3f7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf239);
        EXPECT(gbc.pc(), 0xb3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f7), 0xcb);
        EXPECT(gbc.readMem(0xb3f8), 0x4a);
        // CB 4A 027F
        gbc.setState(0xd366, 0xc20b, 0xdea0, 0xd7d1, 0x4cb2, 0xefa2, 0x1, 0x1);
        gbc.writeMem(0xd366, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc20b);
        EXPECT(gbc.pc(), 0xd368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd366), 0xcb);
        EXPECT(gbc.readMem(0xd367), 0x4a);
        // CB 4A 0280
        gbc.setState(0x792e, 0x5003, 0x8060, 0xb75c, 0x911d, 0x4e10, 0x1, 0x0);
        gbc.writeMem(0x792e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5003);
        EXPECT(gbc.pc(), 0x7930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0281
        gbc.setState(0xa309, 0xa662, 0xd140, 0x2fb6, 0xc6ad, 0xd683, 0x0, 0x1);
        gbc.writeMem(0xa309, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa662);
        EXPECT(gbc.pc(), 0xa30b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa309), 0xcb);
        EXPECT(gbc.readMem(0xa30a), 0x4a);
        // CB 4A 0282
        gbc.setState(0xc1de, 0x50e, 0x8620, 0x65d6, 0x2b5d, 0x5d8b, 0x1, 0x1);
        gbc.writeMem(0xc1de, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x50e);
        EXPECT(gbc.pc(), 0xc1e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1de), 0xcb);
        EXPECT(gbc.readMem(0xc1df), 0x4a);
        // CB 4A 0283
        gbc.setState(0xbaa0, 0x8a13, 0xd200, 0x363, 0xa37a, 0x9ebe, 0x0, 0x0);
        gbc.writeMem(0xbaa0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8a13);
        EXPECT(gbc.pc(), 0xbaa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaa0), 0xcb);
        EXPECT(gbc.readMem(0xbaa1), 0x4a);
        // CB 4A 0284
        gbc.setState(0x570b, 0x13b, 0x5ef0, 0xfe28, 0x4e9e, 0x7e9a, 0x0, 0x0);
        gbc.writeMem(0x570b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x13b);
        EXPECT(gbc.pc(), 0x570d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0285
        gbc.setState(0xb08e, 0xacd9, 0x7b00, 0xa683, 0x38d8, 0x574b, 0x0, 0x1);
        gbc.writeMem(0xb08e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xacd9);
        EXPECT(gbc.pc(), 0xb090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb08e), 0xcb);
        EXPECT(gbc.readMem(0xb08f), 0x4a);
        // CB 4A 0286
        gbc.setState(0xa06a, 0x9457, 0x82f0, 0x64e5, 0xa2ce, 0x8b23, 0x1, 0x0);
        gbc.writeMem(0xa06a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9457);
        EXPECT(gbc.pc(), 0xa06c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa06a), 0xcb);
        EXPECT(gbc.readMem(0xa06b), 0x4a);
        // CB 4A 0288
        gbc.setState(0x4dcf, 0x51c6, 0xfff0, 0xcaea, 0x11a0, 0xad2, 0x0, 0x0);
        gbc.writeMem(0x4dcf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x51c6);
        EXPECT(gbc.pc(), 0x4dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 028A
        gbc.setState(0xab6, 0x21b1, 0x2890, 0xc913, 0xd2ad, 0x998, 0x1, 0x0);
        gbc.writeMem(0xab6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x21b1);
        EXPECT(gbc.pc(), 0xab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 028B
        gbc.setState(0x3dc1, 0x8cb4, 0x2200, 0x61b2, 0x6193, 0x685c, 0x0, 0x1);
        gbc.writeMem(0x3dc1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x8cb4);
        EXPECT(gbc.pc(), 0x3dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 028C
        gbc.setState(0x2994, 0x5a5, 0x8e70, 0x45aa, 0xb496, 0x8926, 0x0, 0x0);
        gbc.writeMem(0x2994, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5a5);
        EXPECT(gbc.pc(), 0x2996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 028D
        gbc.setState(0x7d68, 0x6760, 0xe70, 0xa86e, 0xdcd0, 0x2d22, 0x1, 0x1);
        gbc.writeMem(0x7d68, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6760);
        EXPECT(gbc.pc(), 0x7d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 028E
        gbc.setState(0x9634, 0x8d81, 0x3d0, 0x3f77, 0x4ab3, 0x66b8, 0x1, 0x1);
        gbc.writeMem(0x9634, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8d81);
        EXPECT(gbc.pc(), 0x9636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9634), 0xcb);
        EXPECT(gbc.readMem(0x9635), 0x4a);
        // CB 4A 028F
        gbc.setState(0x6722, 0x90de, 0x8b20, 0xf57a, 0x3ee3, 0x788d, 0x1, 0x0);
        gbc.writeMem(0x6722, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x90de);
        EXPECT(gbc.pc(), 0x6724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0290
        gbc.setState(0x80c0, 0x4de4, 0x4ec0, 0x2683, 0x9b53, 0xc217, 0x0, 0x0);
        gbc.writeMem(0x80c0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4de4);
        EXPECT(gbc.pc(), 0x80c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c0), 0xcb);
        EXPECT(gbc.readMem(0x80c1), 0x4a);
        // CB 4A 0291
        gbc.setState(0x5955, 0xc5b2, 0x6b70, 0xae24, 0x4d56, 0x1a25, 0x1, 0x1);
        gbc.writeMem(0x5955, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc5b2);
        EXPECT(gbc.pc(), 0x5957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0292
        gbc.setState(0x7775, 0x7d6b, 0x490, 0xe4a4, 0x33db, 0xa81e, 0x1, 0x0);
        gbc.writeMem(0x7775, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7d6b);
        EXPECT(gbc.pc(), 0x7777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0294
        gbc.setState(0x7891, 0x35d3, 0x8880, 0x6d3, 0x6a5, 0xf90c, 0x0, 0x0);
        gbc.writeMem(0x7891, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x35d3);
        EXPECT(gbc.pc(), 0x7893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0295
        gbc.setState(0x65ab, 0xdb6a, 0xcab0, 0xd154, 0xb9e6, 0x650f, 0x1, 0x1);
        gbc.writeMem(0x65ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xdb6a);
        EXPECT(gbc.pc(), 0x65ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0296
        gbc.setState(0x1990, 0xf6ee, 0x5c20, 0xb479, 0x392c, 0xdbcf, 0x0, 0x1);
        gbc.writeMem(0x1990, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf6ee);
        EXPECT(gbc.pc(), 0x1992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0297
        gbc.setState(0xa086, 0x555c, 0xb290, 0xa62d, 0x7866, 0x25d, 0x0, 0x0);
        gbc.writeMem(0xa086, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x555c);
        EXPECT(gbc.pc(), 0xa088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa086), 0xcb);
        EXPECT(gbc.readMem(0xa087), 0x4a);
        // CB 4A 0298
        gbc.setState(0xcf67, 0x5ffd, 0xd3e0, 0xf2b2, 0x7745, 0x7db3, 0x0, 0x0);
        gbc.writeMem(0xcf67, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5ffd);
        EXPECT(gbc.pc(), 0xcf69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf67), 0xcb);
        EXPECT(gbc.readMem(0xcf68), 0x4a);
        // CB 4A 0299
        gbc.setState(0x2a25, 0x7282, 0x8be0, 0x24b5, 0xe31e, 0xae64, 0x0, 0x1);
        gbc.writeMem(0x2a25, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7282);
        EXPECT(gbc.pc(), 0x2a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 029A
        gbc.setState(0xb87a, 0xd052, 0x2020, 0x7174, 0x543c, 0x3bd0, 0x1, 0x1);
        gbc.writeMem(0xb87a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd052);
        EXPECT(gbc.pc(), 0xb87c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87a), 0xcb);
        EXPECT(gbc.readMem(0xb87b), 0x4a);
        // CB 4A 029B
        gbc.setState(0xad4a, 0x89ba, 0xb440, 0x413a, 0xdec8, 0xdb4, 0x1, 0x1);
        gbc.writeMem(0xad4a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x89ba);
        EXPECT(gbc.pc(), 0xad4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4a), 0xcb);
        EXPECT(gbc.readMem(0xad4b), 0x4a);
        // CB 4A 029C
        gbc.setState(0x3e42, 0x418c, 0x6060, 0xd8b2, 0x3240, 0x6c68, 0x0, 0x1);
        gbc.writeMem(0x3e42, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x418c);
        EXPECT(gbc.pc(), 0x3e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 029D
        gbc.setState(0xc54d, 0x880a, 0x7770, 0x89a5, 0xbeb5, 0x13ee, 0x0, 0x1);
        gbc.writeMem(0xc54d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x880a);
        EXPECT(gbc.pc(), 0xc54f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54d), 0xcb);
        EXPECT(gbc.readMem(0xc54e), 0x4a);
        // CB 4A 029E
        gbc.setState(0x7a94, 0x3930, 0x7fa0, 0x4573, 0xf22a, 0x3195, 0x1, 0x1);
        gbc.writeMem(0x7a94, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3930);
        EXPECT(gbc.pc(), 0x7a96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 029F
        gbc.setState(0x1d71, 0xcb85, 0xfb20, 0x4fd6, 0xa91c, 0xe246, 0x0, 0x1);
        gbc.writeMem(0x1d71, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xcb85);
        EXPECT(gbc.pc(), 0x1d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02A0
        gbc.setState(0x15e0, 0x8fb2, 0x120, 0x9fa4, 0xc9eb, 0x51a0, 0x0, 0x1);
        gbc.writeMem(0x15e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8fb2);
        EXPECT(gbc.pc(), 0x15e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02A1
        gbc.setState(0x10ba, 0x7d0f, 0xc1d0, 0xaeda, 0x7bdd, 0xfda0, 0x1, 0x1);
        gbc.writeMem(0x10ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7d0f);
        EXPECT(gbc.pc(), 0x10bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02A2
        gbc.setState(0x8eb8, 0x983, 0x9080, 0xc8d0, 0x895a, 0x32e, 0x1, 0x1);
        gbc.writeMem(0x8eb8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x983);
        EXPECT(gbc.pc(), 0x8eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb8), 0xcb);
        EXPECT(gbc.readMem(0x8eb9), 0x4a);
        // CB 4A 02A3
        gbc.setState(0xc82d, 0x599c, 0xbf90, 0x9d7a, 0x627a, 0x15b0, 0x1, 0x0);
        gbc.writeMem(0xc82d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x599c);
        EXPECT(gbc.pc(), 0xc82f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc82d), 0xcb);
        EXPECT(gbc.readMem(0xc82e), 0x4a);
        // CB 4A 02A4
        gbc.setState(0x983d, 0x7729, 0xd0a0, 0xf624, 0x595e, 0x8713, 0x0, 0x0);
        gbc.writeMem(0x983d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7729);
        EXPECT(gbc.pc(), 0x983f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983d), 0xcb);
        EXPECT(gbc.readMem(0x983e), 0x4a);
        // CB 4A 02A5
        gbc.setState(0xae83, 0x6056, 0x9790, 0xe2c4, 0xe903, 0x691, 0x1, 0x0);
        gbc.writeMem(0xae83, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6056);
        EXPECT(gbc.pc(), 0xae85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae83), 0xcb);
        EXPECT(gbc.readMem(0xae84), 0x4a);
        // CB 4A 02A6
        gbc.setState(0x2454, 0x7283, 0xd820, 0x373, 0xee2b, 0x1170, 0x1, 0x1);
        gbc.writeMem(0x2454, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7283);
        EXPECT(gbc.pc(), 0x2456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02A7
        gbc.setState(0x3a09, 0xafb7, 0xca20, 0xb141, 0x74b, 0xe840, 0x1, 0x0);
        gbc.writeMem(0x3a09, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xafb7);
        EXPECT(gbc.pc(), 0x3a0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02A8
        gbc.setState(0x46af, 0x3fd1, 0x2560, 0xa46c, 0x25b2, 0xbde2, 0x1, 0x1);
        gbc.writeMem(0x46af, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3fd1);
        EXPECT(gbc.pc(), 0x46b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02A9
        gbc.setState(0xa8bb, 0xf3a, 0x800, 0xfca7, 0x18fe, 0xb500, 0x0, 0x1);
        gbc.writeMem(0xa8bb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf3a);
        EXPECT(gbc.pc(), 0xa8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8bb), 0xcb);
        EXPECT(gbc.readMem(0xa8bc), 0x4a);
        // CB 4A 02AA
        gbc.setState(0xc56a, 0x8cfe, 0x66f0, 0xca29, 0xbf11, 0x53d3, 0x1, 0x0);
        gbc.writeMem(0xc56a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8cfe);
        EXPECT(gbc.pc(), 0xc56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56a), 0xcb);
        EXPECT(gbc.readMem(0xc56b), 0x4a);
        // CB 4A 02AB
        gbc.setState(0xa4be, 0xee80, 0xe8a0, 0x4fa5, 0xde30, 0x4a35, 0x1, 0x1);
        gbc.writeMem(0xa4be, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xee80);
        EXPECT(gbc.pc(), 0xa4c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4be), 0xcb);
        EXPECT(gbc.readMem(0xa4bf), 0x4a);
        // CB 4A 02AC
        gbc.setState(0x7336, 0x523f, 0x5930, 0xf711, 0x110c, 0x9f4a, 0x1, 0x0);
        gbc.writeMem(0x7336, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x523f);
        EXPECT(gbc.pc(), 0x7338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02AD
        gbc.setState(0x1ee4, 0x3f4e, 0x3e30, 0x3dac, 0x2aaf, 0xf9f4, 0x1, 0x1);
        gbc.writeMem(0x1ee4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3f4e);
        EXPECT(gbc.pc(), 0x1ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02AE
        gbc.setState(0xb9a1, 0x2728, 0x16a0, 0xc531, 0x996f, 0xe592, 0x1, 0x1);
        gbc.writeMem(0xb9a1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2728);
        EXPECT(gbc.pc(), 0xb9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9a1), 0xcb);
        EXPECT(gbc.readMem(0xb9a2), 0x4a);
        // CB 4A 02AF
        gbc.setState(0x2fad, 0x4750, 0xb540, 0x58df, 0x66a7, 0xaa54, 0x1, 0x1);
        gbc.writeMem(0x2fad, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4750);
        EXPECT(gbc.pc(), 0x2faf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02B0
        gbc.setState(0xb65d, 0x437d, 0xe010, 0xf522, 0xfa3b, 0x1e68, 0x1, 0x1);
        gbc.writeMem(0xb65d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x437d);
        EXPECT(gbc.pc(), 0xb65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb65d), 0xcb);
        EXPECT(gbc.readMem(0xb65e), 0x4a);
        // CB 4A 02B1
        gbc.setState(0x8c7d, 0x6b0, 0x6f00, 0xf38d, 0x5d5c, 0x75a4, 0x1, 0x0);
        gbc.writeMem(0x8c7d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6b0);
        EXPECT(gbc.pc(), 0x8c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7d), 0xcb);
        EXPECT(gbc.readMem(0x8c7e), 0x4a);
        // CB 4A 02B2
        gbc.setState(0x386e, 0x20a7, 0x7800, 0x9054, 0xf378, 0xce86, 0x1, 0x1);
        gbc.writeMem(0x386e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x20a7);
        EXPECT(gbc.pc(), 0x3870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02B3
        gbc.setState(0xebcf, 0xb151, 0x600, 0xfeac, 0xec32, 0x8322, 0x1, 0x1);
        gbc.writeMem(0xebcf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb151);
        EXPECT(gbc.pc(), 0xebd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebcf), 0xcb);
        EXPECT(gbc.readMem(0xebd0), 0x4a);
        // CB 4A 02B4
        gbc.setState(0x83ff, 0xec81, 0x7c30, 0x5f2, 0xb267, 0x6e40, 0x0, 0x0);
        gbc.writeMem(0x83ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xec81);
        EXPECT(gbc.pc(), 0x8401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ff), 0xcb);
        EXPECT(gbc.readMem(0x8400), 0x4a);
        // CB 4A 02B5
        gbc.setState(0x7c28, 0x25d5, 0x56f0, 0x8269, 0x1280, 0xc7cc, 0x1, 0x0);
        gbc.writeMem(0x7c28, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x25d5);
        EXPECT(gbc.pc(), 0x7c2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02B6
        gbc.setState(0x8632, 0x5593, 0x3810, 0x98, 0x28fe, 0xd3f6, 0x0, 0x1);
        gbc.writeMem(0x8632, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x5593);
        EXPECT(gbc.pc(), 0x8634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8632), 0xcb);
        EXPECT(gbc.readMem(0x8633), 0x4a);
        // CB 4A 02B7
        gbc.setState(0x18be, 0x656f, 0xc9b0, 0x3ae1, 0xa98e, 0xcbbc, 0x1, 0x0);
        gbc.writeMem(0x18be, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x656f);
        EXPECT(gbc.pc(), 0x18c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02B8
        gbc.setState(0xbe1c, 0xdd8c, 0x3df0, 0x33be, 0xcf9e, 0x6717, 0x1, 0x1);
        gbc.writeMem(0xbe1c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdd8c);
        EXPECT(gbc.pc(), 0xbe1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe1c), 0xcb);
        EXPECT(gbc.readMem(0xbe1d), 0x4a);
        // CB 4A 02B9
        gbc.setState(0x785a, 0xdb46, 0x6320, 0xa6cf, 0x17c2, 0xfb9a, 0x0, 0x1);
        gbc.writeMem(0x785a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdb46);
        EXPECT(gbc.pc(), 0x785c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02BA
        gbc.setState(0x429f, 0xa319, 0xd7c0, 0xbfa9, 0x67a7, 0x7619, 0x0, 0x1);
        gbc.writeMem(0x429f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa319);
        EXPECT(gbc.pc(), 0x42a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02BB
        gbc.setState(0x1032, 0xfa96, 0xc270, 0x1ec4, 0x895e, 0x54fa, 0x1, 0x1);
        gbc.writeMem(0x1032, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xfa96);
        EXPECT(gbc.pc(), 0x1034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02BC
        gbc.setState(0x5a92, 0xc676, 0x1130, 0x6f52, 0xf621, 0x24f2, 0x0, 0x0);
        gbc.writeMem(0x5a92, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc676);
        EXPECT(gbc.pc(), 0x5a94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02BD
        gbc.setState(0x6ca2, 0x8e96, 0x5b10, 0x708e, 0xcf52, 0xa470, 0x0, 0x1);
        gbc.writeMem(0x6ca2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8e96);
        EXPECT(gbc.pc(), 0x6ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02BE
        gbc.setState(0x4133, 0x41b8, 0x75e0, 0xd1e3, 0x4849, 0x5b99, 0x1, 0x0);
        gbc.writeMem(0x4133, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x41b8);
        EXPECT(gbc.pc(), 0x4135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02BF
        gbc.setState(0xeac2, 0x68da, 0x5ae0, 0xbb13, 0x5d87, 0x1b1a, 0x0, 0x0);
        gbc.writeMem(0xeac2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x68da);
        EXPECT(gbc.pc(), 0xeac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeac2), 0xcb);
        EXPECT(gbc.readMem(0xeac3), 0x4a);
        // CB 4A 02C0
        gbc.setState(0xbfae, 0x2ff4, 0x4b0, 0x5b09, 0x15a6, 0xe993, 0x0, 0x0);
        gbc.writeMem(0xbfae, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2ff4);
        EXPECT(gbc.pc(), 0xbfb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfae), 0xcb);
        EXPECT(gbc.readMem(0xbfaf), 0x4a);
        // CB 4A 02C1
        gbc.setState(0x2cb9, 0xd5ab, 0xd6e0, 0xdf2a, 0xa54c, 0xcfc0, 0x0, 0x1);
        gbc.writeMem(0x2cb9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd5ab);
        EXPECT(gbc.pc(), 0x2cbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02C2
        gbc.setState(0xbe13, 0xf68, 0xb0b0, 0x4be, 0x75a5, 0x6ba, 0x0, 0x0);
        gbc.writeMem(0xbe13, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf68);
        EXPECT(gbc.pc(), 0xbe15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe13), 0xcb);
        EXPECT(gbc.readMem(0xbe14), 0x4a);
        // CB 4A 02C4
        gbc.setState(0xde91, 0x105f, 0x2750, 0xc264, 0xff16, 0x3889, 0x1, 0x1);
        gbc.writeMem(0xde91, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x105f);
        EXPECT(gbc.pc(), 0xde93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde91), 0xcb);
        EXPECT(gbc.readMem(0xde92), 0x4a);
        // CB 4A 02C6
        gbc.setState(0xe0d, 0x7e3c, 0x3780, 0x1870, 0x14da, 0x9c79, 0x1, 0x1);
        gbc.writeMem(0xe0d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7e3c);
        EXPECT(gbc.pc(), 0xe0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02C7
        gbc.setState(0x744e, 0x769f, 0xec20, 0xcc46, 0x8482, 0xce4f, 0x1, 0x0);
        gbc.writeMem(0x744e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x769f);
        EXPECT(gbc.pc(), 0x7450);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02C8
        gbc.setState(0x662c, 0x4f27, 0x6df0, 0xc6b9, 0x4df4, 0x4765, 0x0, 0x0);
        gbc.writeMem(0x662c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4f27);
        EXPECT(gbc.pc(), 0x662e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02C9
        gbc.setState(0xb5ca, 0x7e, 0xa100, 0x7fa7, 0x1c93, 0xd0ef, 0x1, 0x1);
        gbc.writeMem(0xb5ca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7e);
        EXPECT(gbc.pc(), 0xb5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ca), 0xcb);
        EXPECT(gbc.readMem(0xb5cb), 0x4a);
        // CB 4A 02CA
        gbc.setState(0x233f, 0xccb6, 0x9410, 0x98bd, 0x2b, 0xeacd, 0x1, 0x1);
        gbc.writeMem(0x233f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xccb6);
        EXPECT(gbc.pc(), 0x2341);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02CB
        gbc.setState(0x2462, 0x89b5, 0x8250, 0xb189, 0xc93c, 0x32d4, 0x0, 0x0);
        gbc.writeMem(0x2462, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x89b5);
        EXPECT(gbc.pc(), 0x2464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02CC
        gbc.setState(0xb95a, 0x656f, 0x6580, 0xa74b, 0xb872, 0xec1c, 0x1, 0x1);
        gbc.writeMem(0xb95a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x656f);
        EXPECT(gbc.pc(), 0xb95c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb95a), 0xcb);
        EXPECT(gbc.readMem(0xb95b), 0x4a);
        // CB 4A 02CD
        gbc.setState(0x7ced, 0x2b43, 0x9f60, 0x5146, 0x9766, 0x82b0, 0x0, 0x1);
        gbc.writeMem(0x7ced, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2b43);
        EXPECT(gbc.pc(), 0x7cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02CE
        gbc.setState(0x5c9, 0x2047, 0xbd70, 0xdf38, 0xdd14, 0xf810, 0x0, 0x0);
        gbc.writeMem(0x5c9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2047);
        EXPECT(gbc.pc(), 0x5cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02CF
        gbc.setState(0xa364, 0xddb7, 0xba30, 0xa3e0, 0x21a2, 0xa1df, 0x1, 0x1);
        gbc.writeMem(0xa364, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xddb7);
        EXPECT(gbc.pc(), 0xa366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa364), 0xcb);
        EXPECT(gbc.readMem(0xa365), 0x4a);
        // CB 4A 02D0
        gbc.setState(0x5dba, 0x4ee8, 0x3930, 0x88a4, 0x8706, 0x665a, 0x1, 0x0);
        gbc.writeMem(0x5dba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4ee8);
        EXPECT(gbc.pc(), 0x5dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02D1
        gbc.setState(0x14f5, 0x6d04, 0xc500, 0x1720, 0xd103, 0x7feb, 0x1, 0x0);
        gbc.writeMem(0x14f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6d04);
        EXPECT(gbc.pc(), 0x14f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02D2
        gbc.setState(0x50e5, 0xe0d4, 0xf0a0, 0x928d, 0x2bfb, 0x5054, 0x1, 0x0);
        gbc.writeMem(0x50e5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe0d4);
        EXPECT(gbc.pc(), 0x50e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02D3
        gbc.setState(0x3641, 0x960d, 0x9700, 0x73f9, 0xfdbd, 0x94fa, 0x0, 0x0);
        gbc.writeMem(0x3641, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x960d);
        EXPECT(gbc.pc(), 0x3643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02D4
        gbc.setState(0x120c, 0x67fe, 0x89b0, 0xce41, 0xbf17, 0x3e1c, 0x1, 0x0);
        gbc.writeMem(0x120c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x67fe);
        EXPECT(gbc.pc(), 0x120e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02D5
        gbc.setState(0xeb09, 0xead1, 0xf630, 0x4543, 0xdd97, 0xa392, 0x1, 0x1);
        gbc.writeMem(0xeb09, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xead1);
        EXPECT(gbc.pc(), 0xeb0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb09), 0xcb);
        EXPECT(gbc.readMem(0xeb0a), 0x4a);
        // CB 4A 02D6
        gbc.setState(0xe934, 0xdce9, 0x9930, 0x901a, 0x68d9, 0x356a, 0x1, 0x1);
        gbc.writeMem(0xe934, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdce9);
        EXPECT(gbc.pc(), 0xe936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe934), 0xcb);
        EXPECT(gbc.readMem(0xe935), 0x4a);
        // CB 4A 02D7
        gbc.setState(0x6a4f, 0x53c2, 0x1d80, 0x836b, 0x3d08, 0xf82, 0x0, 0x1);
        gbc.writeMem(0x6a4f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x53c2);
        EXPECT(gbc.pc(), 0x6a51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02D8
        gbc.setState(0x899, 0x5f62, 0x99f0, 0xf85c, 0x7944, 0x32d2, 0x0, 0x0);
        gbc.writeMem(0x899, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5f62);
        EXPECT(gbc.pc(), 0x89b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02D9
        gbc.setState(0x80ea, 0xf499, 0x6c30, 0xdc3, 0x9b6, 0x8b56, 0x1, 0x0);
        gbc.writeMem(0x80ea, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf499);
        EXPECT(gbc.pc(), 0x80ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80ea), 0xcb);
        EXPECT(gbc.readMem(0x80eb), 0x4a);
        // CB 4A 02DA
        gbc.setState(0xa72a, 0xd93e, 0x6840, 0xd503, 0x9f33, 0x4529, 0x0, 0x0);
        gbc.writeMem(0xa72a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd93e);
        EXPECT(gbc.pc(), 0xa72c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa72a), 0xcb);
        EXPECT(gbc.readMem(0xa72b), 0x4a);
        // CB 4A 02DB
        gbc.setState(0xa269, 0x561d, 0xb9b0, 0xcdf1, 0x82e0, 0xa8ae, 0x1, 0x0);
        gbc.writeMem(0xa269, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x561d);
        EXPECT(gbc.pc(), 0xa26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa269), 0xcb);
        EXPECT(gbc.readMem(0xa26a), 0x4a);
        // CB 4A 02DC
        gbc.setState(0xad14, 0xd510, 0x59a0, 0x235c, 0xd394, 0x49ea, 0x0, 0x1);
        gbc.writeMem(0xad14, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd510);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad14), 0xcb);
        EXPECT(gbc.readMem(0xad15), 0x4a);
        // CB 4A 02DD
        gbc.setState(0x94f2, 0xe98d, 0x3e90, 0xd228, 0xe596, 0x15a, 0x0, 0x1);
        gbc.writeMem(0x94f2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe98d);
        EXPECT(gbc.pc(), 0x94f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94f2), 0xcb);
        EXPECT(gbc.readMem(0x94f3), 0x4a);
        // CB 4A 02DE
        gbc.setState(0x34ca, 0x8d35, 0x66b0, 0x737f, 0x4185, 0xc740, 0x1, 0x0);
        gbc.writeMem(0x34ca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8d35);
        EXPECT(gbc.pc(), 0x34cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02DF
        gbc.setState(0xce94, 0xb9d, 0xa8d0, 0x99d0, 0x16ad, 0xd8b9, 0x0, 0x1);
        gbc.writeMem(0xce94, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb9d);
        EXPECT(gbc.pc(), 0xce96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce94), 0xcb);
        EXPECT(gbc.readMem(0xce95), 0x4a);
        // CB 4A 02E0
        gbc.setState(0xe851, 0xd73a, 0x22e0, 0x1950, 0x6194, 0x1e04, 0x0, 0x1);
        gbc.writeMem(0xe851, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd73a);
        EXPECT(gbc.pc(), 0xe853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe851), 0xcb);
        EXPECT(gbc.readMem(0xe852), 0x4a);
        // CB 4A 02E1
        gbc.setState(0x358e, 0x837e, 0x5660, 0x6b6f, 0xbb8e, 0x3a1f, 0x0, 0x1);
        gbc.writeMem(0x358e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x837e);
        EXPECT(gbc.pc(), 0x3590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02E2
        gbc.setState(0xa7c2, 0x5354, 0x25d0, 0x2d22, 0x679b, 0x5d95, 0x1, 0x0);
        gbc.writeMem(0xa7c2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5354);
        EXPECT(gbc.pc(), 0xa7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c2), 0xcb);
        EXPECT(gbc.readMem(0xa7c3), 0x4a);
        // CB 4A 02E3
        gbc.setState(0x95f3, 0xfe40, 0xdb90, 0x7966, 0xf7e5, 0x5f92, 0x1, 0x1);
        gbc.writeMem(0x95f3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfe40);
        EXPECT(gbc.pc(), 0x95f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f3), 0xcb);
        EXPECT(gbc.readMem(0x95f4), 0x4a);
        // CB 4A 02E4
        gbc.setState(0x8f8b, 0x9e7f, 0xa1c0, 0xfa2e, 0xbe32, 0xfff6, 0x1, 0x0);
        gbc.writeMem(0x8f8b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9e7f);
        EXPECT(gbc.pc(), 0x8f8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f8b), 0xcb);
        EXPECT(gbc.readMem(0x8f8c), 0x4a);
        // CB 4A 02E5
        gbc.setState(0x6d39, 0x6023, 0xa710, 0x6cc5, 0x7c40, 0xe45d, 0x0, 0x1);
        gbc.writeMem(0x6d39, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6023);
        EXPECT(gbc.pc(), 0x6d3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02E6
        gbc.setState(0xaab7, 0x3a66, 0xa140, 0xecd8, 0x7d34, 0x997a, 0x0, 0x0);
        gbc.writeMem(0xaab7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3a66);
        EXPECT(gbc.pc(), 0xaab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaab7), 0xcb);
        EXPECT(gbc.readMem(0xaab8), 0x4a);
        // CB 4A 02E7
        gbc.setState(0x8807, 0x375f, 0x5910, 0x76a9, 0x4396, 0x705a, 0x1, 0x0);
        gbc.writeMem(0x8807, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x375f);
        EXPECT(gbc.pc(), 0x8809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8807), 0xcb);
        EXPECT(gbc.readMem(0x8808), 0x4a);
        // CB 4A 02E8
        gbc.setState(0x961f, 0x4509, 0x88f0, 0x4289, 0x1e9b, 0x4405, 0x0, 0x0);
        gbc.writeMem(0x961f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4509);
        EXPECT(gbc.pc(), 0x9621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x961f), 0xcb);
        EXPECT(gbc.readMem(0x9620), 0x4a);
        // CB 4A 02E9
        gbc.setState(0xcba2, 0x9f9c, 0x85c0, 0x8c83, 0xfec1, 0x2cc4, 0x1, 0x0);
        gbc.writeMem(0xcba2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9f9c);
        EXPECT(gbc.pc(), 0xcba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcba2), 0xcb);
        EXPECT(gbc.readMem(0xcba3), 0x4a);
        // CB 4A 02EA
        gbc.setState(0xe946, 0x512d, 0xbf80, 0xa5a6, 0x3bb8, 0x3a02, 0x0, 0x1);
        gbc.writeMem(0xe946, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x512d);
        EXPECT(gbc.pc(), 0xe948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe946), 0xcb);
        EXPECT(gbc.readMem(0xe947), 0x4a);
        // CB 4A 02EB
        gbc.setState(0xe324, 0x95d2, 0xaa40, 0x363c, 0x2231, 0xecfd, 0x0, 0x0);
        gbc.writeMem(0xe324, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x95d2);
        EXPECT(gbc.pc(), 0xe326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe324), 0xcb);
        EXPECT(gbc.readMem(0xe325), 0x4a);
        // CB 4A 02EC
        gbc.setState(0x4ccb, 0x1e85, 0x7c20, 0xcf61, 0xc8fd, 0xf1ce, 0x0, 0x1);
        gbc.writeMem(0x4ccb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1e85);
        EXPECT(gbc.pc(), 0x4ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02ED
        gbc.setState(0xa6a7, 0x7ad4, 0x8a50, 0xcb90, 0x786e, 0xc5bc, 0x1, 0x0);
        gbc.writeMem(0xa6a7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7ad4);
        EXPECT(gbc.pc(), 0xa6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a7), 0xcb);
        EXPECT(gbc.readMem(0xa6a8), 0x4a);
        // CB 4A 02EF
        gbc.setState(0x1a26, 0x1e5b, 0xffe0, 0xda86, 0x1a98, 0x9877, 0x1, 0x1);
        gbc.writeMem(0x1a26, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1e5b);
        EXPECT(gbc.pc(), 0x1a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02F0
        gbc.setState(0xc7ae, 0xc881, 0xa50, 0xf4da, 0x1ffe, 0x4265, 0x0, 0x1);
        gbc.writeMem(0xc7ae, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc881);
        EXPECT(gbc.pc(), 0xc7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ae), 0xcb);
        EXPECT(gbc.readMem(0xc7af), 0x4a);
        // CB 4A 02F1
        gbc.setState(0x6a7a, 0x3f46, 0xd250, 0xd7b, 0x8a4f, 0x777c, 0x1, 0x0);
        gbc.writeMem(0x6a7a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3f46);
        EXPECT(gbc.pc(), 0x6a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02F2
        gbc.setState(0x4f2, 0x7ff8, 0x3150, 0xb3ac, 0x4e08, 0xfd3d, 0x0, 0x0);
        gbc.writeMem(0x4f2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7ff8);
        EXPECT(gbc.pc(), 0x4f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02F3
        gbc.setState(0x1447, 0x68d9, 0xc8e0, 0x4dc7, 0x2c7e, 0x20, 0x0, 0x0);
        gbc.writeMem(0x1447, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x68d9);
        EXPECT(gbc.pc(), 0x1449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02F4
        gbc.setState(0xb5f5, 0x527f, 0x9f60, 0x28b5, 0xd7f3, 0xd0bd, 0x0, 0x1);
        gbc.writeMem(0xb5f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x527f);
        EXPECT(gbc.pc(), 0xb5f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f5), 0xcb);
        EXPECT(gbc.readMem(0xb5f6), 0x4a);
        // CB 4A 02F5
        gbc.setState(0x56cd, 0x370c, 0xde60, 0x16f8, 0x22a8, 0x1b48, 0x0, 0x1);
        gbc.writeMem(0x56cd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x370c);
        EXPECT(gbc.pc(), 0x56cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02F6
        gbc.setState(0x278d, 0xdb35, 0xb4e0, 0xf351, 0xb155, 0xb1c4, 0x1, 0x1);
        gbc.writeMem(0x278d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xdb35);
        EXPECT(gbc.pc(), 0x278f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02F7
        gbc.setState(0x7b32, 0x473c, 0x5a0, 0x3c0c, 0xf534, 0x37bc, 0x0, 0x0);
        gbc.writeMem(0x7b32, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x473c);
        EXPECT(gbc.pc(), 0x7b34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02F8
        gbc.setState(0x3809, 0x9d8e, 0x9850, 0x16ec, 0xc970, 0x64d8, 0x1, 0x0);
        gbc.writeMem(0x3809, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9d8e);
        EXPECT(gbc.pc(), 0x380b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02F9
        gbc.setState(0x1650, 0xb52, 0x7350, 0xbaf9, 0x3ff7, 0x452e, 0x1, 0x0);
        gbc.writeMem(0x1650, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb52);
        EXPECT(gbc.pc(), 0x1652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02FA
        gbc.setState(0x282d, 0x7971, 0x1700, 0x4d17, 0x40, 0x7ada, 0x1, 0x0);
        gbc.writeMem(0x282d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7971);
        EXPECT(gbc.pc(), 0x282f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02FB
        gbc.setState(0x56f4, 0x77c, 0x7e10, 0xa8bb, 0x67e, 0x5ebb, 0x0, 0x1);
        gbc.writeMem(0x56f4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x77c);
        EXPECT(gbc.pc(), 0x56f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 02FC
        gbc.setState(0xade9, 0x3b16, 0xcfb0, 0x4b28, 0x41ab, 0x8251, 0x0, 0x1);
        gbc.writeMem(0xade9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3b16);
        EXPECT(gbc.pc(), 0xadeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade9), 0xcb);
        EXPECT(gbc.readMem(0xadea), 0x4a);
        // CB 4A 02FD
        gbc.setState(0x3ac1, 0x75a9, 0x72c0, 0x83d2, 0xce, 0xbb1e, 0x0, 0x0);
        gbc.writeMem(0x3ac1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x75a9);
        EXPECT(gbc.pc(), 0x3ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02FE
        gbc.setState(0x215c, 0xa28, 0xbde0, 0x60ed, 0xd88e, 0xd74, 0x1, 0x0);
        gbc.writeMem(0x215c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa28);
        EXPECT(gbc.pc(), 0x215e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 02FF
        gbc.setState(0xc02c, 0x3e32, 0x6f40, 0x5055, 0xda6, 0xce02, 0x1, 0x1);
        gbc.writeMem(0xc02c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3e32);
        EXPECT(gbc.pc(), 0xc02e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc02c), 0xcb);
        EXPECT(gbc.readMem(0xc02d), 0x4a);
        // CB 4A 0300
        gbc.setState(0x7e67, 0xb05f, 0x610, 0xd57d, 0x79a2, 0x36ae, 0x0, 0x1);
        gbc.writeMem(0x7e67, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb05f);
        EXPECT(gbc.pc(), 0x7e69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0301
        gbc.setState(0x31ea, 0x97a9, 0x6150, 0x268, 0x72e6, 0xba86, 0x0, 0x1);
        gbc.writeMem(0x31ea, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x97a9);
        EXPECT(gbc.pc(), 0x31ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0302
        gbc.setState(0x55ff, 0x90c6, 0x3330, 0x33eb, 0xc224, 0x128, 0x1, 0x1);
        gbc.writeMem(0x55ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x90c6);
        EXPECT(gbc.pc(), 0x5601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0303
        gbc.setState(0xa92, 0x6952, 0x8c70, 0xd04f, 0x402e, 0xd9b2, 0x1, 0x0);
        gbc.writeMem(0xa92, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6952);
        EXPECT(gbc.pc(), 0xa94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0304
        gbc.setState(0xe2b0, 0x9d3, 0xaef0, 0xd70f, 0x5683, 0xbc03, 0x0, 0x0);
        gbc.writeMem(0xe2b0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9d3);
        EXPECT(gbc.pc(), 0xe2b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b0), 0xcb);
        EXPECT(gbc.readMem(0xe2b1), 0x4a);
        // CB 4A 0305
        gbc.setState(0xed28, 0x12eb, 0xf860, 0xfd61, 0xd184, 0x2fa8, 0x0, 0x0);
        gbc.writeMem(0xed28, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x12eb);
        EXPECT(gbc.pc(), 0xed2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed28), 0xcb);
        EXPECT(gbc.readMem(0xed29), 0x4a);
        // CB 4A 0306
        gbc.setState(0xe5a, 0x3654, 0xa2f0, 0x8191, 0xc472, 0x413e, 0x1, 0x0);
        gbc.writeMem(0xe5a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3654);
        EXPECT(gbc.pc(), 0xe5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0307
        gbc.setState(0x9d14, 0xee68, 0x2b40, 0xea43, 0xc4e6, 0x1191, 0x0, 0x1);
        gbc.writeMem(0x9d14, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xee68);
        EXPECT(gbc.pc(), 0x9d16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d14), 0xcb);
        EXPECT(gbc.readMem(0x9d15), 0x4a);
        // CB 4A 0308
        gbc.setState(0xd924, 0xbcbe, 0xb100, 0x5811, 0xcb75, 0x1bd2, 0x0, 0x1);
        gbc.writeMem(0xd924, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbcbe);
        EXPECT(gbc.pc(), 0xd926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd924), 0xcb);
        EXPECT(gbc.readMem(0xd925), 0x4a);
        // CB 4A 0309
        gbc.setState(0x57a2, 0x8e7f, 0x4a70, 0x49bc, 0x4dae, 0x2582, 0x1, 0x0);
        gbc.writeMem(0x57a2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8e7f);
        EXPECT(gbc.pc(), 0x57a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 030A
        gbc.setState(0xee3f, 0x8fdd, 0xeaf0, 0xa7bf, 0x4b65, 0x409f, 0x1, 0x0);
        gbc.writeMem(0xee3f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8fdd);
        EXPECT(gbc.pc(), 0xee41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3f), 0xcb);
        EXPECT(gbc.readMem(0xee40), 0x4a);
        // CB 4A 030B
        gbc.setState(0x8540, 0xbab3, 0xfd10, 0x56a, 0x4a08, 0xf741, 0x1, 0x0);
        gbc.writeMem(0x8540, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbab3);
        EXPECT(gbc.pc(), 0x8542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8540), 0xcb);
        EXPECT(gbc.readMem(0x8541), 0x4a);
        // CB 4A 030C
        gbc.setState(0x4e33, 0x6d76, 0x7d0, 0xc715, 0xd983, 0xd785, 0x0, 0x1);
        gbc.writeMem(0x4e33, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6d76);
        EXPECT(gbc.pc(), 0x4e35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 030D
        gbc.setState(0x79c8, 0x7c4f, 0x6dc0, 0x54f7, 0x31a9, 0xe0d2, 0x1, 0x1);
        gbc.writeMem(0x79c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7c4f);
        EXPECT(gbc.pc(), 0x79ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 030E
        gbc.setState(0x71ff, 0xbddb, 0x500, 0x5e, 0xd0cc, 0xc8d2, 0x0, 0x0);
        gbc.writeMem(0x71ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbddb);
        EXPECT(gbc.pc(), 0x7201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 030F
        gbc.setState(0x8851, 0xa893, 0x84e0, 0x9964, 0x465a, 0x373a, 0x1, 0x1);
        gbc.writeMem(0x8851, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa893);
        EXPECT(gbc.pc(), 0x8853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8851), 0xcb);
        EXPECT(gbc.readMem(0x8852), 0x4a);
        // CB 4A 0310
        gbc.setState(0x182e, 0xf21a, 0x63a0, 0x2adf, 0xf897, 0x73fd, 0x0, 0x1);
        gbc.writeMem(0x182e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf21a);
        EXPECT(gbc.pc(), 0x1830);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0311
        gbc.setState(0x9cef, 0x73bc, 0x75a0, 0x2f69, 0x8485, 0x1e42, 0x0, 0x0);
        gbc.writeMem(0x9cef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x73bc);
        EXPECT(gbc.pc(), 0x9cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cef), 0xcb);
        EXPECT(gbc.readMem(0x9cf0), 0x4a);
        // CB 4A 0312
        gbc.setState(0xec3c, 0x58ef, 0x94d0, 0x4183, 0x5955, 0x7b09, 0x0, 0x1);
        gbc.writeMem(0xec3c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x58ef);
        EXPECT(gbc.pc(), 0xec3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec3c), 0xcb);
        EXPECT(gbc.readMem(0xec3d), 0x4a);
        // CB 4A 0313
        gbc.setState(0xa8c6, 0x832f, 0xd170, 0x6c53, 0xdc01, 0x2cca, 0x1, 0x0);
        gbc.writeMem(0xa8c6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x832f);
        EXPECT(gbc.pc(), 0xa8c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8c6), 0xcb);
        EXPECT(gbc.readMem(0xa8c7), 0x4a);
        // CB 4A 0314
        gbc.setState(0x3034, 0x417f, 0x2d00, 0x3628, 0x6321, 0x38be, 0x0, 0x1);
        gbc.writeMem(0x3034, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x417f);
        EXPECT(gbc.pc(), 0x3036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0315
        gbc.setState(0xb262, 0xec57, 0x1060, 0xd3ac, 0x2f30, 0x76d1, 0x0, 0x0);
        gbc.writeMem(0xb262, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0xb264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb262), 0xcb);
        EXPECT(gbc.readMem(0xb263), 0x4a);
        // CB 4A 0316
        gbc.setState(0xceeb, 0x732a, 0x6e0, 0xbed, 0x66f8, 0x690d, 0x0, 0x0);
        gbc.writeMem(0xceeb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x732a);
        EXPECT(gbc.pc(), 0xceed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceeb), 0xcb);
        EXPECT(gbc.readMem(0xceec), 0x4a);
        // CB 4A 0317
        gbc.setState(0x20cd, 0xd3fa, 0xc880, 0x3bf0, 0x2dfb, 0x1d17, 0x1, 0x0);
        gbc.writeMem(0x20cd, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0x20cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0318
        gbc.setState(0x88ca, 0x8086, 0xee00, 0xc309, 0x6c55, 0x264, 0x0, 0x0);
        gbc.writeMem(0x88ca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8086);
        EXPECT(gbc.pc(), 0x88cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ca), 0xcb);
        EXPECT(gbc.readMem(0x88cb), 0x4a);
        // CB 4A 031A
        gbc.setState(0x57c1, 0x65ab, 0x68a0, 0x4ee2, 0x47e9, 0x80cf, 0x0, 0x1);
        gbc.writeMem(0x57c1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x65ab);
        EXPECT(gbc.pc(), 0x57c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 031B
        gbc.setState(0x110a, 0xd359, 0x9d50, 0x431b, 0x4208, 0x7d0a, 0x0, 0x0);
        gbc.writeMem(0x110a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd359);
        EXPECT(gbc.pc(), 0x110c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 031C
        gbc.setState(0x1248, 0x4b1c, 0x2a10, 0x946e, 0x9c10, 0x48a8, 0x1, 0x1);
        gbc.writeMem(0x1248, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4b1c);
        EXPECT(gbc.pc(), 0x124a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 031D
        gbc.setState(0xc62d, 0x8431, 0x1d50, 0xfdb8, 0x18c6, 0xf5d0, 0x1, 0x1);
        gbc.writeMem(0xc62d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8431);
        EXPECT(gbc.pc(), 0xc62f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc62d), 0xcb);
        EXPECT(gbc.readMem(0xc62e), 0x4a);
        // CB 4A 031E
        gbc.setState(0xcae4, 0xe109, 0x1cc0, 0x848e, 0x3200, 0x6a50, 0x0, 0x0);
        gbc.writeMem(0xcae4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe109);
        EXPECT(gbc.pc(), 0xcae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae4), 0xcb);
        EXPECT(gbc.readMem(0xcae5), 0x4a);
        // CB 4A 0320
        gbc.setState(0x8ded, 0x36ca, 0xd2b0, 0xa302, 0x8a33, 0xa98, 0x0, 0x0);
        gbc.writeMem(0x8ded, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x36ca);
        EXPECT(gbc.pc(), 0x8def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ded), 0xcb);
        EXPECT(gbc.readMem(0x8dee), 0x4a);
        // CB 4A 0321
        gbc.setState(0x77b7, 0xc90a, 0x9e00, 0x97, 0x55a4, 0x65a9, 0x1, 0x0);
        gbc.writeMem(0x77b7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc90a);
        EXPECT(gbc.pc(), 0x77b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0322
        gbc.setState(0x4ee4, 0x7b8a, 0x8c10, 0x30d5, 0x7061, 0x74c4, 0x0, 0x0);
        gbc.writeMem(0x4ee4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7b8a);
        EXPECT(gbc.pc(), 0x4ee6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0323
        gbc.setState(0xdef2, 0x41e1, 0xf620, 0x7a5e, 0xe08c, 0x278e, 0x0, 0x1);
        gbc.writeMem(0xdef2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x41e1);
        EXPECT(gbc.pc(), 0xdef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef2), 0xcb);
        EXPECT(gbc.readMem(0xdef3), 0x4a);
        // CB 4A 0324
        gbc.setState(0x59ba, 0x4476, 0xb6f0, 0x6855, 0x50de, 0x2f7c, 0x0, 0x1);
        gbc.writeMem(0x59ba, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4476);
        EXPECT(gbc.pc(), 0x59bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0325
        gbc.setState(0x9485, 0xfff, 0x1f60, 0x5e58, 0xd24f, 0x8287, 0x1, 0x1);
        gbc.writeMem(0x9485, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfff);
        EXPECT(gbc.pc(), 0x9487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9485), 0xcb);
        EXPECT(gbc.readMem(0x9486), 0x4a);
        // CB 4A 0326
        gbc.setState(0xc478, 0x3eaa, 0x5210, 0xb4d7, 0xa7ad, 0xfb9d, 0x1, 0x0);
        gbc.writeMem(0xc478, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3eaa);
        EXPECT(gbc.pc(), 0xc47a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc478), 0xcb);
        EXPECT(gbc.readMem(0xc479), 0x4a);
        // CB 4A 0327
        gbc.setState(0xc11, 0xb60b, 0x9e80, 0xe1c1, 0x76a2, 0x3a5a, 0x0, 0x0);
        gbc.writeMem(0xc11, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb60b);
        EXPECT(gbc.pc(), 0xc13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0328
        gbc.setState(0xb2bf, 0x6579, 0xc040, 0x7b09, 0xbae0, 0x72b8, 0x1, 0x0);
        gbc.writeMem(0xb2bf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6579);
        EXPECT(gbc.pc(), 0xb2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2bf), 0xcb);
        EXPECT(gbc.readMem(0xb2c0), 0x4a);
        // CB 4A 0329
        gbc.setState(0xa17b, 0xbcc3, 0x2780, 0x33fd, 0x3bf2, 0xd9d8, 0x1, 0x0);
        gbc.writeMem(0xa17b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbcc3);
        EXPECT(gbc.pc(), 0xa17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17b), 0xcb);
        EXPECT(gbc.readMem(0xa17c), 0x4a);
        // CB 4A 032A
        gbc.setState(0x551c, 0xf593, 0x1600, 0xe531, 0x3eb4, 0x8995, 0x0, 0x1);
        gbc.writeMem(0x551c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf593);
        EXPECT(gbc.pc(), 0x551e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 032B
        gbc.setState(0xf99, 0x5165, 0x9060, 0xd223, 0x7a7c, 0xd835, 0x0, 0x1);
        gbc.writeMem(0xf99, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x5165);
        EXPECT(gbc.pc(), 0xf9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 032C
        gbc.setState(0x77e0, 0x8f58, 0x9e20, 0x6005, 0x4eea, 0xee58, 0x0, 0x0);
        gbc.writeMem(0x77e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8f58);
        EXPECT(gbc.pc(), 0x77e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 032D
        gbc.setState(0x6579, 0x91c6, 0x10f0, 0xea5, 0x53b6, 0xe81e, 0x0, 0x1);
        gbc.writeMem(0x6579, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x91c6);
        EXPECT(gbc.pc(), 0x657b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 032E
        gbc.setState(0xd3fb, 0x79b4, 0xc60, 0xb67a, 0x56ca, 0xc86, 0x0, 0x0);
        gbc.writeMem(0xd3fb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x79b4);
        EXPECT(gbc.pc(), 0xd3fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3fb), 0xcb);
        EXPECT(gbc.readMem(0xd3fc), 0x4a);
        // CB 4A 032F
        gbc.setState(0x2424, 0xc269, 0xf940, 0xb622, 0x95b1, 0xe165, 0x0, 0x1);
        gbc.writeMem(0x2424, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc269);
        EXPECT(gbc.pc(), 0x2426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0330
        gbc.setState(0x7247, 0x32aa, 0x37a0, 0x4606, 0xe50d, 0x2737, 0x0, 0x1);
        gbc.writeMem(0x7247, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x32aa);
        EXPECT(gbc.pc(), 0x7249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0331
        gbc.setState(0xdb31, 0x19, 0xb790, 0x3bda, 0xa845, 0xdb52, 0x1, 0x1);
        gbc.writeMem(0xdb31, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x19);
        EXPECT(gbc.pc(), 0xdb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb31), 0xcb);
        EXPECT(gbc.readMem(0xdb32), 0x4a);
        // CB 4A 0332
        gbc.setState(0xcc3d, 0x7d51, 0xe650, 0xca36, 0x663, 0x5e29, 0x1, 0x0);
        gbc.writeMem(0xcc3d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7d51);
        EXPECT(gbc.pc(), 0xcc3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc3d), 0xcb);
        EXPECT(gbc.readMem(0xcc3e), 0x4a);
        // CB 4A 0333
        gbc.setState(0x7f34, 0x5099, 0x3330, 0x9bb9, 0x7c9f, 0xb980, 0x0, 0x1);
        gbc.writeMem(0x7f34, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5099);
        EXPECT(gbc.pc(), 0x7f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0334
        gbc.setState(0x78b1, 0x81ce, 0x5840, 0xa8ca, 0x6ca, 0x17db, 0x0, 0x0);
        gbc.writeMem(0x78b1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x81ce);
        EXPECT(gbc.pc(), 0x78b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0335
        gbc.setState(0x19c3, 0x5731, 0xe920, 0xcb8d, 0x6cdc, 0x2ea7, 0x1, 0x1);
        gbc.writeMem(0x19c3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5731);
        EXPECT(gbc.pc(), 0x19c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0336
        gbc.setState(0x40a2, 0x1bea, 0x1600, 0x4e1e, 0x815b, 0x2361, 0x0, 0x1);
        gbc.writeMem(0x40a2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1bea);
        EXPECT(gbc.pc(), 0x40a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0337
        gbc.setState(0x889c, 0xa638, 0x5750, 0xf69e, 0xc96e, 0xdd4d, 0x1, 0x0);
        gbc.writeMem(0x889c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa638);
        EXPECT(gbc.pc(), 0x889e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x889c), 0xcb);
        EXPECT(gbc.readMem(0x889d), 0x4a);
        // CB 4A 0338
        gbc.setState(0x1bd5, 0xcc7b, 0xdb20, 0x6449, 0x3ccc, 0x954d, 0x1, 0x1);
        gbc.writeMem(0x1bd5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcc7b);
        EXPECT(gbc.pc(), 0x1bd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0339
        gbc.setState(0xab8b, 0xf256, 0x1cc0, 0x9497, 0x1bc2, 0xc9da, 0x1, 0x1);
        gbc.writeMem(0xab8b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf256);
        EXPECT(gbc.pc(), 0xab8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8b), 0xcb);
        EXPECT(gbc.readMem(0xab8c), 0x4a);
        // CB 4A 033A
        gbc.setState(0x5d1d, 0xcddd, 0x6da0, 0x4bf2, 0x7aa2, 0xfc89, 0x0, 0x1);
        gbc.writeMem(0x5d1d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xcddd);
        EXPECT(gbc.pc(), 0x5d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 033B
        gbc.setState(0x51e0, 0xc6eb, 0xc660, 0xfd43, 0x7382, 0x524f, 0x1, 0x1);
        gbc.writeMem(0x51e0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc6eb);
        EXPECT(gbc.pc(), 0x51e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 033C
        gbc.setState(0x42b5, 0x814, 0xd540, 0xf391, 0xe4ca, 0xda98, 0x0, 0x0);
        gbc.writeMem(0x42b5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x814);
        EXPECT(gbc.pc(), 0x42b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 033D
        gbc.setState(0x32f8, 0x5059, 0xa880, 0x68a1, 0x608, 0xc3ed, 0x1, 0x1);
        gbc.writeMem(0x32f8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5059);
        EXPECT(gbc.pc(), 0x32fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 033E
        gbc.setState(0x6de1, 0x4e23, 0x8010, 0xec2d, 0x5ba5, 0xea21, 0x1, 0x0);
        gbc.writeMem(0x6de1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4e23);
        EXPECT(gbc.pc(), 0x6de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 033F
        gbc.setState(0x5b66, 0x9777, 0xf5f0, 0xe1ad, 0x848b, 0xb5b, 0x0, 0x0);
        gbc.writeMem(0x5b66, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9777);
        EXPECT(gbc.pc(), 0x5b68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0340
        gbc.setState(0xa16f, 0xcd88, 0x120, 0xddb0, 0xf5ce, 0xa217, 0x1, 0x1);
        gbc.writeMem(0xa16f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xcd88);
        EXPECT(gbc.pc(), 0xa171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa16f), 0xcb);
        EXPECT(gbc.readMem(0xa170), 0x4a);
        // CB 4A 0341
        gbc.setState(0xee8c, 0xfec, 0xdbf0, 0x8213, 0x2a9d, 0x3ef1, 0x0, 0x1);
        gbc.writeMem(0xee8c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfec);
        EXPECT(gbc.pc(), 0xee8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8c), 0xcb);
        EXPECT(gbc.readMem(0xee8d), 0x4a);
        // CB 4A 0342
        gbc.setState(0x3e24, 0xc2ce, 0x3de0, 0x921a, 0x810c, 0x42b2, 0x1, 0x0);
        gbc.writeMem(0x3e24, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc2ce);
        EXPECT(gbc.pc(), 0x3e26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0343
        gbc.setState(0xadac, 0x17ba, 0x7c70, 0xc5b7, 0x7b4, 0x422b, 0x0, 0x1);
        gbc.writeMem(0xadac, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x17ba);
        EXPECT(gbc.pc(), 0xadae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadac), 0xcb);
        EXPECT(gbc.readMem(0xadad), 0x4a);
        // CB 4A 0344
        gbc.setState(0x2dd4, 0xfa1, 0xa0f0, 0xb1a8, 0x9d44, 0xb2de, 0x0, 0x1);
        gbc.writeMem(0x2dd4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfa1);
        EXPECT(gbc.pc(), 0x2dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0345
        gbc.setState(0xaa6f, 0x35d9, 0xc360, 0xbf82, 0xd59b, 0xaf70, 0x1, 0x0);
        gbc.writeMem(0xaa6f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x35d9);
        EXPECT(gbc.pc(), 0xaa71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa6f), 0xcb);
        EXPECT(gbc.readMem(0xaa70), 0x4a);
        // CB 4A 0346
        gbc.setState(0x9887, 0x2ffc, 0x3f40, 0xd40d, 0xe19c, 0x9d6c, 0x1, 0x1);
        gbc.writeMem(0x9887, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2ffc);
        EXPECT(gbc.pc(), 0x9889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9887), 0xcb);
        EXPECT(gbc.readMem(0x9888), 0x4a);
        // CB 4A 0347
        gbc.setState(0x71ce, 0xb622, 0xad00, 0xd0ce, 0x51b2, 0x4f9f, 0x1, 0x0);
        gbc.writeMem(0x71ce, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xb622);
        EXPECT(gbc.pc(), 0x71d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0348
        gbc.setState(0xd82, 0xe578, 0xdec0, 0x10b, 0xf126, 0xcf62, 0x1, 0x0);
        gbc.writeMem(0xd82, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe578);
        EXPECT(gbc.pc(), 0xd84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0349
        gbc.setState(0xc7ef, 0x634f, 0x5b80, 0x4278, 0x96e5, 0x581, 0x1, 0x0);
        gbc.writeMem(0xc7ef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x634f);
        EXPECT(gbc.pc(), 0xc7f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ef), 0xcb);
        EXPECT(gbc.readMem(0xc7f0), 0x4a);
        // CB 4A 034A
        gbc.setState(0x9d6b, 0xa61d, 0xf980, 0x79e, 0xa4d9, 0xf77e, 0x0, 0x0);
        gbc.writeMem(0x9d6b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa61d);
        EXPECT(gbc.pc(), 0x9d6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6b), 0xcb);
        EXPECT(gbc.readMem(0x9d6c), 0x4a);
        // CB 4A 034B
        gbc.setState(0xee7f, 0x7d2b, 0x7b50, 0xd196, 0x3b3, 0x227b, 0x0, 0x0);
        gbc.writeMem(0xee7f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7d2b);
        EXPECT(gbc.pc(), 0xee81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee7f), 0xcb);
        EXPECT(gbc.readMem(0xee80), 0x4a);
        // CB 4A 034C
        gbc.setState(0xb597, 0x3766, 0xb210, 0x3db8, 0x3fe, 0xf6aa, 0x1, 0x1);
        gbc.writeMem(0xb597, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3766);
        EXPECT(gbc.pc(), 0xb599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb597), 0xcb);
        EXPECT(gbc.readMem(0xb598), 0x4a);
        // CB 4A 034D
        gbc.setState(0x661e, 0x6601, 0xe680, 0xf967, 0x21f5, 0x76c3, 0x1, 0x0);
        gbc.writeMem(0x661e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6601);
        EXPECT(gbc.pc(), 0x6620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 034E
        gbc.setState(0x7650, 0xb00f, 0xac50, 0x5d2b, 0xc830, 0x537a, 0x1, 0x1);
        gbc.writeMem(0x7650, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb00f);
        EXPECT(gbc.pc(), 0x7652);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 034F
        gbc.setState(0x7753, 0xfe8c, 0x1a0, 0xea4c, 0x9131, 0x8075, 0x0, 0x1);
        gbc.writeMem(0x7753, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfe8c);
        EXPECT(gbc.pc(), 0x7755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0350
        gbc.setState(0x2e68, 0x80e7, 0x1d70, 0x592, 0xef3f, 0x66fd, 0x0, 0x1);
        gbc.writeMem(0x2e68, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x80e7);
        EXPECT(gbc.pc(), 0x2e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0351
        gbc.setState(0x58b8, 0xe8e6, 0xbf30, 0xe6a1, 0x93a1, 0x429f, 0x0, 0x0);
        gbc.writeMem(0x58b8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe8e6);
        EXPECT(gbc.pc(), 0x58ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0352
        gbc.setState(0x5539, 0xc6d5, 0x8fc0, 0x857c, 0x97a6, 0x860a, 0x1, 0x1);
        gbc.writeMem(0x5539, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc6d5);
        EXPECT(gbc.pc(), 0x553b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0353
        gbc.setState(0xcb73, 0x8db8, 0xd4c0, 0xa550, 0x23a9, 0xd16a, 0x1, 0x0);
        gbc.writeMem(0xcb73, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8db8);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb73), 0xcb);
        EXPECT(gbc.readMem(0xcb74), 0x4a);
        // CB 4A 0355
        gbc.setState(0x55a4, 0x5911, 0x3e80, 0xdad7, 0x7a96, 0x4789, 0x0, 0x0);
        gbc.writeMem(0x55a4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5911);
        EXPECT(gbc.pc(), 0x55a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0356
        gbc.setState(0x47cf, 0x1748, 0xfb30, 0x4236, 0xe645, 0x1b13, 0x1, 0x0);
        gbc.writeMem(0x47cf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1748);
        EXPECT(gbc.pc(), 0x47d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0357
        gbc.setState(0x9848, 0xc432, 0x6b10, 0x9cdd, 0xa5f9, 0x7bfb, 0x0, 0x0);
        gbc.writeMem(0x9848, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc432);
        EXPECT(gbc.pc(), 0x984a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9848), 0xcb);
        EXPECT(gbc.readMem(0x9849), 0x4a);
        // CB 4A 0358
        gbc.setState(0x468b, 0x1830, 0x3380, 0xb48e, 0x3a30, 0xa89b, 0x1, 0x0);
        gbc.writeMem(0x468b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1830);
        EXPECT(gbc.pc(), 0x468d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0359
        gbc.setState(0x4ec3, 0x5fad, 0x6fe0, 0x83d4, 0x564b, 0xf994, 0x1, 0x1);
        gbc.writeMem(0x4ec3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x5fad);
        EXPECT(gbc.pc(), 0x4ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 035A
        gbc.setState(0x6493, 0xbbf1, 0xadb0, 0x8346, 0x76aa, 0xa9c5, 0x0, 0x0);
        gbc.writeMem(0x6493, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbbf1);
        EXPECT(gbc.pc(), 0x6495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 035B
        gbc.setState(0x6f00, 0x18d6, 0x78a0, 0x3340, 0x47fe, 0xa58c, 0x0, 0x0);
        gbc.writeMem(0x6f00, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x18d6);
        EXPECT(gbc.pc(), 0x6f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 035C
        gbc.setState(0xcdf8, 0xa8f6, 0x7e10, 0x1a23, 0x5ab3, 0x4333, 0x0, 0x1);
        gbc.writeMem(0xcdf8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa8f6);
        EXPECT(gbc.pc(), 0xcdfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf8), 0xcb);
        EXPECT(gbc.readMem(0xcdf9), 0x4a);
        // CB 4A 035D
        gbc.setState(0xb260, 0x5e40, 0x6380, 0xb687, 0x8413, 0xd4da, 0x1, 0x0);
        gbc.writeMem(0xb260, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5e40);
        EXPECT(gbc.pc(), 0xb262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb260), 0xcb);
        EXPECT(gbc.readMem(0xb261), 0x4a);
        // CB 4A 035E
        gbc.setState(0x919f, 0x5cab, 0xca10, 0x5e51, 0x3ce5, 0x620f, 0x1, 0x0);
        gbc.writeMem(0x919f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5cab);
        EXPECT(gbc.pc(), 0x91a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x919f), 0xcb);
        EXPECT(gbc.readMem(0x91a0), 0x4a);
        // CB 4A 035F
        gbc.setState(0x489c, 0x453c, 0xfae0, 0x4bb1, 0xbf79, 0x9917, 0x1, 0x0);
        gbc.writeMem(0x489c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x453c);
        EXPECT(gbc.pc(), 0x489e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0360
        gbc.setState(0xaa35, 0xdc48, 0xea10, 0xe2e6, 0x69f6, 0x81ea, 0x0, 0x0);
        gbc.writeMem(0xaa35, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdc48);
        EXPECT(gbc.pc(), 0xaa37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa35), 0xcb);
        EXPECT(gbc.readMem(0xaa36), 0x4a);
        // CB 4A 0361
        gbc.setState(0xb4ed, 0xebff, 0x4080, 0xf125, 0x3dbf, 0x603, 0x0, 0x0);
        gbc.writeMem(0xb4ed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xebff);
        EXPECT(gbc.pc(), 0xb4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ed), 0xcb);
        EXPECT(gbc.readMem(0xb4ee), 0x4a);
        // CB 4A 0362
        gbc.setState(0xcaa2, 0xc47a, 0xa910, 0x3fe9, 0xeb64, 0x8034, 0x1, 0x1);
        gbc.writeMem(0xcaa2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc47a);
        EXPECT(gbc.pc(), 0xcaa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaa2), 0xcb);
        EXPECT(gbc.readMem(0xcaa3), 0x4a);
        // CB 4A 0363
        gbc.setState(0xa5b4, 0xaf05, 0x4d20, 0x1e53, 0x3929, 0xdb0c, 0x0, 0x0);
        gbc.writeMem(0xa5b4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaf05);
        EXPECT(gbc.pc(), 0xa5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b4), 0xcb);
        EXPECT(gbc.readMem(0xa5b5), 0x4a);
        // CB 4A 0364
        gbc.setState(0xdba2, 0xfbec, 0xa8a0, 0x9489, 0xbbc1, 0xdf79, 0x0, 0x1);
        gbc.writeMem(0xdba2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xfbec);
        EXPECT(gbc.pc(), 0xdba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba2), 0xcb);
        EXPECT(gbc.readMem(0xdba3), 0x4a);
        // CB 4A 0365
        gbc.setState(0x63e4, 0x6135, 0x7ca0, 0xd1d3, 0x533c, 0x4a85, 0x0, 0x1);
        gbc.writeMem(0x63e4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6135);
        EXPECT(gbc.pc(), 0x63e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0366
        gbc.setState(0xc6f5, 0x8a19, 0x98c0, 0xdb31, 0x21c6, 0xc2f7, 0x1, 0x1);
        gbc.writeMem(0xc6f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8a19);
        EXPECT(gbc.pc(), 0xc6f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f5), 0xcb);
        EXPECT(gbc.readMem(0xc6f6), 0x4a);
        // CB 4A 0367
        gbc.setState(0xd58f, 0xb994, 0xdd20, 0x73c5, 0x67a8, 0x57e, 0x1, 0x1);
        gbc.writeMem(0xd58f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb994);
        EXPECT(gbc.pc(), 0xd591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd58f), 0xcb);
        EXPECT(gbc.readMem(0xd590), 0x4a);
        // CB 4A 0368
        gbc.setState(0x9b57, 0xa7ca, 0x8510, 0xeb5c, 0xb0cd, 0xaead, 0x1, 0x0);
        gbc.writeMem(0x9b57, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa7ca);
        EXPECT(gbc.pc(), 0x9b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b57), 0xcb);
        EXPECT(gbc.readMem(0x9b58), 0x4a);
        // CB 4A 0369
        gbc.setState(0xca, 0x2a2c, 0x41a0, 0x9441, 0xa79, 0x8280, 0x1, 0x1);
        gbc.writeMem(0xca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2a2c);
        EXPECT(gbc.pc(), 0xcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 036A
        gbc.setState(0xb30c, 0xb7bf, 0xce50, 0xa462, 0x3434, 0x60f3, 0x0, 0x1);
        gbc.writeMem(0xb30c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb7bf);
        EXPECT(gbc.pc(), 0xb30e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb30c), 0xcb);
        EXPECT(gbc.readMem(0xb30d), 0x4a);
        // CB 4A 036B
        gbc.setState(0x1cee, 0xe906, 0x5500, 0x124f, 0x2a17, 0xf2d0, 0x0, 0x0);
        gbc.writeMem(0x1cee, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe906);
        EXPECT(gbc.pc(), 0x1cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 036C
        gbc.setState(0x23ab, 0xfb01, 0xd390, 0x3a9, 0x614e, 0x5044, 0x1, 0x1);
        gbc.writeMem(0x23ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfb01);
        EXPECT(gbc.pc(), 0x23ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 036D
        gbc.setState(0x58dc, 0x4b0d, 0xd800, 0xda0, 0xb56a, 0x4862, 0x0, 0x1);
        gbc.writeMem(0x58dc, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4b0d);
        EXPECT(gbc.pc(), 0x58de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 036E
        gbc.setState(0x2fc4, 0xcb86, 0x41c0, 0x516d, 0xfde4, 0xbed1, 0x1, 0x1);
        gbc.writeMem(0x2fc4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcb86);
        EXPECT(gbc.pc(), 0x2fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 036F
        gbc.setState(0x239, 0x8479, 0x9820, 0x5a6d, 0x51b6, 0x2d5d, 0x0, 0x1);
        gbc.writeMem(0x239, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8479);
        EXPECT(gbc.pc(), 0x23b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0370
        gbc.setState(0x19ca, 0xe113, 0xa6e0, 0x903e, 0x6879, 0x3f0d, 0x1, 0x0);
        gbc.writeMem(0x19ca, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe113);
        EXPECT(gbc.pc(), 0x19cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0371
        gbc.setState(0xd111, 0xe1e1, 0x7610, 0xcdb0, 0xa63c, 0xb292, 0x1, 0x0);
        gbc.writeMem(0xd111, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe1e1);
        EXPECT(gbc.pc(), 0xd113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd111), 0xcb);
        EXPECT(gbc.readMem(0xd112), 0x4a);
        // CB 4A 0372
        gbc.setState(0x9903, 0x664d, 0xd350, 0xf4a, 0x4898, 0x2199, 0x0, 0x1);
        gbc.writeMem(0x9903, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x664d);
        EXPECT(gbc.pc(), 0x9905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9903), 0xcb);
        EXPECT(gbc.readMem(0x9904), 0x4a);
        // CB 4A 0373
        gbc.setState(0x235e, 0xb7d7, 0xcdd0, 0x4598, 0x8b75, 0x7125, 0x0, 0x0);
        gbc.writeMem(0x235e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb7d7);
        EXPECT(gbc.pc(), 0x2360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0374
        gbc.setState(0x2bac, 0x9fc6, 0x3e60, 0xd1eb, 0xf2e0, 0xa603, 0x0, 0x1);
        gbc.writeMem(0x2bac, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9fc6);
        EXPECT(gbc.pc(), 0x2bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0375
        gbc.setState(0xd8ed, 0x687c, 0x78a0, 0x7cce, 0x5772, 0xea7, 0x1, 0x0);
        gbc.writeMem(0xd8ed, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x687c);
        EXPECT(gbc.pc(), 0xd8ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ed), 0xcb);
        EXPECT(gbc.readMem(0xd8ee), 0x4a);
        // CB 4A 0377
        gbc.setState(0x19ff, 0xc660, 0x8760, 0x8781, 0x547, 0x6cd8, 0x1, 0x0);
        gbc.writeMem(0x19ff, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc660);
        EXPECT(gbc.pc(), 0x1a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0378
        gbc.setState(0x4727, 0x195b, 0xaa70, 0x3c07, 0x9c87, 0x41b9, 0x0, 0x1);
        gbc.writeMem(0x4727, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x195b);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0379
        gbc.setState(0x530a, 0xcd8f, 0xeb20, 0xfd6a, 0x6430, 0x5c71, 0x0, 0x1);
        gbc.writeMem(0x530a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xcd8f);
        EXPECT(gbc.pc(), 0x530c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 037A
        gbc.setState(0x2b7e, 0x5443, 0x6890, 0xf91f, 0x98ba, 0x7bb9, 0x1, 0x0);
        gbc.writeMem(0x2b7e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5443);
        EXPECT(gbc.pc(), 0x2b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 037B
        gbc.setState(0x4637, 0x5fcc, 0x940, 0x7c2e, 0xb179, 0x134c, 0x1, 0x0);
        gbc.writeMem(0x4637, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5fcc);
        EXPECT(gbc.pc(), 0x4639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 037C
        gbc.setState(0xd61e, 0x42b3, 0xb690, 0xfec7, 0xd290, 0xdf9f, 0x0, 0x1);
        gbc.writeMem(0xd61e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x42b3);
        EXPECT(gbc.pc(), 0xd620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61e), 0xcb);
        EXPECT(gbc.readMem(0xd61f), 0x4a);
        // CB 4A 037D
        gbc.setState(0xbe73, 0x2c9, 0x1980, 0x6ecd, 0xd253, 0x31fc, 0x1, 0x0);
        gbc.writeMem(0xbe73, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2c9);
        EXPECT(gbc.pc(), 0xbe75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe73), 0xcb);
        EXPECT(gbc.readMem(0xbe74), 0x4a);
        // CB 4A 037E
        gbc.setState(0x50b3, 0x9ad2, 0x2020, 0x3b9a, 0xd2c2, 0x751, 0x1, 0x0);
        gbc.writeMem(0x50b3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9ad2);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 037F
        gbc.setState(0xe1f3, 0x8af1, 0xacd0, 0x11a7, 0x509f, 0x3d6a, 0x1, 0x0);
        gbc.writeMem(0xe1f3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8af1);
        EXPECT(gbc.pc(), 0xe1f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1f3), 0xcb);
        EXPECT(gbc.readMem(0xe1f4), 0x4a);
        // CB 4A 0380
        gbc.setState(0x40f5, 0xaf55, 0x2050, 0x5073, 0xd11f, 0x8ec, 0x1, 0x0);
        gbc.writeMem(0x40f5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xaf55);
        EXPECT(gbc.pc(), 0x40f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0381
        gbc.setState(0x2af5, 0x4002, 0x2600, 0xbd73, 0xd575, 0x49cd, 0x1, 0x0);
        gbc.writeMem(0x2af5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4002);
        EXPECT(gbc.pc(), 0x2af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0382
        gbc.setState(0x7d7d, 0xb52, 0x4790, 0x33dd, 0xc8e9, 0xc6a7, 0x1, 0x0);
        gbc.writeMem(0x7d7d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb52);
        EXPECT(gbc.pc(), 0x7d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0383
        gbc.setState(0x25f0, 0x8a66, 0x3c70, 0x5957, 0xc476, 0xdb9e, 0x1, 0x0);
        gbc.writeMem(0x25f0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8a66);
        EXPECT(gbc.pc(), 0x25f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0384
        gbc.setState(0x3362, 0xd595, 0x1ce0, 0xa36c, 0x3134, 0x43d5, 0x1, 0x0);
        gbc.writeMem(0x3362, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd595);
        EXPECT(gbc.pc(), 0x3364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0385
        gbc.setState(0x8b18, 0x52dc, 0x8ee0, 0xe916, 0x84f4, 0x9c1, 0x0, 0x0);
        gbc.writeMem(0x8b18, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x52dc);
        EXPECT(gbc.pc(), 0x8b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b18), 0xcb);
        EXPECT(gbc.readMem(0x8b19), 0x4a);
        // CB 4A 0386
        gbc.setState(0xc397, 0x13e7, 0x6710, 0x9c4b, 0xa38d, 0x488b, 0x0, 0x0);
        gbc.writeMem(0xc397, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x13e7);
        EXPECT(gbc.pc(), 0xc399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc397), 0xcb);
        EXPECT(gbc.readMem(0xc398), 0x4a);
        // CB 4A 0387
        gbc.setState(0x3106, 0x45e6, 0x2210, 0xa554, 0xad13, 0xc96b, 0x1, 0x1);
        gbc.writeMem(0x3106, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x45e6);
        EXPECT(gbc.pc(), 0x3108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0388
        gbc.setState(0xee4b, 0xa14d, 0xe0f0, 0x9a5a, 0x7b1f, 0xa9ad, 0x0, 0x1);
        gbc.writeMem(0xee4b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa14d);
        EXPECT(gbc.pc(), 0xee4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee4b), 0xcb);
        EXPECT(gbc.readMem(0xee4c), 0x4a);
        // CB 4A 0389
        gbc.setState(0x1a81, 0x98e, 0x7ba0, 0xe64, 0x514, 0x5573, 0x0, 0x1);
        gbc.writeMem(0x1a81, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x98e);
        EXPECT(gbc.pc(), 0x1a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 038A
        gbc.setState(0x35e1, 0xa1a1, 0xcb00, 0xd9f, 0xe6c6, 0xd737, 0x0, 0x0);
        gbc.writeMem(0x35e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa1a1);
        EXPECT(gbc.pc(), 0x35e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 038B
        gbc.setState(0x261d, 0x3b81, 0xd340, 0xdd9b, 0x7100, 0xdb79, 0x0, 0x1);
        gbc.writeMem(0x261d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3b81);
        EXPECT(gbc.pc(), 0x261f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 038C
        gbc.setState(0xa213, 0xd257, 0x3f50, 0xdc61, 0x5168, 0xcb84, 0x1, 0x1);
        gbc.writeMem(0xa213, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0xa215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa213), 0xcb);
        EXPECT(gbc.readMem(0xa214), 0x4a);
        // CB 4A 038D
        gbc.setState(0xd29d, 0x7b62, 0xf2b0, 0x8f4f, 0x4ce9, 0xd0dd, 0x1, 0x0);
        gbc.writeMem(0xd29d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7b62);
        EXPECT(gbc.pc(), 0xd29f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd29d), 0xcb);
        EXPECT(gbc.readMem(0xd29e), 0x4a);
        // CB 4A 038E
        gbc.setState(0x9c9a, 0x5269, 0xc280, 0xe2c6, 0x5cf, 0x3887, 0x1, 0x0);
        gbc.writeMem(0x9c9a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5269);
        EXPECT(gbc.pc(), 0x9c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c9a), 0xcb);
        EXPECT(gbc.readMem(0x9c9b), 0x4a);
        // CB 4A 038F
        gbc.setState(0x7acb, 0xdbc8, 0x8230, 0x4280, 0x94c2, 0x263b, 0x0, 0x1);
        gbc.writeMem(0x7acb, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdbc8);
        EXPECT(gbc.pc(), 0x7acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0390
        gbc.setState(0x7a9d, 0x925, 0xc6b0, 0xad3f, 0x634c, 0xbdaf, 0x1, 0x0);
        gbc.writeMem(0x7a9d, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x925);
        EXPECT(gbc.pc(), 0x7a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0391
        gbc.setState(0xe649, 0x68f5, 0x6a70, 0x8415, 0x1f3a, 0x4ed8, 0x0, 0x1);
        gbc.writeMem(0xe649, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x68f5);
        EXPECT(gbc.pc(), 0xe64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe649), 0xcb);
        EXPECT(gbc.readMem(0xe64a), 0x4a);
        // CB 4A 0392
        gbc.setState(0xc018, 0xa54e, 0x7460, 0x5e1f, 0xc23, 0xbf6e, 0x0, 0x1);
        gbc.writeMem(0xc018, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa54e);
        EXPECT(gbc.pc(), 0xc01a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc018), 0xcb);
        EXPECT(gbc.readMem(0xc019), 0x4a);
        // CB 4A 0393
        gbc.setState(0xc968, 0x897d, 0x5a10, 0x7c4d, 0x471a, 0xc256, 0x0, 0x1);
        gbc.writeMem(0xc968, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x897d);
        EXPECT(gbc.pc(), 0xc96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc968), 0xcb);
        EXPECT(gbc.readMem(0xc969), 0x4a);
        // CB 4A 0394
        gbc.setState(0x5b5f, 0xe18f, 0x8720, 0xa62d, 0x96eb, 0x5156, 0x1, 0x0);
        gbc.writeMem(0x5b5f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe18f);
        EXPECT(gbc.pc(), 0x5b61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 0395
        gbc.setState(0xe12b, 0x1ee5, 0x90a0, 0x5a4f, 0xcfec, 0x5033, 0x1, 0x0);
        gbc.writeMem(0xe12b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1ee5);
        EXPECT(gbc.pc(), 0xe12d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe12b), 0xcb);
        EXPECT(gbc.readMem(0xe12c), 0x4a);
        // CB 4A 0396
        gbc.setState(0xd6b, 0xd9a2, 0xc190, 0x8dfb, 0xb2c6, 0xf51e, 0x1, 0x0);
        gbc.writeMem(0xd6b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd9a2);
        EXPECT(gbc.pc(), 0xd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 0397
        gbc.setState(0xa6de, 0x18ec, 0xcad0, 0x7a2f, 0x8c15, 0xe654, 0x0, 0x1);
        gbc.writeMem(0xa6de, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x18ec);
        EXPECT(gbc.pc(), 0xa6e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6de), 0xcb);
        EXPECT(gbc.readMem(0xa6df), 0x4a);
        // CB 4A 0398
        gbc.setState(0xe80c, 0x3957, 0x4650, 0x3eab, 0x9dc, 0xd05, 0x0, 0x1);
        gbc.writeMem(0xe80c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3957);
        EXPECT(gbc.pc(), 0xe80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe80c), 0xcb);
        EXPECT(gbc.readMem(0xe80d), 0x4a);
        // CB 4A 0399
        gbc.setState(0x3022, 0xa7c5, 0x5f80, 0x6b3e, 0x6699, 0x5eb1, 0x0, 0x0);
        gbc.writeMem(0x3022, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa7c5);
        EXPECT(gbc.pc(), 0x3024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 039A
        gbc.setState(0x289b, 0xc871, 0x1310, 0x2a9d, 0x3d44, 0xc38d, 0x1, 0x0);
        gbc.writeMem(0x289b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc871);
        EXPECT(gbc.pc(), 0x289d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 039B
        gbc.setState(0x9ea7, 0x77c3, 0xf10, 0x52dd, 0x4f3, 0x8013, 0x0, 0x1);
        gbc.writeMem(0x9ea7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x77c3);
        EXPECT(gbc.pc(), 0x9ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ea7), 0xcb);
        EXPECT(gbc.readMem(0x9ea8), 0x4a);
        // CB 4A 039C
        gbc.setState(0x4f85, 0x5705, 0xd660, 0x6ac2, 0xde12, 0xd588, 0x0, 0x0);
        gbc.writeMem(0x4f85, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5705);
        EXPECT(gbc.pc(), 0x4f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 039D
        gbc.setState(0xc380, 0x2723, 0xe7a0, 0x4cc4, 0x985b, 0xbc6e, 0x0, 0x1);
        gbc.writeMem(0xc380, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2723);
        EXPECT(gbc.pc(), 0xc382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc380), 0xcb);
        EXPECT(gbc.readMem(0xc381), 0x4a);
        // CB 4A 039E
        gbc.setState(0x52a5, 0x8814, 0x39a0, 0xb813, 0xc747, 0x2e2a, 0x1, 0x1);
        gbc.writeMem(0x52a5, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8814);
        EXPECT(gbc.pc(), 0x52a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 039F
        gbc.setState(0x2340, 0x2cc4, 0x70c0, 0xecee, 0xf194, 0xda04, 0x1, 0x1);
        gbc.writeMem(0x2340, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2cc4);
        EXPECT(gbc.pc(), 0x2342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03A0
        gbc.setState(0xb724, 0xf2e3, 0x5920, 0x765b, 0x6195, 0xa94a, 0x1, 0x1);
        gbc.writeMem(0xb724, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf2e3);
        EXPECT(gbc.pc(), 0xb726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb724), 0xcb);
        EXPECT(gbc.readMem(0xb725), 0x4a);
        // CB 4A 03A1
        gbc.setState(0xdb46, 0x6a7e, 0x5990, 0xc53c, 0xee2c, 0xe07, 0x1, 0x1);
        gbc.writeMem(0xdb46, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6a7e);
        EXPECT(gbc.pc(), 0xdb48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb46), 0xcb);
        EXPECT(gbc.readMem(0xdb47), 0x4a);
        // CB 4A 03A2
        gbc.setState(0xc7c2, 0xd4da, 0xdf20, 0x4b68, 0x53d6, 0xa73b, 0x1, 0x0);
        gbc.writeMem(0xc7c2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd4da);
        EXPECT(gbc.pc(), 0xc7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c2), 0xcb);
        EXPECT(gbc.readMem(0xc7c3), 0x4a);
        // CB 4A 03A3
        gbc.setState(0x9a90, 0xa94d, 0x4220, 0x2e11, 0xf337, 0x74d2, 0x1, 0x1);
        gbc.writeMem(0x9a90, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa94d);
        EXPECT(gbc.pc(), 0x9a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a90), 0xcb);
        EXPECT(gbc.readMem(0x9a91), 0x4a);
        // CB 4A 03A4
        gbc.setState(0x46c2, 0xa8dc, 0xfd60, 0xb87, 0xe7d7, 0x2a8d, 0x0, 0x1);
        gbc.writeMem(0x46c2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa8dc);
        EXPECT(gbc.pc(), 0x46c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03A5
        gbc.setState(0xa78f, 0x6135, 0xf8f0, 0xaf17, 0xc12f, 0x2556, 0x1, 0x1);
        gbc.writeMem(0xa78f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x6135);
        EXPECT(gbc.pc(), 0xa791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa78f), 0xcb);
        EXPECT(gbc.readMem(0xa790), 0x4a);
        // CB 4A 03A6
        gbc.setState(0x58e3, 0xb5ff, 0xe990, 0xf7e, 0xdee8, 0xf263, 0x0, 0x1);
        gbc.writeMem(0x58e3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb5ff);
        EXPECT(gbc.pc(), 0x58e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03A7
        gbc.setState(0x64e1, 0x1248, 0xad50, 0x6fba, 0xda96, 0xbaf1, 0x1, 0x0);
        gbc.writeMem(0x64e1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1248);
        EXPECT(gbc.pc(), 0x64e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03A8
        gbc.setState(0x8428, 0x9c45, 0x3bd0, 0x3c50, 0x8750, 0xb085, 0x1, 0x1);
        gbc.writeMem(0x8428, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9c45);
        EXPECT(gbc.pc(), 0x842a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8428), 0xcb);
        EXPECT(gbc.readMem(0x8429), 0x4a);
        // CB 4A 03AA
        gbc.setState(0xddc9, 0x9314, 0x290, 0x9e67, 0xcdd5, 0xbaa9, 0x0, 0x1);
        gbc.writeMem(0xddc9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9314);
        EXPECT(gbc.pc(), 0xddcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc9), 0xcb);
        EXPECT(gbc.readMem(0xddca), 0x4a);
        // CB 4A 03AB
        gbc.setState(0xab17, 0xb574, 0xdba0, 0xa5d6, 0x5a62, 0x386a, 0x1, 0x0);
        gbc.writeMem(0xab17, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb574);
        EXPECT(gbc.pc(), 0xab19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab17), 0xcb);
        EXPECT(gbc.readMem(0xab18), 0x4a);
        // CB 4A 03AC
        gbc.setState(0x7001, 0x1576, 0x32c0, 0xdf13, 0x6af5, 0x9b24, 0x1, 0x1);
        gbc.writeMem(0x7001, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1576);
        EXPECT(gbc.pc(), 0x7003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03AD
        gbc.setState(0x1a05, 0xe42, 0x16a0, 0x67dc, 0x299b, 0xcad6, 0x0, 0x1);
        gbc.writeMem(0x1a05, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe42);
        EXPECT(gbc.pc(), 0x1a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03AE
        gbc.setState(0x87d0, 0x99, 0x87a0, 0x738d, 0x8dc6, 0xeddd, 0x0, 0x1);
        gbc.writeMem(0x87d0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x99);
        EXPECT(gbc.pc(), 0x87d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d0), 0xcb);
        EXPECT(gbc.readMem(0x87d1), 0x4a);
        // CB 4A 03B0
        gbc.setState(0xe9c3, 0xb491, 0xca10, 0x276b, 0x786e, 0x7974, 0x1, 0x1);
        gbc.writeMem(0xe9c3, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb491);
        EXPECT(gbc.pc(), 0xe9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9c3), 0xcb);
        EXPECT(gbc.readMem(0xe9c4), 0x4a);
        // CB 4A 03B1
        gbc.setState(0xbc4f, 0x65ed, 0x6fe0, 0x657a, 0x9d4c, 0xfce2, 0x0, 0x0);
        gbc.writeMem(0xbc4f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x65ed);
        EXPECT(gbc.pc(), 0xbc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc4f), 0xcb);
        EXPECT(gbc.readMem(0xbc50), 0x4a);
        // CB 4A 03B2
        gbc.setState(0x2cce, 0x94e4, 0x3f30, 0xc1cc, 0x6bf7, 0xcabe, 0x0, 0x1);
        gbc.writeMem(0x2cce, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x94e4);
        EXPECT(gbc.pc(), 0x2cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03B4
        gbc.setState(0x828, 0x28a0, 0x3c0, 0x4806, 0xd1c3, 0x29e6, 0x0, 0x1);
        gbc.writeMem(0x828, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x28a0);
        EXPECT(gbc.pc(), 0x82a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03B5
        gbc.setState(0x4b1b, 0xfc9e, 0x7c0, 0x694a, 0xffa1, 0xe41, 0x1, 0x1);
        gbc.writeMem(0x4b1b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xfc9e);
        EXPECT(gbc.pc(), 0x4b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03B6
        gbc.setState(0x41d7, 0x6a1a, 0x9610, 0xabc9, 0x5824, 0x9e25, 0x1, 0x1);
        gbc.writeMem(0x41d7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6a1a);
        EXPECT(gbc.pc(), 0x41d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03B7
        gbc.setState(0x89ef, 0xd3bf, 0xf500, 0x6516, 0xc9f4, 0xe3be, 0x0, 0x0);
        gbc.writeMem(0x89ef, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd3bf);
        EXPECT(gbc.pc(), 0x89f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ef), 0xcb);
        EXPECT(gbc.readMem(0x89f0), 0x4a);
        // CB 4A 03B8
        gbc.setState(0x2155, 0xc103, 0xeca0, 0xafee, 0xc9f4, 0x33f3, 0x1, 0x1);
        gbc.writeMem(0x2155, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc103);
        EXPECT(gbc.pc(), 0x2157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03B9
        gbc.setState(0x8034, 0x799e, 0xf9f0, 0xd624, 0xd753, 0x744f, 0x0, 0x1);
        gbc.writeMem(0x8034, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x799e);
        EXPECT(gbc.pc(), 0x8036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8034), 0xcb);
        EXPECT(gbc.readMem(0x8035), 0x4a);
        // CB 4A 03BB
        gbc.setState(0x7766, 0x1540, 0xaf40, 0x8c97, 0x3b80, 0xda4c, 0x0, 0x1);
        gbc.writeMem(0x7766, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1540);
        EXPECT(gbc.pc(), 0x7768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03BC
        gbc.setState(0xaf06, 0x2fe3, 0x1560, 0x7ebe, 0x6ee6, 0xaa37, 0x0, 0x1);
        gbc.writeMem(0xaf06, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2fe3);
        EXPECT(gbc.pc(), 0xaf08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf06), 0xcb);
        EXPECT(gbc.readMem(0xaf07), 0x4a);
        // CB 4A 03BD
        gbc.setState(0x58d2, 0xf873, 0x74a0, 0x230, 0x182f, 0x2eb6, 0x0, 0x0);
        gbc.writeMem(0x58d2, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf873);
        EXPECT(gbc.pc(), 0x58d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03BE
        gbc.setState(0x1862, 0x66af, 0xd690, 0x80d9, 0x1d74, 0x3520, 0x0, 0x0);
        gbc.writeMem(0x1862, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x66af);
        EXPECT(gbc.pc(), 0x1864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03BF
        gbc.setState(0xf37, 0x34a4, 0xb3a0, 0x623a, 0xefb1, 0x103c, 0x0, 0x0);
        gbc.writeMem(0xf37, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x34a4);
        EXPECT(gbc.pc(), 0xf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03C0
        gbc.setState(0xc9f9, 0x23af, 0x1ed0, 0x3854, 0xdaab, 0xeedc, 0x0, 0x0);
        gbc.writeMem(0xc9f9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x23af);
        EXPECT(gbc.pc(), 0xc9fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f9), 0xcb);
        EXPECT(gbc.readMem(0xc9fa), 0x4a);
        // CB 4A 03C1
        gbc.setState(0xc8c0, 0x71ba, 0x51f0, 0xb3b0, 0xe8f6, 0x9a65, 0x0, 0x1);
        gbc.writeMem(0xc8c0, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x71ba);
        EXPECT(gbc.pc(), 0xc8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8c0), 0xcb);
        EXPECT(gbc.readMem(0xc8c1), 0x4a);
        // CB 4A 03C2
        gbc.setState(0x54d6, 0x3d0, 0xfcb0, 0x8a51, 0xc4b2, 0x42d, 0x0, 0x1);
        gbc.writeMem(0x54d6, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3d0);
        EXPECT(gbc.pc(), 0x54d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03C3
        gbc.setState(0x836f, 0xb2af, 0x5ab0, 0x367c, 0x2be0, 0x5344, 0x1, 0x1);
        gbc.writeMem(0x836f, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb2af);
        EXPECT(gbc.pc(), 0x8371);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836f), 0xcb);
        EXPECT(gbc.readMem(0x8370), 0x4a);
        // CB 4A 03C4
        gbc.setState(0x2fc1, 0x1488, 0x5760, 0x8868, 0x6584, 0x266e, 0x1, 0x0);
        gbc.writeMem(0x2fc1, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1488);
        EXPECT(gbc.pc(), 0x2fc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03C5
        gbc.setState(0xc152, 0x5b65, 0x15d0, 0x6d42, 0x7bf8, 0x6dcb, 0x1, 0x1);
        gbc.writeMem(0xc152, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5b65);
        EXPECT(gbc.pc(), 0xc154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc152), 0xcb);
        EXPECT(gbc.readMem(0xc153), 0x4a);
        // CB 4A 03C6
        gbc.setState(0x6da8, 0x16e7, 0x39d0, 0xa394, 0x3e0b, 0xe861, 0x1, 0x0);
        gbc.writeMem(0x6da8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x16e7);
        EXPECT(gbc.pc(), 0x6daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03C7
        gbc.setState(0x5107, 0xed9e, 0x250, 0xd0a4, 0xeadd, 0x24bd, 0x1, 0x0);
        gbc.writeMem(0x5107, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xed9e);
        EXPECT(gbc.pc(), 0x5109);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03C8
        gbc.setState(0xebe9, 0xa19, 0x7370, 0x3c38, 0x331d, 0x372a, 0x1, 0x0);
        gbc.writeMem(0xebe9, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa19);
        EXPECT(gbc.pc(), 0xebeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe9), 0xcb);
        EXPECT(gbc.readMem(0xebea), 0x4a);
        // CB 4A 03C9
        gbc.setState(0x1963, 0xb72, 0xb780, 0xcbaa, 0x1012, 0xaf8d, 0x0, 0x0);
        gbc.writeMem(0x1963, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb72);
        EXPECT(gbc.pc(), 0x1965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03CA
        gbc.setState(0x72ab, 0xa4fe, 0x81f0, 0xc31c, 0x67a4, 0xe4a3, 0x0, 0x0);
        gbc.writeMem(0x72ab, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa4fe);
        EXPECT(gbc.pc(), 0x72ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03CB
        gbc.setState(0xc52, 0xe1b8, 0x1740, 0x6b00, 0xe060, 0x3aa5, 0x0, 0x0);
        gbc.writeMem(0xc52, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe1b8);
        EXPECT(gbc.pc(), 0xc54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03CC
        gbc.setState(0xb70b, 0xa84b, 0xfc00, 0xe93f, 0xa3ad, 0x8910, 0x1, 0x0);
        gbc.writeMem(0xb70b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa84b);
        EXPECT(gbc.pc(), 0xb70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70b), 0xcb);
        EXPECT(gbc.readMem(0xb70c), 0x4a);
        // CB 4A 03CD
        gbc.setState(0xe03c, 0x1b0a, 0xcd00, 0x8b5f, 0xa1cc, 0xcf4d, 0x1, 0x1);
        gbc.writeMem(0xe03c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1b0a);
        EXPECT(gbc.pc(), 0xe03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03c), 0xcb);
        EXPECT(gbc.readMem(0xe03d), 0x4a);
        // CB 4A 03CE
        gbc.setState(0x240e, 0x35b, 0x4dc0, 0x48ba, 0x398e, 0x5956, 0x0, 0x0);
        gbc.writeMem(0x240e, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x35b);
        EXPECT(gbc.pc(), 0x2410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03CF
        gbc.setState(0x3dd4, 0xc737, 0x6ef0, 0xd1ee, 0xdfc6, 0x507b, 0x0, 0x1);
        gbc.writeMem(0x3dd4, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc737);
        EXPECT(gbc.pc(), 0x3dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03D0
        gbc.setState(0x6488, 0x99a5, 0xe420, 0xf728, 0x6224, 0xfb7d, 0x0, 0x0);
        gbc.writeMem(0x6488, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x99a5);
        EXPECT(gbc.pc(), 0x648a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03D1
        gbc.setState(0x6cfa, 0xed84, 0x1540, 0xd15d, 0x4a74, 0xe5a3, 0x0, 0x1);
        gbc.writeMem(0x6cfa, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xed84);
        EXPECT(gbc.pc(), 0x6cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03D2
        gbc.setState(0x5125, 0x398c, 0x7ee0, 0x3745, 0xd790, 0xa11d, 0x1, 0x0);
        gbc.writeMem(0x5125, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x398c);
        EXPECT(gbc.pc(), 0x5127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03D3
        gbc.setState(0x3360, 0x933e, 0xe520, 0x9d6b, 0xeb33, 0x3f6b, 0x0, 0x1);
        gbc.writeMem(0x3360, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x933e);
        EXPECT(gbc.pc(), 0x3362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03D5
        gbc.setState(0x1a7c, 0x4999, 0x8500, 0x889a, 0x66ca, 0x5758, 0x0, 0x1);
        gbc.writeMem(0x1a7c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4999);
        EXPECT(gbc.pc(), 0x1a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03D6
        gbc.setState(0xd21c, 0x852, 0x6f70, 0xa31, 0x6ade, 0x42d2, 0x1, 0x1);
        gbc.writeMem(0xd21c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x852);
        EXPECT(gbc.pc(), 0xd21e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd21c), 0xcb);
        EXPECT(gbc.readMem(0xd21d), 0x4a);
        // CB 4A 03D7
        gbc.setState(0x879, 0xc48c, 0xfb30, 0xc42e, 0x9e3e, 0x533, 0x1, 0x1);
        gbc.writeMem(0x879, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0x87b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03D8
        gbc.setState(0xe6d7, 0xe6ef, 0x8920, 0xd444, 0x4008, 0x4955, 0x0, 0x0);
        gbc.writeMem(0xe6d7, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe6ef);
        EXPECT(gbc.pc(), 0xe6d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d7), 0xcb);
        EXPECT(gbc.readMem(0xe6d8), 0x4a);
        // CB 4A 03D9
        gbc.setState(0xa26a, 0x8661, 0xc6f0, 0x36b4, 0x1a2d, 0x9c05, 0x0, 0x0);
        gbc.writeMem(0xa26a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8661);
        EXPECT(gbc.pc(), 0xa26c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa26a), 0xcb);
        EXPECT(gbc.readMem(0xa26b), 0x4a);
        // CB 4A 03DA
        gbc.setState(0x7dcf, 0xd3fe, 0xb730, 0x1d7d, 0x4bfe, 0xca07, 0x1, 0x1);
        gbc.writeMem(0x7dcf, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd3fe);
        EXPECT(gbc.pc(), 0x7dd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03DB
        gbc.setState(0x9f3c, 0x3c8, 0x84d0, 0xd5ae, 0xa9, 0xf594, 0x1, 0x1);
        gbc.writeMem(0x9f3c, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3c8);
        EXPECT(gbc.pc(), 0x9f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3c), 0xcb);
        EXPECT(gbc.readMem(0x9f3d), 0x4a);
        // CB 4A 03DC
        gbc.setState(0xb7d8, 0x8ccb, 0x17c0, 0xf249, 0xeb56, 0x555d, 0x1, 0x1);
        gbc.writeMem(0xb7d8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8ccb);
        EXPECT(gbc.pc(), 0xb7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d8), 0xcb);
        EXPECT(gbc.readMem(0xb7d9), 0x4a);
        // CB 4A 03DD
        gbc.setState(0x1495, 0x2f7e, 0x81b0, 0x4294, 0xbd3b, 0x6c66, 0x0, 0x1);
        gbc.writeMem(0x1495, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2f7e);
        EXPECT(gbc.pc(), 0x1497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03DE
        gbc.setState(0x91ec, 0xaf62, 0x1990, 0x9a64, 0x3014, 0x2a66, 0x1, 0x0);
        gbc.writeMem(0x91ec, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xaf62);
        EXPECT(gbc.pc(), 0x91ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ec), 0xcb);
        EXPECT(gbc.readMem(0x91ed), 0x4a);
        // CB 4A 03DF
        gbc.setState(0xb65b, 0xc9ad, 0x7320, 0x15e8, 0xdeaa, 0x4ec6, 0x0, 0x0);
        gbc.writeMem(0xb65b, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc9ad);
        EXPECT(gbc.pc(), 0xb65d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb65b), 0xcb);
        EXPECT(gbc.readMem(0xb65c), 0x4a);
        // CB 4A 03E0
        gbc.setState(0xc903, 0x4ab0, 0xe580, 0x25a2, 0x5ea2, 0xbda4, 0x1, 0x0);
        gbc.writeMem(0xc903, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4ab0);
        EXPECT(gbc.pc(), 0xc905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc903), 0xcb);
        EXPECT(gbc.readMem(0xc904), 0x4a);
        // CB 4A 03E1
        gbc.setState(0x6765, 0x6a55, 0x5d0, 0x68ea, 0x7912, 0x25b2, 0x0, 0x1);
        gbc.writeMem(0x6765, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6a55);
        EXPECT(gbc.pc(), 0x6767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03E2
        gbc.setState(0xa7be, 0xd133, 0x23d0, 0xa265, 0x1cf0, 0x3edc, 0x0, 0x1);
        gbc.writeMem(0xa7be, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd133);
        EXPECT(gbc.pc(), 0xa7c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7be), 0xcb);
        EXPECT(gbc.readMem(0xa7bf), 0x4a);
        // CB 4A 03E3
        gbc.setState(0x92c8, 0x6151, 0x4d10, 0x365f, 0xb381, 0xa560, 0x1, 0x0);
        gbc.writeMem(0x92c8, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6151);
        EXPECT(gbc.pc(), 0x92ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c8), 0xcb);
        EXPECT(gbc.readMem(0x92c9), 0x4a);
        // CB 4A 03E4
        gbc.setState(0xee94, 0x41fe, 0xb160, 0x1fbf, 0x57cb, 0x118b, 0x0, 0x1);
        gbc.writeMem(0xee94, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x41fe);
        EXPECT(gbc.pc(), 0xee96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee94), 0xcb);
        EXPECT(gbc.readMem(0xee95), 0x4a);
        // CB 4A 03E5
        gbc.setState(0x2909, 0x859c, 0x8490, 0x8d06, 0xf199, 0x44f4, 0x0, 0x1);
        gbc.writeMem(0x2909, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x859c);
        EXPECT(gbc.pc(), 0x290b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 4A 03E6
        gbc.setState(0x2a9a, 0x1034, 0x380, 0xe142, 0x4ef2, 0x5796, 0x1, 0x1);
        gbc.writeMem(0x2a9a, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1034);
        EXPECT(gbc.pc(), 0x2a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 4A 03E7
        gbc.setState(0x82, 0xab85, 0x5070, 0xa8c8, 0x352c, 0x86f3, 0x1, 0x0);
        gbc.writeMem(0x82, { 0xcb, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xab85);
        EXPECT(gbc.pc(), 0x84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
