    TEST(gbcemu, opcode_d8) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // D8 0000
        gbc.setState(0xde1e, 0xcfeb, 0x99b0, 0x4e45, 0x632b, 0xdee4, 0x0, 0x1);
        gbc.writeMem(0xcfeb, { 0x30, 0x80 });
        gbc.writeMem(0xde1e, { 0xd8 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xcfed, gbc.sp());
        EXPECT(0x8030, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xcfeb));
        EXPECT(0x80, gbc.readMem(0xcfec));
        EXPECT(0xd8, gbc.readMem(0xde1e));
        // D8 0001
        gbc.setState(0x313d, 0x6022, 0x540, 0x768c, 0xccc0, 0x3338, 0x0, 0x0);
        gbc.writeMem(0x313d, { 0xd8 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x6022, gbc.sp());
        EXPECT(0x313e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0002
        gbc.setState(0xc829, 0xb660, 0x1220, 0x7865, 0x3890, 0x4847, 0x1, 0x0);
        gbc.writeMem(0xc829, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xb660, gbc.sp());
        EXPECT(0xc82a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc829));
        // D8 0003
        gbc.setState(0xe9fc, 0x9658, 0x3c60, 0x4aa5, 0x8989, 0x3df5, 0x0, 0x1);
        gbc.writeMem(0xe9fc, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x9658, gbc.sp());
        EXPECT(0xe9fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe9fc));
        // D8 0004
        gbc.setState(0x6dc0, 0xcc98, 0x8550, 0x3011, 0x7fad, 0x8373, 0x0, 0x1);
        gbc.writeMem(0x6dc0, { 0xd8 });
        gbc.writeMem(0xcc98, { 0xe3, 0x84 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xcc9a, gbc.sp());
        EXPECT(0x84e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0xcc98));
        EXPECT(0x84, gbc.readMem(0xcc99));
        // D8 0005
        gbc.setState(0xaca3, 0xe281, 0x1f60, 0x704a, 0x7658, 0xd99d, 0x0, 0x1);
        gbc.writeMem(0xaca3, { 0xd8 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xe281, gbc.sp());
        EXPECT(0xaca4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xaca3));
        // D8 0006
        gbc.setState(0x9a25, 0xf06d, 0xfd90, 0x83f4, 0x680b, 0xde30, 0x1, 0x0);
        gbc.writeMem(0x9a25, { 0xd8 });
        gbc.writeMem(0xf06d, { 0x9a, 0x7f });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xf06f, gbc.sp());
        EXPECT(0x7f9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9a25));
        EXPECT(0x9a, gbc.readMem(0xf06d));
        EXPECT(0x7f, gbc.readMem(0xf06e));
        // D8 0007
        gbc.setState(0x3037, 0x9de2, 0x9800, 0xd3c9, 0xe045, 0x3bd7, 0x1, 0x0);
        gbc.writeMem(0x3037, { 0xd8 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x9de2, gbc.sp());
        EXPECT(0x3038, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0008
        gbc.setState(0x1664, 0xf236, 0x6d10, 0x5e4b, 0x38d, 0x9299, 0x0, 0x1);
        gbc.writeMem(0x1664, { 0xd8 });
        gbc.writeMem(0xf236, { 0x21, 0x15 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xf238, gbc.sp());
        EXPECT(0x1521, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xf236));
        EXPECT(0x15, gbc.readMem(0xf237));
        // D8 0009
        gbc.setState(0x9ea5, 0xaed7, 0x8310, 0xf6da, 0x124c, 0xa3c5, 0x0, 0x1);
        gbc.writeMem(0x9ea5, { 0xd8 });
        gbc.writeMem(0xaed7, { 0xe4, 0xf7 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xaed9, gbc.sp());
        EXPECT(0xf7e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ea5));
        EXPECT(0xe4, gbc.readMem(0xaed7));
        EXPECT(0xf7, gbc.readMem(0xaed8));
        // D8 000A
        gbc.setState(0xdcd5, 0xe95, 0xce60, 0x594, 0x4071, 0x1b6c, 0x0, 0x0);
        gbc.writeMem(0xdcd5, { 0xd8 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xe95, gbc.sp());
        EXPECT(0xdcd6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdcd5));
        // D8 000B
        gbc.setState(0x2843, 0xe9fe, 0x5410, 0x212e, 0x964, 0xf4f, 0x0, 0x0);
        gbc.writeMem(0x2843, { 0xd8 });
        gbc.writeMem(0xe9fe, { 0xbb, 0x78 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xea00, gbc.sp());
        EXPECT(0x78bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbb, gbc.readMem(0xe9fe));
        EXPECT(0x78, gbc.readMem(0xe9ff));
        // D8 000C
        gbc.setState(0xdfb3, 0xc52, 0xd740, 0xcfb7, 0x627f, 0x9c14, 0x0, 0x1);
        gbc.writeMem(0xdfb3, { 0xd8 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xc52, gbc.sp());
        EXPECT(0xdfb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdfb3));
        // D8 000D
        gbc.setState(0x4c48, 0x62fd, 0xf2c0, 0x1b, 0xf622, 0x92d7, 0x1, 0x1);
        gbc.writeMem(0x4c48, { 0xd8 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x62fd, gbc.sp());
        EXPECT(0x4c49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 000E
        gbc.setState(0x353a, 0x8186, 0x3220, 0xb9d8, 0x9dd3, 0xc8a9, 0x1, 0x0);
        gbc.writeMem(0x353a, { 0xd8 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x8186, gbc.sp());
        EXPECT(0x353b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 000F
        gbc.setState(0x17a2, 0x1dc4, 0x3fd0, 0xe8c6, 0xc84, 0xeb2, 0x1, 0x0);
        gbc.writeMem(0x17a2, { 0xd8 });
        gbc.writeMem(0x1dc4, { 0x2, 0x84 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1dc6, gbc.sp());
        EXPECT(0x8402, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0010
        gbc.setState(0x9df7, 0xd6ba, 0xd780, 0xf1bf, 0x1e3f, 0x42c2, 0x0, 0x0);
        gbc.writeMem(0x9df7, { 0xd8 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xd6ba, gbc.sp());
        EXPECT(0x9df8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9df7));
        // D8 0012
        gbc.setState(0xebfa, 0x4912, 0x4640, 0xc75b, 0x3e51, 0x4ab1, 0x0, 0x0);
        gbc.writeMem(0xebfa, { 0xd8 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x4912, gbc.sp());
        EXPECT(0xebfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xebfa));
        // D8 0013
        gbc.setState(0x3aa2, 0xc9ae, 0xbb60, 0x949c, 0xa8ae, 0xa208, 0x0, 0x0);
        gbc.writeMem(0x3aa2, { 0xd8 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc9ae, gbc.sp());
        EXPECT(0x3aa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0014
        gbc.setState(0xef60, 0x774, 0xf70, 0xb69a, 0x10f9, 0xa1e4, 0x0, 0x0);
        gbc.writeMem(0x774, { 0xf1, 0x2f });
        gbc.writeMem(0xef60, { 0xd8 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x776, gbc.sp());
        EXPECT(0x2ff1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xef60));
        // D8 0015
        gbc.setState(0x8835, 0x7060, 0xd8c0, 0x742f, 0x4e95, 0x5826, 0x1, 0x0);
        gbc.writeMem(0x8835, { 0xd8 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x7060, gbc.sp());
        EXPECT(0x8836, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8835));
        // D8 0016
        gbc.setState(0x2d, 0x5a81, 0xe970, 0x36a1, 0x1e7, 0xf126, 0x1, 0x1);
        gbc.writeMem(0x2d, { 0xd8 });
        gbc.writeMem(0x5a81, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x5a83, gbc.sp());
        EXPECT(0xb0d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0017
        gbc.setState(0x7ed7, 0x4f18, 0xc5a0, 0x8ad2, 0xb3fa, 0x3996, 0x0, 0x1);
        gbc.writeMem(0x7ed7, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x4f18, gbc.sp());
        EXPECT(0x7ed8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0018
        gbc.setState(0x3cf1, 0xe0c6, 0x3670, 0x47e, 0x79b0, 0x67b3, 0x0, 0x0);
        gbc.writeMem(0x3cf1, { 0xd8 });
        gbc.writeMem(0xe0c6, { 0xe, 0xa4 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xe0c8, gbc.sp());
        EXPECT(0xa40e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xe0c6));
        EXPECT(0xa4, gbc.readMem(0xe0c7));
        // D8 0019
        gbc.setState(0x3c6c, 0x731b, 0xf2f0, 0xb09d, 0x5680, 0x8c16, 0x1, 0x1);
        gbc.writeMem(0x3c6c, { 0xd8 });
        gbc.writeMem(0x731b, { 0x81, 0x62 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x731d, gbc.sp());
        EXPECT(0x6281, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 001A
        gbc.setState(0x1289, 0x5f06, 0xc150, 0xe1c, 0x4745, 0xcf0d, 0x1, 0x1);
        gbc.writeMem(0x1289, { 0xd8 });
        gbc.writeMem(0x5f06, { 0x4c, 0x1f });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x5f08, gbc.sp());
        EXPECT(0x1f4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 001B
        gbc.setState(0x73f3, 0x5198, 0xd970, 0x6d54, 0xa2bd, 0xc817, 0x0, 0x0);
        gbc.writeMem(0x5198, { 0xad, 0x10 });
        gbc.writeMem(0x73f3, { 0xd8 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x519a, gbc.sp());
        EXPECT(0x10ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 001C
        gbc.setState(0xc28e, 0x3c4, 0x7060, 0x9908, 0x19, 0x4957, 0x0, 0x1);
        gbc.writeMem(0xc28e, { 0xd8 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x3c4, gbc.sp());
        EXPECT(0xc28f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc28e));
        // D8 001E
        gbc.setState(0xab5e, 0x4870, 0x61c0, 0xc66e, 0x2bca, 0xdd57, 0x0, 0x0);
        gbc.writeMem(0xab5e, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x4870, gbc.sp());
        EXPECT(0xab5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xab5e));
        // D8 001F
        gbc.setState(0x76a4, 0x6e7b, 0xcb00, 0x818c, 0x291f, 0xe493, 0x0, 0x1);
        gbc.writeMem(0x76a4, { 0xd8 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x6e7b, gbc.sp());
        EXPECT(0x76a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0020
        gbc.setState(0xcb93, 0x9d2f, 0xe320, 0x2ffb, 0x778f, 0xb6c, 0x1, 0x1);
        gbc.writeMem(0xcb93, { 0xd8 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x9d2f, gbc.sp());
        EXPECT(0xcb94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcb93));
        // D8 0021
        gbc.setState(0x6ab2, 0xddf5, 0x2d40, 0xfa30, 0x6ce5, 0x559, 0x0, 0x1);
        gbc.writeMem(0x6ab2, { 0xd8 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xddf5, gbc.sp());
        EXPECT(0x6ab3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0022
        gbc.setState(0xd38c, 0xa4e6, 0x5f60, 0x23cb, 0xab3, 0x86ec, 0x0, 0x0);
        gbc.writeMem(0xd38c, { 0xd8 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xa4e6, gbc.sp());
        EXPECT(0xd38d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd38c));
        // D8 0023
        gbc.setState(0xc135, 0x7a33, 0xae40, 0x6eac, 0x47fe, 0x15f4, 0x0, 0x0);
        gbc.writeMem(0xc135, { 0xd8 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x7a33, gbc.sp());
        EXPECT(0xc136, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc135));
        // D8 0024
        gbc.setState(0x9d7d, 0xb0be, 0x2220, 0xa083, 0x27dc, 0x4dae, 0x0, 0x1);
        gbc.writeMem(0x9d7d, { 0xd8 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xb0be, gbc.sp());
        EXPECT(0x9d7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9d7d));
        // D8 0025
        gbc.setState(0x575, 0x3d5f, 0x9eb0, 0x9bcd, 0xbdf8, 0x9afd, 0x1, 0x1);
        gbc.writeMem(0x575, { 0xd8 });
        gbc.writeMem(0x3d5f, { 0xc7, 0x49 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x3d61, gbc.sp());
        EXPECT(0x49c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0027
        gbc.setState(0x1075, 0x143a, 0x5250, 0xc71e, 0x1b0c, 0x5556, 0x0, 0x1);
        gbc.writeMem(0x1075, { 0xd8 });
        gbc.writeMem(0x143a, { 0x46, 0x25 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x143c, gbc.sp());
        EXPECT(0x2546, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0028
        gbc.setState(0xc0b4, 0xbea6, 0x92c0, 0x6b0b, 0xbb63, 0x3dd1, 0x1, 0x1);
        gbc.writeMem(0xc0b4, { 0xd8 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xbea6, gbc.sp());
        EXPECT(0xc0b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc0b4));
        // D8 0029
        gbc.setState(0xecc2, 0xd126, 0x40d0, 0x6aa2, 0xe9d2, 0xb596, 0x0, 0x1);
        gbc.writeMem(0xd126, { 0x5, 0x4a });
        gbc.writeMem(0xecc2, { 0xd8 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xd128, gbc.sp());
        EXPECT(0x4a05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xd126));
        EXPECT(0x4a, gbc.readMem(0xd127));
        EXPECT(0xd8, gbc.readMem(0xecc2));
        // D8 002A
        gbc.setState(0x6697, 0xbf0, 0x39d0, 0x9b34, 0x85a2, 0xc356, 0x0, 0x0);
        gbc.writeMem(0xbf0, { 0xf, 0x9a });
        gbc.writeMem(0x6697, { 0xd8 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xbf2, gbc.sp());
        EXPECT(0x9a0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 002B
        gbc.setState(0x7271, 0xda8e, 0xf380, 0x579a, 0xf0a8, 0xbba2, 0x0, 0x1);
        gbc.writeMem(0x7271, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xda8e, gbc.sp());
        EXPECT(0x7272, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 002C
        gbc.setState(0x711a, 0x12f6, 0x8c40, 0xcb1b, 0x5fc7, 0x3353, 0x0, 0x1);
        gbc.writeMem(0x711a, { 0xd8 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x12f6, gbc.sp());
        EXPECT(0x711b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 002D
        gbc.setState(0x4dbf, 0x277d, 0xf010, 0x15f8, 0xcd92, 0x57f2, 0x0, 0x1);
        gbc.writeMem(0x277d, { 0xd, 0xc5 });
        gbc.writeMem(0x4dbf, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x277f, gbc.sp());
        EXPECT(0xc50d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 002E
        gbc.setState(0xccfd, 0x2250, 0x2880, 0x7513, 0xa81f, 0x2bf6, 0x1, 0x0);
        gbc.writeMem(0xccfd, { 0xd8 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x2250, gbc.sp());
        EXPECT(0xccfe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xccfd));
        // D8 002F
        gbc.setState(0x8a0f, 0xdeb8, 0xbdf0, 0x58a0, 0xb0c2, 0xb00a, 0x0, 0x1);
        gbc.writeMem(0x8a0f, { 0xd8 });
        gbc.writeMem(0xdeb8, { 0x34, 0xae });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xdeba, gbc.sp());
        EXPECT(0xae34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8a0f));
        EXPECT(0x34, gbc.readMem(0xdeb8));
        EXPECT(0xae, gbc.readMem(0xdeb9));
        // D8 0030
        gbc.setState(0xb93b, 0xaeed, 0x7740, 0xc792, 0x8d18, 0x675f, 0x1, 0x1);
        gbc.writeMem(0xb93b, { 0xd8 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xaeed, gbc.sp());
        EXPECT(0xb93c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb93b));
        // D8 0031
        gbc.setState(0xb8bd, 0x1038, 0xf850, 0xecce, 0x2484, 0xd176, 0x1, 0x1);
        gbc.writeMem(0x1038, { 0xd9, 0x1e });
        gbc.writeMem(0xb8bd, { 0xd8 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x103a, gbc.sp());
        EXPECT(0x1ed9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb8bd));
        // D8 0032
        gbc.setState(0x81ce, 0x2bfe, 0x7980, 0xb6c1, 0xc134, 0xc89d, 0x1, 0x1);
        gbc.writeMem(0x81ce, { 0xd8 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x2bfe, gbc.sp());
        EXPECT(0x81cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x81ce));
        // D8 0033
        gbc.setState(0x6aa5, 0x3567, 0xa1d0, 0x4183, 0xa134, 0xe0f3, 0x0, 0x0);
        gbc.writeMem(0x3567, { 0x61, 0xff });
        gbc.writeMem(0x6aa5, { 0xd8 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x3569, gbc.sp());
        EXPECT(0xff61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0034
        gbc.setState(0x5dbd, 0x10f5, 0xc080, 0xc9eb, 0x90e8, 0xefd4, 0x0, 0x1);
        gbc.writeMem(0x5dbd, { 0xd8 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x10f5, gbc.sp());
        EXPECT(0x5dbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0035
        gbc.setState(0x97bc, 0xe40b, 0xe430, 0x4636, 0xfbff, 0xc214, 0x1, 0x1);
        gbc.writeMem(0x97bc, { 0xd8 });
        gbc.writeMem(0xe40b, { 0x4d, 0x3b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xe40d, gbc.sp());
        EXPECT(0x3b4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x97bc));
        EXPECT(0x4d, gbc.readMem(0xe40b));
        EXPECT(0x3b, gbc.readMem(0xe40c));
        // D8 0036
        gbc.setState(0xb409, 0x9595, 0xa420, 0x2890, 0xfa7e, 0xbbc9, 0x0, 0x0);
        gbc.writeMem(0xb409, { 0xd8 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x9595, gbc.sp());
        EXPECT(0xb40a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb409));
        // D8 0037
        gbc.setState(0xb14b, 0xe009, 0xd960, 0x3afa, 0x850f, 0x7569, 0x1, 0x0);
        gbc.writeMem(0xb14b, { 0xd8 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe009, gbc.sp());
        EXPECT(0xb14c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb14b));
        // D8 0038
        gbc.setState(0xb53c, 0x938, 0x8810, 0x1df7, 0x8d2, 0x4eda, 0x1, 0x0);
        gbc.writeMem(0x938, { 0xbd, 0x2a });
        gbc.writeMem(0xb53c, { 0xd8 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x93a, gbc.sp());
        EXPECT(0x2abd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb53c));
        // D8 0039
        gbc.setState(0x813, 0xbd51, 0x4c90, 0x3dbf, 0x28e1, 0x3e07, 0x0, 0x0);
        gbc.writeMem(0x813, { 0xd8 });
        gbc.writeMem(0xbd51, { 0xeb, 0xa5 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xbd53, gbc.sp());
        EXPECT(0xa5eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xbd51));
        EXPECT(0xa5, gbc.readMem(0xbd52));
        // D8 003A
        gbc.setState(0xef6e, 0xbdf1, 0x3ab0, 0xaf80, 0xc1b5, 0xd7ae, 0x1, 0x0);
        gbc.writeMem(0xbdf1, { 0xc2, 0xe3 });
        gbc.writeMem(0xef6e, { 0xd8 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xbdf3, gbc.sp());
        EXPECT(0xe3c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0xbdf1));
        EXPECT(0xe3, gbc.readMem(0xbdf2));
        EXPECT(0xd8, gbc.readMem(0xef6e));
        // D8 003B
        gbc.setState(0xc66c, 0x4145, 0x66c0, 0xb87a, 0x9d47, 0x1e38, 0x0, 0x0);
        gbc.writeMem(0xc66c, { 0xd8 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x4145, gbc.sp());
        EXPECT(0xc66d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc66c));
        // D8 003C
        gbc.setState(0xc98, 0xa4c4, 0x22f0, 0x4caa, 0x58af, 0x6def, 0x1, 0x1);
        gbc.writeMem(0xc98, { 0xd8 });
        gbc.writeMem(0xa4c4, { 0x26, 0xdd });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa4c6, gbc.sp());
        EXPECT(0xdd26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xa4c4));
        EXPECT(0xdd, gbc.readMem(0xa4c5));
        // D8 003D
        gbc.setState(0xeb25, 0xea91, 0x6ab0, 0xae50, 0xc5ba, 0x632c, 0x0, 0x0);
        gbc.writeMem(0xea91, { 0x61, 0xdb });
        gbc.writeMem(0xeb25, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xea93, gbc.sp());
        EXPECT(0xdb61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x61, gbc.readMem(0xea91));
        EXPECT(0xdb, gbc.readMem(0xea92));
        EXPECT(0xd8, gbc.readMem(0xeb25));
        // D8 003E
        gbc.setState(0x33c4, 0xa5af, 0xc580, 0x2501, 0x2738, 0xfd46, 0x1, 0x0);
        gbc.writeMem(0x33c4, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xa5af, gbc.sp());
        EXPECT(0x33c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 003F
        gbc.setState(0x27e4, 0xba, 0x4670, 0x7822, 0x7d0f, 0x6543, 0x0, 0x0);
        gbc.writeMem(0xba, { 0xbc, 0x27 });
        gbc.writeMem(0x27e4, { 0xd8 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xbc, gbc.sp());
        EXPECT(0x27bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0040
        gbc.setState(0xb13, 0xb19f, 0x80d0, 0x3a5, 0x20f8, 0x573d, 0x1, 0x1);
        gbc.writeMem(0xb13, { 0xd8 });
        gbc.writeMem(0xb19f, { 0xb1, 0x77 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xb1a1, gbc.sp());
        EXPECT(0x77b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb1, gbc.readMem(0xb19f));
        EXPECT(0x77, gbc.readMem(0xb1a0));
        // D8 0041
        gbc.setState(0x6d9, 0xa210, 0x8860, 0xb2ce, 0x4991, 0x47f7, 0x1, 0x1);
        gbc.writeMem(0x6d9, { 0xd8 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xa210, gbc.sp());
        EXPECT(0x6da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0042
        gbc.setState(0x7341, 0x9bb5, 0xb890, 0x1bc, 0x6f0c, 0x6082, 0x0, 0x1);
        gbc.writeMem(0x7341, { 0xd8 });
        gbc.writeMem(0x9bb5, { 0x8f, 0xd2 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x9bb7, gbc.sp());
        EXPECT(0xd28f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0x9bb5));
        EXPECT(0xd2, gbc.readMem(0x9bb6));
        // D8 0043
        gbc.setState(0xa49a, 0x4a64, 0x8750, 0xa315, 0x2c9d, 0x63c, 0x0, 0x1);
        gbc.writeMem(0x4a64, { 0x49, 0x29 });
        gbc.writeMem(0xa49a, { 0xd8 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x4a66, gbc.sp());
        EXPECT(0x2949, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa49a));
        // D8 0044
        gbc.setState(0x6daf, 0xfb54, 0xec70, 0xcf48, 0x9ccc, 0x5243, 0x1, 0x1);
        gbc.writeMem(0x6daf, { 0xd8 });
        gbc.writeMem(0xfb54, { 0x82, 0x59 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xfb56, gbc.sp());
        EXPECT(0x5982, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x82, gbc.readMem(0xfb54));
        EXPECT(0x59, gbc.readMem(0xfb55));
        // D8 0045
        gbc.setState(0xc13e, 0x4f68, 0xd0d0, 0x8a2b, 0x4851, 0xcabb, 0x0, 0x0);
        gbc.writeMem(0x4f68, { 0x41, 0x8f });
        gbc.writeMem(0xc13e, { 0xd8 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x4f6a, gbc.sp());
        EXPECT(0x8f41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc13e));
        // D8 0046
        gbc.setState(0xce87, 0x1a3d, 0x7560, 0x5b7f, 0xad5d, 0xcea6, 0x0, 0x1);
        gbc.writeMem(0xce87, { 0xd8 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x1a3d, gbc.sp());
        EXPECT(0xce88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xce87));
        // D8 0047
        gbc.setState(0x96ad, 0x5222, 0x68c0, 0x90, 0x82b9, 0x835, 0x0, 0x1);
        gbc.writeMem(0x96ad, { 0xd8 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x5222, gbc.sp());
        EXPECT(0x96ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x96ad));
        // D8 0049
        gbc.setState(0x2a54, 0x1460, 0x2e30, 0x8571, 0xad1c, 0xe81c, 0x1, 0x0);
        gbc.writeMem(0x1460, { 0x34, 0xc1 });
        gbc.writeMem(0x2a54, { 0xd8 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x1462, gbc.sp());
        EXPECT(0xc134, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 004A
        gbc.setState(0x7711, 0xdb08, 0x33d0, 0xe921, 0xe813, 0xcd32, 0x0, 0x1);
        gbc.writeMem(0x7711, { 0xd8 });
        gbc.writeMem(0xdb08, { 0xbb, 0x4 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xdb0a, gbc.sp());
        EXPECT(0x4bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbb, gbc.readMem(0xdb08));
        EXPECT(0x4, gbc.readMem(0xdb09));
        // D8 004B
        gbc.setState(0x495, 0xcb71, 0x8a40, 0x792b, 0x8267, 0xaed4, 0x1, 0x0);
        gbc.writeMem(0x495, { 0xd8 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xcb71, gbc.sp());
        EXPECT(0x496, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 004C
        gbc.setState(0xbe3c, 0x5aa8, 0x1040, 0xbe30, 0x99a0, 0xa328, 0x1, 0x0);
        gbc.writeMem(0xbe3c, { 0xd8 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x5aa8, gbc.sp());
        EXPECT(0xbe3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe3c));
        // D8 004D
        gbc.setState(0x4091, 0xfd46, 0x5ce0, 0xc361, 0x9730, 0xca5c, 0x0, 0x1);
        gbc.writeMem(0x4091, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xfd46, gbc.sp());
        EXPECT(0x4092, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 004E
        gbc.setState(0xd21b, 0x9917, 0x5900, 0x2610, 0x200, 0x5d55, 0x0, 0x1);
        gbc.writeMem(0xd21b, { 0xd8 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x9917, gbc.sp());
        EXPECT(0xd21c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd21b));
        // D8 004F
        gbc.setState(0x5975, 0xce7d, 0xa310, 0x1b01, 0x3d0e, 0x1524, 0x0, 0x1);
        gbc.writeMem(0x5975, { 0xd8 });
        gbc.writeMem(0xce7d, { 0x35, 0x7 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xce7f, gbc.sp());
        EXPECT(0x735, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0xce7d));
        EXPECT(0x7, gbc.readMem(0xce7e));
        // D8 0050
        gbc.setState(0xe8e7, 0x7cd6, 0x6520, 0x6019, 0xf1f8, 0x600f, 0x0, 0x1);
        gbc.writeMem(0xe8e7, { 0xd8 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x7cd6, gbc.sp());
        EXPECT(0xe8e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe8e7));
        // D8 0051
        gbc.setState(0xa841, 0x2945, 0x80d0, 0xdb1c, 0xa2fa, 0xa014, 0x1, 0x0);
        gbc.writeMem(0x2945, { 0x55, 0xc2 });
        gbc.writeMem(0xa841, { 0xd8 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x2947, gbc.sp());
        EXPECT(0xc255, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa841));
        // D8 0052
        gbc.setState(0x4765, 0x8415, 0xc310, 0x13a2, 0xfbd4, 0xe8eb, 0x0, 0x0);
        gbc.writeMem(0x4765, { 0xd8 });
        gbc.writeMem(0x8415, { 0xf3, 0x63 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x8417, gbc.sp());
        EXPECT(0x63f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0x8415));
        EXPECT(0x63, gbc.readMem(0x8416));
        // D8 0053
        gbc.setState(0x5af1, 0x145a, 0x11b0, 0x14b6, 0x1fb4, 0x11d0, 0x1, 0x0);
        gbc.writeMem(0x145a, { 0x1a, 0xf7 });
        gbc.writeMem(0x5af1, { 0xd8 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x145c, gbc.sp());
        EXPECT(0xf71a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0054
        gbc.setState(0x84ab, 0x5bf9, 0x38e0, 0x1d04, 0x2e95, 0x619, 0x0, 0x0);
        gbc.writeMem(0x84ab, { 0xd8 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x5bf9, gbc.sp());
        EXPECT(0x84ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x84ab));
        // D8 0055
        gbc.setState(0xc173, 0x473c, 0xc610, 0x4d9a, 0x6e49, 0x2c84, 0x1, 0x0);
        gbc.writeMem(0x473c, { 0x61, 0x3d });
        gbc.writeMem(0xc173, { 0xd8 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x473e, gbc.sp());
        EXPECT(0x3d61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc173));
        // D8 0056
        gbc.setState(0x1f19, 0x7f53, 0xbe50, 0x8ef6, 0x2d5f, 0xcc40, 0x0, 0x1);
        gbc.writeMem(0x1f19, { 0xd8 });
        gbc.writeMem(0x7f53, { 0x48, 0xf });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x7f55, gbc.sp());
        EXPECT(0xf48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0057
        gbc.setState(0x6732, 0x8d9b, 0x3c60, 0xc052, 0x7ce3, 0x40e1, 0x0, 0x1);
        gbc.writeMem(0x6732, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x8d9b, gbc.sp());
        EXPECT(0x6733, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0058
        gbc.setState(0x59fb, 0xf0cd, 0xa5b0, 0x9f00, 0xd97e, 0x9ea0, 0x0, 0x1);
        gbc.writeMem(0x59fb, { 0xd8 });
        gbc.writeMem(0xf0cd, { 0x95, 0x7a });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xf0cf, gbc.sp());
        EXPECT(0x7a95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x95, gbc.readMem(0xf0cd));
        EXPECT(0x7a, gbc.readMem(0xf0ce));
        // D8 0059
        gbc.setState(0x3fde, 0x30cb, 0x3040, 0x4907, 0xe760, 0xa0c3, 0x0, 0x1);
        gbc.writeMem(0x3fde, { 0xd8 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x30cb, gbc.sp());
        EXPECT(0x3fdf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 005A
        gbc.setState(0xc337, 0x1eb2, 0xff40, 0x3aaf, 0xdd1b, 0x7aaa, 0x0, 0x0);
        gbc.writeMem(0xc337, { 0xd8 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x1eb2, gbc.sp());
        EXPECT(0xc338, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc337));
        // D8 005B
        gbc.setState(0xe1a5, 0x4be9, 0xeca0, 0x39b, 0x22e4, 0x4c25, 0x1, 0x1);
        gbc.writeMem(0xe1a5, { 0xd8 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x4be9, gbc.sp());
        EXPECT(0xe1a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe1a5));
        // D8 005C
        gbc.setState(0x48f9, 0x1154, 0xe2f0, 0xc564, 0x9e5e, 0x8e46, 0x1, 0x0);
        gbc.writeMem(0x1154, { 0x28, 0x84 });
        gbc.writeMem(0x48f9, { 0xd8 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x1156, gbc.sp());
        EXPECT(0x8428, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 005D
        gbc.setState(0xbd40, 0xc095, 0x72a0, 0xffdf, 0x3f6b, 0xb976, 0x1, 0x0);
        gbc.writeMem(0xbd40, { 0xd8 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xc095, gbc.sp());
        EXPECT(0xbd41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbd40));
        // D8 005E
        gbc.setState(0x80db, 0x677e, 0x3fd0, 0x9270, 0xf978, 0xaf50, 0x0, 0x0);
        gbc.writeMem(0x677e, { 0xbb, 0xbd });
        gbc.writeMem(0x80db, { 0xd8 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x6780, gbc.sp());
        EXPECT(0xbdbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x80db));
        // D8 005F
        gbc.setState(0x9db8, 0xd13c, 0xa940, 0x1e1f, 0x3140, 0xd35d, 0x1, 0x0);
        gbc.writeMem(0x9db8, { 0xd8 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xd13c, gbc.sp());
        EXPECT(0x9db9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9db8));
        // D8 0060
        gbc.setState(0xd27e, 0xe461, 0xadc0, 0x6b7, 0x8975, 0xca05, 0x1, 0x1);
        gbc.writeMem(0xd27e, { 0xd8 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xe461, gbc.sp());
        EXPECT(0xd27f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd27e));
        // D8 0061
        gbc.setState(0xddc5, 0x8385, 0x9f00, 0x43cd, 0xbb99, 0x6714, 0x0, 0x0);
        gbc.writeMem(0xddc5, { 0xd8 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x8385, gbc.sp());
        EXPECT(0xddc6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xddc5));
        // D8 0062
        gbc.setState(0x1cbd, 0x1004, 0xe8d0, 0xe4ab, 0x500c, 0xaa9e, 0x1, 0x0);
        gbc.writeMem(0x1004, { 0x2d, 0x6 });
        gbc.writeMem(0x1cbd, { 0xd8 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x1006, gbc.sp());
        EXPECT(0x62d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0063
        gbc.setState(0x58d, 0x297b, 0x69e0, 0x7dd0, 0xb479, 0x76e2, 0x0, 0x0);
        gbc.writeMem(0x58d, { 0xd8 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x297b, gbc.sp());
        EXPECT(0x58e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0064
        gbc.setState(0x1913, 0x3e34, 0xf9f0, 0x726a, 0x3043, 0xbf20, 0x0, 0x1);
        gbc.writeMem(0x1913, { 0xd8 });
        gbc.writeMem(0x3e34, { 0x22, 0xd4 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x3e36, gbc.sp());
        EXPECT(0xd422, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0065
        gbc.setState(0x4ff8, 0x816e, 0xf4e0, 0x70b5, 0x1f5b, 0xcfbf, 0x0, 0x0);
        gbc.writeMem(0x4ff8, { 0xd8 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x816e, gbc.sp());
        EXPECT(0x4ff9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0066
        gbc.setState(0x49d4, 0xd6b8, 0xd3c0, 0x98bc, 0xf6a1, 0x2cf9, 0x1, 0x1);
        gbc.writeMem(0x49d4, { 0xd8 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd6b8, gbc.sp());
        EXPECT(0x49d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0067
        gbc.setState(0x2818, 0xa7e4, 0x4640, 0xa390, 0xd73b, 0xf02e, 0x0, 0x1);
        gbc.writeMem(0x2818, { 0xd8 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xa7e4, gbc.sp());
        EXPECT(0x2819, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0068
        gbc.setState(0x7152, 0xbbb0, 0x4f20, 0xef25, 0x5a7, 0x6f7, 0x0, 0x1);
        gbc.writeMem(0x7152, { 0xd8 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xbbb0, gbc.sp());
        EXPECT(0x7153, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0069
        gbc.setState(0xd9ca, 0x465f, 0xf300, 0xcb14, 0xe107, 0xaba2, 0x1, 0x0);
        gbc.writeMem(0xd9ca, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x465f, gbc.sp());
        EXPECT(0xd9cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd9ca));
        // D8 006A
        gbc.setState(0x15dc, 0x88f, 0xd150, 0xa712, 0x7f44, 0x20db, 0x1, 0x0);
        gbc.writeMem(0x88f, { 0xdc, 0x42 });
        gbc.writeMem(0x15dc, { 0xd8 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x891, gbc.sp());
        EXPECT(0x42dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 006B
        gbc.setState(0xc912, 0x93fc, 0x2f00, 0xc115, 0xe677, 0x1420, 0x1, 0x1);
        gbc.writeMem(0xc912, { 0xd8 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x93fc, gbc.sp());
        EXPECT(0xc913, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc912));
        // D8 006C
        gbc.setState(0x2350, 0xa363, 0x9860, 0x6e2d, 0xc387, 0xc3f3, 0x1, 0x1);
        gbc.writeMem(0x2350, { 0xd8 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xa363, gbc.sp());
        EXPECT(0x2351, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 006D
        gbc.setState(0x74e, 0x85da, 0x9c20, 0xeec2, 0x32f3, 0x42b8, 0x0, 0x1);
        gbc.writeMem(0x74e, { 0xd8 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x85da, gbc.sp());
        EXPECT(0x74f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 006E
        gbc.setState(0xb742, 0xf833, 0x27e0, 0x425f, 0x2a05, 0x369a, 0x0, 0x1);
        gbc.writeMem(0xb742, { 0xd8 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xf833, gbc.sp());
        EXPECT(0xb743, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb742));
        // D8 006F
        gbc.setState(0x239b, 0x3594, 0xdd30, 0x6075, 0x5c, 0xfcb7, 0x0, 0x0);
        gbc.writeMem(0x239b, { 0xd8 });
        gbc.writeMem(0x3594, { 0x2b, 0xfe });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x3596, gbc.sp());
        EXPECT(0xfe2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0071
        gbc.setState(0x3f51, 0xc5a9, 0x8820, 0xc765, 0xf28, 0x7388, 0x0, 0x1);
        gbc.writeMem(0x3f51, { 0xd8 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xc5a9, gbc.sp());
        EXPECT(0x3f52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0072
        gbc.setState(0xa3bd, 0x2c6f, 0x86c0, 0x7548, 0x1d6b, 0xe0ee, 0x1, 0x1);
        gbc.writeMem(0xa3bd, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x2c6f, gbc.sp());
        EXPECT(0xa3be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa3bd));
        // D8 0073
        gbc.setState(0x9ec6, 0x727e, 0x31a0, 0x4e67, 0x2d5c, 0x28fd, 0x1, 0x0);
        gbc.writeMem(0x9ec6, { 0xd8 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x727e, gbc.sp());
        EXPECT(0x9ec7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ec6));
        // D8 0074
        gbc.setState(0xcda4, 0xffd9, 0xc910, 0x76bb, 0x5105, 0x5de, 0x0, 0x0);
        gbc.writeMem(0xcda4, { 0xd8 });
        gbc.writeMem(0xffd9, { 0xa3, 0x7 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xffdb, gbc.sp());
        EXPECT(0x7a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcda4));
        EXPECT(0xa3, gbc.readMem(0xffd9));
        EXPECT(0x7, gbc.readMem(0xffda));
        // D8 0075
        gbc.setState(0xaa64, 0x13ed, 0x6cc0, 0xce7d, 0x255d, 0xb88d, 0x1, 0x1);
        gbc.writeMem(0xaa64, { 0xd8 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x13ed, gbc.sp());
        EXPECT(0xaa65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xaa64));
        // D8 0076
        gbc.setState(0xab5e, 0x9d5b, 0x7e70, 0x938a, 0x178f, 0x8494, 0x0, 0x1);
        gbc.writeMem(0x9d5b, { 0xee, 0x85 });
        gbc.writeMem(0xab5e, { 0xd8 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9d5d, gbc.sp());
        EXPECT(0x85ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0x9d5b));
        EXPECT(0x85, gbc.readMem(0x9d5c));
        EXPECT(0xd8, gbc.readMem(0xab5e));
        // D8 0077
        gbc.setState(0xa85e, 0xcc0c, 0xafd0, 0xfd38, 0xb353, 0xe351, 0x1, 0x0);
        gbc.writeMem(0xa85e, { 0xd8 });
        gbc.writeMem(0xcc0c, { 0xe0, 0x29 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xcc0e, gbc.sp());
        EXPECT(0x29e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa85e));
        EXPECT(0xe0, gbc.readMem(0xcc0c));
        EXPECT(0x29, gbc.readMem(0xcc0d));
        // D8 0078
        gbc.setState(0x58e6, 0x6f99, 0x8c40, 0x7806, 0xbb60, 0x2c7, 0x0, 0x0);
        gbc.writeMem(0x58e6, { 0xd8 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x6f99, gbc.sp());
        EXPECT(0x58e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0079
        gbc.setState(0xd216, 0x12f6, 0x7000, 0xd654, 0x870, 0xcf51, 0x0, 0x1);
        gbc.writeMem(0xd216, { 0xd8 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x12f6, gbc.sp());
        EXPECT(0xd217, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd216));
        // D8 007A
        gbc.setState(0x9cf3, 0xa591, 0x4ca0, 0x20c1, 0xa231, 0x8322, 0x0, 0x0);
        gbc.writeMem(0x9cf3, { 0xd8 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xa591, gbc.sp());
        EXPECT(0x9cf4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9cf3));
        // D8 007C
        gbc.setState(0xe16c, 0x5027, 0x3330, 0xd338, 0x3e42, 0x827, 0x0, 0x1);
        gbc.writeMem(0x5027, { 0x38, 0xea });
        gbc.writeMem(0xe16c, { 0xd8 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x5029, gbc.sp());
        EXPECT(0xea38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe16c));
        // D8 007D
        gbc.setState(0xa24d, 0x84c, 0x3c60, 0x37df, 0xb15e, 0x3e8a, 0x1, 0x1);
        gbc.writeMem(0xa24d, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x84c, gbc.sp());
        EXPECT(0xa24e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa24d));
        // D8 007F
        gbc.setState(0x77b9, 0x7762, 0xf570, 0xf5f5, 0x9f43, 0xd932, 0x0, 0x1);
        gbc.writeMem(0x7762, { 0x60, 0x46 });
        gbc.writeMem(0x77b9, { 0xd8 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x7764, gbc.sp());
        EXPECT(0x4660, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0080
        gbc.setState(0x79dc, 0xbdd9, 0x66f0, 0x1dd6, 0x128b, 0x425d, 0x1, 0x0);
        gbc.writeMem(0x79dc, { 0xd8 });
        gbc.writeMem(0xbdd9, { 0xf6, 0xa6 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xbddb, gbc.sp());
        EXPECT(0xa6f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf6, gbc.readMem(0xbdd9));
        EXPECT(0xa6, gbc.readMem(0xbdda));
        // D8 0081
        gbc.setState(0x516a, 0xb2ea, 0xf910, 0xdc5c, 0x568d, 0xf131, 0x0, 0x1);
        gbc.writeMem(0x516a, { 0xd8 });
        gbc.writeMem(0xb2ea, { 0x6f, 0xa9 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xb2ec, gbc.sp());
        EXPECT(0xa96f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xb2ea));
        EXPECT(0xa9, gbc.readMem(0xb2eb));
        // D8 0082
        gbc.setState(0xeec0, 0xc233, 0xbb0, 0xba2c, 0xca46, 0x5ba9, 0x1, 0x0);
        gbc.writeMem(0xc233, { 0x7f, 0x18 });
        gbc.writeMem(0xeec0, { 0xd8 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xc235, gbc.sp());
        EXPECT(0x187f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xc233));
        EXPECT(0x18, gbc.readMem(0xc234));
        EXPECT(0xd8, gbc.readMem(0xeec0));
        // D8 0083
        gbc.setState(0x1d92, 0xfff, 0xbbd0, 0x9743, 0x43a6, 0x579, 0x0, 0x0);
        gbc.writeMem(0xfff, { 0x72, 0xfe });
        gbc.writeMem(0x1d92, { 0xd8 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x1001, gbc.sp());
        EXPECT(0xfe72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0084
        gbc.setState(0x2712, 0x99f4, 0x4d40, 0x2624, 0xa8e8, 0xfe72, 0x1, 0x1);
        gbc.writeMem(0x2712, { 0xd8 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x99f4, gbc.sp());
        EXPECT(0x2713, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0086
        gbc.setState(0x347c, 0x665e, 0x69b0, 0x7943, 0x6fa1, 0xe86a, 0x0, 0x0);
        gbc.writeMem(0x347c, { 0xd8 });
        gbc.writeMem(0x665e, { 0xc7, 0x79 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x6660, gbc.sp());
        EXPECT(0x79c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0087
        gbc.setState(0xcfe, 0xf34e, 0x2a50, 0xaff9, 0xbe46, 0x3101, 0x1, 0x1);
        gbc.writeMem(0xcfe, { 0xd8 });
        gbc.writeMem(0xf34e, { 0x86, 0x3b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xf350, gbc.sp());
        EXPECT(0x3b86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0xf34e));
        EXPECT(0x3b, gbc.readMem(0xf34f));
        // D8 0088
        gbc.setState(0xb033, 0x11aa, 0xdda0, 0x145d, 0x8989, 0x36ac, 0x1, 0x0);
        gbc.writeMem(0xb033, { 0xd8 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x11aa, gbc.sp());
        EXPECT(0xb034, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb033));
        // D8 0089
        gbc.setState(0x2a5f, 0xdf8f, 0x9110, 0x55c8, 0x2be8, 0xa799, 0x1, 0x1);
        gbc.writeMem(0x2a5f, { 0xd8 });
        gbc.writeMem(0xdf8f, { 0xab, 0x55 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xdf91, gbc.sp());
        EXPECT(0x55ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0xdf8f));
        EXPECT(0x55, gbc.readMem(0xdf90));
        // D8 008A
        gbc.setState(0x80f4, 0x2b6, 0x6670, 0xda95, 0xc5b3, 0x9280, 0x0, 0x0);
        gbc.writeMem(0x2b6, { 0x7f, 0xa8 });
        gbc.writeMem(0x80f4, { 0xd8 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x2b8, gbc.sp());
        EXPECT(0xa87f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x80f4));
        // D8 008B
        gbc.setState(0x9c2, 0x7333, 0x6050, 0xbeab, 0xfe38, 0x5fa7, 0x0, 0x1);
        gbc.writeMem(0x9c2, { 0xd8 });
        gbc.writeMem(0x7333, { 0x69, 0x9d });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x7335, gbc.sp());
        EXPECT(0x9d69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 008C
        gbc.setState(0x1d24, 0x60d1, 0x3690, 0x2958, 0xe8d2, 0x4467, 0x0, 0x0);
        gbc.writeMem(0x1d24, { 0xd8 });
        gbc.writeMem(0x60d1, { 0xc5, 0x10 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x60d3, gbc.sp());
        EXPECT(0x10c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 008D
        gbc.setState(0x8516, 0xe702, 0x8a70, 0x5de6, 0x2d2d, 0x7b04, 0x1, 0x1);
        gbc.writeMem(0x8516, { 0xd8 });
        gbc.writeMem(0xe702, { 0x49, 0xbd });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xe704, gbc.sp());
        EXPECT(0xbd49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8516));
        EXPECT(0x49, gbc.readMem(0xe702));
        EXPECT(0xbd, gbc.readMem(0xe703));
        // D8 008F
        gbc.setState(0x69bd, 0xf18, 0x5470, 0xe5fb, 0x86ef, 0xbe52, 0x0, 0x1);
        gbc.writeMem(0xf18, { 0x99, 0x3d });
        gbc.writeMem(0x69bd, { 0xd8 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xf1a, gbc.sp());
        EXPECT(0x3d99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0090
        gbc.setState(0x6a1c, 0x9393, 0x1a00, 0x515e, 0x417a, 0x6f0, 0x0, 0x1);
        gbc.writeMem(0x6a1c, { 0xd8 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9393, gbc.sp());
        EXPECT(0x6a1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0091
        gbc.setState(0x3fe1, 0xc7b5, 0xfa00, 0xe215, 0x1a5e, 0x3799, 0x0, 0x1);
        gbc.writeMem(0x3fe1, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xc7b5, gbc.sp());
        EXPECT(0x3fe2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0092
        gbc.setState(0x8443, 0x4fa5, 0xa910, 0x7018, 0xffb9, 0xbf1e, 0x0, 0x1);
        gbc.writeMem(0x4fa5, { 0x62, 0xfa });
        gbc.writeMem(0x8443, { 0xd8 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x4fa7, gbc.sp());
        EXPECT(0xfa62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8443));
        // D8 0093
        gbc.setState(0xb8e7, 0xe3c5, 0x6750, 0x5d9a, 0xde03, 0xb26d, 0x1, 0x1);
        gbc.writeMem(0xb8e7, { 0xd8 });
        gbc.writeMem(0xe3c5, { 0xc9, 0x73 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe3c7, gbc.sp());
        EXPECT(0x73c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb8e7));
        EXPECT(0xc9, gbc.readMem(0xe3c5));
        EXPECT(0x73, gbc.readMem(0xe3c6));
        // D8 0094
        gbc.setState(0x1454, 0x9543, 0xb4d0, 0x186, 0xf0d9, 0xeb11, 0x0, 0x0);
        gbc.writeMem(0x1454, { 0xd8 });
        gbc.writeMem(0x9543, { 0xed, 0x64 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x9545, gbc.sp());
        EXPECT(0x64ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0x9543));
        EXPECT(0x64, gbc.readMem(0x9544));
        // D8 0095
        gbc.setState(0x98e9, 0xf2e, 0x2680, 0x8d7c, 0xdea6, 0x8f4e, 0x1, 0x0);
        gbc.writeMem(0x98e9, { 0xd8 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xf2e, gbc.sp());
        EXPECT(0x98ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x98e9));
        // D8 0096
        gbc.setState(0x2f9f, 0x74aa, 0x1530, 0xd7fb, 0xdfea, 0x2828, 0x1, 0x0);
        gbc.writeMem(0x2f9f, { 0xd8 });
        gbc.writeMem(0x74aa, { 0xdf, 0xc0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x74ac, gbc.sp());
        EXPECT(0xc0df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0097
        gbc.setState(0x9684, 0x1fa3, 0x900, 0x5cd4, 0xb051, 0x9f86, 0x1, 0x1);
        gbc.writeMem(0x9684, { 0xd8 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x1fa3, gbc.sp());
        EXPECT(0x9685, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9684));
        // D8 0098
        gbc.setState(0xab04, 0x2550, 0xea10, 0x7979, 0xbd77, 0x7302, 0x0, 0x1);
        gbc.writeMem(0x2550, { 0x6a, 0x44 });
        gbc.writeMem(0xab04, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x2552, gbc.sp());
        EXPECT(0x446a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xab04));
        // D8 0099
        gbc.setState(0x153e, 0xec58, 0xd9b0, 0xdf3c, 0xd056, 0x912e, 0x1, 0x1);
        gbc.writeMem(0x153e, { 0xd8 });
        gbc.writeMem(0xec58, { 0x2a, 0x2d });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xec5a, gbc.sp());
        EXPECT(0x2d2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xec58));
        EXPECT(0x2d, gbc.readMem(0xec59));
        // D8 009A
        gbc.setState(0x9ecf, 0x6fb3, 0x5210, 0x18a4, 0x8c3a, 0xe8ee, 0x1, 0x1);
        gbc.writeMem(0x6fb3, { 0xf0, 0x4c });
        gbc.writeMem(0x9ecf, { 0xd8 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x6fb5, gbc.sp());
        EXPECT(0x4cf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ecf));
        // D8 009B
        gbc.setState(0x208c, 0x3bdc, 0x78e0, 0xaaed, 0x9c07, 0x9999, 0x1, 0x1);
        gbc.writeMem(0x208c, { 0xd8 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x3bdc, gbc.sp());
        EXPECT(0x208d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 009C
        gbc.setState(0x8d3, 0x225c, 0xcca0, 0x47be, 0x1d26, 0x1a89, 0x1, 0x0);
        gbc.writeMem(0x8d3, { 0xd8 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x225c, gbc.sp());
        EXPECT(0x8d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 009D
        gbc.setState(0x4868, 0xc220, 0x2180, 0x54ec, 0x5848, 0x6879, 0x0, 0x0);
        gbc.writeMem(0x4868, { 0xd8 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xc220, gbc.sp());
        EXPECT(0x4869, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 009E
        gbc.setState(0x3eb5, 0xea4d, 0xee80, 0xd30d, 0xa53e, 0x1592, 0x1, 0x0);
        gbc.writeMem(0x3eb5, { 0xd8 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xea4d, gbc.sp());
        EXPECT(0x3eb6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 009F
        gbc.setState(0x47b0, 0xdfb7, 0x84a0, 0x3af2, 0xfe93, 0x46d, 0x1, 0x0);
        gbc.writeMem(0x47b0, { 0xd8 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xdfb7, gbc.sp());
        EXPECT(0x47b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A0
        gbc.setState(0x4765, 0x3777, 0x3bd0, 0x1669, 0xb61d, 0x6824, 0x1, 0x1);
        gbc.writeMem(0x3777, { 0x3, 0x33 });
        gbc.writeMem(0x4765, { 0xd8 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x3779, gbc.sp());
        EXPECT(0x3303, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00A1
        gbc.setState(0x6187, 0x4873, 0xa060, 0x44e5, 0xbda3, 0xcb3e, 0x1, 0x1);
        gbc.writeMem(0x6187, { 0xd8 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x4873, gbc.sp());
        EXPECT(0x6188, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A2
        gbc.setState(0x68df, 0x4c94, 0xd700, 0xbce9, 0x59aa, 0x9b69, 0x1, 0x0);
        gbc.writeMem(0x68df, { 0xd8 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x4c94, gbc.sp());
        EXPECT(0x68e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A3
        gbc.setState(0xdcc7, 0xbd11, 0x6a40, 0x4ef3, 0xc258, 0x87ef, 0x0, 0x0);
        gbc.writeMem(0xdcc7, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xbd11, gbc.sp());
        EXPECT(0xdcc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdcc7));
        // D8 00A4
        gbc.setState(0xe507, 0xe5af, 0xb5f0, 0x406e, 0x36f, 0x7325, 0x1, 0x1);
        gbc.writeMem(0xe507, { 0xd8 });
        gbc.writeMem(0xe5af, { 0xfc, 0x7 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe5b1, gbc.sp());
        EXPECT(0x7fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe507));
        EXPECT(0xfc, gbc.readMem(0xe5af));
        EXPECT(0x7, gbc.readMem(0xe5b0));
        // D8 00A5
        gbc.setState(0xb3d4, 0x1e8f, 0x91a0, 0xd2c, 0x35ea, 0x73ee, 0x1, 0x1);
        gbc.writeMem(0xb3d4, { 0xd8 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x1e8f, gbc.sp());
        EXPECT(0xb3d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb3d4));
        // D8 00A6
        gbc.setState(0x76db, 0x7403, 0x7e20, 0x6bc2, 0xbffd, 0xb452, 0x1, 0x1);
        gbc.writeMem(0x76db, { 0xd8 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x7403, gbc.sp());
        EXPECT(0x76dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A7
        gbc.setState(0x7119, 0x5dd5, 0xfe0, 0x2b19, 0x9014, 0x8993, 0x0, 0x0);
        gbc.writeMem(0x7119, { 0xd8 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x5dd5, gbc.sp());
        EXPECT(0x711a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A8
        gbc.setState(0x110c, 0x3dc5, 0x3c00, 0xa41a, 0x70f8, 0x9e86, 0x1, 0x1);
        gbc.writeMem(0x110c, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x3dc5, gbc.sp());
        EXPECT(0x110d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00A9
        gbc.setState(0x567, 0x17f5, 0xfd80, 0xa1e4, 0x387, 0x81cc, 0x0, 0x1);
        gbc.writeMem(0x567, { 0xd8 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x17f5, gbc.sp());
        EXPECT(0x568, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00AA
        gbc.setState(0x7e87, 0xe61e, 0x6eb0, 0x8d23, 0x8f8e, 0x3524, 0x1, 0x1);
        gbc.writeMem(0x7e87, { 0xd8 });
        gbc.writeMem(0xe61e, { 0x76, 0xf3 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xe620, gbc.sp());
        EXPECT(0xf376, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0xe61e));
        EXPECT(0xf3, gbc.readMem(0xe61f));
        // D8 00AB
        gbc.setState(0x89c, 0x4289, 0x5350, 0x2eb2, 0x7235, 0xc518, 0x1, 0x0);
        gbc.writeMem(0x89c, { 0xd8 });
        gbc.writeMem(0x4289, { 0x57, 0xd5 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x428b, gbc.sp());
        EXPECT(0xd557, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00AC
        gbc.setState(0xa7a8, 0x2c81, 0x8010, 0x31df, 0x4774, 0xcc43, 0x0, 0x0);
        gbc.writeMem(0x2c81, { 0x4d, 0xc2 });
        gbc.writeMem(0xa7a8, { 0xd8 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x2c83, gbc.sp());
        EXPECT(0xc24d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa7a8));
        // D8 00AD
        gbc.setState(0x5c43, 0x1c16, 0x50a0, 0xfad, 0xcf96, 0x9ec0, 0x0, 0x1);
        gbc.writeMem(0x5c43, { 0xd8 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x1c16, gbc.sp());
        EXPECT(0x5c44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00AE
        gbc.setState(0x6261, 0x51a, 0xcf40, 0xb777, 0xf5b7, 0x1bdc, 0x1, 0x0);
        gbc.writeMem(0x6261, { 0xd8 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x51a, gbc.sp());
        EXPECT(0x6262, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00AF
        gbc.setState(0xa781, 0xc938, 0x8d20, 0xf29a, 0x41ee, 0xdd06, 0x0, 0x0);
        gbc.writeMem(0xa781, { 0xd8 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xc938, gbc.sp());
        EXPECT(0xa782, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa781));
        // D8 00B0
        gbc.setState(0xa452, 0x4d5b, 0xff40, 0x20ef, 0xfb83, 0x13aa, 0x1, 0x0);
        gbc.writeMem(0xa452, { 0xd8 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x4d5b, gbc.sp());
        EXPECT(0xa453, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa452));
        // D8 00B1
        gbc.setState(0x40e3, 0x99c7, 0x3a30, 0x5f96, 0xe916, 0xe071, 0x0, 0x1);
        gbc.writeMem(0x40e3, { 0xd8 });
        gbc.writeMem(0x99c7, { 0x64, 0x33 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x99c9, gbc.sp());
        EXPECT(0x3364, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x99c7));
        EXPECT(0x33, gbc.readMem(0x99c8));
        // D8 00B2
        gbc.setState(0xae5f, 0xe92a, 0xce30, 0xc7c1, 0x5f70, 0xdacd, 0x0, 0x1);
        gbc.writeMem(0xae5f, { 0xd8 });
        gbc.writeMem(0xe92a, { 0x65, 0x1f });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xe92c, gbc.sp());
        EXPECT(0x1f65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xae5f));
        EXPECT(0x65, gbc.readMem(0xe92a));
        EXPECT(0x1f, gbc.readMem(0xe92b));
        // D8 00B3
        gbc.setState(0x7064, 0x11a7, 0x6a10, 0x7ada, 0x3fdf, 0x245e, 0x0, 0x0);
        gbc.writeMem(0x11a7, { 0xcf, 0xb6 });
        gbc.writeMem(0x7064, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x11a9, gbc.sp());
        EXPECT(0xb6cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00B4
        gbc.setState(0x8ab7, 0x2ea3, 0xd480, 0xaf99, 0x2383, 0x6d21, 0x1, 0x0);
        gbc.writeMem(0x8ab7, { 0xd8 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x2ea3, gbc.sp());
        EXPECT(0x8ab8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8ab7));
        // D8 00B5
        gbc.setState(0x6536, 0x8676, 0x4de0, 0x53ac, 0xc058, 0x4ad, 0x1, 0x1);
        gbc.writeMem(0x6536, { 0xd8 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x8676, gbc.sp());
        EXPECT(0x6537, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00B6
        gbc.setState(0xc3ac, 0x9fb1, 0x7a0, 0x7e3c, 0x9897, 0xf22d, 0x1, 0x1);
        gbc.writeMem(0xc3ac, { 0xd8 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x9fb1, gbc.sp());
        EXPECT(0xc3ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc3ac));
        // D8 00B7
        gbc.setState(0x7650, 0xeb9d, 0xb60, 0xdd64, 0xe442, 0x8b0f, 0x1, 0x1);
        gbc.writeMem(0x7650, { 0xd8 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xeb9d, gbc.sp());
        EXPECT(0x7651, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00B8
        gbc.setState(0x914, 0x2fd7, 0xdd20, 0xa4c9, 0x9cbe, 0xf75e, 0x1, 0x0);
        gbc.writeMem(0x914, { 0xd8 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2fd7, gbc.sp());
        EXPECT(0x915, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00BA
        gbc.setState(0xcdd9, 0x9653, 0x6a10, 0xa1d7, 0xbf83, 0xadaa, 0x1, 0x1);
        gbc.writeMem(0x9653, { 0xa6, 0x10 });
        gbc.writeMem(0xcdd9, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x9655, gbc.sp());
        EXPECT(0x10a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0x9653));
        EXPECT(0x10, gbc.readMem(0x9654));
        EXPECT(0xd8, gbc.readMem(0xcdd9));
        // D8 00BB
        gbc.setState(0x8e3c, 0xd06a, 0x3a50, 0xd91d, 0x70, 0x3528, 0x1, 0x1);
        gbc.writeMem(0x8e3c, { 0xd8 });
        gbc.writeMem(0xd06a, { 0xc8, 0x7e });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xd06c, gbc.sp());
        EXPECT(0x7ec8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8e3c));
        EXPECT(0xc8, gbc.readMem(0xd06a));
        EXPECT(0x7e, gbc.readMem(0xd06b));
        // D8 00BC
        gbc.setState(0x6e56, 0xff87, 0x78f0, 0xbf53, 0x5766, 0x5850, 0x0, 0x0);
        gbc.writeMem(0x6e56, { 0xd8 });
        gbc.writeMem(0xff87, { 0xb1, 0x49 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xff89, gbc.sp());
        EXPECT(0x49b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb1, gbc.readMem(0xff87));
        EXPECT(0x49, gbc.readMem(0xff88));
        // D8 00BD
        gbc.setState(0x3094, 0x64a2, 0xb1a0, 0xc292, 0x7249, 0x5ffb, 0x1, 0x0);
        gbc.writeMem(0x3094, { 0xd8 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x64a2, gbc.sp());
        EXPECT(0x3095, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00BE
        gbc.setState(0xaf06, 0x1c6d, 0xe170, 0xde12, 0x8a6f, 0x13d0, 0x0, 0x0);
        gbc.writeMem(0x1c6d, { 0xb1, 0xce });
        gbc.writeMem(0xaf06, { 0xd8 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x1c6f, gbc.sp());
        EXPECT(0xceb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xaf06));
        // D8 00BF
        gbc.setState(0x29f, 0xf1a3, 0xdfa0, 0xca18, 0x273e, 0xd363, 0x1, 0x0);
        gbc.writeMem(0x29f, { 0xd8 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xf1a3, gbc.sp());
        EXPECT(0x2a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00C0
        gbc.setState(0xd1dc, 0xc90b, 0xdc70, 0x8b7f, 0xdf5e, 0x11c9, 0x1, 0x1);
        gbc.writeMem(0xc90b, { 0x36, 0xef });
        gbc.writeMem(0xd1dc, { 0xd8 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xc90d, gbc.sp());
        EXPECT(0xef36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xc90b));
        EXPECT(0xef, gbc.readMem(0xc90c));
        EXPECT(0xd8, gbc.readMem(0xd1dc));
        // D8 00C1
        gbc.setState(0x7a03, 0x5835, 0xad80, 0xb119, 0x3da0, 0xaadc, 0x1, 0x0);
        gbc.writeMem(0x7a03, { 0xd8 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x5835, gbc.sp());
        EXPECT(0x7a04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00C2
        gbc.setState(0xae31, 0xa208, 0x7370, 0x7023, 0x6fac, 0xf26b, 0x0, 0x0);
        gbc.writeMem(0xa208, { 0x82, 0x8e });
        gbc.writeMem(0xae31, { 0xd8 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xa20a, gbc.sp());
        EXPECT(0x8e82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x82, gbc.readMem(0xa208));
        EXPECT(0x8e, gbc.readMem(0xa209));
        EXPECT(0xd8, gbc.readMem(0xae31));
        // D8 00C3
        gbc.setState(0xa7cc, 0x40b2, 0xd220, 0x16d4, 0xf5e4, 0xfba, 0x0, 0x1);
        gbc.writeMem(0xa7cc, { 0xd8 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x40b2, gbc.sp());
        EXPECT(0xa7cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa7cc));
        // D8 00C4
        gbc.setState(0xae5f, 0x35f1, 0x83d0, 0x69e6, 0x66f4, 0x760, 0x0, 0x1);
        gbc.writeMem(0x35f1, { 0x98, 0x19 });
        gbc.writeMem(0xae5f, { 0xd8 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x35f3, gbc.sp());
        EXPECT(0x1998, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xae5f));
        // D8 00C6
        gbc.setState(0x80c4, 0xefab, 0xf620, 0x9abd, 0x54d5, 0x63b9, 0x0, 0x1);
        gbc.writeMem(0x80c4, { 0xd8 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xefab, gbc.sp());
        EXPECT(0x80c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x80c4));
        // D8 00C7
        gbc.setState(0x275d, 0x824, 0x94d0, 0xf770, 0x1706, 0x7aa3, 0x0, 0x0);
        gbc.writeMem(0x824, { 0x26, 0x37 });
        gbc.writeMem(0x275d, { 0xd8 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x826, gbc.sp());
        EXPECT(0x3726, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00C8
        gbc.setState(0xde1d, 0x9181, 0x25e0, 0xc7e9, 0xf5fb, 0x7e10, 0x0, 0x1);
        gbc.writeMem(0xde1d, { 0xd8 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x9181, gbc.sp());
        EXPECT(0xde1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xde1d));
        // D8 00C9
        gbc.setState(0x91da, 0xce36, 0x2300, 0x46a9, 0xf80, 0xeabd, 0x1, 0x1);
        gbc.writeMem(0x91da, { 0xd8 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xce36, gbc.sp());
        EXPECT(0x91db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x91da));
        // D8 00CA
        gbc.setState(0xbd13, 0x4d5c, 0x10e0, 0xc5c5, 0x6510, 0x8718, 0x0, 0x1);
        gbc.writeMem(0xbd13, { 0xd8 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x4d5c, gbc.sp());
        EXPECT(0xbd14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbd13));
        // D8 00CB
        gbc.setState(0xf4c, 0x651b, 0xcda0, 0x9199, 0x23af, 0x741a, 0x0, 0x1);
        gbc.writeMem(0xf4c, { 0xd8 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x651b, gbc.sp());
        EXPECT(0xf4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00CC
        gbc.setState(0x91ce, 0x4b90, 0x8ca0, 0xb90b, 0xb168, 0xc3c1, 0x1, 0x0);
        gbc.writeMem(0x91ce, { 0xd8 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x4b90, gbc.sp());
        EXPECT(0x91cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x91ce));
        // D8 00CD
        gbc.setState(0x830d, 0xc551, 0xa320, 0x57d, 0x63f6, 0x709a, 0x1, 0x0);
        gbc.writeMem(0x830d, { 0xd8 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xc551, gbc.sp());
        EXPECT(0x830e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x830d));
        // D8 00CE
        gbc.setState(0x2b2a, 0x1b37, 0xefe0, 0xf380, 0x331a, 0x7208, 0x0, 0x1);
        gbc.writeMem(0x2b2a, { 0xd8 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x1b37, gbc.sp());
        EXPECT(0x2b2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00CF
        gbc.setState(0x458f, 0x20bf, 0xb770, 0xfadb, 0xa685, 0xd334, 0x1, 0x0);
        gbc.writeMem(0x20bf, { 0x55, 0x11 });
        gbc.writeMem(0x458f, { 0xd8 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x20c1, gbc.sp());
        EXPECT(0x1155, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00D0
        gbc.setState(0x3abb, 0x7051, 0x7b80, 0x2793, 0x4608, 0x2036, 0x0, 0x0);
        gbc.writeMem(0x3abb, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x7051, gbc.sp());
        EXPECT(0x3abc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00D2
        gbc.setState(0x8a09, 0xa11e, 0x6470, 0x5715, 0x78b9, 0xb1b9, 0x1, 0x1);
        gbc.writeMem(0x8a09, { 0xd8 });
        gbc.writeMem(0xa11e, { 0xa9, 0x33 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xa120, gbc.sp());
        EXPECT(0x33a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8a09));
        EXPECT(0xa9, gbc.readMem(0xa11e));
        EXPECT(0x33, gbc.readMem(0xa11f));
        // D8 00D4
        gbc.setState(0x8db2, 0xba67, 0xb6b0, 0xcf19, 0x70be, 0xd069, 0x1, 0x0);
        gbc.writeMem(0x8db2, { 0xd8 });
        gbc.writeMem(0xba67, { 0xc8, 0xd6 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xba69, gbc.sp());
        EXPECT(0xd6c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8db2));
        EXPECT(0xc8, gbc.readMem(0xba67));
        EXPECT(0xd6, gbc.readMem(0xba68));
        // D8 00D6
        gbc.setState(0x4840, 0x18ae, 0xf270, 0x6d4, 0x5090, 0x180e, 0x0, 0x0);
        gbc.writeMem(0x18ae, { 0x8f, 0x48 });
        gbc.writeMem(0x4840, { 0xd8 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x18b0, gbc.sp());
        EXPECT(0x488f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00D7
        gbc.setState(0x5c7e, 0xe5f6, 0x18c0, 0xe712, 0x624f, 0xe276, 0x0, 0x0);
        gbc.writeMem(0x5c7e, { 0xd8 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xe5f6, gbc.sp());
        EXPECT(0x5c7f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00D8
        gbc.setState(0x488a, 0x378f, 0xfa40, 0xdd06, 0x5543, 0x9021, 0x1, 0x0);
        gbc.writeMem(0x488a, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x378f, gbc.sp());
        EXPECT(0x488b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00D9
        gbc.setState(0x310f, 0xe9a6, 0xb980, 0xd0dd, 0xb6b4, 0x698, 0x1, 0x0);
        gbc.writeMem(0x310f, { 0xd8 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe9a6, gbc.sp());
        EXPECT(0x3110, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00DA
        gbc.setState(0xeee4, 0x110a, 0x4f70, 0xf194, 0x9dc1, 0x4f48, 0x0, 0x1);
        gbc.writeMem(0x110a, { 0xad, 0x1b });
        gbc.writeMem(0xeee4, { 0xd8 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x110c, gbc.sp());
        EXPECT(0x1bad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeee4));
        // D8 00DB
        gbc.setState(0x8433, 0x5566, 0xf9d0, 0xe583, 0xa42, 0x9623, 0x1, 0x1);
        gbc.writeMem(0x5566, { 0xbd, 0xaa });
        gbc.writeMem(0x8433, { 0xd8 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x5568, gbc.sp());
        EXPECT(0xaabd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8433));
        // D8 00DC
        gbc.setState(0x1b56, 0x4fb1, 0x30e0, 0x715a, 0x5852, 0xc3c9, 0x1, 0x1);
        gbc.writeMem(0x1b56, { 0xd8 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x4fb1, gbc.sp());
        EXPECT(0x1b57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00DD
        gbc.setState(0x6f44, 0x1cb5, 0xdb00, 0x3ff6, 0xe7aa, 0x69cb, 0x1, 0x0);
        gbc.writeMem(0x6f44, { 0xd8 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x1cb5, gbc.sp());
        EXPECT(0x6f45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00DE
        gbc.setState(0xc52c, 0x6bb6, 0x36b0, 0xecfb, 0x208e, 0xd12b, 0x0, 0x0);
        gbc.writeMem(0x6bb6, { 0x57, 0xdc });
        gbc.writeMem(0xc52c, { 0xd8 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x6bb8, gbc.sp());
        EXPECT(0xdc57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc52c));
        // D8 00DF
        gbc.setState(0xc783, 0xdbc5, 0xb6c0, 0x7cd0, 0xbb5c, 0x521a, 0x0, 0x1);
        gbc.writeMem(0xc783, { 0xd8 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xdbc5, gbc.sp());
        EXPECT(0xc784, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc783));
        // D8 00E0
        gbc.setState(0x58b1, 0xd900, 0xa1e0, 0xefa7, 0xcb0c, 0x7527, 0x1, 0x0);
        gbc.writeMem(0x58b1, { 0xd8 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xd900, gbc.sp());
        EXPECT(0x58b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00E1
        gbc.setState(0x2c96, 0x9427, 0x4fe0, 0x16b, 0xac5f, 0x89ed, 0x1, 0x1);
        gbc.writeMem(0x2c96, { 0xd8 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x9427, gbc.sp());
        EXPECT(0x2c97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00E2
        gbc.setState(0x2e03, 0x13a9, 0xb040, 0xb535, 0x2015, 0x52db, 0x0, 0x1);
        gbc.writeMem(0x2e03, { 0xd8 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x13a9, gbc.sp());
        EXPECT(0x2e04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00E4
        gbc.setState(0xb344, 0x94cf, 0xae40, 0x1f25, 0xd228, 0x4d39, 0x0, 0x1);
        gbc.writeMem(0xb344, { 0xd8 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x94cf, gbc.sp());
        EXPECT(0xb345, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb344));
        // D8 00E5
        gbc.setState(0xbc8f, 0xf2af, 0x87d0, 0xfd39, 0x7039, 0x9337, 0x0, 0x1);
        gbc.writeMem(0xbc8f, { 0xd8 });
        gbc.writeMem(0xf2af, { 0xfe, 0xa8 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xf2b1, gbc.sp());
        EXPECT(0xa8fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbc8f));
        EXPECT(0xfe, gbc.readMem(0xf2af));
        EXPECT(0xa8, gbc.readMem(0xf2b0));
        // D8 00E6
        gbc.setState(0x2082, 0xb049, 0x4610, 0xe83, 0x94b2, 0x44e1, 0x1, 0x0);
        gbc.writeMem(0x2082, { 0xd8 });
        gbc.writeMem(0xb049, { 0x36, 0xc6 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xb04b, gbc.sp());
        EXPECT(0xc636, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xb049));
        EXPECT(0xc6, gbc.readMem(0xb04a));
        // D8 00E7
        gbc.setState(0xb5d4, 0x890a, 0xbc90, 0xf131, 0x9df4, 0xe5a8, 0x0, 0x1);
        gbc.writeMem(0x890a, { 0x83, 0x90 });
        gbc.writeMem(0xb5d4, { 0xd8 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x890c, gbc.sp());
        EXPECT(0x9083, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0x890a));
        EXPECT(0x90, gbc.readMem(0x890b));
        EXPECT(0xd8, gbc.readMem(0xb5d4));
        // D8 00E8
        gbc.setState(0x23b4, 0x9c1e, 0xe080, 0x7cff, 0xd907, 0xe699, 0x0, 0x1);
        gbc.writeMem(0x23b4, { 0xd8 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x9c1e, gbc.sp());
        EXPECT(0x23b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00E9
        gbc.setState(0xbaa3, 0xdd5b, 0x7bc0, 0x1df8, 0x76ad, 0x164e, 0x1, 0x0);
        gbc.writeMem(0xbaa3, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xdd5b, gbc.sp());
        EXPECT(0xbaa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbaa3));
        // D8 00EA
        gbc.setState(0x1364, 0x6120, 0x67a0, 0x2e1c, 0x6c, 0x8cd3, 0x1, 0x1);
        gbc.writeMem(0x1364, { 0xd8 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6120, gbc.sp());
        EXPECT(0x1365, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00EB
        gbc.setState(0x5171, 0x39bc, 0x9cb0, 0xf394, 0xd9a0, 0xe121, 0x0, 0x1);
        gbc.writeMem(0x39bc, { 0x3c, 0x9e });
        gbc.writeMem(0x5171, { 0xd8 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x39be, gbc.sp());
        EXPECT(0x9e3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 00EC
        gbc.setState(0x3085, 0xee75, 0x36b0, 0xf13d, 0xea3, 0xa202, 0x1, 0x1);
        gbc.writeMem(0x3085, { 0xd8 });
        gbc.writeMem(0xee75, { 0xab, 0x30 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xee77, gbc.sp());
        EXPECT(0x30ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0xee75));
        EXPECT(0x30, gbc.readMem(0xee76));
        // D8 00ED
        gbc.setState(0x8d58, 0xc799, 0x2200, 0xfaa9, 0x361e, 0x53d5, 0x1, 0x0);
        gbc.writeMem(0x8d58, { 0xd8 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xc799, gbc.sp());
        EXPECT(0x8d59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8d58));
        // D8 00EE
        gbc.setState(0xd9c, 0x8d4d, 0x41c0, 0x7b1e, 0x5f59, 0xcc29, 0x1, 0x1);
        gbc.writeMem(0xd9c, { 0xd8 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x8d4d, gbc.sp());
        EXPECT(0xd9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00EF
        gbc.setState(0x98fe, 0x2224, 0x1020, 0x6757, 0xfc8b, 0x382d, 0x1, 0x0);
        gbc.writeMem(0x98fe, { 0xd8 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x2224, gbc.sp());
        EXPECT(0x98ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x98fe));
        // D8 00F1
        gbc.setState(0x61e2, 0x840a, 0x90a0, 0x75df, 0x9c0c, 0x939d, 0x0, 0x1);
        gbc.writeMem(0x61e2, { 0xd8 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x840a, gbc.sp());
        EXPECT(0x61e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00F2
        gbc.setState(0x1b11, 0x7fcc, 0x0, 0x3667, 0x15ca, 0xca27, 0x1, 0x0);
        gbc.writeMem(0x1b11, { 0xd8 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x7fcc, gbc.sp());
        EXPECT(0x1b12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00F3
        gbc.setState(0x6293, 0xee9b, 0xa240, 0x42a4, 0xcd06, 0x9761, 0x0, 0x1);
        gbc.writeMem(0x6293, { 0xd8 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xee9b, gbc.sp());
        EXPECT(0x6294, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00F4
        gbc.setState(0xe3ad, 0x2d14, 0x2ce0, 0xd4eb, 0x7faa, 0x8a5e, 0x0, 0x1);
        gbc.writeMem(0xe3ad, { 0xd8 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2d14, gbc.sp());
        EXPECT(0xe3ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe3ad));
        // D8 00F5
        gbc.setState(0x8651, 0x8555, 0x45d0, 0x5c5b, 0x743d, 0xb5aa, 0x1, 0x0);
        gbc.writeMem(0x8555, { 0x29, 0x22 });
        gbc.writeMem(0x8651, { 0xd8 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x8557, gbc.sp());
        EXPECT(0x2229, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0x8555));
        EXPECT(0x22, gbc.readMem(0x8556));
        EXPECT(0xd8, gbc.readMem(0x8651));
        // D8 00F6
        gbc.setState(0xea72, 0x5ec2, 0x6900, 0x4854, 0xb5ed, 0x236d, 0x1, 0x0);
        gbc.writeMem(0xea72, { 0xd8 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x5ec2, gbc.sp());
        EXPECT(0xea73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xea72));
        // D8 00F7
        gbc.setState(0xd0e7, 0xb18f, 0x26a0, 0x931b, 0xb1d3, 0xe784, 0x1, 0x1);
        gbc.writeMem(0xd0e7, { 0xd8 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xb18f, gbc.sp());
        EXPECT(0xd0e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd0e7));
        // D8 00F8
        gbc.setState(0x6f41, 0xb059, 0xc130, 0xb168, 0xaac7, 0x156c, 0x1, 0x1);
        gbc.writeMem(0x6f41, { 0xd8 });
        gbc.writeMem(0xb059, { 0x5d, 0x69 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xb05b, gbc.sp());
        EXPECT(0x695d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0xb059));
        EXPECT(0x69, gbc.readMem(0xb05a));
        // D8 00F9
        gbc.setState(0x304e, 0x902a, 0x4a20, 0x6e70, 0xb9cc, 0xda07, 0x1, 0x1);
        gbc.writeMem(0x304e, { 0xd8 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x902a, gbc.sp());
        EXPECT(0x304f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00FB
        gbc.setState(0xb761, 0x6586, 0xf3e0, 0x5b18, 0xcbc7, 0x2333, 0x0, 0x0);
        gbc.writeMem(0xb761, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x6586, gbc.sp());
        EXPECT(0xb762, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb761));
        // D8 00FC
        gbc.setState(0xcd7f, 0x20de, 0xbde0, 0xf4e4, 0x182, 0x31f8, 0x0, 0x1);
        gbc.writeMem(0xcd7f, { 0xd8 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x20de, gbc.sp());
        EXPECT(0xcd80, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcd7f));
        // D8 00FD
        gbc.setState(0x665, 0x5940, 0x4300, 0x3b87, 0xbf29, 0xc232, 0x1, 0x0);
        gbc.writeMem(0x665, { 0xd8 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x5940, gbc.sp());
        EXPECT(0x666, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00FE
        gbc.setState(0xc8e, 0xef0a, 0xd420, 0x4462, 0x5dae, 0x6e95, 0x1, 0x1);
        gbc.writeMem(0xc8e, { 0xd8 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xef0a, gbc.sp());
        EXPECT(0xc8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 00FF
        gbc.setState(0x677, 0x4ff4, 0x7680, 0x36aa, 0x7d77, 0xa831, 0x1, 0x1);
        gbc.writeMem(0x677, { 0xd8 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x4ff4, gbc.sp());
        EXPECT(0x678, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0100
        gbc.setState(0xc9a8, 0x812d, 0xee90, 0x64f, 0x19e2, 0x90fa, 0x1, 0x1);
        gbc.writeMem(0x812d, { 0x5, 0xd });
        gbc.writeMem(0xc9a8, { 0xd8 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x812f, gbc.sp());
        EXPECT(0xd05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x812d));
        EXPECT(0xd, gbc.readMem(0x812e));
        EXPECT(0xd8, gbc.readMem(0xc9a8));
        // D8 0101
        gbc.setState(0x5c5c, 0x7f0a, 0x920, 0x4649, 0x5acf, 0xdf9b, 0x1, 0x0);
        gbc.writeMem(0x5c5c, { 0xd8 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x7f0a, gbc.sp());
        EXPECT(0x5c5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0102
        gbc.setState(0x2db4, 0x24d6, 0x8880, 0x3ccd, 0xaf1b, 0x8add, 0x1, 0x0);
        gbc.writeMem(0x2db4, { 0xd8 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x24d6, gbc.sp());
        EXPECT(0x2db5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0103
        gbc.setState(0xa8e0, 0xe865, 0x15a0, 0x527c, 0x7a8e, 0x72ab, 0x1, 0x0);
        gbc.writeMem(0xa8e0, { 0xd8 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xe865, gbc.sp());
        EXPECT(0xa8e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa8e0));
        // D8 0104
        gbc.setState(0x51da, 0x5ce9, 0xb9b0, 0x91fc, 0x5f0b, 0x6e87, 0x1, 0x1);
        gbc.writeMem(0x51da, { 0xd8 });
        gbc.writeMem(0x5ce9, { 0xa5, 0xda });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x5ceb, gbc.sp());
        EXPECT(0xdaa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0105
        gbc.setState(0xde54, 0x4192, 0x6220, 0xde8d, 0x3392, 0xfb75, 0x1, 0x1);
        gbc.writeMem(0xde54, { 0xd8 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x4192, gbc.sp());
        EXPECT(0xde55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xde54));
        // D8 0106
        gbc.setState(0xe0d4, 0xb6b0, 0x770, 0xa827, 0x4b21, 0xbdea, 0x0, 0x0);
        gbc.writeMem(0xb6b0, { 0xb4, 0x27 });
        gbc.writeMem(0xe0d4, { 0xd8 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xb6b2, gbc.sp());
        EXPECT(0x27b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb4, gbc.readMem(0xb6b0));
        EXPECT(0x27, gbc.readMem(0xb6b1));
        EXPECT(0xd8, gbc.readMem(0xe0d4));
        // D8 0107
        gbc.setState(0x5b7c, 0x2703, 0xef00, 0xe1c7, 0xbb51, 0x21ea, 0x1, 0x1);
        gbc.writeMem(0x5b7c, { 0xd8 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x2703, gbc.sp());
        EXPECT(0x5b7d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0108
        gbc.setState(0x9c61, 0xcb2a, 0x8130, 0x8583, 0xa3e6, 0x15e, 0x1, 0x0);
        gbc.writeMem(0x9c61, { 0xd8 });
        gbc.writeMem(0xcb2a, { 0xa7, 0xd });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xcb2c, gbc.sp());
        EXPECT(0xda7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9c61));
        EXPECT(0xa7, gbc.readMem(0xcb2a));
        EXPECT(0xd, gbc.readMem(0xcb2b));
        // D8 0109
        gbc.setState(0x98a4, 0x32b2, 0x4ce0, 0xd8fa, 0xfc93, 0x84ba, 0x1, 0x1);
        gbc.writeMem(0x98a4, { 0xd8 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x32b2, gbc.sp());
        EXPECT(0x98a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x98a4));
        // D8 010A
        gbc.setState(0x1de2, 0x4998, 0xe670, 0xf343, 0xdec7, 0x1557, 0x0, 0x1);
        gbc.writeMem(0x1de2, { 0xd8 });
        gbc.writeMem(0x4998, { 0xac, 0x40 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x499a, gbc.sp());
        EXPECT(0x40ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 010B
        gbc.setState(0xb1f7, 0x4005, 0xd1f0, 0xfc15, 0xd80e, 0x6394, 0x0, 0x1);
        gbc.writeMem(0x4005, { 0xbe, 0xad });
        gbc.writeMem(0xb1f7, { 0xd8 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x4007, gbc.sp());
        EXPECT(0xadbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb1f7));
        // D8 010C
        gbc.setState(0x6e59, 0x7935, 0x6460, 0xb897, 0xc2a4, 0xbbdf, 0x0, 0x1);
        gbc.writeMem(0x6e59, { 0xd8 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x7935, gbc.sp());
        EXPECT(0x6e5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 010D
        gbc.setState(0x60c6, 0xb14b, 0xe920, 0xb2ff, 0x5d9e, 0x4cc, 0x0, 0x0);
        gbc.writeMem(0x60c6, { 0xd8 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xb14b, gbc.sp());
        EXPECT(0x60c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 010E
        gbc.setState(0x86c2, 0xb5a6, 0xff30, 0xad0b, 0x784a, 0xa9e9, 0x1, 0x1);
        gbc.writeMem(0x86c2, { 0xd8 });
        gbc.writeMem(0xb5a6, { 0x33, 0xc7 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xb5a8, gbc.sp());
        EXPECT(0xc733, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x86c2));
        EXPECT(0x33, gbc.readMem(0xb5a6));
        EXPECT(0xc7, gbc.readMem(0xb5a7));
        // D8 010F
        gbc.setState(0x8d67, 0x51a5, 0x4750, 0x7802, 0xd702, 0x2c20, 0x1, 0x0);
        gbc.writeMem(0x51a5, { 0x32, 0x5b });
        gbc.writeMem(0x8d67, { 0xd8 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x51a7, gbc.sp());
        EXPECT(0x5b32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8d67));
        // D8 0110
        gbc.setState(0x6ecb, 0x4cd6, 0x6b60, 0x5d4a, 0xb159, 0x270d, 0x0, 0x0);
        gbc.writeMem(0x6ecb, { 0xd8 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x4cd6, gbc.sp());
        EXPECT(0x6ecc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0111
        gbc.setState(0x88b5, 0xa7c9, 0x210, 0x13ce, 0xa1a, 0x523b, 0x1, 0x0);
        gbc.writeMem(0x88b5, { 0xd8 });
        gbc.writeMem(0xa7c9, { 0xe2, 0x46 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa7cb, gbc.sp());
        EXPECT(0x46e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x88b5));
        EXPECT(0xe2, gbc.readMem(0xa7c9));
        EXPECT(0x46, gbc.readMem(0xa7ca));
        // D8 0112
        gbc.setState(0x71f4, 0xb31e, 0x8d30, 0xb654, 0x180e, 0xf927, 0x0, 0x0);
        gbc.writeMem(0x71f4, { 0xd8 });
        gbc.writeMem(0xb31e, { 0xda, 0xab });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xb320, gbc.sp());
        EXPECT(0xabda, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xda, gbc.readMem(0xb31e));
        EXPECT(0xab, gbc.readMem(0xb31f));
        // D8 0113
        gbc.setState(0x4955, 0xa96f, 0x4f0, 0x22c5, 0x4f94, 0x5aef, 0x0, 0x0);
        gbc.writeMem(0x4955, { 0xd8 });
        gbc.writeMem(0xa96f, { 0x1d, 0x26 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xa971, gbc.sp());
        EXPECT(0x261d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0xa96f));
        EXPECT(0x26, gbc.readMem(0xa970));
        // D8 0114
        gbc.setState(0x8021, 0x1bd8, 0xd010, 0xcb76, 0x7be3, 0x73d9, 0x0, 0x0);
        gbc.writeMem(0x1bd8, { 0x82, 0x7a });
        gbc.writeMem(0x8021, { 0xd8 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x1bda, gbc.sp());
        EXPECT(0x7a82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8021));
        // D8 0115
        gbc.setState(0x58dc, 0x429, 0x5ae0, 0xf0f, 0x26a0, 0x3465, 0x0, 0x1);
        gbc.writeMem(0x58dc, { 0xd8 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x429, gbc.sp());
        EXPECT(0x58dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0116
        gbc.setState(0x41eb, 0xfb3b, 0x9310, 0xbba0, 0x9879, 0x824c, 0x0, 0x0);
        gbc.writeMem(0x41eb, { 0xd8 });
        gbc.writeMem(0xfb3b, { 0x3a, 0x15 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xfb3d, gbc.sp());
        EXPECT(0x153a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xfb3b));
        EXPECT(0x15, gbc.readMem(0xfb3c));
        // D8 0117
        gbc.setState(0xd9db, 0xbebc, 0x5720, 0x3083, 0x2a7b, 0x1ab9, 0x1, 0x1);
        gbc.writeMem(0xd9db, { 0xd8 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xbebc, gbc.sp());
        EXPECT(0xd9dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd9db));
        // D8 0118
        gbc.setState(0xbfe3, 0xc4af, 0x4f0, 0x2ffb, 0xce5a, 0x1b9, 0x0, 0x1);
        gbc.writeMem(0xbfe3, { 0xd8 });
        gbc.writeMem(0xc4af, { 0x1, 0xa6 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xc4b1, gbc.sp());
        EXPECT(0xa601, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbfe3));
        EXPECT(0x1, gbc.readMem(0xc4af));
        EXPECT(0xa6, gbc.readMem(0xc4b0));
        // D8 0119
        gbc.setState(0x11e0, 0x8322, 0xd960, 0x33d5, 0x9605, 0x357e, 0x0, 0x1);
        gbc.writeMem(0x11e0, { 0xd8 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x8322, gbc.sp());
        EXPECT(0x11e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 011A
        gbc.setState(0xa7e9, 0x54a, 0x5440, 0xec6e, 0x7552, 0x5c6f, 0x1, 0x1);
        gbc.writeMem(0xa7e9, { 0xd8 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x54a, gbc.sp());
        EXPECT(0xa7ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa7e9));
        // D8 011B
        gbc.setState(0xd57b, 0x5cae, 0x3460, 0x575e, 0xa89b, 0xc237, 0x1, 0x0);
        gbc.writeMem(0xd57b, { 0xd8 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x5cae, gbc.sp());
        EXPECT(0xd57c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd57b));
        // D8 011C
        gbc.setState(0x3f51, 0xd44a, 0x84e0, 0xc67e, 0x6deb, 0x412f, 0x0, 0x1);
        gbc.writeMem(0x3f51, { 0xd8 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xd44a, gbc.sp());
        EXPECT(0x3f52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 011D
        gbc.setState(0x6901, 0x1fd9, 0x5180, 0xf759, 0x6a24, 0xde1b, 0x0, 0x1);
        gbc.writeMem(0x6901, { 0xd8 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x1fd9, gbc.sp());
        EXPECT(0x6902, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 011E
        gbc.setState(0x7b2, 0xca0c, 0x68d0, 0x5090, 0x3627, 0xad2, 0x1, 0x0);
        gbc.writeMem(0x7b2, { 0xd8 });
        gbc.writeMem(0xca0c, { 0xda, 0xab });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xca0e, gbc.sp());
        EXPECT(0xabda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xda, gbc.readMem(0xca0c));
        EXPECT(0xab, gbc.readMem(0xca0d));
        // D8 011F
        gbc.setState(0xd8a4, 0x8e03, 0x7f30, 0x8882, 0x2217, 0x52fd, 0x0, 0x1);
        gbc.writeMem(0x8e03, { 0x1d, 0x74 });
        gbc.writeMem(0xd8a4, { 0xd8 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x8e05, gbc.sp());
        EXPECT(0x741d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0x8e03));
        EXPECT(0x74, gbc.readMem(0x8e04));
        EXPECT(0xd8, gbc.readMem(0xd8a4));
        // D8 0120
        gbc.setState(0x9b8e, 0x92e3, 0x55e0, 0x3e81, 0x32f1, 0x7e30, 0x1, 0x1);
        gbc.writeMem(0x9b8e, { 0xd8 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x92e3, gbc.sp());
        EXPECT(0x9b8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9b8e));
        // D8 0121
        gbc.setState(0x84a2, 0xd112, 0x3b0, 0xfe5, 0x7f8, 0x50c5, 0x1, 0x0);
        gbc.writeMem(0x84a2, { 0xd8 });
        gbc.writeMem(0xd112, { 0xd1, 0x4e });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xd114, gbc.sp());
        EXPECT(0x4ed1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x84a2));
        EXPECT(0xd1, gbc.readMem(0xd112));
        EXPECT(0x4e, gbc.readMem(0xd113));
        // D8 0122
        gbc.setState(0xbc7a, 0x659c, 0xb7b0, 0x2627, 0x9c61, 0xd2b6, 0x1, 0x1);
        gbc.writeMem(0x659c, { 0x94, 0x17 });
        gbc.writeMem(0xbc7a, { 0xd8 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x659e, gbc.sp());
        EXPECT(0x1794, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbc7a));
        // D8 0123
        gbc.setState(0x3091, 0xb13, 0x4930, 0xa964, 0xe8ee, 0xde8e, 0x0, 0x1);
        gbc.writeMem(0xb13, { 0x78, 0x34 });
        gbc.writeMem(0x3091, { 0xd8 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xb15, gbc.sp());
        EXPECT(0x3478, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0124
        gbc.setState(0x7aad, 0x95ec, 0x8910, 0xf8e6, 0xb1e9, 0xd10d, 0x1, 0x0);
        gbc.writeMem(0x7aad, { 0xd8 });
        gbc.writeMem(0x95ec, { 0xf, 0x30 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x95ee, gbc.sp());
        EXPECT(0x300f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x95ec));
        EXPECT(0x30, gbc.readMem(0x95ed));
        // D8 0125
        gbc.setState(0x8f25, 0x63a0, 0xbd60, 0x624a, 0x31fc, 0xdc25, 0x0, 0x1);
        gbc.writeMem(0x8f25, { 0xd8 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x63a0, gbc.sp());
        EXPECT(0x8f26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8f25));
        // D8 0126
        gbc.setState(0x4677, 0x25f, 0x4710, 0x5365, 0xb8fc, 0xd3b5, 0x1, 0x0);
        gbc.writeMem(0x25f, { 0xbe, 0xf9 });
        gbc.writeMem(0x4677, { 0xd8 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x261, gbc.sp());
        EXPECT(0xf9be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0127
        gbc.setState(0xa306, 0xf263, 0xf830, 0xd491, 0xb7d, 0xeb0c, 0x0, 0x0);
        gbc.writeMem(0xa306, { 0xd8 });
        gbc.writeMem(0xf263, { 0x1f, 0x7 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xf265, gbc.sp());
        EXPECT(0x71f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa306));
        EXPECT(0x1f, gbc.readMem(0xf263));
        EXPECT(0x7, gbc.readMem(0xf264));
        // D8 0128
        gbc.setState(0xd38b, 0xc580, 0x9990, 0xa238, 0x5af7, 0xe3a5, 0x1, 0x0);
        gbc.writeMem(0xc580, { 0xe0, 0xa5 });
        gbc.writeMem(0xd38b, { 0xd8 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xc582, gbc.sp());
        EXPECT(0xa5e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe0, gbc.readMem(0xc580));
        EXPECT(0xa5, gbc.readMem(0xc581));
        EXPECT(0xd8, gbc.readMem(0xd38b));
        // D8 0129
        gbc.setState(0xcd5d, 0xa527, 0xf960, 0x5d62, 0x662f, 0x4127, 0x0, 0x0);
        gbc.writeMem(0xcd5d, { 0xd8 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xa527, gbc.sp());
        EXPECT(0xcd5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcd5d));
        // D8 012B
        gbc.setState(0xad, 0x9c3, 0xe900, 0x6785, 0x3c67, 0xae82, 0x0, 0x1);
        gbc.writeMem(0xad, { 0xd8 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x9c3, gbc.sp());
        EXPECT(0xae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 012D
        gbc.setState(0x94c9, 0xc16c, 0x9300, 0x13a4, 0xa967, 0x41e2, 0x0, 0x1);
        gbc.writeMem(0x94c9, { 0xd8 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xc16c, gbc.sp());
        EXPECT(0x94ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x94c9));
        // D8 012E
        gbc.setState(0x1075, 0x10d, 0x4ce0, 0x4a0d, 0xa11b, 0x35c5, 0x1, 0x1);
        gbc.writeMem(0x1075, { 0xd8 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x10d, gbc.sp());
        EXPECT(0x1076, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 012F
        gbc.setState(0x7ee2, 0xa5d8, 0x6cc0, 0xf7b2, 0x20a5, 0xa9e7, 0x0, 0x1);
        gbc.writeMem(0x7ee2, { 0xd8 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xa5d8, gbc.sp());
        EXPECT(0x7ee3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0130
        gbc.setState(0x48f8, 0x8eed, 0x8e40, 0x7d61, 0x8ec6, 0x1152, 0x0, 0x1);
        gbc.writeMem(0x48f8, { 0xd8 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x8eed, gbc.sp());
        EXPECT(0x48f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0131
        gbc.setState(0x2a47, 0xaaaa, 0x440, 0x96c8, 0x4052, 0x5b9e, 0x0, 0x1);
        gbc.writeMem(0x2a47, { 0xd8 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xaaaa, gbc.sp());
        EXPECT(0x2a48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0132
        gbc.setState(0xdb69, 0x96f1, 0xfef0, 0xfd6d, 0xf2df, 0xcb8d, 0x0, 0x0);
        gbc.writeMem(0x96f1, { 0x3e, 0xc5 });
        gbc.writeMem(0xdb69, { 0xd8 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x96f3, gbc.sp());
        EXPECT(0xc53e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0x96f1));
        EXPECT(0xc5, gbc.readMem(0x96f2));
        EXPECT(0xd8, gbc.readMem(0xdb69));
        // D8 0133
        gbc.setState(0x3936, 0xd79b, 0x63d0, 0xe14f, 0x211f, 0x562b, 0x1, 0x0);
        gbc.writeMem(0x3936, { 0xd8 });
        gbc.writeMem(0xd79b, { 0xa1, 0x1 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xd79d, gbc.sp());
        EXPECT(0x1a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0xd79b));
        EXPECT(0x1, gbc.readMem(0xd79c));
        // D8 0134
        gbc.setState(0x86e8, 0x5b6e, 0x5420, 0xe48d, 0x21bb, 0x20b1, 0x1, 0x0);
        gbc.writeMem(0x86e8, { 0xd8 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x5b6e, gbc.sp());
        EXPECT(0x86e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x86e8));
        // D8 0135
        gbc.setState(0xb6ec, 0xccf5, 0xfb10, 0x526b, 0x27fb, 0xc6d7, 0x1, 0x0);
        gbc.writeMem(0xb6ec, { 0xd8 });
        gbc.writeMem(0xccf5, { 0xdb, 0x36 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xccf7, gbc.sp());
        EXPECT(0x36db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb6ec));
        EXPECT(0xdb, gbc.readMem(0xccf5));
        EXPECT(0x36, gbc.readMem(0xccf6));
        // D8 0136
        gbc.setState(0xa986, 0xf1f8, 0xaae0, 0xb81d, 0xfe1a, 0x4ab0, 0x1, 0x0);
        gbc.writeMem(0xa986, { 0xd8 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xf1f8, gbc.sp());
        EXPECT(0xa987, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa986));
        // D8 0137
        gbc.setState(0xbe25, 0xb1fb, 0xee80, 0x3f3, 0xc306, 0x4c4d, 0x0, 0x0);
        gbc.writeMem(0xbe25, { 0xd8 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xb1fb, gbc.sp());
        EXPECT(0xbe26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe25));
        // D8 0138
        gbc.setState(0x9b67, 0x657d, 0xfee0, 0xf3d9, 0xff0a, 0x794f, 0x0, 0x0);
        gbc.writeMem(0x9b67, { 0xd8 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x657d, gbc.sp());
        EXPECT(0x9b68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9b67));
        // D8 0139
        gbc.setState(0x1f80, 0xc841, 0x5ca0, 0x2268, 0x1fdf, 0x82b2, 0x1, 0x1);
        gbc.writeMem(0x1f80, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xc841, gbc.sp());
        EXPECT(0x1f81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 013A
        gbc.setState(0x1f77, 0x84cc, 0xfc90, 0x62da, 0x94ce, 0x7c82, 0x1, 0x1);
        gbc.writeMem(0x1f77, { 0xd8 });
        gbc.writeMem(0x84cc, { 0xc5, 0x73 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x84ce, gbc.sp());
        EXPECT(0x73c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0x84cc));
        EXPECT(0x73, gbc.readMem(0x84cd));
        // D8 013B
        gbc.setState(0x1c11, 0x9246, 0xdf60, 0xcba4, 0x6fcf, 0x195d, 0x1, 0x1);
        gbc.writeMem(0x1c11, { 0xd8 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x9246, gbc.sp());
        EXPECT(0x1c12, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 013C
        gbc.setState(0x46bf, 0xa4c4, 0x8a90, 0x843a, 0xe891, 0xcad3, 0x1, 0x0);
        gbc.writeMem(0x46bf, { 0xd8 });
        gbc.writeMem(0xa4c4, { 0x26, 0xdd });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xa4c6, gbc.sp());
        EXPECT(0xdd26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xa4c4));
        EXPECT(0xdd, gbc.readMem(0xa4c5));
        // D8 013D
        gbc.setState(0x84a1, 0xfa8e, 0x4c70, 0xf58a, 0xe85a, 0x81f7, 0x0, 0x0);
        gbc.writeMem(0x84a1, { 0xd8 });
        gbc.writeMem(0xfa8e, { 0xb8, 0x6f });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xfa90, gbc.sp());
        EXPECT(0x6fb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x84a1));
        EXPECT(0xb8, gbc.readMem(0xfa8e));
        EXPECT(0x6f, gbc.readMem(0xfa8f));
        // D8 013E
        gbc.setState(0xb6bd, 0x11e1, 0xa510, 0x983b, 0xb5, 0xe34b, 0x1, 0x0);
        gbc.writeMem(0x11e1, { 0x6d, 0xe8 });
        gbc.writeMem(0xb6bd, { 0xd8 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x11e3, gbc.sp());
        EXPECT(0xe86d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb6bd));
        // D8 013F
        gbc.setState(0x71cc, 0x7c16, 0x21e0, 0xf08a, 0xb058, 0xe233, 0x0, 0x0);
        gbc.writeMem(0x71cc, { 0xd8 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x7c16, gbc.sp());
        EXPECT(0x71cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0140
        gbc.setState(0xa1e3, 0xa49, 0x65a0, 0xef79, 0x2c7, 0xf5a1, 0x1, 0x0);
        gbc.writeMem(0xa1e3, { 0xd8 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xa49, gbc.sp());
        EXPECT(0xa1e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa1e3));
        // D8 0141
        gbc.setState(0xa856, 0x628c, 0xfad0, 0xe6bb, 0xd68b, 0xcdb7, 0x0, 0x0);
        gbc.writeMem(0x628c, { 0xc0, 0x7b });
        gbc.writeMem(0xa856, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x628e, gbc.sp());
        EXPECT(0x7bc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa856));
        // D8 0142
        gbc.setState(0x971a, 0x864b, 0xb880, 0xe4e8, 0xc27c, 0x9858, 0x1, 0x0);
        gbc.writeMem(0x971a, { 0xd8 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x864b, gbc.sp());
        EXPECT(0x971b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x971a));
        // D8 0143
        gbc.setState(0xcbf7, 0xaf9b, 0x2e20, 0xfeae, 0x3db6, 0x9925, 0x1, 0x1);
        gbc.writeMem(0xcbf7, { 0xd8 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xaf9b, gbc.sp());
        EXPECT(0xcbf8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcbf7));
        // D8 0144
        gbc.setState(0x8dc8, 0xe61b, 0xbce0, 0x64a4, 0x258a, 0x92c, 0x1, 0x1);
        gbc.writeMem(0x8dc8, { 0xd8 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xe61b, gbc.sp());
        EXPECT(0x8dc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8dc8));
        // D8 0145
        gbc.setState(0x2697, 0xab17, 0xf610, 0x491, 0xc840, 0x2bed, 0x1, 0x0);
        gbc.writeMem(0x2697, { 0xd8 });
        gbc.writeMem(0xab17, { 0x4c, 0x9a });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xab19, gbc.sp());
        EXPECT(0x9a4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4c, gbc.readMem(0xab17));
        EXPECT(0x9a, gbc.readMem(0xab18));
        // D8 0146
        gbc.setState(0x323a, 0x65ab, 0x3ae0, 0x95fa, 0xdcd0, 0x2e19, 0x0, 0x1);
        gbc.writeMem(0x323a, { 0xd8 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x65ab, gbc.sp());
        EXPECT(0x323b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0147
        gbc.setState(0xbead, 0xbf4d, 0x8fa0, 0xd4a1, 0x8c90, 0xf918, 0x0, 0x1);
        gbc.writeMem(0xbead, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xbf4d, gbc.sp());
        EXPECT(0xbeae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbead));
        // D8 0148
        gbc.setState(0x500d, 0xb131, 0x94c0, 0x9a02, 0x17e6, 0x2e6d, 0x0, 0x1);
        gbc.writeMem(0x500d, { 0xd8 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xb131, gbc.sp());
        EXPECT(0x500e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0149
        gbc.setState(0xda0c, 0x1135, 0x2ff0, 0x7189, 0x5e2a, 0x4f5c, 0x1, 0x0);
        gbc.writeMem(0x1135, { 0xc0, 0xaa });
        gbc.writeMem(0xda0c, { 0xd8 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x1137, gbc.sp());
        EXPECT(0xaac0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xda0c));
        // D8 014A
        gbc.setState(0xd990, 0x5834, 0x3230, 0xb22a, 0xaaad, 0x5c53, 0x0, 0x1);
        gbc.writeMem(0x5834, { 0x6e, 0xe6 });
        gbc.writeMem(0xd990, { 0xd8 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x5836, gbc.sp());
        EXPECT(0xe66e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd990));
        // D8 014B
        gbc.setState(0x5608, 0x3c33, 0x1210, 0xb55f, 0xb1f8, 0x7aaa, 0x0, 0x0);
        gbc.writeMem(0x3c33, { 0xfc, 0x94 });
        gbc.writeMem(0x5608, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x3c35, gbc.sp());
        EXPECT(0x94fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 014C
        gbc.setState(0xe446, 0xb1bd, 0xed40, 0x5b17, 0xab4a, 0x3db, 0x1, 0x1);
        gbc.writeMem(0xe446, { 0xd8 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xb1bd, gbc.sp());
        EXPECT(0xe447, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe446));
        // D8 014D
        gbc.setState(0x9929, 0xc8ac, 0x3740, 0x6f7b, 0x4871, 0x8630, 0x1, 0x1);
        gbc.writeMem(0x9929, { 0xd8 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xc8ac, gbc.sp());
        EXPECT(0x992a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9929));
        // D8 014E
        gbc.setState(0xb0c5, 0xa2d8, 0x3250, 0xb7a4, 0xc945, 0x9513, 0x1, 0x0);
        gbc.writeMem(0xa2d8, { 0x27, 0x6f });
        gbc.writeMem(0xb0c5, { 0xd8 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xa2da, gbc.sp());
        EXPECT(0x6f27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xa2d8));
        EXPECT(0x6f, gbc.readMem(0xa2d9));
        EXPECT(0xd8, gbc.readMem(0xb0c5));
        // D8 014F
        gbc.setState(0xd66d, 0x6148, 0x92f0, 0x1d57, 0x779c, 0x2e7a, 0x1, 0x0);
        gbc.writeMem(0x6148, { 0x23, 0x94 });
        gbc.writeMem(0xd66d, { 0xd8 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x614a, gbc.sp());
        EXPECT(0x9423, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd66d));
        // D8 0150
        gbc.setState(0x97a0, 0xc9df, 0xf9f0, 0xf245, 0x80d1, 0x80db, 0x0, 0x1);
        gbc.writeMem(0x97a0, { 0xd8 });
        gbc.writeMem(0xc9df, { 0xbf, 0x90 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xc9e1, gbc.sp());
        EXPECT(0x90bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x97a0));
        EXPECT(0xbf, gbc.readMem(0xc9df));
        EXPECT(0x90, gbc.readMem(0xc9e0));
        // D8 0151
        gbc.setState(0x7988, 0xab79, 0xc370, 0x4af7, 0xc007, 0x38cc, 0x1, 0x0);
        gbc.writeMem(0x7988, { 0xd8 });
        gbc.writeMem(0xab79, { 0x14, 0x8d });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xab7b, gbc.sp());
        EXPECT(0x8d14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x14, gbc.readMem(0xab79));
        EXPECT(0x8d, gbc.readMem(0xab7a));
        // D8 0152
        gbc.setState(0x97ae, 0x1bba, 0x4100, 0xcabd, 0xcea4, 0x1599, 0x1, 0x0);
        gbc.writeMem(0x97ae, { 0xd8 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x1bba, gbc.sp());
        EXPECT(0x97af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x97ae));
        // D8 0153
        gbc.setState(0x244e, 0x3208, 0xc740, 0x11c9, 0x77fd, 0xa593, 0x1, 0x1);
        gbc.writeMem(0x244e, { 0xd8 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x3208, gbc.sp());
        EXPECT(0x244f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0154
        gbc.setState(0x7261, 0x7bb1, 0x4910, 0xd179, 0x548a, 0x9581, 0x1, 0x0);
        gbc.writeMem(0x7261, { 0xd8 });
        gbc.writeMem(0x7bb1, { 0x79, 0xc });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x7bb3, gbc.sp());
        EXPECT(0xc79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0155
        gbc.setState(0x318, 0xba5f, 0x47e0, 0xd47, 0xe940, 0x6af5, 0x0, 0x0);
        gbc.writeMem(0x318, { 0xd8 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xba5f, gbc.sp());
        EXPECT(0x319, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0156
        gbc.setState(0xd4c8, 0xd993, 0xa920, 0xe847, 0xc4ca, 0xaec, 0x0, 0x1);
        gbc.writeMem(0xd4c8, { 0xd8 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xd993, gbc.sp());
        EXPECT(0xd4c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd4c8));
        // D8 0157
        gbc.setState(0xb062, 0x11e9, 0xa2e0, 0xdb6f, 0x49e0, 0xb348, 0x0, 0x0);
        gbc.writeMem(0xb062, { 0xd8 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x11e9, gbc.sp());
        EXPECT(0xb063, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb062));
        // D8 0158
        gbc.setState(0x9d23, 0x9a0, 0x2f50, 0xba27, 0xdf1f, 0x6a0a, 0x0, 0x0);
        gbc.writeMem(0x9a0, { 0x7, 0x47 });
        gbc.writeMem(0x9d23, { 0xd8 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x9a2, gbc.sp());
        EXPECT(0x4707, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9d23));
        // D8 0159
        gbc.setState(0x629a, 0x5b5c, 0x4b60, 0x9ce8, 0x1b5, 0x6096, 0x1, 0x0);
        gbc.writeMem(0x629a, { 0xd8 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x5b5c, gbc.sp());
        EXPECT(0x629b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 015A
        gbc.setState(0x380, 0x1d40, 0x8eb0, 0xb87f, 0x893d, 0xdf6f, 0x0, 0x1);
        gbc.writeMem(0x380, { 0xd8 });
        gbc.writeMem(0x1d40, { 0x86, 0x84 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x1d42, gbc.sp());
        EXPECT(0x8486, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 015B
        gbc.setState(0x6aad, 0xf408, 0xcd70, 0xa4e9, 0x1c0b, 0xfc1e, 0x0, 0x0);
        gbc.writeMem(0x6aad, { 0xd8 });
        gbc.writeMem(0xf408, { 0xd4, 0x75 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xf40a, gbc.sp());
        EXPECT(0x75d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd4, gbc.readMem(0xf408));
        EXPECT(0x75, gbc.readMem(0xf409));
        // D8 015C
        gbc.setState(0xd4d8, 0xac5, 0xa220, 0xf251, 0x9431, 0xcbb3, 0x0, 0x1);
        gbc.writeMem(0xd4d8, { 0xd8 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xac5, gbc.sp());
        EXPECT(0xd4d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd4d8));
        // D8 015D
        gbc.setState(0x5ebf, 0xbe45, 0x8cb0, 0xb490, 0xfc65, 0x2110, 0x1, 0x1);
        gbc.writeMem(0x5ebf, { 0xd8 });
        gbc.writeMem(0xbe45, { 0x79, 0xf });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xbe47, gbc.sp());
        EXPECT(0xf79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0xbe45));
        EXPECT(0xf, gbc.readMem(0xbe46));
        // D8 015E
        gbc.setState(0xe35a, 0x202, 0xf0d0, 0x4144, 0xddff, 0x29ee, 0x0, 0x0);
        gbc.writeMem(0x202, { 0x88, 0x43 });
        gbc.writeMem(0xe35a, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x204, gbc.sp());
        EXPECT(0x4388, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe35a));
        // D8 015F
        gbc.setState(0xdb1f, 0x6040, 0x52c0, 0x826c, 0xbb6, 0x9034, 0x0, 0x1);
        gbc.writeMem(0xdb1f, { 0xd8 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x6040, gbc.sp());
        EXPECT(0xdb20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdb1f));
        // D8 0160
        gbc.setState(0x53af, 0xdac4, 0x50b0, 0xa69f, 0x27b5, 0xd3a7, 0x0, 0x1);
        gbc.writeMem(0x53af, { 0xd8 });
        gbc.writeMem(0xdac4, { 0x9a, 0x6d });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xdac6, gbc.sp());
        EXPECT(0x6d9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9a, gbc.readMem(0xdac4));
        EXPECT(0x6d, gbc.readMem(0xdac5));
        // D8 0161
        gbc.setState(0xbd6d, 0x640b, 0x8fa0, 0x3b80, 0xaf43, 0x5c60, 0x1, 0x1);
        gbc.writeMem(0xbd6d, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x640b, gbc.sp());
        EXPECT(0xbd6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbd6d));
        // D8 0162
        gbc.setState(0x861f, 0x20bb, 0x7220, 0x427, 0x3a4f, 0x389d, 0x1, 0x0);
        gbc.writeMem(0x861f, { 0xd8 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x20bb, gbc.sp());
        EXPECT(0x8620, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x861f));
        // D8 0164
        gbc.setState(0x254f, 0xacbf, 0x6cc0, 0xc71b, 0x38a1, 0xeeba, 0x1, 0x0);
        gbc.writeMem(0x254f, { 0xd8 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xacbf, gbc.sp());
        EXPECT(0x2550, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0165
        gbc.setState(0x7da3, 0xddc4, 0xc020, 0xefeb, 0xd4e7, 0x24fe, 0x1, 0x1);
        gbc.writeMem(0x7da3, { 0xd8 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xddc4, gbc.sp());
        EXPECT(0x7da4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0166
        gbc.setState(0x67e5, 0xe8ea, 0x8fa0, 0xcccf, 0x4bd6, 0x8aa4, 0x0, 0x1);
        gbc.writeMem(0x67e5, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe8ea, gbc.sp());
        EXPECT(0x67e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0167
        gbc.setState(0x9bdc, 0x59df, 0x3890, 0xb6c8, 0xa4b7, 0x8d6, 0x0, 0x1);
        gbc.writeMem(0x59df, { 0xb3, 0xaf });
        gbc.writeMem(0x9bdc, { 0xd8 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x59e1, gbc.sp());
        EXPECT(0xafb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9bdc));
        // D8 0168
        gbc.setState(0xac0, 0x973a, 0x6100, 0x1b09, 0x2ef5, 0xec3e, 0x1, 0x1);
        gbc.writeMem(0xac0, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x973a, gbc.sp());
        EXPECT(0xac1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0169
        gbc.setState(0x6e6d, 0xb2d0, 0x3c60, 0x25bb, 0xeb82, 0x16fd, 0x1, 0x0);
        gbc.writeMem(0x6e6d, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xb2d0, gbc.sp());
        EXPECT(0x6e6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 016A
        gbc.setState(0xb77b, 0x39ca, 0xefe0, 0x5eef, 0x84c3, 0xd021, 0x0, 0x1);
        gbc.writeMem(0xb77b, { 0xd8 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x39ca, gbc.sp());
        EXPECT(0xb77c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb77b));
        // D8 016B
        gbc.setState(0x798b, 0x26a, 0x8380, 0x2a68, 0x93a6, 0x4a2c, 0x0, 0x1);
        gbc.writeMem(0x798b, { 0xd8 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x26a, gbc.sp());
        EXPECT(0x798c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 016C
        gbc.setState(0x22a3, 0x73da, 0xbc70, 0xb594, 0xe316, 0x7c78, 0x1, 0x1);
        gbc.writeMem(0x22a3, { 0xd8 });
        gbc.writeMem(0x73da, { 0x84, 0x92 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x73dc, gbc.sp());
        EXPECT(0x9284, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 016D
        gbc.setState(0x33d5, 0x2d0d, 0x1270, 0xaa34, 0x1c5d, 0x6697, 0x0, 0x0);
        gbc.writeMem(0x2d0d, { 0x18, 0xcd });
        gbc.writeMem(0x33d5, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x2d0f, gbc.sp());
        EXPECT(0xcd18, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 016E
        gbc.setState(0x43cf, 0xc5ea, 0x410, 0xf16, 0x12cf, 0xd2ad, 0x0, 0x1);
        gbc.writeMem(0x43cf, { 0xd8 });
        gbc.writeMem(0xc5ea, { 0xae, 0x14 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc5ec, gbc.sp());
        EXPECT(0x14ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xae, gbc.readMem(0xc5ea));
        EXPECT(0x14, gbc.readMem(0xc5eb));
        // D8 016F
        gbc.setState(0x5f54, 0xef34, 0xc500, 0x6d6a, 0x7042, 0x7e77, 0x1, 0x0);
        gbc.writeMem(0x5f54, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xef34, gbc.sp());
        EXPECT(0x5f55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0170
        gbc.setState(0x422, 0xa14b, 0x34c0, 0x6681, 0x2f4f, 0xf3dd, 0x0, 0x0);
        gbc.writeMem(0x422, { 0xd8 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xa14b, gbc.sp());
        EXPECT(0x423, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0171
        gbc.setState(0x8b74, 0x4701, 0xf080, 0xe67c, 0x72b, 0x8f15, 0x0, 0x1);
        gbc.writeMem(0x8b74, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x4701, gbc.sp());
        EXPECT(0x8b75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8b74));
        // D8 0172
        gbc.setState(0x5197, 0x9fc0, 0xea40, 0x91d6, 0x332d, 0xa2ea, 0x0, 0x0);
        gbc.writeMem(0x5197, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x9fc0, gbc.sp());
        EXPECT(0x5198, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0173
        gbc.setState(0xedd7, 0x1a33, 0x8660, 0xd338, 0x2606, 0xcfe7, 0x0, 0x0);
        gbc.writeMem(0xedd7, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x1a33, gbc.sp());
        EXPECT(0xedd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xedd7));
        // D8 0174
        gbc.setState(0xeafd, 0x283e, 0x2a80, 0xcd7c, 0xcfdb, 0x6841, 0x1, 0x1);
        gbc.writeMem(0xeafd, { 0xd8 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x283e, gbc.sp());
        EXPECT(0xeafe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeafd));
        // D8 0175
        gbc.setState(0x13d3, 0x2c8f, 0x6510, 0x5b3, 0x2ca7, 0x6a5e, 0x1, 0x0);
        gbc.writeMem(0x13d3, { 0xd8 });
        gbc.writeMem(0x2c8f, { 0x42, 0xe8 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2c91, gbc.sp());
        EXPECT(0xe842, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0176
        gbc.setState(0x4312, 0x6fbd, 0x210, 0x6815, 0x7a88, 0x6032, 0x1, 0x1);
        gbc.writeMem(0x4312, { 0xd8 });
        gbc.writeMem(0x6fbd, { 0x38, 0xee });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x6fbf, gbc.sp());
        EXPECT(0xee38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0177
        gbc.setState(0xea62, 0x2f6c, 0x1eb0, 0x7b8b, 0x59b3, 0x3029, 0x1, 0x0);
        gbc.writeMem(0x2f6c, { 0xd2, 0x43 });
        gbc.writeMem(0xea62, { 0xd8 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x2f6e, gbc.sp());
        EXPECT(0x43d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xea62));
        // D8 0178
        gbc.setState(0x7178, 0xd48, 0x21a0, 0x2c7e, 0x24f7, 0xe346, 0x1, 0x1);
        gbc.writeMem(0x7178, { 0xd8 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xd48, gbc.sp());
        EXPECT(0x7179, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0179
        gbc.setState(0x9ee0, 0x5789, 0x2e70, 0x8012, 0x723f, 0x6257, 0x0, 0x0);
        gbc.writeMem(0x5789, { 0x11, 0xf8 });
        gbc.writeMem(0x9ee0, { 0xd8 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x578b, gbc.sp());
        EXPECT(0xf811, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ee0));
        // D8 017A
        gbc.setState(0xd3cf, 0x6097, 0x6080, 0x5e39, 0xb57a, 0x6f9e, 0x1, 0x0);
        gbc.writeMem(0xd3cf, { 0xd8 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x6097, gbc.sp());
        EXPECT(0xd3d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd3cf));
        // D8 017B
        gbc.setState(0xe65a, 0xac9c, 0x8610, 0x5346, 0xa8a1, 0x564c, 0x0, 0x1);
        gbc.writeMem(0xac9c, { 0xed, 0x1f });
        gbc.writeMem(0xe65a, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xac9e, gbc.sp());
        EXPECT(0x1fed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xac9c));
        EXPECT(0x1f, gbc.readMem(0xac9d));
        EXPECT(0xd8, gbc.readMem(0xe65a));
        // D8 017C
        gbc.setState(0x99f3, 0xfbe7, 0x3410, 0x4144, 0xb52a, 0x989f, 0x1, 0x1);
        gbc.writeMem(0x99f3, { 0xd8 });
        gbc.writeMem(0xfbe7, { 0xa5, 0x37 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xfbe9, gbc.sp());
        EXPECT(0x37a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x99f3));
        EXPECT(0xa5, gbc.readMem(0xfbe7));
        EXPECT(0x37, gbc.readMem(0xfbe8));
        // D8 017D
        gbc.setState(0x7574, 0x476a, 0x7d50, 0x2408, 0xa24c, 0x8a67, 0x1, 0x0);
        gbc.writeMem(0x476a, { 0xe2, 0x30 });
        gbc.writeMem(0x7574, { 0xd8 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x476c, gbc.sp());
        EXPECT(0x30e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 017E
        gbc.setState(0xbe0a, 0x172a, 0x4e10, 0xca45, 0xeef4, 0x7824, 0x0, 0x1);
        gbc.writeMem(0x172a, { 0x22, 0xa });
        gbc.writeMem(0xbe0a, { 0xd8 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x172c, gbc.sp());
        EXPECT(0xa22, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe0a));
        // D8 017F
        gbc.setState(0x5e3b, 0xb862, 0xaa30, 0x8b28, 0xed86, 0x71d3, 0x0, 0x1);
        gbc.writeMem(0x5e3b, { 0xd8 });
        gbc.writeMem(0xb862, { 0xc, 0xc4 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xb864, gbc.sp());
        EXPECT(0xc40c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xb862));
        EXPECT(0xc4, gbc.readMem(0xb863));
        // D8 0180
        gbc.setState(0x1e3f, 0x4334, 0xa860, 0xb26, 0xaeaf, 0xff4d, 0x1, 0x1);
        gbc.writeMem(0x1e3f, { 0xd8 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x4334, gbc.sp());
        EXPECT(0x1e40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0181
        gbc.setState(0xdcf1, 0x2fd5, 0x2df0, 0x431, 0x8664, 0x3f26, 0x1, 0x1);
        gbc.writeMem(0x2fd5, { 0x1d, 0x38 });
        gbc.writeMem(0xdcf1, { 0xd8 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x2fd7, gbc.sp());
        EXPECT(0x381d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdcf1));
        // D8 0183
        gbc.setState(0x9503, 0x81c6, 0x9950, 0xa53b, 0x2bba, 0x5885, 0x0, 0x0);
        gbc.writeMem(0x81c6, { 0x3a, 0xf3 });
        gbc.writeMem(0x9503, { 0xd8 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x81c8, gbc.sp());
        EXPECT(0xf33a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0x81c6));
        EXPECT(0xf3, gbc.readMem(0x81c7));
        EXPECT(0xd8, gbc.readMem(0x9503));
        // D8 0184
        gbc.setState(0xde81, 0x60bb, 0x5cb0, 0x4204, 0x5fba, 0xd9f1, 0x1, 0x1);
        gbc.writeMem(0x60bb, { 0xd3, 0x2f });
        gbc.writeMem(0xde81, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x60bd, gbc.sp());
        EXPECT(0x2fd3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xde81));
        // D8 0185
        gbc.setState(0xaaac, 0xa72d, 0xe550, 0x5a16, 0xd8d5, 0x108f, 0x1, 0x0);
        gbc.writeMem(0xa72d, { 0xed, 0xbe });
        gbc.writeMem(0xaaac, { 0xd8 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xa72f, gbc.sp());
        EXPECT(0xbeed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xa72d));
        EXPECT(0xbe, gbc.readMem(0xa72e));
        EXPECT(0xd8, gbc.readMem(0xaaac));
        // D8 0186
        gbc.setState(0x7d20, 0x1b68, 0x41b0, 0x7d2f, 0x9804, 0x3eda, 0x0, 0x0);
        gbc.writeMem(0x1b68, { 0x53, 0x91 });
        gbc.writeMem(0x7d20, { 0xd8 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x1b6a, gbc.sp());
        EXPECT(0x9153, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0187
        gbc.setState(0x4211, 0x7dc, 0xce90, 0xcfd4, 0xf73c, 0xfb54, 0x0, 0x0);
        gbc.writeMem(0x7dc, { 0x73, 0x33 });
        gbc.writeMem(0x4211, { 0xd8 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x7de, gbc.sp());
        EXPECT(0x3373, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0188
        gbc.setState(0xee34, 0xa59e, 0x9610, 0xffa1, 0x4172, 0x9ca8, 0x1, 0x1);
        gbc.writeMem(0xa59e, { 0x71, 0xc9 });
        gbc.writeMem(0xee34, { 0xd8 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa5a0, gbc.sp());
        EXPECT(0xc971, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0xa59e));
        EXPECT(0xc9, gbc.readMem(0xa59f));
        EXPECT(0xd8, gbc.readMem(0xee34));
        // D8 0189
        gbc.setState(0xc558, 0x57be, 0x60d0, 0x9a0c, 0xd9f5, 0x9998, 0x1, 0x0);
        gbc.writeMem(0x57be, { 0xde, 0xf5 });
        gbc.writeMem(0xc558, { 0xd8 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x57c0, gbc.sp());
        EXPECT(0xf5de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc558));
        // D8 018A
        gbc.setState(0x9acc, 0xeabe, 0x6930, 0xa25e, 0xb62b, 0xf59a, 0x1, 0x0);
        gbc.writeMem(0x9acc, { 0xd8 });
        gbc.writeMem(0xeabe, { 0x85, 0x5e });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xeac0, gbc.sp());
        EXPECT(0x5e85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9acc));
        EXPECT(0x85, gbc.readMem(0xeabe));
        EXPECT(0x5e, gbc.readMem(0xeabf));
        // D8 018B
        gbc.setState(0x324, 0xa87a, 0x1c40, 0xf3a8, 0xeda6, 0x8e19, 0x1, 0x0);
        gbc.writeMem(0x324, { 0xd8 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xa87a, gbc.sp());
        EXPECT(0x325, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 018C
        gbc.setState(0x8da2, 0xb6bd, 0xc550, 0x69d1, 0x291b, 0xb95f, 0x1, 0x0);
        gbc.writeMem(0x8da2, { 0xd8 });
        gbc.writeMem(0xb6bd, { 0x8b, 0xfb });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb6bf, gbc.sp());
        EXPECT(0xfb8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8da2));
        EXPECT(0x8b, gbc.readMem(0xb6bd));
        EXPECT(0xfb, gbc.readMem(0xb6be));
        // D8 018D
        gbc.setState(0xe078, 0xc42a, 0x8f20, 0x8bdf, 0x9fed, 0x3df9, 0x0, 0x1);
        gbc.writeMem(0xe078, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xc42a, gbc.sp());
        EXPECT(0xe079, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe078));
        // D8 018E
        gbc.setState(0x40cc, 0x37b, 0xe290, 0x4e09, 0xe015, 0x8c95, 0x1, 0x0);
        gbc.writeMem(0x37b, { 0x16, 0xa0 });
        gbc.writeMem(0x40cc, { 0xd8 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x37d, gbc.sp());
        EXPECT(0xa016, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 018F
        gbc.setState(0x9bd7, 0x3e41, 0x6630, 0x9e8e, 0x8568, 0x52a3, 0x0, 0x1);
        gbc.writeMem(0x3e41, { 0x1a, 0xca });
        gbc.writeMem(0x9bd7, { 0xd8 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x3e43, gbc.sp());
        EXPECT(0xca1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9bd7));
        // D8 0190
        gbc.setState(0x7a57, 0xffbf, 0x2640, 0x510b, 0x2605, 0x6d8c, 0x1, 0x0);
        gbc.writeMem(0x7a57, { 0xd8 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xffbf, gbc.sp());
        EXPECT(0x7a58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0191
        gbc.setState(0x529e, 0x7f5d, 0xb3d0, 0x5f5a, 0x73b3, 0x2a24, 0x1, 0x1);
        gbc.writeMem(0x529e, { 0xd8 });
        gbc.writeMem(0x7f5d, { 0xf, 0x6 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x7f5f, gbc.sp());
        EXPECT(0x60f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0192
        gbc.setState(0xdb5c, 0xea4d, 0x3ba0, 0x8e0b, 0xec9c, 0xda5, 0x0, 0x0);
        gbc.writeMem(0xdb5c, { 0xd8 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xea4d, gbc.sp());
        EXPECT(0xdb5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdb5c));
        // D8 0193
        gbc.setState(0xbd52, 0xb93, 0xa270, 0xf036, 0xe1cd, 0x168e, 0x1, 0x0);
        gbc.writeMem(0xb93, { 0xc2, 0x25 });
        gbc.writeMem(0xbd52, { 0xd8 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xb95, gbc.sp());
        EXPECT(0x25c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbd52));
        // D8 0194
        gbc.setState(0x989a, 0xd3f5, 0x1b70, 0xc782, 0x7735, 0xdf07, 0x0, 0x1);
        gbc.writeMem(0x989a, { 0xd8 });
        gbc.writeMem(0xd3f5, { 0x4, 0xc3 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xd3f7, gbc.sp());
        EXPECT(0xc304, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x989a));
        EXPECT(0x4, gbc.readMem(0xd3f5));
        EXPECT(0xc3, gbc.readMem(0xd3f6));
        // D8 0195
        gbc.setState(0x192d, 0x6c65, 0x7a80, 0x9ddd, 0x5a6d, 0x1ad8, 0x1, 0x1);
        gbc.writeMem(0x192d, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x6c65, gbc.sp());
        EXPECT(0x192e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0196
        gbc.setState(0xa237, 0x3f13, 0xea30, 0xc9ef, 0xc0a7, 0x4fa4, 0x1, 0x1);
        gbc.writeMem(0x3f13, { 0xe5, 0x53 });
        gbc.writeMem(0xa237, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x3f15, gbc.sp());
        EXPECT(0x53e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa237));
        // D8 0199
        gbc.setState(0xc39b, 0x2ab9, 0xc7d0, 0x5ecd, 0xd65d, 0x4d71, 0x1, 0x1);
        gbc.writeMem(0x2ab9, { 0x2, 0x4d });
        gbc.writeMem(0xc39b, { 0xd8 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x2abb, gbc.sp());
        EXPECT(0x4d02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc39b));
        // D8 019B
        gbc.setState(0x745b, 0xf466, 0xa130, 0xf513, 0x6596, 0x6a7, 0x1, 0x0);
        gbc.writeMem(0x745b, { 0xd8 });
        gbc.writeMem(0xf466, { 0x27, 0x5a });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf468, gbc.sp());
        EXPECT(0x5a27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xf466));
        EXPECT(0x5a, gbc.readMem(0xf467));
        // D8 019C
        gbc.setState(0x852c, 0x23bb, 0x2ea0, 0x111c, 0xb0a8, 0xd4ce, 0x1, 0x0);
        gbc.writeMem(0x852c, { 0xd8 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x23bb, gbc.sp());
        EXPECT(0x852d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x852c));
        // D8 019D
        gbc.setState(0xae13, 0x3409, 0x4c0, 0x336d, 0x9d5, 0x55c1, 0x0, 0x1);
        gbc.writeMem(0xae13, { 0xd8 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x3409, gbc.sp());
        EXPECT(0xae14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xae13));
        // D8 019E
        gbc.setState(0xa8c1, 0x845d, 0x1ef0, 0x1cc4, 0x1c6c, 0x652, 0x0, 0x1);
        gbc.writeMem(0x845d, { 0x59, 0x39 });
        gbc.writeMem(0xa8c1, { 0xd8 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x845f, gbc.sp());
        EXPECT(0x3959, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0x845d));
        EXPECT(0x39, gbc.readMem(0x845e));
        EXPECT(0xd8, gbc.readMem(0xa8c1));
        // D8 019F
        gbc.setState(0xbfca, 0x7a15, 0x8160, 0x369a, 0xb247, 0x7300, 0x1, 0x0);
        gbc.writeMem(0xbfca, { 0xd8 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x7a15, gbc.sp());
        EXPECT(0xbfcb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbfca));
        // D8 01A0
        gbc.setState(0x3fc6, 0xd85f, 0x9530, 0xccbb, 0x4900, 0x2b73, 0x1, 0x0);
        gbc.writeMem(0x3fc6, { 0xd8 });
        gbc.writeMem(0xd85f, { 0xb9, 0xbb });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xd861, gbc.sp());
        EXPECT(0xbbb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb9, gbc.readMem(0xd85f));
        EXPECT(0xbb, gbc.readMem(0xd860));
        // D8 01A1
        gbc.setState(0x7ea5, 0xc881, 0x5e60, 0x3922, 0x5b6c, 0xfdd0, 0x1, 0x0);
        gbc.writeMem(0x7ea5, { 0xd8 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xc881, gbc.sp());
        EXPECT(0x7ea6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01A2
        gbc.setState(0x8eb0, 0x8fc7, 0xbff0, 0x8625, 0x130, 0x77b2, 0x1, 0x1);
        gbc.writeMem(0x8eb0, { 0xd8 });
        gbc.writeMem(0x8fc7, { 0x2c, 0xfe });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x8fc9, gbc.sp());
        EXPECT(0xfe2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8eb0));
        EXPECT(0x2c, gbc.readMem(0x8fc7));
        EXPECT(0xfe, gbc.readMem(0x8fc8));
        // D8 01A4
        gbc.setState(0x75e3, 0x17ea, 0xc3f0, 0x1b69, 0x4bb6, 0x5d17, 0x1, 0x0);
        gbc.writeMem(0x17ea, { 0xd4, 0xbd });
        gbc.writeMem(0x75e3, { 0xd8 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x17ec, gbc.sp());
        EXPECT(0xbdd4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01A5
        gbc.setState(0xbbd, 0xa093, 0x3150, 0x32e5, 0x5a44, 0xa815, 0x0, 0x0);
        gbc.writeMem(0xbbd, { 0xd8 });
        gbc.writeMem(0xa093, { 0x1, 0x29 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xa095, gbc.sp());
        EXPECT(0x2901, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xa093));
        EXPECT(0x29, gbc.readMem(0xa094));
        // D8 01A6
        gbc.setState(0x4d57, 0x1656, 0xea40, 0x2e5e, 0x3c90, 0x9c61, 0x0, 0x1);
        gbc.writeMem(0x4d57, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x1656, gbc.sp());
        EXPECT(0x4d58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01A7
        gbc.setState(0x84be, 0x9bdb, 0x98b0, 0x9101, 0x6a8b, 0x5bee, 0x1, 0x1);
        gbc.writeMem(0x84be, { 0xd8 });
        gbc.writeMem(0x9bdb, { 0x80, 0x43 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x9bdd, gbc.sp());
        EXPECT(0x4380, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x84be));
        EXPECT(0x80, gbc.readMem(0x9bdb));
        EXPECT(0x43, gbc.readMem(0x9bdc));
        // D8 01A8
        gbc.setState(0x357e, 0x81a6, 0x4b90, 0xad70, 0xfa9c, 0x4d2f, 0x1, 0x1);
        gbc.writeMem(0x357e, { 0xd8 });
        gbc.writeMem(0x81a6, { 0xdf, 0xe9 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x81a8, gbc.sp());
        EXPECT(0xe9df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdf, gbc.readMem(0x81a6));
        EXPECT(0xe9, gbc.readMem(0x81a7));
        // D8 01A9
        gbc.setState(0xad, 0x8015, 0xab0, 0xd481, 0x3109, 0x687b, 0x1, 0x0);
        gbc.writeMem(0xad, { 0xd8 });
        gbc.writeMem(0x8015, { 0x83, 0x39 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x8017, gbc.sp());
        EXPECT(0x3983, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0x8015));
        EXPECT(0x39, gbc.readMem(0x8016));
        // D8 01AA
        gbc.setState(0x2203, 0xb31, 0x35a0, 0x640, 0x2259, 0x9431, 0x0, 0x0);
        gbc.writeMem(0x2203, { 0xd8 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xb31, gbc.sp());
        EXPECT(0x2204, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01AB
        gbc.setState(0x2265, 0x25d6, 0x6b50, 0xc8b1, 0x2cfe, 0x8276, 0x1, 0x0);
        gbc.writeMem(0x2265, { 0xd8 });
        gbc.writeMem(0x25d6, { 0xb9, 0xd3 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x25d8, gbc.sp());
        EXPECT(0xd3b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01AC
        gbc.setState(0x75f5, 0x1db9, 0x7ba0, 0x3729, 0xeac8, 0xd2dc, 0x1, 0x1);
        gbc.writeMem(0x75f5, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x1db9, gbc.sp());
        EXPECT(0x75f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01AD
        gbc.setState(0xc7b5, 0xee6b, 0xb150, 0xd395, 0x43ea, 0x603a, 0x1, 0x1);
        gbc.writeMem(0xc7b5, { 0xd8 });
        gbc.writeMem(0xee6b, { 0xc0, 0xd4 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xee6d, gbc.sp());
        EXPECT(0xd4c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc7b5));
        EXPECT(0xc0, gbc.readMem(0xee6b));
        EXPECT(0xd4, gbc.readMem(0xee6c));
        // D8 01AE
        gbc.setState(0xb191, 0x8cdd, 0xc640, 0x8dec, 0x6b10, 0x2059, 0x0, 0x1);
        gbc.writeMem(0xb191, { 0xd8 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x8cdd, gbc.sp());
        EXPECT(0xb192, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb191));
        // D8 01AF
        gbc.setState(0x34c4, 0xfc8f, 0x32a0, 0x31d1, 0x4338, 0x6849, 0x0, 0x1);
        gbc.writeMem(0x34c4, { 0xd8 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xfc8f, gbc.sp());
        EXPECT(0x34c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01B0
        gbc.setState(0x9e5, 0x339b, 0xe630, 0x5132, 0x50b7, 0x6928, 0x0, 0x0);
        gbc.writeMem(0x9e5, { 0xd8 });
        gbc.writeMem(0x339b, { 0x42, 0xc0 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x339d, gbc.sp());
        EXPECT(0xc042, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01B1
        gbc.setState(0x9cb3, 0xb085, 0xc710, 0x5f6c, 0x2e29, 0x473d, 0x0, 0x0);
        gbc.writeMem(0x9cb3, { 0xd8 });
        gbc.writeMem(0xb085, { 0x95, 0x1e });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xb087, gbc.sp());
        EXPECT(0x1e95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9cb3));
        EXPECT(0x95, gbc.readMem(0xb085));
        EXPECT(0x1e, gbc.readMem(0xb086));
        // D8 01B2
        gbc.setState(0xef00, 0xacf0, 0x7ba0, 0xefdb, 0x83f1, 0x610b, 0x1, 0x0);
        gbc.writeMem(0xef00, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xacf0, gbc.sp());
        EXPECT(0xef01, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xef00));
        // D8 01B3
        gbc.setState(0x6d85, 0xb62b, 0xcb20, 0xceb6, 0xaba4, 0x5e72, 0x1, 0x1);
        gbc.writeMem(0x6d85, { 0xd8 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xb62b, gbc.sp());
        EXPECT(0x6d86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01B4
        gbc.setState(0xb70a, 0x9d41, 0xc850, 0xd213, 0x5069, 0xfe41, 0x1, 0x1);
        gbc.writeMem(0x9d41, { 0xa, 0x35 });
        gbc.writeMem(0xb70a, { 0xd8 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x9d43, gbc.sp());
        EXPECT(0x350a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0x9d41));
        EXPECT(0x35, gbc.readMem(0x9d42));
        EXPECT(0xd8, gbc.readMem(0xb70a));
        // D8 01B5
        gbc.setState(0x6ba6, 0x1bce, 0x3b70, 0x7d0a, 0xafd6, 0x42a5, 0x1, 0x1);
        gbc.writeMem(0x1bce, { 0x22, 0x22 });
        gbc.writeMem(0x6ba6, { 0xd8 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x1bd0, gbc.sp());
        EXPECT(0x2222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01B6
        gbc.setState(0xaeed, 0xbaa7, 0x38a0, 0xa7b9, 0xe7, 0x8ef7, 0x1, 0x0);
        gbc.writeMem(0xaeed, { 0xd8 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xbaa7, gbc.sp());
        EXPECT(0xaeee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xaeed));
        // D8 01B7
        gbc.setState(0x57f8, 0x54c4, 0xd000, 0x68e4, 0x746d, 0xa390, 0x1, 0x0);
        gbc.writeMem(0x57f8, { 0xd8 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x54c4, gbc.sp());
        EXPECT(0x57f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01B8
        gbc.setState(0xccd6, 0xde5e, 0x54e0, 0xd60f, 0x16c0, 0x1594, 0x1, 0x1);
        gbc.writeMem(0xccd6, { 0xd8 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xde5e, gbc.sp());
        EXPECT(0xccd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xccd6));
        // D8 01B9
        gbc.setState(0xb82e, 0x3837, 0xa310, 0x17d7, 0x650f, 0x293f, 0x0, 0x1);
        gbc.writeMem(0x3837, { 0x4d, 0x47 });
        gbc.writeMem(0xb82e, { 0xd8 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x3839, gbc.sp());
        EXPECT(0x474d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb82e));
        // D8 01BA
        gbc.setState(0xa91e, 0x76f1, 0xc3d0, 0x8a0f, 0x3390, 0x3c76, 0x1, 0x1);
        gbc.writeMem(0x76f1, { 0x94, 0x5f });
        gbc.writeMem(0xa91e, { 0xd8 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x76f3, gbc.sp());
        EXPECT(0x5f94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa91e));
        // D8 01BB
        gbc.setState(0xc07e, 0xf142, 0x8a30, 0x3527, 0x7fcc, 0xbcf1, 0x1, 0x1);
        gbc.writeMem(0xc07e, { 0xd8 });
        gbc.writeMem(0xf142, { 0x5c, 0x19 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xf144, gbc.sp());
        EXPECT(0x195c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc07e));
        EXPECT(0x5c, gbc.readMem(0xf142));
        EXPECT(0x19, gbc.readMem(0xf143));
        // D8 01BC
        gbc.setState(0xd8d8, 0xd72b, 0xe2e0, 0xd7ab, 0x616, 0x1bb9, 0x1, 0x0);
        gbc.writeMem(0xd8d8, { 0xd8 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xd72b, gbc.sp());
        EXPECT(0xd8d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd8d8));
        // D8 01BD
        gbc.setState(0x68cb, 0xea59, 0xa8f0, 0xb33b, 0x7783, 0x3aa2, 0x0, 0x0);
        gbc.writeMem(0x68cb, { 0xd8 });
        gbc.writeMem(0xea59, { 0xe7, 0x2c });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xea5b, gbc.sp());
        EXPECT(0x2ce7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe7, gbc.readMem(0xea59));
        EXPECT(0x2c, gbc.readMem(0xea5a));
        // D8 01BE
        gbc.setState(0x6a69, 0xf3c2, 0x6810, 0x7b37, 0xaa8f, 0x9326, 0x1, 0x1);
        gbc.writeMem(0x6a69, { 0xd8 });
        gbc.writeMem(0xf3c2, { 0x2d, 0xa });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xf3c4, gbc.sp());
        EXPECT(0xa2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0xf3c2));
        EXPECT(0xa, gbc.readMem(0xf3c3));
        // D8 01C0
        gbc.setState(0x126c, 0x249, 0x13a0, 0x1542, 0x6458, 0xe620, 0x0, 0x0);
        gbc.writeMem(0x126c, { 0xd8 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x249, gbc.sp());
        EXPECT(0x126d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01C1
        gbc.setState(0x64db, 0x51a0, 0x2320, 0xd6f5, 0xccc3, 0xb993, 0x0, 0x1);
        gbc.writeMem(0x64db, { 0xd8 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x51a0, gbc.sp());
        EXPECT(0x64dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01C2
        gbc.setState(0x99c, 0x3816, 0xa4d0, 0x8c19, 0x667d, 0xe8c1, 0x1, 0x1);
        gbc.writeMem(0x99c, { 0xd8 });
        gbc.writeMem(0x3816, { 0x55, 0x54 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x3818, gbc.sp());
        EXPECT(0x5455, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01C3
        gbc.setState(0xb8a, 0x4dd9, 0x5bf0, 0xa9c8, 0xf0c, 0x6ba2, 0x1, 0x1);
        gbc.writeMem(0xb8a, { 0xd8 });
        gbc.writeMem(0x4dd9, { 0x1d, 0x14 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x4ddb, gbc.sp());
        EXPECT(0x141d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01C4
        gbc.setState(0xe2d9, 0xb823, 0xc0f0, 0x8b5d, 0x1037, 0xb752, 0x0, 0x0);
        gbc.writeMem(0xb823, { 0x38, 0x18 });
        gbc.writeMem(0xe2d9, { 0xd8 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xb825, gbc.sp());
        EXPECT(0x1838, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x38, gbc.readMem(0xb823));
        EXPECT(0x18, gbc.readMem(0xb824));
        EXPECT(0xd8, gbc.readMem(0xe2d9));
        // D8 01C5
        gbc.setState(0xddd, 0x55a6, 0x5b10, 0x5508, 0x39a8, 0x8ebe, 0x1, 0x0);
        gbc.writeMem(0xddd, { 0xd8 });
        gbc.writeMem(0x55a6, { 0x1e, 0x42 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x55a8, gbc.sp());
        EXPECT(0x421e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01C6
        gbc.setState(0xe890, 0x6c1a, 0xbb30, 0xfb8f, 0x567, 0x302c, 0x1, 0x1);
        gbc.writeMem(0x6c1a, { 0x5, 0xda });
        gbc.writeMem(0xe890, { 0xd8 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x6c1c, gbc.sp());
        EXPECT(0xda05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe890));
        // D8 01C7
        gbc.setState(0xd5fe, 0x1b46, 0xbe00, 0xf570, 0xd484, 0xfd57, 0x1, 0x0);
        gbc.writeMem(0xd5fe, { 0xd8 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x1b46, gbc.sp());
        EXPECT(0xd5ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd5fe));
        // D8 01C8
        gbc.setState(0x1526, 0xa80, 0x3900, 0x63cc, 0x656f, 0x4f92, 0x0, 0x1);
        gbc.writeMem(0x1526, { 0xd8 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xa80, gbc.sp());
        EXPECT(0x1527, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01C9
        gbc.setState(0x30de, 0x3100, 0xb640, 0x5aa6, 0x2ad0, 0x5147, 0x1, 0x1);
        gbc.writeMem(0x30de, { 0xd8 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x3100, gbc.sp());
        EXPECT(0x30df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01CA
        gbc.setState(0x843, 0xd11e, 0x5620, 0xd25, 0x2c8f, 0x2a0c, 0x1, 0x1);
        gbc.writeMem(0x843, { 0xd8 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xd11e, gbc.sp());
        EXPECT(0x844, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01CB
        gbc.setState(0xd8db, 0x8ef6, 0xc980, 0x7a88, 0xfd21, 0x3aca, 0x0, 0x0);
        gbc.writeMem(0xd8db, { 0xd8 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x8ef6, gbc.sp());
        EXPECT(0xd8dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd8db));
        // D8 01CC
        gbc.setState(0x81af, 0xf19c, 0xf070, 0x5bf, 0xd65e, 0x3914, 0x1, 0x0);
        gbc.writeMem(0x81af, { 0xd8 });
        gbc.writeMem(0xf19c, { 0x93, 0x25 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf19e, gbc.sp());
        EXPECT(0x2593, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x81af));
        EXPECT(0x93, gbc.readMem(0xf19c));
        EXPECT(0x25, gbc.readMem(0xf19d));
        // D8 01CD
        gbc.setState(0x789b, 0xbceb, 0xa530, 0xbc98, 0x3c42, 0x4b5e, 0x1, 0x1);
        gbc.writeMem(0x789b, { 0xd8 });
        gbc.writeMem(0xbceb, { 0xd2, 0xa2 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xbced, gbc.sp());
        EXPECT(0xa2d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd2, gbc.readMem(0xbceb));
        EXPECT(0xa2, gbc.readMem(0xbcec));
        // D8 01CE
        gbc.setState(0xbf27, 0x591d, 0x97d0, 0x1cab, 0xb41e, 0xd270, 0x0, 0x0);
        gbc.writeMem(0x591d, { 0x82, 0x5d });
        gbc.writeMem(0xbf27, { 0xd8 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x591f, gbc.sp());
        EXPECT(0x5d82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbf27));
        // D8 01CF
        gbc.setState(0x421, 0x26cc, 0xa000, 0x9be6, 0x2aa, 0xe720, 0x0, 0x1);
        gbc.writeMem(0x421, { 0xd8 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x26cc, gbc.sp());
        EXPECT(0x422, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01D0
        gbc.setState(0x39cc, 0xb3c4, 0xaa30, 0xb2ec, 0x2296, 0x4e3a, 0x1, 0x0);
        gbc.writeMem(0x39cc, { 0xd8 });
        gbc.writeMem(0xb3c4, { 0x36, 0xcd });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xb3c6, gbc.sp());
        EXPECT(0xcd36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xb3c4));
        EXPECT(0xcd, gbc.readMem(0xb3c5));
        // D8 01D1
        gbc.setState(0x101e, 0x832b, 0x9330, 0xab9b, 0xf67, 0x66bb, 0x1, 0x0);
        gbc.writeMem(0x101e, { 0xd8 });
        gbc.writeMem(0x832b, { 0x5f, 0x7a });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x832d, gbc.sp());
        EXPECT(0x7a5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5f, gbc.readMem(0x832b));
        EXPECT(0x7a, gbc.readMem(0x832c));
        // D8 01D2
        gbc.setState(0x180d, 0xd5d7, 0x59b0, 0x8e89, 0x5e42, 0x9749, 0x1, 0x0);
        gbc.writeMem(0x180d, { 0xd8 });
        gbc.writeMem(0xd5d7, { 0x43, 0x3a });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xd5d9, gbc.sp());
        EXPECT(0x3a43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xd5d7));
        EXPECT(0x3a, gbc.readMem(0xd5d8));
        // D8 01D3
        gbc.setState(0x4f5, 0x76be, 0x6410, 0x6548, 0x61e2, 0x643, 0x1, 0x0);
        gbc.writeMem(0x4f5, { 0xd8 });
        gbc.writeMem(0x76be, { 0xd4, 0xf3 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x76c0, gbc.sp());
        EXPECT(0xf3d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01D5
        gbc.setState(0xdb19, 0xc9b9, 0xce0, 0xbb6a, 0xd9f2, 0xf508, 0x0, 0x1);
        gbc.writeMem(0xdb19, { 0xd8 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc9b9, gbc.sp());
        EXPECT(0xdb1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdb19));
        // D8 01D6
        gbc.setState(0xa3e2, 0x2954, 0x24b0, 0xe5d5, 0x3fc8, 0x8b29, 0x0, 0x1);
        gbc.writeMem(0x2954, { 0xad, 0x6d });
        gbc.writeMem(0xa3e2, { 0xd8 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x2956, gbc.sp());
        EXPECT(0x6dad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa3e2));
        // D8 01D7
        gbc.setState(0xa638, 0x7b8e, 0xa740, 0x3356, 0x6410, 0x89b3, 0x1, 0x0);
        gbc.writeMem(0xa638, { 0xd8 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x7b8e, gbc.sp());
        EXPECT(0xa639, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa638));
        // D8 01D8
        gbc.setState(0xe1cc, 0x8ca, 0x2010, 0xc63b, 0x86f1, 0xfcc8, 0x1, 0x1);
        gbc.writeMem(0x8ca, { 0x3d, 0x1 });
        gbc.writeMem(0xe1cc, { 0xd8 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x8cc, gbc.sp());
        EXPECT(0x13d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe1cc));
        // D8 01D9
        gbc.setState(0x4261, 0x5e3c, 0x79b0, 0x2643, 0x3b60, 0x32b8, 0x0, 0x0);
        gbc.writeMem(0x4261, { 0xd8 });
        gbc.writeMem(0x5e3c, { 0x95, 0xb5 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x5e3e, gbc.sp());
        EXPECT(0xb595, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01DA
        gbc.setState(0xa251, 0x2450, 0x6b60, 0xc60e, 0x2bf1, 0xc053, 0x0, 0x1);
        gbc.writeMem(0xa251, { 0xd8 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x2450, gbc.sp());
        EXPECT(0xa252, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa251));
        // D8 01DB
        gbc.setState(0xc61d, 0x1ca0, 0xb330, 0x6417, 0xc34f, 0x96a3, 0x1, 0x0);
        gbc.writeMem(0x1ca0, { 0x75, 0x68 });
        gbc.writeMem(0xc61d, { 0xd8 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x1ca2, gbc.sp());
        EXPECT(0x6875, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc61d));
        // D8 01DC
        gbc.setState(0x9b60, 0x94d1, 0xb330, 0x6c31, 0xa845, 0xf5a5, 0x1, 0x1);
        gbc.writeMem(0x94d1, { 0xc9, 0xd0 });
        gbc.writeMem(0x9b60, { 0xd8 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x94d3, gbc.sp());
        EXPECT(0xd0c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc9, gbc.readMem(0x94d1));
        EXPECT(0xd0, gbc.readMem(0x94d2));
        EXPECT(0xd8, gbc.readMem(0x9b60));
        // D8 01DD
        gbc.setState(0x8ce0, 0x64df, 0x5bc0, 0xea43, 0x2b8c, 0xffd4, 0x1, 0x0);
        gbc.writeMem(0x8ce0, { 0xd8 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x64df, gbc.sp());
        EXPECT(0x8ce1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8ce0));
        // D8 01DE
        gbc.setState(0xafd6, 0x3b5, 0x2c80, 0x329, 0x2376, 0xcb33, 0x1, 0x1);
        gbc.writeMem(0xafd6, { 0xd8 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x3b5, gbc.sp());
        EXPECT(0xafd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xafd6));
        // D8 01DF
        gbc.setState(0x1e2b, 0x56cf, 0xa520, 0x70e4, 0xf0f1, 0xd58d, 0x1, 0x0);
        gbc.writeMem(0x1e2b, { 0xd8 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x56cf, gbc.sp());
        EXPECT(0x1e2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01E0
        gbc.setState(0x2345, 0x3f58, 0xa3f0, 0x35e6, 0xb649, 0xfd4, 0x1, 0x1);
        gbc.writeMem(0x2345, { 0xd8 });
        gbc.writeMem(0x3f58, { 0x1f, 0x58 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x3f5a, gbc.sp());
        EXPECT(0x581f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01E1
        gbc.setState(0x940a, 0xf422, 0xc5c0, 0x42cb, 0x763a, 0x99aa, 0x0, 0x1);
        gbc.writeMem(0x940a, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xf422, gbc.sp());
        EXPECT(0x940b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x940a));
        // D8 01E2
        gbc.setState(0x94b2, 0xa063, 0x1220, 0x6f39, 0x3e7c, 0x5217, 0x0, 0x1);
        gbc.writeMem(0x94b2, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa063, gbc.sp());
        EXPECT(0x94b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x94b2));
        // D8 01E3
        gbc.setState(0xb2f3, 0x6ca9, 0x8e70, 0xe504, 0x19c6, 0x8bbb, 0x1, 0x0);
        gbc.writeMem(0x6ca9, { 0x88, 0x46 });
        gbc.writeMem(0xb2f3, { 0xd8 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x6cab, gbc.sp());
        EXPECT(0x4688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb2f3));
        // D8 01E4
        gbc.setState(0x5904, 0x72d9, 0x9a80, 0xe05d, 0x1655, 0x28d1, 0x1, 0x0);
        gbc.writeMem(0x5904, { 0xd8 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x72d9, gbc.sp());
        EXPECT(0x5905, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01E5
        gbc.setState(0xb2f7, 0xdf5, 0x9a40, 0xe80e, 0x76fd, 0xd2f9, 0x0, 0x1);
        gbc.writeMem(0xb2f7, { 0xd8 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xdf5, gbc.sp());
        EXPECT(0xb2f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb2f7));
        // D8 01E6
        gbc.setState(0xb686, 0xa7d, 0x8d20, 0x6d52, 0x84e6, 0x6e5f, 0x0, 0x1);
        gbc.writeMem(0xb686, { 0xd8 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xa7d, gbc.sp());
        EXPECT(0xb687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb686));
        // D8 01E7
        gbc.setState(0xb753, 0x40d7, 0x7710, 0xc420, 0xe944, 0x654d, 0x1, 0x0);
        gbc.writeMem(0x40d7, { 0x2e, 0x7f });
        gbc.writeMem(0xb753, { 0xd8 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x40d9, gbc.sp());
        EXPECT(0x7f2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb753));
        // D8 01E9
        gbc.setState(0xa2d, 0x3012, 0x1d80, 0xf522, 0xe66f, 0x2760, 0x1, 0x0);
        gbc.writeMem(0xa2d, { 0xd8 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x3012, gbc.sp());
        EXPECT(0xa2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01EA
        gbc.setState(0xef93, 0xfea2, 0xdac0, 0x5cbc, 0xf87, 0x1396, 0x1, 0x0);
        gbc.writeMem(0xef93, { 0xd8 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xfea2, gbc.sp());
        EXPECT(0xef94, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xef93));
        // D8 01EB
        gbc.setState(0x347f, 0xee34, 0x6020, 0x7aaa, 0xc83d, 0xe281, 0x1, 0x1);
        gbc.writeMem(0x347f, { 0xd8 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xee34, gbc.sp());
        EXPECT(0x3480, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01EC
        gbc.setState(0x7b21, 0x16de, 0xa900, 0x6ec7, 0x45c9, 0x2a05, 0x1, 0x1);
        gbc.writeMem(0x7b21, { 0xd8 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x16de, gbc.sp());
        EXPECT(0x7b22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01ED
        gbc.setState(0x3488, 0xccae, 0xf710, 0x13dc, 0xba52, 0xf0c3, 0x1, 0x0);
        gbc.writeMem(0x3488, { 0xd8 });
        gbc.writeMem(0xccae, { 0x8e, 0x26 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xccb0, gbc.sp());
        EXPECT(0x268e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0xccae));
        EXPECT(0x26, gbc.readMem(0xccaf));
        // D8 01EE
        gbc.setState(0x82db, 0x5abf, 0x2a70, 0xaf8b, 0x8f6c, 0xcc49, 0x1, 0x1);
        gbc.writeMem(0x5abf, { 0xc, 0x5b });
        gbc.writeMem(0x82db, { 0xd8 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x5ac1, gbc.sp());
        EXPECT(0x5b0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x82db));
        // D8 01EF
        gbc.setState(0x3e9a, 0xef66, 0x6d00, 0x7695, 0x3c40, 0x2d0c, 0x0, 0x1);
        gbc.writeMem(0x3e9a, { 0xd8 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xef66, gbc.sp());
        EXPECT(0x3e9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01F0
        gbc.setState(0xa15c, 0xb378, 0xcc60, 0xa302, 0x8b9, 0x769e, 0x1, 0x1);
        gbc.writeMem(0xa15c, { 0xd8 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xb378, gbc.sp());
        EXPECT(0xa15d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa15c));
        // D8 01F1
        gbc.setState(0x4a55, 0x784b, 0x6f0, 0x7183, 0x6030, 0x8db0, 0x0, 0x0);
        gbc.writeMem(0x4a55, { 0xd8 });
        gbc.writeMem(0x784b, { 0xe8, 0xdb });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x784d, gbc.sp());
        EXPECT(0xdbe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01F2
        gbc.setState(0x197f, 0xfe53, 0xf810, 0x1a43, 0x18da, 0x4df8, 0x0, 0x0);
        gbc.writeMem(0x197f, { 0xd8 });
        gbc.writeMem(0xfe53, { 0xef, 0x8f });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xfe55, gbc.sp());
        EXPECT(0x8fef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xfe53));
        EXPECT(0x8f, gbc.readMem(0xfe54));
        // D8 01F3
        gbc.setState(0x3201, 0x31ae, 0xa3e0, 0xc892, 0x3a29, 0xbe9b, 0x0, 0x0);
        gbc.writeMem(0x3201, { 0xd8 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x31ae, gbc.sp());
        EXPECT(0x3202, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01F4
        gbc.setState(0x4909, 0x4a08, 0xcba0, 0xf089, 0xe8be, 0x56e8, 0x0, 0x1);
        gbc.writeMem(0x4909, { 0xd8 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x4a08, gbc.sp());
        EXPECT(0x490a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01F5
        gbc.setState(0xcb3b, 0xeae9, 0x3dc0, 0x2489, 0xe54c, 0x15b5, 0x0, 0x0);
        gbc.writeMem(0xcb3b, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xeae9, gbc.sp());
        EXPECT(0xcb3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcb3b));
        // D8 01F6
        gbc.setState(0x910d, 0x43d4, 0xcdc0, 0x19ce, 0xd5a7, 0x4b50, 0x1, 0x0);
        gbc.writeMem(0x910d, { 0xd8 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x43d4, gbc.sp());
        EXPECT(0x910e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x910d));
        // D8 01F7
        gbc.setState(0x3250, 0x13a7, 0x7a80, 0x2a74, 0x5e9d, 0xc666, 0x0, 0x0);
        gbc.writeMem(0x3250, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x13a7, gbc.sp());
        EXPECT(0x3251, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01F8
        gbc.setState(0xacff, 0x9252, 0x75f0, 0x52e8, 0xab0e, 0xbc14, 0x0, 0x1);
        gbc.writeMem(0x9252, { 0xba, 0x8c });
        gbc.writeMem(0xacff, { 0xd8 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x9254, gbc.sp());
        EXPECT(0x8cba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xba, gbc.readMem(0x9252));
        EXPECT(0x8c, gbc.readMem(0x9253));
        EXPECT(0xd8, gbc.readMem(0xacff));
        // D8 01F9
        gbc.setState(0x7fd5, 0xd1d, 0xfab0, 0x41e6, 0xcd0d, 0x42ed, 0x0, 0x1);
        gbc.writeMem(0xd1d, { 0xf2, 0xf8 });
        gbc.writeMem(0x7fd5, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xd1f, gbc.sp());
        EXPECT(0xf8f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 01FA
        gbc.setState(0x5ecb, 0x7798, 0x6ac0, 0x41, 0x3f9e, 0xd427, 0x0, 0x1);
        gbc.writeMem(0x5ecb, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x7798, gbc.sp());
        EXPECT(0x5ecc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01FB
        gbc.setState(0xe34, 0xf105, 0xdeb0, 0xca09, 0x36fb, 0xc9b9, 0x0, 0x0);
        gbc.writeMem(0xe34, { 0xd8 });
        gbc.writeMem(0xf105, { 0x59, 0xfb });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xf107, gbc.sp());
        EXPECT(0xfb59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0xf105));
        EXPECT(0xfb, gbc.readMem(0xf106));
        // D8 01FD
        gbc.setState(0xce82, 0xb472, 0x62e0, 0xdfcd, 0x6b33, 0x1e4d, 0x1, 0x0);
        gbc.writeMem(0xce82, { 0xd8 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xb472, gbc.sp());
        EXPECT(0xce83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xce82));
        // D8 01FE
        gbc.setState(0x349f, 0x74c7, 0xefc0, 0x4b4f, 0x1db6, 0x67fc, 0x0, 0x1);
        gbc.writeMem(0x349f, { 0xd8 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x74c7, gbc.sp());
        EXPECT(0x34a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 01FF
        gbc.setState(0xb7d3, 0x2e6c, 0x2190, 0xe14a, 0x9f5e, 0xb69a, 0x0, 0x0);
        gbc.writeMem(0x2e6c, { 0x2d, 0x22 });
        gbc.writeMem(0xb7d3, { 0xd8 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x2e6e, gbc.sp());
        EXPECT(0x222d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb7d3));
        // D8 0200
        gbc.setState(0x1506, 0x8aba, 0xb8d0, 0x3460, 0x9418, 0x263e, 0x0, 0x0);
        gbc.writeMem(0x1506, { 0xd8 });
        gbc.writeMem(0x8aba, { 0xf8, 0xf9 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x8abc, gbc.sp());
        EXPECT(0xf9f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf8, gbc.readMem(0x8aba));
        EXPECT(0xf9, gbc.readMem(0x8abb));
        // D8 0201
        gbc.setState(0xbbba, 0x4983, 0x9f50, 0x5d2e, 0xa05b, 0x8d7e, 0x0, 0x0);
        gbc.writeMem(0x4983, { 0x50, 0xf9 });
        gbc.writeMem(0xbbba, { 0xd8 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x4985, gbc.sp());
        EXPECT(0xf950, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbbba));
        // D8 0202
        gbc.setState(0xa333, 0x4c8, 0xfad0, 0x4386, 0xf482, 0x57e3, 0x1, 0x0);
        gbc.writeMem(0x4c8, { 0xb1, 0x95 });
        gbc.writeMem(0xa333, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x4ca, gbc.sp());
        EXPECT(0x95b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa333));
        // D8 0203
        gbc.setState(0xbb40, 0xa1a6, 0x5060, 0xc944, 0xb4e, 0xae71, 0x1, 0x1);
        gbc.writeMem(0xbb40, { 0xd8 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa1a6, gbc.sp());
        EXPECT(0xbb41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbb40));
        // D8 0204
        gbc.setState(0xa5b2, 0x6def, 0xfaf0, 0x26ce, 0x607e, 0x6b07, 0x0, 0x0);
        gbc.writeMem(0x6def, { 0x79, 0x53 });
        gbc.writeMem(0xa5b2, { 0xd8 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x6df1, gbc.sp());
        EXPECT(0x5379, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa5b2));
        // D8 0205
        gbc.setState(0xb1ef, 0x6ef5, 0x66d0, 0x9e6f, 0x4c4b, 0x2d89, 0x1, 0x0);
        gbc.writeMem(0x6ef5, { 0xb0, 0xa6 });
        gbc.writeMem(0xb1ef, { 0xd8 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x6ef7, gbc.sp());
        EXPECT(0xa6b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb1ef));
        // D8 0206
        gbc.setState(0xc065, 0xf7dc, 0x1b60, 0x9360, 0x11a2, 0x6643, 0x1, 0x1);
        gbc.writeMem(0xc065, { 0xd8 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xf7dc, gbc.sp());
        EXPECT(0xc066, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc065));
        // D8 0207
        gbc.setState(0x6e9d, 0x2ae4, 0x8a00, 0x8c21, 0xd963, 0x65ac, 0x1, 0x0);
        gbc.writeMem(0x6e9d, { 0xd8 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x2ae4, gbc.sp());
        EXPECT(0x6e9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0208
        gbc.setState(0x8829, 0x2d6a, 0xf3a0, 0x643a, 0xdc27, 0xb4ff, 0x0, 0x1);
        gbc.writeMem(0x8829, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x2d6a, gbc.sp());
        EXPECT(0x882a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8829));
        // D8 0209
        gbc.setState(0x784c, 0xc9a9, 0x8080, 0x627c, 0x273c, 0xc608, 0x0, 0x0);
        gbc.writeMem(0x784c, { 0xd8 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xc9a9, gbc.sp());
        EXPECT(0x784d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 020A
        gbc.setState(0x6ff6, 0xf6e7, 0x5aa0, 0x67de, 0xa76f, 0x3a97, 0x0, 0x1);
        gbc.writeMem(0x6ff6, { 0xd8 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xf6e7, gbc.sp());
        EXPECT(0x6ff7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 020B
        gbc.setState(0x9711, 0xf211, 0x7890, 0xcd31, 0xba53, 0xb1a, 0x0, 0x1);
        gbc.writeMem(0x9711, { 0xd8 });
        gbc.writeMem(0xf211, { 0xd3, 0xb1 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xf213, gbc.sp());
        EXPECT(0xb1d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9711));
        EXPECT(0xd3, gbc.readMem(0xf211));
        EXPECT(0xb1, gbc.readMem(0xf212));
        // D8 020C
        gbc.setState(0xc848, 0xebdb, 0x6670, 0xe25a, 0xaf24, 0x7e3c, 0x1, 0x0);
        gbc.writeMem(0xc848, { 0xd8 });
        gbc.writeMem(0xebdb, { 0x87, 0xdc });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xebdd, gbc.sp());
        EXPECT(0xdc87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc848));
        EXPECT(0x87, gbc.readMem(0xebdb));
        EXPECT(0xdc, gbc.readMem(0xebdc));
        // D8 020D
        gbc.setState(0x2342, 0x8452, 0x6b60, 0xf617, 0x4f4e, 0xe7d8, 0x1, 0x0);
        gbc.writeMem(0x2342, { 0xd8 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x8452, gbc.sp());
        EXPECT(0x2343, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 020E
        gbc.setState(0x7689, 0x54e9, 0x1110, 0x94c9, 0xf580, 0x9123, 0x1, 0x0);
        gbc.writeMem(0x54e9, { 0x7c, 0xf4 });
        gbc.writeMem(0x7689, { 0xd8 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x54eb, gbc.sp());
        EXPECT(0xf47c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 020F
        gbc.setState(0x1284, 0x8f9a, 0x4d80, 0xfc94, 0xcb28, 0x27ea, 0x0, 0x1);
        gbc.writeMem(0x1284, { 0xd8 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x8f9a, gbc.sp());
        EXPECT(0x1285, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0210
        gbc.setState(0xe9a8, 0x5e39, 0x87b0, 0x9f2b, 0x808c, 0xd4e7, 0x0, 0x1);
        gbc.writeMem(0x5e39, { 0x8f, 0x20 });
        gbc.writeMem(0xe9a8, { 0xd8 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x5e3b, gbc.sp());
        EXPECT(0x208f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe9a8));
        // D8 0211
        gbc.setState(0xa6f2, 0x5003, 0xd220, 0x4bc9, 0xbc38, 0x88a0, 0x0, 0x1);
        gbc.writeMem(0xa6f2, { 0xd8 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x5003, gbc.sp());
        EXPECT(0xa6f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa6f2));
        // D8 0212
        gbc.setState(0xa7ca, 0x98ff, 0x5e40, 0x7ff8, 0x3f2c, 0xa4e0, 0x1, 0x1);
        gbc.writeMem(0xa7ca, { 0xd8 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x98ff, gbc.sp());
        EXPECT(0xa7cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa7ca));
        // D8 0213
        gbc.setState(0xcb6a, 0x4d3b, 0x7ad0, 0xda17, 0x1357, 0xb8f9, 0x1, 0x1);
        gbc.writeMem(0x4d3b, { 0xfa, 0xdf });
        gbc.writeMem(0xcb6a, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x4d3d, gbc.sp());
        EXPECT(0xdffa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcb6a));
        // D8 0214
        gbc.setState(0xd519, 0xd20, 0x98a0, 0x5700, 0x162c, 0xa829, 0x0, 0x1);
        gbc.writeMem(0xd519, { 0xd8 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xd20, gbc.sp());
        EXPECT(0xd51a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd519));
        // D8 0215
        gbc.setState(0x1fa0, 0x5051, 0xa9b0, 0x2be1, 0x5b68, 0x5e3e, 0x1, 0x1);
        gbc.writeMem(0x1fa0, { 0xd8 });
        gbc.writeMem(0x5051, { 0xe0, 0x14 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x5053, gbc.sp());
        EXPECT(0x14e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0216
        gbc.setState(0x35e2, 0x91fa, 0x33c0, 0xe04f, 0x789d, 0x5a43, 0x0, 0x0);
        gbc.writeMem(0x35e2, { 0xd8 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x91fa, gbc.sp());
        EXPECT(0x35e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0217
        gbc.setState(0xa9d, 0x88d6, 0xe8c0, 0x5059, 0x9819, 0xe579, 0x0, 0x1);
        gbc.writeMem(0xa9d, { 0xd8 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x88d6, gbc.sp());
        EXPECT(0xa9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0218
        gbc.setState(0xea7f, 0x3019, 0x21b0, 0xb337, 0xc2ae, 0x620a, 0x0, 0x0);
        gbc.writeMem(0x3019, { 0x59, 0x53 });
        gbc.writeMem(0xea7f, { 0xd8 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x301b, gbc.sp());
        EXPECT(0x5359, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xea7f));
        // D8 0219
        gbc.setState(0x864, 0xb27d, 0x5c20, 0xbe14, 0x6c05, 0x306a, 0x1, 0x1);
        gbc.writeMem(0x864, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xb27d, gbc.sp());
        EXPECT(0x865, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 021A
        gbc.setState(0xc0c0, 0xc1b, 0xf460, 0x94e4, 0xf3b5, 0x789c, 0x0, 0x1);
        gbc.writeMem(0xc0c0, { 0xd8 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xc1b, gbc.sp());
        EXPECT(0xc0c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc0c0));
        // D8 021B
        gbc.setState(0xbe90, 0xfb9, 0x3d40, 0x7175, 0xb76b, 0x6ba7, 0x1, 0x1);
        gbc.writeMem(0xbe90, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xfb9, gbc.sp());
        EXPECT(0xbe91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe90));
        // D8 021C
        gbc.setState(0x87e0, 0x24a2, 0x5440, 0xefd9, 0x3747, 0x3533, 0x1, 0x1);
        gbc.writeMem(0x87e0, { 0xd8 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x24a2, gbc.sp());
        EXPECT(0x87e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x87e0));
        // D8 021D
        gbc.setState(0xcfec, 0x2c0f, 0x8600, 0xb467, 0x1197, 0x5145, 0x0, 0x0);
        gbc.writeMem(0xcfec, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x2c0f, gbc.sp());
        EXPECT(0xcfed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcfec));
        // D8 021E
        gbc.setState(0x4ea5, 0xe5b0, 0xbc50, 0x4f93, 0x1323, 0x1ccc, 0x0, 0x0);
        gbc.writeMem(0x4ea5, { 0xd8 });
        gbc.writeMem(0xe5b0, { 0x7, 0x99 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xe5b2, gbc.sp());
        EXPECT(0x9907, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xe5b0));
        EXPECT(0x99, gbc.readMem(0xe5b1));
        // D8 021F
        gbc.setState(0x5150, 0x5f9f, 0x6d60, 0x510b, 0x2fdc, 0xb5d5, 0x0, 0x0);
        gbc.writeMem(0x5150, { 0xd8 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x5f9f, gbc.sp());
        EXPECT(0x5151, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0221
        gbc.setState(0x54cc, 0x55e9, 0x5790, 0xe59, 0x1fc7, 0x8da, 0x1, 0x1);
        gbc.writeMem(0x54cc, { 0xd8 });
        gbc.writeMem(0x55e9, { 0x9c, 0xfa });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x55eb, gbc.sp());
        EXPECT(0xfa9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0222
        gbc.setState(0x4b82, 0xe191, 0xe800, 0x81f2, 0x73c2, 0x8025, 0x1, 0x1);
        gbc.writeMem(0x4b82, { 0xd8 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe191, gbc.sp());
        EXPECT(0x4b83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0223
        gbc.setState(0xe602, 0x6254, 0x7300, 0xd2cd, 0x3c1f, 0x2ba6, 0x0, 0x0);
        gbc.writeMem(0xe602, { 0xd8 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x6254, gbc.sp());
        EXPECT(0xe603, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe602));
        // D8 0224
        gbc.setState(0xd615, 0x706, 0xaa70, 0x5bce, 0x1762, 0xa23d, 0x0, 0x1);
        gbc.writeMem(0x706, { 0xf, 0x5f });
        gbc.writeMem(0xd615, { 0xd8 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x708, gbc.sp());
        EXPECT(0x5f0f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd615));
        // D8 0225
        gbc.setState(0x7c6f, 0xcefe, 0x8890, 0x5941, 0xa941, 0xe9cf, 0x1, 0x1);
        gbc.writeMem(0x7c6f, { 0xd8 });
        gbc.writeMem(0xcefe, { 0x4f, 0xe7 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xcf00, gbc.sp());
        EXPECT(0xe74f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4f, gbc.readMem(0xcefe));
        EXPECT(0xe7, gbc.readMem(0xceff));
        // D8 0226
        gbc.setState(0x5ca3, 0x60b0, 0x77b0, 0x7669, 0x79e8, 0xadad, 0x1, 0x1);
        gbc.writeMem(0x5ca3, { 0xd8 });
        gbc.writeMem(0x60b0, { 0xb0, 0xb2 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x60b2, gbc.sp());
        EXPECT(0xb2b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0227
        gbc.setState(0xc699, 0x79e2, 0xe9f0, 0x3481, 0x830, 0xee5f, 0x1, 0x0);
        gbc.writeMem(0x79e2, { 0x9b, 0x7c });
        gbc.writeMem(0xc699, { 0xd8 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x79e4, gbc.sp());
        EXPECT(0x7c9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc699));
        // D8 0228
        gbc.setState(0x1722, 0x9fb3, 0x76e0, 0x94ef, 0x9205, 0xa39a, 0x1, 0x1);
        gbc.writeMem(0x1722, { 0xd8 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x9fb3, gbc.sp());
        EXPECT(0x1723, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0229
        gbc.setState(0x43aa, 0xc841, 0x1ee0, 0xe457, 0x9d02, 0x2618, 0x1, 0x0);
        gbc.writeMem(0x43aa, { 0xd8 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xc841, gbc.sp());
        EXPECT(0x43ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 022A
        gbc.setState(0x6cc3, 0x9953, 0xb4e0, 0xdc55, 0xae02, 0xac33, 0x1, 0x0);
        gbc.writeMem(0x6cc3, { 0xd8 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x9953, gbc.sp());
        EXPECT(0x6cc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 022B
        gbc.setState(0x39bf, 0x278f, 0x6720, 0x893, 0x2435, 0xedbf, 0x0, 0x1);
        gbc.writeMem(0x39bf, { 0xd8 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x278f, gbc.sp());
        EXPECT(0x39c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 022C
        gbc.setState(0x8813, 0x16d7, 0xc0, 0x83f4, 0xf328, 0x8ff8, 0x1, 0x1);
        gbc.writeMem(0x8813, { 0xd8 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x16d7, gbc.sp());
        EXPECT(0x8814, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8813));
        // D8 022D
        gbc.setState(0x4533, 0x4b92, 0x9cb0, 0x4a4f, 0x8cdf, 0x6231, 0x0, 0x0);
        gbc.writeMem(0x4533, { 0xd8 });
        gbc.writeMem(0x4b92, { 0x19, 0x34 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x4b94, gbc.sp());
        EXPECT(0x3419, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 022E
        gbc.setState(0xdb33, 0xd9d8, 0x6390, 0x36bc, 0xefbd, 0xeed9, 0x1, 0x1);
        gbc.writeMem(0xd9d8, { 0xd7, 0x97 });
        gbc.writeMem(0xdb33, { 0xd8 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xd9da, gbc.sp());
        EXPECT(0x97d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd7, gbc.readMem(0xd9d8));
        EXPECT(0x97, gbc.readMem(0xd9d9));
        EXPECT(0xd8, gbc.readMem(0xdb33));
        // D8 022F
        gbc.setState(0x5e17, 0x4608, 0xc7e0, 0xa086, 0xa03e, 0x9f1f, 0x1, 0x0);
        gbc.writeMem(0x5e17, { 0xd8 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x4608, gbc.sp());
        EXPECT(0x5e18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0230
        gbc.setState(0x916c, 0xafed, 0xf0d0, 0xb36e, 0xad14, 0xbb95, 0x1, 0x0);
        gbc.writeMem(0x916c, { 0xd8 });
        gbc.writeMem(0xafed, { 0xa7, 0x81 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xafef, gbc.sp());
        EXPECT(0x81a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x916c));
        EXPECT(0xa7, gbc.readMem(0xafed));
        EXPECT(0x81, gbc.readMem(0xafee));
        // D8 0231
        gbc.setState(0x64d2, 0x5a58, 0x2ca0, 0xe111, 0xd1ea, 0xceb, 0x1, 0x0);
        gbc.writeMem(0x64d2, { 0xd8 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x5a58, gbc.sp());
        EXPECT(0x64d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0232
        gbc.setState(0xb364, 0x395c, 0x3c90, 0xc4d0, 0x155d, 0xc734, 0x1, 0x0);
        gbc.writeMem(0x395c, { 0x9c, 0xc8 });
        gbc.writeMem(0xb364, { 0xd8 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x395e, gbc.sp());
        EXPECT(0xc89c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb364));
        // D8 0233
        gbc.setState(0x87ad, 0x2fc1, 0x7e90, 0xd0ad, 0x1cef, 0x4a0c, 0x0, 0x1);
        gbc.writeMem(0x2fc1, { 0x65, 0xb1 });
        gbc.writeMem(0x87ad, { 0xd8 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x2fc3, gbc.sp());
        EXPECT(0xb165, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x87ad));
        // D8 0234
        gbc.setState(0xe735, 0xfa3b, 0xe960, 0xd36f, 0xa5bd, 0xd6f6, 0x1, 0x1);
        gbc.writeMem(0xe735, { 0xd8 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xfa3b, gbc.sp());
        EXPECT(0xe736, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe735));
        // D8 0235
        gbc.setState(0xbc74, 0x3abc, 0x11e0, 0x2e10, 0xc10d, 0xb458, 0x0, 0x1);
        gbc.writeMem(0xbc74, { 0xd8 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x3abc, gbc.sp());
        EXPECT(0xbc75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbc74));
        // D8 0236
        gbc.setState(0x5335, 0xd29e, 0x5680, 0x18ac, 0x49d4, 0x13bc, 0x1, 0x0);
        gbc.writeMem(0x5335, { 0xd8 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xd29e, gbc.sp());
        EXPECT(0x5336, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0237
        gbc.setState(0x3689, 0x6db1, 0xb610, 0xc71c, 0xf589, 0x999f, 0x0, 0x0);
        gbc.writeMem(0x3689, { 0xd8 });
        gbc.writeMem(0x6db1, { 0x43, 0x2 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x6db3, gbc.sp());
        EXPECT(0x243, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0238
        gbc.setState(0x8adf, 0xd162, 0x4a10, 0x5530, 0xd3ba, 0x3ee0, 0x1, 0x1);
        gbc.writeMem(0x8adf, { 0xd8 });
        gbc.writeMem(0xd162, { 0xdd, 0x9 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xd164, gbc.sp());
        EXPECT(0x9dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8adf));
        EXPECT(0xdd, gbc.readMem(0xd162));
        EXPECT(0x9, gbc.readMem(0xd163));
        // D8 0239
        gbc.setState(0xd77e, 0x67b3, 0x3800, 0x1ff0, 0xdaf0, 0x1f72, 0x0, 0x0);
        gbc.writeMem(0xd77e, { 0xd8 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x67b3, gbc.sp());
        EXPECT(0xd77f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd77e));
        // D8 023A
        gbc.setState(0xefe6, 0x17e8, 0xba80, 0x3a2, 0x101b, 0xa4e3, 0x1, 0x1);
        gbc.writeMem(0xefe6, { 0xd8 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x17e8, gbc.sp());
        EXPECT(0xefe7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xefe6));
        // D8 023B
        gbc.setState(0x2102, 0x5c95, 0x1900, 0x9e1d, 0x942e, 0x13d0, 0x1, 0x0);
        gbc.writeMem(0x2102, { 0xd8 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x5c95, gbc.sp());
        EXPECT(0x2103, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 023C
        gbc.setState(0x201f, 0xc80b, 0x72a0, 0xcc79, 0x1367, 0x16eb, 0x0, 0x0);
        gbc.writeMem(0x201f, { 0xd8 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xc80b, gbc.sp());
        EXPECT(0x2020, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 023D
        gbc.setState(0xbda8, 0xe66, 0x2260, 0x81de, 0xbb5c, 0xa184, 0x0, 0x1);
        gbc.writeMem(0xbda8, { 0xd8 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xe66, gbc.sp());
        EXPECT(0xbda9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbda8));
        // D8 023F
        gbc.setState(0x93e7, 0xb144, 0x8a50, 0xbd9, 0x5afc, 0xc39c, 0x0, 0x1);
        gbc.writeMem(0x93e7, { 0xd8 });
        gbc.writeMem(0xb144, { 0x90, 0xb2 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb146, gbc.sp());
        EXPECT(0xb290, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x93e7));
        EXPECT(0x90, gbc.readMem(0xb144));
        EXPECT(0xb2, gbc.readMem(0xb145));
        // D8 0240
        gbc.setState(0x7950, 0x1113, 0x29a0, 0x71c9, 0x4043, 0x846c, 0x0, 0x1);
        gbc.writeMem(0x7950, { 0xd8 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x1113, gbc.sp());
        EXPECT(0x7951, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0241
        gbc.setState(0x4ea4, 0x4e77, 0xe590, 0xbb02, 0x6a65, 0xf021, 0x0, 0x1);
        gbc.writeMem(0x4e77, { 0xa9, 0x48 });
        gbc.writeMem(0x4ea4, { 0xd8 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0x4e79, gbc.sp());
        EXPECT(0x48a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0242
        gbc.setState(0x4cd0, 0x9c24, 0x1ac0, 0x557f, 0x50cc, 0x35a5, 0x0, 0x1);
        gbc.writeMem(0x4cd0, { 0xd8 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x9c24, gbc.sp());
        EXPECT(0x4cd1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0243
        gbc.setState(0x39d0, 0x52df, 0x77a0, 0xb98b, 0x9cf6, 0x90e6, 0x0, 0x1);
        gbc.writeMem(0x39d0, { 0xd8 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x52df, gbc.sp());
        EXPECT(0x39d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0244
        gbc.setState(0xb1d6, 0xe9ef, 0xe8b0, 0x185c, 0xc1e2, 0x1693, 0x1, 0x1);
        gbc.writeMem(0xb1d6, { 0xd8 });
        gbc.writeMem(0xe9ef, { 0xb2, 0x89 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xe9f1, gbc.sp());
        EXPECT(0x89b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb1d6));
        EXPECT(0xb2, gbc.readMem(0xe9ef));
        EXPECT(0x89, gbc.readMem(0xe9f0));
        // D8 0245
        gbc.setState(0x9519, 0xd8a0, 0x5f00, 0x177f, 0x26b6, 0xcfd, 0x0, 0x1);
        gbc.writeMem(0x9519, { 0xd8 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xd8a0, gbc.sp());
        EXPECT(0x951a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9519));
        // D8 0246
        gbc.setState(0x34b0, 0x2382, 0xf010, 0x669b, 0x56bc, 0x2035, 0x0, 0x1);
        gbc.writeMem(0x2382, { 0x43, 0x5d });
        gbc.writeMem(0x34b0, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x2384, gbc.sp());
        EXPECT(0x5d43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0247
        gbc.setState(0x31ba, 0x6d4c, 0x64e0, 0x5f58, 0x49fb, 0x6b61, 0x0, 0x0);
        gbc.writeMem(0x31ba, { 0xd8 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6d4c, gbc.sp());
        EXPECT(0x31bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0248
        gbc.setState(0x8253, 0xc4d5, 0x17a0, 0x1a44, 0x41a3, 0x84ad, 0x1, 0x1);
        gbc.writeMem(0x8253, { 0xd8 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc4d5, gbc.sp());
        EXPECT(0x8254, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8253));
        // D8 0249
        gbc.setState(0xef57, 0x8e00, 0xbc90, 0x4870, 0x3cd5, 0x3960, 0x1, 0x1);
        gbc.writeMem(0x8e00, { 0xcd, 0xc1 });
        gbc.writeMem(0xef57, { 0xd8 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x8e02, gbc.sp());
        EXPECT(0xc1cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcd, gbc.readMem(0x8e00));
        EXPECT(0xc1, gbc.readMem(0x8e01));
        EXPECT(0xd8, gbc.readMem(0xef57));
        // D8 024A
        gbc.setState(0xd30, 0xfe2f, 0x9da0, 0x5a42, 0xc4e7, 0xebe3, 0x1, 0x1);
        gbc.writeMem(0xd30, { 0xd8 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xfe2f, gbc.sp());
        EXPECT(0xd31, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 024B
        gbc.setState(0x5193, 0x9cb1, 0x3350, 0x646e, 0x8861, 0xb998, 0x0, 0x1);
        gbc.writeMem(0x5193, { 0xd8 });
        gbc.writeMem(0x9cb1, { 0x31, 0x5e });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x9cb3, gbc.sp());
        EXPECT(0x5e31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0x9cb1));
        EXPECT(0x5e, gbc.readMem(0x9cb2));
        // D8 024C
        gbc.setState(0x9125, 0xc262, 0x11e0, 0x2edb, 0x9261, 0xc200, 0x0, 0x0);
        gbc.writeMem(0x9125, { 0xd8 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xc262, gbc.sp());
        EXPECT(0x9126, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9125));
        // D8 024F
        gbc.setState(0x2260, 0x1385, 0x8670, 0x4d7d, 0xbb66, 0x892, 0x0, 0x1);
        gbc.writeMem(0x1385, { 0x98, 0x70 });
        gbc.writeMem(0x2260, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x1387, gbc.sp());
        EXPECT(0x7098, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0250
        gbc.setState(0x16d4, 0x316a, 0xe4e0, 0x403a, 0x565e, 0x5db1, 0x1, 0x0);
        gbc.writeMem(0x16d4, { 0xd8 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x316a, gbc.sp());
        EXPECT(0x16d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0251
        gbc.setState(0x17ec, 0xa746, 0x77c0, 0x8c92, 0x587a, 0xa1fd, 0x1, 0x1);
        gbc.writeMem(0x17ec, { 0xd8 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xa746, gbc.sp());
        EXPECT(0x17ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0252
        gbc.setState(0x25e2, 0xcf42, 0x620, 0xa363, 0x403a, 0x15e9, 0x1, 0x1);
        gbc.writeMem(0x25e2, { 0xd8 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xcf42, gbc.sp());
        EXPECT(0x25e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0253
        gbc.setState(0x12be, 0x12d1, 0xf8f0, 0x534d, 0xf155, 0x57d3, 0x1, 0x1);
        gbc.writeMem(0x12be, { 0xd8 });
        gbc.writeMem(0x12d1, { 0xd7, 0x2e });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x12d3, gbc.sp());
        EXPECT(0x2ed7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0254
        gbc.setState(0xc528, 0xfd48, 0x82a0, 0xc55a, 0x8ad0, 0xebe5, 0x0, 0x1);
        gbc.writeMem(0xc528, { 0xd8 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xfd48, gbc.sp());
        EXPECT(0xc529, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc528));
        // D8 0255
        gbc.setState(0xcb8a, 0x36c5, 0x28a0, 0xb9cc, 0x2bf9, 0x83b7, 0x0, 0x0);
        gbc.writeMem(0xcb8a, { 0xd8 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x36c5, gbc.sp());
        EXPECT(0xcb8b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcb8a));
        // D8 0256
        gbc.setState(0xd200, 0xe52e, 0x6250, 0x31fb, 0xb62e, 0x58b0, 0x1, 0x0);
        gbc.writeMem(0xd200, { 0xd8 });
        gbc.writeMem(0xe52e, { 0x47, 0x22 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xe530, gbc.sp());
        EXPECT(0x2247, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd200));
        EXPECT(0x47, gbc.readMem(0xe52e));
        EXPECT(0x22, gbc.readMem(0xe52f));
        // D8 0257
        gbc.setState(0x30c3, 0x94f1, 0x1920, 0x7f3c, 0x92d0, 0xffcd, 0x0, 0x0);
        gbc.writeMem(0x30c3, { 0xd8 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x94f1, gbc.sp());
        EXPECT(0x30c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0258
        gbc.setState(0x6d47, 0xa441, 0x71f0, 0xfebd, 0xc8e3, 0x624d, 0x1, 0x0);
        gbc.writeMem(0x6d47, { 0xd8 });
        gbc.writeMem(0xa441, { 0xc8, 0x68 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa443, gbc.sp());
        EXPECT(0x68c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc8, gbc.readMem(0xa441));
        EXPECT(0x68, gbc.readMem(0xa442));
        // D8 0259
        gbc.setState(0x83f5, 0x82c8, 0x9a60, 0xdf27, 0x8c29, 0xe496, 0x1, 0x0);
        gbc.writeMem(0x83f5, { 0xd8 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x82c8, gbc.sp());
        EXPECT(0x83f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x83f5));
        // D8 025A
        gbc.setState(0xaa50, 0xf9a0, 0xd60, 0x3cf6, 0x3a91, 0xdb5b, 0x1, 0x1);
        gbc.writeMem(0xaa50, { 0xd8 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xf9a0, gbc.sp());
        EXPECT(0xaa51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xaa50));
        // D8 025B
        gbc.setState(0x51a7, 0xcf0b, 0x3e10, 0x809d, 0x712f, 0x6aa5, 0x0, 0x1);
        gbc.writeMem(0x51a7, { 0xd8 });
        gbc.writeMem(0xcf0b, { 0x9c, 0x2b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xcf0d, gbc.sp());
        EXPECT(0x2b9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9c, gbc.readMem(0xcf0b));
        EXPECT(0x2b, gbc.readMem(0xcf0c));
        // D8 025C
        gbc.setState(0x7eb7, 0x52c9, 0xad10, 0x6445, 0x81c1, 0xba13, 0x0, 0x0);
        gbc.writeMem(0x52c9, { 0x8, 0x8b });
        gbc.writeMem(0x7eb7, { 0xd8 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x52cb, gbc.sp());
        EXPECT(0x8b08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 025D
        gbc.setState(0x42c7, 0x3d31, 0x2b60, 0xb024, 0x17c2, 0x3a84, 0x1, 0x1);
        gbc.writeMem(0x42c7, { 0xd8 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x3d31, gbc.sp());
        EXPECT(0x42c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 025E
        gbc.setState(0xdddf, 0x461e, 0x2f80, 0x8c4f, 0xf87a, 0x3435, 0x0, 0x1);
        gbc.writeMem(0xdddf, { 0xd8 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x461e, gbc.sp());
        EXPECT(0xdde0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdddf));
        // D8 025F
        gbc.setState(0xdc56, 0x4478, 0x5770, 0xaae0, 0xf613, 0x4143, 0x0, 0x0);
        gbc.writeMem(0x4478, { 0x64, 0xf6 });
        gbc.writeMem(0xdc56, { 0xd8 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x447a, gbc.sp());
        EXPECT(0xf664, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdc56));
        // D8 0260
        gbc.setState(0xc636, 0x4ac7, 0x9780, 0x4c04, 0xa038, 0x7b1e, 0x1, 0x1);
        gbc.writeMem(0xc636, { 0xd8 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x4ac7, gbc.sp());
        EXPECT(0xc637, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc636));
        // D8 0261
        gbc.setState(0x64f4, 0x657, 0x1720, 0xfb07, 0x4e3d, 0x31f2, 0x1, 0x1);
        gbc.writeMem(0x64f4, { 0xd8 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x657, gbc.sp());
        EXPECT(0x64f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0262
        gbc.setState(0x611c, 0xc717, 0xbf70, 0x4734, 0x9db1, 0xf70f, 0x1, 0x0);
        gbc.writeMem(0x611c, { 0xd8 });
        gbc.writeMem(0xc717, { 0xe0, 0xdd });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xc719, gbc.sp());
        EXPECT(0xdde0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe0, gbc.readMem(0xc717));
        EXPECT(0xdd, gbc.readMem(0xc718));
        // D8 0263
        gbc.setState(0x99e7, 0x1fc1, 0x9a0, 0x7db1, 0x72a7, 0x3f96, 0x0, 0x1);
        gbc.writeMem(0x99e7, { 0xd8 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x1fc1, gbc.sp());
        EXPECT(0x99e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x99e7));
        // D8 0264
        gbc.setState(0x73fb, 0x4bf3, 0x5ae0, 0x46ea, 0x6c49, 0x7c2f, 0x0, 0x1);
        gbc.writeMem(0x73fb, { 0xd8 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x4bf3, gbc.sp());
        EXPECT(0x73fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0265
        gbc.setState(0x39e7, 0xed36, 0x6380, 0xfdcf, 0x13d, 0x9b9, 0x0, 0x0);
        gbc.writeMem(0x39e7, { 0xd8 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xed36, gbc.sp());
        EXPECT(0x39e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0266
        gbc.setState(0x933a, 0xea27, 0x23a0, 0x708e, 0x85ca, 0x7433, 0x1, 0x1);
        gbc.writeMem(0x933a, { 0xd8 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xea27, gbc.sp());
        EXPECT(0x933b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x933a));
        // D8 0267
        gbc.setState(0x3e9b, 0x3f31, 0x4400, 0x2579, 0xe88, 0x197, 0x0, 0x1);
        gbc.writeMem(0x3e9b, { 0xd8 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x3f31, gbc.sp());
        EXPECT(0x3e9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0268
        gbc.setState(0xae3d, 0x6c2e, 0xa4b0, 0xe844, 0x6bc1, 0x3095, 0x1, 0x1);
        gbc.writeMem(0x6c2e, { 0x95, 0xf3 });
        gbc.writeMem(0xae3d, { 0xd8 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x6c30, gbc.sp());
        EXPECT(0xf395, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xae3d));
        // D8 0269
        gbc.setState(0x162c, 0xd9fa, 0x8b70, 0xc876, 0x76db, 0x585, 0x0, 0x1);
        gbc.writeMem(0x162c, { 0xd8 });
        gbc.writeMem(0xd9fa, { 0x44, 0xf2 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xd9fc, gbc.sp());
        EXPECT(0xf244, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xd9fa));
        EXPECT(0xf2, gbc.readMem(0xd9fb));
        // D8 026B
        gbc.setState(0x4f5b, 0xd26b, 0x2bb0, 0x6a9b, 0xdeba, 0xb5a8, 0x1, 0x0);
        gbc.writeMem(0x4f5b, { 0xd8 });
        gbc.writeMem(0xd26b, { 0xca, 0xd0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xd26d, gbc.sp());
        EXPECT(0xd0ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xca, gbc.readMem(0xd26b));
        EXPECT(0xd0, gbc.readMem(0xd26c));
        // D8 026C
        gbc.setState(0x3f33, 0x3190, 0x8600, 0xf6f1, 0xfc16, 0xb51e, 0x0, 0x1);
        gbc.writeMem(0x3f33, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x3190, gbc.sp());
        EXPECT(0x3f34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 026D
        gbc.setState(0xc564, 0x8a31, 0x5310, 0x6dfe, 0x58c9, 0xf48, 0x1, 0x0);
        gbc.writeMem(0x8a31, { 0xe6, 0x24 });
        gbc.writeMem(0xc564, { 0xd8 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x8a33, gbc.sp());
        EXPECT(0x24e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0x8a31));
        EXPECT(0x24, gbc.readMem(0x8a32));
        EXPECT(0xd8, gbc.readMem(0xc564));
        // D8 026E
        gbc.setState(0x414d, 0x602e, 0x8870, 0x8249, 0x2534, 0xe37d, 0x0, 0x0);
        gbc.writeMem(0x414d, { 0xd8 });
        gbc.writeMem(0x602e, { 0xba, 0xc0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x6030, gbc.sp());
        EXPECT(0xc0ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 026F
        gbc.setState(0xa842, 0x5998, 0xae60, 0x15ec, 0xa1d4, 0x2a53, 0x1, 0x0);
        gbc.writeMem(0xa842, { 0xd8 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x5998, gbc.sp());
        EXPECT(0xa843, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa842));
        // D8 0270
        gbc.setState(0x4c6c, 0xb03c, 0xf040, 0x7f9, 0xd948, 0xfb45, 0x0, 0x1);
        gbc.writeMem(0x4c6c, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xb03c, gbc.sp());
        EXPECT(0x4c6d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0271
        gbc.setState(0x8666, 0xc33c, 0x79f0, 0xd481, 0x9e0c, 0x231a, 0x0, 0x0);
        gbc.writeMem(0x8666, { 0xd8 });
        gbc.writeMem(0xc33c, { 0xf2, 0x7b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xc33e, gbc.sp());
        EXPECT(0x7bf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8666));
        EXPECT(0xf2, gbc.readMem(0xc33c));
        EXPECT(0x7b, gbc.readMem(0xc33d));
        // D8 0272
        gbc.setState(0xb7f4, 0xb13a, 0xe4f0, 0x3c58, 0xf99a, 0xafd0, 0x0, 0x0);
        gbc.writeMem(0xb13a, { 0x96, 0xa2 });
        gbc.writeMem(0xb7f4, { 0xd8 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xb13c, gbc.sp());
        EXPECT(0xa296, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x96, gbc.readMem(0xb13a));
        EXPECT(0xa2, gbc.readMem(0xb13b));
        EXPECT(0xd8, gbc.readMem(0xb7f4));
        // D8 0273
        gbc.setState(0x1487, 0xc672, 0x56b0, 0xbf85, 0x9ed1, 0x456d, 0x0, 0x0);
        gbc.writeMem(0x1487, { 0xd8 });
        gbc.writeMem(0xc672, { 0x81, 0x11 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xc674, gbc.sp());
        EXPECT(0x1181, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x81, gbc.readMem(0xc672));
        EXPECT(0x11, gbc.readMem(0xc673));
        // D8 0274
        gbc.setState(0x61ff, 0xb2d5, 0x2450, 0x9283, 0x7ec2, 0xcea8, 0x0, 0x1);
        gbc.writeMem(0x61ff, { 0xd8 });
        gbc.writeMem(0xb2d5, { 0xe2, 0xc0 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xb2d7, gbc.sp());
        EXPECT(0xc0e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0xb2d5));
        EXPECT(0xc0, gbc.readMem(0xb2d6));
        // D8 0275
        gbc.setState(0xd875, 0x791a, 0x6d90, 0x3d93, 0x3a5f, 0x87e, 0x0, 0x0);
        gbc.writeMem(0x791a, { 0xfd, 0x3e });
        gbc.writeMem(0xd875, { 0xd8 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x791c, gbc.sp());
        EXPECT(0x3efd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd875));
        // D8 0276
        gbc.setState(0x265, 0x18d5, 0x34c0, 0x3a09, 0x9d3a, 0x767f, 0x0, 0x0);
        gbc.writeMem(0x265, { 0xd8 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x18d5, gbc.sp());
        EXPECT(0x266, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0277
        gbc.setState(0xa4b3, 0xd3, 0x27e0, 0x4673, 0xcdf5, 0xb1f9, 0x0, 0x0);
        gbc.writeMem(0xa4b3, { 0xd8 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd3, gbc.sp());
        EXPECT(0xa4b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa4b3));
        // D8 0278
        gbc.setState(0x9b60, 0x64ae, 0x5a20, 0xed3d, 0x8df1, 0x3362, 0x1, 0x0);
        gbc.writeMem(0x9b60, { 0xd8 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x64ae, gbc.sp());
        EXPECT(0x9b61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9b60));
        // D8 0279
        gbc.setState(0xd945, 0x98f4, 0x7cd0, 0x3b90, 0xd307, 0x501, 0x1, 0x0);
        gbc.writeMem(0x98f4, { 0xa3, 0x5c });
        gbc.writeMem(0xd945, { 0xd8 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x98f6, gbc.sp());
        EXPECT(0x5ca3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa3, gbc.readMem(0x98f4));
        EXPECT(0x5c, gbc.readMem(0x98f5));
        EXPECT(0xd8, gbc.readMem(0xd945));
        // D8 027A
        gbc.setState(0x61d3, 0xb412, 0x7dc0, 0x16ad, 0x17f4, 0x4ac6, 0x1, 0x1);
        gbc.writeMem(0x61d3, { 0xd8 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xb412, gbc.sp());
        EXPECT(0x61d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 027C
        gbc.setState(0x72a5, 0x542c, 0xf940, 0x1619, 0xa2ee, 0xbaf7, 0x0, 0x0);
        gbc.writeMem(0x72a5, { 0xd8 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x542c, gbc.sp());
        EXPECT(0x72a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 027D
        gbc.setState(0x1fa1, 0x9ae, 0x3d30, 0x3f25, 0x68a7, 0x1a5f, 0x0, 0x0);
        gbc.writeMem(0x9ae, { 0xc9, 0xe7 });
        gbc.writeMem(0x1fa1, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x9b0, gbc.sp());
        EXPECT(0xe7c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 027E
        gbc.setState(0xbf39, 0xdee6, 0x8da0, 0xadcd, 0x5cf0, 0xfb21, 0x0, 0x0);
        gbc.writeMem(0xbf39, { 0xd8 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xdee6, gbc.sp());
        EXPECT(0xbf3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbf39));
        // D8 027F
        gbc.setState(0x9e26, 0x79ff, 0x9960, 0x80cd, 0xd3ab, 0xe398, 0x1, 0x0);
        gbc.writeMem(0x9e26, { 0xd8 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x79ff, gbc.sp());
        EXPECT(0x9e27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9e26));
        // D8 0280
        gbc.setState(0x799a, 0x5565, 0x4230, 0xcade, 0xd9ba, 0x5ac0, 0x0, 0x1);
        gbc.writeMem(0x5565, { 0xe9, 0xbd });
        gbc.writeMem(0x799a, { 0xd8 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x5567, gbc.sp());
        EXPECT(0xbde9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0281
        gbc.setState(0xa709, 0xa2c8, 0xa380, 0xe434, 0x63ba, 0xf908, 0x1, 0x1);
        gbc.writeMem(0xa709, { 0xd8 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xa2c8, gbc.sp());
        EXPECT(0xa70a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa709));
        // D8 0282
        gbc.setState(0x1644, 0xf404, 0x15c0, 0xb8b1, 0xbfbb, 0xebcb, 0x0, 0x0);
        gbc.writeMem(0x1644, { 0xd8 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xf404, gbc.sp());
        EXPECT(0x1645, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0283
        gbc.setState(0x5033, 0xefdf, 0xba40, 0x5a98, 0x3ebe, 0x3b9f, 0x0, 0x1);
        gbc.writeMem(0x5033, { 0xd8 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xefdf, gbc.sp());
        EXPECT(0x5034, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0284
        gbc.setState(0xeb07, 0xe541, 0x5140, 0x21ab, 0xf41, 0x3387, 0x1, 0x0);
        gbc.writeMem(0xeb07, { 0xd8 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xe541, gbc.sp());
        EXPECT(0xeb08, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeb07));
        // D8 0285
        gbc.setState(0x403a, 0x50b0, 0x1110, 0x83c0, 0xc20d, 0x1147, 0x0, 0x1);
        gbc.writeMem(0x403a, { 0xd8 });
        gbc.writeMem(0x50b0, { 0xfa, 0xec });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x50b2, gbc.sp());
        EXPECT(0xecfa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0286
        gbc.setState(0x98c1, 0x7396, 0x6640, 0x6d3e, 0x7f1f, 0x6b4a, 0x0, 0x1);
        gbc.writeMem(0x98c1, { 0xd8 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x7396, gbc.sp());
        EXPECT(0x98c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x98c1));
        // D8 0287
        gbc.setState(0x3fa2, 0xa4f7, 0x2980, 0xd308, 0x7804, 0xc17, 0x0, 0x1);
        gbc.writeMem(0x3fa2, { 0xd8 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa4f7, gbc.sp());
        EXPECT(0x3fa3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0289
        gbc.setState(0x8c5b, 0x31a7, 0x8fb0, 0x2b14, 0xa11a, 0x7c87, 0x0, 0x1);
        gbc.writeMem(0x31a7, { 0x7, 0x19 });
        gbc.writeMem(0x8c5b, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x31a9, gbc.sp());
        EXPECT(0x1907, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8c5b));
        // D8 028A
        gbc.setState(0x7e89, 0x936b, 0x3370, 0x307, 0x6fed, 0x565c, 0x1, 0x1);
        gbc.writeMem(0x7e89, { 0xd8 });
        gbc.writeMem(0x936b, { 0xfd, 0x9d });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x936d, gbc.sp());
        EXPECT(0x9dfd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfd, gbc.readMem(0x936b));
        EXPECT(0x9d, gbc.readMem(0x936c));
        // D8 028B
        gbc.setState(0x438c, 0x1291, 0xa2d0, 0x7fae, 0x51f2, 0xf272, 0x0, 0x0);
        gbc.writeMem(0x1291, { 0x2e, 0xd7 });
        gbc.writeMem(0x438c, { 0xd8 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x1293, gbc.sp());
        EXPECT(0xd72e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 028C
        gbc.setState(0xb019, 0x150f, 0xc350, 0xf5a7, 0x82e6, 0x13ae, 0x1, 0x1);
        gbc.writeMem(0x150f, { 0x59, 0x5 });
        gbc.writeMem(0xb019, { 0xd8 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x1511, gbc.sp());
        EXPECT(0x559, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb019));
        // D8 028D
        gbc.setState(0x5854, 0xc183, 0xc50, 0x3d1a, 0x492c, 0x40a1, 0x1, 0x1);
        gbc.writeMem(0x5854, { 0xd8 });
        gbc.writeMem(0xc183, { 0xeb, 0xe2 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xc185, gbc.sp());
        EXPECT(0xe2eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xc183));
        EXPECT(0xe2, gbc.readMem(0xc184));
        // D8 028F
        gbc.setState(0xe81d, 0xc7d4, 0x6160, 0x712e, 0x34fc, 0x42e9, 0x1, 0x1);
        gbc.writeMem(0xe81d, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xc7d4, gbc.sp());
        EXPECT(0xe81e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe81d));
        // D8 0290
        gbc.setState(0x2208, 0x4aa1, 0x2ae0, 0x5b0d, 0x792f, 0x6186, 0x0, 0x1);
        gbc.writeMem(0x2208, { 0xd8 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x4aa1, gbc.sp());
        EXPECT(0x2209, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0291
        gbc.setState(0xb45a, 0x6768, 0xea50, 0xdb1a, 0xb063, 0x84be, 0x0, 0x0);
        gbc.writeMem(0x6768, { 0x59, 0x5b });
        gbc.writeMem(0xb45a, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x676a, gbc.sp());
        EXPECT(0x5b59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb45a));
        // D8 0292
        gbc.setState(0xa78a, 0x35ce, 0x93b0, 0xbe6e, 0xad72, 0xf91c, 0x0, 0x1);
        gbc.writeMem(0x35ce, { 0x3, 0x2 });
        gbc.writeMem(0xa78a, { 0xd8 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x35d0, gbc.sp());
        EXPECT(0x203, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa78a));
        // D8 0293
        gbc.setState(0xee9e, 0xd060, 0xc440, 0xccfc, 0x5ac0, 0xf6e1, 0x1, 0x0);
        gbc.writeMem(0xee9e, { 0xd8 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xd060, gbc.sp());
        EXPECT(0xee9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xee9e));
        // D8 0294
        gbc.setState(0xe458, 0xe76c, 0xb0, 0x7592, 0x1d2d, 0xa810, 0x1, 0x1);
        gbc.writeMem(0xe458, { 0xd8 });
        gbc.writeMem(0xe76c, { 0x11, 0x87 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xe76e, gbc.sp());
        EXPECT(0x8711, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe458));
        EXPECT(0x11, gbc.readMem(0xe76c));
        EXPECT(0x87, gbc.readMem(0xe76d));
        // D8 0295
        gbc.setState(0x4229, 0xbd8d, 0x4710, 0xf3d9, 0xe86d, 0x7117, 0x1, 0x1);
        gbc.writeMem(0x4229, { 0xd8 });
        gbc.writeMem(0xbd8d, { 0x13, 0x83 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xbd8f, gbc.sp());
        EXPECT(0x8313, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0xbd8d));
        EXPECT(0x83, gbc.readMem(0xbd8e));
        // D8 0296
        gbc.setState(0x877e, 0x80f8, 0x3d50, 0x935e, 0xc07, 0xf3a7, 0x1, 0x0);
        gbc.writeMem(0x80f8, { 0x90, 0x58 });
        gbc.writeMem(0x877e, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x80fa, gbc.sp());
        EXPECT(0x5890, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x90, gbc.readMem(0x80f8));
        EXPECT(0x58, gbc.readMem(0x80f9));
        EXPECT(0xd8, gbc.readMem(0x877e));
        // D8 0297
        gbc.setState(0x5fef, 0x9811, 0x2330, 0xe02, 0xfa33, 0xb147, 0x1, 0x1);
        gbc.writeMem(0x5fef, { 0xd8 });
        gbc.writeMem(0x9811, { 0x13, 0xf5 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9813, gbc.sp());
        EXPECT(0xf513, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0x9811));
        EXPECT(0xf5, gbc.readMem(0x9812));
        // D8 0299
        gbc.setState(0xbeef, 0x8b14, 0x2070, 0xf8ee, 0x4f4d, 0x82b, 0x0, 0x1);
        gbc.writeMem(0x8b14, { 0x2a, 0x25 });
        gbc.writeMem(0xbeef, { 0xd8 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x8b16, gbc.sp());
        EXPECT(0x252a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0x8b14));
        EXPECT(0x25, gbc.readMem(0x8b15));
        EXPECT(0xd8, gbc.readMem(0xbeef));
        // D8 029A
        gbc.setState(0x8e93, 0xea8f, 0x5020, 0x52a7, 0x13aa, 0x4c1, 0x0, 0x1);
        gbc.writeMem(0x8e93, { 0xd8 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xea8f, gbc.sp());
        EXPECT(0x8e94, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8e93));
        // D8 029B
        gbc.setState(0xa569, 0x3bae, 0xfd20, 0x34b7, 0xb0ec, 0xe0e3, 0x0, 0x1);
        gbc.writeMem(0xa569, { 0xd8 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x3bae, gbc.sp());
        EXPECT(0xa56a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa569));
        // D8 029C
        gbc.setState(0xdff3, 0xf7c7, 0xfe50, 0xa171, 0x47fd, 0x9522, 0x1, 0x0);
        gbc.writeMem(0xdff3, { 0xd8 });
        gbc.writeMem(0xf7c7, { 0x83, 0x5b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xf7c9, gbc.sp());
        EXPECT(0x5b83, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdff3));
        EXPECT(0x83, gbc.readMem(0xf7c7));
        EXPECT(0x5b, gbc.readMem(0xf7c8));
        // D8 029D
        gbc.setState(0x6f3a, 0x8f4a, 0x5d00, 0xff6e, 0x823e, 0xa74f, 0x0, 0x1);
        gbc.writeMem(0x6f3a, { 0xd8 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x8f4a, gbc.sp());
        EXPECT(0x6f3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 029E
        gbc.setState(0xcbd4, 0x6a10, 0xbbb0, 0xa63c, 0x6193, 0x23b0, 0x1, 0x0);
        gbc.writeMem(0x6a10, { 0x30, 0xc });
        gbc.writeMem(0xcbd4, { 0xd8 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x6a12, gbc.sp());
        EXPECT(0xc30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcbd4));
        // D8 029F
        gbc.setState(0xe301, 0xea09, 0x820, 0xbab7, 0xd578, 0x2aaa, 0x0, 0x0);
        gbc.writeMem(0xe301, { 0xd8 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xea09, gbc.sp());
        EXPECT(0xe302, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe301));
        // D8 02A0
        gbc.setState(0xee9, 0x1c99, 0x10b0, 0x7a61, 0x36b3, 0xd7b5, 0x1, 0x1);
        gbc.writeMem(0xee9, { 0xd8 });
        gbc.writeMem(0x1c99, { 0x47, 0xa4 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x1c9b, gbc.sp());
        EXPECT(0xa447, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02A1
        gbc.setState(0xb298, 0x312f, 0xcdf0, 0x806c, 0x7fa7, 0x2697, 0x1, 0x1);
        gbc.writeMem(0x312f, { 0x2b, 0xef });
        gbc.writeMem(0xb298, { 0xd8 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x3131, gbc.sp());
        EXPECT(0xef2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb298));
        // D8 02A2
        gbc.setState(0x2cd2, 0x5fe8, 0xc350, 0x15fc, 0xb67e, 0xbe11, 0x0, 0x0);
        gbc.writeMem(0x2cd2, { 0xd8 });
        gbc.writeMem(0x5fe8, { 0xc6, 0x93 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x5fea, gbc.sp());
        EXPECT(0x93c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02A4
        gbc.setState(0x5cef, 0x2006, 0xf160, 0xcee7, 0x9d79, 0x6361, 0x1, 0x1);
        gbc.writeMem(0x5cef, { 0xd8 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2006, gbc.sp());
        EXPECT(0x5cf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02A5
        gbc.setState(0xeb13, 0x7ddc, 0xcab0, 0x4d9a, 0x1733, 0xca02, 0x1, 0x1);
        gbc.writeMem(0x7ddc, { 0x3e, 0x80 });
        gbc.writeMem(0xeb13, { 0xd8 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x7dde, gbc.sp());
        EXPECT(0x803e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeb13));
        // D8 02A6
        gbc.setState(0x6fa7, 0x2c53, 0x6a40, 0xa1b1, 0x77e4, 0xedb7, 0x0, 0x1);
        gbc.writeMem(0x6fa7, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x2c53, gbc.sp());
        EXPECT(0x6fa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02A7
        gbc.setState(0xfa7, 0x2afa, 0xa7f0, 0x84e4, 0x34b5, 0x8ed9, 0x0, 0x0);
        gbc.writeMem(0xfa7, { 0xd8 });
        gbc.writeMem(0x2afa, { 0x9, 0x42 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x2afc, gbc.sp());
        EXPECT(0x4209, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02A8
        gbc.setState(0x52f9, 0x245e, 0xb460, 0x9b4e, 0x122f, 0xebc2, 0x0, 0x1);
        gbc.writeMem(0x52f9, { 0xd8 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x245e, gbc.sp());
        EXPECT(0x52fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02A9
        gbc.setState(0xd2d1, 0xacae, 0xb810, 0xda0b, 0xbaaa, 0x8d98, 0x1, 0x1);
        gbc.writeMem(0xacae, { 0x7a, 0x1c });
        gbc.writeMem(0xd2d1, { 0xd8 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xacb0, gbc.sp());
        EXPECT(0x1c7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7a, gbc.readMem(0xacae));
        EXPECT(0x1c, gbc.readMem(0xacaf));
        EXPECT(0xd8, gbc.readMem(0xd2d1));
        // D8 02AC
        gbc.setState(0x251b, 0xf3f, 0xb720, 0x631e, 0x2a24, 0x8435, 0x0, 0x0);
        gbc.writeMem(0x251b, { 0xd8 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xf3f, gbc.sp());
        EXPECT(0x251c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02AD
        gbc.setState(0xe169, 0x1db1, 0xa90, 0xe267, 0xc73c, 0x5b82, 0x1, 0x0);
        gbc.writeMem(0x1db1, { 0x6f, 0x83 });
        gbc.writeMem(0xe169, { 0xd8 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1db3, gbc.sp());
        EXPECT(0x836f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe169));
        // D8 02AE
        gbc.setState(0x1510, 0x916f, 0xaf60, 0x5d7a, 0xc3d9, 0x373e, 0x0, 0x0);
        gbc.writeMem(0x1510, { 0xd8 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x916f, gbc.sp());
        EXPECT(0x1511, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02AF
        gbc.setState(0x5f79, 0x922b, 0x6d50, 0xcfc1, 0xf113, 0xfe02, 0x0, 0x0);
        gbc.writeMem(0x5f79, { 0xd8 });
        gbc.writeMem(0x922b, { 0xab, 0x71 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x922d, gbc.sp());
        EXPECT(0x71ab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0x922b));
        EXPECT(0x71, gbc.readMem(0x922c));
        // D8 02B0
        gbc.setState(0x26b5, 0xc61, 0xc4c0, 0xdcd1, 0xec8f, 0xfd58, 0x1, 0x0);
        gbc.writeMem(0x26b5, { 0xd8 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xc61, gbc.sp());
        EXPECT(0x26b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02B2
        gbc.setState(0x7c96, 0xbbd6, 0xbd40, 0x586d, 0x115c, 0xb315, 0x1, 0x1);
        gbc.writeMem(0x7c96, { 0xd8 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xbbd6, gbc.sp());
        EXPECT(0x7c97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02B3
        gbc.setState(0x16c9, 0xd221, 0x3150, 0xdeb8, 0x1182, 0xa080, 0x1, 0x0);
        gbc.writeMem(0x16c9, { 0xd8 });
        gbc.writeMem(0xd221, { 0x7c, 0x89 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xd223, gbc.sp());
        EXPECT(0x897c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0xd221));
        EXPECT(0x89, gbc.readMem(0xd222));
        // D8 02B4
        gbc.setState(0x5632, 0x727f, 0x2ba0, 0x3c4c, 0xa080, 0xdf62, 0x1, 0x0);
        gbc.writeMem(0x5632, { 0xd8 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x727f, gbc.sp());
        EXPECT(0x5633, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02B5
        gbc.setState(0xb0e3, 0x9ab4, 0x8f50, 0x271d, 0x2d91, 0x2793, 0x0, 0x1);
        gbc.writeMem(0x9ab4, { 0x80, 0x22 });
        gbc.writeMem(0xb0e3, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x9ab6, gbc.sp());
        EXPECT(0x2280, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x80, gbc.readMem(0x9ab4));
        EXPECT(0x22, gbc.readMem(0x9ab5));
        EXPECT(0xd8, gbc.readMem(0xb0e3));
        // D8 02B6
        gbc.setState(0xd4d5, 0x6450, 0x590, 0x8991, 0x65b2, 0x9c4f, 0x0, 0x1);
        gbc.writeMem(0x6450, { 0xc9, 0x22 });
        gbc.writeMem(0xd4d5, { 0xd8 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x6452, gbc.sp());
        EXPECT(0x22c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd4d5));
        // D8 02B8
        gbc.setState(0x7e2c, 0xb674, 0xa790, 0x2a76, 0x1faf, 0x2b36, 0x1, 0x0);
        gbc.writeMem(0x7e2c, { 0xd8 });
        gbc.writeMem(0xb674, { 0xed, 0x70 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xb676, gbc.sp());
        EXPECT(0x70ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xb674));
        EXPECT(0x70, gbc.readMem(0xb675));
        // D8 02B9
        gbc.setState(0x8298, 0xd9fe, 0x5760, 0xd2c5, 0xe6aa, 0x2ffb, 0x1, 0x0);
        gbc.writeMem(0x8298, { 0xd8 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xd9fe, gbc.sp());
        EXPECT(0x8299, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8298));
        // D8 02BA
        gbc.setState(0x1e1e, 0x1075, 0x4a90, 0x5c6c, 0x7092, 0x9c9f, 0x1, 0x0);
        gbc.writeMem(0x1075, { 0xa, 0x20 });
        gbc.writeMem(0x1e1e, { 0xd8 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x1077, gbc.sp());
        EXPECT(0x200a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02BB
        gbc.setState(0xc262, 0x6771, 0xa830, 0xa7a7, 0xffec, 0x8f90, 0x1, 0x0);
        gbc.writeMem(0x6771, { 0xa5, 0xa });
        gbc.writeMem(0xc262, { 0xd8 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x6773, gbc.sp());
        EXPECT(0xaa5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc262));
        // D8 02BC
        gbc.setState(0x885, 0xea66, 0x3900, 0x7abc, 0xea26, 0x36a8, 0x1, 0x0);
        gbc.writeMem(0x885, { 0xd8 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xea66, gbc.sp());
        EXPECT(0x886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02BD
        gbc.setState(0x1ab1, 0xdf0a, 0x2a30, 0xf51a, 0x873d, 0x3171, 0x1, 0x0);
        gbc.writeMem(0x1ab1, { 0xd8 });
        gbc.writeMem(0xdf0a, { 0x79, 0x8d });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xdf0c, gbc.sp());
        EXPECT(0x8d79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0xdf0a));
        EXPECT(0x8d, gbc.readMem(0xdf0b));
        // D8 02BE
        gbc.setState(0xbe42, 0x92e8, 0xc140, 0x1b5c, 0x2dbd, 0xa058, 0x1, 0x0);
        gbc.writeMem(0xbe42, { 0xd8 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x92e8, gbc.sp());
        EXPECT(0xbe43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe42));
        // D8 02BF
        gbc.setState(0x4e2e, 0xbfed, 0x92a0, 0x36d1, 0x4a0b, 0x603, 0x1, 0x1);
        gbc.writeMem(0x4e2e, { 0xd8 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xbfed, gbc.sp());
        EXPECT(0x4e2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02C0
        gbc.setState(0x5694, 0xfc0b, 0x6b50, 0xbf73, 0x739f, 0xb6c5, 0x1, 0x1);
        gbc.writeMem(0x5694, { 0xd8 });
        gbc.writeMem(0xfc0b, { 0xa0, 0xf0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xfc0d, gbc.sp());
        EXPECT(0xf0a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xfc0b));
        EXPECT(0xf0, gbc.readMem(0xfc0c));
        // D8 02C1
        gbc.setState(0x2f34, 0x672a, 0xbc70, 0xa4b1, 0x5a5f, 0x6f26, 0x1, 0x1);
        gbc.writeMem(0x2f34, { 0xd8 });
        gbc.writeMem(0x672a, { 0x10, 0xb0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x672c, gbc.sp());
        EXPECT(0xb010, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02C2
        gbc.setState(0x2ca4, 0xabb0, 0x5b60, 0x3b84, 0xfa35, 0x998d, 0x0, 0x0);
        gbc.writeMem(0x2ca4, { 0xd8 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xabb0, gbc.sp());
        EXPECT(0x2ca5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02C3
        gbc.setState(0x4a6c, 0x7126, 0xef90, 0x7ac2, 0x2b3b, 0xdeb8, 0x0, 0x1);
        gbc.writeMem(0x4a6c, { 0xd8 });
        gbc.writeMem(0x7126, { 0x1a, 0x6d });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x7128, gbc.sp());
        EXPECT(0x6d1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02C4
        gbc.setState(0x8012, 0xdfdf, 0x830, 0x3756, 0xf92f, 0xa3b3, 0x0, 0x1);
        gbc.writeMem(0x8012, { 0xd8 });
        gbc.writeMem(0xdfdf, { 0x2d, 0xf2 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xdfe1, gbc.sp());
        EXPECT(0xf22d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8012));
        EXPECT(0x2d, gbc.readMem(0xdfdf));
        EXPECT(0xf2, gbc.readMem(0xdfe0));
        // D8 02C5
        gbc.setState(0xe2e1, 0x9aa2, 0x5a10, 0x7073, 0xf66d, 0x45e6, 0x0, 0x1);
        gbc.writeMem(0x9aa2, { 0x91, 0x45 });
        gbc.writeMem(0xe2e1, { 0xd8 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x9aa4, gbc.sp());
        EXPECT(0x4591, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x91, gbc.readMem(0x9aa2));
        EXPECT(0x45, gbc.readMem(0x9aa3));
        EXPECT(0xd8, gbc.readMem(0xe2e1));
        // D8 02C6
        gbc.setState(0xb2f9, 0x9a71, 0xf370, 0x790e, 0x2ef4, 0xaea7, 0x1, 0x1);
        gbc.writeMem(0x9a71, { 0x8b, 0x9e });
        gbc.writeMem(0xb2f9, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9a73, gbc.sp());
        EXPECT(0x9e8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0x9a71));
        EXPECT(0x9e, gbc.readMem(0x9a72));
        EXPECT(0xd8, gbc.readMem(0xb2f9));
        // D8 02C7
        gbc.setState(0x47a4, 0x831a, 0x1db0, 0x130a, 0xbb86, 0xfb4e, 0x0, 0x1);
        gbc.writeMem(0x47a4, { 0xd8 });
        gbc.writeMem(0x831a, { 0x99, 0x1e });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x831c, gbc.sp());
        EXPECT(0x1e99, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x99, gbc.readMem(0x831a));
        EXPECT(0x1e, gbc.readMem(0x831b));
        // D8 02C9
        gbc.setState(0x34cc, 0x64b8, 0x6a70, 0xc9db, 0xaf3c, 0xa1c9, 0x1, 0x1);
        gbc.writeMem(0x34cc, { 0xd8 });
        gbc.writeMem(0x64b8, { 0xad, 0x95 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x64ba, gbc.sp());
        EXPECT(0x95ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02CA
        gbc.setState(0x3275, 0x14c3, 0x2e40, 0xc430, 0x144, 0x5073, 0x1, 0x1);
        gbc.writeMem(0x3275, { 0xd8 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x14c3, gbc.sp());
        EXPECT(0x3276, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02CB
        gbc.setState(0x6072, 0xa809, 0xc4a0, 0xfb63, 0x3e36, 0x1de6, 0x1, 0x0);
        gbc.writeMem(0x6072, { 0xd8 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xa809, gbc.sp());
        EXPECT(0x6073, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02CC
        gbc.setState(0xec9f, 0x40c5, 0x3dd0, 0x4c66, 0xf70f, 0x2538, 0x1, 0x1);
        gbc.writeMem(0x40c5, { 0xf8, 0x4c });
        gbc.writeMem(0xec9f, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x40c7, gbc.sp());
        EXPECT(0x4cf8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xec9f));
        // D8 02CD
        gbc.setState(0x250a, 0xd7b2, 0xdf30, 0x2526, 0x96b6, 0x5e38, 0x0, 0x1);
        gbc.writeMem(0x250a, { 0xd8 });
        gbc.writeMem(0xd7b2, { 0x77, 0xcd });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xd7b4, gbc.sp());
        EXPECT(0xcd77, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xd7b2));
        EXPECT(0xcd, gbc.readMem(0xd7b3));
        // D8 02CE
        gbc.setState(0x8d68, 0x2220, 0xc3e0, 0xa6dc, 0x2032, 0xbe47, 0x0, 0x0);
        gbc.writeMem(0x8d68, { 0xd8 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x2220, gbc.sp());
        EXPECT(0x8d69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8d68));
        // D8 02CF
        gbc.setState(0x1971, 0x5b52, 0x4e50, 0xe897, 0x41e4, 0xd63d, 0x0, 0x0);
        gbc.writeMem(0x1971, { 0xd8 });
        gbc.writeMem(0x5b52, { 0xa5, 0x33 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5b54, gbc.sp());
        EXPECT(0x33a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02D0
        gbc.setState(0x51e9, 0x3304, 0xa0d0, 0x500c, 0xcf59, 0xb7a4, 0x1, 0x1);
        gbc.writeMem(0x3304, { 0xa0, 0xd0 });
        gbc.writeMem(0x51e9, { 0xd8 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x3306, gbc.sp());
        EXPECT(0xd0a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02D1
        gbc.setState(0xe0cb, 0x62dc, 0xa880, 0x95d2, 0x8117, 0xf27, 0x1, 0x1);
        gbc.writeMem(0xe0cb, { 0xd8 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x62dc, gbc.sp());
        EXPECT(0xe0cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe0cb));
        // D8 02D2
        gbc.setState(0xc056, 0xe691, 0x4a0, 0xfa0b, 0x74dc, 0x6e1d, 0x1, 0x0);
        gbc.writeMem(0xc056, { 0xd8 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe691, gbc.sp());
        EXPECT(0xc057, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc056));
        // D8 02D3
        gbc.setState(0x80d2, 0xe50b, 0x9c10, 0xd6ad, 0xd500, 0xa1e9, 0x1, 0x0);
        gbc.writeMem(0x80d2, { 0xd8 });
        gbc.writeMem(0xe50b, { 0x34, 0x77 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xe50d, gbc.sp());
        EXPECT(0x7734, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x80d2));
        EXPECT(0x34, gbc.readMem(0xe50b));
        EXPECT(0x77, gbc.readMem(0xe50c));
        // D8 02D4
        gbc.setState(0xceeb, 0xa811, 0x3da0, 0xa7d8, 0xfb8f, 0x7dd9, 0x0, 0x1);
        gbc.writeMem(0xceeb, { 0xd8 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xa811, gbc.sp());
        EXPECT(0xceec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xceeb));
        // D8 02D5
        gbc.setState(0xcd34, 0xd3b8, 0xaa10, 0x87a6, 0xdba2, 0xd054, 0x1, 0x1);
        gbc.writeMem(0xcd34, { 0xd8 });
        gbc.writeMem(0xd3b8, { 0x67, 0xbf });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xd3ba, gbc.sp());
        EXPECT(0xbf67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcd34));
        EXPECT(0x67, gbc.readMem(0xd3b8));
        EXPECT(0xbf, gbc.readMem(0xd3b9));
        // D8 02D6
        gbc.setState(0x13b0, 0xf467, 0xbc0, 0x3d30, 0xe6ec, 0xa9e4, 0x1, 0x0);
        gbc.writeMem(0x13b0, { 0xd8 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf467, gbc.sp());
        EXPECT(0x13b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02D7
        gbc.setState(0x70b5, 0x5c7c, 0x1c0, 0x8788, 0xc172, 0x4585, 0x0, 0x1);
        gbc.writeMem(0x70b5, { 0xd8 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5c7c, gbc.sp());
        EXPECT(0x70b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02D8
        gbc.setState(0x3e64, 0x1466, 0x4e50, 0x758f, 0xdeaa, 0xe5f1, 0x1, 0x0);
        gbc.writeMem(0x1466, { 0x4d, 0x2d });
        gbc.writeMem(0x3e64, { 0xd8 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x1468, gbc.sp());
        EXPECT(0x2d4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02DB
        gbc.setState(0xbdc3, 0x3fe6, 0x1b20, 0x3a5c, 0xc02b, 0xd251, 0x1, 0x0);
        gbc.writeMem(0xbdc3, { 0xd8 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3fe6, gbc.sp());
        EXPECT(0xbdc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbdc3));
        // D8 02DC
        gbc.setState(0xcef0, 0xe27a, 0x6340, 0x2b55, 0x3c15, 0x7a70, 0x0, 0x1);
        gbc.writeMem(0xcef0, { 0xd8 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xe27a, gbc.sp());
        EXPECT(0xcef1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcef0));
        // D8 02DD
        gbc.setState(0xb8a1, 0x85b6, 0xc590, 0xd687, 0xc634, 0x82a7, 0x0, 0x1);
        gbc.writeMem(0x85b6, { 0x64, 0x7e });
        gbc.writeMem(0xb8a1, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x85b8, gbc.sp());
        EXPECT(0x7e64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x85b6));
        EXPECT(0x7e, gbc.readMem(0x85b7));
        EXPECT(0xd8, gbc.readMem(0xb8a1));
        // D8 02DE
        gbc.setState(0x73d6, 0xd9dc, 0xed0, 0xd0dc, 0x37a3, 0xbf8d, 0x1, 0x1);
        gbc.writeMem(0x73d6, { 0xd8 });
        gbc.writeMem(0xd9dc, { 0x32, 0x3c });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xd9de, gbc.sp());
        EXPECT(0x3c32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0xd9dc));
        EXPECT(0x3c, gbc.readMem(0xd9dd));
        // D8 02DF
        gbc.setState(0xda2e, 0x3a4, 0x8550, 0x51d, 0x2c16, 0x2209, 0x0, 0x1);
        gbc.writeMem(0x3a4, { 0x13, 0xd });
        gbc.writeMem(0xda2e, { 0xd8 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x3a6, gbc.sp());
        EXPECT(0xd13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xda2e));
        // D8 02E0
        gbc.setState(0x78af, 0x1a9d, 0x6260, 0x2949, 0xc669, 0x9eb2, 0x0, 0x0);
        gbc.writeMem(0x78af, { 0xd8 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x1a9d, gbc.sp());
        EXPECT(0x78b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02E1
        gbc.setState(0x4915, 0x2c73, 0x7c70, 0x5359, 0xcf05, 0x8f93, 0x1, 0x0);
        gbc.writeMem(0x2c73, { 0xe8, 0x75 });
        gbc.writeMem(0x4915, { 0xd8 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x2c75, gbc.sp());
        EXPECT(0x75e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02E2
        gbc.setState(0x85e, 0xe5a7, 0xe550, 0x7870, 0x4674, 0xfa9f, 0x0, 0x1);
        gbc.writeMem(0x85e, { 0xd8 });
        gbc.writeMem(0xe5a7, { 0xfd, 0x92 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xe5a9, gbc.sp());
        EXPECT(0x92fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfd, gbc.readMem(0xe5a7));
        EXPECT(0x92, gbc.readMem(0xe5a8));
        // D8 02E3
        gbc.setState(0x589a, 0x71a1, 0x3c50, 0x3d22, 0x65, 0x1692, 0x1, 0x0);
        gbc.writeMem(0x589a, { 0xd8 });
        gbc.writeMem(0x71a1, { 0x17, 0xe1 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x71a3, gbc.sp());
        EXPECT(0xe117, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02E4
        gbc.setState(0x7297, 0xb548, 0x6f80, 0x8934, 0xa00c, 0x3997, 0x1, 0x0);
        gbc.writeMem(0x7297, { 0xd8 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb548, gbc.sp());
        EXPECT(0x7298, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02E5
        gbc.setState(0xb475, 0xe10, 0xf650, 0x8fe4, 0x688d, 0xd957, 0x1, 0x1);
        gbc.writeMem(0xe10, { 0x69, 0x39 });
        gbc.writeMem(0xb475, { 0xd8 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xe12, gbc.sp());
        EXPECT(0x3969, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb475));
        // D8 02E6
        gbc.setState(0xd4b3, 0x1f54, 0x8980, 0x8448, 0xde5a, 0x272e, 0x1, 0x0);
        gbc.writeMem(0xd4b3, { 0xd8 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x1f54, gbc.sp());
        EXPECT(0xd4b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd4b3));
        // D8 02E7
        gbc.setState(0x8ad3, 0x8e2d, 0xe7c0, 0x542b, 0xd5b1, 0x3b51, 0x1, 0x1);
        gbc.writeMem(0x8ad3, { 0xd8 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x8e2d, gbc.sp());
        EXPECT(0x8ad4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8ad3));
        // D8 02E8
        gbc.setState(0xdcb0, 0x207d, 0x6f30, 0xcf85, 0xc678, 0x48e4, 0x1, 0x0);
        gbc.writeMem(0x207d, { 0x10, 0xbc });
        gbc.writeMem(0xdcb0, { 0xd8 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x207f, gbc.sp());
        EXPECT(0xbc10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdcb0));
        // D8 02E9
        gbc.setState(0x66cd, 0xfdf7, 0xb60, 0x8d4, 0x1fd3, 0xffae, 0x0, 0x0);
        gbc.writeMem(0x66cd, { 0xd8 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xfdf7, gbc.sp());
        EXPECT(0x66ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02EA
        gbc.setState(0x9c22, 0x91e5, 0xa4a0, 0x3705, 0xeb39, 0xf39, 0x1, 0x0);
        gbc.writeMem(0x9c22, { 0xd8 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x91e5, gbc.sp());
        EXPECT(0x9c23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9c22));
        // D8 02EB
        gbc.setState(0x45c3, 0xdf9, 0xb4f0, 0x95f9, 0x1be, 0x7c1b, 0x0, 0x0);
        gbc.writeMem(0xdf9, { 0x15, 0xd2 });
        gbc.writeMem(0x45c3, { 0xd8 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xdfb, gbc.sp());
        EXPECT(0xd215, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02EC
        gbc.setState(0x7d38, 0x9cbe, 0xf5b0, 0xb6ce, 0x20a, 0x36ba, 0x1, 0x1);
        gbc.writeMem(0x7d38, { 0xd8 });
        gbc.writeMem(0x9cbe, { 0xa0, 0xdb });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x9cc0, gbc.sp());
        EXPECT(0xdba0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0x9cbe));
        EXPECT(0xdb, gbc.readMem(0x9cbf));
        // D8 02ED
        gbc.setState(0xd70, 0xba5f, 0x2e10, 0xd4a9, 0xb3d1, 0xcd3d, 0x0, 0x0);
        gbc.writeMem(0xd70, { 0xd8 });
        gbc.writeMem(0xba5f, { 0xba, 0xb4 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xba61, gbc.sp());
        EXPECT(0xb4ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xba, gbc.readMem(0xba5f));
        EXPECT(0xb4, gbc.readMem(0xba60));
        // D8 02EE
        gbc.setState(0x1485, 0x25b3, 0x8dc0, 0xf9f6, 0xa301, 0xc058, 0x0, 0x0);
        gbc.writeMem(0x1485, { 0xd8 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x25b3, gbc.sp());
        EXPECT(0x1486, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02EF
        gbc.setState(0xbf80, 0x7f4, 0x6290, 0x6d00, 0x5123, 0x7ff0, 0x0, 0x0);
        gbc.writeMem(0x7f4, { 0xec, 0x55 });
        gbc.writeMem(0xbf80, { 0xd8 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x7f6, gbc.sp());
        EXPECT(0x55ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbf80));
        // D8 02F1
        gbc.setState(0xdfad, 0x6163, 0xffe0, 0x3195, 0xc39e, 0xff86, 0x1, 0x1);
        gbc.writeMem(0xdfad, { 0xd8 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x6163, gbc.sp());
        EXPECT(0xdfae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdfad));
        // D8 02F2
        gbc.setState(0x6c2c, 0xc182, 0xf8b0, 0x1d4d, 0xcaa0, 0xc91f, 0x0, 0x0);
        gbc.writeMem(0x6c2c, { 0xd8 });
        gbc.writeMem(0xc182, { 0xe4, 0xeb });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xc184, gbc.sp());
        EXPECT(0xebe4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe4, gbc.readMem(0xc182));
        EXPECT(0xeb, gbc.readMem(0xc183));
        // D8 02F3
        gbc.setState(0x2212, 0xd656, 0xc900, 0x4653, 0xdf1, 0x58d5, 0x1, 0x1);
        gbc.writeMem(0x2212, { 0xd8 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xd656, gbc.sp());
        EXPECT(0x2213, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02F4
        gbc.setState(0x872b, 0xbc94, 0xf810, 0xd70c, 0x1beb, 0x830d, 0x0, 0x0);
        gbc.writeMem(0x872b, { 0xd8 });
        gbc.writeMem(0xbc94, { 0xb0, 0x77 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xbc96, gbc.sp());
        EXPECT(0x77b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x872b));
        EXPECT(0xb0, gbc.readMem(0xbc94));
        EXPECT(0x77, gbc.readMem(0xbc95));
        // D8 02F5
        gbc.setState(0x36dd, 0xdabd, 0x2880, 0x6757, 0x58d7, 0x7793, 0x1, 0x0);
        gbc.writeMem(0x36dd, { 0xd8 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xdabd, gbc.sp());
        EXPECT(0x36de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02F6
        gbc.setState(0xac43, 0x68c6, 0x8d60, 0xf2ef, 0xa858, 0xbc, 0x0, 0x1);
        gbc.writeMem(0xac43, { 0xd8 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x68c6, gbc.sp());
        EXPECT(0xac44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xac43));
        // D8 02F7
        gbc.setState(0x3067, 0xd1de, 0x820, 0x7c2b, 0x647, 0x4cc9, 0x0, 0x0);
        gbc.writeMem(0x3067, { 0xd8 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd1de, gbc.sp());
        EXPECT(0x3068, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02F8
        gbc.setState(0x90d9, 0x90c1, 0x1830, 0xa890, 0x362f, 0x7c82, 0x1, 0x0);
        gbc.writeMem(0x90c1, { 0x17, 0xce });
        gbc.writeMem(0x90d9, { 0xd8 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x90c3, gbc.sp());
        EXPECT(0xce17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0x90c1));
        EXPECT(0xce, gbc.readMem(0x90c2));
        EXPECT(0xd8, gbc.readMem(0x90d9));
        // D8 02F9
        gbc.setState(0x468e, 0xdb1b, 0x7ec0, 0xf427, 0x66bc, 0x9686, 0x1, 0x1);
        gbc.writeMem(0x468e, { 0xd8 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xdb1b, gbc.sp());
        EXPECT(0x468f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 02FA
        gbc.setState(0x49fa, 0x5a31, 0x76d0, 0xa832, 0x7c07, 0x3d48, 0x0, 0x1);
        gbc.writeMem(0x49fa, { 0xd8 });
        gbc.writeMem(0x5a31, { 0x8d, 0x50 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x5a33, gbc.sp());
        EXPECT(0x508d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02FB
        gbc.setState(0xea06, 0x31fe, 0xc420, 0xd03e, 0x16b4, 0x880c, 0x0, 0x0);
        gbc.writeMem(0xea06, { 0xd8 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x31fe, gbc.sp());
        EXPECT(0xea07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xea06));
        // D8 02FC
        gbc.setState(0xcde8, 0x83d, 0x2360, 0xaabf, 0xb15c, 0xcd7, 0x0, 0x1);
        gbc.writeMem(0xcde8, { 0xd8 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x83d, gbc.sp());
        EXPECT(0xcde9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcde8));
        // D8 02FD
        gbc.setState(0x9ce, 0xa22, 0x69d0, 0xbde1, 0x2412, 0xde59, 0x0, 0x0);
        gbc.writeMem(0x9ce, { 0xd8 });
        gbc.writeMem(0xa22, { 0xdb, 0x4f });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xa24, gbc.sp());
        EXPECT(0x4fdb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02FE
        gbc.setState(0x4250, 0x13f, 0x1530, 0xb629, 0xd79f, 0x642d, 0x1, 0x1);
        gbc.writeMem(0x13f, { 0xf3, 0x17 });
        gbc.writeMem(0x4250, { 0xd8 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x141, gbc.sp());
        EXPECT(0x17f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 02FF
        gbc.setState(0x8d99, 0xd48b, 0x7ac0, 0x6aee, 0xde90, 0xa7b8, 0x0, 0x0);
        gbc.writeMem(0x8d99, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xd48b, gbc.sp());
        EXPECT(0x8d9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8d99));
        // D8 0300
        gbc.setState(0xd4a8, 0x48ed, 0xd420, 0xe8fa, 0x18a3, 0x7f2, 0x0, 0x1);
        gbc.writeMem(0xd4a8, { 0xd8 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x48ed, gbc.sp());
        EXPECT(0xd4a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd4a8));
        // D8 0301
        gbc.setState(0x539b, 0x6e71, 0x9a70, 0x8856, 0x3ff3, 0x9e1d, 0x1, 0x0);
        gbc.writeMem(0x539b, { 0xd8 });
        gbc.writeMem(0x6e71, { 0x3f, 0xab });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x6e73, gbc.sp());
        EXPECT(0xab3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0302
        gbc.setState(0xe300, 0xa5, 0xa750, 0x543c, 0xc387, 0xfcfa, 0x1, 0x1);
        gbc.writeMem(0xa5, { 0xde, 0x4f });
        gbc.writeMem(0xe300, { 0xd8 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xa7, gbc.sp());
        EXPECT(0x4fde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe300));
        // D8 0303
        gbc.setState(0xda2f, 0x70e8, 0xa3b0, 0x4ae7, 0xdb42, 0x9edd, 0x0, 0x1);
        gbc.writeMem(0x70e8, { 0x5e, 0x2c });
        gbc.writeMem(0xda2f, { 0xd8 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x70ea, gbc.sp());
        EXPECT(0x2c5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xda2f));
        // D8 0304
        gbc.setState(0x18d9, 0x80d1, 0xd470, 0xa112, 0x82c3, 0x8819, 0x1, 0x1);
        gbc.writeMem(0x18d9, { 0xd8 });
        gbc.writeMem(0x80d1, { 0xe2, 0x90 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x80d3, gbc.sp());
        EXPECT(0x90e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0x80d1));
        EXPECT(0x90, gbc.readMem(0x80d2));
        // D8 0305
        gbc.setState(0xd8bd, 0xe20f, 0x4000, 0xc889, 0xf4e6, 0xe217, 0x0, 0x0);
        gbc.writeMem(0xd8bd, { 0xd8 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xe20f, gbc.sp());
        EXPECT(0xd8be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd8bd));
        // D8 0306
        gbc.setState(0xd77c, 0x9376, 0x5f50, 0x76c1, 0x4d0, 0x8f8e, 0x0, 0x1);
        gbc.writeMem(0x9376, { 0xd5, 0xed });
        gbc.writeMem(0xd77c, { 0xd8 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x9378, gbc.sp());
        EXPECT(0xedd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd5, gbc.readMem(0x9376));
        EXPECT(0xed, gbc.readMem(0x9377));
        EXPECT(0xd8, gbc.readMem(0xd77c));
        // D8 0307
        gbc.setState(0xd3c9, 0xe97d, 0xc820, 0xead8, 0x4dcb, 0x4cf3, 0x0, 0x0);
        gbc.writeMem(0xd3c9, { 0xd8 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xe97d, gbc.sp());
        EXPECT(0xd3ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd3c9));
        // D8 0308
        gbc.setState(0xc1e8, 0x572a, 0x8610, 0x88c0, 0xb734, 0x441f, 0x0, 0x0);
        gbc.writeMem(0x572a, { 0xb4, 0x8e });
        gbc.writeMem(0xc1e8, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x572c, gbc.sp());
        EXPECT(0x8eb4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc1e8));
        // D8 0309
        gbc.setState(0xe26c, 0x2e65, 0x56c0, 0x9380, 0x60aa, 0xfd6c, 0x1, 0x1);
        gbc.writeMem(0xe26c, { 0xd8 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x2e65, gbc.sp());
        EXPECT(0xe26d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe26c));
        // D8 030A
        gbc.setState(0x3ba9, 0x75a7, 0xd840, 0x80aa, 0xcd7b, 0xd6d8, 0x1, 0x0);
        gbc.writeMem(0x3ba9, { 0xd8 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x75a7, gbc.sp());
        EXPECT(0x3baa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 030B
        gbc.setState(0x1202, 0xa2fe, 0x4280, 0x6ca9, 0xf30a, 0x742, 0x1, 0x0);
        gbc.writeMem(0x1202, { 0xd8 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xa2fe, gbc.sp());
        EXPECT(0x1203, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 030C
        gbc.setState(0x6676, 0x224c, 0x6c10, 0x5178, 0x72dc, 0x72f4, 0x0, 0x0);
        gbc.writeMem(0x224c, { 0x87, 0x7a });
        gbc.writeMem(0x6676, { 0xd8 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x224e, gbc.sp());
        EXPECT(0x7a87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 030D
        gbc.setState(0xdb97, 0x6f13, 0x25a0, 0x2a41, 0x366a, 0x51d6, 0x1, 0x0);
        gbc.writeMem(0xdb97, { 0xd8 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x6f13, gbc.sp());
        EXPECT(0xdb98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdb97));
        // D8 030E
        gbc.setState(0xc84, 0xd96f, 0xc0d0, 0x241, 0x18de, 0xb96c, 0x1, 0x0);
        gbc.writeMem(0xc84, { 0xd8 });
        gbc.writeMem(0xd96f, { 0x40, 0x6c });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xd971, gbc.sp());
        EXPECT(0x6c40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xd96f));
        EXPECT(0x6c, gbc.readMem(0xd970));
        // D8 0310
        gbc.setState(0xcbc6, 0xd889, 0xdb00, 0x4894, 0xce4a, 0x1934, 0x1, 0x1);
        gbc.writeMem(0xcbc6, { 0xd8 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xd889, gbc.sp());
        EXPECT(0xcbc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xcbc6));
        // D8 0311
        gbc.setState(0xc362, 0xa07a, 0x1150, 0x48fb, 0x445b, 0x7b9b, 0x1, 0x1);
        gbc.writeMem(0xa07a, { 0xa7, 0xc1 });
        gbc.writeMem(0xc362, { 0xd8 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xa07c, gbc.sp());
        EXPECT(0xc1a7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa7, gbc.readMem(0xa07a));
        EXPECT(0xc1, gbc.readMem(0xa07b));
        EXPECT(0xd8, gbc.readMem(0xc362));
        // D8 0312
        gbc.setState(0xc0dc, 0x312e, 0x2630, 0xbce8, 0x3027, 0x7370, 0x1, 0x1);
        gbc.writeMem(0x312e, { 0xed, 0x2b });
        gbc.writeMem(0xc0dc, { 0xd8 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x3130, gbc.sp());
        EXPECT(0x2bed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc0dc));
        // D8 0313
        gbc.setState(0x177, 0x4590, 0x1190, 0x8697, 0x5777, 0x32b5, 0x0, 0x0);
        gbc.writeMem(0x177, { 0xd8 });
        gbc.writeMem(0x4590, { 0x77, 0x91 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x4592, gbc.sp());
        EXPECT(0x9177, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0314
        gbc.setState(0x7662, 0xa9bb, 0x91a0, 0x5373, 0xd1b9, 0xb405, 0x1, 0x1);
        gbc.writeMem(0x7662, { 0xd8 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xa9bb, gbc.sp());
        EXPECT(0x7663, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0316
        gbc.setState(0xeaa7, 0x17f5, 0x10, 0xec68, 0x2475, 0xc90d, 0x0, 0x0);
        gbc.writeMem(0x17f5, { 0xd4, 0x6c });
        gbc.writeMem(0xeaa7, { 0xd8 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x17f7, gbc.sp());
        EXPECT(0x6cd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeaa7));
        // D8 0317
        gbc.setState(0x836c, 0xf95c, 0x120, 0xd3c, 0x764, 0x1c3c, 0x0, 0x1);
        gbc.writeMem(0x836c, { 0xd8 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xf95c, gbc.sp());
        EXPECT(0x836d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x836c));
        // D8 0318
        gbc.setState(0x2d4a, 0x5ad1, 0xcad0, 0xb133, 0xa760, 0x4453, 0x1, 0x0);
        gbc.writeMem(0x2d4a, { 0xd8 });
        gbc.writeMem(0x5ad1, { 0x59, 0xbd });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x5ad3, gbc.sp());
        EXPECT(0xbd59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 031A
        gbc.setState(0x9875, 0xd08, 0xde90, 0xaf74, 0x76ed, 0xd360, 0x0, 0x1);
        gbc.writeMem(0xd08, { 0x3c, 0x5d });
        gbc.writeMem(0x9875, { 0xd8 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xd0a, gbc.sp());
        EXPECT(0x5d3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9875));
        // D8 031B
        gbc.setState(0x2bfa, 0x785, 0xf9b0, 0x3781, 0x77e1, 0xe816, 0x1, 0x0);
        gbc.writeMem(0x785, { 0xd5, 0xb3 });
        gbc.writeMem(0x2bfa, { 0xd8 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x787, gbc.sp());
        EXPECT(0xb3d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 031C
        gbc.setState(0xd1a9, 0x9cab, 0xb280, 0x68b9, 0x52c7, 0x3f72, 0x1, 0x0);
        gbc.writeMem(0xd1a9, { 0xd8 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x9cab, gbc.sp());
        EXPECT(0xd1aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd1a9));
        // D8 031D
        gbc.setState(0xb3a3, 0x9ea1, 0x1690, 0x2381, 0x31b8, 0xe067, 0x1, 0x0);
        gbc.writeMem(0x9ea1, { 0xcb, 0xf0 });
        gbc.writeMem(0xb3a3, { 0xd8 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x9ea3, gbc.sp());
        EXPECT(0xf0cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ea1));
        EXPECT(0xf0, gbc.readMem(0x9ea2));
        EXPECT(0xd8, gbc.readMem(0xb3a3));
        // D8 031E
        gbc.setState(0x50b1, 0x3e03, 0xfc60, 0xecd0, 0x1786, 0xe656, 0x0, 0x1);
        gbc.writeMem(0x50b1, { 0xd8 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x3e03, gbc.sp());
        EXPECT(0x50b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 031F
        gbc.setState(0x32c1, 0xef6, 0x4600, 0x48b5, 0x1a0f, 0xe4e2, 0x0, 0x0);
        gbc.writeMem(0x32c1, { 0xd8 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xef6, gbc.sp());
        EXPECT(0x32c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0320
        gbc.setState(0x459a, 0x38bf, 0x5300, 0x9415, 0xfe15, 0x50e1, 0x0, 0x0);
        gbc.writeMem(0x459a, { 0xd8 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x38bf, gbc.sp());
        EXPECT(0x459b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0321
        gbc.setState(0x7a4b, 0xfea4, 0xa5e0, 0xfac4, 0x929e, 0x31fb, 0x0, 0x0);
        gbc.writeMem(0x7a4b, { 0xd8 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xfea4, gbc.sp());
        EXPECT(0x7a4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0322
        gbc.setState(0x4efb, 0x95a0, 0x6610, 0x64ad, 0xfbd9, 0x9735, 0x1, 0x0);
        gbc.writeMem(0x4efb, { 0xd8 });
        gbc.writeMem(0x95a0, { 0x4f, 0xa0 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x95a2, gbc.sp());
        EXPECT(0xa04f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4f, gbc.readMem(0x95a0));
        EXPECT(0xa0, gbc.readMem(0x95a1));
        // D8 0324
        gbc.setState(0x4fc1, 0x72da, 0x6140, 0x8cc3, 0x9765, 0x838d, 0x1, 0x1);
        gbc.writeMem(0x4fc1, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x72da, gbc.sp());
        EXPECT(0x4fc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0326
        gbc.setState(0xdb3c, 0x3353, 0x8890, 0x4088, 0x2fb9, 0xd4d7, 0x0, 0x1);
        gbc.writeMem(0x3353, { 0x36, 0xbd });
        gbc.writeMem(0xdb3c, { 0xd8 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x3355, gbc.sp());
        EXPECT(0xbd36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdb3c));
        // D8 0327
        gbc.setState(0x4362, 0x6f5c, 0x5b90, 0x37f, 0xfabb, 0x3cc1, 0x0, 0x1);
        gbc.writeMem(0x4362, { 0xd8 });
        gbc.writeMem(0x6f5c, { 0x25, 0xbb });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x6f5e, gbc.sp());
        EXPECT(0xbb25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0328
        gbc.setState(0x59ca, 0x2405, 0xafe0, 0x4639, 0xf706, 0x3c0d, 0x0, 0x0);
        gbc.writeMem(0x59ca, { 0xd8 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x2405, gbc.sp());
        EXPECT(0x59cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0329
        gbc.setState(0x4b86, 0x8f0a, 0xc7b0, 0xe512, 0x3a00, 0xadcf, 0x0, 0x0);
        gbc.writeMem(0x4b86, { 0xd8 });
        gbc.writeMem(0x8f0a, { 0x69, 0xa8 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8f0c, gbc.sp());
        EXPECT(0xa869, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0x8f0a));
        EXPECT(0xa8, gbc.readMem(0x8f0b));
        // D8 032A
        gbc.setState(0x6622, 0x2cea, 0x34a0, 0xae79, 0xcc3e, 0xab61, 0x1, 0x0);
        gbc.writeMem(0x6622, { 0xd8 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x2cea, gbc.sp());
        EXPECT(0x6623, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 032B
        gbc.setState(0x8f92, 0x31b3, 0x5740, 0x9461, 0x2249, 0x4814, 0x0, 0x0);
        gbc.writeMem(0x8f92, { 0xd8 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x31b3, gbc.sp());
        EXPECT(0x8f93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8f92));
        // D8 032C
        gbc.setState(0xd80e, 0x1ed6, 0x75c0, 0xc216, 0xa1f1, 0x329a, 0x1, 0x0);
        gbc.writeMem(0xd80e, { 0xd8 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x1ed6, gbc.sp());
        EXPECT(0xd80f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd80e));
        // D8 032D
        gbc.setState(0x1538, 0x89da, 0x6150, 0xb8b8, 0x79c6, 0xa8c3, 0x0, 0x0);
        gbc.writeMem(0x1538, { 0xd8 });
        gbc.writeMem(0x89da, { 0x8d, 0xc7 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x89dc, gbc.sp());
        EXPECT(0xc78d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0x89da));
        EXPECT(0xc7, gbc.readMem(0x89db));
        // D8 032E
        gbc.setState(0x12fd, 0x4cfb, 0x9d20, 0xe996, 0xbfbd, 0xc3d0, 0x0, 0x0);
        gbc.writeMem(0x12fd, { 0xd8 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x4cfb, gbc.sp());
        EXPECT(0x12fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 032F
        gbc.setState(0xbcc2, 0xa18c, 0x6790, 0xb7c9, 0x4667, 0x764a, 0x0, 0x0);
        gbc.writeMem(0xa18c, { 0x68, 0xbb });
        gbc.writeMem(0xbcc2, { 0xd8 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa18e, gbc.sp());
        EXPECT(0xbb68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xa18c));
        EXPECT(0xbb, gbc.readMem(0xa18d));
        EXPECT(0xd8, gbc.readMem(0xbcc2));
        // D8 0330
        gbc.setState(0xa5ac, 0x7dc2, 0x6350, 0x6d1a, 0x76f3, 0xf83f, 0x1, 0x1);
        gbc.writeMem(0x7dc2, { 0x4e, 0x26 });
        gbc.writeMem(0xa5ac, { 0xd8 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x7dc4, gbc.sp());
        EXPECT(0x264e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa5ac));
        // D8 0331
        gbc.setState(0xa965, 0xcb42, 0x4cb0, 0xc117, 0x418e, 0xe15c, 0x1, 0x0);
        gbc.writeMem(0xa965, { 0xd8 });
        gbc.writeMem(0xcb42, { 0x86, 0xee });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xcb44, gbc.sp());
        EXPECT(0xee86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa965));
        EXPECT(0x86, gbc.readMem(0xcb42));
        EXPECT(0xee, gbc.readMem(0xcb43));
        // D8 0332
        gbc.setState(0x8bad, 0x91bc, 0xc8f0, 0xc985, 0x7dd6, 0x3134, 0x1, 0x0);
        gbc.writeMem(0x8bad, { 0xd8 });
        gbc.writeMem(0x91bc, { 0x9, 0x91 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x91be, gbc.sp());
        EXPECT(0x9109, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8bad));
        EXPECT(0x9, gbc.readMem(0x91bc));
        EXPECT(0x91, gbc.readMem(0x91bd));
        // D8 0334
        gbc.setState(0x688c, 0x6260, 0x52f0, 0xb95d, 0x13f8, 0xb0a7, 0x1, 0x0);
        gbc.writeMem(0x6260, { 0xdf, 0xda });
        gbc.writeMem(0x688c, { 0xd8 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x6262, gbc.sp());
        EXPECT(0xdadf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0335
        gbc.setState(0xdd84, 0xe329, 0x5c20, 0x758f, 0x99af, 0x58ba, 0x1, 0x1);
        gbc.writeMem(0xdd84, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xe329, gbc.sp());
        EXPECT(0xdd85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xdd84));
        // D8 0336
        gbc.setState(0x7e95, 0xb500, 0x1a30, 0xc1bd, 0xcbc3, 0x158b, 0x1, 0x1);
        gbc.writeMem(0x7e95, { 0xd8 });
        gbc.writeMem(0xb500, { 0x9, 0x43 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xb502, gbc.sp());
        EXPECT(0x4309, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0xb500));
        EXPECT(0x43, gbc.readMem(0xb501));
        // D8 0337
        gbc.setState(0x5578, 0xa710, 0xf9c0, 0x60e5, 0x7c96, 0x9eb2, 0x1, 0x1);
        gbc.writeMem(0x5578, { 0xd8 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xa710, gbc.sp());
        EXPECT(0x5579, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0338
        gbc.setState(0x867c, 0xb1d2, 0xe870, 0x5c72, 0x4656, 0x65f5, 0x0, 0x0);
        gbc.writeMem(0x867c, { 0xd8 });
        gbc.writeMem(0xb1d2, { 0x70, 0x56 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xb1d4, gbc.sp());
        EXPECT(0x5670, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x867c));
        EXPECT(0x70, gbc.readMem(0xb1d2));
        EXPECT(0x56, gbc.readMem(0xb1d3));
        // D8 0339
        gbc.setState(0x847b, 0x2027, 0x1780, 0x76a2, 0x51e9, 0x8b84, 0x0, 0x0);
        gbc.writeMem(0x847b, { 0xd8 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2027, gbc.sp());
        EXPECT(0x847c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x847b));
        // D8 033A
        gbc.setState(0x831, 0x12eb, 0x3890, 0xf06f, 0x748a, 0x4925, 0x1, 0x1);
        gbc.writeMem(0x831, { 0xd8 });
        gbc.writeMem(0x12eb, { 0x6e, 0x57 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x12ed, gbc.sp());
        EXPECT(0x576e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 033B
        gbc.setState(0x2a07, 0xad43, 0x4050, 0x4d5e, 0xa129, 0x512d, 0x0, 0x1);
        gbc.writeMem(0x2a07, { 0xd8 });
        gbc.writeMem(0xad43, { 0xf9, 0xb8 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xad45, gbc.sp());
        EXPECT(0xb8f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf9, gbc.readMem(0xad43));
        EXPECT(0xb8, gbc.readMem(0xad44));
        // D8 033C
        gbc.setState(0x56d6, 0x3f5a, 0xb890, 0x5ad5, 0x6fa7, 0xc839, 0x1, 0x1);
        gbc.writeMem(0x3f5a, { 0x39, 0xf9 });
        gbc.writeMem(0x56d6, { 0xd8 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x3f5c, gbc.sp());
        EXPECT(0xf939, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 033D
        gbc.setState(0x8d4f, 0x267b, 0x20f0, 0xed36, 0x1e1b, 0x99b0, 0x0, 0x1);
        gbc.writeMem(0x267b, { 0x2f, 0xb6 });
        gbc.writeMem(0x8d4f, { 0xd8 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x267d, gbc.sp());
        EXPECT(0xb62f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8d4f));
        // D8 033E
        gbc.setState(0x95de, 0x418c, 0x8680, 0xa4ee, 0x587b, 0xc058, 0x1, 0x1);
        gbc.writeMem(0x95de, { 0xd8 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x418c, gbc.sp());
        EXPECT(0x95df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x95de));
        // D8 0340
        gbc.setState(0x5aa0, 0xb4f5, 0xe190, 0x563f, 0x100, 0xeb75, 0x1, 0x0);
        gbc.writeMem(0x5aa0, { 0xd8 });
        gbc.writeMem(0xb4f5, { 0xb2, 0x51 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xb4f7, gbc.sp());
        EXPECT(0x51b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0xb4f5));
        EXPECT(0x51, gbc.readMem(0xb4f6));
        // D8 0341
        gbc.setState(0x1239, 0x9f3f, 0xae30, 0x7c74, 0x4baa, 0x3080, 0x1, 0x1);
        gbc.writeMem(0x1239, { 0xd8 });
        gbc.writeMem(0x9f3f, { 0x2b, 0xab });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9f41, gbc.sp());
        EXPECT(0xab2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2b, gbc.readMem(0x9f3f));
        EXPECT(0xab, gbc.readMem(0x9f40));
        // D8 0342
        gbc.setState(0xdfc8, 0x8784, 0xe490, 0xd859, 0xf707, 0x95f0, 0x1, 0x0);
        gbc.writeMem(0x8784, { 0x5, 0x42 });
        gbc.writeMem(0xdfc8, { 0xd8 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x8786, gbc.sp());
        EXPECT(0x4205, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x8784));
        EXPECT(0x42, gbc.readMem(0x8785));
        EXPECT(0xd8, gbc.readMem(0xdfc8));
        // D8 0343
        gbc.setState(0x4993, 0x6d11, 0xbe40, 0x1f2, 0xbbcc, 0xffaa, 0x0, 0x0);
        gbc.writeMem(0x4993, { 0xd8 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x6d11, gbc.sp());
        EXPECT(0x4994, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0344
        gbc.setState(0x221d, 0xe85e, 0xa4b0, 0x7f05, 0xbf6c, 0x3408, 0x0, 0x1);
        gbc.writeMem(0x221d, { 0xd8 });
        gbc.writeMem(0xe85e, { 0x59, 0xfd });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xe860, gbc.sp());
        EXPECT(0xfd59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0xe85e));
        EXPECT(0xfd, gbc.readMem(0xe85f));
        // D8 0346
        gbc.setState(0xde44, 0xc188, 0x1280, 0x630, 0x19e, 0xfcc5, 0x0, 0x1);
        gbc.writeMem(0xde44, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xc188, gbc.sp());
        EXPECT(0xde45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xde44));
        // D8 0347
        gbc.setState(0x9aa7, 0xc154, 0x9db0, 0xb8f8, 0xfa29, 0xcb9e, 0x1, 0x0);
        gbc.writeMem(0x9aa7, { 0xd8 });
        gbc.writeMem(0xc154, { 0xc2, 0x3f });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xc156, gbc.sp());
        EXPECT(0x3fc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9aa7));
        EXPECT(0xc2, gbc.readMem(0xc154));
        EXPECT(0x3f, gbc.readMem(0xc155));
        // D8 0348
        gbc.setState(0x79cb, 0x5ae7, 0x9a40, 0xdce0, 0xd419, 0x2ee, 0x0, 0x1);
        gbc.writeMem(0x79cb, { 0xd8 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x5ae7, gbc.sp());
        EXPECT(0x79cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0349
        gbc.setState(0x2ec9, 0x1800, 0xde60, 0x5ae7, 0xa70b, 0xd2c2, 0x1, 0x1);
        gbc.writeMem(0x2ec9, { 0xd8 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x1800, gbc.sp());
        EXPECT(0x2eca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 034A
        gbc.setState(0x398a, 0x8550, 0x3a10, 0xb054, 0xa2f9, 0x9bea, 0x0, 0x0);
        gbc.writeMem(0x398a, { 0xd8 });
        gbc.writeMem(0x8550, { 0x8d, 0xa6 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x8552, gbc.sp());
        EXPECT(0xa68d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0x8550));
        EXPECT(0xa6, gbc.readMem(0x8551));
        // D8 034B
        gbc.setState(0x3d7, 0x520, 0x7aa0, 0xd51c, 0x2236, 0x7924, 0x1, 0x0);
        gbc.writeMem(0x3d7, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x520, gbc.sp());
        EXPECT(0x3d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 034C
        gbc.setState(0x6c7a, 0x602f, 0xbbd0, 0x535c, 0xca73, 0x3870, 0x0, 0x1);
        gbc.writeMem(0x602f, { 0xc0, 0xed });
        gbc.writeMem(0x6c7a, { 0xd8 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x6031, gbc.sp());
        EXPECT(0xedc0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 034D
        gbc.setState(0xc9b3, 0xac25, 0xf130, 0x7071, 0xb0d6, 0xe20c, 0x1, 0x1);
        gbc.writeMem(0xac25, { 0xdf, 0xdc });
        gbc.writeMem(0xc9b3, { 0xd8 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xac27, gbc.sp());
        EXPECT(0xdcdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdf, gbc.readMem(0xac25));
        EXPECT(0xdc, gbc.readMem(0xac26));
        EXPECT(0xd8, gbc.readMem(0xc9b3));
        // D8 034E
        gbc.setState(0xd1fd, 0xc6d1, 0x42a0, 0xadc0, 0x8d44, 0xf27e, 0x0, 0x0);
        gbc.writeMem(0xd1fd, { 0xd8 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xc6d1, gbc.sp());
        EXPECT(0xd1fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd1fd));
        // D8 034F
        gbc.setState(0x5702, 0x1768, 0x8580, 0xd434, 0x6c0f, 0xd326, 0x1, 0x1);
        gbc.writeMem(0x5702, { 0xd8 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x1768, gbc.sp());
        EXPECT(0x5703, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0350
        gbc.setState(0x40d, 0xeadd, 0x9fe0, 0x5621, 0xf2e0, 0xbf86, 0x1, 0x1);
        gbc.writeMem(0x40d, { 0xd8 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xeadd, gbc.sp());
        EXPECT(0x40e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0351
        gbc.setState(0x9ec8, 0x7dcd, 0x4ef0, 0x2d2c, 0xbbfc, 0xf481, 0x1, 0x1);
        gbc.writeMem(0x7dcd, { 0x51, 0xce });
        gbc.writeMem(0x9ec8, { 0xd8 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x7dcf, gbc.sp());
        EXPECT(0xce51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ec8));
        // D8 0352
        gbc.setState(0x40a0, 0x9acc, 0xdfa0, 0x7c3e, 0xaad9, 0x94e8, 0x1, 0x0);
        gbc.writeMem(0x40a0, { 0xd8 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x9acc, gbc.sp());
        EXPECT(0x40a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0353
        gbc.setState(0xd4d8, 0x8b06, 0xc490, 0x9115, 0xaecc, 0xe5c5, 0x0, 0x0);
        gbc.writeMem(0x8b06, { 0x32, 0x9b });
        gbc.writeMem(0xd4d8, { 0xd8 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x8b08, gbc.sp());
        EXPECT(0x9b32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0x8b06));
        EXPECT(0x9b, gbc.readMem(0x8b07));
        EXPECT(0xd8, gbc.readMem(0xd4d8));
        // D8 0354
        gbc.setState(0x5bb7, 0xf4bb, 0x5f70, 0x69d7, 0x62c5, 0x9623, 0x1, 0x0);
        gbc.writeMem(0x5bb7, { 0xd8 });
        gbc.writeMem(0xf4bb, { 0x18, 0x74 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xf4bd, gbc.sp());
        EXPECT(0x7418, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0xf4bb));
        EXPECT(0x74, gbc.readMem(0xf4bc));
        // D8 0355
        gbc.setState(0x6f5f, 0xdb6, 0xaf10, 0x68d8, 0xdb66, 0xb2a8, 0x1, 0x1);
        gbc.writeMem(0xdb6, { 0xa2, 0x3a });
        gbc.writeMem(0x6f5f, { 0xd8 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xdb8, gbc.sp());
        EXPECT(0x3aa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0356
        gbc.setState(0xb0c7, 0x42d9, 0xfbb0, 0x4f8d, 0x3c66, 0x18b5, 0x0, 0x1);
        gbc.writeMem(0x42d9, { 0x95, 0x4a });
        gbc.writeMem(0xb0c7, { 0xd8 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x42db, gbc.sp());
        EXPECT(0x4a95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb0c7));
        // D8 0357
        gbc.setState(0xa7d6, 0xdcb1, 0xd910, 0xb0c, 0x62fe, 0x5c12, 0x0, 0x1);
        gbc.writeMem(0xa7d6, { 0xd8 });
        gbc.writeMem(0xdcb1, { 0xe8, 0x4f });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xdcb3, gbc.sp());
        EXPECT(0x4fe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa7d6));
        EXPECT(0xe8, gbc.readMem(0xdcb1));
        EXPECT(0x4f, gbc.readMem(0xdcb2));
        // D8 0358
        gbc.setState(0x410c, 0x5544, 0xa0d0, 0xfe16, 0xde3f, 0xc7c5, 0x1, 0x0);
        gbc.writeMem(0x410c, { 0xd8 });
        gbc.writeMem(0x5544, { 0x3f, 0x99 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x5546, gbc.sp());
        EXPECT(0x993f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0359
        gbc.setState(0xbcd6, 0xb36, 0x48b0, 0x358a, 0x8eb7, 0xea0f, 0x1, 0x0);
        gbc.writeMem(0xb36, { 0xe6, 0x93 });
        gbc.writeMem(0xbcd6, { 0xd8 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xb38, gbc.sp());
        EXPECT(0x93e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbcd6));
        // D8 035A
        gbc.setState(0xe92b, 0x4be3, 0x62c0, 0x5b56, 0xeca9, 0xe431, 0x1, 0x1);
        gbc.writeMem(0xe92b, { 0xd8 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x4be3, gbc.sp());
        EXPECT(0xe92c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe92b));
        // D8 035C
        gbc.setState(0x6ef9, 0xf800, 0x7580, 0x63c, 0x214f, 0xf92b, 0x0, 0x1);
        gbc.writeMem(0x6ef9, { 0xd8 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xf800, gbc.sp());
        EXPECT(0x6efa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 035D
        gbc.setState(0x5d30, 0x1581, 0xb5a0, 0x5d79, 0xab82, 0xfc07, 0x0, 0x0);
        gbc.writeMem(0x5d30, { 0xd8 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x1581, gbc.sp());
        EXPECT(0x5d31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 035E
        gbc.setState(0x5fb7, 0xfba6, 0xfc80, 0x2875, 0x52a1, 0xa376, 0x0, 0x0);
        gbc.writeMem(0x5fb7, { 0xd8 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xfba6, gbc.sp());
        EXPECT(0x5fb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 035F
        gbc.setState(0x65d0, 0x214f, 0x4cc0, 0xf63c, 0xeb1f, 0xf394, 0x0, 0x1);
        gbc.writeMem(0x65d0, { 0xd8 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x214f, gbc.sp());
        EXPECT(0x65d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0360
        gbc.setState(0x799a, 0x7f2c, 0x16b0, 0x59b0, 0xd5d2, 0xeafd, 0x0, 0x1);
        gbc.writeMem(0x799a, { 0xd8 });
        gbc.writeMem(0x7f2c, { 0x99, 0x36 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x7f2e, gbc.sp());
        EXPECT(0x3699, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0361
        gbc.setState(0x95d3, 0x3ed0, 0xf3f0, 0xa451, 0xee04, 0x2b1f, 0x0, 0x0);
        gbc.writeMem(0x3ed0, { 0xae, 0x78 });
        gbc.writeMem(0x95d3, { 0xd8 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x3ed2, gbc.sp());
        EXPECT(0x78ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x95d3));
        // D8 0362
        gbc.setState(0xc29a, 0x478e, 0xf0c0, 0x801f, 0x668e, 0x6048, 0x1, 0x1);
        gbc.writeMem(0xc29a, { 0xd8 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x478e, gbc.sp());
        EXPECT(0xc29b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc29a));
        // D8 0363
        gbc.setState(0x88cc, 0xec2c, 0x3370, 0xc87, 0x3653, 0xc24d, 0x1, 0x0);
        gbc.writeMem(0x88cc, { 0xd8 });
        gbc.writeMem(0xec2c, { 0xd0, 0x17 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xec2e, gbc.sp());
        EXPECT(0x17d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x88cc));
        EXPECT(0xd0, gbc.readMem(0xec2c));
        EXPECT(0x17, gbc.readMem(0xec2d));
        // D8 0364
        gbc.setState(0x8363, 0x44f, 0xc6e0, 0x39f7, 0x72d5, 0x70d, 0x0, 0x0);
        gbc.writeMem(0x8363, { 0xd8 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x44f, gbc.sp());
        EXPECT(0x8364, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8363));
        // D8 0365
        gbc.setState(0x76a6, 0xd54f, 0xcb70, 0x6559, 0xe3e, 0x3727, 0x1, 0x0);
        gbc.writeMem(0x76a6, { 0xd8 });
        gbc.writeMem(0xd54f, { 0xb8, 0x8a });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xd551, gbc.sp());
        EXPECT(0x8ab8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0xd54f));
        EXPECT(0x8a, gbc.readMem(0xd550));
        // D8 0366
        gbc.setState(0x14be, 0x81f, 0x330, 0xc624, 0xb50c, 0x3a04, 0x0, 0x1);
        gbc.writeMem(0x81f, { 0x7e, 0x9e });
        gbc.writeMem(0x14be, { 0xd8 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x821, gbc.sp());
        EXPECT(0x9e7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0367
        gbc.setState(0xabb4, 0xa18b, 0xc9c0, 0xe44c, 0x6a18, 0xe3b, 0x1, 0x0);
        gbc.writeMem(0xabb4, { 0xd8 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xa18b, gbc.sp());
        EXPECT(0xabb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xabb4));
        // D8 0369
        gbc.setState(0x554e, 0x8e7b, 0x1530, 0x68e4, 0xe93e, 0x68ca, 0x0, 0x0);
        gbc.writeMem(0x554e, { 0xd8 });
        gbc.writeMem(0x8e7b, { 0x94, 0xc6 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x8e7d, gbc.sp());
        EXPECT(0xc694, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x94, gbc.readMem(0x8e7b));
        EXPECT(0xc6, gbc.readMem(0x8e7c));
        // D8 036A
        gbc.setState(0x94d3, 0x3bb6, 0x4430, 0xc0e2, 0x6697, 0x5f9c, 0x1, 0x1);
        gbc.writeMem(0x3bb6, { 0xde, 0xd7 });
        gbc.writeMem(0x94d3, { 0xd8 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3bb8, gbc.sp());
        EXPECT(0xd7de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x94d3));
        // D8 036B
        gbc.setState(0x7d29, 0x35cf, 0x7a20, 0x531a, 0xffe1, 0xcaa3, 0x0, 0x1);
        gbc.writeMem(0x7d29, { 0xd8 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x35cf, gbc.sp());
        EXPECT(0x7d2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 036D
        gbc.setState(0x440b, 0x8918, 0x1dc0, 0x2f40, 0x84dd, 0x24cf, 0x0, 0x1);
        gbc.writeMem(0x440b, { 0xd8 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x8918, gbc.sp());
        EXPECT(0x440c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 036E
        gbc.setState(0xc6ee, 0xb077, 0x3460, 0x35c4, 0xca63, 0xf65e, 0x1, 0x0);
        gbc.writeMem(0xc6ee, { 0xd8 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xb077, gbc.sp());
        EXPECT(0xc6ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc6ee));
        // D8 036F
        gbc.setState(0x7baf, 0xc089, 0x7dc0, 0x88f7, 0x7e52, 0x55cf, 0x1, 0x0);
        gbc.writeMem(0x7baf, { 0xd8 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xc089, gbc.sp());
        EXPECT(0x7bb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0370
        gbc.setState(0x135f, 0x2a29, 0xfde0, 0xe250, 0x400, 0x2f14, 0x1, 0x0);
        gbc.writeMem(0x135f, { 0xd8 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x2a29, gbc.sp());
        EXPECT(0x1360, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0371
        gbc.setState(0xe9b2, 0x2d05, 0x78e0, 0xca34, 0xb18e, 0xb782, 0x0, 0x0);
        gbc.writeMem(0xe9b2, { 0xd8 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x2d05, gbc.sp());
        EXPECT(0xe9b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe9b2));
        // D8 0372
        gbc.setState(0x3de1, 0xa490, 0x78e0, 0x6611, 0xbb94, 0xf258, 0x1, 0x0);
        gbc.writeMem(0x3de1, { 0xd8 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xa490, gbc.sp());
        EXPECT(0x3de2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0373
        gbc.setState(0xb644, 0x4980, 0x3f60, 0xac52, 0xb3e4, 0xfdb2, 0x0, 0x1);
        gbc.writeMem(0xb644, { 0xd8 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x4980, gbc.sp());
        EXPECT(0xb645, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb644));
        // D8 0374
        gbc.setState(0x2d76, 0x37f2, 0x5310, 0x8914, 0xd201, 0x9b6e, 0x1, 0x0);
        gbc.writeMem(0x2d76, { 0xd8 });
        gbc.writeMem(0x37f2, { 0xe0, 0x65 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x37f4, gbc.sp());
        EXPECT(0x65e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0376
        gbc.setState(0xd04, 0xc881, 0x53b0, 0x1726, 0x81e8, 0xadf0, 0x0, 0x0);
        gbc.writeMem(0xd04, { 0xd8 });
        gbc.writeMem(0xc881, { 0x1f, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc883, gbc.sp());
        EXPECT(0x981f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0xc881));
        EXPECT(0x98, gbc.readMem(0xc882));
        // D8 0377
        gbc.setState(0x2e0a, 0x70eb, 0x7bb0, 0x150c, 0x593a, 0x834d, 0x1, 0x0);
        gbc.writeMem(0x2e0a, { 0xd8 });
        gbc.writeMem(0x70eb, { 0x64, 0x5d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x70ed, gbc.sp());
        EXPECT(0x5d64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0378
        gbc.setState(0x6eae, 0xbc52, 0x9010, 0x8636, 0x4971, 0xe057, 0x1, 0x1);
        gbc.writeMem(0x6eae, { 0xd8 });
        gbc.writeMem(0xbc52, { 0x11, 0x33 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xbc54, gbc.sp());
        EXPECT(0x3311, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xbc52));
        EXPECT(0x33, gbc.readMem(0xbc53));
        // D8 0379
        gbc.setState(0xd10, 0x8bb1, 0x4e30, 0xa2f1, 0xecc0, 0x5f7a, 0x1, 0x0);
        gbc.writeMem(0xd10, { 0xd8 });
        gbc.writeMem(0x8bb1, { 0x5e, 0x57 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x8bb3, gbc.sp());
        EXPECT(0x575e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0x8bb1));
        EXPECT(0x57, gbc.readMem(0x8bb2));
        // D8 037A
        gbc.setState(0x7fa4, 0xb9e9, 0xea60, 0xebb1, 0x1bca, 0x301, 0x0, 0x1);
        gbc.writeMem(0x7fa4, { 0xd8 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xb9e9, gbc.sp());
        EXPECT(0x7fa5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 037B
        gbc.setState(0x3ef6, 0x7c19, 0xf280, 0x9261, 0x2172, 0x8d22, 0x0, 0x1);
        gbc.writeMem(0x3ef6, { 0xd8 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x7c19, gbc.sp());
        EXPECT(0x3ef7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 037C
        gbc.setState(0x304a, 0x14b1, 0xbad0, 0x9abc, 0xb422, 0xbc5b, 0x1, 0x0);
        gbc.writeMem(0x14b1, { 0x57, 0xec });
        gbc.writeMem(0x304a, { 0xd8 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x14b3, gbc.sp());
        EXPECT(0xec57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 037D
        gbc.setState(0x6361, 0x9dc7, 0x2850, 0x30b4, 0xc31b, 0x38d6, 0x1, 0x1);
        gbc.writeMem(0x6361, { 0xd8 });
        gbc.writeMem(0x9dc7, { 0x5e, 0xaa });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x9dc9, gbc.sp());
        EXPECT(0xaa5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0x9dc7));
        EXPECT(0xaa, gbc.readMem(0x9dc8));
        // D8 037E
        gbc.setState(0x1547, 0xa228, 0x82b0, 0x2ba7, 0x2b1e, 0x5fab, 0x0, 0x1);
        gbc.writeMem(0x1547, { 0xd8 });
        gbc.writeMem(0xa228, { 0x4e, 0xac });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xa22a, gbc.sp());
        EXPECT(0xac4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0xa228));
        EXPECT(0xac, gbc.readMem(0xa229));
        // D8 037F
        gbc.setState(0x36cc, 0xe51, 0x6af0, 0xcdd5, 0x4491, 0x4f6f, 0x1, 0x0);
        gbc.writeMem(0xe51, { 0x11, 0x2 });
        gbc.writeMem(0x36cc, { 0xd8 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xe53, gbc.sp());
        EXPECT(0x211, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0380
        gbc.setState(0x9ee9, 0xcec3, 0x6120, 0x2a9c, 0x8441, 0x4685, 0x1, 0x0);
        gbc.writeMem(0x9ee9, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xcec3, gbc.sp());
        EXPECT(0x9eea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9ee9));
        // D8 0381
        gbc.setState(0xe2c7, 0xc55b, 0xdd70, 0x18f6, 0x4eae, 0x1e07, 0x1, 0x1);
        gbc.writeMem(0xc55b, { 0x29, 0x28 });
        gbc.writeMem(0xe2c7, { 0xd8 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xc55d, gbc.sp());
        EXPECT(0x2829, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xc55b));
        EXPECT(0x28, gbc.readMem(0xc55c));
        EXPECT(0xd8, gbc.readMem(0xe2c7));
        // D8 0382
        gbc.setState(0xbe97, 0xcca0, 0xa970, 0x3651, 0x7e9c, 0x94f5, 0x1, 0x0);
        gbc.writeMem(0xbe97, { 0xd8 });
        gbc.writeMem(0xcca0, { 0x56, 0xd0 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xcca2, gbc.sp());
        EXPECT(0xd056, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbe97));
        EXPECT(0x56, gbc.readMem(0xcca0));
        EXPECT(0xd0, gbc.readMem(0xcca1));
        // D8 0383
        gbc.setState(0xcdbc, 0x8e8b, 0xec70, 0x6fc3, 0xc23e, 0xf72e, 0x1, 0x1);
        gbc.writeMem(0x8e8b, { 0xf, 0x24 });
        gbc.writeMem(0xcdbc, { 0xd8 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x8e8d, gbc.sp());
        EXPECT(0x240f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x8e8b));
        EXPECT(0x24, gbc.readMem(0x8e8c));
        EXPECT(0xd8, gbc.readMem(0xcdbc));
        // D8 0384
        gbc.setState(0x76, 0x1f8e, 0x1b20, 0x5fd9, 0xdc69, 0xfb43, 0x1, 0x1);
        gbc.writeMem(0x76, { 0xd8 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x1f8e, gbc.sp());
        EXPECT(0x77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0385
        gbc.setState(0x8a1b, 0x3335, 0x4cd0, 0x7d6d, 0xc9d6, 0xcb89, 0x1, 0x1);
        gbc.writeMem(0x3335, { 0xbd, 0x85 });
        gbc.writeMem(0x8a1b, { 0xd8 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x3337, gbc.sp());
        EXPECT(0x85bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8a1b));
        // D8 0386
        gbc.setState(0x17eb, 0x65b3, 0x190, 0x82a1, 0x4ebc, 0x3434, 0x0, 0x1);
        gbc.writeMem(0x17eb, { 0xd8 });
        gbc.writeMem(0x65b3, { 0xf5, 0x7b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x65b5, gbc.sp());
        EXPECT(0x7bf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0387
        gbc.setState(0x198f, 0x10b9, 0x5c20, 0xa406, 0x5f5b, 0x4047, 0x1, 0x1);
        gbc.writeMem(0x198f, { 0xd8 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x10b9, gbc.sp());
        EXPECT(0x1990, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0388
        gbc.setState(0xc797, 0x58da, 0x57c0, 0x9380, 0x461e, 0x7a19, 0x0, 0x0);
        gbc.writeMem(0xc797, { 0xd8 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x58da, gbc.sp());
        EXPECT(0xc798, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc797));
        // D8 0389
        gbc.setState(0x482b, 0x41a5, 0x9c30, 0x99cd, 0x59c9, 0xb4cb, 0x1, 0x1);
        gbc.writeMem(0x41a5, { 0xc3, 0xa6 });
        gbc.writeMem(0x482b, { 0xd8 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x41a7, gbc.sp());
        EXPECT(0xa6c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 038A
        gbc.setState(0x19f8, 0xd150, 0xadd0, 0x8fd4, 0x7a6e, 0xd271, 0x0, 0x1);
        gbc.writeMem(0x19f8, { 0xd8 });
        gbc.writeMem(0xd150, { 0xee, 0x6b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xd152, gbc.sp());
        EXPECT(0x6bee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xee, gbc.readMem(0xd150));
        EXPECT(0x6b, gbc.readMem(0xd151));
        // D8 038B
        gbc.setState(0x26e4, 0x4294, 0x93f0, 0xd004, 0x8023, 0xd11a, 0x1, 0x0);
        gbc.writeMem(0x26e4, { 0xd8 });
        gbc.writeMem(0x4294, { 0x4e, 0x41 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x4296, gbc.sp());
        EXPECT(0x414e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 038C
        gbc.setState(0x7244, 0x4746, 0xcd20, 0x48f7, 0x35a7, 0xbd1, 0x0, 0x0);
        gbc.writeMem(0x7244, { 0xd8 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x4746, gbc.sp());
        EXPECT(0x7245, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 038D
        gbc.setState(0x14e4, 0x7b8f, 0xc2d0, 0x6c5d, 0x7ff7, 0xebc1, 0x1, 0x1);
        gbc.writeMem(0x14e4, { 0xd8 });
        gbc.writeMem(0x7b8f, { 0x2a, 0x67 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x7b91, gbc.sp());
        EXPECT(0x672a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 038E
        gbc.setState(0x59e0, 0x12f2, 0x45a0, 0x445, 0xb435, 0x4fd, 0x1, 0x1);
        gbc.writeMem(0x59e0, { 0xd8 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x12f2, gbc.sp());
        EXPECT(0x59e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 038F
        gbc.setState(0xc2cf, 0x2ba9, 0xf230, 0xf502, 0xd56c, 0x9cd2, 0x1, 0x0);
        gbc.writeMem(0x2ba9, { 0x52, 0x2a });
        gbc.writeMem(0xc2cf, { 0xd8 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x2bab, gbc.sp());
        EXPECT(0x2a52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc2cf));
        // D8 0390
        gbc.setState(0x5cce, 0x1c73, 0xd240, 0xe6c5, 0xb2bd, 0xc858, 0x0, 0x0);
        gbc.writeMem(0x5cce, { 0xd8 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x1c73, gbc.sp());
        EXPECT(0x5ccf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0391
        gbc.setState(0x1576, 0xca97, 0x94e0, 0x6ffe, 0xe258, 0x7db5, 0x0, 0x0);
        gbc.writeMem(0x1576, { 0xd8 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xca97, gbc.sp());
        EXPECT(0x1577, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0392
        gbc.setState(0x8069, 0x5e92, 0x5e0, 0x6c97, 0x9827, 0x1b31, 0x0, 0x0);
        gbc.writeMem(0x8069, { 0xd8 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x5e92, gbc.sp());
        EXPECT(0x806a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8069));
        // D8 0393
        gbc.setState(0x2d3, 0xce69, 0xddb0, 0x8dff, 0x223a, 0xea0c, 0x1, 0x1);
        gbc.writeMem(0x2d3, { 0xd8 });
        gbc.writeMem(0xce69, { 0xdb, 0x4 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xce6b, gbc.sp());
        EXPECT(0x4db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdb, gbc.readMem(0xce69));
        EXPECT(0x4, gbc.readMem(0xce6a));
        // D8 0394
        gbc.setState(0xe1c, 0xe638, 0x37a0, 0xd7f4, 0xdff8, 0xad0e, 0x1, 0x0);
        gbc.writeMem(0xe1c, { 0xd8 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xe638, gbc.sp());
        EXPECT(0xe1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0395
        gbc.setState(0x110a, 0x3398, 0x3180, 0x49eb, 0xe083, 0xa1f9, 0x0, 0x1);
        gbc.writeMem(0x110a, { 0xd8 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x3398, gbc.sp());
        EXPECT(0x110b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 0396
        gbc.setState(0x34bb, 0x1fce, 0xe350, 0xff2c, 0x7dc7, 0x996, 0x1, 0x0);
        gbc.writeMem(0x1fce, { 0xa4, 0xd1 });
        gbc.writeMem(0x34bb, { 0xd8 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x1fd0, gbc.sp());
        EXPECT(0xd1a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 0397
        gbc.setState(0xa20e, 0x6d47, 0x47e0, 0x879f, 0x5f01, 0x2eac, 0x0, 0x1);
        gbc.writeMem(0xa20e, { 0xd8 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x6d47, gbc.sp());
        EXPECT(0xa20f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa20e));
        // D8 0398
        gbc.setState(0xfd5, 0x84cb, 0x3670, 0x8c33, 0x9e2b, 0xfc99, 0x1, 0x1);
        gbc.writeMem(0xfd5, { 0xd8 });
        gbc.writeMem(0x84cb, { 0x35, 0xc5 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x84cd, gbc.sp());
        EXPECT(0xc535, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x84cb));
        EXPECT(0xc5, gbc.readMem(0x84cc));
        // D8 039A
        gbc.setState(0x97b7, 0xbc90, 0x7c20, 0xeeb, 0xfa50, 0xbae7, 0x1, 0x1);
        gbc.writeMem(0x97b7, { 0xd8 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xbc90, gbc.sp());
        EXPECT(0x97b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x97b7));
        // D8 039B
        gbc.setState(0x926f, 0x79c8, 0x9a0, 0x8ab5, 0xff0b, 0x5702, 0x0, 0x0);
        gbc.writeMem(0x926f, { 0xd8 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x79c8, gbc.sp());
        EXPECT(0x9270, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x926f));
        // D8 039C
        gbc.setState(0xc341, 0x2d2b, 0xaa80, 0xf004, 0x3748, 0x8e5e, 0x0, 0x1);
        gbc.writeMem(0xc341, { 0xd8 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x2d2b, gbc.sp());
        EXPECT(0xc342, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc341));
        // D8 039D
        gbc.setState(0xd4a, 0x9a52, 0xd420, 0xae53, 0xc744, 0xcd8f, 0x1, 0x1);
        gbc.writeMem(0xd4a, { 0xd8 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x9a52, gbc.sp());
        EXPECT(0xd4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 039E
        gbc.setState(0x791, 0xa95e, 0x5520, 0xedfb, 0x61df, 0xed73, 0x0, 0x1);
        gbc.writeMem(0x791, { 0xd8 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xa95e, gbc.sp());
        EXPECT(0x792, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03A0
        gbc.setState(0xb5a7, 0x6e1d, 0xc1b0, 0xa2d6, 0x96df, 0x7761, 0x0, 0x0);
        gbc.writeMem(0x6e1d, { 0x7a, 0xa });
        gbc.writeMem(0xb5a7, { 0xd8 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x6e1f, gbc.sp());
        EXPECT(0xa7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xb5a7));
        // D8 03A1
        gbc.setState(0x39de, 0x9141, 0x33d0, 0x6253, 0x9307, 0x7580, 0x1, 0x1);
        gbc.writeMem(0x39de, { 0xd8 });
        gbc.writeMem(0x9141, { 0xf6, 0xc3 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x9143, gbc.sp());
        EXPECT(0xc3f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf6, gbc.readMem(0x9141));
        EXPECT(0xc3, gbc.readMem(0x9142));
        // D8 03A2
        gbc.setState(0xa82a, 0x5a41, 0x7cc0, 0x6ab1, 0x118, 0x4e87, 0x1, 0x0);
        gbc.writeMem(0xa82a, { 0xd8 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x5a41, gbc.sp());
        EXPECT(0xa82b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa82a));
        // D8 03A3
        gbc.setState(0x9e61, 0x19d5, 0xf8e0, 0xfc33, 0x89d, 0xeac9, 0x0, 0x0);
        gbc.writeMem(0x9e61, { 0xd8 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x19d5, gbc.sp());
        EXPECT(0x9e62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9e61));
        // D8 03A4
        gbc.setState(0xcfdc, 0xa9cd, 0x55d0, 0x3205, 0xfda6, 0x9719, 0x1, 0x1);
        gbc.writeMem(0xa9cd, { 0x15, 0xa4 });
        gbc.writeMem(0xcfdc, { 0xd8 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xa9cf, gbc.sp());
        EXPECT(0xa415, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x15, gbc.readMem(0xa9cd));
        EXPECT(0xa4, gbc.readMem(0xa9ce));
        EXPECT(0xd8, gbc.readMem(0xcfdc));
        // D8 03A5
        gbc.setState(0x4e42, 0x13b, 0x7be0, 0x314a, 0xa3af, 0x85c7, 0x1, 0x1);
        gbc.writeMem(0x4e42, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x13b, gbc.sp());
        EXPECT(0x4e43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03A6
        gbc.setState(0x2605, 0xf29e, 0x1270, 0x623e, 0xfaba, 0xab88, 0x1, 0x1);
        gbc.writeMem(0x2605, { 0xd8 });
        gbc.writeMem(0xf29e, { 0x77, 0x5c });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf2a0, gbc.sp());
        EXPECT(0x5c77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xf29e));
        EXPECT(0x5c, gbc.readMem(0xf29f));
        // D8 03A7
        gbc.setState(0xc5e7, 0xcec4, 0x4670, 0xd1c3, 0xea89, 0x9bb3, 0x1, 0x1);
        gbc.writeMem(0xc5e7, { 0xd8 });
        gbc.writeMem(0xcec4, { 0x46, 0xa4 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xcec6, gbc.sp());
        EXPECT(0xa446, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc5e7));
        EXPECT(0x46, gbc.readMem(0xcec4));
        EXPECT(0xa4, gbc.readMem(0xcec5));
        // D8 03A8
        gbc.setState(0x9147, 0x5900, 0xf700, 0xfd5c, 0x6f00, 0x2e90, 0x1, 0x0);
        gbc.writeMem(0x9147, { 0xd8 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x5900, gbc.sp());
        EXPECT(0x9148, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x9147));
        // D8 03A9
        gbc.setState(0xd4ce, 0x8789, 0x4010, 0x3d5d, 0xba1a, 0xf282, 0x1, 0x0);
        gbc.writeMem(0x8789, { 0xce, 0xcd });
        gbc.writeMem(0xd4ce, { 0xd8 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x878b, gbc.sp());
        EXPECT(0xcdce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0x8789));
        EXPECT(0xcd, gbc.readMem(0x878a));
        EXPECT(0xd8, gbc.readMem(0xd4ce));
        // D8 03AA
        gbc.setState(0xd7e7, 0xf4a7, 0x2560, 0x2d72, 0xd86c, 0x1429, 0x0, 0x1);
        gbc.writeMem(0xd7e7, { 0xd8 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xf4a7, gbc.sp());
        EXPECT(0xd7e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd7e7));
        // D8 03AB
        gbc.setState(0x706f, 0x38b9, 0x8360, 0xe19b, 0xa888, 0xf5a7, 0x1, 0x0);
        gbc.writeMem(0x706f, { 0xd8 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x38b9, gbc.sp());
        EXPECT(0x7070, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03AC
        gbc.setState(0xd65e, 0x7def, 0x85a0, 0x659a, 0xbac0, 0x3929, 0x1, 0x0);
        gbc.writeMem(0xd65e, { 0xd8 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x7def, gbc.sp());
        EXPECT(0xd65f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd65e));
        // D8 03AD
        gbc.setState(0x70cd, 0x1fac, 0x9b10, 0xbec7, 0x280, 0x8934, 0x1, 0x1);
        gbc.writeMem(0x1fac, { 0xb5, 0x64 });
        gbc.writeMem(0x70cd, { 0xd8 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x1fae, gbc.sp());
        EXPECT(0x64b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03AE
        gbc.setState(0x1025, 0x82e7, 0x3070, 0x5b8b, 0xc5e7, 0xd3c6, 0x0, 0x0);
        gbc.writeMem(0x1025, { 0xd8 });
        gbc.writeMem(0x82e7, { 0x39, 0x74 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x82e9, gbc.sp());
        EXPECT(0x7439, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0x82e7));
        EXPECT(0x74, gbc.readMem(0x82e8));
        // D8 03AF
        gbc.setState(0x3c35, 0x4036, 0xe5c0, 0x8a09, 0xb758, 0xfa7a, 0x0, 0x0);
        gbc.writeMem(0x3c35, { 0xd8 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x4036, gbc.sp());
        EXPECT(0x3c36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03B0
        gbc.setState(0x947f, 0xb4f3, 0x8f00, 0x82c, 0xa282, 0x2eb8, 0x0, 0x1);
        gbc.writeMem(0x947f, { 0xd8 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xb4f3, gbc.sp());
        EXPECT(0x9480, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x947f));
        // D8 03B1
        gbc.setState(0xa540, 0x7f26, 0x5280, 0x31ed, 0xa1e, 0x471d, 0x1, 0x0);
        gbc.writeMem(0xa540, { 0xd8 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x7f26, gbc.sp());
        EXPECT(0xa541, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa540));
        // D8 03B2
        gbc.setState(0x365, 0xf456, 0xe200, 0xeb9a, 0xde99, 0x471f, 0x1, 0x0);
        gbc.writeMem(0x365, { 0xd8 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xf456, gbc.sp());
        EXPECT(0x366, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03B3
        gbc.setState(0x6bf1, 0x9b5b, 0x6530, 0x7d0a, 0xcda5, 0x4692, 0x0, 0x1);
        gbc.writeMem(0x6bf1, { 0xd8 });
        gbc.writeMem(0x9b5b, { 0xc1, 0xd8 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9b5d, gbc.sp());
        EXPECT(0xd8c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0x9b5b));
        EXPECT(0xd8, gbc.readMem(0x9b5c));
        // D8 03B4
        gbc.setState(0xc48f, 0xac, 0x7100, 0xa120, 0x726b, 0x9384, 0x0, 0x1);
        gbc.writeMem(0xc48f, { 0xd8 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xac, gbc.sp());
        EXPECT(0xc490, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc48f));
        // D8 03B5
        gbc.setState(0xa6e3, 0x5e41, 0x5b80, 0x69cb, 0x22d5, 0xc085, 0x1, 0x0);
        gbc.writeMem(0xa6e3, { 0xd8 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5e41, gbc.sp());
        EXPECT(0xa6e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa6e3));
        // D8 03B6
        gbc.setState(0x6cc5, 0x535f, 0xc590, 0x8cc3, 0xccc3, 0x2e4b, 0x0, 0x1);
        gbc.writeMem(0x535f, { 0x5b, 0x85 });
        gbc.writeMem(0x6cc5, { 0xd8 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x5361, gbc.sp());
        EXPECT(0x855b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03B7
        gbc.setState(0x294b, 0x1029, 0x71e0, 0x4c59, 0xde17, 0x4ae0, 0x1, 0x1);
        gbc.writeMem(0x294b, { 0xd8 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x1029, gbc.sp());
        EXPECT(0x294c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03B8
        gbc.setState(0x5076, 0xc6fe, 0x2280, 0xbe10, 0x555b, 0x300c, 0x1, 0x0);
        gbc.writeMem(0x5076, { 0xd8 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xc6fe, gbc.sp());
        EXPECT(0x5077, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03B9
        gbc.setState(0xa224, 0xf79c, 0xcd00, 0x9268, 0x60b6, 0xfddb, 0x1, 0x0);
        gbc.writeMem(0xa224, { 0xd8 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xf79c, gbc.sp());
        EXPECT(0xa225, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa224));
        // D8 03BA
        gbc.setState(0x27ea, 0x72e3, 0x2610, 0xa5de, 0x7aaf, 0xcf12, 0x1, 0x0);
        gbc.writeMem(0x27ea, { 0xd8 });
        gbc.writeMem(0x72e3, { 0x25, 0x5 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x72e5, gbc.sp());
        EXPECT(0x525, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03BB
        gbc.setState(0x292f, 0xafbd, 0xf7c0, 0x645c, 0x9f6a, 0xbd24, 0x1, 0x0);
        gbc.writeMem(0x292f, { 0xd8 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xafbd, gbc.sp());
        EXPECT(0x2930, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03BC
        gbc.setState(0x8a2e, 0xd233, 0xde20, 0x2a61, 0x8e72, 0x2efd, 0x0, 0x1);
        gbc.writeMem(0x8a2e, { 0xd8 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xd233, gbc.sp());
        EXPECT(0x8a2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8a2e));
        // D8 03BD
        gbc.setState(0x6ac1, 0x8151, 0x5120, 0x9b6e, 0x3e72, 0x5d6c, 0x1, 0x1);
        gbc.writeMem(0x6ac1, { 0xd8 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x8151, gbc.sp());
        EXPECT(0x6ac2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03BE
        gbc.setState(0x3b29, 0xcb55, 0x4fd0, 0xaeb8, 0xf17b, 0xa035, 0x0, 0x0);
        gbc.writeMem(0x3b29, { 0xd8 });
        gbc.writeMem(0xcb55, { 0x7b, 0x32 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xcb57, gbc.sp());
        EXPECT(0x327b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7b, gbc.readMem(0xcb55));
        EXPECT(0x32, gbc.readMem(0xcb56));
        // D8 03BF
        gbc.setState(0xbddd, 0x61d5, 0xfbc0, 0x1767, 0x99fb, 0xecb7, 0x1, 0x0);
        gbc.writeMem(0xbddd, { 0xd8 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x61d5, gbc.sp());
        EXPECT(0xbdde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbddd));
        // D8 03C1
        gbc.setState(0xd9ce, 0x246e, 0x4700, 0xa155, 0xd276, 0x5b4f, 0x0, 0x1);
        gbc.writeMem(0xd9ce, { 0xd8 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x246e, gbc.sp());
        EXPECT(0xd9cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd9ce));
        // D8 03C2
        gbc.setState(0x732e, 0x3730, 0xe520, 0x4e36, 0xf13a, 0x59ce, 0x0, 0x1);
        gbc.writeMem(0x732e, { 0xd8 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x3730, gbc.sp());
        EXPECT(0x732f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03C4
        gbc.setState(0x585a, 0xa3f7, 0x5830, 0x4597, 0x69bb, 0x3f9f, 0x1, 0x1);
        gbc.writeMem(0x585a, { 0xd8 });
        gbc.writeMem(0xa3f7, { 0xea, 0x3b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xa3f9, gbc.sp());
        EXPECT(0x3bea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xea, gbc.readMem(0xa3f7));
        EXPECT(0x3b, gbc.readMem(0xa3f8));
        // D8 03C5
        gbc.setState(0x5bab, 0x5a90, 0x6970, 0xb1, 0xe7f6, 0x995f, 0x0, 0x1);
        gbc.writeMem(0x5a90, { 0xfb, 0x90 });
        gbc.writeMem(0x5bab, { 0xd8 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x5a92, gbc.sp());
        EXPECT(0x90fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03C6
        gbc.setState(0xa692, 0xf851, 0x4ac0, 0x575d, 0x312e, 0x3b49, 0x1, 0x0);
        gbc.writeMem(0xa692, { 0xd8 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf851, gbc.sp());
        EXPECT(0xa693, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xa692));
        // D8 03C7
        gbc.setState(0x76e9, 0x2a49, 0xaff0, 0xfd39, 0xb8f0, 0x2b79, 0x0, 0x1);
        gbc.writeMem(0x2a49, { 0xd6, 0xda });
        gbc.writeMem(0x76e9, { 0xd8 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x2a4b, gbc.sp());
        EXPECT(0xdad6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03C8
        gbc.setState(0x2b31, 0x1ab8, 0x7bf0, 0xd3c, 0xd629, 0x51f4, 0x1, 0x1);
        gbc.writeMem(0x1ab8, { 0x18, 0x32 });
        gbc.writeMem(0x2b31, { 0xd8 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x1aba, gbc.sp());
        EXPECT(0x3218, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03CA
        gbc.setState(0x761c, 0x8c0c, 0x1200, 0xb998, 0x70ec, 0x16db, 0x1, 0x1);
        gbc.writeMem(0x761c, { 0xd8 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x8c0c, gbc.sp());
        EXPECT(0x761d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03CB
        gbc.setState(0x3d55, 0x45b0, 0xc740, 0xd2ae, 0xcd74, 0x2f31, 0x0, 0x1);
        gbc.writeMem(0x3d55, { 0xd8 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x45b0, gbc.sp());
        EXPECT(0x3d56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03CC
        gbc.setState(0xc8c4, 0xce6d, 0xe550, 0x1748, 0x30a8, 0x89f9, 0x0, 0x1);
        gbc.writeMem(0xc8c4, { 0xd8 });
        gbc.writeMem(0xce6d, { 0x7f, 0x66 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xce6f, gbc.sp());
        EXPECT(0x667f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc8c4));
        EXPECT(0x7f, gbc.readMem(0xce6d));
        EXPECT(0x66, gbc.readMem(0xce6e));
        // D8 03CD
        gbc.setState(0xb3df, 0x84da, 0xf490, 0x413f, 0xdc18, 0x3504, 0x1, 0x0);
        gbc.writeMem(0x84da, { 0x7c, 0x9 });
        gbc.writeMem(0xb3df, { 0xd8 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x84dc, gbc.sp());
        EXPECT(0x97c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0x84da));
        EXPECT(0x9, gbc.readMem(0x84db));
        EXPECT(0xd8, gbc.readMem(0xb3df));
        // D8 03CE
        gbc.setState(0x2f0f, 0xbef8, 0xd9f0, 0x1b7c, 0xc774, 0x822b, 0x1, 0x1);
        gbc.writeMem(0x2f0f, { 0xd8 });
        gbc.writeMem(0xbef8, { 0x58, 0xfe });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xbefa, gbc.sp());
        EXPECT(0xfe58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xbef8));
        EXPECT(0xfe, gbc.readMem(0xbef9));
        // D8 03CF
        gbc.setState(0x5407, 0x2d78, 0x9640, 0xb5f5, 0x39be, 0x3084, 0x1, 0x0);
        gbc.writeMem(0x5407, { 0xd8 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2d78, gbc.sp());
        EXPECT(0x5408, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03D0
        gbc.setState(0xd25e, 0x158a, 0x79a0, 0xe0ec, 0xcb2e, 0x9752, 0x0, 0x1);
        gbc.writeMem(0xd25e, { 0xd8 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x158a, gbc.sp());
        EXPECT(0xd25f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd25e));
        // D8 03D2
        gbc.setState(0x8332, 0x95c5, 0x3e10, 0x22c1, 0xd583, 0xfe70, 0x0, 0x1);
        gbc.writeMem(0x8332, { 0xd8 });
        gbc.writeMem(0x95c5, { 0x96, 0xcd });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x95c7, gbc.sp());
        EXPECT(0xcd96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8332));
        EXPECT(0x96, gbc.readMem(0x95c5));
        EXPECT(0xcd, gbc.readMem(0x95c6));
        // D8 03D3
        gbc.setState(0x8367, 0x4c95, 0x7750, 0x1b56, 0xb2e1, 0xcc93, 0x1, 0x0);
        gbc.writeMem(0x4c95, { 0xe1, 0xd3 });
        gbc.writeMem(0x8367, { 0xd8 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x4c97, gbc.sp());
        EXPECT(0xd3e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8367));
        // D8 03D4
        gbc.setState(0xe370, 0xf684, 0x8ce0, 0xced6, 0x7e00, 0xa1e6, 0x1, 0x0);
        gbc.writeMem(0xe370, { 0xd8 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xf684, gbc.sp());
        EXPECT(0xe371, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe370));
        // D8 03D5
        gbc.setState(0x1bf5, 0x6a7c, 0x3530, 0x121c, 0x8f7b, 0x58f5, 0x0, 0x0);
        gbc.writeMem(0x1bf5, { 0xd8 });
        gbc.writeMem(0x6a7c, { 0x34, 0xaa });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x6a7e, gbc.sp());
        EXPECT(0xaa34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03D6
        gbc.setState(0x52a1, 0x4101, 0x44f0, 0x7106, 0xab2f, 0xf118, 0x1, 0x1);
        gbc.writeMem(0x4101, { 0xa7, 0xdb });
        gbc.writeMem(0x52a1, { 0xd8 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x4103, gbc.sp());
        EXPECT(0xdba7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03D8
        gbc.setState(0xeae2, 0x41fc, 0x61a0, 0xb0f8, 0xd424, 0x4b22, 0x0, 0x0);
        gbc.writeMem(0xeae2, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x41fc, gbc.sp());
        EXPECT(0xeae3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xeae2));
        // D8 03D9
        gbc.setState(0xd950, 0xb0cc, 0xda0, 0x8a5b, 0xa62d, 0x9d45, 0x1, 0x0);
        gbc.writeMem(0xd950, { 0xd8 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xb0cc, gbc.sp());
        EXPECT(0xd951, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd950));
        // D8 03DA
        gbc.setState(0x630a, 0x693b, 0xf770, 0x4da9, 0x1fe0, 0x96b7, 0x0, 0x0);
        gbc.writeMem(0x630a, { 0xd8 });
        gbc.writeMem(0x693b, { 0xa2, 0x7f });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x693d, gbc.sp());
        EXPECT(0x7fa2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03DB
        gbc.setState(0x3e6d, 0x2d92, 0x84c0, 0x4fc7, 0xa7e3, 0x169e, 0x1, 0x0);
        gbc.writeMem(0x3e6d, { 0xd8 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x2d92, gbc.sp());
        EXPECT(0x3e6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03DC
        gbc.setState(0xc6b1, 0x2471, 0x6130, 0xa5b, 0x208e, 0xb9ef, 0x0, 0x0);
        gbc.writeMem(0x2471, { 0xdb, 0x32 });
        gbc.writeMem(0xc6b1, { 0xd8 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x2473, gbc.sp());
        EXPECT(0x32db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xc6b1));
        // D8 03DD
        gbc.setState(0xe8e5, 0xc387, 0xefe0, 0xbe9c, 0xee3a, 0x7b9e, 0x1, 0x0);
        gbc.writeMem(0xe8e5, { 0xd8 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xc387, gbc.sp());
        EXPECT(0xe8e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xe8e5));
        // D8 03DE
        gbc.setState(0x46d3, 0x4db7, 0x39d0, 0x45c5, 0x4f44, 0x380f, 0x0, 0x1);
        gbc.writeMem(0x46d3, { 0xd8 });
        gbc.writeMem(0x4db7, { 0xd1, 0x6 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x4db9, gbc.sp());
        EXPECT(0x6d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03DF
        gbc.setState(0xbc43, 0x788f, 0xa510, 0xff16, 0x968e, 0xc117, 0x1, 0x0);
        gbc.writeMem(0x788f, { 0xef, 0x41 });
        gbc.writeMem(0xbc43, { 0xd8 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x7891, gbc.sp());
        EXPECT(0x41ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xbc43));
        // D8 03E0
        gbc.setState(0x6452, 0xa963, 0x8690, 0x8d10, 0x9323, 0x2bd0, 0x1, 0x1);
        gbc.writeMem(0x6452, { 0xd8 });
        gbc.writeMem(0xa963, { 0xed, 0xff });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xa965, gbc.sp());
        EXPECT(0xffed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xed, gbc.readMem(0xa963));
        EXPECT(0xff, gbc.readMem(0xa964));
        // D8 03E1
        gbc.setState(0x8983, 0x98c2, 0xdca0, 0x4b7c, 0xddf5, 0x4652, 0x1, 0x1);
        gbc.writeMem(0x8983, { 0xd8 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x98c2, gbc.sp());
        EXPECT(0x8984, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8983));
        // D8 03E2
        gbc.setState(0x8dda, 0x27ea, 0xc320, 0x7974, 0x19e0, 0x99cf, 0x1, 0x0);
        gbc.writeMem(0x8dda, { 0xd8 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x27ea, gbc.sp());
        EXPECT(0x8ddb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0x8dda));
        // D8 03E3
        gbc.setState(0x5d65, 0xdcf7, 0x3820, 0x66e, 0xfdbb, 0x16b, 0x1, 0x1);
        gbc.writeMem(0x5d65, { 0xd8 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xdcf7, gbc.sp());
        EXPECT(0x5d66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // D8 03E4
        gbc.setState(0xbcd, 0xe1ed, 0xe6d0, 0xf43, 0x323c, 0xc2d0, 0x1, 0x1);
        gbc.writeMem(0xbcd, { 0xd8 });
        gbc.writeMem(0xe1ed, { 0x64, 0xb5 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xe1ef, gbc.sp());
        EXPECT(0xb564, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0xe1ed));
        EXPECT(0xb5, gbc.readMem(0xe1ee));
        // D8 03E5
        gbc.setState(0x281c, 0x61dd, 0x2f70, 0x5a67, 0x5726, 0xe988, 0x1, 0x0);
        gbc.writeMem(0x281c, { 0xd8 });
        gbc.writeMem(0x61dd, { 0xe8, 0x10 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x61df, gbc.sp());
        EXPECT(0x10e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03E6
        gbc.setState(0x6c15, 0x4885, 0x7070, 0x2d83, 0xf0c1, 0xc501, 0x1, 0x1);
        gbc.writeMem(0x4885, { 0xde, 0xb7 });
        gbc.writeMem(0x6c15, { 0xd8 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x4887, gbc.sp());
        EXPECT(0xb7de, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // D8 03E7
        gbc.setState(0x28d5, 0x6634, 0x5530, 0x353b, 0xe526, 0x3878, 0x1, 0x1);
        gbc.writeMem(0x28d5, { 0xd8 });
        gbc.writeMem(0x6634, { 0x6d, 0x2c });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x6636, gbc.sp());
        EXPECT(0x2c6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
    }
