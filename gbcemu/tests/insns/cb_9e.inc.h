    TEST(gbcemu, opcode_cb_9e) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 9E 0000
        gbc.setState(0x459c, 0x5e4d, 0xd4e0, 0x679f, 0x6ddf, 0x98d8, 0x0, 0x1);
        gbc.writeMem(0x459c, { 0xcb, 0x9e });
        gbc.writeMem(0x98d8, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5e4d);
        EXPECT(gbc.pc(), 0x459e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d8), 0x97);
        // CB 9E 0001
        gbc.setState(0xc412, 0x94c5, 0xb5d0, 0xd9fe, 0x46a2, 0x6f80, 0x1, 0x0);
        gbc.writeMem(0x6f80, { 0xd5 });
        gbc.writeMem(0xc412, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x94c5);
        EXPECT(gbc.pc(), 0xc414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc412), 0xcb);
        EXPECT(gbc.readMem(0xc413), 0x9e);
        // CB 9E 0002
        gbc.setState(0xe910, 0x7eb6, 0x9f40, 0xe6ed, 0x53d, 0x597d, 0x0, 0x0);
        gbc.writeMem(0x597d, { 0xf2 });
        gbc.writeMem(0xe910, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7eb6);
        EXPECT(gbc.pc(), 0xe912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe910), 0xcb);
        EXPECT(gbc.readMem(0xe911), 0x9e);
        // CB 9E 0003
        gbc.setState(0x635e, 0x7201, 0x4f0, 0x1337, 0x4f8, 0xab41, 0x1, 0x1);
        gbc.writeMem(0x635e, { 0xcb, 0x9e });
        gbc.writeMem(0xab41, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7201);
        EXPECT(gbc.pc(), 0x6360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab41), 0x23);
        // CB 9E 0004
        gbc.setState(0x10fb, 0x6649, 0x5450, 0xc45e, 0x95b9, 0xd107, 0x1, 0x0);
        gbc.writeMem(0x10fb, { 0xcb, 0x9e });
        gbc.writeMem(0xd107, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6649);
        EXPECT(gbc.pc(), 0x10fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd107), 0xa4);
        // CB 9E 0005
        gbc.setState(0xd4ef, 0xa78d, 0x5530, 0x39cb, 0x2351, 0x2616, 0x1, 0x0);
        gbc.writeMem(0x2616, { 0x95 });
        gbc.writeMem(0xd4ef, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa78d);
        EXPECT(gbc.pc(), 0xd4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ef), 0xcb);
        EXPECT(gbc.readMem(0xd4f0), 0x9e);
        // CB 9E 0006
        gbc.setState(0xb34c, 0x6094, 0x25f0, 0x4df4, 0xda56, 0xa540, 0x0, 0x1);
        gbc.writeMem(0xa540, { 0xd1 });
        gbc.writeMem(0xb34c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6094);
        EXPECT(gbc.pc(), 0xb34e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa540), 0xd1);
        EXPECT(gbc.readMem(0xb34c), 0xcb);
        EXPECT(gbc.readMem(0xb34d), 0x9e);
        // CB 9E 0009
        gbc.setState(0xc2e7, 0x6d0c, 0x5790, 0x49ae, 0xaf4b, 0xc5dc, 0x1, 0x0);
        gbc.writeMem(0xc2e7, { 0xcb, 0x9e });
        gbc.writeMem(0xc5dc, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6d0c);
        EXPECT(gbc.pc(), 0xc2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e7), 0xcb);
        EXPECT(gbc.readMem(0xc2e8), 0x9e);
        EXPECT(gbc.readMem(0xc5dc), 0xf4);
        // CB 9E 000A
        gbc.setState(0x93a8, 0xa422, 0xd190, 0x1f7e, 0x3f00, 0x2ddc, 0x1, 0x1);
        gbc.writeMem(0x2ddc, { 0xa1 });
        gbc.writeMem(0x93a8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa422);
        EXPECT(gbc.pc(), 0x93aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a8), 0xcb);
        EXPECT(gbc.readMem(0x93a9), 0x9e);
        // CB 9E 000C
        gbc.setState(0xdac8, 0xcbbc, 0xb0e0, 0x6b72, 0xc8c7, 0x1b39, 0x0, 0x1);
        gbc.writeMem(0x1b39, { 0xd1 });
        gbc.writeMem(0xdac8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcbbc);
        EXPECT(gbc.pc(), 0xdaca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdac8), 0xcb);
        EXPECT(gbc.readMem(0xdac9), 0x9e);
        // CB 9E 000D
        gbc.setState(0xef3b, 0xcf13, 0x6590, 0xfa2a, 0xc113, 0xcb91, 0x1, 0x0);
        gbc.writeMem(0xcb91, { 0x51 });
        gbc.writeMem(0xef3b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xcf13);
        EXPECT(gbc.pc(), 0xef3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb91), 0x51);
        EXPECT(gbc.readMem(0xef3b), 0xcb);
        EXPECT(gbc.readMem(0xef3c), 0x9e);
        // CB 9E 000E
        gbc.setState(0xcada, 0x5cc9, 0x31b0, 0x7c59, 0xd3ea, 0xdeaf, 0x0, 0x0);
        gbc.writeMem(0xcada, { 0xcb, 0x9e });
        gbc.writeMem(0xdeaf, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5cc9);
        EXPECT(gbc.pc(), 0xcadc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcada), 0xcb);
        EXPECT(gbc.readMem(0xcadb), 0x9e);
        EXPECT(gbc.readMem(0xdeaf), 0xe5);
        // CB 9E 000F
        gbc.setState(0xe5b3, 0x93bb, 0x7e0, 0x40a5, 0xb7ca, 0xcd52, 0x0, 0x1);
        gbc.writeMem(0xcd52, { 0x36 });
        gbc.writeMem(0xe5b3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x93bb);
        EXPECT(gbc.pc(), 0xe5b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd52), 0x36);
        EXPECT(gbc.readMem(0xe5b3), 0xcb);
        EXPECT(gbc.readMem(0xe5b4), 0x9e);
        // CB 9E 0012
        gbc.setState(0x5058, 0x5058, 0x2350, 0xea91, 0xcb09, 0x9170, 0x0, 0x0);
        gbc.writeMem(0x5058, { 0xcb, 0x9e });
        gbc.writeMem(0x9170, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5058);
        EXPECT(gbc.pc(), 0x505a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9170), 0x45);
        // CB 9E 0016
        gbc.setState(0x4ffe, 0x6f03, 0x8aa0, 0x1211, 0x638e, 0xd9d3, 0x1, 0x0);
        gbc.writeMem(0x4ffe, { 0xcb, 0x9e });
        gbc.writeMem(0xd9d3, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6f03);
        EXPECT(gbc.pc(), 0x5000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d3), 0xa3);
        // CB 9E 0017
        gbc.setState(0x236c, 0x3e2e, 0x9fc0, 0x2233, 0xf0f, 0x702, 0x0, 0x1);
        gbc.writeMem(0x702, { 0x64 });
        gbc.writeMem(0x236c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3e2e);
        EXPECT(gbc.pc(), 0x236e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0018
        gbc.setState(0x9bf6, 0xf4d6, 0x94f0, 0xbab2, 0x4fff, 0x9bef, 0x1, 0x1);
        gbc.writeMem(0x9bef, { 0x4e });
        gbc.writeMem(0x9bf6, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf4d6);
        EXPECT(gbc.pc(), 0x9bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bef), 0x46);
        EXPECT(gbc.readMem(0x9bf6), 0xcb);
        EXPECT(gbc.readMem(0x9bf7), 0x9e);
        // CB 9E 001A
        gbc.setState(0x2ba2, 0xceaa, 0xd3c0, 0x9cdc, 0x68d4, 0x6dc5, 0x0, 0x1);
        gbc.writeMem(0x2ba2, { 0xcb, 0x9e });
        gbc.writeMem(0x6dc5, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xceaa);
        EXPECT(gbc.pc(), 0x2ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 001B
        gbc.setState(0x3685, 0x8d70, 0x3950, 0x3209, 0xddff, 0x217a, 0x0, 0x1);
        gbc.writeMem(0x217a, { 0x65 });
        gbc.writeMem(0x3685, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8d70);
        EXPECT(gbc.pc(), 0x3687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 001D
        gbc.setState(0x946e, 0x396d, 0x12c0, 0xabfa, 0x802d, 0x35a9, 0x1, 0x1);
        gbc.writeMem(0x35a9, { 0x64 });
        gbc.writeMem(0x946e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x396d);
        EXPECT(gbc.pc(), 0x9470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946e), 0xcb);
        EXPECT(gbc.readMem(0x946f), 0x9e);
        // CB 9E 001E
        gbc.setState(0x454b, 0xac57, 0xc0b0, 0x3448, 0x363f, 0xb3c1, 0x0, 0x1);
        gbc.writeMem(0x454b, { 0xcb, 0x9e });
        gbc.writeMem(0xb3c1, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xac57);
        EXPECT(gbc.pc(), 0x454d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c1), 0xb2);
        // CB 9E 001F
        gbc.setState(0x9e97, 0x35c3, 0xcd80, 0x9192, 0x3769, 0x8fb6, 0x1, 0x0);
        gbc.writeMem(0x8fb6, { 0xf9 });
        gbc.writeMem(0x9e97, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x35c3);
        EXPECT(gbc.pc(), 0x9e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb6), 0xf1);
        EXPECT(gbc.readMem(0x9e97), 0xcb);
        EXPECT(gbc.readMem(0x9e98), 0x9e);
        // CB 9E 0020
        gbc.setState(0x5921, 0x8a20, 0x7ff0, 0xae3, 0x3c28, 0x804d, 0x1, 0x1);
        gbc.writeMem(0x5921, { 0xcb, 0x9e });
        gbc.writeMem(0x804d, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8a20);
        EXPECT(gbc.pc(), 0x5923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x804d), 0x61);
        // CB 9E 0021
        gbc.setState(0x1ac3, 0xbdfd, 0x4550, 0x69e2, 0x826a, 0x4d70, 0x0, 0x0);
        gbc.writeMem(0x1ac3, { 0xcb, 0x9e });
        gbc.writeMem(0x4d70, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xbdfd);
        EXPECT(gbc.pc(), 0x1ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0025
        gbc.setState(0x8329, 0xb6f3, 0x39e0, 0x5e35, 0x8da2, 0xc80e, 0x0, 0x0);
        gbc.writeMem(0x8329, { 0xcb, 0x9e });
        gbc.writeMem(0xc80e, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb6f3);
        EXPECT(gbc.pc(), 0x832b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8329), 0xcb);
        EXPECT(gbc.readMem(0x832a), 0x9e);
        EXPECT(gbc.readMem(0xc80e), 0xd1);
        // CB 9E 0026
        gbc.setState(0xa702, 0x5632, 0xb980, 0x4a52, 0xeec1, 0x2bab, 0x0, 0x0);
        gbc.writeMem(0x2bab, { 0xf4 });
        gbc.writeMem(0xa702, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5632);
        EXPECT(gbc.pc(), 0xa704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa702), 0xcb);
        EXPECT(gbc.readMem(0xa703), 0x9e);
        // CB 9E 0027
        gbc.setState(0x45c1, 0x9300, 0xd680, 0x81a7, 0x2c40, 0x7421, 0x0, 0x1);
        gbc.writeMem(0x45c1, { 0xcb, 0x9e });
        gbc.writeMem(0x7421, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9300);
        EXPECT(gbc.pc(), 0x45c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0028
        gbc.setState(0xd329, 0xf91c, 0x2da0, 0xa1f3, 0xbd3c, 0x1ccd, 0x0, 0x1);
        gbc.writeMem(0x1ccd, { 0xc4 });
        gbc.writeMem(0xd329, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf91c);
        EXPECT(gbc.pc(), 0xd32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd329), 0xcb);
        EXPECT(gbc.readMem(0xd32a), 0x9e);
        // CB 9E 002B
        gbc.setState(0x4535, 0x145f, 0xea0, 0x82df, 0x1e8, 0x205c, 0x1, 0x0);
        gbc.writeMem(0x205c, { 0xa2 });
        gbc.writeMem(0x4535, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x145f);
        EXPECT(gbc.pc(), 0x4537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0030
        gbc.setState(0xb5db, 0x6007, 0xf970, 0xbeab, 0x2996, 0xfba3, 0x0, 0x1);
        gbc.writeMem(0xb5db, { 0xcb, 0x9e });
        gbc.writeMem(0xfba3, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6007);
        EXPECT(gbc.pc(), 0xb5dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5db), 0xcb);
        EXPECT(gbc.readMem(0xb5dc), 0x9e);
        EXPECT(gbc.readMem(0xfba3), 0x87);
        // CB 9E 0031
        gbc.setState(0xcb, 0x80b9, 0x7d30, 0x4b1f, 0x7f23, 0x8b21, 0x0, 0x1);
        gbc.writeMem(0xcb, { 0xcb, 0x9e });
        gbc.writeMem(0x8b21, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x80b9);
        EXPECT(gbc.pc(), 0xcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b21), 0x77);
        // CB 9E 0032
        gbc.setState(0x7e64, 0x816a, 0x93e0, 0xdadf, 0x4007, 0x65c7, 0x0, 0x1);
        gbc.writeMem(0x65c7, { 0x55 });
        gbc.writeMem(0x7e64, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x816a);
        EXPECT(gbc.pc(), 0x7e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0033
        gbc.setState(0xb02e, 0x6fa6, 0x5c10, 0x5ee6, 0x3aa6, 0x6f1b, 0x1, 0x1);
        gbc.writeMem(0x6f1b, { 0xb6 });
        gbc.writeMem(0xb02e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6fa6);
        EXPECT(gbc.pc(), 0xb030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02e), 0xcb);
        EXPECT(gbc.readMem(0xb02f), 0x9e);
        // CB 9E 0035
        gbc.setState(0x5a87, 0xfd77, 0x3540, 0xaea7, 0x5d9, 0x5c71, 0x0, 0x1);
        gbc.writeMem(0x5a87, { 0xcb, 0x9e });
        gbc.writeMem(0x5c71, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfd77);
        EXPECT(gbc.pc(), 0x5a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0036
        gbc.setState(0xdb86, 0xf08c, 0x56a0, 0x1ac1, 0xc648, 0x59c3, 0x0, 0x1);
        gbc.writeMem(0x59c3, { 0x51 });
        gbc.writeMem(0xdb86, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf08c);
        EXPECT(gbc.pc(), 0xdb88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb86), 0xcb);
        EXPECT(gbc.readMem(0xdb87), 0x9e);
        // CB 9E 0037
        gbc.setState(0xee7d, 0xba13, 0x9080, 0xadfa, 0xe8b5, 0x86c8, 0x0, 0x0);
        gbc.writeMem(0x86c8, { 0x65 });
        gbc.writeMem(0xee7d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xba13);
        EXPECT(gbc.pc(), 0xee7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c8), 0x65);
        EXPECT(gbc.readMem(0xee7d), 0xcb);
        EXPECT(gbc.readMem(0xee7e), 0x9e);
        // CB 9E 0038
        gbc.setState(0x9b0b, 0x226, 0xbc20, 0xae6f, 0xad7f, 0x21f0, 0x1, 0x0);
        gbc.writeMem(0x21f0, { 0x83 });
        gbc.writeMem(0x9b0b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x226);
        EXPECT(gbc.pc(), 0x9b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b0b), 0xcb);
        EXPECT(gbc.readMem(0x9b0c), 0x9e);
        // CB 9E 0039
        gbc.setState(0x598f, 0xe909, 0x7ff0, 0xdd3e, 0x547a, 0x1d9c, 0x1, 0x1);
        gbc.writeMem(0x1d9c, { 0xf6 });
        gbc.writeMem(0x598f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe909);
        EXPECT(gbc.pc(), 0x5991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 003A
        gbc.setState(0x6dbc, 0x38c0, 0x8490, 0xe165, 0x6b1d, 0x8b2d, 0x1, 0x1);
        gbc.writeMem(0x6dbc, { 0xcb, 0x9e });
        gbc.writeMem(0x8b2d, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x38c0);
        EXPECT(gbc.pc(), 0x6dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2d), 0x93);
        // CB 9E 003D
        gbc.setState(0x7d74, 0x2c12, 0x4cc0, 0x43ac, 0xe9b, 0xe6ad, 0x1, 0x0);
        gbc.writeMem(0x7d74, { 0xcb, 0x9e });
        gbc.writeMem(0xe6ad, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2c12);
        EXPECT(gbc.pc(), 0x7d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ad), 0xd3);
        // CB 9E 003E
        gbc.setState(0x33f6, 0x3ded, 0x80, 0x7fa, 0xc292, 0xa81b, 0x1, 0x0);
        gbc.writeMem(0x33f6, { 0xcb, 0x9e });
        gbc.writeMem(0xa81b, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3ded);
        EXPECT(gbc.pc(), 0x33f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa81b), 0x12);
        // CB 9E 0040
        gbc.setState(0x6ecd, 0xb56f, 0xf150, 0xa13e, 0xf554, 0xd6c5, 0x0, 0x0);
        gbc.writeMem(0x6ecd, { 0xcb, 0x9e });
        gbc.writeMem(0xd6c5, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb56f);
        EXPECT(gbc.pc(), 0x6ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c5), 0x44);
        // CB 9E 0041
        gbc.setState(0xce24, 0x4751, 0x48d0, 0x7eb8, 0xb5ae, 0x9130, 0x0, 0x1);
        gbc.writeMem(0x9130, { 0x82 });
        gbc.writeMem(0xce24, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4751);
        EXPECT(gbc.pc(), 0xce26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9130), 0x82);
        EXPECT(gbc.readMem(0xce24), 0xcb);
        EXPECT(gbc.readMem(0xce25), 0x9e);
        // CB 9E 0042
        gbc.setState(0x53c4, 0x827d, 0xdc30, 0x58c2, 0x9b85, 0x9055, 0x0, 0x0);
        gbc.writeMem(0x53c4, { 0xcb, 0x9e });
        gbc.writeMem(0x9055, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x827d);
        EXPECT(gbc.pc(), 0x53c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9055), 0x10);
        // CB 9E 0044
        gbc.setState(0x51fb, 0x5911, 0xa9c0, 0x457f, 0xd15b, 0xa5b5, 0x0, 0x1);
        gbc.writeMem(0x51fb, { 0xcb, 0x9e });
        gbc.writeMem(0xa5b5, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5911);
        EXPECT(gbc.pc(), 0x51fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b5), 0xc5);
        // CB 9E 0047
        gbc.setState(0xdaa6, 0xb5e6, 0xf40, 0xae73, 0xa772, 0x9026, 0x0, 0x0);
        gbc.writeMem(0x9026, { 0x36 });
        gbc.writeMem(0xdaa6, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb5e6);
        EXPECT(gbc.pc(), 0xdaa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9026), 0x36);
        EXPECT(gbc.readMem(0xdaa6), 0xcb);
        EXPECT(gbc.readMem(0xdaa7), 0x9e);
        // CB 9E 0049
        gbc.setState(0x7ec0, 0x1a73, 0xb1d0, 0x4880, 0xfd15, 0x9ac5, 0x1, 0x0);
        gbc.writeMem(0x7ec0, { 0xcb, 0x9e });
        gbc.writeMem(0x9ac5, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1a73);
        EXPECT(gbc.pc(), 0x7ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ac5), 0x66);
        // CB 9E 004A
        gbc.setState(0x6d98, 0x956, 0x9a0, 0x8ab2, 0xa8eb, 0xdb97, 0x1, 0x1);
        gbc.writeMem(0x6d98, { 0xcb, 0x9e });
        gbc.writeMem(0xdb97, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x956);
        EXPECT(gbc.pc(), 0x6d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb97), 0x23);
        // CB 9E 004C
        gbc.setState(0x8f73, 0xaf72, 0x7e70, 0x747d, 0x6f96, 0x3b36, 0x0, 0x0);
        gbc.writeMem(0x3b36, { 0x77 });
        gbc.writeMem(0x8f73, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaf72);
        EXPECT(gbc.pc(), 0x8f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f73), 0xcb);
        EXPECT(gbc.readMem(0x8f74), 0x9e);
        // CB 9E 004D
        gbc.setState(0x5b32, 0x1ce1, 0xa4d0, 0x107, 0x32ac, 0x946d, 0x1, 0x0);
        gbc.writeMem(0x5b32, { 0xcb, 0x9e });
        gbc.writeMem(0x946d, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1ce1);
        EXPECT(gbc.pc(), 0x5b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x946d), 0xf3);
        // CB 9E 004E
        gbc.setState(0xe861, 0x760e, 0x64d0, 0xc6a7, 0xfba5, 0x773e, 0x0, 0x1);
        gbc.writeMem(0x773e, { 0x75 });
        gbc.writeMem(0xe861, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x760e);
        EXPECT(gbc.pc(), 0xe863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe861), 0xcb);
        EXPECT(gbc.readMem(0xe862), 0x9e);
        // CB 9E 004F
        gbc.setState(0x7c93, 0x9804, 0x6af0, 0x6af4, 0x8bba, 0xcd56, 0x0, 0x0);
        gbc.writeMem(0x7c93, { 0xcb, 0x9e });
        gbc.writeMem(0xcd56, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9804);
        EXPECT(gbc.pc(), 0x7c95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd56), 0x5);
        // CB 9E 0051
        gbc.setState(0xc735, 0x86b5, 0x6eb0, 0x9d51, 0xf57a, 0x9c03, 0x1, 0x0);
        gbc.writeMem(0x9c03, { 0xb8 });
        gbc.writeMem(0xc735, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x86b5);
        EXPECT(gbc.pc(), 0xc737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c03), 0xb0);
        EXPECT(gbc.readMem(0xc735), 0xcb);
        EXPECT(gbc.readMem(0xc736), 0x9e);
        // CB 9E 0052
        gbc.setState(0x1e3f, 0xb6f9, 0x88e0, 0x5b08, 0x42d0, 0x4e56, 0x0, 0x0);
        gbc.writeMem(0x1e3f, { 0xcb, 0x9e });
        gbc.writeMem(0x4e56, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb6f9);
        EXPECT(gbc.pc(), 0x1e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0053
        gbc.setState(0xd67e, 0xe010, 0x20d0, 0x6e66, 0x3986, 0xc024, 0x0, 0x0);
        gbc.writeMem(0xc024, { 0xff });
        gbc.writeMem(0xd67e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe010);
        EXPECT(gbc.pc(), 0xd680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc024), 0xf7);
        EXPECT(gbc.readMem(0xd67e), 0xcb);
        EXPECT(gbc.readMem(0xd67f), 0x9e);
        // CB 9E 0055
        gbc.setState(0x7a84, 0xd785, 0x5750, 0xf900, 0x4fa7, 0xbef8, 0x0, 0x0);
        gbc.writeMem(0x7a84, { 0xcb, 0x9e });
        gbc.writeMem(0xbef8, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd785);
        EXPECT(gbc.pc(), 0x7a86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef8), 0x50);
        // CB 9E 0056
        gbc.setState(0x98d8, 0xa61b, 0x4200, 0x826, 0xe88b, 0x9466, 0x1, 0x1);
        gbc.writeMem(0x9466, { 0x9f });
        gbc.writeMem(0x98d8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa61b);
        EXPECT(gbc.pc(), 0x98da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9466), 0x97);
        EXPECT(gbc.readMem(0x98d8), 0xcb);
        EXPECT(gbc.readMem(0x98d9), 0x9e);
        // CB 9E 0058
        gbc.setState(0x64e4, 0x9dfc, 0xf410, 0x9af2, 0x9059, 0x233a, 0x0, 0x0);
        gbc.writeMem(0x233a, { 0xe1 });
        gbc.writeMem(0x64e4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9dfc);
        EXPECT(gbc.pc(), 0x64e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0059
        gbc.setState(0x3464, 0xf7de, 0xff0, 0xcc93, 0x18d3, 0x5dc5, 0x1, 0x1);
        gbc.writeMem(0x3464, { 0xcb, 0x9e });
        gbc.writeMem(0x5dc5, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf7de);
        EXPECT(gbc.pc(), 0x3466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 005A
        gbc.setState(0xc6fe, 0xf9a, 0xec90, 0xe8ca, 0xccd8, 0xb354, 0x1, 0x0);
        gbc.writeMem(0xb354, { 0xae });
        gbc.writeMem(0xc6fe, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf9a);
        EXPECT(gbc.pc(), 0xc700);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb354), 0xa6);
        EXPECT(gbc.readMem(0xc6fe), 0xcb);
        EXPECT(gbc.readMem(0xc6ff), 0x9e);
        // CB 9E 005B
        gbc.setState(0x1d4c, 0xdd4c, 0x94e0, 0x15a1, 0x5544, 0xa02c, 0x1, 0x1);
        gbc.writeMem(0x1d4c, { 0xcb, 0x9e });
        gbc.writeMem(0xa02c, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdd4c);
        EXPECT(gbc.pc(), 0x1d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02c), 0x25);
        // CB 9E 005C
        gbc.setState(0xe871, 0x1200, 0x47b0, 0x41eb, 0x30d8, 0x7323, 0x1, 0x1);
        gbc.writeMem(0x7323, { 0x52 });
        gbc.writeMem(0xe871, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1200);
        EXPECT(gbc.pc(), 0xe873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe871), 0xcb);
        EXPECT(gbc.readMem(0xe872), 0x9e);
        // CB 9E 005E
        gbc.setState(0x12cf, 0x8fbb, 0xad40, 0x3932, 0xe837, 0xcc9e, 0x1, 0x1);
        gbc.writeMem(0x12cf, { 0xcb, 0x9e });
        gbc.writeMem(0xcc9e, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8fbb);
        EXPECT(gbc.pc(), 0x12d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc9e), 0x41);
        // CB 9E 0061
        gbc.setState(0x3f6a, 0x163e, 0x9bf0, 0x1932, 0x247c, 0xddaf, 0x0, 0x0);
        gbc.writeMem(0x3f6a, { 0xcb, 0x9e });
        gbc.writeMem(0xddaf, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x163e);
        EXPECT(gbc.pc(), 0x3f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddaf), 0x41);
        // CB 9E 0064
        gbc.setState(0x326, 0xc50b, 0xd460, 0xe715, 0x908d, 0x47a1, 0x0, 0x1);
        gbc.writeMem(0x326, { 0xcb, 0x9e });
        gbc.writeMem(0x47a1, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc50b);
        EXPECT(gbc.pc(), 0x328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0065
        gbc.setState(0xb08a, 0x2d27, 0x99c0, 0x95e9, 0x15f9, 0xd70a, 0x1, 0x1);
        gbc.writeMem(0xb08a, { 0xcb, 0x9e });
        gbc.writeMem(0xd70a, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2d27);
        EXPECT(gbc.pc(), 0xb08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb08a), 0xcb);
        EXPECT(gbc.readMem(0xb08b), 0x9e);
        EXPECT(gbc.readMem(0xd70a), 0xf5);
        // CB 9E 0067
        gbc.setState(0xd8fe, 0x6c19, 0x6200, 0xd30, 0x9d38, 0xa951, 0x0, 0x1);
        gbc.writeMem(0xa951, { 0x29 });
        gbc.writeMem(0xd8fe, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6c19);
        EXPECT(gbc.pc(), 0xd900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa951), 0x21);
        EXPECT(gbc.readMem(0xd8fe), 0xcb);
        EXPECT(gbc.readMem(0xd8ff), 0x9e);
        // CB 9E 0068
        gbc.setState(0x3857, 0xb478, 0xbd30, 0x5f1a, 0x6b0b, 0x515, 0x1, 0x1);
        gbc.writeMem(0x515, { 0xe2 });
        gbc.writeMem(0x3857, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb478);
        EXPECT(gbc.pc(), 0x3859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 006A
        gbc.setState(0x4993, 0x4c6f, 0x90c0, 0xd3ab, 0x24c1, 0x8e7e, 0x1, 0x1);
        gbc.writeMem(0x4993, { 0xcb, 0x9e });
        gbc.writeMem(0x8e7e, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4c6f);
        EXPECT(gbc.pc(), 0x4995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e7e), 0x27);
        // CB 9E 006B
        gbc.setState(0xc120, 0xcd57, 0x3d80, 0x7cfa, 0xc0e9, 0x257f, 0x1, 0x1);
        gbc.writeMem(0x257f, { 0x6 });
        gbc.writeMem(0xc120, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xcd57);
        EXPECT(gbc.pc(), 0xc122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc120), 0xcb);
        EXPECT(gbc.readMem(0xc121), 0x9e);
        // CB 9E 006C
        gbc.setState(0x5d0e, 0x6f66, 0xb460, 0x6c92, 0xbba1, 0x9aa4, 0x1, 0x1);
        gbc.writeMem(0x5d0e, { 0xcb, 0x9e });
        gbc.writeMem(0x9aa4, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6f66);
        EXPECT(gbc.pc(), 0x5d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa4), 0xc7);
        // CB 9E 006E
        gbc.setState(0x2227, 0x91b5, 0xb500, 0x1b51, 0x89c0, 0xc9a3, 0x0, 0x0);
        gbc.writeMem(0x2227, { 0xcb, 0x9e });
        gbc.writeMem(0xc9a3, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x91b5);
        EXPECT(gbc.pc(), 0x2229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9a3), 0x35);
        // CB 9E 006F
        gbc.setState(0x582a, 0x674a, 0xa470, 0xd59a, 0x55ee, 0xb38f, 0x1, 0x0);
        gbc.writeMem(0x582a, { 0xcb, 0x9e });
        gbc.writeMem(0xb38f, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x674a);
        EXPECT(gbc.pc(), 0x582c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb38f), 0x31);
        // CB 9E 0070
        gbc.setState(0x3224, 0xf5f, 0xa90, 0xaefd, 0xe457, 0xecd4, 0x1, 0x0);
        gbc.writeMem(0x3224, { 0xcb, 0x9e });
        gbc.writeMem(0xecd4, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf5f);
        EXPECT(gbc.pc(), 0x3226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd4), 0x21);
        // CB 9E 0071
        gbc.setState(0x4631, 0x9af4, 0x540, 0x79a8, 0xfae5, 0x8c13, 0x1, 0x0);
        gbc.writeMem(0x4631, { 0xcb, 0x9e });
        gbc.writeMem(0x8c13, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9af4);
        EXPECT(gbc.pc(), 0x4633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c13), 0x52);
        // CB 9E 0072
        gbc.setState(0xc8d1, 0x434c, 0x4c90, 0xe43, 0x2b0f, 0x81bb, 0x1, 0x1);
        gbc.writeMem(0x81bb, { 0x2b });
        gbc.writeMem(0xc8d1, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x434c);
        EXPECT(gbc.pc(), 0xc8d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81bb), 0x23);
        EXPECT(gbc.readMem(0xc8d1), 0xcb);
        EXPECT(gbc.readMem(0xc8d2), 0x9e);
        // CB 9E 0074
        gbc.setState(0x4d30, 0xb594, 0x4f40, 0x66a2, 0xc60a, 0x7756, 0x1, 0x0);
        gbc.writeMem(0x4d30, { 0xcb, 0x9e });
        gbc.writeMem(0x7756, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb594);
        EXPECT(gbc.pc(), 0x4d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0075
        gbc.setState(0x3648, 0x83b9, 0x2540, 0xbb7a, 0xa90f, 0x8015, 0x1, 0x1);
        gbc.writeMem(0x3648, { 0xcb, 0x9e });
        gbc.writeMem(0x8015, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x83b9);
        EXPECT(gbc.pc(), 0x364a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8015), 0x83);
        // CB 9E 0077
        gbc.setState(0x32b0, 0x5d91, 0x4720, 0x819b, 0xade3, 0x185c, 0x0, 0x0);
        gbc.writeMem(0x185c, { 0xf7 });
        gbc.writeMem(0x32b0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5d91);
        EXPECT(gbc.pc(), 0x32b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 007A
        gbc.setState(0xded5, 0x15f3, 0xed60, 0xc8e8, 0x2c3b, 0x9bc4, 0x0, 0x0);
        gbc.writeMem(0x9bc4, { 0x69 });
        gbc.writeMem(0xded5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x15f3);
        EXPECT(gbc.pc(), 0xded7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc4), 0x61);
        EXPECT(gbc.readMem(0xded5), 0xcb);
        EXPECT(gbc.readMem(0xded6), 0x9e);
        // CB 9E 007B
        gbc.setState(0xd239, 0x3fdc, 0x1020, 0x1202, 0xedc7, 0xd25e, 0x1, 0x0);
        gbc.writeMem(0xd239, { 0xcb, 0x9e });
        gbc.writeMem(0xd25e, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3fdc);
        EXPECT(gbc.pc(), 0xd23b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd239), 0xcb);
        EXPECT(gbc.readMem(0xd23a), 0x9e);
        EXPECT(gbc.readMem(0xd25e), 0x53);
        // CB 9E 007C
        gbc.setState(0x7f03, 0x66dc, 0xa390, 0x8486, 0x9e8, 0x9249, 0x1, 0x1);
        gbc.writeMem(0x7f03, { 0xcb, 0x9e });
        gbc.writeMem(0x9249, { 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x66dc);
        EXPECT(gbc.pc(), 0x7f05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9249), 0x83);
        // CB 9E 007E
        gbc.setState(0xedc7, 0xb8fd, 0x21b0, 0xec53, 0x9123, 0x506e, 0x0, 0x0);
        gbc.writeMem(0x506e, { 0xd6 });
        gbc.writeMem(0xedc7, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0xedc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedc7), 0xcb);
        EXPECT(gbc.readMem(0xedc8), 0x9e);
        // CB 9E 0083
        gbc.setState(0x115e, 0x4b0b, 0x6fd0, 0x68a4, 0xf2a5, 0xf773, 0x0, 0x0);
        gbc.writeMem(0x115e, { 0xcb, 0x9e });
        gbc.writeMem(0xf773, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4b0b);
        EXPECT(gbc.pc(), 0x1160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf773), 0x72);
        // CB 9E 0084
        gbc.setState(0xa713, 0xf802, 0xb790, 0xade3, 0x616, 0x3207, 0x1, 0x1);
        gbc.writeMem(0x3207, { 0x45 });
        gbc.writeMem(0xa713, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf802);
        EXPECT(gbc.pc(), 0xa715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa713), 0xcb);
        EXPECT(gbc.readMem(0xa714), 0x9e);
        // CB 9E 0085
        gbc.setState(0x7a24, 0xa20e, 0x2c70, 0x321c, 0xac5e, 0x107e, 0x1, 0x0);
        gbc.writeMem(0x107e, { 0x65 });
        gbc.writeMem(0x7a24, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa20e);
        EXPECT(gbc.pc(), 0x7a26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0086
        gbc.setState(0xc8da, 0xd3fb, 0x3e90, 0xb3d, 0x4936, 0xc5e9, 0x1, 0x0);
        gbc.writeMem(0xc5e9, { 0xe2 });
        gbc.writeMem(0xc8da, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd3fb);
        EXPECT(gbc.pc(), 0xc8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5e9), 0xe2);
        EXPECT(gbc.readMem(0xc8da), 0xcb);
        EXPECT(gbc.readMem(0xc8db), 0x9e);
        // CB 9E 0087
        gbc.setState(0x5d25, 0xcc3d, 0xc4c0, 0x2c83, 0xe8d, 0xbe25, 0x0, 0x1);
        gbc.writeMem(0x5d25, { 0xcb, 0x9e });
        gbc.writeMem(0xbe25, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcc3d);
        EXPECT(gbc.pc(), 0x5d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe25), 0xc3);
        // CB 9E 0088
        gbc.setState(0xa9f3, 0x77f5, 0x22b0, 0x3485, 0x1b51, 0xd6cc, 0x1, 0x1);
        gbc.writeMem(0xa9f3, { 0xcb, 0x9e });
        gbc.writeMem(0xd6cc, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x77f5);
        EXPECT(gbc.pc(), 0xa9f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f3), 0xcb);
        EXPECT(gbc.readMem(0xa9f4), 0x9e);
        EXPECT(gbc.readMem(0xd6cc), 0xb0);
        // CB 9E 0089
        gbc.setState(0x32dd, 0xbea6, 0x4e70, 0xe10b, 0x764, 0xec28, 0x1, 0x0);
        gbc.writeMem(0x32dd, { 0xcb, 0x9e });
        gbc.writeMem(0xec28, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xbea6);
        EXPECT(gbc.pc(), 0x32df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec28), 0x66);
        // CB 9E 008A
        gbc.setState(0x8b7f, 0x82ef, 0xec30, 0xedfa, 0x6bd5, 0x1eab, 0x1, 0x0);
        gbc.writeMem(0x1eab, { 0x71 });
        gbc.writeMem(0x8b7f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x82ef);
        EXPECT(gbc.pc(), 0x8b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b7f), 0xcb);
        EXPECT(gbc.readMem(0x8b80), 0x9e);
        // CB 9E 008D
        gbc.setState(0x5ded, 0xa3ba, 0x84e0, 0xe142, 0x671b, 0xfbb0, 0x0, 0x1);
        gbc.writeMem(0x5ded, { 0xcb, 0x9e });
        gbc.writeMem(0xfbb0, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa3ba);
        EXPECT(gbc.pc(), 0x5def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfbb0), 0x81);
        // CB 9E 008F
        gbc.setState(0x5146, 0x3b6f, 0xea50, 0xec45, 0xe1d9, 0xf6ef, 0x0, 0x1);
        gbc.writeMem(0x5146, { 0xcb, 0x9e });
        gbc.writeMem(0xf6ef, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3b6f);
        EXPECT(gbc.pc(), 0x5148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6ef), 0x40);
        // CB 9E 0090
        gbc.setState(0xcd0d, 0xc6e8, 0x7b10, 0x52c4, 0x72f8, 0x8c20, 0x1, 0x0);
        gbc.writeMem(0x8c20, { 0x92 });
        gbc.writeMem(0xcd0d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc6e8);
        EXPECT(gbc.pc(), 0xcd0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c20), 0x92);
        EXPECT(gbc.readMem(0xcd0d), 0xcb);
        EXPECT(gbc.readMem(0xcd0e), 0x9e);
        // CB 9E 0091
        gbc.setState(0xcc5b, 0x17ee, 0x33d0, 0xa019, 0xedda, 0x9a9f, 0x1, 0x1);
        gbc.writeMem(0x9a9f, { 0x2a });
        gbc.writeMem(0xcc5b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x17ee);
        EXPECT(gbc.pc(), 0xcc5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a9f), 0x22);
        EXPECT(gbc.readMem(0xcc5b), 0xcb);
        EXPECT(gbc.readMem(0xcc5c), 0x9e);
        // CB 9E 0094
        gbc.setState(0xb62a, 0xdd62, 0x2240, 0x1849, 0x113d, 0x69b8, 0x0, 0x1);
        gbc.writeMem(0x69b8, { 0x82 });
        gbc.writeMem(0xb62a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdd62);
        EXPECT(gbc.pc(), 0xb62c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb62a), 0xcb);
        EXPECT(gbc.readMem(0xb62b), 0x9e);
        // CB 9E 0096
        gbc.setState(0x3b86, 0xac81, 0xc760, 0x7fef, 0x75f6, 0x95d8, 0x0, 0x1);
        gbc.writeMem(0x3b86, { 0xcb, 0x9e });
        gbc.writeMem(0x95d8, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xac81);
        EXPECT(gbc.pc(), 0x3b88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d8), 0x67);
        // CB 9E 0097
        gbc.setState(0x9a94, 0x1173, 0xa460, 0xacf8, 0xcc05, 0xc07b, 0x0, 0x0);
        gbc.writeMem(0x9a94, { 0xcb, 0x9e });
        gbc.writeMem(0xc07b, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1173);
        EXPECT(gbc.pc(), 0x9a96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a94), 0xcb);
        EXPECT(gbc.readMem(0x9a95), 0x9e);
        EXPECT(gbc.readMem(0xc07b), 0xd2);
        // CB 9E 0098
        gbc.setState(0x8261, 0xf28d, 0x95b0, 0xe3b8, 0xfcbb, 0x1ce3, 0x0, 0x0);
        gbc.writeMem(0x1ce3, { 0x24 });
        gbc.writeMem(0x8261, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf28d);
        EXPECT(gbc.pc(), 0x8263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8261), 0xcb);
        EXPECT(gbc.readMem(0x8262), 0x9e);
        // CB 9E 0099
        gbc.setState(0x720f, 0x532, 0xd970, 0x724b, 0x477d, 0x78d1, 0x1, 0x1);
        gbc.writeMem(0x720f, { 0xcb, 0x9e });
        gbc.writeMem(0x78d1, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x532);
        EXPECT(gbc.pc(), 0x7211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 009A
        gbc.setState(0x1462, 0xe7e3, 0xb9d0, 0xb7f, 0x9b18, 0xe6d2, 0x0, 0x1);
        gbc.writeMem(0x1462, { 0xcb, 0x9e });
        gbc.writeMem(0xe6d2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe7e3);
        EXPECT(gbc.pc(), 0x1464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d2), 0x0);
        // CB 9E 009B
        gbc.setState(0xbcc4, 0x4062, 0x4380, 0x3adf, 0x1591, 0x8c39, 0x1, 0x1);
        gbc.writeMem(0x8c39, { 0x5b });
        gbc.writeMem(0xbcc4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4062);
        EXPECT(gbc.pc(), 0xbcc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c39), 0x53);
        EXPECT(gbc.readMem(0xbcc4), 0xcb);
        EXPECT(gbc.readMem(0xbcc5), 0x9e);
        // CB 9E 009C
        gbc.setState(0x298e, 0xaea9, 0x14a0, 0x17d5, 0x148f, 0xea2a, 0x0, 0x1);
        gbc.writeMem(0x298e, { 0xcb, 0x9e });
        gbc.writeMem(0xea2a, { 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xaea9);
        EXPECT(gbc.pc(), 0x2990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea2a), 0x85);
        // CB 9E 009D
        gbc.setState(0xac3, 0x430d, 0x8b20, 0x5d9d, 0xbe22, 0x4ed4, 0x1, 0x1);
        gbc.writeMem(0xac3, { 0xcb, 0x9e });
        gbc.writeMem(0x4ed4, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x430d);
        EXPECT(gbc.pc(), 0xac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 009F
        gbc.setState(0x238e, 0x47a4, 0xb5d0, 0x54f2, 0x78f3, 0x6b2, 0x0, 0x1);
        gbc.writeMem(0x6b2, { 0xf4 });
        gbc.writeMem(0x238e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x47a4);
        EXPECT(gbc.pc(), 0x2390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 00A0
        gbc.setState(0xe228, 0xe6e3, 0xdd20, 0x8e2b, 0x48c6, 0x8265, 0x1, 0x0);
        gbc.writeMem(0x8265, { 0xbd });
        gbc.writeMem(0xe228, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe6e3);
        EXPECT(gbc.pc(), 0xe22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8265), 0xb5);
        EXPECT(gbc.readMem(0xe228), 0xcb);
        EXPECT(gbc.readMem(0xe229), 0x9e);
        // CB 9E 00A1
        gbc.setState(0x3d15, 0x723a, 0xd800, 0xb8bb, 0x7821, 0xba26, 0x0, 0x0);
        gbc.writeMem(0x3d15, { 0xcb, 0x9e });
        gbc.writeMem(0xba26, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x723a);
        EXPECT(gbc.pc(), 0x3d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba26), 0xb2);
        // CB 9E 00A2
        gbc.setState(0x9e2c, 0x432, 0x62c0, 0xa8fe, 0x7d1d, 0x3cb7, 0x1, 0x1);
        gbc.writeMem(0x3cb7, { 0x96 });
        gbc.writeMem(0x9e2c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x432);
        EXPECT(gbc.pc(), 0x9e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2c), 0xcb);
        EXPECT(gbc.readMem(0x9e2d), 0x9e);
        // CB 9E 00A3
        gbc.setState(0x2ec8, 0x2475, 0x3ef0, 0x7dce, 0x97d4, 0xc6d3, 0x0, 0x1);
        gbc.writeMem(0x2ec8, { 0xcb, 0x9e });
        gbc.writeMem(0xc6d3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2475);
        EXPECT(gbc.pc(), 0x2eca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6d3), 0x45);
        // CB 9E 00A4
        gbc.setState(0xbba2, 0x6e18, 0xb1d0, 0x16aa, 0xfcdd, 0xad8b, 0x1, 0x1);
        gbc.writeMem(0xad8b, { 0x49 });
        gbc.writeMem(0xbba2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6e18);
        EXPECT(gbc.pc(), 0xbba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad8b), 0x41);
        EXPECT(gbc.readMem(0xbba2), 0xcb);
        EXPECT(gbc.readMem(0xbba3), 0x9e);
        // CB 9E 00A5
        gbc.setState(0x912c, 0xbe58, 0x27f0, 0xc79, 0x50f, 0x3ffc, 0x1, 0x0);
        gbc.writeMem(0x3ffc, { 0xf6 });
        gbc.writeMem(0x912c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbe58);
        EXPECT(gbc.pc(), 0x912e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x912c), 0xcb);
        EXPECT(gbc.readMem(0x912d), 0x9e);
        // CB 9E 00A7
        gbc.setState(0xdde3, 0xe655, 0x3700, 0x63d9, 0xdc51, 0xfd33, 0x0, 0x1);
        gbc.writeMem(0xdde3, { 0xcb, 0x9e });
        gbc.writeMem(0xfd33, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe655);
        EXPECT(gbc.pc(), 0xdde5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde3), 0xcb);
        EXPECT(gbc.readMem(0xdde4), 0x9e);
        EXPECT(gbc.readMem(0xfd33), 0x41);
        // CB 9E 00A8
        gbc.setState(0x29f5, 0x746d, 0x6b90, 0xd1c2, 0x3fd4, 0xaf37, 0x0, 0x0);
        gbc.writeMem(0x29f5, { 0xcb, 0x9e });
        gbc.writeMem(0xaf37, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x746d);
        EXPECT(gbc.pc(), 0x29f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf37), 0x33);
        // CB 9E 00A9
        gbc.setState(0xb530, 0x6098, 0x8370, 0xcb7b, 0x5f88, 0xb94b, 0x0, 0x0);
        gbc.writeMem(0xb530, { 0xcb, 0x9e });
        gbc.writeMem(0xb94b, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6098);
        EXPECT(gbc.pc(), 0xb532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb530), 0xcb);
        EXPECT(gbc.readMem(0xb531), 0x9e);
        EXPECT(gbc.readMem(0xb94b), 0x15);
        // CB 9E 00AA
        gbc.setState(0xba96, 0xd252, 0x2880, 0x5d49, 0x5443, 0xbbeb, 0x0, 0x1);
        gbc.writeMem(0xba96, { 0xcb, 0x9e });
        gbc.writeMem(0xbbeb, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd252);
        EXPECT(gbc.pc(), 0xba98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba96), 0xcb);
        EXPECT(gbc.readMem(0xba97), 0x9e);
        EXPECT(gbc.readMem(0xbbeb), 0x62);
        // CB 9E 00AB
        gbc.setState(0xb6d, 0x24f2, 0xce00, 0x1362, 0x78e2, 0xb1fc, 0x1, 0x0);
        gbc.writeMem(0xb6d, { 0xcb, 0x9e });
        gbc.writeMem(0xb1fc, { 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x24f2);
        EXPECT(gbc.pc(), 0xb6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1fc), 0xb0);
        // CB 9E 00AD
        gbc.setState(0x239a, 0x1384, 0x52f0, 0x8b0a, 0x3038, 0xb284, 0x0, 0x1);
        gbc.writeMem(0x239a, { 0xcb, 0x9e });
        gbc.writeMem(0xb284, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1384);
        EXPECT(gbc.pc(), 0x239c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb284), 0xd7);
        // CB 9E 00B3
        gbc.setState(0x57d6, 0xa92f, 0x7450, 0x57c6, 0xd1b5, 0xfb97, 0x0, 0x1);
        gbc.writeMem(0x57d6, { 0xcb, 0x9e });
        gbc.writeMem(0xfb97, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa92f);
        EXPECT(gbc.pc(), 0x57d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb97), 0xe0);
        // CB 9E 00B4
        gbc.setState(0xaa5e, 0xf866, 0xce70, 0x9ebc, 0xced1, 0x8881, 0x1, 0x0);
        gbc.writeMem(0x8881, { 0xd4 });
        gbc.writeMem(0xaa5e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf866);
        EXPECT(gbc.pc(), 0xaa60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8881), 0xd4);
        EXPECT(gbc.readMem(0xaa5e), 0xcb);
        EXPECT(gbc.readMem(0xaa5f), 0x9e);
        // CB 9E 00B5
        gbc.setState(0x5e6e, 0xce3f, 0xe440, 0x88cf, 0x38db, 0xc5d2, 0x1, 0x0);
        gbc.writeMem(0x5e6e, { 0xcb, 0x9e });
        gbc.writeMem(0xc5d2, { 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xce3f);
        EXPECT(gbc.pc(), 0x5e70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5d2), 0x90);
        // CB 9E 00B7
        gbc.setState(0x8497, 0xa983, 0xff70, 0xc178, 0xf1ee, 0x20d3, 0x1, 0x0);
        gbc.writeMem(0x20d3, { 0x70 });
        gbc.writeMem(0x8497, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa983);
        EXPECT(gbc.pc(), 0x8499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8497), 0xcb);
        EXPECT(gbc.readMem(0x8498), 0x9e);
        // CB 9E 00B8
        gbc.setState(0xa946, 0x5203, 0x8250, 0x4021, 0xf8ad, 0x839, 0x1, 0x0);
        gbc.writeMem(0x839, { 0x33 });
        gbc.writeMem(0xa946, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5203);
        EXPECT(gbc.pc(), 0xa948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa946), 0xcb);
        EXPECT(gbc.readMem(0xa947), 0x9e);
        // CB 9E 00BB
        gbc.setState(0x42a7, 0x9888, 0x3790, 0xa48f, 0xb039, 0xf661, 0x0, 0x0);
        gbc.writeMem(0x42a7, { 0xcb, 0x9e });
        gbc.writeMem(0xf661, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x9888);
        EXPECT(gbc.pc(), 0x42a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf661), 0x85);
        // CB 9E 00BC
        gbc.setState(0xd371, 0x87f1, 0xfee0, 0xcdd6, 0x801c, 0xdfe5, 0x0, 0x1);
        gbc.writeMem(0xd371, { 0xcb, 0x9e });
        gbc.writeMem(0xdfe5, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x87f1);
        EXPECT(gbc.pc(), 0xd373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd371), 0xcb);
        EXPECT(gbc.readMem(0xd372), 0x9e);
        EXPECT(gbc.readMem(0xdfe5), 0xb7);
        // CB 9E 00BD
        gbc.setState(0x1e58, 0x8469, 0x41d0, 0x9914, 0x6c82, 0x6541, 0x0, 0x0);
        gbc.writeMem(0x1e58, { 0xcb, 0x9e });
        gbc.writeMem(0x6541, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8469);
        EXPECT(gbc.pc(), 0x1e5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 00BE
        gbc.setState(0x247, 0x72e3, 0xff20, 0x1f37, 0x9026, 0xe790, 0x1, 0x0);
        gbc.writeMem(0x247, { 0xcb, 0x9e });
        gbc.writeMem(0xe790, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x72e3);
        EXPECT(gbc.pc(), 0x249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe790), 0xc2);
        // CB 9E 00BF
        gbc.setState(0xc6b5, 0x7d6b, 0x6c50, 0x81a6, 0xeed2, 0x3e14, 0x0, 0x0);
        gbc.writeMem(0x3e14, { 0xd0 });
        gbc.writeMem(0xc6b5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x7d6b);
        EXPECT(gbc.pc(), 0xc6b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6b5), 0xcb);
        EXPECT(gbc.readMem(0xc6b6), 0x9e);
        // CB 9E 00C0
        gbc.setState(0xadd2, 0x660a, 0x5ed0, 0x6d74, 0x491a, 0xf367, 0x1, 0x1);
        gbc.writeMem(0xadd2, { 0xcb, 0x9e });
        gbc.writeMem(0xf367, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x660a);
        EXPECT(gbc.pc(), 0xadd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadd2), 0xcb);
        EXPECT(gbc.readMem(0xadd3), 0x9e);
        EXPECT(gbc.readMem(0xf367), 0xc3);
        // CB 9E 00C1
        gbc.setState(0x542f, 0xce1c, 0xf620, 0xaf61, 0x8c1a, 0xaf30, 0x1, 0x0);
        gbc.writeMem(0x542f, { 0xcb, 0x9e });
        gbc.writeMem(0xaf30, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xce1c);
        EXPECT(gbc.pc(), 0x5431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf30), 0xd1);
        // CB 9E 00C2
        gbc.setState(0x35a7, 0xb25e, 0x3140, 0x7832, 0xc4f4, 0xff26, 0x1, 0x1);
        gbc.writeMem(0x35a7, { 0xcb, 0x9e });
        gbc.writeMem(0xff26, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb25e);
        EXPECT(gbc.pc(), 0x35a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff26), 0x57);
        // CB 9E 00C3
        gbc.setState(0xbfda, 0x7bda, 0x3ac0, 0xa0cb, 0xefb8, 0xa9a4, 0x0, 0x1);
        gbc.writeMem(0xa9a4, { 0x29 });
        gbc.writeMem(0xbfda, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7bda);
        EXPECT(gbc.pc(), 0xbfdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a4), 0x21);
        EXPECT(gbc.readMem(0xbfda), 0xcb);
        EXPECT(gbc.readMem(0xbfdb), 0x9e);
        // CB 9E 00C4
        gbc.setState(0xc064, 0x3d1c, 0xe6a0, 0xa982, 0x7040, 0xf7a4, 0x0, 0x1);
        gbc.writeMem(0xc064, { 0xcb, 0x9e });
        gbc.writeMem(0xf7a4, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3d1c);
        EXPECT(gbc.pc(), 0xc066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc064), 0xcb);
        EXPECT(gbc.readMem(0xc065), 0x9e);
        EXPECT(gbc.readMem(0xf7a4), 0xd3);
        // CB 9E 00C7
        gbc.setState(0x907a, 0x6f75, 0xfcd0, 0xc99f, 0x3a80, 0xcac6, 0x0, 0x0);
        gbc.writeMem(0x907a, { 0xcb, 0x9e });
        gbc.writeMem(0xcac6, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x6f75);
        EXPECT(gbc.pc(), 0x907c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x907a), 0xcb);
        EXPECT(gbc.readMem(0x907b), 0x9e);
        EXPECT(gbc.readMem(0xcac6), 0xd6);
        // CB 9E 00C8
        gbc.setState(0x2708, 0x3c6, 0x58c0, 0xd64, 0x7e8a, 0xb2be, 0x1, 0x1);
        gbc.writeMem(0x2708, { 0xcb, 0x9e });
        gbc.writeMem(0xb2be, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3c6);
        EXPECT(gbc.pc(), 0x270a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2be), 0xc0);
        // CB 9E 00C9
        gbc.setState(0xe826, 0x7fb2, 0x4b20, 0xd57f, 0x33b1, 0xa75e, 0x1, 0x0);
        gbc.writeMem(0xa75e, { 0xc2 });
        gbc.writeMem(0xe826, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7fb2);
        EXPECT(gbc.pc(), 0xe828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa75e), 0xc2);
        EXPECT(gbc.readMem(0xe826), 0xcb);
        EXPECT(gbc.readMem(0xe827), 0x9e);
        // CB 9E 00CA
        gbc.setState(0x4172, 0x81ee, 0xc9a0, 0xe615, 0x547d, 0x5380, 0x1, 0x0);
        gbc.writeMem(0x4172, { 0xcb, 0x9e });
        gbc.writeMem(0x5380, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x81ee);
        EXPECT(gbc.pc(), 0x4174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 00CB
        gbc.setState(0xa719, 0x71e6, 0x4d40, 0x3c0b, 0x86bb, 0xf49e, 0x0, 0x0);
        gbc.writeMem(0xa719, { 0xcb, 0x9e });
        gbc.writeMem(0xf49e, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x71e6);
        EXPECT(gbc.pc(), 0xa71b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa719), 0xcb);
        EXPECT(gbc.readMem(0xa71a), 0x9e);
        EXPECT(gbc.readMem(0xf49e), 0x27);
        // CB 9E 00CC
        gbc.setState(0x8e63, 0x8ade, 0x7d70, 0x62b1, 0x9c2e, 0x1316, 0x0, 0x1);
        gbc.writeMem(0x1316, { 0xf0 });
        gbc.writeMem(0x8e63, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8ade);
        EXPECT(gbc.pc(), 0x8e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e63), 0xcb);
        EXPECT(gbc.readMem(0x8e64), 0x9e);
        // CB 9E 00CF
        gbc.setState(0xe601, 0x1bf8, 0xa800, 0x11b6, 0x55d9, 0x2ae6, 0x1, 0x1);
        gbc.writeMem(0x2ae6, { 0xf0 });
        gbc.writeMem(0xe601, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1bf8);
        EXPECT(gbc.pc(), 0xe603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe601), 0xcb);
        EXPECT(gbc.readMem(0xe602), 0x9e);
        // CB 9E 00D3
        gbc.setState(0xbddb, 0x7b77, 0xf410, 0xfed5, 0xde13, 0xd6cf, 0x1, 0x0);
        gbc.writeMem(0xbddb, { 0xcb, 0x9e });
        gbc.writeMem(0xd6cf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7b77);
        EXPECT(gbc.pc(), 0xbddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbddb), 0xcb);
        EXPECT(gbc.readMem(0xbddc), 0x9e);
        EXPECT(gbc.readMem(0xd6cf), 0x5);
        // CB 9E 00D4
        gbc.setState(0x42d8, 0xf755, 0x82f0, 0x7760, 0xfc95, 0x9e4a, 0x0, 0x1);
        gbc.writeMem(0x42d8, { 0xcb, 0x9e });
        gbc.writeMem(0x9e4a, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf755);
        EXPECT(gbc.pc(), 0x42da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e4a), 0x94);
        // CB 9E 00D5
        gbc.setState(0xe940, 0xcb08, 0x6c50, 0xe59c, 0xc72b, 0x15a2, 0x0, 0x1);
        gbc.writeMem(0x15a2, { 0x1 });
        gbc.writeMem(0xe940, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcb08);
        EXPECT(gbc.pc(), 0xe942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe940), 0xcb);
        EXPECT(gbc.readMem(0xe941), 0x9e);
        // CB 9E 00D7
        gbc.setState(0x707a, 0x78dd, 0x1f80, 0x64a3, 0x6098, 0x2822, 0x0, 0x1);
        gbc.writeMem(0x2822, { 0xf1 });
        gbc.writeMem(0x707a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x78dd);
        EXPECT(gbc.pc(), 0x707c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 00D8
        gbc.setState(0x2202, 0x7aeb, 0xdc90, 0xc416, 0xaa42, 0xbce2, 0x1, 0x0);
        gbc.writeMem(0x2202, { 0xcb, 0x9e });
        gbc.writeMem(0xbce2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7aeb);
        EXPECT(gbc.pc(), 0x2204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce2), 0x47);
        // CB 9E 00D9
        gbc.setState(0xecbd, 0x65d6, 0xcc0, 0x2aa, 0xd55f, 0x5a70, 0x0, 0x1);
        gbc.writeMem(0x5a70, { 0x7 });
        gbc.writeMem(0xecbd, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x65d6);
        EXPECT(gbc.pc(), 0xecbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbd), 0xcb);
        EXPECT(gbc.readMem(0xecbe), 0x9e);
        // CB 9E 00DA
        gbc.setState(0xb072, 0xb30a, 0x7380, 0x2382, 0x10c1, 0xc58a, 0x1, 0x1);
        gbc.writeMem(0xb072, { 0xcb, 0x9e });
        gbc.writeMem(0xc58a, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb30a);
        EXPECT(gbc.pc(), 0xb074);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb072), 0xcb);
        EXPECT(gbc.readMem(0xb073), 0x9e);
        EXPECT(gbc.readMem(0xc58a), 0x6);
        // CB 9E 00DB
        gbc.setState(0x4445, 0xd680, 0x3370, 0x72b5, 0x418, 0xeda5, 0x1, 0x0);
        gbc.writeMem(0x4445, { 0xcb, 0x9e });
        gbc.writeMem(0xeda5, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd680);
        EXPECT(gbc.pc(), 0x4447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeda5), 0x96);
        // CB 9E 00DC
        gbc.setState(0x1199, 0xfcf8, 0xcc10, 0x9a24, 0x8871, 0x1b9f, 0x1, 0x1);
        gbc.writeMem(0x1199, { 0xcb, 0x9e });
        gbc.writeMem(0x1b9f, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfcf8);
        EXPECT(gbc.pc(), 0x119b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 00DD
        gbc.setState(0xdb2c, 0x609f, 0xa740, 0xee02, 0x8f3, 0xc5a8, 0x0, 0x1);
        gbc.writeMem(0xc5a8, { 0x8d });
        gbc.writeMem(0xdb2c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x609f);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a8), 0x85);
        EXPECT(gbc.readMem(0xdb2c), 0xcb);
        EXPECT(gbc.readMem(0xdb2d), 0x9e);
        // CB 9E 00DE
        gbc.setState(0x8b43, 0x741f, 0x7f70, 0xfb89, 0x5cff, 0xf326, 0x1, 0x1);
        gbc.writeMem(0x8b43, { 0xcb, 0x9e });
        gbc.writeMem(0xf326, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x741f);
        EXPECT(gbc.pc(), 0x8b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b43), 0xcb);
        EXPECT(gbc.readMem(0x8b44), 0x9e);
        EXPECT(gbc.readMem(0xf326), 0x95);
        // CB 9E 00DF
        gbc.setState(0x791b, 0x1c8d, 0x67d0, 0x9386, 0xc67c, 0xb54f, 0x0, 0x0);
        gbc.writeMem(0x791b, { 0xcb, 0x9e });
        gbc.writeMem(0xb54f, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x1c8d);
        EXPECT(gbc.pc(), 0x791d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54f), 0xb5);
        // CB 9E 00E2
        gbc.setState(0x1ec7, 0x2eb6, 0x12b0, 0xd2c9, 0xc315, 0x375f, 0x1, 0x1);
        gbc.writeMem(0x1ec7, { 0xcb, 0x9e });
        gbc.writeMem(0x375f, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2eb6);
        EXPECT(gbc.pc(), 0x1ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 00E3
        gbc.setState(0x9212, 0x3069, 0xbc20, 0x422e, 0xafc2, 0xee68, 0x1, 0x1);
        gbc.writeMem(0x9212, { 0xcb, 0x9e });
        gbc.writeMem(0xee68, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3069);
        EXPECT(gbc.pc(), 0x9214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9212), 0xcb);
        EXPECT(gbc.readMem(0x9213), 0x9e);
        EXPECT(gbc.readMem(0xee68), 0xa6);
        // CB 9E 00E4
        gbc.setState(0x67d9, 0x3e78, 0x5ff0, 0xa2ba, 0x5509, 0xb374, 0x0, 0x0);
        gbc.writeMem(0x67d9, { 0xcb, 0x9e });
        gbc.writeMem(0xb374, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3e78);
        EXPECT(gbc.pc(), 0x67db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb374), 0x7);
        // CB 9E 00E7
        gbc.setState(0xd448, 0xb011, 0xb580, 0xa069, 0x81fb, 0x9b87, 0x0, 0x0);
        gbc.writeMem(0x9b87, { 0x1f });
        gbc.writeMem(0xd448, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb011);
        EXPECT(gbc.pc(), 0xd44a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b87), 0x17);
        EXPECT(gbc.readMem(0xd448), 0xcb);
        EXPECT(gbc.readMem(0xd449), 0x9e);
        // CB 9E 00EB
        gbc.setState(0x6a3d, 0xec6f, 0xfe90, 0x5205, 0x7f9f, 0xec66, 0x1, 0x1);
        gbc.writeMem(0x6a3d, { 0xcb, 0x9e });
        gbc.writeMem(0xec66, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xec6f);
        EXPECT(gbc.pc(), 0x6a3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec66), 0x66);
        // CB 9E 00EC
        gbc.setState(0xaff0, 0x7d4a, 0xde80, 0x1693, 0x2137, 0x9da4, 0x1, 0x1);
        gbc.writeMem(0x9da4, { 0x3b });
        gbc.writeMem(0xaff0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7d4a);
        EXPECT(gbc.pc(), 0xaff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da4), 0x33);
        EXPECT(gbc.readMem(0xaff0), 0xcb);
        EXPECT(gbc.readMem(0xaff1), 0x9e);
        // CB 9E 00ED
        gbc.setState(0x2340, 0x3f8f, 0x63f0, 0x4125, 0xf8ca, 0xc5fa, 0x1, 0x1);
        gbc.writeMem(0x2340, { 0xcb, 0x9e });
        gbc.writeMem(0xc5fa, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3f8f);
        EXPECT(gbc.pc(), 0x2342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5fa), 0x12);
        // CB 9E 00EE
        gbc.setState(0x3c85, 0xa32a, 0xb850, 0x308d, 0x73df, 0xf048, 0x1, 0x0);
        gbc.writeMem(0x3c85, { 0xcb, 0x9e });
        gbc.writeMem(0xf048, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa32a);
        EXPECT(gbc.pc(), 0x3c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf048), 0x67);
        // CB 9E 00EF
        gbc.setState(0xd949, 0x79d2, 0x5630, 0xd6d8, 0x9dbd, 0x6fca, 0x0, 0x0);
        gbc.writeMem(0x6fca, { 0xe4 });
        gbc.writeMem(0xd949, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x79d2);
        EXPECT(gbc.pc(), 0xd94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd949), 0xcb);
        EXPECT(gbc.readMem(0xd94a), 0x9e);
        // CB 9E 00F2
        gbc.setState(0x3b0a, 0x6fe9, 0xd7b0, 0xd5, 0x3e8a, 0x703f, 0x0, 0x1);
        gbc.writeMem(0x3b0a, { 0xcb, 0x9e });
        gbc.writeMem(0x703f, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6fe9);
        EXPECT(gbc.pc(), 0x3b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 00F3
        gbc.setState(0xdb71, 0x5c83, 0x2e10, 0x3cae, 0xd7c1, 0xe2a7, 0x0, 0x1);
        gbc.writeMem(0xdb71, { 0xcb, 0x9e });
        gbc.writeMem(0xe2a7, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x5c83);
        EXPECT(gbc.pc(), 0xdb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb71), 0xcb);
        EXPECT(gbc.readMem(0xdb72), 0x9e);
        EXPECT(gbc.readMem(0xe2a7), 0xe0);
        // CB 9E 00F6
        gbc.setState(0x43d3, 0xe2, 0xb5c0, 0x9656, 0x90b7, 0xb2da, 0x1, 0x1);
        gbc.writeMem(0x43d3, { 0xcb, 0x9e });
        gbc.writeMem(0xb2da, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe2);
        EXPECT(gbc.pc(), 0x43d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2da), 0x1);
        // CB 9E 00F7
        gbc.setState(0x87fd, 0xb2df, 0x9ee0, 0xd618, 0x36c, 0xfd05, 0x0, 0x1);
        gbc.writeMem(0x87fd, { 0xcb, 0x9e });
        gbc.writeMem(0xfd05, { 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb2df);
        EXPECT(gbc.pc(), 0x87ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87fd), 0xcb);
        EXPECT(gbc.readMem(0x87fe), 0x9e);
        EXPECT(gbc.readMem(0xfd05), 0x25);
        // CB 9E 00F9
        gbc.setState(0x783d, 0x4f7d, 0x7740, 0x8acf, 0x212c, 0x2d04, 0x0, 0x0);
        gbc.writeMem(0x2d04, { 0x74 });
        gbc.writeMem(0x783d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4f7d);
        EXPECT(gbc.pc(), 0x783f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 00FB
        gbc.setState(0x5ea7, 0x6271, 0x88a0, 0xd73c, 0xf39b, 0xd176, 0x1, 0x1);
        gbc.writeMem(0x5ea7, { 0xcb, 0x9e });
        gbc.writeMem(0xd176, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6271);
        EXPECT(gbc.pc(), 0x5ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd176), 0x50);
        // CB 9E 00FD
        gbc.setState(0x281d, 0x3e7f, 0x4e80, 0x8534, 0x4c4, 0x8b26, 0x1, 0x0);
        gbc.writeMem(0x281d, { 0xcb, 0x9e });
        gbc.writeMem(0x8b26, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3e7f);
        EXPECT(gbc.pc(), 0x281f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b26), 0x64);
        // CB 9E 0100
        gbc.setState(0x3e6e, 0x1b23, 0x17f0, 0x65c8, 0x9226, 0xeb2f, 0x0, 0x1);
        gbc.writeMem(0x3e6e, { 0xcb, 0x9e });
        gbc.writeMem(0xeb2f, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1b23);
        EXPECT(gbc.pc(), 0x3e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb2f), 0xd3);
        // CB 9E 0101
        gbc.setState(0x392d, 0xa8c4, 0x2aa0, 0x339c, 0x1f62, 0x1453, 0x1, 0x1);
        gbc.writeMem(0x1453, { 0x57 });
        gbc.writeMem(0x392d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa8c4);
        EXPECT(gbc.pc(), 0x392f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0102
        gbc.setState(0x3c8d, 0x9139, 0x8430, 0xc8f8, 0x918, 0x889, 0x1, 0x1);
        gbc.writeMem(0x889, { 0x36 });
        gbc.writeMem(0x3c8d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9139);
        EXPECT(gbc.pc(), 0x3c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0103
        gbc.setState(0x9707, 0x8b82, 0xd060, 0x288f, 0x328f, 0xd041, 0x0, 0x0);
        gbc.writeMem(0x9707, { 0xcb, 0x9e });
        gbc.writeMem(0xd041, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8b82);
        EXPECT(gbc.pc(), 0x9709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9707), 0xcb);
        EXPECT(gbc.readMem(0x9708), 0x9e);
        EXPECT(gbc.readMem(0xd041), 0x61);
        // CB 9E 0104
        gbc.setState(0x5f6, 0x4ff6, 0x8160, 0xf6ec, 0x780f, 0xd1d7, 0x0, 0x1);
        gbc.writeMem(0x5f6, { 0xcb, 0x9e });
        gbc.writeMem(0xd1d7, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4ff6);
        EXPECT(gbc.pc(), 0x5f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d7), 0x77);
        // CB 9E 0105
        gbc.setState(0xdbeb, 0xcff6, 0x13f0, 0x8b6b, 0x27d9, 0x96f1, 0x0, 0x0);
        gbc.writeMem(0x96f1, { 0x3e });
        gbc.writeMem(0xdbeb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcff6);
        EXPECT(gbc.pc(), 0xdbed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f1), 0x36);
        EXPECT(gbc.readMem(0xdbeb), 0xcb);
        EXPECT(gbc.readMem(0xdbec), 0x9e);
        // CB 9E 0106
        gbc.setState(0x8948, 0xa85e, 0x63f0, 0x7816, 0xb4f6, 0xf0ec, 0x1, 0x0);
        gbc.writeMem(0x8948, { 0xcb, 0x9e });
        gbc.writeMem(0xf0ec, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa85e);
        EXPECT(gbc.pc(), 0x894a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8948), 0xcb);
        EXPECT(gbc.readMem(0x8949), 0x9e);
        EXPECT(gbc.readMem(0xf0ec), 0xb5);
        // CB 9E 0107
        gbc.setState(0xed3e, 0x5593, 0x3820, 0x2f5, 0x6dee, 0x8a7f, 0x0, 0x1);
        gbc.writeMem(0x8a7f, { 0x9b });
        gbc.writeMem(0xed3e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5593);
        EXPECT(gbc.pc(), 0xed40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a7f), 0x93);
        EXPECT(gbc.readMem(0xed3e), 0xcb);
        EXPECT(gbc.readMem(0xed3f), 0x9e);
        // CB 9E 0108
        gbc.setState(0x1f7e, 0x73dd, 0x5360, 0x1af2, 0xb671, 0xc001, 0x0, 0x0);
        gbc.writeMem(0x1f7e, { 0xcb, 0x9e });
        gbc.writeMem(0xc001, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x73dd);
        EXPECT(gbc.pc(), 0x1f80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc001), 0x76);
        // CB 9E 0109
        gbc.setState(0x1447, 0xfd2, 0xe5d0, 0x5c53, 0x3ef9, 0xb5f3, 0x0, 0x1);
        gbc.writeMem(0x1447, { 0xcb, 0x9e });
        gbc.writeMem(0xb5f3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfd2);
        EXPECT(gbc.pc(), 0x1449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5f3), 0x47);
        // CB 9E 010A
        gbc.setState(0x597e, 0x7107, 0x6430, 0x44f8, 0x3b8, 0xb37f, 0x1, 0x0);
        gbc.writeMem(0x597e, { 0xcb, 0x9e });
        gbc.writeMem(0xb37f, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7107);
        EXPECT(gbc.pc(), 0x5980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb37f), 0xb5);
        // CB 9E 010C
        gbc.setState(0x73cd, 0x5cb4, 0x46e0, 0xfcd9, 0x4e04, 0xb8e4, 0x1, 0x1);
        gbc.writeMem(0x73cd, { 0xcb, 0x9e });
        gbc.writeMem(0xb8e4, { 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5cb4);
        EXPECT(gbc.pc(), 0x73cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e4), 0x56);
        // CB 9E 010D
        gbc.setState(0x7f00, 0xc6b2, 0xa810, 0x46bf, 0x36e1, 0x9f78, 0x1, 0x1);
        gbc.writeMem(0x7f00, { 0xcb, 0x9e });
        gbc.writeMem(0x9f78, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc6b2);
        EXPECT(gbc.pc(), 0x7f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f78), 0xd0);
        // CB 9E 010F
        gbc.setState(0x9802, 0x97c2, 0x3fd0, 0x3212, 0x3a5a, 0xe4c1, 0x1, 0x0);
        gbc.writeMem(0x9802, { 0xcb, 0x9e });
        gbc.writeMem(0xe4c1, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x97c2);
        EXPECT(gbc.pc(), 0x9804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9802), 0xcb);
        EXPECT(gbc.readMem(0x9803), 0x9e);
        EXPECT(gbc.readMem(0xe4c1), 0x23);
        // CB 9E 0111
        gbc.setState(0x2e7f, 0x341a, 0xe90, 0xc2b0, 0x1e5c, 0x9c78, 0x1, 0x1);
        gbc.writeMem(0x2e7f, { 0xcb, 0x9e });
        gbc.writeMem(0x9c78, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x341a);
        EXPECT(gbc.pc(), 0x2e81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c78), 0xf4);
        // CB 9E 0112
        gbc.setState(0x171b, 0xb949, 0x8da0, 0xe915, 0x556a, 0xc6da, 0x1, 0x1);
        gbc.writeMem(0x171b, { 0xcb, 0x9e });
        gbc.writeMem(0xc6da, { 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb949);
        EXPECT(gbc.pc(), 0x171d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6da), 0x6);
        // CB 9E 0113
        gbc.setState(0xb20f, 0x1806, 0x1530, 0xa54e, 0x3422, 0xe2dd, 0x0, 0x0);
        gbc.writeMem(0xb20f, { 0xcb, 0x9e });
        gbc.writeMem(0xe2dd, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1806);
        EXPECT(gbc.pc(), 0xb211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb20f), 0xcb);
        EXPECT(gbc.readMem(0xb210), 0x9e);
        EXPECT(gbc.readMem(0xe2dd), 0x83);
        // CB 9E 0114
        gbc.setState(0x51ae, 0xde81, 0x1ff0, 0xd210, 0x62e1, 0xad06, 0x1, 0x0);
        gbc.writeMem(0x51ae, { 0xcb, 0x9e });
        gbc.writeMem(0xad06, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xde81);
        EXPECT(gbc.pc(), 0x51b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad06), 0xa5);
        // CB 9E 0115
        gbc.setState(0xcac2, 0xd6e9, 0xb750, 0x8618, 0x988b, 0x383, 0x0, 0x1);
        gbc.writeMem(0x383, { 0xd0 });
        gbc.writeMem(0xcac2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd6e9);
        EXPECT(gbc.pc(), 0xcac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac2), 0xcb);
        EXPECT(gbc.readMem(0xcac3), 0x9e);
        // CB 9E 0118
        gbc.setState(0x38b1, 0xf628, 0x890, 0xba95, 0xd75, 0xab07, 0x1, 0x0);
        gbc.writeMem(0x38b1, { 0xcb, 0x9e });
        gbc.writeMem(0xab07, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf628);
        EXPECT(gbc.pc(), 0x38b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab07), 0x7);
        // CB 9E 0119
        gbc.setState(0x1d26, 0x371e, 0x3e20, 0x6a19, 0x6955, 0x6670, 0x1, 0x0);
        gbc.writeMem(0x1d26, { 0xcb, 0x9e });
        gbc.writeMem(0x6670, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x371e);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 011A
        gbc.setState(0x4134, 0xa947, 0xb8d0, 0xdc91, 0xe282, 0xc4a4, 0x0, 0x1);
        gbc.writeMem(0x4134, { 0xcb, 0x9e });
        gbc.writeMem(0xc4a4, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa947);
        EXPECT(gbc.pc(), 0x4136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4a4), 0x77);
        // CB 9E 011B
        gbc.setState(0x82b8, 0x6c52, 0x6f30, 0xf959, 0x75a8, 0x5948, 0x0, 0x1);
        gbc.writeMem(0x5948, { 0x74 });
        gbc.writeMem(0x82b8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6c52);
        EXPECT(gbc.pc(), 0x82ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b8), 0xcb);
        EXPECT(gbc.readMem(0x82b9), 0x9e);
        // CB 9E 011C
        gbc.setState(0x4271, 0xd320, 0x3380, 0x3f5f, 0xce88, 0x6cc4, 0x1, 0x0);
        gbc.writeMem(0x4271, { 0xcb, 0x9e });
        gbc.writeMem(0x6cc4, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd320);
        EXPECT(gbc.pc(), 0x4273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 011D
        gbc.setState(0x7ff1, 0x24ab, 0xf360, 0x68d8, 0xb797, 0xfcc1, 0x0, 0x1);
        gbc.writeMem(0x7ff1, { 0xcb, 0x9e });
        gbc.writeMem(0xfcc1, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x24ab);
        EXPECT(gbc.pc(), 0x7ff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcc1), 0x7);
        // CB 9E 011E
        gbc.setState(0xb59b, 0x60e3, 0x1c00, 0x24bb, 0x4d96, 0xd806, 0x0, 0x1);
        gbc.writeMem(0xb59b, { 0xcb, 0x9e });
        gbc.writeMem(0xd806, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x60e3);
        EXPECT(gbc.pc(), 0xb59d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb59b), 0xcb);
        EXPECT(gbc.readMem(0xb59c), 0x9e);
        EXPECT(gbc.readMem(0xd806), 0x70);
        // CB 9E 011F
        gbc.setState(0x72aa, 0xc3ec, 0xb080, 0xb17f, 0xee4f, 0x2913, 0x1, 0x1);
        gbc.writeMem(0x2913, { 0x80 });
        gbc.writeMem(0x72aa, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc3ec);
        EXPECT(gbc.pc(), 0x72ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0121
        gbc.setState(0x5166, 0x5c6a, 0xb580, 0xaf9a, 0x91f1, 0x5d37, 0x1, 0x0);
        gbc.writeMem(0x5166, { 0xcb, 0x9e });
        gbc.writeMem(0x5d37, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5c6a);
        EXPECT(gbc.pc(), 0x5168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0123
        gbc.setState(0x4648, 0xf007, 0x8f20, 0xa277, 0x182d, 0x482e, 0x0, 0x1);
        gbc.writeMem(0x4648, { 0xcb, 0x9e });
        gbc.writeMem(0x482e, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf007);
        EXPECT(gbc.pc(), 0x464a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0124
        gbc.setState(0x13ee, 0xa29e, 0xf1b0, 0xe385, 0xf3e, 0x45a4, 0x1, 0x1);
        gbc.writeMem(0x13ee, { 0xcb, 0x9e });
        gbc.writeMem(0x45a4, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa29e);
        EXPECT(gbc.pc(), 0x13f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0125
        gbc.setState(0x7887, 0x62e9, 0xf9b0, 0xb9f, 0xb5d, 0x9a1, 0x0, 0x1);
        gbc.writeMem(0x9a1, { 0x47 });
        gbc.writeMem(0x7887, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x62e9);
        EXPECT(gbc.pc(), 0x7889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0127
        gbc.setState(0x6b36, 0x15d2, 0x4a50, 0xee87, 0xa2e7, 0x8df7, 0x1, 0x0);
        gbc.writeMem(0x6b36, { 0xcb, 0x9e });
        gbc.writeMem(0x8df7, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0x6b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df7), 0xe6);
        // CB 9E 0129
        gbc.setState(0x2bf6, 0xd052, 0x7ae0, 0x5afb, 0x8774, 0x3f9f, 0x1, 0x1);
        gbc.writeMem(0x2bf6, { 0xcb, 0x9e });
        gbc.writeMem(0x3f9f, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd052);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 012B
        gbc.setState(0x10b4, 0xd160, 0xee20, 0x319, 0xb1c5, 0xfe94, 0x0, 0x1);
        gbc.writeMem(0x10b4, { 0xcb, 0x9e });
        gbc.writeMem(0xfe94, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd160);
        EXPECT(gbc.pc(), 0x10b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe94), 0xf2);
        // CB 9E 012C
        gbc.setState(0x7c7, 0x7604, 0xa0a0, 0xd29d, 0x9269, 0x7247, 0x0, 0x1);
        gbc.writeMem(0x7c7, { 0xcb, 0x9e });
        gbc.writeMem(0x7247, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7604);
        EXPECT(gbc.pc(), 0x7c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 012D
        gbc.setState(0x3ea2, 0x18c1, 0x2d00, 0x85ae, 0xf9bb, 0x1ec7, 0x0, 0x1);
        gbc.writeMem(0x1ec7, { 0x43 });
        gbc.writeMem(0x3ea2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x18c1);
        EXPECT(gbc.pc(), 0x3ea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 012E
        gbc.setState(0x444d, 0xb70a, 0x4f90, 0x39fd, 0xe849, 0x163d, 0x0, 0x0);
        gbc.writeMem(0x163d, { 0x45 });
        gbc.writeMem(0x444d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xb70a);
        EXPECT(gbc.pc(), 0x444f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 012F
        gbc.setState(0xd63c, 0x2364, 0x8080, 0x2aa7, 0xbcff, 0xd68b, 0x0, 0x0);
        gbc.writeMem(0xd63c, { 0xcb, 0x9e });
        gbc.writeMem(0xd68b, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2364);
        EXPECT(gbc.pc(), 0xd63e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd63c), 0xcb);
        EXPECT(gbc.readMem(0xd63d), 0x9e);
        EXPECT(gbc.readMem(0xd68b), 0x42);
        // CB 9E 0130
        gbc.setState(0x92f8, 0x6a6, 0x3fc0, 0xee1c, 0x2102, 0xa001, 0x1, 0x0);
        gbc.writeMem(0x92f8, { 0xcb, 0x9e });
        gbc.writeMem(0xa001, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6a6);
        EXPECT(gbc.pc(), 0x92fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f8), 0xcb);
        EXPECT(gbc.readMem(0x92f9), 0x9e);
        EXPECT(gbc.readMem(0xa001), 0x14);
        // CB 9E 0131
        gbc.setState(0x553a, 0xc451, 0x4c70, 0x219, 0x61df, 0x5828, 0x0, 0x1);
        gbc.writeMem(0x553a, { 0xcb, 0x9e });
        gbc.writeMem(0x5828, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc451);
        EXPECT(gbc.pc(), 0x553c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0132
        gbc.setState(0x6085, 0xd4e7, 0x9090, 0xf972, 0x9dd3, 0x298c, 0x1, 0x0);
        gbc.writeMem(0x298c, { 0xc7 });
        gbc.writeMem(0x6085, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd4e7);
        EXPECT(gbc.pc(), 0x6087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0133
        gbc.setState(0x8865, 0xd205, 0x5e30, 0x402f, 0xe42e, 0x8e44, 0x0, 0x0);
        gbc.writeMem(0x8865, { 0xcb, 0x9e });
        gbc.writeMem(0x8e44, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd205);
        EXPECT(gbc.pc(), 0x8867);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8865), 0xcb);
        EXPECT(gbc.readMem(0x8866), 0x9e);
        EXPECT(gbc.readMem(0x8e44), 0xd7);
        // CB 9E 0135
        gbc.setState(0x68b2, 0x8e15, 0x3990, 0xc710, 0x39be, 0xf5ff, 0x1, 0x0);
        gbc.writeMem(0x68b2, { 0xcb, 0x9e });
        gbc.writeMem(0xf5ff, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8e15);
        EXPECT(gbc.pc(), 0x68b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf5ff), 0x32);
        // CB 9E 0136
        gbc.setState(0x374d, 0x9a0d, 0x3060, 0x78c6, 0xac8b, 0xdca7, 0x1, 0x1);
        gbc.writeMem(0x374d, { 0xcb, 0x9e });
        gbc.writeMem(0xdca7, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9a0d);
        EXPECT(gbc.pc(), 0x374f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca7), 0x81);
        // CB 9E 0137
        gbc.setState(0xd5b2, 0x1dd4, 0x56f0, 0x481c, 0x4047, 0xee80, 0x1, 0x0);
        gbc.writeMem(0xd5b2, { 0xcb, 0x9e });
        gbc.writeMem(0xee80, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1dd4);
        EXPECT(gbc.pc(), 0xd5b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b2), 0xcb);
        EXPECT(gbc.readMem(0xd5b3), 0x9e);
        EXPECT(gbc.readMem(0xee80), 0x30);
        // CB 9E 0138
        gbc.setState(0x944e, 0x4a64, 0xf8b0, 0xf7fb, 0x7588, 0xb4a7, 0x0, 0x0);
        gbc.writeMem(0x944e, { 0xcb, 0x9e });
        gbc.writeMem(0xb4a7, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4a64);
        EXPECT(gbc.pc(), 0x9450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x944e), 0xcb);
        EXPECT(gbc.readMem(0x944f), 0x9e);
        EXPECT(gbc.readMem(0xb4a7), 0x71);
        // CB 9E 0139
        gbc.setState(0x9f0, 0x267f, 0xeab0, 0x47f4, 0xfd8f, 0x5aaa, 0x1, 0x1);
        gbc.writeMem(0x9f0, { 0xcb, 0x9e });
        gbc.writeMem(0x5aaa, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x267f);
        EXPECT(gbc.pc(), 0x9f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 013A
        gbc.setState(0x4527, 0x777e, 0xb3b0, 0xf451, 0xe089, 0xe763, 0x0, 0x1);
        gbc.writeMem(0x4527, { 0xcb, 0x9e });
        gbc.writeMem(0xe763, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x777e);
        EXPECT(gbc.pc(), 0x4529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe763), 0xf2);
        // CB 9E 013C
        gbc.setState(0xb092, 0x9cb6, 0xa0, 0xa7b8, 0x4c0, 0xf9ef, 0x1, 0x1);
        gbc.writeMem(0xb092, { 0xcb, 0x9e });
        gbc.writeMem(0xf9ef, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9cb6);
        EXPECT(gbc.pc(), 0xb094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb092), 0xcb);
        EXPECT(gbc.readMem(0xb093), 0x9e);
        EXPECT(gbc.readMem(0xf9ef), 0x13);
        // CB 9E 013D
        gbc.setState(0x5f, 0x457c, 0x2ba0, 0x12b3, 0x3e1a, 0xabd0, 0x0, 0x0);
        gbc.writeMem(0x5f, { 0xcb, 0x9e });
        gbc.writeMem(0xabd0, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x457c);
        EXPECT(gbc.pc(), 0x61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd0), 0x23);
        // CB 9E 013F
        gbc.setState(0x6478, 0x9f14, 0x67e0, 0xf8d5, 0xa6cb, 0x4c88, 0x0, 0x0);
        gbc.writeMem(0x4c88, { 0x33 });
        gbc.writeMem(0x6478, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9f14);
        EXPECT(gbc.pc(), 0x647a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0141
        gbc.setState(0xd6a5, 0x85c1, 0x5e0, 0x501b, 0x6b40, 0xbe16, 0x1, 0x1);
        gbc.writeMem(0xbe16, { 0xf7 });
        gbc.writeMem(0xd6a5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x85c1);
        EXPECT(gbc.pc(), 0xd6a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe16), 0xf7);
        EXPECT(gbc.readMem(0xd6a5), 0xcb);
        EXPECT(gbc.readMem(0xd6a6), 0x9e);
        // CB 9E 0142
        gbc.setState(0xda6a, 0x40fa, 0x8d70, 0xfe20, 0x885b, 0x8f5c, 0x1, 0x0);
        gbc.writeMem(0x8f5c, { 0x54 });
        gbc.writeMem(0xda6a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x40fa);
        EXPECT(gbc.pc(), 0xda6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5c), 0x54);
        EXPECT(gbc.readMem(0xda6a), 0xcb);
        EXPECT(gbc.readMem(0xda6b), 0x9e);
        // CB 9E 0143
        gbc.setState(0x80f0, 0xc36f, 0xeab0, 0xecdd, 0x944a, 0x2edc, 0x1, 0x1);
        gbc.writeMem(0x2edc, { 0xc0 });
        gbc.writeMem(0x80f0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc36f);
        EXPECT(gbc.pc(), 0x80f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80f0), 0xcb);
        EXPECT(gbc.readMem(0x80f1), 0x9e);
        // CB 9E 0144
        gbc.setState(0xdfff, 0x49be, 0x3c90, 0x8e7a, 0x5239, 0x5f16, 0x1, 0x1);
        gbc.writeMem(0x5f16, { 0x5 });
        gbc.writeMem(0xdfff, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x49be);
        EXPECT(gbc.pc(), 0xe001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfff), 0xcb);
        EXPECT(gbc.readMem(0xe000), 0x9e);
        // CB 9E 0145
        gbc.setState(0x77e5, 0x77e8, 0x52f0, 0xbd55, 0x2da7, 0x741a, 0x0, 0x1);
        gbc.writeMem(0x741a, { 0x36 });
        gbc.writeMem(0x77e5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x77e8);
        EXPECT(gbc.pc(), 0x77e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0146
        gbc.setState(0x7211, 0xfc8a, 0x4390, 0xa7a8, 0x6b98, 0x8dd0, 0x1, 0x0);
        gbc.writeMem(0x7211, { 0xcb, 0x9e });
        gbc.writeMem(0x8dd0, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfc8a);
        EXPECT(gbc.pc(), 0x7213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd0), 0x13);
        // CB 9E 0147
        gbc.setState(0xbfb5, 0x3532, 0x3c50, 0x8c35, 0x845d, 0x8cf, 0x1, 0x0);
        gbc.writeMem(0x8cf, { 0x24 });
        gbc.writeMem(0xbfb5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3532);
        EXPECT(gbc.pc(), 0xbfb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb5), 0xcb);
        EXPECT(gbc.readMem(0xbfb6), 0x9e);
        // CB 9E 0148
        gbc.setState(0xd0e8, 0x2d54, 0xaa90, 0x552f, 0x4e6, 0x413a, 0x0, 0x1);
        gbc.writeMem(0x413a, { 0x42 });
        gbc.writeMem(0xd0e8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2d54);
        EXPECT(gbc.pc(), 0xd0ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0e8), 0xcb);
        EXPECT(gbc.readMem(0xd0e9), 0x9e);
        // CB 9E 0149
        gbc.setState(0xb94d, 0x2550, 0xadd0, 0xa9, 0xba89, 0x552b, 0x1, 0x0);
        gbc.writeMem(0x552b, { 0xa3 });
        gbc.writeMem(0xb94d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2550);
        EXPECT(gbc.pc(), 0xb94f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb94d), 0xcb);
        EXPECT(gbc.readMem(0xb94e), 0x9e);
        // CB 9E 014A
        gbc.setState(0x3f37, 0x5248, 0x5d60, 0x8e41, 0x616c, 0xb37a, 0x1, 0x1);
        gbc.writeMem(0x3f37, { 0xcb, 0x9e });
        gbc.writeMem(0xb37a, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5248);
        EXPECT(gbc.pc(), 0x3f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37a), 0xd1);
        // CB 9E 014B
        gbc.setState(0xc069, 0x4b62, 0xe290, 0x879, 0x4c3, 0x7727, 0x1, 0x0);
        gbc.writeMem(0x7727, { 0xc5 });
        gbc.writeMem(0xc069, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4b62);
        EXPECT(gbc.pc(), 0xc06b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc069), 0xcb);
        EXPECT(gbc.readMem(0xc06a), 0x9e);
        // CB 9E 014D
        gbc.setState(0x6311, 0x7055, 0xe540, 0x5a63, 0xdfdc, 0xdbf3, 0x0, 0x0);
        gbc.writeMem(0x6311, { 0xcb, 0x9e });
        gbc.writeMem(0xdbf3, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7055);
        EXPECT(gbc.pc(), 0x6313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf3), 0x67);
        // CB 9E 014E
        gbc.setState(0x4801, 0x4d8d, 0xaab0, 0x3456, 0x82ca, 0x4ec3, 0x0, 0x1);
        gbc.writeMem(0x4801, { 0xcb, 0x9e });
        gbc.writeMem(0x4ec3, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4d8d);
        EXPECT(gbc.pc(), 0x4803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 014F
        gbc.setState(0x8524, 0x9305, 0xde10, 0xbf81, 0x23ed, 0xaf3a, 0x0, 0x0);
        gbc.writeMem(0x8524, { 0xcb, 0x9e });
        gbc.writeMem(0xaf3a, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9305);
        EXPECT(gbc.pc(), 0x8526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8524), 0xcb);
        EXPECT(gbc.readMem(0x8525), 0x9e);
        EXPECT(gbc.readMem(0xaf3a), 0x7);
        // CB 9E 0151
        gbc.setState(0x98b2, 0x8545, 0x22c0, 0x2c0, 0xd218, 0x6a68, 0x0, 0x1);
        gbc.writeMem(0x6a68, { 0x16 });
        gbc.writeMem(0x98b2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8545);
        EXPECT(gbc.pc(), 0x98b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b2), 0xcb);
        EXPECT(gbc.readMem(0x98b3), 0x9e);
        // CB 9E 0153
        gbc.setState(0x9ea8, 0x3cc, 0x7a80, 0xfb55, 0x2be3, 0xaac6, 0x1, 0x0);
        gbc.writeMem(0x9ea8, { 0xcb, 0x9e });
        gbc.writeMem(0xaac6, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3cc);
        EXPECT(gbc.pc(), 0x9eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea8), 0xcb);
        EXPECT(gbc.readMem(0x9ea9), 0x9e);
        EXPECT(gbc.readMem(0xaac6), 0x63);
        // CB 9E 0155
        gbc.setState(0x6b34, 0x5a60, 0xeb00, 0xfade, 0x89fe, 0xdf53, 0x1, 0x0);
        gbc.writeMem(0x6b34, { 0xcb, 0x9e });
        gbc.writeMem(0xdf53, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5a60);
        EXPECT(gbc.pc(), 0x6b36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf53), 0xc5);
        // CB 9E 0156
        gbc.setState(0xa678, 0x1b88, 0x7400, 0x80fd, 0xd6c7, 0x2ba, 0x1, 0x0);
        gbc.writeMem(0x2ba, { 0xe4 });
        gbc.writeMem(0xa678, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1b88);
        EXPECT(gbc.pc(), 0xa67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa678), 0xcb);
        EXPECT(gbc.readMem(0xa679), 0x9e);
        // CB 9E 015A
        gbc.setState(0x6cb6, 0x4f5a, 0x8040, 0x691f, 0x9588, 0xb194, 0x1, 0x0);
        gbc.writeMem(0x6cb6, { 0xcb, 0x9e });
        gbc.writeMem(0xb194, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4f5a);
        EXPECT(gbc.pc(), 0x6cb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb194), 0xe5);
        // CB 9E 015B
        gbc.setState(0x4139, 0xd6ee, 0xfad0, 0xeea7, 0x5577, 0x273b, 0x0, 0x1);
        gbc.writeMem(0x273b, { 0x17 });
        gbc.writeMem(0x4139, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd6ee);
        EXPECT(gbc.pc(), 0x413b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 015C
        gbc.setState(0x4c97, 0x187c, 0x7470, 0x52c7, 0x7df8, 0xe3e3, 0x0, 0x1);
        gbc.writeMem(0x4c97, { 0xcb, 0x9e });
        gbc.writeMem(0xe3e3, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x187c);
        EXPECT(gbc.pc(), 0x4c99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3e3), 0xb5);
        // CB 9E 015D
        gbc.setState(0x1eb7, 0xe856, 0x8a20, 0x98cd, 0x217, 0x56f0, 0x0, 0x1);
        gbc.writeMem(0x1eb7, { 0xcb, 0x9e });
        gbc.writeMem(0x56f0, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe856);
        EXPECT(gbc.pc(), 0x1eb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 015E
        gbc.setState(0xc2cb, 0x4bc1, 0xf350, 0xee20, 0xf609, 0x10d4, 0x1, 0x0);
        gbc.writeMem(0x10d4, { 0xe6 });
        gbc.writeMem(0xc2cb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4bc1);
        EXPECT(gbc.pc(), 0xc2cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2cb), 0xcb);
        EXPECT(gbc.readMem(0xc2cc), 0x9e);
        // CB 9E 015F
        gbc.setState(0x4b87, 0xc604, 0x2e50, 0xfcc0, 0x897e, 0xa5dc, 0x1, 0x1);
        gbc.writeMem(0x4b87, { 0xcb, 0x9e });
        gbc.writeMem(0xa5dc, { 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc604);
        EXPECT(gbc.pc(), 0x4b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5dc), 0xe5);
        // CB 9E 0160
        gbc.setState(0xea35, 0xe09e, 0xbd90, 0x9b2b, 0x683b, 0xfbd5, 0x1, 0x0);
        gbc.writeMem(0xea35, { 0xcb, 0x9e });
        gbc.writeMem(0xfbd5, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xe09e);
        EXPECT(gbc.pc(), 0xea37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea35), 0xcb);
        EXPECT(gbc.readMem(0xea36), 0x9e);
        EXPECT(gbc.readMem(0xfbd5), 0x34);
        // CB 9E 0162
        gbc.setState(0x2128, 0xaad0, 0x9150, 0xa67a, 0x308f, 0xe652, 0x1, 0x0);
        gbc.writeMem(0x2128, { 0xcb, 0x9e });
        gbc.writeMem(0xe652, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xaad0);
        EXPECT(gbc.pc(), 0x212a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe652), 0x40);
        // CB 9E 0163
        gbc.setState(0x83e2, 0x7c08, 0x25c0, 0x2a7a, 0x1546, 0x982f, 0x0, 0x0);
        gbc.writeMem(0x83e2, { 0xcb, 0x9e });
        gbc.writeMem(0x982f, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7c08);
        EXPECT(gbc.pc(), 0x83e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e2), 0xcb);
        EXPECT(gbc.readMem(0x83e3), 0x9e);
        EXPECT(gbc.readMem(0x982f), 0x61);
        // CB 9E 0164
        gbc.setState(0x217e, 0xcc40, 0xb3c0, 0xf486, 0x6ed7, 0xe2c2, 0x1, 0x1);
        gbc.writeMem(0x217e, { 0xcb, 0x9e });
        gbc.writeMem(0xe2c2, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcc40);
        EXPECT(gbc.pc(), 0x2180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2c2), 0xe3);
        // CB 9E 0165
        gbc.setState(0x7d7a, 0x8aab, 0x5cf0, 0x1b68, 0xf3d4, 0xdbc3, 0x0, 0x0);
        gbc.writeMem(0x7d7a, { 0xcb, 0x9e });
        gbc.writeMem(0xdbc3, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8aab);
        EXPECT(gbc.pc(), 0x7d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbc3), 0xf5);
        // CB 9E 0167
        gbc.setState(0x863e, 0xa4c5, 0xeeb0, 0x3a22, 0xe2c6, 0x936d, 0x1, 0x0);
        gbc.writeMem(0x863e, { 0xcb, 0x9e });
        gbc.writeMem(0x936d, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa4c5);
        EXPECT(gbc.pc(), 0x8640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863e), 0xcb);
        EXPECT(gbc.readMem(0x863f), 0x9e);
        EXPECT(gbc.readMem(0x936d), 0x75);
        // CB 9E 0169
        gbc.setState(0xa8b5, 0x75f3, 0xbdb0, 0xb8ad, 0x9282, 0xcee1, 0x0, 0x1);
        gbc.writeMem(0xa8b5, { 0xcb, 0x9e });
        gbc.writeMem(0xcee1, { 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x75f3);
        EXPECT(gbc.pc(), 0xa8b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b5), 0xcb);
        EXPECT(gbc.readMem(0xa8b6), 0x9e);
        EXPECT(gbc.readMem(0xcee1), 0xb0);
        // CB 9E 016A
        gbc.setState(0xa89e, 0x55d1, 0xaae0, 0xae87, 0xd199, 0x3dbc, 0x1, 0x0);
        gbc.writeMem(0x3dbc, { 0x3 });
        gbc.writeMem(0xa89e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x55d1);
        EXPECT(gbc.pc(), 0xa8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89e), 0xcb);
        EXPECT(gbc.readMem(0xa89f), 0x9e);
        // CB 9E 016B
        gbc.setState(0x8c48, 0x4ac9, 0x1e0, 0xa36e, 0x1a4, 0x877a, 0x1, 0x1);
        gbc.writeMem(0x877a, { 0x1f });
        gbc.writeMem(0x8c48, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4ac9);
        EXPECT(gbc.pc(), 0x8c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877a), 0x17);
        EXPECT(gbc.readMem(0x8c48), 0xcb);
        EXPECT(gbc.readMem(0x8c49), 0x9e);
        // CB 9E 016C
        gbc.setState(0x4b4c, 0x9450, 0xc420, 0xdf88, 0xd964, 0xff9c, 0x1, 0x1);
        gbc.writeMem(0x4b4c, { 0xcb, 0x9e });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9450);
        EXPECT(gbc.pc(), 0x4b4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // CB 9E 016D
        gbc.setState(0x9704, 0xeec2, 0x1b00, 0x8e6d, 0x3caa, 0x5146, 0x1, 0x1);
        gbc.writeMem(0x5146, { 0x71 });
        gbc.writeMem(0x9704, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xeec2);
        EXPECT(gbc.pc(), 0x9706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9704), 0xcb);
        EXPECT(gbc.readMem(0x9705), 0x9e);
        // CB 9E 016F
        gbc.setState(0x8151, 0xc84d, 0x25c0, 0x6268, 0xe785, 0xbe53, 0x1, 0x0);
        gbc.writeMem(0x8151, { 0xcb, 0x9e });
        gbc.writeMem(0xbe53, { 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc84d);
        EXPECT(gbc.pc(), 0x8153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8151), 0xcb);
        EXPECT(gbc.readMem(0x8152), 0x9e);
        EXPECT(gbc.readMem(0xbe53), 0x70);
        // CB 9E 0170
        gbc.setState(0xbdd4, 0x5068, 0xa100, 0x1d43, 0x147a, 0xf1f1, 0x0, 0x0);
        gbc.writeMem(0xbdd4, { 0xcb, 0x9e });
        gbc.writeMem(0xf1f1, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5068);
        EXPECT(gbc.pc(), 0xbdd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd4), 0xcb);
        EXPECT(gbc.readMem(0xbdd5), 0x9e);
        EXPECT(gbc.readMem(0xf1f1), 0x42);
        // CB 9E 0171
        gbc.setState(0x4564, 0xd6f, 0xeb60, 0x544b, 0xdc1a, 0xdd57, 0x0, 0x0);
        gbc.writeMem(0x4564, { 0xcb, 0x9e });
        gbc.writeMem(0xdd57, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd6f);
        EXPECT(gbc.pc(), 0x4566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd57), 0x92);
        // CB 9E 0172
        gbc.setState(0x7f53, 0xb5a, 0x8c60, 0x7e2f, 0x32da, 0xafee, 0x0, 0x0);
        gbc.writeMem(0x7f53, { 0xcb, 0x9e });
        gbc.writeMem(0xafee, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb5a);
        EXPECT(gbc.pc(), 0x7f55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafee), 0x81);
        // CB 9E 0173
        gbc.setState(0xd2cf, 0xac16, 0xb5e0, 0x6ae5, 0x6539, 0x93d2, 0x1, 0x0);
        gbc.writeMem(0x93d2, { 0xbb });
        gbc.writeMem(0xd2cf, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xac16);
        EXPECT(gbc.pc(), 0xd2d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d2), 0xb3);
        EXPECT(gbc.readMem(0xd2cf), 0xcb);
        EXPECT(gbc.readMem(0xd2d0), 0x9e);
        // CB 9E 0174
        gbc.setState(0xdcd4, 0xc5b3, 0xe2c0, 0x11f0, 0x8362, 0xb3d4, 0x1, 0x0);
        gbc.writeMem(0xb3d4, { 0xa8 });
        gbc.writeMem(0xdcd4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xc5b3);
        EXPECT(gbc.pc(), 0xdcd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3d4), 0xa0);
        EXPECT(gbc.readMem(0xdcd4), 0xcb);
        EXPECT(gbc.readMem(0xdcd5), 0x9e);
        // CB 9E 0177
        gbc.setState(0xa0ac, 0x44b7, 0x14d0, 0x30c0, 0x8fec, 0x5232, 0x0, 0x0);
        gbc.writeMem(0x5232, { 0xd4 });
        gbc.writeMem(0xa0ac, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x44b7);
        EXPECT(gbc.pc(), 0xa0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ac), 0xcb);
        EXPECT(gbc.readMem(0xa0ad), 0x9e);
        // CB 9E 0179
        gbc.setState(0x4707, 0xe530, 0xa360, 0xfb03, 0x5a82, 0x24af, 0x0, 0x0);
        gbc.writeMem(0x24af, { 0xf7 });
        gbc.writeMem(0x4707, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe530);
        EXPECT(gbc.pc(), 0x4709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 017A
        gbc.setState(0x9174, 0x5b1e, 0x5ae0, 0x8951, 0xd560, 0x243d, 0x1, 0x0);
        gbc.writeMem(0x243d, { 0x51 });
        gbc.writeMem(0x9174, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x5b1e);
        EXPECT(gbc.pc(), 0x9176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9174), 0xcb);
        EXPECT(gbc.readMem(0x9175), 0x9e);
        // CB 9E 017B
        gbc.setState(0xd407, 0xb67d, 0x60b0, 0xe097, 0xcb77, 0xe251, 0x1, 0x1);
        gbc.writeMem(0xd407, { 0xcb, 0x9e });
        gbc.writeMem(0xe251, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb67d);
        EXPECT(gbc.pc(), 0xd409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd407), 0xcb);
        EXPECT(gbc.readMem(0xd408), 0x9e);
        EXPECT(gbc.readMem(0xe251), 0x31);
        // CB 9E 017D
        gbc.setState(0x939a, 0xb30, 0xa5a0, 0x1fd3, 0xc19, 0x5501, 0x0, 0x1);
        gbc.writeMem(0x5501, { 0xc4 });
        gbc.writeMem(0x939a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb30);
        EXPECT(gbc.pc(), 0x939c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x939a), 0xcb);
        EXPECT(gbc.readMem(0x939b), 0x9e);
        // CB 9E 017E
        gbc.setState(0xe53e, 0xce67, 0xe920, 0x9a6c, 0xed2, 0x710e, 0x0, 0x0);
        gbc.writeMem(0x710e, { 0xf6 });
        gbc.writeMem(0xe53e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xce67);
        EXPECT(gbc.pc(), 0xe540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe53e), 0xcb);
        EXPECT(gbc.readMem(0xe53f), 0x9e);
        // CB 9E 0180
        gbc.setState(0xd1f8, 0x471f, 0xd250, 0xf7e6, 0xfa99, 0xbb34, 0x1, 0x0);
        gbc.writeMem(0xbb34, { 0x3d });
        gbc.writeMem(0xd1f8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x471f);
        EXPECT(gbc.pc(), 0xd1fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb34), 0x35);
        EXPECT(gbc.readMem(0xd1f8), 0xcb);
        EXPECT(gbc.readMem(0xd1f9), 0x9e);
        // CB 9E 0183
        gbc.setState(0x2bee, 0x797b, 0xb1d0, 0xee02, 0x7e23, 0x31b3, 0x0, 0x0);
        gbc.writeMem(0x2bee, { 0xcb, 0x9e });
        gbc.writeMem(0x31b3, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x797b);
        EXPECT(gbc.pc(), 0x2bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0184
        gbc.setState(0xb510, 0xbe5e, 0x13a0, 0x7c01, 0xda, 0x6f7e, 0x1, 0x1);
        gbc.writeMem(0x6f7e, { 0x66 });
        gbc.writeMem(0xb510, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xbe5e);
        EXPECT(gbc.pc(), 0xb512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb510), 0xcb);
        EXPECT(gbc.readMem(0xb511), 0x9e);
        // CB 9E 0185
        gbc.setState(0xafd8, 0xfbd4, 0x9ba0, 0xf3d7, 0x2a80, 0x7781, 0x0, 0x1);
        gbc.writeMem(0x7781, { 0x37 });
        gbc.writeMem(0xafd8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xfbd4);
        EXPECT(gbc.pc(), 0xafda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd8), 0xcb);
        EXPECT(gbc.readMem(0xafd9), 0x9e);
        // CB 9E 0186
        gbc.setState(0x3584, 0x6b32, 0x1b10, 0xbcbd, 0x9bfe, 0x8a3c, 0x1, 0x1);
        gbc.writeMem(0x3584, { 0xcb, 0x9e });
        gbc.writeMem(0x8a3c, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6b32);
        EXPECT(gbc.pc(), 0x3586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a3c), 0xd6);
        // CB 9E 0187
        gbc.setState(0x7435, 0xa9eb, 0x3e50, 0x620f, 0x8408, 0x2f35, 0x1, 0x1);
        gbc.writeMem(0x2f35, { 0x22 });
        gbc.writeMem(0x7435, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa9eb);
        EXPECT(gbc.pc(), 0x7437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0188
        gbc.setState(0x81eb, 0x19ea, 0x15e0, 0x2db, 0x1c9e, 0x26e9, 0x1, 0x0);
        gbc.writeMem(0x26e9, { 0x16 });
        gbc.writeMem(0x81eb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x19ea);
        EXPECT(gbc.pc(), 0x81ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81eb), 0xcb);
        EXPECT(gbc.readMem(0x81ec), 0x9e);
        // CB 9E 018B
        gbc.setState(0x180d, 0xcd86, 0xf4a0, 0x97b4, 0xad23, 0xc451, 0x0, 0x1);
        gbc.writeMem(0x180d, { 0xcb, 0x9e });
        gbc.writeMem(0xc451, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcd86);
        EXPECT(gbc.pc(), 0x180f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc451), 0x16);
        // CB 9E 018D
        gbc.setState(0x114f, 0x90f0, 0xecd0, 0xfa8a, 0x2bfb, 0x461, 0x0, 0x0);
        gbc.writeMem(0x461, { 0x17 });
        gbc.writeMem(0x114f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x90f0);
        EXPECT(gbc.pc(), 0x1151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 018E
        gbc.setState(0xdf67, 0x6f38, 0x56b0, 0xca14, 0x61a, 0xfcd5, 0x1, 0x0);
        gbc.writeMem(0xdf67, { 0xcb, 0x9e });
        gbc.writeMem(0xfcd5, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6f38);
        EXPECT(gbc.pc(), 0xdf69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf67), 0xcb);
        EXPECT(gbc.readMem(0xdf68), 0x9e);
        EXPECT(gbc.readMem(0xfcd5), 0xc5);
        // CB 9E 018F
        gbc.setState(0x9260, 0x7cf5, 0xe7a0, 0xe81f, 0x20bf, 0xa5dd, 0x0, 0x0);
        gbc.writeMem(0x9260, { 0xcb, 0x9e });
        gbc.writeMem(0xa5dd, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7cf5);
        EXPECT(gbc.pc(), 0x9262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9260), 0xcb);
        EXPECT(gbc.readMem(0x9261), 0x9e);
        EXPECT(gbc.readMem(0xa5dd), 0x96);
        // CB 9E 0190
        gbc.setState(0x13f4, 0x75a5, 0xe540, 0x7f42, 0x1aa7, 0x2056, 0x0, 0x0);
        gbc.writeMem(0x13f4, { 0xcb, 0x9e });
        gbc.writeMem(0x2056, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x75a5);
        EXPECT(gbc.pc(), 0x13f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0191
        gbc.setState(0xbf69, 0x24fc, 0x6c30, 0x35b0, 0xd8bb, 0xa0ff, 0x0, 0x0);
        gbc.writeMem(0xa0ff, { 0x7 });
        gbc.writeMem(0xbf69, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x24fc);
        EXPECT(gbc.pc(), 0xbf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ff), 0x7);
        EXPECT(gbc.readMem(0xbf69), 0xcb);
        EXPECT(gbc.readMem(0xbf6a), 0x9e);
        // CB 9E 0194
        gbc.setState(0x3a7b, 0x4f1e, 0x160, 0xda25, 0x1f2a, 0xff1e, 0x0, 0x0);
        gbc.writeMem(0x3a7b, { 0xcb, 0x9e });
        gbc.writeMem(0xff1e, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4f1e);
        EXPECT(gbc.pc(), 0x3a7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff1e), 0x73);
        // CB 9E 0196
        gbc.setState(0xe561, 0x65df, 0xe00, 0x15f4, 0x62a6, 0x8920, 0x1, 0x0);
        gbc.writeMem(0x8920, { 0xa5 });
        gbc.writeMem(0xe561, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x65df);
        EXPECT(gbc.pc(), 0xe563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8920), 0xa5);
        EXPECT(gbc.readMem(0xe561), 0xcb);
        EXPECT(gbc.readMem(0xe562), 0x9e);
        // CB 9E 0197
        gbc.setState(0x7751, 0xc875, 0xc780, 0xc8e9, 0x9f2b, 0xa425, 0x0, 0x0);
        gbc.writeMem(0x7751, { 0xcb, 0x9e });
        gbc.writeMem(0xa425, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc875);
        EXPECT(gbc.pc(), 0x7753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa425), 0xa7);
        // CB 9E 0198
        gbc.setState(0x6206, 0xe7f9, 0x7a70, 0xcf1, 0xc57d, 0xc7ec, 0x0, 0x0);
        gbc.writeMem(0x6206, { 0xcb, 0x9e });
        gbc.writeMem(0xc7ec, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe7f9);
        EXPECT(gbc.pc(), 0x6208);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ec), 0x57);
        // CB 9E 0199
        gbc.setState(0xec6e, 0xa71e, 0x67e0, 0x371d, 0xeee4, 0xb2bd, 0x1, 0x1);
        gbc.writeMem(0xb2bd, { 0xbc });
        gbc.writeMem(0xec6e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa71e);
        EXPECT(gbc.pc(), 0xec70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2bd), 0xb4);
        EXPECT(gbc.readMem(0xec6e), 0xcb);
        EXPECT(gbc.readMem(0xec6f), 0x9e);
        // CB 9E 019B
        gbc.setState(0xc9a3, 0x52f4, 0x75f0, 0x35eb, 0x6398, 0xec56, 0x1, 0x1);
        gbc.writeMem(0xc9a3, { 0xcb, 0x9e });
        gbc.writeMem(0xec56, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x52f4);
        EXPECT(gbc.pc(), 0xc9a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a3), 0xcb);
        EXPECT(gbc.readMem(0xc9a4), 0x9e);
        EXPECT(gbc.readMem(0xec56), 0x6);
        // CB 9E 019C
        gbc.setState(0xeee4, 0x8a53, 0xde70, 0xb536, 0x1c16, 0xa110, 0x1, 0x0);
        gbc.writeMem(0xa110, { 0x6f });
        gbc.writeMem(0xeee4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8a53);
        EXPECT(gbc.pc(), 0xeee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa110), 0x67);
        EXPECT(gbc.readMem(0xeee4), 0xcb);
        EXPECT(gbc.readMem(0xeee5), 0x9e);
        // CB 9E 019D
        gbc.setState(0x2f94, 0x8ca6, 0xc880, 0xec0c, 0xf9e7, 0x20b5, 0x0, 0x1);
        gbc.writeMem(0x20b5, { 0x73 });
        gbc.writeMem(0x2f94, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8ca6);
        EXPECT(gbc.pc(), 0x2f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 019F
        gbc.setState(0xd087, 0xca4d, 0x3180, 0xea94, 0x63a7, 0xfd77, 0x0, 0x1);
        gbc.writeMem(0xd087, { 0xcb, 0x9e });
        gbc.writeMem(0xfd77, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xca4d);
        EXPECT(gbc.pc(), 0xd089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd087), 0xcb);
        EXPECT(gbc.readMem(0xd088), 0x9e);
        EXPECT(gbc.readMem(0xfd77), 0x40);
        // CB 9E 01A0
        gbc.setState(0x2847, 0xab50, 0xfe60, 0xa7b2, 0xc1e3, 0xd289, 0x0, 0x1);
        gbc.writeMem(0x2847, { 0xcb, 0x9e });
        gbc.writeMem(0xd289, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xab50);
        EXPECT(gbc.pc(), 0x2849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd289), 0x41);
        // CB 9E 01A2
        gbc.setState(0xeefc, 0xa09f, 0x7700, 0xa918, 0x191f, 0x6de2, 0x1, 0x1);
        gbc.writeMem(0x6de2, { 0x56 });
        gbc.writeMem(0xeefc, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa09f);
        EXPECT(gbc.pc(), 0xeefe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeefc), 0xcb);
        EXPECT(gbc.readMem(0xeefd), 0x9e);
        // CB 9E 01A3
        gbc.setState(0x8bbb, 0xd08b, 0xee0, 0x2a9e, 0x38ec, 0xe536, 0x1, 0x0);
        gbc.writeMem(0x8bbb, { 0xcb, 0x9e });
        gbc.writeMem(0xe536, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd08b);
        EXPECT(gbc.pc(), 0x8bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bbb), 0xcb);
        EXPECT(gbc.readMem(0x8bbc), 0x9e);
        EXPECT(gbc.readMem(0xe536), 0xf0);
        // CB 9E 01A6
        gbc.setState(0x438, 0x7ab4, 0xfe10, 0xe73c, 0x8918, 0x3ff0, 0x0, 0x0);
        gbc.writeMem(0x438, { 0xcb, 0x9e });
        gbc.writeMem(0x3ff0, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7ab4);
        EXPECT(gbc.pc(), 0x43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 01A9
        gbc.setState(0x12dd, 0x67c0, 0x9e40, 0x2cfd, 0xd8a7, 0x92f8, 0x1, 0x0);
        gbc.writeMem(0x12dd, { 0xcb, 0x9e });
        gbc.writeMem(0x92f8, { 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x67c0);
        EXPECT(gbc.pc(), 0x12df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92f8), 0x87);
        // CB 9E 01AA
        gbc.setState(0xc631, 0x8bbd, 0xbb40, 0x8937, 0x8884, 0xd5ed, 0x1, 0x0);
        gbc.writeMem(0xc631, { 0xcb, 0x9e });
        gbc.writeMem(0xd5ed, { 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8bbd);
        EXPECT(gbc.pc(), 0xc633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc631), 0xcb);
        EXPECT(gbc.readMem(0xc632), 0x9e);
        EXPECT(gbc.readMem(0xd5ed), 0xb3);
        // CB 9E 01AB
        gbc.setState(0x2f4e, 0xef98, 0xa0c0, 0x6063, 0xea5c, 0xefe8, 0x1, 0x0);
        gbc.writeMem(0x2f4e, { 0xcb, 0x9e });
        gbc.writeMem(0xefe8, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xef98);
        EXPECT(gbc.pc(), 0x2f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe8), 0x23);
        // CB 9E 01AD
        gbc.setState(0xeb06, 0xec7e, 0x9bb0, 0x2611, 0xcf6f, 0x8df3, 0x1, 0x1);
        gbc.writeMem(0x8df3, { 0xca });
        gbc.writeMem(0xeb06, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xec7e);
        EXPECT(gbc.pc(), 0xeb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df3), 0xc2);
        EXPECT(gbc.readMem(0xeb06), 0xcb);
        EXPECT(gbc.readMem(0xeb07), 0x9e);
        // CB 9E 01B1
        gbc.setState(0xafa3, 0x940a, 0x8360, 0x664b, 0x7aec, 0xc89, 0x0, 0x0);
        gbc.writeMem(0xc89, { 0x61 });
        gbc.writeMem(0xafa3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x940a);
        EXPECT(gbc.pc(), 0xafa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa3), 0xcb);
        EXPECT(gbc.readMem(0xafa4), 0x9e);
        // CB 9E 01B2
        gbc.setState(0x7711, 0xa324, 0x3f90, 0xfaeb, 0x35fe, 0x425, 0x1, 0x0);
        gbc.writeMem(0x425, { 0xc2 });
        gbc.writeMem(0x7711, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa324);
        EXPECT(gbc.pc(), 0x7713);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 01B3
        gbc.setState(0x60fe, 0x9b4c, 0xa930, 0x611d, 0x923a, 0xc1f2, 0x1, 0x0);
        gbc.writeMem(0x60fe, { 0xcb, 0x9e });
        gbc.writeMem(0xc1f2, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9b4c);
        EXPECT(gbc.pc(), 0x6100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1f2), 0x2);
        // CB 9E 01B6
        gbc.setState(0xd854, 0x49ae, 0x490, 0x2921, 0xae8b, 0xc3a1, 0x0, 0x0);
        gbc.writeMem(0xc3a1, { 0x57 });
        gbc.writeMem(0xd854, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x49ae);
        EXPECT(gbc.pc(), 0xd856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3a1), 0x57);
        EXPECT(gbc.readMem(0xd854), 0xcb);
        EXPECT(gbc.readMem(0xd855), 0x9e);
        // CB 9E 01B7
        gbc.setState(0x381b, 0x726b, 0xe380, 0x15ed, 0x939c, 0x809b, 0x0, 0x0);
        gbc.writeMem(0x381b, { 0xcb, 0x9e });
        gbc.writeMem(0x809b, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0x381d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809b), 0x22);
        // CB 9E 01B8
        gbc.setState(0xd2cc, 0x909f, 0x3f30, 0xdb02, 0x3d63, 0xc94d, 0x1, 0x1);
        gbc.writeMem(0xc94d, { 0xa8 });
        gbc.writeMem(0xd2cc, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x909f);
        EXPECT(gbc.pc(), 0xd2ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc94d), 0xa0);
        EXPECT(gbc.readMem(0xd2cc), 0xcb);
        EXPECT(gbc.readMem(0xd2cd), 0x9e);
        // CB 9E 01B9
        gbc.setState(0xcb8b, 0xf172, 0x78b0, 0xb01d, 0xe48f, 0xbdd5, 0x0, 0x0);
        gbc.writeMem(0xbdd5, { 0xe2 });
        gbc.writeMem(0xcb8b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0xcb8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdd5), 0xe2);
        EXPECT(gbc.readMem(0xcb8b), 0xcb);
        EXPECT(gbc.readMem(0xcb8c), 0x9e);
        // CB 9E 01BA
        gbc.setState(0x87d9, 0x5ea9, 0xa6a0, 0xb293, 0x65fc, 0xf5ae, 0x1, 0x0);
        gbc.writeMem(0x87d9, { 0xcb, 0x9e });
        gbc.writeMem(0xf5ae, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5ea9);
        EXPECT(gbc.pc(), 0x87db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d9), 0xcb);
        EXPECT(gbc.readMem(0x87da), 0x9e);
        EXPECT(gbc.readMem(0xf5ae), 0x52);
        // CB 9E 01BB
        gbc.setState(0x129c, 0x4bb8, 0x4570, 0x2a25, 0x6705, 0xd138, 0x1, 0x0);
        gbc.writeMem(0x129c, { 0xcb, 0x9e });
        gbc.writeMem(0xd138, { 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4bb8);
        EXPECT(gbc.pc(), 0x129e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd138), 0x76);
        // CB 9E 01BC
        gbc.setState(0x3e39, 0xae2a, 0xf750, 0x9eaa, 0x80dd, 0x1d3e, 0x1, 0x0);
        gbc.writeMem(0x1d3e, { 0x85 });
        gbc.writeMem(0x3e39, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xae2a);
        EXPECT(gbc.pc(), 0x3e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 01BD
        gbc.setState(0x7af7, 0x2d95, 0xe640, 0x37c6, 0xe171, 0xbb1a, 0x1, 0x0);
        gbc.writeMem(0x7af7, { 0xcb, 0x9e });
        gbc.writeMem(0xbb1a, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2d95);
        EXPECT(gbc.pc(), 0x7af9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1a), 0x90);
        // CB 9E 01BF
        gbc.setState(0x53d1, 0xb90a, 0x5f30, 0xa221, 0x3e2f, 0x7995, 0x1, 0x0);
        gbc.writeMem(0x53d1, { 0xcb, 0x9e });
        gbc.writeMem(0x7995, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb90a);
        EXPECT(gbc.pc(), 0x53d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 01C1
        gbc.setState(0xe1b3, 0x3093, 0x3070, 0x6b68, 0x8bb2, 0xd52f, 0x1, 0x1);
        gbc.writeMem(0xd52f, { 0xfe });
        gbc.writeMem(0xe1b3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3093);
        EXPECT(gbc.pc(), 0xe1b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd52f), 0xf6);
        EXPECT(gbc.readMem(0xe1b3), 0xcb);
        EXPECT(gbc.readMem(0xe1b4), 0x9e);
        // CB 9E 01C2
        gbc.setState(0x7af1, 0xfc15, 0x8910, 0x6f9e, 0x1cd5, 0xe75a, 0x0, 0x0);
        gbc.writeMem(0x7af1, { 0xcb, 0x9e });
        gbc.writeMem(0xe75a, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfc15);
        EXPECT(gbc.pc(), 0x7af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe75a), 0x43);
        // CB 9E 01C3
        gbc.setState(0x186a, 0x2f9d, 0x98a0, 0x2523, 0xd992, 0xd99d, 0x1, 0x1);
        gbc.writeMem(0x186a, { 0xcb, 0x9e });
        gbc.writeMem(0xd99d, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2f9d);
        EXPECT(gbc.pc(), 0x186c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99d), 0x75);
        // CB 9E 01C4
        gbc.setState(0xac73, 0xfab0, 0x48c0, 0xf1a6, 0x4b2e, 0x3af5, 0x1, 0x0);
        gbc.writeMem(0x3af5, { 0x12 });
        gbc.writeMem(0xac73, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfab0);
        EXPECT(gbc.pc(), 0xac75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac73), 0xcb);
        EXPECT(gbc.readMem(0xac74), 0x9e);
        // CB 9E 01C6
        gbc.setState(0x1438, 0xbb81, 0x8f50, 0x5761, 0xf452, 0x83df, 0x0, 0x0);
        gbc.writeMem(0x1438, { 0xcb, 0x9e });
        gbc.writeMem(0x83df, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbb81);
        EXPECT(gbc.pc(), 0x143a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83df), 0x94);
        // CB 9E 01C7
        gbc.setState(0x6f2b, 0xc6f, 0xb960, 0x35c4, 0xd2f, 0x65c9, 0x1, 0x1);
        gbc.writeMem(0x65c9, { 0xe0 });
        gbc.writeMem(0x6f2b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc6f);
        EXPECT(gbc.pc(), 0x6f2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 01C8
        gbc.setState(0x6a66, 0x9da6, 0xf390, 0x1efd, 0x1fd7, 0x2882, 0x0, 0x0);
        gbc.writeMem(0x2882, { 0xb6 });
        gbc.writeMem(0x6a66, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9da6);
        EXPECT(gbc.pc(), 0x6a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 01CA
        gbc.setState(0xe428, 0x9630, 0xcb70, 0xe466, 0x9526, 0x73be, 0x0, 0x0);
        gbc.writeMem(0x73be, { 0x74 });
        gbc.writeMem(0xe428, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9630);
        EXPECT(gbc.pc(), 0xe42a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe428), 0xcb);
        EXPECT(gbc.readMem(0xe429), 0x9e);
        // CB 9E 01CB
        gbc.setState(0x35a3, 0x5282, 0xbe20, 0x4561, 0xc23c, 0x4cc4, 0x1, 0x0);
        gbc.writeMem(0x35a3, { 0xcb, 0x9e });
        gbc.writeMem(0x4cc4, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5282);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 01CE
        gbc.setState(0xb19f, 0x9b15, 0x64d0, 0xfebb, 0x7b61, 0xf476, 0x0, 0x1);
        gbc.writeMem(0xb19f, { 0xcb, 0x9e });
        gbc.writeMem(0xf476, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9b15);
        EXPECT(gbc.pc(), 0xb1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19f), 0xcb);
        EXPECT(gbc.readMem(0xb1a0), 0x9e);
        EXPECT(gbc.readMem(0xf476), 0x64);
        // CB 9E 01D0
        gbc.setState(0xc0b8, 0xf0b4, 0x3ae0, 0xb590, 0xab72, 0xc1bc, 0x0, 0x1);
        gbc.writeMem(0xc0b8, { 0xcb, 0x9e });
        gbc.writeMem(0xc1bc, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf0b4);
        EXPECT(gbc.pc(), 0xc0ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b8), 0xcb);
        EXPECT(gbc.readMem(0xc0b9), 0x9e);
        EXPECT(gbc.readMem(0xc1bc), 0x24);
        // CB 9E 01D1
        gbc.setState(0x628e, 0x397a, 0xb090, 0x9e32, 0x5022, 0xe19e, 0x0, 0x0);
        gbc.writeMem(0x628e, { 0xcb, 0x9e });
        gbc.writeMem(0xe19e, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x397a);
        EXPECT(gbc.pc(), 0x6290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe19e), 0xc1);
        // CB 9E 01D2
        gbc.setState(0x8deb, 0xb4aa, 0xa520, 0xe798, 0xe781, 0x3519, 0x1, 0x0);
        gbc.writeMem(0x3519, { 0x32 });
        gbc.writeMem(0x8deb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb4aa);
        EXPECT(gbc.pc(), 0x8ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8deb), 0xcb);
        EXPECT(gbc.readMem(0x8dec), 0x9e);
        // CB 9E 01D3
        gbc.setState(0x5a93, 0xd9d1, 0x5890, 0x41a0, 0xd963, 0x91e8, 0x1, 0x0);
        gbc.writeMem(0x5a93, { 0xcb, 0x9e });
        gbc.writeMem(0x91e8, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd9d1);
        EXPECT(gbc.pc(), 0x5a95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91e8), 0x1);
        // CB 9E 01D4
        gbc.setState(0xa996, 0x6ef, 0x3000, 0xb940, 0x4361, 0xd6da, 0x1, 0x0);
        gbc.writeMem(0xa996, { 0xcb, 0x9e });
        gbc.writeMem(0xd6da, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6ef);
        EXPECT(gbc.pc(), 0xa998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa996), 0xcb);
        EXPECT(gbc.readMem(0xa997), 0x9e);
        EXPECT(gbc.readMem(0xd6da), 0xb2);
        // CB 9E 01D5
        gbc.setState(0x91bb, 0xf9c6, 0xc690, 0x352e, 0xcc13, 0x3675, 0x1, 0x1);
        gbc.writeMem(0x3675, { 0xb1 });
        gbc.writeMem(0x91bb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf9c6);
        EXPECT(gbc.pc(), 0x91bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91bb), 0xcb);
        EXPECT(gbc.readMem(0x91bc), 0x9e);
        // CB 9E 01D6
        gbc.setState(0xd37e, 0xe526, 0x7080, 0x6b35, 0x427e, 0xfb70, 0x1, 0x0);
        gbc.writeMem(0xd37e, { 0xcb, 0x9e });
        gbc.writeMem(0xfb70, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe526);
        EXPECT(gbc.pc(), 0xd380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37e), 0xcb);
        EXPECT(gbc.readMem(0xd37f), 0x9e);
        EXPECT(gbc.readMem(0xfb70), 0x43);
        // CB 9E 01DA
        gbc.setState(0x1c57, 0xd356, 0xa3e0, 0x685f, 0xdeb9, 0xc064, 0x1, 0x1);
        gbc.writeMem(0x1c57, { 0xcb, 0x9e });
        gbc.writeMem(0xc064, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd356);
        EXPECT(gbc.pc(), 0x1c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc064), 0x33);
        // CB 9E 01DC
        gbc.setState(0x88c5, 0x2998, 0xbc60, 0xe678, 0x3f1b, 0xc0fa, 0x1, 0x0);
        gbc.writeMem(0x88c5, { 0xcb, 0x9e });
        gbc.writeMem(0xc0fa, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2998);
        EXPECT(gbc.pc(), 0x88c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88c5), 0xcb);
        EXPECT(gbc.readMem(0x88c6), 0x9e);
        EXPECT(gbc.readMem(0xc0fa), 0xb6);
        // CB 9E 01DE
        gbc.setState(0x9175, 0x77d8, 0xbc70, 0x8059, 0x20da, 0xd9e7, 0x1, 0x1);
        gbc.writeMem(0x9175, { 0xcb, 0x9e });
        gbc.writeMem(0xd9e7, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x77d8);
        EXPECT(gbc.pc(), 0x9177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9175), 0xcb);
        EXPECT(gbc.readMem(0x9176), 0x9e);
        EXPECT(gbc.readMem(0xd9e7), 0xd6);
        // CB 9E 01DF
        gbc.setState(0x6898, 0x5f89, 0x84b0, 0xcd0d, 0x5343, 0xfca1, 0x1, 0x1);
        gbc.writeMem(0x6898, { 0xcb, 0x9e });
        gbc.writeMem(0xfca1, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5f89);
        EXPECT(gbc.pc(), 0x689a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfca1), 0x67);
        // CB 9E 01E0
        gbc.setState(0x38e0, 0x5da7, 0x3c10, 0xeebf, 0x7cf5, 0xeee5, 0x0, 0x1);
        gbc.writeMem(0x38e0, { 0xcb, 0x9e });
        gbc.writeMem(0xeee5, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5da7);
        EXPECT(gbc.pc(), 0x38e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeee5), 0xd0);
        // CB 9E 01E2
        gbc.setState(0xa2ec, 0xd65f, 0x5630, 0xdd67, 0x81ba, 0x9ef7, 0x0, 0x0);
        gbc.writeMem(0x9ef7, { 0xc });
        gbc.writeMem(0xa2ec, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd65f);
        EXPECT(gbc.pc(), 0xa2ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef7), 0x4);
        EXPECT(gbc.readMem(0xa2ec), 0xcb);
        EXPECT(gbc.readMem(0xa2ed), 0x9e);
        // CB 9E 01E3
        gbc.setState(0xae2b, 0x56bc, 0x9f40, 0x3f30, 0x1998, 0x9d7b, 0x1, 0x0);
        gbc.writeMem(0x9d7b, { 0x80 });
        gbc.writeMem(0xae2b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x56bc);
        EXPECT(gbc.pc(), 0xae2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d7b), 0x80);
        EXPECT(gbc.readMem(0xae2b), 0xcb);
        EXPECT(gbc.readMem(0xae2c), 0x9e);
        // CB 9E 01E4
        gbc.setState(0xbca, 0x947, 0x2730, 0xd1fe, 0x8f3, 0x9d58, 0x0, 0x1);
        gbc.writeMem(0xbca, { 0xcb, 0x9e });
        gbc.writeMem(0x9d58, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x947);
        EXPECT(gbc.pc(), 0xbcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d58), 0x2);
        // CB 9E 01E6
        gbc.setState(0x9f58, 0x6b76, 0xba50, 0x665e, 0x4ada, 0x7e3c, 0x0, 0x0);
        gbc.writeMem(0x7e3c, { 0xc0 });
        gbc.writeMem(0x9f58, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6b76);
        EXPECT(gbc.pc(), 0x9f5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f58), 0xcb);
        EXPECT(gbc.readMem(0x9f59), 0x9e);
        // CB 9E 01E7
        gbc.setState(0xdaff, 0x2e85, 0x8ce0, 0x1cad, 0x60e7, 0x3b20, 0x0, 0x1);
        gbc.writeMem(0x3b20, { 0x36 });
        gbc.writeMem(0xdaff, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2e85);
        EXPECT(gbc.pc(), 0xdb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaff), 0xcb);
        EXPECT(gbc.readMem(0xdb00), 0x9e);
        // CB 9E 01E8
        gbc.setState(0x997d, 0xed7c, 0xada0, 0x563c, 0x8f6a, 0x9236, 0x1, 0x1);
        gbc.writeMem(0x9236, { 0x4 });
        gbc.writeMem(0x997d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xed7c);
        EXPECT(gbc.pc(), 0x997f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9236), 0x4);
        EXPECT(gbc.readMem(0x997d), 0xcb);
        EXPECT(gbc.readMem(0x997e), 0x9e);
        // CB 9E 01EB
        gbc.setState(0x8d4e, 0xd2ea, 0xa8e0, 0xec45, 0x3b0c, 0x927b, 0x0, 0x1);
        gbc.writeMem(0x8d4e, { 0xcb, 0x9e });
        gbc.writeMem(0x927b, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd2ea);
        EXPECT(gbc.pc(), 0x8d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4e), 0xcb);
        EXPECT(gbc.readMem(0x8d4f), 0x9e);
        EXPECT(gbc.readMem(0x927b), 0xd4);
        // CB 9E 01EC
        gbc.setState(0x76f, 0x8cbd, 0xdee0, 0x146a, 0xd108, 0x6e75, 0x1, 0x1);
        gbc.writeMem(0x76f, { 0xcb, 0x9e });
        gbc.writeMem(0x6e75, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8cbd);
        EXPECT(gbc.pc(), 0x771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 01ED
        gbc.setState(0x863e, 0x7057, 0x3e80, 0x9f39, 0xb6d5, 0xc193, 0x1, 0x1);
        gbc.writeMem(0x863e, { 0xcb, 0x9e });
        gbc.writeMem(0xc193, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7057);
        EXPECT(gbc.pc(), 0x8640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863e), 0xcb);
        EXPECT(gbc.readMem(0x863f), 0x9e);
        EXPECT(gbc.readMem(0xc193), 0xc0);
        // CB 9E 01EE
        gbc.setState(0x4559, 0x9598, 0x99f0, 0x53df, 0x1c16, 0xaa8a, 0x0, 0x0);
        gbc.writeMem(0x4559, { 0xcb, 0x9e });
        gbc.writeMem(0xaa8a, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9598);
        EXPECT(gbc.pc(), 0x455b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa8a), 0x72);
        // CB 9E 01F1
        gbc.setState(0xe2dd, 0xdf55, 0xa210, 0x9c7f, 0x3187, 0xaae1, 0x0, 0x0);
        gbc.writeMem(0xaae1, { 0x9c });
        gbc.writeMem(0xe2dd, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdf55);
        EXPECT(gbc.pc(), 0xe2df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaae1), 0x94);
        EXPECT(gbc.readMem(0xe2dd), 0xcb);
        EXPECT(gbc.readMem(0xe2de), 0x9e);
        // CB 9E 01F2
        gbc.setState(0x686d, 0xeebe, 0xe3c0, 0x98b3, 0xea76, 0xaa47, 0x0, 0x0);
        gbc.writeMem(0x686d, { 0xcb, 0x9e });
        gbc.writeMem(0xaa47, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xeebe);
        EXPECT(gbc.pc(), 0x686f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa47), 0x56);
        // CB 9E 01F4
        gbc.setState(0x6ef3, 0xaadc, 0xae70, 0x86c9, 0x5ae0, 0x99a3, 0x1, 0x1);
        gbc.writeMem(0x6ef3, { 0xcb, 0x9e });
        gbc.writeMem(0x99a3, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xaadc);
        EXPECT(gbc.pc(), 0x6ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a3), 0x54);
        // CB 9E 01F5
        gbc.setState(0xd8e2, 0x9357, 0xd8e0, 0x81b5, 0x3c27, 0xc8a1, 0x0, 0x1);
        gbc.writeMem(0xc8a1, { 0x42 });
        gbc.writeMem(0xd8e2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9357);
        EXPECT(gbc.pc(), 0xd8e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a1), 0x42);
        EXPECT(gbc.readMem(0xd8e2), 0xcb);
        EXPECT(gbc.readMem(0xd8e3), 0x9e);
        // CB 9E 01F8
        gbc.setState(0xaa9e, 0xf904, 0xf0f0, 0x1ecc, 0x4bf9, 0x7897, 0x1, 0x0);
        gbc.writeMem(0x7897, { 0xa5 });
        gbc.writeMem(0xaa9e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf904);
        EXPECT(gbc.pc(), 0xaaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa9e), 0xcb);
        EXPECT(gbc.readMem(0xaa9f), 0x9e);
        // CB 9E 01FA
        gbc.setState(0x9b1d, 0x40e9, 0xb810, 0xaa18, 0xfb83, 0xdfb7, 0x1, 0x1);
        gbc.writeMem(0x9b1d, { 0xcb, 0x9e });
        gbc.writeMem(0xdfb7, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x40e9);
        EXPECT(gbc.pc(), 0x9b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1d), 0xcb);
        EXPECT(gbc.readMem(0x9b1e), 0x9e);
        EXPECT(gbc.readMem(0xdfb7), 0x16);
        // CB 9E 01FB
        gbc.setState(0x52bf, 0xd69a, 0xa7a0, 0xf679, 0xe1f5, 0x7f6c, 0x1, 0x1);
        gbc.writeMem(0x52bf, { 0xcb, 0x9e });
        gbc.writeMem(0x7f6c, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd69a);
        EXPECT(gbc.pc(), 0x52c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 01FC
        gbc.setState(0x9833, 0xc8d3, 0x3510, 0xc590, 0xc53, 0xef22, 0x0, 0x1);
        gbc.writeMem(0x9833, { 0xcb, 0x9e });
        gbc.writeMem(0xef22, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc8d3);
        EXPECT(gbc.pc(), 0x9835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9833), 0xcb);
        EXPECT(gbc.readMem(0x9834), 0x9e);
        EXPECT(gbc.readMem(0xef22), 0xa6);
        // CB 9E 01FD
        gbc.setState(0x8c73, 0x6a3d, 0xc990, 0x6020, 0xdbc6, 0x4806, 0x1, 0x1);
        gbc.writeMem(0x4806, { 0xb0 });
        gbc.writeMem(0x8c73, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6a3d);
        EXPECT(gbc.pc(), 0x8c75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c73), 0xcb);
        EXPECT(gbc.readMem(0x8c74), 0x9e);
        // CB 9E 01FE
        gbc.setState(0xaeab, 0x88f9, 0xc00, 0x4a47, 0xadbb, 0xab1d, 0x0, 0x0);
        gbc.writeMem(0xab1d, { 0x90 });
        gbc.writeMem(0xaeab, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x88f9);
        EXPECT(gbc.pc(), 0xaead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1d), 0x90);
        EXPECT(gbc.readMem(0xaeab), 0xcb);
        EXPECT(gbc.readMem(0xaeac), 0x9e);
        // CB 9E 01FF
        gbc.setState(0x159b, 0x4f00, 0xb440, 0xa471, 0x5b79, 0x4b84, 0x0, 0x1);
        gbc.writeMem(0x159b, { 0xcb, 0x9e });
        gbc.writeMem(0x4b84, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4f00);
        EXPECT(gbc.pc(), 0x159d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0200
        gbc.setState(0xca84, 0x8b4e, 0x56d0, 0xe8d6, 0x5455, 0xfde7, 0x0, 0x1);
        gbc.writeMem(0xca84, { 0xcb, 0x9e });
        gbc.writeMem(0xfde7, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8b4e);
        EXPECT(gbc.pc(), 0xca86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca84), 0xcb);
        EXPECT(gbc.readMem(0xca85), 0x9e);
        EXPECT(gbc.readMem(0xfde7), 0x61);
        // CB 9E 0202
        gbc.setState(0x9973, 0x1d36, 0xc30, 0xc4db, 0xb822, 0x766, 0x0, 0x1);
        gbc.writeMem(0x766, { 0x84 });
        gbc.writeMem(0x9973, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1d36);
        EXPECT(gbc.pc(), 0x9975);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9973), 0xcb);
        EXPECT(gbc.readMem(0x9974), 0x9e);
        // CB 9E 0203
        gbc.setState(0x8a80, 0xc571, 0xa240, 0xed9b, 0xee5a, 0xf5a7, 0x0, 0x1);
        gbc.writeMem(0x8a80, { 0xcb, 0x9e });
        gbc.writeMem(0xf5a7, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc571);
        EXPECT(gbc.pc(), 0x8a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a80), 0xcb);
        EXPECT(gbc.readMem(0x8a81), 0x9e);
        EXPECT(gbc.readMem(0xf5a7), 0x17);
        // CB 9E 0204
        gbc.setState(0x3c76, 0xcf64, 0x2e80, 0x6a8f, 0x9321, 0x4169, 0x1, 0x0);
        gbc.writeMem(0x3c76, { 0xcb, 0x9e });
        gbc.writeMem(0x4169, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcf64);
        EXPECT(gbc.pc(), 0x3c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0205
        gbc.setState(0xcff0, 0xa55a, 0x970, 0x496c, 0x91bb, 0x94aa, 0x0, 0x1);
        gbc.writeMem(0x94aa, { 0x6f });
        gbc.writeMem(0xcff0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa55a);
        EXPECT(gbc.pc(), 0xcff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94aa), 0x67);
        EXPECT(gbc.readMem(0xcff0), 0xcb);
        EXPECT(gbc.readMem(0xcff1), 0x9e);
        // CB 9E 0208
        gbc.setState(0x3f7f, 0x2223, 0xff60, 0xfb9b, 0x937f, 0xaa63, 0x1, 0x1);
        gbc.writeMem(0x3f7f, { 0xcb, 0x9e });
        gbc.writeMem(0xaa63, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2223);
        EXPECT(gbc.pc(), 0x3f81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa63), 0xd6);
        // CB 9E 0209
        gbc.setState(0xe4ed, 0xdbe4, 0x4510, 0x724d, 0xc8d5, 0x72d1, 0x0, 0x0);
        gbc.writeMem(0x72d1, { 0x17 });
        gbc.writeMem(0xe4ed, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdbe4);
        EXPECT(gbc.pc(), 0xe4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ed), 0xcb);
        EXPECT(gbc.readMem(0xe4ee), 0x9e);
        // CB 9E 020B
        gbc.setState(0x175, 0xd2b5, 0x4560, 0x4a96, 0x8d5e, 0xd26c, 0x1, 0x0);
        gbc.writeMem(0x175, { 0xcb, 0x9e });
        gbc.writeMem(0xd26c, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0x177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd26c), 0xd0);
        // CB 9E 020D
        gbc.setState(0x790d, 0x865d, 0xf3b0, 0xb05b, 0x9c1a, 0xb2e9, 0x1, 0x0);
        gbc.writeMem(0x790d, { 0xcb, 0x9e });
        gbc.writeMem(0xb2e9, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x865d);
        EXPECT(gbc.pc(), 0x790f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2e9), 0xd3);
        // CB 9E 020E
        gbc.setState(0x9886, 0xe035, 0x7a30, 0x90d4, 0x3573, 0x8cba, 0x0, 0x0);
        gbc.writeMem(0x8cba, { 0x1 });
        gbc.writeMem(0x9886, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe035);
        EXPECT(gbc.pc(), 0x9888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cba), 0x1);
        EXPECT(gbc.readMem(0x9886), 0xcb);
        EXPECT(gbc.readMem(0x9887), 0x9e);
        // CB 9E 0210
        gbc.setState(0x70ed, 0x458a, 0xa590, 0x2c10, 0x2b42, 0x3c3a, 0x0, 0x0);
        gbc.writeMem(0x3c3a, { 0x4 });
        gbc.writeMem(0x70ed, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x458a);
        EXPECT(gbc.pc(), 0x70ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0211
        gbc.setState(0x483d, 0x8d49, 0x8a30, 0xadfd, 0xda59, 0x9638, 0x1, 0x1);
        gbc.writeMem(0x483d, { 0xcb, 0x9e });
        gbc.writeMem(0x9638, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8d49);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9638), 0xe7);
        // CB 9E 0212
        gbc.setState(0xa875, 0xf653, 0xa920, 0xe314, 0x34d8, 0xbf0a, 0x0, 0x1);
        gbc.writeMem(0xa875, { 0xcb, 0x9e });
        gbc.writeMem(0xbf0a, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf653);
        EXPECT(gbc.pc(), 0xa877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa875), 0xcb);
        EXPECT(gbc.readMem(0xa876), 0x9e);
        EXPECT(gbc.readMem(0xbf0a), 0xa4);
        // CB 9E 0213
        gbc.setState(0xd220, 0x6047, 0x8140, 0xe4d4, 0x5e42, 0xee9a, 0x1, 0x1);
        gbc.writeMem(0xd220, { 0xcb, 0x9e });
        gbc.writeMem(0xee9a, { 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6047);
        EXPECT(gbc.pc(), 0xd222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd220), 0xcb);
        EXPECT(gbc.readMem(0xd221), 0x9e);
        EXPECT(gbc.readMem(0xee9a), 0xe5);
        // CB 9E 0215
        gbc.setState(0x66ce, 0xb532, 0x5de0, 0xf22a, 0x94a4, 0x5ee8, 0x0, 0x0);
        gbc.writeMem(0x5ee8, { 0x1 });
        gbc.writeMem(0x66ce, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb532);
        EXPECT(gbc.pc(), 0x66d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0216
        gbc.setState(0xe04e, 0x1772, 0xb90, 0x3c54, 0xe280, 0x8e7, 0x0, 0x0);
        gbc.writeMem(0x8e7, { 0xb6 });
        gbc.writeMem(0xe04e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1772);
        EXPECT(gbc.pc(), 0xe050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe04e), 0xcb);
        EXPECT(gbc.readMem(0xe04f), 0x9e);
        // CB 9E 0217
        gbc.setState(0xded, 0x3980, 0xcad0, 0x8a4d, 0xc0db, 0x3cff, 0x0, 0x0);
        gbc.writeMem(0xded, { 0xcb, 0x9e });
        gbc.writeMem(0x3cff, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3980);
        EXPECT(gbc.pc(), 0xdef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0218
        gbc.setState(0x737d, 0x6e41, 0xc9a0, 0x7061, 0xc639, 0xe120, 0x1, 0x1);
        gbc.writeMem(0x737d, { 0xcb, 0x9e });
        gbc.writeMem(0xe120, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6e41);
        EXPECT(gbc.pc(), 0x737f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe120), 0x17);
        // CB 9E 0219
        gbc.setState(0xbcda, 0xbc0a, 0xd9a0, 0xbdc0, 0x749b, 0xfecb, 0x0, 0x0);
        gbc.writeMem(0xbcda, { 0xcb, 0x9e });
        gbc.writeMem(0xfecb, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xbc0a);
        EXPECT(gbc.pc(), 0xbcdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcda), 0xcb);
        EXPECT(gbc.readMem(0xbcdb), 0x9e);
        EXPECT(gbc.readMem(0xfecb), 0xb6);
        // CB 9E 021A
        gbc.setState(0xcda6, 0x6e98, 0xd4f0, 0x41de, 0x2100, 0xe1d5, 0x1, 0x0);
        gbc.writeMem(0xcda6, { 0xcb, 0x9e });
        gbc.writeMem(0xe1d5, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6e98);
        EXPECT(gbc.pc(), 0xcda8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda6), 0xcb);
        EXPECT(gbc.readMem(0xcda7), 0x9e);
        EXPECT(gbc.readMem(0xe1d5), 0xf4);
        // CB 9E 021B
        gbc.setState(0x3ef2, 0x5029, 0xf580, 0xbab, 0xc641, 0x24e0, 0x0, 0x0);
        gbc.writeMem(0x24e0, { 0xc6 });
        gbc.writeMem(0x3ef2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0x3ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 021C
        gbc.setState(0x2e2c, 0x4ad7, 0x1fd0, 0xf677, 0x5def, 0x1f8c, 0x1, 0x0);
        gbc.writeMem(0x1f8c, { 0x0 });
        gbc.writeMem(0x2e2c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4ad7);
        EXPECT(gbc.pc(), 0x2e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 021E
        gbc.setState(0xec55, 0xcb19, 0x4460, 0xaa9f, 0x24, 0x1cb6, 0x0, 0x1);
        gbc.writeMem(0x1cb6, { 0xa5 });
        gbc.writeMem(0xec55, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xcb19);
        EXPECT(gbc.pc(), 0xec57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec55), 0xcb);
        EXPECT(gbc.readMem(0xec56), 0x9e);
        // CB 9E 021F
        gbc.setState(0x7195, 0xc01e, 0x46e0, 0x4156, 0xdad8, 0x728, 0x1, 0x1);
        gbc.writeMem(0x728, { 0xa4 });
        gbc.writeMem(0x7195, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc01e);
        EXPECT(gbc.pc(), 0x7197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0221
        gbc.setState(0x9008, 0x73c0, 0xa7a0, 0x61d4, 0x66f0, 0xb278, 0x0, 0x1);
        gbc.writeMem(0x9008, { 0xcb, 0x9e });
        gbc.writeMem(0xb278, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x73c0);
        EXPECT(gbc.pc(), 0x900a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9008), 0xcb);
        EXPECT(gbc.readMem(0x9009), 0x9e);
        EXPECT(gbc.readMem(0xb278), 0xc4);
        // CB 9E 0224
        gbc.setState(0xcb80, 0xc713, 0xc50, 0xb2f0, 0xd807, 0xa22e, 0x1, 0x1);
        gbc.writeMem(0xa22e, { 0xc9 });
        gbc.writeMem(0xcb80, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc713);
        EXPECT(gbc.pc(), 0xcb82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa22e), 0xc1);
        EXPECT(gbc.readMem(0xcb80), 0xcb);
        EXPECT(gbc.readMem(0xcb81), 0x9e);
        // CB 9E 0226
        gbc.setState(0xa493, 0x6bba, 0x650, 0x7da, 0x7f28, 0x731c, 0x1, 0x0);
        gbc.writeMem(0x731c, { 0x62 });
        gbc.writeMem(0xa493, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x6bba);
        EXPECT(gbc.pc(), 0xa495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa493), 0xcb);
        EXPECT(gbc.readMem(0xa494), 0x9e);
        // CB 9E 0227
        gbc.setState(0x6398, 0xdeec, 0x8fe0, 0xa8dd, 0x6b1e, 0x8905, 0x1, 0x0);
        gbc.writeMem(0x6398, { 0xcb, 0x9e });
        gbc.writeMem(0x8905, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0x639a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8905), 0x11);
        // CB 9E 0228
        gbc.setState(0x27d, 0x8324, 0x6050, 0xbcd4, 0x649e, 0x4397, 0x1, 0x0);
        gbc.writeMem(0x27d, { 0xcb, 0x9e });
        gbc.writeMem(0x4397, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8324);
        EXPECT(gbc.pc(), 0x27f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0229
        gbc.setState(0xbafb, 0xa9d2, 0x3780, 0x28bb, 0x3d0, 0xa024, 0x1, 0x1);
        gbc.writeMem(0xa024, { 0x5b });
        gbc.writeMem(0xbafb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa9d2);
        EXPECT(gbc.pc(), 0xbafd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa024), 0x53);
        EXPECT(gbc.readMem(0xbafb), 0xcb);
        EXPECT(gbc.readMem(0xbafc), 0x9e);
        // CB 9E 022A
        gbc.setState(0x6548, 0xf04f, 0x2880, 0x331d, 0x668d, 0x43d6, 0x1, 0x1);
        gbc.writeMem(0x43d6, { 0xc1 });
        gbc.writeMem(0x6548, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf04f);
        EXPECT(gbc.pc(), 0x654a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 022C
        gbc.setState(0x94d8, 0x7d09, 0xffe0, 0x476b, 0x394b, 0xa73, 0x0, 0x0);
        gbc.writeMem(0xa73, { 0xc3 });
        gbc.writeMem(0x94d8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7d09);
        EXPECT(gbc.pc(), 0x94da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d8), 0xcb);
        EXPECT(gbc.readMem(0x94d9), 0x9e);
        // CB 9E 022D
        gbc.setState(0x3b48, 0xc731, 0x7910, 0xec5d, 0x20fb, 0x24e0, 0x1, 0x0);
        gbc.writeMem(0x24e0, { 0xc6 });
        gbc.writeMem(0x3b48, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc731);
        EXPECT(gbc.pc(), 0x3b4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 022E
        gbc.setState(0xa344, 0x6816, 0xd240, 0x610b, 0x652, 0xf7aa, 0x0, 0x0);
        gbc.writeMem(0xa344, { 0xcb, 0x9e });
        gbc.writeMem(0xf7aa, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6816);
        EXPECT(gbc.pc(), 0xa346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa344), 0xcb);
        EXPECT(gbc.readMem(0xa345), 0x9e);
        EXPECT(gbc.readMem(0xf7aa), 0x94);
        // CB 9E 0230
        gbc.setState(0x62de, 0xb71, 0x7e00, 0x7820, 0xcf7c, 0x2f39, 0x0, 0x1);
        gbc.writeMem(0x2f39, { 0xb6 });
        gbc.writeMem(0x62de, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb71);
        EXPECT(gbc.pc(), 0x62e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0231
        gbc.setState(0x8651, 0xee4e, 0x2770, 0xf1ea, 0x330a, 0x2076, 0x0, 0x0);
        gbc.writeMem(0x2076, { 0x24 });
        gbc.writeMem(0x8651, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xee4e);
        EXPECT(gbc.pc(), 0x8653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8651), 0xcb);
        EXPECT(gbc.readMem(0x8652), 0x9e);
        // CB 9E 0233
        gbc.setState(0x21ee, 0x9404, 0xf800, 0xc9bc, 0xb5d5, 0x3f7b, 0x0, 0x0);
        gbc.writeMem(0x21ee, { 0xcb, 0x9e });
        gbc.writeMem(0x3f7b, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9404);
        EXPECT(gbc.pc(), 0x21f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0236
        gbc.setState(0xa94a, 0x53ee, 0xe260, 0x58a2, 0xebea, 0xc84f, 0x0, 0x1);
        gbc.writeMem(0xa94a, { 0xcb, 0x9e });
        gbc.writeMem(0xc84f, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x53ee);
        EXPECT(gbc.pc(), 0xa94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa94a), 0xcb);
        EXPECT(gbc.readMem(0xa94b), 0x9e);
        EXPECT(gbc.readMem(0xc84f), 0x31);
        // CB 9E 0237
        gbc.setState(0x5789, 0x3982, 0x2a40, 0xb00, 0x7573, 0x67a, 0x1, 0x0);
        gbc.writeMem(0x67a, { 0x7 });
        gbc.writeMem(0x5789, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3982);
        EXPECT(gbc.pc(), 0x578b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0238
        gbc.setState(0x8292, 0xb7c9, 0x6210, 0x5c53, 0x992a, 0xd58e, 0x0, 0x1);
        gbc.writeMem(0x8292, { 0xcb, 0x9e });
        gbc.writeMem(0xd58e, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb7c9);
        EXPECT(gbc.pc(), 0x8294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8292), 0xcb);
        EXPECT(gbc.readMem(0x8293), 0x9e);
        EXPECT(gbc.readMem(0xd58e), 0xb5);
        // CB 9E 0239
        gbc.setState(0x3a29, 0x8f69, 0x58d0, 0xb411, 0x9e63, 0xcd4, 0x0, 0x0);
        gbc.writeMem(0xcd4, { 0xf4 });
        gbc.writeMem(0x3a29, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8f69);
        EXPECT(gbc.pc(), 0x3a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 023B
        gbc.setState(0x8df, 0x29ab, 0xa0f0, 0xd753, 0xaae3, 0x6918, 0x1, 0x0);
        gbc.writeMem(0x8df, { 0xcb, 0x9e });
        gbc.writeMem(0x6918, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x29ab);
        EXPECT(gbc.pc(), 0x8e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 023C
        gbc.setState(0xe5e7, 0x4b53, 0x5d30, 0xa858, 0x94f8, 0xab62, 0x1, 0x0);
        gbc.writeMem(0xab62, { 0x3e });
        gbc.writeMem(0xe5e7, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4b53);
        EXPECT(gbc.pc(), 0xe5e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab62), 0x36);
        EXPECT(gbc.readMem(0xe5e7), 0xcb);
        EXPECT(gbc.readMem(0xe5e8), 0x9e);
        // CB 9E 0240
        gbc.setState(0x6ad0, 0x6542, 0xa0c0, 0x822d, 0x4377, 0xe95b, 0x1, 0x0);
        gbc.writeMem(0x6ad0, { 0xcb, 0x9e });
        gbc.writeMem(0xe95b, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6542);
        EXPECT(gbc.pc(), 0x6ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe95b), 0x26);
        // CB 9E 0241
        gbc.setState(0x22c5, 0x465c, 0x60b0, 0xba61, 0xd929, 0x90d5, 0x1, 0x0);
        gbc.writeMem(0x22c5, { 0xcb, 0x9e });
        gbc.writeMem(0x90d5, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x465c);
        EXPECT(gbc.pc(), 0x22c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d5), 0x42);
        // CB 9E 0243
        gbc.setState(0xc66b, 0x8f7e, 0xa980, 0x9731, 0xd34a, 0xab5d, 0x0, 0x0);
        gbc.writeMem(0xab5d, { 0x55 });
        gbc.writeMem(0xc66b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8f7e);
        EXPECT(gbc.pc(), 0xc66d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5d), 0x55);
        EXPECT(gbc.readMem(0xc66b), 0xcb);
        EXPECT(gbc.readMem(0xc66c), 0x9e);
        // CB 9E 0245
        gbc.setState(0x835d, 0xbfc0, 0x4d10, 0x1ed2, 0xea57, 0xf8af, 0x0, 0x1);
        gbc.writeMem(0x835d, { 0xcb, 0x9e });
        gbc.writeMem(0xf8af, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbfc0);
        EXPECT(gbc.pc(), 0x835f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x835d), 0xcb);
        EXPECT(gbc.readMem(0x835e), 0x9e);
        EXPECT(gbc.readMem(0xf8af), 0x0);
        // CB 9E 0247
        gbc.setState(0x3384, 0x2d2b, 0x5120, 0x6789, 0x6275, 0x7bf, 0x1, 0x0);
        gbc.writeMem(0x7bf, { 0x85 });
        gbc.writeMem(0x3384, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2d2b);
        EXPECT(gbc.pc(), 0x3386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0248
        gbc.setState(0x2b81, 0x68e4, 0xe6b0, 0x414a, 0x58c0, 0x118b, 0x0, 0x1);
        gbc.writeMem(0x118b, { 0x81 });
        gbc.writeMem(0x2b81, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x68e4);
        EXPECT(gbc.pc(), 0x2b83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0249
        gbc.setState(0x7e84, 0x67d5, 0xf110, 0xa201, 0x573d, 0x17ab, 0x0, 0x0);
        gbc.writeMem(0x17ab, { 0xa0 });
        gbc.writeMem(0x7e84, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x67d5);
        EXPECT(gbc.pc(), 0x7e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 024B
        gbc.setState(0xd0db, 0xc228, 0x4150, 0xcf63, 0xecd5, 0xc01f, 0x1, 0x0);
        gbc.writeMem(0xc01f, { 0xe3 });
        gbc.writeMem(0xd0db, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc228);
        EXPECT(gbc.pc(), 0xd0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc01f), 0xe3);
        EXPECT(gbc.readMem(0xd0db), 0xcb);
        EXPECT(gbc.readMem(0xd0dc), 0x9e);
        // CB 9E 024C
        gbc.setState(0x5d43, 0xf027, 0xcdb0, 0xd5d0, 0x7a06, 0x86a0, 0x0, 0x1);
        gbc.writeMem(0x5d43, { 0xcb, 0x9e });
        gbc.writeMem(0x86a0, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf027);
        EXPECT(gbc.pc(), 0x5d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a0), 0x71);
        // CB 9E 024E
        gbc.setState(0x732d, 0x80a2, 0x4b70, 0x2413, 0xfeca, 0x42e2, 0x1, 0x0);
        gbc.writeMem(0x42e2, { 0x86 });
        gbc.writeMem(0x732d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x80a2);
        EXPECT(gbc.pc(), 0x732f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 024F
        gbc.setState(0x633, 0xaa26, 0x7560, 0x961b, 0xd0e, 0x8fb, 0x1, 0x1);
        gbc.writeMem(0x633, { 0xcb, 0x9e });
        gbc.writeMem(0x8fb, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaa26);
        EXPECT(gbc.pc(), 0x635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0250
        gbc.setState(0x6839, 0x3d21, 0x5840, 0xbf42, 0x4fc3, 0xbcbb, 0x1, 0x1);
        gbc.writeMem(0x6839, { 0xcb, 0x9e });
        gbc.writeMem(0xbcbb, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3d21);
        EXPECT(gbc.pc(), 0x683b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcbb), 0xa5);
        // CB 9E 0255
        gbc.setState(0xaa81, 0xbc4b, 0x6880, 0xb3e8, 0x7f46, 0x17a2, 0x0, 0x0);
        gbc.writeMem(0x17a2, { 0xe2 });
        gbc.writeMem(0xaa81, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbc4b);
        EXPECT(gbc.pc(), 0xaa83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa81), 0xcb);
        EXPECT(gbc.readMem(0xaa82), 0x9e);
        // CB 9E 0257
        gbc.setState(0xce6b, 0xbd35, 0xeab0, 0x27d7, 0x5c4e, 0x86c2, 0x0, 0x1);
        gbc.writeMem(0x86c2, { 0xec });
        gbc.writeMem(0xce6b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xbd35);
        EXPECT(gbc.pc(), 0xce6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c2), 0xe4);
        EXPECT(gbc.readMem(0xce6b), 0xcb);
        EXPECT(gbc.readMem(0xce6c), 0x9e);
        // CB 9E 0259
        gbc.setState(0x2bd8, 0x633a, 0x4780, 0x8e32, 0x3935, 0x9dd7, 0x1, 0x0);
        gbc.writeMem(0x2bd8, { 0xcb, 0x9e });
        gbc.writeMem(0x9dd7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x633a);
        EXPECT(gbc.pc(), 0x2bda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd7), 0x44);
        // CB 9E 025A
        gbc.setState(0x368, 0x4788, 0x4080, 0xd612, 0x703a, 0x5df2, 0x0, 0x0);
        gbc.writeMem(0x368, { 0xcb, 0x9e });
        gbc.writeMem(0x5df2, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4788);
        EXPECT(gbc.pc(), 0x36a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 025B
        gbc.setState(0xed4a, 0x2800, 0xf470, 0x9dbe, 0x2cbe, 0x9d06, 0x0, 0x1);
        gbc.writeMem(0x9d06, { 0x42 });
        gbc.writeMem(0xed4a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2800);
        EXPECT(gbc.pc(), 0xed4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d06), 0x42);
        EXPECT(gbc.readMem(0xed4a), 0xcb);
        EXPECT(gbc.readMem(0xed4b), 0x9e);
        // CB 9E 025C
        gbc.setState(0x72c8, 0x8952, 0xcf90, 0x9192, 0x10fc, 0xe235, 0x1, 0x0);
        gbc.writeMem(0x72c8, { 0xcb, 0x9e });
        gbc.writeMem(0xe235, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8952);
        EXPECT(gbc.pc(), 0x72ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe235), 0xe6);
        // CB 9E 025D
        gbc.setState(0xb5f1, 0xdf, 0xc40, 0xd226, 0x2ee2, 0xcfe2, 0x1, 0x1);
        gbc.writeMem(0xb5f1, { 0xcb, 0x9e });
        gbc.writeMem(0xcfe2, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdf);
        EXPECT(gbc.pc(), 0xb5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f1), 0xcb);
        EXPECT(gbc.readMem(0xb5f2), 0x9e);
        EXPECT(gbc.readMem(0xcfe2), 0x73);
        // CB 9E 025E
        gbc.setState(0x80b5, 0x745d, 0x35b0, 0x28d4, 0x467c, 0xba34, 0x0, 0x1);
        gbc.writeMem(0x80b5, { 0xcb, 0x9e });
        gbc.writeMem(0xba34, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x745d);
        EXPECT(gbc.pc(), 0x80b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b5), 0xcb);
        EXPECT(gbc.readMem(0x80b6), 0x9e);
        EXPECT(gbc.readMem(0xba34), 0x35);
        // CB 9E 025F
        gbc.setState(0x259d, 0xde14, 0x5120, 0xde25, 0x8324, 0x1ba7, 0x1, 0x0);
        gbc.writeMem(0x1ba7, { 0xd1 });
        gbc.writeMem(0x259d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xde14);
        EXPECT(gbc.pc(), 0x259f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0262
        gbc.setState(0x2af, 0x11b8, 0xc170, 0x4ecd, 0xefda, 0x993c, 0x1, 0x0);
        gbc.writeMem(0x2af, { 0xcb, 0x9e });
        gbc.writeMem(0x993c, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x11b8);
        EXPECT(gbc.pc(), 0x2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993c), 0x70);
        // CB 9E 0264
        gbc.setState(0x1a8b, 0x459e, 0xd9d0, 0x9773, 0xb8a1, 0xe1bc, 0x0, 0x1);
        gbc.writeMem(0x1a8b, { 0xcb, 0x9e });
        gbc.writeMem(0xe1bc, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x459e);
        EXPECT(gbc.pc(), 0x1a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1bc), 0x87);
        // CB 9E 0265
        gbc.setState(0x9946, 0x1123, 0xae80, 0xc93c, 0xf062, 0xd650, 0x1, 0x0);
        gbc.writeMem(0x9946, { 0xcb, 0x9e });
        gbc.writeMem(0xd650, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1123);
        EXPECT(gbc.pc(), 0x9948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9946), 0xcb);
        EXPECT(gbc.readMem(0x9947), 0x9e);
        EXPECT(gbc.readMem(0xd650), 0x3);
        // CB 9E 0266
        gbc.setState(0x4ef8, 0xeccd, 0x5810, 0xb732, 0xb01e, 0x8813, 0x0, 0x0);
        gbc.writeMem(0x4ef8, { 0xcb, 0x9e });
        gbc.writeMem(0x8813, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xeccd);
        EXPECT(gbc.pc(), 0x4efa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8813), 0x36);
        // CB 9E 0268
        gbc.setState(0x171e, 0xf192, 0xa1f0, 0xa2ef, 0x7450, 0xb30a, 0x0, 0x0);
        gbc.writeMem(0x171e, { 0xcb, 0x9e });
        gbc.writeMem(0xb30a, { 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xf192);
        EXPECT(gbc.pc(), 0x1720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb30a), 0xe2);
        // CB 9E 0269
        gbc.setState(0x8ae6, 0x59f0, 0x2f60, 0x134e, 0x57ba, 0xa7dd, 0x1, 0x1);
        gbc.writeMem(0x8ae6, { 0xcb, 0x9e });
        gbc.writeMem(0xa7dd, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x59f0);
        EXPECT(gbc.pc(), 0x8ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae6), 0xcb);
        EXPECT(gbc.readMem(0x8ae7), 0x9e);
        EXPECT(gbc.readMem(0xa7dd), 0xc2);
        // CB 9E 026A
        gbc.setState(0xafa1, 0x1238, 0x87f0, 0xcfdb, 0x768f, 0xddd8, 0x0, 0x1);
        gbc.writeMem(0xafa1, { 0xcb, 0x9e });
        gbc.writeMem(0xddd8, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x1238);
        EXPECT(gbc.pc(), 0xafa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa1), 0xcb);
        EXPECT(gbc.readMem(0xafa2), 0x9e);
        EXPECT(gbc.readMem(0xddd8), 0x53);
        // CB 9E 026B
        gbc.setState(0x228a, 0x6eea, 0xc790, 0xd579, 0x5c3e, 0xc522, 0x1, 0x1);
        gbc.writeMem(0x228a, { 0xcb, 0x9e });
        gbc.writeMem(0xc522, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6eea);
        EXPECT(gbc.pc(), 0x228c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc522), 0x27);
        // CB 9E 026C
        gbc.setState(0x9802, 0x2b86, 0x1500, 0xc846, 0xd9cb, 0xff4e, 0x1, 0x0);
        gbc.writeMem(0x9802, { 0xcb, 0x9e });
        gbc.writeMem(0xff4e, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2b86);
        EXPECT(gbc.pc(), 0x9804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9802), 0xcb);
        EXPECT(gbc.readMem(0x9803), 0x9e);
        EXPECT(gbc.readMem(0xff4e), 0x7);
        // CB 9E 026D
        gbc.setState(0x7e28, 0x23d, 0xc360, 0xd67c, 0xe7ff, 0xa384, 0x0, 0x1);
        gbc.writeMem(0x7e28, { 0xcb, 0x9e });
        gbc.writeMem(0xa384, { 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x23d);
        EXPECT(gbc.pc(), 0x7e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa384), 0x10);
        // CB 9E 026F
        gbc.setState(0x2e7b, 0xec9c, 0xc940, 0x95ee, 0xd482, 0xfcda, 0x0, 0x1);
        gbc.writeMem(0x2e7b, { 0xcb, 0x9e });
        gbc.writeMem(0xfcda, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xec9c);
        EXPECT(gbc.pc(), 0x2e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfcda), 0xc6);
        // CB 9E 0270
        gbc.setState(0x30d8, 0x16a, 0x8390, 0xe45e, 0xf021, 0xb4eb, 0x1, 0x0);
        gbc.writeMem(0x30d8, { 0xcb, 0x9e });
        gbc.writeMem(0xb4eb, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x16a);
        EXPECT(gbc.pc(), 0x30da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4eb), 0x62);
        // CB 9E 0271
        gbc.setState(0x50fa, 0x530d, 0xad70, 0xf8a1, 0x75c8, 0x8a5e, 0x0, 0x1);
        gbc.writeMem(0x50fa, { 0xcb, 0x9e });
        gbc.writeMem(0x8a5e, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x530d);
        EXPECT(gbc.pc(), 0x50fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5e), 0x41);
        // CB 9E 0272
        gbc.setState(0x9f73, 0x4778, 0xe370, 0xb9fa, 0x4836, 0xb128, 0x1, 0x1);
        gbc.writeMem(0x9f73, { 0xcb, 0x9e });
        gbc.writeMem(0xb128, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4778);
        EXPECT(gbc.pc(), 0x9f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f73), 0xcb);
        EXPECT(gbc.readMem(0x9f74), 0x9e);
        EXPECT(gbc.readMem(0xb128), 0x81);
        // CB 9E 0275
        gbc.setState(0xa949, 0xb218, 0x5c50, 0x86c2, 0xa65a, 0x9188, 0x1, 0x0);
        gbc.writeMem(0x9188, { 0xc1 });
        gbc.writeMem(0xa949, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb218);
        EXPECT(gbc.pc(), 0xa94b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9188), 0xc1);
        EXPECT(gbc.readMem(0xa949), 0xcb);
        EXPECT(gbc.readMem(0xa94a), 0x9e);
        // CB 9E 0276
        gbc.setState(0x5cbb, 0xde32, 0xa470, 0xa8e7, 0x2dc0, 0xcbdd, 0x0, 0x0);
        gbc.writeMem(0x5cbb, { 0xcb, 0x9e });
        gbc.writeMem(0xcbdd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xde32);
        EXPECT(gbc.pc(), 0x5cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbdd), 0xa2);
        // CB 9E 0278
        gbc.setState(0x1e95, 0x8fa7, 0xc220, 0xe9f7, 0xf264, 0xdf60, 0x1, 0x0);
        gbc.writeMem(0x1e95, { 0xcb, 0x9e });
        gbc.writeMem(0xdf60, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8fa7);
        EXPECT(gbc.pc(), 0x1e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf60), 0x86);
        // CB 9E 0279
        gbc.setState(0x862f, 0xd152, 0x78a0, 0x4110, 0xc515, 0xb55e, 0x0, 0x1);
        gbc.writeMem(0x862f, { 0xcb, 0x9e });
        gbc.writeMem(0xb55e, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd152);
        EXPECT(gbc.pc(), 0x8631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x862f), 0xcb);
        EXPECT(gbc.readMem(0x8630), 0x9e);
        EXPECT(gbc.readMem(0xb55e), 0xf4);
        // CB 9E 027B
        gbc.setState(0xd289, 0x72f4, 0x6790, 0xa134, 0x3da2, 0xd3b5, 0x0, 0x0);
        gbc.writeMem(0xd289, { 0xcb, 0x9e });
        gbc.writeMem(0xd3b5, { 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x72f4);
        EXPECT(gbc.pc(), 0xd28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd289), 0xcb);
        EXPECT(gbc.readMem(0xd28a), 0x9e);
        EXPECT(gbc.readMem(0xd3b5), 0x27);
        // CB 9E 027C
        gbc.setState(0x8f1e, 0x1edb, 0xa480, 0x489a, 0x5e7c, 0x2fbb, 0x1, 0x0);
        gbc.writeMem(0x2fbb, { 0x52 });
        gbc.writeMem(0x8f1e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x1edb);
        EXPECT(gbc.pc(), 0x8f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f1e), 0xcb);
        EXPECT(gbc.readMem(0x8f1f), 0x9e);
        // CB 9E 027F
        gbc.setState(0xb552, 0x6636, 0xb570, 0x25b2, 0xab96, 0xb785, 0x1, 0x1);
        gbc.writeMem(0xb552, { 0xcb, 0x9e });
        gbc.writeMem(0xb785, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6636);
        EXPECT(gbc.pc(), 0xb554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb552), 0xcb);
        EXPECT(gbc.readMem(0xb553), 0x9e);
        EXPECT(gbc.readMem(0xb785), 0x75);
        // CB 9E 0280
        gbc.setState(0x9f0d, 0x3d6b, 0xa250, 0x8b06, 0x28ce, 0x43eb, 0x0, 0x0);
        gbc.writeMem(0x43eb, { 0xa2 });
        gbc.writeMem(0x9f0d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3d6b);
        EXPECT(gbc.pc(), 0x9f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0d), 0xcb);
        EXPECT(gbc.readMem(0x9f0e), 0x9e);
        // CB 9E 0281
        gbc.setState(0x5917, 0x908, 0xfc40, 0xcd74, 0x6584, 0xe86f, 0x1, 0x1);
        gbc.writeMem(0x5917, { 0xcb, 0x9e });
        gbc.writeMem(0xe86f, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x908);
        EXPECT(gbc.pc(), 0x5919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86f), 0xc3);
        // CB 9E 0283
        gbc.setState(0x7513, 0x2f2d, 0xdc10, 0x5c5, 0xe86e, 0xd098, 0x1, 0x0);
        gbc.writeMem(0x7513, { 0xcb, 0x9e });
        gbc.writeMem(0xd098, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2f2d);
        EXPECT(gbc.pc(), 0x7515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd098), 0x82);
        // CB 9E 0285
        gbc.setState(0xce27, 0xe999, 0x8aa0, 0xe154, 0xf206, 0x3988, 0x1, 0x0);
        gbc.writeMem(0x3988, { 0xf4 });
        gbc.writeMem(0xce27, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe999);
        EXPECT(gbc.pc(), 0xce29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce27), 0xcb);
        EXPECT(gbc.readMem(0xce28), 0x9e);
        // CB 9E 0286
        gbc.setState(0xa0ee, 0xa6df, 0x3dc0, 0x1ec2, 0x4ba4, 0x1f17, 0x1, 0x0);
        gbc.writeMem(0x1f17, { 0x71 });
        gbc.writeMem(0xa0ee, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa6df);
        EXPECT(gbc.pc(), 0xa0f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ee), 0xcb);
        EXPECT(gbc.readMem(0xa0ef), 0x9e);
        // CB 9E 0287
        gbc.setState(0x666f, 0x329, 0xa160, 0x157d, 0xdac1, 0xf276, 0x0, 0x1);
        gbc.writeMem(0x666f, { 0xcb, 0x9e });
        gbc.writeMem(0xf276, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x329);
        EXPECT(gbc.pc(), 0x6671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf276), 0xa3);
        // CB 9E 0288
        gbc.setState(0x747a, 0xbac5, 0xe360, 0xcaf9, 0x4f6e, 0xc92a, 0x0, 0x1);
        gbc.writeMem(0x747a, { 0xcb, 0x9e });
        gbc.writeMem(0xc92a, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbac5);
        EXPECT(gbc.pc(), 0x747c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc92a), 0xa3);
        // CB 9E 0289
        gbc.setState(0x4580, 0xfa30, 0x4fd0, 0x75a7, 0x47b8, 0x2e33, 0x0, 0x1);
        gbc.writeMem(0x2e33, { 0x16 });
        gbc.writeMem(0x4580, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfa30);
        EXPECT(gbc.pc(), 0x4582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 028A
        gbc.setState(0x2c7a, 0xbe35, 0xc070, 0xe32f, 0x5069, 0x9786, 0x1, 0x0);
        gbc.writeMem(0x2c7a, { 0xcb, 0x9e });
        gbc.writeMem(0x9786, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0x2c7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9786), 0xd4);
        // CB 9E 028B
        gbc.setState(0x9070, 0xda41, 0x2f10, 0x6b3b, 0xa246, 0xff5f, 0x1, 0x1);
        gbc.writeMem(0x9070, { 0xcb, 0x9e });
        gbc.writeMem(0xff5f, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xda41);
        EXPECT(gbc.pc(), 0x9072);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9070), 0xcb);
        EXPECT(gbc.readMem(0x9071), 0x9e);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // CB 9E 028D
        gbc.setState(0x9bc5, 0x6ec3, 0xf530, 0x8db8, 0x369a, 0x6f75, 0x0, 0x1);
        gbc.writeMem(0x6f75, { 0x55 });
        gbc.writeMem(0x9bc5, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6ec3);
        EXPECT(gbc.pc(), 0x9bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bc5), 0xcb);
        EXPECT(gbc.readMem(0x9bc6), 0x9e);
        // CB 9E 028E
        gbc.setState(0xb6cf, 0xffeb, 0x4cf0, 0x7b19, 0x1e90, 0xb1fa, 0x0, 0x0);
        gbc.writeMem(0xb1fa, { 0x49 });
        gbc.writeMem(0xb6cf, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xffeb);
        EXPECT(gbc.pc(), 0xb6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1fa), 0x41);
        EXPECT(gbc.readMem(0xb6cf), 0xcb);
        EXPECT(gbc.readMem(0xb6d0), 0x9e);
        // CB 9E 028F
        gbc.setState(0x7ea9, 0xa94e, 0x3220, 0xe567, 0x3148, 0x2aa3, 0x0, 0x0);
        gbc.writeMem(0x2aa3, { 0x25 });
        gbc.writeMem(0x7ea9, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa94e);
        EXPECT(gbc.pc(), 0x7eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0290
        gbc.setState(0xb6c6, 0xfcec, 0x2040, 0x829f, 0x5ff2, 0x70be, 0x0, 0x0);
        gbc.writeMem(0x70be, { 0x10 });
        gbc.writeMem(0xb6c6, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfcec);
        EXPECT(gbc.pc(), 0xb6c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c6), 0xcb);
        EXPECT(gbc.readMem(0xb6c7), 0x9e);
        // CB 9E 0292
        gbc.setState(0x3765, 0xe646, 0x37f0, 0xc731, 0xf04f, 0xed70, 0x0, 0x1);
        gbc.writeMem(0x3765, { 0xcb, 0x9e });
        gbc.writeMem(0xed70, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe646);
        EXPECT(gbc.pc(), 0x3767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed70), 0x51);
        // CB 9E 0296
        gbc.setState(0x45c7, 0x90c4, 0x3f70, 0x703e, 0x9aa8, 0x7d1f, 0x1, 0x1);
        gbc.writeMem(0x45c7, { 0xcb, 0x9e });
        gbc.writeMem(0x7d1f, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x90c4);
        EXPECT(gbc.pc(), 0x45c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0297
        gbc.setState(0xc73f, 0xd0db, 0x5d60, 0xd2c6, 0x6c61, 0xf3d1, 0x1, 0x1);
        gbc.writeMem(0xc73f, { 0xcb, 0x9e });
        gbc.writeMem(0xf3d1, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd0db);
        EXPECT(gbc.pc(), 0xc741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73f), 0xcb);
        EXPECT(gbc.readMem(0xc740), 0x9e);
        EXPECT(gbc.readMem(0xf3d1), 0x17);
        // CB 9E 0299
        gbc.setState(0x7a89, 0x3283, 0x310, 0xda1c, 0xb459, 0x8e72, 0x1, 0x0);
        gbc.writeMem(0x7a89, { 0xcb, 0x9e });
        gbc.writeMem(0x8e72, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3283);
        EXPECT(gbc.pc(), 0x7a8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e72), 0x17);
        // CB 9E 029A
        gbc.setState(0x4bb0, 0xf381, 0x630, 0xe3ab, 0xb8f5, 0xde3b, 0x0, 0x1);
        gbc.writeMem(0x4bb0, { 0xcb, 0x9e });
        gbc.writeMem(0xde3b, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf381);
        EXPECT(gbc.pc(), 0x4bb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3b), 0x46);
        // CB 9E 029B
        gbc.setState(0xa36b, 0xaf4, 0x3e40, 0x9eb3, 0xd6a7, 0x43ba, 0x0, 0x1);
        gbc.writeMem(0x43ba, { 0x13 });
        gbc.writeMem(0xa36b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaf4);
        EXPECT(gbc.pc(), 0xa36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36b), 0xcb);
        EXPECT(gbc.readMem(0xa36c), 0x9e);
        // CB 9E 029C
        gbc.setState(0xe209, 0xc40a, 0xf520, 0x3941, 0x7c42, 0xfd9c, 0x1, 0x1);
        gbc.writeMem(0xe209, { 0xcb, 0x9e });
        gbc.writeMem(0xfd9c, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc40a);
        EXPECT(gbc.pc(), 0xe20b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe209), 0xcb);
        EXPECT(gbc.readMem(0xe20a), 0x9e);
        EXPECT(gbc.readMem(0xfd9c), 0x14);
        // CB 9E 029D
        gbc.setState(0x1f4a, 0x9782, 0xdbd0, 0xd93e, 0x311c, 0xb5a4, 0x1, 0x1);
        gbc.writeMem(0x1f4a, { 0xcb, 0x9e });
        gbc.writeMem(0xb5a4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9782);
        EXPECT(gbc.pc(), 0x1f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a4), 0x0);
        // CB 9E 029E
        gbc.setState(0x6c44, 0x29dd, 0x28d0, 0x116f, 0x6057, 0x55ae, 0x0, 0x1);
        gbc.writeMem(0x55ae, { 0xc5 });
        gbc.writeMem(0x6c44, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x29dd);
        EXPECT(gbc.pc(), 0x6c46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 02A0
        gbc.setState(0x8b56, 0x1ddf, 0xe7d0, 0x878a, 0x9809, 0xc95c, 0x1, 0x0);
        gbc.writeMem(0x8b56, { 0xcb, 0x9e });
        gbc.writeMem(0xc95c, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1ddf);
        EXPECT(gbc.pc(), 0x8b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b56), 0xcb);
        EXPECT(gbc.readMem(0x8b57), 0x9e);
        EXPECT(gbc.readMem(0xc95c), 0x50);
        // CB 9E 02A2
        gbc.setState(0x79a7, 0xa6cc, 0x7140, 0xb343, 0x9194, 0xf35f, 0x0, 0x1);
        gbc.writeMem(0x79a7, { 0xcb, 0x9e });
        gbc.writeMem(0xf35f, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa6cc);
        EXPECT(gbc.pc(), 0x79a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf35f), 0x91);
        // CB 9E 02A5
        gbc.setState(0xa3ff, 0x54a8, 0xec50, 0x2706, 0xa353, 0xa25d, 0x0, 0x0);
        gbc.writeMem(0xa25d, { 0x96 });
        gbc.writeMem(0xa3ff, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x54a8);
        EXPECT(gbc.pc(), 0xa401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa25d), 0x96);
        EXPECT(gbc.readMem(0xa3ff), 0xcb);
        EXPECT(gbc.readMem(0xa400), 0x9e);
        // CB 9E 02A7
        gbc.setState(0xded4, 0xc082, 0x1d90, 0x243f, 0xdf9, 0xcd92, 0x1, 0x1);
        gbc.writeMem(0xcd92, { 0x56 });
        gbc.writeMem(0xded4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc082);
        EXPECT(gbc.pc(), 0xded6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd92), 0x56);
        EXPECT(gbc.readMem(0xded4), 0xcb);
        EXPECT(gbc.readMem(0xded5), 0x9e);
        // CB 9E 02A9
        gbc.setState(0x10f, 0x9776, 0xcf30, 0xe06b, 0xd0b3, 0xdb20, 0x0, 0x0);
        gbc.writeMem(0x10f, { 0xcb, 0x9e });
        gbc.writeMem(0xdb20, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9776);
        EXPECT(gbc.pc(), 0x111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb20), 0x3);
        // CB 9E 02AA
        gbc.setState(0x5c5, 0x7953, 0x1c20, 0x99d8, 0xf2e7, 0x8483, 0x1, 0x1);
        gbc.writeMem(0x5c5, { 0xcb, 0x9e });
        gbc.writeMem(0x8483, { 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7953);
        EXPECT(gbc.pc(), 0x5c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8483), 0x77);
        // CB 9E 02AB
        gbc.setState(0x8861, 0x9076, 0x38c0, 0xbdef, 0xc5f8, 0xdce8, 0x0, 0x1);
        gbc.writeMem(0x8861, { 0xcb, 0x9e });
        gbc.writeMem(0xdce8, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9076);
        EXPECT(gbc.pc(), 0x8863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8861), 0xcb);
        EXPECT(gbc.readMem(0x8862), 0x9e);
        EXPECT(gbc.readMem(0xdce8), 0x61);
        // CB 9E 02AE
        gbc.setState(0xec0c, 0xa94, 0x2140, 0x13af, 0x468d, 0x9aad, 0x0, 0x0);
        gbc.writeMem(0x9aad, { 0x94 });
        gbc.writeMem(0xec0c, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa94);
        EXPECT(gbc.pc(), 0xec0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aad), 0x94);
        EXPECT(gbc.readMem(0xec0c), 0xcb);
        EXPECT(gbc.readMem(0xec0d), 0x9e);
        // CB 9E 02B0
        gbc.setState(0x899d, 0x8a3e, 0x3770, 0x35e7, 0xc843, 0x81d, 0x0, 0x0);
        gbc.writeMem(0x81d, { 0x65 });
        gbc.writeMem(0x899d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8a3e);
        EXPECT(gbc.pc(), 0x899f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x899d), 0xcb);
        EXPECT(gbc.readMem(0x899e), 0x9e);
        // CB 9E 02B1
        gbc.setState(0x1547, 0x3616, 0x9020, 0x934d, 0x849d, 0x7d70, 0x1, 0x1);
        gbc.writeMem(0x1547, { 0xcb, 0x9e });
        gbc.writeMem(0x7d70, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3616);
        EXPECT(gbc.pc(), 0x1549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02B4
        gbc.setState(0x5940, 0xf49c, 0x42a0, 0xa7b5, 0xcf55, 0xd842, 0x0, 0x1);
        gbc.writeMem(0x5940, { 0xcb, 0x9e });
        gbc.writeMem(0xd842, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf49c);
        EXPECT(gbc.pc(), 0x5942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd842), 0xc5);
        // CB 9E 02B5
        gbc.setState(0x2f4e, 0x5eb0, 0x8140, 0x8635, 0x2af7, 0xa1, 0x0, 0x1);
        gbc.writeMem(0xa1, { 0xf7 });
        gbc.writeMem(0x2f4e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5eb0);
        EXPECT(gbc.pc(), 0x2f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02B6
        gbc.setState(0x4ae3, 0x3ad6, 0xd380, 0x9d45, 0xde7b, 0xce8e, 0x1, 0x0);
        gbc.writeMem(0x4ae3, { 0xcb, 0x9e });
        gbc.writeMem(0xce8e, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3ad6);
        EXPECT(gbc.pc(), 0x4ae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8e), 0xa3);
        // CB 9E 02B7
        gbc.setState(0x7b93, 0x1c02, 0x7810, 0x4f60, 0x8bcc, 0xb84e, 0x0, 0x0);
        gbc.writeMem(0x7b93, { 0xcb, 0x9e });
        gbc.writeMem(0xb84e, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1c02);
        EXPECT(gbc.pc(), 0x7b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb84e), 0x73);
        // CB 9E 02B8
        gbc.setState(0x9d78, 0x27e3, 0x6670, 0xa68a, 0xb814, 0x8445, 0x0, 0x1);
        gbc.writeMem(0x8445, { 0xfa });
        gbc.writeMem(0x9d78, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x27e3);
        EXPECT(gbc.pc(), 0x9d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8445), 0xf2);
        EXPECT(gbc.readMem(0x9d78), 0xcb);
        EXPECT(gbc.readMem(0x9d79), 0x9e);
        // CB 9E 02B9
        gbc.setState(0xd060, 0x6554, 0xb7b0, 0xa86d, 0xbac8, 0xfdd5, 0x0, 0x1);
        gbc.writeMem(0xd060, { 0xcb, 0x9e });
        gbc.writeMem(0xfdd5, { 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6554);
        EXPECT(gbc.pc(), 0xd062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd060), 0xcb);
        EXPECT(gbc.readMem(0xd061), 0x9e);
        EXPECT(gbc.readMem(0xfdd5), 0x51);
        // CB 9E 02BE
        gbc.setState(0xe0a1, 0xcd99, 0xa960, 0x2452, 0x3982, 0x18c3, 0x0, 0x1);
        gbc.writeMem(0x18c3, { 0xd3 });
        gbc.writeMem(0xe0a1, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcd99);
        EXPECT(gbc.pc(), 0xe0a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0a1), 0xcb);
        EXPECT(gbc.readMem(0xe0a2), 0x9e);
        // CB 9E 02BF
        gbc.setState(0x2452, 0x9a42, 0xb270, 0x7486, 0xc629, 0x7f83, 0x0, 0x0);
        gbc.writeMem(0x2452, { 0xcb, 0x9e });
        gbc.writeMem(0x7f83, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9a42);
        EXPECT(gbc.pc(), 0x2454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 02C0
        gbc.setState(0x33a4, 0xd654, 0xfc60, 0xae96, 0x126f, 0x65b1, 0x0, 0x0);
        gbc.writeMem(0x33a4, { 0xcb, 0x9e });
        gbc.writeMem(0x65b1, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd654);
        EXPECT(gbc.pc(), 0x33a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02C2
        gbc.setState(0x1a32, 0x28c1, 0xf8a0, 0x88cc, 0x6606, 0xef5d, 0x0, 0x1);
        gbc.writeMem(0x1a32, { 0xcb, 0x9e });
        gbc.writeMem(0xef5d, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x28c1);
        EXPECT(gbc.pc(), 0x1a34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5d), 0x15);
        // CB 9E 02C3
        gbc.setState(0x33ee, 0xe8a8, 0x6a50, 0xad50, 0x8a26, 0x97c5, 0x1, 0x0);
        gbc.writeMem(0x33ee, { 0xcb, 0x9e });
        gbc.writeMem(0x97c5, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe8a8);
        EXPECT(gbc.pc(), 0x33f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c5), 0xb7);
        // CB 9E 02C4
        gbc.setState(0xa215, 0x4f84, 0x6c50, 0xd999, 0x3220, 0xd25f, 0x1, 0x0);
        gbc.writeMem(0xa215, { 0xcb, 0x9e });
        gbc.writeMem(0xd25f, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4f84);
        EXPECT(gbc.pc(), 0xa217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa215), 0xcb);
        EXPECT(gbc.readMem(0xa216), 0x9e);
        EXPECT(gbc.readMem(0xd25f), 0x26);
        // CB 9E 02C6
        gbc.setState(0xeaec, 0x1250, 0x3920, 0xa68b, 0x655a, 0x2fce, 0x1, 0x0);
        gbc.writeMem(0x2fce, { 0xf7 });
        gbc.writeMem(0xeaec, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1250);
        EXPECT(gbc.pc(), 0xeaee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaec), 0xcb);
        EXPECT(gbc.readMem(0xeaed), 0x9e);
        // CB 9E 02C7
        gbc.setState(0x9693, 0xbdde, 0xbc30, 0xf0f8, 0x7ce6, 0x2ea8, 0x1, 0x1);
        gbc.writeMem(0x2ea8, { 0x37 });
        gbc.writeMem(0x9693, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xbdde);
        EXPECT(gbc.pc(), 0x9695);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9693), 0xcb);
        EXPECT(gbc.readMem(0x9694), 0x9e);
        // CB 9E 02C8
        gbc.setState(0x163b, 0x998b, 0xd000, 0x65bc, 0x9045, 0xc161, 0x1, 0x1);
        gbc.writeMem(0x163b, { 0xcb, 0x9e });
        gbc.writeMem(0xc161, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x998b);
        EXPECT(gbc.pc(), 0x163d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc161), 0x83);
        // CB 9E 02CA
        gbc.setState(0x8fc8, 0xf3a6, 0x3970, 0xd433, 0xb03b, 0x8387, 0x0, 0x1);
        gbc.writeMem(0x8387, { 0x67 });
        gbc.writeMem(0x8fc8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf3a6);
        EXPECT(gbc.pc(), 0x8fca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8387), 0x67);
        EXPECT(gbc.readMem(0x8fc8), 0xcb);
        EXPECT(gbc.readMem(0x8fc9), 0x9e);
        // CB 9E 02CC
        gbc.setState(0xb9bb, 0x4b2f, 0x6380, 0xaee1, 0xff4c, 0xcaac, 0x0, 0x1);
        gbc.writeMem(0xb9bb, { 0xcb, 0x9e });
        gbc.writeMem(0xcaac, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4b2f);
        EXPECT(gbc.pc(), 0xb9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bb), 0xcb);
        EXPECT(gbc.readMem(0xb9bc), 0x9e);
        EXPECT(gbc.readMem(0xcaac), 0x56);
        // CB 9E 02CD
        gbc.setState(0xaec8, 0xc888, 0x23e0, 0xea46, 0xfae4, 0x529f, 0x0, 0x1);
        gbc.writeMem(0x529f, { 0x81 });
        gbc.writeMem(0xaec8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc888);
        EXPECT(gbc.pc(), 0xaeca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec8), 0xcb);
        EXPECT(gbc.readMem(0xaec9), 0x9e);
        // CB 9E 02CE
        gbc.setState(0x807f, 0xa086, 0x2750, 0x97e3, 0x6aa1, 0x7b07, 0x0, 0x1);
        gbc.writeMem(0x7b07, { 0xb1 });
        gbc.writeMem(0x807f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa086);
        EXPECT(gbc.pc(), 0x8081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807f), 0xcb);
        EXPECT(gbc.readMem(0x8080), 0x9e);
        // CB 9E 02D0
        gbc.setState(0xd0c9, 0xd43c, 0xc3f0, 0x675f, 0xbe4, 0x8809, 0x0, 0x0);
        gbc.writeMem(0x8809, { 0xa6 });
        gbc.writeMem(0xd0c9, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd43c);
        EXPECT(gbc.pc(), 0xd0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8809), 0xa6);
        EXPECT(gbc.readMem(0xd0c9), 0xcb);
        EXPECT(gbc.readMem(0xd0ca), 0x9e);
        // CB 9E 02D1
        gbc.setState(0x9cbc, 0x518c, 0x6740, 0x509a, 0xc079, 0xd2fa, 0x0, 0x1);
        gbc.writeMem(0x9cbc, { 0xcb, 0x9e });
        gbc.writeMem(0xd2fa, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x518c);
        EXPECT(gbc.pc(), 0x9cbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cbc), 0xcb);
        EXPECT(gbc.readMem(0x9cbd), 0x9e);
        EXPECT(gbc.readMem(0xd2fa), 0x21);
        // CB 9E 02D2
        gbc.setState(0x418a, 0x3d5f, 0x1e10, 0xea94, 0xe666, 0xffd8, 0x1, 0x0);
        gbc.writeMem(0x418a, { 0xcb, 0x9e });
        gbc.writeMem(0xffd8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3d5f);
        EXPECT(gbc.pc(), 0x418c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffd8), 0x3);
        // CB 9E 02D3
        gbc.setState(0xc504, 0x69d3, 0xaf40, 0x407b, 0xedc2, 0x1f58, 0x1, 0x1);
        gbc.writeMem(0x1f58, { 0xc1 });
        gbc.writeMem(0xc504, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x69d3);
        EXPECT(gbc.pc(), 0xc506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc504), 0xcb);
        EXPECT(gbc.readMem(0xc505), 0x9e);
        // CB 9E 02D4
        gbc.setState(0x76d6, 0xb08a, 0xba30, 0x9dac, 0x525, 0x77f3, 0x1, 0x0);
        gbc.writeMem(0x76d6, { 0xcb, 0x9e });
        gbc.writeMem(0x77f3, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb08a);
        EXPECT(gbc.pc(), 0x76d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 02D5
        gbc.setState(0xa699, 0x5ea7, 0x1c50, 0xe38b, 0xb59e, 0xec4a, 0x0, 0x0);
        gbc.writeMem(0xa699, { 0xcb, 0x9e });
        gbc.writeMem(0xec4a, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5ea7);
        EXPECT(gbc.pc(), 0xa69b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa699), 0xcb);
        EXPECT(gbc.readMem(0xa69a), 0x9e);
        EXPECT(gbc.readMem(0xec4a), 0x73);
        // CB 9E 02D6
        gbc.setState(0x7d75, 0x7a3, 0xe740, 0x824d, 0x31a1, 0xe2e3, 0x1, 0x0);
        gbc.writeMem(0x7d75, { 0xcb, 0x9e });
        gbc.writeMem(0xe2e3, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7a3);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e3), 0xd1);
        // CB 9E 02D8
        gbc.setState(0x2c1f, 0x4e2d, 0xd480, 0x9116, 0x3feb, 0x4921, 0x1, 0x1);
        gbc.writeMem(0x2c1f, { 0xcb, 0x9e });
        gbc.writeMem(0x4921, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4e2d);
        EXPECT(gbc.pc(), 0x2c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02D9
        gbc.setState(0x683f, 0xa95f, 0x4880, 0x1675, 0x74b7, 0xd2c8, 0x0, 0x1);
        gbc.writeMem(0x683f, { 0xcb, 0x9e });
        gbc.writeMem(0xd2c8, { 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa95f);
        EXPECT(gbc.pc(), 0x6841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c8), 0x46);
        // CB 9E 02DB
        gbc.setState(0x5ea4, 0x4325, 0x4420, 0xf654, 0x3b66, 0x9f5e, 0x0, 0x1);
        gbc.writeMem(0x5ea4, { 0xcb, 0x9e });
        gbc.writeMem(0x9f5e, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4325);
        EXPECT(gbc.pc(), 0x5ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5e), 0x12);
        // CB 9E 02DD
        gbc.setState(0x8ca3, 0xcf21, 0xde70, 0xd395, 0xcb33, 0x81ca, 0x1, 0x1);
        gbc.writeMem(0x81ca, { 0xa3 });
        gbc.writeMem(0x8ca3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcf21);
        EXPECT(gbc.pc(), 0x8ca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ca), 0xa3);
        EXPECT(gbc.readMem(0x8ca3), 0xcb);
        EXPECT(gbc.readMem(0x8ca4), 0x9e);
        // CB 9E 02E0
        gbc.setState(0x23a4, 0x4bbf, 0x1ac0, 0xdcaa, 0x8a9a, 0x5826, 0x0, 0x1);
        gbc.writeMem(0x23a4, { 0xcb, 0x9e });
        gbc.writeMem(0x5826, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4bbf);
        EXPECT(gbc.pc(), 0x23a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02E1
        gbc.setState(0xbab6, 0xf2e, 0x36a0, 0xccf0, 0xed9, 0xb41c, 0x0, 0x1);
        gbc.writeMem(0xb41c, { 0x58 });
        gbc.writeMem(0xbab6, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf2e);
        EXPECT(gbc.pc(), 0xbab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41c), 0x50);
        EXPECT(gbc.readMem(0xbab6), 0xcb);
        EXPECT(gbc.readMem(0xbab7), 0x9e);
        // CB 9E 02E2
        gbc.setState(0x53a8, 0xc848, 0x1810, 0xe147, 0x9b8c, 0x29ed, 0x1, 0x1);
        gbc.writeMem(0x29ed, { 0x90 });
        gbc.writeMem(0x53a8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc848);
        EXPECT(gbc.pc(), 0x53aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 02E5
        gbc.setState(0x29c3, 0x9cdc, 0x2e90, 0xb35e, 0xdb3c, 0xff9b, 0x1, 0x1);
        gbc.writeMem(0x29c3, { 0xcb, 0x9e });
        gbc.writeMem(0xff9b, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9cdc);
        EXPECT(gbc.pc(), 0x29c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff9b), 0xf3);
        // CB 9E 02E6
        gbc.setState(0xe1f2, 0x8ac5, 0x8580, 0xda7, 0xde1c, 0xd664, 0x0, 0x0);
        gbc.writeMem(0xd664, { 0x75 });
        gbc.writeMem(0xe1f2, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8ac5);
        EXPECT(gbc.pc(), 0xe1f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd664), 0x75);
        EXPECT(gbc.readMem(0xe1f2), 0xcb);
        EXPECT(gbc.readMem(0xe1f3), 0x9e);
        // CB 9E 02E7
        gbc.setState(0xb1c4, 0x6460, 0x3b50, 0xb900, 0xb03f, 0xacc3, 0x0, 0x1);
        gbc.writeMem(0xacc3, { 0x7f });
        gbc.writeMem(0xb1c4, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6460);
        EXPECT(gbc.pc(), 0xb1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc3), 0x77);
        EXPECT(gbc.readMem(0xb1c4), 0xcb);
        EXPECT(gbc.readMem(0xb1c5), 0x9e);
        // CB 9E 02E8
        gbc.setState(0x77ea, 0xce38, 0x82d0, 0xa3cb, 0xe435, 0x9217, 0x0, 0x1);
        gbc.writeMem(0x77ea, { 0xcb, 0x9e });
        gbc.writeMem(0x9217, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xce38);
        EXPECT(gbc.pc(), 0x77ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9217), 0x82);
        // CB 9E 02EA
        gbc.setState(0x5478, 0xaa8f, 0x36d0, 0x9189, 0xdd00, 0xa484, 0x1, 0x0);
        gbc.writeMem(0x5478, { 0xcb, 0x9e });
        gbc.writeMem(0xa484, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xaa8f);
        EXPECT(gbc.pc(), 0x547a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa484), 0xa4);
        // CB 9E 02EB
        gbc.setState(0xd537, 0x19b0, 0x9b0, 0xa741, 0xb9f4, 0x47c6, 0x0, 0x0);
        gbc.writeMem(0x47c6, { 0xf5 });
        gbc.writeMem(0xd537, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x19b0);
        EXPECT(gbc.pc(), 0xd539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd537), 0xcb);
        EXPECT(gbc.readMem(0xd538), 0x9e);
        // CB 9E 02EC
        gbc.setState(0xe949, 0xa38c, 0x42a0, 0x3dd, 0xcc94, 0x227c, 0x0, 0x1);
        gbc.writeMem(0x227c, { 0x10 });
        gbc.writeMem(0xe949, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa38c);
        EXPECT(gbc.pc(), 0xe94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe949), 0xcb);
        EXPECT(gbc.readMem(0xe94a), 0x9e);
        // CB 9E 02ED
        gbc.setState(0xabfc, 0xd11e, 0x490, 0x742f, 0xa856, 0xb2d9, 0x0, 0x0);
        gbc.writeMem(0xabfc, { 0xcb, 0x9e });
        gbc.writeMem(0xb2d9, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd11e);
        EXPECT(gbc.pc(), 0xabfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabfc), 0xcb);
        EXPECT(gbc.readMem(0xabfd), 0x9e);
        EXPECT(gbc.readMem(0xb2d9), 0x92);
        // CB 9E 02EE
        gbc.setState(0x5a9c, 0xfb82, 0x9a60, 0x30b8, 0x4c88, 0x6601, 0x0, 0x0);
        gbc.writeMem(0x5a9c, { 0xcb, 0x9e });
        gbc.writeMem(0x6601, { 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfb82);
        EXPECT(gbc.pc(), 0x5a9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 02F0
        gbc.setState(0xb515, 0xa836, 0x3760, 0x6ab1, 0xa744, 0x6bb9, 0x1, 0x0);
        gbc.writeMem(0x6bb9, { 0x14 });
        gbc.writeMem(0xb515, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa836);
        EXPECT(gbc.pc(), 0xb517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb515), 0xcb);
        EXPECT(gbc.readMem(0xb516), 0x9e);
        // CB 9E 02F3
        gbc.setState(0x7e3, 0x207e, 0x7170, 0xd593, 0x2b75, 0xea8, 0x1, 0x0);
        gbc.writeMem(0x7e3, { 0xcb, 0x9e });
        gbc.writeMem(0xea8, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x207e);
        EXPECT(gbc.pc(), 0x7e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 02F4
        gbc.setState(0x2f46, 0x3d9e, 0x61c0, 0xd7be, 0x39b1, 0x8a1b, 0x1, 0x0);
        gbc.writeMem(0x2f46, { 0xcb, 0x9e });
        gbc.writeMem(0x8a1b, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3d9e);
        EXPECT(gbc.pc(), 0x2f48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1b), 0xc1);
        // CB 9E 02F5
        gbc.setState(0xcb03, 0x2a30, 0x44c0, 0x8a33, 0x2799, 0xe500, 0x1, 0x1);
        gbc.writeMem(0xcb03, { 0xcb, 0x9e });
        gbc.writeMem(0xe500, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2a30);
        EXPECT(gbc.pc(), 0xcb05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb03), 0xcb);
        EXPECT(gbc.readMem(0xcb04), 0x9e);
        EXPECT(gbc.readMem(0xe500), 0x75);
        // CB 9E 02F6
        gbc.setState(0xb732, 0x1db1, 0xc00, 0xf227, 0x755e, 0xf9d6, 0x0, 0x1);
        gbc.writeMem(0xb732, { 0xcb, 0x9e });
        gbc.writeMem(0xf9d6, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1db1);
        EXPECT(gbc.pc(), 0xb734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb732), 0xcb);
        EXPECT(gbc.readMem(0xb733), 0x9e);
        EXPECT(gbc.readMem(0xf9d6), 0x91);
        // CB 9E 02F8
        gbc.setState(0x36c, 0xabde, 0xcb0, 0xed47, 0x6bf8, 0xe7bb, 0x1, 0x1);
        gbc.writeMem(0x36c, { 0xcb, 0x9e });
        gbc.writeMem(0xe7bb, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xabde);
        EXPECT(gbc.pc(), 0x36e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bb), 0x11);
        // CB 9E 02F9
        gbc.setState(0xc113, 0x70c5, 0x3180, 0x10b6, 0x25e6, 0x1931, 0x0, 0x1);
        gbc.writeMem(0x1931, { 0x63 });
        gbc.writeMem(0xc113, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x70c5);
        EXPECT(gbc.pc(), 0xc115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc113), 0xcb);
        EXPECT(gbc.readMem(0xc114), 0x9e);
        // CB 9E 02FA
        gbc.setState(0xde61, 0xf1da, 0xe3e0, 0xf9cd, 0xc37b, 0xb0a5, 0x1, 0x0);
        gbc.writeMem(0xb0a5, { 0xc0 });
        gbc.writeMem(0xde61, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf1da);
        EXPECT(gbc.pc(), 0xde63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a5), 0xc0);
        EXPECT(gbc.readMem(0xde61), 0xcb);
        EXPECT(gbc.readMem(0xde62), 0x9e);
        // CB 9E 02FD
        gbc.setState(0xbcb, 0xe175, 0x73f0, 0x35da, 0xaf75, 0x8305, 0x0, 0x0);
        gbc.writeMem(0xbcb, { 0xcb, 0x9e });
        gbc.writeMem(0x8305, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe175);
        EXPECT(gbc.pc(), 0xbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8305), 0x96);
        // CB 9E 02FE
        gbc.setState(0x7572, 0x6bf1, 0x47d0, 0x88c5, 0xb669, 0x9558, 0x0, 0x0);
        gbc.writeMem(0x7572, { 0xcb, 0x9e });
        gbc.writeMem(0x9558, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6bf1);
        EXPECT(gbc.pc(), 0x7574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9558), 0x37);
        // CB 9E 0300
        gbc.setState(0xd0b3, 0x65b1, 0xff80, 0xf7d3, 0x9c75, 0xa165, 0x0, 0x0);
        gbc.writeMem(0xa165, { 0x55 });
        gbc.writeMem(0xd0b3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x65b1);
        EXPECT(gbc.pc(), 0xd0b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa165), 0x55);
        EXPECT(gbc.readMem(0xd0b3), 0xcb);
        EXPECT(gbc.readMem(0xd0b4), 0x9e);
        // CB 9E 0301
        gbc.setState(0x3e30, 0x30e7, 0x4550, 0x7b2f, 0xd793, 0x6c91, 0x1, 0x0);
        gbc.writeMem(0x3e30, { 0xcb, 0x9e });
        gbc.writeMem(0x6c91, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x30e7);
        EXPECT(gbc.pc(), 0x3e32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0302
        gbc.setState(0x871e, 0xcf6c, 0xb8d0, 0x7763, 0xaa16, 0xe1ed, 0x1, 0x0);
        gbc.writeMem(0x871e, { 0xcb, 0x9e });
        gbc.writeMem(0xe1ed, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcf6c);
        EXPECT(gbc.pc(), 0x8720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871e), 0xcb);
        EXPECT(gbc.readMem(0x871f), 0x9e);
        EXPECT(gbc.readMem(0xe1ed), 0x64);
        // CB 9E 0303
        gbc.setState(0xd67d, 0x474e, 0x7160, 0x5797, 0x53d3, 0xa8f8, 0x0, 0x0);
        gbc.writeMem(0xa8f8, { 0xd9 });
        gbc.writeMem(0xd67d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x474e);
        EXPECT(gbc.pc(), 0xd67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f8), 0xd1);
        EXPECT(gbc.readMem(0xd67d), 0xcb);
        EXPECT(gbc.readMem(0xd67e), 0x9e);
        // CB 9E 0304
        gbc.setState(0xa6a8, 0x28a6, 0x12d0, 0xe6a1, 0xe9f7, 0x2fce, 0x0, 0x0);
        gbc.writeMem(0x2fce, { 0xf7 });
        gbc.writeMem(0xa6a8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x28a6);
        EXPECT(gbc.pc(), 0xa6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a8), 0xcb);
        EXPECT(gbc.readMem(0xa6a9), 0x9e);
        // CB 9E 0305
        gbc.setState(0x1a1a, 0x9f85, 0xbb70, 0x49f1, 0xea0d, 0xce53, 0x1, 0x1);
        gbc.writeMem(0x1a1a, { 0xcb, 0x9e });
        gbc.writeMem(0xce53, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9f85);
        EXPECT(gbc.pc(), 0x1a1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce53), 0x95);
        // CB 9E 0307
        gbc.setState(0x4586, 0x5444, 0x5560, 0xb11c, 0x19e1, 0xb3c0, 0x1, 0x0);
        gbc.writeMem(0x4586, { 0xcb, 0x9e });
        gbc.writeMem(0xb3c0, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5444);
        EXPECT(gbc.pc(), 0x4588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c0), 0xb6);
        // CB 9E 0309
        gbc.setState(0xa03d, 0xa9d4, 0x12b0, 0xcc4c, 0x1c7b, 0x821c, 0x1, 0x0);
        gbc.writeMem(0x821c, { 0x94 });
        gbc.writeMem(0xa03d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa9d4);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821c), 0x94);
        EXPECT(gbc.readMem(0xa03d), 0xcb);
        EXPECT(gbc.readMem(0xa03e), 0x9e);
        // CB 9E 030A
        gbc.setState(0x125a, 0xc65c, 0x9900, 0x2961, 0x5ff, 0x4640, 0x1, 0x0);
        gbc.writeMem(0x125a, { 0xcb, 0x9e });
        gbc.writeMem(0x4640, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc65c);
        EXPECT(gbc.pc(), 0x125c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 030B
        gbc.setState(0xca4a, 0x3866, 0x3000, 0x9df0, 0x5f9, 0xb41f, 0x1, 0x0);
        gbc.writeMem(0xb41f, { 0x7a });
        gbc.writeMem(0xca4a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3866);
        EXPECT(gbc.pc(), 0xca4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41f), 0x72);
        EXPECT(gbc.readMem(0xca4a), 0xcb);
        EXPECT(gbc.readMem(0xca4b), 0x9e);
        // CB 9E 030D
        gbc.setState(0x1db1, 0xa3e, 0x7720, 0xb54f, 0x6c3c, 0xf451, 0x1, 0x1);
        gbc.writeMem(0x1db1, { 0xcb, 0x9e });
        gbc.writeMem(0xf451, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa3e);
        EXPECT(gbc.pc(), 0x1db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf451), 0x50);
        // CB 9E 030E
        gbc.setState(0xaccd, 0x2262, 0x2be0, 0x8e7a, 0xe9f0, 0x8a3f, 0x0, 0x0);
        gbc.writeMem(0x8a3f, { 0x79 });
        gbc.writeMem(0xaccd, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2262);
        EXPECT(gbc.pc(), 0xaccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3f), 0x71);
        EXPECT(gbc.readMem(0xaccd), 0xcb);
        EXPECT(gbc.readMem(0xacce), 0x9e);
        // CB 9E 030F
        gbc.setState(0x7204, 0x6792, 0x5cb0, 0x2d77, 0xe33c, 0x1d5e, 0x0, 0x0);
        gbc.writeMem(0x1d5e, { 0x47 });
        gbc.writeMem(0x7204, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6792);
        EXPECT(gbc.pc(), 0x7206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0311
        gbc.setState(0xab54, 0xa42d, 0xb1f0, 0x1d40, 0x5f46, 0x70b, 0x1, 0x1);
        gbc.writeMem(0x70b, { 0x4 });
        gbc.writeMem(0xab54, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa42d);
        EXPECT(gbc.pc(), 0xab56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab54), 0xcb);
        EXPECT(gbc.readMem(0xab55), 0x9e);
        // CB 9E 0312
        gbc.setState(0xc016, 0x7059, 0xda20, 0x8f89, 0xdad2, 0xdbe6, 0x0, 0x0);
        gbc.writeMem(0xc016, { 0xcb, 0x9e });
        gbc.writeMem(0xdbe6, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7059);
        EXPECT(gbc.pc(), 0xc018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc016), 0xcb);
        EXPECT(gbc.readMem(0xc017), 0x9e);
        EXPECT(gbc.readMem(0xdbe6), 0x57);
        // CB 9E 0313
        gbc.setState(0x81cb, 0x5301, 0x6540, 0xac3b, 0x6c6, 0x78bf, 0x1, 0x1);
        gbc.writeMem(0x78bf, { 0xb7 });
        gbc.writeMem(0x81cb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5301);
        EXPECT(gbc.pc(), 0x81cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81cb), 0xcb);
        EXPECT(gbc.readMem(0x81cc), 0x9e);
        // CB 9E 0315
        gbc.setState(0xd28b, 0xbe56, 0x5820, 0x9300, 0x51ea, 0x5f54, 0x0, 0x0);
        gbc.writeMem(0x5f54, { 0x83 });
        gbc.writeMem(0xd28b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbe56);
        EXPECT(gbc.pc(), 0xd28d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28b), 0xcb);
        EXPECT(gbc.readMem(0xd28c), 0x9e);
        // CB 9E 0317
        gbc.setState(0x55ea, 0xca2, 0xa00, 0xa7a3, 0x11de, 0x5c29, 0x0, 0x1);
        gbc.writeMem(0x55ea, { 0xcb, 0x9e });
        gbc.writeMem(0x5c29, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xca2);
        EXPECT(gbc.pc(), 0x55ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0319
        gbc.setState(0x2085, 0xc698, 0xb5c0, 0x20eb, 0x5518, 0xc491, 0x1, 0x1);
        gbc.writeMem(0x2085, { 0xcb, 0x9e });
        gbc.writeMem(0xc491, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc698);
        EXPECT(gbc.pc(), 0x2087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc491), 0x20);
        // CB 9E 031A
        gbc.setState(0xa3f0, 0x6f4e, 0x1a10, 0xcf75, 0x2bb8, 0x560a, 0x1, 0x1);
        gbc.writeMem(0x560a, { 0xc5 });
        gbc.writeMem(0xa3f0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6f4e);
        EXPECT(gbc.pc(), 0xa3f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f0), 0xcb);
        EXPECT(gbc.readMem(0xa3f1), 0x9e);
        // CB 9E 031B
        gbc.setState(0xc72d, 0x940b, 0xaff0, 0x3616, 0x8ae8, 0x7fca, 0x0, 0x0);
        gbc.writeMem(0x7fca, { 0x14 });
        gbc.writeMem(0xc72d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x940b);
        EXPECT(gbc.pc(), 0xc72f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72d), 0xcb);
        EXPECT(gbc.readMem(0xc72e), 0x9e);
        // CB 9E 031C
        gbc.setState(0x486, 0x4c59, 0xb5e0, 0x5992, 0xa288, 0x4c7c, 0x1, 0x1);
        gbc.writeMem(0x486, { 0xcb, 0x9e });
        gbc.writeMem(0x4c7c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4c59);
        EXPECT(gbc.pc(), 0x488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 031F
        gbc.setState(0xbbd8, 0x671d, 0x39e0, 0xf2eb, 0xdaf1, 0xb24d, 0x1, 0x1);
        gbc.writeMem(0xb24d, { 0xdb });
        gbc.writeMem(0xbbd8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x671d);
        EXPECT(gbc.pc(), 0xbbda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb24d), 0xd3);
        EXPECT(gbc.readMem(0xbbd8), 0xcb);
        EXPECT(gbc.readMem(0xbbd9), 0x9e);
        // CB 9E 0320
        gbc.setState(0x46b6, 0xaaf9, 0x3d00, 0x3c6b, 0x712d, 0xccfb, 0x1, 0x1);
        gbc.writeMem(0x46b6, { 0xcb, 0x9e });
        gbc.writeMem(0xccfb, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xaaf9);
        EXPECT(gbc.pc(), 0x46b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfb), 0x31);
        // CB 9E 0321
        gbc.setState(0xa287, 0xf36e, 0x9750, 0x738b, 0xf723, 0xda75, 0x1, 0x1);
        gbc.writeMem(0xa287, { 0xcb, 0x9e });
        gbc.writeMem(0xda75, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf36e);
        EXPECT(gbc.pc(), 0xa289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa287), 0xcb);
        EXPECT(gbc.readMem(0xa288), 0x9e);
        EXPECT(gbc.readMem(0xda75), 0x65);
        // CB 9E 0322
        gbc.setState(0x9038, 0xab95, 0xe3c0, 0xc05a, 0xb134, 0x5a81, 0x0, 0x1);
        gbc.writeMem(0x5a81, { 0xd6 });
        gbc.writeMem(0x9038, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xab95);
        EXPECT(gbc.pc(), 0x903a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9038), 0xcb);
        EXPECT(gbc.readMem(0x9039), 0x9e);
        // CB 9E 0324
        gbc.setState(0x573a, 0xd698, 0x42b0, 0x5f04, 0xf2e9, 0xc705, 0x1, 0x0);
        gbc.writeMem(0x573a, { 0xcb, 0x9e });
        gbc.writeMem(0xc705, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xd698);
        EXPECT(gbc.pc(), 0x573c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc705), 0x86);
        // CB 9E 0326
        gbc.setState(0xbdb0, 0x350c, 0x58f0, 0x288, 0xb229, 0x63d9, 0x1, 0x1);
        gbc.writeMem(0x63d9, { 0x80 });
        gbc.writeMem(0xbdb0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x350c);
        EXPECT(gbc.pc(), 0xbdb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb0), 0xcb);
        EXPECT(gbc.readMem(0xbdb1), 0x9e);
        // CB 9E 0327
        gbc.setState(0x183b, 0x6a55, 0x6500, 0x2cbe, 0x8e4c, 0xedf4, 0x0, 0x0);
        gbc.writeMem(0x183b, { 0xcb, 0x9e });
        gbc.writeMem(0xedf4, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6a55);
        EXPECT(gbc.pc(), 0x183d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf4), 0x2);
        // CB 9E 032A
        gbc.setState(0x6cd3, 0x7b5d, 0xc530, 0xb87f, 0x7c39, 0xac40, 0x1, 0x0);
        gbc.writeMem(0x6cd3, { 0xcb, 0x9e });
        gbc.writeMem(0xac40, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7b5d);
        EXPECT(gbc.pc(), 0x6cd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac40), 0x81);
        // CB 9E 032B
        gbc.setState(0x4a06, 0x5504, 0xdf80, 0xa340, 0x41bf, 0x30d2, 0x0, 0x1);
        gbc.writeMem(0x30d2, { 0x16 });
        gbc.writeMem(0x4a06, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5504);
        EXPECT(gbc.pc(), 0x4a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 032C
        gbc.setState(0xa6e1, 0x88bf, 0xd990, 0xf4bf, 0x879a, 0xea54, 0x0, 0x1);
        gbc.writeMem(0xa6e1, { 0xcb, 0x9e });
        gbc.writeMem(0xea54, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x88bf);
        EXPECT(gbc.pc(), 0xa6e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6e1), 0xcb);
        EXPECT(gbc.readMem(0xa6e2), 0x9e);
        EXPECT(gbc.readMem(0xea54), 0x21);
        // CB 9E 032D
        gbc.setState(0xea68, 0xe61b, 0xb900, 0x88c, 0xc3e6, 0xd793, 0x1, 0x1);
        gbc.writeMem(0xd793, { 0xaf });
        gbc.writeMem(0xea68, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe61b);
        EXPECT(gbc.pc(), 0xea6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd793), 0xa7);
        EXPECT(gbc.readMem(0xea68), 0xcb);
        EXPECT(gbc.readMem(0xea69), 0x9e);
        // CB 9E 032E
        gbc.setState(0xdc49, 0x1438, 0x140, 0x3e2c, 0xa934, 0x1db0, 0x1, 0x1);
        gbc.writeMem(0x1db0, { 0xe6 });
        gbc.writeMem(0xdc49, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1438);
        EXPECT(gbc.pc(), 0xdc4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc49), 0xcb);
        EXPECT(gbc.readMem(0xdc4a), 0x9e);
        // CB 9E 032F
        gbc.setState(0xbf39, 0x6918, 0xe250, 0x1cad, 0x89bf, 0xed6c, 0x0, 0x1);
        gbc.writeMem(0xbf39, { 0xcb, 0x9e });
        gbc.writeMem(0xed6c, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6918);
        EXPECT(gbc.pc(), 0xbf3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf39), 0xcb);
        EXPECT(gbc.readMem(0xbf3a), 0x9e);
        EXPECT(gbc.readMem(0xed6c), 0x1);
        // CB 9E 0331
        gbc.setState(0x5dad, 0x86e, 0xd40, 0x4d39, 0x139, 0x4391, 0x1, 0x0);
        gbc.writeMem(0x4391, { 0x25 });
        gbc.writeMem(0x5dad, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x86e);
        EXPECT(gbc.pc(), 0x5daf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0332
        gbc.setState(0x5d6f, 0x45e9, 0xbb00, 0xd907, 0x7a1a, 0xefe3, 0x1, 0x1);
        gbc.writeMem(0x5d6f, { 0xcb, 0x9e });
        gbc.writeMem(0xefe3, { 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x45e9);
        EXPECT(gbc.pc(), 0x5d71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe3), 0x87);
        // CB 9E 0333
        gbc.setState(0xcd08, 0x58f6, 0x63f0, 0x7e91, 0x2a1d, 0xa67d, 0x0, 0x1);
        gbc.writeMem(0xa67d, { 0xdd });
        gbc.writeMem(0xcd08, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x58f6);
        EXPECT(gbc.pc(), 0xcd0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa67d), 0xd5);
        EXPECT(gbc.readMem(0xcd08), 0xcb);
        EXPECT(gbc.readMem(0xcd09), 0x9e);
        // CB 9E 0336
        gbc.setState(0xc2e8, 0x994f, 0xc3f0, 0x4d09, 0x31e2, 0xa8f2, 0x1, 0x0);
        gbc.writeMem(0xa8f2, { 0xbc });
        gbc.writeMem(0xc2e8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x994f);
        EXPECT(gbc.pc(), 0xc2ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8f2), 0xb4);
        EXPECT(gbc.readMem(0xc2e8), 0xcb);
        EXPECT(gbc.readMem(0xc2e9), 0x9e);
        // CB 9E 0338
        gbc.setState(0x3a30, 0x4f6a, 0x84f0, 0x6992, 0xac72, 0x68cc, 0x0, 0x1);
        gbc.writeMem(0x3a30, { 0xcb, 0x9e });
        gbc.writeMem(0x68cc, { 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4f6a);
        EXPECT(gbc.pc(), 0x3a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0339
        gbc.setState(0xc814, 0x2fe5, 0x5260, 0x29e8, 0x41db, 0x6893, 0x0, 0x1);
        gbc.writeMem(0x6893, { 0x21 });
        gbc.writeMem(0xc814, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2fe5);
        EXPECT(gbc.pc(), 0xc816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc814), 0xcb);
        EXPECT(gbc.readMem(0xc815), 0x9e);
        // CB 9E 033A
        gbc.setState(0x1155, 0x2f28, 0x6e80, 0x93c, 0x716c, 0xdf0e, 0x1, 0x0);
        gbc.writeMem(0x1155, { 0xcb, 0x9e });
        gbc.writeMem(0xdf0e, { 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2f28);
        EXPECT(gbc.pc(), 0x1157);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf0e), 0xa3);
        // CB 9E 033B
        gbc.setState(0x8cdc, 0xc975, 0x3310, 0x4f25, 0x7843, 0xe534, 0x0, 0x1);
        gbc.writeMem(0x8cdc, { 0xcb, 0x9e });
        gbc.writeMem(0xe534, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc975);
        EXPECT(gbc.pc(), 0x8cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cdc), 0xcb);
        EXPECT(gbc.readMem(0x8cdd), 0x9e);
        EXPECT(gbc.readMem(0xe534), 0xf3);
        // CB 9E 033C
        gbc.setState(0x8ab2, 0x7c1, 0x3a50, 0xb953, 0xe585, 0x8ff0, 0x1, 0x0);
        gbc.writeMem(0x8ab2, { 0xcb, 0x9e });
        gbc.writeMem(0x8ff0, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7c1);
        EXPECT(gbc.pc(), 0x8ab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab2), 0xcb);
        EXPECT(gbc.readMem(0x8ab3), 0x9e);
        EXPECT(gbc.readMem(0x8ff0), 0x10);
        // CB 9E 033E
        gbc.setState(0xa670, 0x43c1, 0xe270, 0x9359, 0xb1d6, 0x1b56, 0x0, 0x0);
        gbc.writeMem(0x1b56, { 0x97 });
        gbc.writeMem(0xa670, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x43c1);
        EXPECT(gbc.pc(), 0xa672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa670), 0xcb);
        EXPECT(gbc.readMem(0xa671), 0x9e);
        // CB 9E 0340
        gbc.setState(0xea40, 0x6d48, 0xde80, 0xaf48, 0x79ed, 0xb1fc, 0x1, 0x1);
        gbc.writeMem(0xb1fc, { 0xb8 });
        gbc.writeMem(0xea40, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6d48);
        EXPECT(gbc.pc(), 0xea42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1fc), 0xb0);
        EXPECT(gbc.readMem(0xea40), 0xcb);
        EXPECT(gbc.readMem(0xea41), 0x9e);
        // CB 9E 0341
        gbc.setState(0xb052, 0xcb1e, 0x9870, 0x9851, 0xf1ac, 0x82de, 0x0, 0x1);
        gbc.writeMem(0x82de, { 0x5d });
        gbc.writeMem(0xb052, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcb1e);
        EXPECT(gbc.pc(), 0xb054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82de), 0x55);
        EXPECT(gbc.readMem(0xb052), 0xcb);
        EXPECT(gbc.readMem(0xb053), 0x9e);
        // CB 9E 0342
        gbc.setState(0x4b73, 0x11a, 0xe6b0, 0x4185, 0x1b2b, 0x8e5b, 0x1, 0x1);
        gbc.writeMem(0x4b73, { 0xcb, 0x9e });
        gbc.writeMem(0x8e5b, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x11a);
        EXPECT(gbc.pc(), 0x4b75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e5b), 0x41);
        // CB 9E 0343
        gbc.setState(0x3404, 0x7a18, 0xc570, 0xb9e3, 0xad03, 0xe133, 0x0, 0x0);
        gbc.writeMem(0x3404, { 0xcb, 0x9e });
        gbc.writeMem(0xe133, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7a18);
        EXPECT(gbc.pc(), 0x3406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe133), 0x53);
        // CB 9E 0345
        gbc.setState(0xc67f, 0xed7f, 0x22b0, 0x3fa1, 0xe428, 0x60d1, 0x0, 0x0);
        gbc.writeMem(0x60d1, { 0xc5 });
        gbc.writeMem(0xc67f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xed7f);
        EXPECT(gbc.pc(), 0xc681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67f), 0xcb);
        EXPECT(gbc.readMem(0xc680), 0x9e);
        // CB 9E 0346
        gbc.setState(0x6c8, 0xf96b, 0x7fc0, 0x85a4, 0x4b79, 0x188d, 0x0, 0x0);
        gbc.writeMem(0x6c8, { 0xcb, 0x9e });
        gbc.writeMem(0x188d, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf96b);
        EXPECT(gbc.pc(), 0x6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0347
        gbc.setState(0x3d04, 0x1fb8, 0x8930, 0x215d, 0x3313, 0xf122, 0x0, 0x0);
        gbc.writeMem(0x3d04, { 0xcb, 0x9e });
        gbc.writeMem(0xf122, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1fb8);
        EXPECT(gbc.pc(), 0x3d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf122), 0xd6);
        // CB 9E 0348
        gbc.setState(0xe78b, 0x8314, 0x5cf0, 0x4fce, 0xeb41, 0xa8b3, 0x0, 0x1);
        gbc.writeMem(0xa8b3, { 0x64 });
        gbc.writeMem(0xe78b, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8314);
        EXPECT(gbc.pc(), 0xe78d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b3), 0x64);
        EXPECT(gbc.readMem(0xe78b), 0xcb);
        EXPECT(gbc.readMem(0xe78c), 0x9e);
        // CB 9E 034A
        gbc.setState(0x3a5d, 0xcdc9, 0xe700, 0xec3e, 0xb307, 0xb797, 0x0, 0x1);
        gbc.writeMem(0x3a5d, { 0xcb, 0x9e });
        gbc.writeMem(0xb797, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcdc9);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb797), 0x15);
        // CB 9E 034C
        gbc.setState(0x6473, 0xd5dd, 0x560, 0x48bc, 0xedb9, 0xa140, 0x1, 0x0);
        gbc.writeMem(0x6473, { 0xcb, 0x9e });
        gbc.writeMem(0xa140, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd5dd);
        EXPECT(gbc.pc(), 0x6475);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa140), 0xd3);
        // CB 9E 034E
        gbc.setState(0x259e, 0x1349, 0x4610, 0xe4a1, 0x23cb, 0xa2a9, 0x1, 0x1);
        gbc.writeMem(0x259e, { 0xcb, 0x9e });
        gbc.writeMem(0xa2a9, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1349);
        EXPECT(gbc.pc(), 0x25a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a9), 0xf3);
        // CB 9E 034F
        gbc.setState(0x7880, 0xc805, 0xd980, 0x227e, 0x7312, 0x40cd, 0x1, 0x0);
        gbc.writeMem(0x40cd, { 0xf4 });
        gbc.writeMem(0x7880, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc805);
        EXPECT(gbc.pc(), 0x7882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0350
        gbc.setState(0x5fc8, 0xaabe, 0xf9f0, 0x1039, 0x7bbc, 0x1aa3, 0x0, 0x0);
        gbc.writeMem(0x1aa3, { 0xf3 });
        gbc.writeMem(0x5fc8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xaabe);
        EXPECT(gbc.pc(), 0x5fca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0351
        gbc.setState(0xbf3, 0x5b2, 0xdfb0, 0xfd62, 0x82c3, 0xfbcf, 0x0, 0x0);
        gbc.writeMem(0xbf3, { 0xcb, 0x9e });
        gbc.writeMem(0xfbcf, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5b2);
        EXPECT(gbc.pc(), 0xbf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbcf), 0xc5);
        // CB 9E 0352
        gbc.setState(0xcfe7, 0xfb69, 0x5430, 0x9fe6, 0x353c, 0x73e7, 0x0, 0x0);
        gbc.writeMem(0x73e7, { 0xb1 });
        gbc.writeMem(0xcfe7, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfb69);
        EXPECT(gbc.pc(), 0xcfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe7), 0xcb);
        EXPECT(gbc.readMem(0xcfe8), 0x9e);
        // CB 9E 0353
        gbc.setState(0x5ec3, 0xd7e9, 0x8100, 0xdc7b, 0x415e, 0x5f71, 0x0, 0x0);
        gbc.writeMem(0x5ec3, { 0xcb, 0x9e });
        gbc.writeMem(0x5f71, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd7e9);
        EXPECT(gbc.pc(), 0x5ec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0358
        gbc.setState(0x9459, 0x719d, 0x8910, 0xfd38, 0x126e, 0xa0ba, 0x1, 0x1);
        gbc.writeMem(0x9459, { 0xcb, 0x9e });
        gbc.writeMem(0xa0ba, { 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x719d);
        EXPECT(gbc.pc(), 0x945b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9459), 0xcb);
        EXPECT(gbc.readMem(0x945a), 0x9e);
        EXPECT(gbc.readMem(0xa0ba), 0xc5);
        // CB 9E 0359
        gbc.setState(0x55d, 0x9483, 0x62e0, 0x9e6a, 0xe4af, 0x4bf6, 0x1, 0x0);
        gbc.writeMem(0x55d, { 0xcb, 0x9e });
        gbc.writeMem(0x4bf6, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9483);
        EXPECT(gbc.pc(), 0x55f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 035A
        gbc.setState(0x6f5c, 0x9107, 0x7090, 0xa4a0, 0xb946, 0xdabf, 0x1, 0x0);
        gbc.writeMem(0x6f5c, { 0xcb, 0x9e });
        gbc.writeMem(0xdabf, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9107);
        EXPECT(gbc.pc(), 0x6f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdabf), 0x41);
        // CB 9E 035C
        gbc.setState(0x9794, 0xa73d, 0x430, 0xe3b9, 0xe50e, 0x44dd, 0x1, 0x0);
        gbc.writeMem(0x44dd, { 0x11 });
        gbc.writeMem(0x9794, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa73d);
        EXPECT(gbc.pc(), 0x9796);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9794), 0xcb);
        EXPECT(gbc.readMem(0x9795), 0x9e);
        // CB 9E 035D
        gbc.setState(0x3766, 0xe405, 0xb170, 0x620d, 0x46d2, 0xb533, 0x0, 0x0);
        gbc.writeMem(0x3766, { 0xcb, 0x9e });
        gbc.writeMem(0xb533, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe405);
        EXPECT(gbc.pc(), 0x3768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb533), 0xe1);
        // CB 9E 035F
        gbc.setState(0xcff3, 0xfe3b, 0xbfe0, 0x58c1, 0xb98a, 0xcbfe, 0x1, 0x0);
        gbc.writeMem(0xcbfe, { 0x20 });
        gbc.writeMem(0xcff3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfe3b);
        EXPECT(gbc.pc(), 0xcff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0x20);
        EXPECT(gbc.readMem(0xcff3), 0xcb);
        EXPECT(gbc.readMem(0xcff4), 0x9e);
        // CB 9E 0360
        gbc.setState(0xaed3, 0x986c, 0xc320, 0x93f5, 0xf266, 0x3825, 0x0, 0x1);
        gbc.writeMem(0x3825, { 0x83 });
        gbc.writeMem(0xaed3, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x986c);
        EXPECT(gbc.pc(), 0xaed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed3), 0xcb);
        EXPECT(gbc.readMem(0xaed4), 0x9e);
        // CB 9E 0361
        gbc.setState(0x3a17, 0x4a25, 0x7dc0, 0x2cf7, 0xf575, 0xd214, 0x0, 0x0);
        gbc.writeMem(0x3a17, { 0xcb, 0x9e });
        gbc.writeMem(0xd214, { 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x4a25);
        EXPECT(gbc.pc(), 0x3a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd214), 0xd0);
        // CB 9E 0362
        gbc.setState(0x7a7f, 0x8bfd, 0x6c90, 0x7f5b, 0xd356, 0x78d8, 0x1, 0x1);
        gbc.writeMem(0x78d8, { 0x56 });
        gbc.writeMem(0x7a7f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8bfd);
        EXPECT(gbc.pc(), 0x7a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0363
        gbc.setState(0x9334, 0xe968, 0x4900, 0xa472, 0x4e1a, 0x9740, 0x0, 0x0);
        gbc.writeMem(0x9334, { 0xcb, 0x9e });
        gbc.writeMem(0x9740, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe968);
        EXPECT(gbc.pc(), 0x9336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9334), 0xcb);
        EXPECT(gbc.readMem(0x9335), 0x9e);
        EXPECT(gbc.readMem(0x9740), 0x92);
        // CB 9E 0364
        gbc.setState(0xcb29, 0xf29, 0xc730, 0xee5d, 0x2588, 0x5ba7, 0x0, 0x0);
        gbc.writeMem(0x5ba7, { 0xc0 });
        gbc.writeMem(0xcb29, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf29);
        EXPECT(gbc.pc(), 0xcb2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb29), 0xcb);
        EXPECT(gbc.readMem(0xcb2a), 0x9e);
        // CB 9E 0365
        gbc.setState(0x8e10, 0x5b10, 0xd8f0, 0x59a7, 0x7e86, 0x62a9, 0x0, 0x0);
        gbc.writeMem(0x62a9, { 0x50 });
        gbc.writeMem(0x8e10, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5b10);
        EXPECT(gbc.pc(), 0x8e12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e10), 0xcb);
        EXPECT(gbc.readMem(0x8e11), 0x9e);
        // CB 9E 0366
        gbc.setState(0x8ef, 0x36fb, 0x26a0, 0xd233, 0x964c, 0x3b24, 0x0, 0x1);
        gbc.writeMem(0x8ef, { 0xcb, 0x9e });
        gbc.writeMem(0x3b24, { 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x36fb);
        EXPECT(gbc.pc(), 0x8f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0369
        gbc.setState(0xb85b, 0x10e0, 0x98f0, 0x1540, 0x6673, 0xca80, 0x1, 0x0);
        gbc.writeMem(0xb85b, { 0xcb, 0x9e });
        gbc.writeMem(0xca80, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x10e0);
        EXPECT(gbc.pc(), 0xb85d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85b), 0xcb);
        EXPECT(gbc.readMem(0xb85c), 0x9e);
        EXPECT(gbc.readMem(0xca80), 0x3);
        // CB 9E 036A
        gbc.setState(0x8237, 0x2a11, 0x6dc0, 0x354d, 0x38a2, 0x70d5, 0x0, 0x1);
        gbc.writeMem(0x70d5, { 0xf2 });
        gbc.writeMem(0x8237, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2a11);
        EXPECT(gbc.pc(), 0x8239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8237), 0xcb);
        EXPECT(gbc.readMem(0x8238), 0x9e);
        // CB 9E 036C
        gbc.setState(0x9eca, 0x1ecc, 0x2500, 0x271c, 0x40ee, 0xf62f, 0x1, 0x0);
        gbc.writeMem(0x9eca, { 0xcb, 0x9e });
        gbc.writeMem(0xf62f, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1ecc);
        EXPECT(gbc.pc(), 0x9ecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eca), 0xcb);
        EXPECT(gbc.readMem(0x9ecb), 0x9e);
        EXPECT(gbc.readMem(0xf62f), 0x53);
        // CB 9E 036D
        gbc.setState(0x80dd, 0x66ac, 0xd270, 0x17a6, 0x515e, 0xebc9, 0x1, 0x0);
        gbc.writeMem(0x80dd, { 0xcb, 0x9e });
        gbc.writeMem(0xebc9, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x66ac);
        EXPECT(gbc.pc(), 0x80df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80dd), 0xcb);
        EXPECT(gbc.readMem(0x80de), 0x9e);
        EXPECT(gbc.readMem(0xebc9), 0xa4);
        // CB 9E 036F
        gbc.setState(0x19de, 0x1ef4, 0x98e0, 0x4575, 0xfccf, 0xacc9, 0x1, 0x1);
        gbc.writeMem(0x19de, { 0xcb, 0x9e });
        gbc.writeMem(0xacc9, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1ef4);
        EXPECT(gbc.pc(), 0x19e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc9), 0x24);
        // CB 9E 0370
        gbc.setState(0xe81a, 0x9fbc, 0xb8c0, 0xafc0, 0xa494, 0x13a1, 0x1, 0x0);
        gbc.writeMem(0x13a1, { 0xc0 });
        gbc.writeMem(0xe81a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9fbc);
        EXPECT(gbc.pc(), 0xe81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe81a), 0xcb);
        EXPECT(gbc.readMem(0xe81b), 0x9e);
        // CB 9E 0371
        gbc.setState(0xc7b0, 0xcd48, 0x9b0, 0xa9a4, 0x1b11, 0x1608, 0x0, 0x1);
        gbc.writeMem(0x1608, { 0xc1 });
        gbc.writeMem(0xc7b0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcd48);
        EXPECT(gbc.pc(), 0xc7b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7b0), 0xcb);
        EXPECT(gbc.readMem(0xc7b1), 0x9e);
        // CB 9E 0375
        gbc.setState(0x1473, 0x141a, 0x2fa0, 0x3075, 0x68b6, 0xf1df, 0x0, 0x1);
        gbc.writeMem(0x1473, { 0xcb, 0x9e });
        gbc.writeMem(0xf1df, { 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x141a);
        EXPECT(gbc.pc(), 0x1475);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1df), 0x53);
        // CB 9E 0376
        gbc.setState(0x6bae, 0x53e0, 0xb990, 0xe08e, 0xb550, 0xe68b, 0x1, 0x0);
        gbc.writeMem(0x6bae, { 0xcb, 0x9e });
        gbc.writeMem(0xe68b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x53e0);
        EXPECT(gbc.pc(), 0x6bb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68b), 0xf1);
        // CB 9E 0377
        gbc.setState(0x428a, 0xa2bd, 0xc7f0, 0xcedd, 0x7796, 0x3c8f, 0x1, 0x1);
        gbc.writeMem(0x3c8f, { 0xa1 });
        gbc.writeMem(0x428a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa2bd);
        EXPECT(gbc.pc(), 0x428c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0378
        gbc.setState(0x60ea, 0x4f4f, 0xab0, 0x88da, 0xe51b, 0x5525, 0x1, 0x0);
        gbc.writeMem(0x5525, { 0xc6 });
        gbc.writeMem(0x60ea, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4f4f);
        EXPECT(gbc.pc(), 0x60ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0379
        gbc.setState(0x488c, 0xf892, 0x5f60, 0xd842, 0x3c73, 0xee42, 0x1, 0x1);
        gbc.writeMem(0x488c, { 0xcb, 0x9e });
        gbc.writeMem(0xee42, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf892);
        EXPECT(gbc.pc(), 0x488e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee42), 0x74);
        // CB 9E 037A
        gbc.setState(0x30f3, 0xb030, 0xc20, 0x9245, 0x2bf3, 0xb99b, 0x0, 0x0);
        gbc.writeMem(0x30f3, { 0xcb, 0x9e });
        gbc.writeMem(0xb99b, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb030);
        EXPECT(gbc.pc(), 0x30f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99b), 0xb5);
        // CB 9E 037C
        gbc.setState(0xbd5a, 0x6fc6, 0x9f10, 0xf180, 0x56f9, 0xf, 0x1, 0x0);
        gbc.writeMem(0xf, { 0xf5 });
        gbc.writeMem(0xbd5a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6fc6);
        EXPECT(gbc.pc(), 0xbd5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd5a), 0xcb);
        EXPECT(gbc.readMem(0xbd5b), 0x9e);
        // CB 9E 037E
        gbc.setState(0xb37f, 0x6573, 0xbe60, 0xa654, 0xc3ff, 0xdd51, 0x1, 0x0);
        gbc.writeMem(0xb37f, { 0xcb, 0x9e });
        gbc.writeMem(0xdd51, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x6573);
        EXPECT(gbc.pc(), 0xb381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb37f), 0xcb);
        EXPECT(gbc.readMem(0xb380), 0x9e);
        EXPECT(gbc.readMem(0xdd51), 0xe4);
        // CB 9E 0380
        gbc.setState(0x5335, 0x89c, 0xab50, 0x8571, 0x67b1, 0xc416, 0x1, 0x1);
        gbc.writeMem(0x5335, { 0xcb, 0x9e });
        gbc.writeMem(0xc416, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x89c);
        EXPECT(gbc.pc(), 0x5337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc416), 0x90);
        // CB 9E 0381
        gbc.setState(0x6abe, 0xd7bc, 0xd5c0, 0x9198, 0x2bc3, 0xc283, 0x1, 0x1);
        gbc.writeMem(0x6abe, { 0xcb, 0x9e });
        gbc.writeMem(0xc283, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd7bc);
        EXPECT(gbc.pc(), 0x6ac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc283), 0xb2);
        // CB 9E 0382
        gbc.setState(0x2852, 0xebf4, 0x39f0, 0x66ba, 0x3048, 0x11da, 0x1, 0x1);
        gbc.writeMem(0x11da, { 0x96 });
        gbc.writeMem(0x2852, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xebf4);
        EXPECT(gbc.pc(), 0x2854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 0383
        gbc.setState(0x455d, 0x3508, 0xd620, 0x8f93, 0xe78c, 0xf939, 0x0, 0x1);
        gbc.writeMem(0x455d, { 0xcb, 0x9e });
        gbc.writeMem(0xf939, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3508);
        EXPECT(gbc.pc(), 0x455f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf939), 0x54);
        // CB 9E 0384
        gbc.setState(0x8f71, 0x9ed7, 0x54c0, 0xc4aa, 0xcde2, 0xd16a, 0x0, 0x1);
        gbc.writeMem(0x8f71, { 0xcb, 0x9e });
        gbc.writeMem(0xd16a, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9ed7);
        EXPECT(gbc.pc(), 0x8f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f71), 0xcb);
        EXPECT(gbc.readMem(0x8f72), 0x9e);
        EXPECT(gbc.readMem(0xd16a), 0xd3);
        // CB 9E 0386
        gbc.setState(0x7590, 0x1283, 0xa1b0, 0xfc7f, 0x8c25, 0x9510, 0x0, 0x0);
        gbc.writeMem(0x7590, { 0xcb, 0x9e });
        gbc.writeMem(0x9510, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1283);
        EXPECT(gbc.pc(), 0x7592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9510), 0xe0);
        // CB 9E 0388
        gbc.setState(0xdbfb, 0xe7eb, 0xf520, 0x91d5, 0x3cb2, 0x4fc8, 0x1, 0x0);
        gbc.writeMem(0x4fc8, { 0xd2 });
        gbc.writeMem(0xdbfb, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe7eb);
        EXPECT(gbc.pc(), 0xdbfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbfb), 0xcb);
        EXPECT(gbc.readMem(0xdbfc), 0x9e);
        // CB 9E 038A
        gbc.setState(0xb6cf, 0x7a37, 0xdf40, 0x4b4d, 0x3e08, 0xf565, 0x0, 0x1);
        gbc.writeMem(0xb6cf, { 0xcb, 0x9e });
        gbc.writeMem(0xf565, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7a37);
        EXPECT(gbc.pc(), 0xb6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cf), 0xcb);
        EXPECT(gbc.readMem(0xb6d0), 0x9e);
        EXPECT(gbc.readMem(0xf565), 0x33);
        // CB 9E 038C
        gbc.setState(0x82b0, 0xf9e9, 0x70b0, 0xc65a, 0x6e44, 0xa6dd, 0x1, 0x1);
        gbc.writeMem(0x82b0, { 0xcb, 0x9e });
        gbc.writeMem(0xa6dd, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf9e9);
        EXPECT(gbc.pc(), 0x82b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82b0), 0xcb);
        EXPECT(gbc.readMem(0x82b1), 0x9e);
        EXPECT(gbc.readMem(0xa6dd), 0x53);
        // CB 9E 038D
        gbc.setState(0x2632, 0x8bac, 0x8f00, 0x219b, 0x9152, 0xe3bc, 0x0, 0x0);
        gbc.writeMem(0x2632, { 0xcb, 0x9e });
        gbc.writeMem(0xe3bc, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x8bac);
        EXPECT(gbc.pc(), 0x2634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3bc), 0x82);
        // CB 9E 038E
        gbc.setState(0x64ca, 0x9ee6, 0x80e0, 0x2a73, 0x7a8f, 0x1f27, 0x0, 0x1);
        gbc.writeMem(0x1f27, { 0x55 });
        gbc.writeMem(0x64ca, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9ee6);
        EXPECT(gbc.pc(), 0x64cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 038F
        gbc.setState(0x6594, 0x8b33, 0xd5e0, 0x7043, 0xc011, 0x4e48, 0x0, 0x0);
        gbc.writeMem(0x4e48, { 0xa1 });
        gbc.writeMem(0x6594, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8b33);
        EXPECT(gbc.pc(), 0x6596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 0390
        gbc.setState(0xe4da, 0x7e06, 0xcd30, 0x7884, 0xd923, 0xe900, 0x1, 0x0);
        gbc.writeMem(0xe4da, { 0xcb, 0x9e });
        gbc.writeMem(0xe900, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7e06);
        EXPECT(gbc.pc(), 0xe4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4da), 0xcb);
        EXPECT(gbc.readMem(0xe4db), 0x9e);
        EXPECT(gbc.readMem(0xe900), 0x21);
        // CB 9E 0392
        gbc.setState(0x783e, 0x15ad, 0x3470, 0xf8b9, 0xc665, 0xfbb8, 0x0, 0x0);
        gbc.writeMem(0x783e, { 0xcb, 0x9e });
        gbc.writeMem(0xfbb8, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x15ad);
        EXPECT(gbc.pc(), 0x7840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfbb8), 0x52);
        // CB 9E 0393
        gbc.setState(0x9d1f, 0x7dc, 0xf920, 0x763c, 0xc38b, 0x2d22, 0x1, 0x1);
        gbc.writeMem(0x2d22, { 0xb6 });
        gbc.writeMem(0x9d1f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7dc);
        EXPECT(gbc.pc(), 0x9d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1f), 0xcb);
        EXPECT(gbc.readMem(0x9d20), 0x9e);
        // CB 9E 0394
        gbc.setState(0x4480, 0x70ba, 0x4120, 0xc3b7, 0x64fb, 0x8172, 0x0, 0x1);
        gbc.writeMem(0x4480, { 0xcb, 0x9e });
        gbc.writeMem(0x8172, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x70ba);
        EXPECT(gbc.pc(), 0x4482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8172), 0x60);
        // CB 9E 0395
        gbc.setState(0x90f8, 0xb978, 0xf5b0, 0x7754, 0x7b91, 0xd254, 0x0, 0x1);
        gbc.writeMem(0x90f8, { 0xcb, 0x9e });
        gbc.writeMem(0xd254, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb978);
        EXPECT(gbc.pc(), 0x90fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f8), 0xcb);
        EXPECT(gbc.readMem(0x90f9), 0x9e);
        EXPECT(gbc.readMem(0xd254), 0x0);
        // CB 9E 0397
        gbc.setState(0x16f6, 0x5f87, 0x5d40, 0x372e, 0x5222, 0xa3eb, 0x0, 0x0);
        gbc.writeMem(0x16f6, { 0xcb, 0x9e });
        gbc.writeMem(0xa3eb, { 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5f87);
        EXPECT(gbc.pc(), 0x16f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3eb), 0xc1);
        // CB 9E 0398
        gbc.setState(0xaf84, 0xda0c, 0xcce0, 0xdf55, 0x8298, 0x9dcd, 0x0, 0x0);
        gbc.writeMem(0x9dcd, { 0xf0 });
        gbc.writeMem(0xaf84, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xda0c);
        EXPECT(gbc.pc(), 0xaf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dcd), 0xf0);
        EXPECT(gbc.readMem(0xaf84), 0xcb);
        EXPECT(gbc.readMem(0xaf85), 0x9e);
        // CB 9E 039B
        gbc.setState(0x7a58, 0x7316, 0xe6a0, 0x8ff7, 0x9305, 0x906c, 0x1, 0x1);
        gbc.writeMem(0x7a58, { 0xcb, 0x9e });
        gbc.writeMem(0x906c, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7316);
        EXPECT(gbc.pc(), 0x7a5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906c), 0x84);
        // CB 9E 039C
        gbc.setState(0xc693, 0x3f1f, 0x2f40, 0xa7a8, 0x3eff, 0x2c47, 0x0, 0x1);
        gbc.writeMem(0x2c47, { 0x82 });
        gbc.writeMem(0xc693, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3f1f);
        EXPECT(gbc.pc(), 0xc695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc693), 0xcb);
        EXPECT(gbc.readMem(0xc694), 0x9e);
        // CB 9E 039D
        gbc.setState(0xab27, 0x34a9, 0xc5e0, 0x6834, 0x62b1, 0x17f3, 0x0, 0x1);
        gbc.writeMem(0x17f3, { 0x41 });
        gbc.writeMem(0xab27, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x34a9);
        EXPECT(gbc.pc(), 0xab29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab27), 0xcb);
        EXPECT(gbc.readMem(0xab28), 0x9e);
        // CB 9E 039E
        gbc.setState(0x9f19, 0xabda, 0x96b0, 0x7e71, 0x2040, 0x9cf8, 0x0, 0x1);
        gbc.writeMem(0x9cf8, { 0x5f });
        gbc.writeMem(0x9f19, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xabda);
        EXPECT(gbc.pc(), 0x9f1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf8), 0x57);
        EXPECT(gbc.readMem(0x9f19), 0xcb);
        EXPECT(gbc.readMem(0x9f1a), 0x9e);
        // CB 9E 039F
        gbc.setState(0xea35, 0x7336, 0x73c0, 0xce08, 0xebc4, 0xcf13, 0x1, 0x0);
        gbc.writeMem(0xcf13, { 0x34 });
        gbc.writeMem(0xea35, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7336);
        EXPECT(gbc.pc(), 0xea37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf13), 0x34);
        EXPECT(gbc.readMem(0xea35), 0xcb);
        EXPECT(gbc.readMem(0xea36), 0x9e);
        // CB 9E 03A1
        gbc.setState(0xc39, 0x5e42, 0x3140, 0xb3c6, 0xc843, 0xa40, 0x0, 0x1);
        gbc.writeMem(0xa40, { 0x81 });
        gbc.writeMem(0xc39, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5e42);
        EXPECT(gbc.pc(), 0xc3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03A2
        gbc.setState(0x9f4f, 0x5ef1, 0xcef0, 0xb1d2, 0x4025, 0x5454, 0x0, 0x1);
        gbc.writeMem(0x5454, { 0xf7 });
        gbc.writeMem(0x9f4f, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5ef1);
        EXPECT(gbc.pc(), 0x9f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f4f), 0xcb);
        EXPECT(gbc.readMem(0x9f50), 0x9e);
        // CB 9E 03A3
        gbc.setState(0x1dc5, 0xd7da, 0x730, 0x70e8, 0xa2f3, 0xf525, 0x1, 0x1);
        gbc.writeMem(0x1dc5, { 0xcb, 0x9e });
        gbc.writeMem(0xf525, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd7da);
        EXPECT(gbc.pc(), 0x1dc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf525), 0x23);
        // CB 9E 03A4
        gbc.setState(0x7c5f, 0x85d5, 0x6650, 0x1292, 0xbb32, 0xf1b4, 0x0, 0x0);
        gbc.writeMem(0x7c5f, { 0xcb, 0x9e });
        gbc.writeMem(0xf1b4, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x85d5);
        EXPECT(gbc.pc(), 0x7c61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1b4), 0xe6);
        // CB 9E 03A5
        gbc.setState(0x4b24, 0xd51e, 0xb3a0, 0xc315, 0x93ff, 0xb7cb, 0x1, 0x1);
        gbc.writeMem(0x4b24, { 0xcb, 0x9e });
        gbc.writeMem(0xb7cb, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd51e);
        EXPECT(gbc.pc(), 0x4b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7cb), 0x93);
        // CB 9E 03A7
        gbc.setState(0x329e, 0xdd31, 0xd8e0, 0x325e, 0x1b1b, 0xd791, 0x1, 0x0);
        gbc.writeMem(0x329e, { 0xcb, 0x9e });
        gbc.writeMem(0xd791, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xdd31);
        EXPECT(gbc.pc(), 0x32a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd791), 0xa7);
        // CB 9E 03AB
        gbc.setState(0xa812, 0x21d8, 0xcdf0, 0x9ab2, 0xb3b9, 0x89c9, 0x1, 0x0);
        gbc.writeMem(0x89c9, { 0x48 });
        gbc.writeMem(0xa812, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x21d8);
        EXPECT(gbc.pc(), 0xa814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c9), 0x40);
        EXPECT(gbc.readMem(0xa812), 0xcb);
        EXPECT(gbc.readMem(0xa813), 0x9e);
        // CB 9E 03AC
        gbc.setState(0x97dd, 0x380a, 0x3be0, 0xc457, 0x35d0, 0x23cc, 0x1, 0x0);
        gbc.writeMem(0x23cc, { 0x95 });
        gbc.writeMem(0x97dd, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x380a);
        EXPECT(gbc.pc(), 0x97df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97dd), 0xcb);
        EXPECT(gbc.readMem(0x97de), 0x9e);
        // CB 9E 03AD
        gbc.setState(0x71, 0xfcca, 0x2c0, 0x167c, 0x6b85, 0xe827, 0x1, 0x0);
        gbc.writeMem(0x71, { 0xcb, 0x9e });
        gbc.writeMem(0xe827, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xfcca);
        EXPECT(gbc.pc(), 0x73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe827), 0x44);
        // CB 9E 03AE
        gbc.setState(0x5944, 0x5bf4, 0x6010, 0x186a, 0x5f52, 0xe4bb, 0x1, 0x1);
        gbc.writeMem(0x5944, { 0xcb, 0x9e });
        gbc.writeMem(0xe4bb, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5bf4);
        EXPECT(gbc.pc(), 0x5946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4bb), 0x33);
        // CB 9E 03B0
        gbc.setState(0x3ec8, 0x5571, 0xbb40, 0x5b91, 0x8291, 0xca4f, 0x1, 0x1);
        gbc.writeMem(0x3ec8, { 0xcb, 0x9e });
        gbc.writeMem(0xca4f, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5571);
        EXPECT(gbc.pc(), 0x3eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca4f), 0xc6);
        // CB 9E 03B1
        gbc.setState(0x1c9, 0x4693, 0xf0a0, 0x3c3b, 0xe275, 0xe538, 0x0, 0x1);
        gbc.writeMem(0x1c9, { 0xcb, 0x9e });
        gbc.writeMem(0xe538, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4693);
        EXPECT(gbc.pc(), 0x1cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe538), 0x35);
        // CB 9E 03B3
        gbc.setState(0x61da, 0xaa31, 0x20e0, 0x55a, 0x5b06, 0xf394, 0x0, 0x0);
        gbc.writeMem(0x61da, { 0xcb, 0x9e });
        gbc.writeMem(0xf394, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xaa31);
        EXPECT(gbc.pc(), 0x61dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf394), 0xa5);
        // CB 9E 03B5
        gbc.setState(0x6fbf, 0x2dc2, 0xd750, 0x8394, 0xd72a, 0xc7c1, 0x1, 0x0);
        gbc.writeMem(0x6fbf, { 0xcb, 0x9e });
        gbc.writeMem(0xc7c1, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2dc2);
        EXPECT(gbc.pc(), 0x6fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c1), 0xa3);
        // CB 9E 03B8
        gbc.setState(0xe0ec, 0x2415, 0x71e0, 0x1092, 0x574e, 0x5462, 0x1, 0x0);
        gbc.writeMem(0x5462, { 0x27 });
        gbc.writeMem(0xe0ec, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2415);
        EXPECT(gbc.pc(), 0xe0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0ec), 0xcb);
        EXPECT(gbc.readMem(0xe0ed), 0x9e);
        // CB 9E 03B9
        gbc.setState(0x1ee5, 0x79c6, 0xc480, 0x38f1, 0x4068, 0xb1a8, 0x1, 0x0);
        gbc.writeMem(0x1ee5, { 0xcb, 0x9e });
        gbc.writeMem(0xb1a8, { 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x79c6);
        EXPECT(gbc.pc(), 0x1ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a8), 0x6);
        // CB 9E 03BA
        gbc.setState(0x7001, 0x7b8, 0xb40, 0x19d, 0xdbaf, 0x749c, 0x0, 0x1);
        gbc.writeMem(0x7001, { 0xcb, 0x9e });
        gbc.writeMem(0x749c, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7b8);
        EXPECT(gbc.pc(), 0x7003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03BC
        gbc.setState(0x3219, 0xca7d, 0xcdf0, 0xac7b, 0xefb0, 0xcbed, 0x1, 0x1);
        gbc.writeMem(0x3219, { 0xcb, 0x9e });
        gbc.writeMem(0xcbed, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xca7d);
        EXPECT(gbc.pc(), 0x321b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbed), 0x83);
        // CB 9E 03BD
        gbc.setState(0xd92d, 0x360f, 0xb4c0, 0x4ea, 0x69c5, 0x5895, 0x0, 0x0);
        gbc.writeMem(0x5895, { 0x16 });
        gbc.writeMem(0xd92d, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x360f);
        EXPECT(gbc.pc(), 0xd92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92d), 0xcb);
        EXPECT(gbc.readMem(0xd92e), 0x9e);
        // CB 9E 03BE
        gbc.setState(0x2e1d, 0xcf83, 0x1880, 0x7634, 0xeac, 0x981e, 0x0, 0x0);
        gbc.writeMem(0x2e1d, { 0xcb, 0x9e });
        gbc.writeMem(0x981e, { 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xcf83);
        EXPECT(gbc.pc(), 0x2e1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981e), 0x56);
        // CB 9E 03BF
        gbc.setState(0xe4a7, 0x3d03, 0xd970, 0xb773, 0x61c7, 0xd75, 0x1, 0x1);
        gbc.writeMem(0xd75, { 0xe6 });
        gbc.writeMem(0xe4a7, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3d03);
        EXPECT(gbc.pc(), 0xe4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a7), 0xcb);
        EXPECT(gbc.readMem(0xe4a8), 0x9e);
        // CB 9E 03C1
        gbc.setState(0x6795, 0xce0a, 0xf190, 0xb86f, 0xc238, 0xbb6, 0x1, 0x1);
        gbc.writeMem(0xbb6, { 0x57 });
        gbc.writeMem(0x6795, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xce0a);
        EXPECT(gbc.pc(), 0x6797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 03C2
        gbc.setState(0x3999, 0x4ac3, 0x1720, 0x5033, 0xb11b, 0x22c7, 0x0, 0x1);
        gbc.writeMem(0x22c7, { 0x55 });
        gbc.writeMem(0x3999, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4ac3);
        EXPECT(gbc.pc(), 0x399b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03C3
        gbc.setState(0x1a2c, 0xff64, 0x7fb0, 0x2ea0, 0x4982, 0xc9a0, 0x1, 0x1);
        gbc.writeMem(0x1a2c, { 0xcb, 0x9e });
        gbc.writeMem(0xc9a0, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xff64);
        EXPECT(gbc.pc(), 0x1a2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a0), 0xd5);
        // CB 9E 03C4
        gbc.setState(0xe19, 0x9a04, 0xc580, 0x37b7, 0x5f12, 0x9b99, 0x1, 0x1);
        gbc.writeMem(0xe19, { 0xcb, 0x9e });
        gbc.writeMem(0x9b99, { 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9a04);
        EXPECT(gbc.pc(), 0xe1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b99), 0xc0);
        // CB 9E 03C7
        gbc.setState(0xd69a, 0xc879, 0x92a0, 0x8b6a, 0x7bd9, 0x1988, 0x1, 0x1);
        gbc.writeMem(0x1988, { 0x24 });
        gbc.writeMem(0xd69a, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc879);
        EXPECT(gbc.pc(), 0xd69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69a), 0xcb);
        EXPECT(gbc.readMem(0xd69b), 0x9e);
        // CB 9E 03C9
        gbc.setState(0x1ff7, 0xca9c, 0x5ef0, 0x3b64, 0xa80c, 0xb394, 0x0, 0x1);
        gbc.writeMem(0x1ff7, { 0xcb, 0x9e });
        gbc.writeMem(0xb394, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xca9c);
        EXPECT(gbc.pc(), 0x1ff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb394), 0xd6);
        // CB 9E 03CB
        gbc.setState(0x6544, 0x9358, 0x6b90, 0x60f, 0x71ba, 0x8a93, 0x1, 0x1);
        gbc.writeMem(0x6544, { 0xcb, 0x9e });
        gbc.writeMem(0x8a93, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9358);
        EXPECT(gbc.pc(), 0x6546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a93), 0x54);
        // CB 9E 03CC
        gbc.setState(0x4d7c, 0x93cc, 0x7e0, 0x7786, 0xf8aa, 0xa2fd, 0x1, 0x0);
        gbc.writeMem(0x4d7c, { 0xcb, 0x9e });
        gbc.writeMem(0xa2fd, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x93cc);
        EXPECT(gbc.pc(), 0x4d7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2fd), 0x44);
        // CB 9E 03CE
        gbc.setState(0x6623, 0xc718, 0xdf40, 0x29ea, 0x1081, 0x767e, 0x1, 0x1);
        gbc.writeMem(0x6623, { 0xcb, 0x9e });
        gbc.writeMem(0x767e, { 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xc718);
        EXPECT(gbc.pc(), 0x6625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03D0
        gbc.setState(0x43c7, 0x9aad, 0x8320, 0xe7d8, 0x32d6, 0x78ae, 0x0, 0x1);
        gbc.writeMem(0x43c7, { 0xcb, 0x9e });
        gbc.writeMem(0x78ae, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9aad);
        EXPECT(gbc.pc(), 0x43c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03D1
        gbc.setState(0x3a14, 0xcf6b, 0xa560, 0x7a49, 0xb3e9, 0xb5eb, 0x0, 0x0);
        gbc.writeMem(0x3a14, { 0xcb, 0x9e });
        gbc.writeMem(0xb5eb, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcf6b);
        EXPECT(gbc.pc(), 0x3a16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5eb), 0x73);
        // CB 9E 03D2
        gbc.setState(0x4870, 0x6764, 0xae50, 0xbf11, 0xa38f, 0xb63c, 0x0, 0x0);
        gbc.writeMem(0x4870, { 0xcb, 0x9e });
        gbc.writeMem(0xb63c, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6764);
        EXPECT(gbc.pc(), 0x4872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb63c), 0x62);
        // CB 9E 03D5
        gbc.setState(0x5e98, 0xe1c, 0x35f0, 0x3a1f, 0x1eb0, 0xa1cc, 0x0, 0x1);
        gbc.writeMem(0x5e98, { 0xcb, 0x9e });
        gbc.writeMem(0xa1cc, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe1c);
        EXPECT(gbc.pc(), 0x5e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1cc), 0xd5);
        // CB 9E 03D7
        gbc.setState(0xb2f8, 0x12c0, 0xad80, 0x3afa, 0x678c, 0x19ca, 0x1, 0x1);
        gbc.writeMem(0x19ca, { 0xc1 });
        gbc.writeMem(0xb2f8, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x12c0);
        EXPECT(gbc.pc(), 0xb2fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f8), 0xcb);
        EXPECT(gbc.readMem(0xb2f9), 0x9e);
        // CB 9E 03D9
        gbc.setState(0x1ba0, 0xa3d, 0xb9d0, 0xd682, 0x4927, 0xaae, 0x0, 0x0);
        gbc.writeMem(0xaae, { 0xc0 });
        gbc.writeMem(0x1ba0, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa3d);
        EXPECT(gbc.pc(), 0x1ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 03DA
        gbc.setState(0x9884, 0xa51b, 0xfa50, 0xbaa0, 0x7afc, 0xb8f4, 0x0, 0x1);
        gbc.writeMem(0x9884, { 0xcb, 0x9e });
        gbc.writeMem(0xb8f4, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xa51b);
        EXPECT(gbc.pc(), 0x9886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9884), 0xcb);
        EXPECT(gbc.readMem(0x9885), 0x9e);
        EXPECT(gbc.readMem(0xb8f4), 0x92);
        // CB 9E 03DB
        gbc.setState(0x83c7, 0x7bb2, 0xa8b0, 0x3f49, 0xb653, 0x8082, 0x1, 0x1);
        gbc.writeMem(0x8082, { 0xc4 });
        gbc.writeMem(0x83c7, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7bb2);
        EXPECT(gbc.pc(), 0x83c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8082), 0xc4);
        EXPECT(gbc.readMem(0x83c7), 0xcb);
        EXPECT(gbc.readMem(0x83c8), 0x9e);
        // CB 9E 03DE
        gbc.setState(0x4971, 0x2f68, 0xc8c0, 0xee6c, 0xc341, 0x5ff5, 0x1, 0x1);
        gbc.writeMem(0x4971, { 0xcb, 0x9e });
        gbc.writeMem(0x5ff5, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2f68);
        EXPECT(gbc.pc(), 0x4973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03DF
        gbc.setState(0xa2a2, 0x93c2, 0xed50, 0xb31f, 0x35ce, 0xdd9a, 0x0, 0x0);
        gbc.writeMem(0xa2a2, { 0xcb, 0x9e });
        gbc.writeMem(0xdd9a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x93c2);
        EXPECT(gbc.pc(), 0xa2a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a2), 0xcb);
        EXPECT(gbc.readMem(0xa2a3), 0x9e);
        EXPECT(gbc.readMem(0xdd9a), 0x94);
        // CB 9E 03E1
        gbc.setState(0x25f3, 0x7db0, 0x6bf0, 0x3f13, 0x3551, 0x9d2d, 0x1, 0x0);
        gbc.writeMem(0x25f3, { 0xcb, 0x9e });
        gbc.writeMem(0x9d2d, { 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7db0);
        EXPECT(gbc.pc(), 0x25f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d2d), 0xf4);
        // CB 9E 03E2
        gbc.setState(0x1b8e, 0x27f0, 0xcb70, 0x6d74, 0x128, 0x567b, 0x1, 0x0);
        gbc.writeMem(0x1b8e, { 0xcb, 0x9e });
        gbc.writeMem(0x567b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x27f0);
        EXPECT(gbc.pc(), 0x1b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 9E 03E4
        gbc.setState(0xcd78, 0xc2ce, 0x6170, 0xbdee, 0x1516, 0xf86b, 0x1, 0x1);
        gbc.writeMem(0xcd78, { 0xcb, 0x9e });
        gbc.writeMem(0xf86b, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc2ce);
        EXPECT(gbc.pc(), 0xcd7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd78), 0xcb);
        EXPECT(gbc.readMem(0xcd79), 0x9e);
        EXPECT(gbc.readMem(0xf86b), 0xb6);
        // CB 9E 03E5
        gbc.setState(0xbba1, 0x389d, 0x4770, 0x1d58, 0x822, 0xd999, 0x1, 0x1);
        gbc.writeMem(0xbba1, { 0xcb, 0x9e });
        gbc.writeMem(0xd999, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x389d);
        EXPECT(gbc.pc(), 0xbba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba1), 0xcb);
        EXPECT(gbc.readMem(0xbba2), 0x9e);
        EXPECT(gbc.readMem(0xd999), 0xf4);
        // CB 9E 03E6
        gbc.setState(0x482e, 0xc7b5, 0x8ac0, 0x29e1, 0xfb4, 0x3e62, 0x1, 0x1);
        gbc.writeMem(0x3e62, { 0x10 });
        gbc.writeMem(0x482e, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc7b5);
        EXPECT(gbc.pc(), 0x4830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 9E 03E7
        gbc.setState(0xccfc, 0x8360, 0x4610, 0x5d12, 0x2508, 0x8526, 0x0, 0x0);
        gbc.writeMem(0x8526, { 0x44 });
        gbc.writeMem(0xccfc, { 0xcb, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8360);
        EXPECT(gbc.pc(), 0xccfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8526), 0x44);
        EXPECT(gbc.readMem(0xccfc), 0xcb);
        EXPECT(gbc.readMem(0xccfd), 0x9e);
    }
