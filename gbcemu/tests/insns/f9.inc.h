    TEST(gbcemu, opcode_f9) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // F9 0000
        gbc.setState(0xea9a, 0x1382, 0xc570, 0x5acb, 0x3f1b, 0x3f35, 0x0, 0x1);
        gbc.writeMem(0xea9a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3f35);
        EXPECT(gbc.pc(), 0xea9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea9a), 0xf9);
        // F9 0001
        gbc.setState(0x665d, 0x5e78, 0xe4d0, 0xfd4, 0x79a4, 0x8864, 0x0, 0x0);
        gbc.writeMem(0x665d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8864);
        EXPECT(gbc.pc(), 0x665e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0002
        gbc.setState(0xc062, 0x1361, 0x7450, 0x18a7, 0x9fa3, 0xd3d6, 0x0, 0x0);
        gbc.writeMem(0xc062, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd3d6);
        EXPECT(gbc.pc(), 0xc063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc062), 0xf9);
        // F9 0003
        gbc.setState(0x7c0f, 0x9ca8, 0xd020, 0x7987, 0x6211, 0x3f9a, 0x1, 0x1);
        gbc.writeMem(0x7c0f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3f9a);
        EXPECT(gbc.pc(), 0x7c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0004
        gbc.setState(0x6e18, 0x3f2e, 0xbd50, 0xcb4e, 0x3288, 0x4062, 0x0, 0x1);
        gbc.writeMem(0x6e18, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4062);
        EXPECT(gbc.pc(), 0x6e19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0005
        gbc.setState(0xe7af, 0xb5d7, 0x5e90, 0xc11a, 0x7150, 0xbe5, 0x1, 0x1);
        gbc.writeMem(0xe7af, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbe5);
        EXPECT(gbc.pc(), 0xe7b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7af), 0xf9);
        // F9 0006
        gbc.setState(0xba1b, 0xc3df, 0x480, 0x464e, 0xccdc, 0x1c53, 0x0, 0x1);
        gbc.writeMem(0xba1b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1c53);
        EXPECT(gbc.pc(), 0xba1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1b), 0xf9);
        // F9 0007
        gbc.setState(0x92df, 0x6bbb, 0xc010, 0xdf3, 0xa95f, 0x5f07, 0x1, 0x1);
        gbc.writeMem(0x92df, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x5f07);
        EXPECT(gbc.pc(), 0x92e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92df), 0xf9);
        // F9 0009
        gbc.setState(0x89da, 0x8bc2, 0xec10, 0xff2d, 0x55b7, 0x1405, 0x1, 0x1);
        gbc.writeMem(0x89da, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x1405);
        EXPECT(gbc.pc(), 0x89db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89da), 0xf9);
        // F9 000A
        gbc.setState(0x9cdd, 0xf5d0, 0xd910, 0xace5, 0x88b8, 0x551e, 0x0, 0x0);
        gbc.writeMem(0x9cdd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x551e);
        EXPECT(gbc.pc(), 0x9cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cdd), 0xf9);
        // F9 000B
        gbc.setState(0xa3cc, 0x7bd2, 0x6fb0, 0x15a7, 0xda99, 0x6dd, 0x0, 0x0);
        gbc.writeMem(0xa3cc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6dd);
        EXPECT(gbc.pc(), 0xa3cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3cc), 0xf9);
        // F9 000C
        gbc.setState(0x2fb5, 0xc60b, 0x44a0, 0x30f, 0xe711, 0x7e63, 0x0, 0x1);
        gbc.writeMem(0x2fb5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7e63);
        EXPECT(gbc.pc(), 0x2fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 000D
        gbc.setState(0x319a, 0x198, 0xfd70, 0xaa8a, 0x1f43, 0xf763, 0x1, 0x0);
        gbc.writeMem(0x319a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf763);
        EXPECT(gbc.pc(), 0x319b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 000E
        gbc.setState(0x8481, 0x5a25, 0xfe30, 0xeedd, 0xcac4, 0x95e0, 0x1, 0x1);
        gbc.writeMem(0x8481, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x95e0);
        EXPECT(gbc.pc(), 0x8482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8481), 0xf9);
        // F9 000F
        gbc.setState(0xa0e9, 0x99ba, 0x9410, 0xb3c7, 0xd86d, 0x4486, 0x1, 0x1);
        gbc.writeMem(0xa0e9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4486);
        EXPECT(gbc.pc(), 0xa0ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e9), 0xf9);
        // F9 0010
        gbc.setState(0x2c30, 0x8c08, 0x4d90, 0x9f36, 0x7e57, 0xce5e, 0x1, 0x1);
        gbc.writeMem(0x2c30, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xce5e);
        EXPECT(gbc.pc(), 0x2c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0011
        gbc.setState(0x41a9, 0xdb09, 0xbe80, 0xd9f1, 0xe8fb, 0xf341, 0x1, 0x1);
        gbc.writeMem(0x41a9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf341);
        EXPECT(gbc.pc(), 0x41aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0012
        gbc.setState(0x3c48, 0x3d33, 0x9680, 0x935d, 0x9092, 0x48db, 0x0, 0x0);
        gbc.writeMem(0x3c48, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x48db);
        EXPECT(gbc.pc(), 0x3c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0013
        gbc.setState(0xe454, 0x6049, 0x74e0, 0xafca, 0x89e0, 0x2ec3, 0x1, 0x0);
        gbc.writeMem(0xe454, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2ec3);
        EXPECT(gbc.pc(), 0xe455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe454), 0xf9);
        // F9 0015
        gbc.setState(0xb4a9, 0x1a5c, 0x62b0, 0xc05, 0x1d98, 0x7a4f, 0x1, 0x0);
        gbc.writeMem(0xb4a9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7a4f);
        EXPECT(gbc.pc(), 0xb4aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4a9), 0xf9);
        // F9 0016
        gbc.setState(0xe50f, 0x69e9, 0x9510, 0x3a49, 0x7d87, 0x6eb2, 0x0, 0x1);
        gbc.writeMem(0xe50f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6eb2);
        EXPECT(gbc.pc(), 0xe510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe50f), 0xf9);
        // F9 0017
        gbc.setState(0xb663, 0xa23b, 0xc020, 0x54, 0xf0c2, 0xbd49, 0x1, 0x0);
        gbc.writeMem(0xb663, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbd49);
        EXPECT(gbc.pc(), 0xb664);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb663), 0xf9);
        // F9 0018
        gbc.setState(0x8b24, 0xf72, 0xf40, 0x90a6, 0x1608, 0xb0e9, 0x0, 0x0);
        gbc.writeMem(0x8b24, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb0e9);
        EXPECT(gbc.pc(), 0x8b25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b24), 0xf9);
        // F9 0019
        gbc.setState(0x3a2d, 0xf635, 0xc910, 0x896b, 0x8540, 0xb7d, 0x0, 0x0);
        gbc.writeMem(0x3a2d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb7d);
        EXPECT(gbc.pc(), 0x3a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 001A
        gbc.setState(0x5a4, 0x66d, 0x1cd0, 0x129, 0xc477, 0x4db7, 0x0, 0x1);
        gbc.writeMem(0x5a4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4db7);
        EXPECT(gbc.pc(), 0x5a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 001B
        gbc.setState(0xbad4, 0x97a3, 0x1c90, 0x6079, 0x521d, 0x718d, 0x0, 0x0);
        gbc.writeMem(0xbad4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x718d);
        EXPECT(gbc.pc(), 0xbad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad4), 0xf9);
        // F9 001C
        gbc.setState(0x90fb, 0xcd56, 0x500, 0x16fd, 0x78e8, 0x76e4, 0x0, 0x0);
        gbc.writeMem(0x90fb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x76e4);
        EXPECT(gbc.pc(), 0x90fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fb), 0xf9);
        // F9 001D
        gbc.setState(0x7ee6, 0xc229, 0x7360, 0x9634, 0xc743, 0xe929, 0x0, 0x0);
        gbc.writeMem(0x7ee6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe929);
        EXPECT(gbc.pc(), 0x7ee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 001F
        gbc.setState(0x33a2, 0xfa92, 0x8510, 0x60d7, 0x7d21, 0x852b, 0x0, 0x0);
        gbc.writeMem(0x33a2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x852b);
        EXPECT(gbc.pc(), 0x33a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0020
        gbc.setState(0xb4c, 0x6514, 0x2140, 0x1a54, 0xc3, 0xaa1f, 0x1, 0x0);
        gbc.writeMem(0xb4c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xaa1f);
        EXPECT(gbc.pc(), 0xb4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0021
        gbc.setState(0xce31, 0xc146, 0x350, 0x4090, 0x44f1, 0x4f3a, 0x0, 0x1);
        gbc.writeMem(0xce31, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4f3a);
        EXPECT(gbc.pc(), 0xce32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce31), 0xf9);
        // F9 0022
        gbc.setState(0xa247, 0x8ecd, 0x3ab0, 0x885, 0xefc7, 0x8b0, 0x1, 0x0);
        gbc.writeMem(0xa247, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8b0);
        EXPECT(gbc.pc(), 0xa248);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa247), 0xf9);
        // F9 0023
        gbc.setState(0x6ce0, 0x5cd1, 0x5990, 0x43e7, 0xf708, 0xe807, 0x1, 0x0);
        gbc.writeMem(0x6ce0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe807);
        EXPECT(gbc.pc(), 0x6ce1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0024
        gbc.setState(0x73bf, 0x37fd, 0x49b0, 0x7180, 0x8f42, 0x9e3b, 0x0, 0x1);
        gbc.writeMem(0x73bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x9e3b);
        EXPECT(gbc.pc(), 0x73c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0025
        gbc.setState(0x501a, 0x2e6b, 0x5560, 0x3c7a, 0x7c91, 0xf1c1, 0x1, 0x0);
        gbc.writeMem(0x501a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf1c1);
        EXPECT(gbc.pc(), 0x501b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0026
        gbc.setState(0xbfa2, 0x3c57, 0xec0, 0xcb37, 0xe085, 0xcd54, 0x1, 0x0);
        gbc.writeMem(0xbfa2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcd54);
        EXPECT(gbc.pc(), 0xbfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa2), 0xf9);
        // F9 0027
        gbc.setState(0x5dc3, 0x4191, 0xce60, 0x9783, 0x921, 0x8034, 0x1, 0x1);
        gbc.writeMem(0x5dc3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8034);
        EXPECT(gbc.pc(), 0x5dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0028
        gbc.setState(0xc10c, 0xa76c, 0x2b10, 0x9d2, 0x2435, 0xf114, 0x1, 0x1);
        gbc.writeMem(0xc10c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf114);
        EXPECT(gbc.pc(), 0xc10d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc10c), 0xf9);
        // F9 0029
        gbc.setState(0xa5df, 0xb590, 0xd620, 0x58b1, 0xfcd5, 0xe695, 0x1, 0x1);
        gbc.writeMem(0xa5df, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe695);
        EXPECT(gbc.pc(), 0xa5e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5df), 0xf9);
        // F9 002A
        gbc.setState(0x9248, 0x714c, 0x37b0, 0xf189, 0x5e91, 0xac35, 0x1, 0x0);
        gbc.writeMem(0x9248, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xac35);
        EXPECT(gbc.pc(), 0x9249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9248), 0xf9);
        // F9 002B
        gbc.setState(0x73db, 0x292c, 0xf270, 0xc05, 0xb896, 0x2a1c, 0x0, 0x1);
        gbc.writeMem(0x73db, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2a1c);
        EXPECT(gbc.pc(), 0x73dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 002C
        gbc.setState(0xe1c3, 0x5c78, 0xd350, 0x3ce2, 0xb553, 0x7cdd, 0x0, 0x1);
        gbc.writeMem(0xe1c3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x7cdd);
        EXPECT(gbc.pc(), 0xe1c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1c3), 0xf9);
        // F9 002D
        gbc.setState(0x11aa, 0x57f8, 0xb890, 0x36a2, 0xed4c, 0x2b67, 0x1, 0x1);
        gbc.writeMem(0x11aa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2b67);
        EXPECT(gbc.pc(), 0x11ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 002E
        gbc.setState(0x569f, 0x9f5, 0xc0a0, 0xec8d, 0xe662, 0x1887, 0x0, 0x1);
        gbc.writeMem(0x569f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1887);
        EXPECT(gbc.pc(), 0x56a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 002F
        gbc.setState(0xc6c2, 0xdb31, 0x7190, 0xad51, 0x7d57, 0xb93c, 0x0, 0x1);
        gbc.writeMem(0xc6c2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb93c);
        EXPECT(gbc.pc(), 0xc6c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6c2), 0xf9);
        // F9 0030
        gbc.setState(0xb577, 0x91a0, 0x1e00, 0x4577, 0xdd3c, 0x3fba, 0x0, 0x1);
        gbc.writeMem(0xb577, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3fba);
        EXPECT(gbc.pc(), 0xb578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb577), 0xf9);
        // F9 0031
        gbc.setState(0x8fff, 0xc024, 0x84e0, 0x7099, 0x9daf, 0xddef, 0x0, 0x1);
        gbc.writeMem(0x8fff, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xddef);
        EXPECT(gbc.pc(), 0x9000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fff), 0xf9);
        // F9 0032
        gbc.setState(0x89ea, 0x8052, 0x1270, 0xf734, 0x8b5e, 0x5e7d, 0x1, 0x0);
        gbc.writeMem(0x89ea, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5e7d);
        EXPECT(gbc.pc(), 0x89eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89ea), 0xf9);
        // F9 0033
        gbc.setState(0xb6a3, 0x9014, 0xd800, 0xa952, 0x1f06, 0xade1, 0x0, 0x0);
        gbc.writeMem(0xb6a3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xade1);
        EXPECT(gbc.pc(), 0xb6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a3), 0xf9);
        // F9 0034
        gbc.setState(0x6091, 0xce70, 0x36e0, 0xce76, 0x5109, 0xdfc1, 0x0, 0x0);
        gbc.writeMem(0x6091, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xdfc1);
        EXPECT(gbc.pc(), 0x6092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0036
        gbc.setState(0x6399, 0xd27f, 0xe1e0, 0x4f79, 0x2861, 0xb6f6, 0x1, 0x1);
        gbc.writeMem(0x6399, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb6f6);
        EXPECT(gbc.pc(), 0x639a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0037
        gbc.setState(0xbba7, 0x987b, 0xf2a0, 0x76c9, 0xd2a5, 0xae14, 0x0, 0x1);
        gbc.writeMem(0xbba7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xae14);
        EXPECT(gbc.pc(), 0xbba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbba7), 0xf9);
        // F9 0038
        gbc.setState(0x4118, 0x4422, 0x49e0, 0x4a4b, 0xf993, 0x3071, 0x1, 0x0);
        gbc.writeMem(0x4118, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3071);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0039
        gbc.setState(0x3f86, 0x1bb2, 0x8830, 0xf1cd, 0xc327, 0x8bce, 0x0, 0x0);
        gbc.writeMem(0x3f86, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8bce);
        EXPECT(gbc.pc(), 0x3f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 003A
        gbc.setState(0x1a26, 0xa035, 0xf970, 0x6f7a, 0x76fd, 0xa31b, 0x1, 0x1);
        gbc.writeMem(0x1a26, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa31b);
        EXPECT(gbc.pc(), 0x1a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 003B
        gbc.setState(0x9bed, 0x3bc5, 0x2cb0, 0x5fae, 0x76b3, 0xc4e9, 0x0, 0x1);
        gbc.writeMem(0x9bed, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc4e9);
        EXPECT(gbc.pc(), 0x9bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bed), 0xf9);
        // F9 003C
        gbc.setState(0xe728, 0xf7e1, 0x62e0, 0xa62d, 0x1ce0, 0x7282, 0x1, 0x1);
        gbc.writeMem(0xe728, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7282);
        EXPECT(gbc.pc(), 0xe729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe728), 0xf9);
        // F9 003D
        gbc.setState(0x1014, 0x93c6, 0x2020, 0x72f7, 0xc779, 0xf0a8, 0x0, 0x0);
        gbc.writeMem(0x1014, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf0a8);
        EXPECT(gbc.pc(), 0x1015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 003E
        gbc.setState(0x328f, 0x3d60, 0x8f30, 0xf215, 0xc97b, 0x50ca, 0x0, 0x1);
        gbc.writeMem(0x328f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x50ca);
        EXPECT(gbc.pc(), 0x3290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 003F
        gbc.setState(0x33f8, 0x1870, 0xefc0, 0x85a3, 0x5b11, 0xbbc4, 0x0, 0x0);
        gbc.writeMem(0x33f8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbbc4);
        EXPECT(gbc.pc(), 0x33f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0040
        gbc.setState(0x5c14, 0xab47, 0x2390, 0x635c, 0xae06, 0x738c, 0x1, 0x1);
        gbc.writeMem(0x5c14, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x738c);
        EXPECT(gbc.pc(), 0x5c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0041
        gbc.setState(0x56b8, 0xe4c4, 0xf7a0, 0xfac1, 0x3172, 0xe8dc, 0x1, 0x1);
        gbc.writeMem(0x56b8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0x56b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0042
        gbc.setState(0x58b0, 0x6540, 0x6f0, 0xd9ba, 0x41b6, 0x36b8, 0x0, 0x0);
        gbc.writeMem(0x58b0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x36b8);
        EXPECT(gbc.pc(), 0x58b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0044
        gbc.setState(0x4ff2, 0xb46b, 0xdf40, 0x73f1, 0x34fb, 0x74e8, 0x1, 0x0);
        gbc.writeMem(0x4ff2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x74e8);
        EXPECT(gbc.pc(), 0x4ff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0045
        gbc.setState(0xd002, 0x1773, 0x23e0, 0x8519, 0x278c, 0x6013, 0x1, 0x1);
        gbc.writeMem(0xd002, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6013);
        EXPECT(gbc.pc(), 0xd003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd002), 0xf9);
        // F9 0046
        gbc.setState(0x53a0, 0x6b20, 0x8a50, 0x27c6, 0xa2c9, 0x48ba, 0x1, 0x1);
        gbc.writeMem(0x53a0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x48ba);
        EXPECT(gbc.pc(), 0x53a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0047
        gbc.setState(0x4fc6, 0xeb99, 0xc560, 0xe6f, 0x716f, 0xfe24, 0x0, 0x1);
        gbc.writeMem(0x4fc6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfe24);
        EXPECT(gbc.pc(), 0x4fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0048
        gbc.setState(0x8c73, 0x9ec9, 0xe280, 0x60c9, 0x4a2, 0xae24, 0x0, 0x1);
        gbc.writeMem(0x8c73, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xae24);
        EXPECT(gbc.pc(), 0x8c74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c73), 0xf9);
        // F9 0049
        gbc.setState(0x9232, 0x3e6c, 0xb930, 0xecef, 0x67f5, 0xb9, 0x1, 0x0);
        gbc.writeMem(0x9232, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb9);
        EXPECT(gbc.pc(), 0x9233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9232), 0xf9);
        // F9 004A
        gbc.setState(0x2d53, 0xe834, 0xd130, 0xd6c4, 0x8d30, 0x77c9, 0x1, 0x0);
        gbc.writeMem(0x2d53, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x77c9);
        EXPECT(gbc.pc(), 0x2d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 004B
        gbc.setState(0xabbd, 0x60ce, 0x7b80, 0xf61f, 0xcd47, 0x5d4d, 0x1, 0x0);
        gbc.writeMem(0xabbd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5d4d);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbd), 0xf9);
        // F9 004C
        gbc.setState(0x7e50, 0x2923, 0x76b0, 0x4d8, 0xd171, 0xac00, 0x1, 0x0);
        gbc.writeMem(0x7e50, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xac00);
        EXPECT(gbc.pc(), 0x7e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 004D
        gbc.setState(0xd81d, 0x1d65, 0x3920, 0x897a, 0x7ae, 0x2147, 0x1, 0x1);
        gbc.writeMem(0xd81d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2147);
        EXPECT(gbc.pc(), 0xd81e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81d), 0xf9);
        // F9 004E
        gbc.setState(0x1f6f, 0x9927, 0xe8f0, 0x6d22, 0xc90d, 0x749b, 0x0, 0x0);
        gbc.writeMem(0x1f6f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x749b);
        EXPECT(gbc.pc(), 0x1f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 004F
        gbc.setState(0x9cdf, 0xe8d2, 0xe8d0, 0xb1d2, 0xe58f, 0xa9be, 0x1, 0x0);
        gbc.writeMem(0x9cdf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa9be);
        EXPECT(gbc.pc(), 0x9ce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cdf), 0xf9);
        // F9 0050
        gbc.setState(0xa68a, 0xec21, 0x8e10, 0x33af, 0xd5d5, 0xb708, 0x1, 0x1);
        gbc.writeMem(0xa68a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb708);
        EXPECT(gbc.pc(), 0xa68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa68a), 0xf9);
        // F9 0051
        gbc.setState(0x9eb, 0xd8b9, 0x730, 0x9e7a, 0x71d5, 0x86fb, 0x1, 0x0);
        gbc.writeMem(0x9eb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x86fb);
        EXPECT(gbc.pc(), 0x9ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0052
        gbc.setState(0x3d78, 0xd5d7, 0x6730, 0x210b, 0x29a, 0x2e43, 0x1, 0x0);
        gbc.writeMem(0x3d78, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2e43);
        EXPECT(gbc.pc(), 0x3d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0053
        gbc.setState(0xc7f6, 0x99d1, 0xb600, 0xe2de, 0x6f5e, 0x2f95, 0x0, 0x0);
        gbc.writeMem(0xc7f6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2f95);
        EXPECT(gbc.pc(), 0xc7f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f6), 0xf9);
        // F9 0054
        gbc.setState(0x6b97, 0x6e1c, 0xdac0, 0xd341, 0x5e44, 0x8224, 0x1, 0x1);
        gbc.writeMem(0x6b97, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8224);
        EXPECT(gbc.pc(), 0x6b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0055
        gbc.setState(0x7f04, 0x4aff, 0x1170, 0x1b2b, 0x901d, 0xed85, 0x1, 0x0);
        gbc.writeMem(0x7f04, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xed85);
        EXPECT(gbc.pc(), 0x7f05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0056
        gbc.setState(0x5be6, 0x7cd5, 0x4c90, 0xac33, 0xc217, 0x5037, 0x0, 0x1);
        gbc.writeMem(0x5be6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5037);
        EXPECT(gbc.pc(), 0x5be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0057
        gbc.setState(0x2b9e, 0x8d34, 0x47e0, 0xf791, 0x9953, 0xf148, 0x1, 0x0);
        gbc.writeMem(0x2b9e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf148);
        EXPECT(gbc.pc(), 0x2b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0058
        gbc.setState(0xa63c, 0x26f9, 0x9380, 0xed97, 0xf226, 0xde45, 0x1, 0x1);
        gbc.writeMem(0xa63c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xde45);
        EXPECT(gbc.pc(), 0xa63d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63c), 0xf9);
        // F9 0059
        gbc.setState(0x49f5, 0xad32, 0x7690, 0xc666, 0xefb9, 0x55c, 0x1, 0x1);
        gbc.writeMem(0x49f5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x55c);
        EXPECT(gbc.pc(), 0x49f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 005A
        gbc.setState(0xf2, 0xf593, 0xb190, 0xa9a0, 0xca92, 0x2008, 0x0, 0x0);
        gbc.writeMem(0xf2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2008);
        EXPECT(gbc.pc(), 0xf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 005B
        gbc.setState(0x5792, 0xad6c, 0xab80, 0x97da, 0x58bf, 0xbed2, 0x1, 0x1);
        gbc.writeMem(0x5792, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbed2);
        EXPECT(gbc.pc(), 0x5793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 005C
        gbc.setState(0x604b, 0xb4c4, 0xf040, 0xb2b3, 0x6191, 0xf6e9, 0x1, 0x1);
        gbc.writeMem(0x604b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf6e9);
        EXPECT(gbc.pc(), 0x604c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 005D
        gbc.setState(0xbfe9, 0x1208, 0x6400, 0x8187, 0x75ef, 0x9d1c, 0x0, 0x1);
        gbc.writeMem(0xbfe9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9d1c);
        EXPECT(gbc.pc(), 0xbfea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe9), 0xf9);
        // F9 005E
        gbc.setState(0xccb9, 0x935, 0x2b80, 0xea73, 0x72b1, 0xdcc5, 0x0, 0x1);
        gbc.writeMem(0xccb9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdcc5);
        EXPECT(gbc.pc(), 0xccba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb9), 0xf9);
        // F9 005F
        gbc.setState(0x4520, 0x673b, 0x94b0, 0x3412, 0x890a, 0x48cc, 0x1, 0x1);
        gbc.writeMem(0x4520, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x48cc);
        EXPECT(gbc.pc(), 0x4521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0060
        gbc.setState(0x134d, 0xdca, 0xd290, 0xdbc4, 0x56e2, 0x8591, 0x1, 0x1);
        gbc.writeMem(0x134d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8591);
        EXPECT(gbc.pc(), 0x134e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0061
        gbc.setState(0xc0ea, 0x5c71, 0x7c0, 0x9dcc, 0xaaf, 0x115b, 0x1, 0x1);
        gbc.writeMem(0xc0ea, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x115b);
        EXPECT(gbc.pc(), 0xc0eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ea), 0xf9);
        // F9 0062
        gbc.setState(0xe3e8, 0x2750, 0xe0d0, 0x6d6d, 0x23b, 0x50d3, 0x1, 0x0);
        gbc.writeMem(0xe3e8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x50d3);
        EXPECT(gbc.pc(), 0xe3e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3e8), 0xf9);
        // F9 0063
        gbc.setState(0xcfc8, 0x355b, 0x5930, 0x85f7, 0x80dc, 0x91ea, 0x1, 0x1);
        gbc.writeMem(0xcfc8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x91ea);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc8), 0xf9);
        // F9 0064
        gbc.setState(0xea8f, 0x26b7, 0xe7b0, 0x47f5, 0x3566, 0xa43d, 0x1, 0x1);
        gbc.writeMem(0xea8f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa43d);
        EXPECT(gbc.pc(), 0xea90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8f), 0xf9);
        // F9 0065
        gbc.setState(0xa648, 0xcac3, 0xb40, 0x77b7, 0x8026, 0xd675, 0x1, 0x0);
        gbc.writeMem(0xa648, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd675);
        EXPECT(gbc.pc(), 0xa649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa648), 0xf9);
        // F9 0066
        gbc.setState(0x5bf7, 0xa8c2, 0xa4f0, 0x2053, 0xc0ef, 0x4af, 0x0, 0x1);
        gbc.writeMem(0x5bf7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4af);
        EXPECT(gbc.pc(), 0x5bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0068
        gbc.setState(0xbee, 0x1dbd, 0x75f0, 0xe816, 0x4fcb, 0xcfee, 0x1, 0x0);
        gbc.writeMem(0xbee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcfee);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0069
        gbc.setState(0x20ac, 0x4de1, 0xb050, 0x74c7, 0x399f, 0x8371, 0x1, 0x1);
        gbc.writeMem(0x20ac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8371);
        EXPECT(gbc.pc(), 0x20ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 006A
        gbc.setState(0x2647, 0x5dbf, 0x39f0, 0x4c8c, 0x3657, 0xdb4a, 0x0, 0x1);
        gbc.writeMem(0x2647, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdb4a);
        EXPECT(gbc.pc(), 0x2648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 006B
        gbc.setState(0xa57c, 0xd84e, 0xeed0, 0xcbe2, 0xad1, 0x9178, 0x1, 0x1);
        gbc.writeMem(0xa57c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9178);
        EXPECT(gbc.pc(), 0xa57d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa57c), 0xf9);
        // F9 006C
        gbc.setState(0xaa96, 0x4b3d, 0xdd40, 0x3cd7, 0x510a, 0x6e25, 0x0, 0x0);
        gbc.writeMem(0xaa96, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6e25);
        EXPECT(gbc.pc(), 0xaa97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa96), 0xf9);
        // F9 006D
        gbc.setState(0x2d71, 0xc130, 0x9c80, 0xc6fd, 0xba0b, 0xb11e, 0x1, 0x0);
        gbc.writeMem(0x2d71, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb11e);
        EXPECT(gbc.pc(), 0x2d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 006E
        gbc.setState(0x6114, 0x8b3a, 0x3c90, 0xe3f0, 0xa0a4, 0x5d6, 0x0, 0x1);
        gbc.writeMem(0x6114, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5d6);
        EXPECT(gbc.pc(), 0x6115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0070
        gbc.setState(0x7124, 0xd33a, 0x4910, 0x5d89, 0xe891, 0x3b43, 0x1, 0x0);
        gbc.writeMem(0x7124, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3b43);
        EXPECT(gbc.pc(), 0x7125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0071
        gbc.setState(0xec86, 0x4e9c, 0xd420, 0x1e62, 0x604b, 0xf22, 0x0, 0x0);
        gbc.writeMem(0xec86, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf22);
        EXPECT(gbc.pc(), 0xec87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec86), 0xf9);
        // F9 0072
        gbc.setState(0x1ec6, 0xc8c6, 0xc080, 0xcd3a, 0x274c, 0x85e9, 0x0, 0x1);
        gbc.writeMem(0x1ec6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x85e9);
        EXPECT(gbc.pc(), 0x1ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0073
        gbc.setState(0x6f2d, 0x84ca, 0x4140, 0x405, 0x195f, 0x1f6f, 0x0, 0x0);
        gbc.writeMem(0x6f2d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1f6f);
        EXPECT(gbc.pc(), 0x6f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0074
        gbc.setState(0xa40f, 0x4190, 0xd250, 0xf385, 0x4416, 0x5ed7, 0x0, 0x1);
        gbc.writeMem(0xa40f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5ed7);
        EXPECT(gbc.pc(), 0xa410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa40f), 0xf9);
        // F9 0076
        gbc.setState(0x4425, 0x4ef5, 0xd540, 0xad7b, 0xb554, 0x648f, 0x1, 0x0);
        gbc.writeMem(0x4425, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x648f);
        EXPECT(gbc.pc(), 0x4426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0077
        gbc.setState(0x61ab, 0xe66a, 0x6f20, 0x56c3, 0xb9f7, 0xe2b0, 0x1, 0x0);
        gbc.writeMem(0x61ab, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe2b0);
        EXPECT(gbc.pc(), 0x61ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0078
        gbc.setState(0xa999, 0xe773, 0x6d50, 0x32a, 0x8525, 0x5831, 0x1, 0x1);
        gbc.writeMem(0xa999, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5831);
        EXPECT(gbc.pc(), 0xa99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa999), 0xf9);
        // F9 0079
        gbc.setState(0x6442, 0xe056, 0xc860, 0x7778, 0x5ecb, 0xa040, 0x1, 0x0);
        gbc.writeMem(0x6442, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa040);
        EXPECT(gbc.pc(), 0x6443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 007A
        gbc.setState(0x1b8f, 0x85ac, 0xfef0, 0x9f6b, 0x4eb6, 0xddba, 0x1, 0x0);
        gbc.writeMem(0x1b8f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xddba);
        EXPECT(gbc.pc(), 0x1b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 007B
        gbc.setState(0xa6bf, 0x5774, 0x4d90, 0x7097, 0x8c16, 0xed6a, 0x0, 0x1);
        gbc.writeMem(0xa6bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xed6a);
        EXPECT(gbc.pc(), 0xa6c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6bf), 0xf9);
        // F9 007C
        gbc.setState(0x151b, 0x5aee, 0x2360, 0xb47, 0xf19b, 0x2618, 0x1, 0x0);
        gbc.writeMem(0x151b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2618);
        EXPECT(gbc.pc(), 0x151c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 007D
        gbc.setState(0x35d7, 0x4bf6, 0xf3c0, 0x50c3, 0x746b, 0x219b, 0x1, 0x1);
        gbc.writeMem(0x35d7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x219b);
        EXPECT(gbc.pc(), 0x35d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 007E
        gbc.setState(0x5070, 0xdbfc, 0xadb0, 0x6874, 0x4b5b, 0x2697, 0x0, 0x0);
        gbc.writeMem(0x5070, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2697);
        EXPECT(gbc.pc(), 0x5071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 007F
        gbc.setState(0x2c7e, 0xe123, 0xb5a0, 0x85ba, 0xfc88, 0xa81a, 0x1, 0x0);
        gbc.writeMem(0x2c7e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa81a);
        EXPECT(gbc.pc(), 0x2c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0080
        gbc.setState(0xa337, 0x21f1, 0xb720, 0x1758, 0x6ca5, 0xf546, 0x0, 0x0);
        gbc.writeMem(0xa337, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf546);
        EXPECT(gbc.pc(), 0xa338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa337), 0xf9);
        // F9 0081
        gbc.setState(0x48ee, 0x6d58, 0xebb0, 0x7177, 0xde0f, 0x81ff, 0x0, 0x1);
        gbc.writeMem(0x48ee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x81ff);
        EXPECT(gbc.pc(), 0x48ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0082
        gbc.setState(0x629b, 0x11f3, 0x3170, 0x376e, 0x2cea, 0x7d90, 0x0, 0x0);
        gbc.writeMem(0x629b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7d90);
        EXPECT(gbc.pc(), 0x629c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0083
        gbc.setState(0x86f3, 0xc1c4, 0xee0, 0xabcd, 0x3d6f, 0xdf84, 0x0, 0x0);
        gbc.writeMem(0x86f3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xdf84);
        EXPECT(gbc.pc(), 0x86f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f3), 0xf9);
        // F9 0084
        gbc.setState(0x2c1e, 0x91f1, 0x6180, 0xb127, 0x730a, 0xd7eb, 0x1, 0x0);
        gbc.writeMem(0x2c1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd7eb);
        EXPECT(gbc.pc(), 0x2c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0085
        gbc.setState(0x49ad, 0x7a63, 0x1fa0, 0xde07, 0x8e8e, 0x10d3, 0x1, 0x0);
        gbc.writeMem(0x49ad, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x10d3);
        EXPECT(gbc.pc(), 0x49ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0086
        gbc.setState(0xc5be, 0x8fb6, 0x9ad0, 0xf02f, 0xa871, 0x2e4f, 0x1, 0x1);
        gbc.writeMem(0xc5be, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2e4f);
        EXPECT(gbc.pc(), 0xc5bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5be), 0xf9);
        // F9 0087
        gbc.setState(0xc2fc, 0x5679, 0x35d0, 0xcd9c, 0xe64d, 0x66b5, 0x1, 0x1);
        gbc.writeMem(0xc2fc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x66b5);
        EXPECT(gbc.pc(), 0xc2fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2fc), 0xf9);
        // F9 0089
        gbc.setState(0x27d4, 0x69b3, 0x350, 0x39c2, 0x7f40, 0x4a43, 0x0, 0x0);
        gbc.writeMem(0x27d4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4a43);
        EXPECT(gbc.pc(), 0x27d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 008A
        gbc.setState(0x48e5, 0xdba6, 0x1e70, 0xa0f1, 0xd641, 0x926a, 0x1, 0x0);
        gbc.writeMem(0x48e5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x926a);
        EXPECT(gbc.pc(), 0x48e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 008B
        gbc.setState(0xd377, 0x478, 0xd610, 0x1db2, 0x7599, 0x2bcd, 0x1, 0x1);
        gbc.writeMem(0xd377, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x2bcd);
        EXPECT(gbc.pc(), 0xd378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd377), 0xf9);
        // F9 008C
        gbc.setState(0xb7e5, 0x153b, 0xd6a0, 0xa022, 0xd110, 0x9854, 0x0, 0x0);
        gbc.writeMem(0xb7e5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9854);
        EXPECT(gbc.pc(), 0xb7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e5), 0xf9);
        // F9 008F
        gbc.setState(0xb8b3, 0x92fa, 0x32f0, 0x9db9, 0xdb5a, 0x3c1, 0x1, 0x1);
        gbc.writeMem(0xb8b3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3c1);
        EXPECT(gbc.pc(), 0xb8b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8b3), 0xf9);
        // F9 0090
        gbc.setState(0x109, 0xe053, 0x84d0, 0xb54b, 0xaa35, 0x12fb, 0x1, 0x0);
        gbc.writeMem(0x109, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x12fb);
        EXPECT(gbc.pc(), 0x10a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0091
        gbc.setState(0x2de7, 0xfc82, 0x7a90, 0x91a5, 0x9e8d, 0xeb4a, 0x1, 0x0);
        gbc.writeMem(0x2de7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xeb4a);
        EXPECT(gbc.pc(), 0x2de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0092
        gbc.setState(0x9b1, 0x8be6, 0x9720, 0xf4a6, 0xfb3d, 0xc306, 0x1, 0x0);
        gbc.writeMem(0x9b1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc306);
        EXPECT(gbc.pc(), 0x9b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0093
        gbc.setState(0x2a1, 0xa01f, 0xd7d0, 0x9c79, 0x465d, 0x919b, 0x1, 0x0);
        gbc.writeMem(0x2a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x919b);
        EXPECT(gbc.pc(), 0x2a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0094
        gbc.setState(0x2617, 0x71cd, 0xfee0, 0x5374, 0x4215, 0xdd87, 0x0, 0x0);
        gbc.writeMem(0x2617, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdd87);
        EXPECT(gbc.pc(), 0x2618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0095
        gbc.setState(0x821c, 0xb482, 0xaa20, 0x87c5, 0xc7d1, 0xc886, 0x1, 0x0);
        gbc.writeMem(0x821c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc886);
        EXPECT(gbc.pc(), 0x821d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821c), 0xf9);
        // F9 0096
        gbc.setState(0xd116, 0x4528, 0x150, 0xf7a5, 0xf5e1, 0xf86, 0x0, 0x1);
        gbc.writeMem(0xd116, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf86);
        EXPECT(gbc.pc(), 0xd117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd116), 0xf9);
        // F9 0097
        gbc.setState(0x4a7b, 0xf0f4, 0xd690, 0x74a9, 0xa3e1, 0x9d1f, 0x1, 0x1);
        gbc.writeMem(0x4a7b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9d1f);
        EXPECT(gbc.pc(), 0x4a7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0098
        gbc.setState(0xa76, 0xc6f7, 0xf0c0, 0x5cc8, 0x8c2a, 0xf170, 0x1, 0x0);
        gbc.writeMem(0xa76, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf170);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0099
        gbc.setState(0x6753, 0xb52f, 0xeb0, 0xa44c, 0x3e8c, 0x8844, 0x0, 0x0);
        gbc.writeMem(0x6753, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8844);
        EXPECT(gbc.pc(), 0x6754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 009A
        gbc.setState(0x527c, 0x7692, 0x4290, 0xc68b, 0xcbc2, 0x36a0, 0x0, 0x0);
        gbc.writeMem(0x527c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x36a0);
        EXPECT(gbc.pc(), 0x527d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 009B
        gbc.setState(0xae6d, 0x6cd8, 0x2250, 0xa225, 0xe92c, 0xa5a0, 0x1, 0x1);
        gbc.writeMem(0xae6d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa5a0);
        EXPECT(gbc.pc(), 0xae6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae6d), 0xf9);
        // F9 009C
        gbc.setState(0x3f44, 0x4110, 0x9ff0, 0x735e, 0x2633, 0x856d, 0x0, 0x1);
        gbc.writeMem(0x3f44, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x856d);
        EXPECT(gbc.pc(), 0x3f45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 009D
        gbc.setState(0x8788, 0x92f3, 0xb80, 0xe95c, 0xf315, 0x908c, 0x1, 0x0);
        gbc.writeMem(0x8788, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x908c);
        EXPECT(gbc.pc(), 0x8789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8788), 0xf9);
        // F9 009E
        gbc.setState(0x8de7, 0x9164, 0xddb0, 0x4807, 0x70dc, 0xb44a, 0x0, 0x0);
        gbc.writeMem(0x8de7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb44a);
        EXPECT(gbc.pc(), 0x8de8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de7), 0xf9);
        // F9 009F
        gbc.setState(0x221b, 0xbb8b, 0x9350, 0xabb2, 0x2f01, 0x7d86, 0x0, 0x0);
        gbc.writeMem(0x221b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7d86);
        EXPECT(gbc.pc(), 0x221c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00A0
        gbc.setState(0x6d85, 0xeb5a, 0x6660, 0xe9fc, 0x45c3, 0x5666, 0x0, 0x1);
        gbc.writeMem(0x6d85, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5666);
        EXPECT(gbc.pc(), 0x6d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00A1
        gbc.setState(0xdd74, 0xac29, 0xc620, 0x30b2, 0x9b83, 0x2719, 0x0, 0x1);
        gbc.writeMem(0xdd74, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2719);
        EXPECT(gbc.pc(), 0xdd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd74), 0xf9);
        // F9 00A2
        gbc.setState(0x7645, 0x7d11, 0x2360, 0x1662, 0xe99e, 0x2d3d, 0x1, 0x0);
        gbc.writeMem(0x7645, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2d3d);
        EXPECT(gbc.pc(), 0x7646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00A3
        gbc.setState(0x1cf4, 0xc803, 0x36b0, 0x4064, 0x1842, 0xb3f0, 0x1, 0x1);
        gbc.writeMem(0x1cf4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb3f0);
        EXPECT(gbc.pc(), 0x1cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00A4
        gbc.setState(0xbf30, 0x6160, 0x8480, 0x3fc7, 0x47d, 0xbebf, 0x1, 0x0);
        gbc.writeMem(0xbf30, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xbebf);
        EXPECT(gbc.pc(), 0xbf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf30), 0xf9);
        // F9 00A5
        gbc.setState(0x943a, 0x594b, 0xb8b0, 0xbf74, 0x3e0c, 0x6f11, 0x1, 0x0);
        gbc.writeMem(0x943a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6f11);
        EXPECT(gbc.pc(), 0x943b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x943a), 0xf9);
        // F9 00A6
        gbc.setState(0x5c96, 0x44ca, 0x3390, 0x79fd, 0x8fba, 0x7c2a, 0x0, 0x1);
        gbc.writeMem(0x5c96, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7c2a);
        EXPECT(gbc.pc(), 0x5c97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00A7
        gbc.setState(0x3f37, 0x9089, 0x2e10, 0x84e2, 0xcccc, 0xca9f, 0x0, 0x1);
        gbc.writeMem(0x3f37, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xca9f);
        EXPECT(gbc.pc(), 0x3f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00A8
        gbc.setState(0xcf1e, 0x8b37, 0xb850, 0x77a4, 0x9e4, 0xf676, 0x1, 0x0);
        gbc.writeMem(0xcf1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf676);
        EXPECT(gbc.pc(), 0xcf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf1e), 0xf9);
        // F9 00A9
        gbc.setState(0x239a, 0xab34, 0xa2b0, 0x872d, 0xb2b7, 0x161f, 0x1, 0x1);
        gbc.writeMem(0x239a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x161f);
        EXPECT(gbc.pc(), 0x239b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00AA
        gbc.setState(0xec3c, 0x7e2e, 0x78d0, 0x5c4b, 0x4119, 0xbda5, 0x1, 0x1);
        gbc.writeMem(0xec3c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xbda5);
        EXPECT(gbc.pc(), 0xec3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec3c), 0xf9);
        // F9 00AC
        gbc.setState(0xc92f, 0x969c, 0x55d0, 0x3440, 0x1985, 0xb3d6, 0x1, 0x0);
        gbc.writeMem(0xc92f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xb3d6);
        EXPECT(gbc.pc(), 0xc930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92f), 0xf9);
        // F9 00AD
        gbc.setState(0x37c8, 0x897c, 0xe3d0, 0xb4ea, 0xf05c, 0xaf8d, 0x1, 0x1);
        gbc.writeMem(0x37c8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xaf8d);
        EXPECT(gbc.pc(), 0x37c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00AE
        gbc.setState(0xcd33, 0xc06a, 0x9280, 0xaa06, 0x65db, 0x4a45, 0x1, 0x1);
        gbc.writeMem(0xcd33, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4a45);
        EXPECT(gbc.pc(), 0xcd34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd33), 0xf9);
        // F9 00AF
        gbc.setState(0xecb8, 0x4ef6, 0x21d0, 0x7f04, 0x51e0, 0x1aa0, 0x0, 0x1);
        gbc.writeMem(0xecb8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1aa0);
        EXPECT(gbc.pc(), 0xecb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecb8), 0xf9);
        // F9 00B0
        gbc.setState(0x2ddb, 0x8a70, 0x4c0, 0xefb5, 0x9f42, 0x2bd9, 0x0, 0x1);
        gbc.writeMem(0x2ddb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x2bd9);
        EXPECT(gbc.pc(), 0x2ddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00B1
        gbc.setState(0x34eb, 0xb386, 0x8780, 0x8766, 0xae73, 0x6d36, 0x1, 0x0);
        gbc.writeMem(0x34eb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6d36);
        EXPECT(gbc.pc(), 0x34ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00B2
        gbc.setState(0xe630, 0x2e8d, 0x9190, 0x491f, 0x462d, 0x5f63, 0x0, 0x0);
        gbc.writeMem(0xe630, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5f63);
        EXPECT(gbc.pc(), 0xe631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe630), 0xf9);
        // F9 00B3
        gbc.setState(0x2d92, 0x8a2a, 0xdb90, 0x37d9, 0x7a57, 0x17d9, 0x0, 0x0);
        gbc.writeMem(0x2d92, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x17d9);
        EXPECT(gbc.pc(), 0x2d93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00B4
        gbc.setState(0xb61c, 0xbd16, 0x8bc0, 0xd626, 0xbe40, 0xb322, 0x0, 0x0);
        gbc.writeMem(0xb61c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb322);
        EXPECT(gbc.pc(), 0xb61d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61c), 0xf9);
        // F9 00B6
        gbc.setState(0x7359, 0x2df4, 0x5060, 0x6f31, 0xf290, 0x71db, 0x0, 0x1);
        gbc.writeMem(0x7359, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x71db);
        EXPECT(gbc.pc(), 0x735a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00B7
        gbc.setState(0xb5dd, 0x88c0, 0x3af0, 0x7f58, 0x850e, 0x7af3, 0x0, 0x1);
        gbc.writeMem(0xb5dd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7af3);
        EXPECT(gbc.pc(), 0xb5de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5dd), 0xf9);
        // F9 00B8
        gbc.setState(0x29cf, 0x6af0, 0x8310, 0xd7ac, 0x8340, 0xa0c8, 0x1, 0x1);
        gbc.writeMem(0x29cf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa0c8);
        EXPECT(gbc.pc(), 0x29d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00B9
        gbc.setState(0x7041, 0x2400, 0x7ec0, 0xa078, 0x5519, 0xd9b1, 0x1, 0x0);
        gbc.writeMem(0x7041, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd9b1);
        EXPECT(gbc.pc(), 0x7042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00BA
        gbc.setState(0x20ee, 0x5a1f, 0xa20, 0x1c41, 0xe89, 0x70c3, 0x0, 0x1);
        gbc.writeMem(0x20ee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x70c3);
        EXPECT(gbc.pc(), 0x20ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00BB
        gbc.setState(0x8519, 0x36f6, 0xed80, 0x9a90, 0x934f, 0x77fd, 0x0, 0x0);
        gbc.writeMem(0x8519, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x77fd);
        EXPECT(gbc.pc(), 0x851a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8519), 0xf9);
        // F9 00BC
        gbc.setState(0x5c39, 0x89c3, 0x2f70, 0x2bd7, 0x6491, 0xc8f4, 0x0, 0x1);
        gbc.writeMem(0x5c39, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc8f4);
        EXPECT(gbc.pc(), 0x5c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00BD
        gbc.setState(0x750a, 0x6b13, 0x800, 0xc83d, 0x3245, 0xdc30, 0x0, 0x0);
        gbc.writeMem(0x750a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdc30);
        EXPECT(gbc.pc(), 0x750b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00BE
        gbc.setState(0x9475, 0x8d18, 0xb0, 0xc027, 0xe7bb, 0x5b57, 0x0, 0x1);
        gbc.writeMem(0x9475, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5b57);
        EXPECT(gbc.pc(), 0x9476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9475), 0xf9);
        // F9 00BF
        gbc.setState(0x13a1, 0xcf17, 0x77f0, 0x29a1, 0xf014, 0x9786, 0x0, 0x1);
        gbc.writeMem(0x13a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9786);
        EXPECT(gbc.pc(), 0x13a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00C0
        gbc.setState(0xe169, 0x5461, 0x4c90, 0x3cf0, 0xe736, 0xcc1d, 0x0, 0x1);
        gbc.writeMem(0xe169, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcc1d);
        EXPECT(gbc.pc(), 0xe16a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe169), 0xf9);
        // F9 00C1
        gbc.setState(0x4bc6, 0x5f2e, 0xdfe0, 0x5f79, 0x9b52, 0x6bfd, 0x1, 0x1);
        gbc.writeMem(0x4bc6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6bfd);
        EXPECT(gbc.pc(), 0x4bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00C2
        gbc.setState(0xad2f, 0xd881, 0x180, 0x7773, 0x195f, 0x64c3, 0x1, 0x1);
        gbc.writeMem(0xad2f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x64c3);
        EXPECT(gbc.pc(), 0xad30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2f), 0xf9);
        // F9 00C3
        gbc.setState(0x1c09, 0xef81, 0x6220, 0x4f43, 0xc8f1, 0xf045, 0x1, 0x1);
        gbc.writeMem(0x1c09, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf045);
        EXPECT(gbc.pc(), 0x1c0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00C4
        gbc.setState(0x22e9, 0x3f68, 0xa8c0, 0x8e17, 0x835d, 0xd8d1, 0x1, 0x0);
        gbc.writeMem(0x22e9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd8d1);
        EXPECT(gbc.pc(), 0x22ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00C5
        gbc.setState(0x3cac, 0x314b, 0xfa50, 0x30fb, 0x9c36, 0xe2cf, 0x1, 0x0);
        gbc.writeMem(0x3cac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe2cf);
        EXPECT(gbc.pc(), 0x3cad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00C6
        gbc.setState(0x9f8e, 0xc20, 0x4a80, 0x2b07, 0x569e, 0x8d8b, 0x1, 0x1);
        gbc.writeMem(0x9f8e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8d8b);
        EXPECT(gbc.pc(), 0x9f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f8e), 0xf9);
        // F9 00C7
        gbc.setState(0xa0d9, 0x79d5, 0xbbe0, 0x4548, 0x4da7, 0xdf41, 0x0, 0x0);
        gbc.writeMem(0xa0d9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdf41);
        EXPECT(gbc.pc(), 0xa0da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d9), 0xf9);
        // F9 00C8
        gbc.setState(0x1914, 0x7e65, 0x74d0, 0xd0f7, 0xfd63, 0xe2ab, 0x1, 0x0);
        gbc.writeMem(0x1914, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe2ab);
        EXPECT(gbc.pc(), 0x1915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00C9
        gbc.setState(0x2a03, 0x2d25, 0x2540, 0xb816, 0x678, 0xd84b, 0x1, 0x0);
        gbc.writeMem(0x2a03, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd84b);
        EXPECT(gbc.pc(), 0x2a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00CA
        gbc.setState(0x2d87, 0x68e9, 0xd4b0, 0x47f2, 0xda37, 0x5295, 0x1, 0x0);
        gbc.writeMem(0x2d87, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5295);
        EXPECT(gbc.pc(), 0x2d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00CB
        gbc.setState(0x7cca, 0xf18c, 0x1660, 0x24fa, 0xc6a3, 0xf3a5, 0x0, 0x1);
        gbc.writeMem(0x7cca, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf3a5);
        EXPECT(gbc.pc(), 0x7ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00CC
        gbc.setState(0x733, 0xe0b3, 0x7950, 0xad2c, 0x4421, 0xae88, 0x1, 0x1);
        gbc.writeMem(0x733, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xae88);
        EXPECT(gbc.pc(), 0x734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00CD
        gbc.setState(0x62d0, 0x70a2, 0xe650, 0x26b4, 0xbb7, 0x29ff, 0x1, 0x1);
        gbc.writeMem(0x62d0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x29ff);
        EXPECT(gbc.pc(), 0x62d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00CE
        gbc.setState(0x7d99, 0xab29, 0x3db0, 0x1a75, 0x8165, 0xf738, 0x1, 0x1);
        gbc.writeMem(0x7d99, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf738);
        EXPECT(gbc.pc(), 0x7d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00CF
        gbc.setState(0x198e, 0xc57d, 0x4cd0, 0xf087, 0xd581, 0xcefa, 0x0, 0x1);
        gbc.writeMem(0x198e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcefa);
        EXPECT(gbc.pc(), 0x198f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00D0
        gbc.setState(0xc1e4, 0xd57a, 0x2e0, 0xe5b8, 0x17d6, 0xfff1, 0x0, 0x1);
        gbc.writeMem(0xc1e4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfff1);
        EXPECT(gbc.pc(), 0xc1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e4), 0xf9);
        // F9 00D1
        gbc.setState(0xd675, 0x2cfb, 0x5940, 0xfcd6, 0x3207, 0x9ed3, 0x0, 0x1);
        gbc.writeMem(0xd675, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9ed3);
        EXPECT(gbc.pc(), 0xd676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd675), 0xf9);
        // F9 00D2
        gbc.setState(0x4591, 0xda82, 0xafd0, 0x70, 0xc151, 0x9180, 0x1, 0x1);
        gbc.writeMem(0x4591, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9180);
        EXPECT(gbc.pc(), 0x4592);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00D3
        gbc.setState(0x581d, 0xaf40, 0xce60, 0x2ccd, 0x18a1, 0xe85e, 0x1, 0x1);
        gbc.writeMem(0x581d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe85e);
        EXPECT(gbc.pc(), 0x581e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00D4
        gbc.setState(0xc48f, 0xf875, 0x43d0, 0x14f3, 0xeac8, 0xb55d, 0x0, 0x1);
        gbc.writeMem(0xc48f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb55d);
        EXPECT(gbc.pc(), 0xc490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48f), 0xf9);
        // F9 00D5
        gbc.setState(0x4900, 0xc62d, 0x7190, 0x7538, 0xd73b, 0x5d74, 0x1, 0x0);
        gbc.writeMem(0x4900, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5d74);
        EXPECT(gbc.pc(), 0x4901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00D6
        gbc.setState(0x8279, 0x2a8a, 0x7f90, 0xbf2d, 0x5fc1, 0xee16, 0x0, 0x0);
        gbc.writeMem(0x8279, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xee16);
        EXPECT(gbc.pc(), 0x827a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8279), 0xf9);
        // F9 00D7
        gbc.setState(0xa515, 0x2cdb, 0xa930, 0x7fac, 0x78aa, 0x1804, 0x1, 0x1);
        gbc.writeMem(0xa515, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1804);
        EXPECT(gbc.pc(), 0xa516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa515), 0xf9);
        // F9 00D8
        gbc.setState(0x6b95, 0xec47, 0xf160, 0x7b70, 0x69ed, 0x96b4, 0x0, 0x0);
        gbc.writeMem(0x6b95, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0x6b96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00D9
        gbc.setState(0x82c2, 0x2fcf, 0x4d60, 0xada9, 0x2d3d, 0xc9cc, 0x0, 0x0);
        gbc.writeMem(0x82c2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc9cc);
        EXPECT(gbc.pc(), 0x82c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82c2), 0xf9);
        // F9 00DA
        gbc.setState(0x7c8, 0xbaea, 0xbfe0, 0xe9, 0xde37, 0xed06, 0x0, 0x1);
        gbc.writeMem(0x7c8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xed06);
        EXPECT(gbc.pc(), 0x7c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00DB
        gbc.setState(0xce50, 0xaf35, 0x9870, 0xff4e, 0x4f7, 0xdabc, 0x1, 0x0);
        gbc.writeMem(0xce50, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xdabc);
        EXPECT(gbc.pc(), 0xce51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce50), 0xf9);
        // F9 00DC
        gbc.setState(0xc2a3, 0x19bc, 0x4210, 0xa755, 0x7a3f, 0x3b6d, 0x1, 0x0);
        gbc.writeMem(0xc2a3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3b6d);
        EXPECT(gbc.pc(), 0xc2a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a3), 0xf9);
        // F9 00DD
        gbc.setState(0x53d5, 0x6acb, 0xc640, 0xd865, 0x333e, 0x41a6, 0x1, 0x0);
        gbc.writeMem(0x53d5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x41a6);
        EXPECT(gbc.pc(), 0x53d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00DE
        gbc.setState(0x3a92, 0x4d89, 0x3a80, 0x456e, 0x4ba, 0x3872, 0x0, 0x0);
        gbc.writeMem(0x3a92, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3872);
        EXPECT(gbc.pc(), 0x3a93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00DF
        gbc.setState(0xe864, 0xb138, 0xc20, 0xadfd, 0x75f1, 0xf42d, 0x0, 0x0);
        gbc.writeMem(0xe864, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf42d);
        EXPECT(gbc.pc(), 0xe865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe864), 0xf9);
        // F9 00E0
        gbc.setState(0x5713, 0xfc20, 0x88b0, 0x73e9, 0xbfd2, 0x555c, 0x1, 0x0);
        gbc.writeMem(0x5713, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x555c);
        EXPECT(gbc.pc(), 0x5714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00E1
        gbc.setState(0xe7d, 0xfd4c, 0xc700, 0x557e, 0x20f3, 0xab70, 0x1, 0x0);
        gbc.writeMem(0xe7d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xab70);
        EXPECT(gbc.pc(), 0xe7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00E2
        gbc.setState(0x49bf, 0xead5, 0x7a60, 0xf3d6, 0x46e0, 0xe65f, 0x0, 0x0);
        gbc.writeMem(0x49bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe65f);
        EXPECT(gbc.pc(), 0x49c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00E3
        gbc.setState(0x8147, 0x97d7, 0xda20, 0xcd8b, 0x1b02, 0x3ada, 0x0, 0x0);
        gbc.writeMem(0x8147, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3ada);
        EXPECT(gbc.pc(), 0x8148);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8147), 0xf9);
        // F9 00E4
        gbc.setState(0x7a1, 0xaa41, 0xe0c0, 0x9ae0, 0x3273, 0xc257, 0x1, 0x0);
        gbc.writeMem(0x7a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xc257);
        EXPECT(gbc.pc(), 0x7a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00E5
        gbc.setState(0x20c3, 0x1ecf, 0xa700, 0x89d7, 0x2b81, 0xbdf2, 0x0, 0x1);
        gbc.writeMem(0x20c3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbdf2);
        EXPECT(gbc.pc(), 0x20c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00E6
        gbc.setState(0x9c22, 0x60cf, 0x8c50, 0xc54c, 0x5984, 0xa49d, 0x1, 0x1);
        gbc.writeMem(0x9c22, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa49d);
        EXPECT(gbc.pc(), 0x9c23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c22), 0xf9);
        // F9 00E7
        gbc.setState(0x2c1e, 0xc3c8, 0xbd10, 0xa894, 0x6a4f, 0xf7e8, 0x1, 0x0);
        gbc.writeMem(0x2c1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf7e8);
        EXPECT(gbc.pc(), 0x2c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00E8
        gbc.setState(0x3f4b, 0x8e09, 0x1080, 0xc217, 0x21f, 0x7b02, 0x1, 0x1);
        gbc.writeMem(0x3f4b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7b02);
        EXPECT(gbc.pc(), 0x3f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00E9
        gbc.setState(0x108d, 0x8204, 0x1d90, 0x1943, 0x187c, 0xe5d4, 0x0, 0x0);
        gbc.writeMem(0x108d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe5d4);
        EXPECT(gbc.pc(), 0x108e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00EA
        gbc.setState(0x390c, 0x7a30, 0xb300, 0x56b2, 0xcc67, 0x2056, 0x0, 0x0);
        gbc.writeMem(0x390c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2056);
        EXPECT(gbc.pc(), 0x390d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00EB
        gbc.setState(0xd5db, 0xc170, 0xbeb0, 0x74a3, 0xdcf9, 0x6453, 0x0, 0x1);
        gbc.writeMem(0xd5db, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6453);
        EXPECT(gbc.pc(), 0xd5dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5db), 0xf9);
        // F9 00EC
        gbc.setState(0x11f2, 0x1ac, 0x4e0, 0xbfc9, 0x1a50, 0x31e8, 0x1, 0x0);
        gbc.writeMem(0x11f2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x31e8);
        EXPECT(gbc.pc(), 0x11f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00ED
        gbc.setState(0x6101, 0x250d, 0xb400, 0x7aba, 0x55c3, 0x6355, 0x1, 0x0);
        gbc.writeMem(0x6101, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6355);
        EXPECT(gbc.pc(), 0x6102);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00EF
        gbc.setState(0x9ccd, 0x2b2e, 0x3810, 0x6d9a, 0xda13, 0x699b, 0x0, 0x0);
        gbc.writeMem(0x9ccd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x699b);
        EXPECT(gbc.pc(), 0x9cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ccd), 0xf9);
        // F9 00F0
        gbc.setState(0x76b1, 0x85ca, 0xf370, 0x7a8e, 0xa6e4, 0xa743, 0x1, 0x1);
        gbc.writeMem(0x76b1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa743);
        EXPECT(gbc.pc(), 0x76b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 00F1
        gbc.setState(0x3f6a, 0xf939, 0xb0a0, 0xcfa1, 0x2084, 0x811b, 0x1, 0x0);
        gbc.writeMem(0x3f6a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x811b);
        EXPECT(gbc.pc(), 0x3f6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00F2
        gbc.setState(0x9bec, 0x8c66, 0x2a20, 0xbf08, 0xc30f, 0xa4ab, 0x1, 0x1);
        gbc.writeMem(0x9bec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa4ab);
        EXPECT(gbc.pc(), 0x9bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bec), 0xf9);
        // F9 00F3
        gbc.setState(0xb9e, 0xb515, 0xd250, 0x327b, 0x31e3, 0xe4c2, 0x0, 0x1);
        gbc.writeMem(0xb9e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe4c2);
        EXPECT(gbc.pc(), 0xb9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00F4
        gbc.setState(0x8015, 0xefb, 0x1220, 0x2b7b, 0x7381, 0xaacb, 0x0, 0x1);
        gbc.writeMem(0x8015, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xaacb);
        EXPECT(gbc.pc(), 0x8016);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8015), 0xf9);
        // F9 00F5
        gbc.setState(0x45cc, 0x4f40, 0x4590, 0xe6d7, 0xc1f8, 0xe435, 0x1, 0x1);
        gbc.writeMem(0x45cc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe435);
        EXPECT(gbc.pc(), 0x45cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00F6
        gbc.setState(0xc74c, 0x414f, 0x17a0, 0x7268, 0xbd9a, 0x5864, 0x1, 0x1);
        gbc.writeMem(0xc74c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5864);
        EXPECT(gbc.pc(), 0xc74d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc74c), 0xf9);
        // F9 00F7
        gbc.setState(0x7ec, 0x13f0, 0x8ec0, 0xad52, 0x1427, 0xd8a5, 0x0, 0x1);
        gbc.writeMem(0x7ec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd8a5);
        EXPECT(gbc.pc(), 0x7ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00F8
        gbc.setState(0x23b4, 0x397e, 0x1ce0, 0x98b4, 0x3264, 0x51ab, 0x1, 0x1);
        gbc.writeMem(0x23b4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x51ab);
        EXPECT(gbc.pc(), 0x23b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 00F9
        gbc.setState(0xb69, 0x9f45, 0x4390, 0xc80e, 0xb0af, 0xb736, 0x1, 0x1);
        gbc.writeMem(0xb69, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xb736);
        EXPECT(gbc.pc(), 0xb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00FA
        gbc.setState(0x7bbf, 0xfe5e, 0x240, 0xb1c1, 0x3358, 0x558, 0x0, 0x0);
        gbc.writeMem(0x7bbf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x558);
        EXPECT(gbc.pc(), 0x7bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00FB
        gbc.setState(0x7c6c, 0xe940, 0x6bc0, 0x7f55, 0xeb18, 0xc7eb, 0x1, 0x0);
        gbc.writeMem(0x7c6c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc7eb);
        EXPECT(gbc.pc(), 0x7c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 00FC
        gbc.setState(0x95db, 0x9997, 0x5db0, 0xcaa1, 0x7f5, 0x551e, 0x1, 0x1);
        gbc.writeMem(0x95db, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x551e);
        EXPECT(gbc.pc(), 0x95dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95db), 0xf9);
        // F9 00FD
        gbc.setState(0x7f2d, 0x87a0, 0xd710, 0x8e2, 0xe710, 0x162f, 0x0, 0x0);
        gbc.writeMem(0x7f2d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x162f);
        EXPECT(gbc.pc(), 0x7f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 00FE
        gbc.setState(0xb3c5, 0x17b9, 0x8b40, 0x24fe, 0x2eef, 0x533, 0x0, 0x0);
        gbc.writeMem(0xb3c5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x533);
        EXPECT(gbc.pc(), 0xb3c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3c5), 0xf9);
        // F9 00FF
        gbc.setState(0x567c, 0x6ef4, 0x2920, 0xeb6d, 0x7989, 0xe5e6, 0x0, 0x0);
        gbc.writeMem(0x567c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe5e6);
        EXPECT(gbc.pc(), 0x567d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0100
        gbc.setState(0x1eaa, 0xd0d5, 0x60d0, 0x6fc7, 0x2f67, 0x608d, 0x0, 0x0);
        gbc.writeMem(0x1eaa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x608d);
        EXPECT(gbc.pc(), 0x1eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0101
        gbc.setState(0x4bbf, 0xcb40, 0xb010, 0x980c, 0x4b71, 0xafcc, 0x0, 0x0);
        gbc.writeMem(0x4bbf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xafcc);
        EXPECT(gbc.pc(), 0x4bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0102
        gbc.setState(0x6b2e, 0xe30e, 0x2d40, 0x6cb5, 0x3fbb, 0x8529, 0x1, 0x1);
        gbc.writeMem(0x6b2e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8529);
        EXPECT(gbc.pc(), 0x6b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0103
        gbc.setState(0x3995, 0x8eb8, 0xf950, 0x56fa, 0xd21c, 0x37c2, 0x0, 0x1);
        gbc.writeMem(0x3995, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x37c2);
        EXPECT(gbc.pc(), 0x3996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0105
        gbc.setState(0x51e9, 0x1c21, 0xc030, 0xf148, 0x46bb, 0x22ad, 0x1, 0x0);
        gbc.writeMem(0x51e9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x22ad);
        EXPECT(gbc.pc(), 0x51ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0106
        gbc.setState(0x32a, 0x6fa0, 0xdf90, 0x132, 0x10aa, 0xe8ce, 0x0, 0x0);
        gbc.writeMem(0x32a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe8ce);
        EXPECT(gbc.pc(), 0x32b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0107
        gbc.setState(0x9939, 0xaf46, 0xbec0, 0xdc2f, 0x5d1d, 0xd011, 0x0, 0x1);
        gbc.writeMem(0x9939, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd011);
        EXPECT(gbc.pc(), 0x993a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9939), 0xf9);
        // F9 0108
        gbc.setState(0x1789, 0xd33c, 0xe560, 0xab6f, 0x74e, 0xbcfd, 0x0, 0x1);
        gbc.writeMem(0x1789, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xbcfd);
        EXPECT(gbc.pc(), 0x178a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0109
        gbc.setState(0x58bd, 0x5a8d, 0x4df0, 0xef05, 0xf7a0, 0x5f9e, 0x0, 0x0);
        gbc.writeMem(0x58bd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5f9e);
        EXPECT(gbc.pc(), 0x58be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 010A
        gbc.setState(0xb060, 0x99a1, 0xe6b0, 0x3b04, 0x4ca, 0x2f07, 0x0, 0x1);
        gbc.writeMem(0xb060, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2f07);
        EXPECT(gbc.pc(), 0xb061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb060), 0xf9);
        // F9 010B
        gbc.setState(0x44ee, 0x59db, 0x7350, 0xd212, 0xd8a6, 0x33b3, 0x1, 0x1);
        gbc.writeMem(0x44ee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x33b3);
        EXPECT(gbc.pc(), 0x44ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 010C
        gbc.setState(0x6062, 0x5556, 0xaed0, 0xb08c, 0x491a, 0xe628, 0x0, 0x0);
        gbc.writeMem(0x6062, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe628);
        EXPECT(gbc.pc(), 0x6063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 010D
        gbc.setState(0x70f3, 0x9663, 0xb590, 0x3852, 0x29d, 0x6005, 0x0, 0x0);
        gbc.writeMem(0x70f3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6005);
        EXPECT(gbc.pc(), 0x70f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 010E
        gbc.setState(0xdafd, 0x944b, 0xf340, 0x7361, 0x2b9, 0xba10, 0x1, 0x1);
        gbc.writeMem(0xdafd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xba10);
        EXPECT(gbc.pc(), 0xdafe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafd), 0xf9);
        // F9 010F
        gbc.setState(0x63dc, 0xfadf, 0x2c00, 0x14e9, 0x3371, 0x5279, 0x0, 0x0);
        gbc.writeMem(0x63dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5279);
        EXPECT(gbc.pc(), 0x63dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0110
        gbc.setState(0x62e8, 0x599d, 0xfa00, 0x12a8, 0xf2c, 0xe0d1, 0x1, 0x0);
        gbc.writeMem(0x62e8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe0d1);
        EXPECT(gbc.pc(), 0x62e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0111
        gbc.setState(0x68fc, 0xc3a8, 0x19b0, 0x983e, 0x849, 0x4f60, 0x1, 0x0);
        gbc.writeMem(0x68fc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4f60);
        EXPECT(gbc.pc(), 0x68fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0112
        gbc.setState(0x8de4, 0x2767, 0x4ba0, 0x45d4, 0x9115, 0x3ae9, 0x1, 0x1);
        gbc.writeMem(0x8de4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3ae9);
        EXPECT(gbc.pc(), 0x8de5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de4), 0xf9);
        // F9 0113
        gbc.setState(0x4d45, 0x713, 0x13e0, 0x1f2b, 0x2167, 0xa277, 0x0, 0x1);
        gbc.writeMem(0x4d45, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa277);
        EXPECT(gbc.pc(), 0x4d46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0114
        gbc.setState(0xd592, 0xf531, 0x74a0, 0x13e, 0x9117, 0x308a, 0x0, 0x1);
        gbc.writeMem(0xd592, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x308a);
        EXPECT(gbc.pc(), 0xd593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd592), 0xf9);
        // F9 0115
        gbc.setState(0xcca3, 0x9dd4, 0xfdd0, 0x5085, 0xbb08, 0x7758, 0x1, 0x1);
        gbc.writeMem(0xcca3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7758);
        EXPECT(gbc.pc(), 0xcca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcca3), 0xf9);
        // F9 0116
        gbc.setState(0x17ca, 0x7b95, 0xa300, 0x3d41, 0xb2c2, 0x2f84, 0x1, 0x1);
        gbc.writeMem(0x17ca, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2f84);
        EXPECT(gbc.pc(), 0x17cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0117
        gbc.setState(0xb0f, 0xf521, 0x8c40, 0x3a95, 0x6952, 0x14fb, 0x1, 0x0);
        gbc.writeMem(0xb0f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x14fb);
        EXPECT(gbc.pc(), 0xb10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0118
        gbc.setState(0xb1d1, 0xdf33, 0x7a90, 0x46fc, 0xade7, 0xa847, 0x1, 0x0);
        gbc.writeMem(0xb1d1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa847);
        EXPECT(gbc.pc(), 0xb1d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1d1), 0xf9);
        // F9 0119
        gbc.setState(0x5f8a, 0xab3a, 0x1450, 0xd467, 0xfd59, 0x30a6, 0x1, 0x0);
        gbc.writeMem(0x5f8a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x30a6);
        EXPECT(gbc.pc(), 0x5f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 011A
        gbc.setState(0xaade, 0x9dcb, 0xcf40, 0x71b8, 0x5e01, 0x9e11, 0x0, 0x1);
        gbc.writeMem(0xaade, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9e11);
        EXPECT(gbc.pc(), 0xaadf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaade), 0xf9);
        // F9 011B
        gbc.setState(0xc36a, 0x36a8, 0xd110, 0x4d25, 0x935, 0xdab8, 0x1, 0x1);
        gbc.writeMem(0xc36a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xdab8);
        EXPECT(gbc.pc(), 0xc36b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36a), 0xf9);
        // F9 011C
        gbc.setState(0x8b87, 0x21d9, 0xe120, 0x3767, 0x8596, 0xe570, 0x0, 0x0);
        gbc.writeMem(0x8b87, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0x8b88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b87), 0xf9);
        // F9 011D
        gbc.setState(0x3852, 0x79de, 0x77d0, 0x5269, 0x6f72, 0x2f77, 0x1, 0x1);
        gbc.writeMem(0x3852, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2f77);
        EXPECT(gbc.pc(), 0x3853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 011E
        gbc.setState(0x1af2, 0xbb46, 0x4150, 0xd3af, 0x6d46, 0xa442, 0x0, 0x0);
        gbc.writeMem(0x1af2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa442);
        EXPECT(gbc.pc(), 0x1af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 011F
        gbc.setState(0x20ba, 0xdfdc, 0xf810, 0x94de, 0x94dd, 0x2ea5, 0x0, 0x1);
        gbc.writeMem(0x20ba, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2ea5);
        EXPECT(gbc.pc(), 0x20bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0120
        gbc.setState(0xd1b, 0x4887, 0xff10, 0x2d1f, 0xc0e5, 0x1a33, 0x1, 0x1);
        gbc.writeMem(0xd1b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1a33);
        EXPECT(gbc.pc(), 0xd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0121
        gbc.setState(0x2e95, 0x3813, 0x3470, 0x7368, 0xd81b, 0x8e67, 0x0, 0x1);
        gbc.writeMem(0x2e95, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8e67);
        EXPECT(gbc.pc(), 0x2e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0122
        gbc.setState(0x4420, 0xc875, 0x6440, 0x9a0, 0xb0e, 0x8e73, 0x1, 0x0);
        gbc.writeMem(0x4420, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8e73);
        EXPECT(gbc.pc(), 0x4421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0123
        gbc.setState(0x32ef, 0x1492, 0x7c00, 0xe2cf, 0x906c, 0x2d56, 0x1, 0x0);
        gbc.writeMem(0x32ef, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2d56);
        EXPECT(gbc.pc(), 0x32f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0124
        gbc.setState(0x6673, 0x8170, 0xf000, 0x3318, 0xfbdd, 0x6648, 0x1, 0x0);
        gbc.writeMem(0x6673, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6648);
        EXPECT(gbc.pc(), 0x6674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0125
        gbc.setState(0x30f7, 0x8187, 0xd440, 0x7013, 0x6510, 0xd4c2, 0x1, 0x1);
        gbc.writeMem(0x30f7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd4c2);
        EXPECT(gbc.pc(), 0x30f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0126
        gbc.setState(0x6fbd, 0x905a, 0x83f0, 0x6ecb, 0x1409, 0x5fb, 0x1, 0x0);
        gbc.writeMem(0x6fbd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5fb);
        EXPECT(gbc.pc(), 0x6fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0128
        gbc.setState(0xee62, 0xaa67, 0x13a0, 0x6a71, 0x43bc, 0x664d, 0x1, 0x1);
        gbc.writeMem(0xee62, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x664d);
        EXPECT(gbc.pc(), 0xee63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee62), 0xf9);
        // F9 0129
        gbc.setState(0x92e1, 0xd8fb, 0x5ad0, 0xafee, 0x8fe, 0xea72, 0x1, 0x0);
        gbc.writeMem(0x92e1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xea72);
        EXPECT(gbc.pc(), 0x92e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e1), 0xf9);
        // F9 012A
        gbc.setState(0xe8c6, 0x3d44, 0x30a0, 0xc576, 0xb40, 0xd292, 0x0, 0x1);
        gbc.writeMem(0xe8c6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd292);
        EXPECT(gbc.pc(), 0xe8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c6), 0xf9);
        // F9 012B
        gbc.setState(0x4d06, 0x86db, 0xec80, 0xa644, 0x4aac, 0xd384, 0x0, 0x1);
        gbc.writeMem(0x4d06, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd384);
        EXPECT(gbc.pc(), 0x4d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 012C
        gbc.setState(0xc46c, 0x6f2f, 0x1410, 0x376f, 0xb86d, 0x9aa8, 0x1, 0x0);
        gbc.writeMem(0xc46c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9aa8);
        EXPECT(gbc.pc(), 0xc46d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc46c), 0xf9);
        // F9 012D
        gbc.setState(0x9526, 0x220d, 0x83d0, 0xb99f, 0x8dd2, 0x24d4, 0x1, 0x0);
        gbc.writeMem(0x9526, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x24d4);
        EXPECT(gbc.pc(), 0x9527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9526), 0xf9);
        // F9 012E
        gbc.setState(0x7945, 0x4114, 0x5ce0, 0x7e29, 0xc4b2, 0x9120, 0x1, 0x0);
        gbc.writeMem(0x7945, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9120);
        EXPECT(gbc.pc(), 0x7946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 012F
        gbc.setState(0x2bc0, 0x904, 0xcec0, 0x308b, 0x6ae, 0x374a, 0x0, 0x0);
        gbc.writeMem(0x2bc0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x374a);
        EXPECT(gbc.pc(), 0x2bc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0130
        gbc.setState(0x84a, 0xc6c5, 0xb070, 0x691a, 0xb95a, 0xadd0, 0x0, 0x1);
        gbc.writeMem(0x84a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xadd0);
        EXPECT(gbc.pc(), 0x84b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0131
        gbc.setState(0x9de1, 0x4b55, 0xd3b0, 0xd793, 0x4b84, 0x14b1, 0x1, 0x1);
        gbc.writeMem(0x9de1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x14b1);
        EXPECT(gbc.pc(), 0x9de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de1), 0xf9);
        // F9 0132
        gbc.setState(0x8f27, 0x2b95, 0x86d0, 0x505, 0x5a04, 0xf10b, 0x1, 0x1);
        gbc.writeMem(0x8f27, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf10b);
        EXPECT(gbc.pc(), 0x8f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f27), 0xf9);
        // F9 0133
        gbc.setState(0xe021, 0xfd00, 0x5700, 0x8798, 0xf4a8, 0x2000, 0x1, 0x0);
        gbc.writeMem(0xe021, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2000);
        EXPECT(gbc.pc(), 0xe022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe021), 0xf9);
        // F9 0134
        gbc.setState(0xb376, 0x6535, 0xef50, 0xc22b, 0x53f3, 0xbad4, 0x0, 0x1);
        gbc.writeMem(0xb376, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbad4);
        EXPECT(gbc.pc(), 0xb377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb376), 0xf9);
        // F9 0135
        gbc.setState(0x1560, 0x633a, 0x98b0, 0xc723, 0x6b48, 0xc472, 0x1, 0x1);
        gbc.writeMem(0x1560, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc472);
        EXPECT(gbc.pc(), 0x1561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0136
        gbc.setState(0xede9, 0x1e3f, 0x5800, 0x939c, 0xa5df, 0x3836, 0x1, 0x0);
        gbc.writeMem(0xede9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3836);
        EXPECT(gbc.pc(), 0xedea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede9), 0xf9);
        // F9 0137
        gbc.setState(0x9395, 0xd023, 0xd460, 0x442c, 0xf692, 0x6250, 0x0, 0x1);
        gbc.writeMem(0x9395, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6250);
        EXPECT(gbc.pc(), 0x9396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9395), 0xf9);
        // F9 0138
        gbc.setState(0x2d3b, 0x13f1, 0x9aa0, 0xa0d2, 0xa04, 0xae07, 0x0, 0x1);
        gbc.writeMem(0x2d3b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xae07);
        EXPECT(gbc.pc(), 0x2d3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0139
        gbc.setState(0x5afe, 0x95e7, 0x9540, 0xb2dc, 0x939e, 0x353, 0x1, 0x1);
        gbc.writeMem(0x5afe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x353);
        EXPECT(gbc.pc(), 0x5aff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 013A
        gbc.setState(0x10bd, 0xea2c, 0xd780, 0x1aed, 0xbf8c, 0xbf15, 0x1, 0x1);
        gbc.writeMem(0x10bd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xbf15);
        EXPECT(gbc.pc(), 0x10be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 013B
        gbc.setState(0x9644, 0x5a4c, 0xe1e0, 0x97ba, 0x7de1, 0x99f1, 0x1, 0x0);
        gbc.writeMem(0x9644, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x99f1);
        EXPECT(gbc.pc(), 0x9645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9644), 0xf9);
        // F9 013C
        gbc.setState(0xc6f0, 0xead5, 0x7d40, 0xb798, 0x557, 0x9831, 0x1, 0x1);
        gbc.writeMem(0xc6f0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9831);
        EXPECT(gbc.pc(), 0xc6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f0), 0xf9);
        // F9 013D
        gbc.setState(0x91e3, 0x7684, 0x5b10, 0x31df, 0xeff7, 0xcfc1, 0x0, 0x1);
        gbc.writeMem(0x91e3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcfc1);
        EXPECT(gbc.pc(), 0x91e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91e3), 0xf9);
        // F9 013E
        gbc.setState(0x233a, 0xe1df, 0xfe70, 0x93cf, 0xeb64, 0xcd1a, 0x1, 0x0);
        gbc.writeMem(0x233a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xcd1a);
        EXPECT(gbc.pc(), 0x233b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 013F
        gbc.setState(0xb820, 0x97b4, 0xa990, 0x74b5, 0x54b4, 0x596c, 0x1, 0x1);
        gbc.writeMem(0xb820, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x596c);
        EXPECT(gbc.pc(), 0xb821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb820), 0xf9);
        // F9 0140
        gbc.setState(0xe0e9, 0x9577, 0x2970, 0x80c0, 0x159c, 0x654e, 0x0, 0x0);
        gbc.writeMem(0xe0e9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x654e);
        EXPECT(gbc.pc(), 0xe0ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0e9), 0xf9);
        // F9 0141
        gbc.setState(0x7548, 0x52, 0x6c80, 0x79e, 0x803, 0x127b, 0x1, 0x0);
        gbc.writeMem(0x7548, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x127b);
        EXPECT(gbc.pc(), 0x7549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0142
        gbc.setState(0x7ad3, 0xee30, 0xcd40, 0x256b, 0xd494, 0xb273, 0x1, 0x0);
        gbc.writeMem(0x7ad3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb273);
        EXPECT(gbc.pc(), 0x7ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0143
        gbc.setState(0x3c5d, 0xd69a, 0xd350, 0xa206, 0xc01a, 0x79d6, 0x0, 0x0);
        gbc.writeMem(0x3c5d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x79d6);
        EXPECT(gbc.pc(), 0x3c5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0144
        gbc.setState(0x5293, 0xbb9c, 0x2ad0, 0x8043, 0xa6ef, 0xa312, 0x1, 0x1);
        gbc.writeMem(0x5293, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa312);
        EXPECT(gbc.pc(), 0x5294);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0145
        gbc.setState(0x10ca, 0xfa87, 0xc0e0, 0x3fff, 0x4696, 0xebf6, 0x0, 0x0);
        gbc.writeMem(0x10ca, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xebf6);
        EXPECT(gbc.pc(), 0x10cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0146
        gbc.setState(0xc6b, 0x8feb, 0xad80, 0x9d7b, 0xed3a, 0x9e35, 0x1, 0x1);
        gbc.writeMem(0xc6b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9e35);
        EXPECT(gbc.pc(), 0xc6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0147
        gbc.setState(0xc558, 0x2b2f, 0xaff0, 0xb29a, 0x2071, 0x2733, 0x0, 0x1);
        gbc.writeMem(0xc558, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2733);
        EXPECT(gbc.pc(), 0xc559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc558), 0xf9);
        // F9 0148
        gbc.setState(0x6c17, 0xefa8, 0xf910, 0x66fe, 0x2eb5, 0x2899, 0x1, 0x1);
        gbc.writeMem(0x6c17, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2899);
        EXPECT(gbc.pc(), 0x6c18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0149
        gbc.setState(0x331d, 0xb98c, 0xee20, 0xe114, 0x58eb, 0xb67b, 0x0, 0x0);
        gbc.writeMem(0x331d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb67b);
        EXPECT(gbc.pc(), 0x331e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 014A
        gbc.setState(0xccf0, 0xcde2, 0x7cd0, 0x63ee, 0x39db, 0x24d6, 0x0, 0x0);
        gbc.writeMem(0xccf0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x24d6);
        EXPECT(gbc.pc(), 0xccf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccf0), 0xf9);
        // F9 014B
        gbc.setState(0x5617, 0x4132, 0x3620, 0xc172, 0xa501, 0xd077, 0x1, 0x1);
        gbc.writeMem(0x5617, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd077);
        EXPECT(gbc.pc(), 0x5618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 014C
        gbc.setState(0x51d8, 0x8fb, 0xd680, 0xab33, 0x30c8, 0x9f0, 0x1, 0x1);
        gbc.writeMem(0x51d8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9f0);
        EXPECT(gbc.pc(), 0x51d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 014D
        gbc.setState(0xd30b, 0xb6e1, 0xc4c0, 0x9f57, 0x13e7, 0x798c, 0x0, 0x0);
        gbc.writeMem(0xd30b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x798c);
        EXPECT(gbc.pc(), 0xd30c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd30b), 0xf9);
        // F9 014E
        gbc.setState(0x56b7, 0xb9ce, 0xac70, 0x23d8, 0x8fff, 0x4fc3, 0x0, 0x1);
        gbc.writeMem(0x56b7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4fc3);
        EXPECT(gbc.pc(), 0x56b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 014F
        gbc.setState(0xc7e3, 0x9010, 0xe340, 0xf9a2, 0x9971, 0x7a50, 0x1, 0x0);
        gbc.writeMem(0xc7e3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7a50);
        EXPECT(gbc.pc(), 0xc7e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7e3), 0xf9);
        // F9 0150
        gbc.setState(0x4332, 0x44c, 0x7fc0, 0x3613, 0x629b, 0x88e, 0x1, 0x1);
        gbc.writeMem(0x4332, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x88e);
        EXPECT(gbc.pc(), 0x4333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0151
        gbc.setState(0x789, 0xbbc6, 0x5ee0, 0xce2e, 0x97ac, 0xb87a, 0x0, 0x0);
        gbc.writeMem(0x789, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb87a);
        EXPECT(gbc.pc(), 0x78a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0152
        gbc.setState(0x6cd9, 0x106c, 0x1df0, 0xaf23, 0x7798, 0x32c7, 0x0, 0x1);
        gbc.writeMem(0x6cd9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x32c7);
        EXPECT(gbc.pc(), 0x6cda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0153
        gbc.setState(0xaf40, 0x16e5, 0x2930, 0x66fd, 0x88a9, 0x2410, 0x0, 0x1);
        gbc.writeMem(0xaf40, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2410);
        EXPECT(gbc.pc(), 0xaf41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf40), 0xf9);
        // F9 0154
        gbc.setState(0x70b, 0x5689, 0x5a40, 0x5e4, 0xe171, 0xfe3c, 0x0, 0x0);
        gbc.writeMem(0x70b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfe3c);
        EXPECT(gbc.pc(), 0x70c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0155
        gbc.setState(0xe829, 0x6f8b, 0x7eb0, 0x24b8, 0x74f0, 0xd83a, 0x0, 0x1);
        gbc.writeMem(0xe829, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd83a);
        EXPECT(gbc.pc(), 0xe82a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe829), 0xf9);
        // F9 0156
        gbc.setState(0xe83c, 0x9f5e, 0x3430, 0xe59a, 0x7666, 0x8c58, 0x1, 0x0);
        gbc.writeMem(0xe83c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8c58);
        EXPECT(gbc.pc(), 0xe83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe83c), 0xf9);
        // F9 0157
        gbc.setState(0x6f23, 0xc023, 0x5740, 0x4a0c, 0x7aac, 0x7c96, 0x0, 0x1);
        gbc.writeMem(0x6f23, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7c96);
        EXPECT(gbc.pc(), 0x6f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0158
        gbc.setState(0x9e39, 0x5e51, 0xcf80, 0x18d1, 0x7db7, 0x9f11, 0x0, 0x0);
        gbc.writeMem(0x9e39, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9f11);
        EXPECT(gbc.pc(), 0x9e3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e39), 0xf9);
        // F9 0159
        gbc.setState(0x671, 0x5f77, 0xbc60, 0xd213, 0xfbb4, 0x77ac, 0x0, 0x0);
        gbc.writeMem(0x671, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x77ac);
        EXPECT(gbc.pc(), 0x672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 015A
        gbc.setState(0x3d17, 0xe557, 0x9020, 0xe230, 0xdf1e, 0xf019, 0x0, 0x1);
        gbc.writeMem(0x3d17, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf019);
        EXPECT(gbc.pc(), 0x3d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 015B
        gbc.setState(0x2749, 0x6a97, 0x9f20, 0xddc8, 0x8f6f, 0x601a, 0x1, 0x0);
        gbc.writeMem(0x2749, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x601a);
        EXPECT(gbc.pc(), 0x274a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 015C
        gbc.setState(0x6e54, 0xa06, 0xcca0, 0xff6d, 0x6baf, 0x3b3c, 0x1, 0x0);
        gbc.writeMem(0x6e54, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3b3c);
        EXPECT(gbc.pc(), 0x6e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 015D
        gbc.setState(0x8552, 0x3dc2, 0xe530, 0xf25d, 0xaaaf, 0x6226, 0x1, 0x0);
        gbc.writeMem(0x8552, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6226);
        EXPECT(gbc.pc(), 0x8553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8552), 0xf9);
        // F9 015E
        gbc.setState(0x4bd5, 0x792c, 0x4f10, 0x95d5, 0x4c7, 0x6a64, 0x1, 0x1);
        gbc.writeMem(0x4bd5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6a64);
        EXPECT(gbc.pc(), 0x4bd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 015F
        gbc.setState(0xdaa4, 0xa983, 0x9560, 0x5564, 0x5852, 0x5909, 0x1, 0x1);
        gbc.writeMem(0xdaa4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5909);
        EXPECT(gbc.pc(), 0xdaa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa4), 0xf9);
        // F9 0161
        gbc.setState(0x6f6, 0x7fcd, 0x7660, 0x6f11, 0xf525, 0xdfda, 0x1, 0x1);
        gbc.writeMem(0x6f6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xdfda);
        EXPECT(gbc.pc(), 0x6f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0162
        gbc.setState(0x5f86, 0x2dde, 0x1cc0, 0x1c47, 0x282e, 0x71e, 0x0, 0x0);
        gbc.writeMem(0x5f86, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x71e);
        EXPECT(gbc.pc(), 0x5f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0163
        gbc.setState(0xd202, 0xe209, 0xa1c0, 0x48d2, 0xb04e, 0x574f, 0x1, 0x1);
        gbc.writeMem(0xd202, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x574f);
        EXPECT(gbc.pc(), 0xd203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd202), 0xf9);
        // F9 0164
        gbc.setState(0x1cfb, 0x427e, 0xe180, 0x814a, 0x699c, 0xa031, 0x1, 0x1);
        gbc.writeMem(0x1cfb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa031);
        EXPECT(gbc.pc(), 0x1cfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0165
        gbc.setState(0x6a18, 0x7b5b, 0x3fa0, 0x37a8, 0x623, 0xc4b4, 0x0, 0x0);
        gbc.writeMem(0x6a18, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc4b4);
        EXPECT(gbc.pc(), 0x6a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0166
        gbc.setState(0xad99, 0x3405, 0x2bf0, 0x2411, 0xef7a, 0xe8be, 0x0, 0x1);
        gbc.writeMem(0xad99, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe8be);
        EXPECT(gbc.pc(), 0xad9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad99), 0xf9);
        // F9 0167
        gbc.setState(0x4533, 0x9cc1, 0x100, 0xed92, 0x774, 0x798a, 0x0, 0x1);
        gbc.writeMem(0x4533, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x798a);
        EXPECT(gbc.pc(), 0x4534);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0168
        gbc.setState(0x5089, 0x1b6d, 0xc700, 0xd1e1, 0x3c25, 0x4d57, 0x0, 0x0);
        gbc.writeMem(0x5089, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4d57);
        EXPECT(gbc.pc(), 0x508a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0169
        gbc.setState(0xa4e4, 0x5a90, 0xcaa0, 0xb0f9, 0x9d97, 0x9e38, 0x0, 0x0);
        gbc.writeMem(0xa4e4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9e38);
        EXPECT(gbc.pc(), 0xa4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e4), 0xf9);
        // F9 016A
        gbc.setState(0xc9c, 0xb9f6, 0x5b0, 0xcc61, 0xa378, 0xf134, 0x1, 0x1);
        gbc.writeMem(0xc9c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf134);
        EXPECT(gbc.pc(), 0xc9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 016B
        gbc.setState(0x5b, 0x5aed, 0xa8a0, 0x6626, 0x7d99, 0xd9a6, 0x1, 0x0);
        gbc.writeMem(0x5b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd9a6);
        EXPECT(gbc.pc(), 0x5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 016C
        gbc.setState(0xa82f, 0x78fb, 0x84f0, 0xbe85, 0x2180, 0xcb44, 0x1, 0x1);
        gbc.writeMem(0xa82f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcb44);
        EXPECT(gbc.pc(), 0xa830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa82f), 0xf9);
        // F9 016D
        gbc.setState(0x237d, 0x1065, 0x8110, 0xedf8, 0x1dd6, 0xbead, 0x1, 0x1);
        gbc.writeMem(0x237d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xbead);
        EXPECT(gbc.pc(), 0x237e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 016E
        gbc.setState(0x708a, 0xccc8, 0x4a20, 0x6d7f, 0xdea2, 0xd2fa, 0x0, 0x1);
        gbc.writeMem(0x708a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd2fa);
        EXPECT(gbc.pc(), 0x708b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 016F
        gbc.setState(0x6acd, 0xc422, 0x99c0, 0xcb45, 0x848d, 0xe4ed, 0x0, 0x0);
        gbc.writeMem(0x6acd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe4ed);
        EXPECT(gbc.pc(), 0x6ace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0170
        gbc.setState(0x102f, 0x5bd4, 0x900, 0x49b, 0x31ca, 0x719e, 0x0, 0x0);
        gbc.writeMem(0x102f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x719e);
        EXPECT(gbc.pc(), 0x1030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0171
        gbc.setState(0x9808, 0x22c7, 0x1cf0, 0xfb6f, 0xa85e, 0x616, 0x1, 0x1);
        gbc.writeMem(0x9808, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x616);
        EXPECT(gbc.pc(), 0x9809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9808), 0xf9);
        // F9 0172
        gbc.setState(0x1231, 0x3bc9, 0x67b0, 0xd4d7, 0x9045, 0xe62c, 0x0, 0x0);
        gbc.writeMem(0x1231, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe62c);
        EXPECT(gbc.pc(), 0x1232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0173
        gbc.setState(0x7bf7, 0x8980, 0x9db0, 0x8802, 0x8c52, 0x98bd, 0x0, 0x1);
        gbc.writeMem(0x7bf7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x98bd);
        EXPECT(gbc.pc(), 0x7bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0174
        gbc.setState(0xb051, 0xce53, 0xb410, 0x4aa1, 0xede9, 0xce12, 0x0, 0x0);
        gbc.writeMem(0xb051, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xce12);
        EXPECT(gbc.pc(), 0xb052);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb051), 0xf9);
        // F9 0175
        gbc.setState(0x79d6, 0xf8bd, 0x77e0, 0xa896, 0x261a, 0x9a4a, 0x1, 0x0);
        gbc.writeMem(0x79d6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9a4a);
        EXPECT(gbc.pc(), 0x79d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0176
        gbc.setState(0xce21, 0x7727, 0xe5b0, 0xa08f, 0x1140, 0x610d, 0x1, 0x1);
        gbc.writeMem(0xce21, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x610d);
        EXPECT(gbc.pc(), 0xce22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce21), 0xf9);
        // F9 0177
        gbc.setState(0x76ee, 0xe36c, 0x6bd0, 0xab55, 0xbb01, 0x2885, 0x0, 0x0);
        gbc.writeMem(0x76ee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2885);
        EXPECT(gbc.pc(), 0x76ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0178
        gbc.setState(0x76d4, 0x6efa, 0xffa0, 0x430a, 0xfc18, 0x63bc, 0x0, 0x1);
        gbc.writeMem(0x76d4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x63bc);
        EXPECT(gbc.pc(), 0x76d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0179
        gbc.setState(0xa387, 0x3fda, 0x1f60, 0xf2be, 0xf801, 0x2fea, 0x1, 0x0);
        gbc.writeMem(0xa387, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2fea);
        EXPECT(gbc.pc(), 0xa388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa387), 0xf9);
        // F9 017A
        gbc.setState(0x32b5, 0x753c, 0x5b20, 0xaddb, 0xac78, 0x9ca6, 0x1, 0x0);
        gbc.writeMem(0x32b5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9ca6);
        EXPECT(gbc.pc(), 0x32b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 017B
        gbc.setState(0x4163, 0x8d41, 0xe550, 0x9d79, 0x90bc, 0xb424, 0x0, 0x1);
        gbc.writeMem(0x4163, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb424);
        EXPECT(gbc.pc(), 0x4164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 017C
        gbc.setState(0x4510, 0x8ce9, 0xb60, 0x496, 0x56e1, 0xc8b3, 0x1, 0x1);
        gbc.writeMem(0x4510, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc8b3);
        EXPECT(gbc.pc(), 0x4511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 017E
        gbc.setState(0x18fb, 0xd111, 0xc410, 0xdc19, 0x1134, 0x34da, 0x1, 0x0);
        gbc.writeMem(0x18fb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x34da);
        EXPECT(gbc.pc(), 0x18fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 017F
        gbc.setState(0x91d6, 0xe7e4, 0x86d0, 0xfcbb, 0x37d7, 0x1d08, 0x1, 0x1);
        gbc.writeMem(0x91d6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1d08);
        EXPECT(gbc.pc(), 0x91d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d6), 0xf9);
        // F9 0180
        gbc.setState(0xa76, 0x2506, 0x1fa0, 0xc028, 0x9d05, 0x11f3, 0x0, 0x1);
        gbc.writeMem(0xa76, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x11f3);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0181
        gbc.setState(0xde1e, 0x578c, 0x2840, 0xc487, 0x8f0f, 0xe48b, 0x1, 0x1);
        gbc.writeMem(0xde1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe48b);
        EXPECT(gbc.pc(), 0xde1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1e), 0xf9);
        // F9 0182
        gbc.setState(0x95a4, 0xe3a9, 0xada0, 0xc463, 0x85f0, 0x3ecd, 0x1, 0x0);
        gbc.writeMem(0x95a4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3ecd);
        EXPECT(gbc.pc(), 0x95a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a4), 0xf9);
        // F9 0183
        gbc.setState(0x16b2, 0x1282, 0xa9a0, 0x90ef, 0x630d, 0x5a83, 0x0, 0x0);
        gbc.writeMem(0x16b2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5a83);
        EXPECT(gbc.pc(), 0x16b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0184
        gbc.setState(0xd324, 0x5d16, 0x6b20, 0xf715, 0xe9ad, 0xf32d, 0x0, 0x0);
        gbc.writeMem(0xd324, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf32d);
        EXPECT(gbc.pc(), 0xd325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd324), 0xf9);
        // F9 0185
        gbc.setState(0x5597, 0xfb8f, 0xe0c0, 0x314d, 0x9da8, 0xcbf4, 0x1, 0x1);
        gbc.writeMem(0x5597, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcbf4);
        EXPECT(gbc.pc(), 0x5598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0186
        gbc.setState(0xe311, 0x3872, 0xeb60, 0x87c6, 0x1822, 0x43dd, 0x0, 0x0);
        gbc.writeMem(0xe311, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x43dd);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe311), 0xf9);
        // F9 0187
        gbc.setState(0x5226, 0x6b2b, 0xe80, 0x6083, 0x20e9, 0x4aa6, 0x0, 0x0);
        gbc.writeMem(0x5226, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4aa6);
        EXPECT(gbc.pc(), 0x5227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0188
        gbc.setState(0x974b, 0xd030, 0xa3a0, 0xa557, 0x5fa8, 0x66b7, 0x1, 0x0);
        gbc.writeMem(0x974b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x66b7);
        EXPECT(gbc.pc(), 0x974c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x974b), 0xf9);
        // F9 0189
        gbc.setState(0x5bcc, 0xd24, 0x2be0, 0x5d7f, 0xf91b, 0x1ac7, 0x1, 0x0);
        gbc.writeMem(0x5bcc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1ac7);
        EXPECT(gbc.pc(), 0x5bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 018A
        gbc.setState(0xccfa, 0x7521, 0xc850, 0x217e, 0x37e, 0xe254, 0x0, 0x1);
        gbc.writeMem(0xccfa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe254);
        EXPECT(gbc.pc(), 0xccfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccfa), 0xf9);
        // F9 018B
        gbc.setState(0xc009, 0x971d, 0x8940, 0xb40c, 0xb981, 0x997b, 0x1, 0x0);
        gbc.writeMem(0xc009, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x997b);
        EXPECT(gbc.pc(), 0xc00a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc009), 0xf9);
        // F9 018C
        gbc.setState(0x68a0, 0xa7f6, 0xca50, 0x6b19, 0x8536, 0x7b93, 0x1, 0x0);
        gbc.writeMem(0x68a0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7b93);
        EXPECT(gbc.pc(), 0x68a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 018D
        gbc.setState(0xd009, 0x9191, 0x4520, 0x6047, 0x5d07, 0x68eb, 0x0, 0x0);
        gbc.writeMem(0xd009, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x68eb);
        EXPECT(gbc.pc(), 0xd00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd009), 0xf9);
        // F9 018E
        gbc.setState(0x2723, 0xcc9, 0xdb70, 0x4f06, 0x5d3c, 0x5dfa, 0x0, 0x1);
        gbc.writeMem(0x2723, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5dfa);
        EXPECT(gbc.pc(), 0x2724);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 018F
        gbc.setState(0xa008, 0x267e, 0x9ff0, 0x1e44, 0x72, 0x8c49, 0x1, 0x0);
        gbc.writeMem(0xa008, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x8c49);
        EXPECT(gbc.pc(), 0xa009);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa008), 0xf9);
        // F9 0190
        gbc.setState(0xbe0d, 0x6c09, 0xf290, 0x964c, 0x7623, 0xa2ed, 0x0, 0x1);
        gbc.writeMem(0xbe0d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa2ed);
        EXPECT(gbc.pc(), 0xbe0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe0d), 0xf9);
        // F9 0191
        gbc.setState(0x516e, 0x6eeb, 0x7540, 0x6689, 0x8f9f, 0x7db2, 0x1, 0x1);
        gbc.writeMem(0x516e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7db2);
        EXPECT(gbc.pc(), 0x516f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0192
        gbc.setState(0x21ba, 0xc8f3, 0x79d0, 0x3d43, 0xd772, 0xad72, 0x0, 0x1);
        gbc.writeMem(0x21ba, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xad72);
        EXPECT(gbc.pc(), 0x21bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0193
        gbc.setState(0x4674, 0xa58b, 0xce90, 0xefe2, 0x5bab, 0x9492, 0x0, 0x0);
        gbc.writeMem(0x4674, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9492);
        EXPECT(gbc.pc(), 0x4675);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0194
        gbc.setState(0x678b, 0xdeb8, 0xe520, 0x4d0c, 0x12a4, 0xfbd9, 0x1, 0x0);
        gbc.writeMem(0x678b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfbd9);
        EXPECT(gbc.pc(), 0x678c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0195
        gbc.setState(0x5874, 0xe7e0, 0x94d0, 0xa8f6, 0x8bbc, 0x769e, 0x0, 0x0);
        gbc.writeMem(0x5874, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x769e);
        EXPECT(gbc.pc(), 0x5875);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0196
        gbc.setState(0x215f, 0x7b99, 0xb930, 0x118e, 0x3bea, 0x584f, 0x1, 0x1);
        gbc.writeMem(0x215f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x584f);
        EXPECT(gbc.pc(), 0x2160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0197
        gbc.setState(0x3074, 0x661, 0xb730, 0xefc2, 0x9d44, 0x85de, 0x0, 0x1);
        gbc.writeMem(0x3074, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x85de);
        EXPECT(gbc.pc(), 0x3075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0198
        gbc.setState(0x87e3, 0xe5f6, 0xa190, 0xef82, 0x3796, 0x5777, 0x0, 0x1);
        gbc.writeMem(0x87e3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5777);
        EXPECT(gbc.pc(), 0x87e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e3), 0xf9);
        // F9 0199
        gbc.setState(0xe80e, 0xa255, 0x2510, 0x9759, 0xa0d9, 0xb2b5, 0x1, 0x1);
        gbc.writeMem(0xe80e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb2b5);
        EXPECT(gbc.pc(), 0xe80f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe80e), 0xf9);
        // F9 019B
        gbc.setState(0x44fb, 0x42f5, 0x1370, 0xf859, 0xeb8b, 0x1c03, 0x1, 0x1);
        gbc.writeMem(0x44fb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1c03);
        EXPECT(gbc.pc(), 0x44fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 019C
        gbc.setState(0x6047, 0x489f, 0x4740, 0xb9d6, 0x7a37, 0xbc89, 0x0, 0x1);
        gbc.writeMem(0x6047, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbc89);
        EXPECT(gbc.pc(), 0x6048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 019D
        gbc.setState(0xe3dc, 0x1b19, 0xc4b0, 0x362b, 0x10a8, 0x46f8, 0x0, 0x1);
        gbc.writeMem(0xe3dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x46f8);
        EXPECT(gbc.pc(), 0xe3dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3dc), 0xf9);
        // F9 019E
        gbc.setState(0xccd4, 0x4d2e, 0xaf0, 0xe4b0, 0xe8fe, 0x659e, 0x1, 0x1);
        gbc.writeMem(0xccd4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x659e);
        EXPECT(gbc.pc(), 0xccd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd4), 0xf9);
        // F9 019F
        gbc.setState(0x9e34, 0x9de9, 0xfd60, 0xd4a9, 0xd455, 0xc6c4, 0x1, 0x1);
        gbc.writeMem(0x9e34, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc6c4);
        EXPECT(gbc.pc(), 0x9e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e34), 0xf9);
        // F9 01A0
        gbc.setState(0x3c90, 0xd572, 0xa0b0, 0xbcd3, 0xc4da, 0x824e, 0x0, 0x0);
        gbc.writeMem(0x3c90, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x824e);
        EXPECT(gbc.pc(), 0x3c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01A1
        gbc.setState(0x45ce, 0xa674, 0xb600, 0xba93, 0xd0b6, 0x43ac, 0x1, 0x0);
        gbc.writeMem(0x45ce, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x43ac);
        EXPECT(gbc.pc(), 0x45cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01A2
        gbc.setState(0xe9c0, 0x9c83, 0x1f10, 0xcd87, 0x54ac, 0xe866, 0x1, 0x1);
        gbc.writeMem(0xe9c0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe866);
        EXPECT(gbc.pc(), 0xe9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9c0), 0xf9);
        // F9 01A3
        gbc.setState(0xc5a8, 0xc7de, 0x2790, 0x4867, 0x2b67, 0x7d5b, 0x1, 0x1);
        gbc.writeMem(0xc5a8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7d5b);
        EXPECT(gbc.pc(), 0xc5a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a8), 0xf9);
        // F9 01A4
        gbc.setState(0x7452, 0x56c8, 0xba80, 0x665, 0x79c3, 0x375, 0x1, 0x1);
        gbc.writeMem(0x7452, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x375);
        EXPECT(gbc.pc(), 0x7453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01A5
        gbc.setState(0x7a02, 0x4b37, 0xaab0, 0xca83, 0xfdcc, 0x9069, 0x0, 0x1);
        gbc.writeMem(0x7a02, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9069);
        EXPECT(gbc.pc(), 0x7a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01A6
        gbc.setState(0xd944, 0xe6d5, 0xdde0, 0x83f3, 0x87fd, 0x4a2, 0x1, 0x1);
        gbc.writeMem(0xd944, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4a2);
        EXPECT(gbc.pc(), 0xd945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd944), 0xf9);
        // F9 01A7
        gbc.setState(0x7a12, 0x6568, 0x9620, 0xd7ec, 0x32ad, 0xbc8f, 0x1, 0x0);
        gbc.writeMem(0x7a12, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbc8f);
        EXPECT(gbc.pc(), 0x7a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01A9
        gbc.setState(0x926a, 0xca8b, 0x3150, 0xd884, 0x656b, 0x404b, 0x1, 0x0);
        gbc.writeMem(0x926a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x404b);
        EXPECT(gbc.pc(), 0x926b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x926a), 0xf9);
        // F9 01AA
        gbc.setState(0x395f, 0x346d, 0x3ab0, 0xb7d9, 0x27ed, 0xcc9, 0x1, 0x0);
        gbc.writeMem(0x395f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcc9);
        EXPECT(gbc.pc(), 0x3960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01AB
        gbc.setState(0xbbe7, 0xa203, 0x8e30, 0x208a, 0xd41, 0x3a18, 0x1, 0x1);
        gbc.writeMem(0xbbe7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3a18);
        EXPECT(gbc.pc(), 0xbbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe7), 0xf9);
        // F9 01AC
        gbc.setState(0x8e17, 0x6386, 0xcfb0, 0x231e, 0xfd90, 0xfa41, 0x1, 0x1);
        gbc.writeMem(0x8e17, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xfa41);
        EXPECT(gbc.pc(), 0x8e18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e17), 0xf9);
        // F9 01AD
        gbc.setState(0xcd6e, 0xd66e, 0xb510, 0xf4d9, 0x12c6, 0xcf98, 0x0, 0x1);
        gbc.writeMem(0xcd6e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xcf98);
        EXPECT(gbc.pc(), 0xcd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd6e), 0xf9);
        // F9 01AE
        gbc.setState(0x72de, 0xb5ad, 0x2640, 0x60d9, 0x3aad, 0x58f8, 0x1, 0x1);
        gbc.writeMem(0x72de, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x58f8);
        EXPECT(gbc.pc(), 0x72df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01AF
        gbc.setState(0x763c, 0x6617, 0xc890, 0x9b1b, 0x6d41, 0x60f7, 0x1, 0x1);
        gbc.writeMem(0x763c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x60f7);
        EXPECT(gbc.pc(), 0x763d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01B0
        gbc.setState(0x14e5, 0x83fc, 0xfd20, 0x8cbf, 0xa4f, 0x5a27, 0x1, 0x1);
        gbc.writeMem(0x14e5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5a27);
        EXPECT(gbc.pc(), 0x14e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01B1
        gbc.setState(0x6a5c, 0x6cd6, 0x6450, 0xae72, 0xf9b2, 0x1dee, 0x0, 0x1);
        gbc.writeMem(0x6a5c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1dee);
        EXPECT(gbc.pc(), 0x6a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01B2
        gbc.setState(0x38bf, 0x26da, 0x39a0, 0xe00, 0x3120, 0x5109, 0x1, 0x1);
        gbc.writeMem(0x38bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5109);
        EXPECT(gbc.pc(), 0x38c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01B3
        gbc.setState(0x67fe, 0xa232, 0x9ac0, 0x4381, 0x4b8, 0x2892, 0x0, 0x1);
        gbc.writeMem(0x67fe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x2892);
        EXPECT(gbc.pc(), 0x67ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01B4
        gbc.setState(0xd988, 0xfa17, 0x2e80, 0x9feb, 0x41ca, 0xcb97, 0x1, 0x0);
        gbc.writeMem(0xd988, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcb97);
        EXPECT(gbc.pc(), 0xd989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd988), 0xf9);
        // F9 01B5
        gbc.setState(0xbba0, 0xeca, 0xeb90, 0x9b8a, 0x2614, 0xc085, 0x1, 0x1);
        gbc.writeMem(0xbba0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc085);
        EXPECT(gbc.pc(), 0xbba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba0), 0xf9);
        // F9 01B6
        gbc.setState(0xb91d, 0xb785, 0x680, 0xe6cd, 0xc4c5, 0xe9fb, 0x1, 0x1);
        gbc.writeMem(0xb91d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe9fb);
        EXPECT(gbc.pc(), 0xb91e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb91d), 0xf9);
        // F9 01B7
        gbc.setState(0x7c8d, 0xe56c, 0xbfd0, 0x6002, 0x16f7, 0x4d8c, 0x0, 0x0);
        gbc.writeMem(0x7c8d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4d8c);
        EXPECT(gbc.pc(), 0x7c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01B8
        gbc.setState(0x6298, 0x42e9, 0x56b0, 0xd81e, 0x998a, 0xfb58, 0x1, 0x1);
        gbc.writeMem(0x6298, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xfb58);
        EXPECT(gbc.pc(), 0x6299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01B9
        gbc.setState(0xe90d, 0xed0e, 0xa870, 0xcf40, 0xda74, 0x5415, 0x0, 0x0);
        gbc.writeMem(0xe90d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5415);
        EXPECT(gbc.pc(), 0xe90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe90d), 0xf9);
        // F9 01BA
        gbc.setState(0x3efe, 0x8ad4, 0x5900, 0x3fce, 0xde1b, 0x9478, 0x0, 0x1);
        gbc.writeMem(0x3efe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9478);
        EXPECT(gbc.pc(), 0x3eff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01BB
        gbc.setState(0x398c, 0x98dc, 0x4770, 0xd4f0, 0x400, 0x9fa3, 0x1, 0x0);
        gbc.writeMem(0x398c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9fa3);
        EXPECT(gbc.pc(), 0x398d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01BC
        gbc.setState(0x958d, 0x25f9, 0x7660, 0x94dd, 0x5ac6, 0xbdcf, 0x1, 0x0);
        gbc.writeMem(0x958d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbdcf);
        EXPECT(gbc.pc(), 0x958e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958d), 0xf9);
        // F9 01BD
        gbc.setState(0xba58, 0xbbb7, 0x8350, 0xd8af, 0x219d, 0x788d, 0x1, 0x0);
        gbc.writeMem(0xba58, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x788d);
        EXPECT(gbc.pc(), 0xba59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba58), 0xf9);
        // F9 01BF
        gbc.setState(0xe6b5, 0x777d, 0x9f0, 0x1679, 0xef1, 0x9c24, 0x0, 0x0);
        gbc.writeMem(0xe6b5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9c24);
        EXPECT(gbc.pc(), 0xe6b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6b5), 0xf9);
        // F9 01C0
        gbc.setState(0x2467, 0x976, 0x54f0, 0x102, 0x23ae, 0xf9db, 0x0, 0x0);
        gbc.writeMem(0x2467, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf9db);
        EXPECT(gbc.pc(), 0x2468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01C1
        gbc.setState(0xd2aa, 0xde66, 0x6510, 0x6e45, 0x4258, 0x3926, 0x1, 0x0);
        gbc.writeMem(0xd2aa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x3926);
        EXPECT(gbc.pc(), 0xd2ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2aa), 0xf9);
        // F9 01C2
        gbc.setState(0x6661, 0x28d8, 0x780, 0xfed9, 0x8c30, 0xcb82, 0x0, 0x0);
        gbc.writeMem(0x6661, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcb82);
        EXPECT(gbc.pc(), 0x6662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01C4
        gbc.setState(0xb24d, 0xd236, 0x5290, 0x95be, 0x17be, 0xd0ea, 0x1, 0x0);
        gbc.writeMem(0xb24d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd0ea);
        EXPECT(gbc.pc(), 0xb24e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24d), 0xf9);
        // F9 01C5
        gbc.setState(0x73cb, 0xc7dd, 0x5d0, 0xfe30, 0x7ff3, 0xa69e, 0x0, 0x0);
        gbc.writeMem(0x73cb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa69e);
        EXPECT(gbc.pc(), 0x73cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01C6
        gbc.setState(0x97a2, 0x74a7, 0x7b0, 0x3832, 0xf504, 0x8a6, 0x1, 0x0);
        gbc.writeMem(0x97a2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8a6);
        EXPECT(gbc.pc(), 0x97a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a2), 0xf9);
        // F9 01C7
        gbc.setState(0x9fc6, 0x7102, 0x890, 0x300b, 0x1430, 0x4cf, 0x0, 0x1);
        gbc.writeMem(0x9fc6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4cf);
        EXPECT(gbc.pc(), 0x9fc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc6), 0xf9);
        // F9 01C8
        gbc.setState(0x8aab, 0xa85, 0xcc0, 0xf02d, 0x9893, 0x31c5, 0x1, 0x1);
        gbc.writeMem(0x8aab, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x31c5);
        EXPECT(gbc.pc(), 0x8aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aab), 0xf9);
        // F9 01C9
        gbc.setState(0x4350, 0x7b63, 0x1e0, 0xa0ed, 0x9eaa, 0x8af1, 0x1, 0x0);
        gbc.writeMem(0x4350, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x8af1);
        EXPECT(gbc.pc(), 0x4351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01CA
        gbc.setState(0x71bf, 0x599c, 0x2690, 0xfaf4, 0x76ab, 0xdc74, 0x1, 0x0);
        gbc.writeMem(0x71bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xdc74);
        EXPECT(gbc.pc(), 0x71c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01CB
        gbc.setState(0xab8c, 0xb83e, 0x8940, 0x37e0, 0xf9bd, 0x429b, 0x1, 0x1);
        gbc.writeMem(0xab8c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x429b);
        EXPECT(gbc.pc(), 0xab8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8c), 0xf9);
        // F9 01CC
        gbc.setState(0xc282, 0x8f09, 0x2a10, 0x3d29, 0xb2e, 0x58df, 0x1, 0x1);
        gbc.writeMem(0xc282, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x58df);
        EXPECT(gbc.pc(), 0xc283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc282), 0xf9);
        // F9 01CD
        gbc.setState(0xad63, 0x2210, 0x650, 0x9f11, 0xbaf8, 0x8d6b, 0x1, 0x1);
        gbc.writeMem(0xad63, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8d6b);
        EXPECT(gbc.pc(), 0xad64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad63), 0xf9);
        // F9 01CE
        gbc.setState(0xc8f7, 0x53d8, 0x4070, 0xef74, 0xff96, 0xf558, 0x0, 0x0);
        gbc.writeMem(0xc8f7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf558);
        EXPECT(gbc.pc(), 0xc8f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8f7), 0xf9);
        // F9 01CF
        gbc.setState(0xb733, 0xff77, 0xa6d0, 0x5131, 0x9abb, 0x248d, 0x0, 0x1);
        gbc.writeMem(0xb733, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x248d);
        EXPECT(gbc.pc(), 0xb734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb733), 0xf9);
        // F9 01D0
        gbc.setState(0x189d, 0x7dfa, 0x2430, 0x8b9a, 0xe190, 0xe309, 0x1, 0x0);
        gbc.writeMem(0x189d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe309);
        EXPECT(gbc.pc(), 0x189e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01D2
        gbc.setState(0xc7bc, 0x6921, 0xd860, 0x436a, 0x2f4, 0x9508, 0x0, 0x0);
        gbc.writeMem(0xc7bc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9508);
        EXPECT(gbc.pc(), 0xc7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7bc), 0xf9);
        // F9 01D3
        gbc.setState(0x219e, 0xee67, 0xbf60, 0xe974, 0x7702, 0xa487, 0x0, 0x1);
        gbc.writeMem(0x219e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa487);
        EXPECT(gbc.pc(), 0x219f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01D5
        gbc.setState(0x18a3, 0xdd8b, 0x8210, 0x5b03, 0x7114, 0xe398, 0x0, 0x1);
        gbc.writeMem(0x18a3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe398);
        EXPECT(gbc.pc(), 0x18a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01D6
        gbc.setState(0x306, 0x73b1, 0xc120, 0xd655, 0x74bc, 0x98b3, 0x1, 0x0);
        gbc.writeMem(0x306, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x98b3);
        EXPECT(gbc.pc(), 0x307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01D7
        gbc.setState(0x9660, 0x6047, 0x7c0, 0xd885, 0xb425, 0x7178, 0x1, 0x0);
        gbc.writeMem(0x9660, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7178);
        EXPECT(gbc.pc(), 0x9661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9660), 0xf9);
        // F9 01D8
        gbc.setState(0x560e, 0x49ba, 0xfaf0, 0x4697, 0xa374, 0x1ea0, 0x1, 0x0);
        gbc.writeMem(0x560e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1ea0);
        EXPECT(gbc.pc(), 0x560f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01D9
        gbc.setState(0xc429, 0x76e5, 0xacb0, 0x264c, 0xc4d1, 0x72e0, 0x1, 0x0);
        gbc.writeMem(0xc429, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x72e0);
        EXPECT(gbc.pc(), 0xc42a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc429), 0xf9);
        // F9 01DA
        gbc.setState(0x1334, 0xf9d4, 0x6a60, 0xfbd, 0xa29b, 0x1315, 0x1, 0x1);
        gbc.writeMem(0x1334, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1315);
        EXPECT(gbc.pc(), 0x1335);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01DB
        gbc.setState(0xccc5, 0x6014, 0xb4c0, 0x250f, 0xe7bc, 0xafd0, 0x0, 0x1);
        gbc.writeMem(0xccc5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xafd0);
        EXPECT(gbc.pc(), 0xccc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc5), 0xf9);
        // F9 01DD
        gbc.setState(0x842, 0x9455, 0xa890, 0xab82, 0x4df8, 0xe58b, 0x0, 0x1);
        gbc.writeMem(0x842, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe58b);
        EXPECT(gbc.pc(), 0x843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01DE
        gbc.setState(0x94f0, 0x1681, 0x38d0, 0x9be2, 0xfc53, 0xaefe, 0x0, 0x0);
        gbc.writeMem(0x94f0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xaefe);
        EXPECT(gbc.pc(), 0x94f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94f0), 0xf9);
        // F9 01DF
        gbc.setState(0xf5a, 0xa31f, 0x1440, 0x4bd, 0xe2dd, 0x8413, 0x0, 0x0);
        gbc.writeMem(0xf5a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8413);
        EXPECT(gbc.pc(), 0xf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01E0
        gbc.setState(0x1cc1, 0xc2f2, 0xadd0, 0x218b, 0x37a3, 0x6e06, 0x0, 0x0);
        gbc.writeMem(0x1cc1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6e06);
        EXPECT(gbc.pc(), 0x1cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01E1
        gbc.setState(0x56b7, 0x1ebb, 0xef10, 0x6043, 0x1bf7, 0x13ce, 0x1, 0x0);
        gbc.writeMem(0x56b7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x13ce);
        EXPECT(gbc.pc(), 0x56b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01E2
        gbc.setState(0x2abd, 0xbc09, 0xd630, 0x5e41, 0x424d, 0xc84a, 0x1, 0x0);
        gbc.writeMem(0x2abd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc84a);
        EXPECT(gbc.pc(), 0x2abe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01E3
        gbc.setState(0x1925, 0x7a2, 0xc3d0, 0x1593, 0xe55f, 0xbd34, 0x0, 0x1);
        gbc.writeMem(0x1925, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbd34);
        EXPECT(gbc.pc(), 0x1926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01E4
        gbc.setState(0x2165, 0xd6fc, 0x4120, 0xb0d, 0x5cc2, 0x5191, 0x0, 0x1);
        gbc.writeMem(0x2165, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5191);
        EXPECT(gbc.pc(), 0x2166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01E5
        gbc.setState(0x9f96, 0xdc4b, 0x59a0, 0x4e7e, 0xf997, 0x5046, 0x0, 0x1);
        gbc.writeMem(0x9f96, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5046);
        EXPECT(gbc.pc(), 0x9f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f96), 0xf9);
        // F9 01E6
        gbc.setState(0x5429, 0xc467, 0x3ce0, 0x2f0e, 0x63ea, 0x575c, 0x1, 0x1);
        gbc.writeMem(0x5429, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x575c);
        EXPECT(gbc.pc(), 0x542a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01E7
        gbc.setState(0x6d1e, 0x5, 0x1d60, 0xa955, 0xa87d, 0x5b03, 0x1, 0x1);
        gbc.writeMem(0x6d1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5b03);
        EXPECT(gbc.pc(), 0x6d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01E8
        gbc.setState(0x781, 0xba9f, 0xa4e0, 0x5d6b, 0x7ea7, 0x325b, 0x0, 0x1);
        gbc.writeMem(0x781, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x325b);
        EXPECT(gbc.pc(), 0x782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01E9
        gbc.setState(0x5f23, 0x2cca, 0xd000, 0x3743, 0x7315, 0xa467, 0x0, 0x1);
        gbc.writeMem(0x5f23, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa467);
        EXPECT(gbc.pc(), 0x5f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01EA
        gbc.setState(0x14d0, 0x89b0, 0x97b0, 0x4d81, 0xc1d7, 0xab1b, 0x1, 0x0);
        gbc.writeMem(0x14d0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xab1b);
        EXPECT(gbc.pc(), 0x14d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01EB
        gbc.setState(0xef09, 0xb8cf, 0xec30, 0x5c93, 0xc7a0, 0xbdb9, 0x0, 0x0);
        gbc.writeMem(0xef09, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbdb9);
        EXPECT(gbc.pc(), 0xef0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef09), 0xf9);
        // F9 01ED
        gbc.setState(0x31a2, 0x8d8b, 0xa5a0, 0xb4ce, 0x7ea, 0x898e, 0x0, 0x0);
        gbc.writeMem(0x31a2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x898e);
        EXPECT(gbc.pc(), 0x31a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01EE
        gbc.setState(0xabf9, 0xf0c1, 0xf160, 0x3827, 0xa07e, 0x64e4, 0x1, 0x0);
        gbc.writeMem(0xabf9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x64e4);
        EXPECT(gbc.pc(), 0xabfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf9), 0xf9);
        // F9 01EF
        gbc.setState(0x78c, 0xfc57, 0x26b0, 0x3423, 0xbc23, 0x4bf1, 0x1, 0x1);
        gbc.writeMem(0x78c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4bf1);
        EXPECT(gbc.pc(), 0x78d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01F0
        gbc.setState(0xbbb5, 0x7f80, 0x2f10, 0x99e8, 0x1a31, 0x1499, 0x1, 0x1);
        gbc.writeMem(0xbbb5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1499);
        EXPECT(gbc.pc(), 0xbbb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbb5), 0xf9);
        // F9 01F1
        gbc.setState(0x109b, 0x72be, 0x54f0, 0x6e59, 0x6b24, 0x942d, 0x0, 0x1);
        gbc.writeMem(0x109b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x942d);
        EXPECT(gbc.pc(), 0x109c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 01F2
        gbc.setState(0x11c6, 0x3a39, 0x5b10, 0x92ce, 0x1327, 0x110a, 0x1, 0x0);
        gbc.writeMem(0x11c6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x110a);
        EXPECT(gbc.pc(), 0x11c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01F3
        gbc.setState(0x1719, 0xd1b4, 0x59e0, 0x2e2f, 0xf1b1, 0x23fa, 0x0, 0x1);
        gbc.writeMem(0x1719, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x23fa);
        EXPECT(gbc.pc(), 0x171a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01F4
        gbc.setState(0x3b37, 0x6b33, 0x8f80, 0x6187, 0x94ee, 0xb0fb, 0x1, 0x1);
        gbc.writeMem(0x3b37, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb0fb);
        EXPECT(gbc.pc(), 0x3b38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01F5
        gbc.setState(0x3ef5, 0xed0a, 0xd820, 0x973, 0x8387, 0xb27c, 0x1, 0x0);
        gbc.writeMem(0x3ef5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb27c);
        EXPECT(gbc.pc(), 0x3ef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01F6
        gbc.setState(0x3432, 0xf7db, 0x6e80, 0x473f, 0xe1a0, 0xf9b0, 0x1, 0x0);
        gbc.writeMem(0x3432, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf9b0);
        EXPECT(gbc.pc(), 0x3433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01F7
        gbc.setState(0x39e2, 0x338d, 0x1660, 0xd5f4, 0xb7f6, 0x8510, 0x1, 0x0);
        gbc.writeMem(0x39e2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8510);
        EXPECT(gbc.pc(), 0x39e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 01F8
        gbc.setState(0x61d5, 0x9ab0, 0x65c0, 0x224c, 0xf0a0, 0x360f, 0x1, 0x1);
        gbc.writeMem(0x61d5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x360f);
        EXPECT(gbc.pc(), 0x61d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 01F9
        gbc.setState(0xba6, 0xa7b5, 0x2350, 0x5fe, 0x8329, 0xdab2, 0x0, 0x0);
        gbc.writeMem(0xba6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdab2);
        EXPECT(gbc.pc(), 0xba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 01FB
        gbc.setState(0xd7a8, 0xb85a, 0xd430, 0x8082, 0x524d, 0x3f41, 0x0, 0x0);
        gbc.writeMem(0xd7a8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3f41);
        EXPECT(gbc.pc(), 0xd7a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a8), 0xf9);
        // F9 01FC
        gbc.setState(0x8444, 0x145d, 0x5400, 0x3029, 0x703d, 0x8405, 0x1, 0x0);
        gbc.writeMem(0x8444, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8405);
        EXPECT(gbc.pc(), 0x8445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8444), 0xf9);
        // F9 01FD
        gbc.setState(0x83d2, 0x8f3e, 0xf470, 0xf1cd, 0x1b88, 0x9763, 0x0, 0x0);
        gbc.writeMem(0x83d2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9763);
        EXPECT(gbc.pc(), 0x83d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83d2), 0xf9);
        // F9 01FE
        gbc.setState(0x2065, 0x74a3, 0xb0e0, 0x67d2, 0xc64, 0xb01f, 0x1, 0x0);
        gbc.writeMem(0x2065, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb01f);
        EXPECT(gbc.pc(), 0x2066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0200
        gbc.setState(0x57c5, 0x60d3, 0x36e0, 0x1210, 0xc1b5, 0x1629, 0x1, 0x1);
        gbc.writeMem(0x57c5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1629);
        EXPECT(gbc.pc(), 0x57c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0201
        gbc.setState(0x5fb1, 0x7679, 0xf3c0, 0xe5b8, 0x962, 0xb2f2, 0x1, 0x0);
        gbc.writeMem(0x5fb1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb2f2);
        EXPECT(gbc.pc(), 0x5fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0202
        gbc.setState(0x8e41, 0x46da, 0xcc40, 0x83db, 0x895d, 0x5740, 0x0, 0x0);
        gbc.writeMem(0x8e41, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x5740);
        EXPECT(gbc.pc(), 0x8e42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e41), 0xf9);
        // F9 0203
        gbc.setState(0x6e3f, 0x3aa1, 0x79d0, 0xe714, 0xd475, 0x45b7, 0x0, 0x0);
        gbc.writeMem(0x6e3f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x45b7);
        EXPECT(gbc.pc(), 0x6e40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0204
        gbc.setState(0xb68e, 0x182a, 0x4d40, 0x5ec5, 0xbe66, 0xce4a, 0x1, 0x0);
        gbc.writeMem(0xb68e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xce4a);
        EXPECT(gbc.pc(), 0xb68f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb68e), 0xf9);
        // F9 0205
        gbc.setState(0xce64, 0xffb5, 0x3180, 0xc99e, 0xf068, 0xc412, 0x0, 0x0);
        gbc.writeMem(0xce64, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc412);
        EXPECT(gbc.pc(), 0xce65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce64), 0xf9);
        // F9 0206
        gbc.setState(0x8758, 0xebe9, 0x6e20, 0xe70e, 0x9824, 0x9ce1, 0x0, 0x0);
        gbc.writeMem(0x8758, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0x8759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8758), 0xf9);
        // F9 0207
        gbc.setState(0x595d, 0xca33, 0xce0, 0xbcdc, 0xc4c1, 0xf603, 0x0, 0x1);
        gbc.writeMem(0x595d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf603);
        EXPECT(gbc.pc(), 0x595e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0208
        gbc.setState(0x33ec, 0x3d83, 0x3a30, 0x7b8d, 0xfa72, 0x4f1d, 0x1, 0x1);
        gbc.writeMem(0x33ec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4f1d);
        EXPECT(gbc.pc(), 0x33ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0209
        gbc.setState(0xbdb5, 0xe141, 0xa20, 0xf0, 0xb2bc, 0x5f7e, 0x1, 0x1);
        gbc.writeMem(0xbdb5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5f7e);
        EXPECT(gbc.pc(), 0xbdb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb5), 0xf9);
        // F9 020A
        gbc.setState(0x2771, 0x405, 0xf9e0, 0xe912, 0x4dbc, 0x3d0d, 0x0, 0x0);
        gbc.writeMem(0x2771, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3d0d);
        EXPECT(gbc.pc(), 0x2772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 020B
        gbc.setState(0xeaee, 0xbaf4, 0xe450, 0x659a, 0x1b08, 0x5822, 0x0, 0x0);
        gbc.writeMem(0xeaee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5822);
        EXPECT(gbc.pc(), 0xeaef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaee), 0xf9);
        // F9 020C
        gbc.setState(0x154, 0x5b42, 0x19d0, 0x881a, 0x8d92, 0xd517, 0x0, 0x1);
        gbc.writeMem(0x154, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd517);
        EXPECT(gbc.pc(), 0x155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 020D
        gbc.setState(0x589b, 0xcbd4, 0xfd80, 0xe59b, 0x4ad4, 0xf9c, 0x0, 0x1);
        gbc.writeMem(0x589b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf9c);
        EXPECT(gbc.pc(), 0x589c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 020E
        gbc.setState(0x61c6, 0xe68f, 0xe750, 0x34a2, 0x6740, 0x36eb, 0x1, 0x1);
        gbc.writeMem(0x61c6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x36eb);
        EXPECT(gbc.pc(), 0x61c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 020F
        gbc.setState(0x934d, 0x8628, 0xed70, 0xe176, 0x3c5d, 0x2dff, 0x0, 0x0);
        gbc.writeMem(0x934d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2dff);
        EXPECT(gbc.pc(), 0x934e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x934d), 0xf9);
        // F9 0210
        gbc.setState(0x6f67, 0x14df, 0xd950, 0x985c, 0x7a3b, 0x9c0f, 0x1, 0x0);
        gbc.writeMem(0x6f67, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9c0f);
        EXPECT(gbc.pc(), 0x6f68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0211
        gbc.setState(0xb217, 0x239c, 0xbc80, 0xc638, 0x4964, 0x8366, 0x0, 0x0);
        gbc.writeMem(0xb217, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8366);
        EXPECT(gbc.pc(), 0xb218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb217), 0xf9);
        // F9 0213
        gbc.setState(0x8f07, 0xd1cb, 0xe490, 0x6810, 0x3a6e, 0x5816, 0x0, 0x1);
        gbc.writeMem(0x8f07, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5816);
        EXPECT(gbc.pc(), 0x8f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f07), 0xf9);
        // F9 0214
        gbc.setState(0xd47e, 0xdf94, 0x37d0, 0x909b, 0x8c36, 0x4938, 0x0, 0x0);
        gbc.writeMem(0xd47e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4938);
        EXPECT(gbc.pc(), 0xd47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47e), 0xf9);
        // F9 0215
        gbc.setState(0xbdbf, 0x23d4, 0xafc0, 0x343e, 0x4550, 0x2543, 0x0, 0x1);
        gbc.writeMem(0xbdbf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2543);
        EXPECT(gbc.pc(), 0xbdc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdbf), 0xf9);
        // F9 0216
        gbc.setState(0x66dc, 0x8dcc, 0x1270, 0x92de, 0x6c37, 0x4e9b, 0x0, 0x1);
        gbc.writeMem(0x66dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4e9b);
        EXPECT(gbc.pc(), 0x66dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0217
        gbc.setState(0x859c, 0xf198, 0x80d0, 0x8881, 0xb8d8, 0xfe90, 0x1, 0x1);
        gbc.writeMem(0x859c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xfe90);
        EXPECT(gbc.pc(), 0x859d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x859c), 0xf9);
        // F9 0218
        gbc.setState(0xcd79, 0x7db6, 0x5fe0, 0x4a9d, 0x9f66, 0x9a3, 0x0, 0x0);
        gbc.writeMem(0xcd79, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9a3);
        EXPECT(gbc.pc(), 0xcd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd79), 0xf9);
        // F9 0219
        gbc.setState(0x6528, 0x926e, 0xa510, 0x9f83, 0x4a28, 0x2eac, 0x0, 0x1);
        gbc.writeMem(0x6528, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2eac);
        EXPECT(gbc.pc(), 0x6529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 021A
        gbc.setState(0x966b, 0xd0e5, 0x8370, 0xd0c8, 0x10ad, 0x514b, 0x1, 0x1);
        gbc.writeMem(0x966b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x514b);
        EXPECT(gbc.pc(), 0x966c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x966b), 0xf9);
        // F9 021B
        gbc.setState(0x66aa, 0x9c97, 0x2f20, 0xfd1e, 0xb4da, 0xcd8a, 0x1, 0x1);
        gbc.writeMem(0x66aa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcd8a);
        EXPECT(gbc.pc(), 0x66ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 021C
        gbc.setState(0xa3f7, 0x4e85, 0xf9c0, 0xbb6b, 0x7020, 0x9d0f, 0x1, 0x0);
        gbc.writeMem(0xa3f7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9d0f);
        EXPECT(gbc.pc(), 0xa3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f7), 0xf9);
        // F9 021D
        gbc.setState(0x3667, 0x4b6a, 0x5fc0, 0xd4f6, 0xdd74, 0xf904, 0x1, 0x1);
        gbc.writeMem(0x3667, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf904);
        EXPECT(gbc.pc(), 0x3668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 021E
        gbc.setState(0x6538, 0xd1f1, 0xf590, 0x2d38, 0x1721, 0x18ad, 0x1, 0x0);
        gbc.writeMem(0x6538, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x18ad);
        EXPECT(gbc.pc(), 0x6539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 021F
        gbc.setState(0xedcd, 0xe872, 0x4c50, 0x197a, 0xf6ac, 0x895b, 0x0, 0x1);
        gbc.writeMem(0xedcd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x895b);
        EXPECT(gbc.pc(), 0xedce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedcd), 0xf9);
        // F9 0220
        gbc.setState(0x7b47, 0x6063, 0x4200, 0x3415, 0x4af7, 0x40a7, 0x0, 0x1);
        gbc.writeMem(0x7b47, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x40a7);
        EXPECT(gbc.pc(), 0x7b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0221
        gbc.setState(0x92af, 0x3dd7, 0x5120, 0xc09, 0xe724, 0xdfc0, 0x1, 0x0);
        gbc.writeMem(0x92af, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdfc0);
        EXPECT(gbc.pc(), 0x92b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92af), 0xf9);
        // F9 0222
        gbc.setState(0x291, 0x3219, 0x9e0, 0x747d, 0x808f, 0xf74f, 0x1, 0x1);
        gbc.writeMem(0x291, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf74f);
        EXPECT(gbc.pc(), 0x292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0223
        gbc.setState(0x55d8, 0x2487, 0x9b80, 0xf168, 0xf06d, 0x4327, 0x1, 0x1);
        gbc.writeMem(0x55d8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4327);
        EXPECT(gbc.pc(), 0x55d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0224
        gbc.setState(0x2bc0, 0x82a0, 0xc520, 0xdb1e, 0xcca2, 0xfb53, 0x0, 0x0);
        gbc.writeMem(0x2bc0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfb53);
        EXPECT(gbc.pc(), 0x2bc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0225
        gbc.setState(0x1b73, 0x6e0c, 0x5d20, 0x14c2, 0xaf3a, 0xed0a, 0x0, 0x1);
        gbc.writeMem(0x1b73, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xed0a);
        EXPECT(gbc.pc(), 0x1b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0226
        gbc.setState(0x6fe9, 0xa99c, 0x1ce0, 0xa5ce, 0xc880, 0xa1b1, 0x0, 0x0);
        gbc.writeMem(0x6fe9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa1b1);
        EXPECT(gbc.pc(), 0x6fea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0227
        gbc.setState(0xa410, 0x37c9, 0xa630, 0xa0ad, 0x670a, 0x7520, 0x0, 0x1);
        gbc.writeMem(0xa410, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7520);
        EXPECT(gbc.pc(), 0xa411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa410), 0xf9);
        // F9 0228
        gbc.setState(0xc83f, 0xbf22, 0xdb30, 0x7603, 0x56fb, 0x8e41, 0x0, 0x1);
        gbc.writeMem(0xc83f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8e41);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc83f), 0xf9);
        // F9 0229
        gbc.setState(0x3183, 0x3287, 0xbf90, 0x5d06, 0x25da, 0x166, 0x1, 0x1);
        gbc.writeMem(0x3183, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x166);
        EXPECT(gbc.pc(), 0x3184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 022A
        gbc.setState(0xe26d, 0x774f, 0x70f0, 0xf966, 0xe1c9, 0xa457, 0x0, 0x0);
        gbc.writeMem(0xe26d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa457);
        EXPECT(gbc.pc(), 0xe26e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26d), 0xf9);
        // F9 022B
        gbc.setState(0x89e, 0x4804, 0xfa70, 0xb3a9, 0xebab, 0x59a8, 0x1, 0x1);
        gbc.writeMem(0x89e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x59a8);
        EXPECT(gbc.pc(), 0x89f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 022C
        gbc.setState(0x4d50, 0x1872, 0xf330, 0x8261, 0x46c8, 0x4ffa, 0x1, 0x0);
        gbc.writeMem(0x4d50, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4ffa);
        EXPECT(gbc.pc(), 0x4d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 022D
        gbc.setState(0x4f0e, 0xed96, 0xdf30, 0xa227, 0xe00c, 0xab9c, 0x1, 0x1);
        gbc.writeMem(0x4f0e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xab9c);
        EXPECT(gbc.pc(), 0x4f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 022E
        gbc.setState(0xc745, 0x412d, 0x8c80, 0x188c, 0x30f1, 0xa73c, 0x1, 0x0);
        gbc.writeMem(0xc745, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa73c);
        EXPECT(gbc.pc(), 0xc746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc745), 0xf9);
        // F9 022F
        gbc.setState(0x6d8d, 0x65a6, 0x7c50, 0xb625, 0x5b97, 0x56ef, 0x0, 0x1);
        gbc.writeMem(0x6d8d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x56ef);
        EXPECT(gbc.pc(), 0x6d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0230
        gbc.setState(0x8940, 0x4988, 0x7a30, 0x25f, 0x5169, 0xb342, 0x1, 0x0);
        gbc.writeMem(0x8940, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb342);
        EXPECT(gbc.pc(), 0x8941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8940), 0xf9);
        // F9 0231
        gbc.setState(0x4004, 0xa2d6, 0x85d0, 0x4bb3, 0x946, 0x6115, 0x1, 0x1);
        gbc.writeMem(0x4004, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6115);
        EXPECT(gbc.pc(), 0x4005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0232
        gbc.setState(0x290c, 0x314, 0xce40, 0x9cdd, 0x284, 0x1b1c, 0x1, 0x1);
        gbc.writeMem(0x290c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1b1c);
        EXPECT(gbc.pc(), 0x290d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0233
        gbc.setState(0x5366, 0x2383, 0x79e0, 0x89, 0x1a87, 0xc63b, 0x1, 0x0);
        gbc.writeMem(0x5366, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc63b);
        EXPECT(gbc.pc(), 0x5367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0234
        gbc.setState(0xea93, 0xffc1, 0xbbc0, 0x5f8a, 0x5448, 0x3929, 0x1, 0x1);
        gbc.writeMem(0xea93, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3929);
        EXPECT(gbc.pc(), 0xea94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea93), 0xf9);
        // F9 0235
        gbc.setState(0x51d5, 0x76e8, 0xca20, 0xe67, 0xfc3e, 0xceee, 0x0, 0x0);
        gbc.writeMem(0x51d5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xceee);
        EXPECT(gbc.pc(), 0x51d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0236
        gbc.setState(0x7420, 0xadd2, 0x5e50, 0x6f6e, 0xf8cb, 0x4249, 0x0, 0x0);
        gbc.writeMem(0x7420, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4249);
        EXPECT(gbc.pc(), 0x7421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0237
        gbc.setState(0xebd6, 0xc73d, 0x7a50, 0x35f, 0xc1f3, 0xfba0, 0x0, 0x0);
        gbc.writeMem(0xebd6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfba0);
        EXPECT(gbc.pc(), 0xebd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebd6), 0xf9);
        // F9 0238
        gbc.setState(0xeaae, 0xd1ad, 0x7ca0, 0x2201, 0x842a, 0x244, 0x1, 0x1);
        gbc.writeMem(0xeaae, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x244);
        EXPECT(gbc.pc(), 0xeaaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaae), 0xf9);
        // F9 0239
        gbc.setState(0x736f, 0xb5ea, 0x1e40, 0x8f30, 0x1315, 0xaf1, 0x0, 0x1);
        gbc.writeMem(0x736f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xaf1);
        EXPECT(gbc.pc(), 0x7370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 023A
        gbc.setState(0x60b6, 0xab95, 0x9910, 0x24fa, 0xeb20, 0x9acc, 0x0, 0x0);
        gbc.writeMem(0x60b6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9acc);
        EXPECT(gbc.pc(), 0x60b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 023B
        gbc.setState(0xd0f2, 0x5bfb, 0x6910, 0x3f4f, 0x843c, 0x6b67, 0x1, 0x1);
        gbc.writeMem(0xd0f2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6b67);
        EXPECT(gbc.pc(), 0xd0f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0f2), 0xf9);
        // F9 023C
        gbc.setState(0xde37, 0x2457, 0x4b90, 0xe061, 0x55a5, 0xcf99, 0x0, 0x1);
        gbc.writeMem(0xde37, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcf99);
        EXPECT(gbc.pc(), 0xde38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde37), 0xf9);
        // F9 023D
        gbc.setState(0xe8d3, 0x310c, 0x9c0, 0x1466, 0x949e, 0x645e, 0x0, 0x0);
        gbc.writeMem(0xe8d3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x645e);
        EXPECT(gbc.pc(), 0xe8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d3), 0xf9);
        // F9 023E
        gbc.setState(0x4c89, 0xf773, 0xbe30, 0xf83a, 0x5ed7, 0x8ae2, 0x0, 0x0);
        gbc.writeMem(0x4c89, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8ae2);
        EXPECT(gbc.pc(), 0x4c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 023F
        gbc.setState(0xb08b, 0xbefd, 0x8770, 0x856, 0xab11, 0x94b, 0x1, 0x1);
        gbc.writeMem(0xb08b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x94b);
        EXPECT(gbc.pc(), 0xb08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb08b), 0xf9);
        // F9 0241
        gbc.setState(0xfe6, 0x541e, 0xdc40, 0x46ce, 0xdd53, 0x97e4, 0x1, 0x0);
        gbc.writeMem(0xfe6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x97e4);
        EXPECT(gbc.pc(), 0xfe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0242
        gbc.setState(0xe068, 0xbb9e, 0x4190, 0x3fd8, 0xcb4b, 0xd8a5, 0x0, 0x1);
        gbc.writeMem(0xe068, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd8a5);
        EXPECT(gbc.pc(), 0xe069);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe068), 0xf9);
        // F9 0243
        gbc.setState(0xad5a, 0x7e61, 0xbbd0, 0x8d32, 0xb3bb, 0xa738, 0x1, 0x0);
        gbc.writeMem(0xad5a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa738);
        EXPECT(gbc.pc(), 0xad5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad5a), 0xf9);
        // F9 0244
        gbc.setState(0xa3b6, 0x916e, 0x6a10, 0xc366, 0xfb9a, 0xf2e9, 0x1, 0x1);
        gbc.writeMem(0xa3b6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf2e9);
        EXPECT(gbc.pc(), 0xa3b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3b6), 0xf9);
        // F9 0245
        gbc.setState(0xe6f, 0x40eb, 0x80c0, 0x14c7, 0xf576, 0xcba8, 0x1, 0x0);
        gbc.writeMem(0xe6f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xcba8);
        EXPECT(gbc.pc(), 0xe70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0246
        gbc.setState(0xb637, 0x3ed6, 0x5df0, 0xd6b3, 0x50ca, 0xc324, 0x1, 0x0);
        gbc.writeMem(0xb637, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc324);
        EXPECT(gbc.pc(), 0xb638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb637), 0xf9);
        // F9 0247
        gbc.setState(0x988c, 0x9dc8, 0xd2b0, 0x4edf, 0x40b7, 0x2d29, 0x0, 0x0);
        gbc.writeMem(0x988c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2d29);
        EXPECT(gbc.pc(), 0x988d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x988c), 0xf9);
        // F9 0248
        gbc.setState(0xe214, 0x6463, 0x4ec0, 0xf08e, 0x2aca, 0x14a6, 0x1, 0x1);
        gbc.writeMem(0xe214, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0xe215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe214), 0xf9);
        // F9 0249
        gbc.setState(0x2f64, 0xab47, 0xe830, 0x752e, 0xbfa3, 0xea4f, 0x1, 0x1);
        gbc.writeMem(0x2f64, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xea4f);
        EXPECT(gbc.pc(), 0x2f65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 024A
        gbc.setState(0x5681, 0xb21b, 0xcb50, 0x2775, 0xc0e3, 0xaf80, 0x1, 0x1);
        gbc.writeMem(0x5681, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xaf80);
        EXPECT(gbc.pc(), 0x5682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 024B
        gbc.setState(0x4621, 0x2a74, 0xc5e0, 0x287, 0xf989, 0x7625, 0x0, 0x1);
        gbc.writeMem(0x4621, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7625);
        EXPECT(gbc.pc(), 0x4622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 024C
        gbc.setState(0x4d12, 0xaf05, 0xcee0, 0x9fa6, 0x5224, 0xa3c0, 0x1, 0x0);
        gbc.writeMem(0x4d12, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa3c0);
        EXPECT(gbc.pc(), 0x4d13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 024D
        gbc.setState(0xcd41, 0xbf9, 0x5ea0, 0xd231, 0x21fc, 0x70cb, 0x0, 0x1);
        gbc.writeMem(0xcd41, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x70cb);
        EXPECT(gbc.pc(), 0xcd42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd41), 0xf9);
        // F9 024F
        gbc.setState(0x3416, 0x37a4, 0x4ed0, 0x45ad, 0x704d, 0x442e, 0x0, 0x0);
        gbc.writeMem(0x3416, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x442e);
        EXPECT(gbc.pc(), 0x3417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0250
        gbc.setState(0xa708, 0xae01, 0xbf0, 0x6d1c, 0x1a17, 0x6e89, 0x0, 0x0);
        gbc.writeMem(0xa708, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6e89);
        EXPECT(gbc.pc(), 0xa709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa708), 0xf9);
        // F9 0251
        gbc.setState(0xe606, 0xfe63, 0x8180, 0x67e, 0xecf8, 0x41f3, 0x1, 0x0);
        gbc.writeMem(0xe606, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x41f3);
        EXPECT(gbc.pc(), 0xe607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe606), 0xf9);
        // F9 0252
        gbc.setState(0x594d, 0x2140, 0x17e0, 0xea51, 0x4cde, 0x9796, 0x1, 0x1);
        gbc.writeMem(0x594d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9796);
        EXPECT(gbc.pc(), 0x594e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0253
        gbc.setState(0xc73e, 0xf4a6, 0xee60, 0x9e24, 0x656a, 0x6c5, 0x1, 0x0);
        gbc.writeMem(0xc73e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6c5);
        EXPECT(gbc.pc(), 0xc73f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73e), 0xf9);
        // F9 0255
        gbc.setState(0xaf81, 0xf7dc, 0x7cc0, 0x68d0, 0x5a5e, 0x7b0, 0x0, 0x0);
        gbc.writeMem(0xaf81, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7b0);
        EXPECT(gbc.pc(), 0xaf82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf81), 0xf9);
        // F9 0256
        gbc.setState(0xd3dc, 0x5a1a, 0x7a70, 0xaec4, 0x94ae, 0x7244, 0x1, 0x0);
        gbc.writeMem(0xd3dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7244);
        EXPECT(gbc.pc(), 0xd3dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3dc), 0xf9);
        // F9 0257
        gbc.setState(0x188c, 0xd2d6, 0xf00, 0x457f, 0xf180, 0xd14d, 0x1, 0x1);
        gbc.writeMem(0x188c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd14d);
        EXPECT(gbc.pc(), 0x188d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0258
        gbc.setState(0xa198, 0xa722, 0x8540, 0xc8b1, 0x3734, 0x40f3, 0x0, 0x0);
        gbc.writeMem(0xa198, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x40f3);
        EXPECT(gbc.pc(), 0xa199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa198), 0xf9);
        // F9 0259
        gbc.setState(0x83f0, 0xc4fc, 0x2c70, 0xf121, 0x937a, 0xe151, 0x0, 0x1);
        gbc.writeMem(0x83f0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe151);
        EXPECT(gbc.pc(), 0x83f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f0), 0xf9);
        // F9 025A
        gbc.setState(0x2f38, 0x8c6e, 0x3150, 0x8028, 0xc106, 0x85f1, 0x1, 0x0);
        gbc.writeMem(0x2f38, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x85f1);
        EXPECT(gbc.pc(), 0x2f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 025B
        gbc.setState(0x71ee, 0x9feb, 0xda20, 0x3200, 0xa877, 0x9603, 0x0, 0x0);
        gbc.writeMem(0x71ee, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0x71ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 025C
        gbc.setState(0x2fe, 0xc7f, 0xbfe0, 0xfe88, 0x5b22, 0x4316, 0x0, 0x0);
        gbc.writeMem(0x2fe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4316);
        EXPECT(gbc.pc(), 0x2ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 025D
        gbc.setState(0xd5db, 0x8d94, 0x9780, 0x2396, 0x1c4d, 0xad79, 0x1, 0x1);
        gbc.writeMem(0xd5db, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xad79);
        EXPECT(gbc.pc(), 0xd5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5db), 0xf9);
        // F9 025E
        gbc.setState(0xc873, 0x50b3, 0x7050, 0x4d48, 0x27c7, 0x2a0e, 0x1, 0x1);
        gbc.writeMem(0xc873, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2a0e);
        EXPECT(gbc.pc(), 0xc874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc873), 0xf9);
        // F9 025F
        gbc.setState(0xaf2, 0xda7d, 0xd7c0, 0x2c83, 0x690d, 0xccec, 0x0, 0x0);
        gbc.writeMem(0xaf2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0xaf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0260
        gbc.setState(0x3327, 0xde02, 0xd610, 0x721e, 0x1cd6, 0x71e8, 0x0, 0x0);
        gbc.writeMem(0x3327, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x71e8);
        EXPECT(gbc.pc(), 0x3328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0261
        gbc.setState(0xa016, 0xc988, 0x2430, 0x9eb8, 0xaef9, 0xbd86, 0x1, 0x1);
        gbc.writeMem(0xa016, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbd86);
        EXPECT(gbc.pc(), 0xa017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa016), 0xf9);
        // F9 0262
        gbc.setState(0xe4a1, 0xfb05, 0xfc30, 0xf3d1, 0x5839, 0xd3b9, 0x1, 0x1);
        gbc.writeMem(0xe4a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd3b9);
        EXPECT(gbc.pc(), 0xe4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a1), 0xf9);
        // F9 0263
        gbc.setState(0x1303, 0xe4b2, 0x3d40, 0x3aa6, 0x2735, 0x79c6, 0x1, 0x1);
        gbc.writeMem(0x1303, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x79c6);
        EXPECT(gbc.pc(), 0x1304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0266
        gbc.setState(0xeb97, 0xb6a, 0xa3f0, 0x8ea, 0xad70, 0xb5ac, 0x1, 0x1);
        gbc.writeMem(0xeb97, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb5ac);
        EXPECT(gbc.pc(), 0xeb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb97), 0xf9);
        // F9 0267
        gbc.setState(0xea3f, 0xfe68, 0xa9d0, 0xbf9e, 0x586b, 0x23a9, 0x0, 0x1);
        gbc.writeMem(0xea3f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x23a9);
        EXPECT(gbc.pc(), 0xea40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea3f), 0xf9);
        // F9 0268
        gbc.setState(0xf15, 0x2c83, 0x2cd0, 0xd902, 0x989b, 0x40fb, 0x1, 0x1);
        gbc.writeMem(0xf15, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x40fb);
        EXPECT(gbc.pc(), 0xf16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0269
        gbc.setState(0x688b, 0xe63c, 0xb580, 0x2f58, 0xf13b, 0xb765, 0x0, 0x0);
        gbc.writeMem(0x688b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb765);
        EXPECT(gbc.pc(), 0x688c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 026A
        gbc.setState(0x931b, 0x7ec0, 0xe650, 0xd54, 0x194b, 0x79f8, 0x0, 0x1);
        gbc.writeMem(0x931b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x79f8);
        EXPECT(gbc.pc(), 0x931c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931b), 0xf9);
        // F9 026B
        gbc.setState(0x466f, 0xef5c, 0x37d0, 0xa15, 0xa69d, 0x8c2c, 0x1, 0x1);
        gbc.writeMem(0x466f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8c2c);
        EXPECT(gbc.pc(), 0x4670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 026C
        gbc.setState(0xd780, 0x84c, 0x9fd0, 0x1fe2, 0xf9c9, 0xf7ae, 0x1, 0x0);
        gbc.writeMem(0xd780, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf7ae);
        EXPECT(gbc.pc(), 0xd781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd780), 0xf9);
        // F9 026D
        gbc.setState(0x6f2b, 0xe831, 0x3830, 0x55e4, 0x3fe3, 0x97a1, 0x1, 0x0);
        gbc.writeMem(0x6f2b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x97a1);
        EXPECT(gbc.pc(), 0x6f2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 026E
        gbc.setState(0x5a8c, 0xefaa, 0x1f20, 0xe17b, 0xea5c, 0x7cef, 0x0, 0x1);
        gbc.writeMem(0x5a8c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x7cef);
        EXPECT(gbc.pc(), 0x5a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 026F
        gbc.setState(0x8657, 0xc106, 0x6f90, 0xdbfe, 0x83c3, 0x47c, 0x0, 0x0);
        gbc.writeMem(0x8657, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x47c);
        EXPECT(gbc.pc(), 0x8658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8657), 0xf9);
        // F9 0270
        gbc.setState(0xe20d, 0x55c4, 0xe830, 0xb290, 0x5057, 0xc8ec, 0x0, 0x1);
        gbc.writeMem(0xe20d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc8ec);
        EXPECT(gbc.pc(), 0xe20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20d), 0xf9);
        // F9 0271
        gbc.setState(0x6d4e, 0xdd5d, 0x22c0, 0x83c1, 0x80a5, 0x5739, 0x1, 0x1);
        gbc.writeMem(0x6d4e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5739);
        EXPECT(gbc.pc(), 0x6d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0272
        gbc.setState(0xb501, 0xa043, 0x5da0, 0xfb11, 0xdfcd, 0xc5, 0x0, 0x1);
        gbc.writeMem(0xb501, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc5);
        EXPECT(gbc.pc(), 0xb502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb501), 0xf9);
        // F9 0273
        gbc.setState(0x5e, 0xfd73, 0x65d0, 0xfecb, 0xb1a9, 0x7991, 0x1, 0x1);
        gbc.writeMem(0x5e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7991);
        EXPECT(gbc.pc(), 0x5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0274
        gbc.setState(0xd0dc, 0x5707, 0x1220, 0xa6b2, 0x4309, 0x24cb, 0x0, 0x0);
        gbc.writeMem(0xd0dc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x24cb);
        EXPECT(gbc.pc(), 0xd0dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0dc), 0xf9);
        // F9 0275
        gbc.setState(0x94cb, 0x61db, 0x9b80, 0x139a, 0x705e, 0xcf4f, 0x0, 0x1);
        gbc.writeMem(0x94cb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xcf4f);
        EXPECT(gbc.pc(), 0x94cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94cb), 0xf9);
        // F9 0276
        gbc.setState(0x18ae, 0x983f, 0xcaf0, 0xfce2, 0x709e, 0x19a, 0x0, 0x0);
        gbc.writeMem(0x18ae, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x19a);
        EXPECT(gbc.pc(), 0x18af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0277
        gbc.setState(0x150f, 0x2f9f, 0x9ad0, 0x39f5, 0x3376, 0x864b, 0x0, 0x1);
        gbc.writeMem(0x150f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x864b);
        EXPECT(gbc.pc(), 0x1510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0278
        gbc.setState(0x2e8c, 0xf8e6, 0xdf30, 0x469c, 0x1493, 0xd848, 0x0, 0x1);
        gbc.writeMem(0x2e8c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd848);
        EXPECT(gbc.pc(), 0x2e8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0279
        gbc.setState(0x3dbd, 0xab7a, 0x9430, 0xd4f7, 0x8343, 0x5eb1, 0x0, 0x0);
        gbc.writeMem(0x3dbd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5eb1);
        EXPECT(gbc.pc(), 0x3dbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 027A
        gbc.setState(0xb568, 0xd2e3, 0x9940, 0x225b, 0xa1ce, 0x7af8, 0x0, 0x1);
        gbc.writeMem(0xb568, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7af8);
        EXPECT(gbc.pc(), 0xb569);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb568), 0xf9);
        // F9 027B
        gbc.setState(0x2438, 0x1fa, 0x25a0, 0x2d55, 0x3782, 0xc3f1, 0x1, 0x1);
        gbc.writeMem(0x2438, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc3f1);
        EXPECT(gbc.pc(), 0x2439);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 027C
        gbc.setState(0x559c, 0xb9dd, 0xf060, 0x52fa, 0x440, 0xdb22, 0x0, 0x1);
        gbc.writeMem(0x559c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdb22);
        EXPECT(gbc.pc(), 0x559d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 027D
        gbc.setState(0xef4e, 0x3340, 0x4780, 0x1e2, 0x443a, 0x1616, 0x0, 0x1);
        gbc.writeMem(0xef4e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1616);
        EXPECT(gbc.pc(), 0xef4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4e), 0xf9);
        // F9 027E
        gbc.setState(0x155b, 0x9a14, 0xeaa0, 0x8982, 0xc823, 0x427e, 0x1, 0x1);
        gbc.writeMem(0x155b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x427e);
        EXPECT(gbc.pc(), 0x155c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 027F
        gbc.setState(0xb997, 0xa0e9, 0x5e80, 0x1a2f, 0xbd5c, 0xca35, 0x1, 0x1);
        gbc.writeMem(0xb997, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xca35);
        EXPECT(gbc.pc(), 0xb998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb997), 0xf9);
        // F9 0280
        gbc.setState(0xc25a, 0x44d3, 0x48c0, 0x8101, 0xe8df, 0x98a2, 0x0, 0x0);
        gbc.writeMem(0xc25a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x98a2);
        EXPECT(gbc.pc(), 0xc25b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25a), 0xf9);
        // F9 0281
        gbc.setState(0x8330, 0xba4e, 0x5e40, 0xbd3e, 0x447b, 0x2858, 0x0, 0x0);
        gbc.writeMem(0x8330, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2858);
        EXPECT(gbc.pc(), 0x8331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8330), 0xf9);
        // F9 0282
        gbc.setState(0x5262, 0x7fb4, 0x4e70, 0x8c9c, 0x6518, 0x6d86, 0x0, 0x0);
        gbc.writeMem(0x5262, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6d86);
        EXPECT(gbc.pc(), 0x5263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0283
        gbc.setState(0x2736, 0x19c2, 0x6d0, 0x2122, 0x6d29, 0x1ee5, 0x0, 0x1);
        gbc.writeMem(0x2736, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1ee5);
        EXPECT(gbc.pc(), 0x2737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0284
        gbc.setState(0xab0c, 0xa56a, 0x2a0, 0x77bf, 0xb7ad, 0x846, 0x0, 0x1);
        gbc.writeMem(0xab0c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x846);
        EXPECT(gbc.pc(), 0xab0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab0c), 0xf9);
        // F9 0285
        gbc.setState(0xd138, 0xdfe9, 0x74c0, 0x4b5f, 0x39db, 0x563b, 0x1, 0x0);
        gbc.writeMem(0xd138, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x563b);
        EXPECT(gbc.pc(), 0xd139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd138), 0xf9);
        // F9 0286
        gbc.setState(0x4532, 0xe61e, 0xff30, 0x2a8e, 0x7083, 0x6e15, 0x0, 0x0);
        gbc.writeMem(0x4532, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6e15);
        EXPECT(gbc.pc(), 0x4533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0287
        gbc.setState(0x4776, 0xecb6, 0xf480, 0xdf18, 0x8454, 0x2e71, 0x1, 0x1);
        gbc.writeMem(0x4776, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2e71);
        EXPECT(gbc.pc(), 0x4777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0288
        gbc.setState(0xd415, 0xfbb, 0xd970, 0xdfb4, 0x908b, 0x9d18, 0x0, 0x1);
        gbc.writeMem(0xd415, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9d18);
        EXPECT(gbc.pc(), 0xd416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd415), 0xf9);
        // F9 0289
        gbc.setState(0x5338, 0xabc9, 0xaa20, 0xabfd, 0x4584, 0xd89d, 0x0, 0x0);
        gbc.writeMem(0x5338, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd89d);
        EXPECT(gbc.pc(), 0x5339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 028A
        gbc.setState(0x832e, 0x88b4, 0xdcd0, 0x84a6, 0x9a1f, 0x2e78, 0x1, 0x0);
        gbc.writeMem(0x832e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2e78);
        EXPECT(gbc.pc(), 0x832f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x832e), 0xf9);
        // F9 028B
        gbc.setState(0x691f, 0xcf9e, 0x2090, 0xf9ef, 0x68fe, 0x1b9c, 0x1, 0x0);
        gbc.writeMem(0x691f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1b9c);
        EXPECT(gbc.pc(), 0x6920);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 028C
        gbc.setState(0x960a, 0xc581, 0x5d40, 0xf59f, 0xfa4c, 0x7d6f, 0x0, 0x0);
        gbc.writeMem(0x960a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7d6f);
        EXPECT(gbc.pc(), 0x960b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x960a), 0xf9);
        // F9 028D
        gbc.setState(0x29eb, 0x3ea0, 0x3d50, 0xa982, 0xe535, 0x6b2a, 0x1, 0x0);
        gbc.writeMem(0x29eb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6b2a);
        EXPECT(gbc.pc(), 0x29ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 028E
        gbc.setState(0x54aa, 0x7143, 0xa190, 0xc76c, 0x80ab, 0x3e21, 0x1, 0x0);
        gbc.writeMem(0x54aa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3e21);
        EXPECT(gbc.pc(), 0x54ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 028F
        gbc.setState(0x7308, 0xadd1, 0xf980, 0xdeb9, 0x57e0, 0xf59f, 0x1, 0x1);
        gbc.writeMem(0x7308, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf59f);
        EXPECT(gbc.pc(), 0x7309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0290
        gbc.setState(0x28e, 0x5afa, 0x75a0, 0xc857, 0x30ab, 0x9af2, 0x1, 0x0);
        gbc.writeMem(0x28e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9af2);
        EXPECT(gbc.pc(), 0x28f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0291
        gbc.setState(0x68b0, 0x57c5, 0x60d0, 0x8a9c, 0xd542, 0xd692, 0x0, 0x1);
        gbc.writeMem(0x68b0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd692);
        EXPECT(gbc.pc(), 0x68b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0292
        gbc.setState(0xe06d, 0xa0f1, 0x61f0, 0xed03, 0x1fe3, 0x859e, 0x0, 0x0);
        gbc.writeMem(0xe06d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x859e);
        EXPECT(gbc.pc(), 0xe06e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06d), 0xf9);
        // F9 0293
        gbc.setState(0x3c1e, 0x831f, 0x5970, 0x3a9f, 0x88cb, 0xf73e, 0x1, 0x0);
        gbc.writeMem(0x3c1e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf73e);
        EXPECT(gbc.pc(), 0x3c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0295
        gbc.setState(0x6001, 0xac63, 0x7d0, 0x2a5b, 0x8f4f, 0xf5b3, 0x0, 0x0);
        gbc.writeMem(0x6001, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf5b3);
        EXPECT(gbc.pc(), 0x6002);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0296
        gbc.setState(0x7708, 0x67c4, 0x2480, 0xa68c, 0x5847, 0x48e7, 0x1, 0x1);
        gbc.writeMem(0x7708, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x48e7);
        EXPECT(gbc.pc(), 0x7709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0297
        gbc.setState(0x6994, 0x26a0, 0x9c60, 0x712b, 0x2dff, 0xbe65, 0x0, 0x0);
        gbc.writeMem(0x6994, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbe65);
        EXPECT(gbc.pc(), 0x6995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0299
        gbc.setState(0x4893, 0x143, 0x880, 0x4c7b, 0x1419, 0xb18c, 0x1, 0x1);
        gbc.writeMem(0x4893, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb18c);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 029A
        gbc.setState(0x6b65, 0x9129, 0x2320, 0xe9ca, 0x9c1d, 0x2c7d, 0x0, 0x1);
        gbc.writeMem(0x6b65, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2c7d);
        EXPECT(gbc.pc(), 0x6b66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 029B
        gbc.setState(0x40cb, 0xa72c, 0x88c0, 0x7d7b, 0xccf4, 0xa298, 0x1, 0x0);
        gbc.writeMem(0x40cb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa298);
        EXPECT(gbc.pc(), 0x40cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 029C
        gbc.setState(0x5fe6, 0x8a8e, 0x7110, 0xc560, 0x2d63, 0xed43, 0x1, 0x1);
        gbc.writeMem(0x5fe6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xed43);
        EXPECT(gbc.pc(), 0x5fe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 029D
        gbc.setState(0xab6, 0xdeed, 0x7260, 0x4fbf, 0x5c24, 0xd709, 0x0, 0x1);
        gbc.writeMem(0xab6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd709);
        EXPECT(gbc.pc(), 0xab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 029E
        gbc.setState(0xbf5b, 0x8b30, 0xe400, 0x61fa, 0x6f94, 0x34dd, 0x1, 0x1);
        gbc.writeMem(0xbf5b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x34dd);
        EXPECT(gbc.pc(), 0xbf5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf5b), 0xf9);
        // F9 029F
        gbc.setState(0x4eb7, 0xa8be, 0x9950, 0xa51c, 0xb772, 0xc3bd, 0x0, 0x0);
        gbc.writeMem(0x4eb7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc3bd);
        EXPECT(gbc.pc(), 0x4eb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02A1
        gbc.setState(0x6677, 0x91c3, 0xa990, 0x952d, 0xd5cd, 0x946e, 0x0, 0x1);
        gbc.writeMem(0x6677, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x946e);
        EXPECT(gbc.pc(), 0x6678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02A2
        gbc.setState(0x6ea7, 0x4502, 0xc1b0, 0x5420, 0x1632, 0xee8d, 0x0, 0x0);
        gbc.writeMem(0x6ea7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xee8d);
        EXPECT(gbc.pc(), 0x6ea8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02A3
        gbc.setState(0x315b, 0x6e44, 0x9f30, 0xce7e, 0xb1d, 0x74fe, 0x0, 0x0);
        gbc.writeMem(0x315b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x74fe);
        EXPECT(gbc.pc(), 0x315c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02A4
        gbc.setState(0x537c, 0xfd85, 0x8320, 0xa14d, 0x9b94, 0xdbbb, 0x1, 0x0);
        gbc.writeMem(0x537c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xdbbb);
        EXPECT(gbc.pc(), 0x537d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02A5
        gbc.setState(0x301a, 0x9be1, 0xd8c0, 0x5f2e, 0xd28d, 0x74ba, 0x1, 0x0);
        gbc.writeMem(0x301a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x74ba);
        EXPECT(gbc.pc(), 0x301b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02A6
        gbc.setState(0x18e1, 0xea09, 0x53c0, 0x46a5, 0x5c0, 0x66e9, 0x0, 0x1);
        gbc.writeMem(0x18e1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x66e9);
        EXPECT(gbc.pc(), 0x18e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02A7
        gbc.setState(0x104c, 0x4759, 0xb000, 0xc828, 0xa645, 0xd6ac, 0x1, 0x0);
        gbc.writeMem(0x104c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd6ac);
        EXPECT(gbc.pc(), 0x104d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02A8
        gbc.setState(0xbad5, 0x2bcb, 0x9f80, 0x7c69, 0x356, 0xaf32, 0x0, 0x0);
        gbc.writeMem(0xbad5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xaf32);
        EXPECT(gbc.pc(), 0xbad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad5), 0xf9);
        // F9 02A9
        gbc.setState(0x4c23, 0x87b5, 0x100, 0xa04f, 0x1743, 0x3729, 0x1, 0x1);
        gbc.writeMem(0x4c23, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3729);
        EXPECT(gbc.pc(), 0x4c24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02AA
        gbc.setState(0x4470, 0x4539, 0xd3a0, 0x81ff, 0xda38, 0xad0c, 0x0, 0x1);
        gbc.writeMem(0x4470, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xad0c);
        EXPECT(gbc.pc(), 0x4471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02AB
        gbc.setState(0x44b3, 0x4a7e, 0x180, 0xb2a3, 0x6d04, 0x377e, 0x1, 0x0);
        gbc.writeMem(0x44b3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x377e);
        EXPECT(gbc.pc(), 0x44b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02AC
        gbc.setState(0xc176, 0xf9e, 0xea20, 0xb292, 0x7e4e, 0xd494, 0x0, 0x0);
        gbc.writeMem(0xc176, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd494);
        EXPECT(gbc.pc(), 0xc177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc176), 0xf9);
        // F9 02AD
        gbc.setState(0x231e, 0xaaea, 0xfbe0, 0xa5ef, 0x43e3, 0x22fb, 0x1, 0x0);
        gbc.writeMem(0x231e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x22fb);
        EXPECT(gbc.pc(), 0x231f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02AE
        gbc.setState(0xd977, 0x6ca4, 0x6280, 0x324f, 0x4137, 0xda6a, 0x1, 0x0);
        gbc.writeMem(0xd977, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xda6a);
        EXPECT(gbc.pc(), 0xd978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd977), 0xf9);
        // F9 02AF
        gbc.setState(0x5d7e, 0xc744, 0x93f0, 0xef5c, 0x9c2c, 0xf40b, 0x1, 0x0);
        gbc.writeMem(0x5d7e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf40b);
        EXPECT(gbc.pc(), 0x5d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02B0
        gbc.setState(0xc366, 0xbe85, 0xc30, 0x5f34, 0xa3f, 0x556f, 0x1, 0x1);
        gbc.writeMem(0xc366, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x556f);
        EXPECT(gbc.pc(), 0xc367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc366), 0xf9);
        // F9 02B1
        gbc.setState(0x2ca1, 0x6149, 0xf330, 0x76d5, 0xca28, 0x6ce5, 0x1, 0x1);
        gbc.writeMem(0x2ca1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6ce5);
        EXPECT(gbc.pc(), 0x2ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02B2
        gbc.setState(0xdb3a, 0xb6a2, 0x9770, 0xdf1, 0xa1f5, 0xe8b8, 0x1, 0x1);
        gbc.writeMem(0xdb3a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe8b8);
        EXPECT(gbc.pc(), 0xdb3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb3a), 0xf9);
        // F9 02B3
        gbc.setState(0x464d, 0x3a75, 0x5d70, 0x65fd, 0x70be, 0xb36e, 0x0, 0x0);
        gbc.writeMem(0x464d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xb36e);
        EXPECT(gbc.pc(), 0x464e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02B4
        gbc.setState(0x6b1a, 0xfd62, 0xb890, 0xd6c1, 0xc8da, 0xa6ed, 0x0, 0x0);
        gbc.writeMem(0x6b1a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa6ed);
        EXPECT(gbc.pc(), 0x6b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02B6
        gbc.setState(0xbe4c, 0x9a79, 0x70, 0xbb4b, 0x248, 0xcaf3, 0x0, 0x0);
        gbc.writeMem(0xbe4c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcaf3);
        EXPECT(gbc.pc(), 0xbe4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe4c), 0xf9);
        // F9 02B7
        gbc.setState(0x989c, 0x6095, 0x10, 0x4bc5, 0xa96e, 0xf2c, 0x1, 0x0);
        gbc.writeMem(0x989c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf2c);
        EXPECT(gbc.pc(), 0x989d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x989c), 0xf9);
        // F9 02B8
        gbc.setState(0x673b, 0xa8cf, 0xe7b0, 0x60de, 0x8a6d, 0x6947, 0x1, 0x1);
        gbc.writeMem(0x673b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6947);
        EXPECT(gbc.pc(), 0x673c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02B9
        gbc.setState(0x59a5, 0x9514, 0x9e00, 0x9bd4, 0x4ace, 0x81cd, 0x1, 0x0);
        gbc.writeMem(0x59a5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x81cd);
        EXPECT(gbc.pc(), 0x59a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02BA
        gbc.setState(0x8eda, 0x15b1, 0xd480, 0x881e, 0xf687, 0xeb5c, 0x0, 0x0);
        gbc.writeMem(0x8eda, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xeb5c);
        EXPECT(gbc.pc(), 0x8edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eda), 0xf9);
        // F9 02BB
        gbc.setState(0xa794, 0xd8ea, 0x6630, 0x5390, 0xa9c9, 0x5b60, 0x1, 0x1);
        gbc.writeMem(0xa794, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5b60);
        EXPECT(gbc.pc(), 0xa795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa794), 0xf9);
        // F9 02BC
        gbc.setState(0x227, 0xd7be, 0x77a0, 0xcea1, 0x9217, 0xf8a4, 0x1, 0x1);
        gbc.writeMem(0x227, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf8a4);
        EXPECT(gbc.pc(), 0x228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02BE
        gbc.setState(0x871, 0x3de5, 0x4900, 0x12ef, 0x3f33, 0xa5cf, 0x1, 0x1);
        gbc.writeMem(0x871, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa5cf);
        EXPECT(gbc.pc(), 0x872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02BF
        gbc.setState(0x1a24, 0xda74, 0xf2c0, 0x7d7c, 0xf6d9, 0xb954, 0x0, 0x0);
        gbc.writeMem(0x1a24, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb954);
        EXPECT(gbc.pc(), 0x1a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02C0
        gbc.setState(0x766a, 0x703c, 0xe290, 0xf25d, 0x5a64, 0x96f0, 0x1, 0x0);
        gbc.writeMem(0x766a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x96f0);
        EXPECT(gbc.pc(), 0x766b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02C1
        gbc.setState(0xeb8d, 0xdaa8, 0xe860, 0x3cd6, 0xa99e, 0xefc5, 0x1, 0x1);
        gbc.writeMem(0xeb8d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xefc5);
        EXPECT(gbc.pc(), 0xeb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8d), 0xf9);
        // F9 02C2
        gbc.setState(0x76a1, 0xeda2, 0xd370, 0xe218, 0x941d, 0x8a6d, 0x0, 0x0);
        gbc.writeMem(0x76a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8a6d);
        EXPECT(gbc.pc(), 0x76a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02C3
        gbc.setState(0xa641, 0xa98, 0xd320, 0x8960, 0xdcbc, 0x86a0, 0x1, 0x0);
        gbc.writeMem(0xa641, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x86a0);
        EXPECT(gbc.pc(), 0xa642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa641), 0xf9);
        // F9 02C4
        gbc.setState(0xc9fc, 0x2655, 0xb6d0, 0x5d70, 0x74c5, 0x6fb1, 0x0, 0x0);
        gbc.writeMem(0xc9fc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6fb1);
        EXPECT(gbc.pc(), 0xc9fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9fc), 0xf9);
        // F9 02C5
        gbc.setState(0x4a53, 0xce72, 0xdfe0, 0xf5c7, 0x21fa, 0xabbb, 0x0, 0x1);
        gbc.writeMem(0x4a53, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xabbb);
        EXPECT(gbc.pc(), 0x4a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02C6
        gbc.setState(0x498b, 0xff47, 0x1470, 0xf02a, 0xa7a1, 0x2c4c, 0x1, 0x0);
        gbc.writeMem(0x498b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x2c4c);
        EXPECT(gbc.pc(), 0x498c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02C7
        gbc.setState(0xb7a4, 0xe96d, 0x5f00, 0xf362, 0xa7fa, 0xc3c9, 0x0, 0x0);
        gbc.writeMem(0xb7a4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xc3c9);
        EXPECT(gbc.pc(), 0xb7a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7a4), 0xf9);
        // F9 02C8
        gbc.setState(0x190e, 0xbd5, 0x2740, 0xd130, 0xe5d2, 0xe3f7, 0x0, 0x1);
        gbc.writeMem(0x190e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe3f7);
        EXPECT(gbc.pc(), 0x190f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02C9
        gbc.setState(0xb23e, 0x3ce0, 0xf140, 0x7d68, 0xaefe, 0x9cb6, 0x1, 0x0);
        gbc.writeMem(0xb23e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9cb6);
        EXPECT(gbc.pc(), 0xb23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb23e), 0xf9);
        // F9 02CA
        gbc.setState(0x7b6, 0x9080, 0x32a0, 0x9e6c, 0x777, 0xa749, 0x0, 0x1);
        gbc.writeMem(0x7b6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa749);
        EXPECT(gbc.pc(), 0x7b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02CB
        gbc.setState(0xd3e6, 0xa565, 0xb20, 0x55b5, 0xc366, 0xb200, 0x0, 0x1);
        gbc.writeMem(0xd3e6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb200);
        EXPECT(gbc.pc(), 0xd3e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e6), 0xf9);
        // F9 02CC
        gbc.setState(0xe578, 0xaa90, 0x1070, 0xfe21, 0xa41, 0xcd47, 0x0, 0x0);
        gbc.writeMem(0xe578, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xcd47);
        EXPECT(gbc.pc(), 0xe579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe578), 0xf9);
        // F9 02CD
        gbc.setState(0x82ff, 0xb596, 0x6520, 0xebc2, 0x19db, 0xb21e, 0x1, 0x0);
        gbc.writeMem(0x82ff, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb21e);
        EXPECT(gbc.pc(), 0x8300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ff), 0xf9);
        // F9 02CE
        gbc.setState(0xe491, 0xa6ab, 0xac00, 0x781f, 0xf963, 0xad54, 0x1, 0x0);
        gbc.writeMem(0xe491, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xad54);
        EXPECT(gbc.pc(), 0xe492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe491), 0xf9);
        // F9 02CF
        gbc.setState(0x3ec, 0xc789, 0x6a70, 0x95c2, 0x837, 0xb284, 0x0, 0x0);
        gbc.writeMem(0x3ec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb284);
        EXPECT(gbc.pc(), 0x3ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02D0
        gbc.setState(0x520c, 0x9a91, 0x780, 0x7c3b, 0x1420, 0x9f75, 0x0, 0x1);
        gbc.writeMem(0x520c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9f75);
        EXPECT(gbc.pc(), 0x520d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02D1
        gbc.setState(0xabaa, 0x15f6, 0x7b80, 0xcc5d, 0x2173, 0xe136, 0x1, 0x1);
        gbc.writeMem(0xabaa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe136);
        EXPECT(gbc.pc(), 0xabab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabaa), 0xf9);
        // F9 02D2
        gbc.setState(0xa1f, 0x8ada, 0x6d10, 0xa1b7, 0xc5e1, 0xf7f, 0x1, 0x1);
        gbc.writeMem(0xa1f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf7f);
        EXPECT(gbc.pc(), 0xa20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02D3
        gbc.setState(0x5184, 0x757b, 0xbfe0, 0x8db7, 0xa66f, 0xe160, 0x1, 0x1);
        gbc.writeMem(0x5184, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe160);
        EXPECT(gbc.pc(), 0x5185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02D4
        gbc.setState(0x4b5c, 0x9da7, 0x6da0, 0x6d6, 0xe094, 0x348f, 0x0, 0x0);
        gbc.writeMem(0x4b5c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x348f);
        EXPECT(gbc.pc(), 0x4b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02D5
        gbc.setState(0x3684, 0xcd86, 0x3410, 0xc61, 0xc00, 0x4fbd, 0x1, 0x1);
        gbc.writeMem(0x3684, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4fbd);
        EXPECT(gbc.pc(), 0x3685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02D7
        gbc.setState(0xca28, 0x38c3, 0xfec0, 0xfa51, 0xb2c7, 0x5e7e, 0x1, 0x1);
        gbc.writeMem(0xca28, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5e7e);
        EXPECT(gbc.pc(), 0xca29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca28), 0xf9);
        // F9 02D8
        gbc.setState(0xe98b, 0x19b9, 0x3e50, 0x3265, 0x5e69, 0x75a6, 0x1, 0x0);
        gbc.writeMem(0xe98b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x75a6);
        EXPECT(gbc.pc(), 0xe98c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98b), 0xf9);
        // F9 02D9
        gbc.setState(0x61a8, 0xe747, 0xbb40, 0xd623, 0x11b8, 0x2735, 0x0, 0x1);
        gbc.writeMem(0x61a8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2735);
        EXPECT(gbc.pc(), 0x61a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02DA
        gbc.setState(0xbb79, 0xa244, 0xb9f0, 0xd61c, 0x22dc, 0xb1ea, 0x0, 0x0);
        gbc.writeMem(0xbb79, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb1ea);
        EXPECT(gbc.pc(), 0xbb7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb79), 0xf9);
        // F9 02DB
        gbc.setState(0x11b5, 0xec5e, 0xe380, 0xd7ee, 0x948b, 0xe8e2, 0x0, 0x0);
        gbc.writeMem(0x11b5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe8e2);
        EXPECT(gbc.pc(), 0x11b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02DC
        gbc.setState(0x82da, 0x1e59, 0x5f0, 0x224d, 0xae82, 0x8c4a, 0x1, 0x1);
        gbc.writeMem(0x82da, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8c4a);
        EXPECT(gbc.pc(), 0x82db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82da), 0xf9);
        // F9 02DE
        gbc.setState(0x9b16, 0x1802, 0x28a0, 0x40f4, 0x3e1, 0x5178, 0x1, 0x0);
        gbc.writeMem(0x9b16, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5178);
        EXPECT(gbc.pc(), 0x9b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b16), 0xf9);
        // F9 02DF
        gbc.setState(0xeca1, 0x4004, 0x11d0, 0xa91f, 0x6bd7, 0x7bab, 0x0, 0x1);
        gbc.writeMem(0xeca1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7bab);
        EXPECT(gbc.pc(), 0xeca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca1), 0xf9);
        // F9 02E0
        gbc.setState(0xc17d, 0x59e0, 0x6650, 0x18c8, 0x6dc, 0x8946, 0x1, 0x0);
        gbc.writeMem(0xc17d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8946);
        EXPECT(gbc.pc(), 0xc17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc17d), 0xf9);
        // F9 02E1
        gbc.setState(0x180, 0x1d4, 0x3ec0, 0x86a4, 0x4d70, 0xd03d, 0x1, 0x0);
        gbc.writeMem(0x180, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd03d);
        EXPECT(gbc.pc(), 0x181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02E2
        gbc.setState(0x5ba0, 0xdf3a, 0x6fe0, 0xd2, 0xb6e6, 0xdc1e, 0x1, 0x0);
        gbc.writeMem(0x5ba0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xdc1e);
        EXPECT(gbc.pc(), 0x5ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02E3
        gbc.setState(0xc769, 0x998f, 0xad30, 0x35a5, 0x4ebb, 0x9b0b, 0x1, 0x0);
        gbc.writeMem(0xc769, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9b0b);
        EXPECT(gbc.pc(), 0xc76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc769), 0xf9);
        // F9 02E4
        gbc.setState(0x3264, 0x4f1c, 0xbd20, 0x2bbe, 0xd7a, 0x29f6, 0x0, 0x1);
        gbc.writeMem(0x3264, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x29f6);
        EXPECT(gbc.pc(), 0x3265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02E5
        gbc.setState(0x44f9, 0xb6f4, 0x9480, 0xfd1e, 0x13eb, 0x7dd2, 0x0, 0x1);
        gbc.writeMem(0x44f9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7dd2);
        EXPECT(gbc.pc(), 0x44fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02E7
        gbc.setState(0xa754, 0xeddc, 0x7600, 0x3d80, 0x1569, 0xcdc7, 0x1, 0x0);
        gbc.writeMem(0xa754, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcdc7);
        EXPECT(gbc.pc(), 0xa755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa754), 0xf9);
        // F9 02E8
        gbc.setState(0xcc6c, 0xe39b, 0xab10, 0xf94c, 0xb636, 0x9062, 0x0, 0x1);
        gbc.writeMem(0xcc6c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9062);
        EXPECT(gbc.pc(), 0xcc6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6c), 0xf9);
        // F9 02E9
        gbc.setState(0x2507, 0x86ca, 0x5e80, 0xf23b, 0xd603, 0xc8b4, 0x0, 0x1);
        gbc.writeMem(0x2507, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc8b4);
        EXPECT(gbc.pc(), 0x2508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02EA
        gbc.setState(0x5c62, 0xa223, 0x4a90, 0xf08d, 0x62eb, 0x52b4, 0x1, 0x0);
        gbc.writeMem(0x5c62, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x52b4);
        EXPECT(gbc.pc(), 0x5c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02EB
        gbc.setState(0xeec7, 0xe79f, 0xd5f0, 0xbe98, 0x6860, 0x2a61, 0x1, 0x0);
        gbc.writeMem(0xeec7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2a61);
        EXPECT(gbc.pc(), 0xeec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeec7), 0xf9);
        // F9 02EC
        gbc.setState(0x1e70, 0x4f3d, 0x5820, 0x52, 0x5590, 0x9d88, 0x1, 0x0);
        gbc.writeMem(0x1e70, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9d88);
        EXPECT(gbc.pc(), 0x1e71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02ED
        gbc.setState(0xa5fa, 0x8222, 0x4f50, 0xebe6, 0xb382, 0xac8b, 0x0, 0x1);
        gbc.writeMem(0xa5fa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xac8b);
        EXPECT(gbc.pc(), 0xa5fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5fa), 0xf9);
        // F9 02EE
        gbc.setState(0x940, 0x6cf7, 0x4f30, 0x8faf, 0x8f61, 0x9210, 0x1, 0x1);
        gbc.writeMem(0x940, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9210);
        EXPECT(gbc.pc(), 0x941);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02EF
        gbc.setState(0x2947, 0x3a27, 0xcf60, 0x57a4, 0xc1c, 0xdde4, 0x1, 0x1);
        gbc.writeMem(0x2947, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xdde4);
        EXPECT(gbc.pc(), 0x2948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02F0
        gbc.setState(0xb88e, 0xe43, 0x9e30, 0xf496, 0xd4d9, 0xfcd7, 0x1, 0x0);
        gbc.writeMem(0xb88e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfcd7);
        EXPECT(gbc.pc(), 0xb88f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb88e), 0xf9);
        // F9 02F1
        gbc.setState(0xa3a9, 0x81b5, 0x8a90, 0x45a8, 0x9b06, 0x4579, 0x1, 0x0);
        gbc.writeMem(0xa3a9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4579);
        EXPECT(gbc.pc(), 0xa3aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3a9), 0xf9);
        // F9 02F2
        gbc.setState(0xe6ab, 0x9a2e, 0x90e0, 0x575c, 0xa250, 0x442c, 0x1, 0x0);
        gbc.writeMem(0xe6ab, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0xe6ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6ab), 0xf9);
        // F9 02F3
        gbc.setState(0xbf82, 0xc7bd, 0xd9e0, 0xa1bb, 0xcf39, 0xd293, 0x1, 0x1);
        gbc.writeMem(0xbf82, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd293);
        EXPECT(gbc.pc(), 0xbf83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf82), 0xf9);
        // F9 02F4
        gbc.setState(0xb410, 0x6f0e, 0xdb90, 0xbad1, 0x1e2b, 0xb931, 0x1, 0x1);
        gbc.writeMem(0xb410, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb931);
        EXPECT(gbc.pc(), 0xb411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb410), 0xf9);
        // F9 02F5
        gbc.setState(0x868e, 0x3baa, 0x1ea0, 0x1fd, 0x78da, 0xad36, 0x1, 0x1);
        gbc.writeMem(0x868e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xad36);
        EXPECT(gbc.pc(), 0x868f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868e), 0xf9);
        // F9 02F6
        gbc.setState(0x8711, 0x4ddc, 0xaa80, 0xd33f, 0xb144, 0x774c, 0x0, 0x1);
        gbc.writeMem(0x8711, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x774c);
        EXPECT(gbc.pc(), 0x8712);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8711), 0xf9);
        // F9 02F7
        gbc.setState(0x35a4, 0x13d5, 0xd3b0, 0x37b8, 0xc7ec, 0x3093, 0x1, 0x0);
        gbc.writeMem(0x35a4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3093);
        EXPECT(gbc.pc(), 0x35a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 02F8
        gbc.setState(0x2b2f, 0x8f43, 0x20d0, 0xb108, 0x92e8, 0x230, 0x1, 0x0);
        gbc.writeMem(0x2b2f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x230);
        EXPECT(gbc.pc(), 0x2b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 02F9
        gbc.setState(0x65cc, 0x19c2, 0x71e0, 0x2706, 0x6a44, 0xdfef, 0x1, 0x1);
        gbc.writeMem(0x65cc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdfef);
        EXPECT(gbc.pc(), 0x65cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02FA
        gbc.setState(0x5f6b, 0xf818, 0xc440, 0xe315, 0x431, 0x75c, 0x1, 0x0);
        gbc.writeMem(0x5f6b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x75c);
        EXPECT(gbc.pc(), 0x5f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02FB
        gbc.setState(0x91f4, 0x4950, 0x1220, 0xa69c, 0x334e, 0xf824, 0x1, 0x1);
        gbc.writeMem(0x91f4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf824);
        EXPECT(gbc.pc(), 0x91f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f4), 0xf9);
        // F9 02FC
        gbc.setState(0xcc4c, 0xc3ba, 0xfbb0, 0xc71f, 0xabea, 0x9c72, 0x1, 0x0);
        gbc.writeMem(0xcc4c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x9c72);
        EXPECT(gbc.pc(), 0xcc4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4c), 0xf9);
        // F9 02FD
        gbc.setState(0x477, 0xe630, 0xcbc0, 0x1f8, 0x45ea, 0xad45, 0x1, 0x1);
        gbc.writeMem(0x477, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xad45);
        EXPECT(gbc.pc(), 0x478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 02FE
        gbc.setState(0x45dd, 0x3415, 0x8ee0, 0x3e4e, 0x783d, 0x7e3f, 0x0, 0x1);
        gbc.writeMem(0x45dd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x7e3f);
        EXPECT(gbc.pc(), 0x45de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 02FF
        gbc.setState(0x60df, 0x3ee, 0xb7b0, 0xadf1, 0x625b, 0x9565, 0x1, 0x0);
        gbc.writeMem(0x60df, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9565);
        EXPECT(gbc.pc(), 0x60e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0301
        gbc.setState(0xed7e, 0x3117, 0x5a20, 0xc5d1, 0x1046, 0xe127, 0x1, 0x0);
        gbc.writeMem(0xed7e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe127);
        EXPECT(gbc.pc(), 0xed7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed7e), 0xf9);
        // F9 0302
        gbc.setState(0x79aa, 0x6e9a, 0x7e50, 0x4e51, 0xf7da, 0xbc93, 0x1, 0x0);
        gbc.writeMem(0x79aa, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbc93);
        EXPECT(gbc.pc(), 0x79ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0303
        gbc.setState(0x88a, 0x750f, 0x9b0, 0x753f, 0x617b, 0xca72, 0x0, 0x1);
        gbc.writeMem(0x88a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xca72);
        EXPECT(gbc.pc(), 0x88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0304
        gbc.setState(0x920d, 0x7251, 0xd230, 0x65c1, 0xee0f, 0x42cf, 0x0, 0x0);
        gbc.writeMem(0x920d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x42cf);
        EXPECT(gbc.pc(), 0x920e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x920d), 0xf9);
        // F9 0305
        gbc.setState(0x3f11, 0xcfa2, 0xd80, 0x8ccd, 0x5225, 0x9b6a, 0x0, 0x0);
        gbc.writeMem(0x3f11, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9b6a);
        EXPECT(gbc.pc(), 0x3f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0308
        gbc.setState(0xc3, 0x538c, 0x4500, 0xf71d, 0x2aca, 0xfd28, 0x1, 0x1);
        gbc.writeMem(0xc3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xfd28);
        EXPECT(gbc.pc(), 0xc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0309
        gbc.setState(0x3fb5, 0x7793, 0xf770, 0x7bf7, 0x7617, 0xd278, 0x1, 0x0);
        gbc.writeMem(0x3fb5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd278);
        EXPECT(gbc.pc(), 0x3fb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 030A
        gbc.setState(0x71cf, 0x5f5f, 0x6e50, 0x92ec, 0xd568, 0x5780, 0x1, 0x1);
        gbc.writeMem(0x71cf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5780);
        EXPECT(gbc.pc(), 0x71d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 030B
        gbc.setState(0x1a8d, 0x15d4, 0x71f0, 0x9dd5, 0x32df, 0x2cea, 0x0, 0x1);
        gbc.writeMem(0x1a8d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2cea);
        EXPECT(gbc.pc(), 0x1a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 030C
        gbc.setState(0xe18f, 0x245f, 0x590, 0x3ece, 0x6ccb, 0x7efe, 0x1, 0x1);
        gbc.writeMem(0xe18f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7efe);
        EXPECT(gbc.pc(), 0xe190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe18f), 0xf9);
        // F9 030D
        gbc.setState(0xe30b, 0x460, 0x6ed0, 0xd273, 0x6c22, 0x53a2, 0x0, 0x1);
        gbc.writeMem(0xe30b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x53a2);
        EXPECT(gbc.pc(), 0xe30c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe30b), 0xf9);
        // F9 030E
        gbc.setState(0x4b36, 0xea1a, 0x39e0, 0x5f8c, 0x856e, 0xc6a7, 0x1, 0x0);
        gbc.writeMem(0x4b36, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc6a7);
        EXPECT(gbc.pc(), 0x4b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 030F
        gbc.setState(0x1ea7, 0xe51d, 0x5640, 0x2369, 0xd82b, 0x8052, 0x1, 0x0);
        gbc.writeMem(0x1ea7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8052);
        EXPECT(gbc.pc(), 0x1ea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0310
        gbc.setState(0x269f, 0x5297, 0xf0e0, 0xa64a, 0xe473, 0x9ebd, 0x1, 0x1);
        gbc.writeMem(0x269f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9ebd);
        EXPECT(gbc.pc(), 0x26a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0311
        gbc.setState(0x42b7, 0x39a8, 0xb8f0, 0x3e9e, 0xbd95, 0xa0b, 0x1, 0x1);
        gbc.writeMem(0x42b7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa0b);
        EXPECT(gbc.pc(), 0x42b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0312
        gbc.setState(0x19dd, 0x64e6, 0x6c0, 0x6a97, 0x4b33, 0x75f0, 0x1, 0x1);
        gbc.writeMem(0x19dd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x75f0);
        EXPECT(gbc.pc(), 0x19de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0313
        gbc.setState(0x754a, 0x19e0, 0x1610, 0xf3b8, 0xabdf, 0xbb86, 0x1, 0x1);
        gbc.writeMem(0x754a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbb86);
        EXPECT(gbc.pc(), 0x754b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0314
        gbc.setState(0x47a4, 0xd28f, 0xe500, 0x15, 0xeb32, 0xe04, 0x0, 0x1);
        gbc.writeMem(0x47a4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe04);
        EXPECT(gbc.pc(), 0x47a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0315
        gbc.setState(0x6eda, 0x3622, 0x8e90, 0xdc64, 0x669d, 0x26f1, 0x0, 0x1);
        gbc.writeMem(0x6eda, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x26f1);
        EXPECT(gbc.pc(), 0x6edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0316
        gbc.setState(0xa8ec, 0x59c6, 0x290, 0x8912, 0x7ce6, 0xce67, 0x0, 0x0);
        gbc.writeMem(0xa8ec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xce67);
        EXPECT(gbc.pc(), 0xa8ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ec), 0xf9);
        // F9 0317
        gbc.setState(0xa886, 0xc2c7, 0xeb30, 0x20ad, 0x2e80, 0x19a3, 0x0, 0x1);
        gbc.writeMem(0xa886, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x19a3);
        EXPECT(gbc.pc(), 0xa887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa886), 0xf9);
        // F9 0318
        gbc.setState(0x80ac, 0x2d28, 0x7b60, 0x57ad, 0xb1ae, 0x5184, 0x1, 0x0);
        gbc.writeMem(0x80ac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5184);
        EXPECT(gbc.pc(), 0x80ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ac), 0xf9);
        // F9 0319
        gbc.setState(0xd727, 0x9262, 0x9aa0, 0xfd8e, 0xc4f3, 0x14d6, 0x1, 0x0);
        gbc.writeMem(0xd727, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x14d6);
        EXPECT(gbc.pc(), 0xd728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd727), 0xf9);
        // F9 031A
        gbc.setState(0x1d58, 0xcc0b, 0xc6d0, 0x2675, 0x4eb3, 0xab5e, 0x1, 0x0);
        gbc.writeMem(0x1d58, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xab5e);
        EXPECT(gbc.pc(), 0x1d59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 031B
        gbc.setState(0x1395, 0x5c10, 0xf310, 0x82f0, 0x4062, 0xde74, 0x0, 0x0);
        gbc.writeMem(0x1395, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xde74);
        EXPECT(gbc.pc(), 0x1396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 031C
        gbc.setState(0x521b, 0x2449, 0xb3d0, 0x744b, 0xfc43, 0x51fb, 0x0, 0x1);
        gbc.writeMem(0x521b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x51fb);
        EXPECT(gbc.pc(), 0x521c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 031D
        gbc.setState(0x5bb2, 0xceb4, 0xf150, 0x4aea, 0xa083, 0xfa5a, 0x0, 0x0);
        gbc.writeMem(0x5bb2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfa5a);
        EXPECT(gbc.pc(), 0x5bb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 031E
        gbc.setState(0x3c0b, 0x6cd, 0xbb60, 0x3625, 0xdc2e, 0x6e57, 0x1, 0x0);
        gbc.writeMem(0x3c0b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6e57);
        EXPECT(gbc.pc(), 0x3c0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 031F
        gbc.setState(0xbfe3, 0xefa8, 0xdc70, 0x1c9e, 0x38d, 0xe44, 0x1, 0x0);
        gbc.writeMem(0xbfe3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe44);
        EXPECT(gbc.pc(), 0xbfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe3), 0xf9);
        // F9 0320
        gbc.setState(0x61d5, 0xf824, 0x4240, 0x41f2, 0x8aa5, 0x8f54, 0x0, 0x0);
        gbc.writeMem(0x61d5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8f54);
        EXPECT(gbc.pc(), 0x61d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0321
        gbc.setState(0x12f7, 0xc693, 0x68f0, 0xc881, 0x3d85, 0x75e7, 0x1, 0x1);
        gbc.writeMem(0x12f7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x75e7);
        EXPECT(gbc.pc(), 0x12f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0322
        gbc.setState(0x4799, 0x4165, 0xf410, 0xaaeb, 0xd0d6, 0xdc52, 0x1, 0x0);
        gbc.writeMem(0x4799, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdc52);
        EXPECT(gbc.pc(), 0x479a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0323
        gbc.setState(0x93d8, 0x9b3b, 0xdc10, 0x1151, 0x1065, 0x3079, 0x1, 0x1);
        gbc.writeMem(0x93d8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3079);
        EXPECT(gbc.pc(), 0x93d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93d8), 0xf9);
        // F9 0324
        gbc.setState(0x7980, 0x5dc3, 0xa9b0, 0x73f8, 0xe70f, 0x1b8c, 0x0, 0x1);
        gbc.writeMem(0x7980, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1b8c);
        EXPECT(gbc.pc(), 0x7981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0326
        gbc.setState(0x7cf1, 0x3667, 0x5c20, 0x460, 0x2056, 0x13d3, 0x0, 0x1);
        gbc.writeMem(0x7cf1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x13d3);
        EXPECT(gbc.pc(), 0x7cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0327
        gbc.setState(0x6ad4, 0xf4bf, 0x7ad0, 0xb9f8, 0xb234, 0xe742, 0x1, 0x0);
        gbc.writeMem(0x6ad4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe742);
        EXPECT(gbc.pc(), 0x6ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0328
        gbc.setState(0x329b, 0xd902, 0x7b70, 0x53cd, 0xefe1, 0x748c, 0x0, 0x0);
        gbc.writeMem(0x329b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x748c);
        EXPECT(gbc.pc(), 0x329c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0329
        gbc.setState(0xb715, 0xc436, 0xc5e0, 0xdc1, 0x4bd2, 0xe176, 0x0, 0x1);
        gbc.writeMem(0xb715, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe176);
        EXPECT(gbc.pc(), 0xb716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb715), 0xf9);
        // F9 032B
        gbc.setState(0x6933, 0x9d80, 0x31c0, 0xc440, 0xef, 0x4763, 0x1, 0x1);
        gbc.writeMem(0x6933, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4763);
        EXPECT(gbc.pc(), 0x6934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 032C
        gbc.setState(0x14c7, 0xdfe7, 0x4c50, 0xef54, 0xac6c, 0x7302, 0x1, 0x1);
        gbc.writeMem(0x14c7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7302);
        EXPECT(gbc.pc(), 0x14c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 032D
        gbc.setState(0x7d60, 0x87f1, 0x8c70, 0x34ce, 0x27e5, 0xfeb4, 0x0, 0x0);
        gbc.writeMem(0x7d60, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfeb4);
        EXPECT(gbc.pc(), 0x7d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 032E
        gbc.setState(0xd06a, 0x9d9d, 0x6ec0, 0x4cdd, 0x590, 0x83da, 0x0, 0x0);
        gbc.writeMem(0xd06a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x83da);
        EXPECT(gbc.pc(), 0xd06b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd06a), 0xf9);
        // F9 032F
        gbc.setState(0xe382, 0xd552, 0xc9f0, 0xfbbf, 0x498e, 0xfca0, 0x0, 0x1);
        gbc.writeMem(0xe382, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfca0);
        EXPECT(gbc.pc(), 0xe383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe382), 0xf9);
        // F9 0330
        gbc.setState(0x99d5, 0x90d3, 0x34b0, 0x3c06, 0x2014, 0x8760, 0x1, 0x1);
        gbc.writeMem(0x99d5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8760);
        EXPECT(gbc.pc(), 0x99d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99d5), 0xf9);
        // F9 0331
        gbc.setState(0xe2d4, 0x71b5, 0x7fa0, 0x8bf1, 0x228c, 0x28e, 0x0, 0x0);
        gbc.writeMem(0xe2d4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x28e);
        EXPECT(gbc.pc(), 0xe2d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d4), 0xf9);
        // F9 0332
        gbc.setState(0x4860, 0xa400, 0xfc80, 0x577a, 0x627c, 0x26ac, 0x0, 0x1);
        gbc.writeMem(0x4860, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x26ac);
        EXPECT(gbc.pc(), 0x4861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0333
        gbc.setState(0x99b9, 0xd442, 0xc7d0, 0x8f0c, 0x66c0, 0xdb30, 0x1, 0x1);
        gbc.writeMem(0x99b9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdb30);
        EXPECT(gbc.pc(), 0x99ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b9), 0xf9);
        // F9 0334
        gbc.setState(0x69fc, 0xa740, 0xf400, 0xa724, 0x2fe1, 0x74dd, 0x0, 0x1);
        gbc.writeMem(0x69fc, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x74dd);
        EXPECT(gbc.pc(), 0x69fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0335
        gbc.setState(0x9fb1, 0xb1a6, 0xed90, 0x37bf, 0x5c83, 0x34bd, 0x1, 0x0);
        gbc.writeMem(0x9fb1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x34bd);
        EXPECT(gbc.pc(), 0x9fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb1), 0xf9);
        // F9 0336
        gbc.setState(0xe680, 0x46b9, 0xbb0, 0xa2c3, 0x3793, 0x25ab, 0x0, 0x0);
        gbc.writeMem(0xe680, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x25ab);
        EXPECT(gbc.pc(), 0xe681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe680), 0xf9);
        // F9 0337
        gbc.setState(0x2146, 0xc273, 0x8550, 0x1ffc, 0xcf51, 0xfb6d, 0x0, 0x1);
        gbc.writeMem(0x2146, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xfb6d);
        EXPECT(gbc.pc(), 0x2147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0338
        gbc.setState(0x6391, 0xaf86, 0x4870, 0xf9fa, 0xae38, 0x5900, 0x0, 0x1);
        gbc.writeMem(0x6391, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5900);
        EXPECT(gbc.pc(), 0x6392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0339
        gbc.setState(0xd65f, 0x3455, 0x5b60, 0xeb07, 0xf4a6, 0xd1ff, 0x1, 0x1);
        gbc.writeMem(0xd65f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xd1ff);
        EXPECT(gbc.pc(), 0xd660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd65f), 0xf9);
        // F9 033A
        gbc.setState(0xdfa4, 0xcf2c, 0x6bf0, 0xd72c, 0x9ed6, 0x7f5, 0x1, 0x0);
        gbc.writeMem(0xdfa4, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7f5);
        EXPECT(gbc.pc(), 0xdfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa4), 0xf9);
        // F9 033B
        gbc.setState(0xef25, 0x258a, 0x2ec0, 0xa811, 0x2b7b, 0x5e11, 0x0, 0x1);
        gbc.writeMem(0xef25, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5e11);
        EXPECT(gbc.pc(), 0xef26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef25), 0xf9);
        // F9 033C
        gbc.setState(0x9c43, 0xdad2, 0x8590, 0x645, 0xc2c4, 0xf859, 0x1, 0x1);
        gbc.writeMem(0x9c43, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf859);
        EXPECT(gbc.pc(), 0x9c44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c43), 0xf9);
        // F9 033D
        gbc.setState(0x6258, 0x7488, 0x2680, 0xef4b, 0x66f4, 0x237a, 0x1, 0x1);
        gbc.writeMem(0x6258, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x237a);
        EXPECT(gbc.pc(), 0x6259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 033E
        gbc.setState(0xa248, 0x43fb, 0xe610, 0x3594, 0x4b15, 0xd707, 0x0, 0x1);
        gbc.writeMem(0xa248, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd707);
        EXPECT(gbc.pc(), 0xa249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa248), 0xf9);
        // F9 033F
        gbc.setState(0x3285, 0x2877, 0xe6e0, 0x4e5c, 0x7dc2, 0x8da3, 0x0, 0x0);
        gbc.writeMem(0x3285, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8da3);
        EXPECT(gbc.pc(), 0x3286);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0340
        gbc.setState(0xe5cd, 0x2aa5, 0x5e90, 0x6b8, 0x504b, 0xc72, 0x1, 0x1);
        gbc.writeMem(0xe5cd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc72);
        EXPECT(gbc.pc(), 0xe5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5cd), 0xf9);
        // F9 0341
        gbc.setState(0xed4f, 0xec51, 0xffc0, 0xd50c, 0x27d2, 0xc4ff, 0x0, 0x1);
        gbc.writeMem(0xed4f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc4ff);
        EXPECT(gbc.pc(), 0xed50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed4f), 0xf9);
        // F9 0342
        gbc.setState(0x5d29, 0xe8d3, 0xc040, 0x735c, 0xa3f6, 0xcb29, 0x0, 0x1);
        gbc.writeMem(0x5d29, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcb29);
        EXPECT(gbc.pc(), 0x5d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0343
        gbc.setState(0x104f, 0xc6c9, 0x5890, 0x9fb6, 0x889a, 0x1a84, 0x1, 0x1);
        gbc.writeMem(0x104f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1a84);
        EXPECT(gbc.pc(), 0x1050);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0344
        gbc.setState(0x1734, 0x2cc3, 0x5260, 0x40, 0xc8dd, 0xfb8b, 0x1, 0x0);
        gbc.writeMem(0x1734, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xfb8b);
        EXPECT(gbc.pc(), 0x1735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0345
        gbc.setState(0x4b69, 0xabba, 0x4420, 0x76c8, 0x4cc4, 0x12c0, 0x0, 0x0);
        gbc.writeMem(0x4b69, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x12c0);
        EXPECT(gbc.pc(), 0x4b6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0346
        gbc.setState(0x67d0, 0xe931, 0x57e0, 0xbb3a, 0xd000, 0x71c3, 0x1, 0x1);
        gbc.writeMem(0x67d0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x71c3);
        EXPECT(gbc.pc(), 0x67d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0347
        gbc.setState(0xa199, 0x26a2, 0xadf0, 0x583a, 0xebe2, 0xed26, 0x1, 0x0);
        gbc.writeMem(0xa199, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xed26);
        EXPECT(gbc.pc(), 0xa19a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa199), 0xf9);
        // F9 0348
        gbc.setState(0x4c81, 0xa7fc, 0x95f0, 0x2a1b, 0x52f5, 0x15a6, 0x0, 0x1);
        gbc.writeMem(0x4c81, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x15a6);
        EXPECT(gbc.pc(), 0x4c82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0349
        gbc.setState(0xa782, 0x22f5, 0x6bc0, 0xed9a, 0x4c44, 0x1a64, 0x1, 0x0);
        gbc.writeMem(0xa782, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1a64);
        EXPECT(gbc.pc(), 0xa783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa782), 0xf9);
        // F9 034A
        gbc.setState(0x5685, 0xdc1f, 0x2060, 0x3e01, 0x94ae, 0x6194, 0x1, 0x1);
        gbc.writeMem(0x5685, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6194);
        EXPECT(gbc.pc(), 0x5686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 034B
        gbc.setState(0x27a1, 0xaad8, 0x14e0, 0xd139, 0xd134, 0xe5bb, 0x0, 0x0);
        gbc.writeMem(0x27a1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe5bb);
        EXPECT(gbc.pc(), 0x27a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 034C
        gbc.setState(0x1637, 0xa5e7, 0x6840, 0xa96, 0x436e, 0xe5a8, 0x0, 0x1);
        gbc.writeMem(0x1637, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe5a8);
        EXPECT(gbc.pc(), 0x1638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 034D
        gbc.setState(0x8b3f, 0x126a, 0x6fd0, 0x67d0, 0x65c4, 0x21dd, 0x0, 0x0);
        gbc.writeMem(0x8b3f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x21dd);
        EXPECT(gbc.pc(), 0x8b40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3f), 0xf9);
        // F9 034E
        gbc.setState(0x7550, 0x418c, 0x2ba0, 0xc63c, 0xacad, 0x1c18, 0x0, 0x0);
        gbc.writeMem(0x7550, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1c18);
        EXPECT(gbc.pc(), 0x7551);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 034F
        gbc.setState(0xb167, 0x8cdd, 0xc9d0, 0x4e42, 0x3f12, 0x4cc, 0x0, 0x0);
        gbc.writeMem(0xb167, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4cc);
        EXPECT(gbc.pc(), 0xb168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb167), 0xf9);
        // F9 0350
        gbc.setState(0x3ace, 0x106c, 0x1050, 0x14bd, 0x3dbd, 0xf183, 0x1, 0x0);
        gbc.writeMem(0x3ace, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf183);
        EXPECT(gbc.pc(), 0x3acf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0351
        gbc.setState(0xeb7b, 0x8b71, 0xf190, 0xa37d, 0x5be9, 0xd3fe, 0x1, 0x1);
        gbc.writeMem(0xeb7b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd3fe);
        EXPECT(gbc.pc(), 0xeb7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb7b), 0xf9);
        // F9 0352
        gbc.setState(0x400b, 0x82d4, 0xbd80, 0x564, 0x2016, 0x693d, 0x1, 0x1);
        gbc.writeMem(0x400b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x693d);
        EXPECT(gbc.pc(), 0x400c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0353
        gbc.setState(0xc72c, 0x9883, 0x3710, 0xff08, 0xa600, 0xb1c9, 0x0, 0x0);
        gbc.writeMem(0xc72c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb1c9);
        EXPECT(gbc.pc(), 0xc72d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72c), 0xf9);
        // F9 0354
        gbc.setState(0x93cd, 0x3da3, 0x3070, 0x5bd8, 0x11d7, 0x907, 0x0, 0x0);
        gbc.writeMem(0x93cd, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x907);
        EXPECT(gbc.pc(), 0x93ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93cd), 0xf9);
        // F9 0355
        gbc.setState(0x4883, 0x9086, 0x20e0, 0xb2c6, 0x842b, 0x7da7, 0x0, 0x0);
        gbc.writeMem(0x4883, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7da7);
        EXPECT(gbc.pc(), 0x4884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0356
        gbc.setState(0x8597, 0xa3a0, 0x5f80, 0x1bc7, 0x25b7, 0x5c10, 0x0, 0x1);
        gbc.writeMem(0x8597, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5c10);
        EXPECT(gbc.pc(), 0x8598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8597), 0xf9);
        // F9 0357
        gbc.setState(0xbd6b, 0x2946, 0xf2a0, 0x63a4, 0x81d9, 0x4fdc, 0x0, 0x0);
        gbc.writeMem(0xbd6b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4fdc);
        EXPECT(gbc.pc(), 0xbd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6b), 0xf9);
        // F9 0358
        gbc.setState(0x2c02, 0xf75b, 0x6170, 0x43b5, 0x69c3, 0xe2b2, 0x0, 0x0);
        gbc.writeMem(0x2c02, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe2b2);
        EXPECT(gbc.pc(), 0x2c03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0359
        gbc.setState(0x7f58, 0x6beb, 0xb090, 0x96de, 0x8f2a, 0xba0c, 0x1, 0x1);
        gbc.writeMem(0x7f58, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xba0c);
        EXPECT(gbc.pc(), 0x7f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 035A
        gbc.setState(0x851a, 0x2ef6, 0x26d0, 0xd95a, 0x54d2, 0x598, 0x1, 0x0);
        gbc.writeMem(0x851a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x598);
        EXPECT(gbc.pc(), 0x851b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x851a), 0xf9);
        // F9 035B
        gbc.setState(0xec6b, 0xe97d, 0x920, 0xd78, 0x90d6, 0xfcad, 0x0, 0x0);
        gbc.writeMem(0xec6b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfcad);
        EXPECT(gbc.pc(), 0xec6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6b), 0xf9);
        // F9 035C
        gbc.setState(0xae40, 0xdecf, 0xfeb0, 0x2097, 0xaf22, 0x5b37, 0x0, 0x1);
        gbc.writeMem(0xae40, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5b37);
        EXPECT(gbc.pc(), 0xae41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae40), 0xf9);
        // F9 035D
        gbc.setState(0xa478, 0x3477, 0x4320, 0x3403, 0xd721, 0x7508, 0x0, 0x1);
        gbc.writeMem(0xa478, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7508);
        EXPECT(gbc.pc(), 0xa479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa478), 0xf9);
        // F9 035E
        gbc.setState(0x478a, 0x3b82, 0xcb50, 0xcda8, 0x48d7, 0xeb69, 0x1, 0x0);
        gbc.writeMem(0x478a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xeb69);
        EXPECT(gbc.pc(), 0x478b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 035F
        gbc.setState(0xc0b7, 0xe95, 0x860, 0x3c52, 0x4a4d, 0x19dd, 0x1, 0x1);
        gbc.writeMem(0xc0b7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x19dd);
        EXPECT(gbc.pc(), 0xc0b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b7), 0xf9);
        // F9 0360
        gbc.setState(0x68d1, 0x8399, 0x4d00, 0x24e, 0x59cd, 0xdaa4, 0x1, 0x1);
        gbc.writeMem(0x68d1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdaa4);
        EXPECT(gbc.pc(), 0x68d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0361
        gbc.setState(0x5668, 0xa51, 0x1b70, 0x78f7, 0x9dc8, 0x9890, 0x1, 0x0);
        gbc.writeMem(0x5668, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9890);
        EXPECT(gbc.pc(), 0x5669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0362
        gbc.setState(0x8137, 0x57ea, 0xa270, 0x1ed0, 0xfa77, 0x1669, 0x0, 0x1);
        gbc.writeMem(0x8137, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1669);
        EXPECT(gbc.pc(), 0x8138);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8137), 0xf9);
        // F9 0363
        gbc.setState(0xae80, 0xf4bd, 0xeea0, 0xc134, 0xdd61, 0x96b7, 0x0, 0x0);
        gbc.writeMem(0xae80, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x96b7);
        EXPECT(gbc.pc(), 0xae81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae80), 0xf9);
        // F9 0364
        gbc.setState(0x1e24, 0x22a7, 0x7420, 0x9f3b, 0xd89f, 0x4e72, 0x1, 0x1);
        gbc.writeMem(0x1e24, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4e72);
        EXPECT(gbc.pc(), 0x1e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0365
        gbc.setState(0xa10f, 0xa40c, 0x8230, 0x9bb1, 0x51c4, 0x59f1, 0x0, 0x1);
        gbc.writeMem(0xa10f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x59f1);
        EXPECT(gbc.pc(), 0xa110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa10f), 0xf9);
        // F9 0366
        gbc.setState(0xdca3, 0xc7c6, 0x6d30, 0xf7b6, 0x49bb, 0xa479, 0x0, 0x1);
        gbc.writeMem(0xdca3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa479);
        EXPECT(gbc.pc(), 0xdca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdca3), 0xf9);
        // F9 0368
        gbc.setState(0x6d3c, 0x7788, 0x7970, 0x734, 0xe772, 0xcee, 0x1, 0x1);
        gbc.writeMem(0x6d3c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcee);
        EXPECT(gbc.pc(), 0x6d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0369
        gbc.setState(0x7db3, 0x9000, 0x86f0, 0xf96, 0x96dc, 0x4bfc, 0x0, 0x1);
        gbc.writeMem(0x7db3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4bfc);
        EXPECT(gbc.pc(), 0x7db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 036A
        gbc.setState(0x994c, 0x391, 0xf9c0, 0xb329, 0x68ff, 0xbf0b, 0x1, 0x0);
        gbc.writeMem(0x994c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xbf0b);
        EXPECT(gbc.pc(), 0x994d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x994c), 0xf9);
        // F9 036B
        gbc.setState(0x7527, 0x56c8, 0x5c0, 0x749b, 0x779a, 0x456a, 0x1, 0x0);
        gbc.writeMem(0x7527, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x456a);
        EXPECT(gbc.pc(), 0x7528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 036C
        gbc.setState(0x587, 0xa4f4, 0x7ff0, 0x2c2b, 0xaeb, 0xc7d, 0x0, 0x1);
        gbc.writeMem(0x587, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc7d);
        EXPECT(gbc.pc(), 0x588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 036D
        gbc.setState(0x77ba, 0xd7d1, 0xd650, 0xfd34, 0x5715, 0xd333, 0x1, 0x1);
        gbc.writeMem(0x77ba, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd333);
        EXPECT(gbc.pc(), 0x77bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 036E
        gbc.setState(0x2147, 0x8cfa, 0x3bb0, 0x38cd, 0x204d, 0xb019, 0x1, 0x0);
        gbc.writeMem(0x2147, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb019);
        EXPECT(gbc.pc(), 0x2148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 036F
        gbc.setState(0x391, 0xfa7a, 0x5aa0, 0xdfa3, 0xf039, 0xb5a3, 0x0, 0x0);
        gbc.writeMem(0x391, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb5a3);
        EXPECT(gbc.pc(), 0x392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0370
        gbc.setState(0x80eb, 0x6008, 0x57b0, 0x74d1, 0x3c22, 0x121a, 0x0, 0x1);
        gbc.writeMem(0x80eb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x121a);
        EXPECT(gbc.pc(), 0x80ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80eb), 0xf9);
        // F9 0371
        gbc.setState(0x8fbe, 0x18a2, 0xd850, 0xcf96, 0x9bc0, 0xe6ea, 0x1, 0x1);
        gbc.writeMem(0x8fbe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe6ea);
        EXPECT(gbc.pc(), 0x8fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbe), 0xf9);
        // F9 0372
        gbc.setState(0xc844, 0x10bb, 0xdb30, 0x78ea, 0x3e3f, 0xbb2e, 0x1, 0x1);
        gbc.writeMem(0xc844, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbb2e);
        EXPECT(gbc.pc(), 0xc845);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc844), 0xf9);
        // F9 0373
        gbc.setState(0xa243, 0x375c, 0xaab0, 0x2476, 0xe180, 0x2de0, 0x1, 0x0);
        gbc.writeMem(0xa243, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x2de0);
        EXPECT(gbc.pc(), 0xa244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa243), 0xf9);
        // F9 0374
        gbc.setState(0x7c84, 0x5c6a, 0xc260, 0x6c92, 0x8587, 0xce59, 0x1, 0x0);
        gbc.writeMem(0x7c84, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xce59);
        EXPECT(gbc.pc(), 0x7c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0375
        gbc.setState(0x9088, 0xddb5, 0x9bd0, 0x219c, 0xd19b, 0x175c, 0x1, 0x0);
        gbc.writeMem(0x9088, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x175c);
        EXPECT(gbc.pc(), 0x9089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9088), 0xf9);
        // F9 0376
        gbc.setState(0xe26a, 0xd849, 0x4f70, 0x2aa4, 0x17c6, 0xc5e4, 0x1, 0x1);
        gbc.writeMem(0xe26a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xc5e4);
        EXPECT(gbc.pc(), 0xe26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26a), 0xf9);
        // F9 0377
        gbc.setState(0x1c0d, 0xe2b5, 0x1140, 0xc94, 0x3112, 0x36d2, 0x1, 0x1);
        gbc.writeMem(0x1c0d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x36d2);
        EXPECT(gbc.pc(), 0x1c0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0378
        gbc.setState(0x26d6, 0xaa1f, 0xc620, 0xce21, 0xf2ce, 0x926a, 0x1, 0x1);
        gbc.writeMem(0x26d6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x926a);
        EXPECT(gbc.pc(), 0x26d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0379
        gbc.setState(0xdb0, 0x3e9f, 0x5b40, 0x558b, 0x499f, 0xfef5, 0x0, 0x1);
        gbc.writeMem(0xdb0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfef5);
        EXPECT(gbc.pc(), 0xdb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 037A
        gbc.setState(0xdd79, 0xd9e3, 0x6810, 0x7b5, 0xb4cf, 0xae72, 0x1, 0x0);
        gbc.writeMem(0xdd79, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xae72);
        EXPECT(gbc.pc(), 0xdd7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd79), 0xf9);
        // F9 037B
        gbc.setState(0x4147, 0xe7fe, 0xd390, 0x4bc6, 0x845e, 0x2f2b, 0x1, 0x0);
        gbc.writeMem(0x4147, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2f2b);
        EXPECT(gbc.pc(), 0x4148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 037C
        gbc.setState(0x2af7, 0x16bf, 0x4500, 0xbe14, 0xc74c, 0xb238, 0x0, 0x1);
        gbc.writeMem(0x2af7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb238);
        EXPECT(gbc.pc(), 0x2af8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 037D
        gbc.setState(0x4fec, 0x717f, 0x2c20, 0xc7a0, 0xfde3, 0xc26d, 0x1, 0x0);
        gbc.writeMem(0x4fec, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc26d);
        EXPECT(gbc.pc(), 0x4fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 037F
        gbc.setState(0xab8, 0xf68d, 0xab50, 0xe1fc, 0x8069, 0x803b, 0x1, 0x0);
        gbc.writeMem(0xab8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x803b);
        EXPECT(gbc.pc(), 0xab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0380
        gbc.setState(0x11cf, 0x8a24, 0x5e50, 0x11df, 0x31ef, 0x4977, 0x0, 0x0);
        gbc.writeMem(0x11cf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4977);
        EXPECT(gbc.pc(), 0x11d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0381
        gbc.setState(0x9fd8, 0xc44, 0xaa50, 0xc5b, 0xfd79, 0xdc5d, 0x0, 0x1);
        gbc.writeMem(0x9fd8, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xdc5d);
        EXPECT(gbc.pc(), 0x9fd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fd8), 0xf9);
        // F9 0382
        gbc.setState(0x58f9, 0xcba8, 0x410, 0xe427, 0x54d7, 0xaeb8, 0x0, 0x1);
        gbc.writeMem(0x58f9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xaeb8);
        EXPECT(gbc.pc(), 0x58fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0383
        gbc.setState(0x4a0b, 0xb83c, 0x7d30, 0xcf67, 0x1203, 0xd12a, 0x1, 0x0);
        gbc.writeMem(0x4a0b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd12a);
        EXPECT(gbc.pc(), 0x4a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 0384
        gbc.setState(0x97da, 0xe808, 0x9890, 0xde69, 0x8c13, 0x6aee, 0x1, 0x1);
        gbc.writeMem(0x97da, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6aee);
        EXPECT(gbc.pc(), 0x97db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97da), 0xf9);
        // F9 0385
        gbc.setState(0x798e, 0x1006, 0xa5a0, 0x19fd, 0x43b8, 0xa97c, 0x1, 0x0);
        gbc.writeMem(0x798e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa97c);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0386
        gbc.setState(0xd115, 0x3903, 0xc070, 0xfe85, 0xa1a4, 0xe5ea, 0x0, 0x1);
        gbc.writeMem(0xd115, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe5ea);
        EXPECT(gbc.pc(), 0xd116);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd115), 0xf9);
        // F9 0387
        gbc.setState(0xcb18, 0xfedc, 0x71b0, 0x3991, 0xc930, 0x1032, 0x0, 0x0);
        gbc.writeMem(0xcb18, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1032);
        EXPECT(gbc.pc(), 0xcb19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb18), 0xf9);
        // F9 0388
        gbc.setState(0x9c0e, 0x8c82, 0xe060, 0x2125, 0x6460, 0x511c, 0x1, 0x0);
        gbc.writeMem(0x9c0e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x511c);
        EXPECT(gbc.pc(), 0x9c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c0e), 0xf9);
        // F9 038A
        gbc.setState(0xa3a3, 0x7be7, 0x7d20, 0x420f, 0xdc67, 0xd5f6, 0x0, 0x0);
        gbc.writeMem(0xa3a3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd5f6);
        EXPECT(gbc.pc(), 0xa3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a3), 0xf9);
        // F9 038B
        gbc.setState(0x4eed, 0x5486, 0x7610, 0x929c, 0x7925, 0xefbf, 0x1, 0x1);
        gbc.writeMem(0x4eed, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xefbf);
        EXPECT(gbc.pc(), 0x4eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 038C
        gbc.setState(0x8a02, 0xf0ce, 0x68a0, 0x3795, 0xa439, 0x9254, 0x1, 0x0);
        gbc.writeMem(0x8a02, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x9254);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a02), 0xf9);
        // F9 038D
        gbc.setState(0xaf5a, 0x9ec3, 0xd960, 0x474c, 0xff50, 0x9527, 0x1, 0x1);
        gbc.writeMem(0xaf5a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9527);
        EXPECT(gbc.pc(), 0xaf5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf5a), 0xf9);
        // F9 038E
        gbc.setState(0x85f1, 0x4faa, 0xc340, 0x7f54, 0xa4bf, 0x73b, 0x1, 0x1);
        gbc.writeMem(0x85f1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x73b);
        EXPECT(gbc.pc(), 0x85f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f1), 0xf9);
        // F9 038F
        gbc.setState(0x348f, 0xc6d7, 0x74e0, 0xeba8, 0x9c96, 0x9b32, 0x0, 0x0);
        gbc.writeMem(0x348f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9b32);
        EXPECT(gbc.pc(), 0x3490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0390
        gbc.setState(0x72ac, 0x5196, 0x7800, 0xb482, 0x6060, 0x17ef, 0x0, 0x1);
        gbc.writeMem(0x72ac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x17ef);
        EXPECT(gbc.pc(), 0x72ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 0392
        gbc.setState(0x9a0, 0xd45f, 0x5d0, 0x9737, 0xbfd4, 0x6987, 0x1, 0x0);
        gbc.writeMem(0x9a0, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6987);
        EXPECT(gbc.pc(), 0x9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0393
        gbc.setState(0x4976, 0x6b6a, 0xda10, 0xfb40, 0x2f91, 0xce26, 0x1, 0x1);
        gbc.writeMem(0x4976, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xce26);
        EXPECT(gbc.pc(), 0x4977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0394
        gbc.setState(0xb31e, 0x310b, 0xc7c0, 0xf5ce, 0xdbbe, 0x5cc0, 0x0, 0x1);
        gbc.writeMem(0xb31e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5cc0);
        EXPECT(gbc.pc(), 0xb31f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb31e), 0xf9);
        // F9 0395
        gbc.setState(0x8ac1, 0x37b0, 0xbc70, 0x4c16, 0x53e2, 0x87c4, 0x1, 0x0);
        gbc.writeMem(0x8ac1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x87c4);
        EXPECT(gbc.pc(), 0x8ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac1), 0xf9);
        // F9 0396
        gbc.setState(0x5f83, 0x7e3e, 0xcf20, 0xf843, 0x4561, 0xa651, 0x1, 0x1);
        gbc.writeMem(0x5f83, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa651);
        EXPECT(gbc.pc(), 0x5f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 0397
        gbc.setState(0xa824, 0xdf79, 0xaeb0, 0x7af0, 0xf87b, 0x6eea, 0x1, 0x1);
        gbc.writeMem(0xa824, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6eea);
        EXPECT(gbc.pc(), 0xa825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa824), 0xf9);
        // F9 0398
        gbc.setState(0x55c6, 0x45bd, 0x4c50, 0xdb0a, 0xfc19, 0x3907, 0x1, 0x0);
        gbc.writeMem(0x55c6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3907);
        EXPECT(gbc.pc(), 0x55c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 0399
        gbc.setState(0xa292, 0x5b0, 0x620, 0xb2f9, 0x7f89, 0xe367, 0x0, 0x0);
        gbc.writeMem(0xa292, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe367);
        EXPECT(gbc.pc(), 0xa293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa292), 0xf9);
        // F9 039A
        gbc.setState(0x7bd7, 0x509e, 0xe810, 0x20c5, 0xa1, 0x391c, 0x1, 0x0);
        gbc.writeMem(0x7bd7, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x391c);
        EXPECT(gbc.pc(), 0x7bd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 039B
        gbc.setState(0x7c1d, 0xcaad, 0x7000, 0x8ddc, 0x3ab2, 0x4ff7, 0x1, 0x0);
        gbc.writeMem(0x7c1d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4ff7);
        EXPECT(gbc.pc(), 0x7c1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 039C
        gbc.setState(0x4e51, 0x6660, 0xac30, 0x81be, 0xb0e2, 0xad4d, 0x0, 0x0);
        gbc.writeMem(0x4e51, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xad4d);
        EXPECT(gbc.pc(), 0x4e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 039D
        gbc.setState(0x4a71, 0xfef5, 0x3e10, 0x57f4, 0xb453, 0xaf08, 0x0, 0x1);
        gbc.writeMem(0x4a71, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xaf08);
        EXPECT(gbc.pc(), 0x4a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 039E
        gbc.setState(0xd2ef, 0x258e, 0xe4d0, 0xdc03, 0x4d52, 0x2708, 0x0, 0x0);
        gbc.writeMem(0xd2ef, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2708);
        EXPECT(gbc.pc(), 0xd2f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ef), 0xf9);
        // F9 039F
        gbc.setState(0xc523, 0x9865, 0x62c0, 0x8c5b, 0x7107, 0xc66e, 0x1, 0x0);
        gbc.writeMem(0xc523, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc66e);
        EXPECT(gbc.pc(), 0xc524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc523), 0xf9);
        // F9 03A0
        gbc.setState(0x8933, 0x138, 0x46f0, 0xa85d, 0x8b8, 0x507e, 0x0, 0x0);
        gbc.writeMem(0x8933, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x507e);
        EXPECT(gbc.pc(), 0x8934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8933), 0xf9);
        // F9 03A1
        gbc.setState(0x680d, 0x822f, 0xe380, 0xe76f, 0x5748, 0x540f, 0x0, 0x0);
        gbc.writeMem(0x680d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x540f);
        EXPECT(gbc.pc(), 0x680e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03A3
        gbc.setState(0xa32c, 0x33a5, 0x90a0, 0xad6c, 0x6c04, 0xb19, 0x1, 0x1);
        gbc.writeMem(0xa32c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb19);
        EXPECT(gbc.pc(), 0xa32d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa32c), 0xf9);
        // F9 03A4
        gbc.setState(0x32ac, 0x2d98, 0xf760, 0x742c, 0x7fca, 0x4434, 0x1, 0x1);
        gbc.writeMem(0x32ac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4434);
        EXPECT(gbc.pc(), 0x32ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03A5
        gbc.setState(0x25c3, 0xc5f2, 0x2bc0, 0x1044, 0x9e6, 0x9f6d, 0x0, 0x1);
        gbc.writeMem(0x25c3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9f6d);
        EXPECT(gbc.pc(), 0x25c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03A6
        gbc.setState(0x5c70, 0x2b3c, 0x12b0, 0xff30, 0x25c3, 0x2494, 0x1, 0x1);
        gbc.writeMem(0x5c70, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2494);
        EXPECT(gbc.pc(), 0x5c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03A7
        gbc.setState(0x9cbe, 0xadb6, 0x8120, 0xa299, 0x3507, 0x5800, 0x1, 0x0);
        gbc.writeMem(0x9cbe, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5800);
        EXPECT(gbc.pc(), 0x9cbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cbe), 0xf9);
        // F9 03A8
        gbc.setState(0x615f, 0xbb3f, 0xf870, 0x6101, 0x7783, 0x39f4, 0x0, 0x1);
        gbc.writeMem(0x615f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x39f4);
        EXPECT(gbc.pc(), 0x6160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03AA
        gbc.setState(0xad40, 0x42f3, 0xd3e0, 0x49ca, 0xab02, 0x1b5d, 0x1, 0x0);
        gbc.writeMem(0xad40, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1b5d);
        EXPECT(gbc.pc(), 0xad41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad40), 0xf9);
        // F9 03AB
        gbc.setState(0xc869, 0xe42, 0xe460, 0x6561, 0xbed, 0x363c, 0x0, 0x0);
        gbc.writeMem(0xc869, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x363c);
        EXPECT(gbc.pc(), 0xc86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc869), 0xf9);
        // F9 03AC
        gbc.setState(0x8821, 0xccef, 0x4270, 0xc531, 0xfca8, 0xd13f, 0x0, 0x1);
        gbc.writeMem(0x8821, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd13f);
        EXPECT(gbc.pc(), 0x8822);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8821), 0xf9);
        // F9 03AD
        gbc.setState(0x628b, 0x4182, 0xc240, 0x6b49, 0x5b55, 0x49f7, 0x0, 0x0);
        gbc.writeMem(0x628b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x49f7);
        EXPECT(gbc.pc(), 0x628c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03AE
        gbc.setState(0xdb94, 0xfb28, 0x9b80, 0xe0d4, 0x77af, 0xcc5d, 0x1, 0x0);
        gbc.writeMem(0xdb94, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcc5d);
        EXPECT(gbc.pc(), 0xdb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb94), 0xf9);
        // F9 03B0
        gbc.setState(0x8d51, 0x4952, 0x68a0, 0x370f, 0xf406, 0xf60f, 0x1, 0x0);
        gbc.writeMem(0x8d51, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf60f);
        EXPECT(gbc.pc(), 0x8d52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d51), 0xf9);
        // F9 03B1
        gbc.setState(0x6586, 0x6b10, 0x6a00, 0x67a5, 0xeb36, 0x5a6b, 0x0, 0x1);
        gbc.writeMem(0x6586, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5a6b);
        EXPECT(gbc.pc(), 0x6587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03B2
        gbc.setState(0x9b51, 0xfa2f, 0x7900, 0x6fcf, 0x50dd, 0x6d01, 0x1, 0x1);
        gbc.writeMem(0x9b51, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6d01);
        EXPECT(gbc.pc(), 0x9b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b51), 0xf9);
        // F9 03B4
        gbc.setState(0x1ee2, 0x9a2f, 0xb570, 0x2c63, 0x5db6, 0x475e, 0x0, 0x0);
        gbc.writeMem(0x1ee2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x475e);
        EXPECT(gbc.pc(), 0x1ee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03B6
        gbc.setState(0xadf9, 0x43d1, 0xaee0, 0x9e0b, 0x922f, 0x51a8, 0x1, 0x0);
        gbc.writeMem(0xadf9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x51a8);
        EXPECT(gbc.pc(), 0xadfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf9), 0xf9);
        // F9 03B7
        gbc.setState(0x220, 0x28d, 0x27b0, 0xc0d9, 0x5e40, 0x2058, 0x0, 0x1);
        gbc.writeMem(0x220, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x2058);
        EXPECT(gbc.pc(), 0x221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03B8
        gbc.setState(0x3ced, 0xfafd, 0x5980, 0x6a82, 0xe0b3, 0x6eb5, 0x0, 0x1);
        gbc.writeMem(0x3ced, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6eb5);
        EXPECT(gbc.pc(), 0x3cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03B9
        gbc.setState(0xb46f, 0x157a, 0x9650, 0xc5e4, 0x60ca, 0xa49, 0x1, 0x1);
        gbc.writeMem(0xb46f, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa49);
        EXPECT(gbc.pc(), 0xb470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46f), 0xf9);
        // F9 03BA
        gbc.setState(0x5ed2, 0xd33a, 0x9a80, 0xe512, 0xa081, 0x5e00, 0x0, 0x0);
        gbc.writeMem(0x5ed2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5e00);
        EXPECT(gbc.pc(), 0x5ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03BB
        gbc.setState(0x4a32, 0xc8b3, 0xae80, 0xf336, 0x53b4, 0x37dd, 0x1, 0x0);
        gbc.writeMem(0x4a32, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x37dd);
        EXPECT(gbc.pc(), 0x4a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03BC
        gbc.setState(0x3d5a, 0xeb60, 0x1200, 0x598a, 0x3eec, 0xbbdd, 0x1, 0x0);
        gbc.writeMem(0x3d5a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbbdd);
        EXPECT(gbc.pc(), 0x3d5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03BD
        gbc.setState(0x635b, 0xdb09, 0x23b0, 0xdc21, 0x97a, 0x8c8b, 0x0, 0x0);
        gbc.writeMem(0x635b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8c8b);
        EXPECT(gbc.pc(), 0x635c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03BE
        gbc.setState(0x3d01, 0xbb80, 0xb5a0, 0x42e3, 0x8cd0, 0x7f12, 0x0, 0x1);
        gbc.writeMem(0x3d01, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7f12);
        EXPECT(gbc.pc(), 0x3d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03BF
        gbc.setState(0x145a, 0x3406, 0x1830, 0x3bd3, 0x1a1, 0x87da, 0x0, 0x1);
        gbc.writeMem(0x145a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x87da);
        EXPECT(gbc.pc(), 0x145b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03C0
        gbc.setState(0x16df, 0x8673, 0xbe70, 0x8164, 0xe8f0, 0xd998, 0x0, 0x0);
        gbc.writeMem(0x16df, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd998);
        EXPECT(gbc.pc(), 0x16e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03C1
        gbc.setState(0x9695, 0xa51, 0x82f0, 0x88ba, 0x3fd2, 0xc93c, 0x0, 0x0);
        gbc.writeMem(0x9695, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc93c);
        EXPECT(gbc.pc(), 0x9696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9695), 0xf9);
        // F9 03C2
        gbc.setState(0xbe5a, 0xac86, 0xe40, 0x3700, 0x193f, 0x25e9, 0x1, 0x0);
        gbc.writeMem(0xbe5a, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x25e9);
        EXPECT(gbc.pc(), 0xbe5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5a), 0xf9);
        // F9 03C3
        gbc.setState(0xe38e, 0xae11, 0xc6a0, 0xf80c, 0xdf7c, 0xfce1, 0x1, 0x1);
        gbc.writeMem(0xe38e, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xfce1);
        EXPECT(gbc.pc(), 0xe38f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38e), 0xf9);
        // F9 03C4
        gbc.setState(0xc282, 0x45c4, 0xa060, 0x1456, 0x3523, 0x7aa6, 0x0, 0x0);
        gbc.writeMem(0xc282, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7aa6);
        EXPECT(gbc.pc(), 0xc283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc282), 0xf9);
        // F9 03C5
        gbc.setState(0x6ac9, 0xa88f, 0x51b0, 0xd44e, 0xddbb, 0x4cd2, 0x0, 0x1);
        gbc.writeMem(0x6ac9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4cd2);
        EXPECT(gbc.pc(), 0x6aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03C6
        gbc.setState(0x69ac, 0x3560, 0x120, 0xdd4c, 0x1554, 0x3e52, 0x1, 0x0);
        gbc.writeMem(0x69ac, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3e52);
        EXPECT(gbc.pc(), 0x69ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03C7
        gbc.setState(0x6216, 0x95ff, 0x200, 0xbd5a, 0x1fe6, 0x52ce, 0x0, 0x0);
        gbc.writeMem(0x6216, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x52ce);
        EXPECT(gbc.pc(), 0x6217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03C8
        gbc.setState(0xa3f6, 0x24cf, 0x78b0, 0x82f2, 0x20ce, 0xc47a, 0x1, 0x1);
        gbc.writeMem(0xa3f6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc47a);
        EXPECT(gbc.pc(), 0xa3f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f6), 0xf9);
        // F9 03C9
        gbc.setState(0x9598, 0xe5a4, 0xf8f0, 0xc136, 0x7039, 0x97b1, 0x0, 0x0);
        gbc.writeMem(0x9598, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x97b1);
        EXPECT(gbc.pc(), 0x9599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9598), 0xf9);
        // F9 03CA
        gbc.setState(0xb471, 0x6da, 0x110, 0x1606, 0x89f7, 0x4bf4, 0x1, 0x1);
        gbc.writeMem(0xb471, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4bf4);
        EXPECT(gbc.pc(), 0xb472);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb471), 0xf9);
        // F9 03CB
        gbc.setState(0x6448, 0x5a7e, 0x3710, 0x3868, 0x85f3, 0x697b, 0x0, 0x1);
        gbc.writeMem(0x6448, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x697b);
        EXPECT(gbc.pc(), 0x6449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 03CD
        gbc.setState(0x3561, 0xf492, 0x39a0, 0x6bad, 0x1724, 0x6698, 0x0, 0x1);
        gbc.writeMem(0x3561, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6698);
        EXPECT(gbc.pc(), 0x3562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03CE
        gbc.setState(0x17e3, 0x689e, 0x4bb0, 0xc10e, 0x5a98, 0x9b96, 0x1, 0x1);
        gbc.writeMem(0x17e3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9b96);
        EXPECT(gbc.pc(), 0x17e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03CF
        gbc.setState(0xc308, 0x10eb, 0xc400, 0xefd9, 0xa7fb, 0xbecc, 0x0, 0x0);
        gbc.writeMem(0xc308, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbecc);
        EXPECT(gbc.pc(), 0xc309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc308), 0xf9);
        // F9 03D0
        gbc.setState(0xc7cf, 0x9515, 0xdee0, 0x7e14, 0xb69f, 0x3b96, 0x0, 0x1);
        gbc.writeMem(0xc7cf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3b96);
        EXPECT(gbc.pc(), 0xc7d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7cf), 0xf9);
        // F9 03D1
        gbc.setState(0x80f9, 0xf198, 0xdb00, 0xe5dc, 0x5a59, 0xff36, 0x0, 0x0);
        gbc.writeMem(0x80f9, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xff36);
        EXPECT(gbc.pc(), 0x80fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f9), 0xf9);
        // F9 03D2
        gbc.setState(0x5b3, 0xb524, 0xac90, 0x714f, 0xe629, 0x6f3e, 0x0, 0x0);
        gbc.writeMem(0x5b3, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6f3e);
        EXPECT(gbc.pc(), 0x5b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 03D3
        gbc.setState(0x6961, 0x2b92, 0x38e0, 0x7928, 0x286b, 0xad54, 0x1, 0x1);
        gbc.writeMem(0x6961, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xad54);
        EXPECT(gbc.pc(), 0x6962);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03D4
        gbc.setState(0x6fff, 0x3b63, 0xc9e0, 0xb61e, 0xa5fd, 0x41b0, 0x0, 0x1);
        gbc.writeMem(0x6fff, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x41b0);
        EXPECT(gbc.pc(), 0x7000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03D5
        gbc.setState(0xc4de, 0xae42, 0x21c0, 0xc1b8, 0x7390, 0xd7da, 0x0, 0x1);
        gbc.writeMem(0xc4de, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd7da);
        EXPECT(gbc.pc(), 0xc4df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4de), 0xf9);
        // F9 03D6
        gbc.setState(0x3675, 0xe92, 0x8ec0, 0x5295, 0xf9bf, 0x600, 0x1, 0x0);
        gbc.writeMem(0x3675, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x600);
        EXPECT(gbc.pc(), 0x3676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03D7
        gbc.setState(0x77bf, 0x1a3f, 0x8d00, 0x48b6, 0x41be, 0x49c4, 0x1, 0x1);
        gbc.writeMem(0x77bf, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x49c4);
        EXPECT(gbc.pc(), 0x77c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03D8
        gbc.setState(0x822, 0x23d3, 0xb740, 0x3aa8, 0x704c, 0x152e, 0x1, 0x0);
        gbc.writeMem(0x822, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x152e);
        EXPECT(gbc.pc(), 0x823);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03D9
        gbc.setState(0x78b5, 0x7f4, 0x5070, 0xd187, 0xb211, 0x9a91, 0x0, 0x1);
        gbc.writeMem(0x78b5, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x9a91);
        EXPECT(gbc.pc(), 0x78b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03DA
        gbc.setState(0xed9b, 0xb227, 0xae00, 0x4f49, 0x5c0d, 0xb83b, 0x0, 0x1);
        gbc.writeMem(0xed9b, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb83b);
        EXPECT(gbc.pc(), 0xed9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9b), 0xf9);
        // F9 03DB
        gbc.setState(0x2ba6, 0x4dbc, 0xd890, 0xa814, 0x8fc8, 0x4576, 0x1, 0x0);
        gbc.writeMem(0x2ba6, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4576);
        EXPECT(gbc.pc(), 0x2ba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 03DC
        gbc.setState(0x193d, 0x4803, 0xc0b0, 0xcfab, 0xc0e1, 0xaeb5, 0x0, 0x1);
        gbc.writeMem(0x193d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xaeb5);
        EXPECT(gbc.pc(), 0x193e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // F9 03DD
        gbc.setState(0x167d, 0x8883, 0x2240, 0x35b8, 0xdb0a, 0x189f, 0x1, 0x1);
        gbc.writeMem(0x167d, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x189f);
        EXPECT(gbc.pc(), 0x167e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // F9 03DE
        gbc.setState(0xa2d2, 0x28e2, 0x85d0, 0xc2b3, 0x44af, 0x3f56, 0x1, 0x0);
        gbc.writeMem(0xa2d2, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3f56);
        EXPECT(gbc.pc(), 0xa2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2d2), 0xf9);
        // F9 03DF
        gbc.setState(0xe18c, 0xa285, 0xeee0, 0xe2e2, 0xb16d, 0x91ce, 0x1, 0x1);
        gbc.writeMem(0xe18c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x91ce);
        EXPECT(gbc.pc(), 0xe18d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe18c), 0xf9);
        // F9 03E0
        gbc.setState(0xd0af, 0x8e60, 0x3680, 0xca68, 0x1930, 0x1cc2, 0x0, 0x0);
        gbc.writeMem(0xd0af, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1cc2);
        EXPECT(gbc.pc(), 0xd0b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0af), 0xf9);
        // F9 03E1
        gbc.setState(0x6bc1, 0xc963, 0xf160, 0x7b96, 0xe861, 0x1085, 0x1, 0x1);
        gbc.writeMem(0x6bc1, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1085);
        EXPECT(gbc.pc(), 0x6bc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // F9 03E3
        gbc.setState(0xec29, 0xcff5, 0xa290, 0x2655, 0x4ef4, 0xb820, 0x1, 0x1);
        gbc.writeMem(0xec29, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb820);
        EXPECT(gbc.pc(), 0xec2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec29), 0xf9);
        // F9 03E4
        gbc.setState(0xa856, 0xd31c, 0x5d20, 0xebe3, 0xe541, 0x26db, 0x0, 0x0);
        gbc.writeMem(0xa856, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x26db);
        EXPECT(gbc.pc(), 0xa857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa856), 0xf9);
        // F9 03E5
        gbc.setState(0xc168, 0x4b71, 0x8570, 0xcb07, 0x59f7, 0xf0bd, 0x1, 0x1);
        gbc.writeMem(0xc168, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf0bd);
        EXPECT(gbc.pc(), 0xc169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc168), 0xf9);
        // F9 03E6
        gbc.setState(0x7604, 0x288, 0x6b50, 0x964c, 0xe86d, 0x45e0, 0x1, 0x0);
        gbc.writeMem(0x7604, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x45e0);
        EXPECT(gbc.pc(), 0x7605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // F9 03E7
        gbc.setState(0x531c, 0xe31e, 0x1260, 0xbf, 0xbad9, 0x53ff, 0x1, 0x1);
        gbc.writeMem(0x531c, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x53ff);
        EXPECT(gbc.pc(), 0x531d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
