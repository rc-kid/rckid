    TEST(gbcemu, opcode_47) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 47 0000
        gbc.setState(0x5282, 0xe279, 0x2d60, 0xb738, 0xbc10, 0xebfd, 0x1, 0x1);
        gbc.writeMem(0x5282, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe279);
        EXPECT(gbc.pc(), 0x5283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0001
        gbc.setState(0x66f5, 0x6ec8, 0x4990, 0x681b, 0x11f9, 0xd668, 0x1, 0x1);
        gbc.writeMem(0x66f5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6ec8);
        EXPECT(gbc.pc(), 0x66f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0002
        gbc.setState(0x22, 0xe4b3, 0xbfe0, 0xb8e7, 0x6b8, 0xcf6d, 0x1, 0x0);
        gbc.writeMem(0x22, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe4b3);
        EXPECT(gbc.pc(), 0x23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0003
        gbc.setState(0x1dd, 0xc197, 0xe800, 0xc838, 0xdfc2, 0xe053, 0x0, 0x0);
        gbc.writeMem(0x1dd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc197);
        EXPECT(gbc.pc(), 0x1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0004
        gbc.setState(0xbc29, 0xeb9d, 0x99c0, 0x7474, 0x82a8, 0x42ee, 0x1, 0x1);
        gbc.writeMem(0xbc29, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xeb9d);
        EXPECT(gbc.pc(), 0xbc2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc29), 0x47);
        // 47 0005
        gbc.setState(0x704d, 0xc39b, 0x5850, 0xff53, 0x738b, 0x9888, 0x1, 0x0);
        gbc.writeMem(0x704d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc39b);
        EXPECT(gbc.pc(), 0x704e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0006
        gbc.setState(0x48d5, 0x5cc7, 0xb30, 0x4208, 0x79b1, 0xd18d, 0x1, 0x1);
        gbc.writeMem(0x48d5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0x48d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0007
        gbc.setState(0xbde2, 0xf121, 0x9e00, 0xb50, 0x8b25, 0xeea0, 0x0, 0x1);
        gbc.writeMem(0xbde2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf121);
        EXPECT(gbc.pc(), 0xbde3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde2), 0x47);
        // 47 000A
        gbc.setState(0xe2d6, 0xcbdb, 0xcb90, 0xc865, 0x2977, 0x3284, 0x0, 0x1);
        gbc.writeMem(0xe2d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xcbdb);
        EXPECT(gbc.pc(), 0xe2d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2d6), 0x47);
        // 47 000B
        gbc.setState(0x504b, 0x44, 0x7e80, 0x8bd9, 0x3859, 0x5bee, 0x0, 0x1);
        gbc.writeMem(0x504b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x44);
        EXPECT(gbc.pc(), 0x504c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 000C
        gbc.setState(0xb67a, 0x65f2, 0x2890, 0x9668, 0xd09e, 0x9eff, 0x0, 0x1);
        gbc.writeMem(0xb67a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x65f2);
        EXPECT(gbc.pc(), 0xb67b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb67a), 0x47);
        // 47 000D
        gbc.setState(0xaa7d, 0x58bf, 0xc9e0, 0x4c09, 0xf82, 0xddba, 0x1, 0x0);
        gbc.writeMem(0xaa7d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x58bf);
        EXPECT(gbc.pc(), 0xaa7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7d), 0x47);
        // 47 000E
        gbc.setState(0x530c, 0x863c, 0x9570, 0x367d, 0x4d9f, 0xdb49, 0x1, 0x1);
        gbc.writeMem(0x530c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x863c);
        EXPECT(gbc.pc(), 0x530d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 000F
        gbc.setState(0x1636, 0xfa95, 0xfc40, 0xdad6, 0x4a08, 0xa8b6, 0x1, 0x1);
        gbc.writeMem(0x1636, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfa95);
        EXPECT(gbc.pc(), 0x1637);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0010
        gbc.setState(0xb2ab, 0x1179, 0x7cc0, 0xa319, 0xbac7, 0xe8af, 0x1, 0x0);
        gbc.writeMem(0xb2ab, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1179);
        EXPECT(gbc.pc(), 0xb2ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ab), 0x47);
        // 47 0011
        gbc.setState(0xc3c9, 0x88e4, 0xbab0, 0xc234, 0x381f, 0x5ece, 0x1, 0x0);
        gbc.writeMem(0xc3c9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x88e4);
        EXPECT(gbc.pc(), 0xc3ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3c9), 0x47);
        // 47 0012
        gbc.setState(0x3569, 0xf5bb, 0x3ae0, 0x5cc, 0x3cb8, 0x998e, 0x0, 0x1);
        gbc.writeMem(0x3569, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf5bb);
        EXPECT(gbc.pc(), 0x356a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0013
        gbc.setState(0x9ad9, 0x14de, 0xcf90, 0xaf40, 0xa24b, 0x1553, 0x1, 0x0);
        gbc.writeMem(0x9ad9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x14de);
        EXPECT(gbc.pc(), 0x9ada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad9), 0x47);
        // 47 0014
        gbc.setState(0xa351, 0x73fe, 0x3c60, 0x2e15, 0x65d8, 0xa060, 0x1, 0x0);
        gbc.writeMem(0xa351, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x73fe);
        EXPECT(gbc.pc(), 0xa352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa351), 0x47);
        // 47 0015
        gbc.setState(0x2a5e, 0x7f5b, 0x4a20, 0xf66d, 0x9148, 0x21ea, 0x1, 0x0);
        gbc.writeMem(0x2a5e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7f5b);
        EXPECT(gbc.pc(), 0x2a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0016
        gbc.setState(0x706b, 0x6686, 0x88a0, 0xe366, 0x6489, 0x1764, 0x0, 0x0);
        gbc.writeMem(0x706b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6686);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0017
        gbc.setState(0xd4e2, 0x494e, 0x8e60, 0x1b03, 0x7e17, 0x8604, 0x1, 0x1);
        gbc.writeMem(0xd4e2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x494e);
        EXPECT(gbc.pc(), 0xd4e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4e2), 0x47);
        // 47 0018
        gbc.setState(0x35e, 0x4548, 0x1dc0, 0x5918, 0xc7cc, 0x2901, 0x1, 0x0);
        gbc.writeMem(0x35e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4548);
        EXPECT(gbc.pc(), 0x35f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0019
        gbc.setState(0xc86, 0xc42b, 0xe350, 0xa15e, 0xfa53, 0x4047, 0x1, 0x1);
        gbc.writeMem(0xc86, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc42b);
        EXPECT(gbc.pc(), 0xc87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 001A
        gbc.setState(0x7d45, 0x63d, 0x9d80, 0x923f, 0x1c43, 0x76a9, 0x0, 0x1);
        gbc.writeMem(0x7d45, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x63d);
        EXPECT(gbc.pc(), 0x7d46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 001B
        gbc.setState(0x8061, 0x1bac, 0x9710, 0xa6c2, 0x39a7, 0x4e4e, 0x0, 0x1);
        gbc.writeMem(0x8061, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1bac);
        EXPECT(gbc.pc(), 0x8062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8061), 0x47);
        // 47 001C
        gbc.setState(0xce9, 0x9e81, 0x3ae0, 0x61b4, 0xeb7a, 0x9879, 0x0, 0x1);
        gbc.writeMem(0xce9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9e81);
        EXPECT(gbc.pc(), 0xcea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 001D
        gbc.setState(0x75e8, 0x257c, 0xdf20, 0xf907, 0xdf3a, 0xb5c2, 0x0, 0x1);
        gbc.writeMem(0x75e8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x257c);
        EXPECT(gbc.pc(), 0x75e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 001E
        gbc.setState(0xe76b, 0xa3a2, 0xab20, 0xcf71, 0x2c14, 0x373c, 0x0, 0x0);
        gbc.writeMem(0xe76b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa3a2);
        EXPECT(gbc.pc(), 0xe76c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76b), 0x47);
        // 47 001F
        gbc.setState(0x590a, 0xe978, 0x3a80, 0xf32, 0xe2ff, 0x23fe, 0x0, 0x1);
        gbc.writeMem(0x590a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe978);
        EXPECT(gbc.pc(), 0x590b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0020
        gbc.setState(0x3fbc, 0x3179, 0xd30, 0xfa45, 0x4490, 0x729d, 0x1, 0x1);
        gbc.writeMem(0x3fbc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3179);
        EXPECT(gbc.pc(), 0x3fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0022
        gbc.setState(0xa01f, 0x83f6, 0x6f00, 0x607f, 0xc827, 0xb0f3, 0x1, 0x1);
        gbc.writeMem(0xa01f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x83f6);
        EXPECT(gbc.pc(), 0xa020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01f), 0x47);
        // 47 0023
        gbc.setState(0xc3b1, 0x5d2b, 0x31d0, 0xcf53, 0xdbde, 0xb5b4, 0x0, 0x0);
        gbc.writeMem(0xc3b1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5d2b);
        EXPECT(gbc.pc(), 0xc3b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3b1), 0x47);
        // 47 0024
        gbc.setState(0x75f3, 0xefc2, 0x12b0, 0x6571, 0xbddc, 0x569d, 0x1, 0x1);
        gbc.writeMem(0x75f3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xefc2);
        EXPECT(gbc.pc(), 0x75f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0025
        gbc.setState(0xa424, 0x8733, 0x1d30, 0xa830, 0x79b0, 0x32fb, 0x1, 0x0);
        gbc.writeMem(0xa424, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8733);
        EXPECT(gbc.pc(), 0xa425);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa424), 0x47);
        // 47 0026
        gbc.setState(0xa68e, 0xa4bb, 0x96c0, 0xa6e5, 0xb64b, 0x2fb3, 0x0, 0x1);
        gbc.writeMem(0xa68e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0xa68f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68e), 0x47);
        // 47 0027
        gbc.setState(0xbe28, 0xe538, 0xe160, 0xe707, 0xc514, 0x76b2, 0x0, 0x1);
        gbc.writeMem(0xbe28, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe538);
        EXPECT(gbc.pc(), 0xbe29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe28), 0x47);
        // 47 0028
        gbc.setState(0xd18a, 0x3141, 0x5b70, 0xc302, 0xaf86, 0xd9a6, 0x1, 0x0);
        gbc.writeMem(0xd18a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3141);
        EXPECT(gbc.pc(), 0xd18b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd18a), 0x47);
        // 47 0029
        gbc.setState(0xb2ca, 0x2474, 0xb1c0, 0x7f51, 0xfa6e, 0xcaf7, 0x1, 0x1);
        gbc.writeMem(0xb2ca, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2474);
        EXPECT(gbc.pc(), 0xb2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ca), 0x47);
        // 47 002A
        gbc.setState(0x6b81, 0xb3b6, 0xf5c0, 0xe690, 0xd967, 0x2cc0, 0x1, 0x0);
        gbc.writeMem(0x6b81, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb3b6);
        EXPECT(gbc.pc(), 0x6b82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 002C
        gbc.setState(0x684d, 0xa6c3, 0x8e00, 0xeb3e, 0x8a47, 0x2155, 0x0, 0x1);
        gbc.writeMem(0x684d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa6c3);
        EXPECT(gbc.pc(), 0x684e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 002D
        gbc.setState(0x8209, 0xc35, 0x3d60, 0xc9c8, 0x79ee, 0x1e7b, 0x1, 0x1);
        gbc.writeMem(0x8209, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc35);
        EXPECT(gbc.pc(), 0x820a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8209), 0x47);
        // 47 002E
        gbc.setState(0xc235, 0x1f7, 0xe870, 0x4f9b, 0xc6e3, 0x4864, 0x0, 0x0);
        gbc.writeMem(0xc235, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1f7);
        EXPECT(gbc.pc(), 0xc236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc235), 0x47);
        // 47 002F
        gbc.setState(0xd58, 0x129c, 0x3990, 0x123a, 0xd81, 0x15a3, 0x1, 0x1);
        gbc.writeMem(0xd58, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x129c);
        EXPECT(gbc.pc(), 0xd59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0030
        gbc.setState(0xaac6, 0xca2c, 0x3c20, 0x1cca, 0xc5b7, 0x6616, 0x1, 0x0);
        gbc.writeMem(0xaac6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xca2c);
        EXPECT(gbc.pc(), 0xaac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac6), 0x47);
        // 47 0031
        gbc.setState(0xd467, 0x8a9f, 0xf820, 0xe427, 0xe7fd, 0xd362, 0x1, 0x1);
        gbc.writeMem(0xd467, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8a9f);
        EXPECT(gbc.pc(), 0xd468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd467), 0x47);
        // 47 0032
        gbc.setState(0x8b15, 0xc766, 0xe3e0, 0x2523, 0x5f6e, 0x3593, 0x1, 0x1);
        gbc.writeMem(0x8b15, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc766);
        EXPECT(gbc.pc(), 0x8b16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b15), 0x47);
        // 47 0033
        gbc.setState(0xe06f, 0x629b, 0x7e0, 0x9357, 0x5a0c, 0x5f75, 0x1, 0x1);
        gbc.writeMem(0xe06f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x629b);
        EXPECT(gbc.pc(), 0xe070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe06f), 0x47);
        // 47 0034
        gbc.setState(0x57ca, 0x674f, 0xd90, 0xca5b, 0xf722, 0x8e4f, 0x1, 0x0);
        gbc.writeMem(0x57ca, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x674f);
        EXPECT(gbc.pc(), 0x57cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0035
        gbc.setState(0x8f40, 0xd485, 0x5f40, 0x6629, 0x42, 0xfef5, 0x0, 0x1);
        gbc.writeMem(0x8f40, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd485);
        EXPECT(gbc.pc(), 0x8f41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f40), 0x47);
        // 47 0036
        gbc.setState(0x4b77, 0x506b, 0x5080, 0x54c4, 0xe14e, 0x7dea, 0x1, 0x0);
        gbc.writeMem(0x4b77, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x506b);
        EXPECT(gbc.pc(), 0x4b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0037
        gbc.setState(0xd3a0, 0x1821, 0xc590, 0x6458, 0x1d1f, 0x938c, 0x1, 0x1);
        gbc.writeMem(0xd3a0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1821);
        EXPECT(gbc.pc(), 0xd3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a0), 0x47);
        // 47 0038
        gbc.setState(0x975f, 0x7a60, 0x85c0, 0x3e68, 0xb35b, 0x816f, 0x0, 0x0);
        gbc.writeMem(0x975f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7a60);
        EXPECT(gbc.pc(), 0x9760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975f), 0x47);
        // 47 0039
        gbc.setState(0x72d3, 0x5c75, 0xe730, 0xe0a6, 0x8e1e, 0xaead, 0x1, 0x1);
        gbc.writeMem(0x72d3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5c75);
        EXPECT(gbc.pc(), 0x72d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 003A
        gbc.setState(0x7df5, 0x1d48, 0xc300, 0xcfed, 0xa41a, 0x2ed2, 0x0, 0x1);
        gbc.writeMem(0x7df5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1d48);
        EXPECT(gbc.pc(), 0x7df6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 003B
        gbc.setState(0x4fcf, 0x8b81, 0x8790, 0xb602, 0x63a1, 0xca25, 0x1, 0x1);
        gbc.writeMem(0x4fcf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8b81);
        EXPECT(gbc.pc(), 0x4fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 003C
        gbc.setState(0x2547, 0x8f77, 0x5d50, 0x2ee2, 0x6057, 0x116b, 0x1, 0x0);
        gbc.writeMem(0x2547, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8f77);
        EXPECT(gbc.pc(), 0x2548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 003E
        gbc.setState(0x849e, 0xf051, 0xca80, 0x4d95, 0x50c5, 0xfa93, 0x1, 0x0);
        gbc.writeMem(0x849e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf051);
        EXPECT(gbc.pc(), 0x849f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x849e), 0x47);
        // 47 003F
        gbc.setState(0xdfe3, 0x201e, 0xa6f0, 0x3802, 0x203a, 0xda4f, 0x1, 0x1);
        gbc.writeMem(0xdfe3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x201e);
        EXPECT(gbc.pc(), 0xdfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe3), 0x47);
        // 47 0040
        gbc.setState(0x3c0f, 0xa31b, 0xdbf0, 0x1ff1, 0x2f5b, 0xf09b, 0x0, 0x0);
        gbc.writeMem(0x3c0f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa31b);
        EXPECT(gbc.pc(), 0x3c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0041
        gbc.setState(0xd212, 0x9b8f, 0xa590, 0x342, 0xc521, 0xb8f7, 0x1, 0x0);
        gbc.writeMem(0xd212, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9b8f);
        EXPECT(gbc.pc(), 0xd213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd212), 0x47);
        // 47 0042
        gbc.setState(0x47cf, 0xfff2, 0xa30, 0x5956, 0xd4b, 0x5af, 0x0, 0x0);
        gbc.writeMem(0x47cf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xfff2);
        EXPECT(gbc.pc(), 0x47d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0043
        gbc.setState(0x26bd, 0x2478, 0xeb10, 0x358a, 0xb1c2, 0xdd50, 0x1, 0x0);
        gbc.writeMem(0x26bd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2478);
        EXPECT(gbc.pc(), 0x26be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0044
        gbc.setState(0xcd39, 0x4269, 0xe4a0, 0x3940, 0x11c, 0x7ed1, 0x0, 0x1);
        gbc.writeMem(0xcd39, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x4269);
        EXPECT(gbc.pc(), 0xcd3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd39), 0x47);
        // 47 0045
        gbc.setState(0xd3c9, 0x6681, 0x4e70, 0x373e, 0xfe05, 0x265f, 0x1, 0x1);
        gbc.writeMem(0xd3c9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6681);
        EXPECT(gbc.pc(), 0xd3ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3c9), 0x47);
        // 47 0046
        gbc.setState(0x1107, 0x4f88, 0x5c20, 0xb92f, 0xa8bd, 0xc115, 0x0, 0x1);
        gbc.writeMem(0x1107, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4f88);
        EXPECT(gbc.pc(), 0x1108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0047
        gbc.setState(0x70ea, 0xd077, 0x1c20, 0x6b8b, 0xadcd, 0xef06, 0x1, 0x0);
        gbc.writeMem(0x70ea, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd077);
        EXPECT(gbc.pc(), 0x70eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0048
        gbc.setState(0x2a26, 0xa968, 0x4690, 0x38dc, 0xc0fe, 0xb429, 0x0, 0x1);
        gbc.writeMem(0x2a26, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa968);
        EXPECT(gbc.pc(), 0x2a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0049
        gbc.setState(0x407a, 0x6d1b, 0xa0b0, 0x6db, 0x67a5, 0xacf1, 0x1, 0x1);
        gbc.writeMem(0x407a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6d1b);
        EXPECT(gbc.pc(), 0x407b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 004A
        gbc.setState(0x74fa, 0xe7fc, 0x3c30, 0xf31d, 0x75b2, 0xf45d, 0x0, 0x1);
        gbc.writeMem(0x74fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe7fc);
        EXPECT(gbc.pc(), 0x74fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 004B
        gbc.setState(0xb01c, 0x7caf, 0x9e90, 0xde0, 0xf4f4, 0x1b15, 0x1, 0x1);
        gbc.writeMem(0xb01c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7caf);
        EXPECT(gbc.pc(), 0xb01d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb01c), 0x47);
        // 47 004C
        gbc.setState(0xcf37, 0x3183, 0x5ec0, 0x6981, 0xc607, 0xca56, 0x0, 0x1);
        gbc.writeMem(0xcf37, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3183);
        EXPECT(gbc.pc(), 0xcf38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf37), 0x47);
        // 47 004D
        gbc.setState(0x3853, 0x9512, 0x3820, 0x644b, 0x2ba, 0xa99f, 0x0, 0x1);
        gbc.writeMem(0x3853, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9512);
        EXPECT(gbc.pc(), 0x3854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 004E
        gbc.setState(0xa9c0, 0xa8c0, 0xbed0, 0x3985, 0x13b8, 0x480c, 0x0, 0x0);
        gbc.writeMem(0xa9c0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa8c0);
        EXPECT(gbc.pc(), 0xa9c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9c0), 0x47);
        // 47 004F
        gbc.setState(0x9288, 0x776a, 0x6200, 0x9a27, 0xc1c7, 0x8051, 0x0, 0x1);
        gbc.writeMem(0x9288, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x776a);
        EXPECT(gbc.pc(), 0x9289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9288), 0x47);
        // 47 0050
        gbc.setState(0x2ef2, 0x122d, 0x7ec0, 0x2509, 0xd7d5, 0x13a5, 0x1, 0x0);
        gbc.writeMem(0x2ef2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x122d);
        EXPECT(gbc.pc(), 0x2ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0051
        gbc.setState(0x892b, 0x12ff, 0x6020, 0x66f2, 0xdf6b, 0x7f5d, 0x0, 0x1);
        gbc.writeMem(0x892b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x12ff);
        EXPECT(gbc.pc(), 0x892c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x892b), 0x47);
        // 47 0052
        gbc.setState(0x1028, 0xc7d4, 0x95e0, 0x76bd, 0xc47d, 0x7d86, 0x1, 0x0);
        gbc.writeMem(0x1028, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc7d4);
        EXPECT(gbc.pc(), 0x1029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0053
        gbc.setState(0x5d6c, 0xcb2, 0x5d00, 0xb87d, 0xe6a, 0x345, 0x1, 0x0);
        gbc.writeMem(0x5d6c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcb2);
        EXPECT(gbc.pc(), 0x5d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0054
        gbc.setState(0x4560, 0x4b30, 0x9710, 0xdb18, 0xdef0, 0x5ab3, 0x1, 0x0);
        gbc.writeMem(0x4560, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x4b30);
        EXPECT(gbc.pc(), 0x4561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0055
        gbc.setState(0xe460, 0x4262, 0xdef0, 0x2d05, 0xb490, 0x8bd2, 0x1, 0x0);
        gbc.writeMem(0xe460, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4262);
        EXPECT(gbc.pc(), 0xe461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe460), 0x47);
        // 47 0056
        gbc.setState(0xc8d9, 0xb964, 0x9b20, 0x26f4, 0xcd78, 0x5451, 0x0, 0x1);
        gbc.writeMem(0xc8d9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb964);
        EXPECT(gbc.pc(), 0xc8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d9), 0x47);
        // 47 0057
        gbc.setState(0x6024, 0x2dcc, 0x6a20, 0xf44d, 0xbb9c, 0x8d09, 0x0, 0x0);
        gbc.writeMem(0x6024, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2dcc);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0058
        gbc.setState(0xbd68, 0x438c, 0x7d0, 0x6730, 0x403a, 0x7dc0, 0x1, 0x1);
        gbc.writeMem(0xbd68, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x438c);
        EXPECT(gbc.pc(), 0xbd69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd68), 0x47);
        // 47 0059
        gbc.setState(0xa338, 0xac80, 0xcc50, 0x229a, 0xcce9, 0x71b6, 0x1, 0x0);
        gbc.writeMem(0xa338, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xac80);
        EXPECT(gbc.pc(), 0xa339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa338), 0x47);
        // 47 005A
        gbc.setState(0x6258, 0xd33d, 0x1030, 0x95e8, 0x7acc, 0x2e11, 0x0, 0x0);
        gbc.writeMem(0x6258, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd33d);
        EXPECT(gbc.pc(), 0x6259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 005B
        gbc.setState(0x9157, 0xa21f, 0x5d10, 0x75b8, 0x9fb7, 0xdf3f, 0x0, 0x1);
        gbc.writeMem(0x9157, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa21f);
        EXPECT(gbc.pc(), 0x9158);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9157), 0x47);
        // 47 005D
        gbc.setState(0x6745, 0xc032, 0x9dc0, 0xec4a, 0xa6d1, 0x665c, 0x1, 0x0);
        gbc.writeMem(0x6745, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc032);
        EXPECT(gbc.pc(), 0x6746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 005E
        gbc.setState(0x6d8e, 0xfd51, 0xa20, 0x8b9b, 0x21a1, 0x3807, 0x1, 0x0);
        gbc.writeMem(0x6d8e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfd51);
        EXPECT(gbc.pc(), 0x6d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 005F
        gbc.setState(0x970e, 0x873b, 0x6200, 0x4c88, 0x3066, 0x20b4, 0x1, 0x1);
        gbc.writeMem(0x970e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x873b);
        EXPECT(gbc.pc(), 0x970f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970e), 0x47);
        // 47 0060
        gbc.setState(0x32d, 0xb54a, 0xe0a0, 0x5a3, 0xb99f, 0xa61a, 0x1, 0x1);
        gbc.writeMem(0x32d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb54a);
        EXPECT(gbc.pc(), 0x32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0061
        gbc.setState(0x4b63, 0x4b3b, 0x6f10, 0x1dae, 0x766b, 0x8338, 0x0, 0x1);
        gbc.writeMem(0x4b63, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4b3b);
        EXPECT(gbc.pc(), 0x4b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0062
        gbc.setState(0xd761, 0x82d7, 0xca80, 0xed45, 0xd8e, 0x64a4, 0x1, 0x1);
        gbc.writeMem(0xd761, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x82d7);
        EXPECT(gbc.pc(), 0xd762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd761), 0x47);
        // 47 0063
        gbc.setState(0xaeb3, 0x4d7e, 0xb0e0, 0x8fa2, 0xab45, 0x2dd9, 0x1, 0x1);
        gbc.writeMem(0xaeb3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4d7e);
        EXPECT(gbc.pc(), 0xaeb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb3), 0x47);
        // 47 0064
        gbc.setState(0x1c67, 0x6ec5, 0xa0, 0xc570, 0x5b2b, 0xadf6, 0x1, 0x1);
        gbc.writeMem(0x1c67, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6ec5);
        EXPECT(gbc.pc(), 0x1c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0065
        gbc.setState(0x3112, 0x6d4e, 0xc460, 0x874c, 0xd8d7, 0xa60, 0x1, 0x0);
        gbc.writeMem(0x3112, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6d4e);
        EXPECT(gbc.pc(), 0x3113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0066
        gbc.setState(0x35e, 0xa5e0, 0xdfe0, 0x72c2, 0xddcf, 0x8c4f, 0x0, 0x0);
        gbc.writeMem(0x35e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa5e0);
        EXPECT(gbc.pc(), 0x35f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0067
        gbc.setState(0x8552, 0xc732, 0x5f50, 0xefc3, 0x353f, 0x15de, 0x0, 0x0);
        gbc.writeMem(0x8552, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc732);
        EXPECT(gbc.pc(), 0x8553);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8552), 0x47);
        // 47 0068
        gbc.setState(0x1922, 0x1bab, 0x4e0, 0x39b, 0x783c, 0x94eb, 0x1, 0x1);
        gbc.writeMem(0x1922, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1bab);
        EXPECT(gbc.pc(), 0x1923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0069
        gbc.setState(0x32d, 0xadd0, 0xb390, 0x5ee2, 0x88c1, 0x4034, 0x1, 0x0);
        gbc.writeMem(0x32d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xadd0);
        EXPECT(gbc.pc(), 0x32e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 006A
        gbc.setState(0x5983, 0xbea0, 0x44a0, 0xc4cd, 0x366d, 0xd2f4, 0x0, 0x1);
        gbc.writeMem(0x5983, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbea0);
        EXPECT(gbc.pc(), 0x5984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 006B
        gbc.setState(0x2d97, 0x1ceb, 0x6f60, 0xe342, 0xa135, 0x4efe, 0x0, 0x1);
        gbc.writeMem(0x2d97, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1ceb);
        EXPECT(gbc.pc(), 0x2d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 006C
        gbc.setState(0x4c18, 0xa411, 0xa0f0, 0x4530, 0xf52, 0xc136, 0x0, 0x1);
        gbc.writeMem(0x4c18, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa411);
        EXPECT(gbc.pc(), 0x4c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 006D
        gbc.setState(0x54a8, 0xbaf0, 0xcaa0, 0xadb0, 0xa6dd, 0x37d6, 0x0, 0x0);
        gbc.writeMem(0x54a8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xbaf0);
        EXPECT(gbc.pc(), 0x54a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 006E
        gbc.setState(0xc208, 0x477c, 0xe280, 0xeef2, 0x16e2, 0x82d1, 0x0, 0x1);
        gbc.writeMem(0xc208, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x477c);
        EXPECT(gbc.pc(), 0xc209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc208), 0x47);
        // 47 006F
        gbc.setState(0x4cd3, 0x2162, 0x10a0, 0x8e, 0x2090, 0x2bb4, 0x1, 0x0);
        gbc.writeMem(0x4cd3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2162);
        EXPECT(gbc.pc(), 0x4cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0070
        gbc.setState(0x12ca, 0xf41f, 0x10e0, 0xf9d0, 0xb329, 0x9621, 0x0, 0x0);
        gbc.writeMem(0x12ca, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf41f);
        EXPECT(gbc.pc(), 0x12cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0071
        gbc.setState(0xb6d8, 0x69da, 0x6210, 0xb361, 0x1f6a, 0x83d9, 0x0, 0x0);
        gbc.writeMem(0xb6d8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x69da);
        EXPECT(gbc.pc(), 0xb6d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d8), 0x47);
        // 47 0072
        gbc.setState(0xd1ba, 0x679b, 0xbcc0, 0x40df, 0x66c8, 0xa31, 0x0, 0x1);
        gbc.writeMem(0xd1ba, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x679b);
        EXPECT(gbc.pc(), 0xd1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ba), 0x47);
        // 47 0073
        gbc.setState(0x2ddc, 0x1a79, 0xee80, 0x3db9, 0x222a, 0xd513, 0x1, 0x0);
        gbc.writeMem(0x2ddc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1a79);
        EXPECT(gbc.pc(), 0x2ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0074
        gbc.setState(0xbc8a, 0xb00b, 0x5b00, 0x1106, 0x7d55, 0x6128, 0x1, 0x0);
        gbc.writeMem(0xbc8a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb00b);
        EXPECT(gbc.pc(), 0xbc8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8a), 0x47);
        // 47 0075
        gbc.setState(0x31b8, 0x63a7, 0xfaf0, 0x6ddd, 0xedc9, 0x4885, 0x0, 0x1);
        gbc.writeMem(0x31b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0x31b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0076
        gbc.setState(0xef7f, 0x3e87, 0xcd20, 0xea13, 0x7a59, 0x8bf2, 0x1, 0x1);
        gbc.writeMem(0xef7f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3e87);
        EXPECT(gbc.pc(), 0xef80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7f), 0x47);
        // 47 0077
        gbc.setState(0xe1fa, 0xd929, 0x8b70, 0xb412, 0x17fc, 0xf78e, 0x0, 0x1);
        gbc.writeMem(0xe1fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd929);
        EXPECT(gbc.pc(), 0xe1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1fa), 0x47);
        // 47 0078
        gbc.setState(0x3cdc, 0xbca2, 0x80a0, 0xf444, 0x7406, 0x9659, 0x0, 0x1);
        gbc.writeMem(0x3cdc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbca2);
        EXPECT(gbc.pc(), 0x3cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0079
        gbc.setState(0x559, 0x7dad, 0xff70, 0x1dc9, 0xa0b7, 0x963, 0x0, 0x0);
        gbc.writeMem(0x559, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7dad);
        EXPECT(gbc.pc(), 0x55a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 007A
        gbc.setState(0x5ea9, 0x8556, 0xead0, 0x3103, 0xc889, 0xddba, 0x1, 0x1);
        gbc.writeMem(0x5ea9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8556);
        EXPECT(gbc.pc(), 0x5eaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 007B
        gbc.setState(0xcbae, 0x2a17, 0x32d0, 0x2bb8, 0x2518, 0x2846, 0x0, 0x1);
        gbc.writeMem(0xcbae, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x2a17);
        EXPECT(gbc.pc(), 0xcbaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbae), 0x47);
        // 47 007C
        gbc.setState(0x9e04, 0xf38f, 0x7fa0, 0x1cdb, 0xc10b, 0x26bf, 0x1, 0x0);
        gbc.writeMem(0x9e04, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf38f);
        EXPECT(gbc.pc(), 0x9e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e04), 0x47);
        // 47 007D
        gbc.setState(0xdb64, 0xc4d2, 0x79d0, 0xd8a1, 0x6f98, 0x1774, 0x1, 0x0);
        gbc.writeMem(0xdb64, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc4d2);
        EXPECT(gbc.pc(), 0xdb65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb64), 0x47);
        // 47 007E
        gbc.setState(0xe9b2, 0xbc3c, 0x17b0, 0x9ea1, 0x8984, 0x3217, 0x0, 0x1);
        gbc.writeMem(0xe9b2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xbc3c);
        EXPECT(gbc.pc(), 0xe9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b2), 0x47);
        // 47 007F
        gbc.setState(0xb1ce, 0x4147, 0xecf0, 0x6d3f, 0x4896, 0x415f, 0x0, 0x0);
        gbc.writeMem(0xb1ce, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4147);
        EXPECT(gbc.pc(), 0xb1cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1ce), 0x47);
        // 47 0080
        gbc.setState(0x84e9, 0xf9cb, 0x9760, 0xdcbc, 0x5fd9, 0xd181, 0x1, 0x1);
        gbc.writeMem(0x84e9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf9cb);
        EXPECT(gbc.pc(), 0x84ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e9), 0x47);
        // 47 0081
        gbc.setState(0xe0ee, 0x3be9, 0x33b0, 0x38fb, 0x78b8, 0x17cb, 0x0, 0x0);
        gbc.writeMem(0xe0ee, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x3be9);
        EXPECT(gbc.pc(), 0xe0ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ee), 0x47);
        // 47 0082
        gbc.setState(0x69b, 0x9603, 0xee0, 0xc18d, 0x706, 0x1f4b, 0x1, 0x0);
        gbc.writeMem(0x69b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0x69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0083
        gbc.setState(0x314d, 0x3ebf, 0x2110, 0xe69e, 0xdd62, 0x215a, 0x1, 0x0);
        gbc.writeMem(0x314d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3ebf);
        EXPECT(gbc.pc(), 0x314e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0084
        gbc.setState(0xac0c, 0xe6fd, 0xab20, 0x6b0, 0xcbac, 0xc531, 0x1, 0x1);
        gbc.writeMem(0xac0c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe6fd);
        EXPECT(gbc.pc(), 0xac0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac0c), 0x47);
        // 47 0085
        gbc.setState(0xc84b, 0xb010, 0x8580, 0x5082, 0xe34d, 0x9119, 0x1, 0x1);
        gbc.writeMem(0xc84b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb010);
        EXPECT(gbc.pc(), 0xc84c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84b), 0x47);
        // 47 0086
        gbc.setState(0xb084, 0xaaf7, 0x9980, 0x8d9b, 0xd626, 0x399c, 0x0, 0x0);
        gbc.writeMem(0xb084, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaaf7);
        EXPECT(gbc.pc(), 0xb085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb084), 0x47);
        // 47 0087
        gbc.setState(0x332c, 0x2042, 0x1ec0, 0x2da7, 0x26a8, 0x8986, 0x0, 0x0);
        gbc.writeMem(0x332c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2042);
        EXPECT(gbc.pc(), 0x332d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0088
        gbc.setState(0x3bab, 0xf886, 0xaef0, 0x40fa, 0xe7b, 0xa933, 0x0, 0x0);
        gbc.writeMem(0x3bab, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf886);
        EXPECT(gbc.pc(), 0x3bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0089
        gbc.setState(0x54f, 0x55c5, 0x9a10, 0x90b2, 0xa85e, 0xbefb, 0x1, 0x1);
        gbc.writeMem(0x54f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x55c5);
        EXPECT(gbc.pc(), 0x550);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 008A
        gbc.setState(0xd009, 0x25b9, 0xedf0, 0xab61, 0xefa6, 0xfae1, 0x0, 0x0);
        gbc.writeMem(0xd009, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x25b9);
        EXPECT(gbc.pc(), 0xd00a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd009), 0x47);
        // 47 008B
        gbc.setState(0x8881, 0x7b7f, 0x730, 0xe481, 0xc8ac, 0x232, 0x1, 0x0);
        gbc.writeMem(0x8881, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7b7f);
        EXPECT(gbc.pc(), 0x8882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8881), 0x47);
        // 47 008C
        gbc.setState(0xdb7d, 0xc683, 0x4a70, 0x7c6, 0x5770, 0x5519, 0x1, 0x1);
        gbc.writeMem(0xdb7d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc683);
        EXPECT(gbc.pc(), 0xdb7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb7d), 0x47);
        // 47 008D
        gbc.setState(0x9bf7, 0xfde5, 0x8e60, 0x91c6, 0x8cbb, 0xf604, 0x1, 0x1);
        gbc.writeMem(0x9bf7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfde5);
        EXPECT(gbc.pc(), 0x9bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf7), 0x47);
        // 47 008E
        gbc.setState(0xe76f, 0x375e, 0xd900, 0x1836, 0xb188, 0x4362, 0x0, 0x1);
        gbc.writeMem(0xe76f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x375e);
        EXPECT(gbc.pc(), 0xe770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76f), 0x47);
        // 47 008F
        gbc.setState(0xc923, 0x4c9c, 0x3270, 0xdfb, 0xc7b0, 0x28ef, 0x0, 0x0);
        gbc.writeMem(0xc923, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4c9c);
        EXPECT(gbc.pc(), 0xc924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc923), 0x47);
        // 47 0091
        gbc.setState(0x8f9e, 0x4fa0, 0x24b0, 0x9503, 0x929c, 0x4760, 0x0, 0x1);
        gbc.writeMem(0x8f9e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4fa0);
        EXPECT(gbc.pc(), 0x8f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f9e), 0x47);
        // 47 0092
        gbc.setState(0x4448, 0x64c9, 0x2940, 0xe3f5, 0xe0e0, 0x8819, 0x1, 0x0);
        gbc.writeMem(0x4448, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x64c9);
        EXPECT(gbc.pc(), 0x4449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0093
        gbc.setState(0x32b9, 0xe3c9, 0xfa70, 0xf071, 0xfb48, 0x803c, 0x1, 0x1);
        gbc.writeMem(0x32b9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe3c9);
        EXPECT(gbc.pc(), 0x32ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0094
        gbc.setState(0xa1ea, 0xcacb, 0x7a0, 0xdf18, 0x9c1c, 0x872a, 0x1, 0x1);
        gbc.writeMem(0xa1ea, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcacb);
        EXPECT(gbc.pc(), 0xa1eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ea), 0x47);
        // 47 0095
        gbc.setState(0xbebd, 0x8940, 0xb910, 0x7541, 0xb65a, 0xe92f, 0x1, 0x0);
        gbc.writeMem(0xbebd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8940);
        EXPECT(gbc.pc(), 0xbebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbebd), 0x47);
        // 47 0096
        gbc.setState(0xd7a4, 0x7faf, 0xef50, 0x4cbe, 0xa904, 0xe8b0, 0x1, 0x1);
        gbc.writeMem(0xd7a4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7faf);
        EXPECT(gbc.pc(), 0xd7a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a4), 0x47);
        // 47 0097
        gbc.setState(0x87a0, 0xb83d, 0xc350, 0x5bbb, 0xaea8, 0xe282, 0x0, 0x0);
        gbc.writeMem(0x87a0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb83d);
        EXPECT(gbc.pc(), 0x87a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a0), 0x47);
        // 47 0098
        gbc.setState(0xa30d, 0x9039, 0xbc70, 0xc298, 0xb42c, 0xf8ff, 0x0, 0x1);
        gbc.writeMem(0xa30d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9039);
        EXPECT(gbc.pc(), 0xa30e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa30d), 0x47);
        // 47 0099
        gbc.setState(0xe96, 0x82f6, 0xc9f0, 0xb74, 0x480c, 0xeeb4, 0x0, 0x0);
        gbc.writeMem(0xe96, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x82f6);
        EXPECT(gbc.pc(), 0xe97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 009A
        gbc.setState(0x3648, 0x471e, 0x950, 0xf573, 0xf999, 0x5cc3, 0x0, 0x0);
        gbc.writeMem(0x3648, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x471e);
        EXPECT(gbc.pc(), 0x3649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 009C
        gbc.setState(0xe59f, 0x1396, 0x4870, 0x2dbd, 0x7a72, 0x5f62, 0x1, 0x1);
        gbc.writeMem(0xe59f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1396);
        EXPECT(gbc.pc(), 0xe5a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59f), 0x47);
        // 47 009D
        gbc.setState(0x1a31, 0xa7df, 0xaf20, 0x2f38, 0x5bab, 0x6f47, 0x1, 0x0);
        gbc.writeMem(0x1a31, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa7df);
        EXPECT(gbc.pc(), 0x1a32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 009E
        gbc.setState(0xde6, 0xd968, 0xd790, 0xaf90, 0x75ac, 0xdb37, 0x0, 0x0);
        gbc.writeMem(0xde6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd968);
        EXPECT(gbc.pc(), 0xde7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 009F
        gbc.setState(0x2810, 0x30be, 0x8570, 0xbb52, 0x9557, 0x1559, 0x0, 0x1);
        gbc.writeMem(0x2810, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x30be);
        EXPECT(gbc.pc(), 0x2811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00A0
        gbc.setState(0xb9, 0xf308, 0x8430, 0x63c7, 0x3257, 0xdea8, 0x0, 0x0);
        gbc.writeMem(0xb9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf308);
        EXPECT(gbc.pc(), 0xba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00A1
        gbc.setState(0xa64c, 0xb541, 0xe090, 0x7cc4, 0xded6, 0x3ed4, 0x1, 0x1);
        gbc.writeMem(0xa64c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb541);
        EXPECT(gbc.pc(), 0xa64d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa64c), 0x47);
        // 47 00A2
        gbc.setState(0x80c4, 0x7a01, 0xc150, 0xf230, 0x2fed, 0x8669, 0x0, 0x1);
        gbc.writeMem(0x80c4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7a01);
        EXPECT(gbc.pc(), 0x80c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c4), 0x47);
        // 47 00A3
        gbc.setState(0xaa47, 0x20b3, 0xb3a0, 0x94d4, 0xd071, 0x53d0, 0x0, 0x1);
        gbc.writeMem(0xaa47, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x20b3);
        EXPECT(gbc.pc(), 0xaa48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa47), 0x47);
        // 47 00A4
        gbc.setState(0xbfd2, 0xec31, 0x7400, 0xd25b, 0x5c19, 0xc907, 0x0, 0x0);
        gbc.writeMem(0xbfd2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xec31);
        EXPECT(gbc.pc(), 0xbfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd2), 0x47);
        // 47 00A5
        gbc.setState(0x3312, 0xf78d, 0x2300, 0x6d5b, 0x7408, 0xd115, 0x1, 0x0);
        gbc.writeMem(0x3312, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf78d);
        EXPECT(gbc.pc(), 0x3313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00A6
        gbc.setState(0x64a8, 0xce71, 0x21f0, 0x754d, 0x1857, 0x2d37, 0x0, 0x0);
        gbc.writeMem(0x64a8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xce71);
        EXPECT(gbc.pc(), 0x64a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00A7
        gbc.setState(0x1949, 0x4570, 0xf480, 0xc0ee, 0x8a49, 0x57b0, 0x1, 0x0);
        gbc.writeMem(0x1949, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4570);
        EXPECT(gbc.pc(), 0x194a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00A8
        gbc.setState(0x7696, 0xe87c, 0xe3e0, 0xcb6, 0x599, 0xd932, 0x0, 0x0);
        gbc.writeMem(0x7696, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe87c);
        EXPECT(gbc.pc(), 0x7697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00A9
        gbc.setState(0xb0ad, 0x6f42, 0xc060, 0x6a90, 0xcb7c, 0xfc18, 0x1, 0x1);
        gbc.writeMem(0xb0ad, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6f42);
        EXPECT(gbc.pc(), 0xb0ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ad), 0x47);
        // 47 00AB
        gbc.setState(0x8ab7, 0x9055, 0x52a0, 0x9f35, 0xae42, 0x29ae, 0x0, 0x1);
        gbc.writeMem(0x8ab7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9055);
        EXPECT(gbc.pc(), 0x8ab8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab7), 0x47);
        // 47 00AC
        gbc.setState(0xb6da, 0xbfb5, 0xd010, 0x94, 0x8c60, 0x6ab5, 0x0, 0x1);
        gbc.writeMem(0xb6da, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbfb5);
        EXPECT(gbc.pc(), 0xb6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6da), 0x47);
        // 47 00AD
        gbc.setState(0x2ded, 0x6c3d, 0xe20, 0x199e, 0xada8, 0x4c70, 0x0, 0x1);
        gbc.writeMem(0x2ded, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6c3d);
        EXPECT(gbc.pc(), 0x2dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00AE
        gbc.setState(0xb5cc, 0x343a, 0xa520, 0xcfc, 0x2d64, 0x22de, 0x1, 0x1);
        gbc.writeMem(0xb5cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x343a);
        EXPECT(gbc.pc(), 0xb5cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5cc), 0x47);
        // 47 00B0
        gbc.setState(0xd48e, 0xf4b2, 0xade0, 0xa78c, 0x6800, 0x5b60, 0x1, 0x0);
        gbc.writeMem(0xd48e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf4b2);
        EXPECT(gbc.pc(), 0xd48f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd48e), 0x47);
        // 47 00B1
        gbc.setState(0x884a, 0xff90, 0x4790, 0x6412, 0x5183, 0xad4, 0x0, 0x1);
        gbc.writeMem(0x884a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xff90);
        EXPECT(gbc.pc(), 0x884b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884a), 0x47);
        // 47 00B2
        gbc.setState(0xc36a, 0x3255, 0xb0d0, 0x55f0, 0x1474, 0xce27, 0x0, 0x1);
        gbc.writeMem(0xc36a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3255);
        EXPECT(gbc.pc(), 0xc36b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36a), 0x47);
        // 47 00B3
        gbc.setState(0xa660, 0xe936, 0xb2e0, 0x318f, 0xf74e, 0x9827, 0x0, 0x0);
        gbc.writeMem(0xa660, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe936);
        EXPECT(gbc.pc(), 0xa661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa660), 0x47);
        // 47 00B4
        gbc.setState(0x3237, 0xb6b0, 0xe7c0, 0xf1bf, 0x9161, 0x3238, 0x1, 0x0);
        gbc.writeMem(0x3237, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb6b0);
        EXPECT(gbc.pc(), 0x3238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00B5
        gbc.setState(0x4bd7, 0xcd74, 0x6720, 0x65c5, 0xa737, 0x1e0b, 0x0, 0x0);
        gbc.writeMem(0x4bd7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcd74);
        EXPECT(gbc.pc(), 0x4bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00B6
        gbc.setState(0x60cb, 0x6890, 0x39a0, 0x7c3e, 0x941, 0x324, 0x1, 0x1);
        gbc.writeMem(0x60cb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6890);
        EXPECT(gbc.pc(), 0x60cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00B7
        gbc.setState(0x2dfe, 0xcaf9, 0x3310, 0x7281, 0xc46, 0xb7d1, 0x0, 0x0);
        gbc.writeMem(0x2dfe, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xcaf9);
        EXPECT(gbc.pc(), 0x2dff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00B8
        gbc.setState(0xcfad, 0x5e27, 0x4a10, 0xe9ea, 0x6d36, 0x7253, 0x1, 0x0);
        gbc.writeMem(0xcfad, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5e27);
        EXPECT(gbc.pc(), 0xcfae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfad), 0x47);
        // 47 00B9
        gbc.setState(0xe12a, 0xb739, 0xb6f0, 0xa8ba, 0x4c9d, 0xe11f, 0x0, 0x1);
        gbc.writeMem(0xe12a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb739);
        EXPECT(gbc.pc(), 0xe12b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe12a), 0x47);
        // 47 00BA
        gbc.setState(0x497a, 0xb0a5, 0xe9e0, 0x7097, 0x211b, 0x5ae7, 0x1, 0x0);
        gbc.writeMem(0x497a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb0a5);
        EXPECT(gbc.pc(), 0x497b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00BC
        gbc.setState(0x9b51, 0x8360, 0xf410, 0x4a47, 0xed82, 0x9d99, 0x1, 0x0);
        gbc.writeMem(0x9b51, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8360);
        EXPECT(gbc.pc(), 0x9b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b51), 0x47);
        // 47 00BD
        gbc.setState(0x8a1e, 0x21c8, 0xe4c0, 0x6461, 0xa3, 0x4cec, 0x1, 0x0);
        gbc.writeMem(0x8a1e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x21c8);
        EXPECT(gbc.pc(), 0x8a1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1e), 0x47);
        // 47 00BE
        gbc.setState(0xa45a, 0xaf46, 0x46c0, 0x88a3, 0x538a, 0xc99c, 0x0, 0x1);
        gbc.writeMem(0xa45a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaf46);
        EXPECT(gbc.pc(), 0xa45b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45a), 0x47);
        // 47 00BF
        gbc.setState(0x4516, 0xac56, 0x1470, 0xc77f, 0x13c6, 0xb300, 0x0, 0x1);
        gbc.writeMem(0x4516, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xac56);
        EXPECT(gbc.pc(), 0x4517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00C0
        gbc.setState(0x3955, 0x9f37, 0x4190, 0xfd81, 0x5604, 0x699a, 0x1, 0x1);
        gbc.writeMem(0x3955, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9f37);
        EXPECT(gbc.pc(), 0x3956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00C1
        gbc.setState(0xda48, 0xd63d, 0x9850, 0xb9c1, 0xbabb, 0xd0c3, 0x1, 0x0);
        gbc.writeMem(0xda48, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd63d);
        EXPECT(gbc.pc(), 0xda49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda48), 0x47);
        // 47 00C2
        gbc.setState(0x74a, 0x63bd, 0x3260, 0x275f, 0x7757, 0x1081, 0x0, 0x0);
        gbc.writeMem(0x74a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x63bd);
        EXPECT(gbc.pc(), 0x74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00C3
        gbc.setState(0xd488, 0x61d3, 0x9a90, 0x284, 0xb85b, 0xb157, 0x0, 0x0);
        gbc.writeMem(0xd488, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x61d3);
        EXPECT(gbc.pc(), 0xd489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd488), 0x47);
        // 47 00C4
        gbc.setState(0x4b62, 0xb07e, 0x8b20, 0xe4e3, 0xf548, 0x8869, 0x0, 0x0);
        gbc.writeMem(0x4b62, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb07e);
        EXPECT(gbc.pc(), 0x4b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00C5
        gbc.setState(0xec3d, 0xd9e0, 0x1200, 0xcfe2, 0xdb9, 0x3ac4, 0x1, 0x1);
        gbc.writeMem(0xec3d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd9e0);
        EXPECT(gbc.pc(), 0xec3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec3d), 0x47);
        // 47 00C6
        gbc.setState(0x2965, 0x9c0b, 0x5100, 0x6141, 0x984c, 0x1e5e, 0x1, 0x1);
        gbc.writeMem(0x2965, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9c0b);
        EXPECT(gbc.pc(), 0x2966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00C7
        gbc.setState(0xb72b, 0xb039, 0xc7e0, 0x67ff, 0xaf11, 0xeea2, 0x0, 0x0);
        gbc.writeMem(0xb72b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb039);
        EXPECT(gbc.pc(), 0xb72c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72b), 0x47);
        // 47 00C8
        gbc.setState(0xd97b, 0x274c, 0x81a0, 0x9ad8, 0xdd01, 0xb58f, 0x0, 0x0);
        gbc.writeMem(0xd97b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x274c);
        EXPECT(gbc.pc(), 0xd97c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97b), 0x47);
        // 47 00C9
        gbc.setState(0x1a4c, 0x79ce, 0xbc20, 0xbc50, 0x39d3, 0x8b75, 0x1, 0x0);
        gbc.writeMem(0x1a4c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x79ce);
        EXPECT(gbc.pc(), 0x1a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00CA
        gbc.setState(0x91d2, 0xfbe3, 0xd8f0, 0x6f32, 0xa90f, 0xc5de, 0x0, 0x0);
        gbc.writeMem(0x91d2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfbe3);
        EXPECT(gbc.pc(), 0x91d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d2), 0x47);
        // 47 00CB
        gbc.setState(0x4eb0, 0xf013, 0x7b60, 0x11bc, 0x3f79, 0x6b63, 0x0, 0x1);
        gbc.writeMem(0x4eb0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf013);
        EXPECT(gbc.pc(), 0x4eb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00CC
        gbc.setState(0xe07c, 0x31e1, 0x6a40, 0x5e03, 0xb4e4, 0xbc3, 0x1, 0x0);
        gbc.writeMem(0xe07c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x31e1);
        EXPECT(gbc.pc(), 0xe07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07c), 0x47);
        // 47 00CD
        gbc.setState(0x4c06, 0xd08d, 0xefe0, 0xb213, 0x26f6, 0x84a0, 0x1, 0x0);
        gbc.writeMem(0x4c06, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd08d);
        EXPECT(gbc.pc(), 0x4c07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00CE
        gbc.setState(0xd890, 0x8c2b, 0x8bb0, 0x9926, 0xd2f8, 0x5c4c, 0x0, 0x0);
        gbc.writeMem(0xd890, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8c2b);
        EXPECT(gbc.pc(), 0xd891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd890), 0x47);
        // 47 00CF
        gbc.setState(0xb741, 0x551a, 0x6510, 0xfe93, 0xae8b, 0xad04, 0x1, 0x0);
        gbc.writeMem(0xb741, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x551a);
        EXPECT(gbc.pc(), 0xb742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb741), 0x47);
        // 47 00D1
        gbc.setState(0x53f0, 0x152f, 0x4260, 0xbdc9, 0x1dce, 0x4798, 0x0, 0x0);
        gbc.writeMem(0x53f0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x152f);
        EXPECT(gbc.pc(), 0x53f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00D2
        gbc.setState(0xac89, 0x8434, 0xdbb0, 0x9e44, 0x44ce, 0x3ecf, 0x1, 0x0);
        gbc.writeMem(0xac89, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8434);
        EXPECT(gbc.pc(), 0xac8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac89), 0x47);
        // 47 00D3
        gbc.setState(0xdc90, 0xee4b, 0xd660, 0xdccb, 0x56d6, 0xf0cc, 0x1, 0x1);
        gbc.writeMem(0xdc90, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xee4b);
        EXPECT(gbc.pc(), 0xdc91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc90), 0x47);
        // 47 00D4
        gbc.setState(0x3c01, 0x9ae, 0x63e0, 0x2a3a, 0xbe63, 0xace, 0x0, 0x0);
        gbc.writeMem(0x3c01, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9ae);
        EXPECT(gbc.pc(), 0x3c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00D5
        gbc.setState(0x8a5a, 0x403a, 0x4b0, 0x429b, 0x3b86, 0x1049, 0x0, 0x0);
        gbc.writeMem(0x8a5a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x403a);
        EXPECT(gbc.pc(), 0x8a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a5a), 0x47);
        // 47 00D6
        gbc.setState(0x669b, 0x6898, 0xc010, 0x851d, 0xe799, 0xbda6, 0x0, 0x1);
        gbc.writeMem(0x669b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6898);
        EXPECT(gbc.pc(), 0x669c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00D7
        gbc.setState(0x68fc, 0x3cc5, 0xed40, 0x56fb, 0x6b21, 0x96a3, 0x0, 0x0);
        gbc.writeMem(0x68fc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3cc5);
        EXPECT(gbc.pc(), 0x68fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00DA
        gbc.setState(0x3314, 0x1808, 0x41f0, 0xe3bc, 0x7dec, 0x17af, 0x0, 0x0);
        gbc.writeMem(0x3314, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1808);
        EXPECT(gbc.pc(), 0x3315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00DB
        gbc.setState(0x3c22, 0xd6f6, 0xcc50, 0xb042, 0x9917, 0xd83c, 0x0, 0x1);
        gbc.writeMem(0x3c22, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd6f6);
        EXPECT(gbc.pc(), 0x3c23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00DC
        gbc.setState(0x6304, 0x4e6e, 0x14e0, 0x5137, 0x8d1b, 0xde10, 0x0, 0x0);
        gbc.writeMem(0x6304, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x4e6e);
        EXPECT(gbc.pc(), 0x6305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00DD
        gbc.setState(0x604e, 0x13a2, 0xcb30, 0x5c24, 0x2013, 0x8acc, 0x1, 0x1);
        gbc.writeMem(0x604e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x13a2);
        EXPECT(gbc.pc(), 0x604f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00DE
        gbc.setState(0x4314, 0x8b8b, 0x1420, 0x4724, 0x9865, 0x82fa, 0x0, 0x0);
        gbc.writeMem(0x4314, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8b8b);
        EXPECT(gbc.pc(), 0x4315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00DF
        gbc.setState(0xc42b, 0x1857, 0x6070, 0x792f, 0xd384, 0xbaff, 0x0, 0x0);
        gbc.writeMem(0xc42b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1857);
        EXPECT(gbc.pc(), 0xc42c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc42b), 0x47);
        // 47 00E0
        gbc.setState(0x3a27, 0xc5b1, 0xb9e0, 0xb5c2, 0x6c1e, 0x7b3a, 0x1, 0x0);
        gbc.writeMem(0x3a27, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc5b1);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00E1
        gbc.setState(0xb6c6, 0xb54b, 0x5470, 0x979c, 0xcc89, 0xab5c, 0x0, 0x1);
        gbc.writeMem(0xb6c6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb54b);
        EXPECT(gbc.pc(), 0xb6c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c6), 0x47);
        // 47 00E2
        gbc.setState(0x98d2, 0x4f30, 0xb860, 0x785d, 0x5b50, 0x11a0, 0x0, 0x0);
        gbc.writeMem(0x98d2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4f30);
        EXPECT(gbc.pc(), 0x98d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d2), 0x47);
        // 47 00E3
        gbc.setState(0xdaf4, 0xff1e, 0x7e40, 0x80a9, 0x1ae0, 0xda32, 0x1, 0x0);
        gbc.writeMem(0xdaf4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xff1e);
        EXPECT(gbc.pc(), 0xdaf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf4), 0x47);
        // 47 00E4
        gbc.setState(0x3fcf, 0x13b0, 0xaea0, 0x7d5d, 0xff3d, 0xc538, 0x1, 0x1);
        gbc.writeMem(0x3fcf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x13b0);
        EXPECT(gbc.pc(), 0x3fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00E5
        gbc.setState(0x59c1, 0x3d53, 0xcc90, 0xa5ad, 0xbd49, 0x1997, 0x0, 0x0);
        gbc.writeMem(0x59c1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3d53);
        EXPECT(gbc.pc(), 0x59c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00E6
        gbc.setState(0xa832, 0x611e, 0xb710, 0xef71, 0x9b5e, 0x536b, 0x1, 0x0);
        gbc.writeMem(0xa832, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x611e);
        EXPECT(gbc.pc(), 0xa833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa832), 0x47);
        // 47 00E7
        gbc.setState(0x6c72, 0xf46b, 0x3260, 0x23b3, 0xd0bb, 0xa6d7, 0x1, 0x0);
        gbc.writeMem(0x6c72, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf46b);
        EXPECT(gbc.pc(), 0x6c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00E8
        gbc.setState(0x8082, 0x1e45, 0xabf0, 0x2ef1, 0xdd6a, 0x5216, 0x1, 0x1);
        gbc.writeMem(0x8082, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1e45);
        EXPECT(gbc.pc(), 0x8083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8082), 0x47);
        // 47 00E9
        gbc.setState(0x29eb, 0x652f, 0x4010, 0xed07, 0x73fd, 0xdf4b, 0x0, 0x1);
        gbc.writeMem(0x29eb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x652f);
        EXPECT(gbc.pc(), 0x29ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00EA
        gbc.setState(0xdaad, 0x3019, 0x1930, 0x83ab, 0x2997, 0xff56, 0x0, 0x0);
        gbc.writeMem(0xdaad, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3019);
        EXPECT(gbc.pc(), 0xdaae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaad), 0x47);
        // 47 00EB
        gbc.setState(0x1b77, 0xf540, 0x72c0, 0x86c6, 0x5a08, 0x1cc6, 0x1, 0x0);
        gbc.writeMem(0x1b77, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf540);
        EXPECT(gbc.pc(), 0x1b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00EC
        gbc.setState(0x7bb9, 0x140e, 0x1c70, 0x5a40, 0x8c63, 0x7762, 0x0, 0x0);
        gbc.writeMem(0x7bb9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x140e);
        EXPECT(gbc.pc(), 0x7bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 00ED
        gbc.setState(0xe5c4, 0x4ecf, 0x6d60, 0x16fd, 0x998b, 0xa034, 0x0, 0x1);
        gbc.writeMem(0xe5c4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4ecf);
        EXPECT(gbc.pc(), 0xe5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c4), 0x47);
        // 47 00EE
        gbc.setState(0x12ae, 0xd457, 0x4800, 0xc457, 0xac78, 0xa292, 0x1, 0x1);
        gbc.writeMem(0x12ae, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd457);
        EXPECT(gbc.pc(), 0x12af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00F0
        gbc.setState(0xdf51, 0xa09b, 0x8e0, 0x916a, 0xc59, 0xb89d, 0x1, 0x0);
        gbc.writeMem(0xdf51, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xa09b);
        EXPECT(gbc.pc(), 0xdf52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf51), 0x47);
        // 47 00F1
        gbc.setState(0x1d29, 0x645, 0xdc20, 0x52c1, 0x1570, 0xde0c, 0x1, 0x1);
        gbc.writeMem(0x1d29, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x645);
        EXPECT(gbc.pc(), 0x1d2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00F2
        gbc.setState(0x3cdf, 0x4848, 0x20a0, 0xeb43, 0xbcb8, 0x3e86, 0x0, 0x1);
        gbc.writeMem(0x3cdf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4848);
        EXPECT(gbc.pc(), 0x3ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00F3
        gbc.setState(0xbfc6, 0xc11, 0x6480, 0x7b6b, 0x8090, 0xdd06, 0x1, 0x0);
        gbc.writeMem(0xbfc6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc11);
        EXPECT(gbc.pc(), 0xbfc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc6), 0x47);
        // 47 00F4
        gbc.setState(0x8c7b, 0xfd66, 0x4c20, 0x5ce4, 0xeb4, 0xd62e, 0x1, 0x1);
        gbc.writeMem(0x8c7b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfd66);
        EXPECT(gbc.pc(), 0x8c7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c7b), 0x47);
        // 47 00F5
        gbc.setState(0x4ae, 0x6b15, 0xeca0, 0x3ae5, 0xc8b8, 0x71c7, 0x0, 0x0);
        gbc.writeMem(0x4ae, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6b15);
        EXPECT(gbc.pc(), 0x4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00F6
        gbc.setState(0xec1e, 0x5310, 0xe0d0, 0x9d0a, 0xd477, 0xb080, 0x0, 0x1);
        gbc.writeMem(0xec1e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5310);
        EXPECT(gbc.pc(), 0xec1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1e), 0x47);
        // 47 00F7
        gbc.setState(0xea14, 0x9ef6, 0x7910, 0xa810, 0xbc15, 0xdbe5, 0x0, 0x0);
        gbc.writeMem(0xea14, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9ef6);
        EXPECT(gbc.pc(), 0xea15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea14), 0x47);
        // 47 00F8
        gbc.setState(0x3d7e, 0x5463, 0xcec0, 0x42, 0x5f11, 0x107e, 0x1, 0x0);
        gbc.writeMem(0x3d7e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5463);
        EXPECT(gbc.pc(), 0x3d7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00F9
        gbc.setState(0xb72f, 0xb17b, 0xcdc0, 0xa845, 0xace1, 0xea3e, 0x1, 0x1);
        gbc.writeMem(0xb72f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb17b);
        EXPECT(gbc.pc(), 0xb730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72f), 0x47);
        // 47 00FA
        gbc.setState(0x7345, 0xf771, 0x3420, 0x81b6, 0xb4dd, 0x8361, 0x1, 0x1);
        gbc.writeMem(0x7345, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf771);
        EXPECT(gbc.pc(), 0x7346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 00FB
        gbc.setState(0xc23b, 0xea0b, 0x64d0, 0x302, 0x53b, 0xfa88, 0x1, 0x0);
        gbc.writeMem(0xc23b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xea0b);
        EXPECT(gbc.pc(), 0xc23c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23b), 0x47);
        // 47 00FC
        gbc.setState(0x5873, 0x5302, 0x1a90, 0x652b, 0x7692, 0x9fb3, 0x0, 0x0);
        gbc.writeMem(0x5873, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5302);
        EXPECT(gbc.pc(), 0x5874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 00FD
        gbc.setState(0x77c2, 0x6af2, 0x9580, 0x4371, 0x540e, 0x4543, 0x0, 0x0);
        gbc.writeMem(0x77c2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6af2);
        EXPECT(gbc.pc(), 0x77c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 00FE
        gbc.setState(0x8c7, 0xcd2b, 0xc310, 0xa4e9, 0x6450, 0xd207, 0x0, 0x1);
        gbc.writeMem(0x8c7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xcd2b);
        EXPECT(gbc.pc(), 0x8c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0100
        gbc.setState(0xed58, 0xc014, 0x4bd0, 0x120c, 0x93ee, 0x6daa, 0x0, 0x1);
        gbc.writeMem(0xed58, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc014);
        EXPECT(gbc.pc(), 0xed59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed58), 0x47);
        // 47 0101
        gbc.setState(0xe648, 0xa9be, 0x1800, 0x7500, 0x988f, 0xae10, 0x0, 0x1);
        gbc.writeMem(0xe648, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa9be);
        EXPECT(gbc.pc(), 0xe649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe648), 0x47);
        // 47 0102
        gbc.setState(0xecac, 0x7bbd, 0x5a60, 0xcfa3, 0xd39a, 0x56d, 0x0, 0x0);
        gbc.writeMem(0xecac, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7bbd);
        EXPECT(gbc.pc(), 0xecad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecac), 0x47);
        // 47 0103
        gbc.setState(0x8931, 0xc6e6, 0x3830, 0x1ad9, 0x6c97, 0xf414, 0x0, 0x0);
        gbc.writeMem(0x8931, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc6e6);
        EXPECT(gbc.pc(), 0x8932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8931), 0x47);
        // 47 0105
        gbc.setState(0x745b, 0xdb6, 0x8fc0, 0xc8c7, 0x3dcf, 0x4d7e, 0x0, 0x0);
        gbc.writeMem(0x745b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xdb6);
        EXPECT(gbc.pc(), 0x745c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0106
        gbc.setState(0x90cf, 0x3324, 0x20c0, 0x12bb, 0x165e, 0x7afe, 0x1, 0x1);
        gbc.writeMem(0x90cf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3324);
        EXPECT(gbc.pc(), 0x90d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90cf), 0x47);
        // 47 0107
        gbc.setState(0x6a83, 0x93bb, 0xb1b0, 0x554e, 0x45c5, 0x5728, 0x0, 0x0);
        gbc.writeMem(0x6a83, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x93bb);
        EXPECT(gbc.pc(), 0x6a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0108
        gbc.setState(0x82be, 0xd907, 0x1de0, 0xd189, 0xc2c7, 0x19f0, 0x0, 0x1);
        gbc.writeMem(0x82be, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd907);
        EXPECT(gbc.pc(), 0x82bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82be), 0x47);
        // 47 0109
        gbc.setState(0xbed4, 0xc14a, 0x31d0, 0x3abc, 0x11d2, 0x2c82, 0x0, 0x1);
        gbc.writeMem(0xbed4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc14a);
        EXPECT(gbc.pc(), 0xbed5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed4), 0x47);
        // 47 010C
        gbc.setState(0x522e, 0x4efd, 0xa5b0, 0x3449, 0x29, 0x7d3a, 0x0, 0x1);
        gbc.writeMem(0x522e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4efd);
        EXPECT(gbc.pc(), 0x522f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 010D
        gbc.setState(0x54ef, 0x5181, 0x6b90, 0xc15c, 0xaa36, 0x129c, 0x1, 0x0);
        gbc.writeMem(0x54ef, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5181);
        EXPECT(gbc.pc(), 0x54f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 010E
        gbc.setState(0x27a3, 0xecdb, 0x6fe0, 0xa7f6, 0xa7f8, 0x498a, 0x0, 0x0);
        gbc.writeMem(0x27a3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xecdb);
        EXPECT(gbc.pc(), 0x27a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 010F
        gbc.setState(0x18ed, 0x2645, 0xe810, 0x8c98, 0x2884, 0xe6ec, 0x0, 0x0);
        gbc.writeMem(0x18ed, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2645);
        EXPECT(gbc.pc(), 0x18ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0110
        gbc.setState(0x3905, 0x726b, 0x3ad0, 0x6baf, 0x7b36, 0x27b2, 0x1, 0x0);
        gbc.writeMem(0x3905, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0x3906);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0111
        gbc.setState(0x5910, 0x5d09, 0x8410, 0x8ed0, 0xb2c, 0xd2fa, 0x1, 0x1);
        gbc.writeMem(0x5910, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5d09);
        EXPECT(gbc.pc(), 0x5911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0112
        gbc.setState(0x7d82, 0xa3ac, 0x1de0, 0x4e12, 0xcff, 0xdab, 0x1, 0x1);
        gbc.writeMem(0x7d82, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa3ac);
        EXPECT(gbc.pc(), 0x7d83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0113
        gbc.setState(0xc781, 0xfd2d, 0xa850, 0x1336, 0x1b5d, 0x8f4c, 0x0, 0x0);
        gbc.writeMem(0xc781, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfd2d);
        EXPECT(gbc.pc(), 0xc782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc781), 0x47);
        // 47 0114
        gbc.setState(0xb312, 0xda23, 0xfaf0, 0x6590, 0x47e2, 0x3728, 0x0, 0x1);
        gbc.writeMem(0xb312, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xda23);
        EXPECT(gbc.pc(), 0xb313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb312), 0x47);
        // 47 0115
        gbc.setState(0xd923, 0x4a99, 0x8ec0, 0xe734, 0x5ebb, 0x29fe, 0x1, 0x0);
        gbc.writeMem(0xd923, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4a99);
        EXPECT(gbc.pc(), 0xd924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd923), 0x47);
        // 47 0116
        gbc.setState(0xc7cc, 0xb073, 0xc6d0, 0xaf35, 0xd8d7, 0x6621, 0x0, 0x0);
        gbc.writeMem(0xc7cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb073);
        EXPECT(gbc.pc(), 0xc7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7cc), 0x47);
        // 47 0117
        gbc.setState(0xa785, 0x83a9, 0xa970, 0x8460, 0x3a1e, 0x3b15, 0x0, 0x1);
        gbc.writeMem(0xa785, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x83a9);
        EXPECT(gbc.pc(), 0xa786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa785), 0x47);
        // 47 0118
        gbc.setState(0x40a6, 0x3eb0, 0x3620, 0x836, 0xf6a2, 0x3ccd, 0x0, 0x0);
        gbc.writeMem(0x40a6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3eb0);
        EXPECT(gbc.pc(), 0x40a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0119
        gbc.setState(0x17c, 0x391f, 0xa790, 0xaa8d, 0xb9c4, 0x6b75, 0x0, 0x1);
        gbc.writeMem(0x17c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x391f);
        EXPECT(gbc.pc(), 0x17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 011A
        gbc.setState(0x4d31, 0xaf8f, 0x2760, 0x453d, 0x24cb, 0x387c, 0x0, 0x1);
        gbc.writeMem(0x4d31, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xaf8f);
        EXPECT(gbc.pc(), 0x4d32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 011B
        gbc.setState(0xc61, 0xf724, 0x1a80, 0xd3a7, 0x42f3, 0xb7c7, 0x0, 0x1);
        gbc.writeMem(0xc61, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf724);
        EXPECT(gbc.pc(), 0xc62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 011C
        gbc.setState(0x4820, 0x8957, 0x72b0, 0x1c20, 0x83ce, 0xb897, 0x1, 0x0);
        gbc.writeMem(0x4820, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8957);
        EXPECT(gbc.pc(), 0x4821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 011D
        gbc.setState(0x2576, 0x4e39, 0x8ca0, 0xdea0, 0x53, 0xae5e, 0x0, 0x1);
        gbc.writeMem(0x2576, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4e39);
        EXPECT(gbc.pc(), 0x2577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 011E
        gbc.setState(0xf5a, 0x5d4, 0xe7e0, 0x345c, 0xc221, 0xc72, 0x0, 0x1);
        gbc.writeMem(0xf5a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5d4);
        EXPECT(gbc.pc(), 0xf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 011F
        gbc.setState(0x2163, 0xe025, 0x1980, 0x3466, 0x5f43, 0x294e, 0x0, 0x0);
        gbc.writeMem(0x2163, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe025);
        EXPECT(gbc.pc(), 0x2164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0120
        gbc.setState(0x7be4, 0x7821, 0xd8c0, 0x54c0, 0x3044, 0xd572, 0x0, 0x0);
        gbc.writeMem(0x7be4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7821);
        EXPECT(gbc.pc(), 0x7be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0121
        gbc.setState(0xd6c7, 0x169e, 0x5020, 0x9fdd, 0x5091, 0x2cae, 0x1, 0x1);
        gbc.writeMem(0xd6c7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x169e);
        EXPECT(gbc.pc(), 0xd6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6c7), 0x47);
        // 47 0122
        gbc.setState(0x51c, 0x38ba, 0x4a20, 0x4636, 0xbc77, 0x236a, 0x0, 0x0);
        gbc.writeMem(0x51c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x38ba);
        EXPECT(gbc.pc(), 0x51d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0123
        gbc.setState(0x935f, 0xbe35, 0xe9d0, 0xa4df, 0xbcc1, 0x3111, 0x0, 0x1);
        gbc.writeMem(0x935f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbe35);
        EXPECT(gbc.pc(), 0x9360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935f), 0x47);
        // 47 0124
        gbc.setState(0xafbb, 0xa98f, 0x6b50, 0xdccb, 0x1b37, 0x67b1, 0x0, 0x1);
        gbc.writeMem(0xafbb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa98f);
        EXPECT(gbc.pc(), 0xafbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbb), 0x47);
        // 47 0125
        gbc.setState(0xc75b, 0x500f, 0xcd30, 0xc845, 0xa63d, 0x64f2, 0x0, 0x0);
        gbc.writeMem(0xc75b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x500f);
        EXPECT(gbc.pc(), 0xc75c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc75b), 0x47);
        // 47 0126
        gbc.setState(0x5c18, 0x4f3, 0x56a0, 0x5ff6, 0xa225, 0x3ea9, 0x0, 0x0);
        gbc.writeMem(0x5c18, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4f3);
        EXPECT(gbc.pc(), 0x5c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0127
        gbc.setState(0x9631, 0x8a08, 0x6a30, 0x8c4d, 0x8433, 0x1845, 0x1, 0x0);
        gbc.writeMem(0x9631, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8a08);
        EXPECT(gbc.pc(), 0x9632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9631), 0x47);
        // 47 0128
        gbc.setState(0x1e15, 0xe138, 0x7aa0, 0x600f, 0xaa7f, 0x288a, 0x0, 0x0);
        gbc.writeMem(0x1e15, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe138);
        EXPECT(gbc.pc(), 0x1e16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0129
        gbc.setState(0x8238, 0xbaaf, 0x42c0, 0xbb55, 0xe2ec, 0x8e95, 0x0, 0x0);
        gbc.writeMem(0x8238, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbaaf);
        EXPECT(gbc.pc(), 0x8239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8238), 0x47);
        // 47 012A
        gbc.setState(0x878a, 0x8800, 0x88a0, 0x1081, 0x39b7, 0x5213, 0x0, 0x1);
        gbc.writeMem(0x878a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8800);
        EXPECT(gbc.pc(), 0x878b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x878a), 0x47);
        // 47 012B
        gbc.setState(0x9918, 0x8623, 0xf640, 0x6513, 0x8836, 0x7987, 0x0, 0x0);
        gbc.writeMem(0x9918, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8623);
        EXPECT(gbc.pc(), 0x9919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9918), 0x47);
        // 47 012C
        gbc.setState(0x5b0c, 0xd809, 0xb310, 0x3d1b, 0x8ea0, 0x8306, 0x0, 0x1);
        gbc.writeMem(0x5b0c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd809);
        EXPECT(gbc.pc(), 0x5b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 012D
        gbc.setState(0x9e4f, 0x7518, 0x41d0, 0xc529, 0x22ed, 0x4929, 0x1, 0x1);
        gbc.writeMem(0x9e4f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7518);
        EXPECT(gbc.pc(), 0x9e50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e4f), 0x47);
        // 47 012E
        gbc.setState(0x69cc, 0x1d31, 0xafa0, 0x2a20, 0x6e1d, 0xee7, 0x0, 0x0);
        gbc.writeMem(0x69cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1d31);
        EXPECT(gbc.pc(), 0x69cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 012F
        gbc.setState(0x7961, 0x19e0, 0x9a30, 0x413f, 0xc39, 0x474a, 0x0, 0x0);
        gbc.writeMem(0x7961, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x19e0);
        EXPECT(gbc.pc(), 0x7962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0130
        gbc.setState(0x4c58, 0x6bbe, 0xf340, 0x7e88, 0x1eb2, 0x696d, 0x0, 0x1);
        gbc.writeMem(0x4c58, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6bbe);
        EXPECT(gbc.pc(), 0x4c59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0131
        gbc.setState(0x34e7, 0x1b5a, 0xda00, 0x3cf0, 0x240a, 0x4466, 0x0, 0x1);
        gbc.writeMem(0x34e7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1b5a);
        EXPECT(gbc.pc(), 0x34e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0132
        gbc.setState(0x2105, 0x7b61, 0x64b0, 0x6eec, 0x9b00, 0x41e, 0x0, 0x0);
        gbc.writeMem(0x2105, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7b61);
        EXPECT(gbc.pc(), 0x2106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0133
        gbc.setState(0x53fe, 0x55d6, 0x630, 0xdaf, 0xfe04, 0x7cca, 0x1, 0x0);
        gbc.writeMem(0x53fe, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x55d6);
        EXPECT(gbc.pc(), 0x53ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0134
        gbc.setState(0x4fa3, 0x1a96, 0xb950, 0xde29, 0x57d6, 0xae6c, 0x0, 0x1);
        gbc.writeMem(0x4fa3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1a96);
        EXPECT(gbc.pc(), 0x4fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0135
        gbc.setState(0x12cc, 0xb7c4, 0xcfd0, 0x414c, 0x586c, 0x6ef5, 0x0, 0x0);
        gbc.writeMem(0x12cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb7c4);
        EXPECT(gbc.pc(), 0x12cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0136
        gbc.setState(0x90c9, 0x9c7, 0xd4b0, 0x9b83, 0x1681, 0x9ba5, 0x0, 0x0);
        gbc.writeMem(0x90c9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9c7);
        EXPECT(gbc.pc(), 0x90ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c9), 0x47);
        // 47 0137
        gbc.setState(0x6ab9, 0x481, 0xfb40, 0x456c, 0x7c08, 0x69db, 0x1, 0x1);
        gbc.writeMem(0x6ab9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x481);
        EXPECT(gbc.pc(), 0x6aba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0138
        gbc.setState(0x727a, 0x8c8, 0x8b80, 0x37c5, 0xbba3, 0x278c, 0x0, 0x1);
        gbc.writeMem(0x727a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8c8);
        EXPECT(gbc.pc(), 0x727b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0139
        gbc.setState(0xb33a, 0x1921, 0xaa10, 0x94e, 0xa0d4, 0x9207, 0x0, 0x1);
        gbc.writeMem(0xb33a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0xb33b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb33a), 0x47);
        // 47 013A
        gbc.setState(0x626a, 0x26f5, 0x5ea0, 0xa7ab, 0xe1d1, 0x9fac, 0x0, 0x0);
        gbc.writeMem(0x626a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x26f5);
        EXPECT(gbc.pc(), 0x626b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 013B
        gbc.setState(0xe4e8, 0x1a0e, 0xfe60, 0x60d, 0x5b51, 0x926c, 0x0, 0x1);
        gbc.writeMem(0xe4e8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1a0e);
        EXPECT(gbc.pc(), 0xe4e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e8), 0x47);
        // 47 013C
        gbc.setState(0x77ff, 0x18f6, 0x7100, 0xed60, 0x77ed, 0x79e0, 0x1, 0x1);
        gbc.writeMem(0x77ff, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x18f6);
        EXPECT(gbc.pc(), 0x7800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 013D
        gbc.setState(0x17bc, 0x2bf, 0x4e60, 0xa01e, 0x6180, 0x86de, 0x1, 0x0);
        gbc.writeMem(0x17bc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2bf);
        EXPECT(gbc.pc(), 0x17bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 013E
        gbc.setState(0x7fea, 0x7bda, 0x8bb0, 0xd3f5, 0xc1b6, 0x7c24, 0x1, 0x1);
        gbc.writeMem(0x7fea, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7bda);
        EXPECT(gbc.pc(), 0x7feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 013F
        gbc.setState(0xb368, 0xfb78, 0xaff0, 0x309c, 0xe322, 0x73f1, 0x1, 0x1);
        gbc.writeMem(0xb368, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfb78);
        EXPECT(gbc.pc(), 0xb369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb368), 0x47);
        // 47 0140
        gbc.setState(0x1083, 0x9e14, 0x1af0, 0xfec0, 0xef65, 0xc051, 0x1, 0x1);
        gbc.writeMem(0x1083, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9e14);
        EXPECT(gbc.pc(), 0x1084);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0142
        gbc.setState(0xa742, 0x7e90, 0xc830, 0xcf3, 0x1ff, 0x6b37, 0x1, 0x1);
        gbc.writeMem(0xa742, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7e90);
        EXPECT(gbc.pc(), 0xa743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa742), 0x47);
        // 47 0143
        gbc.setState(0xe9a3, 0x8daa, 0x6ce0, 0x3e57, 0x43dd, 0xd9d2, 0x0, 0x0);
        gbc.writeMem(0xe9a3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8daa);
        EXPECT(gbc.pc(), 0xe9a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a3), 0x47);
        // 47 0144
        gbc.setState(0x63b0, 0x965b, 0x200, 0x5fa5, 0x1c76, 0xbc65, 0x1, 0x0);
        gbc.writeMem(0x63b0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x965b);
        EXPECT(gbc.pc(), 0x63b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0147
        gbc.setState(0xd6e9, 0xd295, 0x240, 0x6ad1, 0xf013, 0xe97f, 0x0, 0x0);
        gbc.writeMem(0xd6e9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd295);
        EXPECT(gbc.pc(), 0xd6ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e9), 0x47);
        // 47 0148
        gbc.setState(0x1f55, 0x52b4, 0x2a00, 0xe974, 0xf3bf, 0x408a, 0x0, 0x0);
        gbc.writeMem(0x1f55, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x52b4);
        EXPECT(gbc.pc(), 0x1f56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0149
        gbc.setState(0xe914, 0x603f, 0xccd0, 0x415, 0xf109, 0x2f69, 0x1, 0x0);
        gbc.writeMem(0xe914, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x603f);
        EXPECT(gbc.pc(), 0xe915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe914), 0x47);
        // 47 014A
        gbc.setState(0x3e75, 0x8de, 0xdb00, 0xfe1, 0xcb3e, 0x1f05, 0x0, 0x1);
        gbc.writeMem(0x3e75, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8de);
        EXPECT(gbc.pc(), 0x3e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 014B
        gbc.setState(0xa5c1, 0xfe85, 0x5a10, 0xcf28, 0x3757, 0x880a, 0x0, 0x0);
        gbc.writeMem(0xa5c1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfe85);
        EXPECT(gbc.pc(), 0xa5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c1), 0x47);
        // 47 014C
        gbc.setState(0xceeb, 0x8901, 0x97b0, 0x8c36, 0x2c56, 0x5360, 0x1, 0x0);
        gbc.writeMem(0xceeb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8901);
        EXPECT(gbc.pc(), 0xceec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceeb), 0x47);
        // 47 014D
        gbc.setState(0xcd36, 0x8533, 0xa5c0, 0x1501, 0x1b3c, 0x9989, 0x1, 0x0);
        gbc.writeMem(0xcd36, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8533);
        EXPECT(gbc.pc(), 0xcd37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd36), 0x47);
        // 47 014E
        gbc.setState(0x611f, 0x2e8f, 0xa550, 0x2150, 0xb65d, 0x6d3e, 0x0, 0x1);
        gbc.writeMem(0x611f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2e8f);
        EXPECT(gbc.pc(), 0x6120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 014F
        gbc.setState(0x12b9, 0x3050, 0x8610, 0x64b, 0x3172, 0xed1d, 0x1, 0x1);
        gbc.writeMem(0x12b9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3050);
        EXPECT(gbc.pc(), 0x12ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0150
        gbc.setState(0x94ff, 0x2dad, 0x5990, 0x92b0, 0x6f5c, 0x1e12, 0x1, 0x0);
        gbc.writeMem(0x94ff, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2dad);
        EXPECT(gbc.pc(), 0x9500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ff), 0x47);
        // 47 0151
        gbc.setState(0x175e, 0xeb97, 0xca30, 0x46d, 0x37c0, 0xfb2c, 0x1, 0x1);
        gbc.writeMem(0x175e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeb97);
        EXPECT(gbc.pc(), 0x175f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0152
        gbc.setState(0x5a09, 0xf518, 0xe730, 0x1fd0, 0x76d8, 0x215f, 0x1, 0x0);
        gbc.writeMem(0x5a09, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf518);
        EXPECT(gbc.pc(), 0x5a0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0153
        gbc.setState(0x451d, 0x5f85, 0x9220, 0x563f, 0xd284, 0x29e7, 0x0, 0x0);
        gbc.writeMem(0x451d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5f85);
        EXPECT(gbc.pc(), 0x451e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0154
        gbc.setState(0x6b29, 0x7ab, 0x6e00, 0x2359, 0x57b9, 0x68c5, 0x1, 0x1);
        gbc.writeMem(0x6b29, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7ab);
        EXPECT(gbc.pc(), 0x6b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0155
        gbc.setState(0x5809, 0x76e5, 0x85f0, 0x19d, 0xcb8c, 0x2a91, 0x0, 0x1);
        gbc.writeMem(0x5809, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x76e5);
        EXPECT(gbc.pc(), 0x580a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0156
        gbc.setState(0x4fce, 0x2646, 0x6da0, 0x7e4b, 0xf691, 0xbede, 0x0, 0x0);
        gbc.writeMem(0x4fce, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2646);
        EXPECT(gbc.pc(), 0x4fcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0157
        gbc.setState(0xaef, 0x727c, 0xdda0, 0xaca1, 0xb0ba, 0xd300, 0x0, 0x0);
        gbc.writeMem(0xaef, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x727c);
        EXPECT(gbc.pc(), 0xaf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0158
        gbc.setState(0x305a, 0x6efa, 0x8ee0, 0x5619, 0x3100, 0xd67d, 0x1, 0x1);
        gbc.writeMem(0x305a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6efa);
        EXPECT(gbc.pc(), 0x305b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0159
        gbc.setState(0xc658, 0x41a8, 0x94c0, 0x72bd, 0x3e26, 0xa808, 0x0, 0x1);
        gbc.writeMem(0xc658, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x41a8);
        EXPECT(gbc.pc(), 0xc659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc658), 0x47);
        // 47 015A
        gbc.setState(0xb7be, 0x77ec, 0x7040, 0x158e, 0x9a35, 0xa0e, 0x1, 0x1);
        gbc.writeMem(0xb7be, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x77ec);
        EXPECT(gbc.pc(), 0xb7bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7be), 0x47);
        // 47 015B
        gbc.setState(0x854e, 0x2b51, 0x4a20, 0x4ba8, 0xf519, 0x2180, 0x1, 0x1);
        gbc.writeMem(0x854e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2b51);
        EXPECT(gbc.pc(), 0x854f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854e), 0x47);
        // 47 015C
        gbc.setState(0xdafc, 0xb1f1, 0xaa60, 0xf0c3, 0x4e82, 0x4029, 0x0, 0x1);
        gbc.writeMem(0xdafc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0xdafd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdafc), 0x47);
        // 47 015D
        gbc.setState(0xe370, 0x86be, 0x1c70, 0x2780, 0x7362, 0xdc54, 0x0, 0x1);
        gbc.writeMem(0xe370, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x86be);
        EXPECT(gbc.pc(), 0xe371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe370), 0x47);
        // 47 015E
        gbc.setState(0x709f, 0xfb4b, 0xdb0, 0xcbfc, 0x4718, 0x6fc6, 0x0, 0x1);
        gbc.writeMem(0x709f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfb4b);
        EXPECT(gbc.pc(), 0x70a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 015F
        gbc.setState(0xb1c1, 0xf69c, 0xc2a0, 0xe464, 0x2038, 0x660c, 0x0, 0x1);
        gbc.writeMem(0xb1c1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xf69c);
        EXPECT(gbc.pc(), 0xb1c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c1), 0x47);
        // 47 0160
        gbc.setState(0x628b, 0xa06e, 0x7e60, 0xd907, 0xaf80, 0x87eb, 0x1, 0x0);
        gbc.writeMem(0x628b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa06e);
        EXPECT(gbc.pc(), 0x628c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0161
        gbc.setState(0xe2fa, 0x2700, 0xc2f0, 0x61b1, 0x2bdd, 0x34bc, 0x0, 0x1);
        gbc.writeMem(0xe2fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2700);
        EXPECT(gbc.pc(), 0xe2fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2fa), 0x47);
        // 47 0162
        gbc.setState(0x706b, 0x1e74, 0x7b60, 0xfa17, 0x4468, 0x7206, 0x0, 0x1);
        gbc.writeMem(0x706b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1e74);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0163
        gbc.setState(0x2413, 0xf9f0, 0xb6c0, 0x411e, 0xa867, 0xcc9c, 0x1, 0x0);
        gbc.writeMem(0x2413, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf9f0);
        EXPECT(gbc.pc(), 0x2414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0164
        gbc.setState(0x7702, 0x76c6, 0xa890, 0xd86b, 0x54c9, 0x966d, 0x1, 0x1);
        gbc.writeMem(0x7702, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x76c6);
        EXPECT(gbc.pc(), 0x7703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0165
        gbc.setState(0x4fa, 0xe8cc, 0x9060, 0x1c8f, 0x9522, 0x9210, 0x1, 0x1);
        gbc.writeMem(0x4fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe8cc);
        EXPECT(gbc.pc(), 0x4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0166
        gbc.setState(0xe9d3, 0x4352, 0x2830, 0xb723, 0xecd2, 0x76dc, 0x0, 0x0);
        gbc.writeMem(0xe9d3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4352);
        EXPECT(gbc.pc(), 0xe9d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9d3), 0x47);
        // 47 0167
        gbc.setState(0x7722, 0xdad6, 0x8c0, 0xaccd, 0xef42, 0x218f, 0x0, 0x1);
        gbc.writeMem(0x7722, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdad6);
        EXPECT(gbc.pc(), 0x7723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0168
        gbc.setState(0xd9cc, 0xf8bb, 0xd7a0, 0x9cbe, 0x9476, 0xfe1a, 0x1, 0x1);
        gbc.writeMem(0xd9cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf8bb);
        EXPECT(gbc.pc(), 0xd9cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9cc), 0x47);
        // 47 0169
        gbc.setState(0x8238, 0x3660, 0xfd80, 0xf523, 0x72d4, 0x84b0, 0x0, 0x1);
        gbc.writeMem(0x8238, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3660);
        EXPECT(gbc.pc(), 0x8239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8238), 0x47);
        // 47 016B
        gbc.setState(0x3c51, 0x1df5, 0x77c0, 0xa4ee, 0x8948, 0x18a2, 0x1, 0x1);
        gbc.writeMem(0x3c51, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1df5);
        EXPECT(gbc.pc(), 0x3c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 016C
        gbc.setState(0x5ef8, 0xfd72, 0xec10, 0x87fa, 0xac10, 0x57dd, 0x0, 0x1);
        gbc.writeMem(0x5ef8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfd72);
        EXPECT(gbc.pc(), 0x5ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 016D
        gbc.setState(0x3f92, 0x3adf, 0xceb0, 0x3967, 0xbbd3, 0xd106, 0x1, 0x0);
        gbc.writeMem(0x3f92, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3adf);
        EXPECT(gbc.pc(), 0x3f93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 016E
        gbc.setState(0xda7, 0xf559, 0xeeb0, 0xbd1b, 0x678c, 0xc214, 0x0, 0x0);
        gbc.writeMem(0xda7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf559);
        EXPECT(gbc.pc(), 0xda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 016F
        gbc.setState(0x4336, 0xecfc, 0xdc60, 0xe36d, 0xee7d, 0x9fe7, 0x1, 0x1);
        gbc.writeMem(0x4336, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xecfc);
        EXPECT(gbc.pc(), 0x4337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0170
        gbc.setState(0x68d0, 0xd216, 0xc910, 0x58d7, 0x244f, 0x171d, 0x0, 0x0);
        gbc.writeMem(0x68d0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xd216);
        EXPECT(gbc.pc(), 0x68d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0171
        gbc.setState(0x767d, 0xf057, 0xf50, 0xa332, 0xb832, 0x47bc, 0x0, 0x0);
        gbc.writeMem(0x767d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf057);
        EXPECT(gbc.pc(), 0x767e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0173
        gbc.setState(0x6198, 0x8bf6, 0xe0a0, 0xe038, 0xe3bf, 0x8c38, 0x1, 0x0);
        gbc.writeMem(0x6198, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8bf6);
        EXPECT(gbc.pc(), 0x6199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0174
        gbc.setState(0x47e4, 0x24f3, 0xfe90, 0x1c14, 0x441e, 0x4dc2, 0x1, 0x1);
        gbc.writeMem(0x47e4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x24f3);
        EXPECT(gbc.pc(), 0x47e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0175
        gbc.setState(0xb92b, 0x61bc, 0x57d0, 0x74d1, 0x5bab, 0xc4df, 0x0, 0x1);
        gbc.writeMem(0xb92b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x61bc);
        EXPECT(gbc.pc(), 0xb92c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb92b), 0x47);
        // 47 0176
        gbc.setState(0x22f4, 0xcfb3, 0x1a90, 0xb198, 0xffe, 0x3bcf, 0x1, 0x0);
        gbc.writeMem(0x22f4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcfb3);
        EXPECT(gbc.pc(), 0x22f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0177
        gbc.setState(0x5618, 0xe966, 0x5c90, 0x5aee, 0x81ec, 0x137f, 0x0, 0x0);
        gbc.writeMem(0x5618, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xe966);
        EXPECT(gbc.pc(), 0x5619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0178
        gbc.setState(0x70db, 0xd508, 0xa170, 0xa7f8, 0x6462, 0x7b7e, 0x1, 0x1);
        gbc.writeMem(0x70db, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd508);
        EXPECT(gbc.pc(), 0x70dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0179
        gbc.setState(0xa04f, 0xf4c2, 0x5bd0, 0xfd1f, 0xbee7, 0x9d99, 0x0, 0x0);
        gbc.writeMem(0xa04f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xf4c2);
        EXPECT(gbc.pc(), 0xa050);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa04f), 0x47);
        // 47 017A
        gbc.setState(0x5fef, 0x470a, 0xd5e0, 0xecb5, 0x2731, 0x9e95, 0x0, 0x1);
        gbc.writeMem(0x5fef, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x470a);
        EXPECT(gbc.pc(), 0x5ff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 017B
        gbc.setState(0x9b2c, 0x8602, 0x8ef0, 0xc4ac, 0xf04a, 0x5491, 0x1, 0x0);
        gbc.writeMem(0x9b2c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8602);
        EXPECT(gbc.pc(), 0x9b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b2c), 0x47);
        // 47 017D
        gbc.setState(0x3205, 0xda75, 0x6c0, 0xd0c4, 0x521a, 0x1439, 0x0, 0x1);
        gbc.writeMem(0x3205, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xda75);
        EXPECT(gbc.pc(), 0x3206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 017E
        gbc.setState(0x928, 0x9d98, 0x66b0, 0x6d7c, 0xc37e, 0x6514, 0x0, 0x0);
        gbc.writeMem(0x928, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9d98);
        EXPECT(gbc.pc(), 0x929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 017F
        gbc.setState(0xb3e0, 0xb52d, 0x2320, 0x9eae, 0x222b, 0x5dce, 0x1, 0x1);
        gbc.writeMem(0xb3e0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb52d);
        EXPECT(gbc.pc(), 0xb3e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3e0), 0x47);
        // 47 0180
        gbc.setState(0x3d78, 0xb826, 0x2670, 0x6be2, 0x3ae4, 0xca78, 0x1, 0x0);
        gbc.writeMem(0x3d78, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb826);
        EXPECT(gbc.pc(), 0x3d79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0183
        gbc.setState(0x5892, 0xbfc4, 0x5de0, 0xfe25, 0xcac0, 0xd9f4, 0x1, 0x0);
        gbc.writeMem(0x5892, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbfc4);
        EXPECT(gbc.pc(), 0x5893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0184
        gbc.setState(0xb752, 0xb78, 0xcfa0, 0x262f, 0x9133, 0xedb4, 0x1, 0x1);
        gbc.writeMem(0xb752, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb78);
        EXPECT(gbc.pc(), 0xb753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb752), 0x47);
        // 47 0185
        gbc.setState(0x5ffb, 0xc286, 0xb2d0, 0xd78, 0x60e6, 0x6f14, 0x1, 0x1);
        gbc.writeMem(0x5ffb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc286);
        EXPECT(gbc.pc(), 0x5ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0186
        gbc.setState(0x5b04, 0xa2c4, 0x4710, 0xef7e, 0xdb43, 0x4769, 0x0, 0x0);
        gbc.writeMem(0x5b04, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa2c4);
        EXPECT(gbc.pc(), 0x5b05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0187
        gbc.setState(0xe094, 0xa639, 0xebb0, 0xeafd, 0x50e4, 0x7a5e, 0x0, 0x1);
        gbc.writeMem(0xe094, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa639);
        EXPECT(gbc.pc(), 0xe095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe094), 0x47);
        // 47 0188
        gbc.setState(0xc105, 0xfdc9, 0x810, 0x9ffc, 0x91a6, 0xa4f1, 0x0, 0x0);
        gbc.writeMem(0xc105, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfdc9);
        EXPECT(gbc.pc(), 0xc106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc105), 0x47);
        // 47 0189
        gbc.setState(0x3300, 0x7e59, 0x6e50, 0x628b, 0xd30d, 0xbdc6, 0x1, 0x1);
        gbc.writeMem(0x3300, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7e59);
        EXPECT(gbc.pc(), 0x3301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 018A
        gbc.setState(0x5043, 0xa445, 0x6140, 0x5713, 0xe4dd, 0x81a7, 0x0, 0x0);
        gbc.writeMem(0x5043, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa445);
        EXPECT(gbc.pc(), 0x5044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 018B
        gbc.setState(0xa8d4, 0x3783, 0x4b90, 0x12ff, 0x61df, 0x4296, 0x1, 0x1);
        gbc.writeMem(0xa8d4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3783);
        EXPECT(gbc.pc(), 0xa8d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d4), 0x47);
        // 47 018C
        gbc.setState(0x79f0, 0xc92e, 0x4ed0, 0x1668, 0x23e1, 0x3e8d, 0x1, 0x1);
        gbc.writeMem(0x79f0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc92e);
        EXPECT(gbc.pc(), 0x79f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 018D
        gbc.setState(0x918c, 0x7a62, 0xeb00, 0x7f3, 0xbec5, 0x8ee4, 0x0, 0x0);
        gbc.writeMem(0x918c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7a62);
        EXPECT(gbc.pc(), 0x918d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x918c), 0x47);
        // 47 018E
        gbc.setState(0xaac5, 0x204c, 0xb100, 0xfefe, 0x547d, 0xd0b2, 0x1, 0x1);
        gbc.writeMem(0xaac5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x204c);
        EXPECT(gbc.pc(), 0xaac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac5), 0x47);
        // 47 018F
        gbc.setState(0x85ce, 0x6e3f, 0x97d0, 0xcc08, 0xd212, 0xd369, 0x1, 0x1);
        gbc.writeMem(0x85ce, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6e3f);
        EXPECT(gbc.pc(), 0x85cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ce), 0x47);
        // 47 0190
        gbc.setState(0x8fb9, 0x434d, 0x54e0, 0x7dbb, 0xb05a, 0x996b, 0x0, 0x1);
        gbc.writeMem(0x8fb9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x434d);
        EXPECT(gbc.pc(), 0x8fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb9), 0x47);
        // 47 0191
        gbc.setState(0x83c6, 0xcf32, 0x6040, 0x1c7, 0x5293, 0xa9e, 0x1, 0x0);
        gbc.writeMem(0x83c6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcf32);
        EXPECT(gbc.pc(), 0x83c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c6), 0x47);
        // 47 0192
        gbc.setState(0xa7ac, 0x4676, 0x2050, 0x5a3, 0xca04, 0x84e8, 0x1, 0x0);
        gbc.writeMem(0xa7ac, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4676);
        EXPECT(gbc.pc(), 0xa7ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ac), 0x47);
        // 47 0193
        gbc.setState(0x6620, 0x8c9d, 0xded0, 0x890e, 0x7f06, 0xfa4d, 0x1, 0x0);
        gbc.writeMem(0x6620, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8c9d);
        EXPECT(gbc.pc(), 0x6621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0194
        gbc.setState(0xe497, 0x86a4, 0xf650, 0x7736, 0x7eb8, 0x83c7, 0x1, 0x1);
        gbc.writeMem(0xe497, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x86a4);
        EXPECT(gbc.pc(), 0xe498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe497), 0x47);
        // 47 0195
        gbc.setState(0x1553, 0x3d51, 0xb760, 0x2ce0, 0xf888, 0xed06, 0x1, 0x0);
        gbc.writeMem(0x1553, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x3d51);
        EXPECT(gbc.pc(), 0x1554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0196
        gbc.setState(0x52fa, 0x2281, 0x6070, 0xcdb7, 0x81e2, 0x60a6, 0x1, 0x0);
        gbc.writeMem(0x52fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2281);
        EXPECT(gbc.pc(), 0x52fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0197
        gbc.setState(0x12f9, 0x4262, 0x7ae0, 0x4998, 0x4872, 0x84b1, 0x1, 0x0);
        gbc.writeMem(0x12f9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4262);
        EXPECT(gbc.pc(), 0x12fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0198
        gbc.setState(0xd0b8, 0x1f8c, 0x540, 0xe801, 0x13b8, 0x9b6f, 0x0, 0x1);
        gbc.writeMem(0xd0b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1f8c);
        EXPECT(gbc.pc(), 0xd0b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b8), 0x47);
        // 47 0199
        gbc.setState(0x6bc6, 0xddfd, 0x4510, 0x42fd, 0x31a6, 0x3e34, 0x0, 0x1);
        gbc.writeMem(0x6bc6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xddfd);
        EXPECT(gbc.pc(), 0x6bc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 019A
        gbc.setState(0xa515, 0x726b, 0x9b50, 0xfcac, 0xd4b, 0x8fa4, 0x1, 0x0);
        gbc.writeMem(0xa515, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x726b);
        EXPECT(gbc.pc(), 0xa516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa515), 0x47);
        // 47 019B
        gbc.setState(0x4d20, 0x26ef, 0x6cb0, 0x733a, 0x85c0, 0xda7e, 0x0, 0x0);
        gbc.writeMem(0x4d20, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x26ef);
        EXPECT(gbc.pc(), 0x4d21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 019D
        gbc.setState(0x8a42, 0x3fb9, 0xf180, 0xeeb3, 0x5d8d, 0x110, 0x0, 0x1);
        gbc.writeMem(0x8a42, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3fb9);
        EXPECT(gbc.pc(), 0x8a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a42), 0x47);
        // 47 019E
        gbc.setState(0xb142, 0x31c2, 0xbb0, 0xe0ce, 0x2bd, 0x20f5, 0x1, 0x0);
        gbc.writeMem(0xb142, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x31c2);
        EXPECT(gbc.pc(), 0xb143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb142), 0x47);
        // 47 019F
        gbc.setState(0x1311, 0x4b3, 0x6ab0, 0x88d0, 0x99fc, 0x8b23, 0x1, 0x0);
        gbc.writeMem(0x1311, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4b3);
        EXPECT(gbc.pc(), 0x1312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01A0
        gbc.setState(0x9410, 0xd17e, 0xa3b0, 0x905b, 0xf0c7, 0xf693, 0x1, 0x0);
        gbc.writeMem(0x9410, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd17e);
        EXPECT(gbc.pc(), 0x9411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9410), 0x47);
        // 47 01A1
        gbc.setState(0xd4b8, 0x48a4, 0x26c0, 0xe422, 0xd51e, 0xd9f8, 0x0, 0x1);
        gbc.writeMem(0xd4b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x48a4);
        EXPECT(gbc.pc(), 0xd4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b8), 0x47);
        // 47 01A2
        gbc.setState(0x68ac, 0xabec, 0x95f0, 0xcbc1, 0x1eae, 0xe573, 0x1, 0x1);
        gbc.writeMem(0x68ac, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xabec);
        EXPECT(gbc.pc(), 0x68ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01A4
        gbc.setState(0x4983, 0x5348, 0x8f0, 0x3505, 0x8b73, 0x9500, 0x0, 0x0);
        gbc.writeMem(0x4983, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5348);
        EXPECT(gbc.pc(), 0x4984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01A5
        gbc.setState(0x64ea, 0x62ac, 0x21d0, 0xb831, 0x30ab, 0xe0b8, 0x1, 0x1);
        gbc.writeMem(0x64ea, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x62ac);
        EXPECT(gbc.pc(), 0x64eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01A6
        gbc.setState(0x8563, 0x12c6, 0xa650, 0x5364, 0xe1f9, 0x58e4, 0x1, 0x0);
        gbc.writeMem(0x8563, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x12c6);
        EXPECT(gbc.pc(), 0x8564);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8563), 0x47);
        // 47 01A7
        gbc.setState(0x4fc3, 0x6e9a, 0x53b0, 0x124b, 0x767e, 0x620d, 0x0, 0x1);
        gbc.writeMem(0x4fc3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6e9a);
        EXPECT(gbc.pc(), 0x4fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01A8
        gbc.setState(0xa99d, 0x4731, 0xa3e0, 0x2ecb, 0xe363, 0x5b7f, 0x0, 0x0);
        gbc.writeMem(0xa99d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4731);
        EXPECT(gbc.pc(), 0xa99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99d), 0x47);
        // 47 01AA
        gbc.setState(0xb126, 0xf5b7, 0xcde0, 0xf5c1, 0xba07, 0x8f8, 0x1, 0x0);
        gbc.writeMem(0xb126, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf5b7);
        EXPECT(gbc.pc(), 0xb127);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb126), 0x47);
        // 47 01AB
        gbc.setState(0x9f79, 0x1d9e, 0x1750, 0xcf3a, 0xbefb, 0xce87, 0x0, 0x1);
        gbc.writeMem(0x9f79, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1d9e);
        EXPECT(gbc.pc(), 0x9f7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f79), 0x47);
        // 47 01AC
        gbc.setState(0x2159, 0xe96, 0x3050, 0x927f, 0xc7cf, 0x78cb, 0x0, 0x0);
        gbc.writeMem(0x2159, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe96);
        EXPECT(gbc.pc(), 0x215a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01AD
        gbc.setState(0xe4fa, 0x623f, 0x3330, 0xda86, 0x8c95, 0x45cf, 0x1, 0x1);
        gbc.writeMem(0xe4fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x623f);
        EXPECT(gbc.pc(), 0xe4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fa), 0x47);
        // 47 01AE
        gbc.setState(0xb0da, 0xec10, 0xe2b0, 0x30c4, 0x1ea9, 0xf830, 0x0, 0x0);
        gbc.writeMem(0xb0da, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xec10);
        EXPECT(gbc.pc(), 0xb0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0da), 0x47);
        // 47 01AF
        gbc.setState(0x7e72, 0x4496, 0x52f0, 0xd35e, 0x83e6, 0x1192, 0x0, 0x1);
        gbc.writeMem(0x7e72, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4496);
        EXPECT(gbc.pc(), 0x7e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01B0
        gbc.setState(0x7915, 0x1ea7, 0x7790, 0x3280, 0x639f, 0xd868, 0x1, 0x0);
        gbc.writeMem(0x7915, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1ea7);
        EXPECT(gbc.pc(), 0x7916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01B1
        gbc.setState(0x5aee, 0xb9b2, 0xdc0, 0x4bca, 0xf77b, 0x635b, 0x0, 0x0);
        gbc.writeMem(0x5aee, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb9b2);
        EXPECT(gbc.pc(), 0x5aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01B2
        gbc.setState(0x1e71, 0xb826, 0xae0, 0x5eea, 0xded3, 0x56be, 0x1, 0x0);
        gbc.writeMem(0x1e71, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb826);
        EXPECT(gbc.pc(), 0x1e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01B4
        gbc.setState(0x3fa, 0xdea3, 0x150, 0xcc90, 0xa708, 0x9db5, 0x0, 0x1);
        gbc.writeMem(0x3fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xdea3);
        EXPECT(gbc.pc(), 0x3fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01B5
        gbc.setState(0xdb79, 0x1988, 0x9b00, 0x68f3, 0x21b3, 0xd652, 0x0, 0x1);
        gbc.writeMem(0xdb79, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1988);
        EXPECT(gbc.pc(), 0xdb7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb79), 0x47);
        // 47 01B6
        gbc.setState(0xdbcd, 0x9043, 0x4a80, 0xf5, 0xa93b, 0x1833, 0x1, 0x1);
        gbc.writeMem(0xdbcd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9043);
        EXPECT(gbc.pc(), 0xdbce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbcd), 0x47);
        // 47 01B7
        gbc.setState(0x11d6, 0x1cc2, 0xee90, 0x4f8b, 0xc788, 0x50b8, 0x1, 0x0);
        gbc.writeMem(0x11d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1cc2);
        EXPECT(gbc.pc(), 0x11d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01B8
        gbc.setState(0xa22f, 0x7c2c, 0x1030, 0xcbfc, 0x7b47, 0x827a, 0x0, 0x1);
        gbc.writeMem(0xa22f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7c2c);
        EXPECT(gbc.pc(), 0xa230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa22f), 0x47);
        // 47 01B9
        gbc.setState(0xab74, 0x8bd8, 0x14f0, 0x3e83, 0x5b9a, 0xf7c8, 0x1, 0x0);
        gbc.writeMem(0xab74, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8bd8);
        EXPECT(gbc.pc(), 0xab75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab74), 0x47);
        // 47 01BA
        gbc.setState(0xced8, 0xadfd, 0x3250, 0x80a5, 0xd3b9, 0xca10, 0x0, 0x0);
        gbc.writeMem(0xced8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xadfd);
        EXPECT(gbc.pc(), 0xced9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xced8), 0x47);
        // 47 01BC
        gbc.setState(0xe9ea, 0x7a10, 0x6b70, 0x2188, 0x35dd, 0x8c40, 0x1, 0x0);
        gbc.writeMem(0xe9ea, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7a10);
        EXPECT(gbc.pc(), 0xe9eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9ea), 0x47);
        // 47 01BD
        gbc.setState(0xab8b, 0x92c3, 0x9c90, 0x9379, 0x2d, 0x709d, 0x0, 0x1);
        gbc.writeMem(0xab8b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x92c3);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8b), 0x47);
        // 47 01BE
        gbc.setState(0xa73, 0x9211, 0x4540, 0x4121, 0xfdd4, 0x9d7c, 0x0, 0x0);
        gbc.writeMem(0xa73, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9211);
        EXPECT(gbc.pc(), 0xa74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01BF
        gbc.setState(0xadfc, 0xb7f, 0x5580, 0x7d47, 0xcc3c, 0x2b69, 0x0, 0x1);
        gbc.writeMem(0xadfc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb7f);
        EXPECT(gbc.pc(), 0xadfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadfc), 0x47);
        // 47 01C1
        gbc.setState(0x7979, 0x2ba9, 0xac80, 0x37c4, 0x2232, 0x43c6, 0x0, 0x0);
        gbc.writeMem(0x7979, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2ba9);
        EXPECT(gbc.pc(), 0x797a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01C2
        gbc.setState(0xbeb1, 0x6168, 0x3190, 0x452e, 0x90f9, 0x1197, 0x0, 0x1);
        gbc.writeMem(0xbeb1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6168);
        EXPECT(gbc.pc(), 0xbeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeb1), 0x47);
        // 47 01C3
        gbc.setState(0x9390, 0x5d8b, 0xdca0, 0x80c4, 0x11bd, 0x7386, 0x1, 0x1);
        gbc.writeMem(0x9390, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x5d8b);
        EXPECT(gbc.pc(), 0x9391);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9390), 0x47);
        // 47 01C4
        gbc.setState(0xdc41, 0xfb73, 0xde70, 0x6c13, 0xe9a9, 0x6107, 0x0, 0x0);
        gbc.writeMem(0xdc41, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfb73);
        EXPECT(gbc.pc(), 0xdc42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc41), 0x47);
        // 47 01C5
        gbc.setState(0x211d, 0xb36f, 0xaf20, 0x7f43, 0x2d74, 0xf470, 0x1, 0x0);
        gbc.writeMem(0x211d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb36f);
        EXPECT(gbc.pc(), 0x211e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01C6
        gbc.setState(0x34, 0xbc91, 0xc060, 0xf99b, 0xb552, 0xc389, 0x0, 0x0);
        gbc.writeMem(0x34, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbc91);
        EXPECT(gbc.pc(), 0x35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01C7
        gbc.setState(0x1b9c, 0x95eb, 0xebd0, 0x6942, 0x4c8b, 0x450a, 0x0, 0x0);
        gbc.writeMem(0x1b9c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x95eb);
        EXPECT(gbc.pc(), 0x1b9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01C9
        gbc.setState(0xcd9d, 0xd62f, 0x3f90, 0x2ee5, 0xafca, 0x5969, 0x1, 0x1);
        gbc.writeMem(0xcd9d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd62f);
        EXPECT(gbc.pc(), 0xcd9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd9d), 0x47);
        // 47 01CA
        gbc.setState(0xb974, 0x8e67, 0xb7e0, 0x3d98, 0x6c7a, 0x63c1, 0x1, 0x1);
        gbc.writeMem(0xb974, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8e67);
        EXPECT(gbc.pc(), 0xb975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb974), 0x47);
        // 47 01CB
        gbc.setState(0x7ae, 0xc7c8, 0xd8b0, 0x225a, 0x6824, 0x7851, 0x1, 0x0);
        gbc.writeMem(0x7ae, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc7c8);
        EXPECT(gbc.pc(), 0x7af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01CC
        gbc.setState(0x706c, 0x99f8, 0xeba0, 0xaeb, 0x7e25, 0x1148, 0x1, 0x1);
        gbc.writeMem(0x706c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x99f8);
        EXPECT(gbc.pc(), 0x706d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01CD
        gbc.setState(0xea08, 0x3de9, 0xc880, 0xa6be, 0x3674, 0x63f6, 0x0, 0x0);
        gbc.writeMem(0xea08, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3de9);
        EXPECT(gbc.pc(), 0xea09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea08), 0x47);
        // 47 01CE
        gbc.setState(0x5328, 0x6435, 0xcd0, 0xa07e, 0xb093, 0x8e5c, 0x1, 0x0);
        gbc.writeMem(0x5328, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6435);
        EXPECT(gbc.pc(), 0x5329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01CF
        gbc.setState(0xba0d, 0x928d, 0x7d60, 0xb973, 0xde34, 0x4311, 0x1, 0x1);
        gbc.writeMem(0xba0d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x928d);
        EXPECT(gbc.pc(), 0xba0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba0d), 0x47);
        // 47 01D0
        gbc.setState(0x418e, 0x17a7, 0xfee0, 0x7b67, 0x4358, 0x45c6, 0x0, 0x0);
        gbc.writeMem(0x418e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x17a7);
        EXPECT(gbc.pc(), 0x418f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01D1
        gbc.setState(0x8465, 0x57af, 0x7630, 0x333, 0xbadf, 0x87bd, 0x1, 0x1);
        gbc.writeMem(0x8465, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x57af);
        EXPECT(gbc.pc(), 0x8466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8465), 0x47);
        // 47 01D2
        gbc.setState(0x34ba, 0x7f56, 0xef60, 0xcd03, 0x26cf, 0xc527, 0x0, 0x0);
        gbc.writeMem(0x34ba, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7f56);
        EXPECT(gbc.pc(), 0x34bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01D3
        gbc.setState(0xb09d, 0x4717, 0xdab0, 0xd01, 0xe5f8, 0x19ae, 0x0, 0x1);
        gbc.writeMem(0xb09d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4717);
        EXPECT(gbc.pc(), 0xb09e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb09d), 0x47);
        // 47 01D4
        gbc.setState(0x5679, 0x1f62, 0x87a0, 0x1b32, 0xb40f, 0xdfea, 0x0, 0x0);
        gbc.writeMem(0x5679, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1f62);
        EXPECT(gbc.pc(), 0x567a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01D5
        gbc.setState(0xeefc, 0x39ac, 0x9570, 0xcb92, 0xaaf, 0xbee3, 0x1, 0x0);
        gbc.writeMem(0xeefc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x39ac);
        EXPECT(gbc.pc(), 0xeefd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeefc), 0x47);
        // 47 01D6
        gbc.setState(0x62d2, 0x9cad, 0xb9c0, 0x2864, 0x548d, 0xcaf3, 0x0, 0x1);
        gbc.writeMem(0x62d2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9cad);
        EXPECT(gbc.pc(), 0x62d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01D7
        gbc.setState(0x89b8, 0xb5b2, 0x3c50, 0xff6e, 0x3d9, 0xba3, 0x1, 0x0);
        gbc.writeMem(0x89b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb5b2);
        EXPECT(gbc.pc(), 0x89b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89b8), 0x47);
        // 47 01D8
        gbc.setState(0xd04a, 0xa2f7, 0x3970, 0x8c6, 0xbbd6, 0x2237, 0x1, 0x0);
        gbc.writeMem(0xd04a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa2f7);
        EXPECT(gbc.pc(), 0xd04b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd04a), 0x47);
        // 47 01D9
        gbc.setState(0x4860, 0x726c, 0x2c90, 0x3ac0, 0x525d, 0x1e1a, 0x1, 0x1);
        gbc.writeMem(0x4860, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x726c);
        EXPECT(gbc.pc(), 0x4861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01DA
        gbc.setState(0x6b8, 0x46de, 0x9200, 0x96b, 0x7576, 0x11db, 0x1, 0x0);
        gbc.writeMem(0x6b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x46de);
        EXPECT(gbc.pc(), 0x6b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01DB
        gbc.setState(0x81a5, 0xa6d3, 0x1f10, 0xd5c9, 0xb008, 0xd64, 0x1, 0x1);
        gbc.writeMem(0x81a5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa6d3);
        EXPECT(gbc.pc(), 0x81a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a5), 0x47);
        // 47 01DC
        gbc.setState(0x4929, 0x206c, 0x9790, 0x1a73, 0x3512, 0x9761, 0x0, 0x0);
        gbc.writeMem(0x4929, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x206c);
        EXPECT(gbc.pc(), 0x492a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01DD
        gbc.setState(0x7688, 0x9d6f, 0xeed0, 0xf58e, 0x118, 0xaae7, 0x0, 0x0);
        gbc.writeMem(0x7688, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9d6f);
        EXPECT(gbc.pc(), 0x7689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01DE
        gbc.setState(0xd5c6, 0xc653, 0x62d0, 0x7c96, 0xa9cf, 0x5377, 0x1, 0x1);
        gbc.writeMem(0xd5c6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc653);
        EXPECT(gbc.pc(), 0xd5c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c6), 0x47);
        // 47 01DF
        gbc.setState(0xd674, 0xec89, 0xe3a0, 0x4a26, 0x1e4b, 0x5346, 0x1, 0x0);
        gbc.writeMem(0xd674, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xec89);
        EXPECT(gbc.pc(), 0xd675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd674), 0x47);
        // 47 01E1
        gbc.setState(0x29e8, 0xbb2, 0xfed0, 0xbfbd, 0x411, 0x7a5c, 0x1, 0x0);
        gbc.writeMem(0x29e8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbb2);
        EXPECT(gbc.pc(), 0x29e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01E2
        gbc.setState(0x9f4a, 0xf268, 0x5210, 0xfa41, 0xc6b8, 0x59aa, 0x1, 0x1);
        gbc.writeMem(0x9f4a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf268);
        EXPECT(gbc.pc(), 0x9f4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f4a), 0x47);
        // 47 01E4
        gbc.setState(0xbb9, 0x1ab3, 0x2980, 0xa4e4, 0x80f2, 0x1895, 0x0, 0x0);
        gbc.writeMem(0xbb9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1ab3);
        EXPECT(gbc.pc(), 0xbba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01E5
        gbc.setState(0x4229, 0xe7a3, 0x890, 0x44a3, 0xd24b, 0x6665, 0x0, 0x0);
        gbc.writeMem(0x4229, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe7a3);
        EXPECT(gbc.pc(), 0x422a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01E6
        gbc.setState(0x55d0, 0xd00b, 0xdc50, 0x88e3, 0xc66b, 0xbb4a, 0x1, 0x1);
        gbc.writeMem(0x55d0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd00b);
        EXPECT(gbc.pc(), 0x55d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01E7
        gbc.setState(0x5d33, 0x2dce, 0x9180, 0xb62d, 0x4a46, 0x8e00, 0x1, 0x1);
        gbc.writeMem(0x5d33, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x2dce);
        EXPECT(gbc.pc(), 0x5d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01E9
        gbc.setState(0xed5, 0x2fd3, 0xc050, 0xbc85, 0x73e7, 0x9c0e, 0x1, 0x0);
        gbc.writeMem(0xed5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2fd3);
        EXPECT(gbc.pc(), 0xed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01EA
        gbc.setState(0xadb2, 0xc0b7, 0x7ee0, 0x3ba1, 0x69d5, 0x6bcf, 0x0, 0x0);
        gbc.writeMem(0xadb2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc0b7);
        EXPECT(gbc.pc(), 0xadb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadb2), 0x47);
        // 47 01EB
        gbc.setState(0x8453, 0x55e2, 0xbf0, 0x83e8, 0x1b08, 0x24ab, 0x0, 0x0);
        gbc.writeMem(0x8453, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x55e2);
        EXPECT(gbc.pc(), 0x8454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8453), 0x47);
        // 47 01EC
        gbc.setState(0xe72c, 0x7b16, 0xac20, 0xee2c, 0x8cf8, 0x3f1f, 0x1, 0x1);
        gbc.writeMem(0xe72c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7b16);
        EXPECT(gbc.pc(), 0xe72d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe72c), 0x47);
        // 47 01ED
        gbc.setState(0xf8c, 0xb606, 0xa450, 0x3b03, 0xf855, 0x4c2f, 0x1, 0x0);
        gbc.writeMem(0xf8c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb606);
        EXPECT(gbc.pc(), 0xf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01EE
        gbc.setState(0x3930, 0xa9a, 0x8b80, 0x9e23, 0xce7c, 0x14b3, 0x1, 0x1);
        gbc.writeMem(0x3930, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa9a);
        EXPECT(gbc.pc(), 0x3931);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01EF
        gbc.setState(0x9b7, 0xd1db, 0xf9d0, 0xc7a0, 0xb6fa, 0x2a28, 0x1, 0x0);
        gbc.writeMem(0x9b7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd1db);
        EXPECT(gbc.pc(), 0x9b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01F0
        gbc.setState(0xb55d, 0xda79, 0x8f90, 0x1e9a, 0x62cc, 0x4dff, 0x1, 0x1);
        gbc.writeMem(0xb55d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xda79);
        EXPECT(gbc.pc(), 0xb55e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb55d), 0x47);
        // 47 01F1
        gbc.setState(0xc89, 0x9109, 0x60a0, 0xe720, 0x5fca, 0x7ce5, 0x1, 0x0);
        gbc.writeMem(0xc89, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9109);
        EXPECT(gbc.pc(), 0xc8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01F2
        gbc.setState(0x4da, 0x8138, 0xcab0, 0x3dac, 0x3914, 0x9f07, 0x0, 0x0);
        gbc.writeMem(0x4da, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8138);
        EXPECT(gbc.pc(), 0x4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 01F3
        gbc.setState(0xd0f, 0x4265, 0xa2a0, 0x6365, 0x42c9, 0xf111, 0x1, 0x0);
        gbc.writeMem(0xd0f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4265);
        EXPECT(gbc.pc(), 0xd10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01F4
        gbc.setState(0x5ded, 0xf127, 0x9d0, 0xa9b1, 0x362, 0x4a77, 0x0, 0x0);
        gbc.writeMem(0x5ded, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf127);
        EXPECT(gbc.pc(), 0x5dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01F5
        gbc.setState(0x382, 0xf002, 0x4b80, 0x51b7, 0xdfa, 0x97a1, 0x1, 0x0);
        gbc.writeMem(0x382, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xf002);
        EXPECT(gbc.pc(), 0x383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01F6
        gbc.setState(0xa2c4, 0xfd27, 0xfd00, 0xc914, 0x15b0, 0x8caf, 0x1, 0x1);
        gbc.writeMem(0xa2c4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xfd27);
        EXPECT(gbc.pc(), 0xa2c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c4), 0x47);
        // 47 01F7
        gbc.setState(0x3a66, 0xf50f, 0x72d0, 0x30af, 0x2a5e, 0x4319, 0x1, 0x0);
        gbc.writeMem(0x3a66, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf50f);
        EXPECT(gbc.pc(), 0x3a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 01F8
        gbc.setState(0x9d6f, 0x27ea, 0xe7e0, 0x4bd5, 0x9bdb, 0xb0de, 0x1, 0x0);
        gbc.writeMem(0x9d6f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x27ea);
        EXPECT(gbc.pc(), 0x9d70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6f), 0x47);
        // 47 01F9
        gbc.setState(0xe436, 0xd300, 0x3a10, 0x15a, 0x50cc, 0xd785, 0x0, 0x0);
        gbc.writeMem(0xe436, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd300);
        EXPECT(gbc.pc(), 0xe437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe436), 0x47);
        // 47 01FA
        gbc.setState(0x5cef, 0xcbde, 0xc8a0, 0x5a7b, 0x6acc, 0x8764, 0x1, 0x0);
        gbc.writeMem(0x5cef, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcbde);
        EXPECT(gbc.pc(), 0x5cf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01FB
        gbc.setState(0xa176, 0x414d, 0x3e40, 0xeb83, 0xa480, 0xb720, 0x0, 0x1);
        gbc.writeMem(0xa176, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x414d);
        EXPECT(gbc.pc(), 0xa177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa176), 0x47);
        // 47 01FC
        gbc.setState(0x3a9b, 0x90, 0x4520, 0xf9b1, 0x4a06, 0x11c, 0x0, 0x1);
        gbc.writeMem(0x3a9b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x90);
        EXPECT(gbc.pc(), 0x3a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 01FD
        gbc.setState(0xe8f8, 0xe9c, 0x7ae0, 0x8a83, 0x1507, 0xbb1c, 0x0, 0x1);
        gbc.writeMem(0xe8f8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe9c);
        EXPECT(gbc.pc(), 0xe8f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f8), 0x47);
        // 47 01FE
        gbc.setState(0x3472, 0xbfd, 0x8e40, 0x3190, 0x4ae9, 0x1a05, 0x1, 0x0);
        gbc.writeMem(0x3472, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbfd);
        EXPECT(gbc.pc(), 0x3473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 01FF
        gbc.setState(0x9e66, 0x603, 0x2270, 0x648e, 0x6dda, 0x9113, 0x1, 0x1);
        gbc.writeMem(0x9e66, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x603);
        EXPECT(gbc.pc(), 0x9e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e66), 0x47);
        // 47 0200
        gbc.setState(0x1a1f, 0xe359, 0xb050, 0x8ee2, 0x2145, 0xa7c3, 0x1, 0x0);
        gbc.writeMem(0x1a1f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe359);
        EXPECT(gbc.pc(), 0x1a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0202
        gbc.setState(0xec6a, 0x9fb2, 0x77e0, 0xbba1, 0xae18, 0x7b32, 0x0, 0x1);
        gbc.writeMem(0xec6a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9fb2);
        EXPECT(gbc.pc(), 0xec6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6a), 0x47);
        // 47 0203
        gbc.setState(0xbeaf, 0x8cef, 0x4920, 0x68ef, 0xd0e2, 0xf775, 0x1, 0x1);
        gbc.writeMem(0xbeaf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8cef);
        EXPECT(gbc.pc(), 0xbeb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeaf), 0x47);
        // 47 0205
        gbc.setState(0xe20b, 0x4b10, 0x34a0, 0x4cc2, 0x6734, 0xf6c, 0x0, 0x1);
        gbc.writeMem(0xe20b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4b10);
        EXPECT(gbc.pc(), 0xe20c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20b), 0x47);
        // 47 0206
        gbc.setState(0x1d3e, 0x3119, 0xf140, 0x354e, 0xcf96, 0x89cf, 0x1, 0x0);
        gbc.writeMem(0x1d3e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3119);
        EXPECT(gbc.pc(), 0x1d3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0207
        gbc.setState(0x401a, 0x411f, 0x6b60, 0x397f, 0x7b65, 0xb14f, 0x1, 0x1);
        gbc.writeMem(0x401a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x411f);
        EXPECT(gbc.pc(), 0x401b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0208
        gbc.setState(0x7982, 0x9a40, 0x6dc0, 0x3c94, 0xe2cd, 0x9157, 0x1, 0x0);
        gbc.writeMem(0x7982, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9a40);
        EXPECT(gbc.pc(), 0x7983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0209
        gbc.setState(0x49cc, 0xf204, 0x32d0, 0xde4f, 0x389e, 0x8d2c, 0x0, 0x1);
        gbc.writeMem(0x49cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf204);
        EXPECT(gbc.pc(), 0x49cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 020B
        gbc.setState(0x7851, 0xd78f, 0xddb0, 0x57dc, 0x8e71, 0xb25b, 0x1, 0x1);
        gbc.writeMem(0x7851, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd78f);
        EXPECT(gbc.pc(), 0x7852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 020C
        gbc.setState(0x3818, 0x576f, 0x7990, 0xa848, 0x92cc, 0x66c5, 0x0, 0x1);
        gbc.writeMem(0x3818, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x576f);
        EXPECT(gbc.pc(), 0x3819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 020D
        gbc.setState(0x3a43, 0x8544, 0xc700, 0xff6f, 0xc35b, 0xac1f, 0x0, 0x0);
        gbc.writeMem(0x3a43, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x8544);
        EXPECT(gbc.pc(), 0x3a44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 020E
        gbc.setState(0x30bb, 0x91e5, 0xd050, 0x9bc4, 0x4f16, 0x41af, 0x0, 0x1);
        gbc.writeMem(0x30bb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x91e5);
        EXPECT(gbc.pc(), 0x30bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0210
        gbc.setState(0x9c17, 0xd053, 0x4210, 0xd6cc, 0xaaf5, 0xbadb, 0x0, 0x0);
        gbc.writeMem(0x9c17, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd053);
        EXPECT(gbc.pc(), 0x9c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c17), 0x47);
        // 47 0211
        gbc.setState(0x331e, 0x7a2a, 0x1a20, 0xcc4c, 0x28f4, 0x9458, 0x0, 0x0);
        gbc.writeMem(0x331e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7a2a);
        EXPECT(gbc.pc(), 0x331f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0212
        gbc.setState(0x666d, 0x216e, 0x5370, 0x4f50, 0x60bf, 0xd825, 0x0, 0x1);
        gbc.writeMem(0x666d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x216e);
        EXPECT(gbc.pc(), 0x666e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0213
        gbc.setState(0x9ef3, 0xe150, 0x4d00, 0x2196, 0x2a8, 0x2d1f, 0x0, 0x1);
        gbc.writeMem(0x9ef3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe150);
        EXPECT(gbc.pc(), 0x9ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef3), 0x47);
        // 47 0214
        gbc.setState(0x4071, 0x5c30, 0xc7d0, 0x8110, 0x6327, 0xf5da, 0x0, 0x0);
        gbc.writeMem(0x4071, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x5c30);
        EXPECT(gbc.pc(), 0x4072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0215
        gbc.setState(0xacfb, 0x6ceb, 0xe600, 0xb98b, 0x4e5d, 0x6492, 0x0, 0x0);
        gbc.writeMem(0xacfb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6ceb);
        EXPECT(gbc.pc(), 0xacfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacfb), 0x47);
        // 47 0216
        gbc.setState(0x8ac5, 0xfea6, 0xf930, 0x5fb4, 0x7add, 0xbfad, 0x0, 0x0);
        gbc.writeMem(0x8ac5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xfea6);
        EXPECT(gbc.pc(), 0x8ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac5), 0x47);
        // 47 0217
        gbc.setState(0x9315, 0x5adb, 0x35d0, 0xed4d, 0x939d, 0xbf9e, 0x1, 0x1);
        gbc.writeMem(0x9315, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5adb);
        EXPECT(gbc.pc(), 0x9316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9315), 0x47);
        // 47 0218
        gbc.setState(0xac8, 0xf480, 0x6750, 0xefe5, 0xd4c4, 0x8b91, 0x0, 0x1);
        gbc.writeMem(0xac8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf480);
        EXPECT(gbc.pc(), 0xac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0219
        gbc.setState(0x9403, 0x15fc, 0x6f40, 0x7b9d, 0xc5fd, 0xb72b, 0x1, 0x1);
        gbc.writeMem(0x9403, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x15fc);
        EXPECT(gbc.pc(), 0x9404);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9403), 0x47);
        // 47 021A
        gbc.setState(0xc108, 0x5efd, 0x310, 0xb3de, 0x9e8a, 0x1355, 0x0, 0x0);
        gbc.writeMem(0xc108, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5efd);
        EXPECT(gbc.pc(), 0xc109);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc108), 0x47);
        // 47 021B
        gbc.setState(0xa4a2, 0xc7fa, 0xa000, 0x302e, 0x4073, 0x182a, 0x1, 0x1);
        gbc.writeMem(0xa4a2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc7fa);
        EXPECT(gbc.pc(), 0xa4a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a2), 0x47);
        // 47 021C
        gbc.setState(0xd30a, 0x2cb, 0xd410, 0x532e, 0x73e1, 0xefbc, 0x1, 0x1);
        gbc.writeMem(0xd30a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2cb);
        EXPECT(gbc.pc(), 0xd30b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd30a), 0x47);
        // 47 021D
        gbc.setState(0x930e, 0x98ef, 0x3070, 0x70e1, 0x7b5b, 0xa424, 0x1, 0x0);
        gbc.writeMem(0x930e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x98ef);
        EXPECT(gbc.pc(), 0x930f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x930e), 0x47);
        // 47 021E
        gbc.setState(0x9609, 0x7e00, 0xc8d0, 0xd349, 0x85c1, 0x9217, 0x0, 0x1);
        gbc.writeMem(0x9609, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7e00);
        EXPECT(gbc.pc(), 0x960a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9609), 0x47);
        // 47 021F
        gbc.setState(0x56d6, 0x9981, 0xe380, 0x2385, 0x4730, 0x84e2, 0x0, 0x0);
        gbc.writeMem(0x56d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9981);
        EXPECT(gbc.pc(), 0x56d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0220
        gbc.setState(0xf61, 0x696a, 0xbd0, 0x6e33, 0x7f47, 0xff14, 0x0, 0x1);
        gbc.writeMem(0xf61, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x696a);
        EXPECT(gbc.pc(), 0xf62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0221
        gbc.setState(0x9a2, 0xb875, 0x2b0, 0xb383, 0x3f28, 0xf0e5, 0x0, 0x1);
        gbc.writeMem(0x9a2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb875);
        EXPECT(gbc.pc(), 0x9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0223
        gbc.setState(0xe98d, 0xf80c, 0xdc10, 0xd25f, 0x21a7, 0x78e4, 0x0, 0x0);
        gbc.writeMem(0xe98d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf80c);
        EXPECT(gbc.pc(), 0xe98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe98d), 0x47);
        // 47 0224
        gbc.setState(0xd613, 0x8c96, 0xd20, 0x716d, 0x2ccc, 0x11d1, 0x1, 0x0);
        gbc.writeMem(0xd613, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x8c96);
        EXPECT(gbc.pc(), 0xd614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd613), 0x47);
        // 47 0225
        gbc.setState(0x908d, 0xd7cd, 0xb140, 0x65db, 0x8a05, 0x3649, 0x0, 0x0);
        gbc.writeMem(0x908d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd7cd);
        EXPECT(gbc.pc(), 0x908e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908d), 0x47);
        // 47 0226
        gbc.setState(0xa1d6, 0xa0c5, 0xb670, 0xa569, 0x45e7, 0xd04, 0x1, 0x0);
        gbc.writeMem(0xa1d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa0c5);
        EXPECT(gbc.pc(), 0xa1d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d6), 0x47);
        // 47 0227
        gbc.setState(0x560, 0x2f39, 0xa590, 0x4e3, 0x6afb, 0x4981, 0x1, 0x0);
        gbc.writeMem(0x560, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2f39);
        EXPECT(gbc.pc(), 0x561);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0228
        gbc.setState(0x17b6, 0xe9bf, 0x8090, 0xe754, 0xbb9b, 0x5ae1, 0x0, 0x1);
        gbc.writeMem(0x17b6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe9bf);
        EXPECT(gbc.pc(), 0x17b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0229
        gbc.setState(0x29d8, 0xc5e6, 0xe920, 0x41cd, 0xbadd, 0xf466, 0x1, 0x1);
        gbc.writeMem(0x29d8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc5e6);
        EXPECT(gbc.pc(), 0x29d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 022A
        gbc.setState(0xc80f, 0x3bbe, 0xf7e0, 0x57a6, 0xcda8, 0x2adc, 0x1, 0x0);
        gbc.writeMem(0xc80f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3bbe);
        EXPECT(gbc.pc(), 0xc810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc80f), 0x47);
        // 47 022B
        gbc.setState(0x6832, 0x90e3, 0x7800, 0xe50f, 0xed40, 0xe3e6, 0x0, 0x0);
        gbc.writeMem(0x6832, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x90e3);
        EXPECT(gbc.pc(), 0x6833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 022C
        gbc.setState(0xe254, 0xf92d, 0xb550, 0xa568, 0x907, 0xb90f, 0x1, 0x1);
        gbc.writeMem(0xe254, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf92d);
        EXPECT(gbc.pc(), 0xe255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe254), 0x47);
        // 47 022D
        gbc.setState(0x3adf, 0x7616, 0x4160, 0x92e5, 0x6790, 0xe1bd, 0x1, 0x0);
        gbc.writeMem(0x3adf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7616);
        EXPECT(gbc.pc(), 0x3ae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 022E
        gbc.setState(0x8b3f, 0x9add, 0xf910, 0xa455, 0xf3fd, 0x25b, 0x1, 0x1);
        gbc.writeMem(0x8b3f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9add);
        EXPECT(gbc.pc(), 0x8b40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3f), 0x47);
        // 47 022F
        gbc.setState(0x1a84, 0x5717, 0xfae0, 0xc665, 0xfad3, 0x35ae, 0x1, 0x0);
        gbc.writeMem(0x1a84, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5717);
        EXPECT(gbc.pc(), 0x1a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0230
        gbc.setState(0x58af, 0xe6b4, 0xea0, 0xaecf, 0x30d, 0xe349, 0x0, 0x0);
        gbc.writeMem(0x58af, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe6b4);
        EXPECT(gbc.pc(), 0x58b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0231
        gbc.setState(0x3eb8, 0xff6d, 0x220, 0x8601, 0xd38, 0x567a, 0x0, 0x1);
        gbc.writeMem(0x3eb8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xff6d);
        EXPECT(gbc.pc(), 0x3eb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0232
        gbc.setState(0x9b25, 0x575b, 0x25d0, 0x420b, 0x28b3, 0xa9db, 0x1, 0x0);
        gbc.writeMem(0x9b25, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x575b);
        EXPECT(gbc.pc(), 0x9b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b25), 0x47);
        // 47 0233
        gbc.setState(0xd94d, 0x9311, 0x76c0, 0x79fd, 0x649b, 0x1e03, 0x0, 0x0);
        gbc.writeMem(0xd94d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9311);
        EXPECT(gbc.pc(), 0xd94e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94d), 0x47);
        // 47 0234
        gbc.setState(0xe9f8, 0xfbe, 0x6a50, 0x17d3, 0x56ad, 0x71a0, 0x1, 0x1);
        gbc.writeMem(0xe9f8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfbe);
        EXPECT(gbc.pc(), 0xe9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f8), 0x47);
        // 47 0235
        gbc.setState(0x6380, 0x4744, 0x5b50, 0xb0b5, 0x7017, 0x69d, 0x0, 0x1);
        gbc.writeMem(0x6380, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x4744);
        EXPECT(gbc.pc(), 0x6381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0236
        gbc.setState(0x9d47, 0x61ef, 0x5ad0, 0x6e57, 0x29aa, 0xa012, 0x1, 0x1);
        gbc.writeMem(0x9d47, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x61ef);
        EXPECT(gbc.pc(), 0x9d48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d47), 0x47);
        // 47 0237
        gbc.setState(0x455d, 0xe1af, 0xc5c0, 0x5d24, 0x20b9, 0xce80, 0x0, 0x1);
        gbc.writeMem(0x455d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe1af);
        EXPECT(gbc.pc(), 0x455e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0238
        gbc.setState(0xa491, 0xc5d2, 0x8bc0, 0xbe64, 0xddae, 0x2470, 0x1, 0x0);
        gbc.writeMem(0xa491, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xc5d2);
        EXPECT(gbc.pc(), 0xa492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa491), 0x47);
        // 47 0239
        gbc.setState(0xd5be, 0x95bd, 0xb980, 0x8232, 0xb3e2, 0x94d0, 0x0, 0x1);
        gbc.writeMem(0xd5be, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x95bd);
        EXPECT(gbc.pc(), 0xd5bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5be), 0x47);
        // 47 023A
        gbc.setState(0xbe1, 0x310b, 0x8f60, 0x6313, 0x7b57, 0xa74f, 0x0, 0x1);
        gbc.writeMem(0xbe1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x310b);
        EXPECT(gbc.pc(), 0xbe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 023B
        gbc.setState(0xb17d, 0x9fc4, 0x2a20, 0x6386, 0x593c, 0x958f, 0x0, 0x1);
        gbc.writeMem(0xb17d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9fc4);
        EXPECT(gbc.pc(), 0xb17e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb17d), 0x47);
        // 47 023C
        gbc.setState(0x8746, 0x6650, 0x1380, 0xd2f5, 0x2da3, 0x5d25, 0x1, 0x0);
        gbc.writeMem(0x8746, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6650);
        EXPECT(gbc.pc(), 0x8747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8746), 0x47);
        // 47 023D
        gbc.setState(0xa5bf, 0xbc34, 0xf5b0, 0x2dbf, 0x486c, 0xb6e8, 0x1, 0x1);
        gbc.writeMem(0xa5bf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xbc34);
        EXPECT(gbc.pc(), 0xa5c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5bf), 0x47);
        // 47 023E
        gbc.setState(0x15d4, 0x639e, 0xa390, 0x8935, 0xaaac, 0x25e3, 0x1, 0x0);
        gbc.writeMem(0x15d4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x639e);
        EXPECT(gbc.pc(), 0x15d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 023F
        gbc.setState(0xcb0a, 0x5116, 0x5310, 0x4343, 0x67db, 0x43bf, 0x0, 0x0);
        gbc.writeMem(0xcb0a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5116);
        EXPECT(gbc.pc(), 0xcb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb0a), 0x47);
        // 47 0240
        gbc.setState(0x5446, 0xcc8b, 0x18f0, 0xe809, 0x539d, 0x3948, 0x1, 0x0);
        gbc.writeMem(0x5446, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xcc8b);
        EXPECT(gbc.pc(), 0x5447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0241
        gbc.setState(0xddcb, 0x2282, 0x48a0, 0x412a, 0x5155, 0x1c9f, 0x1, 0x1);
        gbc.writeMem(0xddcb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2282);
        EXPECT(gbc.pc(), 0xddcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddcb), 0x47);
        // 47 0242
        gbc.setState(0x3fd6, 0xd78d, 0xafc0, 0xbb10, 0x7d82, 0x676f, 0x1, 0x0);
        gbc.writeMem(0x3fd6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd78d);
        EXPECT(gbc.pc(), 0x3fd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0243
        gbc.setState(0x4d79, 0x46b, 0x17f0, 0x9d2c, 0xa27e, 0x8a87, 0x0, 0x0);
        gbc.writeMem(0x4d79, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x46b);
        EXPECT(gbc.pc(), 0x4d7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0245
        gbc.setState(0x5752, 0x6a1c, 0xe10, 0x9750, 0x7bff, 0x949e, 0x0, 0x0);
        gbc.writeMem(0x5752, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6a1c);
        EXPECT(gbc.pc(), 0x5753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0246
        gbc.setState(0xee8d, 0x48fe, 0x670, 0xfda3, 0x1f5b, 0x8953, 0x1, 0x1);
        gbc.writeMem(0xee8d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x48fe);
        EXPECT(gbc.pc(), 0xee8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8d), 0x47);
        // 47 0248
        gbc.setState(0x3c36, 0x8e2b, 0x3f20, 0x7f1, 0xa918, 0x51a4, 0x1, 0x1);
        gbc.writeMem(0x3c36, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8e2b);
        EXPECT(gbc.pc(), 0x3c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0249
        gbc.setState(0x7e0b, 0x94da, 0x1be0, 0x9df5, 0x8389, 0x130d, 0x1, 0x1);
        gbc.writeMem(0x7e0b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x94da);
        EXPECT(gbc.pc(), 0x7e0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 024A
        gbc.setState(0xbb7, 0x90c, 0xb760, 0x84fc, 0xe9d, 0x288f, 0x1, 0x0);
        gbc.writeMem(0xbb7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x90c);
        EXPECT(gbc.pc(), 0xbb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 024B
        gbc.setState(0xd1bc, 0x1a86, 0x7b50, 0xc7d8, 0x50a, 0xb893, 0x1, 0x0);
        gbc.writeMem(0xd1bc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1a86);
        EXPECT(gbc.pc(), 0xd1bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1bc), 0x47);
        // 47 024C
        gbc.setState(0xeda7, 0x6bd3, 0xbff0, 0x3441, 0xfc68, 0xed30, 0x0, 0x1);
        gbc.writeMem(0xeda7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6bd3);
        EXPECT(gbc.pc(), 0xeda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeda7), 0x47);
        // 47 024D
        gbc.setState(0x83d9, 0xc729, 0x11a0, 0x198f, 0xb3fc, 0xb534, 0x1, 0x0);
        gbc.writeMem(0x83d9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc729);
        EXPECT(gbc.pc(), 0x83da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d9), 0x47);
        // 47 024E
        gbc.setState(0xc26d, 0xe36f, 0xfe50, 0xb139, 0x5845, 0xf46a, 0x1, 0x1);
        gbc.writeMem(0xc26d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe36f);
        EXPECT(gbc.pc(), 0xc26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26d), 0x47);
        // 47 024F
        gbc.setState(0xd940, 0xdbec, 0x5d0, 0xac0d, 0xd416, 0xee1d, 0x0, 0x0);
        gbc.writeMem(0xd940, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xdbec);
        EXPECT(gbc.pc(), 0xd941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd940), 0x47);
        // 47 0250
        gbc.setState(0x22d5, 0xfdcd, 0x17d0, 0xebab, 0xb0b3, 0x988f, 0x0, 0x0);
        gbc.writeMem(0x22d5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfdcd);
        EXPECT(gbc.pc(), 0x22d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0253
        gbc.setState(0xca1f, 0xbe33, 0x92a0, 0x9bb, 0x7ad4, 0xfced, 0x1, 0x1);
        gbc.writeMem(0xca1f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbe33);
        EXPECT(gbc.pc(), 0xca20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca1f), 0x47);
        // 47 0254
        gbc.setState(0xd263, 0x8ba2, 0x270, 0xf99b, 0xc025, 0x9fa, 0x1, 0x0);
        gbc.writeMem(0xd263, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8ba2);
        EXPECT(gbc.pc(), 0xd264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd263), 0x47);
        // 47 0255
        gbc.setState(0xed0b, 0x240d, 0xe7c0, 0x510, 0x2797, 0x6227, 0x0, 0x0);
        gbc.writeMem(0xed0b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x240d);
        EXPECT(gbc.pc(), 0xed0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0b), 0x47);
        // 47 0256
        gbc.setState(0x1edf, 0x2b28, 0x11f0, 0xb11c, 0xccdf, 0x74e7, 0x0, 0x1);
        gbc.writeMem(0x1edf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2b28);
        EXPECT(gbc.pc(), 0x1ee0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0257
        gbc.setState(0x693, 0x7de5, 0x1930, 0x91ce, 0x4a35, 0x3a8c, 0x1, 0x1);
        gbc.writeMem(0x693, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7de5);
        EXPECT(gbc.pc(), 0x694);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0258
        gbc.setState(0xc168, 0x15a3, 0x16b0, 0x4fda, 0x7e74, 0x1187, 0x0, 0x1);
        gbc.writeMem(0xc168, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x15a3);
        EXPECT(gbc.pc(), 0xc169);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc168), 0x47);
        // 47 0259
        gbc.setState(0x944a, 0xfd95, 0x820, 0x4bba, 0x56d7, 0x8304, 0x1, 0x1);
        gbc.writeMem(0x944a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfd95);
        EXPECT(gbc.pc(), 0x944b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x944a), 0x47);
        // 47 025A
        gbc.setState(0xdf1e, 0x8bda, 0x75f0, 0x248c, 0x3b46, 0x775e, 0x1, 0x0);
        gbc.writeMem(0xdf1e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8bda);
        EXPECT(gbc.pc(), 0xdf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf1e), 0x47);
        // 47 025D
        gbc.setState(0xd819, 0x8924, 0x1170, 0x2a34, 0x3b2b, 0x3e7f, 0x1, 0x1);
        gbc.writeMem(0xd819, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8924);
        EXPECT(gbc.pc(), 0xd81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd819), 0x47);
        // 47 025E
        gbc.setState(0x235f, 0x4d32, 0x730, 0x9bd2, 0x5b2b, 0xe98, 0x1, 0x1);
        gbc.writeMem(0x235f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4d32);
        EXPECT(gbc.pc(), 0x2360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 025F
        gbc.setState(0xd0dc, 0x2efb, 0xa70, 0x913a, 0x15bd, 0xe, 0x1, 0x0);
        gbc.writeMem(0xd0dc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2efb);
        EXPECT(gbc.pc(), 0xd0dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0dc), 0x47);
        // 47 0260
        gbc.setState(0x8e98, 0x5186, 0x410, 0xb5dc, 0xa787, 0xb05d, 0x1, 0x0);
        gbc.writeMem(0x8e98, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5186);
        EXPECT(gbc.pc(), 0x8e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e98), 0x47);
        // 47 0261
        gbc.setState(0x233d, 0x8458, 0xc4b0, 0x18b4, 0x7ade, 0xc280, 0x0, 0x1);
        gbc.writeMem(0x233d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8458);
        EXPECT(gbc.pc(), 0x233e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0262
        gbc.setState(0x8353, 0x17f8, 0x6130, 0x9cec, 0xca2, 0x8aa5, 0x0, 0x1);
        gbc.writeMem(0x8353, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x17f8);
        EXPECT(gbc.pc(), 0x8354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8353), 0x47);
        // 47 0263
        gbc.setState(0xc9da, 0xc6b4, 0x7b60, 0x1297, 0x1304, 0x473, 0x1, 0x1);
        gbc.writeMem(0xc9da, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc6b4);
        EXPECT(gbc.pc(), 0xc9db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9da), 0x47);
        // 47 0264
        gbc.setState(0x3c86, 0x6010, 0x2c20, 0x1daf, 0xdc01, 0xfeb6, 0x1, 0x0);
        gbc.writeMem(0x3c86, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6010);
        EXPECT(gbc.pc(), 0x3c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0265
        gbc.setState(0x7728, 0x6135, 0x31e0, 0xb1a8, 0x1f16, 0xac4e, 0x0, 0x0);
        gbc.writeMem(0x7728, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6135);
        EXPECT(gbc.pc(), 0x7729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0266
        gbc.setState(0xabbd, 0x359a, 0xd150, 0x66bb, 0x54e3, 0x64b7, 0x0, 0x1);
        gbc.writeMem(0xabbd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x359a);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbd), 0x47);
        // 47 0267
        gbc.setState(0xea8e, 0xbdfc, 0x1110, 0x24, 0x7ed9, 0x8686, 0x0, 0x0);
        gbc.writeMem(0xea8e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbdfc);
        EXPECT(gbc.pc(), 0xea8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8e), 0x47);
        // 47 0269
        gbc.setState(0xdcdf, 0xc6e5, 0x5c80, 0xc142, 0xf06a, 0x62b4, 0x1, 0x0);
        gbc.writeMem(0xdcdf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc6e5);
        EXPECT(gbc.pc(), 0xdce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcdf), 0x47);
        // 47 026A
        gbc.setState(0x1d54, 0x50b7, 0x34c0, 0x7c28, 0x145b, 0xa29f, 0x1, 0x1);
        gbc.writeMem(0x1d54, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x50b7);
        EXPECT(gbc.pc(), 0x1d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 026B
        gbc.setState(0x1f93, 0xb3f0, 0x8ce0, 0x63bd, 0x58aa, 0xcedf, 0x1, 0x0);
        gbc.writeMem(0x1f93, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb3f0);
        EXPECT(gbc.pc(), 0x1f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 026C
        gbc.setState(0x83c, 0x780c, 0x11d0, 0x88ce, 0xd31d, 0x832e, 0x1, 0x0);
        gbc.writeMem(0x83c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x780c);
        EXPECT(gbc.pc(), 0x83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 026D
        gbc.setState(0x9c68, 0xb87b, 0x6590, 0x7249, 0x5f50, 0x64e4, 0x0, 0x0);
        gbc.writeMem(0x9c68, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb87b);
        EXPECT(gbc.pc(), 0x9c69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c68), 0x47);
        // 47 026E
        gbc.setState(0xa7a3, 0xd9ca, 0x9ac0, 0x8ed0, 0x2275, 0x18ac, 0x0, 0x0);
        gbc.writeMem(0xa7a3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd9ca);
        EXPECT(gbc.pc(), 0xa7a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a3), 0x47);
        // 47 026F
        gbc.setState(0x5b6f, 0x24ef, 0xaee0, 0xa327, 0xc600, 0x10bb, 0x1, 0x1);
        gbc.writeMem(0x5b6f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x24ef);
        EXPECT(gbc.pc(), 0x5b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0270
        gbc.setState(0x958, 0x5c25, 0x66e0, 0x778b, 0x6944, 0x52f0, 0x1, 0x1);
        gbc.writeMem(0x958, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5c25);
        EXPECT(gbc.pc(), 0x959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0271
        gbc.setState(0xd725, 0x7e33, 0xe4d0, 0xe1c6, 0x9afb, 0xa1bd, 0x1, 0x1);
        gbc.writeMem(0xd725, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7e33);
        EXPECT(gbc.pc(), 0xd726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd725), 0x47);
        // 47 0272
        gbc.setState(0xe9b5, 0x4b68, 0xee20, 0xe9c1, 0x474, 0x3de4, 0x0, 0x1);
        gbc.writeMem(0xe9b5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4b68);
        EXPECT(gbc.pc(), 0xe9b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b5), 0x47);
        // 47 0274
        gbc.setState(0x48b5, 0xf330, 0xce40, 0x271c, 0x1bb1, 0xe23f, 0x1, 0x1);
        gbc.writeMem(0x48b5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf330);
        EXPECT(gbc.pc(), 0x48b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0275
        gbc.setState(0xd752, 0xad75, 0xa510, 0xacfc, 0xbbbf, 0x4558, 0x0, 0x0);
        gbc.writeMem(0xd752, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xad75);
        EXPECT(gbc.pc(), 0xd753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd752), 0x47);
        // 47 0276
        gbc.setState(0x6d05, 0x6633, 0xbda0, 0x63fd, 0x1403, 0x4d8, 0x0, 0x1);
        gbc.writeMem(0x6d05, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6633);
        EXPECT(gbc.pc(), 0x6d06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0277
        gbc.setState(0xaf49, 0x1583, 0xdd20, 0xedde, 0x6a0d, 0xd58b, 0x1, 0x1);
        gbc.writeMem(0xaf49, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1583);
        EXPECT(gbc.pc(), 0xaf4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf49), 0x47);
        // 47 0278
        gbc.setState(0x5db8, 0x7e1b, 0xe730, 0xfd66, 0x93f5, 0xfd5e, 0x1, 0x1);
        gbc.writeMem(0x5db8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7e1b);
        EXPECT(gbc.pc(), 0x5db9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0279
        gbc.setState(0xa571, 0x3b31, 0xd5d0, 0xb5ae, 0x1f98, 0x18ec, 0x1, 0x1);
        gbc.writeMem(0xa571, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3b31);
        EXPECT(gbc.pc(), 0xa572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa571), 0x47);
        // 47 027A
        gbc.setState(0xc198, 0x6d2e, 0xd5d0, 0x71ad, 0xe379, 0x9c04, 0x1, 0x1);
        gbc.writeMem(0xc198, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6d2e);
        EXPECT(gbc.pc(), 0xc199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc198), 0x47);
        // 47 027B
        gbc.setState(0xc04a, 0xde93, 0x5cb0, 0x1f51, 0xba91, 0x5da0, 0x1, 0x1);
        gbc.writeMem(0xc04a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xde93);
        EXPECT(gbc.pc(), 0xc04b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc04a), 0x47);
        // 47 027D
        gbc.setState(0xcf65, 0x36fb, 0x49f0, 0x5ed2, 0x3c25, 0xb9ac, 0x0, 0x1);
        gbc.writeMem(0xcf65, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x36fb);
        EXPECT(gbc.pc(), 0xcf66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf65), 0x47);
        // 47 027E
        gbc.setState(0xc374, 0x19b9, 0xbf10, 0x8380, 0x2a4, 0xe097, 0x0, 0x1);
        gbc.writeMem(0xc374, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x19b9);
        EXPECT(gbc.pc(), 0xc375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc374), 0x47);
        // 47 027F
        gbc.setState(0x6326, 0x8755, 0xfc10, 0x2014, 0x9371, 0x65af, 0x0, 0x0);
        gbc.writeMem(0x6326, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8755);
        EXPECT(gbc.pc(), 0x6327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0280
        gbc.setState(0xc58b, 0xa552, 0xd8c0, 0xa3e7, 0xf741, 0xd23b, 0x0, 0x0);
        gbc.writeMem(0xc58b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa552);
        EXPECT(gbc.pc(), 0xc58c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc58b), 0x47);
        // 47 0281
        gbc.setState(0x299, 0xc936, 0xb9b0, 0xd176, 0x4bdf, 0x3688, 0x0, 0x1);
        gbc.writeMem(0x299, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc936);
        EXPECT(gbc.pc(), 0x29a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0282
        gbc.setState(0xd1f, 0xf1f, 0xda30, 0x4691, 0xbe6, 0x8e41, 0x1, 0x0);
        gbc.writeMem(0xd1f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf1f);
        EXPECT(gbc.pc(), 0xd20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0283
        gbc.setState(0xc7de, 0x25e5, 0x8610, 0x681, 0x5c1, 0x129e, 0x0, 0x1);
        gbc.writeMem(0xc7de, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x25e5);
        EXPECT(gbc.pc(), 0xc7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7de), 0x47);
        // 47 0284
        gbc.setState(0x2f3c, 0x549e, 0x9f50, 0xa3d9, 0x7fb7, 0xa456, 0x1, 0x0);
        gbc.writeMem(0x2f3c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x549e);
        EXPECT(gbc.pc(), 0x2f3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0285
        gbc.setState(0x5e1b, 0xeece, 0xf520, 0x394c, 0x3fd4, 0xa04f, 0x0, 0x0);
        gbc.writeMem(0x5e1b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xeece);
        EXPECT(gbc.pc(), 0x5e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0286
        gbc.setState(0x6024, 0x7fc8, 0xdf60, 0x49c8, 0x4f56, 0xa452, 0x1, 0x0);
        gbc.writeMem(0x6024, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7fc8);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0287
        gbc.setState(0x12f9, 0xcecd, 0x59c0, 0x949c, 0xa47a, 0xb33a, 0x0, 0x0);
        gbc.writeMem(0x12f9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcecd);
        EXPECT(gbc.pc(), 0x12fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0288
        gbc.setState(0x3336, 0x3b69, 0x6ed0, 0x83b3, 0x7383, 0xef70, 0x1, 0x1);
        gbc.writeMem(0x3336, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3b69);
        EXPECT(gbc.pc(), 0x3337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0289
        gbc.setState(0x5cdd, 0x9f8e, 0xd6e0, 0xb022, 0x7370, 0x9ace, 0x1, 0x1);
        gbc.writeMem(0x5cdd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9f8e);
        EXPECT(gbc.pc(), 0x5cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 028A
        gbc.setState(0x4812, 0x682f, 0x9e70, 0xc589, 0x17e1, 0xb81b, 0x0, 0x1);
        gbc.writeMem(0x4812, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x682f);
        EXPECT(gbc.pc(), 0x4813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 028C
        gbc.setState(0x1fb5, 0x838b, 0x6a10, 0xf561, 0x620d, 0xc97, 0x0, 0x0);
        gbc.writeMem(0x1fb5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x838b);
        EXPECT(gbc.pc(), 0x1fb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 028D
        gbc.setState(0xe674, 0x3a22, 0x620, 0x1f46, 0x4b31, 0x345, 0x1, 0x0);
        gbc.writeMem(0xe674, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x3a22);
        EXPECT(gbc.pc(), 0xe675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe674), 0x47);
        // 47 028E
        gbc.setState(0xd09c, 0x5e0, 0xd900, 0x40cf, 0xe361, 0xed63, 0x1, 0x1);
        gbc.writeMem(0xd09c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5e0);
        EXPECT(gbc.pc(), 0xd09d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd09c), 0x47);
        // 47 028F
        gbc.setState(0xdecb, 0x3661, 0x3650, 0x4475, 0xe981, 0xed15, 0x1, 0x0);
        gbc.writeMem(0xdecb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3661);
        EXPECT(gbc.pc(), 0xdecc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdecb), 0x47);
        // 47 0290
        gbc.setState(0x9553, 0xb9b1, 0x84a0, 0xa29d, 0x7130, 0xf410, 0x1, 0x1);
        gbc.writeMem(0x9553, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb9b1);
        EXPECT(gbc.pc(), 0x9554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9553), 0x47);
        // 47 0291
        gbc.setState(0x9457, 0x7e38, 0x8a10, 0x9b2c, 0xffd, 0x7352, 0x1, 0x0);
        gbc.writeMem(0x9457, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7e38);
        EXPECT(gbc.pc(), 0x9458);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9457), 0x47);
        // 47 0292
        gbc.setState(0xd7ca, 0xc43d, 0xb650, 0x688e, 0xd98a, 0x5b69, 0x1, 0x1);
        gbc.writeMem(0xd7ca, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc43d);
        EXPECT(gbc.pc(), 0xd7cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ca), 0x47);
        // 47 0293
        gbc.setState(0x6511, 0x808c, 0xc940, 0xb62f, 0x8326, 0x7606, 0x0, 0x0);
        gbc.writeMem(0x6511, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x808c);
        EXPECT(gbc.pc(), 0x6512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0294
        gbc.setState(0x1ac7, 0x40e4, 0xf5c0, 0x1187, 0x9dd, 0x2809, 0x1, 0x0);
        gbc.writeMem(0x1ac7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x40e4);
        EXPECT(gbc.pc(), 0x1ac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0295
        gbc.setState(0xeffa, 0x9a47, 0xec10, 0xf122, 0xa5c6, 0x2567, 0x1, 0x0);
        gbc.writeMem(0xeffa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9a47);
        EXPECT(gbc.pc(), 0xeffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeffa), 0x47);
        // 47 0296
        gbc.setState(0x1b6a, 0x78d, 0x3500, 0xb74a, 0x466b, 0xb6b7, 0x0, 0x0);
        gbc.writeMem(0x1b6a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x78d);
        EXPECT(gbc.pc(), 0x1b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0297
        gbc.setState(0xae79, 0xe202, 0xa140, 0xff71, 0x7b20, 0xb88d, 0x0, 0x1);
        gbc.writeMem(0xae79, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe202);
        EXPECT(gbc.pc(), 0xae7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae79), 0x47);
        // 47 0298
        gbc.setState(0x6f01, 0x947a, 0xf80, 0x40d8, 0xae97, 0x1805, 0x1, 0x0);
        gbc.writeMem(0x6f01, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x947a);
        EXPECT(gbc.pc(), 0x6f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0299
        gbc.setState(0x1a0d, 0xf05f, 0x46a0, 0x8179, 0x574, 0xeb55, 0x0, 0x1);
        gbc.writeMem(0x1a0d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf05f);
        EXPECT(gbc.pc(), 0x1a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 029A
        gbc.setState(0x521a, 0x766d, 0x1bb0, 0xa106, 0xbf98, 0x4f81, 0x0, 0x0);
        gbc.writeMem(0x521a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x766d);
        EXPECT(gbc.pc(), 0x521b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 029B
        gbc.setState(0xa4fd, 0xc9a7, 0x3b70, 0x3014, 0x8b01, 0x3e14, 0x1, 0x1);
        gbc.writeMem(0xa4fd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc9a7);
        EXPECT(gbc.pc(), 0xa4fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4fd), 0x47);
        // 47 029C
        gbc.setState(0x4754, 0x240b, 0xc820, 0xdbc0, 0x7825, 0xf2bf, 0x0, 0x1);
        gbc.writeMem(0x4754, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x240b);
        EXPECT(gbc.pc(), 0x4755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 029D
        gbc.setState(0xd61b, 0x7822, 0xee10, 0x4302, 0x25ed, 0xef4b, 0x0, 0x1);
        gbc.writeMem(0xd61b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7822);
        EXPECT(gbc.pc(), 0xd61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61b), 0x47);
        // 47 029E
        gbc.setState(0xa23f, 0x458f, 0xb790, 0xc3b9, 0x8188, 0xc492, 0x1, 0x1);
        gbc.writeMem(0xa23f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x458f);
        EXPECT(gbc.pc(), 0xa240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa23f), 0x47);
        // 47 029F
        gbc.setState(0x716f, 0xed94, 0x2e0, 0xd61, 0xf0b4, 0x92c2, 0x0, 0x1);
        gbc.writeMem(0x716f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xed94);
        EXPECT(gbc.pc(), 0x7170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02A0
        gbc.setState(0x1df4, 0x502a, 0xf810, 0x5af0, 0xbbce, 0xb8f3, 0x0, 0x0);
        gbc.writeMem(0x1df4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x502a);
        EXPECT(gbc.pc(), 0x1df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02A1
        gbc.setState(0x8ce5, 0x4019, 0x1f70, 0x1f5d, 0x2d2b, 0xcda5, 0x1, 0x1);
        gbc.writeMem(0x8ce5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4019);
        EXPECT(gbc.pc(), 0x8ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce5), 0x47);
        // 47 02A2
        gbc.setState(0xa597, 0xa3dd, 0xdc20, 0xf986, 0x3a5f, 0x3aff, 0x0, 0x1);
        gbc.writeMem(0xa597, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa3dd);
        EXPECT(gbc.pc(), 0xa598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa597), 0x47);
        // 47 02A3
        gbc.setState(0xbdbe, 0xc49d, 0x3350, 0xd177, 0xbc1c, 0x7532, 0x1, 0x1);
        gbc.writeMem(0xbdbe, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc49d);
        EXPECT(gbc.pc(), 0xbdbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdbe), 0x47);
        // 47 02A4
        gbc.setState(0x6029, 0x50da, 0x51b0, 0xcc25, 0x8bf, 0x3c52, 0x0, 0x1);
        gbc.writeMem(0x6029, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x50da);
        EXPECT(gbc.pc(), 0x602a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02A5
        gbc.setState(0xcc14, 0xe20f, 0x5800, 0xcdd9, 0xb2e1, 0xb6b4, 0x0, 0x1);
        gbc.writeMem(0xcc14, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe20f);
        EXPECT(gbc.pc(), 0xcc15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc14), 0x47);
        // 47 02A6
        gbc.setState(0xd4e, 0x2c91, 0x30c0, 0xbee3, 0xe96e, 0xfce2, 0x1, 0x0);
        gbc.writeMem(0xd4e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2c91);
        EXPECT(gbc.pc(), 0xd4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02A7
        gbc.setState(0x7d43, 0xd769, 0x2d80, 0x8df9, 0x567b, 0x48f5, 0x0, 0x0);
        gbc.writeMem(0x7d43, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd769);
        EXPECT(gbc.pc(), 0x7d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02A8
        gbc.setState(0x4769, 0xd0bf, 0xf760, 0x81d7, 0x6364, 0x9668, 0x0, 0x0);
        gbc.writeMem(0x4769, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xd0bf);
        EXPECT(gbc.pc(), 0x476a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02A9
        gbc.setState(0x81c5, 0x2996, 0xd570, 0x148d, 0x5729, 0x719a, 0x1, 0x1);
        gbc.writeMem(0x81c5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2996);
        EXPECT(gbc.pc(), 0x81c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c5), 0x47);
        // 47 02AA
        gbc.setState(0x6275, 0x7cf8, 0x1e40, 0xd7d, 0x15, 0x9c7d, 0x1, 0x0);
        gbc.writeMem(0x6275, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7cf8);
        EXPECT(gbc.pc(), 0x6276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02AB
        gbc.setState(0x137d, 0xa39, 0xc140, 0x58f7, 0x971d, 0x4c3e, 0x1, 0x0);
        gbc.writeMem(0x137d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa39);
        EXPECT(gbc.pc(), 0x137e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02AC
        gbc.setState(0x5e44, 0x83c1, 0x2d90, 0x2cad, 0x6894, 0x5a08, 0x0, 0x0);
        gbc.writeMem(0x5e44, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x83c1);
        EXPECT(gbc.pc(), 0x5e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02AD
        gbc.setState(0x36d1, 0x6f46, 0x53a0, 0x92e8, 0xfae0, 0xad89, 0x0, 0x1);
        gbc.writeMem(0x36d1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6f46);
        EXPECT(gbc.pc(), 0x36d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02AE
        gbc.setState(0x3102, 0x2327, 0xb540, 0x6db7, 0x3761, 0x368, 0x1, 0x0);
        gbc.writeMem(0x3102, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2327);
        EXPECT(gbc.pc(), 0x3103);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02AF
        gbc.setState(0xc1d4, 0xcf95, 0xe7b0, 0x54e8, 0xdc3b, 0xf1bd, 0x1, 0x1);
        gbc.writeMem(0xc1d4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcf95);
        EXPECT(gbc.pc(), 0xc1d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1d4), 0x47);
        // 47 02B0
        gbc.setState(0x1d7c, 0xb187, 0xc000, 0xa02b, 0xeb79, 0xa2b8, 0x0, 0x0);
        gbc.writeMem(0x1d7c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb187);
        EXPECT(gbc.pc(), 0x1d7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02B1
        gbc.setState(0x4d19, 0xff78, 0x4830, 0x1cdb, 0x738d, 0x9634, 0x0, 0x1);
        gbc.writeMem(0x4d19, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xff78);
        EXPECT(gbc.pc(), 0x4d1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02B2
        gbc.setState(0xadd4, 0xebf2, 0xf080, 0xa733, 0x3f84, 0x4e93, 0x1, 0x0);
        gbc.writeMem(0xadd4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xebf2);
        EXPECT(gbc.pc(), 0xadd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd4), 0x47);
        // 47 02B3
        gbc.setState(0x9c05, 0x7d79, 0x4d40, 0x68b4, 0xaf4e, 0x7618, 0x1, 0x0);
        gbc.writeMem(0x9c05, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7d79);
        EXPECT(gbc.pc(), 0x9c06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c05), 0x47);
        // 47 02B4
        gbc.setState(0xb24c, 0xa2b0, 0xc750, 0x7cdd, 0x9e94, 0x698c, 0x0, 0x0);
        gbc.writeMem(0xb24c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa2b0);
        EXPECT(gbc.pc(), 0xb24d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24c), 0x47);
        // 47 02B5
        gbc.setState(0x4d2e, 0x6fc6, 0x8490, 0x43f4, 0x304c, 0x337f, 0x1, 0x1);
        gbc.writeMem(0x4d2e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6fc6);
        EXPECT(gbc.pc(), 0x4d2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02B6
        gbc.setState(0x55e3, 0x112d, 0x300, 0x2488, 0x8eb7, 0x1035, 0x0, 0x1);
        gbc.writeMem(0x55e3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x112d);
        EXPECT(gbc.pc(), 0x55e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02B7
        gbc.setState(0xe3c4, 0xd2b1, 0x3ec0, 0xf9dd, 0x2cea, 0xc29, 0x0, 0x1);
        gbc.writeMem(0xe3c4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd2b1);
        EXPECT(gbc.pc(), 0xe3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c4), 0x47);
        // 47 02B8
        gbc.setState(0xd9d5, 0xc203, 0x45a0, 0xa5be, 0x3f7e, 0xb594, 0x0, 0x1);
        gbc.writeMem(0xd9d5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc203);
        EXPECT(gbc.pc(), 0xd9d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d5), 0x47);
        // 47 02B9
        gbc.setState(0x6ef7, 0xf6b6, 0xe970, 0x8444, 0xd75b, 0xf390, 0x1, 0x0);
        gbc.writeMem(0x6ef7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf6b6);
        EXPECT(gbc.pc(), 0x6ef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02BA
        gbc.setState(0xcfb5, 0x3c90, 0x9bc0, 0x2a11, 0x1563, 0x1ab2, 0x1, 0x1);
        gbc.writeMem(0xcfb5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3c90);
        EXPECT(gbc.pc(), 0xcfb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb5), 0x47);
        // 47 02BB
        gbc.setState(0x72bc, 0xee3c, 0x80e0, 0x12a6, 0xb56d, 0xc6e1, 0x0, 0x0);
        gbc.writeMem(0x72bc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xee3c);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02BC
        gbc.setState(0x67a, 0x6f57, 0x8de0, 0x1461, 0x7c54, 0xa2a, 0x1, 0x1);
        gbc.writeMem(0x67a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6f57);
        EXPECT(gbc.pc(), 0x67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02BD
        gbc.setState(0x8b32, 0xd8c0, 0x4f20, 0x294d, 0x84bf, 0x3be8, 0x0, 0x0);
        gbc.writeMem(0x8b32, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd8c0);
        EXPECT(gbc.pc(), 0x8b33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b32), 0x47);
        // 47 02BE
        gbc.setState(0xa5b1, 0x558b, 0x5c90, 0xc02d, 0x7924, 0x64b5, 0x1, 0x0);
        gbc.writeMem(0xa5b1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x558b);
        EXPECT(gbc.pc(), 0xa5b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5b1), 0x47);
        // 47 02BF
        gbc.setState(0x19dc, 0xb509, 0x3a70, 0x5c02, 0xe2da, 0xca54, 0x0, 0x1);
        gbc.writeMem(0x19dc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb509);
        EXPECT(gbc.pc(), 0x19dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02C0
        gbc.setState(0xbece, 0xbff8, 0x7240, 0x23a2, 0x5fc2, 0xa4dd, 0x0, 0x1);
        gbc.writeMem(0xbece, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbff8);
        EXPECT(gbc.pc(), 0xbecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbece), 0x47);
        // 47 02C1
        gbc.setState(0xeccf, 0x33e0, 0x2f40, 0xd65, 0x5ce1, 0x9010, 0x1, 0x0);
        gbc.writeMem(0xeccf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x33e0);
        EXPECT(gbc.pc(), 0xecd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccf), 0x47);
        // 47 02C2
        gbc.setState(0x5fe1, 0x19a0, 0x6c20, 0xcb7d, 0xbc58, 0x8293, 0x0, 0x0);
        gbc.writeMem(0x5fe1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x19a0);
        EXPECT(gbc.pc(), 0x5fe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02C3
        gbc.setState(0x641e, 0x8dc4, 0xdc20, 0xd1cc, 0x850f, 0xe770, 0x1, 0x0);
        gbc.writeMem(0x641e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8dc4);
        EXPECT(gbc.pc(), 0x641f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02C4
        gbc.setState(0x5b67, 0xa1c3, 0x9010, 0x4a42, 0xf143, 0xf90d, 0x1, 0x1);
        gbc.writeMem(0x5b67, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa1c3);
        EXPECT(gbc.pc(), 0x5b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02C5
        gbc.setState(0x95e5, 0x4663, 0xba20, 0x94b9, 0xfcf5, 0xc456, 0x1, 0x0);
        gbc.writeMem(0x95e5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4663);
        EXPECT(gbc.pc(), 0x95e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e5), 0x47);
        // 47 02C6
        gbc.setState(0xdb8c, 0xa560, 0x9ab0, 0x8e15, 0x2a0e, 0xca44, 0x0, 0x1);
        gbc.writeMem(0xdb8c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa560);
        EXPECT(gbc.pc(), 0xdb8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8c), 0x47);
        // 47 02C7
        gbc.setState(0x4b3e, 0x65d8, 0xc670, 0xca0b, 0xa661, 0xfde5, 0x0, 0x0);
        gbc.writeMem(0x4b3e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x65d8);
        EXPECT(gbc.pc(), 0x4b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02C8
        gbc.setState(0x3cbc, 0x4a79, 0xa470, 0x75, 0x66d, 0x5488, 0x1, 0x1);
        gbc.writeMem(0x3cbc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4a79);
        EXPECT(gbc.pc(), 0x3cbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02C9
        gbc.setState(0xa26b, 0xfde0, 0xfb40, 0xbf89, 0xb373, 0x8dc, 0x1, 0x0);
        gbc.writeMem(0xa26b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfde0);
        EXPECT(gbc.pc(), 0xa26c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa26b), 0x47);
        // 47 02CA
        gbc.setState(0x5892, 0x9408, 0x4680, 0x9d13, 0x2ea5, 0xec8f, 0x0, 0x0);
        gbc.writeMem(0x5892, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9408);
        EXPECT(gbc.pc(), 0x5893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02CB
        gbc.setState(0x1e4a, 0x6bcb, 0x3ab0, 0xc5de, 0x7f6b, 0xccf9, 0x1, 0x1);
        gbc.writeMem(0x1e4a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6bcb);
        EXPECT(gbc.pc(), 0x1e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02CC
        gbc.setState(0x3260, 0x3222, 0x9170, 0xf382, 0xc435, 0xb7f2, 0x0, 0x1);
        gbc.writeMem(0x3260, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3222);
        EXPECT(gbc.pc(), 0x3261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02CD
        gbc.setState(0x77c0, 0xc9cc, 0xcf40, 0x29f, 0x94cf, 0x37a8, 0x1, 0x1);
        gbc.writeMem(0x77c0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc9cc);
        EXPECT(gbc.pc(), 0x77c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02CE
        gbc.setState(0xf90, 0x7116, 0xd220, 0x57dd, 0x5364, 0x4e69, 0x0, 0x1);
        gbc.writeMem(0xf90, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7116);
        EXPECT(gbc.pc(), 0xf91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02CF
        gbc.setState(0x2392, 0x3330, 0xfec0, 0x82db, 0xca49, 0x6981, 0x1, 0x0);
        gbc.writeMem(0x2392, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3330);
        EXPECT(gbc.pc(), 0x2393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02D0
        gbc.setState(0xac4, 0x7625, 0xd8e0, 0x5051, 0x3fdc, 0xfe3b, 0x1, 0x1);
        gbc.writeMem(0xac4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7625);
        EXPECT(gbc.pc(), 0xac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02D1
        gbc.setState(0x5d39, 0xcf99, 0x26b0, 0xeb39, 0x7aec, 0xb2c6, 0x0, 0x1);
        gbc.writeMem(0x5d39, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xcf99);
        EXPECT(gbc.pc(), 0x5d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02D2
        gbc.setState(0xc23b, 0x8571, 0x2890, 0xfacf, 0xcc30, 0x1e79, 0x0, 0x0);
        gbc.writeMem(0xc23b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8571);
        EXPECT(gbc.pc(), 0xc23c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23b), 0x47);
        // 47 02D3
        gbc.setState(0x9b5d, 0xd000, 0x5ea0, 0x7697, 0xd953, 0x4dd7, 0x1, 0x1);
        gbc.writeMem(0x9b5d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd000);
        EXPECT(gbc.pc(), 0x9b5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5d), 0x47);
        // 47 02D4
        gbc.setState(0x4b57, 0x50e1, 0x93a0, 0x83d, 0xf3ff, 0x9da6, 0x0, 0x0);
        gbc.writeMem(0x4b57, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x50e1);
        EXPECT(gbc.pc(), 0x4b58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02D5
        gbc.setState(0xb0f0, 0x819a, 0x8d90, 0x64e7, 0xca28, 0xe230, 0x0, 0x0);
        gbc.writeMem(0xb0f0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x819a);
        EXPECT(gbc.pc(), 0xb0f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f0), 0x47);
        // 47 02D6
        gbc.setState(0x20cc, 0x8495, 0x6a20, 0xfb3c, 0x340f, 0x5d9, 0x1, 0x0);
        gbc.writeMem(0x20cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8495);
        EXPECT(gbc.pc(), 0x20cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02D7
        gbc.setState(0xb24a, 0xac1b, 0xae30, 0x6797, 0x56be, 0xd262, 0x0, 0x1);
        gbc.writeMem(0xb24a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xac1b);
        EXPECT(gbc.pc(), 0xb24b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24a), 0x47);
        // 47 02DA
        gbc.setState(0xcc98, 0x48ae, 0x9c60, 0x476, 0x1be3, 0xb25, 0x1, 0x1);
        gbc.writeMem(0xcc98, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x48ae);
        EXPECT(gbc.pc(), 0xcc99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc98), 0x47);
        // 47 02DC
        gbc.setState(0x9d01, 0x57e7, 0xb930, 0xa7c5, 0xaf7d, 0xd20b, 0x0, 0x0);
        gbc.writeMem(0x9d01, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x57e7);
        EXPECT(gbc.pc(), 0x9d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d01), 0x47);
        // 47 02DD
        gbc.setState(0xc181, 0x2c61, 0x1d90, 0x98d9, 0x57cb, 0x2bd1, 0x0, 0x0);
        gbc.writeMem(0xc181, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2c61);
        EXPECT(gbc.pc(), 0xc182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc181), 0x47);
        // 47 02DE
        gbc.setState(0x8d91, 0x47bb, 0xc190, 0xde2, 0x68df, 0x79f6, 0x1, 0x1);
        gbc.writeMem(0x8d91, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x47bb);
        EXPECT(gbc.pc(), 0x8d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d91), 0x47);
        // 47 02DF
        gbc.setState(0xcd8, 0xc567, 0x1360, 0xd1b0, 0x1343, 0xb196, 0x0, 0x1);
        gbc.writeMem(0xcd8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc567);
        EXPECT(gbc.pc(), 0xcd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02E0
        gbc.setState(0x9fe0, 0xaed8, 0x6520, 0x71d9, 0x52de, 0xeca0, 0x0, 0x1);
        gbc.writeMem(0x9fe0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xaed8);
        EXPECT(gbc.pc(), 0x9fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe0), 0x47);
        // 47 02E1
        gbc.setState(0xab22, 0xf451, 0xbf10, 0x6a08, 0xfcbe, 0x2579, 0x1, 0x1);
        gbc.writeMem(0xab22, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf451);
        EXPECT(gbc.pc(), 0xab23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab22), 0x47);
        // 47 02E2
        gbc.setState(0xbc1f, 0x96a0, 0x53b0, 0x1524, 0x3f78, 0xb567, 0x1, 0x0);
        gbc.writeMem(0xbc1f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x96a0);
        EXPECT(gbc.pc(), 0xbc20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc1f), 0x47);
        // 47 02E3
        gbc.setState(0xd184, 0xa30a, 0x7cf0, 0x8378, 0xe168, 0x6558, 0x0, 0x1);
        gbc.writeMem(0xd184, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa30a);
        EXPECT(gbc.pc(), 0xd185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd184), 0x47);
        // 47 02E4
        gbc.setState(0x63fe, 0x3d37, 0x6440, 0x88a5, 0xc403, 0x79a0, 0x0, 0x0);
        gbc.writeMem(0x63fe, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3d37);
        EXPECT(gbc.pc(), 0x63ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02E5
        gbc.setState(0xcb3e, 0x5b75, 0x5260, 0x8a1a, 0xd304, 0xc4a9, 0x1, 0x1);
        gbc.writeMem(0xcb3e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5b75);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3e), 0x47);
        // 47 02E6
        gbc.setState(0x3fb4, 0xc7ce, 0xbd60, 0x521d, 0xdbe7, 0x328e, 0x0, 0x0);
        gbc.writeMem(0x3fb4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc7ce);
        EXPECT(gbc.pc(), 0x3fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02E7
        gbc.setState(0xa4a1, 0x7ec5, 0xff20, 0xf06c, 0x1e04, 0x2f0d, 0x1, 0x0);
        gbc.writeMem(0xa4a1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7ec5);
        EXPECT(gbc.pc(), 0xa4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4a1), 0x47);
        // 47 02E8
        gbc.setState(0xcad9, 0xcf43, 0x9c90, 0xdab1, 0x5058, 0x69bb, 0x0, 0x0);
        gbc.writeMem(0xcad9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcf43);
        EXPECT(gbc.pc(), 0xcada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad9), 0x47);
        // 47 02E9
        gbc.setState(0xa33c, 0x27c, 0x1a0, 0xd510, 0x9e8b, 0xd103, 0x1, 0x1);
        gbc.writeMem(0xa33c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x27c);
        EXPECT(gbc.pc(), 0xa33d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa33c), 0x47);
        // 47 02EA
        gbc.setState(0x1e6b, 0x5d5c, 0xe830, 0xdd63, 0x1121, 0x78ea, 0x0, 0x1);
        gbc.writeMem(0x1e6b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5d5c);
        EXPECT(gbc.pc(), 0x1e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 02EB
        gbc.setState(0x20c2, 0x1f9f, 0x86d0, 0x5b56, 0xb7aa, 0xbd47, 0x1, 0x0);
        gbc.writeMem(0x20c2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1f9f);
        EXPECT(gbc.pc(), 0x20c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02EC
        gbc.setState(0x7069, 0xef17, 0x29d0, 0xd7df, 0xf39e, 0x1ebf, 0x1, 0x1);
        gbc.writeMem(0x7069, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xef17);
        EXPECT(gbc.pc(), 0x706a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02ED
        gbc.setState(0x8595, 0x25d7, 0x4710, 0x7c5e, 0xf6df, 0x3d4f, 0x0, 0x0);
        gbc.writeMem(0x8595, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x25d7);
        EXPECT(gbc.pc(), 0x8596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8595), 0x47);
        // 47 02EF
        gbc.setState(0x3bd, 0x1144, 0x61c0, 0xca18, 0x35e5, 0xc47d, 0x1, 0x0);
        gbc.writeMem(0x3bd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1144);
        EXPECT(gbc.pc(), 0x3be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02F0
        gbc.setState(0xc7e7, 0xfa5b, 0xb110, 0x8f32, 0xdfa6, 0x1c63, 0x1, 0x1);
        gbc.writeMem(0xc7e7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xfa5b);
        EXPECT(gbc.pc(), 0xc7e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e7), 0x47);
        // 47 02F2
        gbc.setState(0x7db9, 0x66f, 0xdc00, 0xca52, 0x980d, 0xc3b8, 0x0, 0x1);
        gbc.writeMem(0x7db9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x66f);
        EXPECT(gbc.pc(), 0x7dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02F3
        gbc.setState(0xb458, 0x1095, 0x6560, 0xfe33, 0x2a15, 0xa791, 0x0, 0x1);
        gbc.writeMem(0xb458, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1095);
        EXPECT(gbc.pc(), 0xb459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb458), 0x47);
        // 47 02F4
        gbc.setState(0x2e62, 0xb31a, 0xcc0, 0xd606, 0xc534, 0xfd02, 0x1, 0x1);
        gbc.writeMem(0x2e62, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb31a);
        EXPECT(gbc.pc(), 0x2e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02F5
        gbc.setState(0x7676, 0x92e1, 0xf510, 0x4a55, 0x72d9, 0xc070, 0x0, 0x0);
        gbc.writeMem(0x7676, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x92e1);
        EXPECT(gbc.pc(), 0x7677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02F6
        gbc.setState(0xb98f, 0x4e47, 0xaa00, 0x6a72, 0x504b, 0xa5e, 0x1, 0x1);
        gbc.writeMem(0xb98f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4e47);
        EXPECT(gbc.pc(), 0xb990);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb98f), 0x47);
        // 47 02F7
        gbc.setState(0x8c1c, 0x2d70, 0xce40, 0x42f2, 0x36dc, 0x994a, 0x1, 0x1);
        gbc.writeMem(0x8c1c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2d70);
        EXPECT(gbc.pc(), 0x8c1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c1c), 0x47);
        // 47 02F8
        gbc.setState(0x809, 0x9ad5, 0xce10, 0x2c50, 0xf75e, 0xcc9a, 0x0, 0x1);
        gbc.writeMem(0x809, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9ad5);
        EXPECT(gbc.pc(), 0x80a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 02F9
        gbc.setState(0x8ac2, 0xc9ce, 0x7160, 0xe91e, 0xa8a, 0xcc72, 0x0, 0x0);
        gbc.writeMem(0x8ac2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc9ce);
        EXPECT(gbc.pc(), 0x8ac3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac2), 0x47);
        // 47 02FA
        gbc.setState(0x4f99, 0xf5a, 0x8120, 0xa4fb, 0x1d62, 0x45ac, 0x1, 0x1);
        gbc.writeMem(0x4f99, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf5a);
        EXPECT(gbc.pc(), 0x4f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02FB
        gbc.setState(0x3eb7, 0x8531, 0xb300, 0xdb96, 0xcd71, 0x5e74, 0x1, 0x1);
        gbc.writeMem(0x3eb7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8531);
        EXPECT(gbc.pc(), 0x3eb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02FC
        gbc.setState(0x668d, 0x1591, 0x21e0, 0x5e7, 0x52e8, 0xcc1c, 0x1, 0x0);
        gbc.writeMem(0x668d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1591);
        EXPECT(gbc.pc(), 0x668e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 02FD
        gbc.setState(0xa1bd, 0x299a, 0xd8c0, 0x1ce3, 0x8858, 0xb5fd, 0x1, 0x0);
        gbc.writeMem(0xa1bd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x299a);
        EXPECT(gbc.pc(), 0xa1be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1bd), 0x47);
        // 47 02FE
        gbc.setState(0x3960, 0x27a8, 0xf280, 0x40e2, 0x95fd, 0x6e5f, 0x0, 0x0);
        gbc.writeMem(0x3960, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x27a8);
        EXPECT(gbc.pc(), 0x3961);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 02FF
        gbc.setState(0x2e2f, 0x7e24, 0xf660, 0x4e98, 0xdb0, 0x6e06, 0x0, 0x1);
        gbc.writeMem(0x2e2f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7e24);
        EXPECT(gbc.pc(), 0x2e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0300
        gbc.setState(0x4485, 0xdcec, 0xc540, 0x25af, 0x3a29, 0xc7c7, 0x1, 0x1);
        gbc.writeMem(0x4485, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xdcec);
        EXPECT(gbc.pc(), 0x4486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0301
        gbc.setState(0x520a, 0x5acf, 0xed80, 0x360c, 0x127, 0x8a7e, 0x1, 0x0);
        gbc.writeMem(0x520a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5acf);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0302
        gbc.setState(0x9a18, 0xe0a8, 0x8260, 0x86f6, 0xcf5e, 0x2321, 0x1, 0x0);
        gbc.writeMem(0x9a18, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe0a8);
        EXPECT(gbc.pc(), 0x9a19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a18), 0x47);
        // 47 0303
        gbc.setState(0xf74, 0x453a, 0xb7f0, 0x736f, 0x2322, 0x45aa, 0x0, 0x1);
        gbc.writeMem(0xf74, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x453a);
        EXPECT(gbc.pc(), 0xf75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0304
        gbc.setState(0xa751, 0x9383, 0x50a0, 0x6bb1, 0x8c1a, 0x6bf8, 0x0, 0x0);
        gbc.writeMem(0xa751, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9383);
        EXPECT(gbc.pc(), 0xa752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa751), 0x47);
        // 47 0305
        gbc.setState(0xec59, 0xc443, 0x9ee0, 0xa26e, 0x8eff, 0x14e5, 0x1, 0x0);
        gbc.writeMem(0xec59, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc443);
        EXPECT(gbc.pc(), 0xec5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec59), 0x47);
        // 47 0306
        gbc.setState(0x5606, 0x7bee, 0xc620, 0xf5dc, 0xa481, 0xb031, 0x1, 0x1);
        gbc.writeMem(0x5606, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7bee);
        EXPECT(gbc.pc(), 0x5607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0307
        gbc.setState(0x4e8a, 0x68fa, 0xb130, 0x34c9, 0x2030, 0x173b, 0x0, 0x0);
        gbc.writeMem(0x4e8a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x68fa);
        EXPECT(gbc.pc(), 0x4e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0308
        gbc.setState(0x62a9, 0x496a, 0x82e0, 0x8318, 0xebe5, 0x286c, 0x1, 0x1);
        gbc.writeMem(0x62a9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x496a);
        EXPECT(gbc.pc(), 0x62aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0309
        gbc.setState(0x71fb, 0xbc2d, 0x31d0, 0x5907, 0xb00c, 0xb61d, 0x1, 0x0);
        gbc.writeMem(0x71fb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xbc2d);
        EXPECT(gbc.pc(), 0x71fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 030A
        gbc.setState(0xa8f7, 0x6062, 0x71c0, 0xebf9, 0x1b63, 0x7aed, 0x1, 0x1);
        gbc.writeMem(0xa8f7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6062);
        EXPECT(gbc.pc(), 0xa8f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f7), 0x47);
        // 47 030B
        gbc.setState(0x21e9, 0xd2da, 0x3230, 0x216f, 0x946b, 0xcac4, 0x1, 0x1);
        gbc.writeMem(0x21e9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xd2da);
        EXPECT(gbc.pc(), 0x21ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 030C
        gbc.setState(0xc1fa, 0xab22, 0x6630, 0x2148, 0xc433, 0xc5a2, 0x0, 0x1);
        gbc.writeMem(0xc1fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xab22);
        EXPECT(gbc.pc(), 0xc1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1fa), 0x47);
        // 47 030D
        gbc.setState(0xb300, 0xd537, 0x91f0, 0x69a, 0x8792, 0x1de6, 0x0, 0x0);
        gbc.writeMem(0xb300, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd537);
        EXPECT(gbc.pc(), 0xb301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb300), 0x47);
        // 47 030E
        gbc.setState(0xd463, 0x30e0, 0x7f40, 0x2e60, 0x1968, 0x7e0c, 0x0, 0x0);
        gbc.writeMem(0xd463, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x30e0);
        EXPECT(gbc.pc(), 0xd464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd463), 0x47);
        // 47 030F
        gbc.setState(0x2ef2, 0xb275, 0xe40, 0xa808, 0xe192, 0xaa11, 0x1, 0x0);
        gbc.writeMem(0x2ef2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb275);
        EXPECT(gbc.pc(), 0x2ef3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0310
        gbc.setState(0xa2c3, 0xd74f, 0x2810, 0xafee, 0x7b89, 0x38d7, 0x1, 0x0);
        gbc.writeMem(0xa2c3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd74f);
        EXPECT(gbc.pc(), 0xa2c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c3), 0x47);
        // 47 0311
        gbc.setState(0x51cd, 0x219d, 0x950, 0x84f7, 0x2f23, 0xcccc, 0x1, 0x1);
        gbc.writeMem(0x51cd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x219d);
        EXPECT(gbc.pc(), 0x51ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0312
        gbc.setState(0x99, 0xed0a, 0xe070, 0x3394, 0x19fa, 0x64b3, 0x1, 0x0);
        gbc.writeMem(0x99, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xed0a);
        EXPECT(gbc.pc(), 0x9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0313
        gbc.setState(0x839f, 0xe713, 0x50f0, 0x15ae, 0xcb5, 0x900e, 0x1, 0x1);
        gbc.writeMem(0x839f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe713);
        EXPECT(gbc.pc(), 0x83a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x839f), 0x47);
        // 47 0314
        gbc.setState(0x7fc9, 0x3085, 0x6d30, 0xde3d, 0xec81, 0xef1, 0x0, 0x1);
        gbc.writeMem(0x7fc9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3085);
        EXPECT(gbc.pc(), 0x7fca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0315
        gbc.setState(0xacd8, 0x2fc6, 0x350, 0xb498, 0x65a, 0xbae, 0x0, 0x0);
        gbc.writeMem(0xacd8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2fc6);
        EXPECT(gbc.pc(), 0xacd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd8), 0x47);
        // 47 0316
        gbc.setState(0xefe1, 0x4caa, 0x4d80, 0xa6ed, 0xc91f, 0x8456, 0x1, 0x1);
        gbc.writeMem(0xefe1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4caa);
        EXPECT(gbc.pc(), 0xefe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe1), 0x47);
        // 47 0317
        gbc.setState(0xa14d, 0x7b4e, 0x2370, 0xdb41, 0x1b44, 0x6267, 0x0, 0x0);
        gbc.writeMem(0xa14d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7b4e);
        EXPECT(gbc.pc(), 0xa14e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa14d), 0x47);
        // 47 0318
        gbc.setState(0x6847, 0x675c, 0x2840, 0xe35c, 0xf5db, 0x6e11, 0x1, 0x0);
        gbc.writeMem(0x6847, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x675c);
        EXPECT(gbc.pc(), 0x6848);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0319
        gbc.setState(0xe6a7, 0x3a96, 0xd240, 0x8a3a, 0x431d, 0x94ac, 0x0, 0x0);
        gbc.writeMem(0xe6a7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3a96);
        EXPECT(gbc.pc(), 0xe6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a7), 0x47);
        // 47 031B
        gbc.setState(0x59e1, 0x430f, 0xcef0, 0xd791, 0xb7e0, 0x5137, 0x1, 0x1);
        gbc.writeMem(0x59e1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0x59e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 031C
        gbc.setState(0xb323, 0xee08, 0xa350, 0x4172, 0x714e, 0xebd2, 0x0, 0x0);
        gbc.writeMem(0xb323, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xee08);
        EXPECT(gbc.pc(), 0xb324);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb323), 0x47);
        // 47 031D
        gbc.setState(0xb959, 0x8497, 0x7c70, 0xdfcf, 0x4863, 0x3eb1, 0x1, 0x0);
        gbc.writeMem(0xb959, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8497);
        EXPECT(gbc.pc(), 0xb95a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb959), 0x47);
        // 47 031E
        gbc.setState(0x9bec, 0x6efc, 0x9420, 0xff81, 0xc04b, 0xf93e, 0x1, 0x0);
        gbc.writeMem(0x9bec, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6efc);
        EXPECT(gbc.pc(), 0x9bed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bec), 0x47);
        // 47 031F
        gbc.setState(0x99a, 0x6605, 0x1450, 0x180c, 0xdec5, 0x2ffe, 0x0, 0x0);
        gbc.writeMem(0x99a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6605);
        EXPECT(gbc.pc(), 0x99b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0320
        gbc.setState(0xb176, 0x612e, 0x4640, 0x70e7, 0x507a, 0xc0d2, 0x0, 0x1);
        gbc.writeMem(0xb176, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x612e);
        EXPECT(gbc.pc(), 0xb177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb176), 0x47);
        // 47 0321
        gbc.setState(0xdb2d, 0x121c, 0xdba0, 0x948, 0x6d8, 0xe78e, 0x0, 0x1);
        gbc.writeMem(0xdb2d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x121c);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2d), 0x47);
        // 47 0322
        gbc.setState(0x9841, 0xe491, 0x19a0, 0x66d2, 0x54d3, 0x3a33, 0x1, 0x1);
        gbc.writeMem(0x9841, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe491);
        EXPECT(gbc.pc(), 0x9842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9841), 0x47);
        // 47 0324
        gbc.setState(0xaed3, 0xcd9a, 0xd410, 0xd5d6, 0xb8d5, 0xf202, 0x0, 0x0);
        gbc.writeMem(0xaed3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcd9a);
        EXPECT(gbc.pc(), 0xaed4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed3), 0x47);
        // 47 0325
        gbc.setState(0xd78f, 0x8835, 0xb1c0, 0xad3c, 0x2a3d, 0xee0f, 0x0, 0x0);
        gbc.writeMem(0xd78f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8835);
        EXPECT(gbc.pc(), 0xd790);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78f), 0x47);
        // 47 0326
        gbc.setState(0xd058, 0x2a4a, 0x7a0, 0x586d, 0x1799, 0xa009, 0x0, 0x1);
        gbc.writeMem(0xd058, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x2a4a);
        EXPECT(gbc.pc(), 0xd059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd058), 0x47);
        // 47 0327
        gbc.setState(0x9b7, 0x8236, 0xc510, 0x7c87, 0xbe5d, 0xc221, 0x0, 0x1);
        gbc.writeMem(0x9b7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8236);
        EXPECT(gbc.pc(), 0x9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0328
        gbc.setState(0x5e69, 0x5c3e, 0xfdf0, 0xab36, 0x190b, 0x2a6e, 0x0, 0x0);
        gbc.writeMem(0x5e69, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5c3e);
        EXPECT(gbc.pc(), 0x5e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0329
        gbc.setState(0x599d, 0x1f84, 0xc280, 0xa6f6, 0x466b, 0x6e94, 0x0, 0x1);
        gbc.writeMem(0x599d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1f84);
        EXPECT(gbc.pc(), 0x599e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 032A
        gbc.setState(0x1d86, 0xe37d, 0x1e30, 0xb698, 0xde36, 0xb476, 0x0, 0x1);
        gbc.writeMem(0x1d86, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe37d);
        EXPECT(gbc.pc(), 0x1d87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 032B
        gbc.setState(0xddb0, 0x4395, 0xf8f0, 0x3d7d, 0x5729, 0x997b, 0x0, 0x0);
        gbc.writeMem(0xddb0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4395);
        EXPECT(gbc.pc(), 0xddb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb0), 0x47);
        // 47 032C
        gbc.setState(0x5e9b, 0x5f0b, 0x6c60, 0x3c64, 0xa936, 0xabf8, 0x1, 0x1);
        gbc.writeMem(0x5e9b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5f0b);
        EXPECT(gbc.pc(), 0x5e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 032D
        gbc.setState(0x86cd, 0x4b71, 0x440, 0xd5b3, 0xd6e8, 0xcc51, 0x0, 0x0);
        gbc.writeMem(0x86cd, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4b71);
        EXPECT(gbc.pc(), 0x86ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86cd), 0x47);
        // 47 032E
        gbc.setState(0xa612, 0x427b, 0xdeb0, 0x45bf, 0x9d72, 0xe57f, 0x0, 0x1);
        gbc.writeMem(0xa612, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x427b);
        EXPECT(gbc.pc(), 0xa613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa612), 0x47);
        // 47 032F
        gbc.setState(0xd95c, 0xf315, 0x8620, 0x9fd4, 0xab4e, 0x2b3b, 0x1, 0x1);
        gbc.writeMem(0xd95c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf315);
        EXPECT(gbc.pc(), 0xd95d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95c), 0x47);
        // 47 0330
        gbc.setState(0x6ee1, 0xf998, 0x3d80, 0x67f8, 0xe0ed, 0x3c5e, 0x0, 0x1);
        gbc.writeMem(0x6ee1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf998);
        EXPECT(gbc.pc(), 0x6ee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0331
        gbc.setState(0xd2d6, 0xdc92, 0xb400, 0x733b, 0x4ee3, 0x9c24, 0x1, 0x0);
        gbc.writeMem(0xd2d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdc92);
        EXPECT(gbc.pc(), 0xd2d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d6), 0x47);
        // 47 0332
        gbc.setState(0xc7b8, 0xd3b6, 0x17a0, 0x8431, 0x370c, 0xb092, 0x0, 0x1);
        gbc.writeMem(0xc7b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd3b6);
        EXPECT(gbc.pc(), 0xc7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7b8), 0x47);
        // 47 0333
        gbc.setState(0x51f7, 0x5501, 0x1720, 0xbbce, 0x78bf, 0x535f, 0x1, 0x1);
        gbc.writeMem(0x51f7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5501);
        EXPECT(gbc.pc(), 0x51f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0334
        gbc.setState(0x3856, 0x4b10, 0x8650, 0x886a, 0x147a, 0x68ea, 0x1, 0x1);
        gbc.writeMem(0x3856, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4b10);
        EXPECT(gbc.pc(), 0x3857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0335
        gbc.setState(0x7183, 0x188f, 0x6740, 0xc85b, 0xa773, 0xf0ae, 0x1, 0x1);
        gbc.writeMem(0x7183, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x188f);
        EXPECT(gbc.pc(), 0x7184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0336
        gbc.setState(0xbfc7, 0x8423, 0x6400, 0x6354, 0x384, 0x4f4d, 0x0, 0x0);
        gbc.writeMem(0xbfc7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8423);
        EXPECT(gbc.pc(), 0xbfc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc7), 0x47);
        // 47 0337
        gbc.setState(0x5d85, 0xa8cc, 0xb20, 0xe6d2, 0xf79c, 0x4e1, 0x1, 0x1);
        gbc.writeMem(0x5d85, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa8cc);
        EXPECT(gbc.pc(), 0x5d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0338
        gbc.setState(0x6178, 0x2dcd, 0xcc00, 0x756b, 0xfaeb, 0xde21, 0x1, 0x1);
        gbc.writeMem(0x6178, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2dcd);
        EXPECT(gbc.pc(), 0x6179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0339
        gbc.setState(0x9773, 0xe289, 0xe4c0, 0x557f, 0x84e9, 0xed0e, 0x1, 0x1);
        gbc.writeMem(0x9773, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe289);
        EXPECT(gbc.pc(), 0x9774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9773), 0x47);
        // 47 033A
        gbc.setState(0x5719, 0xd52, 0xc10, 0xe921, 0xc78, 0x48ed, 0x1, 0x0);
        gbc.writeMem(0x5719, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd52);
        EXPECT(gbc.pc(), 0x571a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 033B
        gbc.setState(0x4a77, 0x5b0d, 0x5820, 0x2f80, 0x5024, 0x4709, 0x1, 0x0);
        gbc.writeMem(0x4a77, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5b0d);
        EXPECT(gbc.pc(), 0x4a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 033C
        gbc.setState(0x6721, 0x1c83, 0x9ad0, 0x7b5e, 0x5603, 0xaf4d, 0x1, 0x1);
        gbc.writeMem(0x6721, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1c83);
        EXPECT(gbc.pc(), 0x6722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 033D
        gbc.setState(0xc57d, 0xa8da, 0xdb70, 0x5335, 0x5514, 0x792, 0x1, 0x0);
        gbc.writeMem(0xc57d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa8da);
        EXPECT(gbc.pc(), 0xc57e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc57d), 0x47);
        // 47 033E
        gbc.setState(0x8fcc, 0xc13f, 0x90d0, 0x3a4, 0x11f3, 0xe508, 0x1, 0x1);
        gbc.writeMem(0x8fcc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc13f);
        EXPECT(gbc.pc(), 0x8fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fcc), 0x47);
        // 47 033F
        gbc.setState(0x5832, 0xe7e6, 0x4c40, 0x5400, 0x3994, 0xbc6c, 0x1, 0x1);
        gbc.writeMem(0x5832, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe7e6);
        EXPECT(gbc.pc(), 0x5833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0340
        gbc.setState(0xc692, 0xfdfa, 0x5650, 0x6e96, 0x3bbc, 0xdeec, 0x0, 0x1);
        gbc.writeMem(0xc692, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfdfa);
        EXPECT(gbc.pc(), 0xc693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc692), 0x47);
        // 47 0341
        gbc.setState(0xd245, 0xf045, 0xd100, 0xc290, 0xcbde, 0x3305, 0x1, 0x1);
        gbc.writeMem(0xd245, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf045);
        EXPECT(gbc.pc(), 0xd246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd245), 0x47);
        // 47 0342
        gbc.setState(0xa6d4, 0x4cc3, 0xd6a0, 0x8158, 0x34b, 0xd1dc, 0x1, 0x1);
        gbc.writeMem(0xa6d4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4cc3);
        EXPECT(gbc.pc(), 0xa6d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d4), 0x47);
        // 47 0343
        gbc.setState(0x3b63, 0x1abf, 0xafc0, 0x2a79, 0x8e0d, 0x8dfc, 0x0, 0x0);
        gbc.writeMem(0x3b63, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1abf);
        EXPECT(gbc.pc(), 0x3b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0345
        gbc.setState(0xcab3, 0xc24, 0x4770, 0x882, 0x1cf7, 0xbaae, 0x1, 0x0);
        gbc.writeMem(0xcab3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc24);
        EXPECT(gbc.pc(), 0xcab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcab3), 0x47);
        // 47 0346
        gbc.setState(0x44e3, 0xa1aa, 0x69f0, 0x8a8, 0x730d, 0xe933, 0x1, 0x1);
        gbc.writeMem(0x44e3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa1aa);
        EXPECT(gbc.pc(), 0x44e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0347
        gbc.setState(0x4327, 0x838b, 0xf7c0, 0x5115, 0x8954, 0x9fac, 0x0, 0x0);
        gbc.writeMem(0x4327, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x838b);
        EXPECT(gbc.pc(), 0x4328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0348
        gbc.setState(0x254b, 0x7a28, 0x64b0, 0xf921, 0xe9cb, 0x6413, 0x1, 0x0);
        gbc.writeMem(0x254b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7a28);
        EXPECT(gbc.pc(), 0x254c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0349
        gbc.setState(0xef5f, 0x7669, 0x0, 0x2601, 0x9d9f, 0xe0de, 0x1, 0x1);
        gbc.writeMem(0xef5f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7669);
        EXPECT(gbc.pc(), 0xef60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5f), 0x47);
        // 47 034A
        gbc.setState(0x153, 0xe78e, 0xde60, 0x9c73, 0x6b20, 0x561d, 0x1, 0x1);
        gbc.writeMem(0x153, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe78e);
        EXPECT(gbc.pc(), 0x154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 034B
        gbc.setState(0xbbb0, 0xc8fd, 0x3880, 0xe0b4, 0xa336, 0x95fc, 0x1, 0x1);
        gbc.writeMem(0xbbb0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc8fd);
        EXPECT(gbc.pc(), 0xbbb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb0), 0x47);
        // 47 034C
        gbc.setState(0x702b, 0x838a, 0x92d0, 0xba8d, 0xdb2, 0x5bc0, 0x0, 0x1);
        gbc.writeMem(0x702b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x838a);
        EXPECT(gbc.pc(), 0x702c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 034D
        gbc.setState(0x862a, 0xa69f, 0xcb70, 0x28ac, 0x5a0d, 0xc895, 0x0, 0x0);
        gbc.writeMem(0x862a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa69f);
        EXPECT(gbc.pc(), 0x862b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x862a), 0x47);
        // 47 034E
        gbc.setState(0xd7b9, 0x7246, 0x1000, 0x7563, 0xc3d9, 0xdbc9, 0x0, 0x1);
        gbc.writeMem(0xd7b9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7246);
        EXPECT(gbc.pc(), 0xd7ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7b9), 0x47);
        // 47 034F
        gbc.setState(0xd702, 0xb5b4, 0x330, 0x448c, 0x49bc, 0x6ec5, 0x0, 0x1);
        gbc.writeMem(0xd702, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb5b4);
        EXPECT(gbc.pc(), 0xd703);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd702), 0x47);
        // 47 0350
        gbc.setState(0xcc6c, 0xb3cd, 0xfdf0, 0xa212, 0xeea2, 0x2ce6, 0x0, 0x1);
        gbc.writeMem(0xcc6c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb3cd);
        EXPECT(gbc.pc(), 0xcc6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6c), 0x47);
        // 47 0351
        gbc.setState(0x9eec, 0x459c, 0x6490, 0x61ba, 0x2a4, 0x74e8, 0x0, 0x0);
        gbc.writeMem(0x9eec, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x459c);
        EXPECT(gbc.pc(), 0x9eed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eec), 0x47);
        // 47 0352
        gbc.setState(0x1061, 0xdc7b, 0x3050, 0x31c5, 0xe53d, 0xf53a, 0x0, 0x0);
        gbc.writeMem(0x1061, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdc7b);
        EXPECT(gbc.pc(), 0x1062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0353
        gbc.setState(0x141d, 0x3738, 0xca60, 0xa8f3, 0x1bcb, 0xcf86, 0x0, 0x0);
        gbc.writeMem(0x141d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3738);
        EXPECT(gbc.pc(), 0x141e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0354
        gbc.setState(0x6d95, 0x24e2, 0xa100, 0xd8b3, 0x95da, 0xae36, 0x0, 0x0);
        gbc.writeMem(0x6d95, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x24e2);
        EXPECT(gbc.pc(), 0x6d96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0355
        gbc.setState(0xb5b9, 0x7a09, 0x60c0, 0x93ce, 0x88a9, 0x3844, 0x0, 0x1);
        gbc.writeMem(0xb5b9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7a09);
        EXPECT(gbc.pc(), 0xb5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b9), 0x47);
        // 47 0356
        gbc.setState(0xa877, 0xb055, 0x3480, 0x31ec, 0x163f, 0xd6c8, 0x0, 0x0);
        gbc.writeMem(0xa877, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb055);
        EXPECT(gbc.pc(), 0xa878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa877), 0x47);
        // 47 0357
        gbc.setState(0x239d, 0x87c9, 0x4440, 0x2bb, 0x4ef2, 0x2e91, 0x1, 0x1);
        gbc.writeMem(0x239d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x87c9);
        EXPECT(gbc.pc(), 0x239e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0358
        gbc.setState(0xc62f, 0xaef3, 0xf380, 0xda66, 0x2a5c, 0x449c, 0x0, 0x0);
        gbc.writeMem(0xc62f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaef3);
        EXPECT(gbc.pc(), 0xc630);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62f), 0x47);
        // 47 0359
        gbc.setState(0xd265, 0xdf00, 0x2a10, 0x37a7, 0x8646, 0x3286, 0x1, 0x0);
        gbc.writeMem(0xd265, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdf00);
        EXPECT(gbc.pc(), 0xd266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd265), 0x47);
        // 47 035B
        gbc.setState(0xc7e0, 0xad9f, 0x570, 0xecd, 0xd4b1, 0x58ae, 0x1, 0x1);
        gbc.writeMem(0xc7e0, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xad9f);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7e0), 0x47);
        // 47 035C
        gbc.setState(0xd730, 0x2cc9, 0xcef0, 0x2bc0, 0x810, 0xc1c2, 0x1, 0x1);
        gbc.writeMem(0xd730, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2cc9);
        EXPECT(gbc.pc(), 0xd731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd730), 0x47);
        // 47 035D
        gbc.setState(0x2c1b, 0xb10a, 0x2f40, 0x35e9, 0xa0e7, 0x816b, 0x0, 0x1);
        gbc.writeMem(0x2c1b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb10a);
        EXPECT(gbc.pc(), 0x2c1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 035E
        gbc.setState(0xeff2, 0xa2d8, 0x5b10, 0x448c, 0x9cef, 0x2865, 0x1, 0x1);
        gbc.writeMem(0xeff2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa2d8);
        EXPECT(gbc.pc(), 0xeff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeff2), 0x47);
        // 47 035F
        gbc.setState(0x3592, 0x6703, 0x43a0, 0xa58f, 0x9c34, 0x894d, 0x0, 0x0);
        gbc.writeMem(0x3592, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6703);
        EXPECT(gbc.pc(), 0x3593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0360
        gbc.setState(0x5c01, 0xbdf, 0x96b0, 0xd446, 0x966b, 0xe95d, 0x1, 0x1);
        gbc.writeMem(0x5c01, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbdf);
        EXPECT(gbc.pc(), 0x5c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0361
        gbc.setState(0xc73c, 0xcdd6, 0x5260, 0x30ca, 0x38a1, 0x919e, 0x0, 0x0);
        gbc.writeMem(0xc73c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcdd6);
        EXPECT(gbc.pc(), 0xc73d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73c), 0x47);
        // 47 0362
        gbc.setState(0xef43, 0xfd8a, 0x2f10, 0x744c, 0x3edc, 0x533, 0x0, 0x1);
        gbc.writeMem(0xef43, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfd8a);
        EXPECT(gbc.pc(), 0xef44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef43), 0x47);
        // 47 0363
        gbc.setState(0xea1, 0x1d45, 0xf860, 0x4c7a, 0xc65e, 0x86ab, 0x1, 0x0);
        gbc.writeMem(0xea1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1d45);
        EXPECT(gbc.pc(), 0xea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0364
        gbc.setState(0xdb52, 0xdfec, 0x9f50, 0xc945, 0x96ed, 0xca41, 0x1, 0x0);
        gbc.writeMem(0xdb52, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdfec);
        EXPECT(gbc.pc(), 0xdb53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb52), 0x47);
        // 47 0365
        gbc.setState(0xb047, 0xf3ac, 0xf540, 0xe2b7, 0xb369, 0x78ae, 0x1, 0x1);
        gbc.writeMem(0xb047, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf3ac);
        EXPECT(gbc.pc(), 0xb048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb047), 0x47);
        // 47 0367
        gbc.setState(0xcb5c, 0xf18c, 0xc5f0, 0x4a28, 0xc407, 0x4bea, 0x1, 0x0);
        gbc.writeMem(0xcb5c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf18c);
        EXPECT(gbc.pc(), 0xcb5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb5c), 0x47);
        // 47 0368
        gbc.setState(0x52db, 0xc250, 0x53d0, 0x9134, 0x4c42, 0x9562, 0x1, 0x0);
        gbc.writeMem(0x52db, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc250);
        EXPECT(gbc.pc(), 0x52dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0369
        gbc.setState(0x442f, 0x5c77, 0x5b10, 0x8645, 0x77d7, 0xb153, 0x0, 0x1);
        gbc.writeMem(0x442f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5c77);
        EXPECT(gbc.pc(), 0x4430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 036A
        gbc.setState(0xdd2d, 0x3a9a, 0x9520, 0xcda2, 0xb422, 0x3948, 0x1, 0x1);
        gbc.writeMem(0xdd2d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3a9a);
        EXPECT(gbc.pc(), 0xdd2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd2d), 0x47);
        // 47 036B
        gbc.setState(0xc0d7, 0x584b, 0xec30, 0x58bf, 0xd61b, 0x539a, 0x0, 0x0);
        gbc.writeMem(0xc0d7, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x584b);
        EXPECT(gbc.pc(), 0xc0d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d7), 0x47);
        // 47 036C
        gbc.setState(0x6c2b, 0x37d5, 0x1280, 0x4b87, 0x6eb, 0x47dc, 0x0, 0x1);
        gbc.writeMem(0x6c2b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x37d5);
        EXPECT(gbc.pc(), 0x6c2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 036D
        gbc.setState(0x66a9, 0x5f5, 0xb940, 0xd4e0, 0x4aba, 0x9260, 0x0, 0x1);
        gbc.writeMem(0x66a9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5f5);
        EXPECT(gbc.pc(), 0x66aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 036E
        gbc.setState(0x67d2, 0x9351, 0x2940, 0x5074, 0xa952, 0x346d, 0x0, 0x0);
        gbc.writeMem(0x67d2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9351);
        EXPECT(gbc.pc(), 0x67d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 036F
        gbc.setState(0xc06f, 0x1140, 0x3700, 0xaf21, 0x9164, 0xfe48, 0x1, 0x1);
        gbc.writeMem(0xc06f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1140);
        EXPECT(gbc.pc(), 0xc070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc06f), 0x47);
        // 47 0370
        gbc.setState(0x6444, 0x656a, 0xf3e0, 0xdba2, 0xe2fd, 0x3eb1, 0x0, 0x1);
        gbc.writeMem(0x6444, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x656a);
        EXPECT(gbc.pc(), 0x6445);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0371
        gbc.setState(0x4779, 0x7668, 0x7b90, 0x2729, 0xaadc, 0x8ae, 0x0, 0x1);
        gbc.writeMem(0x4779, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7668);
        EXPECT(gbc.pc(), 0x477a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0372
        gbc.setState(0x646, 0x20d1, 0x69c0, 0x2b6a, 0x415f, 0xd3ec, 0x1, 0x0);
        gbc.writeMem(0x646, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x20d1);
        EXPECT(gbc.pc(), 0x647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 0373
        gbc.setState(0xc83f, 0xc945, 0x3420, 0xbacf, 0xa6ba, 0xb2f9, 0x1, 0x0);
        gbc.writeMem(0xc83f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc945);
        EXPECT(gbc.pc(), 0xc840);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc83f), 0x47);
        // 47 0374
        gbc.setState(0x8982, 0xbe22, 0xc2e0, 0x4ef5, 0xa46b, 0x9fc4, 0x1, 0x0);
        gbc.writeMem(0x8982, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbe22);
        EXPECT(gbc.pc(), 0x8983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8982), 0x47);
        // 47 0375
        gbc.setState(0x8f1e, 0x6d89, 0xf040, 0x60fc, 0xef77, 0xcd5e, 0x1, 0x0);
        gbc.writeMem(0x8f1e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6d89);
        EXPECT(gbc.pc(), 0x8f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f1e), 0x47);
        // 47 0376
        gbc.setState(0x10ab, 0x3487, 0x4b30, 0x2edd, 0x5b3e, 0xac7b, 0x1, 0x1);
        gbc.writeMem(0x10ab, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3487);
        EXPECT(gbc.pc(), 0x10ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0377
        gbc.setState(0xef1, 0x6fa, 0xc510, 0x184b, 0x10d0, 0xcd48, 0x0, 0x0);
        gbc.writeMem(0xef1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6fa);
        EXPECT(gbc.pc(), 0xef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0378
        gbc.setState(0xdfce, 0xb4f6, 0xf860, 0xce8a, 0xe582, 0xa9c8, 0x1, 0x0);
        gbc.writeMem(0xdfce, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb4f6);
        EXPECT(gbc.pc(), 0xdfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfce), 0x47);
        // 47 0379
        gbc.setState(0xe922, 0x5bfb, 0xec20, 0x8ad1, 0x5fe0, 0xde83, 0x1, 0x0);
        gbc.writeMem(0xe922, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x5bfb);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe922), 0x47);
        // 47 037A
        gbc.setState(0x31bb, 0xb7f, 0x570, 0x8d28, 0xf2d3, 0x56b4, 0x1, 0x1);
        gbc.writeMem(0x31bb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb7f);
        EXPECT(gbc.pc(), 0x31bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 037C
        gbc.setState(0xcc45, 0x98c0, 0x1ed0, 0x7116, 0xb70, 0x84f2, 0x0, 0x0);
        gbc.writeMem(0xcc45, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x98c0);
        EXPECT(gbc.pc(), 0xcc46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc45), 0x47);
        // 47 037D
        gbc.setState(0xeffb, 0x8c1e, 0x1490, 0xe815, 0xdb8, 0xffa5, 0x0, 0x0);
        gbc.writeMem(0xeffb, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8c1e);
        EXPECT(gbc.pc(), 0xeffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeffb), 0x47);
        // 47 037E
        gbc.setState(0xd7ad, 0x31ad, 0x220, 0xb3fc, 0xf2a8, 0x377b, 0x1, 0x0);
        gbc.writeMem(0xd7ad, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x31ad);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ad), 0x47);
        // 47 037F
        gbc.setState(0x1283, 0xf6, 0x6db0, 0x37ef, 0x1881, 0x35a4, 0x1, 0x0);
        gbc.writeMem(0x1283, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf6);
        EXPECT(gbc.pc(), 0x1284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0380
        gbc.setState(0x8c07, 0x3386, 0xe210, 0xe71f, 0x5ff4, 0xa676, 0x0, 0x1);
        gbc.writeMem(0x8c07, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3386);
        EXPECT(gbc.pc(), 0x8c08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c07), 0x47);
        // 47 0381
        gbc.setState(0xce84, 0xc1ca, 0x8e90, 0x4658, 0x2309, 0x6752, 0x0, 0x0);
        gbc.writeMem(0xce84, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc1ca);
        EXPECT(gbc.pc(), 0xce85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce84), 0x47);
        // 47 0382
        gbc.setState(0x5c0e, 0xdeab, 0x79a0, 0x2233, 0x7829, 0x7c7b, 0x1, 0x1);
        gbc.writeMem(0x5c0e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdeab);
        EXPECT(gbc.pc(), 0x5c0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0384
        gbc.setState(0x297a, 0x4316, 0x80f0, 0x8493, 0xa01d, 0x4f09, 0x0, 0x1);
        gbc.writeMem(0x297a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4316);
        EXPECT(gbc.pc(), 0x297b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0385
        gbc.setState(0x5ca2, 0xdd68, 0x5a10, 0xfc3d, 0xc6ff, 0x8aad, 0x0, 0x1);
        gbc.writeMem(0x5ca2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xdd68);
        EXPECT(gbc.pc(), 0x5ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0386
        gbc.setState(0xa622, 0x92f0, 0x870, 0x6d8e, 0x81d, 0x8c1b, 0x1, 0x0);
        gbc.writeMem(0xa622, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x92f0);
        EXPECT(gbc.pc(), 0xa623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa622), 0x47);
        // 47 0387
        gbc.setState(0x6eff, 0x9168, 0x46a0, 0x1303, 0x2926, 0xddf9, 0x1, 0x0);
        gbc.writeMem(0x6eff, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9168);
        EXPECT(gbc.pc(), 0x6f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 0388
        gbc.setState(0xc646, 0x3238, 0xc80, 0xcc62, 0x1193, 0x35d7, 0x1, 0x1);
        gbc.writeMem(0xc646, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3238);
        EXPECT(gbc.pc(), 0xc647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc646), 0x47);
        // 47 0389
        gbc.setState(0x96f5, 0xbe1c, 0xbb90, 0xea96, 0x8e03, 0x5b40, 0x1, 0x0);
        gbc.writeMem(0x96f5, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbe1c);
        EXPECT(gbc.pc(), 0x96f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96f5), 0x47);
        // 47 038A
        gbc.setState(0x1160, 0x1d3b, 0xb3c0, 0x473d, 0x3618, 0x4c10, 0x0, 0x0);
        gbc.writeMem(0x1160, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1d3b);
        EXPECT(gbc.pc(), 0x1161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 038B
        gbc.setState(0xc944, 0x4248, 0x4af0, 0x4fb9, 0xfc83, 0x5e55, 0x0, 0x1);
        gbc.writeMem(0xc944, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4248);
        EXPECT(gbc.pc(), 0xc945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc944), 0x47);
        // 47 038C
        gbc.setState(0xac11, 0x5bb0, 0xf560, 0xecbb, 0x240, 0xa30c, 0x1, 0x1);
        gbc.writeMem(0xac11, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5bb0);
        EXPECT(gbc.pc(), 0xac12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac11), 0x47);
        // 47 038D
        gbc.setState(0x5464, 0x58ba, 0xdfe0, 0x2a66, 0x252c, 0x962c, 0x0, 0x1);
        gbc.writeMem(0x5464, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x58ba);
        EXPECT(gbc.pc(), 0x5465);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 038E
        gbc.setState(0x8c8b, 0x5dcf, 0x99f0, 0x123b, 0xfb70, 0x3ca4, 0x1, 0x1);
        gbc.writeMem(0x8c8b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5dcf);
        EXPECT(gbc.pc(), 0x8c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c8b), 0x47);
        // 47 038F
        gbc.setState(0x37cc, 0xaea1, 0x8110, 0xee36, 0x9bd3, 0xdc03, 0x0, 0x1);
        gbc.writeMem(0x37cc, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xaea1);
        EXPECT(gbc.pc(), 0x37cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0390
        gbc.setState(0x88d6, 0x2378, 0xac0, 0xf67d, 0x70f0, 0x4a13, 0x0, 0x1);
        gbc.writeMem(0x88d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2378);
        EXPECT(gbc.pc(), 0x88d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d6), 0x47);
        // 47 0391
        gbc.setState(0xb36b, 0xedaf, 0x2e30, 0x6fad, 0xff6a, 0xd77, 0x0, 0x0);
        gbc.writeMem(0xb36b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xedaf);
        EXPECT(gbc.pc(), 0xb36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36b), 0x47);
        // 47 0392
        gbc.setState(0x351a, 0xaad7, 0xc290, 0x6192, 0x6c2d, 0x1297, 0x1, 0x0);
        gbc.writeMem(0x351a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xaad7);
        EXPECT(gbc.pc(), 0x351b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0393
        gbc.setState(0xa385, 0xcad3, 0x9190, 0x79ff, 0xad0d, 0xeccc, 0x0, 0x0);
        gbc.writeMem(0xa385, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xcad3);
        EXPECT(gbc.pc(), 0xa386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa385), 0x47);
        // 47 0394
        gbc.setState(0x7106, 0x6481, 0x19d0, 0x282d, 0x1892, 0x5ffe, 0x1, 0x1);
        gbc.writeMem(0x7106, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6481);
        EXPECT(gbc.pc(), 0x7107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0395
        gbc.setState(0x5e5a, 0xeb6c, 0x8ad0, 0x3b55, 0xfd61, 0xdd3b, 0x0, 0x1);
        gbc.writeMem(0x5e5a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xeb6c);
        EXPECT(gbc.pc(), 0x5e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 0396
        gbc.setState(0xae17, 0xfc25, 0x9da0, 0xa66c, 0x9354, 0xe805, 0x0, 0x0);
        gbc.writeMem(0xae17, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfc25);
        EXPECT(gbc.pc(), 0xae18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae17), 0x47);
        // 47 0397
        gbc.setState(0xb862, 0xf49d, 0x6150, 0x9c97, 0x68ee, 0x8c2b, 0x1, 0x1);
        gbc.writeMem(0xb862, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf49d);
        EXPECT(gbc.pc(), 0xb863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb862), 0x47);
        // 47 0398
        gbc.setState(0x75a, 0x4019, 0x970, 0x3c56, 0xbba7, 0xd1e6, 0x0, 0x0);
        gbc.writeMem(0x75a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4019);
        EXPECT(gbc.pc(), 0x75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 0399
        gbc.setState(0xc35, 0xf65, 0xb450, 0x4fe, 0x8206, 0xb717, 0x0, 0x0);
        gbc.writeMem(0xc35, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf65);
        EXPECT(gbc.pc(), 0xc36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 039A
        gbc.setState(0x29c4, 0x30b8, 0xb260, 0x7b1f, 0xb4ce, 0xa98b, 0x1, 0x0);
        gbc.writeMem(0x29c4, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x30b8);
        EXPECT(gbc.pc(), 0x29c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 039B
        gbc.setState(0x1387, 0xf41d, 0xa670, 0x5e0d, 0xbf1, 0xc7f6, 0x1, 0x1);
        gbc.writeMem(0x1387, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf41d);
        EXPECT(gbc.pc(), 0x1388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 039C
        gbc.setState(0x3015, 0x40f8, 0xaef0, 0x135c, 0xeb41, 0x3f79, 0x1, 0x0);
        gbc.writeMem(0x3015, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x40f8);
        EXPECT(gbc.pc(), 0x3016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 039D
        gbc.setState(0xbd0f, 0x64c2, 0xa400, 0x3731, 0xdbba, 0xbf23, 0x1, 0x0);
        gbc.writeMem(0xbd0f, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x64c2);
        EXPECT(gbc.pc(), 0xbd10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd0f), 0x47);
        // 47 039E
        gbc.setState(0xb331, 0x108f, 0x39d0, 0x4d26, 0x49b1, 0x6f94, 0x0, 0x1);
        gbc.writeMem(0xb331, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x108f);
        EXPECT(gbc.pc(), 0xb332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb331), 0x47);
        // 47 039F
        gbc.setState(0x471, 0x5e08, 0xc7e0, 0x6e20, 0xbf18, 0x2455, 0x0, 0x1);
        gbc.writeMem(0x471, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5e08);
        EXPECT(gbc.pc(), 0x472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03A0
        gbc.setState(0x309a, 0x7ff6, 0x4520, 0x9068, 0x80e2, 0x56db, 0x0, 0x1);
        gbc.writeMem(0x309a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7ff6);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03A1
        gbc.setState(0xdc5e, 0x2aa3, 0x71e0, 0x88ef, 0xa41d, 0x15e3, 0x0, 0x1);
        gbc.writeMem(0xdc5e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2aa3);
        EXPECT(gbc.pc(), 0xdc5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc5e), 0x47);
        // 47 03A2
        gbc.setState(0x9f35, 0x2f0f, 0x40f0, 0x1178, 0xa8ae, 0xa84, 0x0, 0x0);
        gbc.writeMem(0x9f35, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2f0f);
        EXPECT(gbc.pc(), 0x9f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f35), 0x47);
        // 47 03A3
        gbc.setState(0x5075, 0xc4cc, 0x57c0, 0xb6b7, 0x68b1, 0x7abb, 0x0, 0x0);
        gbc.writeMem(0x5075, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc4cc);
        EXPECT(gbc.pc(), 0x5076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03A4
        gbc.setState(0xbdc9, 0x9acc, 0x10a0, 0x180d, 0xcaed, 0x142e, 0x0, 0x0);
        gbc.writeMem(0xbdc9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9acc);
        EXPECT(gbc.pc(), 0xbdca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc9), 0x47);
        // 47 03A5
        gbc.setState(0xf6d, 0x496a, 0x5f60, 0x2736, 0x665f, 0x5216, 0x1, 0x0);
        gbc.writeMem(0xf6d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x496a);
        EXPECT(gbc.pc(), 0xf6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03A6
        gbc.setState(0x44b, 0x1ef9, 0x2870, 0x5fa5, 0x3f9c, 0xf940, 0x1, 0x1);
        gbc.writeMem(0x44b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1ef9);
        EXPECT(gbc.pc(), 0x44c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03A7
        gbc.setState(0xd469, 0xef6, 0x5360, 0x8994, 0x7d73, 0x42c4, 0x0, 0x0);
        gbc.writeMem(0xd469, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xef6);
        EXPECT(gbc.pc(), 0xd46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd469), 0x47);
        // 47 03A8
        gbc.setState(0x6a31, 0xa1b4, 0x30d0, 0x99ef, 0xa966, 0xa0dc, 0x0, 0x0);
        gbc.writeMem(0x6a31, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa1b4);
        EXPECT(gbc.pc(), 0x6a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03A9
        gbc.setState(0xe382, 0x795, 0x1640, 0xab04, 0xbf2e, 0xa7e4, 0x0, 0x1);
        gbc.writeMem(0xe382, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x795);
        EXPECT(gbc.pc(), 0xe383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe382), 0x47);
        // 47 03AA
        gbc.setState(0x1804, 0xe84a, 0x870, 0xf256, 0x28f5, 0xbb01, 0x1, 0x0);
        gbc.writeMem(0x1804, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe84a);
        EXPECT(gbc.pc(), 0x1805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03AB
        gbc.setState(0x1e2e, 0xf3fa, 0xcb70, 0x739f, 0x5763, 0xa3c4, 0x1, 0x1);
        gbc.writeMem(0x1e2e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf3fa);
        EXPECT(gbc.pc(), 0x1e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03AC
        gbc.setState(0xb2c2, 0x8e15, 0x6dd0, 0xd88a, 0x74af, 0x71cf, 0x1, 0x1);
        gbc.writeMem(0xb2c2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8e15);
        EXPECT(gbc.pc(), 0xb2c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c2), 0x47);
        // 47 03AD
        gbc.setState(0x3e6a, 0xab2b, 0x850, 0xeb6, 0xa171, 0xb9ec, 0x0, 0x0);
        gbc.writeMem(0x3e6a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xab2b);
        EXPECT(gbc.pc(), 0x3e6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03AE
        gbc.setState(0xa518, 0x3997, 0x78e0, 0x5011, 0x5a8c, 0x1f57, 0x0, 0x1);
        gbc.writeMem(0xa518, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3997);
        EXPECT(gbc.pc(), 0xa519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa518), 0x47);
        // 47 03AF
        gbc.setState(0xa8f6, 0x31fd, 0x6e0, 0xbbad, 0xd490, 0x2159, 0x0, 0x0);
        gbc.writeMem(0xa8f6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x31fd);
        EXPECT(gbc.pc(), 0xa8f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f6), 0x47);
        // 47 03B0
        gbc.setState(0x119c, 0x19b6, 0x6860, 0x89c1, 0xe78f, 0xbe89, 0x1, 0x1);
        gbc.writeMem(0x119c, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x19b6);
        EXPECT(gbc.pc(), 0x119d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03B1
        gbc.setState(0x44cf, 0x8b22, 0x3820, 0x70ff, 0x5d07, 0x96e3, 0x1, 0x1);
        gbc.writeMem(0x44cf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8b22);
        EXPECT(gbc.pc(), 0x44d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03B2
        gbc.setState(0x7d76, 0x13e0, 0xe580, 0x6e92, 0x449d, 0x3b93, 0x1, 0x0);
        gbc.writeMem(0x7d76, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x13e0);
        EXPECT(gbc.pc(), 0x7d77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03B3
        gbc.setState(0x8104, 0xd41d, 0x6f00, 0x8c99, 0x8d96, 0xd2c, 0x0, 0x0);
        gbc.writeMem(0x8104, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd41d);
        EXPECT(gbc.pc(), 0x8105);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8104), 0x47);
        // 47 03B4
        gbc.setState(0x8dee, 0x9536, 0xe070, 0x5ab9, 0x37e, 0xefbb, 0x0, 0x1);
        gbc.writeMem(0x8dee, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9536);
        EXPECT(gbc.pc(), 0x8def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dee), 0x47);
        // 47 03B5
        gbc.setState(0x1d6, 0x6784, 0xd680, 0xd2ad, 0xdc9e, 0xdfe5, 0x1, 0x1);
        gbc.writeMem(0x1d6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6784);
        EXPECT(gbc.pc(), 0x1d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03B6
        gbc.setState(0x5f6d, 0xbef3, 0xdeb0, 0x28fa, 0x4d1d, 0x1b11, 0x1, 0x0);
        gbc.writeMem(0x5f6d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbef3);
        EXPECT(gbc.pc(), 0x5f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03B7
        gbc.setState(0x873, 0x4ef3, 0x2660, 0xb2ff, 0xb872, 0x6c0b, 0x0, 0x1);
        gbc.writeMem(0x873, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4ef3);
        EXPECT(gbc.pc(), 0x874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03B8
        gbc.setState(0xa4b8, 0x626c, 0xc250, 0xfd6b, 0x115d, 0x4d5, 0x0, 0x1);
        gbc.writeMem(0xa4b8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x626c);
        EXPECT(gbc.pc(), 0xa4b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b8), 0x47);
        // 47 03B9
        gbc.setState(0x7b47, 0xeee7, 0x2ad0, 0x7a94, 0x3503, 0xfdc5, 0x0, 0x1);
        gbc.writeMem(0x7b47, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xeee7);
        EXPECT(gbc.pc(), 0x7b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03BA
        gbc.setState(0xb5ec, 0x752b, 0xca60, 0xb383, 0xd2d6, 0xc30, 0x1, 0x0);
        gbc.writeMem(0xb5ec, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x752b);
        EXPECT(gbc.pc(), 0xb5ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ec), 0x47);
        // 47 03BB
        gbc.setState(0x7a6d, 0x349b, 0x5d30, 0x6aa8, 0x5c5d, 0x4c7c, 0x0, 0x0);
        gbc.writeMem(0x7a6d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x349b);
        EXPECT(gbc.pc(), 0x7a6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03BC
        gbc.setState(0x6afa, 0xa0c5, 0xde10, 0xbfa8, 0x98d8, 0x200d, 0x0, 0x1);
        gbc.writeMem(0x6afa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa0c5);
        EXPECT(gbc.pc(), 0x6afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03BD
        gbc.setState(0x9656, 0x7da4, 0x6390, 0xd1a2, 0x47cc, 0xc5b1, 0x0, 0x1);
        gbc.writeMem(0x9656, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7da4);
        EXPECT(gbc.pc(), 0x9657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9656), 0x47);
        // 47 03BE
        gbc.setState(0x50a9, 0x2569, 0x4c0, 0xacc4, 0x8ae2, 0x9386, 0x0, 0x0);
        gbc.writeMem(0x50a9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2569);
        EXPECT(gbc.pc(), 0x50aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03BF
        gbc.setState(0x2709, 0xa3e, 0x8820, 0x7466, 0xb418, 0x2225, 0x0, 0x0);
        gbc.writeMem(0x2709, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa3e);
        EXPECT(gbc.pc(), 0x270a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03C0
        gbc.setState(0xb116, 0x22e4, 0x4280, 0x2a26, 0xaa60, 0xdd1, 0x0, 0x1);
        gbc.writeMem(0xb116, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x22e4);
        EXPECT(gbc.pc(), 0xb117);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb116), 0x47);
        // 47 03C1
        gbc.setState(0x2889, 0xda77, 0xb090, 0xa365, 0xfc26, 0x760e, 0x1, 0x0);
        gbc.writeMem(0x2889, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xda77);
        EXPECT(gbc.pc(), 0x288a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03C2
        gbc.setState(0x5729, 0x675c, 0x8cb0, 0xef04, 0xb4bf, 0x5525, 0x0, 0x0);
        gbc.writeMem(0x5729, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x675c);
        EXPECT(gbc.pc(), 0x572a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03C3
        gbc.setState(0x8c5b, 0xaf3a, 0xeda0, 0x9bf9, 0x7fec, 0x4d5b, 0x1, 0x1);
        gbc.writeMem(0x8c5b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xaf3a);
        EXPECT(gbc.pc(), 0x8c5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c5b), 0x47);
        // 47 03C5
        gbc.setState(0x2251, 0x38ab, 0xce80, 0xd3d8, 0xa599, 0x84d7, 0x0, 0x0);
        gbc.writeMem(0x2251, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x38ab);
        EXPECT(gbc.pc(), 0x2252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03C6
        gbc.setState(0x3386, 0x184d, 0x7710, 0x8b40, 0x7123, 0x715b, 0x0, 0x1);
        gbc.writeMem(0x3386, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x184d);
        EXPECT(gbc.pc(), 0x3387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03C7
        gbc.setState(0xd155, 0xfda5, 0xf380, 0xec34, 0xba1b, 0xb117, 0x0, 0x0);
        gbc.writeMem(0xd155, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfda5);
        EXPECT(gbc.pc(), 0xd156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd155), 0x47);
        // 47 03C8
        gbc.setState(0x7ea2, 0x68c3, 0x9410, 0xd834, 0xb7fc, 0xb14b, 0x1, 0x0);
        gbc.writeMem(0x7ea2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x68c3);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03C9
        gbc.setState(0xe270, 0xc376, 0x89b0, 0x7dc1, 0xfdb, 0x383, 0x0, 0x1);
        gbc.writeMem(0xe270, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc376);
        EXPECT(gbc.pc(), 0xe271);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe270), 0x47);
        // 47 03CA
        gbc.setState(0x7d14, 0xb3c3, 0xe750, 0x6787, 0x172f, 0xb9de, 0x1, 0x1);
        gbc.writeMem(0x7d14, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb3c3);
        EXPECT(gbc.pc(), 0x7d15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03CB
        gbc.setState(0x772a, 0xffa3, 0xa6d0, 0xad4c, 0x2b8f, 0xb843, 0x0, 0x1);
        gbc.writeMem(0x772a, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xffa3);
        EXPECT(gbc.pc(), 0x772b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03CC
        gbc.setState(0x1ddf, 0xb292, 0x6d60, 0x2b9, 0x4b47, 0x1a58, 0x0, 0x0);
        gbc.writeMem(0x1ddf, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb292);
        EXPECT(gbc.pc(), 0x1de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03CD
        gbc.setState(0xdf58, 0xbecb, 0xb390, 0x763, 0x4b4e, 0xa690, 0x0, 0x1);
        gbc.writeMem(0xdf58, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xbecb);
        EXPECT(gbc.pc(), 0xdf59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf58), 0x47);
        // 47 03CE
        gbc.setState(0x83f9, 0x5c5c, 0xafa0, 0x81eb, 0x1901, 0x6ed8, 0x1, 0x0);
        gbc.writeMem(0x83f9, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5c5c);
        EXPECT(gbc.pc(), 0x83fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f9), 0x47);
        // 47 03CF
        gbc.setState(0xbc07, 0xb7bd, 0x4560, 0xf300, 0xb61a, 0x7c81, 0x0, 0x0);
        gbc.writeMem(0xbc07, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb7bd);
        EXPECT(gbc.pc(), 0xbc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc07), 0x47);
        // 47 03D0
        gbc.setState(0x98d2, 0x1044, 0x9500, 0xafd1, 0xe117, 0x37b4, 0x1, 0x1);
        gbc.writeMem(0x98d2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1044);
        EXPECT(gbc.pc(), 0x98d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d2), 0x47);
        // 47 03D1
        gbc.setState(0xe8d3, 0x476c, 0xffb0, 0x3bc3, 0xf4f3, 0x6acf, 0x0, 0x0);
        gbc.writeMem(0xe8d3, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x476c);
        EXPECT(gbc.pc(), 0xe8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8d3), 0x47);
        // 47 03D2
        gbc.setState(0x278b, 0x45a8, 0x4060, 0x57f2, 0xb30c, 0x4473, 0x0, 0x1);
        gbc.writeMem(0x278b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x45a8);
        EXPECT(gbc.pc(), 0x278c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03D3
        gbc.setState(0xb118, 0xf78, 0x8b00, 0x37b4, 0xa930, 0x1f00, 0x0, 0x0);
        gbc.writeMem(0xb118, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf78);
        EXPECT(gbc.pc(), 0xb119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb118), 0x47);
        // 47 03D4
        gbc.setState(0x2924, 0xffa1, 0x7440, 0x81b1, 0x4741, 0x6417, 0x1, 0x0);
        gbc.writeMem(0x2924, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xffa1);
        EXPECT(gbc.pc(), 0x2925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03D5
        gbc.setState(0xc8d, 0xbae3, 0x9470, 0xcf3d, 0x9bae, 0x9e8d, 0x1, 0x1);
        gbc.writeMem(0xc8d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbae3);
        EXPECT(gbc.pc(), 0xc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03D6
        gbc.setState(0xed19, 0xa52a, 0x94b0, 0xad52, 0x6a1c, 0x6e62, 0x0, 0x1);
        gbc.writeMem(0xed19, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa52a);
        EXPECT(gbc.pc(), 0xed1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed19), 0x47);
        // 47 03D7
        gbc.setState(0x9029, 0x45c1, 0x5bd0, 0xa68b, 0xb975, 0xe848, 0x1, 0x1);
        gbc.writeMem(0x9029, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x45c1);
        EXPECT(gbc.pc(), 0x902a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9029), 0x47);
        // 47 03D8
        gbc.setState(0x78be, 0x4aaf, 0x3180, 0xa0ee, 0x10fd, 0x8879, 0x0, 0x1);
        gbc.writeMem(0x78be, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4aaf);
        EXPECT(gbc.pc(), 0x78bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03D9
        gbc.setState(0x7e50, 0xd8ad, 0x4780, 0x8136, 0xfa06, 0x159c, 0x1, 0x1);
        gbc.writeMem(0x7e50, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd8ad);
        EXPECT(gbc.pc(), 0x7e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 47 03DA
        gbc.setState(0x258e, 0x2f20, 0xadd0, 0xc9c8, 0xc09e, 0x834a, 0x0, 0x0);
        gbc.writeMem(0x258e, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2f20);
        EXPECT(gbc.pc(), 0x258f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03DB
        gbc.setState(0xd25b, 0xb76, 0x2430, 0x3bcb, 0xc45a, 0x7951, 0x1, 0x1);
        gbc.writeMem(0xd25b, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb76);
        EXPECT(gbc.pc(), 0xd25c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd25b), 0x47);
        // 47 03DC
        gbc.setState(0x6dd6, 0x23c4, 0xbfb0, 0x3402, 0x2134, 0xbc78, 0x0, 0x0);
        gbc.writeMem(0x6dd6, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x23c4);
        EXPECT(gbc.pc(), 0x6dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 47 03DD
        gbc.setState(0x7e78, 0x9132, 0x5710, 0xfbc7, 0xb730, 0xc5f5, 0x1, 0x0);
        gbc.writeMem(0x7e78, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9132);
        EXPECT(gbc.pc(), 0x7e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 47 03DE
        gbc.setState(0x96ef, 0xfee7, 0xaf10, 0xe163, 0x8180, 0x20ea, 0x1, 0x0);
        gbc.writeMem(0x96ef, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfee7);
        EXPECT(gbc.pc(), 0x96f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ef), 0x47);
        // 47 03DF
        gbc.setState(0xdde8, 0xea48, 0xa200, 0x166c, 0x4ff5, 0xe086, 0x1, 0x1);
        gbc.writeMem(0xdde8, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xea48);
        EXPECT(gbc.pc(), 0xdde9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde8), 0x47);
        // 47 03E0
        gbc.setState(0xc998, 0x8a53, 0x9d80, 0x3e35, 0x996c, 0xf4f6, 0x0, 0x1);
        gbc.writeMem(0xc998, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x8a53);
        EXPECT(gbc.pc(), 0xc999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc998), 0x47);
        // 47 03E1
        gbc.setState(0xb522, 0x1f5b, 0x3d20, 0x680c, 0x806c, 0x2fac, 0x0, 0x0);
        gbc.writeMem(0xb522, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1f5b);
        EXPECT(gbc.pc(), 0xb523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb522), 0x47);
        // 47 03E2
        gbc.setState(0x73fa, 0x3a3b, 0xf620, 0xc893, 0xe59f, 0x58c7, 0x1, 0x1);
        gbc.writeMem(0x73fa, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3a3b);
        EXPECT(gbc.pc(), 0x73fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03E3
        gbc.setState(0x9141, 0xcf97, 0xdae0, 0x59a1, 0x6b23, 0xe263, 0x0, 0x0);
        gbc.writeMem(0x9141, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xcf97);
        EXPECT(gbc.pc(), 0x9142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9141), 0x47);
        // 47 03E4
        gbc.setState(0x2203, 0x9cdb, 0x5060, 0x895e, 0x37d6, 0x8bb8, 0x1, 0x1);
        gbc.writeMem(0x2203, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9cdb);
        EXPECT(gbc.pc(), 0x2204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03E5
        gbc.setState(0xe5a2, 0x269d, 0xc3f0, 0xd966, 0x4d86, 0x59a7, 0x1, 0x0);
        gbc.writeMem(0xe5a2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x269d);
        EXPECT(gbc.pc(), 0xe5a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a2), 0x47);
        // 47 03E6
        gbc.setState(0x942, 0x7d9c, 0xa160, 0x4af5, 0xe350, 0xfe84, 0x1, 0x1);
        gbc.writeMem(0x942, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7d9c);
        EXPECT(gbc.pc(), 0x943);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 47 03E7
        gbc.setState(0x5be1, 0xc00f, 0x52e0, 0x6886, 0xe101, 0x8a96, 0x1, 0x0);
        gbc.writeMem(0x5be1, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc00f);
        EXPECT(gbc.pc(), 0x5be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
