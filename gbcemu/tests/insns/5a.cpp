#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_5a)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_5a) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 5A 0000
        gbc.setState(0xba2c, 0xbd58, 0xa5a0, 0xe748, 0x459, 0xdac4, 0x0, 0x1);
        gbc.writeMem(0xba2c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbd58);
        EXPECT(gbc.pc(), 0xba2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba2c), 0x5a);
        // 5A 0001
        gbc.setState(0xd13f, 0x3ea6, 0x6b40, 0x3a53, 0x1595, 0x847c, 0x0, 0x0);
        gbc.writeMem(0xd13f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3ea6);
        EXPECT(gbc.pc(), 0xd140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13f), 0x5a);
        // 5A 0002
        gbc.setState(0x4235, 0xd468, 0x5b80, 0x1799, 0x3e61, 0x6b36, 0x1, 0x1);
        gbc.writeMem(0x4235, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd468);
        EXPECT(gbc.pc(), 0x4236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0003
        gbc.setState(0x33cb, 0x995c, 0x6b10, 0xb643, 0x7c96, 0x1518, 0x0, 0x0);
        gbc.writeMem(0x33cb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x995c);
        EXPECT(gbc.pc(), 0x33cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0004
        gbc.setState(0xc4ca, 0x67bc, 0x1c70, 0x16c6, 0x8d41, 0x9c51, 0x1, 0x1);
        gbc.writeMem(0xc4ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x67bc);
        EXPECT(gbc.pc(), 0xc4cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ca), 0x5a);
        // 5A 0005
        gbc.setState(0xb5d4, 0x2f10, 0x4690, 0xb487, 0x5f8f, 0x3232, 0x0, 0x0);
        gbc.writeMem(0xb5d4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2f10);
        EXPECT(gbc.pc(), 0xb5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5d4), 0x5a);
        // 5A 0006
        gbc.setState(0xac8, 0x707a, 0x40a0, 0x6793, 0x541b, 0x1cde, 0x0, 0x1);
        gbc.writeMem(0xac8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x707a);
        EXPECT(gbc.pc(), 0xac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0007
        gbc.setState(0x370e, 0x7050, 0x8110, 0xd43e, 0x38fa, 0xe2e5, 0x0, 0x0);
        gbc.writeMem(0x370e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7050);
        EXPECT(gbc.pc(), 0x370f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0008
        gbc.setState(0x94a7, 0xed73, 0x60a0, 0x62b9, 0x40e5, 0xe224, 0x0, 0x0);
        gbc.writeMem(0x94a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xed73);
        EXPECT(gbc.pc(), 0x94a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a7), 0x5a);
        // 5A 0009
        gbc.setState(0x16ad, 0xcd3a, 0x7b70, 0xb341, 0xb4fe, 0x6262, 0x0, 0x0);
        gbc.writeMem(0x16ad, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xcd3a);
        EXPECT(gbc.pc(), 0x16ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 000A
        gbc.setState(0xda35, 0x9d04, 0x7a00, 0xf696, 0x7022, 0xafaa, 0x1, 0x1);
        gbc.writeMem(0xda35, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9d04);
        EXPECT(gbc.pc(), 0xda36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda35), 0x5a);
        // 5A 000B
        gbc.setState(0x879e, 0x73a4, 0xe20, 0xa465, 0x93e5, 0xd48c, 0x1, 0x1);
        gbc.writeMem(0x879e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x73a4);
        EXPECT(gbc.pc(), 0x879f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879e), 0x5a);
        // 5A 000D
        gbc.setState(0x1689, 0x7e4, 0xd970, 0x80ef, 0x1536, 0xdb7, 0x1, 0x0);
        gbc.writeMem(0x1689, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7e4);
        EXPECT(gbc.pc(), 0x168a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 000E
        gbc.setState(0x138, 0xecbd, 0x450, 0x157f, 0xd6ef, 0xbf93, 0x0, 0x1);
        gbc.writeMem(0x138, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xecbd);
        EXPECT(gbc.pc(), 0x139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 000F
        gbc.setState(0x8256, 0x3a18, 0xf320, 0xd416, 0xbb8b, 0xb88b, 0x0, 0x1);
        gbc.writeMem(0x8256, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3a18);
        EXPECT(gbc.pc(), 0x8257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8256), 0x5a);
        // 5A 0010
        gbc.setState(0x3985, 0x469a, 0x8470, 0xc5e0, 0x956, 0x394a, 0x0, 0x0);
        gbc.writeMem(0x3985, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x469a);
        EXPECT(gbc.pc(), 0x3986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0011
        gbc.setState(0x1b4b, 0x636c, 0x4a20, 0x4846, 0xc839, 0xef97, 0x0, 0x1);
        gbc.writeMem(0x1b4b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x636c);
        EXPECT(gbc.pc(), 0x1b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0012
        gbc.setState(0xbe58, 0x3f36, 0x710, 0xfaad, 0x2155, 0x9fe8, 0x1, 0x1);
        gbc.writeMem(0xbe58, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3f36);
        EXPECT(gbc.pc(), 0xbe59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe58), 0x5a);
        // 5A 0014
        gbc.setState(0x2e1a, 0xd519, 0xade0, 0x46c1, 0xb875, 0xb353, 0x0, 0x1);
        gbc.writeMem(0x2e1a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd519);
        EXPECT(gbc.pc(), 0x2e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0015
        gbc.setState(0x860a, 0x329e, 0x45c0, 0xcfd3, 0x7070, 0xc045, 0x0, 0x0);
        gbc.writeMem(0x860a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x329e);
        EXPECT(gbc.pc(), 0x860b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x860a), 0x5a);
        // 5A 0016
        gbc.setState(0x9ca6, 0x9e4a, 0xa430, 0xd2fd, 0x4bcf, 0xc122, 0x1, 0x1);
        gbc.writeMem(0x9ca6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9e4a);
        EXPECT(gbc.pc(), 0x9ca7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca6), 0x5a);
        // 5A 0017
        gbc.setState(0xa316, 0x390a, 0xc380, 0x477a, 0x171e, 0xc8f0, 0x1, 0x0);
        gbc.writeMem(0xa316, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x390a);
        EXPECT(gbc.pc(), 0xa317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa316), 0x5a);
        // 5A 0018
        gbc.setState(0xd19c, 0xf9ba, 0xf9c0, 0x5804, 0x7008, 0xf1ea, 0x1, 0x0);
        gbc.writeMem(0xd19c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf9ba);
        EXPECT(gbc.pc(), 0xd19d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19c), 0x5a);
        // 5A 0019
        gbc.setState(0x9f9c, 0x74a0, 0xf6d0, 0x582a, 0x9cad, 0xf8a8, 0x1, 0x1);
        gbc.writeMem(0x9f9c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x74a0);
        EXPECT(gbc.pc(), 0x9f9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f9c), 0x5a);
        // 5A 001A
        gbc.setState(0x5ed, 0x892a, 0xfd30, 0x903d, 0x1c2f, 0x65eb, 0x0, 0x0);
        gbc.writeMem(0x5ed, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x892a);
        EXPECT(gbc.pc(), 0x5ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 001B
        gbc.setState(0x2e81, 0x791e, 0x1700, 0x9d6b, 0x5d5a, 0x7a30, 0x0, 0x1);
        gbc.writeMem(0x2e81, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x791e);
        EXPECT(gbc.pc(), 0x2e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 001C
        gbc.setState(0xc64f, 0x701f, 0xaad0, 0xa389, 0x50cc, 0xfe4c, 0x1, 0x1);
        gbc.writeMem(0xc64f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x701f);
        EXPECT(gbc.pc(), 0xc650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc64f), 0x5a);
        // 5A 001D
        gbc.setState(0x1eba, 0x6911, 0x9580, 0xeb39, 0x721a, 0x4be2, 0x0, 0x1);
        gbc.writeMem(0x1eba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6911);
        EXPECT(gbc.pc(), 0x1ebb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 001E
        gbc.setState(0x74b8, 0x942b, 0xcc00, 0x1bb4, 0x541c, 0xaf1, 0x0, 0x1);
        gbc.writeMem(0x74b8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x942b);
        EXPECT(gbc.pc(), 0x74b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 001F
        gbc.setState(0xddec, 0x88ef, 0xe100, 0xd43a, 0x22e9, 0xbc4a, 0x1, 0x1);
        gbc.writeMem(0xddec, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x88ef);
        EXPECT(gbc.pc(), 0xdded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddec), 0x5a);
        // 5A 0020
        gbc.setState(0x6e7f, 0x43d7, 0x3b20, 0xaa4b, 0x7d0b, 0xeb9e, 0x0, 0x0);
        gbc.writeMem(0x6e7f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x43d7);
        EXPECT(gbc.pc(), 0x6e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0021
        gbc.setState(0x1e96, 0x668, 0xf670, 0x4b7b, 0xf0e9, 0xa599, 0x1, 0x1);
        gbc.writeMem(0x1e96, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x668);
        EXPECT(gbc.pc(), 0x1e97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0022
        gbc.setState(0xdf79, 0x9c2d, 0x2ea0, 0x9a45, 0x1f0d, 0x4607, 0x1, 0x1);
        gbc.writeMem(0xdf79, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0xdf7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf79), 0x5a);
        // 5A 0023
        gbc.setState(0x15d9, 0xfbfb, 0xd380, 0x8024, 0xee35, 0x36d4, 0x1, 0x0);
        gbc.writeMem(0x15d9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xfbfb);
        EXPECT(gbc.pc(), 0x15da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0024
        gbc.setState(0x18dd, 0x94fc, 0x7550, 0xd9ed, 0x3c2e, 0xd585, 0x0, 0x0);
        gbc.writeMem(0x18dd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x94fc);
        EXPECT(gbc.pc(), 0x18de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0025
        gbc.setState(0x4165, 0xbb52, 0xa30, 0x6171, 0x21c6, 0xbcbf, 0x0, 0x1);
        gbc.writeMem(0x4165, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xbb52);
        EXPECT(gbc.pc(), 0x4166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0026
        gbc.setState(0x3dc0, 0xb96f, 0xb980, 0x36b2, 0xf181, 0x1d10, 0x0, 0x0);
        gbc.writeMem(0x3dc0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb96f);
        EXPECT(gbc.pc(), 0x3dc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0027
        gbc.setState(0xc8c3, 0x76d8, 0x7d60, 0x551b, 0x3cfe, 0xe760, 0x1, 0x0);
        gbc.writeMem(0xc8c3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x76d8);
        EXPECT(gbc.pc(), 0xc8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8c3), 0x5a);
        // 5A 0028
        gbc.setState(0x55c6, 0xdbdd, 0xccf0, 0xf556, 0x39b7, 0xa64b, 0x0, 0x1);
        gbc.writeMem(0x55c6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdbdd);
        EXPECT(gbc.pc(), 0x55c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0029
        gbc.setState(0xd886, 0xc3f3, 0x8ed0, 0x3e47, 0x9afb, 0x3afa, 0x0, 0x0);
        gbc.writeMem(0xd886, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc3f3);
        EXPECT(gbc.pc(), 0xd887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd886), 0x5a);
        // 5A 002A
        gbc.setState(0x7f41, 0x3bf2, 0x9610, 0x54fd, 0x61c9, 0x947e, 0x1, 0x1);
        gbc.writeMem(0x7f41, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3bf2);
        EXPECT(gbc.pc(), 0x7f42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 002B
        gbc.setState(0xec03, 0xa339, 0xf180, 0x9599, 0xf5d5, 0x313e, 0x0, 0x1);
        gbc.writeMem(0xec03, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa339);
        EXPECT(gbc.pc(), 0xec04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec03), 0x5a);
        // 5A 002C
        gbc.setState(0x4656, 0xb6dd, 0x99c0, 0x44d3, 0x5207, 0x171f, 0x1, 0x1);
        gbc.writeMem(0x4656, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb6dd);
        EXPECT(gbc.pc(), 0x4657);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 002D
        gbc.setState(0xac88, 0x3fd2, 0x13e0, 0x91c6, 0x4767, 0xbb99, 0x1, 0x1);
        gbc.writeMem(0xac88, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3fd2);
        EXPECT(gbc.pc(), 0xac89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac88), 0x5a);
        // 5A 002E
        gbc.setState(0x8577, 0x8cf7, 0xee30, 0x5203, 0x7c7, 0x57af, 0x0, 0x0);
        gbc.writeMem(0x8577, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8cf7);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8577), 0x5a);
        // 5A 0030
        gbc.setState(0x50d6, 0x9b20, 0x40d0, 0x6717, 0x5e95, 0x7567, 0x1, 0x0);
        gbc.writeMem(0x50d6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9b20);
        EXPECT(gbc.pc(), 0x50d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0031
        gbc.setState(0x9331, 0x9822, 0x8650, 0xd6f7, 0x36e6, 0xb12f, 0x0, 0x0);
        gbc.writeMem(0x9331, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9822);
        EXPECT(gbc.pc(), 0x9332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9331), 0x5a);
        // 5A 0032
        gbc.setState(0xd29b, 0x4c83, 0x4d60, 0x894d, 0x3361, 0x3afd, 0x1, 0x0);
        gbc.writeMem(0xd29b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4c83);
        EXPECT(gbc.pc(), 0xd29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd29b), 0x5a);
        // 5A 0033
        gbc.setState(0x3e6b, 0x3702, 0x8450, 0x29af, 0x1730, 0xe28b, 0x0, 0x1);
        gbc.writeMem(0x3e6b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3702);
        EXPECT(gbc.pc(), 0x3e6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0034
        gbc.setState(0x43e1, 0x795a, 0x1290, 0xb85d, 0x1561, 0xd82e, 0x1, 0x1);
        gbc.writeMem(0x43e1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x795a);
        EXPECT(gbc.pc(), 0x43e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0036
        gbc.setState(0x3ad0, 0xd1df, 0x76f0, 0x9740, 0x4a8a, 0x4696, 0x1, 0x0);
        gbc.writeMem(0x3ad0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd1df);
        EXPECT(gbc.pc(), 0x3ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0037
        gbc.setState(0x11b7, 0xfff1, 0x7af0, 0x9cf7, 0xcde4, 0x5022, 0x1, 0x0);
        gbc.writeMem(0x11b7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xfff1);
        EXPECT(gbc.pc(), 0x11b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0038
        gbc.setState(0xc0e6, 0x9890, 0x6660, 0x253f, 0x57bc, 0xdc51, 0x1, 0x0);
        gbc.writeMem(0xc0e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9890);
        EXPECT(gbc.pc(), 0xc0e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e6), 0x5a);
        // 5A 0039
        gbc.setState(0x3e9b, 0x4bb8, 0x2fd0, 0x220c, 0x1508, 0xaf18, 0x1, 0x1);
        gbc.writeMem(0x3e9b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4bb8);
        EXPECT(gbc.pc(), 0x3e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 003A
        gbc.setState(0xc993, 0x7c2c, 0xc4d0, 0x481c, 0xf418, 0xf760, 0x1, 0x1);
        gbc.writeMem(0xc993, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7c2c);
        EXPECT(gbc.pc(), 0xc994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc993), 0x5a);
        // 5A 003B
        gbc.setState(0x85e1, 0xac4d, 0x4b50, 0x27fd, 0x8b04, 0x4a31, 0x1, 0x0);
        gbc.writeMem(0x85e1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xac4d);
        EXPECT(gbc.pc(), 0x85e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e1), 0x5a);
        // 5A 003C
        gbc.setState(0xea75, 0x5179, 0x1540, 0xe3c5, 0x212c, 0xe0e1, 0x0, 0x1);
        gbc.writeMem(0xea75, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5179);
        EXPECT(gbc.pc(), 0xea76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea75), 0x5a);
        // 5A 003D
        gbc.setState(0x6363, 0x7f49, 0x38f0, 0xd396, 0xc31d, 0xe7e, 0x1, 0x0);
        gbc.writeMem(0x6363, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7f49);
        EXPECT(gbc.pc(), 0x6364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 003E
        gbc.setState(0x41d5, 0x9181, 0xe5c0, 0x6a00, 0x61f6, 0x8a25, 0x0, 0x0);
        gbc.writeMem(0x41d5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x41d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 003F
        gbc.setState(0x7f8d, 0x15c3, 0x58a0, 0xc2b8, 0xf6f0, 0xc49f, 0x1, 0x1);
        gbc.writeMem(0x7f8d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x15c3);
        EXPECT(gbc.pc(), 0x7f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0040
        gbc.setState(0xb67f, 0xe038, 0x8a80, 0x331a, 0x3a0, 0x3c2, 0x0, 0x1);
        gbc.writeMem(0xb67f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe038);
        EXPECT(gbc.pc(), 0xb680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67f), 0x5a);
        // 5A 0041
        gbc.setState(0x7ddc, 0x42eb, 0x4840, 0xfe55, 0x3b9d, 0x9da7, 0x1, 0x1);
        gbc.writeMem(0x7ddc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x42eb);
        EXPECT(gbc.pc(), 0x7ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0043
        gbc.setState(0xe256, 0x7d0b, 0xce30, 0x507, 0x33de, 0x5b81, 0x1, 0x1);
        gbc.writeMem(0xe256, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7d0b);
        EXPECT(gbc.pc(), 0xe257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe256), 0x5a);
        // 5A 0044
        gbc.setState(0x29ba, 0x1d6f, 0x3870, 0xbe27, 0x4d15, 0x16b1, 0x0, 0x1);
        gbc.writeMem(0x29ba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1d6f);
        EXPECT(gbc.pc(), 0x29bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0045
        gbc.setState(0x255b, 0x81f0, 0x6850, 0xf926, 0x82bb, 0x10ed, 0x0, 0x0);
        gbc.writeMem(0x255b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x81f0);
        EXPECT(gbc.pc(), 0x255c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0046
        gbc.setState(0x45b4, 0x386d, 0x88d0, 0x154c, 0xe220, 0xc56, 0x0, 0x1);
        gbc.writeMem(0x45b4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x386d);
        EXPECT(gbc.pc(), 0x45b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0047
        gbc.setState(0x8054, 0x2976, 0x94b0, 0xf047, 0xc121, 0x4c2, 0x0, 0x0);
        gbc.writeMem(0x8054, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2976);
        EXPECT(gbc.pc(), 0x8055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8054), 0x5a);
        // 5A 0048
        gbc.setState(0x1705, 0xbdca, 0x9900, 0x6b0b, 0x6cee, 0xf85e, 0x0, 0x0);
        gbc.writeMem(0x1705, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbdca);
        EXPECT(gbc.pc(), 0x1706);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0049
        gbc.setState(0x4151, 0x7042, 0xfe70, 0x4cc6, 0xc85, 0xc3a3, 0x0, 0x1);
        gbc.writeMem(0x4151, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7042);
        EXPECT(gbc.pc(), 0x4152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 004A
        gbc.setState(0xa79c, 0x9620, 0x8640, 0x1650, 0xe129, 0x4d2f, 0x0, 0x1);
        gbc.writeMem(0xa79c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9620);
        EXPECT(gbc.pc(), 0xa79d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa79c), 0x5a);
        // 5A 004B
        gbc.setState(0x6d6c, 0xaf61, 0x2390, 0xa648, 0xd570, 0x6e58, 0x0, 0x1);
        gbc.writeMem(0x6d6c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xaf61);
        EXPECT(gbc.pc(), 0x6d6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 004C
        gbc.setState(0x60d0, 0xb21d, 0xa3d0, 0xfce6, 0x7d06, 0x5e84, 0x0, 0x0);
        gbc.writeMem(0x60d0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb21d);
        EXPECT(gbc.pc(), 0x60d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 004D
        gbc.setState(0x7f33, 0xba23, 0x2030, 0xb43f, 0x1b63, 0xb87f, 0x1, 0x1);
        gbc.writeMem(0x7f33, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xba23);
        EXPECT(gbc.pc(), 0x7f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 004E
        gbc.setState(0x948b, 0xe04c, 0x44c0, 0x7386, 0x8d86, 0xeaba, 0x0, 0x0);
        gbc.writeMem(0x948b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe04c);
        EXPECT(gbc.pc(), 0x948c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x948b), 0x5a);
        // 5A 004F
        gbc.setState(0x2ab2, 0x11c1, 0xd790, 0x4ee4, 0xe142, 0x7fbe, 0x0, 0x0);
        gbc.writeMem(0x2ab2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x11c1);
        EXPECT(gbc.pc(), 0x2ab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0050
        gbc.setState(0xafb1, 0xda1e, 0x450, 0x35b7, 0x4f4a, 0xad6b, 0x0, 0x0);
        gbc.writeMem(0xafb1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xda1e);
        EXPECT(gbc.pc(), 0xafb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafb1), 0x5a);
        // 5A 0051
        gbc.setState(0x3c33, 0x7546, 0xf100, 0x678b, 0xd941, 0x68c8, 0x1, 0x1);
        gbc.writeMem(0x3c33, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7546);
        EXPECT(gbc.pc(), 0x3c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0052
        gbc.setState(0x1b5a, 0xea5, 0xcc60, 0x8323, 0x6797, 0xa730, 0x1, 0x1);
        gbc.writeMem(0x1b5a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xea5);
        EXPECT(gbc.pc(), 0x1b5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0053
        gbc.setState(0x9ae0, 0x6fa, 0x8540, 0x46a3, 0x5908, 0x71db, 0x0, 0x1);
        gbc.writeMem(0x9ae0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6fa);
        EXPECT(gbc.pc(), 0x9ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae0), 0x5a);
        // 5A 0054
        gbc.setState(0xa061, 0xa246, 0xf3e0, 0x6ef, 0x5306, 0xd675, 0x1, 0x1);
        gbc.writeMem(0xa061, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa246);
        EXPECT(gbc.pc(), 0xa062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa061), 0x5a);
        // 5A 0055
        gbc.setState(0x8d28, 0xe520, 0x6760, 0x2d78, 0xfa3f, 0xbfcd, 0x1, 0x1);
        gbc.writeMem(0x8d28, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe520);
        EXPECT(gbc.pc(), 0x8d29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d28), 0x5a);
        // 5A 0056
        gbc.setState(0x1891, 0xe92f, 0xf490, 0xdc24, 0x65e7, 0xf68, 0x0, 0x0);
        gbc.writeMem(0x1891, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe92f);
        EXPECT(gbc.pc(), 0x1892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0057
        gbc.setState(0x409d, 0x8ad, 0x5c20, 0x4563, 0xa6e1, 0xcaa7, 0x0, 0x0);
        gbc.writeMem(0x409d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8ad);
        EXPECT(gbc.pc(), 0x409e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0058
        gbc.setState(0x44e9, 0xf443, 0xd2b0, 0xf576, 0x8377, 0xbade, 0x0, 0x0);
        gbc.writeMem(0x44e9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf443);
        EXPECT(gbc.pc(), 0x44ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0059
        gbc.setState(0x9dca, 0xc55f, 0xa680, 0x8723, 0x4682, 0x6d25, 0x1, 0x1);
        gbc.writeMem(0x9dca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc55f);
        EXPECT(gbc.pc(), 0x9dcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dca), 0x5a);
        // 5A 005A
        gbc.setState(0x86fb, 0x69b1, 0x8f20, 0x57f2, 0xcf5f, 0xc30f, 0x1, 0x1);
        gbc.writeMem(0x86fb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x69b1);
        EXPECT(gbc.pc(), 0x86fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fb), 0x5a);
        // 5A 005B
        gbc.setState(0x6162, 0x756a, 0xce50, 0xb4e4, 0xe515, 0x8fea, 0x1, 0x0);
        gbc.writeMem(0x6162, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x756a);
        EXPECT(gbc.pc(), 0x6163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 005C
        gbc.setState(0xddc2, 0x1bb7, 0x2240, 0xd8c2, 0xfe9f, 0x52cf, 0x0, 0x0);
        gbc.writeMem(0xddc2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1bb7);
        EXPECT(gbc.pc(), 0xddc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddc2), 0x5a);
        // 5A 005D
        gbc.setState(0x962c, 0x19fe, 0xdf50, 0x5c1e, 0xcdfe, 0xd599, 0x0, 0x0);
        gbc.writeMem(0x962c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x19fe);
        EXPECT(gbc.pc(), 0x962d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x962c), 0x5a);
        // 5A 005E
        gbc.setState(0x4907, 0xe6d1, 0xcf40, 0x4ca, 0x68cf, 0xc7e3, 0x1, 0x1);
        gbc.writeMem(0x4907, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe6d1);
        EXPECT(gbc.pc(), 0x4908);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 005F
        gbc.setState(0xedff, 0x115b, 0x97c0, 0xa871, 0xdbc2, 0x8196, 0x0, 0x1);
        gbc.writeMem(0xedff, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x115b);
        EXPECT(gbc.pc(), 0xee00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedff), 0x5a);
        // 5A 0060
        gbc.setState(0x24c8, 0x1660, 0xd230, 0xaa7f, 0x9ca8, 0x3a22, 0x0, 0x0);
        gbc.writeMem(0x24c8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1660);
        EXPECT(gbc.pc(), 0x24c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0061
        gbc.setState(0x9918, 0x4251, 0x7710, 0xab00, 0x779c, 0x1960, 0x1, 0x1);
        gbc.writeMem(0x9918, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4251);
        EXPECT(gbc.pc(), 0x9919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9918), 0x5a);
        // 5A 0062
        gbc.setState(0x78c, 0x2c87, 0xb300, 0x5923, 0x6081, 0x387d, 0x1, 0x0);
        gbc.writeMem(0x78c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2c87);
        EXPECT(gbc.pc(), 0x78d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0063
        gbc.setState(0x82dd, 0xfab0, 0x9d00, 0x327b, 0xb5bc, 0x970e, 0x1, 0x1);
        gbc.writeMem(0x82dd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xfab0);
        EXPECT(gbc.pc(), 0x82de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82dd), 0x5a);
        // 5A 0064
        gbc.setState(0x7412, 0xbbaa, 0xfa70, 0x1c23, 0x550a, 0xc8b5, 0x1, 0x1);
        gbc.writeMem(0x7412, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbbaa);
        EXPECT(gbc.pc(), 0x7413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0065
        gbc.setState(0x25d2, 0xb1de, 0x8160, 0x1a32, 0x6f2c, 0x517f, 0x1, 0x1);
        gbc.writeMem(0x25d2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb1de);
        EXPECT(gbc.pc(), 0x25d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0067
        gbc.setState(0x7625, 0xddc9, 0x2bb0, 0x5997, 0x7cc3, 0xa0c7, 0x1, 0x1);
        gbc.writeMem(0x7625, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xddc9);
        EXPECT(gbc.pc(), 0x7626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0068
        gbc.setState(0x99a6, 0xae7f, 0xcf60, 0xcbac, 0xf6b0, 0x81, 0x1, 0x0);
        gbc.writeMem(0x99a6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xae7f);
        EXPECT(gbc.pc(), 0x99a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a6), 0x5a);
        // 5A 0069
        gbc.setState(0x5cdc, 0x2aab, 0xf470, 0x82e3, 0xe4b5, 0xc905, 0x0, 0x1);
        gbc.writeMem(0x5cdc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2aab);
        EXPECT(gbc.pc(), 0x5cdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 006A
        gbc.setState(0xe579, 0xa0a, 0xab90, 0x7c8f, 0xbfd4, 0xc334, 0x0, 0x0);
        gbc.writeMem(0xe579, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa0a);
        EXPECT(gbc.pc(), 0xe57a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe579), 0x5a);
        // 5A 006B
        gbc.setState(0xa250, 0x8597, 0x8fd0, 0x3fde, 0xacd4, 0x26d4, 0x0, 0x1);
        gbc.writeMem(0xa250, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8597);
        EXPECT(gbc.pc(), 0xa251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa250), 0x5a);
        // 5A 006C
        gbc.setState(0x8938, 0x17c3, 0x1b80, 0x2a8a, 0x20b6, 0xce8d, 0x1, 0x0);
        gbc.writeMem(0x8938, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x17c3);
        EXPECT(gbc.pc(), 0x8939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8938), 0x5a);
        // 5A 006D
        gbc.setState(0xd788, 0xc2a7, 0x4530, 0x6387, 0x2367, 0x93fa, 0x1, 0x0);
        gbc.writeMem(0xd788, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc2a7);
        EXPECT(gbc.pc(), 0xd789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd788), 0x5a);
        // 5A 006E
        gbc.setState(0x872, 0x929e, 0xbd30, 0xa125, 0x9cb1, 0xc52a, 0x0, 0x0);
        gbc.writeMem(0x872, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x929e);
        EXPECT(gbc.pc(), 0x873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 006F
        gbc.setState(0xdcb2, 0x762e, 0x1720, 0x7b8d, 0x488c, 0xb76c, 0x0, 0x0);
        gbc.writeMem(0xdcb2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x762e);
        EXPECT(gbc.pc(), 0xdcb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb2), 0x5a);
        // 5A 0070
        gbc.setState(0x3423, 0xa2e, 0x3860, 0xdf34, 0xcaeb, 0x12bb, 0x1, 0x1);
        gbc.writeMem(0x3423, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa2e);
        EXPECT(gbc.pc(), 0x3424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0071
        gbc.setState(0x968, 0x25ff, 0x92e0, 0x22a1, 0xde2f, 0x5980, 0x0, 0x0);
        gbc.writeMem(0x968, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x25ff);
        EXPECT(gbc.pc(), 0x969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0072
        gbc.setState(0x46c3, 0x6903, 0x2370, 0x5f61, 0xfbe0, 0x1e78, 0x0, 0x0);
        gbc.writeMem(0x46c3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6903);
        EXPECT(gbc.pc(), 0x46c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0073
        gbc.setState(0xcc0b, 0xb05f, 0x20f0, 0xd156, 0x87b1, 0xf479, 0x0, 0x0);
        gbc.writeMem(0xcc0b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb05f);
        EXPECT(gbc.pc(), 0xcc0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc0b), 0x5a);
        // 5A 0074
        gbc.setState(0x434c, 0xe6b5, 0x1a70, 0xb9ad, 0xea63, 0xbacb, 0x0, 0x1);
        gbc.writeMem(0x434c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe6b5);
        EXPECT(gbc.pc(), 0x434d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0075
        gbc.setState(0x694c, 0x625b, 0x3410, 0xae61, 0x5c41, 0x977f, 0x0, 0x1);
        gbc.writeMem(0x694c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x625b);
        EXPECT(gbc.pc(), 0x694d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0077
        gbc.setState(0x42a0, 0x4e70, 0xa870, 0xf874, 0x13b4, 0x66da, 0x0, 0x1);
        gbc.writeMem(0x42a0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4e70);
        EXPECT(gbc.pc(), 0x42a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0079
        gbc.setState(0xe894, 0xf83e, 0x9890, 0x6bc7, 0xd558, 0xd44, 0x0, 0x0);
        gbc.writeMem(0xe894, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf83e);
        EXPECT(gbc.pc(), 0xe895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe894), 0x5a);
        // 5A 007A
        gbc.setState(0xb88, 0xeb11, 0x6cb0, 0xfb45, 0x83ce, 0x5254, 0x1, 0x0);
        gbc.writeMem(0xb88, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xeb11);
        EXPECT(gbc.pc(), 0xb89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 007B
        gbc.setState(0x6e47, 0x1318, 0x96f0, 0xdf81, 0x2787, 0x6b32, 0x1, 0x1);
        gbc.writeMem(0x6e47, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1318);
        EXPECT(gbc.pc(), 0x6e48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 007C
        gbc.setState(0x8d40, 0x1a0b, 0xacc0, 0x884e, 0xef6f, 0x9dad, 0x0, 0x1);
        gbc.writeMem(0x8d40, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1a0b);
        EXPECT(gbc.pc(), 0x8d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d40), 0x5a);
        // 5A 007D
        gbc.setState(0x7a16, 0xeff, 0x2d60, 0xfe6b, 0x4105, 0x8b0, 0x0, 0x1);
        gbc.writeMem(0x7a16, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xeff);
        EXPECT(gbc.pc(), 0x7a17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 007E
        gbc.setState(0xe89a, 0x8ba5, 0x8c0, 0xc9bc, 0x81f7, 0x9523, 0x1, 0x1);
        gbc.writeMem(0xe89a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8ba5);
        EXPECT(gbc.pc(), 0xe89b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89a), 0x5a);
        // 5A 007F
        gbc.setState(0x3159, 0x55a4, 0x1550, 0xbbb6, 0x6656, 0x49b, 0x1, 0x1);
        gbc.writeMem(0x3159, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x55a4);
        EXPECT(gbc.pc(), 0x315a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0080
        gbc.setState(0x5d26, 0x3d61, 0xfe10, 0xa051, 0xec4, 0x9c17, 0x0, 0x1);
        gbc.writeMem(0x5d26, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x3d61);
        EXPECT(gbc.pc(), 0x5d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0081
        gbc.setState(0x5f8a, 0x7283, 0xa30, 0xfac4, 0x5ee9, 0x7ef4, 0x0, 0x1);
        gbc.writeMem(0x5f8a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7283);
        EXPECT(gbc.pc(), 0x5f8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0082
        gbc.setState(0x1065, 0xed83, 0xe8f0, 0x867d, 0x469d, 0xd569, 0x0, 0x1);
        gbc.writeMem(0x1065, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xed83);
        EXPECT(gbc.pc(), 0x1066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0083
        gbc.setState(0x182c, 0x2a4c, 0x5dc0, 0x127e, 0x7483, 0x8852, 0x0, 0x1);
        gbc.writeMem(0x182c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2a4c);
        EXPECT(gbc.pc(), 0x182d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0084
        gbc.setState(0xcf68, 0x1515, 0xc530, 0xa1bd, 0xdedc, 0x6242, 0x0, 0x0);
        gbc.writeMem(0xcf68, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1515);
        EXPECT(gbc.pc(), 0xcf69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf68), 0x5a);
        // 5A 0085
        gbc.setState(0xe39d, 0x115e, 0x8970, 0x5935, 0xfe0c, 0xb4f7, 0x1, 0x0);
        gbc.writeMem(0xe39d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x115e);
        EXPECT(gbc.pc(), 0xe39e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe39d), 0x5a);
        // 5A 0086
        gbc.setState(0x75f2, 0x614b, 0x6e50, 0x69e4, 0xc299, 0xf86f, 0x1, 0x0);
        gbc.writeMem(0x75f2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x614b);
        EXPECT(gbc.pc(), 0x75f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0087
        gbc.setState(0xa40f, 0xfe0a, 0x7dc0, 0xc27d, 0x79b3, 0xd46b, 0x0, 0x0);
        gbc.writeMem(0xa40f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfe0a);
        EXPECT(gbc.pc(), 0xa410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa40f), 0x5a);
        // 5A 0088
        gbc.setState(0x9405, 0x3e61, 0xce50, 0x5bf8, 0xe96b, 0xc9e6, 0x1, 0x1);
        gbc.writeMem(0x9405, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3e61);
        EXPECT(gbc.pc(), 0x9406);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9405), 0x5a);
        // 5A 0089
        gbc.setState(0xa7d8, 0x233e, 0xaf0, 0x894f, 0xcd54, 0x5f4f, 0x1, 0x1);
        gbc.writeMem(0xa7d8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x233e);
        EXPECT(gbc.pc(), 0xa7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d8), 0x5a);
        // 5A 008A
        gbc.setState(0x33d3, 0x964, 0xe3e0, 0x8400, 0x59a8, 0xb3d7, 0x1, 0x1);
        gbc.writeMem(0x33d3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x964);
        EXPECT(gbc.pc(), 0x33d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 008B
        gbc.setState(0x2f90, 0x4ed6, 0x1c70, 0xb284, 0xe193, 0x94a1, 0x1, 0x0);
        gbc.writeMem(0x2f90, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4ed6);
        EXPECT(gbc.pc(), 0x2f91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 008C
        gbc.setState(0x3038, 0x2be3, 0xc7d0, 0xd8c3, 0x6fd, 0xcfa4, 0x1, 0x0);
        gbc.writeMem(0x3038, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2be3);
        EXPECT(gbc.pc(), 0x3039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 008D
        gbc.setState(0xac3f, 0x1116, 0xe030, 0xeaf4, 0xef63, 0xac2f, 0x1, 0x0);
        gbc.writeMem(0xac3f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1116);
        EXPECT(gbc.pc(), 0xac40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3f), 0x5a);
        // 5A 008E
        gbc.setState(0xd3e4, 0x751a, 0xe3e0, 0xf7bd, 0x6bec, 0xa9ef, 0x1, 0x0);
        gbc.writeMem(0xd3e4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x751a);
        EXPECT(gbc.pc(), 0xd3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e4), 0x5a);
        // 5A 008F
        gbc.setState(0x9ca1, 0x7bd2, 0xe490, 0x9aa3, 0x27eb, 0x76cf, 0x0, 0x0);
        gbc.writeMem(0x9ca1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7bd2);
        EXPECT(gbc.pc(), 0x9ca2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca1), 0x5a);
        // 5A 0090
        gbc.setState(0x131c, 0xca37, 0x720, 0x39ec, 0x78e5, 0x9054, 0x0, 0x1);
        gbc.writeMem(0x131c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xca37);
        EXPECT(gbc.pc(), 0x131d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0091
        gbc.setState(0x9f98, 0x930a, 0x4510, 0x7cd2, 0x7a24, 0x479, 0x1, 0x1);
        gbc.writeMem(0x9f98, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x930a);
        EXPECT(gbc.pc(), 0x9f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f98), 0x5a);
        // 5A 0093
        gbc.setState(0xe669, 0x1911, 0xdbe0, 0x168c, 0x2cb7, 0xc3b4, 0x0, 0x0);
        gbc.writeMem(0xe669, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1911);
        EXPECT(gbc.pc(), 0xe66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe669), 0x5a);
        // 5A 0094
        gbc.setState(0x4e3d, 0xd05b, 0xc070, 0xa88c, 0xcaba, 0xdab8, 0x0, 0x1);
        gbc.writeMem(0x4e3d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd05b);
        EXPECT(gbc.pc(), 0x4e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0095
        gbc.setState(0xd3cc, 0xb681, 0xbc70, 0x651d, 0xbdad, 0xdee6, 0x1, 0x0);
        gbc.writeMem(0xd3cc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb681);
        EXPECT(gbc.pc(), 0xd3cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3cc), 0x5a);
        // 5A 0096
        gbc.setState(0x2205, 0xf803, 0xa850, 0xacbf, 0x78a9, 0x8d0f, 0x0, 0x0);
        gbc.writeMem(0x2205, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf803);
        EXPECT(gbc.pc(), 0x2206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0097
        gbc.setState(0x4fbb, 0xb886, 0x29f0, 0x8f5e, 0xd8e0, 0x84af, 0x1, 0x0);
        gbc.writeMem(0x4fbb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb886);
        EXPECT(gbc.pc(), 0x4fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0098
        gbc.setState(0xad2, 0x415c, 0x1610, 0x92bd, 0x1c95, 0xaec8, 0x0, 0x0);
        gbc.writeMem(0xad2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x415c);
        EXPECT(gbc.pc(), 0xad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0099
        gbc.setState(0x6776, 0xcb2, 0x3ca0, 0xf999, 0x7a0d, 0x7c, 0x1, 0x0);
        gbc.writeMem(0x6776, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xcb2);
        EXPECT(gbc.pc(), 0x6777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 009A
        gbc.setState(0xa9d, 0x5285, 0x3ad0, 0x8f8b, 0xa79a, 0xa223, 0x1, 0x1);
        gbc.writeMem(0xa9d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5285);
        EXPECT(gbc.pc(), 0xa9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 009B
        gbc.setState(0x38b2, 0xea3a, 0xab40, 0x1048, 0x2319, 0xfffb, 0x1, 0x0);
        gbc.writeMem(0x38b2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xea3a);
        EXPECT(gbc.pc(), 0x38b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 009C
        gbc.setState(0x21f5, 0x7287, 0xe660, 0x5774, 0xae4d, 0xc638, 0x0, 0x0);
        gbc.writeMem(0x21f5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7287);
        EXPECT(gbc.pc(), 0x21f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 009D
        gbc.setState(0x98d4, 0x6e4c, 0xa5f0, 0x5ca0, 0x57e5, 0xf025, 0x1, 0x0);
        gbc.writeMem(0x98d4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6e4c);
        EXPECT(gbc.pc(), 0x98d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d4), 0x5a);
        // 5A 009E
        gbc.setState(0x520b, 0xc5d8, 0x3ed0, 0x3679, 0xce78, 0xd2ff, 0x0, 0x1);
        gbc.writeMem(0x520b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc5d8);
        EXPECT(gbc.pc(), 0x520c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 009F
        gbc.setState(0xeca2, 0x103c, 0x2f30, 0x6379, 0xb68b, 0x111c, 0x1, 0x0);
        gbc.writeMem(0xeca2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x103c);
        EXPECT(gbc.pc(), 0xeca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca2), 0x5a);
        // 5A 00A0
        gbc.setState(0x44bb, 0xeb3, 0x1ea0, 0x2cb8, 0xce40, 0xfd6b, 0x0, 0x1);
        gbc.writeMem(0x44bb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xeb3);
        EXPECT(gbc.pc(), 0x44bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00A1
        gbc.setState(0x879e, 0x5f9a, 0xca70, 0x56a7, 0xbe81, 0x7438, 0x0, 0x0);
        gbc.writeMem(0x879e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5f9a);
        EXPECT(gbc.pc(), 0x879f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x879e), 0x5a);
        // 5A 00A2
        gbc.setState(0xef68, 0x6da5, 0x99a0, 0xf4cd, 0x8aaf, 0x330c, 0x1, 0x1);
        gbc.writeMem(0xef68, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6da5);
        EXPECT(gbc.pc(), 0xef69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef68), 0x5a);
        // 5A 00A3
        gbc.setState(0x6ed2, 0x5a62, 0x8740, 0x2200, 0x8852, 0x4e7b, 0x1, 0x1);
        gbc.writeMem(0x6ed2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5a62);
        EXPECT(gbc.pc(), 0x6ed3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00A4
        gbc.setState(0x2ea0, 0x1411, 0x7d80, 0x9f50, 0xa128, 0x75f3, 0x1, 0x1);
        gbc.writeMem(0x2ea0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1411);
        EXPECT(gbc.pc(), 0x2ea1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00A5
        gbc.setState(0x586c, 0xe8bc, 0xb00, 0x5f54, 0xe35b, 0x5aaf, 0x0, 0x1);
        gbc.writeMem(0x586c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe8bc);
        EXPECT(gbc.pc(), 0x586d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00A6
        gbc.setState(0xc136, 0x56b6, 0x9fe0, 0x1a2e, 0xddec, 0x7b87, 0x1, 0x0);
        gbc.writeMem(0xc136, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x56b6);
        EXPECT(gbc.pc(), 0xc137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc136), 0x5a);
        // 5A 00A7
        gbc.setState(0x98bf, 0x644b, 0xa8c0, 0xed91, 0x86dc, 0x586a, 0x0, 0x1);
        gbc.writeMem(0x98bf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x644b);
        EXPECT(gbc.pc(), 0x98c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98bf), 0x5a);
        // 5A 00A8
        gbc.setState(0x5fcd, 0x75af, 0x2d50, 0xd4c0, 0x1a8c, 0xcc1f, 0x1, 0x0);
        gbc.writeMem(0x5fcd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x75af);
        EXPECT(gbc.pc(), 0x5fce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00A9
        gbc.setState(0x5c32, 0xf4a6, 0x7280, 0xffb, 0xad4a, 0xa810, 0x1, 0x1);
        gbc.writeMem(0x5c32, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf4a6);
        EXPECT(gbc.pc(), 0x5c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00AA
        gbc.setState(0x8b51, 0xf024, 0x7de0, 0x8c52, 0xe7f8, 0xdeef, 0x0, 0x1);
        gbc.writeMem(0x8b51, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf024);
        EXPECT(gbc.pc(), 0x8b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b51), 0x5a);
        // 5A 00AB
        gbc.setState(0x5fb4, 0x44bb, 0x1010, 0x9530, 0x6cc4, 0x11e7, 0x1, 0x1);
        gbc.writeMem(0x5fb4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x44bb);
        EXPECT(gbc.pc(), 0x5fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00AC
        gbc.setState(0xc99d, 0x5a17, 0x2100, 0xdb5, 0x1a77, 0x5a54, 0x0, 0x1);
        gbc.writeMem(0xc99d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5a17);
        EXPECT(gbc.pc(), 0xc99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99d), 0x5a);
        // 5A 00AD
        gbc.setState(0xa1fa, 0x6b85, 0xe1c0, 0x3496, 0xb5b7, 0xab81, 0x1, 0x0);
        gbc.writeMem(0xa1fa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6b85);
        EXPECT(gbc.pc(), 0xa1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fa), 0x5a);
        // 5A 00AE
        gbc.setState(0x5157, 0xdbc4, 0x5e60, 0xbd3c, 0x1533, 0xded0, 0x1, 0x1);
        gbc.writeMem(0x5157, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xdbc4);
        EXPECT(gbc.pc(), 0x5158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00AF
        gbc.setState(0xe7dd, 0x84c7, 0x5bd0, 0x1ece, 0xad5b, 0x6300, 0x0, 0x1);
        gbc.writeMem(0xe7dd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x84c7);
        EXPECT(gbc.pc(), 0xe7de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7dd), 0x5a);
        // 5A 00B0
        gbc.setState(0xe7c8, 0x1260, 0xb150, 0x5c74, 0xa26b, 0x4893, 0x1, 0x0);
        gbc.writeMem(0xe7c8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1260);
        EXPECT(gbc.pc(), 0xe7c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c8), 0x5a);
        // 5A 00B1
        gbc.setState(0x575e, 0x5cf5, 0x6840, 0x96b6, 0x9207, 0xefb9, 0x0, 0x1);
        gbc.writeMem(0x575e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5cf5);
        EXPECT(gbc.pc(), 0x575f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00B2
        gbc.setState(0x71ce, 0xe7de, 0x4190, 0x3167, 0xac8, 0x6bde, 0x0, 0x1);
        gbc.writeMem(0x71ce, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe7de);
        EXPECT(gbc.pc(), 0x71cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00B3
        gbc.setState(0x6325, 0x6c0a, 0x2df0, 0x72a, 0xbb38, 0xf8ea, 0x1, 0x0);
        gbc.writeMem(0x6325, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6c0a);
        EXPECT(gbc.pc(), 0x6326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00B4
        gbc.setState(0x761a, 0xd70e, 0xf820, 0x6a86, 0x77a1, 0x1aa3, 0x1, 0x0);
        gbc.writeMem(0x761a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd70e);
        EXPECT(gbc.pc(), 0x761b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00B5
        gbc.setState(0xaf9a, 0xfb09, 0x6610, 0xadc0, 0x38c1, 0xf6dd, 0x0, 0x1);
        gbc.writeMem(0xaf9a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfb09);
        EXPECT(gbc.pc(), 0xaf9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf9a), 0x5a);
        // 5A 00B6
        gbc.setState(0xdf31, 0xeda0, 0xb1a0, 0x69a6, 0x5d30, 0x5b31, 0x1, 0x1);
        gbc.writeMem(0xdf31, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xeda0);
        EXPECT(gbc.pc(), 0xdf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf31), 0x5a);
        // 5A 00B7
        gbc.setState(0x255, 0xfbcb, 0x4860, 0x6822, 0x1f6a, 0xba2d, 0x1, 0x1);
        gbc.writeMem(0x255, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfbcb);
        EXPECT(gbc.pc(), 0x256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00B9
        gbc.setState(0x990f, 0x260d, 0xb140, 0x18f8, 0x285f, 0xc0d8, 0x0, 0x1);
        gbc.writeMem(0x990f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x260d);
        EXPECT(gbc.pc(), 0x9910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990f), 0x5a);
        // 5A 00BA
        gbc.setState(0x29be, 0xbc07, 0x77b0, 0x343b, 0x80ef, 0x76be, 0x0, 0x0);
        gbc.writeMem(0x29be, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xbc07);
        EXPECT(gbc.pc(), 0x29bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00BB
        gbc.setState(0x8ed7, 0x193a, 0xc130, 0xe00, 0x1e3f, 0x70b8, 0x1, 0x0);
        gbc.writeMem(0x8ed7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x193a);
        EXPECT(gbc.pc(), 0x8ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed7), 0x5a);
        // 5A 00BC
        gbc.setState(0x32bb, 0x9316, 0xfb70, 0x140e, 0x385c, 0x2b38, 0x0, 0x1);
        gbc.writeMem(0x32bb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9316);
        EXPECT(gbc.pc(), 0x32bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00BD
        gbc.setState(0xaa1a, 0xb422, 0x7d00, 0x4bf9, 0x1059, 0x9762, 0x1, 0x0);
        gbc.writeMem(0xaa1a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb422);
        EXPECT(gbc.pc(), 0xaa1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa1a), 0x5a);
        // 5A 00BE
        gbc.setState(0xe9ec, 0xb7be, 0x98e0, 0x6735, 0xe3e8, 0x3733, 0x1, 0x0);
        gbc.writeMem(0xe9ec, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb7be);
        EXPECT(gbc.pc(), 0xe9ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9ec), 0x5a);
        // 5A 00BF
        gbc.setState(0xd4b6, 0x4119, 0x16b0, 0xd267, 0xd32b, 0xe18e, 0x0, 0x1);
        gbc.writeMem(0xd4b6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4119);
        EXPECT(gbc.pc(), 0xd4b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4b6), 0x5a);
        // 5A 00C0
        gbc.setState(0x837d, 0xec60, 0x3270, 0xca8, 0xbdb3, 0xffef, 0x0, 0x1);
        gbc.writeMem(0x837d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xec60);
        EXPECT(gbc.pc(), 0x837e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837d), 0x5a);
        // 5A 00C1
        gbc.setState(0x52fe, 0x50c4, 0x6220, 0x535e, 0xf100, 0x7739, 0x1, 0x1);
        gbc.writeMem(0x52fe, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x50c4);
        EXPECT(gbc.pc(), 0x52ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00C3
        gbc.setState(0xab6a, 0xf8b, 0x9100, 0xd382, 0xc2b8, 0x6c71, 0x0, 0x1);
        gbc.writeMem(0xab6a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xf8b);
        EXPECT(gbc.pc(), 0xab6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab6a), 0x5a);
        // 5A 00C4
        gbc.setState(0xcad, 0x4ba4, 0xeac0, 0x3274, 0x93d0, 0xcaad, 0x0, 0x0);
        gbc.writeMem(0xcad, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4ba4);
        EXPECT(gbc.pc(), 0xcae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00C5
        gbc.setState(0xb5b5, 0x3c9e, 0x6db0, 0x7e71, 0x2200, 0xd133, 0x0, 0x0);
        gbc.writeMem(0xb5b5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3c9e);
        EXPECT(gbc.pc(), 0xb5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5b5), 0x5a);
        // 5A 00C6
        gbc.setState(0x13d7, 0x47b, 0xa470, 0x405f, 0xa08c, 0xb4e7, 0x0, 0x1);
        gbc.writeMem(0x13d7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x47b);
        EXPECT(gbc.pc(), 0x13d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00C7
        gbc.setState(0xb24b, 0x22e5, 0xd780, 0xe943, 0xd3a5, 0xf3c3, 0x0, 0x0);
        gbc.writeMem(0xb24b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x22e5);
        EXPECT(gbc.pc(), 0xb24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb24b), 0x5a);
        // 5A 00C8
        gbc.setState(0x6b13, 0xa7e6, 0x6610, 0x96a8, 0x3f0, 0xe661, 0x0, 0x0);
        gbc.writeMem(0x6b13, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa7e6);
        EXPECT(gbc.pc(), 0x6b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00C9
        gbc.setState(0x4523, 0x8615, 0x9560, 0x4b, 0x4c09, 0xa68c, 0x0, 0x0);
        gbc.writeMem(0x4523, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8615);
        EXPECT(gbc.pc(), 0x4524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00CA
        gbc.setState(0x7f51, 0xee2, 0x53d0, 0xfbf7, 0x8b14, 0x70a8, 0x0, 0x1);
        gbc.writeMem(0x7f51, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xee2);
        EXPECT(gbc.pc(), 0x7f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00CC
        gbc.setState(0xa85e, 0x1e13, 0x52d0, 0x73d6, 0x32af, 0x709, 0x0, 0x0);
        gbc.writeMem(0xa85e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1e13);
        EXPECT(gbc.pc(), 0xa85f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85e), 0x5a);
        // 5A 00CD
        gbc.setState(0x9a47, 0xea32, 0x1cd0, 0x9cc1, 0x4c0e, 0x9ad8, 0x0, 0x0);
        gbc.writeMem(0x9a47, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xea32);
        EXPECT(gbc.pc(), 0x9a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a47), 0x5a);
        // 5A 00CE
        gbc.setState(0xd601, 0xc680, 0x77b0, 0xbac, 0x3f41, 0xb812, 0x0, 0x1);
        gbc.writeMem(0xd601, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc680);
        EXPECT(gbc.pc(), 0xd602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd601), 0x5a);
        // 5A 00CF
        gbc.setState(0x908e, 0x751c, 0x68f0, 0xc70b, 0x4e3d, 0xba81, 0x1, 0x1);
        gbc.writeMem(0x908e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x751c);
        EXPECT(gbc.pc(), 0x908f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x908e), 0x5a);
        // 5A 00D0
        gbc.setState(0x24bd, 0x7a82, 0x9d0, 0xd918, 0x95f9, 0xd55, 0x1, 0x0);
        gbc.writeMem(0x24bd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7a82);
        EXPECT(gbc.pc(), 0x24be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00D1
        gbc.setState(0x260d, 0x4f27, 0xe370, 0x5fca, 0xc610, 0xbb68, 0x0, 0x1);
        gbc.writeMem(0x260d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4f27);
        EXPECT(gbc.pc(), 0x260e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00D2
        gbc.setState(0x34fd, 0xf089, 0xad0, 0x7e11, 0x6bd0, 0x2ff3, 0x0, 0x1);
        gbc.writeMem(0x34fd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf089);
        EXPECT(gbc.pc(), 0x34fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00D3
        gbc.setState(0xee0f, 0x34eb, 0x6740, 0x217c, 0xbcac, 0xce70, 0x0, 0x0);
        gbc.writeMem(0xee0f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x34eb);
        EXPECT(gbc.pc(), 0xee10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee0f), 0x5a);
        // 5A 00D4
        gbc.setState(0xb4b5, 0xccab, 0x79f0, 0xdefa, 0x5fbc, 0xa160, 0x1, 0x0);
        gbc.writeMem(0xb4b5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xccab);
        EXPECT(gbc.pc(), 0xb4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4b5), 0x5a);
        // 5A 00D5
        gbc.setState(0xaac0, 0x9123, 0xc720, 0x74c2, 0x2a47, 0x8de8, 0x0, 0x1);
        gbc.writeMem(0xaac0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9123);
        EXPECT(gbc.pc(), 0xaac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac0), 0x5a);
        // 5A 00D6
        gbc.setState(0x4861, 0x2819, 0x3c30, 0x3d44, 0xd68b, 0x3c78, 0x0, 0x0);
        gbc.writeMem(0x4861, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2819);
        EXPECT(gbc.pc(), 0x4862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00D7
        gbc.setState(0xd1ed, 0xeca9, 0x43b0, 0xce59, 0xeac2, 0xc12c, 0x0, 0x1);
        gbc.writeMem(0xd1ed, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeca9);
        EXPECT(gbc.pc(), 0xd1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ed), 0x5a);
        // 5A 00D8
        gbc.setState(0xe347, 0x4615, 0x8cd0, 0x8358, 0x780c, 0xf062, 0x1, 0x0);
        gbc.writeMem(0xe347, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4615);
        EXPECT(gbc.pc(), 0xe348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe347), 0x5a);
        // 5A 00D9
        gbc.setState(0xad4e, 0xce48, 0x98b0, 0xe040, 0xc03c, 0x24d5, 0x0, 0x1);
        gbc.writeMem(0xad4e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0xad4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4e), 0x5a);
        // 5A 00DB
        gbc.setState(0xafbc, 0x390, 0x7ee0, 0xb686, 0xe837, 0x89b7, 0x1, 0x1);
        gbc.writeMem(0xafbc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x390);
        EXPECT(gbc.pc(), 0xafbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafbc), 0x5a);
        // 5A 00DC
        gbc.setState(0x9427, 0xb6a, 0x2100, 0x3ca8, 0x4e6d, 0x5e5c, 0x1, 0x0);
        gbc.writeMem(0x9427, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb6a);
        EXPECT(gbc.pc(), 0x9428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9427), 0x5a);
        // 5A 00DD
        gbc.setState(0x2fc8, 0x79ac, 0x11f0, 0x842e, 0x6e75, 0x7d67, 0x0, 0x1);
        gbc.writeMem(0x2fc8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x79ac);
        EXPECT(gbc.pc(), 0x2fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00DF
        gbc.setState(0x4278, 0x513d, 0xf990, 0x56ce, 0x99a5, 0x1373, 0x0, 0x0);
        gbc.writeMem(0x4278, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x513d);
        EXPECT(gbc.pc(), 0x4279);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00E0
        gbc.setState(0x2e10, 0x731f, 0x4840, 0xc06b, 0x7422, 0xd05, 0x1, 0x0);
        gbc.writeMem(0x2e10, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x731f);
        EXPECT(gbc.pc(), 0x2e11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00E1
        gbc.setState(0x1d79, 0xfb75, 0xf510, 0xa61e, 0x6203, 0x6abe, 0x1, 0x0);
        gbc.writeMem(0x1d79, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfb75);
        EXPECT(gbc.pc(), 0x1d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00E2
        gbc.setState(0x30b9, 0x253e, 0x2e00, 0x6418, 0x701a, 0x51ea, 0x0, 0x1);
        gbc.writeMem(0x30b9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x253e);
        EXPECT(gbc.pc(), 0x30ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00E3
        gbc.setState(0x7853, 0xd280, 0x540, 0xf691, 0xc546, 0x8635, 0x1, 0x1);
        gbc.writeMem(0x7853, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xd280);
        EXPECT(gbc.pc(), 0x7854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00E4
        gbc.setState(0xe9e9, 0x147f, 0xf3f0, 0xc397, 0x6930, 0x1a1a, 0x0, 0x1);
        gbc.writeMem(0xe9e9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x147f);
        EXPECT(gbc.pc(), 0xe9ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e9), 0x5a);
        // 5A 00E5
        gbc.setState(0x7dea, 0x9be, 0xa5f0, 0xb531, 0x188a, 0xecc7, 0x0, 0x0);
        gbc.writeMem(0x7dea, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9be);
        EXPECT(gbc.pc(), 0x7deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00E7
        gbc.setState(0x7332, 0x59c9, 0x3dd0, 0x9c11, 0x1cf8, 0xec19, 0x1, 0x0);
        gbc.writeMem(0x7332, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x59c9);
        EXPECT(gbc.pc(), 0x7333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00E8
        gbc.setState(0xd6a8, 0x1e54, 0xa4b0, 0x7ff3, 0x4e5e, 0x6716, 0x0, 0x0);
        gbc.writeMem(0xd6a8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1e54);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a8), 0x5a);
        // 5A 00E9
        gbc.setState(0x39cf, 0xf46d, 0x2a60, 0xd832, 0xc50d, 0xca65, 0x0, 0x0);
        gbc.writeMem(0x39cf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf46d);
        EXPECT(gbc.pc(), 0x39d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00EA
        gbc.setState(0x93dd, 0x2fe1, 0x5d50, 0xf155, 0xe02d, 0xb07e, 0x0, 0x0);
        gbc.writeMem(0x93dd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x2fe1);
        EXPECT(gbc.pc(), 0x93de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93dd), 0x5a);
        // 5A 00EB
        gbc.setState(0xcbe3, 0xf737, 0x4e20, 0x6f4b, 0x967b, 0x1890, 0x0, 0x0);
        gbc.writeMem(0xcbe3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf737);
        EXPECT(gbc.pc(), 0xcbe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbe3), 0x5a);
        // 5A 00EC
        gbc.setState(0x866d, 0xc7d8, 0x6980, 0x2272, 0xee6f, 0x334f, 0x0, 0x0);
        gbc.writeMem(0x866d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xc7d8);
        EXPECT(gbc.pc(), 0x866e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866d), 0x5a);
        // 5A 00ED
        gbc.setState(0x8dc5, 0xac61, 0x8b50, 0x1b5f, 0x1976, 0xeb42, 0x0, 0x1);
        gbc.writeMem(0x8dc5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xac61);
        EXPECT(gbc.pc(), 0x8dc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc5), 0x5a);
        // 5A 00EE
        gbc.setState(0x96, 0x8bb5, 0x50a0, 0xd0d0, 0xb224, 0xb0e9, 0x1, 0x1);
        gbc.writeMem(0x96, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8bb5);
        EXPECT(gbc.pc(), 0x97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 00EF
        gbc.setState(0xe478, 0xf267, 0x3bf0, 0x34e6, 0x515e, 0x3d8d, 0x1, 0x1);
        gbc.writeMem(0xe478, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf267);
        EXPECT(gbc.pc(), 0xe479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe478), 0x5a);
        // 5A 00F0
        gbc.setState(0x5857, 0x9097, 0x8090, 0xbcd6, 0xc681, 0xa064, 0x1, 0x0);
        gbc.writeMem(0x5857, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9097);
        EXPECT(gbc.pc(), 0x5858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00F1
        gbc.setState(0x5297, 0xc934, 0xa440, 0x27ad, 0xfafd, 0x9703, 0x0, 0x0);
        gbc.writeMem(0x5297, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc934);
        EXPECT(gbc.pc(), 0x5298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00F2
        gbc.setState(0x27ef, 0x4676, 0xfd30, 0x2447, 0xbabf, 0x220f, 0x0, 0x0);
        gbc.writeMem(0x27ef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4676);
        EXPECT(gbc.pc(), 0x27f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00F3
        gbc.setState(0x1bae, 0x9d7c, 0x8480, 0x74bc, 0x7f0c, 0xc782, 0x0, 0x0);
        gbc.writeMem(0x1bae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9d7c);
        EXPECT(gbc.pc(), 0x1baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 00F4
        gbc.setState(0x968b, 0xa19e, 0x9e30, 0xc52f, 0x15b7, 0x8e1b, 0x1, 0x0);
        gbc.writeMem(0x968b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa19e);
        EXPECT(gbc.pc(), 0x968c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x968b), 0x5a);
        // 5A 00F5
        gbc.setState(0xd5d0, 0x4b11, 0xefe0, 0x41ef, 0x62fb, 0xeb56, 0x0, 0x0);
        gbc.writeMem(0xd5d0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4b11);
        EXPECT(gbc.pc(), 0xd5d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5d0), 0x5a);
        // 5A 00F6
        gbc.setState(0xde33, 0x8492, 0x3220, 0x5f85, 0x1924, 0x40e, 0x1, 0x1);
        gbc.writeMem(0xde33, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0xde34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde33), 0x5a);
        // 5A 00F7
        gbc.setState(0x3520, 0xbbb5, 0xe970, 0xfa16, 0x1ad6, 0x455c, 0x0, 0x1);
        gbc.writeMem(0x3520, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbbb5);
        EXPECT(gbc.pc(), 0x3521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00F8
        gbc.setState(0xbb84, 0x6ebf, 0xd820, 0x69fd, 0xb7a, 0x6a5b, 0x1, 0x0);
        gbc.writeMem(0xbb84, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6ebf);
        EXPECT(gbc.pc(), 0xbb85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb84), 0x5a);
        // 5A 00F9
        gbc.setState(0x6796, 0x4c13, 0x23d0, 0x8b14, 0x24dd, 0x95a, 0x1, 0x1);
        gbc.writeMem(0x6796, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4c13);
        EXPECT(gbc.pc(), 0x6797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00FA
        gbc.setState(0x37de, 0x7c16, 0x4d70, 0xb243, 0xe3ed, 0x2e25, 0x0, 0x1);
        gbc.writeMem(0x37de, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7c16);
        EXPECT(gbc.pc(), 0x37df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 00FB
        gbc.setState(0x3a44, 0xf56f, 0x5150, 0xd10a, 0x511, 0x775d, 0x0, 0x0);
        gbc.writeMem(0x3a44, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf56f);
        EXPECT(gbc.pc(), 0x3a45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 00FC
        gbc.setState(0xb547, 0xc971, 0x5ea0, 0x333, 0x27fb, 0xf5f6, 0x1, 0x1);
        gbc.writeMem(0xb547, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc971);
        EXPECT(gbc.pc(), 0xb548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb547), 0x5a);
        // 5A 00FD
        gbc.setState(0x98eb, 0xcbe5, 0xf9e0, 0xa489, 0x8bb4, 0xb9d6, 0x1, 0x0);
        gbc.writeMem(0x98eb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcbe5);
        EXPECT(gbc.pc(), 0x98ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98eb), 0x5a);
        // 5A 00FE
        gbc.setState(0xdd61, 0xee8, 0xd670, 0x572e, 0xcd71, 0x8d94, 0x1, 0x1);
        gbc.writeMem(0xdd61, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xee8);
        EXPECT(gbc.pc(), 0xdd62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd61), 0x5a);
        // 5A 00FF
        gbc.setState(0x7497, 0xa469, 0x35c0, 0xbf4d, 0x5622, 0xdb88, 0x0, 0x0);
        gbc.writeMem(0x7497, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa469);
        EXPECT(gbc.pc(), 0x7498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0100
        gbc.setState(0x9573, 0x2018, 0x9220, 0x4300, 0x2f18, 0xda08, 0x1, 0x1);
        gbc.writeMem(0x9573, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2018);
        EXPECT(gbc.pc(), 0x9574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9573), 0x5a);
        // 5A 0101
        gbc.setState(0x9047, 0x4ac8, 0x5d50, 0xb710, 0xf615, 0xb107, 0x1, 0x1);
        gbc.writeMem(0x9047, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4ac8);
        EXPECT(gbc.pc(), 0x9048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9047), 0x5a);
        // 5A 0102
        gbc.setState(0x9cb1, 0x936b, 0x4c0, 0x3773, 0xcc39, 0x30a6, 0x1, 0x0);
        gbc.writeMem(0x9cb1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x936b);
        EXPECT(gbc.pc(), 0x9cb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cb1), 0x5a);
        // 5A 0103
        gbc.setState(0x96b0, 0x158d, 0x2430, 0xf0b1, 0x7a3b, 0x1a68, 0x0, 0x1);
        gbc.writeMem(0x96b0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x158d);
        EXPECT(gbc.pc(), 0x96b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96b0), 0x5a);
        // 5A 0104
        gbc.setState(0xb032, 0x3bbb, 0x71c0, 0x9a57, 0xf2f5, 0x769d, 0x1, 0x0);
        gbc.writeMem(0xb032, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3bbb);
        EXPECT(gbc.pc(), 0xb033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb032), 0x5a);
        // 5A 0105
        gbc.setState(0x1f18, 0xb1ee, 0x2330, 0xa714, 0x27bd, 0xc734, 0x0, 0x1);
        gbc.writeMem(0x1f18, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb1ee);
        EXPECT(gbc.pc(), 0x1f19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0106
        gbc.setState(0xd383, 0xc357, 0x5610, 0x43e8, 0xabd2, 0x45e0, 0x1, 0x0);
        gbc.writeMem(0xd383, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc357);
        EXPECT(gbc.pc(), 0xd384);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd383), 0x5a);
        // 5A 0107
        gbc.setState(0xe130, 0xb91c, 0xb9d0, 0x671, 0x213c, 0x53cb, 0x0, 0x1);
        gbc.writeMem(0xe130, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb91c);
        EXPECT(gbc.pc(), 0xe131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe130), 0x5a);
        // 5A 0108
        gbc.setState(0x7b72, 0x1a82, 0xb290, 0x9e8f, 0xab45, 0x4a1e, 0x1, 0x1);
        gbc.writeMem(0x7b72, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1a82);
        EXPECT(gbc.pc(), 0x7b73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0109
        gbc.setState(0x15f8, 0x5cd5, 0xa040, 0x8d67, 0x7ef4, 0x3082, 0x1, 0x1);
        gbc.writeMem(0x15f8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5cd5);
        EXPECT(gbc.pc(), 0x15f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 010A
        gbc.setState(0x6df8, 0xa606, 0x510, 0x67e5, 0x9ff6, 0x70e6, 0x1, 0x0);
        gbc.writeMem(0x6df8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa606);
        EXPECT(gbc.pc(), 0x6df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 010B
        gbc.setState(0x7b33, 0x5400, 0xb450, 0xe186, 0xe25f, 0x51ff, 0x1, 0x1);
        gbc.writeMem(0x7b33, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5400);
        EXPECT(gbc.pc(), 0x7b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 010C
        gbc.setState(0x4ff4, 0x2e5f, 0x790, 0x45c8, 0x85a9, 0xe77d, 0x1, 0x0);
        gbc.writeMem(0x4ff4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2e5f);
        EXPECT(gbc.pc(), 0x4ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 010D
        gbc.setState(0x6b20, 0xca1d, 0x5460, 0xbf48, 0x8778, 0x1ce6, 0x0, 0x1);
        gbc.writeMem(0x6b20, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xca1d);
        EXPECT(gbc.pc(), 0x6b21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 010F
        gbc.setState(0x69aa, 0x6673, 0xd10, 0x773b, 0x1ec8, 0xf5af, 0x1, 0x0);
        gbc.writeMem(0x69aa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6673);
        EXPECT(gbc.pc(), 0x69ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0110
        gbc.setState(0xbc1c, 0xf8d7, 0x60, 0xa336, 0xb155, 0x163f, 0x0, 0x0);
        gbc.writeMem(0xbc1c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf8d7);
        EXPECT(gbc.pc(), 0xbc1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc1c), 0x5a);
        // 5A 0111
        gbc.setState(0x4cf0, 0x749d, 0x5850, 0x3880, 0x2945, 0xe2f6, 0x0, 0x0);
        gbc.writeMem(0x4cf0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x749d);
        EXPECT(gbc.pc(), 0x4cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0112
        gbc.setState(0xd328, 0xc68, 0x74d0, 0xfd91, 0x3d0b, 0x917d, 0x1, 0x0);
        gbc.writeMem(0xd328, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc68);
        EXPECT(gbc.pc(), 0xd329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd328), 0x5a);
        // 5A 0113
        gbc.setState(0xeaea, 0x6865, 0x9740, 0x36e3, 0x9e91, 0x2eba, 0x0, 0x0);
        gbc.writeMem(0xeaea, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6865);
        EXPECT(gbc.pc(), 0xeaeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaea), 0x5a);
        // 5A 0114
        gbc.setState(0x8291, 0x2652, 0x7420, 0xfb48, 0x93f9, 0x1412, 0x0, 0x1);
        gbc.writeMem(0x8291, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2652);
        EXPECT(gbc.pc(), 0x8292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8291), 0x5a);
        // 5A 0116
        gbc.setState(0x7d94, 0x6365, 0xef00, 0x83da, 0xae5c, 0xdffc, 0x1, 0x1);
        gbc.writeMem(0x7d94, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6365);
        EXPECT(gbc.pc(), 0x7d95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0117
        gbc.setState(0x95ec, 0x46e8, 0xed20, 0x4a7e, 0xa6ba, 0x3389, 0x0, 0x0);
        gbc.writeMem(0x95ec, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x46e8);
        EXPECT(gbc.pc(), 0x95ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ec), 0x5a);
        // 5A 0118
        gbc.setState(0x526e, 0x9f11, 0xdcf0, 0xaa85, 0xe0d1, 0xf9f2, 0x0, 0x0);
        gbc.writeMem(0x526e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9f11);
        EXPECT(gbc.pc(), 0x526f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0119
        gbc.setState(0xa63, 0x33ec, 0xc1e0, 0xe75b, 0xfd4f, 0x1868, 0x1, 0x1);
        gbc.writeMem(0xa63, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x33ec);
        EXPECT(gbc.pc(), 0xa64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 011A
        gbc.setState(0xcc6f, 0x7138, 0x3750, 0x2860, 0x1632, 0xb5ed, 0x1, 0x1);
        gbc.writeMem(0xcc6f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7138);
        EXPECT(gbc.pc(), 0xcc70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6f), 0x5a);
        // 5A 011B
        gbc.setState(0x85c1, 0x3372, 0x9930, 0xf967, 0x67bf, 0x3d5b, 0x0, 0x1);
        gbc.writeMem(0x85c1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3372);
        EXPECT(gbc.pc(), 0x85c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c1), 0x5a);
        // 5A 011C
        gbc.setState(0x302a, 0xe9f5, 0x7d20, 0xa906, 0x5ea8, 0xceb, 0x0, 0x0);
        gbc.writeMem(0x302a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe9f5);
        EXPECT(gbc.pc(), 0x302b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 011D
        gbc.setState(0x4b52, 0x1559, 0xaea0, 0xa353, 0x6689, 0xf710, 0x1, 0x1);
        gbc.writeMem(0x4b52, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1559);
        EXPECT(gbc.pc(), 0x4b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 011E
        gbc.setState(0x86c4, 0xd80c, 0xb8b0, 0xb573, 0x23f, 0x1ab6, 0x1, 0x0);
        gbc.writeMem(0x86c4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd80c);
        EXPECT(gbc.pc(), 0x86c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c4), 0x5a);
        // 5A 011F
        gbc.setState(0x391d, 0x62e4, 0x8b00, 0x4d, 0x4278, 0xdbf6, 0x0, 0x0);
        gbc.writeMem(0x391d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x62e4);
        EXPECT(gbc.pc(), 0x391e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0120
        gbc.setState(0x3ed7, 0x65c8, 0x3340, 0x20a0, 0xf6f1, 0x8e7f, 0x1, 0x1);
        gbc.writeMem(0x3ed7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x65c8);
        EXPECT(gbc.pc(), 0x3ed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0121
        gbc.setState(0xe6, 0x9a68, 0xcd80, 0x8e53, 0xda8a, 0xa526, 0x1, 0x0);
        gbc.writeMem(0xe6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9a68);
        EXPECT(gbc.pc(), 0xe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0122
        gbc.setState(0x669f, 0x81e9, 0x43a0, 0x46ec, 0x9352, 0x8b6d, 0x0, 0x1);
        gbc.writeMem(0x669f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x81e9);
        EXPECT(gbc.pc(), 0x66a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0123
        gbc.setState(0x209e, 0xc755, 0xe070, 0x4c5a, 0x8456, 0xd71e, 0x0, 0x1);
        gbc.writeMem(0x209e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc755);
        EXPECT(gbc.pc(), 0x209f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0124
        gbc.setState(0x6946, 0xc9f1, 0x64a0, 0xf5f8, 0x37b5, 0x78b, 0x1, 0x1);
        gbc.writeMem(0x6946, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc9f1);
        EXPECT(gbc.pc(), 0x6947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0125
        gbc.setState(0xb5de, 0xc5b5, 0x8b10, 0x34b8, 0x71c3, 0xf266, 0x0, 0x1);
        gbc.writeMem(0xb5de, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc5b5);
        EXPECT(gbc.pc(), 0xb5df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5de), 0x5a);
        // 5A 0126
        gbc.setState(0x1c42, 0xb95, 0x6b0, 0xfed0, 0x42cd, 0x5a01, 0x1, 0x0);
        gbc.writeMem(0x1c42, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb95);
        EXPECT(gbc.pc(), 0x1c43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0127
        gbc.setState(0xc926, 0x542b, 0x6c40, 0x66b6, 0x8250, 0x4885, 0x1, 0x0);
        gbc.writeMem(0xc926, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x542b);
        EXPECT(gbc.pc(), 0xc927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc926), 0x5a);
        // 5A 0128
        gbc.setState(0x8492, 0x5bd7, 0x7b40, 0x73d1, 0x3367, 0xf21e, 0x0, 0x1);
        gbc.writeMem(0x8492, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5bd7);
        EXPECT(gbc.pc(), 0x8493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8492), 0x5a);
        // 5A 0129
        gbc.setState(0x3957, 0x8a4, 0xd6b0, 0x8d0a, 0x319e, 0x2e0c, 0x0, 0x0);
        gbc.writeMem(0x3957, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8a4);
        EXPECT(gbc.pc(), 0x3958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 012A
        gbc.setState(0xbd2b, 0x5594, 0xc110, 0x73db, 0xe736, 0xee8c, 0x0, 0x1);
        gbc.writeMem(0xbd2b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5594);
        EXPECT(gbc.pc(), 0xbd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd2b), 0x5a);
        // 5A 012B
        gbc.setState(0x1646, 0x43a1, 0x1f00, 0x3688, 0x1bdd, 0x3628, 0x1, 0x0);
        gbc.writeMem(0x1646, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x43a1);
        EXPECT(gbc.pc(), 0x1647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 012C
        gbc.setState(0x2379, 0xd6a4, 0x17d0, 0x484, 0xbc6e, 0x688e, 0x1, 0x1);
        gbc.writeMem(0x2379, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd6a4);
        EXPECT(gbc.pc(), 0x237a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 012D
        gbc.setState(0x9e71, 0xd923, 0x7e30, 0x63b8, 0xdb7a, 0x887a, 0x1, 0x1);
        gbc.writeMem(0x9e71, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd923);
        EXPECT(gbc.pc(), 0x9e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e71), 0x5a);
        // 5A 012E
        gbc.setState(0xb6a7, 0xc917, 0x3580, 0xc95a, 0xcc77, 0xd2c0, 0x0, 0x1);
        gbc.writeMem(0xb6a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc917);
        EXPECT(gbc.pc(), 0xb6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a7), 0x5a);
        // 5A 012F
        gbc.setState(0x9992, 0x9ca4, 0xa350, 0xb0a1, 0xdae4, 0x3af0, 0x0, 0x0);
        gbc.writeMem(0x9992, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9ca4);
        EXPECT(gbc.pc(), 0x9993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9992), 0x5a);
        // 5A 0130
        gbc.setState(0x647d, 0x8ba3, 0x6c30, 0xd539, 0x8433, 0xf2d4, 0x1, 0x0);
        gbc.writeMem(0x647d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8ba3);
        EXPECT(gbc.pc(), 0x647e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0131
        gbc.setState(0xf3d, 0x4295, 0x23c0, 0x8f66, 0x369e, 0x8c08, 0x0, 0x0);
        gbc.writeMem(0xf3d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4295);
        EXPECT(gbc.pc(), 0xf3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0132
        gbc.setState(0x62ad, 0x62e4, 0x610, 0xfcc5, 0xad03, 0xe407, 0x0, 0x0);
        gbc.writeMem(0x62ad, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x62e4);
        EXPECT(gbc.pc(), 0x62ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0133
        gbc.setState(0x1ba1, 0x40cf, 0xf520, 0x38ae, 0xa807, 0x3dd, 0x0, 0x1);
        gbc.writeMem(0x1ba1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x40cf);
        EXPECT(gbc.pc(), 0x1ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0134
        gbc.setState(0x2b5c, 0xea22, 0xb9f0, 0xf18f, 0xf8f6, 0x6d62, 0x1, 0x0);
        gbc.writeMem(0x2b5c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xea22);
        EXPECT(gbc.pc(), 0x2b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0135
        gbc.setState(0xd4ce, 0xe589, 0xc270, 0x6510, 0x8c23, 0x21b6, 0x1, 0x1);
        gbc.writeMem(0xd4ce, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe589);
        EXPECT(gbc.pc(), 0xd4cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ce), 0x5a);
        // 5A 0136
        gbc.setState(0x94d0, 0xfdb3, 0x3040, 0x5ce3, 0xc060, 0xd5e3, 0x1, 0x0);
        gbc.writeMem(0x94d0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfdb3);
        EXPECT(gbc.pc(), 0x94d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d0), 0x5a);
        // 5A 0137
        gbc.setState(0x268d, 0x6f20, 0x7c10, 0x9ec3, 0x60ed, 0x8959, 0x0, 0x0);
        gbc.writeMem(0x268d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6f20);
        EXPECT(gbc.pc(), 0x268e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0138
        gbc.setState(0x863a, 0x8eae, 0xbb70, 0xa8b5, 0x29b6, 0x649f, 0x0, 0x0);
        gbc.writeMem(0x863a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8eae);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863a), 0x5a);
        // 5A 0139
        gbc.setState(0xd51, 0xed6d, 0x9850, 0x73e9, 0x9ebf, 0x4766, 0x1, 0x1);
        gbc.writeMem(0xd51, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xed6d);
        EXPECT(gbc.pc(), 0xd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 013A
        gbc.setState(0x139c, 0x4948, 0x3800, 0x531a, 0xac84, 0xa204, 0x1, 0x1);
        gbc.writeMem(0x139c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4948);
        EXPECT(gbc.pc(), 0x139d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 013B
        gbc.setState(0xa983, 0x5e02, 0x23e0, 0x47e0, 0x43ad, 0x6acc, 0x0, 0x0);
        gbc.writeMem(0xa983, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5e02);
        EXPECT(gbc.pc(), 0xa984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa983), 0x5a);
        // 5A 013C
        gbc.setState(0xe46e, 0x6f17, 0x55a0, 0x3c2a, 0x9851, 0xaa4a, 0x1, 0x0);
        gbc.writeMem(0xe46e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6f17);
        EXPECT(gbc.pc(), 0xe46f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46e), 0x5a);
        // 5A 013D
        gbc.setState(0x5ae2, 0x3c47, 0xab40, 0xe8c2, 0x54b6, 0xc0e8, 0x1, 0x1);
        gbc.writeMem(0x5ae2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3c47);
        EXPECT(gbc.pc(), 0x5ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 013E
        gbc.setState(0xa591, 0x6216, 0x95f0, 0x18cb, 0xedd9, 0x5228, 0x0, 0x1);
        gbc.writeMem(0xa591, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6216);
        EXPECT(gbc.pc(), 0xa592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa591), 0x5a);
        // 5A 013F
        gbc.setState(0x25cf, 0xc484, 0x7680, 0x6bbf, 0x24ba, 0xbc88, 0x0, 0x0);
        gbc.writeMem(0x25cf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc484);
        EXPECT(gbc.pc(), 0x25d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0140
        gbc.setState(0xbf9a, 0xae67, 0x5730, 0xe4b, 0x327b, 0xb6be, 0x1, 0x0);
        gbc.writeMem(0xbf9a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xae67);
        EXPECT(gbc.pc(), 0xbf9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf9a), 0x5a);
        // 5A 0141
        gbc.setState(0xab26, 0xab82, 0x3b80, 0x573c, 0x9238, 0x375, 0x0, 0x1);
        gbc.writeMem(0xab26, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xab82);
        EXPECT(gbc.pc(), 0xab27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab26), 0x5a);
        // 5A 0142
        gbc.setState(0xb847, 0x8684, 0x8fe0, 0xb520, 0x8206, 0x7ad6, 0x0, 0x0);
        gbc.writeMem(0xb847, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8684);
        EXPECT(gbc.pc(), 0xb848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb847), 0x5a);
        // 5A 0144
        gbc.setState(0xcce3, 0xea1f, 0x9110, 0xcbf0, 0x6fc0, 0x68d5, 0x0, 0x0);
        gbc.writeMem(0xcce3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xea1f);
        EXPECT(gbc.pc(), 0xcce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcce3), 0x5a);
        // 5A 0145
        gbc.setState(0xc23b, 0xec7b, 0x3600, 0x3309, 0x2188, 0x7003, 0x1, 0x0);
        gbc.writeMem(0xc23b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xec7b);
        EXPECT(gbc.pc(), 0xc23c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc23b), 0x5a);
        // 5A 0146
        gbc.setState(0x1039, 0x9d24, 0x3100, 0x2022, 0xa37c, 0xdd94, 0x0, 0x0);
        gbc.writeMem(0x1039, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9d24);
        EXPECT(gbc.pc(), 0x103a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0147
        gbc.setState(0x4496, 0xabc8, 0x9370, 0xc7c9, 0x8213, 0x226d, 0x1, 0x1);
        gbc.writeMem(0x4496, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xabc8);
        EXPECT(gbc.pc(), 0x4497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0148
        gbc.setState(0x1154, 0x8662, 0xe150, 0xc232, 0xbc33, 0x134d, 0x0, 0x1);
        gbc.writeMem(0x1154, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8662);
        EXPECT(gbc.pc(), 0x1155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0149
        gbc.setState(0x2112, 0xf654, 0x49f0, 0x43c4, 0xfc19, 0xb5d3, 0x0, 0x1);
        gbc.writeMem(0x2112, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf654);
        EXPECT(gbc.pc(), 0x2113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 014A
        gbc.setState(0xb6fa, 0xc568, 0x3980, 0x7a32, 0x1e62, 0xadd, 0x0, 0x1);
        gbc.writeMem(0xb6fa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc568);
        EXPECT(gbc.pc(), 0xb6fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fa), 0x5a);
        // 5A 014B
        gbc.setState(0x7bbf, 0x6ef5, 0x6250, 0x2e4e, 0x10ba, 0x7348, 0x0, 0x0);
        gbc.writeMem(0x7bbf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6ef5);
        EXPECT(gbc.pc(), 0x7bc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 014C
        gbc.setState(0x4ca4, 0xdbad, 0x6fd0, 0x373e, 0x7b13, 0x5700, 0x0, 0x0);
        gbc.writeMem(0x4ca4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xdbad);
        EXPECT(gbc.pc(), 0x4ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 014D
        gbc.setState(0xa177, 0x955a, 0x6b80, 0x3bef, 0x26d9, 0x372b, 0x1, 0x0);
        gbc.writeMem(0xa177, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x955a);
        EXPECT(gbc.pc(), 0xa178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa177), 0x5a);
        // 5A 014E
        gbc.setState(0x5509, 0x7e9, 0xa960, 0x29f9, 0xa09f, 0x7140, 0x0, 0x0);
        gbc.writeMem(0x5509, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7e9);
        EXPECT(gbc.pc(), 0x550a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 014F
        gbc.setState(0x5e02, 0xa4ee, 0x3bc0, 0xff39, 0x24a3, 0x15cf, 0x0, 0x1);
        gbc.writeMem(0x5e02, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa4ee);
        EXPECT(gbc.pc(), 0x5e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0150
        gbc.setState(0x64e7, 0x866, 0x400, 0x5593, 0xf9c, 0x2477, 0x0, 0x1);
        gbc.writeMem(0x64e7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x866);
        EXPECT(gbc.pc(), 0x64e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0151
        gbc.setState(0xa958, 0x901c, 0xe370, 0xd34f, 0xfcf8, 0x7ba8, 0x1, 0x1);
        gbc.writeMem(0xa958, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x901c);
        EXPECT(gbc.pc(), 0xa959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa958), 0x5a);
        // 5A 0152
        gbc.setState(0xd2c9, 0x67c9, 0x1f50, 0x8365, 0x65b, 0xd580, 0x1, 0x0);
        gbc.writeMem(0xd2c9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x67c9);
        EXPECT(gbc.pc(), 0xd2ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2c9), 0x5a);
        // 5A 0153
        gbc.setState(0x330c, 0xa138, 0x7e10, 0xb7e8, 0x56dd, 0xedcb, 0x0, 0x1);
        gbc.writeMem(0x330c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa138);
        EXPECT(gbc.pc(), 0x330d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0154
        gbc.setState(0xb4fe, 0x3cbd, 0xd040, 0x78dd, 0x1300, 0x4ab6, 0x0, 0x0);
        gbc.writeMem(0xb4fe, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3cbd);
        EXPECT(gbc.pc(), 0xb4ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4fe), 0x5a);
        // 5A 0155
        gbc.setState(0x4bef, 0xdf82, 0x7b40, 0x9fd2, 0xa02c, 0xca2b, 0x1, 0x1);
        gbc.writeMem(0x4bef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdf82);
        EXPECT(gbc.pc(), 0x4bf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0156
        gbc.setState(0x8056, 0xc51e, 0x3e20, 0xae05, 0x18cf, 0x7673, 0x0, 0x0);
        gbc.writeMem(0x8056, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc51e);
        EXPECT(gbc.pc(), 0x8057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8056), 0x5a);
        // 5A 0158
        gbc.setState(0x4605, 0xa160, 0x1450, 0xed15, 0xb46d, 0xfb7b, 0x1, 0x1);
        gbc.writeMem(0x4605, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa160);
        EXPECT(gbc.pc(), 0x4606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0159
        gbc.setState(0x5a7, 0x4c73, 0x2d20, 0x4c9f, 0x5300, 0xd595, 0x1, 0x0);
        gbc.writeMem(0x5a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4c73);
        EXPECT(gbc.pc(), 0x5a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 015A
        gbc.setState(0x943, 0xd4c2, 0xf540, 0x2e81, 0xd3d4, 0x1b7f, 0x0, 0x1);
        gbc.writeMem(0x943, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd4c2);
        EXPECT(gbc.pc(), 0x944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 015B
        gbc.setState(0x8a7d, 0x4979, 0xdf30, 0xb195, 0x4220, 0xac53, 0x0, 0x0);
        gbc.writeMem(0x8a7d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4979);
        EXPECT(gbc.pc(), 0x8a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a7d), 0x5a);
        // 5A 015C
        gbc.setState(0x76dc, 0xf0ac, 0xed90, 0x25b7, 0x4704, 0x5a73, 0x1, 0x0);
        gbc.writeMem(0x76dc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xf0ac);
        EXPECT(gbc.pc(), 0x76dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 015D
        gbc.setState(0x8b6d, 0x5638, 0xdbb0, 0xe2bf, 0x6e21, 0x9a5e, 0x1, 0x1);
        gbc.writeMem(0x8b6d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5638);
        EXPECT(gbc.pc(), 0x8b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b6d), 0x5a);
        // 5A 015E
        gbc.setState(0x95ea, 0x233c, 0xf690, 0x871c, 0xbad0, 0x4201, 0x0, 0x1);
        gbc.writeMem(0x95ea, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x233c);
        EXPECT(gbc.pc(), 0x95eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ea), 0x5a);
        // 5A 015F
        gbc.setState(0xa182, 0xa20b, 0x8ef0, 0xea53, 0xd6f4, 0x94e1, 0x1, 0x0);
        gbc.writeMem(0xa182, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa20b);
        EXPECT(gbc.pc(), 0xa183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa182), 0x5a);
        // 5A 0160
        gbc.setState(0xdf01, 0xc353, 0x99f0, 0xf125, 0x3e1a, 0x306d, 0x0, 0x1);
        gbc.writeMem(0xdf01, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc353);
        EXPECT(gbc.pc(), 0xdf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf01), 0x5a);
        // 5A 0161
        gbc.setState(0x31a7, 0x9164, 0x8f50, 0x5023, 0xb976, 0x74db, 0x0, 0x1);
        gbc.writeMem(0x31a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9164);
        EXPECT(gbc.pc(), 0x31a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0162
        gbc.setState(0x3433, 0x5614, 0x4ee0, 0x669d, 0x7518, 0xc22f, 0x0, 0x0);
        gbc.writeMem(0x3433, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5614);
        EXPECT(gbc.pc(), 0x3434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0163
        gbc.setState(0x6f38, 0xd26b, 0x4c70, 0xb2b3, 0xb1fa, 0x7c4a, 0x1, 0x0);
        gbc.writeMem(0x6f38, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd26b);
        EXPECT(gbc.pc(), 0x6f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0164
        gbc.setState(0x7475, 0xe9c8, 0x67b0, 0x9c4e, 0x8e9e, 0xa74b, 0x1, 0x1);
        gbc.writeMem(0x7475, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xe9c8);
        EXPECT(gbc.pc(), 0x7476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0165
        gbc.setState(0xd520, 0x71aa, 0x6770, 0xa01e, 0x25c3, 0x532b, 0x0, 0x1);
        gbc.writeMem(0xd520, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x71aa);
        EXPECT(gbc.pc(), 0xd521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd520), 0x5a);
        // 5A 0166
        gbc.setState(0x6837, 0xbbe6, 0x20c0, 0x42b8, 0x8c2a, 0x4feb, 0x0, 0x0);
        gbc.writeMem(0x6837, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbbe6);
        EXPECT(gbc.pc(), 0x6838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0167
        gbc.setState(0x3413, 0x2491, 0x6830, 0xfa23, 0xaad1, 0xac2f, 0x0, 0x0);
        gbc.writeMem(0x3413, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2491);
        EXPECT(gbc.pc(), 0x3414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0168
        gbc.setState(0xe1f6, 0x3fd4, 0x3600, 0xc9fd, 0xbf42, 0x4e25, 0x0, 0x0);
        gbc.writeMem(0xe1f6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3fd4);
        EXPECT(gbc.pc(), 0xe1f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f6), 0x5a);
        // 5A 0169
        gbc.setState(0x2933, 0x93a2, 0xb810, 0x62d5, 0x79c7, 0x96e1, 0x0, 0x1);
        gbc.writeMem(0x2933, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x93a2);
        EXPECT(gbc.pc(), 0x2934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 016A
        gbc.setState(0x232d, 0xde21, 0xfd20, 0x3595, 0x7d6b, 0x4fc5, 0x0, 0x1);
        gbc.writeMem(0x232d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xde21);
        EXPECT(gbc.pc(), 0x232e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 016B
        gbc.setState(0xe1be, 0x128c, 0x7160, 0x535d, 0xfe71, 0x178f, 0x0, 0x1);
        gbc.writeMem(0xe1be, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x128c);
        EXPECT(gbc.pc(), 0xe1bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1be), 0x5a);
        // 5A 016C
        gbc.setState(0x54af, 0x6ee1, 0xbd10, 0x42, 0x8656, 0x18d8, 0x1, 0x1);
        gbc.writeMem(0x54af, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6ee1);
        EXPECT(gbc.pc(), 0x54b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 016D
        gbc.setState(0xb8f2, 0x802f, 0xc060, 0xd87, 0x6aee, 0x826e, 0x1, 0x1);
        gbc.writeMem(0xb8f2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x802f);
        EXPECT(gbc.pc(), 0xb8f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f2), 0x5a);
        // 5A 016E
        gbc.setState(0xb890, 0x90cb, 0x9a10, 0x33a6, 0x9095, 0x5cef, 0x1, 0x0);
        gbc.writeMem(0xb890, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x90cb);
        EXPECT(gbc.pc(), 0xb891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb890), 0x5a);
        // 5A 016F
        gbc.setState(0x4397, 0x990d, 0xe2e0, 0x4f40, 0x5edb, 0xc7f9, 0x0, 0x0);
        gbc.writeMem(0x4397, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x990d);
        EXPECT(gbc.pc(), 0x4398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0170
        gbc.setState(0x58f6, 0x3483, 0xf480, 0xdf1c, 0x8da7, 0x697e, 0x1, 0x1);
        gbc.writeMem(0x58f6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3483);
        EXPECT(gbc.pc(), 0x58f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0171
        gbc.setState(0xa4df, 0x287a, 0xb570, 0x8a14, 0xc688, 0x911e, 0x0, 0x1);
        gbc.writeMem(0xa4df, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x287a);
        EXPECT(gbc.pc(), 0xa4e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4df), 0x5a);
        // 5A 0172
        gbc.setState(0x9bcd, 0x45bc, 0x6120, 0x225e, 0xeea, 0xf21b, 0x0, 0x0);
        gbc.writeMem(0x9bcd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x45bc);
        EXPECT(gbc.pc(), 0x9bce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bcd), 0x5a);
        // 5A 0173
        gbc.setState(0x5d72, 0x30b, 0xf470, 0x9e28, 0x4719, 0xb9bb, 0x0, 0x0);
        gbc.writeMem(0x5d72, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x30b);
        EXPECT(gbc.pc(), 0x5d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0174
        gbc.setState(0x3b4f, 0x4e1a, 0x5ca0, 0xfea9, 0x45ed, 0x85fa, 0x0, 0x0);
        gbc.writeMem(0x3b4f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x4e1a);
        EXPECT(gbc.pc(), 0x3b50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0175
        gbc.setState(0x5af4, 0x1da7, 0x55a0, 0x55ef, 0x5c09, 0x2ca2, 0x1, 0x0);
        gbc.writeMem(0x5af4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1da7);
        EXPECT(gbc.pc(), 0x5af5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0176
        gbc.setState(0xa153, 0xd528, 0x8730, 0x217b, 0x831e, 0xa017, 0x1, 0x1);
        gbc.writeMem(0xa153, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xd528);
        EXPECT(gbc.pc(), 0xa154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa153), 0x5a);
        // 5A 0177
        gbc.setState(0x9d8c, 0xffe2, 0x2850, 0xa4d9, 0x7233, 0x2b03, 0x0, 0x1);
        gbc.writeMem(0x9d8c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xffe2);
        EXPECT(gbc.pc(), 0x9d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8c), 0x5a);
        // 5A 0178
        gbc.setState(0xad82, 0x3b8b, 0x38c0, 0xee68, 0xf632, 0xf564, 0x0, 0x0);
        gbc.writeMem(0xad82, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3b8b);
        EXPECT(gbc.pc(), 0xad83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad82), 0x5a);
        // 5A 0179
        gbc.setState(0xb084, 0x4998, 0x4a30, 0x1216, 0x809b, 0x1bbe, 0x0, 0x1);
        gbc.writeMem(0xb084, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4998);
        EXPECT(gbc.pc(), 0xb085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb084), 0x5a);
        // 5A 017A
        gbc.setState(0x4171, 0xceb1, 0x8670, 0x75e1, 0xddc5, 0x3a61, 0x0, 0x1);
        gbc.writeMem(0x4171, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xceb1);
        EXPECT(gbc.pc(), 0x4172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 017B
        gbc.setState(0x105e, 0x6d3f, 0x4140, 0x32a2, 0xa3df, 0x2635, 0x0, 0x0);
        gbc.writeMem(0x105e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6d3f);
        EXPECT(gbc.pc(), 0x105f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 017C
        gbc.setState(0x8248, 0xa195, 0x9ae0, 0x6d08, 0x9626, 0xc5ab, 0x1, 0x1);
        gbc.writeMem(0x8248, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa195);
        EXPECT(gbc.pc(), 0x8249);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8248), 0x5a);
        // 5A 017D
        gbc.setState(0xb773, 0x8bf0, 0xeb20, 0xbad2, 0xec80, 0x4420, 0x1, 0x1);
        gbc.writeMem(0xb773, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8bf0);
        EXPECT(gbc.pc(), 0xb774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb773), 0x5a);
        // 5A 017E
        gbc.setState(0xc162, 0xfa19, 0x13b0, 0xc111, 0x2a25, 0xdfee, 0x0, 0x1);
        gbc.writeMem(0xc162, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfa19);
        EXPECT(gbc.pc(), 0xc163);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc162), 0x5a);
        // 5A 017F
        gbc.setState(0xba57, 0xeb54, 0x9590, 0x7ea1, 0x2e27, 0x1855, 0x0, 0x1);
        gbc.writeMem(0xba57, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeb54);
        EXPECT(gbc.pc(), 0xba58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba57), 0x5a);
        // 5A 0180
        gbc.setState(0xe288, 0x8e7d, 0x8340, 0x5c66, 0x5588, 0x72df, 0x0, 0x1);
        gbc.writeMem(0xe288, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8e7d);
        EXPECT(gbc.pc(), 0xe289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe288), 0x5a);
        // 5A 0181
        gbc.setState(0x4ded, 0x24f6, 0x9110, 0x8bc9, 0x7c20, 0x4543, 0x0, 0x1);
        gbc.writeMem(0x4ded, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x24f6);
        EXPECT(gbc.pc(), 0x4dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0182
        gbc.setState(0xa55c, 0xac03, 0x9400, 0x6efd, 0x4adf, 0xa673, 0x0, 0x1);
        gbc.writeMem(0xa55c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xac03);
        EXPECT(gbc.pc(), 0xa55d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa55c), 0x5a);
        // 5A 0183
        gbc.setState(0x4a23, 0x202d, 0x3170, 0xcc1f, 0x7411, 0xd3e9, 0x0, 0x1);
        gbc.writeMem(0x4a23, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x202d);
        EXPECT(gbc.pc(), 0x4a24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0184
        gbc.setState(0x8c9f, 0xd4d9, 0x82f0, 0xd314, 0x314d, 0x56ce, 0x1, 0x1);
        gbc.writeMem(0x8c9f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd4d9);
        EXPECT(gbc.pc(), 0x8ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9f), 0x5a);
        // 5A 0185
        gbc.setState(0x363c, 0x9bab, 0xbda0, 0x37a7, 0x5db2, 0x2f74, 0x0, 0x0);
        gbc.writeMem(0x363c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9bab);
        EXPECT(gbc.pc(), 0x363d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0186
        gbc.setState(0x2fc3, 0xb83c, 0xd820, 0x5e84, 0xc7c2, 0x1ad3, 0x1, 0x0);
        gbc.writeMem(0x2fc3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb83c);
        EXPECT(gbc.pc(), 0x2fc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0187
        gbc.setState(0x9b58, 0x5db4, 0x990, 0x366d, 0x3c10, 0xe29, 0x1, 0x0);
        gbc.writeMem(0x9b58, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5db4);
        EXPECT(gbc.pc(), 0x9b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b58), 0x5a);
        // 5A 0188
        gbc.setState(0xbaf1, 0xf6b3, 0x6690, 0x417f, 0x4e03, 0x4940, 0x1, 0x0);
        gbc.writeMem(0xbaf1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf6b3);
        EXPECT(gbc.pc(), 0xbaf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf1), 0x5a);
        // 5A 0189
        gbc.setState(0xbf2, 0x4b5a, 0x6630, 0x1ddb, 0x6226, 0x8d88, 0x0, 0x1);
        gbc.writeMem(0xbf2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4b5a);
        EXPECT(gbc.pc(), 0xbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 018A
        gbc.setState(0x7071, 0x4936, 0x3f20, 0x7e6, 0x8784, 0xc53a, 0x0, 0x1);
        gbc.writeMem(0x7071, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4936);
        EXPECT(gbc.pc(), 0x7072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 018B
        gbc.setState(0x701d, 0x4233, 0x4870, 0x4673, 0x9285, 0x1cb9, 0x0, 0x1);
        gbc.writeMem(0x701d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4233);
        EXPECT(gbc.pc(), 0x701e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 018C
        gbc.setState(0x79f, 0x499b, 0x94d0, 0xf5f6, 0xc66c, 0xfec1, 0x0, 0x1);
        gbc.writeMem(0x79f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x499b);
        EXPECT(gbc.pc(), 0x7a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 018D
        gbc.setState(0x759a, 0xef6d, 0x1210, 0xf152, 0x9772, 0xaaed, 0x1, 0x1);
        gbc.writeMem(0x759a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xef6d);
        EXPECT(gbc.pc(), 0x759b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 018E
        gbc.setState(0x165c, 0x9cd0, 0x8590, 0xd3c4, 0xd701, 0x25a7, 0x0, 0x1);
        gbc.writeMem(0x165c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9cd0);
        EXPECT(gbc.pc(), 0x165d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 018F
        gbc.setState(0x31ca, 0x529f, 0x7d70, 0x7f61, 0x7f4c, 0xbeb, 0x0, 0x1);
        gbc.writeMem(0x31ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x529f);
        EXPECT(gbc.pc(), 0x31cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0190
        gbc.setState(0x52de, 0xf480, 0x1ac0, 0xe690, 0xeff5, 0xb49f, 0x0, 0x1);
        gbc.writeMem(0x52de, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf480);
        EXPECT(gbc.pc(), 0x52df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0191
        gbc.setState(0x94c5, 0xc189, 0x4fd0, 0xd40e, 0xeae3, 0x42c6, 0x1, 0x0);
        gbc.writeMem(0x94c5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc189);
        EXPECT(gbc.pc(), 0x94c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c5), 0x5a);
        // 5A 0192
        gbc.setState(0xe9c, 0xa1e0, 0x2b20, 0x5411, 0x8d35, 0xee3, 0x0, 0x1);
        gbc.writeMem(0xe9c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa1e0);
        EXPECT(gbc.pc(), 0xe9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0193
        gbc.setState(0x821f, 0xfa90, 0xa7c0, 0xc305, 0x505e, 0x9e24, 0x0, 0x1);
        gbc.writeMem(0x821f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfa90);
        EXPECT(gbc.pc(), 0x8220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x821f), 0x5a);
        // 5A 0194
        gbc.setState(0x509a, 0xaded, 0xe50, 0xa81f, 0x63aa, 0x305d, 0x0, 0x0);
        gbc.writeMem(0x509a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaded);
        EXPECT(gbc.pc(), 0x509b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0195
        gbc.setState(0x1775, 0x78df, 0x5730, 0xb178, 0xa7f, 0x3a0c, 0x0, 0x1);
        gbc.writeMem(0x1775, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x78df);
        EXPECT(gbc.pc(), 0x1776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0196
        gbc.setState(0x9b2f, 0x6f2f, 0xdf40, 0xda19, 0x3d, 0x5cb5, 0x0, 0x0);
        gbc.writeMem(0x9b2f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x6f2f);
        EXPECT(gbc.pc(), 0x9b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b2f), 0x5a);
        // 5A 0197
        gbc.setState(0x7d07, 0xaa0, 0x9de0, 0x8716, 0xbfee, 0x618, 0x0, 0x0);
        gbc.writeMem(0x7d07, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xaa0);
        EXPECT(gbc.pc(), 0x7d08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0198
        gbc.setState(0xc6ca, 0x5017, 0xcc70, 0xc1aa, 0xdd74, 0x80d8, 0x1, 0x0);
        gbc.writeMem(0xc6ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5017);
        EXPECT(gbc.pc(), 0xc6cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ca), 0x5a);
        // 5A 0199
        gbc.setState(0x8a2b, 0x914d, 0xce00, 0xceb, 0x690b, 0x5cbd, 0x0, 0x0);
        gbc.writeMem(0x8a2b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x914d);
        EXPECT(gbc.pc(), 0x8a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a2b), 0x5a);
        // 5A 019A
        gbc.setState(0xe870, 0xe50, 0xe170, 0x2783, 0xcc20, 0x8992, 0x0, 0x1);
        gbc.writeMem(0xe870, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe50);
        EXPECT(gbc.pc(), 0xe871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe870), 0x5a);
        // 5A 019B
        gbc.setState(0x99a0, 0xa11e, 0xa230, 0xbe89, 0x963, 0xb7, 0x1, 0x0);
        gbc.writeMem(0x99a0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa11e);
        EXPECT(gbc.pc(), 0x99a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a0), 0x5a);
        // 5A 019C
        gbc.setState(0xe81, 0x88aa, 0x9580, 0x3018, 0x3655, 0x2ee9, 0x1, 0x0);
        gbc.writeMem(0xe81, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0xe82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 019D
        gbc.setState(0xcad2, 0x9568, 0xeb50, 0x123b, 0x19e, 0x76d0, 0x1, 0x1);
        gbc.writeMem(0xcad2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9568);
        EXPECT(gbc.pc(), 0xcad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcad2), 0x5a);
        // 5A 019F
        gbc.setState(0x81e6, 0x1020, 0xe510, 0x3bf6, 0x864a, 0x928e, 0x0, 0x0);
        gbc.writeMem(0x81e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1020);
        EXPECT(gbc.pc(), 0x81e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e6), 0x5a);
        // 5A 01A1
        gbc.setState(0x5c1, 0x493, 0xe750, 0xd702, 0xdf0a, 0xec9d, 0x0, 0x1);
        gbc.writeMem(0x5c1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x493);
        EXPECT(gbc.pc(), 0x5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01A2
        gbc.setState(0x9d19, 0x8afc, 0x61b0, 0x47ba, 0x8978, 0x6a78, 0x1, 0x1);
        gbc.writeMem(0x9d19, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x8afc);
        EXPECT(gbc.pc(), 0x9d1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d19), 0x5a);
        // 5A 01A3
        gbc.setState(0x15ea, 0xe34f, 0x7130, 0x48d6, 0x887e, 0xfa1a, 0x0, 0x0);
        gbc.writeMem(0x15ea, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe34f);
        EXPECT(gbc.pc(), 0x15eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01A4
        gbc.setState(0x6a97, 0xb8e6, 0x5c30, 0xe7f4, 0x205, 0xeecc, 0x1, 0x1);
        gbc.writeMem(0x6a97, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb8e6);
        EXPECT(gbc.pc(), 0x6a98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01A5
        gbc.setState(0x5a19, 0xa8e1, 0x2ee0, 0xaff3, 0xbb68, 0xcd0, 0x0, 0x1);
        gbc.writeMem(0x5a19, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa8e1);
        EXPECT(gbc.pc(), 0x5a1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01A6
        gbc.setState(0x4e6, 0x9cd7, 0xe090, 0xe20f, 0x98ac, 0x3368, 0x1, 0x0);
        gbc.writeMem(0x4e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9cd7);
        EXPECT(gbc.pc(), 0x4e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01A7
        gbc.setState(0x38d0, 0x4de1, 0x34b0, 0xa79d, 0x820, 0x6e05, 0x1, 0x0);
        gbc.writeMem(0x38d0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4de1);
        EXPECT(gbc.pc(), 0x38d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01A8
        gbc.setState(0xd3d0, 0x3db0, 0xcc10, 0xeeae, 0xf255, 0x7b3b, 0x0, 0x0);
        gbc.writeMem(0xd3d0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3db0);
        EXPECT(gbc.pc(), 0xd3d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3d0), 0x5a);
        // 5A 01A9
        gbc.setState(0xfef, 0x102d, 0xf380, 0xc433, 0x51ad, 0x9226, 0x0, 0x0);
        gbc.writeMem(0xfef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x102d);
        EXPECT(gbc.pc(), 0xff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01AA
        gbc.setState(0x8694, 0x71f0, 0x4cf0, 0xfc0b, 0x4d51, 0x1075, 0x0, 0x0);
        gbc.writeMem(0x8694, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x71f0);
        EXPECT(gbc.pc(), 0x8695);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8694), 0x5a);
        // 5A 01AB
        gbc.setState(0x6d63, 0xd71c, 0x3240, 0x6eea, 0xf9c, 0x4ff5, 0x1, 0x1);
        gbc.writeMem(0x6d63, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd71c);
        EXPECT(gbc.pc(), 0x6d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01AD
        gbc.setState(0x1a69, 0xdcc7, 0x9de0, 0x6a41, 0xd78c, 0x8275, 0x0, 0x0);
        gbc.writeMem(0x1a69, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdcc7);
        EXPECT(gbc.pc(), 0x1a6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01AF
        gbc.setState(0x6553, 0xcb10, 0x1a50, 0x8a01, 0xbb6c, 0x351d, 0x0, 0x1);
        gbc.writeMem(0x6553, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcb10);
        EXPECT(gbc.pc(), 0x6554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01B0
        gbc.setState(0x2587, 0xb981, 0xa060, 0x5546, 0x3be1, 0x63dc, 0x0, 0x0);
        gbc.writeMem(0x2587, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb981);
        EXPECT(gbc.pc(), 0x2588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01B1
        gbc.setState(0x301c, 0x5620, 0x2250, 0x16a6, 0x620e, 0x30b1, 0x0, 0x1);
        gbc.writeMem(0x301c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5620);
        EXPECT(gbc.pc(), 0x301d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01B2
        gbc.setState(0x69f5, 0xa427, 0x74f0, 0x292, 0xf202, 0x8297, 0x1, 0x1);
        gbc.writeMem(0x69f5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa427);
        EXPECT(gbc.pc(), 0x69f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01B3
        gbc.setState(0x30db, 0x2f56, 0xa470, 0x17c8, 0xcc06, 0xe502, 0x0, 0x0);
        gbc.writeMem(0x30db, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2f56);
        EXPECT(gbc.pc(), 0x30dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01B4
        gbc.setState(0x2074, 0x351d, 0x8ee0, 0x81d0, 0xae11, 0x5d91, 0x0, 0x0);
        gbc.writeMem(0x2074, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x351d);
        EXPECT(gbc.pc(), 0x2075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01B5
        gbc.setState(0x9eb5, 0x1620, 0x6480, 0xbe20, 0x95aa, 0x7536, 0x0, 0x1);
        gbc.writeMem(0x9eb5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1620);
        EXPECT(gbc.pc(), 0x9eb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb5), 0x5a);
        // 5A 01B6
        gbc.setState(0x61d5, 0xf6c0, 0xe5b0, 0x1ce4, 0x5916, 0x5f70, 0x1, 0x0);
        gbc.writeMem(0x61d5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf6c0);
        EXPECT(gbc.pc(), 0x61d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01B8
        gbc.setState(0xeeb8, 0x9770, 0x3a40, 0x33d9, 0x5fc2, 0xbddf, 0x0, 0x0);
        gbc.writeMem(0xeeb8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9770);
        EXPECT(gbc.pc(), 0xeeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb8), 0x5a);
        // 5A 01B9
        gbc.setState(0x773f, 0xe70f, 0x81d0, 0x2832, 0x6459, 0x98db, 0x1, 0x1);
        gbc.writeMem(0x773f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe70f);
        EXPECT(gbc.pc(), 0x7740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01BA
        gbc.setState(0x5806, 0xa1e, 0x3460, 0x454e, 0xf1b7, 0xa930, 0x1, 0x1);
        gbc.writeMem(0x5806, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa1e);
        EXPECT(gbc.pc(), 0x5807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01BB
        gbc.setState(0x51f8, 0x9129, 0xc6a0, 0xb359, 0xf13c, 0xeb, 0x1, 0x0);
        gbc.writeMem(0x51f8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9129);
        EXPECT(gbc.pc(), 0x51f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01BC
        gbc.setState(0xb980, 0xdc79, 0x3940, 0xee8a, 0xd023, 0x723e, 0x1, 0x0);
        gbc.writeMem(0xb980, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xdc79);
        EXPECT(gbc.pc(), 0xb981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb980), 0x5a);
        // 5A 01BD
        gbc.setState(0xad15, 0xffa7, 0x890, 0x540a, 0x8da2, 0x89b, 0x0, 0x1);
        gbc.writeMem(0xad15, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xffa7);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad15), 0x5a);
        // 5A 01BE
        gbc.setState(0xb5bb, 0xed71, 0x8450, 0xc992, 0x8868, 0xfda5, 0x1, 0x0);
        gbc.writeMem(0xb5bb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xed71);
        EXPECT(gbc.pc(), 0xb5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5bb), 0x5a);
        // 5A 01BF
        gbc.setState(0x5136, 0xe05e, 0x45e0, 0xfabf, 0x8d64, 0xe60a, 0x0, 0x1);
        gbc.writeMem(0x5136, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe05e);
        EXPECT(gbc.pc(), 0x5137);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01C0
        gbc.setState(0x3bdc, 0x7f17, 0xa420, 0xf315, 0xc99e, 0x7139, 0x0, 0x0);
        gbc.writeMem(0x3bdc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7f17);
        EXPECT(gbc.pc(), 0x3bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01C1
        gbc.setState(0x4084, 0xf7d2, 0xe9b0, 0xb660, 0x5de0, 0x20ae, 0x0, 0x0);
        gbc.writeMem(0x4084, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf7d2);
        EXPECT(gbc.pc(), 0x4085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01C2
        gbc.setState(0x98b2, 0x2568, 0x9fc0, 0x20cb, 0xa9fd, 0x9fbd, 0x1, 0x1);
        gbc.writeMem(0x98b2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2568);
        EXPECT(gbc.pc(), 0x98b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b2), 0x5a);
        // 5A 01C3
        gbc.setState(0xe061, 0xec5d, 0x5530, 0x3472, 0x3c3e, 0x8ff6, 0x0, 0x0);
        gbc.writeMem(0xe061, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xec5d);
        EXPECT(gbc.pc(), 0xe062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe061), 0x5a);
        // 5A 01C4
        gbc.setState(0x455, 0xe3d, 0x61b0, 0x93c7, 0x8858, 0xae9a, 0x0, 0x1);
        gbc.writeMem(0x455, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe3d);
        EXPECT(gbc.pc(), 0x456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01C5
        gbc.setState(0xdea5, 0xae95, 0x2a60, 0x807d, 0xce5e, 0xd9ff, 0x0, 0x1);
        gbc.writeMem(0xdea5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xae95);
        EXPECT(gbc.pc(), 0xdea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea5), 0x5a);
        // 5A 01C6
        gbc.setState(0x17b0, 0x2962, 0x2e20, 0x4bf4, 0x52ed, 0xd687, 0x1, 0x1);
        gbc.writeMem(0x17b0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x2962);
        EXPECT(gbc.pc(), 0x17b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01C7
        gbc.setState(0x392, 0xfed8, 0xbf30, 0xd9c6, 0xa64c, 0xe8, 0x1, 0x0);
        gbc.writeMem(0x392, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xfed8);
        EXPECT(gbc.pc(), 0x393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01C8
        gbc.setState(0x3e0, 0x2773, 0x5fd0, 0xff2, 0x2fcd, 0x6938, 0x0, 0x0);
        gbc.writeMem(0x3e0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2773);
        EXPECT(gbc.pc(), 0x3e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01C9
        gbc.setState(0x7e12, 0x91cd, 0xe050, 0x603, 0xf6ee, 0x608e, 0x0, 0x1);
        gbc.writeMem(0x7e12, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x91cd);
        EXPECT(gbc.pc(), 0x7e13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01CA
        gbc.setState(0xd0af, 0xe25a, 0x7190, 0xdfa5, 0xdef1, 0xa1b8, 0x1, 0x0);
        gbc.writeMem(0xd0af, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe25a);
        EXPECT(gbc.pc(), 0xd0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0af), 0x5a);
        // 5A 01CB
        gbc.setState(0x7f51, 0xd528, 0x26e0, 0xd8e6, 0x43b6, 0x53a9, 0x0, 0x0);
        gbc.writeMem(0x7f51, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd528);
        EXPECT(gbc.pc(), 0x7f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01CC
        gbc.setState(0x8bc5, 0x3725, 0xc860, 0xe1c8, 0xab5b, 0x56bf, 0x1, 0x1);
        gbc.writeMem(0x8bc5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3725);
        EXPECT(gbc.pc(), 0x8bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc5), 0x5a);
        // 5A 01CD
        gbc.setState(0x76e6, 0x8b77, 0x41c0, 0x394e, 0xba07, 0x8f9b, 0x0, 0x0);
        gbc.writeMem(0x76e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x8b77);
        EXPECT(gbc.pc(), 0x76e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01CE
        gbc.setState(0xb4a4, 0xefd8, 0x2010, 0xcc96, 0xda03, 0xb4fe, 0x1, 0x1);
        gbc.writeMem(0xb4a4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xefd8);
        EXPECT(gbc.pc(), 0xb4a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4a4), 0x5a);
        // 5A 01CF
        gbc.setState(0x8abc, 0x4c63, 0x49c0, 0x579a, 0x12f5, 0x3e5d, 0x1, 0x0);
        gbc.writeMem(0x8abc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4c63);
        EXPECT(gbc.pc(), 0x8abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8abc), 0x5a);
        // 5A 01D0
        gbc.setState(0x597c, 0x90be, 0x7dc0, 0x2f6d, 0x8717, 0xdfdf, 0x1, 0x0);
        gbc.writeMem(0x597c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x90be);
        EXPECT(gbc.pc(), 0x597d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01D1
        gbc.setState(0xdb57, 0xbb2c, 0xff60, 0xd20b, 0x7d54, 0x2ced, 0x0, 0x1);
        gbc.writeMem(0xdb57, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xbb2c);
        EXPECT(gbc.pc(), 0xdb58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb57), 0x5a);
        // 5A 01D2
        gbc.setState(0xb196, 0xac6c, 0xdbf0, 0x783d, 0x6b35, 0x9f0b, 0x1, 0x0);
        gbc.writeMem(0xb196, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xac6c);
        EXPECT(gbc.pc(), 0xb197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb196), 0x5a);
        // 5A 01D3
        gbc.setState(0x3f08, 0x45b1, 0x6530, 0x90aa, 0x66e5, 0xc9ff, 0x1, 0x1);
        gbc.writeMem(0x3f08, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x45b1);
        EXPECT(gbc.pc(), 0x3f09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01D4
        gbc.setState(0x46ca, 0x508c, 0x92d0, 0x81cd, 0x46e6, 0xf0b7, 0x0, 0x0);
        gbc.writeMem(0x46ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x508c);
        EXPECT(gbc.pc(), 0x46cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01D5
        gbc.setState(0x927c, 0x2092, 0xc9f0, 0x5e1c, 0x1552, 0xb51, 0x1, 0x1);
        gbc.writeMem(0x927c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0x927d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x927c), 0x5a);
        // 5A 01D6
        gbc.setState(0xd196, 0xd46c, 0x1a0, 0x73cd, 0x48b2, 0x644d, 0x1, 0x1);
        gbc.writeMem(0xd196, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd46c);
        EXPECT(gbc.pc(), 0xd197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd196), 0x5a);
        // 5A 01D7
        gbc.setState(0x9fdd, 0xe583, 0x3d70, 0xfec7, 0xe978, 0xfa7a, 0x1, 0x1);
        gbc.writeMem(0x9fdd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe583);
        EXPECT(gbc.pc(), 0x9fde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fdd), 0x5a);
        // 5A 01D8
        gbc.setState(0x5737, 0x6b8a, 0x33e0, 0x5406, 0x6dc4, 0x2cdf, 0x0, 0x1);
        gbc.writeMem(0x5737, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6b8a);
        EXPECT(gbc.pc(), 0x5738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01D9
        gbc.setState(0x58f2, 0x9fb0, 0x1be0, 0x4da2, 0xca3a, 0x6ba6, 0x0, 0x1);
        gbc.writeMem(0x58f2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9fb0);
        EXPECT(gbc.pc(), 0x58f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01DA
        gbc.setState(0xcb54, 0x663, 0x9c70, 0xb033, 0x1bee, 0x9a27, 0x1, 0x1);
        gbc.writeMem(0xcb54, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x663);
        EXPECT(gbc.pc(), 0xcb55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb54), 0x5a);
        // 5A 01DB
        gbc.setState(0x4b5a, 0xf, 0xab80, 0xccee, 0xe6b9, 0x972a, 0x0, 0x1);
        gbc.writeMem(0x4b5a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf);
        EXPECT(gbc.pc(), 0x4b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01DC
        gbc.setState(0xde3f, 0x2eec, 0x7bc0, 0x46b0, 0x2c98, 0x7d60, 0x0, 0x1);
        gbc.writeMem(0xde3f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2eec);
        EXPECT(gbc.pc(), 0xde40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde3f), 0x5a);
        // 5A 01DD
        gbc.setState(0x26d9, 0xda52, 0xdd90, 0x1f6c, 0x7747, 0x7a23, 0x1, 0x0);
        gbc.writeMem(0x26d9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xda52);
        EXPECT(gbc.pc(), 0x26da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01DE
        gbc.setState(0xb16b, 0xc704, 0xb650, 0xaf58, 0x5dab, 0xf804, 0x0, 0x1);
        gbc.writeMem(0xb16b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc704);
        EXPECT(gbc.pc(), 0xb16c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb16b), 0x5a);
        // 5A 01DF
        gbc.setState(0x367e, 0xb55e, 0xecb0, 0xecdf, 0xb237, 0xc0d2, 0x0, 0x0);
        gbc.writeMem(0x367e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb55e);
        EXPECT(gbc.pc(), 0x367f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01E0
        gbc.setState(0x8d28, 0xc735, 0x2760, 0xa7a0, 0x1038, 0x741f, 0x0, 0x1);
        gbc.writeMem(0x8d28, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc735);
        EXPECT(gbc.pc(), 0x8d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d28), 0x5a);
        // 5A 01E1
        gbc.setState(0x9fc5, 0xdd0f, 0x690, 0x5432, 0xa5b4, 0x487f, 0x1, 0x1);
        gbc.writeMem(0x9fc5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdd0f);
        EXPECT(gbc.pc(), 0x9fc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc5), 0x5a);
        // 5A 01E2
        gbc.setState(0x26a2, 0x2c63, 0xf350, 0x82a2, 0x1453, 0x7835, 0x1, 0x0);
        gbc.writeMem(0x26a2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2c63);
        EXPECT(gbc.pc(), 0x26a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01E3
        gbc.setState(0x3c35, 0xf78b, 0x48a0, 0xa86d, 0x4c0e, 0xeb74, 0x1, 0x0);
        gbc.writeMem(0x3c35, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf78b);
        EXPECT(gbc.pc(), 0x3c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01E5
        gbc.setState(0x41a5, 0x873a, 0xd320, 0x2b1f, 0x2e0b, 0x9012, 0x1, 0x0);
        gbc.writeMem(0x41a5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x873a);
        EXPECT(gbc.pc(), 0x41a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01E6
        gbc.setState(0xde7, 0xb531, 0x9190, 0xef9a, 0x6a96, 0x4008, 0x1, 0x0);
        gbc.writeMem(0xde7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb531);
        EXPECT(gbc.pc(), 0xde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01E7
        gbc.setState(0x3dab, 0xcf3f, 0xe550, 0x4c14, 0x15eb, 0xb7c5, 0x0, 0x0);
        gbc.writeMem(0x3dab, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcf3f);
        EXPECT(gbc.pc(), 0x3dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01E9
        gbc.setState(0xda8f, 0xd19a, 0x9bb0, 0x2feb, 0x2a47, 0xa698, 0x1, 0x1);
        gbc.writeMem(0xda8f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd19a);
        EXPECT(gbc.pc(), 0xda90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda8f), 0x5a);
        // 5A 01EA
        gbc.setState(0x5565, 0xaf60, 0x1390, 0x26f8, 0xa04d, 0x399b, 0x1, 0x0);
        gbc.writeMem(0x5565, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xaf60);
        EXPECT(gbc.pc(), 0x5566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01EB
        gbc.setState(0x2b8b, 0x9688, 0x8570, 0x47d9, 0x2fa6, 0x7152, 0x0, 0x1);
        gbc.writeMem(0x2b8b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9688);
        EXPECT(gbc.pc(), 0x2b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01ED
        gbc.setState(0x6b09, 0xfa1b, 0x81f0, 0x99db, 0xcd1a, 0xa71a, 0x1, 0x1);
        gbc.writeMem(0x6b09, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0x6b0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01EE
        gbc.setState(0x4a17, 0x76d3, 0x8ae0, 0xe2fa, 0x6d30, 0x553c, 0x0, 0x0);
        gbc.writeMem(0x4a17, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x76d3);
        EXPECT(gbc.pc(), 0x4a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01EF
        gbc.setState(0xece1, 0xc747, 0x2090, 0x5830, 0x4a2b, 0xc8b3, 0x1, 0x1);
        gbc.writeMem(0xece1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc747);
        EXPECT(gbc.pc(), 0xece2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xece1), 0x5a);
        // 5A 01F0
        gbc.setState(0x199b, 0x7c9e, 0x1fd0, 0x8cfa, 0xe265, 0xf364, 0x1, 0x1);
        gbc.writeMem(0x199b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7c9e);
        EXPECT(gbc.pc(), 0x199c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01F1
        gbc.setState(0xdc94, 0xebb, 0xe650, 0xd987, 0xe299, 0x87ab, 0x0, 0x0);
        gbc.writeMem(0xdc94, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xebb);
        EXPECT(gbc.pc(), 0xdc95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc94), 0x5a);
        // 5A 01F2
        gbc.setState(0xca7f, 0xe185, 0x15e0, 0x6dd3, 0x48ee, 0x5cbc, 0x0, 0x0);
        gbc.writeMem(0xca7f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe185);
        EXPECT(gbc.pc(), 0xca80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca7f), 0x5a);
        // 5A 01F3
        gbc.setState(0x9526, 0xfe1e, 0x1fe0, 0x2b07, 0x529f, 0xbf45, 0x1, 0x0);
        gbc.writeMem(0x9526, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfe1e);
        EXPECT(gbc.pc(), 0x9527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9526), 0x5a);
        // 5A 01F4
        gbc.setState(0x31c8, 0x9ab7, 0xad0, 0xcd9b, 0x2091, 0x227, 0x1, 0x0);
        gbc.writeMem(0x31c8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9ab7);
        EXPECT(gbc.pc(), 0x31c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01F5
        gbc.setState(0xc5c9, 0x7050, 0xb4b0, 0x11aa, 0x56, 0x4476, 0x1, 0x0);
        gbc.writeMem(0xc5c9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7050);
        EXPECT(gbc.pc(), 0xc5ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c9), 0x5a);
        // 5A 01F6
        gbc.setState(0x7b7e, 0x491f, 0xdba0, 0x3e74, 0xce01, 0xc2df, 0x0, 0x1);
        gbc.writeMem(0x7b7e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x491f);
        EXPECT(gbc.pc(), 0x7b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01F7
        gbc.setState(0x1724, 0x14e7, 0xb070, 0x774f, 0xaf2e, 0x8a57, 0x0, 0x0);
        gbc.writeMem(0x1724, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x14e7);
        EXPECT(gbc.pc(), 0x1725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 01F8
        gbc.setState(0x4766, 0x88ad, 0xa2e0, 0xd50e, 0xa3e5, 0x39d2, 0x1, 0x1);
        gbc.writeMem(0x4766, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x88ad);
        EXPECT(gbc.pc(), 0x4767);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 01F9
        gbc.setState(0x780c, 0xd844, 0xccc0, 0x768c, 0x4b15, 0xebe7, 0x1, 0x1);
        gbc.writeMem(0x780c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd844);
        EXPECT(gbc.pc(), 0x780d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01FA
        gbc.setState(0x6e2, 0xfa59, 0x9010, 0x755d, 0xff96, 0xf094, 0x1, 0x1);
        gbc.writeMem(0x6e2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfa59);
        EXPECT(gbc.pc(), 0x6e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01FB
        gbc.setState(0x592, 0x618b, 0xcd50, 0xeca9, 0x3dd0, 0x4f59, 0x0, 0x1);
        gbc.writeMem(0x592, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x618b);
        EXPECT(gbc.pc(), 0x593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 01FD
        gbc.setState(0x93ce, 0x6337, 0x5010, 0x8dfb, 0x34a6, 0x36c3, 0x1, 0x1);
        gbc.writeMem(0x93ce, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6337);
        EXPECT(gbc.pc(), 0x93cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ce), 0x5a);
        // 5A 01FE
        gbc.setState(0xf7c, 0xf7a6, 0xe580, 0xfc30, 0xaa23, 0x5593, 0x0, 0x0);
        gbc.writeMem(0xf7c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf7a6);
        EXPECT(gbc.pc(), 0xf7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 01FF
        gbc.setState(0x7618, 0xb05f, 0xfb30, 0x91d7, 0x72f8, 0x6140, 0x1, 0x1);
        gbc.writeMem(0x7618, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb05f);
        EXPECT(gbc.pc(), 0x7619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0200
        gbc.setState(0xb2a7, 0xd3d6, 0x2d70, 0x3f06, 0x82f8, 0x41de, 0x0, 0x0);
        gbc.writeMem(0xb2a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd3d6);
        EXPECT(gbc.pc(), 0xb2a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2a7), 0x5a);
        // 5A 0201
        gbc.setState(0x39c5, 0xc06a, 0xa050, 0x7ae4, 0x5a79, 0x8fc3, 0x0, 0x0);
        gbc.writeMem(0x39c5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc06a);
        EXPECT(gbc.pc(), 0x39c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0202
        gbc.setState(0xe7ad, 0x7aab, 0x8590, 0xfd39, 0xb42f, 0xf5e8, 0x0, 0x1);
        gbc.writeMem(0xe7ad, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7aab);
        EXPECT(gbc.pc(), 0xe7ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ad), 0x5a);
        // 5A 0203
        gbc.setState(0x571d, 0xd837, 0x94c0, 0xc237, 0xffc5, 0x7ba6, 0x1, 0x0);
        gbc.writeMem(0x571d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd837);
        EXPECT(gbc.pc(), 0x571e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0204
        gbc.setState(0xb84c, 0xb5a7, 0x5ed0, 0x536c, 0x56c4, 0x238e, 0x1, 0x0);
        gbc.writeMem(0xb84c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb5a7);
        EXPECT(gbc.pc(), 0xb84d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb84c), 0x5a);
        // 5A 0205
        gbc.setState(0xb7f6, 0xfb10, 0x2a20, 0x249d, 0x8ad9, 0x52b3, 0x0, 0x1);
        gbc.writeMem(0xb7f6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfb10);
        EXPECT(gbc.pc(), 0xb7f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f6), 0x5a);
        // 5A 0206
        gbc.setState(0x1faa, 0xaea6, 0xb640, 0x1d32, 0x9f3b, 0x7d3, 0x1, 0x1);
        gbc.writeMem(0x1faa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaea6);
        EXPECT(gbc.pc(), 0x1fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0207
        gbc.setState(0x1719, 0xde59, 0x7700, 0x6801, 0x1cc6, 0x6cdd, 0x0, 0x0);
        gbc.writeMem(0x1719, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xde59);
        EXPECT(gbc.pc(), 0x171a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0208
        gbc.setState(0xe205, 0x2a39, 0x64a0, 0x4ecd, 0x5a14, 0xd5b5, 0x0, 0x1);
        gbc.writeMem(0xe205, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2a39);
        EXPECT(gbc.pc(), 0xe206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe205), 0x5a);
        // 5A 0209
        gbc.setState(0x1683, 0x3448, 0x5700, 0x9f3, 0x39a0, 0xe000, 0x1, 0x1);
        gbc.writeMem(0x1683, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3448);
        EXPECT(gbc.pc(), 0x1684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 020A
        gbc.setState(0x22bc, 0x913a, 0xd480, 0x892b, 0xdb81, 0xf016, 0x0, 0x0);
        gbc.writeMem(0x22bc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x913a);
        EXPECT(gbc.pc(), 0x22bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 020B
        gbc.setState(0x2752, 0x2707, 0xf4a0, 0x5ce6, 0x8b00, 0x46e8, 0x0, 0x0);
        gbc.writeMem(0x2752, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2707);
        EXPECT(gbc.pc(), 0x2753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 020C
        gbc.setState(0xd7ce, 0x7c6c, 0x88e0, 0x343f, 0xe79c, 0x3aeb, 0x1, 0x1);
        gbc.writeMem(0xd7ce, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7c6c);
        EXPECT(gbc.pc(), 0xd7cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ce), 0x5a);
        // 5A 020D
        gbc.setState(0x5a12, 0x3897, 0xad80, 0xc9c2, 0xfd67, 0x1f5a, 0x1, 0x1);
        gbc.writeMem(0x5a12, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3897);
        EXPECT(gbc.pc(), 0x5a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 020E
        gbc.setState(0x1835, 0x60cd, 0xff20, 0x9088, 0x12ce, 0x10fc, 0x1, 0x1);
        gbc.writeMem(0x1835, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x60cd);
        EXPECT(gbc.pc(), 0x1836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 020F
        gbc.setState(0x2adf, 0xf5ac, 0x8ec0, 0x7418, 0x568b, 0x7015, 0x1, 0x1);
        gbc.writeMem(0x2adf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf5ac);
        EXPECT(gbc.pc(), 0x2ae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0210
        gbc.setState(0x2311, 0x5f6f, 0x93c0, 0xd533, 0x67e1, 0xb34, 0x0, 0x0);
        gbc.writeMem(0x2311, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5f6f);
        EXPECT(gbc.pc(), 0x2312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0211
        gbc.setState(0x7af, 0x1f24, 0xb540, 0x4e99, 0x594c, 0x764d, 0x0, 0x1);
        gbc.writeMem(0x7af, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1f24);
        EXPECT(gbc.pc(), 0x7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0212
        gbc.setState(0x481a, 0x983, 0x1840, 0x7c41, 0x44a3, 0xceef, 0x1, 0x1);
        gbc.writeMem(0x481a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x983);
        EXPECT(gbc.pc(), 0x481b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0213
        gbc.setState(0x2cd6, 0xb00b, 0x5f90, 0x2ecd, 0x4589, 0xa7ae, 0x0, 0x1);
        gbc.writeMem(0x2cd6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb00b);
        EXPECT(gbc.pc(), 0x2cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0214
        gbc.setState(0x864b, 0x33b8, 0xaa70, 0x46ca, 0xdb02, 0x67b7, 0x0, 0x0);
        gbc.writeMem(0x864b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x33b8);
        EXPECT(gbc.pc(), 0x864c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x864b), 0x5a);
        // 5A 0215
        gbc.setState(0x18b6, 0xc984, 0xc5e0, 0xcde0, 0x66e4, 0xfc1a, 0x1, 0x0);
        gbc.writeMem(0x18b6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc984);
        EXPECT(gbc.pc(), 0x18b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0216
        gbc.setState(0xb0cc, 0x447e, 0x62a0, 0x6c00, 0x6fb1, 0x3b96, 0x1, 0x0);
        gbc.writeMem(0xb0cc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x447e);
        EXPECT(gbc.pc(), 0xb0cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0cc), 0x5a);
        // 5A 0218
        gbc.setState(0xab6c, 0xd8e3, 0x7d70, 0xc672, 0x413d, 0x34f4, 0x1, 0x0);
        gbc.writeMem(0xab6c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd8e3);
        EXPECT(gbc.pc(), 0xab6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab6c), 0x5a);
        // 5A 0219
        gbc.setState(0x10ae, 0xcbdc, 0x3f30, 0x77cd, 0x9f3b, 0x6be2, 0x0, 0x0);
        gbc.writeMem(0x10ae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcbdc);
        EXPECT(gbc.pc(), 0x10af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 021A
        gbc.setState(0x98e6, 0xa5a6, 0xe630, 0x3b09, 0x4b0, 0xefe2, 0x0, 0x1);
        gbc.writeMem(0x98e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa5a6);
        EXPECT(gbc.pc(), 0x98e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e6), 0x5a);
        // 5A 021B
        gbc.setState(0x99b, 0xe5f7, 0x4850, 0x33f9, 0x4e01, 0xd30b, 0x0, 0x1);
        gbc.writeMem(0x99b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe5f7);
        EXPECT(gbc.pc(), 0x99c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 021C
        gbc.setState(0x1763, 0xd511, 0xcde0, 0x5741, 0xfae4, 0x745, 0x1, 0x1);
        gbc.writeMem(0x1763, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd511);
        EXPECT(gbc.pc(), 0x1764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 021D
        gbc.setState(0x3641, 0x4053, 0xfee0, 0x4440, 0xa1dd, 0x6613, 0x0, 0x1);
        gbc.writeMem(0x3641, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4053);
        EXPECT(gbc.pc(), 0x3642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 021E
        gbc.setState(0x52aa, 0xd37, 0xdaf0, 0x578e, 0xf64b, 0x55be, 0x1, 0x1);
        gbc.writeMem(0x52aa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd37);
        EXPECT(gbc.pc(), 0x52ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 021F
        gbc.setState(0x7032, 0x6c70, 0xfe30, 0x522d, 0xa774, 0x48ec, 0x0, 0x0);
        gbc.writeMem(0x7032, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6c70);
        EXPECT(gbc.pc(), 0x7033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0220
        gbc.setState(0xe61b, 0x26f5, 0x3580, 0x10cc, 0x9325, 0x160d, 0x1, 0x0);
        gbc.writeMem(0xe61b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x26f5);
        EXPECT(gbc.pc(), 0xe61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe61b), 0x5a);
        // 5A 0221
        gbc.setState(0x18e9, 0xc4e5, 0x8270, 0x672, 0xd313, 0xd7ce, 0x1, 0x0);
        gbc.writeMem(0x18e9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc4e5);
        EXPECT(gbc.pc(), 0x18ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0222
        gbc.setState(0x8071, 0xea02, 0x5800, 0x18a6, 0x1d2b, 0xfadf, 0x0, 0x1);
        gbc.writeMem(0x8071, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xea02);
        EXPECT(gbc.pc(), 0x8072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8071), 0x5a);
        // 5A 0223
        gbc.setState(0xb0c, 0xa45, 0x8780, 0xf338, 0xcbd0, 0xd4d8, 0x0, 0x1);
        gbc.writeMem(0xb0c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa45);
        EXPECT(gbc.pc(), 0xb0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0224
        gbc.setState(0x6724, 0x3f0c, 0x2f30, 0x2bff, 0x4439, 0x56d3, 0x0, 0x1);
        gbc.writeMem(0x6724, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3f0c);
        EXPECT(gbc.pc(), 0x6725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0225
        gbc.setState(0x700a, 0xf9eb, 0x17d0, 0xba22, 0xa7cf, 0x331f, 0x0, 0x0);
        gbc.writeMem(0x700a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf9eb);
        EXPECT(gbc.pc(), 0x700b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0226
        gbc.setState(0x2aeb, 0x272a, 0x1bd0, 0x9ec, 0x2fe1, 0x6a2c, 0x0, 0x1);
        gbc.writeMem(0x2aeb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x272a);
        EXPECT(gbc.pc(), 0x2aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0227
        gbc.setState(0xe7f, 0x75e7, 0x3a90, 0x7f55, 0x7b08, 0xc9a, 0x0, 0x1);
        gbc.writeMem(0xe7f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x75e7);
        EXPECT(gbc.pc(), 0xe80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0229
        gbc.setState(0x8dc, 0x65ba, 0xfcf0, 0xac78, 0x78cf, 0xcb28, 0x1, 0x1);
        gbc.writeMem(0x8dc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x65ba);
        EXPECT(gbc.pc(), 0x8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 022A
        gbc.setState(0xd9a0, 0x9a99, 0xaaf0, 0x1ca1, 0x5858, 0x395d, 0x1, 0x1);
        gbc.writeMem(0xd9a0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9a99);
        EXPECT(gbc.pc(), 0xd9a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9a0), 0x5a);
        // 5A 022B
        gbc.setState(0x9d8d, 0xe99e, 0x2af0, 0xcdae, 0x7ffe, 0x8fc8, 0x0, 0x1);
        gbc.writeMem(0x9d8d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe99e);
        EXPECT(gbc.pc(), 0x9d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8d), 0x5a);
        // 5A 022C
        gbc.setState(0x5ce6, 0x574a, 0xc820, 0xcd57, 0xbca7, 0x2dde, 0x1, 0x1);
        gbc.writeMem(0x5ce6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x574a);
        EXPECT(gbc.pc(), 0x5ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 022D
        gbc.setState(0xb014, 0xa31e, 0x3900, 0x407b, 0xaa61, 0x91dd, 0x0, 0x0);
        gbc.writeMem(0xb014, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa31e);
        EXPECT(gbc.pc(), 0xb015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb014), 0x5a);
        // 5A 022E
        gbc.setState(0x72bc, 0x51ca, 0xa2c0, 0x6054, 0xcdb1, 0x3654, 0x0, 0x0);
        gbc.writeMem(0x72bc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x51ca);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0230
        gbc.setState(0x3ea6, 0x8299, 0x94d0, 0xafb8, 0xb1ff, 0xb8c1, 0x0, 0x1);
        gbc.writeMem(0x3ea6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8299);
        EXPECT(gbc.pc(), 0x3ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0231
        gbc.setState(0x5d7a, 0x18e3, 0xb70, 0xb028, 0xd220, 0x7f39, 0x1, 0x0);
        gbc.writeMem(0x5d7a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x18e3);
        EXPECT(gbc.pc(), 0x5d7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0232
        gbc.setState(0xd501, 0x1169, 0x2670, 0xe5b9, 0xbe31, 0x99d7, 0x0, 0x0);
        gbc.writeMem(0xd501, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1169);
        EXPECT(gbc.pc(), 0xd502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd501), 0x5a);
        // 5A 0233
        gbc.setState(0x7ad5, 0x4c45, 0xd000, 0xb164, 0xaccd, 0x290c, 0x0, 0x1);
        gbc.writeMem(0x7ad5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4c45);
        EXPECT(gbc.pc(), 0x7ad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0234
        gbc.setState(0xce67, 0x5a2e, 0x3da0, 0x849c, 0xfa8b, 0xf14c, 0x0, 0x1);
        gbc.writeMem(0xce67, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5a2e);
        EXPECT(gbc.pc(), 0xce68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce67), 0x5a);
        // 5A 0235
        gbc.setState(0xa7aa, 0x5e8a, 0x7b0, 0xcb59, 0xc13d, 0x93b8, 0x0, 0x0);
        gbc.writeMem(0xa7aa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5e8a);
        EXPECT(gbc.pc(), 0xa7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7aa), 0x5a);
        // 5A 0236
        gbc.setState(0x8db, 0x8aee, 0x3760, 0xfb7a, 0x8a49, 0xbff8, 0x0, 0x0);
        gbc.writeMem(0x8db, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8aee);
        EXPECT(gbc.pc(), 0x8dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0237
        gbc.setState(0x60d6, 0xb554, 0xea10, 0x2e7d, 0x78fa, 0x8b07, 0x0, 0x1);
        gbc.writeMem(0x60d6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb554);
        EXPECT(gbc.pc(), 0x60d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0238
        gbc.setState(0x83a3, 0x3c21, 0xa320, 0xfde0, 0xf4b5, 0x630f, 0x1, 0x1);
        gbc.writeMem(0x83a3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3c21);
        EXPECT(gbc.pc(), 0x83a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a3), 0x5a);
        // 5A 0239
        gbc.setState(0xaad0, 0x2ec1, 0x4db0, 0x269, 0xc9d2, 0x278d, 0x1, 0x0);
        gbc.writeMem(0xaad0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2ec1);
        EXPECT(gbc.pc(), 0xaad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad0), 0x5a);
        // 5A 023A
        gbc.setState(0x68ef, 0xf763, 0x1e90, 0xa992, 0xf8f1, 0xe824, 0x1, 0x1);
        gbc.writeMem(0x68ef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf763);
        EXPECT(gbc.pc(), 0x68f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 023B
        gbc.setState(0x3efc, 0x47f1, 0xf340, 0xf1fb, 0x7179, 0xce7b, 0x0, 0x0);
        gbc.writeMem(0x3efc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x47f1);
        EXPECT(gbc.pc(), 0x3efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 023C
        gbc.setState(0x432b, 0x4add, 0xb0a0, 0xb734, 0xda5e, 0x43b, 0x1, 0x0);
        gbc.writeMem(0x432b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4add);
        EXPECT(gbc.pc(), 0x432c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 023D
        gbc.setState(0xee24, 0x2f9e, 0x29c0, 0x1fd5, 0xae42, 0x4e54, 0x0, 0x0);
        gbc.writeMem(0xee24, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2f9e);
        EXPECT(gbc.pc(), 0xee25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee24), 0x5a);
        // 5A 023E
        gbc.setState(0x2c3a, 0x2fde, 0xd180, 0xaf46, 0x1b4e, 0x601e, 0x0, 0x1);
        gbc.writeMem(0x2c3a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2fde);
        EXPECT(gbc.pc(), 0x2c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 023F
        gbc.setState(0x65ba, 0x5fec, 0xe700, 0x8750, 0x4c16, 0x4998, 0x0, 0x0);
        gbc.writeMem(0x65ba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5fec);
        EXPECT(gbc.pc(), 0x65bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0240
        gbc.setState(0x6465, 0x7461, 0x2cb0, 0xa192, 0x375a, 0xc455, 0x1, 0x1);
        gbc.writeMem(0x6465, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7461);
        EXPECT(gbc.pc(), 0x6466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0241
        gbc.setState(0xa358, 0x62fa, 0xbc20, 0x56d8, 0x7dd2, 0xa084, 0x0, 0x0);
        gbc.writeMem(0xa358, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x62fa);
        EXPECT(gbc.pc(), 0xa359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa358), 0x5a);
        // 5A 0242
        gbc.setState(0x1f5d, 0x699c, 0x8e30, 0x8e0, 0x1560, 0x268e, 0x0, 0x1);
        gbc.writeMem(0x1f5d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x699c);
        EXPECT(gbc.pc(), 0x1f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0243
        gbc.setState(0x99b7, 0xb186, 0x3f30, 0x4251, 0x3981, 0x162, 0x1, 0x0);
        gbc.writeMem(0x99b7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb186);
        EXPECT(gbc.pc(), 0x99b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99b7), 0x5a);
        // 5A 0244
        gbc.setState(0x1251, 0x3e17, 0xb820, 0x9df9, 0xcebb, 0xc4a, 0x0, 0x0);
        gbc.writeMem(0x1251, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3e17);
        EXPECT(gbc.pc(), 0x1252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0245
        gbc.setState(0xb739, 0x3f1a, 0xc6a0, 0x7a12, 0x2fc1, 0x3b93, 0x0, 0x1);
        gbc.writeMem(0xb739, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3f1a);
        EXPECT(gbc.pc(), 0xb73a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb739), 0x5a);
        // 5A 0246
        gbc.setState(0x8c2c, 0xd9d2, 0x6670, 0xe792, 0x9833, 0xb102, 0x1, 0x1);
        gbc.writeMem(0x8c2c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd9d2);
        EXPECT(gbc.pc(), 0x8c2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2c), 0x5a);
        // 5A 0247
        gbc.setState(0x5d88, 0xa938, 0x9c30, 0xe9b8, 0x7bc2, 0xdca7, 0x1, 0x0);
        gbc.writeMem(0x5d88, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa938);
        EXPECT(gbc.pc(), 0x5d89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0248
        gbc.setState(0xdd9a, 0x106e, 0xc450, 0xd051, 0x32cc, 0x1608, 0x0, 0x0);
        gbc.writeMem(0xdd9a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x106e);
        EXPECT(gbc.pc(), 0xdd9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9a), 0x5a);
        // 5A 0249
        gbc.setState(0xe11a, 0x9193, 0xd670, 0x22af, 0xe0d6, 0xbfe8, 0x0, 0x1);
        gbc.writeMem(0xe11a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9193);
        EXPECT(gbc.pc(), 0xe11b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe11a), 0x5a);
        // 5A 024A
        gbc.setState(0xa50d, 0x5de8, 0x1520, 0x89b, 0x88b5, 0x8c29, 0x1, 0x1);
        gbc.writeMem(0xa50d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5de8);
        EXPECT(gbc.pc(), 0xa50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa50d), 0x5a);
        // 5A 024B
        gbc.setState(0xad80, 0x41cf, 0x68a0, 0x35a9, 0xff4f, 0x7b3e, 0x0, 0x1);
        gbc.writeMem(0xad80, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x41cf);
        EXPECT(gbc.pc(), 0xad81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad80), 0x5a);
        // 5A 024C
        gbc.setState(0x2a62, 0x433f, 0x34c0, 0x8c22, 0x992c, 0x1f96, 0x1, 0x0);
        gbc.writeMem(0x2a62, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x433f);
        EXPECT(gbc.pc(), 0x2a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 024D
        gbc.setState(0x3023, 0xe3b2, 0x1dd0, 0x474d, 0x6293, 0x1d5d, 0x0, 0x1);
        gbc.writeMem(0x3023, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe3b2);
        EXPECT(gbc.pc(), 0x3024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 024E
        gbc.setState(0x1a67, 0xc98b, 0x4f60, 0x19a3, 0x5d91, 0x2bcb, 0x1, 0x0);
        gbc.writeMem(0x1a67, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc98b);
        EXPECT(gbc.pc(), 0x1a68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 024F
        gbc.setState(0x5e8f, 0xd2bd, 0xe190, 0xf324, 0x29ce, 0x8e2e, 0x1, 0x0);
        gbc.writeMem(0x5e8f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd2bd);
        EXPECT(gbc.pc(), 0x5e90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0250
        gbc.setState(0xc0ae, 0x61e0, 0x7730, 0x185, 0x887d, 0x4784, 0x1, 0x0);
        gbc.writeMem(0xc0ae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x61e0);
        EXPECT(gbc.pc(), 0xc0af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ae), 0x5a);
        // 5A 0251
        gbc.setState(0xa80f, 0x626d, 0x1f40, 0x6f27, 0xfabc, 0x42aa, 0x0, 0x1);
        gbc.writeMem(0xa80f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x626d);
        EXPECT(gbc.pc(), 0xa810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa80f), 0x5a);
        // 5A 0253
        gbc.setState(0xeae9, 0xfccf, 0x5430, 0x365d, 0x6d4b, 0xf152, 0x1, 0x0);
        gbc.writeMem(0xeae9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xfccf);
        EXPECT(gbc.pc(), 0xeaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae9), 0x5a);
        // 5A 0254
        gbc.setState(0x8789, 0xa1fb, 0x14b0, 0x4932, 0xd75e, 0xfff6, 0x1, 0x1);
        gbc.writeMem(0x8789, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa1fb);
        EXPECT(gbc.pc(), 0x878a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8789), 0x5a);
        // 5A 0255
        gbc.setState(0x2a60, 0xc34, 0x99c0, 0xc2d9, 0x53d5, 0xc294, 0x0, 0x1);
        gbc.writeMem(0x2a60, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xc34);
        EXPECT(gbc.pc(), 0x2a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0256
        gbc.setState(0xab8b, 0xc0e4, 0xf710, 0x8cbf, 0xe80d, 0x7a84, 0x0, 0x1);
        gbc.writeMem(0xab8b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc0e4);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8b), 0x5a);
        // 5A 0257
        gbc.setState(0x5a74, 0xc897, 0x8a60, 0xcba1, 0x36a7, 0xc0f7, 0x0, 0x1);
        gbc.writeMem(0x5a74, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc897);
        EXPECT(gbc.pc(), 0x5a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0258
        gbc.setState(0x2f81, 0x7eab, 0x50a0, 0x1e6b, 0x9508, 0xedf5, 0x0, 0x1);
        gbc.writeMem(0x2f81, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7eab);
        EXPECT(gbc.pc(), 0x2f82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0259
        gbc.setState(0xc762, 0xf720, 0x4b10, 0xefd2, 0xdb40, 0xf076, 0x1, 0x1);
        gbc.writeMem(0xc762, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf720);
        EXPECT(gbc.pc(), 0xc763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc762), 0x5a);
        // 5A 025A
        gbc.setState(0xaaf, 0xe13e, 0xfb0, 0x9e40, 0x90e2, 0xdc96, 0x0, 0x1);
        gbc.writeMem(0xaaf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe13e);
        EXPECT(gbc.pc(), 0xab0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 025B
        gbc.setState(0x99dd, 0x290a, 0x75b0, 0xb9aa, 0xe2ee, 0x9809, 0x1, 0x1);
        gbc.writeMem(0x99dd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x290a);
        EXPECT(gbc.pc(), 0x99de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99dd), 0x5a);
        // 5A 025C
        gbc.setState(0x1570, 0x8203, 0xc550, 0x6b3b, 0xe13e, 0xd552, 0x0, 0x1);
        gbc.writeMem(0x1570, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8203);
        EXPECT(gbc.pc(), 0x1571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 025D
        gbc.setState(0xe0ed, 0x5ca9, 0xec90, 0x1170, 0x3c24, 0xb4a1, 0x1, 0x0);
        gbc.writeMem(0xe0ed, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5ca9);
        EXPECT(gbc.pc(), 0xe0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ed), 0x5a);
        // 5A 025E
        gbc.setState(0x26e8, 0xe791, 0x4ce0, 0xcad0, 0xd640, 0xd21f, 0x0, 0x1);
        gbc.writeMem(0x26e8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe791);
        EXPECT(gbc.pc(), 0x26e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0260
        gbc.setState(0x2b2f, 0x8388, 0x5a0, 0xd57a, 0xd78b, 0xa346, 0x1, 0x0);
        gbc.writeMem(0x2b2f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8388);
        EXPECT(gbc.pc(), 0x2b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0261
        gbc.setState(0xb3f9, 0x8c31, 0x8340, 0x106c, 0xe79d, 0x2121, 0x0, 0x0);
        gbc.writeMem(0xb3f9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8c31);
        EXPECT(gbc.pc(), 0xb3fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f9), 0x5a);
        // 5A 0262
        gbc.setState(0xb54e, 0xa41c, 0xb730, 0x1d1a, 0x26d8, 0x2d65, 0x0, 0x1);
        gbc.writeMem(0xb54e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa41c);
        EXPECT(gbc.pc(), 0xb54f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb54e), 0x5a);
        // 5A 0263
        gbc.setState(0x33b3, 0x8eb1, 0xd880, 0xc89, 0xa6bb, 0x99dd, 0x1, 0x1);
        gbc.writeMem(0x33b3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8eb1);
        EXPECT(gbc.pc(), 0x33b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0264
        gbc.setState(0x63f0, 0x9109, 0xba0, 0x5dca, 0x12c7, 0x2f32, 0x0, 0x0);
        gbc.writeMem(0x63f0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9109);
        EXPECT(gbc.pc(), 0x63f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0265
        gbc.setState(0xc4f0, 0x7f3b, 0xa100, 0x5aa2, 0xf29b, 0x9693, 0x0, 0x1);
        gbc.writeMem(0xc4f0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7f3b);
        EXPECT(gbc.pc(), 0xc4f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f0), 0x5a);
        // 5A 0266
        gbc.setState(0x5466, 0xeedc, 0xf950, 0xe0fc, 0x93c5, 0x8505, 0x1, 0x0);
        gbc.writeMem(0x5466, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xeedc);
        EXPECT(gbc.pc(), 0x5467);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0267
        gbc.setState(0x69ca, 0xede0, 0x8300, 0x7980, 0x42e5, 0xa889, 0x0, 0x0);
        gbc.writeMem(0x69ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xede0);
        EXPECT(gbc.pc(), 0x69cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0268
        gbc.setState(0xbc0f, 0x32d, 0xec50, 0xcd9d, 0x1462, 0x1bc6, 0x0, 0x0);
        gbc.writeMem(0xbc0f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x32d);
        EXPECT(gbc.pc(), 0xbc10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc0f), 0x5a);
        // 5A 0269
        gbc.setState(0x94d4, 0x8f6c, 0x7110, 0xcc2f, 0xd5c3, 0xfece, 0x0, 0x0);
        gbc.writeMem(0x94d4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8f6c);
        EXPECT(gbc.pc(), 0x94d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94d4), 0x5a);
        // 5A 026A
        gbc.setState(0xa434, 0x5121, 0x2f60, 0x7aa, 0x6d3f, 0x5afc, 0x0, 0x1);
        gbc.writeMem(0xa434, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5121);
        EXPECT(gbc.pc(), 0xa435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa434), 0x5a);
        // 5A 026B
        gbc.setState(0x6a1d, 0x2d6f, 0xdfe0, 0xee7d, 0x8bf6, 0x911d, 0x1, 0x0);
        gbc.writeMem(0x6a1d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2d6f);
        EXPECT(gbc.pc(), 0x6a1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 026C
        gbc.setState(0x1870, 0x20ed, 0xda90, 0x62f9, 0x880f, 0x5fcb, 0x0, 0x0);
        gbc.writeMem(0x1870, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x20ed);
        EXPECT(gbc.pc(), 0x1871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 026E
        gbc.setState(0x4238, 0x9472, 0xc570, 0x2bf0, 0xf76c, 0xf0db, 0x0, 0x0);
        gbc.writeMem(0x4238, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9472);
        EXPECT(gbc.pc(), 0x4239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 026F
        gbc.setState(0x8b2f, 0x4014, 0xdb70, 0x88f, 0x4505, 0xc4b1, 0x1, 0x0);
        gbc.writeMem(0x8b2f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4014);
        EXPECT(gbc.pc(), 0x8b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2f), 0x5a);
        // 5A 0270
        gbc.setState(0x75c7, 0x7dfa, 0x7370, 0xbebf, 0x7cc9, 0x9c41, 0x0, 0x0);
        gbc.writeMem(0x75c7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7dfa);
        EXPECT(gbc.pc(), 0x75c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0271
        gbc.setState(0x2757, 0xeefc, 0xbce0, 0xd3d4, 0xb3bb, 0x8da9, 0x0, 0x1);
        gbc.writeMem(0x2757, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xeefc);
        EXPECT(gbc.pc(), 0x2758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0272
        gbc.setState(0x7b2f, 0x316a, 0x19e0, 0x7350, 0xcb01, 0x3235, 0x0, 0x0);
        gbc.writeMem(0x7b2f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x316a);
        EXPECT(gbc.pc(), 0x7b30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0273
        gbc.setState(0xd16d, 0x2236, 0x2900, 0x7e37, 0xc9a3, 0xcfac, 0x0, 0x1);
        gbc.writeMem(0xd16d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2236);
        EXPECT(gbc.pc(), 0xd16e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16d), 0x5a);
        // 5A 0274
        gbc.setState(0xd1d8, 0x8504, 0xc330, 0x3089, 0x4cb9, 0x46c4, 0x0, 0x1);
        gbc.writeMem(0xd1d8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8504);
        EXPECT(gbc.pc(), 0xd1d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d8), 0x5a);
        // 5A 0275
        gbc.setState(0xc3e9, 0x66bb, 0x3110, 0x9b49, 0x99aa, 0x3162, 0x1, 0x1);
        gbc.writeMem(0xc3e9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x66bb);
        EXPECT(gbc.pc(), 0xc3ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3e9), 0x5a);
        // 5A 0276
        gbc.setState(0xceee, 0x8ebb, 0x8b90, 0x8b3a, 0xd8c7, 0x8cb9, 0x0, 0x1);
        gbc.writeMem(0xceee, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8ebb);
        EXPECT(gbc.pc(), 0xceef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceee), 0x5a);
        // 5A 0277
        gbc.setState(0x70, 0xd939, 0xa120, 0x60e5, 0xa615, 0x3bf2, 0x0, 0x0);
        gbc.writeMem(0x70, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd939);
        EXPECT(gbc.pc(), 0x71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0278
        gbc.setState(0x7106, 0x730d, 0xab40, 0x88e0, 0xe21c, 0xe754, 0x0, 0x1);
        gbc.writeMem(0x7106, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x730d);
        EXPECT(gbc.pc(), 0x7107);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0279
        gbc.setState(0xb050, 0x7f12, 0xd910, 0xc8bf, 0xa4bc, 0xa6f3, 0x0, 0x1);
        gbc.writeMem(0xb050, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7f12);
        EXPECT(gbc.pc(), 0xb051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb050), 0x5a);
        // 5A 027A
        gbc.setState(0x3719, 0x8ed6, 0xf1f0, 0xf3e6, 0x76fe, 0xc310, 0x1, 0x0);
        gbc.writeMem(0x3719, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8ed6);
        EXPECT(gbc.pc(), 0x371a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 027B
        gbc.setState(0x3279, 0xf0de, 0x3720, 0x60a6, 0x4a12, 0xeb3c, 0x0, 0x1);
        gbc.writeMem(0x3279, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf0de);
        EXPECT(gbc.pc(), 0x327a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 027C
        gbc.setState(0x791d, 0xced6, 0xa7b0, 0x8f9e, 0x1f9e, 0xef52, 0x0, 0x0);
        gbc.writeMem(0x791d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xced6);
        EXPECT(gbc.pc(), 0x791e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 027D
        gbc.setState(0x68d9, 0x709a, 0x5ff0, 0x96a0, 0x190f, 0xd345, 0x0, 0x0);
        gbc.writeMem(0x68d9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x709a);
        EXPECT(gbc.pc(), 0x68da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 027E
        gbc.setState(0x90c0, 0x6097, 0xeb50, 0x7f8f, 0x53f9, 0x858e, 0x0, 0x1);
        gbc.writeMem(0x90c0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6097);
        EXPECT(gbc.pc(), 0x90c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c0), 0x5a);
        // 5A 027F
        gbc.setState(0xb03, 0xf410, 0xe070, 0x99af, 0xc4ea, 0xa772, 0x1, 0x0);
        gbc.writeMem(0xb03, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf410);
        EXPECT(gbc.pc(), 0xb04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0280
        gbc.setState(0x578e, 0xc843, 0x7450, 0x9efb, 0x47d1, 0xddb2, 0x0, 0x0);
        gbc.writeMem(0x578e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc843);
        EXPECT(gbc.pc(), 0x578f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0281
        gbc.setState(0xb02b, 0x64c2, 0x9bb0, 0x5f03, 0xed0f, 0x6b7a, 0x0, 0x1);
        gbc.writeMem(0xb02b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x64c2);
        EXPECT(gbc.pc(), 0xb02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02b), 0x5a);
        // 5A 0283
        gbc.setState(0x80f, 0x1f34, 0xcde0, 0xf3a0, 0xe0e7, 0x8740, 0x1, 0x0);
        gbc.writeMem(0x80f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1f34);
        EXPECT(gbc.pc(), 0x810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0284
        gbc.setState(0xd372, 0xd9b4, 0x3930, 0x2dd9, 0x8f62, 0x976e, 0x1, 0x1);
        gbc.writeMem(0xd372, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd9b4);
        EXPECT(gbc.pc(), 0xd373);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd372), 0x5a);
        // 5A 0285
        gbc.setState(0xa9f2, 0xac73, 0x43f0, 0xb731, 0xecad, 0xa39a, 0x0, 0x0);
        gbc.writeMem(0xa9f2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xac73);
        EXPECT(gbc.pc(), 0xa9f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f2), 0x5a);
        // 5A 0286
        gbc.setState(0x7d74, 0x41ed, 0x38e0, 0x2d52, 0xd488, 0x7003, 0x0, 0x1);
        gbc.writeMem(0x7d74, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x41ed);
        EXPECT(gbc.pc(), 0x7d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0287
        gbc.setState(0x7324, 0x4c3a, 0xd4a0, 0x8e35, 0x380b, 0x1749, 0x1, 0x1);
        gbc.writeMem(0x7324, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4c3a);
        EXPECT(gbc.pc(), 0x7325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0288
        gbc.setState(0xd38f, 0x23cf, 0xad00, 0x40f1, 0xb413, 0xf306, 0x0, 0x1);
        gbc.writeMem(0xd38f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x23cf);
        EXPECT(gbc.pc(), 0xd390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38f), 0x5a);
        // 5A 0289
        gbc.setState(0xb8ca, 0x8d59, 0xad30, 0x962e, 0x2ac3, 0xbbbe, 0x1, 0x0);
        gbc.writeMem(0xb8ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8d59);
        EXPECT(gbc.pc(), 0xb8cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ca), 0x5a);
        // 5A 028A
        gbc.setState(0x8085, 0x7677, 0x92d0, 0x2512, 0x8618, 0x30a, 0x1, 0x1);
        gbc.writeMem(0x8085, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7677);
        EXPECT(gbc.pc(), 0x8086);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8085), 0x5a);
        // 5A 028B
        gbc.setState(0x9a4f, 0xb11c, 0x1900, 0x5398, 0xb654, 0x9206, 0x1, 0x1);
        gbc.writeMem(0x9a4f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xb11c);
        EXPECT(gbc.pc(), 0x9a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4f), 0x5a);
        // 5A 028C
        gbc.setState(0x3443, 0xe08c, 0x74a0, 0x7456, 0x4763, 0x3e62, 0x0, 0x1);
        gbc.writeMem(0x3443, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe08c);
        EXPECT(gbc.pc(), 0x3444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 028D
        gbc.setState(0x5d08, 0x346c, 0xf780, 0x39eb, 0x840f, 0x522f, 0x1, 0x0);
        gbc.writeMem(0x5d08, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x346c);
        EXPECT(gbc.pc(), 0x5d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 028E
        gbc.setState(0xcdae, 0x9d48, 0x9060, 0x3071, 0x7e49, 0x77a7, 0x0, 0x0);
        gbc.writeMem(0xcdae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9d48);
        EXPECT(gbc.pc(), 0xcdaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdae), 0x5a);
        // 5A 028F
        gbc.setState(0x576f, 0x1229, 0xeed0, 0xdb09, 0xa40e, 0xaa5, 0x1, 0x1);
        gbc.writeMem(0x576f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1229);
        EXPECT(gbc.pc(), 0x5770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0290
        gbc.setState(0xc678, 0x5bd2, 0xe380, 0xa123, 0x2783, 0xc9cd, 0x0, 0x0);
        gbc.writeMem(0xc678, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5bd2);
        EXPECT(gbc.pc(), 0xc679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc678), 0x5a);
        // 5A 0291
        gbc.setState(0x6254, 0xf5ef, 0x8dc0, 0x6382, 0x6e5a, 0x6cd1, 0x0, 0x0);
        gbc.writeMem(0x6254, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf5ef);
        EXPECT(gbc.pc(), 0x6255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0292
        gbc.setState(0x6a05, 0x489b, 0x6a20, 0xe37d, 0x2f7a, 0x14e0, 0x1, 0x1);
        gbc.writeMem(0x6a05, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x489b);
        EXPECT(gbc.pc(), 0x6a06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0293
        gbc.setState(0xd791, 0x8272, 0x8110, 0x42b8, 0x1afe, 0x8217, 0x1, 0x0);
        gbc.writeMem(0xd791, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8272);
        EXPECT(gbc.pc(), 0xd792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd791), 0x5a);
        // 5A 0294
        gbc.setState(0x550b, 0x9974, 0xeeb0, 0xd9a, 0x542f, 0x610d, 0x0, 0x0);
        gbc.writeMem(0x550b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9974);
        EXPECT(gbc.pc(), 0x550c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0295
        gbc.setState(0x6b94, 0x5ebe, 0x870, 0x5feb, 0x8808, 0xcbb5, 0x0, 0x0);
        gbc.writeMem(0x6b94, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5ebe);
        EXPECT(gbc.pc(), 0x6b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0296
        gbc.setState(0x7322, 0x573b, 0x6460, 0x356, 0x8513, 0xd033, 0x0, 0x1);
        gbc.writeMem(0x7322, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x573b);
        EXPECT(gbc.pc(), 0x7323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0297
        gbc.setState(0x414, 0xe0cb, 0x4d90, 0xb900, 0xf2ce, 0x7d21, 0x1, 0x0);
        gbc.writeMem(0x414, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe0cb);
        EXPECT(gbc.pc(), 0x415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0298
        gbc.setState(0x6ac4, 0xf21c, 0x6f0, 0xb80f, 0xf77a, 0x4d5d, 0x1, 0x1);
        gbc.writeMem(0x6ac4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf21c);
        EXPECT(gbc.pc(), 0x6ac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0299
        gbc.setState(0x4ac3, 0x3733, 0x9090, 0xcc74, 0xab1a, 0xed0a, 0x0, 0x0);
        gbc.writeMem(0x4ac3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3733);
        EXPECT(gbc.pc(), 0x4ac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 029A
        gbc.setState(0x2f6e, 0x2d57, 0xf910, 0xbdba, 0x4b61, 0xf7d0, 0x0, 0x1);
        gbc.writeMem(0x2f6e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2d57);
        EXPECT(gbc.pc(), 0x2f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 029B
        gbc.setState(0xd4a7, 0xc5ee, 0x9910, 0x8b70, 0x3f43, 0xeb7d, 0x1, 0x0);
        gbc.writeMem(0xd4a7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc5ee);
        EXPECT(gbc.pc(), 0xd4a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4a7), 0x5a);
        // 5A 029C
        gbc.setState(0xc2fe, 0x5363, 0x6eb0, 0x8b7c, 0x9936, 0x47e, 0x1, 0x1);
        gbc.writeMem(0xc2fe, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5363);
        EXPECT(gbc.pc(), 0xc2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2fe), 0x5a);
        // 5A 029D
        gbc.setState(0xcd7e, 0xaf9f, 0xa70, 0x1389, 0x4184, 0xb70e, 0x0, 0x0);
        gbc.writeMem(0xcd7e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaf9f);
        EXPECT(gbc.pc(), 0xcd7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd7e), 0x5a);
        // 5A 029E
        gbc.setState(0xf0d, 0x90b3, 0x87e0, 0x2916, 0x2dcc, 0x8c4a, 0x1, 0x0);
        gbc.writeMem(0xf0d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x90b3);
        EXPECT(gbc.pc(), 0xf0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 029F
        gbc.setState(0x24ba, 0xab3f, 0xcc80, 0x32a3, 0xbb1b, 0x4b1b, 0x0, 0x0);
        gbc.writeMem(0x24ba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xab3f);
        EXPECT(gbc.pc(), 0x24bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02A0
        gbc.setState(0x9c80, 0xd0df, 0x1890, 0x8d49, 0x777a, 0xd83a, 0x1, 0x1);
        gbc.writeMem(0x9c80, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd0df);
        EXPECT(gbc.pc(), 0x9c81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c80), 0x5a);
        // 5A 02A1
        gbc.setState(0xe3d3, 0xec42, 0x86e0, 0x3ba4, 0x2ff4, 0x59a4, 0x1, 0x1);
        gbc.writeMem(0xe3d3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xec42);
        EXPECT(gbc.pc(), 0xe3d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d3), 0x5a);
        // 5A 02A3
        gbc.setState(0x6d38, 0x3232, 0xe4b0, 0x2d46, 0x55f0, 0xc142, 0x0, 0x0);
        gbc.writeMem(0x6d38, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3232);
        EXPECT(gbc.pc(), 0x6d39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02A4
        gbc.setState(0xdc30, 0x8797, 0xefa0, 0xca07, 0x8d34, 0x5ec8, 0x1, 0x1);
        gbc.writeMem(0xdc30, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8797);
        EXPECT(gbc.pc(), 0xdc31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc30), 0x5a);
        // 5A 02A5
        gbc.setState(0xb7a0, 0x8c7a, 0x3f0, 0x696e, 0x9554, 0x5dff, 0x1, 0x0);
        gbc.writeMem(0xb7a0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8c7a);
        EXPECT(gbc.pc(), 0xb7a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7a0), 0x5a);
        // 5A 02A8
        gbc.setState(0x7b7f, 0x35c3, 0xa860, 0xb2ac, 0x219a, 0x6f27, 0x1, 0x0);
        gbc.writeMem(0x7b7f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x35c3);
        EXPECT(gbc.pc(), 0x7b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02A9
        gbc.setState(0x4e46, 0x8bdf, 0xe2b0, 0x8191, 0x8b52, 0x5a92, 0x1, 0x0);
        gbc.writeMem(0x4e46, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8bdf);
        EXPECT(gbc.pc(), 0x4e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02AB
        gbc.setState(0x7e8b, 0x1579, 0xe880, 0x7832, 0x123f, 0xdaad, 0x1, 0x1);
        gbc.writeMem(0x7e8b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1579);
        EXPECT(gbc.pc(), 0x7e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02AC
        gbc.setState(0x99b2, 0x459f, 0x2860, 0xad51, 0x6997, 0xa921, 0x0, 0x0);
        gbc.writeMem(0x99b2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x459f);
        EXPECT(gbc.pc(), 0x99b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b2), 0x5a);
        // 5A 02AD
        gbc.setState(0x65fa, 0xa95e, 0x5a0, 0x7897, 0xbebd, 0xea3b, 0x1, 0x0);
        gbc.writeMem(0x65fa, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa95e);
        EXPECT(gbc.pc(), 0x65fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02AE
        gbc.setState(0xef5e, 0x59c2, 0x16e0, 0x7048, 0xf521, 0xe66e, 0x1, 0x1);
        gbc.writeMem(0xef5e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x59c2);
        EXPECT(gbc.pc(), 0xef5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef5e), 0x5a);
        // 5A 02B0
        gbc.setState(0xdbe5, 0x9f3b, 0x1df0, 0xab6c, 0x9e83, 0x23e7, 0x1, 0x0);
        gbc.writeMem(0xdbe5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9f3b);
        EXPECT(gbc.pc(), 0xdbe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe5), 0x5a);
        // 5A 02B1
        gbc.setState(0x6f8d, 0x2348, 0xe000, 0x59ec, 0xd191, 0xc10d, 0x0, 0x0);
        gbc.writeMem(0x6f8d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2348);
        EXPECT(gbc.pc(), 0x6f8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02B2
        gbc.setState(0x14a8, 0x8264, 0x96c0, 0x5ac5, 0xa7df, 0x35ab, 0x0, 0x0);
        gbc.writeMem(0x14a8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8264);
        EXPECT(gbc.pc(), 0x14a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02B3
        gbc.setState(0xa486, 0x7ff9, 0x21a0, 0x8448, 0x3691, 0x7d7f, 0x0, 0x1);
        gbc.writeMem(0xa486, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7ff9);
        EXPECT(gbc.pc(), 0xa487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa486), 0x5a);
        // 5A 02B4
        gbc.setState(0x5205, 0x8e18, 0xe6f0, 0xb450, 0x99fc, 0xa75e, 0x1, 0x0);
        gbc.writeMem(0x5205, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8e18);
        EXPECT(gbc.pc(), 0x5206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02B5
        gbc.setState(0x9603, 0xcb01, 0xba0, 0x26da, 0xd1b3, 0xede, 0x1, 0x0);
        gbc.writeMem(0x9603, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcb01);
        EXPECT(gbc.pc(), 0x9604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9603), 0x5a);
        // 5A 02B6
        gbc.setState(0x2065, 0x9bb2, 0x1f80, 0x85c, 0xa4da, 0x2887, 0x0, 0x1);
        gbc.writeMem(0x2065, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9bb2);
        EXPECT(gbc.pc(), 0x2066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02B7
        gbc.setState(0x54af, 0x8f7e, 0xf0e0, 0xd4dd, 0x9f50, 0x4d82, 0x1, 0x1);
        gbc.writeMem(0x54af, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8f7e);
        EXPECT(gbc.pc(), 0x54b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02B8
        gbc.setState(0x1319, 0xb0f0, 0xe2a0, 0xb6b, 0x9fde, 0x1f21, 0x1, 0x0);
        gbc.writeMem(0x1319, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb0f0);
        EXPECT(gbc.pc(), 0x131a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02B9
        gbc.setState(0x9a9e, 0xcf34, 0xca60, 0x21cc, 0xaccb, 0x18fc, 0x1, 0x0);
        gbc.writeMem(0x9a9e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcf34);
        EXPECT(gbc.pc(), 0x9a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9e), 0x5a);
        // 5A 02BB
        gbc.setState(0x1298, 0x9273, 0xeac0, 0x7dcc, 0x8ff1, 0x6979, 0x0, 0x0);
        gbc.writeMem(0x1298, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9273);
        EXPECT(gbc.pc(), 0x1299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02BC
        gbc.setState(0x8a3c, 0x99c, 0xdbb0, 0x6ab3, 0x6d18, 0xf72a, 0x1, 0x0);
        gbc.writeMem(0x8a3c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x99c);
        EXPECT(gbc.pc(), 0x8a3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a3c), 0x5a);
        // 5A 02BD
        gbc.setState(0x306f, 0xbc15, 0x9340, 0x1a39, 0x9035, 0x7d4b, 0x1, 0x0);
        gbc.writeMem(0x306f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbc15);
        EXPECT(gbc.pc(), 0x3070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02BE
        gbc.setState(0x8a93, 0x2fde, 0x7a30, 0xc703, 0x1882, 0xb57f, 0x1, 0x1);
        gbc.writeMem(0x8a93, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2fde);
        EXPECT(gbc.pc(), 0x8a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a93), 0x5a);
        // 5A 02BF
        gbc.setState(0x6cd8, 0x9df9, 0xced0, 0x6e09, 0x3910, 0xe306, 0x1, 0x0);
        gbc.writeMem(0x6cd8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9df9);
        EXPECT(gbc.pc(), 0x6cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02C0
        gbc.setState(0xdc36, 0xc417, 0x9210, 0x35f, 0x2e6d, 0xb50a, 0x1, 0x0);
        gbc.writeMem(0xdc36, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0xdc37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc36), 0x5a);
        // 5A 02C1
        gbc.setState(0x5608, 0x65ab, 0x99e0, 0xf045, 0x1e54, 0x70ac, 0x0, 0x0);
        gbc.writeMem(0x5608, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x65ab);
        EXPECT(gbc.pc(), 0x5609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02C2
        gbc.setState(0x760e, 0x9a44, 0x5e80, 0xa5c0, 0x25b7, 0xd594, 0x1, 0x1);
        gbc.writeMem(0x760e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9a44);
        EXPECT(gbc.pc(), 0x760f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02C3
        gbc.setState(0x2296, 0x8050, 0xc160, 0x7f3b, 0x7acc, 0x7a58, 0x0, 0x0);
        gbc.writeMem(0x2296, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8050);
        EXPECT(gbc.pc(), 0x2297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02C4
        gbc.setState(0xaff2, 0xebbd, 0x3250, 0x114d, 0x29c5, 0x70d4, 0x1, 0x1);
        gbc.writeMem(0xaff2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xebbd);
        EXPECT(gbc.pc(), 0xaff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaff2), 0x5a);
        // 5A 02C5
        gbc.setState(0x2679, 0xe8de, 0x45a0, 0x5fd2, 0xf881, 0x66ae, 0x1, 0x1);
        gbc.writeMem(0x2679, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe8de);
        EXPECT(gbc.pc(), 0x267a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02C6
        gbc.setState(0x829f, 0xfa80, 0xb5b0, 0xa124, 0xba0e, 0xc18c, 0x1, 0x1);
        gbc.writeMem(0x829f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xfa80);
        EXPECT(gbc.pc(), 0x82a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x829f), 0x5a);
        // 5A 02C8
        gbc.setState(0x6f42, 0xf0e0, 0x2310, 0xe2a9, 0x5d71, 0x5566, 0x0, 0x1);
        gbc.writeMem(0x6f42, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf0e0);
        EXPECT(gbc.pc(), 0x6f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02C9
        gbc.setState(0x50be, 0xbb3f, 0xa0a0, 0xd584, 0xdf7b, 0x864d, 0x1, 0x0);
        gbc.writeMem(0x50be, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xbb3f);
        EXPECT(gbc.pc(), 0x50bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02CA
        gbc.setState(0x7bf5, 0x9555, 0x8460, 0xde93, 0x5a4f, 0x410c, 0x0, 0x1);
        gbc.writeMem(0x7bf5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9555);
        EXPECT(gbc.pc(), 0x7bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02CB
        gbc.setState(0x3c67, 0x512d, 0xb400, 0x44dd, 0x606, 0xd827, 0x1, 0x0);
        gbc.writeMem(0x3c67, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x512d);
        EXPECT(gbc.pc(), 0x3c68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02CC
        gbc.setState(0xaa28, 0xba28, 0xebf0, 0xa3d3, 0x85d7, 0x3f69, 0x0, 0x0);
        gbc.writeMem(0xaa28, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xba28);
        EXPECT(gbc.pc(), 0xaa29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa28), 0x5a);
        // 5A 02CD
        gbc.setState(0xc6ab, 0x9691, 0x1db0, 0x563f, 0xfd25, 0x54b3, 0x1, 0x0);
        gbc.writeMem(0xc6ab, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9691);
        EXPECT(gbc.pc(), 0xc6ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ab), 0x5a);
        // 5A 02CE
        gbc.setState(0xacd3, 0x791b, 0xb3e0, 0xf639, 0x57db, 0x6213, 0x1, 0x1);
        gbc.writeMem(0xacd3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x791b);
        EXPECT(gbc.pc(), 0xacd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacd3), 0x5a);
        // 5A 02CF
        gbc.setState(0xc221, 0x1c53, 0x30c0, 0x9eda, 0x6176, 0x7cc9, 0x0, 0x1);
        gbc.writeMem(0xc221, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1c53);
        EXPECT(gbc.pc(), 0xc222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc221), 0x5a);
        // 5A 02D0
        gbc.setState(0x849a, 0xec78, 0x25e0, 0xc8df, 0xf776, 0x53ff, 0x0, 0x1);
        gbc.writeMem(0x849a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xec78);
        EXPECT(gbc.pc(), 0x849b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x849a), 0x5a);
        // 5A 02D1
        gbc.setState(0xc6db, 0xf4c7, 0x6a10, 0x4acc, 0xa59a, 0xc9ea, 0x1, 0x0);
        gbc.writeMem(0xc6db, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf4c7);
        EXPECT(gbc.pc(), 0xc6dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6db), 0x5a);
        // 5A 02D2
        gbc.setState(0xc3d4, 0xef9d, 0xf760, 0x6579, 0x972f, 0xde04, 0x0, 0x0);
        gbc.writeMem(0xc3d4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xef9d);
        EXPECT(gbc.pc(), 0xc3d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d4), 0x5a);
        // 5A 02D3
        gbc.setState(0xe4ae, 0x9edf, 0x5aa0, 0xa1f2, 0xe479, 0xe7ac, 0x0, 0x0);
        gbc.writeMem(0xe4ae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9edf);
        EXPECT(gbc.pc(), 0xe4af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ae), 0x5a);
        // 5A 02D4
        gbc.setState(0x1ccf, 0xd678, 0x5410, 0x6168, 0xd0d8, 0xb12c, 0x1, 0x0);
        gbc.writeMem(0x1ccf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd678);
        EXPECT(gbc.pc(), 0x1cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02D5
        gbc.setState(0x5632, 0xfc66, 0xf7b0, 0x3984, 0x61cf, 0x8fe7, 0x1, 0x0);
        gbc.writeMem(0x5632, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfc66);
        EXPECT(gbc.pc(), 0x5633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02D6
        gbc.setState(0x94ce, 0xb7e6, 0xa6f0, 0xf248, 0xef80, 0x6edd, 0x0, 0x1);
        gbc.writeMem(0x94ce, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb7e6);
        EXPECT(gbc.pc(), 0x94cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ce), 0x5a);
        // 5A 02D7
        gbc.setState(0x4cf7, 0x6a4, 0x6de0, 0xbed5, 0x9590, 0x7614, 0x1, 0x0);
        gbc.writeMem(0x4cf7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6a4);
        EXPECT(gbc.pc(), 0x4cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02D8
        gbc.setState(0x6443, 0xefc5, 0x79e0, 0xf985, 0x9b43, 0x2a4e, 0x0, 0x0);
        gbc.writeMem(0x6443, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xefc5);
        EXPECT(gbc.pc(), 0x6444);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02D9
        gbc.setState(0xb35b, 0x564c, 0xef90, 0x82c6, 0xa3af, 0x4e56, 0x0, 0x1);
        gbc.writeMem(0xb35b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x564c);
        EXPECT(gbc.pc(), 0xb35c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35b), 0x5a);
        // 5A 02DA
        gbc.setState(0x294, 0x161e, 0xf1d0, 0xa658, 0xbfa2, 0xa53c, 0x1, 0x1);
        gbc.writeMem(0x294, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x161e);
        EXPECT(gbc.pc(), 0x295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02DB
        gbc.setState(0x712c, 0x1df7, 0x2c00, 0x145f, 0x72b, 0x7c55, 0x0, 0x1);
        gbc.writeMem(0x712c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1df7);
        EXPECT(gbc.pc(), 0x712d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02DC
        gbc.setState(0x23de, 0x98b1, 0x9500, 0x53a2, 0x371b, 0xc787, 0x1, 0x1);
        gbc.writeMem(0x23de, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x98b1);
        EXPECT(gbc.pc(), 0x23df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02DD
        gbc.setState(0x6bc3, 0x204e, 0xaf80, 0x3299, 0xda72, 0x8d99, 0x1, 0x0);
        gbc.writeMem(0x6bc3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x204e);
        EXPECT(gbc.pc(), 0x6bc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02DE
        gbc.setState(0x8063, 0x3188, 0x2570, 0xe30, 0xcbef, 0x7d8f, 0x0, 0x1);
        gbc.writeMem(0x8063, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3188);
        EXPECT(gbc.pc(), 0x8064);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8063), 0x5a);
        // 5A 02DF
        gbc.setState(0x91dc, 0x5229, 0x8060, 0x1ebc, 0x145a, 0x8cdd, 0x0, 0x0);
        gbc.writeMem(0x91dc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5229);
        EXPECT(gbc.pc(), 0x91dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91dc), 0x5a);
        // 5A 02E0
        gbc.setState(0xe3e0, 0xd32a, 0x8bc0, 0xfb9e, 0xd7ff, 0xdb7d, 0x1, 0x1);
        gbc.writeMem(0xe3e0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd32a);
        EXPECT(gbc.pc(), 0xe3e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3e0), 0x5a);
        // 5A 02E1
        gbc.setState(0x8ec1, 0xdd68, 0x69a0, 0xbfcf, 0xb9a9, 0x9452, 0x1, 0x0);
        gbc.writeMem(0x8ec1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdd68);
        EXPECT(gbc.pc(), 0x8ec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec1), 0x5a);
        // 5A 02E2
        gbc.setState(0x9042, 0xa81, 0x4fc0, 0xfd8a, 0xb8b9, 0xcc24, 0x1, 0x0);
        gbc.writeMem(0x9042, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa81);
        EXPECT(gbc.pc(), 0x9043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9042), 0x5a);
        // 5A 02E3
        gbc.setState(0x4bb2, 0x1084, 0x5230, 0xb3d3, 0x75ab, 0x971b, 0x1, 0x1);
        gbc.writeMem(0x4bb2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1084);
        EXPECT(gbc.pc(), 0x4bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02E4
        gbc.setState(0x5bdb, 0x212f, 0x6a40, 0x49e8, 0x80b4, 0x66b0, 0x0, 0x1);
        gbc.writeMem(0x5bdb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x212f);
        EXPECT(gbc.pc(), 0x5bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02E5
        gbc.setState(0x3d8a, 0x5a19, 0xc780, 0xb2cf, 0xa98b, 0xf0e9, 0x0, 0x0);
        gbc.writeMem(0x3d8a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5a19);
        EXPECT(gbc.pc(), 0x3d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02E6
        gbc.setState(0xc830, 0xa20, 0xea0, 0x197d, 0x6804, 0x2014, 0x1, 0x0);
        gbc.writeMem(0xc830, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa20);
        EXPECT(gbc.pc(), 0xc831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc830), 0x5a);
        // 5A 02E7
        gbc.setState(0xcd40, 0x8325, 0xb700, 0x4425, 0x3695, 0x3faf, 0x0, 0x1);
        gbc.writeMem(0xcd40, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8325);
        EXPECT(gbc.pc(), 0xcd41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd40), 0x5a);
        // 5A 02E9
        gbc.setState(0x23a3, 0x3b6d, 0x9750, 0x3b22, 0x40bf, 0xb478, 0x1, 0x1);
        gbc.writeMem(0x23a3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3b6d);
        EXPECT(gbc.pc(), 0x23a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02EA
        gbc.setState(0xacb2, 0x61c9, 0x16d0, 0x229f, 0x7f34, 0x86a6, 0x1, 0x0);
        gbc.writeMem(0xacb2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x61c9);
        EXPECT(gbc.pc(), 0xacb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb2), 0x5a);
        // 5A 02EB
        gbc.setState(0x926b, 0x8dec, 0x1000, 0x64e, 0x834f, 0x12ef, 0x1, 0x1);
        gbc.writeMem(0x926b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8dec);
        EXPECT(gbc.pc(), 0x926c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x926b), 0x5a);
        // 5A 02EC
        gbc.setState(0xecba, 0x724a, 0x250, 0x879b, 0x13a7, 0x1d00, 0x1, 0x0);
        gbc.writeMem(0xecba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x724a);
        EXPECT(gbc.pc(), 0xecbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecba), 0x5a);
        // 5A 02EE
        gbc.setState(0x340f, 0x1d2e, 0x3fd0, 0x74f1, 0xae87, 0x334b, 0x1, 0x1);
        gbc.writeMem(0x340f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1d2e);
        EXPECT(gbc.pc(), 0x3410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02EF
        gbc.setState(0x9ef, 0x9404, 0xc1b0, 0x5e3d, 0x7531, 0x5d49, 0x0, 0x0);
        gbc.writeMem(0x9ef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9404);
        EXPECT(gbc.pc(), 0x9f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02F0
        gbc.setState(0x722d, 0x293a, 0x32b0, 0xc98f, 0xc14a, 0x130e, 0x0, 0x1);
        gbc.writeMem(0x722d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x293a);
        EXPECT(gbc.pc(), 0x722e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 02F1
        gbc.setState(0xafa4, 0x84a0, 0xd3b0, 0x5bff, 0x71d9, 0x5580, 0x1, 0x1);
        gbc.writeMem(0xafa4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x84a0);
        EXPECT(gbc.pc(), 0xafa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa4), 0x5a);
        // 5A 02F2
        gbc.setState(0x2a0c, 0xabfa, 0xb3c0, 0x938e, 0x9e3d, 0xa78a, 0x0, 0x0);
        gbc.writeMem(0x2a0c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xabfa);
        EXPECT(gbc.pc(), 0x2a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02F3
        gbc.setState(0x1ece, 0xc027, 0x3090, 0x9485, 0x3874, 0x1d4a, 0x1, 0x1);
        gbc.writeMem(0x1ece, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc027);
        EXPECT(gbc.pc(), 0x1ecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 02F4
        gbc.setState(0x2b9e, 0xe909, 0xb680, 0x9b7c, 0x38d, 0x2ecd, 0x0, 0x0);
        gbc.writeMem(0x2b9e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe909);
        EXPECT(gbc.pc(), 0x2b9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02F5
        gbc.setState(0xa9f4, 0xe455, 0x8f30, 0x2b3c, 0x8cc, 0xcedd, 0x1, 0x0);
        gbc.writeMem(0xa9f4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe455);
        EXPECT(gbc.pc(), 0xa9f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9f4), 0x5a);
        // 5A 02F6
        gbc.setState(0xb7e6, 0x573f, 0xf620, 0x1087, 0x4e6c, 0xf1ea, 0x1, 0x1);
        gbc.writeMem(0xb7e6, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x573f);
        EXPECT(gbc.pc(), 0xb7e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e6), 0x5a);
        // 5A 02F7
        gbc.setState(0x1c7a, 0x6494, 0x7620, 0x20d2, 0x5b71, 0xdf53, 0x0, 0x0);
        gbc.writeMem(0x1c7a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6494);
        EXPECT(gbc.pc(), 0x1c7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 02F8
        gbc.setState(0x4c33, 0xf657, 0x1d00, 0xc3b5, 0x5a8b, 0xf148, 0x1, 0x0);
        gbc.writeMem(0x4c33, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf657);
        EXPECT(gbc.pc(), 0x4c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02F9
        gbc.setState(0xa2bc, 0x2d6b, 0x61b0, 0x241b, 0x429d, 0x60c9, 0x1, 0x0);
        gbc.writeMem(0xa2bc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2d6b);
        EXPECT(gbc.pc(), 0xa2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2bc), 0x5a);
        // 5A 02FA
        gbc.setState(0x957a, 0x75c8, 0xee20, 0xcfa, 0x6d09, 0xf603, 0x1, 0x0);
        gbc.writeMem(0x957a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x75c8);
        EXPECT(gbc.pc(), 0x957b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957a), 0x5a);
        // 5A 02FB
        gbc.setState(0x2412, 0xd1bf, 0x15c0, 0xe0d4, 0xf6fa, 0x3a74, 0x0, 0x0);
        gbc.writeMem(0x2412, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd1bf);
        EXPECT(gbc.pc(), 0x2413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 02FC
        gbc.setState(0xbdcb, 0xa50c, 0xbec0, 0xd73d, 0x9f65, 0x5ebc, 0x1, 0x1);
        gbc.writeMem(0xbdcb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa50c);
        EXPECT(gbc.pc(), 0xbdcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdcb), 0x5a);
        // 5A 02FD
        gbc.setState(0x8f4c, 0xdd2e, 0x76d0, 0xf2f6, 0x1bf0, 0x435c, 0x1, 0x1);
        gbc.writeMem(0x8f4c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdd2e);
        EXPECT(gbc.pc(), 0x8f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f4c), 0x5a);
        // 5A 02FE
        gbc.setState(0x93c4, 0xc1a7, 0x1840, 0x832d, 0x677c, 0x95a3, 0x0, 0x0);
        gbc.writeMem(0x93c4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc1a7);
        EXPECT(gbc.pc(), 0x93c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c4), 0x5a);
        // 5A 02FF
        gbc.setState(0x5414, 0x11ad, 0x7490, 0xafc2, 0x1eda, 0x38e4, 0x0, 0x1);
        gbc.writeMem(0x5414, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x11ad);
        EXPECT(gbc.pc(), 0x5415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0300
        gbc.setState(0x4f80, 0xdc58, 0x8000, 0x253a, 0xb5f8, 0x560d, 0x1, 0x1);
        gbc.writeMem(0x4f80, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdc58);
        EXPECT(gbc.pc(), 0x4f81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0301
        gbc.setState(0xcadf, 0x6b7f, 0xa7d0, 0x8745, 0xbb8f, 0x881d, 0x1, 0x1);
        gbc.writeMem(0xcadf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6b7f);
        EXPECT(gbc.pc(), 0xcae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcadf), 0x5a);
        // 5A 0302
        gbc.setState(0x9149, 0xb85f, 0x1b50, 0x90b5, 0xc451, 0x7584, 0x0, 0x1);
        gbc.writeMem(0x9149, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb85f);
        EXPECT(gbc.pc(), 0x914a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9149), 0x5a);
        // 5A 0303
        gbc.setState(0xca58, 0x5dab, 0xc340, 0x2eab, 0xa680, 0xf162, 0x1, 0x1);
        gbc.writeMem(0xca58, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5dab);
        EXPECT(gbc.pc(), 0xca59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca58), 0x5a);
        // 5A 0304
        gbc.setState(0x6910, 0x54a1, 0x9fb0, 0xddc8, 0x176b, 0x1721, 0x1, 0x0);
        gbc.writeMem(0x6910, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x54a1);
        EXPECT(gbc.pc(), 0x6911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0305
        gbc.setState(0x1f1f, 0x7685, 0x4a80, 0x8db8, 0x23d, 0x562f, 0x1, 0x1);
        gbc.writeMem(0x1f1f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7685);
        EXPECT(gbc.pc(), 0x1f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0306
        gbc.setState(0xdb32, 0x5070, 0x2c40, 0x5a30, 0x1c0d, 0x70d0, 0x1, 0x1);
        gbc.writeMem(0xdb32, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5070);
        EXPECT(gbc.pc(), 0xdb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb32), 0x5a);
        // 5A 0307
        gbc.setState(0xc361, 0xcb9f, 0x80f0, 0x93cb, 0x650d, 0x3869, 0x0, 0x1);
        gbc.writeMem(0xc361, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcb9f);
        EXPECT(gbc.pc(), 0xc362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc361), 0x5a);
        // 5A 0308
        gbc.setState(0x2354, 0xf410, 0x9f80, 0x4ec9, 0xd62c, 0x31f4, 0x0, 0x0);
        gbc.writeMem(0x2354, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf410);
        EXPECT(gbc.pc(), 0x2355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0309
        gbc.setState(0x402, 0xd0d4, 0xf750, 0xe402, 0xfa7f, 0x75c1, 0x0, 0x0);
        gbc.writeMem(0x402, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0x403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 030A
        gbc.setState(0x9163, 0x3ffe, 0xc0a0, 0x82a4, 0x178d, 0x679d, 0x0, 0x1);
        gbc.writeMem(0x9163, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3ffe);
        EXPECT(gbc.pc(), 0x9164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9163), 0x5a);
        // 5A 030B
        gbc.setState(0xa858, 0x1c89, 0x8750, 0xa5c0, 0x85b8, 0x7fc1, 0x1, 0x0);
        gbc.writeMem(0xa858, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1c89);
        EXPECT(gbc.pc(), 0xa859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa858), 0x5a);
        // 5A 030C
        gbc.setState(0xb4e1, 0x543c, 0xacc0, 0xe3c9, 0xa6d, 0xd7fe, 0x0, 0x0);
        gbc.writeMem(0xb4e1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x543c);
        EXPECT(gbc.pc(), 0xb4e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e1), 0x5a);
        // 5A 030D
        gbc.setState(0x464a, 0xc3e3, 0x9c80, 0x5ff2, 0x2d13, 0xde0a, 0x0, 0x0);
        gbc.writeMem(0x464a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc3e3);
        EXPECT(gbc.pc(), 0x464b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 030E
        gbc.setState(0x55ae, 0x443f, 0xa180, 0xda31, 0xe734, 0x6d86, 0x1, 0x1);
        gbc.writeMem(0x55ae, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x443f);
        EXPECT(gbc.pc(), 0x55af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 030F
        gbc.setState(0x9b63, 0xb2a2, 0xdd40, 0xd5cc, 0xf826, 0xaeb0, 0x1, 0x0);
        gbc.writeMem(0x9b63, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb2a2);
        EXPECT(gbc.pc(), 0x9b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b63), 0x5a);
        // 5A 0310
        gbc.setState(0xe101, 0xa7e8, 0x5660, 0x5e69, 0x6c65, 0x73ff, 0x1, 0x1);
        gbc.writeMem(0xe101, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa7e8);
        EXPECT(gbc.pc(), 0xe102);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe101), 0x5a);
        // 5A 0311
        gbc.setState(0x2a0b, 0x72b8, 0x9620, 0x223b, 0xe61b, 0x772d, 0x1, 0x1);
        gbc.writeMem(0x2a0b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x72b8);
        EXPECT(gbc.pc(), 0x2a0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0312
        gbc.setState(0x5c1e, 0x6653, 0xac10, 0xb92b, 0xb161, 0x9a63, 0x0, 0x0);
        gbc.writeMem(0x5c1e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6653);
        EXPECT(gbc.pc(), 0x5c1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0314
        gbc.setState(0x5f5c, 0x633b, 0x1360, 0xa4e4, 0xec42, 0x994e, 0x0, 0x1);
        gbc.writeMem(0x5f5c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x633b);
        EXPECT(gbc.pc(), 0x5f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0315
        gbc.setState(0x79d2, 0xa588, 0x1ae0, 0x8e9d, 0x5e16, 0xc5cc, 0x1, 0x0);
        gbc.writeMem(0x79d2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa588);
        EXPECT(gbc.pc(), 0x79d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0316
        gbc.setState(0xc010, 0xc58e, 0x5e0, 0xde36, 0x4a62, 0x7f09, 0x1, 0x0);
        gbc.writeMem(0xc010, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc58e);
        EXPECT(gbc.pc(), 0xc011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc010), 0x5a);
        // 5A 0317
        gbc.setState(0x32ea, 0xefd0, 0xe5b0, 0xb7dd, 0xb7d7, 0x3ac7, 0x0, 0x1);
        gbc.writeMem(0x32ea, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xefd0);
        EXPECT(gbc.pc(), 0x32eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0319
        gbc.setState(0x823b, 0xa0e, 0xef60, 0xc54b, 0x56c6, 0x5fb9, 0x1, 0x0);
        gbc.writeMem(0x823b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa0e);
        EXPECT(gbc.pc(), 0x823c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823b), 0x5a);
        // 5A 031A
        gbc.setState(0xd1ee, 0xeaef, 0xe9f0, 0xae5b, 0xbc86, 0x57cd, 0x1, 0x1);
        gbc.writeMem(0xd1ee, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xeaef);
        EXPECT(gbc.pc(), 0xd1ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ee), 0x5a);
        // 5A 031B
        gbc.setState(0x9965, 0xe81b, 0x48d0, 0x2447, 0xfec5, 0xf01c, 0x0, 0x0);
        gbc.writeMem(0x9965, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe81b);
        EXPECT(gbc.pc(), 0x9966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9965), 0x5a);
        // 5A 031C
        gbc.setState(0x7d6b, 0x97a8, 0x9640, 0xd8df, 0x755, 0xd9ba, 0x0, 0x0);
        gbc.writeMem(0x7d6b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x97a8);
        EXPECT(gbc.pc(), 0x7d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 031D
        gbc.setState(0x2c30, 0x7795, 0x7480, 0x66e1, 0xd0e9, 0x3157, 0x1, 0x1);
        gbc.writeMem(0x2c30, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7795);
        EXPECT(gbc.pc(), 0x2c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 031E
        gbc.setState(0x9971, 0x6dcb, 0xa140, 0xbc74, 0x6bf4, 0xa0b2, 0x1, 0x1);
        gbc.writeMem(0x9971, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6dcb);
        EXPECT(gbc.pc(), 0x9972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9971), 0x5a);
        // 5A 031F
        gbc.setState(0x2f8e, 0x7eb4, 0x4610, 0xc846, 0xb09c, 0xb54, 0x0, 0x0);
        gbc.writeMem(0x2f8e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7eb4);
        EXPECT(gbc.pc(), 0x2f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0320
        gbc.setState(0x7c49, 0x942b, 0xb210, 0x8b61, 0x55a1, 0x7312, 0x1, 0x0);
        gbc.writeMem(0x7c49, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x942b);
        EXPECT(gbc.pc(), 0x7c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0321
        gbc.setState(0x5456, 0x1b0b, 0x9bf0, 0xe6fc, 0x2041, 0x22f5, 0x1, 0x1);
        gbc.writeMem(0x5456, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1b0b);
        EXPECT(gbc.pc(), 0x5457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0322
        gbc.setState(0xd79a, 0x5d4, 0x8d80, 0xf922, 0xed89, 0xca6a, 0x1, 0x0);
        gbc.writeMem(0xd79a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5d4);
        EXPECT(gbc.pc(), 0xd79b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd79a), 0x5a);
        // 5A 0323
        gbc.setState(0x784b, 0x7436, 0xf2a0, 0xf29a, 0x400f, 0x22d8, 0x0, 0x0);
        gbc.writeMem(0x784b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7436);
        EXPECT(gbc.pc(), 0x784c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0324
        gbc.setState(0x909b, 0x2f37, 0x2170, 0xe604, 0x7135, 0xdc19, 0x0, 0x1);
        gbc.writeMem(0x909b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2f37);
        EXPECT(gbc.pc(), 0x909c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x909b), 0x5a);
        // 5A 0325
        gbc.setState(0xace1, 0xccd9, 0xac90, 0xb813, 0xf683, 0x49b9, 0x1, 0x1);
        gbc.writeMem(0xace1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xccd9);
        EXPECT(gbc.pc(), 0xace2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace1), 0x5a);
        // 5A 0326
        gbc.setState(0xeac4, 0x37a, 0x3530, 0x619f, 0x94ba, 0x34f2, 0x0, 0x0);
        gbc.writeMem(0xeac4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x37a);
        EXPECT(gbc.pc(), 0xeac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac4), 0x5a);
        // 5A 0327
        gbc.setState(0xf2c, 0xe18e, 0xfdf0, 0x4bc2, 0x110d, 0x6466, 0x1, 0x0);
        gbc.writeMem(0xf2c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe18e);
        EXPECT(gbc.pc(), 0xf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0328
        gbc.setState(0x67b0, 0x3830, 0xc0b0, 0x567b, 0xda99, 0x122d, 0x0, 0x0);
        gbc.writeMem(0x67b0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3830);
        EXPECT(gbc.pc(), 0x67b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0329
        gbc.setState(0xb9e0, 0x7cce, 0xe250, 0x2198, 0xe814, 0xfe25, 0x1, 0x0);
        gbc.writeMem(0xb9e0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7cce);
        EXPECT(gbc.pc(), 0xb9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e0), 0x5a);
        // 5A 032A
        gbc.setState(0xfcc, 0xbd85, 0x2b00, 0x415e, 0x52b8, 0xc5b2, 0x1, 0x0);
        gbc.writeMem(0xfcc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbd85);
        EXPECT(gbc.pc(), 0xfcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 032B
        gbc.setState(0xc816, 0xed1f, 0x3280, 0x2253, 0x7ba3, 0x5a11, 0x0, 0x1);
        gbc.writeMem(0xc816, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xed1f);
        EXPECT(gbc.pc(), 0xc817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc816), 0x5a);
        // 5A 032C
        gbc.setState(0x7df8, 0x493, 0x72d0, 0xfcb5, 0x20c4, 0xa4a6, 0x0, 0x0);
        gbc.writeMem(0x7df8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x493);
        EXPECT(gbc.pc(), 0x7df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 032E
        gbc.setState(0x6134, 0x9bea, 0xe200, 0x64, 0x9391, 0x16bc, 0x0, 0x0);
        gbc.writeMem(0x6134, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9bea);
        EXPECT(gbc.pc(), 0x6135);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 032F
        gbc.setState(0x7439, 0xf2fc, 0x9880, 0x2d5c, 0xbc68, 0x7d97, 0x1, 0x1);
        gbc.writeMem(0x7439, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf2fc);
        EXPECT(gbc.pc(), 0x743a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0330
        gbc.setState(0x3354, 0xbc9d, 0xd970, 0x51d1, 0xd9f0, 0xc5ff, 0x1, 0x1);
        gbc.writeMem(0x3354, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbc9d);
        EXPECT(gbc.pc(), 0x3355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0331
        gbc.setState(0x5dd3, 0xd9ef, 0x6ef0, 0xb267, 0x6569, 0x92dd, 0x1, 0x0);
        gbc.writeMem(0x5dd3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd9ef);
        EXPECT(gbc.pc(), 0x5dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0332
        gbc.setState(0x8a8b, 0xf1f1, 0x2e30, 0xfeed, 0x5793, 0xed76, 0x1, 0x0);
        gbc.writeMem(0x8a8b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xf1f1);
        EXPECT(gbc.pc(), 0x8a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a8b), 0x5a);
        // 5A 0333
        gbc.setState(0x46b5, 0xcd31, 0x9240, 0x7631, 0x44ba, 0xc7e9, 0x1, 0x1);
        gbc.writeMem(0x46b5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcd31);
        EXPECT(gbc.pc(), 0x46b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0334
        gbc.setState(0x321c, 0xba92, 0x41c0, 0x22c0, 0x7c6c, 0x5217, 0x0, 0x1);
        gbc.writeMem(0x321c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xba92);
        EXPECT(gbc.pc(), 0x321d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0335
        gbc.setState(0x40ee, 0xd21, 0x5730, 0x43b4, 0x28b7, 0x23ea, 0x1, 0x0);
        gbc.writeMem(0x40ee, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd21);
        EXPECT(gbc.pc(), 0x40ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0336
        gbc.setState(0x4c1f, 0x9dcf, 0x2ee0, 0x86cf, 0x33f3, 0x2922, 0x1, 0x0);
        gbc.writeMem(0x4c1f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9dcf);
        EXPECT(gbc.pc(), 0x4c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0337
        gbc.setState(0x5605, 0x7a2a, 0xb900, 0xdfa6, 0x3fa1, 0x195e, 0x1, 0x1);
        gbc.writeMem(0x5605, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x7a2a);
        EXPECT(gbc.pc(), 0x5606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0338
        gbc.setState(0xdbf8, 0xbed, 0xb240, 0xa4f3, 0x184f, 0x14ea, 0x0, 0x0);
        gbc.writeMem(0xdbf8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xbed);
        EXPECT(gbc.pc(), 0xdbf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf8), 0x5a);
        // 5A 0339
        gbc.setState(0x5b3c, 0xf47a, 0x62b0, 0x2a92, 0xc6f8, 0x48ee, 0x0, 0x1);
        gbc.writeMem(0x5b3c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf47a);
        EXPECT(gbc.pc(), 0x5b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 033A
        gbc.setState(0x7202, 0xe9f1, 0x2820, 0xccd0, 0x4d2b, 0xaa51, 0x0, 0x1);
        gbc.writeMem(0x7202, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe9f1);
        EXPECT(gbc.pc(), 0x7203);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 033B
        gbc.setState(0xd1f4, 0x2bf0, 0xfed0, 0xa50d, 0xb73a, 0xafe5, 0x0, 0x0);
        gbc.writeMem(0xd1f4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2bf0);
        EXPECT(gbc.pc(), 0xd1f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1f4), 0x5a);
        // 5A 033C
        gbc.setState(0x579c, 0xca03, 0xca10, 0x98f6, 0x38b, 0x9c3a, 0x1, 0x1);
        gbc.writeMem(0x579c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xca03);
        EXPECT(gbc.pc(), 0x579d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 033D
        gbc.setState(0xa294, 0xb07d, 0x3410, 0xd127, 0x8281, 0x4c8f, 0x0, 0x0);
        gbc.writeMem(0xa294, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb07d);
        EXPECT(gbc.pc(), 0xa295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa294), 0x5a);
        // 5A 033E
        gbc.setState(0x1f10, 0xc6ce, 0x6700, 0x8147, 0xaf83, 0x945, 0x1, 0x1);
        gbc.writeMem(0x1f10, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc6ce);
        EXPECT(gbc.pc(), 0x1f11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 033F
        gbc.setState(0xc3da, 0xffa6, 0xc860, 0x4187, 0xf05d, 0x91eb, 0x0, 0x0);
        gbc.writeMem(0xc3da, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xffa6);
        EXPECT(gbc.pc(), 0xc3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3da), 0x5a);
        // 5A 0340
        gbc.setState(0xdecf, 0x6f04, 0x2f30, 0x3bc5, 0x63cf, 0xdde8, 0x1, 0x0);
        gbc.writeMem(0xdecf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6f04);
        EXPECT(gbc.pc(), 0xded0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdecf), 0x5a);
        // 5A 0341
        gbc.setState(0x57ed, 0xe03a, 0x92d0, 0xeb3f, 0x8f44, 0xf821, 0x1, 0x0);
        gbc.writeMem(0x57ed, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe03a);
        EXPECT(gbc.pc(), 0x57ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0342
        gbc.setState(0xa9a2, 0xb941, 0x7da0, 0x2c0e, 0xac01, 0x3867, 0x1, 0x0);
        gbc.writeMem(0xa9a2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xb941);
        EXPECT(gbc.pc(), 0xa9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a2), 0x5a);
        // 5A 0343
        gbc.setState(0x2827, 0x9eac, 0xd2c0, 0x40b0, 0x5d6e, 0x12c2, 0x1, 0x0);
        gbc.writeMem(0x2827, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9eac);
        EXPECT(gbc.pc(), 0x2828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0344
        gbc.setState(0x934e, 0x1c45, 0x93e0, 0x7958, 0xcb87, 0x3e96, 0x1, 0x0);
        gbc.writeMem(0x934e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x1c45);
        EXPECT(gbc.pc(), 0x934f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x934e), 0x5a);
        // 5A 0345
        gbc.setState(0x52b9, 0x7568, 0x1850, 0x1d31, 0x9367, 0x1d9c, 0x0, 0x0);
        gbc.writeMem(0x52b9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7568);
        EXPECT(gbc.pc(), 0x52ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0346
        gbc.setState(0x8597, 0x9cd7, 0xd090, 0x1726, 0x30ec, 0x4afd, 0x0, 0x0);
        gbc.writeMem(0x8597, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9cd7);
        EXPECT(gbc.pc(), 0x8598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8597), 0x5a);
        // 5A 0347
        gbc.setState(0x2c0f, 0x95ee, 0x3c40, 0xd44d, 0x6dba, 0xe180, 0x1, 0x0);
        gbc.writeMem(0x2c0f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x95ee);
        EXPECT(gbc.pc(), 0x2c10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0348
        gbc.setState(0x3a93, 0x25b9, 0x8180, 0x8210, 0x2c3e, 0x72e1, 0x1, 0x1);
        gbc.writeMem(0x3a93, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x25b9);
        EXPECT(gbc.pc(), 0x3a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 034A
        gbc.setState(0x752, 0xd44d, 0x9130, 0xce41, 0x9330, 0x5b9f, 0x1, 0x1);
        gbc.writeMem(0x752, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd44d);
        EXPECT(gbc.pc(), 0x753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 034B
        gbc.setState(0xba19, 0x7d5f, 0xbda0, 0xc514, 0x10d3, 0x6c6d, 0x1, 0x1);
        gbc.writeMem(0xba19, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7d5f);
        EXPECT(gbc.pc(), 0xba1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba19), 0x5a);
        // 5A 034C
        gbc.setState(0x2d6c, 0x28f3, 0x7fd0, 0xf5ea, 0x89c1, 0x678e, 0x1, 0x1);
        gbc.writeMem(0x2d6c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x28f3);
        EXPECT(gbc.pc(), 0x2d6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 034D
        gbc.setState(0x9b56, 0x8861, 0x9fb0, 0x817e, 0x3e9c, 0xa356, 0x0, 0x1);
        gbc.writeMem(0x9b56, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0x9b57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b56), 0x5a);
        // 5A 034E
        gbc.setState(0x871d, 0x3484, 0xa4d0, 0xc4a2, 0x7ef8, 0xcf2b, 0x0, 0x1);
        gbc.writeMem(0x871d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3484);
        EXPECT(gbc.pc(), 0x871e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871d), 0x5a);
        // 5A 034F
        gbc.setState(0x1953, 0xfb6b, 0x25d0, 0x1c78, 0x2337, 0xbadf, 0x0, 0x0);
        gbc.writeMem(0x1953, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb6b);
        EXPECT(gbc.pc(), 0x1954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0350
        gbc.setState(0xe403, 0xd667, 0xa5f0, 0x1e80, 0x238c, 0xad08, 0x1, 0x0);
        gbc.writeMem(0xe403, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd667);
        EXPECT(gbc.pc(), 0xe404);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe403), 0x5a);
        // 5A 0351
        gbc.setState(0x294a, 0x3996, 0x1430, 0x7794, 0xc4f3, 0x9025, 0x0, 0x1);
        gbc.writeMem(0x294a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3996);
        EXPECT(gbc.pc(), 0x294b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0352
        gbc.setState(0x71c, 0xea71, 0x8a50, 0xd0a7, 0xa9dd, 0xcbfa, 0x1, 0x0);
        gbc.writeMem(0x71c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xea71);
        EXPECT(gbc.pc(), 0x71d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0353
        gbc.setState(0x6d50, 0x389e, 0xa4e0, 0x8fc2, 0x2e23, 0xb0e3, 0x1, 0x1);
        gbc.writeMem(0x6d50, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x389e);
        EXPECT(gbc.pc(), 0x6d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0355
        gbc.setState(0x9919, 0x8b73, 0xe150, 0xfa4c, 0xe7f9, 0x1371, 0x0, 0x1);
        gbc.writeMem(0x9919, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8b73);
        EXPECT(gbc.pc(), 0x991a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9919), 0x5a);
        // 5A 0356
        gbc.setState(0x7d80, 0x5239, 0xde80, 0xa359, 0x488c, 0xcb10, 0x1, 0x1);
        gbc.writeMem(0x7d80, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5239);
        EXPECT(gbc.pc(), 0x7d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0357
        gbc.setState(0x9857, 0x8b3e, 0x1ea0, 0x7f02, 0x27a, 0x681c, 0x1, 0x1);
        gbc.writeMem(0x9857, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8b3e);
        EXPECT(gbc.pc(), 0x9858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9857), 0x5a);
        // 5A 0358
        gbc.setState(0x9ba4, 0x62ff, 0xef20, 0xdbe8, 0x6ee7, 0xb19e, 0x1, 0x0);
        gbc.writeMem(0x9ba4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x62ff);
        EXPECT(gbc.pc(), 0x9ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba4), 0x5a);
        // 5A 0359
        gbc.setState(0xce7f, 0x258b, 0x58e0, 0x3e94, 0x277a, 0x3db4, 0x1, 0x0);
        gbc.writeMem(0xce7f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x258b);
        EXPECT(gbc.pc(), 0xce80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7f), 0x5a);
        // 5A 035A
        gbc.setState(0xdf79, 0x981a, 0xbcd0, 0x6a15, 0xcc8c, 0x9c12, 0x1, 0x0);
        gbc.writeMem(0xdf79, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x981a);
        EXPECT(gbc.pc(), 0xdf7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf79), 0x5a);
        // 5A 035B
        gbc.setState(0x178, 0x79e6, 0x18c0, 0xc837, 0xd7f4, 0xa223, 0x1, 0x0);
        gbc.writeMem(0x178, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x79e6);
        EXPECT(gbc.pc(), 0x179);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 035C
        gbc.setState(0xc590, 0x93b5, 0xbd90, 0x1813, 0x6669, 0x393d, 0x0, 0x1);
        gbc.writeMem(0xc590, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x93b5);
        EXPECT(gbc.pc(), 0xc591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc590), 0x5a);
        // 5A 035D
        gbc.setState(0x7832, 0x99f4, 0xee60, 0xbc7a, 0x5957, 0xc4f9, 0x1, 0x0);
        gbc.writeMem(0x7832, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x99f4);
        EXPECT(gbc.pc(), 0x7833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 035E
        gbc.setState(0x8245, 0xedf0, 0x5c50, 0x86f5, 0x95e2, 0x95e0, 0x1, 0x1);
        gbc.writeMem(0x8245, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xedf0);
        EXPECT(gbc.pc(), 0x8246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8245), 0x5a);
        // 5A 035F
        gbc.setState(0x282, 0x16f6, 0xaa40, 0x617b, 0xa317, 0xc29b, 0x1, 0x1);
        gbc.writeMem(0x282, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x16f6);
        EXPECT(gbc.pc(), 0x283);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0360
        gbc.setState(0x850a, 0xa7a, 0xf510, 0x5ba2, 0x6d62, 0x3a9, 0x0, 0x0);
        gbc.writeMem(0x850a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa7a);
        EXPECT(gbc.pc(), 0x850b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x850a), 0x5a);
        // 5A 0361
        gbc.setState(0x4b3b, 0x117c, 0xf320, 0x1015, 0xa70, 0x63e9, 0x1, 0x0);
        gbc.writeMem(0x4b3b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x117c);
        EXPECT(gbc.pc(), 0x4b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0364
        gbc.setState(0xcac8, 0xc5f3, 0x39e0, 0x2a68, 0x305, 0xfcf2, 0x0, 0x0);
        gbc.writeMem(0xcac8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc5f3);
        EXPECT(gbc.pc(), 0xcac9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcac8), 0x5a);
        // 5A 0365
        gbc.setState(0xb935, 0xaad9, 0xee80, 0x6f29, 0xe11f, 0xf41f, 0x1, 0x0);
        gbc.writeMem(0xb935, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xaad9);
        EXPECT(gbc.pc(), 0xb936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb935), 0x5a);
        // 5A 0366
        gbc.setState(0xbf65, 0x5788, 0xefa0, 0x274b, 0xdfea, 0xf1bd, 0x0, 0x1);
        gbc.writeMem(0xbf65, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5788);
        EXPECT(gbc.pc(), 0xbf66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf65), 0x5a);
        // 5A 0367
        gbc.setState(0x205a, 0x6ce7, 0x7610, 0xadb9, 0xe87b, 0x19c5, 0x0, 0x0);
        gbc.writeMem(0x205a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x6ce7);
        EXPECT(gbc.pc(), 0x205b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0368
        gbc.setState(0x98b0, 0xdcdb, 0x1dc0, 0xc2c0, 0x767d, 0xc604, 0x0, 0x1);
        gbc.writeMem(0x98b0, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdcdb);
        EXPECT(gbc.pc(), 0x98b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b0), 0x5a);
        // 5A 0369
        gbc.setState(0xc462, 0x4b60, 0xe380, 0x8eb4, 0x74d3, 0x9fb4, 0x1, 0x0);
        gbc.writeMem(0xc462, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x4b60);
        EXPECT(gbc.pc(), 0xc463);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc462), 0x5a);
        // 5A 036A
        gbc.setState(0x63f2, 0xccd2, 0x1140, 0x2d95, 0xccbd, 0xb845, 0x0, 0x0);
        gbc.writeMem(0x63f2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xccd2);
        EXPECT(gbc.pc(), 0x63f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 036B
        gbc.setState(0xb595, 0x6830, 0xaee0, 0x9ee0, 0x6d82, 0x73bf, 0x0, 0x0);
        gbc.writeMem(0xb595, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6830);
        EXPECT(gbc.pc(), 0xb596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb595), 0x5a);
        // 5A 036C
        gbc.setState(0x8cf9, 0x7c54, 0x57b0, 0x10ef, 0x7682, 0xf3b8, 0x0, 0x0);
        gbc.writeMem(0x8cf9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7c54);
        EXPECT(gbc.pc(), 0x8cfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cf9), 0x5a);
        // 5A 036D
        gbc.setState(0x30c4, 0xddf9, 0x8bc0, 0x72b1, 0x1f2e, 0xb7a0, 0x1, 0x1);
        gbc.writeMem(0x30c4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xddf9);
        EXPECT(gbc.pc(), 0x30c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 036E
        gbc.setState(0x91c8, 0xd0f, 0xe550, 0x5ec2, 0x8ca1, 0xc36b, 0x0, 0x1);
        gbc.writeMem(0x91c8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd0f);
        EXPECT(gbc.pc(), 0x91c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c8), 0x5a);
        // 5A 036F
        gbc.setState(0x492e, 0x3407, 0x9240, 0x86e, 0x2754, 0x8a36, 0x0, 0x0);
        gbc.writeMem(0x492e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3407);
        EXPECT(gbc.pc(), 0x492f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0370
        gbc.setState(0x3fe3, 0xc, 0xa780, 0xa159, 0xf181, 0x949d, 0x0, 0x0);
        gbc.writeMem(0x3fe3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc);
        EXPECT(gbc.pc(), 0x3fe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0371
        gbc.setState(0x629e, 0xb52c, 0xf020, 0xd90c, 0x4dd4, 0xe585, 0x1, 0x0);
        gbc.writeMem(0x629e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb52c);
        EXPECT(gbc.pc(), 0x629f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0372
        gbc.setState(0xae48, 0x34fa, 0x44f0, 0x9b74, 0x92a6, 0xd58b, 0x1, 0x1);
        gbc.writeMem(0xae48, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x34fa);
        EXPECT(gbc.pc(), 0xae49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae48), 0x5a);
        // 5A 0373
        gbc.setState(0x840f, 0x76b6, 0xd10, 0x8225, 0x92a5, 0xa555, 0x0, 0x1);
        gbc.writeMem(0x840f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x76b6);
        EXPECT(gbc.pc(), 0x8410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x840f), 0x5a);
        // 5A 0374
        gbc.setState(0x319, 0xf70d, 0x1e50, 0x381b, 0xe6f1, 0x2ddb, 0x0, 0x1);
        gbc.writeMem(0x319, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf70d);
        EXPECT(gbc.pc(), 0x31a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0376
        gbc.setState(0x9420, 0x90e8, 0x2fa0, 0xe84b, 0x961f, 0xc05b, 0x0, 0x0);
        gbc.writeMem(0x9420, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x90e8);
        EXPECT(gbc.pc(), 0x9421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9420), 0x5a);
        // 5A 0377
        gbc.setState(0x845d, 0xce88, 0xbf90, 0x1ee, 0x1e1a, 0x58d9, 0x1, 0x0);
        gbc.writeMem(0x845d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xce88);
        EXPECT(gbc.pc(), 0x845e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x845d), 0x5a);
        // 5A 0378
        gbc.setState(0x8e25, 0x5dc9, 0xf4c0, 0xaa80, 0x2205, 0x2549, 0x0, 0x1);
        gbc.writeMem(0x8e25, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5dc9);
        EXPECT(gbc.pc(), 0x8e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e25), 0x5a);
        // 5A 0379
        gbc.setState(0xef05, 0x6adb, 0x41f0, 0xa11a, 0xba60, 0x7013, 0x0, 0x1);
        gbc.writeMem(0xef05, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6adb);
        EXPECT(gbc.pc(), 0xef06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef05), 0x5a);
        // 5A 037A
        gbc.setState(0x5d12, 0xa6f9, 0xfb90, 0xc34d, 0x5f0f, 0x5829, 0x0, 0x1);
        gbc.writeMem(0x5d12, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa6f9);
        EXPECT(gbc.pc(), 0x5d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 037B
        gbc.setState(0xabcb, 0xe90c, 0x6960, 0xb854, 0x5dd, 0xedd0, 0x0, 0x0);
        gbc.writeMem(0xabcb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe90c);
        EXPECT(gbc.pc(), 0xabcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabcb), 0x5a);
        // 5A 037C
        gbc.setState(0x9f1c, 0xc2d, 0xf160, 0x9686, 0x4880, 0x2b92, 0x1, 0x0);
        gbc.writeMem(0x9f1c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc2d);
        EXPECT(gbc.pc(), 0x9f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1c), 0x5a);
        // 5A 037D
        gbc.setState(0x224f, 0x6c74, 0xc7d0, 0x686f, 0xbecc, 0xfa8e, 0x1, 0x0);
        gbc.writeMem(0x224f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6c74);
        EXPECT(gbc.pc(), 0x2250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 037E
        gbc.setState(0x8319, 0xaa0d, 0x7990, 0xc8ea, 0x26cd, 0x4442, 0x1, 0x1);
        gbc.writeMem(0x8319, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaa0d);
        EXPECT(gbc.pc(), 0x831a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8319), 0x5a);
        // 5A 037F
        gbc.setState(0xe441, 0x3535, 0xeab0, 0x1d1d, 0x5903, 0x6ef, 0x0, 0x0);
        gbc.writeMem(0xe441, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3535);
        EXPECT(gbc.pc(), 0xe442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe441), 0x5a);
        // 5A 0380
        gbc.setState(0x51d5, 0xb10a, 0x4e70, 0xa21d, 0x7337, 0xf44, 0x0, 0x1);
        gbc.writeMem(0x51d5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb10a);
        EXPECT(gbc.pc(), 0x51d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0381
        gbc.setState(0xbf42, 0x1758, 0xf240, 0x53e6, 0x3162, 0x70ce, 0x0, 0x0);
        gbc.writeMem(0xbf42, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1758);
        EXPECT(gbc.pc(), 0xbf43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf42), 0x5a);
        // 5A 0382
        gbc.setState(0x798e, 0x20f4, 0x1d00, 0xb6ae, 0x57f7, 0xe1af, 0x1, 0x1);
        gbc.writeMem(0x798e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x20f4);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0383
        gbc.setState(0x493b, 0x62e8, 0x2550, 0xac2, 0xeb10, 0xc6c7, 0x1, 0x1);
        gbc.writeMem(0x493b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x62e8);
        EXPECT(gbc.pc(), 0x493c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0384
        gbc.setState(0x409f, 0x80d4, 0xa260, 0x4b42, 0x4844, 0x41ea, 0x1, 0x0);
        gbc.writeMem(0x409f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x80d4);
        EXPECT(gbc.pc(), 0x40a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0385
        gbc.setState(0x8e2e, 0x44bd, 0xc0b0, 0xf727, 0x9d9, 0x44a5, 0x1, 0x1);
        gbc.writeMem(0x8e2e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x44bd);
        EXPECT(gbc.pc(), 0x8e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e2e), 0x5a);
        // 5A 0386
        gbc.setState(0x5956, 0x6d16, 0x9df0, 0x8dc8, 0x5d13, 0xc0c7, 0x0, 0x0);
        gbc.writeMem(0x5956, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6d16);
        EXPECT(gbc.pc(), 0x5957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 0387
        gbc.setState(0x9679, 0xee07, 0x5290, 0x98d7, 0xfdd4, 0x3f55, 0x1, 0x0);
        gbc.writeMem(0x9679, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xee07);
        EXPECT(gbc.pc(), 0x967a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9679), 0x5a);
        // 5A 0388
        gbc.setState(0xbe9f, 0xe3f9, 0x86d0, 0x4c24, 0xdbd1, 0x8218, 0x0, 0x1);
        gbc.writeMem(0xbe9f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe3f9);
        EXPECT(gbc.pc(), 0xbea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9f), 0x5a);
        // 5A 0389
        gbc.setState(0xaffb, 0x78e7, 0x1a20, 0x39d1, 0x2b84, 0xc76, 0x0, 0x0);
        gbc.writeMem(0xaffb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x78e7);
        EXPECT(gbc.pc(), 0xaffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaffb), 0x5a);
        // 5A 038A
        gbc.setState(0x1295, 0x6f70, 0x3750, 0x67fc, 0xa90c, 0xe6d2, 0x1, 0x1);
        gbc.writeMem(0x1295, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x6f70);
        EXPECT(gbc.pc(), 0x1296);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 038B
        gbc.setState(0x6425, 0x78c6, 0xbe30, 0xc83f, 0x61bd, 0x7a50, 0x1, 0x0);
        gbc.writeMem(0x6425, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x78c6);
        EXPECT(gbc.pc(), 0x6426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 038C
        gbc.setState(0xd12d, 0xdba3, 0x6c40, 0xe9de, 0x7909, 0x99f5, 0x1, 0x0);
        gbc.writeMem(0xd12d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdba3);
        EXPECT(gbc.pc(), 0xd12e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd12d), 0x5a);
        // 5A 038D
        gbc.setState(0x57ca, 0xec6f, 0xd8c0, 0x94f0, 0x2da1, 0x9170, 0x1, 0x1);
        gbc.writeMem(0x57ca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xec6f);
        EXPECT(gbc.pc(), 0x57cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 038E
        gbc.setState(0x846f, 0x888e, 0x9180, 0x650e, 0xc1d8, 0xcfe4, 0x1, 0x0);
        gbc.writeMem(0x846f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x888e);
        EXPECT(gbc.pc(), 0x8470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x846f), 0x5a);
        // 5A 038F
        gbc.setState(0x86ac, 0x192, 0x430, 0xac1, 0x26af, 0x5a37, 0x0, 0x1);
        gbc.writeMem(0x86ac, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x192);
        EXPECT(gbc.pc(), 0x86ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ac), 0x5a);
        // 5A 0390
        gbc.setState(0xcff, 0xbc46, 0x3bc0, 0x5f01, 0x259, 0xc405, 0x0, 0x0);
        gbc.writeMem(0xcff, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbc46);
        EXPECT(gbc.pc(), 0xd00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0391
        gbc.setState(0x3535, 0x203e, 0xaec0, 0xea61, 0x88cc, 0xcf96, 0x0, 0x0);
        gbc.writeMem(0x3535, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x203e);
        EXPECT(gbc.pc(), 0x3536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 0392
        gbc.setState(0x6a3, 0xf38c, 0x7c50, 0x14e9, 0xe2a5, 0xb00b, 0x0, 0x0);
        gbc.writeMem(0x6a3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf38c);
        EXPECT(gbc.pc(), 0x6a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0393
        gbc.setState(0xb469, 0xecea, 0x4b70, 0xb26f, 0x1d74, 0xa51, 0x1, 0x1);
        gbc.writeMem(0xb469, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xecea);
        EXPECT(gbc.pc(), 0xb46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb469), 0x5a);
        // 5A 0394
        gbc.setState(0x1884, 0x13c3, 0xb3a0, 0x318d, 0x6d72, 0x4b7d, 0x0, 0x0);
        gbc.writeMem(0x1884, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x13c3);
        EXPECT(gbc.pc(), 0x1885);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0395
        gbc.setState(0x8169, 0xfa24, 0x2d10, 0xe72e, 0x132d, 0x70b, 0x0, 0x0);
        gbc.writeMem(0x8169, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xfa24);
        EXPECT(gbc.pc(), 0x816a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8169), 0x5a);
        // 5A 0396
        gbc.setState(0x6c5b, 0x5866, 0xdea0, 0x7803, 0x126b, 0xf6e6, 0x0, 0x0);
        gbc.writeMem(0x6c5b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5866);
        EXPECT(gbc.pc(), 0x6c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 0397
        gbc.setState(0x5720, 0xb3b5, 0xe510, 0x1f2, 0x4896, 0x95e9, 0x1, 0x0);
        gbc.writeMem(0x5720, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb3b5);
        EXPECT(gbc.pc(), 0x5721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 0398
        gbc.setState(0xc4cb, 0xe80, 0xa5c0, 0x6285, 0x6579, 0x87c6, 0x0, 0x1);
        gbc.writeMem(0xc4cb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe80);
        EXPECT(gbc.pc(), 0xc4cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4cb), 0x5a);
        // 5A 039A
        gbc.setState(0xea1e, 0x5f09, 0xc3c0, 0xc803, 0x77f, 0xc288, 0x0, 0x1);
        gbc.writeMem(0xea1e, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5f09);
        EXPECT(gbc.pc(), 0xea1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea1e), 0x5a);
        // 5A 039B
        gbc.setState(0x5af1, 0x9094, 0xfb50, 0x8caf, 0xfe0b, 0xe8f6, 0x1, 0x1);
        gbc.writeMem(0x5af1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9094);
        EXPECT(gbc.pc(), 0x5af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 039C
        gbc.setState(0xbd79, 0x17d2, 0xb0d0, 0x2c4b, 0x5d02, 0xd2cb, 0x1, 0x0);
        gbc.writeMem(0xbd79, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x17d2);
        EXPECT(gbc.pc(), 0xbd7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd79), 0x5a);
        // 5A 039D
        gbc.setState(0x59ef, 0x60da, 0x9430, 0x503a, 0xba79, 0x8629, 0x1, 0x0);
        gbc.writeMem(0x59ef, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x60da);
        EXPECT(gbc.pc(), 0x59f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 039E
        gbc.setState(0xc6f1, 0xb40a, 0x2f50, 0xdd19, 0xefab, 0x1852, 0x0, 0x1);
        gbc.writeMem(0xc6f1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb40a);
        EXPECT(gbc.pc(), 0xc6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6f1), 0x5a);
        // 5A 039F
        gbc.setState(0x8fb4, 0x8133, 0x6b80, 0xb958, 0xeadf, 0xaf93, 0x1, 0x0);
        gbc.writeMem(0x8fb4, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8133);
        EXPECT(gbc.pc(), 0x8fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb4), 0x5a);
        // 5A 03A0
        gbc.setState(0xefca, 0x69dd, 0x9b00, 0x2cfd, 0x6b93, 0x855b, 0x0, 0x1);
        gbc.writeMem(0xefca, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x69dd);
        EXPECT(gbc.pc(), 0xefcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefca), 0x5a);
        // 5A 03A1
        gbc.setState(0x9e1b, 0x55f6, 0xe3e0, 0xcd86, 0xa700, 0x11aa, 0x0, 0x0);
        gbc.writeMem(0x9e1b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x55f6);
        EXPECT(gbc.pc(), 0x9e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e1b), 0x5a);
        // 5A 03A2
        gbc.setState(0x3bba, 0xa295, 0x74e0, 0xafd3, 0x9728, 0x90b1, 0x1, 0x0);
        gbc.writeMem(0x3bba, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa295);
        EXPECT(gbc.pc(), 0x3bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03A3
        gbc.setState(0x8307, 0xa7d6, 0xbc00, 0x1aee, 0xe9d4, 0x2071, 0x1, 0x1);
        gbc.writeMem(0x8307, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xa7d6);
        EXPECT(gbc.pc(), 0x8308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8307), 0x5a);
        // 5A 03A4
        gbc.setState(0xbc65, 0xce04, 0x2340, 0x4c67, 0xdcea, 0xacdd, 0x1, 0x1);
        gbc.writeMem(0xbc65, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xce04);
        EXPECT(gbc.pc(), 0xbc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc65), 0x5a);
        // 5A 03A6
        gbc.setState(0x443a, 0x8953, 0x1b60, 0x32d1, 0x4061, 0xac2d, 0x0, 0x1);
        gbc.writeMem(0x443a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8953);
        EXPECT(gbc.pc(), 0x443b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03A8
        gbc.setState(0xea38, 0x5f, 0x7ea0, 0x9e88, 0x194d, 0x617c, 0x0, 0x1);
        gbc.writeMem(0xea38, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5f);
        EXPECT(gbc.pc(), 0xea39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea38), 0x5a);
        // 5A 03A9
        gbc.setState(0xe795, 0xb02b, 0xb3d0, 0x179e, 0xe0ca, 0x5a8b, 0x0, 0x0);
        gbc.writeMem(0xe795, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb02b);
        EXPECT(gbc.pc(), 0xe796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe795), 0x5a);
        // 5A 03AA
        gbc.setState(0x16cd, 0xa9d2, 0xdb40, 0xff91, 0xa8fe, 0xf58d, 0x1, 0x0);
        gbc.writeMem(0x16cd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa9d2);
        EXPECT(gbc.pc(), 0x16ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03AB
        gbc.setState(0x6572, 0xa045, 0x5260, 0xb215, 0xdeea, 0x579f, 0x0, 0x1);
        gbc.writeMem(0x6572, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa045);
        EXPECT(gbc.pc(), 0x6573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03AC
        gbc.setState(0x4c34, 0x62f5, 0x120, 0x96b9, 0x722f, 0x55e3, 0x0, 0x0);
        gbc.writeMem(0x4c34, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x62f5);
        EXPECT(gbc.pc(), 0x4c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03AD
        gbc.setState(0x6ab1, 0xa451, 0xdbb0, 0x390f, 0x63da, 0x6d8, 0x1, 0x1);
        gbc.writeMem(0x6ab1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa451);
        EXPECT(gbc.pc(), 0x6ab2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03AE
        gbc.setState(0x4f26, 0x3d9e, 0x87e0, 0xcfc5, 0x7f67, 0xde37, 0x0, 0x0);
        gbc.writeMem(0x4f26, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3d9e);
        EXPECT(gbc.pc(), 0x4f27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03AF
        gbc.setState(0x8a0c, 0x73b2, 0xf0f0, 0x6b23, 0x1c09, 0xc67c, 0x0, 0x1);
        gbc.writeMem(0x8a0c, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x73b2);
        EXPECT(gbc.pc(), 0x8a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a0c), 0x5a);
        // 5A 03B0
        gbc.setState(0xbe56, 0xe1c3, 0x5070, 0xff96, 0x7d97, 0xfda0, 0x1, 0x1);
        gbc.writeMem(0xbe56, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe1c3);
        EXPECT(gbc.pc(), 0xbe57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe56), 0x5a);
        // 5A 03B1
        gbc.setState(0x3dc7, 0x15e9, 0xa1d0, 0x4701, 0x86b7, 0x4730, 0x1, 0x1);
        gbc.writeMem(0x3dc7, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x15e9);
        EXPECT(gbc.pc(), 0x3dc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 03B2
        gbc.setState(0x1460, 0x123f, 0x2c80, 0xd4a0, 0x7f21, 0xca14, 0x0, 0x0);
        gbc.writeMem(0x1460, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x123f);
        EXPECT(gbc.pc(), 0x1461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03B3
        gbc.setState(0x2668, 0x752b, 0xe170, 0xd533, 0x84e7, 0x4c27, 0x0, 0x1);
        gbc.writeMem(0x2668, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x752b);
        EXPECT(gbc.pc(), 0x2669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03B4
        gbc.setState(0x3a96, 0x1aa8, 0x6df0, 0x88c9, 0x47b5, 0x7b28, 0x0, 0x1);
        gbc.writeMem(0x3a96, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1aa8);
        EXPECT(gbc.pc(), 0x3a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03B5
        gbc.setState(0x254b, 0x5fc9, 0xfa30, 0xfdfe, 0x8d62, 0x76ac, 0x1, 0x1);
        gbc.writeMem(0x254b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5fc9);
        EXPECT(gbc.pc(), 0x254c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03B6
        gbc.setState(0x29f1, 0x9f58, 0xc6e0, 0x6df3, 0x9b94, 0xe2e, 0x0, 0x0);
        gbc.writeMem(0x29f1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9f58);
        EXPECT(gbc.pc(), 0x29f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03B7
        gbc.setState(0x6428, 0x15e7, 0x570, 0x2465, 0x2791, 0xa159, 0x0, 0x0);
        gbc.writeMem(0x6428, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x15e7);
        EXPECT(gbc.pc(), 0x6429);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03B8
        gbc.setState(0x3858, 0x4dcf, 0x4f20, 0x8726, 0xb2f5, 0x6745, 0x1, 0x1);
        gbc.writeMem(0x3858, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4dcf);
        EXPECT(gbc.pc(), 0x3859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03B9
        gbc.setState(0x2708, 0x9af6, 0xb9c0, 0x6d98, 0xc662, 0xcbd8, 0x0, 0x0);
        gbc.writeMem(0x2708, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9af6);
        EXPECT(gbc.pc(), 0x2709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03BA
        gbc.setState(0x6ce9, 0xc837, 0x7480, 0x6532, 0xa423, 0x3cc6, 0x1, 0x1);
        gbc.writeMem(0x6ce9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc837);
        EXPECT(gbc.pc(), 0x6cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03BB
        gbc.setState(0x158f, 0x72d6, 0x43b0, 0x4167, 0xc8d3, 0xc600, 0x0, 0x1);
        gbc.writeMem(0x158f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x72d6);
        EXPECT(gbc.pc(), 0x1590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03BC
        gbc.setState(0x4cc1, 0x6040, 0x480, 0x4f26, 0x75c4, 0x4e4e, 0x0, 0x1);
        gbc.writeMem(0x4cc1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6040);
        EXPECT(gbc.pc(), 0x4cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03BD
        gbc.setState(0x29cb, 0xdbdc, 0xbf00, 0x4c78, 0x96b9, 0xdd27, 0x1, 0x1);
        gbc.writeMem(0x29cb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xdbdc);
        EXPECT(gbc.pc(), 0x29cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03BE
        gbc.setState(0x3ddd, 0x83bf, 0x69b0, 0xa183, 0x367c, 0xd99, 0x0, 0x0);
        gbc.writeMem(0x3ddd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x83bf);
        EXPECT(gbc.pc(), 0x3dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03BF
        gbc.setState(0x14f3, 0x372, 0x5af0, 0xe458, 0x4971, 0xfd86, 0x1, 0x0);
        gbc.writeMem(0x14f3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x372);
        EXPECT(gbc.pc(), 0x14f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03C0
        gbc.setState(0x1c9d, 0x8448, 0x7300, 0xba05, 0x71f0, 0xfa5f, 0x1, 0x0);
        gbc.writeMem(0x1c9d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8448);
        EXPECT(gbc.pc(), 0x1c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03C1
        gbc.setState(0xdea3, 0xee0e, 0x8320, 0x9aa6, 0xf72, 0x6dea, 0x0, 0x1);
        gbc.writeMem(0xdea3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xee0e);
        EXPECT(gbc.pc(), 0xdea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea3), 0x5a);
        // 5A 03C2
        gbc.setState(0x7ea2, 0xd8e3, 0x470, 0x185b, 0x5511, 0x33ba, 0x0, 0x0);
        gbc.writeMem(0x7ea2, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd8e3);
        EXPECT(gbc.pc(), 0x7ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03C3
        gbc.setState(0x7cb3, 0xe85c, 0xfb80, 0x8aaa, 0xbb51, 0x2ea8, 0x1, 0x0);
        gbc.writeMem(0x7cb3, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe85c);
        EXPECT(gbc.pc(), 0x7cb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03C4
        gbc.setState(0x38fc, 0xb385, 0x3460, 0xf552, 0xed2c, 0x3f90, 0x1, 0x0);
        gbc.writeMem(0x38fc, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb385);
        EXPECT(gbc.pc(), 0x38fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03C5
        gbc.setState(0x7838, 0x3ee1, 0xa990, 0x3d22, 0x9d59, 0x5152, 0x1, 0x1);
        gbc.writeMem(0x7838, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3ee1);
        EXPECT(gbc.pc(), 0x7839);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 03C6
        gbc.setState(0x4d52, 0x6c96, 0x6210, 0x9ce6, 0xcbbe, 0xccb3, 0x1, 0x0);
        gbc.writeMem(0x4d52, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6c96);
        EXPECT(gbc.pc(), 0x4d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 03C7
        gbc.setState(0xe8fd, 0xa4c0, 0x68f0, 0xbc4d, 0xd698, 0x9595, 0x1, 0x0);
        gbc.writeMem(0xe8fd, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa4c0);
        EXPECT(gbc.pc(), 0xe8fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8fd), 0x5a);
        // 5A 03C8
        gbc.setState(0x2d62, 0xe2d0, 0xaae0, 0x214, 0x2bfd, 0x8782, 0x0, 0x0);
        gbc.writeMem(0x2d62, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe2d0);
        EXPECT(gbc.pc(), 0x2d63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03C9
        gbc.setState(0x5880, 0xa0ac, 0x1a00, 0x5327, 0x8ea6, 0x35fb, 0x0, 0x0);
        gbc.writeMem(0x5880, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa0ac);
        EXPECT(gbc.pc(), 0x5881);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03CA
        gbc.setState(0xe74a, 0xc560, 0x9fb0, 0x4abb, 0xaa1c, 0xdd13, 0x0, 0x1);
        gbc.writeMem(0xe74a, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc560);
        EXPECT(gbc.pc(), 0xe74b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe74a), 0x5a);
        // 5A 03CB
        gbc.setState(0x9098, 0xa9ea, 0xd360, 0xf840, 0xa71f, 0xaece, 0x1, 0x1);
        gbc.writeMem(0x9098, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa9ea);
        EXPECT(gbc.pc(), 0x9099);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9098), 0x5a);
        // 5A 03CC
        gbc.setState(0x4cb8, 0x8ed9, 0xcb20, 0x9486, 0xcc5b, 0x42fa, 0x1, 0x1);
        gbc.writeMem(0x4cb8, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8ed9);
        EXPECT(gbc.pc(), 0x4cb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03CE
        gbc.setState(0xdcaf, 0x1a86, 0x8340, 0x6768, 0x61ef, 0xd930, 0x0, 0x0);
        gbc.writeMem(0xdcaf, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1a86);
        EXPECT(gbc.pc(), 0xdcb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcaf), 0x5a);
        // 5A 03CF
        gbc.setState(0xedee, 0x55bd, 0xd240, 0x5d3, 0x7800, 0x215d, 0x1, 0x0);
        gbc.writeMem(0xedee, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x55bd);
        EXPECT(gbc.pc(), 0xedef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedee), 0x5a);
        // 5A 03D0
        gbc.setState(0xe253, 0x36f0, 0xbc60, 0xab58, 0xd37f, 0x60, 0x1, 0x0);
        gbc.writeMem(0xe253, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x36f0);
        EXPECT(gbc.pc(), 0xe254);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe253), 0x5a);
        // 5A 03D1
        gbc.setState(0xc557, 0xbb6f, 0x50a0, 0x2c52, 0xe1d2, 0xcb31, 0x0, 0x1);
        gbc.writeMem(0xc557, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbb6f);
        EXPECT(gbc.pc(), 0xc558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc557), 0x5a);
        // 5A 03D2
        gbc.setState(0x5888, 0x835d, 0xd920, 0x63e5, 0xcf8f, 0x958b, 0x1, 0x1);
        gbc.writeMem(0x5888, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x835d);
        EXPECT(gbc.pc(), 0x5889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03D3
        gbc.setState(0xc10d, 0x845, 0x77a0, 0x288f, 0x54a, 0xa780, 0x1, 0x1);
        gbc.writeMem(0xc10d, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x845);
        EXPECT(gbc.pc(), 0xc10e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc10d), 0x5a);
        // 5A 03D4
        gbc.setState(0x312b, 0x92e7, 0x67e0, 0x4b33, 0x27b6, 0x8c4d, 0x1, 0x1);
        gbc.writeMem(0x312b, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x92e7);
        EXPECT(gbc.pc(), 0x312c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03D5
        gbc.setState(0xeb99, 0xc885, 0x2280, 0x4a32, 0xf9ec, 0x48be, 0x1, 0x1);
        gbc.writeMem(0xeb99, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc885);
        EXPECT(gbc.pc(), 0xeb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb99), 0x5a);
        // 5A 03D6
        gbc.setState(0x7316, 0xe4e3, 0xb260, 0x15fb, 0x4b17, 0xb71, 0x0, 0x0);
        gbc.writeMem(0x7316, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe4e3);
        EXPECT(gbc.pc(), 0x7317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03D7
        gbc.setState(0x13d9, 0x314b, 0xc060, 0x423b, 0xc75d, 0xc3d4, 0x0, 0x1);
        gbc.writeMem(0x13d9, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x314b);
        EXPECT(gbc.pc(), 0x13da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03D8
        gbc.setState(0x9a10, 0x9606, 0x5330, 0x2c02, 0x7cc4, 0xa3b3, 0x0, 0x0);
        gbc.writeMem(0x9a10, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9606);
        EXPECT(gbc.pc(), 0x9a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a10), 0x5a);
        // 5A 03D9
        gbc.setState(0xeb49, 0xf294, 0xd330, 0x6f66, 0xdfa3, 0x5e3a, 0x0, 0x1);
        gbc.writeMem(0xeb49, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf294);
        EXPECT(gbc.pc(), 0xeb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb49), 0x5a);
        // 5A 03DA
        gbc.setState(0xd520, 0xb6ae, 0xf480, 0xc802, 0x5637, 0xa2eb, 0x0, 0x0);
        gbc.writeMem(0xd520, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb6ae);
        EXPECT(gbc.pc(), 0xd521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd520), 0x5a);
        // 5A 03DB
        gbc.setState(0x87f1, 0x84c9, 0xc330, 0x7053, 0xb722, 0xa7ff, 0x0, 0x1);
        gbc.writeMem(0x87f1, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x84c9);
        EXPECT(gbc.pc(), 0x87f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f1), 0x5a);
        // 5A 03DC
        gbc.setState(0x1138, 0xa3dd, 0x5960, 0x1538, 0x4837, 0x7fae, 0x0, 0x1);
        gbc.writeMem(0x1138, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa3dd);
        EXPECT(gbc.pc(), 0x1139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 5A 03DD
        gbc.setState(0x3152, 0x8623, 0x42c0, 0x5de3, 0xa414, 0x9c35, 0x1, 0x1);
        gbc.writeMem(0x3152, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8623);
        EXPECT(gbc.pc(), 0x3153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 5A 03DE
        gbc.setState(0xcfeb, 0xa362, 0x2ab0, 0x55bc, 0x94a0, 0x69a4, 0x0, 0x0);
        gbc.writeMem(0xcfeb, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa362);
        EXPECT(gbc.pc(), 0xcfec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfeb), 0x5a);
        // 5A 03DF
        gbc.setState(0xef04, 0x6350, 0x1510, 0xbe06, 0x1357, 0xb8ae, 0x0, 0x1);
        gbc.writeMem(0xef04, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6350);
        EXPECT(gbc.pc(), 0xef05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef04), 0x5a);
        // 5A 03E0
        gbc.setState(0x5d8f, 0x3490, 0xbad0, 0x3ad3, 0x11ee, 0xcee4, 0x1, 0x1);
        gbc.writeMem(0x5d8f, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3490);
        EXPECT(gbc.pc(), 0x5d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 03E1
        gbc.setState(0xa892, 0xef2a, 0x6890, 0x4b35, 0xd2da, 0x858a, 0x1, 0x0);
        gbc.writeMem(0xa892, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xef2a);
        EXPECT(gbc.pc(), 0xa893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa892), 0x5a);
        // 5A 03E2
        gbc.setState(0xbcb5, 0x9dee, 0x3300, 0xc3ac, 0xc0ce, 0x9893, 0x0, 0x1);
        gbc.writeMem(0xbcb5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9dee);
        EXPECT(gbc.pc(), 0xbcb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb5), 0x5a);
        // 5A 03E3
        gbc.setState(0xe379, 0x86ef, 0xbf20, 0x5605, 0xbd2a, 0x412a, 0x1, 0x1);
        gbc.writeMem(0xe379, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x86ef);
        EXPECT(gbc.pc(), 0xe37a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe379), 0x5a);
        // 5A 03E5
        gbc.setState(0x6363, 0x4dac, 0x49d0, 0x4018, 0xffff, 0xefc, 0x1, 0x1);
        gbc.writeMem(0x6363, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4dac);
        EXPECT(gbc.pc(), 0x6364);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 5A 03E6
        gbc.setState(0x7090, 0x18e5, 0xccf0, 0xf225, 0x3483, 0xfa27, 0x0, 0x0);
        gbc.writeMem(0x7090, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x18e5);
        EXPECT(gbc.pc(), 0x7091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 5A 03E7
        gbc.setState(0xedc5, 0xe78b, 0x4060, 0xb8cc, 0x462, 0x3cc2, 0x1, 0x0);
        gbc.writeMem(0xedc5, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe78b);
        EXPECT(gbc.pc(), 0xedc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedc5), 0x5a);
    }
}
#endif
