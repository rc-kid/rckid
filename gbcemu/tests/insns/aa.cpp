#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_aa)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_aa) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // AA 0000
        gbc.setState(0xc6ee, 0x978b, 0xa9f0, 0x70cb, 0xbe92, 0x86ca, 0x1, 0x1);
        gbc.writeMem(0xc6ee, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x978b);
        EXPECT(gbc.pc(), 0xc6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ee), 0xaa);
        // AA 0001
        gbc.setState(0xe564, 0xc0c9, 0xd120, 0xa1fc, 0x226a, 0x8743, 0x1, 0x1);
        gbc.writeMem(0xe564, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc0c9);
        EXPECT(gbc.pc(), 0xe565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe564), 0xaa);
        // AA 0002
        gbc.setState(0x181d, 0x1992, 0xf9e0, 0x1734, 0x7c41, 0x62de, 0x0, 0x0);
        gbc.writeMem(0x181d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1992);
        EXPECT(gbc.pc(), 0x181e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0003
        gbc.setState(0xeb0, 0x893b, 0x8de0, 0xca64, 0x6b8, 0xb145, 0x0, 0x1);
        gbc.writeMem(0xeb0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x893b);
        EXPECT(gbc.pc(), 0xeb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0004
        gbc.setState(0x87c7, 0x2204, 0xe8d0, 0x893c, 0xb4f4, 0xd0e3, 0x1, 0x1);
        gbc.writeMem(0x87c7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2204);
        EXPECT(gbc.pc(), 0x87c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87c7), 0xaa);
        // AA 0006
        gbc.setState(0x4bc7, 0xc501, 0xe060, 0x6bbb, 0x72d8, 0x1a36, 0x1, 0x0);
        gbc.writeMem(0x4bc7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc501);
        EXPECT(gbc.pc(), 0x4bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0007
        gbc.setState(0x3e67, 0x9dbe, 0x4c40, 0x95b2, 0x2f6d, 0xf916, 0x0, 0x0);
        gbc.writeMem(0x3e67, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9dbe);
        EXPECT(gbc.pc(), 0x3e68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0008
        gbc.setState(0x3c36, 0x8ec2, 0x4150, 0x855d, 0x78ba, 0xad8a, 0x0, 0x1);
        gbc.writeMem(0x3c36, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8ec2);
        EXPECT(gbc.pc(), 0x3c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0009
        gbc.setState(0xc63a, 0x8976, 0xe120, 0xba93, 0x2b19, 0x9c73, 0x0, 0x0);
        gbc.writeMem(0xc63a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8976);
        EXPECT(gbc.pc(), 0xc63b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63a), 0xaa);
        // AA 000A
        gbc.setState(0x343a, 0x579b, 0x2d60, 0xc98a, 0x4b86, 0x2055, 0x0, 0x0);
        gbc.writeMem(0x343a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x579b);
        EXPECT(gbc.pc(), 0x343b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 000B
        gbc.setState(0x9f5c, 0x899a, 0x7480, 0x4f0, 0xf35e, 0x791b, 0x0, 0x0);
        gbc.writeMem(0x9f5c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x899a);
        EXPECT(gbc.pc(), 0x9f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5c), 0xaa);
        // AA 000C
        gbc.setState(0xaa43, 0x65c3, 0x96a0, 0x1545, 0x3bf6, 0xec38, 0x1, 0x0);
        gbc.writeMem(0xaa43, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x65c3);
        EXPECT(gbc.pc(), 0xaa44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa43), 0xaa);
        // AA 000D
        gbc.setState(0x7ccc, 0x1950, 0x8a10, 0x6dd5, 0x7a80, 0x868a, 0x1, 0x1);
        gbc.writeMem(0x7ccc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1950);
        EXPECT(gbc.pc(), 0x7ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 000E
        gbc.setState(0x50bd, 0xf7d8, 0x88b0, 0x9b2b, 0x15e2, 0x609b, 0x1, 0x0);
        gbc.writeMem(0x50bd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf7d8);
        EXPECT(gbc.pc(), 0x50be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 000F
        gbc.setState(0x2044, 0xccdf, 0x4dc0, 0x80da, 0x79ab, 0x6780, 0x0, 0x1);
        gbc.writeMem(0x2044, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xccdf);
        EXPECT(gbc.pc(), 0x2045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0010
        gbc.setState(0x768a, 0x75bd, 0x1310, 0x5b6f, 0x45f4, 0x1ff1, 0x0, 0x0);
        gbc.writeMem(0x768a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x75bd);
        EXPECT(gbc.pc(), 0x768b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0011
        gbc.setState(0x1ba1, 0xe019, 0x20e0, 0x4415, 0xdda4, 0x43bf, 0x1, 0x1);
        gbc.writeMem(0x1ba1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe019);
        EXPECT(gbc.pc(), 0x1ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0012
        gbc.setState(0x3b41, 0x4cbc, 0xb110, 0x4e76, 0x76e0, 0x3292, 0x0, 0x1);
        gbc.writeMem(0x3b41, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4cbc);
        EXPECT(gbc.pc(), 0x3b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0013
        gbc.setState(0x54ea, 0x168d, 0xab70, 0xef2c, 0xd8fc, 0x70c, 0x0, 0x0);
        gbc.writeMem(0x54ea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x168d);
        EXPECT(gbc.pc(), 0x54eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0014
        gbc.setState(0x7929, 0x1459, 0xbf50, 0x8cb, 0xdae7, 0x6610, 0x0, 0x0);
        gbc.writeMem(0x7929, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1459);
        EXPECT(gbc.pc(), 0x792a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0015
        gbc.setState(0x2bf7, 0xb8fd, 0xd250, 0xdfd1, 0x182, 0xd51d, 0x1, 0x1);
        gbc.writeMem(0x2bf7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0016
        gbc.setState(0xa6e4, 0x9d39, 0x3f70, 0x9e51, 0x765a, 0x5e95, 0x0, 0x0);
        gbc.writeMem(0xa6e4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9d39);
        EXPECT(gbc.pc(), 0xa6e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e4), 0xaa);
        // AA 0017
        gbc.setState(0x260d, 0x7af6, 0x68a0, 0xcd92, 0xb304, 0x8f18, 0x1, 0x0);
        gbc.writeMem(0x260d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7af6);
        EXPECT(gbc.pc(), 0x260e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0018
        gbc.setState(0x997f, 0x9159, 0xaae0, 0x9bac, 0x7f31, 0xe838, 0x1, 0x1);
        gbc.writeMem(0x997f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9159);
        EXPECT(gbc.pc(), 0x9980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x997f), 0xaa);
        // AA 0019
        gbc.setState(0x181, 0xba42, 0x3930, 0xfca1, 0xb171, 0xf32e, 0x1, 0x0);
        gbc.writeMem(0x181, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xba42);
        EXPECT(gbc.pc(), 0x182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 001A
        gbc.setState(0x1619, 0xd014, 0x1790, 0xfb2b, 0xc39c, 0x7e81, 0x0, 0x1);
        gbc.writeMem(0x1619, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd014);
        EXPECT(gbc.pc(), 0x161a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 001B
        gbc.setState(0x3887, 0x4e0, 0x8de0, 0x69e0, 0x3851, 0x1b7a, 0x0, 0x1);
        gbc.writeMem(0x3887, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4e0);
        EXPECT(gbc.pc(), 0x3888);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 001C
        gbc.setState(0x1186, 0x3077, 0xb350, 0x5868, 0x69b1, 0x2228, 0x0, 0x0);
        gbc.writeMem(0x1186, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3077);
        EXPECT(gbc.pc(), 0x1187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 001D
        gbc.setState(0x7e93, 0xdc2f, 0xf140, 0xdb96, 0xcab9, 0x8f5f, 0x1, 0x1);
        gbc.writeMem(0x7e93, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xdc2f);
        EXPECT(gbc.pc(), 0x7e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 001F
        gbc.setState(0x2edc, 0xe0fe, 0x7da0, 0xc958, 0x6b01, 0x3339, 0x0, 0x1);
        gbc.writeMem(0x2edc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe0fe);
        EXPECT(gbc.pc(), 0x2edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0020
        gbc.setState(0x6f83, 0x6e18, 0xb070, 0x7c33, 0xbc05, 0x7df1, 0x0, 0x0);
        gbc.writeMem(0x6f83, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6e18);
        EXPECT(gbc.pc(), 0x6f84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0021
        gbc.setState(0xb762, 0x8b9f, 0x4340, 0x4ff3, 0xe98f, 0x98e9, 0x0, 0x0);
        gbc.writeMem(0xb762, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8b9f);
        EXPECT(gbc.pc(), 0xb763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb762), 0xaa);
        // AA 0022
        gbc.setState(0x47c6, 0x4302, 0x69f0, 0x2c0e, 0xd630, 0xc1d0, 0x0, 0x1);
        gbc.writeMem(0x47c6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x4302);
        EXPECT(gbc.pc(), 0x47c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0024
        gbc.setState(0xd44a, 0x9d76, 0x7d50, 0x1474, 0x1d4f, 0x972d, 0x0, 0x1);
        gbc.writeMem(0xd44a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9d76);
        EXPECT(gbc.pc(), 0xd44b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd44a), 0xaa);
        // AA 0025
        gbc.setState(0x916d, 0x1fcd, 0x3230, 0x3969, 0x3a6c, 0x7a56, 0x1, 0x0);
        gbc.writeMem(0x916d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1fcd);
        EXPECT(gbc.pc(), 0x916e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916d), 0xaa);
        // AA 0027
        gbc.setState(0x84b7, 0xa482, 0x61c0, 0xd90b, 0xe117, 0xdb68, 0x0, 0x1);
        gbc.writeMem(0x84b7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa482);
        EXPECT(gbc.pc(), 0x84b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84b7), 0xaa);
        // AA 0028
        gbc.setState(0x928, 0x5b38, 0x71f0, 0x7c42, 0x638c, 0xe031, 0x1, 0x1);
        gbc.writeMem(0x928, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5b38);
        EXPECT(gbc.pc(), 0x929);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0029
        gbc.setState(0x63a1, 0x261e, 0xfa50, 0xed21, 0x42ee, 0xd5ad, 0x1, 0x0);
        gbc.writeMem(0x63a1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x261e);
        EXPECT(gbc.pc(), 0x63a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 002A
        gbc.setState(0x2152, 0x79d1, 0xf3c0, 0xc668, 0x872c, 0x7250, 0x0, 0x0);
        gbc.writeMem(0x2152, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x79d1);
        EXPECT(gbc.pc(), 0x2153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 002B
        gbc.setState(0x5b5b, 0x5e9f, 0x18f0, 0xd2e4, 0xae50, 0x8bb3, 0x1, 0x1);
        gbc.writeMem(0x5b5b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5e9f);
        EXPECT(gbc.pc(), 0x5b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 002C
        gbc.setState(0xb754, 0x708a, 0xdbc0, 0xf5bd, 0x347a, 0x1b75, 0x0, 0x1);
        gbc.writeMem(0xb754, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x708a);
        EXPECT(gbc.pc(), 0xb755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb754), 0xaa);
        // AA 002D
        gbc.setState(0x9f20, 0x2f89, 0x23f0, 0xd05c, 0x591d, 0x4bbc, 0x0, 0x0);
        gbc.writeMem(0x9f20, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0x9f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f20), 0xaa);
        // AA 002E
        gbc.setState(0x7dbb, 0x151a, 0x6e0, 0x413b, 0x344d, 0x2834, 0x0, 0x0);
        gbc.writeMem(0x7dbb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x151a);
        EXPECT(gbc.pc(), 0x7dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 002F
        gbc.setState(0xdb73, 0xbf36, 0x3040, 0x62, 0xf83b, 0x8125, 0x0, 0x0);
        gbc.writeMem(0xdb73, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xbf36);
        EXPECT(gbc.pc(), 0xdb74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb73), 0xaa);
        // AA 0030
        gbc.setState(0xb1aa, 0x59ef, 0x5ff0, 0xf1e9, 0xa48d, 0xc548, 0x1, 0x0);
        gbc.writeMem(0xb1aa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x59ef);
        EXPECT(gbc.pc(), 0xb1ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1aa), 0xaa);
        // AA 0031
        gbc.setState(0xa80f, 0xe686, 0x4d50, 0xfc19, 0x276e, 0xfa7b, 0x1, 0x1);
        gbc.writeMem(0xa80f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe686);
        EXPECT(gbc.pc(), 0xa810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa80f), 0xaa);
        // AA 0032
        gbc.setState(0x909e, 0x297a, 0x4ed0, 0xe8b4, 0x29a3, 0x3023, 0x1, 0x0);
        gbc.writeMem(0x909e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x297a);
        EXPECT(gbc.pc(), 0x909f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909e), 0xaa);
        // AA 0033
        gbc.setState(0x7a91, 0x48ee, 0x5300, 0x385, 0x2312, 0x4d96, 0x0, 0x0);
        gbc.writeMem(0x7a91, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x48ee);
        EXPECT(gbc.pc(), 0x7a92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0034
        gbc.setState(0x666, 0xb79c, 0x4320, 0xae6e, 0x32d3, 0xe6cf, 0x1, 0x0);
        gbc.writeMem(0x666, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb79c);
        EXPECT(gbc.pc(), 0x667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0035
        gbc.setState(0x82b7, 0xe358, 0x8200, 0xa683, 0x577e, 0x7bd8, 0x1, 0x1);
        gbc.writeMem(0x82b7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe358);
        EXPECT(gbc.pc(), 0x82b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b7), 0xaa);
        // AA 0036
        gbc.setState(0x82fa, 0x3546, 0xf770, 0xef06, 0x46d6, 0x880d, 0x1, 0x0);
        gbc.writeMem(0x82fa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3546);
        EXPECT(gbc.pc(), 0x82fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82fa), 0xaa);
        // AA 0037
        gbc.setState(0x4026, 0x809, 0xe680, 0x4816, 0xca30, 0xa3f6, 0x1, 0x0);
        gbc.writeMem(0x4026, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x809);
        EXPECT(gbc.pc(), 0x4027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0038
        gbc.setState(0x2125, 0x9d85, 0x88f0, 0x8ad8, 0x6164, 0x462b, 0x1, 0x1);
        gbc.writeMem(0x2125, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9d85);
        EXPECT(gbc.pc(), 0x2126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0039
        gbc.setState(0x1395, 0xa0d7, 0x7540, 0x832c, 0x6d5a, 0xb2fd, 0x0, 0x1);
        gbc.writeMem(0x1395, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa0d7);
        EXPECT(gbc.pc(), 0x1396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 003A
        gbc.setState(0xdd7c, 0x65cc, 0x7540, 0xad25, 0xcdf0, 0xead3, 0x0, 0x0);
        gbc.writeMem(0xdd7c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x65cc);
        EXPECT(gbc.pc(), 0xdd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd7c), 0xaa);
        // AA 003B
        gbc.setState(0x3774, 0x4134, 0x300, 0xd3ae, 0x3fed, 0xd5b2, 0x1, 0x0);
        gbc.writeMem(0x3774, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4134);
        EXPECT(gbc.pc(), 0x3775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 003C
        gbc.setState(0x6e93, 0x1eed, 0x5300, 0x7cbf, 0x6d00, 0x7316, 0x0, 0x0);
        gbc.writeMem(0x6e93, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x1eed);
        EXPECT(gbc.pc(), 0x6e94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 003D
        gbc.setState(0xcd09, 0xb147, 0x9710, 0x1e32, 0xc3c0, 0xfbb6, 0x1, 0x1);
        gbc.writeMem(0xcd09, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb147);
        EXPECT(gbc.pc(), 0xcd0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd09), 0xaa);
        // AA 003E
        gbc.setState(0x535d, 0xa6d7, 0x81a0, 0x4424, 0xf5d1, 0x4ba1, 0x0, 0x0);
        gbc.writeMem(0x535d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa6d7);
        EXPECT(gbc.pc(), 0x535e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 003F
        gbc.setState(0xa265, 0xe0ac, 0x8bf0, 0x542b, 0x7def, 0xc220, 0x1, 0x1);
        gbc.writeMem(0xa265, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe0ac);
        EXPECT(gbc.pc(), 0xa266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa265), 0xaa);
        // AA 0040
        gbc.setState(0xaa75, 0xfdd3, 0xcdd0, 0x8c28, 0x2dd3, 0xa4c0, 0x1, 0x0);
        gbc.writeMem(0xaa75, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xfdd3);
        EXPECT(gbc.pc(), 0xaa76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa75), 0xaa);
        // AA 0041
        gbc.setState(0x1820, 0x2ef8, 0x5390, 0x428c, 0x3db5, 0x908b, 0x0, 0x0);
        gbc.writeMem(0x1820, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2ef8);
        EXPECT(gbc.pc(), 0x1821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0043
        gbc.setState(0xa4b7, 0x1853, 0x76b0, 0x80e1, 0x6ba3, 0xb9f8, 0x1, 0x1);
        gbc.writeMem(0xa4b7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1853);
        EXPECT(gbc.pc(), 0xa4b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b7), 0xaa);
        // AA 0044
        gbc.setState(0xeaed, 0xb4a4, 0xa480, 0xd167, 0x5b49, 0xfaaa, 0x0, 0x1);
        gbc.writeMem(0xeaed, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb4a4);
        EXPECT(gbc.pc(), 0xeaee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaed), 0xaa);
        // AA 0045
        gbc.setState(0xc0c0, 0xa7a1, 0x94a0, 0x3cc0, 0xff1f, 0xded9, 0x1, 0x1);
        gbc.writeMem(0xc0c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa7a1);
        EXPECT(gbc.pc(), 0xc0c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c0), 0xaa);
        // AA 0046
        gbc.setState(0x34ea, 0xd596, 0xb220, 0x8e8, 0x3d9f, 0x1609, 0x0, 0x0);
        gbc.writeMem(0x34ea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd596);
        EXPECT(gbc.pc(), 0x34eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0047
        gbc.setState(0xcff6, 0xa276, 0x8420, 0xfa99, 0x6488, 0x455d, 0x1, 0x0);
        gbc.writeMem(0xcff6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa276);
        EXPECT(gbc.pc(), 0xcff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff6), 0xaa);
        // AA 0048
        gbc.setState(0x59ba, 0x5caf, 0x9b00, 0xc94b, 0xe7de, 0xc8b4, 0x0, 0x1);
        gbc.writeMem(0x59ba, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5caf);
        EXPECT(gbc.pc(), 0x59bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0049
        gbc.setState(0xe8a1, 0x95cd, 0x3e70, 0x35c3, 0xfa22, 0x6ebe, 0x0, 0x1);
        gbc.writeMem(0xe8a1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x95cd);
        EXPECT(gbc.pc(), 0xe8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8a1), 0xaa);
        // AA 004A
        gbc.setState(0x88ae, 0xc90f, 0xcb0, 0x29d7, 0xfbec, 0x1a6f, 0x1, 0x0);
        gbc.writeMem(0x88ae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc90f);
        EXPECT(gbc.pc(), 0x88af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ae), 0xaa);
        // AA 004B
        gbc.setState(0x5e4c, 0x5240, 0x1aa0, 0x3aeb, 0x4212, 0x6a4, 0x0, 0x0);
        gbc.writeMem(0x5e4c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5240);
        EXPECT(gbc.pc(), 0x5e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 004C
        gbc.setState(0x3d95, 0x9efd, 0x5fb0, 0xe179, 0x3d6, 0x62e8, 0x1, 0x1);
        gbc.writeMem(0x3d95, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9efd);
        EXPECT(gbc.pc(), 0x3d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 004D
        gbc.setState(0x144a, 0x572a, 0x6b30, 0x3e25, 0x8ae0, 0xe5, 0x1, 0x1);
        gbc.writeMem(0x144a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x572a);
        EXPECT(gbc.pc(), 0x144b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 004E
        gbc.setState(0xd57, 0x10ca, 0x3470, 0x9ba4, 0x836d, 0x4e52, 0x0, 0x0);
        gbc.writeMem(0xd57, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x10ca);
        EXPECT(gbc.pc(), 0xd58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 004F
        gbc.setState(0xee54, 0x29c3, 0xc710, 0x3f57, 0x8522, 0x6352, 0x0, 0x0);
        gbc.writeMem(0xee54, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x29c3);
        EXPECT(gbc.pc(), 0xee55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee54), 0xaa);
        // AA 0050
        gbc.setState(0x9177, 0x2f25, 0xfdb0, 0x369e, 0xb9a3, 0x1626, 0x1, 0x1);
        gbc.writeMem(0x9177, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2f25);
        EXPECT(gbc.pc(), 0x9178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9177), 0xaa);
        // AA 0051
        gbc.setState(0xa154, 0xa762, 0x3180, 0x413a, 0x9123, 0x9b61, 0x0, 0x0);
        gbc.writeMem(0xa154, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa762);
        EXPECT(gbc.pc(), 0xa155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa154), 0xaa);
        // AA 0052
        gbc.setState(0xaf10, 0xcef2, 0xc40, 0x7a79, 0xe33e, 0x4588, 0x0, 0x1);
        gbc.writeMem(0xaf10, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xcef2);
        EXPECT(gbc.pc(), 0xaf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf10), 0xaa);
        // AA 0053
        gbc.setState(0xef6a, 0xd155, 0x19c0, 0xb6fe, 0x741d, 0x7ad5, 0x0, 0x1);
        gbc.writeMem(0xef6a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd155);
        EXPECT(gbc.pc(), 0xef6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6a), 0xaa);
        // AA 0054
        gbc.setState(0x943b, 0xff4c, 0x34b0, 0x822d, 0xdb05, 0x526, 0x1, 0x1);
        gbc.writeMem(0x943b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xff4c);
        EXPECT(gbc.pc(), 0x943c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x943b), 0xaa);
        // AA 0056
        gbc.setState(0xe931, 0x7dec, 0x7500, 0x3f95, 0x83e2, 0xfd71, 0x0, 0x1);
        gbc.writeMem(0xe931, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7dec);
        EXPECT(gbc.pc(), 0xe932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe931), 0xaa);
        // AA 0057
        gbc.setState(0x4cd6, 0x26f4, 0xb6e0, 0xfeaa, 0x92fe, 0xbc67, 0x0, 0x0);
        gbc.writeMem(0x4cd6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x26f4);
        EXPECT(gbc.pc(), 0x4cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0058
        gbc.setState(0xbeb6, 0x4fa8, 0x8f20, 0x27b, 0x2dd9, 0x44c, 0x1, 0x1);
        gbc.writeMem(0xbeb6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4fa8);
        EXPECT(gbc.pc(), 0xbeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0xaa);
        // AA 0059
        gbc.setState(0x9809, 0x5b6d, 0xc840, 0x42ce, 0x1fc, 0xc90f, 0x0, 0x0);
        gbc.writeMem(0x9809, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5b6d);
        EXPECT(gbc.pc(), 0x980a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9809), 0xaa);
        // AA 005A
        gbc.setState(0x8a0f, 0x470c, 0xd3e0, 0x208f, 0xf193, 0xd845, 0x0, 0x1);
        gbc.writeMem(0x8a0f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x470c);
        EXPECT(gbc.pc(), 0x8a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a0f), 0xaa);
        // AA 005B
        gbc.setState(0x715a, 0x3372, 0xd370, 0x53d1, 0xc0a3, 0x347, 0x1, 0x0);
        gbc.writeMem(0x715a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3372);
        EXPECT(gbc.pc(), 0x715b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 005C
        gbc.setState(0x4fbd, 0x543, 0x3530, 0xbc87, 0xe63, 0x2dbb, 0x0, 0x1);
        gbc.writeMem(0x4fbd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x543);
        EXPECT(gbc.pc(), 0x4fbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 005D
        gbc.setState(0x8af5, 0xb4c0, 0x82d0, 0x95a, 0xd59, 0x7a98, 0x0, 0x1);
        gbc.writeMem(0x8af5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xb4c0);
        EXPECT(gbc.pc(), 0x8af6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af5), 0xaa);
        // AA 005E
        gbc.setState(0x2f29, 0xb9, 0xd260, 0xf19f, 0x72bb, 0x93d9, 0x0, 0x0);
        gbc.writeMem(0x2f29, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb9);
        EXPECT(gbc.pc(), 0x2f2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 005F
        gbc.setState(0xc144, 0x51c1, 0xdae0, 0xee37, 0x4986, 0x654c, 0x1, 0x1);
        gbc.writeMem(0xc144, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x51c1);
        EXPECT(gbc.pc(), 0xc145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc144), 0xaa);
        // AA 0060
        gbc.setState(0x8cd4, 0x4512, 0xf9b0, 0x226d, 0x2432, 0xefb1, 0x0, 0x1);
        gbc.writeMem(0x8cd4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4512);
        EXPECT(gbc.pc(), 0x8cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd4), 0xaa);
        // AA 0061
        gbc.setState(0x7f79, 0x3f38, 0x7210, 0xae7c, 0x965d, 0x61b1, 0x0, 0x0);
        gbc.writeMem(0x7f79, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3f38);
        EXPECT(gbc.pc(), 0x7f7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0062
        gbc.setState(0x3e9c, 0x1287, 0x9410, 0xafd5, 0x57eb, 0xe6ff, 0x0, 0x1);
        gbc.writeMem(0x3e9c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1287);
        EXPECT(gbc.pc(), 0x3e9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0063
        gbc.setState(0x166d, 0x74e6, 0x7260, 0x4d79, 0x6289, 0xb78f, 0x0, 0x1);
        gbc.writeMem(0x166d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x74e6);
        EXPECT(gbc.pc(), 0x166e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0064
        gbc.setState(0x5243, 0xcf19, 0x8c40, 0x6273, 0xb90b, 0xbc69, 0x0, 0x0);
        gbc.writeMem(0x5243, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcf19);
        EXPECT(gbc.pc(), 0x5244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0065
        gbc.setState(0x9d4, 0x62d7, 0xab70, 0x27bb, 0x5120, 0xfb13, 0x0, 0x1);
        gbc.writeMem(0x9d4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x62d7);
        EXPECT(gbc.pc(), 0x9d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0066
        gbc.setState(0x381f, 0xdf5, 0xc3d0, 0xe8d1, 0x46f0, 0xfdd8, 0x0, 0x1);
        gbc.writeMem(0x381f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xdf5);
        EXPECT(gbc.pc(), 0x3820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0067
        gbc.setState(0x350c, 0xc7c1, 0x6760, 0xb94e, 0xc49e, 0x584b, 0x1, 0x1);
        gbc.writeMem(0x350c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc7c1);
        EXPECT(gbc.pc(), 0x350d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0068
        gbc.setState(0x23e5, 0x51c7, 0x7630, 0xaf71, 0xed32, 0xbde5, 0x1, 0x1);
        gbc.writeMem(0x23e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x51c7);
        EXPECT(gbc.pc(), 0x23e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0069
        gbc.setState(0x7bc5, 0x9d42, 0x2670, 0x4cd1, 0x11bc, 0x17ff, 0x1, 0x1);
        gbc.writeMem(0x7bc5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9d42);
        EXPECT(gbc.pc(), 0x7bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 006A
        gbc.setState(0x3ffd, 0xe238, 0x8ae0, 0x2526, 0x231e, 0x2ddd, 0x0, 0x0);
        gbc.writeMem(0x3ffd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe238);
        EXPECT(gbc.pc(), 0x3ffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 006B
        gbc.setState(0xebfc, 0xa97a, 0xf430, 0x349c, 0xc9bd, 0x4ba7, 0x0, 0x0);
        gbc.writeMem(0xebfc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa97a);
        EXPECT(gbc.pc(), 0xebfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebfc), 0xaa);
        // AA 006D
        gbc.setState(0x1654, 0xf319, 0x7150, 0xf39d, 0xbe7b, 0xd0d4, 0x1, 0x1);
        gbc.writeMem(0x1654, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf319);
        EXPECT(gbc.pc(), 0x1655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 006E
        gbc.setState(0xe932, 0xa64f, 0x46f0, 0x1aca, 0x94d7, 0x22ea, 0x0, 0x1);
        gbc.writeMem(0xe932, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa64f);
        EXPECT(gbc.pc(), 0xe933);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe932), 0xaa);
        // AA 006F
        gbc.setState(0x8d69, 0x5b54, 0x9380, 0x6d56, 0x908d, 0x68ed, 0x0, 0x1);
        gbc.writeMem(0x8d69, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5b54);
        EXPECT(gbc.pc(), 0x8d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d69), 0xaa);
        // AA 0070
        gbc.setState(0xa09d, 0xc3a3, 0x52d0, 0x40d3, 0xc21c, 0x1bc3, 0x1, 0x1);
        gbc.writeMem(0xa09d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc3a3);
        EXPECT(gbc.pc(), 0xa09e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa09d), 0xaa);
        // AA 0071
        gbc.setState(0x418c, 0xeb4, 0xdac0, 0x2883, 0xbc4d, 0xe2fa, 0x1, 0x0);
        gbc.writeMem(0x418c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xeb4);
        EXPECT(gbc.pc(), 0x418d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0072
        gbc.setState(0xb0a6, 0x1ebf, 0xb550, 0x9801, 0xb229, 0xf7aa, 0x0, 0x1);
        gbc.writeMem(0xb0a6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1ebf);
        EXPECT(gbc.pc(), 0xb0a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a6), 0xaa);
        // AA 0073
        gbc.setState(0xd24c, 0x455, 0xd650, 0xe5e3, 0xe172, 0x2fb9, 0x1, 0x1);
        gbc.writeMem(0xd24c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x455);
        EXPECT(gbc.pc(), 0xd24d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd24c), 0xaa);
        // AA 0074
        gbc.setState(0x98a1, 0x6de8, 0xdc60, 0x496b, 0xa862, 0xa8d6, 0x1, 0x0);
        gbc.writeMem(0x98a1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6de8);
        EXPECT(gbc.pc(), 0x98a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a1), 0xaa);
        // AA 0075
        gbc.setState(0x16cc, 0x38ca, 0x68e0, 0xbb83, 0x49e0, 0xd558, 0x1, 0x0);
        gbc.writeMem(0x16cc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x38ca);
        EXPECT(gbc.pc(), 0x16cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0076
        gbc.setState(0x902b, 0x3fbf, 0x6be0, 0xa366, 0x6452, 0x237, 0x0, 0x0);
        gbc.writeMem(0x902b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3fbf);
        EXPECT(gbc.pc(), 0x902c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902b), 0xaa);
        // AA 0077
        gbc.setState(0x9405, 0x472e, 0x44f0, 0x150, 0xdac3, 0x4704, 0x0, 0x1);
        gbc.writeMem(0x9405, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x472e);
        EXPECT(gbc.pc(), 0x9406);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9405), 0xaa);
        // AA 0078
        gbc.setState(0x9d4d, 0x36fe, 0x8a70, 0x11f1, 0x576d, 0x4db1, 0x0, 0x1);
        gbc.writeMem(0x9d4d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x36fe);
        EXPECT(gbc.pc(), 0x9d4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d4d), 0xaa);
        // AA 0079
        gbc.setState(0xd517, 0x7aa5, 0x7ec0, 0xd2ee, 0xf404, 0x6254, 0x1, 0x1);
        gbc.writeMem(0xd517, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0xd518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd517), 0xaa);
        // AA 007A
        gbc.setState(0x5573, 0xf268, 0xe60, 0x948, 0x4f05, 0x2d2, 0x0, 0x0);
        gbc.writeMem(0x5573, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf268);
        EXPECT(gbc.pc(), 0x5574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 007B
        gbc.setState(0x9d1e, 0x2e07, 0xa4e0, 0x8288, 0x8838, 0xb1c7, 0x0, 0x1);
        gbc.writeMem(0x9d1e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2e07);
        EXPECT(gbc.pc(), 0x9d1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d1e), 0xaa);
        // AA 007C
        gbc.setState(0x80e5, 0x996c, 0x87a0, 0x99d5, 0x1f94, 0xe691, 0x1, 0x0);
        gbc.writeMem(0x80e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x996c);
        EXPECT(gbc.pc(), 0x80e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e5), 0xaa);
        // AA 007D
        gbc.setState(0xe87e, 0x1b63, 0x85d0, 0xce92, 0x7a71, 0xad77, 0x0, 0x0);
        gbc.writeMem(0xe87e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1b63);
        EXPECT(gbc.pc(), 0xe87f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe87e), 0xaa);
        // AA 007F
        gbc.setState(0x2c6b, 0x5aa2, 0xa20, 0xcdc7, 0x6591, 0x607c, 0x0, 0x1);
        gbc.writeMem(0x2c6b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5aa2);
        EXPECT(gbc.pc(), 0x2c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0080
        gbc.setState(0xe6de, 0xba45, 0x1e00, 0x173, 0x9d6d, 0x8397, 0x0, 0x1);
        gbc.writeMem(0xe6de, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xba45);
        EXPECT(gbc.pc(), 0xe6df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6de), 0xaa);
        // AA 0081
        gbc.setState(0x2b8d, 0x20ac, 0xed30, 0xe992, 0x4751, 0x9d1a, 0x1, 0x1);
        gbc.writeMem(0x2b8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x20ac);
        EXPECT(gbc.pc(), 0x2b8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0082
        gbc.setState(0xbcbe, 0x1f86, 0x9c80, 0xd8d2, 0x824a, 0xd01f, 0x0, 0x1);
        gbc.writeMem(0xbcbe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x1f86);
        EXPECT(gbc.pc(), 0xbcbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcbe), 0xaa);
        // AA 0085
        gbc.setState(0x21cb, 0xed13, 0xf8d0, 0x69ae, 0x828e, 0x2ce0, 0x1, 0x0);
        gbc.writeMem(0x21cb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xed13);
        EXPECT(gbc.pc(), 0x21cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0086
        gbc.setState(0x41fa, 0xd2ab, 0xebd0, 0x307, 0x48fd, 0x7f97, 0x1, 0x0);
        gbc.writeMem(0x41fa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd2ab);
        EXPECT(gbc.pc(), 0x41fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0087
        gbc.setState(0xd1a1, 0xdfcc, 0x98b0, 0x3e97, 0xa3d, 0x234a, 0x0, 0x0);
        gbc.writeMem(0xd1a1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xdfcc);
        EXPECT(gbc.pc(), 0xd1a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a1), 0xaa);
        // AA 0088
        gbc.setState(0xdbaa, 0xd070, 0x1230, 0xe093, 0x431b, 0xa327, 0x0, 0x1);
        gbc.writeMem(0xdbaa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd070);
        EXPECT(gbc.pc(), 0xdbab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbaa), 0xaa);
        // AA 0089
        gbc.setState(0xa186, 0x68f8, 0xcb0, 0x9da1, 0x6607, 0x718b, 0x0, 0x1);
        gbc.writeMem(0xa186, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x68f8);
        EXPECT(gbc.pc(), 0xa187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa186), 0xaa);
        // AA 008A
        gbc.setState(0x63c7, 0xdb41, 0x9c40, 0x75b9, 0x3b1, 0x15cd, 0x1, 0x0);
        gbc.writeMem(0x63c7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdb41);
        EXPECT(gbc.pc(), 0x63c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 008B
        gbc.setState(0xae7c, 0xb1cf, 0xc040, 0x6ba1, 0xeae4, 0xd3e2, 0x1, 0x1);
        gbc.writeMem(0xae7c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb1cf);
        EXPECT(gbc.pc(), 0xae7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7c), 0xaa);
        // AA 008C
        gbc.setState(0x407d, 0x68cf, 0xad80, 0x52eb, 0x15fd, 0xb02, 0x1, 0x0);
        gbc.writeMem(0x407d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x68cf);
        EXPECT(gbc.pc(), 0x407e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 008E
        gbc.setState(0x17c, 0x2173, 0xde80, 0x32e0, 0xc6db, 0xabae, 0x0, 0x1);
        gbc.writeMem(0x17c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2173);
        EXPECT(gbc.pc(), 0x17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 008F
        gbc.setState(0x9a8, 0x88d3, 0x6c00, 0xf216, 0x9ec6, 0x918, 0x1, 0x0);
        gbc.writeMem(0x9a8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x88d3);
        EXPECT(gbc.pc(), 0x9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0090
        gbc.setState(0xe158, 0xe7df, 0x5b00, 0xf2e5, 0x78cc, 0x5470, 0x1, 0x1);
        gbc.writeMem(0xe158, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe7df);
        EXPECT(gbc.pc(), 0xe159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe158), 0xaa);
        // AA 0091
        gbc.setState(0x8023, 0x75bc, 0xdcb0, 0x8235, 0xa7c2, 0x8562, 0x0, 0x1);
        gbc.writeMem(0x8023, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x75bc);
        EXPECT(gbc.pc(), 0x8024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8023), 0xaa);
        // AA 0092
        gbc.setState(0x16bb, 0x5ad9, 0x9870, 0xff53, 0x3ba7, 0x5c0a, 0x1, 0x0);
        gbc.writeMem(0x16bb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5ad9);
        EXPECT(gbc.pc(), 0x16bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0093
        gbc.setState(0x8282, 0x31f8, 0x3fd0, 0x65c7, 0xb59, 0x61c8, 0x0, 0x0);
        gbc.writeMem(0x8282, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x31f8);
        EXPECT(gbc.pc(), 0x8283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8282), 0xaa);
        // AA 0094
        gbc.setState(0x2b3e, 0x35c0, 0x9c10, 0xdd10, 0x4436, 0x5b3c, 0x1, 0x0);
        gbc.writeMem(0x2b3e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x35c0);
        EXPECT(gbc.pc(), 0x2b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0095
        gbc.setState(0x2ef7, 0x7489, 0x7dd0, 0x49e2, 0xd5b1, 0xb50a, 0x0, 0x0);
        gbc.writeMem(0x2ef7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7489);
        EXPECT(gbc.pc(), 0x2ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0096
        gbc.setState(0x1aee, 0xf4e4, 0x66f0, 0x86d9, 0xa0e3, 0x30f5, 0x0, 0x0);
        gbc.writeMem(0x1aee, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf4e4);
        EXPECT(gbc.pc(), 0x1aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0098
        gbc.setState(0xa998, 0xf7f5, 0x1260, 0x9f7b, 0x8ce9, 0x8a20, 0x0, 0x1);
        gbc.writeMem(0xa998, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf7f5);
        EXPECT(gbc.pc(), 0xa999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa998), 0xaa);
        // AA 0099
        gbc.setState(0x1716, 0x38b1, 0xc550, 0x7a84, 0xfe6e, 0x893b, 0x1, 0x1);
        gbc.writeMem(0x1716, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x38b1);
        EXPECT(gbc.pc(), 0x1717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 009A
        gbc.setState(0x9982, 0xe8c5, 0x1140, 0xb2c4, 0x7769, 0xd6e2, 0x0, 0x0);
        gbc.writeMem(0x9982, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe8c5);
        EXPECT(gbc.pc(), 0x9983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9982), 0xaa);
        // AA 009B
        gbc.setState(0x88af, 0xf6c8, 0x8180, 0x7579, 0xaf5, 0x772, 0x0, 0x0);
        gbc.writeMem(0x88af, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf6c8);
        EXPECT(gbc.pc(), 0x88b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88af), 0xaa);
        // AA 009C
        gbc.setState(0xef9a, 0xc20d, 0x1820, 0x2643, 0x3b5e, 0x2115, 0x1, 0x1);
        gbc.writeMem(0xef9a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc20d);
        EXPECT(gbc.pc(), 0xef9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef9a), 0xaa);
        // AA 009D
        gbc.setState(0x1918, 0xbebf, 0xc2b0, 0x24ac, 0xfd3d, 0x409b, 0x1, 0x1);
        gbc.writeMem(0x1918, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xbebf);
        EXPECT(gbc.pc(), 0x1919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 009E
        gbc.setState(0xde91, 0x2087, 0xed10, 0x55ae, 0x3e3f, 0xdf31, 0x1, 0x0);
        gbc.writeMem(0xde91, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2087);
        EXPECT(gbc.pc(), 0xde92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde91), 0xaa);
        // AA 00A0
        gbc.setState(0xa841, 0x2ea5, 0xd9a0, 0x19ef, 0xb44a, 0x40f8, 0x1, 0x1);
        gbc.writeMem(0xa841, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2ea5);
        EXPECT(gbc.pc(), 0xa842);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa841), 0xaa);
        // AA 00A1
        gbc.setState(0x1005, 0xf7dc, 0x6180, 0x8261, 0xae0e, 0x546d, 0x1, 0x0);
        gbc.writeMem(0x1005, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf7dc);
        EXPECT(gbc.pc(), 0x1006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A2
        gbc.setState(0x449, 0xb7c, 0xc150, 0x2743, 0x7a6f, 0x467e, 0x1, 0x1);
        gbc.writeMem(0x449, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb7c);
        EXPECT(gbc.pc(), 0x44a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A3
        gbc.setState(0x5eda, 0xbe, 0x8b90, 0xd849, 0xe24c, 0x9f85, 0x0, 0x0);
        gbc.writeMem(0x5eda, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbe);
        EXPECT(gbc.pc(), 0x5edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A4
        gbc.setState(0x6417, 0xd573, 0xc910, 0x29a0, 0xc397, 0xbefc, 0x1, 0x1);
        gbc.writeMem(0x6417, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd573);
        EXPECT(gbc.pc(), 0x6418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A5
        gbc.setState(0x35e2, 0x2025, 0xcdd0, 0x6ddb, 0xc5af, 0xfc40, 0x1, 0x1);
        gbc.writeMem(0x35e2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2025);
        EXPECT(gbc.pc(), 0x35e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A6
        gbc.setState(0x255d, 0x1c28, 0x1f20, 0xaf, 0x8556, 0x25f4, 0x0, 0x0);
        gbc.writeMem(0x255d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1c28);
        EXPECT(gbc.pc(), 0x255e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A7
        gbc.setState(0x49c9, 0xdc51, 0xf480, 0xebd3, 0x2c52, 0x2f4c, 0x1, 0x1);
        gbc.writeMem(0x49c9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdc51);
        EXPECT(gbc.pc(), 0x49ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00A8
        gbc.setState(0xd157, 0x694b, 0xdba0, 0x5a2d, 0x826, 0x5993, 0x1, 0x1);
        gbc.writeMem(0xd157, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x694b);
        EXPECT(gbc.pc(), 0xd158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd157), 0xaa);
        // AA 00A9
        gbc.setState(0xafa6, 0xfa7b, 0x8290, 0xaca3, 0x8e1e, 0xd4ea, 0x1, 0x0);
        gbc.writeMem(0xafa6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfa7b);
        EXPECT(gbc.pc(), 0xafa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa6), 0xaa);
        // AA 00AA
        gbc.setState(0x4eef, 0xfafc, 0xee50, 0x7958, 0xd341, 0xe9ab, 0x0, 0x0);
        gbc.writeMem(0x4eef, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfafc);
        EXPECT(gbc.pc(), 0x4ef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00AB
        gbc.setState(0x8ba1, 0x6c0f, 0x24f0, 0xb930, 0x6780, 0xafd6, 0x1, 0x0);
        gbc.writeMem(0x8ba1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6c0f);
        EXPECT(gbc.pc(), 0x8ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ba1), 0xaa);
        // AA 00AC
        gbc.setState(0x68dc, 0x5112, 0xa530, 0x84ec, 0x8de5, 0xacf8, 0x1, 0x1);
        gbc.writeMem(0x68dc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5112);
        EXPECT(gbc.pc(), 0x68dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00AD
        gbc.setState(0x3433, 0x3d11, 0xb0e0, 0xc9ea, 0x7336, 0x4cb0, 0x0, 0x0);
        gbc.writeMem(0x3433, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3d11);
        EXPECT(gbc.pc(), 0x3434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00AE
        gbc.setState(0xd609, 0x761c, 0xea90, 0xe9d, 0x1bc8, 0xc5d3, 0x0, 0x0);
        gbc.writeMem(0xd609, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x761c);
        EXPECT(gbc.pc(), 0xd60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd609), 0xaa);
        // AA 00AF
        gbc.setState(0x9dc4, 0x4e95, 0x12b0, 0x902f, 0xdba8, 0x3b2c, 0x1, 0x0);
        gbc.writeMem(0x9dc4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4e95);
        EXPECT(gbc.pc(), 0x9dc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc4), 0xaa);
        // AA 00B0
        gbc.setState(0x90ed, 0x5f98, 0x92a0, 0x4079, 0x5aba, 0x493c, 0x1, 0x0);
        gbc.writeMem(0x90ed, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5f98);
        EXPECT(gbc.pc(), 0x90ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ed), 0xaa);
        // AA 00B1
        gbc.setState(0xce83, 0xde73, 0x91d0, 0xc705, 0x1ea2, 0xcb6e, 0x0, 0x0);
        gbc.writeMem(0xce83, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xde73);
        EXPECT(gbc.pc(), 0xce84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce83), 0xaa);
        // AA 00B2
        gbc.setState(0x17ad, 0x9a7c, 0xae70, 0x9355, 0xb66c, 0xc3e5, 0x1, 0x0);
        gbc.writeMem(0x17ad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9a7c);
        EXPECT(gbc.pc(), 0x17ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00B3
        gbc.setState(0xee86, 0x3a68, 0x6a10, 0x8c86, 0xefb5, 0x121f, 0x1, 0x0);
        gbc.writeMem(0xee86, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3a68);
        EXPECT(gbc.pc(), 0xee87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee86), 0xaa);
        // AA 00B4
        gbc.setState(0xc9ba, 0x1adc, 0x88f0, 0x1827, 0x306d, 0xe731, 0x1, 0x0);
        gbc.writeMem(0xc9ba, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1adc);
        EXPECT(gbc.pc(), 0xc9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ba), 0xaa);
        // AA 00B5
        gbc.setState(0x2a11, 0x2a4d, 0x2450, 0xa74, 0xb466, 0xffec, 0x0, 0x1);
        gbc.writeMem(0x2a11, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2a4d);
        EXPECT(gbc.pc(), 0x2a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00B6
        gbc.setState(0x281a, 0xfaf8, 0x7e40, 0x4218, 0xdedc, 0x807b, 0x1, 0x1);
        gbc.writeMem(0x281a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xfaf8);
        EXPECT(gbc.pc(), 0x281b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00B7
        gbc.setState(0x5f0d, 0xd122, 0x1d80, 0x2d77, 0xd2f5, 0xf939, 0x1, 0x1);
        gbc.writeMem(0x5f0d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd122);
        EXPECT(gbc.pc(), 0x5f0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00B8
        gbc.setState(0x314, 0xccd4, 0xa7c0, 0x128, 0x57cb, 0xa47, 0x0, 0x1);
        gbc.writeMem(0x314, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xccd4);
        EXPECT(gbc.pc(), 0x315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00B9
        gbc.setState(0xa767, 0x2978, 0xe520, 0xbf6a, 0x7195, 0x4abd, 0x0, 0x0);
        gbc.writeMem(0xa767, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2978);
        EXPECT(gbc.pc(), 0xa768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa767), 0xaa);
        // AA 00BC
        gbc.setState(0xd431, 0xd72b, 0x2640, 0xab30, 0x3fc9, 0x1061, 0x1, 0x1);
        gbc.writeMem(0xd431, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd72b);
        EXPECT(gbc.pc(), 0xd432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd431), 0xaa);
        // AA 00BD
        gbc.setState(0x1a6a, 0x6ea8, 0xd390, 0xfc13, 0x7162, 0xa8b, 0x1, 0x1);
        gbc.writeMem(0x1a6a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6ea8);
        EXPECT(gbc.pc(), 0x1a6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00BE
        gbc.setState(0xcc21, 0x4246, 0xb800, 0x3c0, 0x61bc, 0xa59a, 0x0, 0x1);
        gbc.writeMem(0xcc21, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4246);
        EXPECT(gbc.pc(), 0xcc22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc21), 0xaa);
        // AA 00C0
        gbc.setState(0xe3, 0xf8f6, 0x35c0, 0xf73, 0x4f6d, 0x7add, 0x0, 0x0);
        gbc.writeMem(0xe3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf8f6);
        EXPECT(gbc.pc(), 0xe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C1
        gbc.setState(0x3ae4, 0x42dd, 0xdc00, 0xf581, 0xc9dc, 0xf652, 0x0, 0x0);
        gbc.writeMem(0x3ae4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x42dd);
        EXPECT(gbc.pc(), 0x3ae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C2
        gbc.setState(0xd468, 0x212a, 0xce10, 0x4798, 0xdfe7, 0xfedd, 0x0, 0x1);
        gbc.writeMem(0xd468, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x212a);
        EXPECT(gbc.pc(), 0xd469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd468), 0xaa);
        // AA 00C3
        gbc.setState(0x9a40, 0x4d6f, 0x3ac0, 0x5047, 0xb1d5, 0xeddd, 0x0, 0x0);
        gbc.writeMem(0x9a40, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4d6f);
        EXPECT(gbc.pc(), 0x9a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a40), 0xaa);
        // AA 00C4
        gbc.setState(0x908b, 0x9669, 0x77e0, 0x60ad, 0xd2eb, 0xdd38, 0x0, 0x1);
        gbc.writeMem(0x908b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9669);
        EXPECT(gbc.pc(), 0x908c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908b), 0xaa);
        // AA 00C5
        gbc.setState(0x2e99, 0x7675, 0xdcf0, 0x15bf, 0x262c, 0xcce6, 0x0, 0x1);
        gbc.writeMem(0x2e99, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7675);
        EXPECT(gbc.pc(), 0x2e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C6
        gbc.setState(0x4d58, 0x278c, 0xbb60, 0xbae7, 0xacfc, 0xf786, 0x0, 0x0);
        gbc.writeMem(0x4d58, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x278c);
        EXPECT(gbc.pc(), 0x4d59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C7
        gbc.setState(0x2a26, 0x9130, 0x48f0, 0x23c4, 0x7bd9, 0x46d2, 0x1, 0x1);
        gbc.writeMem(0x2a26, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9130);
        EXPECT(gbc.pc(), 0x2a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C8
        gbc.setState(0x2268, 0xfef8, 0x9370, 0x98d7, 0x4006, 0xc66b, 0x1, 0x0);
        gbc.writeMem(0x2268, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfef8);
        EXPECT(gbc.pc(), 0x2269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00C9
        gbc.setState(0x6412, 0x9184, 0x81d0, 0x8af2, 0x7c59, 0x984c, 0x1, 0x1);
        gbc.writeMem(0x6412, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9184);
        EXPECT(gbc.pc(), 0x6413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00CA
        gbc.setState(0x185c, 0xc1fb, 0x3f30, 0x2236, 0x5330, 0x107c, 0x0, 0x1);
        gbc.writeMem(0x185c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc1fb);
        EXPECT(gbc.pc(), 0x185d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00CC
        gbc.setState(0x162, 0x65a7, 0x2200, 0x1be3, 0xca34, 0x5dfa, 0x0, 0x0);
        gbc.writeMem(0x162, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x65a7);
        EXPECT(gbc.pc(), 0x163);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00CD
        gbc.setState(0x922d, 0xc9ae, 0x33d0, 0x15f1, 0x37e8, 0x3ecc, 0x0, 0x0);
        gbc.writeMem(0x922d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xc9ae);
        EXPECT(gbc.pc(), 0x922e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922d), 0xaa);
        // AA 00CE
        gbc.setState(0x468c, 0x5faa, 0xe870, 0x2d1b, 0x6b37, 0xe38a, 0x0, 0x1);
        gbc.writeMem(0x468c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5faa);
        EXPECT(gbc.pc(), 0x468d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00CF
        gbc.setState(0x9f66, 0x9cec, 0x69c0, 0x713d, 0xc825, 0x74a1, 0x0, 0x0);
        gbc.writeMem(0x9f66, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9cec);
        EXPECT(gbc.pc(), 0x9f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f66), 0xaa);
        // AA 00D0
        gbc.setState(0x1146, 0xa5eb, 0x5af0, 0x7502, 0x8aeb, 0xdbd2, 0x0, 0x0);
        gbc.writeMem(0x1146, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa5eb);
        EXPECT(gbc.pc(), 0x1147);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00D1
        gbc.setState(0x723e, 0xfcb, 0xba0, 0x1b6d, 0xdaa5, 0xdb87, 0x0, 0x0);
        gbc.writeMem(0x723e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfcb);
        EXPECT(gbc.pc(), 0x723f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00D2
        gbc.setState(0x2d27, 0x830b, 0x3a40, 0x56c7, 0xbbae, 0x2002, 0x0, 0x1);
        gbc.writeMem(0x2d27, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x830b);
        EXPECT(gbc.pc(), 0x2d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00D3
        gbc.setState(0xc9e0, 0xb90e, 0xee40, 0xccd8, 0x4cfc, 0xed10, 0x1, 0x1);
        gbc.writeMem(0xc9e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb90e);
        EXPECT(gbc.pc(), 0xc9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e0), 0xaa);
        // AA 00D4
        gbc.setState(0x70dd, 0xf1fd, 0xa520, 0x5a84, 0x9740, 0x5056, 0x0, 0x1);
        gbc.writeMem(0x70dd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf1fd);
        EXPECT(gbc.pc(), 0x70de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00D6
        gbc.setState(0xc3d2, 0xcafa, 0x1390, 0xa564, 0x9669, 0x4604, 0x1, 0x0);
        gbc.writeMem(0xc3d2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcafa);
        EXPECT(gbc.pc(), 0xc3d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d2), 0xaa);
        // AA 00D7
        gbc.setState(0x3754, 0xe570, 0x5290, 0x8c, 0x2c13, 0x9ff4, 0x1, 0x1);
        gbc.writeMem(0x3754, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0x3755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00D8
        gbc.setState(0xef7f, 0x5fde, 0xc280, 0x54f3, 0xa97b, 0x5753, 0x1, 0x1);
        gbc.writeMem(0xef7f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x5fde);
        EXPECT(gbc.pc(), 0xef80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7f), 0xaa);
        // AA 00D9
        gbc.setState(0x8a04, 0x4b6a, 0x3490, 0xc161, 0xb11d, 0x56f4, 0x1, 0x1);
        gbc.writeMem(0x8a04, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4b6a);
        EXPECT(gbc.pc(), 0x8a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a04), 0xaa);
        // AA 00DA
        gbc.setState(0xdadb, 0x6c8d, 0xb240, 0xe720, 0x84b, 0x404f, 0x1, 0x0);
        gbc.writeMem(0xdadb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6c8d);
        EXPECT(gbc.pc(), 0xdadc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdadb), 0xaa);
        // AA 00DC
        gbc.setState(0x1266, 0xcc99, 0xaa80, 0x8e56, 0xcde7, 0xa60, 0x1, 0x0);
        gbc.writeMem(0x1266, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcc99);
        EXPECT(gbc.pc(), 0x1267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00DD
        gbc.setState(0xb415, 0x2281, 0x9c50, 0xc13b, 0x34e7, 0x1390, 0x1, 0x1);
        gbc.writeMem(0xb415, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2281);
        EXPECT(gbc.pc(), 0xb416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb415), 0xaa);
        // AA 00DE
        gbc.setState(0x239a, 0x4ae5, 0x42b0, 0xe850, 0x9, 0x55df, 0x1, 0x1);
        gbc.writeMem(0x239a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4ae5);
        EXPECT(gbc.pc(), 0x239b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00DF
        gbc.setState(0xb6c8, 0xbe31, 0x55c0, 0x829d, 0x3dbe, 0xe6f5, 0x1, 0x1);
        gbc.writeMem(0xb6c8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xbe31);
        EXPECT(gbc.pc(), 0xb6c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c8), 0xaa);
        // AA 00E0
        gbc.setState(0xe481, 0x540a, 0x7430, 0xa5de, 0xd58, 0xd034, 0x1, 0x0);
        gbc.writeMem(0xe481, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x540a);
        EXPECT(gbc.pc(), 0xe482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe481), 0xaa);
        // AA 00E1
        gbc.setState(0x4504, 0xe952, 0xd300, 0x50da, 0x728b, 0xe574, 0x0, 0x0);
        gbc.writeMem(0x4504, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe952);
        EXPECT(gbc.pc(), 0x4505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00E2
        gbc.setState(0xbad8, 0x8aa9, 0x9fb0, 0xc56b, 0xf226, 0xc122, 0x1, 0x1);
        gbc.writeMem(0xbad8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8aa9);
        EXPECT(gbc.pc(), 0xbad9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad8), 0xaa);
        // AA 00E3
        gbc.setState(0xe7fc, 0x4090, 0xd980, 0x8dcb, 0xddbd, 0xdfdd, 0x0, 0x1);
        gbc.writeMem(0xe7fc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4090);
        EXPECT(gbc.pc(), 0xe7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7fc), 0xaa);
        // AA 00E4
        gbc.setState(0x9109, 0x8a4b, 0x1450, 0xaa9e, 0xe2a8, 0x2cdf, 0x0, 0x0);
        gbc.writeMem(0x9109, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8a4b);
        EXPECT(gbc.pc(), 0x910a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9109), 0xaa);
        // AA 00E5
        gbc.setState(0x4cf6, 0x9043, 0xdd80, 0x15ae, 0x54cf, 0x25a5, 0x1, 0x1);
        gbc.writeMem(0x4cf6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9043);
        EXPECT(gbc.pc(), 0x4cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00E6
        gbc.setState(0xc65a, 0x3f64, 0xada0, 0xd6dd, 0x37af, 0x3fe3, 0x0, 0x0);
        gbc.writeMem(0xc65a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3f64);
        EXPECT(gbc.pc(), 0xc65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65a), 0xaa);
        // AA 00E7
        gbc.setState(0x4670, 0x2542, 0x4c00, 0xe517, 0x9845, 0xca9b, 0x1, 0x0);
        gbc.writeMem(0x4670, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2542);
        EXPECT(gbc.pc(), 0x4671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00E9
        gbc.setState(0x840d, 0x5abb, 0xc90, 0x2801, 0x3334, 0x915, 0x0, 0x0);
        gbc.writeMem(0x840d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5abb);
        EXPECT(gbc.pc(), 0x840e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840d), 0xaa);
        // AA 00EA
        gbc.setState(0x844c, 0x4c2e, 0x2e60, 0x1da5, 0x3c81, 0xb58f, 0x0, 0x1);
        gbc.writeMem(0x844c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4c2e);
        EXPECT(gbc.pc(), 0x844d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x844c), 0xaa);
        // AA 00EB
        gbc.setState(0x7e3b, 0x5825, 0x910, 0x5bb9, 0x8002, 0xb28b, 0x1, 0x1);
        gbc.writeMem(0x7e3b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5825);
        EXPECT(gbc.pc(), 0x7e3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00EC
        gbc.setState(0x4fee, 0xe89d, 0xa710, 0xd831, 0x431c, 0xac7d, 0x0, 0x1);
        gbc.writeMem(0x4fee, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe89d);
        EXPECT(gbc.pc(), 0x4fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00ED
        gbc.setState(0x8023, 0xa70c, 0x7740, 0x8d45, 0xec30, 0x997e, 0x1, 0x0);
        gbc.writeMem(0x8023, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa70c);
        EXPECT(gbc.pc(), 0x8024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8023), 0xaa);
        // AA 00EF
        gbc.setState(0x1f78, 0x3af3, 0x23d0, 0xec6d, 0x9ea4, 0x25f, 0x1, 0x0);
        gbc.writeMem(0x1f78, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3af3);
        EXPECT(gbc.pc(), 0x1f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F0
        gbc.setState(0xcc47, 0x14aa, 0xd820, 0x7c06, 0xce6c, 0xc3a, 0x0, 0x0);
        gbc.writeMem(0xcc47, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x14aa);
        EXPECT(gbc.pc(), 0xcc48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc47), 0xaa);
        // AA 00F1
        gbc.setState(0x7837, 0x9cbe, 0xfd50, 0xfee1, 0x25cc, 0x2d9b, 0x1, 0x0);
        gbc.writeMem(0x7837, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9cbe);
        EXPECT(gbc.pc(), 0x7838);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F2
        gbc.setState(0x4e90, 0xb9b4, 0x3040, 0xbdea, 0x4e45, 0x5dfc, 0x0, 0x0);
        gbc.writeMem(0x4e90, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb9b4);
        EXPECT(gbc.pc(), 0x4e91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F3
        gbc.setState(0xeeca, 0xdaf9, 0xf5a0, 0x3940, 0x85d3, 0x1110, 0x0, 0x0);
        gbc.writeMem(0xeeca, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xdaf9);
        EXPECT(gbc.pc(), 0xeecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeca), 0xaa);
        // AA 00F4
        gbc.setState(0x8754, 0xc5b3, 0x4620, 0x3f03, 0x80f1, 0x4d88, 0x1, 0x0);
        gbc.writeMem(0x8754, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc5b3);
        EXPECT(gbc.pc(), 0x8755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8754), 0xaa);
        // AA 00F5
        gbc.setState(0x6380, 0x30e, 0xc3a0, 0x6e8e, 0x194f, 0xd464, 0x1, 0x0);
        gbc.writeMem(0x6380, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x30e);
        EXPECT(gbc.pc(), 0x6381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F7
        gbc.setState(0x5ed0, 0x1341, 0x2360, 0x89b3, 0x7a80, 0x868c, 0x1, 0x1);
        gbc.writeMem(0x5ed0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1341);
        EXPECT(gbc.pc(), 0x5ed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F8
        gbc.setState(0x4975, 0x515c, 0x5720, 0x75d4, 0x193c, 0xc849, 0x1, 0x0);
        gbc.writeMem(0x4975, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x515c);
        EXPECT(gbc.pc(), 0x4976);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00F9
        gbc.setState(0xa333, 0xa3c5, 0xf560, 0xa5d, 0x896f, 0x838e, 0x1, 0x0);
        gbc.writeMem(0xa333, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa3c5);
        EXPECT(gbc.pc(), 0xa334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa333), 0xaa);
        // AA 00FA
        gbc.setState(0x75e1, 0x1876, 0x6be0, 0x96be, 0x8f8a, 0x93ea, 0x0, 0x1);
        gbc.writeMem(0x75e1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1876);
        EXPECT(gbc.pc(), 0x75e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00FB
        gbc.setState(0x4890, 0x7c97, 0xbc00, 0x2cb, 0x119d, 0x35bc, 0x0, 0x1);
        gbc.writeMem(0x4890, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7c97);
        EXPECT(gbc.pc(), 0x4891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00FC
        gbc.setState(0xbc37, 0xc5a, 0x7970, 0x28c9, 0x37aa, 0xa78d, 0x0, 0x0);
        gbc.writeMem(0xbc37, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc5a);
        EXPECT(gbc.pc(), 0xbc38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc37), 0xaa);
        // AA 00FD
        gbc.setState(0x11b8, 0xbcf, 0x87c0, 0xd20f, 0xb521, 0x2f7b, 0x1, 0x1);
        gbc.writeMem(0x11b8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbcf);
        EXPECT(gbc.pc(), 0x11b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00FE
        gbc.setState(0x629d, 0x8ebe, 0xe950, 0x4477, 0x5b0c, 0xb499, 0x0, 0x1);
        gbc.writeMem(0x629d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8ebe);
        EXPECT(gbc.pc(), 0x629e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 00FF
        gbc.setState(0xbc7f, 0x847, 0x30f0, 0x187f, 0x938, 0x7a4a, 0x1, 0x0);
        gbc.writeMem(0xbc7f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x847);
        EXPECT(gbc.pc(), 0xbc80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc7f), 0xaa);
        // AA 0100
        gbc.setState(0x923d, 0x7f87, 0xd8a0, 0x9289, 0x6aea, 0xc9d1, 0x0, 0x1);
        gbc.writeMem(0x923d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7f87);
        EXPECT(gbc.pc(), 0x923e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x923d), 0xaa);
        // AA 0101
        gbc.setState(0xc049, 0x7a57, 0x2220, 0xb336, 0x415c, 0x7e56, 0x1, 0x1);
        gbc.writeMem(0xc049, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7a57);
        EXPECT(gbc.pc(), 0xc04a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc049), 0xaa);
        // AA 0102
        gbc.setState(0xde68, 0x67ee, 0x3d70, 0x3679, 0x6dc1, 0x813d, 0x1, 0x0);
        gbc.writeMem(0xde68, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x67ee);
        EXPECT(gbc.pc(), 0xde69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde68), 0xaa);
        // AA 0103
        gbc.setState(0x7903, 0x255a, 0xb0e0, 0x3219, 0xfc4a, 0x999f, 0x1, 0x0);
        gbc.writeMem(0x7903, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x255a);
        EXPECT(gbc.pc(), 0x7904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0104
        gbc.setState(0x4843, 0x49c9, 0xdee0, 0xe983, 0xc634, 0x7ef5, 0x1, 0x1);
        gbc.writeMem(0x4843, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x49c9);
        EXPECT(gbc.pc(), 0x4844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0105
        gbc.setState(0x23f4, 0xd292, 0xf790, 0x6e58, 0xdbb3, 0x460c, 0x1, 0x1);
        gbc.writeMem(0x23f4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd292);
        EXPECT(gbc.pc(), 0x23f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0106
        gbc.setState(0xa432, 0xad6e, 0xef40, 0xfff2, 0xb5fa, 0xe3d3, 0x1, 0x1);
        gbc.writeMem(0xa432, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xad6e);
        EXPECT(gbc.pc(), 0xa433);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa432), 0xaa);
        // AA 0107
        gbc.setState(0x7187, 0x59, 0xf9e0, 0x2784, 0x9f23, 0x6cd6, 0x1, 0x1);
        gbc.writeMem(0x7187, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x59);
        EXPECT(gbc.pc(), 0x7188);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0108
        gbc.setState(0xbb3d, 0xcdb, 0x44d0, 0x150a, 0x91e8, 0xcb0d, 0x1, 0x1);
        gbc.writeMem(0xbb3d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xcdb);
        EXPECT(gbc.pc(), 0xbb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3d), 0xaa);
        // AA 0109
        gbc.setState(0x512, 0xfe0a, 0x3070, 0x6d8a, 0x3b6b, 0x2fbb, 0x1, 0x1);
        gbc.writeMem(0x512, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfe0a);
        EXPECT(gbc.pc(), 0x513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 010A
        gbc.setState(0x789a, 0x6657, 0x2650, 0x3c79, 0xefe8, 0x3468, 0x1, 0x1);
        gbc.writeMem(0x789a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6657);
        EXPECT(gbc.pc(), 0x789b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 010B
        gbc.setState(0xe092, 0x4e7d, 0x7530, 0xe09f, 0xb219, 0x354d, 0x0, 0x0);
        gbc.writeMem(0xe092, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4e7d);
        EXPECT(gbc.pc(), 0xe093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe092), 0xaa);
        // AA 010C
        gbc.setState(0x614b, 0xac73, 0x1ae0, 0x49f6, 0x9dc7, 0xd9a0, 0x0, 0x1);
        gbc.writeMem(0x614b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xac73);
        EXPECT(gbc.pc(), 0x614c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 010D
        gbc.setState(0x1aab, 0xf3df, 0xf2d0, 0xb467, 0xd3e6, 0xb54a, 0x1, 0x0);
        gbc.writeMem(0x1aab, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf3df);
        EXPECT(gbc.pc(), 0x1aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 010E
        gbc.setState(0x2dd4, 0x6228, 0x4c00, 0xfe16, 0x2121, 0x3815, 0x0, 0x1);
        gbc.writeMem(0x2dd4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6228);
        EXPECT(gbc.pc(), 0x2dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 010F
        gbc.setState(0xc06b, 0xaba3, 0x1080, 0xba05, 0xd550, 0xa026, 0x1, 0x1);
        gbc.writeMem(0xc06b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xaba3);
        EXPECT(gbc.pc(), 0xc06c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc06b), 0xaa);
        // AA 0110
        gbc.setState(0xc603, 0x9368, 0x6b70, 0xb013, 0x7719, 0x4512, 0x1, 0x0);
        gbc.writeMem(0xc603, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9368);
        EXPECT(gbc.pc(), 0xc604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc603), 0xaa);
        // AA 0111
        gbc.setState(0x9bb0, 0x7389, 0xe70, 0x44d0, 0x731c, 0x17a8, 0x0, 0x0);
        gbc.writeMem(0x9bb0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7389);
        EXPECT(gbc.pc(), 0x9bb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb0), 0xaa);
        // AA 0112
        gbc.setState(0xaa83, 0x42dd, 0xc4a0, 0x71ed, 0x86e9, 0x27e5, 0x1, 0x1);
        gbc.writeMem(0xaa83, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x42dd);
        EXPECT(gbc.pc(), 0xaa84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa83), 0xaa);
        // AA 0113
        gbc.setState(0xd987, 0x376e, 0xb360, 0x81b5, 0x3929, 0x7ff, 0x0, 0x0);
        gbc.writeMem(0xd987, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x376e);
        EXPECT(gbc.pc(), 0xd988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd987), 0xaa);
        // AA 0114
        gbc.setState(0x35be, 0xd84b, 0x3db0, 0xcb58, 0x3812, 0x595, 0x0, 0x1);
        gbc.writeMem(0x35be, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd84b);
        EXPECT(gbc.pc(), 0x35bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0115
        gbc.setState(0x74bc, 0xdb01, 0x42c0, 0x7d5b, 0xd944, 0xc1cf, 0x1, 0x0);
        gbc.writeMem(0x74bc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xdb01);
        EXPECT(gbc.pc(), 0x74bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0116
        gbc.setState(0xef12, 0x3e8e, 0xe090, 0x54df, 0x7f9a, 0x6fa, 0x0, 0x1);
        gbc.writeMem(0xef12, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3e8e);
        EXPECT(gbc.pc(), 0xef13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef12), 0xaa);
        // AA 0117
        gbc.setState(0x2718, 0x1893, 0x8f30, 0xdbac, 0xde5, 0xf975, 0x0, 0x1);
        gbc.writeMem(0x2718, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1893);
        EXPECT(gbc.pc(), 0x2719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0118
        gbc.setState(0xaa54, 0x9cdb, 0x7c50, 0x1c3, 0x1628, 0xfc73, 0x1, 0x1);
        gbc.writeMem(0xaa54, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9cdb);
        EXPECT(gbc.pc(), 0xaa55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa54), 0xaa);
        // AA 0119
        gbc.setState(0xce03, 0x352e, 0x9f70, 0xc91, 0xa482, 0x6b65, 0x0, 0x1);
        gbc.writeMem(0xce03, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x352e);
        EXPECT(gbc.pc(), 0xce04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce03), 0xaa);
        // AA 011A
        gbc.setState(0xa8b6, 0x59e4, 0xd690, 0xbdc4, 0x7963, 0xc1f0, 0x1, 0x0);
        gbc.writeMem(0xa8b6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x59e4);
        EXPECT(gbc.pc(), 0xa8b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b6), 0xaa);
        // AA 011B
        gbc.setState(0x9a7a, 0xf328, 0xf0f0, 0xcaad, 0xc5d, 0xec94, 0x0, 0x0);
        gbc.writeMem(0x9a7a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf328);
        EXPECT(gbc.pc(), 0x9a7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a7a), 0xaa);
        // AA 011C
        gbc.setState(0x7e72, 0xbf, 0x1b0, 0x4f64, 0xfbf1, 0x6af2, 0x1, 0x1);
        gbc.writeMem(0x7e72, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbf);
        EXPECT(gbc.pc(), 0x7e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 011D
        gbc.setState(0x5f9f, 0x19ce, 0x8750, 0xee65, 0x9047, 0x8dd3, 0x1, 0x0);
        gbc.writeMem(0x5f9f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x19ce);
        EXPECT(gbc.pc(), 0x5fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 011E
        gbc.setState(0x949c, 0xd8f0, 0x6380, 0x658c, 0xf96d, 0x1b69, 0x0, 0x1);
        gbc.writeMem(0x949c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd8f0);
        EXPECT(gbc.pc(), 0x949d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x949c), 0xaa);
        // AA 011F
        gbc.setState(0x4e0a, 0x7c31, 0x3590, 0xb7ce, 0x9da6, 0x19db, 0x1, 0x1);
        gbc.writeMem(0x4e0a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7c31);
        EXPECT(gbc.pc(), 0x4e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0121
        gbc.setState(0x642c, 0xbc0, 0xde70, 0x7233, 0xd0e, 0xb3de, 0x0, 0x0);
        gbc.writeMem(0x642c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbc0);
        EXPECT(gbc.pc(), 0x642d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0122
        gbc.setState(0x12eb, 0xda5d, 0x9b60, 0xdd3c, 0xf6d9, 0x83b5, 0x1, 0x0);
        gbc.writeMem(0x12eb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xda5d);
        EXPECT(gbc.pc(), 0x12ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0123
        gbc.setState(0x9373, 0x4c72, 0x9550, 0xafee, 0xbb3a, 0x9733, 0x1, 0x1);
        gbc.writeMem(0x9373, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4c72);
        EXPECT(gbc.pc(), 0x9374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9373), 0xaa);
        // AA 0124
        gbc.setState(0xcb8, 0xf44, 0x7e10, 0x7b37, 0x357, 0x47df, 0x1, 0x1);
        gbc.writeMem(0xcb8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf44);
        EXPECT(gbc.pc(), 0xcb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0125
        gbc.setState(0x63ac, 0xaf44, 0xd280, 0x7e13, 0x599b, 0x7e07, 0x1, 0x0);
        gbc.writeMem(0x63ac, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xaf44);
        EXPECT(gbc.pc(), 0x63ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0126
        gbc.setState(0x9f9a, 0x89c1, 0x2700, 0x942, 0x92b6, 0x7d5a, 0x0, 0x1);
        gbc.writeMem(0x9f9a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x89c1);
        EXPECT(gbc.pc(), 0x9f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f9a), 0xaa);
        // AA 0127
        gbc.setState(0x4fec, 0xf8fc, 0x4ec0, 0xbc7e, 0x4588, 0xb092, 0x1, 0x0);
        gbc.writeMem(0x4fec, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf8fc);
        EXPECT(gbc.pc(), 0x4fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0128
        gbc.setState(0x3bac, 0x8e78, 0xd620, 0x55a5, 0x9e2, 0xe02e, 0x0, 0x0);
        gbc.writeMem(0x3bac, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8e78);
        EXPECT(gbc.pc(), 0x3bad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0129
        gbc.setState(0xca6c, 0xef78, 0x3a70, 0xab5c, 0x49a4, 0x4a6a, 0x0, 0x1);
        gbc.writeMem(0xca6c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xef78);
        EXPECT(gbc.pc(), 0xca6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca6c), 0xaa);
        // AA 012A
        gbc.setState(0xe492, 0xe2b5, 0xe760, 0x9e93, 0xb5f9, 0xa4a4, 0x0, 0x0);
        gbc.writeMem(0xe492, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe2b5);
        EXPECT(gbc.pc(), 0xe493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe492), 0xaa);
        // AA 012B
        gbc.setState(0xe477, 0x799f, 0x4300, 0x4ba1, 0x81b2, 0x4875, 0x1, 0x1);
        gbc.writeMem(0xe477, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x799f);
        EXPECT(gbc.pc(), 0xe478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe477), 0xaa);
        // AA 012C
        gbc.setState(0xc342, 0xb257, 0x15b0, 0xed6b, 0x497, 0x3f6a, 0x0, 0x1);
        gbc.writeMem(0xc342, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb257);
        EXPECT(gbc.pc(), 0xc343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc342), 0xaa);
        // AA 012D
        gbc.setState(0x2c2f, 0xf41b, 0xa6a0, 0x901e, 0x6e6e, 0xfd00, 0x1, 0x0);
        gbc.writeMem(0x2c2f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf41b);
        EXPECT(gbc.pc(), 0x2c30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 012E
        gbc.setState(0x67c8, 0x9b9b, 0x6150, 0x88d5, 0xe29d, 0x7a3, 0x0, 0x1);
        gbc.writeMem(0x67c8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9b9b);
        EXPECT(gbc.pc(), 0x67c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 012F
        gbc.setState(0xcf98, 0x9f53, 0x4f50, 0x7b7c, 0x8064, 0x2c33, 0x0, 0x0);
        gbc.writeMem(0xcf98, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9f53);
        EXPECT(gbc.pc(), 0xcf99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf98), 0xaa);
        // AA 0130
        gbc.setState(0x568a, 0x43d5, 0x59c0, 0x27a1, 0x1457, 0xf715, 0x1, 0x1);
        gbc.writeMem(0x568a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x43d5);
        EXPECT(gbc.pc(), 0x568b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0131
        gbc.setState(0xcd1e, 0xd1e5, 0x88b0, 0xbdf0, 0x9489, 0xf9fa, 0x0, 0x1);
        gbc.writeMem(0xcd1e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd1e5);
        EXPECT(gbc.pc(), 0xcd1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd1e), 0xaa);
        // AA 0132
        gbc.setState(0x16e0, 0x9cb8, 0xbca0, 0x6d66, 0xc306, 0x8a8, 0x1, 0x1);
        gbc.writeMem(0x16e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9cb8);
        EXPECT(gbc.pc(), 0x16e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0133
        gbc.setState(0xc834, 0x52c4, 0x41e0, 0xbaa8, 0x6692, 0x24c7, 0x0, 0x1);
        gbc.writeMem(0xc834, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x52c4);
        EXPECT(gbc.pc(), 0xc835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc834), 0xaa);
        // AA 0134
        gbc.setState(0x3009, 0x3473, 0xfb80, 0x82c5, 0x73c, 0x70d3, 0x0, 0x0);
        gbc.writeMem(0x3009, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3473);
        EXPECT(gbc.pc(), 0x300a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0135
        gbc.setState(0x75c3, 0x3f88, 0xa3c0, 0xc061, 0x888e, 0xd381, 0x0, 0x1);
        gbc.writeMem(0x75c3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x3f88);
        EXPECT(gbc.pc(), 0x75c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0136
        gbc.setState(0x4cb5, 0xa85c, 0xd890, 0x8dd8, 0xc6af, 0xa57f, 0x1, 0x1);
        gbc.writeMem(0x4cb5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa85c);
        EXPECT(gbc.pc(), 0x4cb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0137
        gbc.setState(0x6d74, 0x3d23, 0x5ce0, 0x19b7, 0x706f, 0x84be, 0x1, 0x1);
        gbc.writeMem(0x6d74, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3d23);
        EXPECT(gbc.pc(), 0x6d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0138
        gbc.setState(0x73ed, 0x6cf9, 0x95c0, 0x3681, 0x42b7, 0x8472, 0x0, 0x1);
        gbc.writeMem(0x73ed, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x6cf9);
        EXPECT(gbc.pc(), 0x73ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0139
        gbc.setState(0x9465, 0x77a8, 0x8d0, 0x8633, 0x3d90, 0x47ef, 0x1, 0x0);
        gbc.writeMem(0x9465, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x77a8);
        EXPECT(gbc.pc(), 0x9466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9465), 0xaa);
        // AA 013A
        gbc.setState(0xa554, 0xda80, 0xa950, 0xb924, 0x7c0b, 0xcb33, 0x1, 0x1);
        gbc.writeMem(0xa554, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xda80);
        EXPECT(gbc.pc(), 0xa555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa554), 0xaa);
        // AA 013B
        gbc.setState(0x455c, 0xa690, 0x81b0, 0x3dca, 0x7e8e, 0x98f1, 0x1, 0x1);
        gbc.writeMem(0x455c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa690);
        EXPECT(gbc.pc(), 0x455d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 013C
        gbc.setState(0x5eae, 0xff6a, 0x96e0, 0x46be, 0x9d14, 0x16c2, 0x1, 0x0);
        gbc.writeMem(0x5eae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xff6a);
        EXPECT(gbc.pc(), 0x5eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 013D
        gbc.setState(0x18f0, 0x491, 0xb1d0, 0xd280, 0xb51f, 0xab83, 0x1, 0x1);
        gbc.writeMem(0x18f0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x491);
        EXPECT(gbc.pc(), 0x18f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 013F
        gbc.setState(0xad15, 0x9133, 0xdf90, 0x7ba4, 0x2cd1, 0x62e2, 0x1, 0x1);
        gbc.writeMem(0xad15, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9133);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad15), 0xaa);
        // AA 0140
        gbc.setState(0x7f1c, 0xa32e, 0x3f80, 0xc804, 0x88f3, 0x8fe, 0x0, 0x1);
        gbc.writeMem(0x7f1c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa32e);
        EXPECT(gbc.pc(), 0x7f1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0141
        gbc.setState(0xb6f9, 0xd74, 0x26d0, 0x45b4, 0xf5a9, 0x3853, 0x1, 0x1);
        gbc.writeMem(0xb6f9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd74);
        EXPECT(gbc.pc(), 0xb6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f9), 0xaa);
        // AA 0142
        gbc.setState(0x183, 0x309a, 0x3310, 0x7b07, 0x51b2, 0x7599, 0x0, 0x0);
        gbc.writeMem(0x183, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x309a);
        EXPECT(gbc.pc(), 0x184);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0143
        gbc.setState(0x964c, 0xff1f, 0xdbc0, 0x2720, 0x3ddf, 0xf63, 0x1, 0x0);
        gbc.writeMem(0x964c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xff1f);
        EXPECT(gbc.pc(), 0x964d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x964c), 0xaa);
        // AA 0144
        gbc.setState(0xdd02, 0xcc8d, 0xb000, 0xdde2, 0xb027, 0x213d, 0x1, 0x0);
        gbc.writeMem(0xdd02, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xcc8d);
        EXPECT(gbc.pc(), 0xdd03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd02), 0xaa);
        // AA 0145
        gbc.setState(0xc4d9, 0x474e, 0xf4c0, 0xe293, 0xf27b, 0xc158, 0x1, 0x0);
        gbc.writeMem(0xc4d9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x474e);
        EXPECT(gbc.pc(), 0xc4da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d9), 0xaa);
        // AA 0146
        gbc.setState(0x34f9, 0x4dfb, 0xef70, 0x97cd, 0x48cd, 0xcb02, 0x0, 0x0);
        gbc.writeMem(0x34f9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4dfb);
        EXPECT(gbc.pc(), 0x34fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0147
        gbc.setState(0xb1c5, 0x3e7e, 0x4050, 0x646a, 0xcd1c, 0x3cd2, 0x0, 0x1);
        gbc.writeMem(0xb1c5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3e7e);
        EXPECT(gbc.pc(), 0xb1c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c5), 0xaa);
        // AA 0148
        gbc.setState(0xc8eb, 0xd6bf, 0x42f0, 0xb82f, 0xd3a8, 0x28ae, 0x0, 0x0);
        gbc.writeMem(0xc8eb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd6bf);
        EXPECT(gbc.pc(), 0xc8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8eb), 0xaa);
        // AA 0149
        gbc.setState(0x381f, 0x7103, 0xa380, 0xdb64, 0xd8e0, 0x8cc0, 0x0, 0x0);
        gbc.writeMem(0x381f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7103);
        EXPECT(gbc.pc(), 0x3820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 014B
        gbc.setState(0x79a2, 0x74cf, 0x5440, 0xf3fd, 0xed66, 0x803f, 0x1, 0x1);
        gbc.writeMem(0x79a2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x74cf);
        EXPECT(gbc.pc(), 0x79a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 014C
        gbc.setState(0x2903, 0xb443, 0xd820, 0x8e00, 0xedcc, 0xd2ec, 0x1, 0x0);
        gbc.writeMem(0x2903, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb443);
        EXPECT(gbc.pc(), 0x2904);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 014D
        gbc.setState(0x9b25, 0x30f1, 0xfed0, 0x8193, 0x7d4e, 0x3b4b, 0x0, 0x0);
        gbc.writeMem(0x9b25, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x30f1);
        EXPECT(gbc.pc(), 0x9b26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b25), 0xaa);
        // AA 014E
        gbc.setState(0x5e5, 0x2d42, 0x31f0, 0xe8b1, 0xbbbc, 0x3da0, 0x1, 0x1);
        gbc.writeMem(0x5e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2d42);
        EXPECT(gbc.pc(), 0x5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 014F
        gbc.setState(0x4014, 0xd385, 0x1c70, 0xd960, 0x57ff, 0x7cc, 0x0, 0x1);
        gbc.writeMem(0x4014, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xd385);
        EXPECT(gbc.pc(), 0x4015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0150
        gbc.setState(0x4be1, 0xf222, 0x2cf0, 0xd9b5, 0x3a3e, 0xd067, 0x1, 0x0);
        gbc.writeMem(0x4be1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf222);
        EXPECT(gbc.pc(), 0x4be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0151
        gbc.setState(0x5ebe, 0xe892, 0xb30, 0x7ee0, 0xf31a, 0x1dde, 0x1, 0x0);
        gbc.writeMem(0x5ebe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe892);
        EXPECT(gbc.pc(), 0x5ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0152
        gbc.setState(0x38e5, 0x483a, 0xde10, 0xa981, 0x3fe4, 0x6a4c, 0x0, 0x0);
        gbc.writeMem(0x38e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x483a);
        EXPECT(gbc.pc(), 0x38e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0153
        gbc.setState(0xc2ec, 0xd7a5, 0xc660, 0x7324, 0x8424, 0xe483, 0x1, 0x0);
        gbc.writeMem(0xc2ec, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd7a5);
        EXPECT(gbc.pc(), 0xc2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ec), 0xaa);
        // AA 0154
        gbc.setState(0x5718, 0x4875, 0x5490, 0xc3ac, 0x5233, 0xccc4, 0x0, 0x1);
        gbc.writeMem(0x5718, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4875);
        EXPECT(gbc.pc(), 0x5719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0155
        gbc.setState(0xec69, 0x1655, 0xbd40, 0xc675, 0x3f3, 0x350e, 0x1, 0x0);
        gbc.writeMem(0xec69, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1655);
        EXPECT(gbc.pc(), 0xec6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec69), 0xaa);
        // AA 0156
        gbc.setState(0x6d8a, 0x4193, 0xc770, 0x952e, 0xad14, 0xc5cf, 0x1, 0x1);
        gbc.writeMem(0x6d8a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4193);
        EXPECT(gbc.pc(), 0x6d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0157
        gbc.setState(0x4a92, 0xea35, 0x5880, 0x2dbe, 0x5614, 0x7216, 0x1, 0x1);
        gbc.writeMem(0x4a92, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xea35);
        EXPECT(gbc.pc(), 0x4a93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0158
        gbc.setState(0xdd7, 0x1461, 0x9160, 0x829, 0x27f8, 0x6797, 0x0, 0x0);
        gbc.writeMem(0xdd7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1461);
        EXPECT(gbc.pc(), 0xdd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0159
        gbc.setState(0x8858, 0x43a6, 0x5b90, 0x63dd, 0x6a5f, 0xedd8, 0x1, 0x0);
        gbc.writeMem(0x8858, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x43a6);
        EXPECT(gbc.pc(), 0x8859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8858), 0xaa);
        // AA 015A
        gbc.setState(0x13e5, 0xb904, 0xe4f0, 0x51f7, 0xe4, 0xa09, 0x1, 0x1);
        gbc.writeMem(0x13e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xb904);
        EXPECT(gbc.pc(), 0x13e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 015B
        gbc.setState(0xa08f, 0x8d24, 0xeb80, 0xcc0a, 0x84b5, 0x26ab, 0x1, 0x1);
        gbc.writeMem(0xa08f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8d24);
        EXPECT(gbc.pc(), 0xa090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08f), 0xaa);
        // AA 015C
        gbc.setState(0x347e, 0x1947, 0xd3a0, 0xa0d3, 0x49a0, 0x75c5, 0x0, 0x1);
        gbc.writeMem(0x347e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1947);
        EXPECT(gbc.pc(), 0x347f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 015D
        gbc.setState(0x48d0, 0x2fbf, 0xba40, 0x95f7, 0x98f5, 0xc71e, 0x0, 0x0);
        gbc.writeMem(0x48d0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2fbf);
        EXPECT(gbc.pc(), 0x48d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 015E
        gbc.setState(0x84c4, 0x4d16, 0xa2a0, 0x99f0, 0x699a, 0xc9c9, 0x1, 0x1);
        gbc.writeMem(0x84c4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4d16);
        EXPECT(gbc.pc(), 0x84c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c4), 0xaa);
        // AA 015F
        gbc.setState(0x44d2, 0x37db, 0xa720, 0xd1d, 0x4a1d, 0x341f, 0x0, 0x0);
        gbc.writeMem(0x44d2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x37db);
        EXPECT(gbc.pc(), 0x44d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0160
        gbc.setState(0x5404, 0x4a53, 0xe140, 0x883f, 0x4a9b, 0x5f2e, 0x1, 0x0);
        gbc.writeMem(0x5404, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4a53);
        EXPECT(gbc.pc(), 0x5405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0161
        gbc.setState(0xef4e, 0x4d26, 0x70c0, 0x353b, 0x2314, 0xe600, 0x1, 0x0);
        gbc.writeMem(0xef4e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4d26);
        EXPECT(gbc.pc(), 0xef4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4e), 0xaa);
        // AA 0162
        gbc.setState(0x37ea, 0xd736, 0xd920, 0xe0c5, 0x4ff8, 0xa93b, 0x0, 0x0);
        gbc.writeMem(0x37ea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd736);
        EXPECT(gbc.pc(), 0x37eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0163
        gbc.setState(0xd0c2, 0x24b6, 0xe3e0, 0x5df9, 0x6cd4, 0x9cb, 0x0, 0x0);
        gbc.writeMem(0xd0c2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x24b6);
        EXPECT(gbc.pc(), 0xd0c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c2), 0xaa);
        // AA 0164
        gbc.setState(0xa832, 0x21fd, 0x73b0, 0xc5eb, 0xd694, 0xe12e, 0x0, 0x1);
        gbc.writeMem(0xa832, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x21fd);
        EXPECT(gbc.pc(), 0xa833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa832), 0xaa);
        // AA 0165
        gbc.setState(0x224d, 0x10bb, 0xf450, 0x8a14, 0x6e83, 0x3aae, 0x1, 0x1);
        gbc.writeMem(0x224d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x10bb);
        EXPECT(gbc.pc(), 0x224e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0166
        gbc.setState(0x35d9, 0x9976, 0xf030, 0x5ae5, 0x6866, 0xc45b, 0x1, 0x0);
        gbc.writeMem(0x35d9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9976);
        EXPECT(gbc.pc(), 0x35da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0167
        gbc.setState(0xe86e, 0xba49, 0x2260, 0x79c3, 0xa8d2, 0x25d6, 0x1, 0x1);
        gbc.writeMem(0xe86e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xba49);
        EXPECT(gbc.pc(), 0xe86f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86e), 0xaa);
        // AA 0168
        gbc.setState(0xea77, 0x13e5, 0xf040, 0xf74e, 0xdea9, 0xc719, 0x1, 0x0);
        gbc.writeMem(0xea77, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x13e5);
        EXPECT(gbc.pc(), 0xea78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea77), 0xaa);
        // AA 0169
        gbc.setState(0x9b, 0x47ed, 0x3820, 0xa6dc, 0x5eb2, 0xbeb7, 0x1, 0x1);
        gbc.writeMem(0x9b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x47ed);
        EXPECT(gbc.pc(), 0x9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 016A
        gbc.setState(0xed42, 0x753d, 0x85c0, 0x9c, 0x9d53, 0xacec, 0x0, 0x1);
        gbc.writeMem(0xed42, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x753d);
        EXPECT(gbc.pc(), 0xed43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed42), 0xaa);
        // AA 016B
        gbc.setState(0x3b80, 0x1638, 0x1570, 0xa1dc, 0xa90f, 0xc5f0, 0x1, 0x0);
        gbc.writeMem(0x3b80, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1638);
        EXPECT(gbc.pc(), 0x3b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 016C
        gbc.setState(0x5023, 0xa3db, 0xe620, 0xc324, 0x1ceb, 0xf00b, 0x1, 0x1);
        gbc.writeMem(0x5023, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa3db);
        EXPECT(gbc.pc(), 0x5024);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 016D
        gbc.setState(0x46b, 0xbfd3, 0x380, 0x6940, 0x5b30, 0xa011, 0x1, 0x0);
        gbc.writeMem(0x46b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbfd3);
        EXPECT(gbc.pc(), 0x46c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 016E
        gbc.setState(0x559a, 0x4ef7, 0xc2d0, 0x3cb3, 0x9fb, 0xda9, 0x1, 0x0);
        gbc.writeMem(0x559a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4ef7);
        EXPECT(gbc.pc(), 0x559b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 016F
        gbc.setState(0xb72, 0x9e13, 0x4e50, 0x592c, 0x688c, 0xf603, 0x0, 0x0);
        gbc.writeMem(0xb72, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9e13);
        EXPECT(gbc.pc(), 0xb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0170
        gbc.setState(0x9a4a, 0x5029, 0x8030, 0xb78f, 0xe4cd, 0xe4de, 0x0, 0x0);
        gbc.writeMem(0x9a4a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0x9a4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4a), 0xaa);
        // AA 0172
        gbc.setState(0xe223, 0x77a4, 0xa2d0, 0x4786, 0xd80d, 0xd334, 0x0, 0x0);
        gbc.writeMem(0xe223, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x77a4);
        EXPECT(gbc.pc(), 0xe224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe223), 0xaa);
        // AA 0173
        gbc.setState(0x23bb, 0x6e6c, 0xcf00, 0x7a82, 0x6488, 0x1c4f, 0x1, 0x0);
        gbc.writeMem(0x23bb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6e6c);
        EXPECT(gbc.pc(), 0x23bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0174
        gbc.setState(0x5dfd, 0x2107, 0x1450, 0x6a10, 0xa951, 0xf159, 0x0, 0x1);
        gbc.writeMem(0x5dfd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2107);
        EXPECT(gbc.pc(), 0x5dfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0175
        gbc.setState(0x3e37, 0x1e46, 0x1780, 0x59d, 0xbfe1, 0x287e, 0x0, 0x0);
        gbc.writeMem(0x3e37, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1e46);
        EXPECT(gbc.pc(), 0x3e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0176
        gbc.setState(0x2a60, 0xa1bf, 0x94a0, 0xfec9, 0xf036, 0xb1b, 0x1, 0x0);
        gbc.writeMem(0x2a60, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa1bf);
        EXPECT(gbc.pc(), 0x2a61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0177
        gbc.setState(0xb11c, 0xe201, 0x2c80, 0x7b51, 0xedcf, 0x9b50, 0x1, 0x1);
        gbc.writeMem(0xb11c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe201);
        EXPECT(gbc.pc(), 0xb11d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11c), 0xaa);
        // AA 0178
        gbc.setState(0xe87f, 0x50c4, 0x560, 0xa83d, 0x749f, 0xa4e4, 0x1, 0x1);
        gbc.writeMem(0xe87f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x50c4);
        EXPECT(gbc.pc(), 0xe880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe87f), 0xaa);
        // AA 0179
        gbc.setState(0xb533, 0x8c63, 0xd5b0, 0x2cd9, 0x2508, 0x357e, 0x1, 0x1);
        gbc.writeMem(0xb533, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8c63);
        EXPECT(gbc.pc(), 0xb534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb533), 0xaa);
        // AA 017A
        gbc.setState(0x2260, 0x9f64, 0xb9d0, 0x7e92, 0x4ef, 0x1a01, 0x1, 0x0);
        gbc.writeMem(0x2260, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9f64);
        EXPECT(gbc.pc(), 0x2261);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 017B
        gbc.setState(0x1b0c, 0x95e6, 0x5100, 0xa6d8, 0xd34d, 0x384a, 0x0, 0x0);
        gbc.writeMem(0x1b0c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x95e6);
        EXPECT(gbc.pc(), 0x1b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 017C
        gbc.setState(0xd70b, 0x963e, 0x2900, 0xf17, 0xd52, 0x520e, 0x1, 0x0);
        gbc.writeMem(0xd70b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x963e);
        EXPECT(gbc.pc(), 0xd70c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd70b), 0xaa);
        // AA 017D
        gbc.setState(0xb7b3, 0xadf, 0xd750, 0xc151, 0xde5e, 0x92e5, 0x0, 0x0);
        gbc.writeMem(0xb7b3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xadf);
        EXPECT(gbc.pc(), 0xb7b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b3), 0xaa);
        // AA 017E
        gbc.setState(0xb77f, 0x279, 0x14e0, 0x39f6, 0x44e5, 0x49b, 0x0, 0x1);
        gbc.writeMem(0xb77f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x279);
        EXPECT(gbc.pc(), 0xb780);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb77f), 0xaa);
        // AA 017F
        gbc.setState(0x40a7, 0xd8e1, 0xf010, 0x21cb, 0xa0fd, 0x9fd9, 0x0, 0x0);
        gbc.writeMem(0x40a7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd8e1);
        EXPECT(gbc.pc(), 0x40a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0180
        gbc.setState(0xad39, 0xca69, 0xf0f0, 0x76af, 0x3cbf, 0x95c8, 0x1, 0x1);
        gbc.writeMem(0xad39, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xca69);
        EXPECT(gbc.pc(), 0xad3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad39), 0xaa);
        // AA 0181
        gbc.setState(0x766c, 0xb2c8, 0xe6a0, 0x4718, 0x386c, 0xcfba, 0x1, 0x1);
        gbc.writeMem(0x766c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb2c8);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0182
        gbc.setState(0x50c0, 0x9778, 0x9540, 0x7486, 0x1ce6, 0xebb2, 0x1, 0x0);
        gbc.writeMem(0x50c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9778);
        EXPECT(gbc.pc(), 0x50c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0183
        gbc.setState(0x80b6, 0x490d, 0x4970, 0x72cc, 0x7911, 0xceeb, 0x1, 0x1);
        gbc.writeMem(0x80b6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x490d);
        EXPECT(gbc.pc(), 0x80b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b6), 0xaa);
        // AA 0184
        gbc.setState(0xb976, 0xab9d, 0x61a0, 0x5446, 0xe3b, 0x67b6, 0x0, 0x1);
        gbc.writeMem(0xb976, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xab9d);
        EXPECT(gbc.pc(), 0xb977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb976), 0xaa);
        // AA 0185
        gbc.setState(0x7675, 0xed1d, 0x2650, 0x2559, 0x8ad, 0xf6f0, 0x1, 0x0);
        gbc.writeMem(0x7675, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xed1d);
        EXPECT(gbc.pc(), 0x7676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0186
        gbc.setState(0x339b, 0x4d77, 0xc050, 0x6d5d, 0xd97, 0x4698, 0x0, 0x1);
        gbc.writeMem(0x339b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4d77);
        EXPECT(gbc.pc(), 0x339c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0187
        gbc.setState(0x16f8, 0x6c84, 0xb5b0, 0xa39d, 0xbf0, 0xcd57, 0x0, 0x1);
        gbc.writeMem(0x16f8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x6c84);
        EXPECT(gbc.pc(), 0x16f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0188
        gbc.setState(0x3139, 0x5c61, 0x7b30, 0x4597, 0xe933, 0x64a, 0x1, 0x1);
        gbc.writeMem(0x3139, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5c61);
        EXPECT(gbc.pc(), 0x313a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0189
        gbc.setState(0x439a, 0xcab, 0x3240, 0xa3f3, 0x9970, 0x3cc9, 0x0, 0x1);
        gbc.writeMem(0x439a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcab);
        EXPECT(gbc.pc(), 0x439b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 018A
        gbc.setState(0xe221, 0xfdfb, 0x3020, 0x6d9c, 0xeca9, 0xcd57, 0x1, 0x0);
        gbc.writeMem(0xe221, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xfdfb);
        EXPECT(gbc.pc(), 0xe222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe221), 0xaa);
        // AA 018B
        gbc.setState(0x99cc, 0x30c9, 0xebb0, 0xb9eb, 0x31d, 0x11f4, 0x1, 0x1);
        gbc.writeMem(0x99cc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x30c9);
        EXPECT(gbc.pc(), 0x99cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99cc), 0xaa);
        // AA 018C
        gbc.setState(0x9503, 0x3e9, 0x6f0, 0x12f9, 0xa6f8, 0x2cba, 0x1, 0x0);
        gbc.writeMem(0x9503, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3e9);
        EXPECT(gbc.pc(), 0x9504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9503), 0xaa);
        // AA 018D
        gbc.setState(0x958, 0xa763, 0xeb50, 0x2a8b, 0x699, 0xd9e6, 0x1, 0x1);
        gbc.writeMem(0x958, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa763);
        EXPECT(gbc.pc(), 0x959);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 018E
        gbc.setState(0x55a3, 0xeb8a, 0xefd0, 0x8c27, 0x7ee3, 0x2770, 0x1, 0x0);
        gbc.writeMem(0x55a3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xeb8a);
        EXPECT(gbc.pc(), 0x55a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 018F
        gbc.setState(0x1d17, 0xf8c, 0xddd0, 0x3c04, 0x7c0a, 0x41, 0x1, 0x0);
        gbc.writeMem(0x1d17, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf8c);
        EXPECT(gbc.pc(), 0x1d18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0190
        gbc.setState(0x2e88, 0xbd30, 0xbd40, 0xc9dd, 0x2460, 0x886b, 0x1, 0x1);
        gbc.writeMem(0x2e88, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbd30);
        EXPECT(gbc.pc(), 0x2e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0191
        gbc.setState(0x78fe, 0xc78e, 0xef00, 0x181a, 0x9571, 0xe731, 0x0, 0x0);
        gbc.writeMem(0x78fe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc78e);
        EXPECT(gbc.pc(), 0x78ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0192
        gbc.setState(0x7ebc, 0x3f5e, 0x9720, 0xb5e5, 0xc72f, 0x2474, 0x1, 0x0);
        gbc.writeMem(0x7ebc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3f5e);
        EXPECT(gbc.pc(), 0x7ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0193
        gbc.setState(0xae0b, 0x65ee, 0xc2f0, 0xc6fa, 0x3a10, 0x5379, 0x1, 0x0);
        gbc.writeMem(0xae0b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x65ee);
        EXPECT(gbc.pc(), 0xae0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae0b), 0xaa);
        // AA 0195
        gbc.setState(0xbc26, 0x9ce1, 0x3d60, 0x7675, 0xe15b, 0xaedb, 0x1, 0x1);
        gbc.writeMem(0xbc26, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0xbc27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc26), 0xaa);
        // AA 0196
        gbc.setState(0xad5b, 0x8206, 0x960, 0x808, 0x68d, 0xd221, 0x0, 0x0);
        gbc.writeMem(0xad5b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8206);
        EXPECT(gbc.pc(), 0xad5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5b), 0xaa);
        // AA 0197
        gbc.setState(0xc869, 0x8f5f, 0xd460, 0x7568, 0x6199, 0xce46, 0x1, 0x0);
        gbc.writeMem(0xc869, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8f5f);
        EXPECT(gbc.pc(), 0xc86a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc869), 0xaa);
        // AA 0198
        gbc.setState(0x4f48, 0x816f, 0x11c0, 0x3406, 0x40e5, 0xe699, 0x0, 0x1);
        gbc.writeMem(0x4f48, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x816f);
        EXPECT(gbc.pc(), 0x4f49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0199
        gbc.setState(0xef6f, 0x8cc9, 0x28a0, 0x119c, 0x860c, 0x69cf, 0x0, 0x0);
        gbc.writeMem(0xef6f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8cc9);
        EXPECT(gbc.pc(), 0xef70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6f), 0xaa);
        // AA 019A
        gbc.setState(0xab1a, 0xa6aa, 0x8680, 0x795f, 0xd8c4, 0xf8cf, 0x1, 0x0);
        gbc.writeMem(0xab1a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa6aa);
        EXPECT(gbc.pc(), 0xab1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab1a), 0xaa);
        // AA 019B
        gbc.setState(0x3155, 0x5238, 0x9f70, 0x19af, 0xa99f, 0x351, 0x0, 0x1);
        gbc.writeMem(0x3155, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5238);
        EXPECT(gbc.pc(), 0x3156);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 019C
        gbc.setState(0x1f50, 0x8d14, 0x41a0, 0xbad4, 0xad1c, 0x9109, 0x0, 0x0);
        gbc.writeMem(0x1f50, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8d14);
        EXPECT(gbc.pc(), 0x1f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 019D
        gbc.setState(0x64b8, 0xb7a0, 0xcd0, 0x39a7, 0x4e1c, 0x4d13, 0x1, 0x0);
        gbc.writeMem(0x64b8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb7a0);
        EXPECT(gbc.pc(), 0x64b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 019E
        gbc.setState(0x6b1a, 0xcf4c, 0xfa0, 0x77d8, 0x5c21, 0x9243, 0x0, 0x0);
        gbc.writeMem(0x6b1a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcf4c);
        EXPECT(gbc.pc(), 0x6b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 019F
        gbc.setState(0x9d90, 0x88e, 0x1230, 0x4f9d, 0x4b5b, 0xeeda, 0x1, 0x0);
        gbc.writeMem(0x9d90, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x88e);
        EXPECT(gbc.pc(), 0x9d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d90), 0xaa);
        // AA 01A0
        gbc.setState(0x2929, 0xf421, 0x2eb0, 0x779a, 0xa24b, 0xc952, 0x1, 0x1);
        gbc.writeMem(0x2929, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf421);
        EXPECT(gbc.pc(), 0x292a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01A1
        gbc.setState(0x9c4c, 0xbb83, 0x4000, 0xb80c, 0x2e61, 0x832d, 0x1, 0x1);
        gbc.writeMem(0x9c4c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbb83);
        EXPECT(gbc.pc(), 0x9c4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4c), 0xaa);
        // AA 01A2
        gbc.setState(0xb09c, 0x3a5, 0xeab0, 0x29e0, 0x6b6c, 0xcec6, 0x0, 0x1);
        gbc.writeMem(0xb09c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x3a5);
        EXPECT(gbc.pc(), 0xb09d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09c), 0xaa);
        // AA 01A3
        gbc.setState(0x2387, 0xba7a, 0x9090, 0xc894, 0x7722, 0x4d5a, 0x1, 0x0);
        gbc.writeMem(0x2387, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xba7a);
        EXPECT(gbc.pc(), 0x2388);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01A4
        gbc.setState(0x4a7e, 0xb5bc, 0xee80, 0x22a, 0x646c, 0xb7eb, 0x0, 0x0);
        gbc.writeMem(0x4a7e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb5bc);
        EXPECT(gbc.pc(), 0x4a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01A5
        gbc.setState(0x93aa, 0xcce4, 0x4300, 0x267d, 0x9da0, 0x354a, 0x1, 0x1);
        gbc.writeMem(0x93aa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcce4);
        EXPECT(gbc.pc(), 0x93ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93aa), 0xaa);
        // AA 01A6
        gbc.setState(0x525a, 0xaf56, 0xd110, 0x3ee4, 0x40be, 0x6c1e, 0x1, 0x0);
        gbc.writeMem(0x525a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xaf56);
        EXPECT(gbc.pc(), 0x525b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01A7
        gbc.setState(0xd7e5, 0xb0b0, 0x2d40, 0xb19f, 0xe53a, 0xdbd5, 0x1, 0x0);
        gbc.writeMem(0xd7e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xb0b0);
        EXPECT(gbc.pc(), 0xd7e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7e5), 0xaa);
        // AA 01A8
        gbc.setState(0x5167, 0x4438, 0x86f0, 0x2b12, 0x5871, 0x4643, 0x1, 0x0);
        gbc.writeMem(0x5167, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x4438);
        EXPECT(gbc.pc(), 0x5168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01A9
        gbc.setState(0x1bae, 0x1ec9, 0xadc0, 0xbcb, 0x4ffb, 0xdee1, 0x1, 0x0);
        gbc.writeMem(0x1bae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1ec9);
        EXPECT(gbc.pc(), 0x1baf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01AA
        gbc.setState(0xb4d9, 0xba8e, 0x97e0, 0x34e0, 0x9434, 0xe7eb, 0x0, 0x0);
        gbc.writeMem(0xb4d9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xba8e);
        EXPECT(gbc.pc(), 0xb4da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4d9), 0xaa);
        // AA 01AC
        gbc.setState(0x77e8, 0x2224, 0xa330, 0x7566, 0x6293, 0xefb3, 0x0, 0x1);
        gbc.writeMem(0x77e8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2224);
        EXPECT(gbc.pc(), 0x77e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01AD
        gbc.setState(0x64f6, 0x771e, 0xf390, 0xb37d, 0x43a6, 0xf0c9, 0x0, 0x0);
        gbc.writeMem(0x64f6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x771e);
        EXPECT(gbc.pc(), 0x64f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01AF
        gbc.setState(0xbeb9, 0xff6f, 0x7f70, 0xf77e, 0xaa4d, 0x1828, 0x1, 0x0);
        gbc.writeMem(0xbeb9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xff6f);
        EXPECT(gbc.pc(), 0xbeba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb9), 0xaa);
        // AA 01B0
        gbc.setState(0xc59b, 0xccfe, 0x81b0, 0x7953, 0x339c, 0xd13a, 0x1, 0x1);
        gbc.writeMem(0xc59b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xccfe);
        EXPECT(gbc.pc(), 0xc59c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc59b), 0xaa);
        // AA 01B1
        gbc.setState(0x2977, 0x16d, 0x7a70, 0x154a, 0xfb63, 0x1796, 0x1, 0x1);
        gbc.writeMem(0x2977, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x16d);
        EXPECT(gbc.pc(), 0x2978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01B2
        gbc.setState(0x4ff4, 0xcf24, 0xe6c0, 0x44aa, 0xfa63, 0xfd45, 0x1, 0x0);
        gbc.writeMem(0x4ff4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcf24);
        EXPECT(gbc.pc(), 0x4ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01B3
        gbc.setState(0x566, 0x654d, 0x7960, 0x1216, 0x50f3, 0x8d9f, 0x1, 0x1);
        gbc.writeMem(0x566, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x654d);
        EXPECT(gbc.pc(), 0x567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01B4
        gbc.setState(0x7a8c, 0xcf90, 0x3f40, 0xab85, 0xbbb8, 0xd490, 0x1, 0x0);
        gbc.writeMem(0x7a8c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcf90);
        EXPECT(gbc.pc(), 0x7a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01B5
        gbc.setState(0x9d9c, 0x5e64, 0xc710, 0x4565, 0x560, 0x1125, 0x1, 0x1);
        gbc.writeMem(0x9d9c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x5e64);
        EXPECT(gbc.pc(), 0x9d9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9c), 0xaa);
        // AA 01B6
        gbc.setState(0x6e13, 0x312, 0xfe00, 0x6e8e, 0x4534, 0x6674, 0x1, 0x1);
        gbc.writeMem(0x6e13, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x312);
        EXPECT(gbc.pc(), 0x6e14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01B7
        gbc.setState(0x9d60, 0x30ed, 0xe10, 0xb651, 0xbb7c, 0xd477, 0x0, 0x0);
        gbc.writeMem(0x9d60, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x30ed);
        EXPECT(gbc.pc(), 0x9d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d60), 0xaa);
        // AA 01B8
        gbc.setState(0xb348, 0xad09, 0xf600, 0x59df, 0xd87b, 0xbceb, 0x1, 0x1);
        gbc.writeMem(0xb348, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xad09);
        EXPECT(gbc.pc(), 0xb349);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb348), 0xaa);
        // AA 01B9
        gbc.setState(0xa36d, 0xb3f7, 0x4320, 0x23e4, 0x5dd1, 0x1ee, 0x0, 0x1);
        gbc.writeMem(0xa36d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb3f7);
        EXPECT(gbc.pc(), 0xa36e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa36d), 0xaa);
        // AA 01BA
        gbc.setState(0x8af2, 0x57b, 0x50c0, 0xbba4, 0x500e, 0x4778, 0x0, 0x0);
        gbc.writeMem(0x8af2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x57b);
        EXPECT(gbc.pc(), 0x8af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af2), 0xaa);
        // AA 01BB
        gbc.setState(0x9193, 0x8a03, 0xe460, 0x6984, 0xa22d, 0xefa8, 0x0, 0x1);
        gbc.writeMem(0x9193, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8a03);
        EXPECT(gbc.pc(), 0x9194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9193), 0xaa);
        // AA 01BC
        gbc.setState(0xae6a, 0x661c, 0x7320, 0x7bd5, 0x93f2, 0x8e1, 0x0, 0x0);
        gbc.writeMem(0xae6a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x661c);
        EXPECT(gbc.pc(), 0xae6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae6a), 0xaa);
        // AA 01BD
        gbc.setState(0x7e83, 0xc180, 0x36d0, 0x95ca, 0x634e, 0x1dd7, 0x0, 0x0);
        gbc.writeMem(0x7e83, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc180);
        EXPECT(gbc.pc(), 0x7e84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01BE
        gbc.setState(0xd6e4, 0x11a3, 0x66a0, 0xb58c, 0x88e0, 0xe39d, 0x1, 0x1);
        gbc.writeMem(0xd6e4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x11a3);
        EXPECT(gbc.pc(), 0xd6e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e4), 0xaa);
        // AA 01BF
        gbc.setState(0x4d3b, 0xe06e, 0xa580, 0xe0f0, 0xc4af, 0x6f29, 0x1, 0x1);
        gbc.writeMem(0x4d3b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe06e);
        EXPECT(gbc.pc(), 0x4d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01C0
        gbc.setState(0x7799, 0x650d, 0x410, 0xaa2c, 0x824, 0xba10, 0x0, 0x1);
        gbc.writeMem(0x7799, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x650d);
        EXPECT(gbc.pc(), 0x779a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01C1
        gbc.setState(0xec08, 0xe373, 0x4150, 0xb5fb, 0xc7e, 0xcc68, 0x1, 0x0);
        gbc.writeMem(0xec08, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe373);
        EXPECT(gbc.pc(), 0xec09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec08), 0xaa);
        // AA 01C2
        gbc.setState(0xe100, 0xc968, 0x5d40, 0x5350, 0xf094, 0xbaf0, 0x0, 0x1);
        gbc.writeMem(0xe100, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc968);
        EXPECT(gbc.pc(), 0xe101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe100), 0xaa);
        // AA 01C3
        gbc.setState(0x2f4c, 0x3e72, 0xee50, 0x4e24, 0x3f02, 0xdee3, 0x1, 0x0);
        gbc.writeMem(0x2f4c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3e72);
        EXPECT(gbc.pc(), 0x2f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01C4
        gbc.setState(0xbe6a, 0xe3a5, 0x1c40, 0x191a, 0x6adf, 0xfeab, 0x0, 0x0);
        gbc.writeMem(0xbe6a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe3a5);
        EXPECT(gbc.pc(), 0xbe6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe6a), 0xaa);
        // AA 01C5
        gbc.setState(0x8db2, 0x1fe0, 0xc480, 0xf7df, 0x4e24, 0x4225, 0x1, 0x0);
        gbc.writeMem(0x8db2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1fe0);
        EXPECT(gbc.pc(), 0x8db3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db2), 0xaa);
        // AA 01C6
        gbc.setState(0xb939, 0x7079, 0x13e0, 0xce74, 0xb283, 0xc8a5, 0x1, 0x1);
        gbc.writeMem(0xb939, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7079);
        EXPECT(gbc.pc(), 0xb93a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb939), 0xaa);
        // AA 01C7
        gbc.setState(0xca45, 0xa952, 0xecd0, 0x9cc2, 0xcf77, 0x3c2a, 0x1, 0x1);
        gbc.writeMem(0xca45, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa952);
        EXPECT(gbc.pc(), 0xca46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca45), 0xaa);
        // AA 01C8
        gbc.setState(0x4bbe, 0xd47e, 0xd9e0, 0x91a5, 0xf57c, 0x3cb1, 0x0, 0x1);
        gbc.writeMem(0x4bbe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd47e);
        EXPECT(gbc.pc(), 0x4bbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01C9
        gbc.setState(0x7f41, 0x76cc, 0xfab0, 0xf4af, 0x99a8, 0x4926, 0x0, 0x0);
        gbc.writeMem(0x7f41, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x76cc);
        EXPECT(gbc.pc(), 0x7f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01CA
        gbc.setState(0xb1d4, 0xa922, 0x5ef0, 0xf67d, 0xe1d6, 0xbfdf, 0x1, 0x1);
        gbc.writeMem(0xb1d4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa922);
        EXPECT(gbc.pc(), 0xb1d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d4), 0xaa);
        // AA 01CB
        gbc.setState(0x2840, 0xbf28, 0x68f0, 0x5543, 0xe9d, 0x87ee, 0x0, 0x1);
        gbc.writeMem(0x2840, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xbf28);
        EXPECT(gbc.pc(), 0x2841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01CC
        gbc.setState(0x4bae, 0xc9af, 0x4ca0, 0x2f6a, 0xb2d2, 0xccda, 0x1, 0x0);
        gbc.writeMem(0x4bae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc9af);
        EXPECT(gbc.pc(), 0x4baf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01CD
        gbc.setState(0x9715, 0x7efb, 0x1f40, 0x3c72, 0xc239, 0x9e00, 0x0, 0x0);
        gbc.writeMem(0x9715, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7efb);
        EXPECT(gbc.pc(), 0x9716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9715), 0xaa);
        // AA 01CE
        gbc.setState(0x357, 0x1d0b, 0xc7c0, 0xd6e7, 0x3e85, 0x147d, 0x1, 0x1);
        gbc.writeMem(0x357, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1d0b);
        EXPECT(gbc.pc(), 0x358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01CF
        gbc.setState(0x3a16, 0xc2fd, 0xcf10, 0x424a, 0x5b4c, 0x1b54, 0x1, 0x0);
        gbc.writeMem(0x3a16, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc2fd);
        EXPECT(gbc.pc(), 0x3a17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01D0
        gbc.setState(0x1df4, 0x16cb, 0x22f0, 0x92bf, 0x52c8, 0xc798, 0x1, 0x1);
        gbc.writeMem(0x1df4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x16cb);
        EXPECT(gbc.pc(), 0x1df5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01D1
        gbc.setState(0x612b, 0x2426, 0x8d90, 0xcfde, 0xb1db, 0xeb95, 0x1, 0x1);
        gbc.writeMem(0x612b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2426);
        EXPECT(gbc.pc(), 0x612c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01D2
        gbc.setState(0x70fe, 0x48f6, 0xd650, 0x9f35, 0x426e, 0xf8cc, 0x0, 0x1);
        gbc.writeMem(0x70fe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x48f6);
        EXPECT(gbc.pc(), 0x70ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01D3
        gbc.setState(0xeb88, 0x493d, 0xb770, 0x66ef, 0x4954, 0xe9d0, 0x0, 0x1);
        gbc.writeMem(0xeb88, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x493d);
        EXPECT(gbc.pc(), 0xeb89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb88), 0xaa);
        // AA 01D4
        gbc.setState(0xa9ff, 0x1fce, 0xaef0, 0x8b19, 0x8aa1, 0x60f0, 0x1, 0x1);
        gbc.writeMem(0xa9ff, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1fce);
        EXPECT(gbc.pc(), 0xaa00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ff), 0xaa);
        // AA 01D5
        gbc.setState(0xb6ad, 0x50ce, 0x6c00, 0x7ceb, 0xc3d, 0x6869, 0x0, 0x0);
        gbc.writeMem(0xb6ad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x50ce);
        EXPECT(gbc.pc(), 0xb6ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6ad), 0xaa);
        // AA 01D6
        gbc.setState(0xaba9, 0xf3e0, 0xd5a0, 0x83d9, 0x21b0, 0xe4ab, 0x1, 0x0);
        gbc.writeMem(0xaba9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf3e0);
        EXPECT(gbc.pc(), 0xabaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaba9), 0xaa);
        // AA 01D7
        gbc.setState(0xc3c4, 0xc02c, 0x5fa0, 0x9ba5, 0xfd59, 0xb57b, 0x0, 0x0);
        gbc.writeMem(0xc3c4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc02c);
        EXPECT(gbc.pc(), 0xc3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c4), 0xaa);
        // AA 01D9
        gbc.setState(0x12a9, 0x7ba2, 0xbf80, 0x2dec, 0xad96, 0xfbf5, 0x0, 0x0);
        gbc.writeMem(0x12a9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7ba2);
        EXPECT(gbc.pc(), 0x12aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01DA
        gbc.setState(0x59de, 0x4ac2, 0xf910, 0xe38a, 0xbaae, 0xeaec, 0x0, 0x0);
        gbc.writeMem(0x59de, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4ac2);
        EXPECT(gbc.pc(), 0x59df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01DB
        gbc.setState(0x523f, 0x2407, 0xcdf0, 0xa2fb, 0xe436, 0x8b82, 0x1, 0x1);
        gbc.writeMem(0x523f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2407);
        EXPECT(gbc.pc(), 0x5240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01DC
        gbc.setState(0x591c, 0x776e, 0x3680, 0x9494, 0x3d00, 0x6d54, 0x0, 0x0);
        gbc.writeMem(0x591c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x776e);
        EXPECT(gbc.pc(), 0x591d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01DD
        gbc.setState(0xe458, 0x1f6a, 0x5710, 0x3a39, 0xd811, 0x74ac, 0x0, 0x0);
        gbc.writeMem(0xe458, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1f6a);
        EXPECT(gbc.pc(), 0xe459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe458), 0xaa);
        // AA 01DE
        gbc.setState(0xeee1, 0x9d5a, 0xb0c0, 0x9e22, 0x34bb, 0x6b, 0x1, 0x0);
        gbc.writeMem(0xeee1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x9d5a);
        EXPECT(gbc.pc(), 0xeee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee1), 0xaa);
        // AA 01E0
        gbc.setState(0x197d, 0x9467, 0x5c0, 0x8f25, 0xc6d3, 0x14bd, 0x0, 0x1);
        gbc.writeMem(0x197d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9467);
        EXPECT(gbc.pc(), 0x197e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E1
        gbc.setState(0x6e04, 0xa51b, 0xdb40, 0xc305, 0xc595, 0xee8e, 0x0, 0x0);
        gbc.writeMem(0x6e04, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa51b);
        EXPECT(gbc.pc(), 0x6e05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E2
        gbc.setState(0x2239, 0xe275, 0x9e0, 0xf717, 0x1ac, 0x2213, 0x1, 0x1);
        gbc.writeMem(0x2239, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe275);
        EXPECT(gbc.pc(), 0x223a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E3
        gbc.setState(0x11d3, 0x157e, 0xa110, 0xb8d3, 0xb5bb, 0xc8ea, 0x1, 0x0);
        gbc.writeMem(0x11d3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x157e);
        EXPECT(gbc.pc(), 0x11d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E4
        gbc.setState(0x583, 0x554f, 0xc070, 0xc525, 0x1461, 0x379e, 0x0, 0x1);
        gbc.writeMem(0x583, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x554f);
        EXPECT(gbc.pc(), 0x584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E5
        gbc.setState(0x7b4e, 0x8113, 0x1810, 0x3fdd, 0x9ffc, 0xc39e, 0x1, 0x1);
        gbc.writeMem(0x7b4e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8113);
        EXPECT(gbc.pc(), 0x7b4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E6
        gbc.setState(0x1737, 0xb24a, 0xa460, 0xf601, 0xd5b4, 0xc722, 0x1, 0x0);
        gbc.writeMem(0x1737, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb24a);
        EXPECT(gbc.pc(), 0x1738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E7
        gbc.setState(0xb97e, 0x22ae, 0x6c90, 0xb49d, 0x7a84, 0x8dbd, 0x1, 0x1);
        gbc.writeMem(0xb97e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x22ae);
        EXPECT(gbc.pc(), 0xb97f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb97e), 0xaa);
        // AA 01E8
        gbc.setState(0x7da2, 0xfd52, 0x6a40, 0xb391, 0x91b4, 0xc93e, 0x1, 0x1);
        gbc.writeMem(0x7da2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfd52);
        EXPECT(gbc.pc(), 0x7da3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01E9
        gbc.setState(0xa41d, 0x169c, 0x5a0, 0x3da9, 0x9953, 0x2729, 0x1, 0x1);
        gbc.writeMem(0xa41d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x169c);
        EXPECT(gbc.pc(), 0xa41e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41d), 0xaa);
        // AA 01EA
        gbc.setState(0xe6a5, 0xde03, 0xf6c0, 0x6853, 0x8145, 0xd176, 0x1, 0x1);
        gbc.writeMem(0xe6a5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xde03);
        EXPECT(gbc.pc(), 0xe6a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6a5), 0xaa);
        // AA 01EB
        gbc.setState(0xdaa5, 0x7263, 0xfcb0, 0x461, 0x419e, 0xa8af, 0x0, 0x0);
        gbc.writeMem(0xdaa5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7263);
        EXPECT(gbc.pc(), 0xdaa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaa5), 0xaa);
        // AA 01EC
        gbc.setState(0x4e9b, 0xfede, 0x6c50, 0x188a, 0x9bf5, 0x2b10, 0x0, 0x1);
        gbc.writeMem(0x4e9b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfede);
        EXPECT(gbc.pc(), 0x4e9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01ED
        gbc.setState(0xaa73, 0x25be, 0x3b60, 0x7025, 0xebca, 0x3bd4, 0x1, 0x0);
        gbc.writeMem(0xaa73, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x25be);
        EXPECT(gbc.pc(), 0xaa74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa73), 0xaa);
        // AA 01EE
        gbc.setState(0xb631, 0x5437, 0x1eb0, 0x4d19, 0xf93d, 0x7371, 0x0, 0x0);
        gbc.writeMem(0xb631, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5437);
        EXPECT(gbc.pc(), 0xb632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb631), 0xaa);
        // AA 01EF
        gbc.setState(0x6a4f, 0xfce0, 0xed50, 0xc3a3, 0xf407, 0xeb9, 0x0, 0x0);
        gbc.writeMem(0x6a4f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xfce0);
        EXPECT(gbc.pc(), 0x6a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01F0
        gbc.setState(0x277e, 0x2ed0, 0x170, 0xb88f, 0x203c, 0x1dee, 0x1, 0x0);
        gbc.writeMem(0x277e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2ed0);
        EXPECT(gbc.pc(), 0x277f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01F1
        gbc.setState(0x5bdc, 0x1420, 0x7160, 0x2aa, 0x46e3, 0xa691, 0x0, 0x1);
        gbc.writeMem(0x5bdc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1420);
        EXPECT(gbc.pc(), 0x5bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01F2
        gbc.setState(0xdb3f, 0xdf96, 0x6df0, 0xd1e3, 0xf913, 0xdd63, 0x0, 0x0);
        gbc.writeMem(0xdb3f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xdf96);
        EXPECT(gbc.pc(), 0xdb40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3f), 0xaa);
        // AA 01F3
        gbc.setState(0xc087, 0xcef5, 0xd520, 0xe960, 0x7609, 0x7f3f, 0x0, 0x1);
        gbc.writeMem(0xc087, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xcef5);
        EXPECT(gbc.pc(), 0xc088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc087), 0xaa);
        // AA 01F4
        gbc.setState(0x190f, 0xd67b, 0xdf40, 0x51e0, 0x5380, 0x2332, 0x0, 0x0);
        gbc.writeMem(0x190f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd67b);
        EXPECT(gbc.pc(), 0x1910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01F5
        gbc.setState(0x6629, 0x20bb, 0xa850, 0x7299, 0x25de, 0xd378, 0x1, 0x0);
        gbc.writeMem(0x6629, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x20bb);
        EXPECT(gbc.pc(), 0x662a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01F6
        gbc.setState(0xa522, 0xdc4e, 0x3df0, 0x74ed, 0xf805, 0x4af7, 0x1, 0x1);
        gbc.writeMem(0xa522, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xdc4e);
        EXPECT(gbc.pc(), 0xa523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa522), 0xaa);
        // AA 01F7
        gbc.setState(0x8955, 0x36e1, 0xc200, 0xd65a, 0x2012, 0x89fd, 0x0, 0x0);
        gbc.writeMem(0x8955, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x36e1);
        EXPECT(gbc.pc(), 0x8956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8955), 0xaa);
        // AA 01F8
        gbc.setState(0x8993, 0x463d, 0x3dc0, 0x30e6, 0x64e5, 0x67b0, 0x1, 0x1);
        gbc.writeMem(0x8993, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x463d);
        EXPECT(gbc.pc(), 0x8994);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8993), 0xaa);
        // AA 01F9
        gbc.setState(0xe66a, 0xb33f, 0x2e40, 0xad76, 0xae1d, 0xfe32, 0x1, 0x1);
        gbc.writeMem(0xe66a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb33f);
        EXPECT(gbc.pc(), 0xe66b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe66a), 0xaa);
        // AA 01FA
        gbc.setState(0x6f99, 0x9e2f, 0xb6d0, 0x92e4, 0x44cc, 0xbed5, 0x1, 0x0);
        gbc.writeMem(0x6f99, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9e2f);
        EXPECT(gbc.pc(), 0x6f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01FB
        gbc.setState(0x36d0, 0xd0ce, 0xb440, 0x13df, 0x24b2, 0x3b42, 0x1, 0x0);
        gbc.writeMem(0x36d0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd0ce);
        EXPECT(gbc.pc(), 0x36d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01FC
        gbc.setState(0x1ebf, 0xd221, 0x78f0, 0x2f67, 0x50ee, 0xee44, 0x0, 0x0);
        gbc.writeMem(0x1ebf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd221);
        EXPECT(gbc.pc(), 0x1ec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 01FD
        gbc.setState(0xc40e, 0x1e3b, 0xc010, 0x1878, 0xcac5, 0x3ad1, 0x0, 0x1);
        gbc.writeMem(0xc40e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1e3b);
        EXPECT(gbc.pc(), 0xc40f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc40e), 0xaa);
        // AA 01FE
        gbc.setState(0xd145, 0xb238, 0x6b80, 0xda4e, 0x1f22, 0x9b01, 0x1, 0x0);
        gbc.writeMem(0xd145, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb238);
        EXPECT(gbc.pc(), 0xd146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd145), 0xaa);
        // AA 01FF
        gbc.setState(0xcd02, 0x970e, 0xc0e0, 0xfea7, 0xbbc0, 0x710e, 0x0, 0x1);
        gbc.writeMem(0xcd02, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x970e);
        EXPECT(gbc.pc(), 0xcd03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd02), 0xaa);
        // AA 0200
        gbc.setState(0x1759, 0x2bdc, 0xc5b0, 0x2ef8, 0x332c, 0xb2fe, 0x0, 0x0);
        gbc.writeMem(0x1759, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x2bdc);
        EXPECT(gbc.pc(), 0x175a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0201
        gbc.setState(0x59e0, 0xc5b3, 0xb180, 0xa0e4, 0xaa42, 0x8687, 0x1, 0x1);
        gbc.writeMem(0x59e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc5b3);
        EXPECT(gbc.pc(), 0x59e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0202
        gbc.setState(0xbb51, 0x66fd, 0x1a30, 0xeeec, 0x73d, 0xe6b1, 0x0, 0x0);
        gbc.writeMem(0xbb51, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x66fd);
        EXPECT(gbc.pc(), 0xbb52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb51), 0xaa);
        // AA 0203
        gbc.setState(0x3bc, 0x5b8b, 0x7310, 0xaa57, 0x8a63, 0x77bf, 0x1, 0x1);
        gbc.writeMem(0x3bc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5b8b);
        EXPECT(gbc.pc(), 0x3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0204
        gbc.setState(0x6138, 0x8ef6, 0x4f40, 0x2b68, 0x928d, 0xa083, 0x0, 0x0);
        gbc.writeMem(0x6138, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x8ef6);
        EXPECT(gbc.pc(), 0x6139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0205
        gbc.setState(0xad4d, 0xe431, 0xab90, 0x79e8, 0x65dc, 0x32b8, 0x0, 0x1);
        gbc.writeMem(0xad4d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe431);
        EXPECT(gbc.pc(), 0xad4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4d), 0xaa);
        // AA 0206
        gbc.setState(0xa8f5, 0xd03c, 0x5d50, 0x5450, 0x6752, 0xc418, 0x1, 0x1);
        gbc.writeMem(0xa8f5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd03c);
        EXPECT(gbc.pc(), 0xa8f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f5), 0xaa);
        // AA 0207
        gbc.setState(0xc286, 0x58fd, 0x5510, 0xbebb, 0xa3f6, 0xbb8c, 0x0, 0x0);
        gbc.writeMem(0xc286, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x58fd);
        EXPECT(gbc.pc(), 0xc287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc286), 0xaa);
        // AA 0208
        gbc.setState(0x97ea, 0x12d2, 0x910, 0x813e, 0x8775, 0xcae3, 0x1, 0x1);
        gbc.writeMem(0x97ea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x12d2);
        EXPECT(gbc.pc(), 0x97eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ea), 0xaa);
        // AA 0209
        gbc.setState(0xa877, 0x2bba, 0xcbe0, 0x7116, 0x6eaf, 0x4bca, 0x1, 0x1);
        gbc.writeMem(0xa877, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2bba);
        EXPECT(gbc.pc(), 0xa878);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa877), 0xaa);
        // AA 020B
        gbc.setState(0x6ba8, 0x55a1, 0x2a0, 0x5b7f, 0xa519, 0x6590, 0x0, 0x1);
        gbc.writeMem(0x6ba8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x55a1);
        EXPECT(gbc.pc(), 0x6ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 020C
        gbc.setState(0x3aeb, 0xfb61, 0x24e0, 0xa3e9, 0xf792, 0x62d8, 0x0, 0x1);
        gbc.writeMem(0x3aeb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfb61);
        EXPECT(gbc.pc(), 0x3aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 020E
        gbc.setState(0x7264, 0x1b14, 0x6290, 0x7271, 0xe8db, 0x1b6a, 0x1, 0x0);
        gbc.writeMem(0x7264, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1b14);
        EXPECT(gbc.pc(), 0x7265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 020F
        gbc.setState(0x572a, 0x9a41, 0x14f0, 0x8c74, 0xdf7b, 0x71fe, 0x1, 0x0);
        gbc.writeMem(0x572a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9a41);
        EXPECT(gbc.pc(), 0x572b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0210
        gbc.setState(0x9281, 0x22a8, 0x1c40, 0x27c4, 0x2591, 0x3d44, 0x0, 0x1);
        gbc.writeMem(0x9281, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x22a8);
        EXPECT(gbc.pc(), 0x9282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9281), 0xaa);
        // AA 0211
        gbc.setState(0x2f4f, 0xa8d4, 0x7680, 0x7d69, 0xde34, 0x8efd, 0x0, 0x0);
        gbc.writeMem(0x2f4f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa8d4);
        EXPECT(gbc.pc(), 0x2f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0212
        gbc.setState(0x7e20, 0x19cc, 0x38c0, 0xc84c, 0xf34e, 0xf70c, 0x0, 0x0);
        gbc.writeMem(0x7e20, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x19cc);
        EXPECT(gbc.pc(), 0x7e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0213
        gbc.setState(0x1402, 0x7be3, 0xdfe0, 0x7f47, 0x3ad3, 0xd72d, 0x0, 0x1);
        gbc.writeMem(0x1402, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7be3);
        EXPECT(gbc.pc(), 0x1403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0214
        gbc.setState(0xd81e, 0x2f83, 0x3510, 0xbe8, 0xcfcc, 0x6b33, 0x0, 0x1);
        gbc.writeMem(0xd81e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2f83);
        EXPECT(gbc.pc(), 0xd81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd81e), 0xaa);
        // AA 0215
        gbc.setState(0x3a26, 0x8494, 0x2e30, 0x775a, 0xdf8, 0xc7dc, 0x1, 0x1);
        gbc.writeMem(0x3a26, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8494);
        EXPECT(gbc.pc(), 0x3a27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0217
        gbc.setState(0x18d2, 0x53a3, 0x1b70, 0x60cd, 0x4c26, 0xf64f, 0x0, 0x0);
        gbc.writeMem(0x18d2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x53a3);
        EXPECT(gbc.pc(), 0x18d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0218
        gbc.setState(0xc84f, 0x94cc, 0x9190, 0xea02, 0xc6e, 0x6641, 0x1, 0x0);
        gbc.writeMem(0xc84f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x94cc);
        EXPECT(gbc.pc(), 0xc850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc84f), 0xaa);
        // AA 0219
        gbc.setState(0x863d, 0x8020, 0x2060, 0x2008, 0xa444, 0xaeb4, 0x1, 0x1);
        gbc.writeMem(0x863d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x8020);
        EXPECT(gbc.pc(), 0x863e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863d), 0xaa);
        // AA 021A
        gbc.setState(0xa9c5, 0x6f35, 0xef50, 0x26ea, 0x49c3, 0x5276, 0x1, 0x1);
        gbc.writeMem(0xa9c5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6f35);
        EXPECT(gbc.pc(), 0xa9c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c5), 0xaa);
        // AA 021B
        gbc.setState(0x4deb, 0x14c8, 0xea50, 0x44b, 0x53fb, 0xc343, 0x1, 0x0);
        gbc.writeMem(0x4deb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x14c8);
        EXPECT(gbc.pc(), 0x4dec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 021C
        gbc.setState(0x6c1e, 0x8a27, 0xab60, 0x6e75, 0x4874, 0x2d9a, 0x1, 0x1);
        gbc.writeMem(0x6c1e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8a27);
        EXPECT(gbc.pc(), 0x6c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 021D
        gbc.setState(0x5964, 0x352b, 0xd820, 0x21b0, 0x24ad, 0x8d14, 0x0, 0x0);
        gbc.writeMem(0x5964, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x352b);
        EXPECT(gbc.pc(), 0x5965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 021E
        gbc.setState(0xb741, 0xf8a, 0x72a0, 0x396f, 0xfbbc, 0xed87, 0x0, 0x0);
        gbc.writeMem(0xb741, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf8a);
        EXPECT(gbc.pc(), 0xb742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb741), 0xaa);
        // AA 021F
        gbc.setState(0xb45b, 0xe8b1, 0xddc0, 0x3fb, 0xaee9, 0x57a, 0x1, 0x1);
        gbc.writeMem(0xb45b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe8b1);
        EXPECT(gbc.pc(), 0xb45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45b), 0xaa);
        // AA 0221
        gbc.setState(0x609a, 0xa2dd, 0xfa30, 0xf5e, 0xb738, 0xe218, 0x0, 0x1);
        gbc.writeMem(0x609a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xa2dd);
        EXPECT(gbc.pc(), 0x609b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0222
        gbc.setState(0xa35, 0x1f5f, 0xaa70, 0x80fa, 0x9d5a, 0xcc1c, 0x0, 0x0);
        gbc.writeMem(0xa35, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1f5f);
        EXPECT(gbc.pc(), 0xa36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0223
        gbc.setState(0x1bf5, 0xb341, 0xe720, 0xa7f3, 0xcc24, 0x66fa, 0x0, 0x0);
        gbc.writeMem(0x1bf5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb341);
        EXPECT(gbc.pc(), 0x1bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0224
        gbc.setState(0xd28f, 0xeda3, 0xab20, 0x9780, 0x4a67, 0xa14c, 0x0, 0x1);
        gbc.writeMem(0xd28f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xeda3);
        EXPECT(gbc.pc(), 0xd290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd28f), 0xaa);
        // AA 0226
        gbc.setState(0x297a, 0xefe, 0xf7f0, 0x2f60, 0xb3d1, 0x7f02, 0x0, 0x1);
        gbc.writeMem(0x297a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xefe);
        EXPECT(gbc.pc(), 0x297b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0227
        gbc.setState(0xa511, 0x9295, 0xa5f0, 0x629c, 0xca44, 0xdf2f, 0x1, 0x0);
        gbc.writeMem(0xa511, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9295);
        EXPECT(gbc.pc(), 0xa512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa511), 0xaa);
        // AA 0229
        gbc.setState(0x9f5a, 0xbe6f, 0xbc0, 0x35fb, 0xc41b, 0xe8d9, 0x1, 0x1);
        gbc.writeMem(0x9f5a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbe6f);
        EXPECT(gbc.pc(), 0x9f5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5a), 0xaa);
        // AA 022A
        gbc.setState(0xb678, 0xfdec, 0x9fc0, 0x5cc, 0x9f05, 0x84bf, 0x0, 0x1);
        gbc.writeMem(0xb678, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xfdec);
        EXPECT(gbc.pc(), 0xb679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb678), 0xaa);
        // AA 022B
        gbc.setState(0x44cf, 0x65cb, 0xcc20, 0x1ba, 0x6ae0, 0x8a21, 0x1, 0x1);
        gbc.writeMem(0x44cf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x65cb);
        EXPECT(gbc.pc(), 0x44d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 022C
        gbc.setState(0xcfb6, 0xb18a, 0x4960, 0x9564, 0x1945, 0x5ddc, 0x0, 0x0);
        gbc.writeMem(0xcfb6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb18a);
        EXPECT(gbc.pc(), 0xcfb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb6), 0xaa);
        // AA 022D
        gbc.setState(0x37ad, 0x340c, 0x72a0, 0x5c6b, 0x847c, 0x98a8, 0x1, 0x0);
        gbc.writeMem(0x37ad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x340c);
        EXPECT(gbc.pc(), 0x37ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 022E
        gbc.setState(0xc6de, 0x2040, 0x33d0, 0x4769, 0x90b1, 0x6922, 0x0, 0x0);
        gbc.writeMem(0xc6de, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2040);
        EXPECT(gbc.pc(), 0xc6df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6de), 0xaa);
        // AA 022F
        gbc.setState(0x526d, 0x9d94, 0xb00, 0xfbfa, 0xa150, 0xb927, 0x1, 0x0);
        gbc.writeMem(0x526d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9d94);
        EXPECT(gbc.pc(), 0x526e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0231
        gbc.setState(0x675f, 0x9ef4, 0xf660, 0x78f6, 0xbc14, 0x337, 0x0, 0x1);
        gbc.writeMem(0x675f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9ef4);
        EXPECT(gbc.pc(), 0x6760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0232
        gbc.setState(0xc88f, 0xf655, 0xdb70, 0x4706, 0x6fc5, 0x1c6b, 0x0, 0x0);
        gbc.writeMem(0xc88f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf655);
        EXPECT(gbc.pc(), 0xc890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88f), 0xaa);
        // AA 0233
        gbc.setState(0x4cd8, 0x7e7e, 0x1c70, 0xb914, 0xf16b, 0xde2b, 0x1, 0x0);
        gbc.writeMem(0x4cd8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7e7e);
        EXPECT(gbc.pc(), 0x4cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0234
        gbc.setState(0x38dd, 0xc7ee, 0xb7c0, 0x10c4, 0x940, 0x4128, 0x0, 0x0);
        gbc.writeMem(0x38dd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc7ee);
        EXPECT(gbc.pc(), 0x38de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0235
        gbc.setState(0x1cb7, 0xa71f, 0x5f50, 0x3d24, 0xf9e1, 0x7987, 0x1, 0x1);
        gbc.writeMem(0x1cb7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa71f);
        EXPECT(gbc.pc(), 0x1cb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0236
        gbc.setState(0x61be, 0x9c52, 0x6ab0, 0x597a, 0x7216, 0x7485, 0x0, 0x1);
        gbc.writeMem(0x61be, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9c52);
        EXPECT(gbc.pc(), 0x61bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0237
        gbc.setState(0x12e4, 0xca2e, 0xe870, 0xe337, 0x80ca, 0x6177, 0x1, 0x0);
        gbc.writeMem(0x12e4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xca2e);
        EXPECT(gbc.pc(), 0x12e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0238
        gbc.setState(0x55e1, 0xde7c, 0xc110, 0x7d3f, 0xeedf, 0x8ea3, 0x1, 0x1);
        gbc.writeMem(0x55e1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xde7c);
        EXPECT(gbc.pc(), 0x55e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0239
        gbc.setState(0xcd9b, 0xad25, 0x4ee0, 0x3f5e, 0xe414, 0x394, 0x1, 0x1);
        gbc.writeMem(0xcd9b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xad25);
        EXPECT(gbc.pc(), 0xcd9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd9b), 0xaa);
        // AA 023A
        gbc.setState(0x1908, 0xf432, 0xa930, 0x71f8, 0x7971, 0x759c, 0x1, 0x0);
        gbc.writeMem(0x1908, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf432);
        EXPECT(gbc.pc(), 0x1909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 023B
        gbc.setState(0x8865, 0x29bb, 0x7fb0, 0xcc26, 0x6ada, 0x250f, 0x1, 0x0);
        gbc.writeMem(0x8865, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x29bb);
        EXPECT(gbc.pc(), 0x8866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8865), 0xaa);
        // AA 023C
        gbc.setState(0x9cf0, 0xcbf7, 0xce50, 0xd4e1, 0x3b67, 0x22dd, 0x0, 0x0);
        gbc.writeMem(0x9cf0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xcbf7);
        EXPECT(gbc.pc(), 0x9cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf0), 0xaa);
        // AA 023D
        gbc.setState(0x5e55, 0x263a, 0xb460, 0xe49, 0xaa9c, 0x55c3, 0x0, 0x1);
        gbc.writeMem(0x5e55, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x263a);
        EXPECT(gbc.pc(), 0x5e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 023E
        gbc.setState(0x360f, 0x8558, 0xf940, 0xd2bc, 0xb843, 0x51f5, 0x0, 0x0);
        gbc.writeMem(0x360f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8558);
        EXPECT(gbc.pc(), 0x3610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 023F
        gbc.setState(0x9540, 0x2f9c, 0x5f10, 0x7830, 0x7a93, 0xcfec, 0x0, 0x1);
        gbc.writeMem(0x9540, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2f9c);
        EXPECT(gbc.pc(), 0x9541);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9540), 0xaa);
        // AA 0240
        gbc.setState(0x8ae1, 0xc645, 0xb970, 0xa15d, 0xeb9d, 0x9960, 0x0, 0x1);
        gbc.writeMem(0x8ae1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc645);
        EXPECT(gbc.pc(), 0x8ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae1), 0xaa);
        // AA 0241
        gbc.setState(0xdde0, 0xcbad, 0xa730, 0x6000, 0x7d8a, 0x7214, 0x0, 0x0);
        gbc.writeMem(0xdde0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcbad);
        EXPECT(gbc.pc(), 0xdde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde0), 0xaa);
        // AA 0242
        gbc.setState(0x7fed, 0x97ee, 0xfa00, 0x4f0d, 0x7586, 0xf574, 0x0, 0x1);
        gbc.writeMem(0x7fed, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x97ee);
        EXPECT(gbc.pc(), 0x7fee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0243
        gbc.setState(0x750a, 0x5ff6, 0xba50, 0x9802, 0xed99, 0x8934, 0x1, 0x0);
        gbc.writeMem(0x750a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5ff6);
        EXPECT(gbc.pc(), 0x750b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0244
        gbc.setState(0x4d73, 0xe792, 0x3870, 0x2a8c, 0x5101, 0x748e, 0x0, 0x0);
        gbc.writeMem(0x4d73, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe792);
        EXPECT(gbc.pc(), 0x4d74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0245
        gbc.setState(0x8a2, 0x592e, 0x1860, 0xa4f, 0x4be4, 0x2903, 0x1, 0x1);
        gbc.writeMem(0x8a2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x592e);
        EXPECT(gbc.pc(), 0x8a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0246
        gbc.setState(0x4abf, 0x1bb4, 0x3e30, 0xf6eb, 0x280e, 0x9f0b, 0x0, 0x1);
        gbc.writeMem(0x4abf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1bb4);
        EXPECT(gbc.pc(), 0x4ac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0247
        gbc.setState(0x74d5, 0x70f0, 0x2800, 0x694c, 0x36b8, 0x816b, 0x1, 0x0);
        gbc.writeMem(0x74d5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x70f0);
        EXPECT(gbc.pc(), 0x74d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0248
        gbc.setState(0xa238, 0x403c, 0x8c00, 0x6d07, 0x92c3, 0x9688, 0x0, 0x0);
        gbc.writeMem(0xa238, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x403c);
        EXPECT(gbc.pc(), 0xa239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa238), 0xaa);
        // AA 0249
        gbc.setState(0xb19f, 0xdd0a, 0x5810, 0x1d20, 0xeca2, 0x7b56, 0x0, 0x1);
        gbc.writeMem(0xb19f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdd0a);
        EXPECT(gbc.pc(), 0xb1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb19f), 0xaa);
        // AA 024A
        gbc.setState(0x6e85, 0xa088, 0x99f0, 0x1074, 0xf4fa, 0xef4b, 0x0, 0x0);
        gbc.writeMem(0x6e85, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa088);
        EXPECT(gbc.pc(), 0x6e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 024B
        gbc.setState(0x4ccf, 0x5fde, 0xcd40, 0x973c, 0x46e6, 0xa7e6, 0x0, 0x1);
        gbc.writeMem(0x4ccf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5fde);
        EXPECT(gbc.pc(), 0x4cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 024C
        gbc.setState(0xeeb3, 0xfb14, 0x8e0, 0x57e5, 0x917a, 0x3006, 0x0, 0x1);
        gbc.writeMem(0xeeb3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfb14);
        EXPECT(gbc.pc(), 0xeeb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb3), 0xaa);
        // AA 024D
        gbc.setState(0xe987, 0x438f, 0x79f0, 0xe9ef, 0x67a8, 0x2b62, 0x0, 0x1);
        gbc.writeMem(0xe987, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x438f);
        EXPECT(gbc.pc(), 0xe988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe987), 0xaa);
        // AA 024E
        gbc.setState(0x630e, 0xbc1b, 0x4e30, 0x5d99, 0xc524, 0x9866, 0x1, 0x0);
        gbc.writeMem(0x630e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbc1b);
        EXPECT(gbc.pc(), 0x630f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 024F
        gbc.setState(0x2bad, 0xb9e0, 0xb9d0, 0xa3b8, 0xecce, 0x5499, 0x1, 0x1);
        gbc.writeMem(0x2bad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb9e0);
        EXPECT(gbc.pc(), 0x2bae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0250
        gbc.setState(0xd3bf, 0xa8f7, 0x94c0, 0x128e, 0x9bab, 0xf810, 0x0, 0x0);
        gbc.writeMem(0xd3bf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa8f7);
        EXPECT(gbc.pc(), 0xd3c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3bf), 0xaa);
        // AA 0252
        gbc.setState(0x9335, 0xef74, 0x4bd0, 0xa2e6, 0x5631, 0xca2e, 0x0, 0x1);
        gbc.writeMem(0x9335, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xef74);
        EXPECT(gbc.pc(), 0x9336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9335), 0xaa);
        // AA 0253
        gbc.setState(0x8dd2, 0xb015, 0x72e0, 0xba82, 0xd474, 0xfcb1, 0x0, 0x0);
        gbc.writeMem(0x8dd2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb015);
        EXPECT(gbc.pc(), 0x8dd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd2), 0xaa);
        // AA 0254
        gbc.setState(0xc510, 0x89c6, 0x5270, 0x5400, 0x663e, 0x6c1a, 0x1, 0x1);
        gbc.writeMem(0xc510, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x89c6);
        EXPECT(gbc.pc(), 0xc511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc510), 0xaa);
        // AA 0255
        gbc.setState(0xc167, 0x3d93, 0x4870, 0x4768, 0x2819, 0x53b5, 0x0, 0x0);
        gbc.writeMem(0xc167, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3d93);
        EXPECT(gbc.pc(), 0xc168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc167), 0xaa);
        // AA 0256
        gbc.setState(0x5998, 0xf7f5, 0xbbb0, 0x2c07, 0xd1b9, 0x1f16, 0x1, 0x0);
        gbc.writeMem(0x5998, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf7f5);
        EXPECT(gbc.pc(), 0x5999);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0257
        gbc.setState(0xd571, 0xd353, 0xb4c0, 0x1bdd, 0x69a, 0x6924, 0x0, 0x1);
        gbc.writeMem(0xd571, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd353);
        EXPECT(gbc.pc(), 0xd572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd571), 0xaa);
        // AA 0258
        gbc.setState(0x72af, 0x4b5c, 0xf4e0, 0x1ad0, 0x10f, 0x5098, 0x1, 0x1);
        gbc.writeMem(0x72af, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4b5c);
        EXPECT(gbc.pc(), 0x72b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0259
        gbc.setState(0x2f6c, 0x570, 0x19d0, 0x2dc5, 0xd999, 0x4901, 0x0, 0x0);
        gbc.writeMem(0x2f6c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x570);
        EXPECT(gbc.pc(), 0x2f6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 025A
        gbc.setState(0x3e4, 0x3814, 0x7d70, 0x2505, 0xb593, 0x62, 0x1, 0x0);
        gbc.writeMem(0x3e4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3814);
        EXPECT(gbc.pc(), 0x3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 025B
        gbc.setState(0x2fcf, 0x566b, 0x25a0, 0xd4d, 0xcda7, 0xab6b, 0x0, 0x0);
        gbc.writeMem(0x2fcf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x566b);
        EXPECT(gbc.pc(), 0x2fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 025C
        gbc.setState(0x4d, 0xc2b5, 0x1a0, 0x9f37, 0x2cf4, 0x84d0, 0x0, 0x1);
        gbc.writeMem(0x4d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc2b5);
        EXPECT(gbc.pc(), 0x4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 025D
        gbc.setState(0x32b9, 0xba6c, 0x1d20, 0x184d, 0xa24, 0x70d9, 0x0, 0x1);
        gbc.writeMem(0x32b9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xba6c);
        EXPECT(gbc.pc(), 0x32ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 025E
        gbc.setState(0xdbdd, 0x74fc, 0x3890, 0xbc64, 0xda0, 0x3ddb, 0x1, 0x0);
        gbc.writeMem(0xdbdd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x74fc);
        EXPECT(gbc.pc(), 0xdbde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbdd), 0xaa);
        // AA 025F
        gbc.setState(0x33f7, 0x7832, 0x4370, 0x72ce, 0x8e3a, 0x922b, 0x0, 0x0);
        gbc.writeMem(0x33f7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7832);
        EXPECT(gbc.pc(), 0x33f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0260
        gbc.setState(0x2504, 0x42f7, 0xdb30, 0xe61, 0x3517, 0xa31a, 0x0, 0x0);
        gbc.writeMem(0x2504, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x42f7);
        EXPECT(gbc.pc(), 0x2505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0261
        gbc.setState(0x4abd, 0x4c8a, 0x65f0, 0x61cf, 0xa6b3, 0xf55b, 0x0, 0x1);
        gbc.writeMem(0x4abd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4c8a);
        EXPECT(gbc.pc(), 0x4abe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0262
        gbc.setState(0xef4b, 0xe50f, 0xc3c0, 0x19d7, 0xf263, 0xcbd6, 0x0, 0x0);
        gbc.writeMem(0xef4b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe50f);
        EXPECT(gbc.pc(), 0xef4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef4b), 0xaa);
        // AA 0263
        gbc.setState(0xb677, 0x4c54, 0x24c0, 0x232a, 0x8c84, 0x8a4b, 0x0, 0x1);
        gbc.writeMem(0xb677, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4c54);
        EXPECT(gbc.pc(), 0xb678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb677), 0xaa);
        // AA 0264
        gbc.setState(0x1c30, 0xf4ae, 0x2e20, 0xc670, 0x1f28, 0x980d, 0x1, 0x1);
        gbc.writeMem(0x1c30, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf4ae);
        EXPECT(gbc.pc(), 0x1c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0265
        gbc.setState(0x5eb4, 0xd742, 0xa5b0, 0x344, 0x9fe8, 0x52bf, 0x1, 0x1);
        gbc.writeMem(0x5eb4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd742);
        EXPECT(gbc.pc(), 0x5eb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0266
        gbc.setState(0x3687, 0x9977, 0x1150, 0x76ae, 0xc907, 0x4c62, 0x1, 0x1);
        gbc.writeMem(0x3687, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9977);
        EXPECT(gbc.pc(), 0x3688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0267
        gbc.setState(0xa6cd, 0x4b46, 0x5570, 0x3210, 0xd0d1, 0x37c1, 0x0, 0x1);
        gbc.writeMem(0xa6cd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4b46);
        EXPECT(gbc.pc(), 0xa6ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6cd), 0xaa);
        // AA 0268
        gbc.setState(0x8867, 0x7a0c, 0xfa90, 0x1262, 0x7723, 0xb64, 0x1, 0x1);
        gbc.writeMem(0x8867, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0x8868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8867), 0xaa);
        // AA 0269
        gbc.setState(0xe3fc, 0x4cf3, 0xe030, 0xe1f8, 0xc761, 0x9562, 0x1, 0x0);
        gbc.writeMem(0xe3fc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4cf3);
        EXPECT(gbc.pc(), 0xe3fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3fc), 0xaa);
        // AA 026A
        gbc.setState(0x6a8b, 0xbfe, 0xcd0, 0xbc5c, 0x3e2, 0x583a, 0x0, 0x0);
        gbc.writeMem(0x6a8b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xbfe);
        EXPECT(gbc.pc(), 0x6a8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 026B
        gbc.setState(0x3dfe, 0xe6f, 0xe510, 0xa82a, 0xc62a, 0x68d1, 0x1, 0x0);
        gbc.writeMem(0x3dfe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe6f);
        EXPECT(gbc.pc(), 0x3dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 026C
        gbc.setState(0xafec, 0x5eb9, 0xe020, 0x3bfd, 0xa650, 0xe014, 0x1, 0x0);
        gbc.writeMem(0xafec, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5eb9);
        EXPECT(gbc.pc(), 0xafed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafec), 0xaa);
        // AA 026D
        gbc.setState(0xe6f1, 0x1e6d, 0x6060, 0xbfff, 0x5387, 0xd2fe, 0x1, 0x0);
        gbc.writeMem(0xe6f1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1e6d);
        EXPECT(gbc.pc(), 0xe6f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f1), 0xaa);
        // AA 026E
        gbc.setState(0x824d, 0x36cf, 0xebb0, 0xb231, 0xb786, 0x4e01, 0x0, 0x0);
        gbc.writeMem(0x824d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x36cf);
        EXPECT(gbc.pc(), 0x824e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x824d), 0xaa);
        // AA 026F
        gbc.setState(0x6b71, 0x6684, 0x95d0, 0xf7bc, 0x8e1d, 0x4d92, 0x0, 0x1);
        gbc.writeMem(0x6b71, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6684);
        EXPECT(gbc.pc(), 0x6b72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0270
        gbc.setState(0xb57b, 0xe70c, 0x3ff0, 0xde35, 0xe74c, 0x6f3c, 0x1, 0x0);
        gbc.writeMem(0xb57b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe70c);
        EXPECT(gbc.pc(), 0xb57c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57b), 0xaa);
        // AA 0271
        gbc.setState(0x97e4, 0x4e8, 0xf640, 0x4232, 0xbecd, 0x2b71, 0x1, 0x0);
        gbc.writeMem(0x97e4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x4e8);
        EXPECT(gbc.pc(), 0x97e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e4), 0xaa);
        // AA 0272
        gbc.setState(0xe7cc, 0x1bce, 0x9390, 0x9495, 0x2fc9, 0x3436, 0x0, 0x0);
        gbc.writeMem(0xe7cc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1bce);
        EXPECT(gbc.pc(), 0xe7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7cc), 0xaa);
        // AA 0273
        gbc.setState(0x54e3, 0x227d, 0xed00, 0xd6ae, 0xb40b, 0x420e, 0x1, 0x1);
        gbc.writeMem(0x54e3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x227d);
        EXPECT(gbc.pc(), 0x54e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0274
        gbc.setState(0xc968, 0xa6c0, 0x4560, 0x1b50, 0x652b, 0xc205, 0x0, 0x0);
        gbc.writeMem(0xc968, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa6c0);
        EXPECT(gbc.pc(), 0xc969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc968), 0xaa);
        // AA 0275
        gbc.setState(0x34c, 0xaf21, 0x6820, 0xee13, 0xbfe8, 0xb3cd, 0x0, 0x1);
        gbc.writeMem(0x34c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xaf21);
        EXPECT(gbc.pc(), 0x34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0276
        gbc.setState(0x4cbb, 0x222f, 0xb270, 0xb91c, 0x5894, 0xf0db, 0x1, 0x0);
        gbc.writeMem(0x4cbb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x222f);
        EXPECT(gbc.pc(), 0x4cbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0277
        gbc.setState(0xe964, 0xc60a, 0xe7e0, 0xc2ea, 0xea33, 0xa4ab, 0x0, 0x1);
        gbc.writeMem(0xe964, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc60a);
        EXPECT(gbc.pc(), 0xe965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe964), 0xaa);
        // AA 0278
        gbc.setState(0x5281, 0x6dbf, 0x2be0, 0x7aa3, 0x30ac, 0x108, 0x0, 0x1);
        gbc.writeMem(0x5281, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6dbf);
        EXPECT(gbc.pc(), 0x5282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0279
        gbc.setState(0xef8d, 0xa2e7, 0x9390, 0xdbaf, 0xe632, 0xe6b7, 0x0, 0x0);
        gbc.writeMem(0xef8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa2e7);
        EXPECT(gbc.pc(), 0xef8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8d), 0xaa);
        // AA 027A
        gbc.setState(0xa3ac, 0xeb06, 0x7ab0, 0xe804, 0xa29c, 0xeef5, 0x0, 0x0);
        gbc.writeMem(0xa3ac, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xeb06);
        EXPECT(gbc.pc(), 0xa3ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ac), 0xaa);
        // AA 027B
        gbc.setState(0xc389, 0x611d, 0xa160, 0xb879, 0x30c1, 0xcce2, 0x0, 0x1);
        gbc.writeMem(0xc389, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x611d);
        EXPECT(gbc.pc(), 0xc38a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc389), 0xaa);
        // AA 027C
        gbc.setState(0xbd40, 0x4d14, 0xff20, 0x963d, 0xf602, 0x809, 0x1, 0x0);
        gbc.writeMem(0xbd40, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4d14);
        EXPECT(gbc.pc(), 0xbd41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd40), 0xaa);
        // AA 027D
        gbc.setState(0xb448, 0x473, 0xeab0, 0xd930, 0x2244, 0x8875, 0x1, 0x0);
        gbc.writeMem(0xb448, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x473);
        EXPECT(gbc.pc(), 0xb449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb448), 0xaa);
        // AA 027E
        gbc.setState(0x34b9, 0xf929, 0xa7c0, 0x1580, 0xa4a5, 0xc1b8, 0x0, 0x0);
        gbc.writeMem(0x34b9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf929);
        EXPECT(gbc.pc(), 0x34ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 027F
        gbc.setState(0xc5fa, 0xbe23, 0xf3b0, 0xc898, 0xb4f8, 0x81b7, 0x1, 0x0);
        gbc.writeMem(0xc5fa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xbe23);
        EXPECT(gbc.pc(), 0xc5fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fa), 0xaa);
        // AA 0280
        gbc.setState(0x91da, 0x9b, 0x3b20, 0x39ff, 0xfd5d, 0xbdc6, 0x0, 0x0);
        gbc.writeMem(0x91da, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9b);
        EXPECT(gbc.pc(), 0x91db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91da), 0xaa);
        // AA 0281
        gbc.setState(0xef82, 0x4974, 0x600, 0xa50, 0x8399, 0x4dec, 0x1, 0x1);
        gbc.writeMem(0xef82, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4974);
        EXPECT(gbc.pc(), 0xef83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef82), 0xaa);
        // AA 0282
        gbc.setState(0xbaea, 0x1353, 0x9150, 0x983b, 0x98f4, 0x896a, 0x1, 0x0);
        gbc.writeMem(0xbaea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1353);
        EXPECT(gbc.pc(), 0xbaeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaea), 0xaa);
        // AA 0284
        gbc.setState(0xad00, 0xdac, 0xb900, 0x3f6, 0x3782, 0x7501, 0x0, 0x1);
        gbc.writeMem(0xad00, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdac);
        EXPECT(gbc.pc(), 0xad01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad00), 0xaa);
        // AA 0285
        gbc.setState(0x716d, 0x7592, 0x9580, 0x9671, 0xdb1e, 0x9592, 0x1, 0x1);
        gbc.writeMem(0x716d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7592);
        EXPECT(gbc.pc(), 0x716e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0286
        gbc.setState(0xbd07, 0xfff2, 0x97d0, 0xc458, 0xfa3a, 0xd62f, 0x0, 0x0);
        gbc.writeMem(0xbd07, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfff2);
        EXPECT(gbc.pc(), 0xbd08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd07), 0xaa);
        // AA 0287
        gbc.setState(0xa5ef, 0x240d, 0x4430, 0x823d, 0x21f3, 0x55e9, 0x0, 0x0);
        gbc.writeMem(0xa5ef, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x240d);
        EXPECT(gbc.pc(), 0xa5f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ef), 0xaa);
        // AA 0288
        gbc.setState(0x9f5d, 0x5cf, 0x4030, 0x51a2, 0xcb4, 0xf5fa, 0x1, 0x1);
        gbc.writeMem(0x9f5d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x5cf);
        EXPECT(gbc.pc(), 0x9f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5d), 0xaa);
        // AA 0289
        gbc.setState(0x274c, 0x1b73, 0xc640, 0x64fc, 0xc7df, 0xb2ec, 0x1, 0x1);
        gbc.writeMem(0x274c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1b73);
        EXPECT(gbc.pc(), 0x274d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 028A
        gbc.setState(0x3745, 0x3503, 0x8000, 0xb881, 0x58e0, 0xf4e6, 0x1, 0x1);
        gbc.writeMem(0x3745, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3503);
        EXPECT(gbc.pc(), 0x3746);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 028C
        gbc.setState(0x3370, 0xf0e9, 0x680, 0xf906, 0xebb9, 0x2645, 0x0, 0x1);
        gbc.writeMem(0x3370, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf0e9);
        EXPECT(gbc.pc(), 0x3371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 028D
        gbc.setState(0xd39c, 0x97c1, 0xa6b0, 0xb853, 0x37ca, 0xda07, 0x0, 0x1);
        gbc.writeMem(0xd39c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x97c1);
        EXPECT(gbc.pc(), 0xd39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd39c), 0xaa);
        // AA 028E
        gbc.setState(0xe8c3, 0x59be, 0x6390, 0x88e3, 0xdd20, 0x80cb, 0x1, 0x1);
        gbc.writeMem(0xe8c3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x59be);
        EXPECT(gbc.pc(), 0xe8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c3), 0xaa);
        // AA 028F
        gbc.setState(0xd571, 0x3d5e, 0xacf0, 0x7f78, 0x2642, 0x36e3, 0x0, 0x1);
        gbc.writeMem(0xd571, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3d5e);
        EXPECT(gbc.pc(), 0xd572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd571), 0xaa);
        // AA 0290
        gbc.setState(0xe7e2, 0x7ae3, 0xee70, 0x4f4, 0x5b3c, 0x502a, 0x0, 0x0);
        gbc.writeMem(0xe7e2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7ae3);
        EXPECT(gbc.pc(), 0xe7e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e2), 0xaa);
        // AA 0291
        gbc.setState(0x85e8, 0xfdb, 0xe500, 0x3beb, 0x64a3, 0x7598, 0x0, 0x0);
        gbc.writeMem(0x85e8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfdb);
        EXPECT(gbc.pc(), 0x85e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e8), 0xaa);
        // AA 0292
        gbc.setState(0x52cd, 0xd2ec, 0x5f30, 0xdbce, 0xf927, 0xfc3, 0x1, 0x0);
        gbc.writeMem(0x52cd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd2ec);
        EXPECT(gbc.pc(), 0x52ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0293
        gbc.setState(0x9c53, 0xe8cb, 0xfc10, 0x5941, 0xf00, 0x1c8b, 0x0, 0x1);
        gbc.writeMem(0x9c53, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe8cb);
        EXPECT(gbc.pc(), 0x9c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c53), 0xaa);
        // AA 0294
        gbc.setState(0x6fa2, 0xf586, 0x4b90, 0x8fcb, 0xfaf2, 0xf55a, 0x1, 0x0);
        gbc.writeMem(0x6fa2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf586);
        EXPECT(gbc.pc(), 0x6fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0295
        gbc.setState(0xe216, 0xd6c5, 0x3180, 0x3494, 0xb95d, 0x265e, 0x1, 0x1);
        gbc.writeMem(0xe216, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd6c5);
        EXPECT(gbc.pc(), 0xe217);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe216), 0xaa);
        // AA 0296
        gbc.setState(0xa62b, 0x3801, 0x80c0, 0x5ee1, 0x841e, 0x8812, 0x1, 0x1);
        gbc.writeMem(0xa62b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3801);
        EXPECT(gbc.pc(), 0xa62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62b), 0xaa);
        // AA 0297
        gbc.setState(0x7bab, 0x76db, 0x2880, 0xc4d, 0x6531, 0xbd33, 0x1, 0x1);
        gbc.writeMem(0x7bab, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x76db);
        EXPECT(gbc.pc(), 0x7bac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0298
        gbc.setState(0xa0f7, 0xe9d6, 0x7f60, 0x7877, 0x354f, 0xf458, 0x1, 0x0);
        gbc.writeMem(0xa0f7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe9d6);
        EXPECT(gbc.pc(), 0xa0f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0f7), 0xaa);
        // AA 0299
        gbc.setState(0x3f6e, 0x402e, 0x4660, 0xbedf, 0xb30b, 0x16b1, 0x0, 0x1);
        gbc.writeMem(0x3f6e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x402e);
        EXPECT(gbc.pc(), 0x3f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 029A
        gbc.setState(0xa6fb, 0x9da5, 0xb770, 0x92f2, 0x6bca, 0x808e, 0x0, 0x1);
        gbc.writeMem(0xa6fb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9da5);
        EXPECT(gbc.pc(), 0xa6fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6fb), 0xaa);
        // AA 029B
        gbc.setState(0x9d, 0xbf96, 0xbdb0, 0xb624, 0x980d, 0xec1f, 0x0, 0x1);
        gbc.writeMem(0x9d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbf96);
        EXPECT(gbc.pc(), 0x9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 029C
        gbc.setState(0x8c50, 0xcd55, 0x40e0, 0x189c, 0xa95a, 0x2c73, 0x1, 0x1);
        gbc.writeMem(0x8c50, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xcd55);
        EXPECT(gbc.pc(), 0x8c51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c50), 0xaa);
        // AA 029D
        gbc.setState(0xdf27, 0x8047, 0x4430, 0x2ec1, 0x85da, 0x312a, 0x0, 0x1);
        gbc.writeMem(0xdf27, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8047);
        EXPECT(gbc.pc(), 0xdf28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf27), 0xaa);
        // AA 029E
        gbc.setState(0x1447, 0x9e2e, 0xecb0, 0xe7ee, 0x2f5a, 0xe2fd, 0x1, 0x1);
        gbc.writeMem(0x1447, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9e2e);
        EXPECT(gbc.pc(), 0x1448);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 029F
        gbc.setState(0xbd0b, 0x459b, 0xe3e0, 0x914d, 0xb636, 0xc, 0x0, 0x0);
        gbc.writeMem(0xbd0b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x459b);
        EXPECT(gbc.pc(), 0xbd0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd0b), 0xaa);
        // AA 02A0
        gbc.setState(0xe995, 0xb7da, 0x7cf0, 0xed26, 0xc5a2, 0xd0e1, 0x0, 0x1);
        gbc.writeMem(0xe995, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb7da);
        EXPECT(gbc.pc(), 0xe996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe995), 0xaa);
        // AA 02A1
        gbc.setState(0x37e5, 0xbac6, 0x47c0, 0x43cc, 0x2f32, 0xdd2, 0x0, 0x0);
        gbc.writeMem(0x37e5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbac6);
        EXPECT(gbc.pc(), 0x37e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A2
        gbc.setState(0x54f6, 0xe62e, 0x7ec0, 0x3cd, 0x1eee, 0x6172, 0x0, 0x1);
        gbc.writeMem(0x54f6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe62e);
        EXPECT(gbc.pc(), 0x54f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A3
        gbc.setState(0x1d5e, 0xaed, 0x58a0, 0x95ff, 0xb4b6, 0xd173, 0x0, 0x1);
        gbc.writeMem(0x1d5e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaed);
        EXPECT(gbc.pc(), 0x1d5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A4
        gbc.setState(0x59b2, 0x74b, 0x7c40, 0x58c3, 0xe0d, 0x5b8d, 0x1, 0x1);
        gbc.writeMem(0x59b2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x74b);
        EXPECT(gbc.pc(), 0x59b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A5
        gbc.setState(0x2a47, 0x397d, 0x61f0, 0xbb2d, 0xadc6, 0xa796, 0x1, 0x0);
        gbc.writeMem(0x2a47, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x397d);
        EXPECT(gbc.pc(), 0x2a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A6
        gbc.setState(0x4864, 0xadf8, 0x7670, 0x1b71, 0xd04c, 0x5339, 0x0, 0x0);
        gbc.writeMem(0x4864, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xadf8);
        EXPECT(gbc.pc(), 0x4865);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A7
        gbc.setState(0x9622, 0x6a3b, 0xc2f0, 0xc2b5, 0x7837, 0xd83e, 0x1, 0x0);
        gbc.writeMem(0x9622, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6a3b);
        EXPECT(gbc.pc(), 0x9623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9622), 0xaa);
        // AA 02A8
        gbc.setState(0x4e10, 0x68af, 0x7790, 0xe458, 0xd059, 0x2928, 0x0, 0x1);
        gbc.writeMem(0x4e10, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x68af);
        EXPECT(gbc.pc(), 0x4e11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02A9
        gbc.setState(0xda14, 0x3979, 0x59c0, 0xb76a, 0x7f8e, 0x4997, 0x0, 0x1);
        gbc.writeMem(0xda14, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3979);
        EXPECT(gbc.pc(), 0xda15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda14), 0xaa);
        // AA 02AA
        gbc.setState(0x70bc, 0x7a63, 0xecb0, 0x8366, 0x39e, 0x5691, 0x0, 0x0);
        gbc.writeMem(0x70bc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7a63);
        EXPECT(gbc.pc(), 0x70bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02AB
        gbc.setState(0xa216, 0xf73c, 0x89b0, 0x76a3, 0x1cfb, 0x9e13, 0x0, 0x1);
        gbc.writeMem(0xa216, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf73c);
        EXPECT(gbc.pc(), 0xa217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa216), 0xaa);
        // AA 02AC
        gbc.setState(0x526a, 0xafc9, 0xd4e0, 0x11ad, 0x6c5a, 0xbf1f, 0x1, 0x1);
        gbc.writeMem(0x526a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xafc9);
        EXPECT(gbc.pc(), 0x526b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02AD
        gbc.setState(0x8973, 0xc43a, 0xdda0, 0x5bb3, 0xd6e9, 0xe389, 0x0, 0x0);
        gbc.writeMem(0x8973, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc43a);
        EXPECT(gbc.pc(), 0x8974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8973), 0xaa);
        // AA 02AE
        gbc.setState(0x7d46, 0x5f48, 0x7f20, 0xd12e, 0xb8d, 0x35b4, 0x1, 0x1);
        gbc.writeMem(0x7d46, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5f48);
        EXPECT(gbc.pc(), 0x7d47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02AF
        gbc.setState(0x5b23, 0x2d7a, 0x37b0, 0x2910, 0x30ff, 0xe04f, 0x0, 0x0);
        gbc.writeMem(0x5b23, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2d7a);
        EXPECT(gbc.pc(), 0x5b24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02B0
        gbc.setState(0x9700, 0x4b86, 0x37a0, 0x6bbb, 0x67fc, 0xd6fe, 0x0, 0x1);
        gbc.writeMem(0x9700, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4b86);
        EXPECT(gbc.pc(), 0x9701);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9700), 0xaa);
        // AA 02B1
        gbc.setState(0x5607, 0xa4a8, 0x5dd0, 0xe8fe, 0x2d36, 0xf8d2, 0x1, 0x1);
        gbc.writeMem(0x5607, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa4a8);
        EXPECT(gbc.pc(), 0x5608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02B2
        gbc.setState(0xdbda, 0x2d69, 0xfae0, 0xcd89, 0xf64b, 0x8070, 0x1, 0x0);
        gbc.writeMem(0xdbda, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x2d69);
        EXPECT(gbc.pc(), 0xdbdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbda), 0xaa);
        // AA 02B3
        gbc.setState(0x881e, 0x153e, 0x7a90, 0xb320, 0xc458, 0xaa8f, 0x1, 0x1);
        gbc.writeMem(0x881e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x153e);
        EXPECT(gbc.pc(), 0x881f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881e), 0xaa);
        // AA 02B5
        gbc.setState(0x3afb, 0x106d, 0xe8a0, 0x2ad3, 0xe6dc, 0xa2eb, 0x0, 0x1);
        gbc.writeMem(0x3afb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x106d);
        EXPECT(gbc.pc(), 0x3afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02B7
        gbc.setState(0x3340, 0x1aac, 0xaa90, 0x391, 0x3f74, 0xcdad, 0x0, 0x1);
        gbc.writeMem(0x3340, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1aac);
        EXPECT(gbc.pc(), 0x3341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02B8
        gbc.setState(0x179d, 0x450d, 0x3f10, 0x6a5a, 0xafcc, 0xec1b, 0x0, 0x1);
        gbc.writeMem(0x179d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x450d);
        EXPECT(gbc.pc(), 0x179e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02B9
        gbc.setState(0x8bda, 0xa865, 0xc40, 0x8ddc, 0xd04d, 0x63a6, 0x0, 0x0);
        gbc.writeMem(0x8bda, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa865);
        EXPECT(gbc.pc(), 0x8bdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bda), 0xaa);
        // AA 02BA
        gbc.setState(0x3044, 0x724b, 0x26b0, 0x8e1b, 0x4a99, 0xc9fa, 0x1, 0x1);
        gbc.writeMem(0x3044, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x724b);
        EXPECT(gbc.pc(), 0x3045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02BB
        gbc.setState(0xd9e2, 0xe911, 0xc190, 0xfbd8, 0xa847, 0xd3fb, 0x1, 0x1);
        gbc.writeMem(0xd9e2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe911);
        EXPECT(gbc.pc(), 0xd9e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9e2), 0xaa);
        // AA 02BC
        gbc.setState(0x4733, 0xb1e6, 0x23c0, 0xc474, 0xb5ef, 0xb5f3, 0x0, 0x0);
        gbc.writeMem(0x4733, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb1e6);
        EXPECT(gbc.pc(), 0x4734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02BD
        gbc.setState(0xaa61, 0x13f4, 0x5d20, 0x686d, 0xe925, 0xdf8e, 0x1, 0x1);
        gbc.writeMem(0xaa61, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x13f4);
        EXPECT(gbc.pc(), 0xaa62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa61), 0xaa);
        // AA 02BE
        gbc.setState(0x2b08, 0xee69, 0xe210, 0x958e, 0x3278, 0x55f8, 0x0, 0x0);
        gbc.writeMem(0x2b08, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xee69);
        EXPECT(gbc.pc(), 0x2b09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02BF
        gbc.setState(0xd3ea, 0xca7c, 0x60a0, 0x90cd, 0xe3f6, 0xe2bc, 0x0, 0x0);
        gbc.writeMem(0xd3ea, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xca7c);
        EXPECT(gbc.pc(), 0xd3eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ea), 0xaa);
        // AA 02C0
        gbc.setState(0xc6c0, 0x3b36, 0x92f0, 0xbb5, 0x6fa7, 0x6e61, 0x1, 0x1);
        gbc.writeMem(0xc6c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3b36);
        EXPECT(gbc.pc(), 0xc6c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c0), 0xaa);
        // AA 02C1
        gbc.setState(0x2c47, 0xcac6, 0xd2d0, 0x2c0a, 0xaffc, 0x4f04, 0x1, 0x1);
        gbc.writeMem(0x2c47, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcac6);
        EXPECT(gbc.pc(), 0x2c48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02C2
        gbc.setState(0xd99e, 0x30c7, 0x4e60, 0xe476, 0xdfb1, 0xcf2, 0x1, 0x0);
        gbc.writeMem(0xd99e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x30c7);
        EXPECT(gbc.pc(), 0xd99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99e), 0xaa);
        // AA 02C3
        gbc.setState(0x4da5, 0x6907, 0xd100, 0x64a5, 0xdab5, 0xc44b, 0x1, 0x0);
        gbc.writeMem(0x4da5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6907);
        EXPECT(gbc.pc(), 0x4da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02C4
        gbc.setState(0x1bc3, 0x7b9, 0x1740, 0x85e6, 0xb8bf, 0x4fec, 0x1, 0x1);
        gbc.writeMem(0x1bc3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7b9);
        EXPECT(gbc.pc(), 0x1bc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02C5
        gbc.setState(0x302f, 0x9bb, 0x2070, 0xaeb8, 0xae8b, 0x2b8, 0x1, 0x0);
        gbc.writeMem(0x302f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9bb);
        EXPECT(gbc.pc(), 0x3030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02C6
        gbc.setState(0xda1b, 0x5f74, 0xf3a0, 0xfb64, 0xbf00, 0x1239, 0x0, 0x0);
        gbc.writeMem(0xda1b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5f74);
        EXPECT(gbc.pc(), 0xda1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda1b), 0xaa);
        // AA 02C7
        gbc.setState(0x7fb2, 0xedec, 0xc1c0, 0x3b3b, 0xda6b, 0xa6a3, 0x1, 0x1);
        gbc.writeMem(0x7fb2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xedec);
        EXPECT(gbc.pc(), 0x7fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02C8
        gbc.setState(0xbd47, 0x7c0a, 0x4000, 0x2bd4, 0x4a64, 0xa521, 0x1, 0x1);
        gbc.writeMem(0xbd47, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7c0a);
        EXPECT(gbc.pc(), 0xbd48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd47), 0xaa);
        // AA 02C9
        gbc.setState(0x1104, 0x8fba, 0x9bb0, 0x2033, 0xb6f, 0xc5b8, 0x1, 0x0);
        gbc.writeMem(0x1104, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8fba);
        EXPECT(gbc.pc(), 0x1105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02CA
        gbc.setState(0x54ec, 0x4465, 0xca40, 0x1eda, 0xff68, 0x5e82, 0x0, 0x1);
        gbc.writeMem(0x54ec, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4465);
        EXPECT(gbc.pc(), 0x54ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02CB
        gbc.setState(0x1765, 0x87f3, 0xff90, 0xf6dd, 0xf5ee, 0xe5ab, 0x0, 0x1);
        gbc.writeMem(0x1765, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x87f3);
        EXPECT(gbc.pc(), 0x1766);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02CC
        gbc.setState(0xabb5, 0x7138, 0x660, 0x911a, 0x1c81, 0x7eeb, 0x0, 0x0);
        gbc.writeMem(0xabb5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7138);
        EXPECT(gbc.pc(), 0xabb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb5), 0xaa);
        // AA 02CD
        gbc.setState(0xac29, 0x3dfe, 0x72c0, 0xe303, 0x77e5, 0x8170, 0x0, 0x1);
        gbc.writeMem(0xac29, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3dfe);
        EXPECT(gbc.pc(), 0xac2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac29), 0xaa);
        // AA 02CE
        gbc.setState(0x1724, 0x58ba, 0x1d0, 0x8e91, 0x641a, 0x9a4, 0x0, 0x0);
        gbc.writeMem(0x1724, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x58ba);
        EXPECT(gbc.pc(), 0x1725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02CF
        gbc.setState(0xd881, 0xdc, 0xa420, 0xb836, 0xc8c8, 0x196, 0x1, 0x1);
        gbc.writeMem(0xd881, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xdc);
        EXPECT(gbc.pc(), 0xd882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd881), 0xaa);
        // AA 02D0
        gbc.setState(0xe3ba, 0x6a00, 0x7490, 0xf893, 0x8104, 0x5cc4, 0x1, 0x0);
        gbc.writeMem(0xe3ba, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6a00);
        EXPECT(gbc.pc(), 0xe3bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ba), 0xaa);
        // AA 02D1
        gbc.setState(0xc3c8, 0x4502, 0x62a0, 0x2bbe, 0xfabf, 0xd0e2, 0x0, 0x0);
        gbc.writeMem(0xc3c8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4502);
        EXPECT(gbc.pc(), 0xc3c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3c8), 0xaa);
        // AA 02D2
        gbc.setState(0xd4ef, 0x5888, 0x6ae0, 0xff13, 0x2cb6, 0x9052, 0x0, 0x1);
        gbc.writeMem(0xd4ef, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5888);
        EXPECT(gbc.pc(), 0xd4f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ef), 0xaa);
        // AA 02D3
        gbc.setState(0x68da, 0xd99a, 0x4330, 0x56c6, 0x82e6, 0x5e2f, 0x0, 0x1);
        gbc.writeMem(0x68da, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd99a);
        EXPECT(gbc.pc(), 0x68db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02D4
        gbc.setState(0xca33, 0xdfbc, 0x8b90, 0x9681, 0xf4c, 0x7f7b, 0x1, 0x1);
        gbc.writeMem(0xca33, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdfbc);
        EXPECT(gbc.pc(), 0xca34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca33), 0xaa);
        // AA 02D5
        gbc.setState(0x6de4, 0x2b17, 0xff20, 0xaac, 0xf04c, 0xdc01, 0x0, 0x0);
        gbc.writeMem(0x6de4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2b17);
        EXPECT(gbc.pc(), 0x6de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02D6
        gbc.setState(0xad49, 0xfd5e, 0x89a0, 0x81be, 0xc08d, 0x6bba, 0x0, 0x1);
        gbc.writeMem(0xad49, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xfd5e);
        EXPECT(gbc.pc(), 0xad4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad49), 0xaa);
        // AA 02D7
        gbc.setState(0x2df, 0x85f3, 0x6890, 0x6fc7, 0xa372, 0x7bb8, 0x1, 0x1);
        gbc.writeMem(0x2df, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x85f3);
        EXPECT(gbc.pc(), 0x2e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02D8
        gbc.setState(0x1230, 0xf73b, 0x8690, 0xc7c8, 0x8b58, 0xce3a, 0x1, 0x0);
        gbc.writeMem(0x1230, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf73b);
        EXPECT(gbc.pc(), 0x1231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02D9
        gbc.setState(0x37c0, 0x756d, 0x6e00, 0x3c35, 0x379c, 0xf29d, 0x0, 0x0);
        gbc.writeMem(0x37c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x756d);
        EXPECT(gbc.pc(), 0x37c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02DA
        gbc.setState(0x459a, 0x85dd, 0xa40, 0x3b29, 0x58e1, 0xdd72, 0x0, 0x0);
        gbc.writeMem(0x459a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x85dd);
        EXPECT(gbc.pc(), 0x459b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02DB
        gbc.setState(0xc25f, 0x47e9, 0xd820, 0xca64, 0x25e3, 0x7595, 0x0, 0x1);
        gbc.writeMem(0xc25f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x47e9);
        EXPECT(gbc.pc(), 0xc260);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25f), 0xaa);
        // AA 02DD
        gbc.setState(0x9835, 0xed79, 0xa110, 0x1ad0, 0xbb89, 0xf2b0, 0x0, 0x0);
        gbc.writeMem(0x9835, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xed79);
        EXPECT(gbc.pc(), 0x9836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9835), 0xaa);
        // AA 02DE
        gbc.setState(0x4e48, 0x7e35, 0x4560, 0xc8e7, 0x7aae, 0xb1f8, 0x1, 0x0);
        gbc.writeMem(0x4e48, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x7e35);
        EXPECT(gbc.pc(), 0x4e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02DF
        gbc.setState(0xa616, 0x85c5, 0xf3e0, 0xad08, 0x7412, 0xbcef, 0x0, 0x0);
        gbc.writeMem(0xa616, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x85c5);
        EXPECT(gbc.pc(), 0xa617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa616), 0xaa);
        // AA 02E0
        gbc.setState(0xbf77, 0x3361, 0x8050, 0xf703, 0xe4a, 0xf271, 0x1, 0x0);
        gbc.writeMem(0xbf77, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3361);
        EXPECT(gbc.pc(), 0xbf78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf77), 0xaa);
        // AA 02E1
        gbc.setState(0xb758, 0x5b3, 0x4a40, 0x306c, 0xaad6, 0xe9d4, 0x0, 0x1);
        gbc.writeMem(0xb758, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5b3);
        EXPECT(gbc.pc(), 0xb759);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb758), 0xaa);
        // AA 02E2
        gbc.setState(0xe884, 0x9449, 0xbd80, 0x364c, 0xfa51, 0xb999, 0x1, 0x1);
        gbc.writeMem(0xe884, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x9449);
        EXPECT(gbc.pc(), 0xe885);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe884), 0xaa);
        // AA 02E3
        gbc.setState(0x53c4, 0x1619, 0xe4e0, 0x3fa6, 0xc15c, 0xa809, 0x1, 0x0);
        gbc.writeMem(0x53c4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1619);
        EXPECT(gbc.pc(), 0x53c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02E5
        gbc.setState(0x87a6, 0x9697, 0xcb20, 0xd505, 0xf735, 0xc020, 0x0, 0x0);
        gbc.writeMem(0x87a6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9697);
        EXPECT(gbc.pc(), 0x87a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a6), 0xaa);
        // AA 02E6
        gbc.setState(0x6690, 0x8294, 0xed00, 0xdbdf, 0xaf72, 0xec15, 0x1, 0x0);
        gbc.writeMem(0x6690, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8294);
        EXPECT(gbc.pc(), 0x6691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02E7
        gbc.setState(0x17c, 0xdf41, 0xd70, 0x19a9, 0xc92b, 0xc0d4, 0x0, 0x0);
        gbc.writeMem(0x17c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdf41);
        EXPECT(gbc.pc(), 0x17d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02E8
        gbc.setState(0x6081, 0x1668, 0x610, 0x513e, 0x48e8, 0xda10, 0x1, 0x1);
        gbc.writeMem(0x6081, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1668);
        EXPECT(gbc.pc(), 0x6082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02E9
        gbc.setState(0x259b, 0x6081, 0x6210, 0xc703, 0x3168, 0x2e82, 0x0, 0x1);
        gbc.writeMem(0x259b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6081);
        EXPECT(gbc.pc(), 0x259c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02EA
        gbc.setState(0x811d, 0xd918, 0x6a50, 0xeccc, 0xd5a5, 0x53d, 0x1, 0x0);
        gbc.writeMem(0x811d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd918);
        EXPECT(gbc.pc(), 0x811e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811d), 0xaa);
        // AA 02EB
        gbc.setState(0xdc9, 0x660f, 0x56d0, 0x8bf4, 0xf14e, 0x133b, 0x1, 0x1);
        gbc.writeMem(0xdc9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x660f);
        EXPECT(gbc.pc(), 0xdca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02EC
        gbc.setState(0x8bc3, 0xae64, 0x2cf0, 0x4e7f, 0x285c, 0x22bb, 0x1, 0x1);
        gbc.writeMem(0x8bc3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xae64);
        EXPECT(gbc.pc(), 0x8bc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bc3), 0xaa);
        // AA 02ED
        gbc.setState(0x52e0, 0x7f89, 0xb580, 0x531b, 0xec42, 0x6bb6, 0x1, 0x0);
        gbc.writeMem(0x52e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7f89);
        EXPECT(gbc.pc(), 0x52e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02EE
        gbc.setState(0x9ac0, 0x9f95, 0x7e70, 0x8a01, 0x7d41, 0x673f, 0x0, 0x0);
        gbc.writeMem(0x9ac0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9f95);
        EXPECT(gbc.pc(), 0x9ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ac0), 0xaa);
        // AA 02EF
        gbc.setState(0xbde7, 0x63f0, 0x50d0, 0x2367, 0xc072, 0x611, 0x1, 0x1);
        gbc.writeMem(0xbde7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x63f0);
        EXPECT(gbc.pc(), 0xbde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde7), 0xaa);
        // AA 02F0
        gbc.setState(0x3ffb, 0xe7bc, 0x6970, 0x1eb7, 0x242a, 0x25de, 0x1, 0x0);
        gbc.writeMem(0x3ffb, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe7bc);
        EXPECT(gbc.pc(), 0x3ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02F1
        gbc.setState(0x986b, 0x94e3, 0xcfb0, 0x3160, 0x60f4, 0x9bc1, 0x1, 0x1);
        gbc.writeMem(0x986b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x94e3);
        EXPECT(gbc.pc(), 0x986c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x986b), 0xaa);
        // AA 02F2
        gbc.setState(0x3046, 0xfec7, 0x8e00, 0x9a5b, 0xf9de, 0x3fac, 0x0, 0x1);
        gbc.writeMem(0x3046, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfec7);
        EXPECT(gbc.pc(), 0x3047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02F3
        gbc.setState(0x30c9, 0x1934, 0xb2d0, 0xab0a, 0xd041, 0x68a, 0x0, 0x1);
        gbc.writeMem(0x30c9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1934);
        EXPECT(gbc.pc(), 0x30ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02F4
        gbc.setState(0x90c2, 0x4ca4, 0x43f0, 0x6c73, 0xa45e, 0x33a6, 0x1, 0x1);
        gbc.writeMem(0x90c2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4ca4);
        EXPECT(gbc.pc(), 0x90c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c2), 0xaa);
        // AA 02F6
        gbc.setState(0xc432, 0x4ce7, 0x1b30, 0x52a7, 0x6b0e, 0x2186, 0x0, 0x0);
        gbc.writeMem(0xc432, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4ce7);
        EXPECT(gbc.pc(), 0xc433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc432), 0xaa);
        // AA 02F7
        gbc.setState(0x39a, 0xcdc1, 0xeb90, 0x1235, 0x59e7, 0xd5a3, 0x1, 0x0);
        gbc.writeMem(0x39a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcdc1);
        EXPECT(gbc.pc(), 0x39b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02F8
        gbc.setState(0x15f8, 0x2a78, 0x530, 0x54fc, 0x310d, 0x6515, 0x0, 0x0);
        gbc.writeMem(0x15f8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2a78);
        EXPECT(gbc.pc(), 0x15f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02F9
        gbc.setState(0xa7c3, 0xed3c, 0x4d70, 0xb73d, 0x341c, 0x60ea, 0x1, 0x1);
        gbc.writeMem(0xa7c3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xed3c);
        EXPECT(gbc.pc(), 0xa7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7c3), 0xaa);
        // AA 02FA
        gbc.setState(0xd861, 0xf354, 0x56d0, 0xfd6b, 0x3d87, 0x8c58, 0x0, 0x0);
        gbc.writeMem(0xd861, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf354);
        EXPECT(gbc.pc(), 0xd862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd861), 0xaa);
        // AA 02FB
        gbc.setState(0x81ab, 0x1b41, 0xcc00, 0xfcf4, 0xf02d, 0x28b5, 0x0, 0x1);
        gbc.writeMem(0x81ab, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1b41);
        EXPECT(gbc.pc(), 0x81ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ab), 0xaa);
        // AA 02FC
        gbc.setState(0xa709, 0x2e66, 0xd070, 0x4a6, 0x4a0, 0xbe63, 0x0, 0x1);
        gbc.writeMem(0xa709, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2e66);
        EXPECT(gbc.pc(), 0xa70a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa709), 0xaa);
        // AA 02FD
        gbc.setState(0xcb9d, 0x571f, 0x740, 0x48eb, 0xa2eb, 0x6165, 0x1, 0x1);
        gbc.writeMem(0xcb9d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x571f);
        EXPECT(gbc.pc(), 0xcb9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb9d), 0xaa);
        // AA 02FE
        gbc.setState(0x121, 0xcb54, 0x5390, 0xd554, 0x6f6d, 0x94c9, 0x1, 0x1);
        gbc.writeMem(0x121, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcb54);
        EXPECT(gbc.pc(), 0x122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 02FF
        gbc.setState(0x101b, 0xc60a, 0x8d0, 0x6a75, 0x1f8d, 0x317, 0x0, 0x0);
        gbc.writeMem(0x101b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc60a);
        EXPECT(gbc.pc(), 0x101c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0300
        gbc.setState(0x6318, 0x4381, 0x12b0, 0x8c1b, 0x73b4, 0xebb, 0x0, 0x0);
        gbc.writeMem(0x6318, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4381);
        EXPECT(gbc.pc(), 0x6319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0301
        gbc.setState(0xa702, 0xab45, 0x4440, 0x5bfb, 0x9101, 0x1b4a, 0x1, 0x0);
        gbc.writeMem(0xa702, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xab45);
        EXPECT(gbc.pc(), 0xa703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa702), 0xaa);
        // AA 0302
        gbc.setState(0x2a6, 0xc1ef, 0x4450, 0xdeaf, 0xa4d, 0xafac, 0x1, 0x1);
        gbc.writeMem(0x2a6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc1ef);
        EXPECT(gbc.pc(), 0x2a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0303
        gbc.setState(0x71ef, 0x6b16, 0xc9a0, 0xb152, 0x494b, 0x2376, 0x0, 0x0);
        gbc.writeMem(0x71ef, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6b16);
        EXPECT(gbc.pc(), 0x71f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0304
        gbc.setState(0xed1f, 0x7f02, 0xafd0, 0x7668, 0x4cac, 0x2d9d, 0x0, 0x0);
        gbc.writeMem(0xed1f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7f02);
        EXPECT(gbc.pc(), 0xed20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed1f), 0xaa);
        // AA 0305
        gbc.setState(0xcb0d, 0x27f0, 0xc540, 0x4b4d, 0x82d9, 0x8bd1, 0x0, 0x1);
        gbc.writeMem(0xcb0d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x27f0);
        EXPECT(gbc.pc(), 0xcb0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb0d), 0xaa);
        // AA 0306
        gbc.setState(0xb366, 0xaed9, 0xfb70, 0xe7d0, 0xdb24, 0x3b5f, 0x0, 0x0);
        gbc.writeMem(0xb366, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xaed9);
        EXPECT(gbc.pc(), 0xb367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb366), 0xaa);
        // AA 0307
        gbc.setState(0x431c, 0x27e6, 0xe10, 0xd1f9, 0x8eb4, 0xee1, 0x0, 0x0);
        gbc.writeMem(0x431c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x27e6);
        EXPECT(gbc.pc(), 0x431d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0308
        gbc.setState(0x4bbe, 0x8a13, 0x5f40, 0x11d9, 0xc110, 0xc9c4, 0x1, 0x0);
        gbc.writeMem(0x4bbe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8a13);
        EXPECT(gbc.pc(), 0x4bbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0309
        gbc.setState(0xbb07, 0x6a6e, 0xb720, 0xbbb3, 0x2fb5, 0x8c61, 0x0, 0x0);
        gbc.writeMem(0xbb07, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6a6e);
        EXPECT(gbc.pc(), 0xbb08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb07), 0xaa);
        // AA 030A
        gbc.setState(0x3d24, 0x2711, 0xa080, 0x75d9, 0xd1e9, 0xdc62, 0x1, 0x0);
        gbc.writeMem(0x3d24, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2711);
        EXPECT(gbc.pc(), 0x3d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 030B
        gbc.setState(0x14e1, 0xc32c, 0xd290, 0x4f04, 0xb423, 0x79a7, 0x1, 0x0);
        gbc.writeMem(0x14e1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xc32c);
        EXPECT(gbc.pc(), 0x14e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 030C
        gbc.setState(0x2fda, 0xf9e4, 0xe9d0, 0xa9a0, 0x97d7, 0x74bf, 0x1, 0x0);
        gbc.writeMem(0x2fda, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf9e4);
        EXPECT(gbc.pc(), 0x2fdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 030D
        gbc.setState(0x8b1b, 0x329f, 0x2c00, 0x95ef, 0x9a42, 0x7e13, 0x0, 0x1);
        gbc.writeMem(0x8b1b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x329f);
        EXPECT(gbc.pc(), 0x8b1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1b), 0xaa);
        // AA 030E
        gbc.setState(0x166e, 0x1b1e, 0x3860, 0x9bf2, 0xdbf6, 0xea22, 0x1, 0x0);
        gbc.writeMem(0x166e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1b1e);
        EXPECT(gbc.pc(), 0x166f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 030F
        gbc.setState(0x22, 0x6a8, 0x5200, 0xed4c, 0xd977, 0x5f40, 0x0, 0x0);
        gbc.writeMem(0x22, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6a8);
        EXPECT(gbc.pc(), 0x23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0310
        gbc.setState(0xbd81, 0xde6b, 0xa0c0, 0x9e75, 0x6532, 0x969d, 0x0, 0x1);
        gbc.writeMem(0xbd81, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xde6b);
        EXPECT(gbc.pc(), 0xbd82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd81), 0xaa);
        // AA 0311
        gbc.setState(0xd1d0, 0x6724, 0x2d40, 0x9147, 0xcb08, 0x218c, 0x1, 0x1);
        gbc.writeMem(0xd1d0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6724);
        EXPECT(gbc.pc(), 0xd1d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d0), 0xaa);
        // AA 0312
        gbc.setState(0xdcfa, 0x4e6f, 0x3430, 0xe5e9, 0xbfa6, 0xe4d9, 0x0, 0x0);
        gbc.writeMem(0xdcfa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x4e6f);
        EXPECT(gbc.pc(), 0xdcfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcfa), 0xaa);
        // AA 0314
        gbc.setState(0x80a4, 0xd5e, 0x8df0, 0xaaf, 0x1421, 0x6aab, 0x0, 0x1);
        gbc.writeMem(0x80a4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd5e);
        EXPECT(gbc.pc(), 0x80a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a4), 0xaa);
        // AA 0315
        gbc.setState(0x9abe, 0xcc5c, 0xf520, 0xf712, 0xa912, 0x10dc, 0x1, 0x0);
        gbc.writeMem(0x9abe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xcc5c);
        EXPECT(gbc.pc(), 0x9abf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abe), 0xaa);
        // AA 0316
        gbc.setState(0x8d7, 0x29c7, 0x4e10, 0xd8b7, 0xf862, 0x418a, 0x0, 0x0);
        gbc.writeMem(0x8d7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x29c7);
        EXPECT(gbc.pc(), 0x8d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0317
        gbc.setState(0xdc23, 0xf2be, 0x4060, 0x5fa0, 0x323b, 0x65c2, 0x0, 0x1);
        gbc.writeMem(0xdc23, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xf2be);
        EXPECT(gbc.pc(), 0xdc24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc23), 0xaa);
        // AA 0318
        gbc.setState(0x9237, 0x83a1, 0xcda0, 0xeb7c, 0xbfa0, 0x21cf, 0x1, 0x1);
        gbc.writeMem(0x9237, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x83a1);
        EXPECT(gbc.pc(), 0x9238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9237), 0xaa);
        // AA 0319
        gbc.setState(0x12f0, 0x10a6, 0xf360, 0xc5ed, 0x798c, 0x1521, 0x1, 0x0);
        gbc.writeMem(0x12f0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x10a6);
        EXPECT(gbc.pc(), 0x12f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 031A
        gbc.setState(0x87c, 0xac38, 0xa8d0, 0x538d, 0x2a7d, 0xe521, 0x0, 0x0);
        gbc.writeMem(0x87c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xac38);
        EXPECT(gbc.pc(), 0x87d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 031B
        gbc.setState(0xedca, 0xd0d9, 0x2ad0, 0x58ae, 0xe90c, 0x3d56, 0x1, 0x0);
        gbc.writeMem(0xedca, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd0d9);
        EXPECT(gbc.pc(), 0xedcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedca), 0xaa);
        // AA 031C
        gbc.setState(0x304, 0x55ad, 0x11a0, 0x5255, 0x359b, 0xaafb, 0x0, 0x0);
        gbc.writeMem(0x304, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x55ad);
        EXPECT(gbc.pc(), 0x305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 031D
        gbc.setState(0x537c, 0xa756, 0xd0a0, 0x1974, 0x6d8e, 0x61c6, 0x0, 0x0);
        gbc.writeMem(0x537c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa756);
        EXPECT(gbc.pc(), 0x537d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 031E
        gbc.setState(0x897f, 0x3628, 0x25b0, 0xf30, 0xcac9, 0x3c8d, 0x1, 0x0);
        gbc.writeMem(0x897f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3628);
        EXPECT(gbc.pc(), 0x8980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x897f), 0xaa);
        // AA 0320
        gbc.setState(0x26c1, 0x2e4c, 0xa470, 0x6376, 0xf9a5, 0xfcf6, 0x0, 0x0);
        gbc.writeMem(0x26c1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2e4c);
        EXPECT(gbc.pc(), 0x26c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0321
        gbc.setState(0xca44, 0xca84, 0x7d10, 0x1888, 0x854c, 0x514d, 0x0, 0x1);
        gbc.writeMem(0xca44, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xca84);
        EXPECT(gbc.pc(), 0xca45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca44), 0xaa);
        // AA 0322
        gbc.setState(0x4e2f, 0xb57, 0x8820, 0x3e57, 0xce47, 0x532, 0x0, 0x1);
        gbc.writeMem(0x4e2f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb57);
        EXPECT(gbc.pc(), 0x4e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0323
        gbc.setState(0x5527, 0xaa1b, 0x17e0, 0xf9d1, 0xc93f, 0x51ba, 0x1, 0x1);
        gbc.writeMem(0x5527, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaa1b);
        EXPECT(gbc.pc(), 0x5528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0324
        gbc.setState(0xb90c, 0xd94, 0xd00, 0xcc67, 0x2282, 0x1d04, 0x0, 0x0);
        gbc.writeMem(0xb90c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd94);
        EXPECT(gbc.pc(), 0xb90d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb90c), 0xaa);
        // AA 0325
        gbc.setState(0x5686, 0x22a1, 0x8db0, 0xcc17, 0x629c, 0x3189, 0x1, 0x1);
        gbc.writeMem(0x5686, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x22a1);
        EXPECT(gbc.pc(), 0x5687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0326
        gbc.setState(0xec00, 0x72b4, 0x60b0, 0xda9c, 0x3bad, 0x1263, 0x0, 0x1);
        gbc.writeMem(0xec00, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x72b4);
        EXPECT(gbc.pc(), 0xec01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec00), 0xaa);
        // AA 0327
        gbc.setState(0xb28e, 0x2ca1, 0xae30, 0x411f, 0xc987, 0xcd5a, 0x0, 0x0);
        gbc.writeMem(0xb28e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2ca1);
        EXPECT(gbc.pc(), 0xb28f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28e), 0xaa);
        // AA 0328
        gbc.setState(0x6986, 0xf322, 0xaaa0, 0x586e, 0xf41b, 0x9e49, 0x1, 0x1);
        gbc.writeMem(0x6986, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf322);
        EXPECT(gbc.pc(), 0x6987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0329
        gbc.setState(0x4f8d, 0xf25b, 0x7ea0, 0x62da, 0x1a01, 0x913f, 0x1, 0x1);
        gbc.writeMem(0x4f8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf25b);
        EXPECT(gbc.pc(), 0x4f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 032A
        gbc.setState(0x81f4, 0x47b4, 0x6ea0, 0xcdf8, 0x801f, 0xae47, 0x1, 0x1);
        gbc.writeMem(0x81f4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x47b4);
        EXPECT(gbc.pc(), 0x81f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81f4), 0xaa);
        // AA 032B
        gbc.setState(0x656, 0x83ce, 0x9f10, 0xfcf6, 0x1396, 0xfe9, 0x0, 0x1);
        gbc.writeMem(0x656, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x83ce);
        EXPECT(gbc.pc(), 0x657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 032D
        gbc.setState(0x56db, 0x3f4d, 0x5ed0, 0xbc92, 0xb9ef, 0x1af4, 0x0, 0x1);
        gbc.writeMem(0x56db, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x3f4d);
        EXPECT(gbc.pc(), 0x56dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 032E
        gbc.setState(0x38e0, 0xb9ed, 0xa40, 0xb21a, 0x1ce0, 0x16ce, 0x1, 0x0);
        gbc.writeMem(0x38e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb9ed);
        EXPECT(gbc.pc(), 0x38e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 032F
        gbc.setState(0x798, 0xff5b, 0xf8a0, 0xac7c, 0xe0b5, 0x15dd, 0x0, 0x0);
        gbc.writeMem(0x798, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xff5b);
        EXPECT(gbc.pc(), 0x799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0330
        gbc.setState(0x5c75, 0x768, 0xe750, 0x5e41, 0x9cb, 0x47fe, 0x1, 0x1);
        gbc.writeMem(0x5c75, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x768);
        EXPECT(gbc.pc(), 0x5c76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0331
        gbc.setState(0xbcad, 0xaca8, 0x4a00, 0x2df9, 0xb21d, 0x8f01, 0x1, 0x0);
        gbc.writeMem(0xbcad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xaca8);
        EXPECT(gbc.pc(), 0xbcae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcad), 0xaa);
        // AA 0332
        gbc.setState(0xcfcf, 0xb7d2, 0x3b50, 0x4987, 0xddd3, 0x951b, 0x1, 0x0);
        gbc.writeMem(0xcfcf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xb7d2);
        EXPECT(gbc.pc(), 0xcfd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfcf), 0xaa);
        // AA 0333
        gbc.setState(0xd15, 0x2f89, 0xd4e0, 0x58ea, 0xd9f7, 0xdee2, 0x1, 0x0);
        gbc.writeMem(0xd15, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0xd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0334
        gbc.setState(0x9b45, 0xcd5b, 0x2430, 0x8c34, 0x7b4d, 0x4a69, 0x1, 0x0);
        gbc.writeMem(0x9b45, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcd5b);
        EXPECT(gbc.pc(), 0x9b46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b45), 0xaa);
        // AA 0335
        gbc.setState(0x41d6, 0x7c5f, 0xd8a0, 0xe, 0x3589, 0xfebc, 0x1, 0x0);
        gbc.writeMem(0x41d6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7c5f);
        EXPECT(gbc.pc(), 0x41d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0336
        gbc.setState(0xe3da, 0xa3c7, 0xd870, 0x5f70, 0x5af8, 0x844d, 0x0, 0x0);
        gbc.writeMem(0xe3da, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa3c7);
        EXPECT(gbc.pc(), 0xe3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3da), 0xaa);
        // AA 0337
        gbc.setState(0xc364, 0xa052, 0x9da0, 0x5b5c, 0xaed9, 0x8af, 0x1, 0x0);
        gbc.writeMem(0xc364, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa052);
        EXPECT(gbc.pc(), 0xc365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc364), 0xaa);
        // AA 0338
        gbc.setState(0x77e3, 0xbb0b, 0xfe0, 0x5931, 0x2cbe, 0x32a, 0x1, 0x1);
        gbc.writeMem(0x77e3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbb0b);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0339
        gbc.setState(0x7ea3, 0x5eb0, 0x7ca0, 0xb542, 0x3ac, 0x4b7e, 0x0, 0x0);
        gbc.writeMem(0x7ea3, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5eb0);
        EXPECT(gbc.pc(), 0x7ea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 033A
        gbc.setState(0xd13c, 0xfdd5, 0x3d0, 0x5cf, 0x5310, 0xcf4f, 0x1, 0x1);
        gbc.writeMem(0xd13c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xfdd5);
        EXPECT(gbc.pc(), 0xd13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13c), 0xaa);
        // AA 033C
        gbc.setState(0x863a, 0xd69e, 0x0, 0x98b, 0xb496, 0x8436, 0x1, 0x1);
        gbc.writeMem(0x863a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd69e);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863a), 0xaa);
        // AA 033D
        gbc.setState(0xc05f, 0x3b15, 0x7da0, 0xde9b, 0xae79, 0x6d8b, 0x0, 0x0);
        gbc.writeMem(0xc05f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3b15);
        EXPECT(gbc.pc(), 0xc060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05f), 0xaa);
        // AA 033E
        gbc.setState(0xa062, 0x1f5c, 0x7750, 0xba0f, 0x3973, 0x7903, 0x0, 0x1);
        gbc.writeMem(0xa062, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1f5c);
        EXPECT(gbc.pc(), 0xa063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa062), 0xaa);
        // AA 033F
        gbc.setState(0x48c9, 0xd2dc, 0xa5c0, 0xc126, 0xceb, 0x2d96, 0x0, 0x0);
        gbc.writeMem(0x48c9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xd2dc);
        EXPECT(gbc.pc(), 0x48ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0340
        gbc.setState(0x241b, 0x83f6, 0x500, 0x81bf, 0x140d, 0xbe9, 0x0, 0x0);
        gbc.writeMem(0x241b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x83f6);
        EXPECT(gbc.pc(), 0x241c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0341
        gbc.setState(0xb67c, 0x4b2b, 0x67e0, 0x92b7, 0x4008, 0xa946, 0x1, 0x0);
        gbc.writeMem(0xb67c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4b2b);
        EXPECT(gbc.pc(), 0xb67d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67c), 0xaa);
        // AA 0342
        gbc.setState(0x96b9, 0x3b7c, 0x60d0, 0xb951, 0x2a42, 0x532f, 0x0, 0x1);
        gbc.writeMem(0x96b9, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x3b7c);
        EXPECT(gbc.pc(), 0x96ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b9), 0xaa);
        // AA 0343
        gbc.setState(0x51f8, 0x1161, 0xcad0, 0x748e, 0x78c5, 0x8bbe, 0x1, 0x1);
        gbc.writeMem(0x51f8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x1161);
        EXPECT(gbc.pc(), 0x51f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0344
        gbc.setState(0xdb70, 0x6a24, 0x7890, 0x7602, 0x5dd1, 0x8c0, 0x0, 0x0);
        gbc.writeMem(0xdb70, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6a24);
        EXPECT(gbc.pc(), 0xdb71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb70), 0xaa);
        // AA 0345
        gbc.setState(0xbe1b, 0xf486, 0x3a20, 0x93b, 0x2f42, 0xa929, 0x1, 0x1);
        gbc.writeMem(0xbe1b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf486);
        EXPECT(gbc.pc(), 0xbe1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe1b), 0xaa);
        // AA 0346
        gbc.setState(0x7ae, 0x1fa5, 0xfed0, 0x9624, 0x335e, 0x5af3, 0x0, 0x0);
        gbc.writeMem(0x7ae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1fa5);
        EXPECT(gbc.pc(), 0x7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0347
        gbc.setState(0x504a, 0x4858, 0x8130, 0x2695, 0xe254, 0x9475, 0x0, 0x0);
        gbc.writeMem(0x504a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4858);
        EXPECT(gbc.pc(), 0x504b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0348
        gbc.setState(0xad99, 0xac30, 0x49d0, 0x1e4c, 0x5430, 0x9a8, 0x1, 0x0);
        gbc.writeMem(0xad99, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xac30);
        EXPECT(gbc.pc(), 0xad9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad99), 0xaa);
        // AA 0349
        gbc.setState(0x7d93, 0x4c8c, 0x3d0, 0xcb9b, 0x5646, 0x3f41, 0x1, 0x1);
        gbc.writeMem(0x7d93, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4c8c);
        EXPECT(gbc.pc(), 0x7d94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 034A
        gbc.setState(0x3033, 0xcb25, 0x90, 0xf885, 0x46ea, 0xd02, 0x1, 0x1);
        gbc.writeMem(0x3033, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcb25);
        EXPECT(gbc.pc(), 0x3034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 034C
        gbc.setState(0x22f0, 0xf294, 0x8b10, 0x984b, 0x6e93, 0x34a9, 0x0, 0x1);
        gbc.writeMem(0x22f0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf294);
        EXPECT(gbc.pc(), 0x22f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 034F
        gbc.setState(0x7ff7, 0x4bae, 0x1280, 0x52e9, 0x7ea0, 0xb7e2, 0x1, 0x0);
        gbc.writeMem(0x7ff7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4bae);
        EXPECT(gbc.pc(), 0x7ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0350
        gbc.setState(0xde90, 0x9fac, 0xd090, 0x4889, 0x8b71, 0x4b5a, 0x1, 0x0);
        gbc.writeMem(0xde90, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9fac);
        EXPECT(gbc.pc(), 0xde91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde90), 0xaa);
        // AA 0351
        gbc.setState(0x4367, 0xcb02, 0x6c80, 0x5e86, 0x5afc, 0x622b, 0x0, 0x0);
        gbc.writeMem(0x4367, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcb02);
        EXPECT(gbc.pc(), 0x4368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0352
        gbc.setState(0x496a, 0x3a4e, 0x5100, 0xe222, 0xb41f, 0x3d52, 0x1, 0x0);
        gbc.writeMem(0x496a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3a4e);
        EXPECT(gbc.pc(), 0x496b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0353
        gbc.setState(0x5f69, 0x8324, 0xe9f0, 0xc0d3, 0xf773, 0x3de3, 0x0, 0x1);
        gbc.writeMem(0x5f69, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8324);
        EXPECT(gbc.pc(), 0x5f6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0354
        gbc.setState(0x15f2, 0x8459, 0x1970, 0xc21, 0xae08, 0x579c, 0x1, 0x1);
        gbc.writeMem(0x15f2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8459);
        EXPECT(gbc.pc(), 0x15f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0356
        gbc.setState(0xcb35, 0x7f0d, 0x8b40, 0x70a2, 0xa7ff, 0x16f3, 0x0, 0x0);
        gbc.writeMem(0xcb35, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7f0d);
        EXPECT(gbc.pc(), 0xcb36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb35), 0xaa);
        // AA 0357
        gbc.setState(0x864, 0xf288, 0xcce0, 0x97c5, 0xe246, 0x998b, 0x1, 0x1);
        gbc.writeMem(0x864, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf288);
        EXPECT(gbc.pc(), 0x865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0358
        gbc.setState(0x28ca, 0x7028, 0x5420, 0x4ab2, 0xcbdc, 0x798b, 0x1, 0x0);
        gbc.writeMem(0x28ca, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7028);
        EXPECT(gbc.pc(), 0x28cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0359
        gbc.setState(0xc026, 0x77f7, 0x5bb0, 0x84b3, 0x1024, 0x999, 0x1, 0x1);
        gbc.writeMem(0xc026, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x77f7);
        EXPECT(gbc.pc(), 0xc027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc026), 0xaa);
        // AA 035A
        gbc.setState(0xec42, 0xe381, 0x8380, 0x4186, 0x7cba, 0x285c, 0x0, 0x0);
        gbc.writeMem(0xec42, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe381);
        EXPECT(gbc.pc(), 0xec43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec42), 0xaa);
        // AA 035B
        gbc.setState(0xb5d0, 0xfc62, 0xd910, 0xf197, 0xadd6, 0xd32a, 0x0, 0x1);
        gbc.writeMem(0xb5d0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfc62);
        EXPECT(gbc.pc(), 0xb5d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d0), 0xaa);
        // AA 035C
        gbc.setState(0x9670, 0xc4dd, 0xd870, 0x5a0b, 0x28da, 0xfa33, 0x1, 0x1);
        gbc.writeMem(0x9670, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc4dd);
        EXPECT(gbc.pc(), 0x9671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9670), 0xaa);
        // AA 035D
        gbc.setState(0xdc44, 0x6009, 0x5100, 0x7d87, 0x1172, 0x5399, 0x1, 0x1);
        gbc.writeMem(0xdc44, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6009);
        EXPECT(gbc.pc(), 0xdc45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc44), 0xaa);
        // AA 035E
        gbc.setState(0xda7c, 0xdd0e, 0xaef0, 0x22c3, 0x80aa, 0x4395, 0x1, 0x0);
        gbc.writeMem(0xda7c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xdd0e);
        EXPECT(gbc.pc(), 0xda7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7c), 0xaa);
        // AA 035F
        gbc.setState(0xebf6, 0xde59, 0x1fc0, 0xec10, 0x63bd, 0xe30d, 0x0, 0x0);
        gbc.writeMem(0xebf6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xde59);
        EXPECT(gbc.pc(), 0xebf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf6), 0xaa);
        // AA 0360
        gbc.setState(0xb752, 0x34f2, 0xb880, 0xa53c, 0x91f, 0xf8a9, 0x1, 0x0);
        gbc.writeMem(0xb752, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x34f2);
        EXPECT(gbc.pc(), 0xb753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb752), 0xaa);
        // AA 0361
        gbc.setState(0x8625, 0x963a, 0x1750, 0x876d, 0xb8a7, 0x57e6, 0x0, 0x1);
        gbc.writeMem(0x8625, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x963a);
        EXPECT(gbc.pc(), 0x8626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8625), 0xaa);
        // AA 0362
        gbc.setState(0x975f, 0x99e7, 0x7050, 0xfb46, 0xa1c5, 0x8abf, 0x0, 0x0);
        gbc.writeMem(0x975f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x99e7);
        EXPECT(gbc.pc(), 0x9760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975f), 0xaa);
        // AA 0363
        gbc.setState(0x2e6, 0x5199, 0x4cb0, 0x2e7b, 0x9c2f, 0x69e3, 0x1, 0x1);
        gbc.writeMem(0x2e6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5199);
        EXPECT(gbc.pc(), 0x2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0364
        gbc.setState(0x263c, 0x6992, 0xca50, 0x37c9, 0x16e6, 0xa4e, 0x0, 0x1);
        gbc.writeMem(0x263c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6992);
        EXPECT(gbc.pc(), 0x263d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0365
        gbc.setState(0x5842, 0x8f67, 0x95e0, 0xcc2f, 0xf043, 0x5409, 0x0, 0x0);
        gbc.writeMem(0x5842, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8f67);
        EXPECT(gbc.pc(), 0x5843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0366
        gbc.setState(0xb46a, 0xb75b, 0x580, 0xe4e3, 0xce32, 0x7ba1, 0x1, 0x1);
        gbc.writeMem(0xb46a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xb75b);
        EXPECT(gbc.pc(), 0xb46b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb46a), 0xaa);
        // AA 0367
        gbc.setState(0x8bf6, 0xcfcb, 0xf4b0, 0x90a6, 0x820, 0x53e1, 0x1, 0x0);
        gbc.writeMem(0x8bf6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcfcb);
        EXPECT(gbc.pc(), 0x8bf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf6), 0xaa);
        // AA 0368
        gbc.setState(0xce4e, 0xb6e5, 0xc900, 0x7849, 0xa5fa, 0xe87a, 0x0, 0x0);
        gbc.writeMem(0xce4e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb6e5);
        EXPECT(gbc.pc(), 0xce4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce4e), 0xaa);
        // AA 0369
        gbc.setState(0xdd9c, 0xb5f7, 0x2c40, 0x945, 0xc3f7, 0x173b, 0x1, 0x0);
        gbc.writeMem(0xdd9c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb5f7);
        EXPECT(gbc.pc(), 0xdd9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd9c), 0xaa);
        // AA 036A
        gbc.setState(0x3124, 0x328a, 0xdde0, 0x5a8f, 0x4466, 0x1dce, 0x1, 0x0);
        gbc.writeMem(0x3124, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x328a);
        EXPECT(gbc.pc(), 0x3125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 036B
        gbc.setState(0xec4e, 0xd01e, 0x4c80, 0x94e0, 0x6853, 0xe953, 0x0, 0x1);
        gbc.writeMem(0xec4e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd01e);
        EXPECT(gbc.pc(), 0xec4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec4e), 0xaa);
        // AA 036C
        gbc.setState(0x3cd8, 0x6888, 0x5070, 0xc1fa, 0x9ec7, 0x40de, 0x1, 0x1);
        gbc.writeMem(0x3cd8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6888);
        EXPECT(gbc.pc(), 0x3cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 036D
        gbc.setState(0x5364, 0x53e7, 0xd140, 0x7778, 0xdf0b, 0xb5e4, 0x1, 0x1);
        gbc.writeMem(0x5364, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x53e7);
        EXPECT(gbc.pc(), 0x5365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 036E
        gbc.setState(0x9618, 0x64d4, 0xb7e0, 0x9587, 0x9669, 0xa1d5, 0x0, 0x1);
        gbc.writeMem(0x9618, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x64d4);
        EXPECT(gbc.pc(), 0x9619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9618), 0xaa);
        // AA 036F
        gbc.setState(0xc78, 0x5ac2, 0x1e50, 0xe7ae, 0x1d4f, 0x1698, 0x1, 0x0);
        gbc.writeMem(0xc78, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5ac2);
        EXPECT(gbc.pc(), 0xc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0370
        gbc.setState(0x4579, 0x5391, 0x65f0, 0x8de1, 0x9c9f, 0xc168, 0x1, 0x0);
        gbc.writeMem(0x4579, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5391);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0371
        gbc.setState(0x2542, 0xe884, 0xd780, 0xf749, 0xc5d0, 0x6372, 0x1, 0x1);
        gbc.writeMem(0x2542, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe884);
        EXPECT(gbc.pc(), 0x2543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0372
        gbc.setState(0xc8b8, 0xb387, 0x83e0, 0x92c2, 0x606b, 0x523f, 0x0, 0x0);
        gbc.writeMem(0xc8b8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb387);
        EXPECT(gbc.pc(), 0xc8b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8b8), 0xaa);
        // AA 0373
        gbc.setState(0xa035, 0x89f6, 0xb690, 0x3372, 0x6347, 0xeb39, 0x1, 0x1);
        gbc.writeMem(0xa035, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x89f6);
        EXPECT(gbc.pc(), 0xa036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa035), 0xaa);
        // AA 0374
        gbc.setState(0x6a78, 0x59eb, 0xd740, 0x41, 0xe1a9, 0x352b, 0x0, 0x1);
        gbc.writeMem(0x6a78, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x59eb);
        EXPECT(gbc.pc(), 0x6a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0375
        gbc.setState(0x1a33, 0x79e6, 0xcd40, 0xf8ca, 0x230d, 0xaacf, 0x1, 0x0);
        gbc.writeMem(0x1a33, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x79e6);
        EXPECT(gbc.pc(), 0x1a34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0376
        gbc.setState(0xdb7, 0xaa18, 0x910, 0x95ec, 0x8b2b, 0xc16c, 0x0, 0x1);
        gbc.writeMem(0xdb7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaa18);
        EXPECT(gbc.pc(), 0xdb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0377
        gbc.setState(0x250d, 0xdb3e, 0x3690, 0xb9bb, 0x8842, 0x4fad, 0x0, 0x1);
        gbc.writeMem(0x250d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xdb3e);
        EXPECT(gbc.pc(), 0x250e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0378
        gbc.setState(0x2ce4, 0xcfe9, 0x58a0, 0xff9b, 0xe2dc, 0xf049, 0x1, 0x1);
        gbc.writeMem(0x2ce4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcfe9);
        EXPECT(gbc.pc(), 0x2ce5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0379
        gbc.setState(0x87a8, 0x21c4, 0xc220, 0x52cb, 0x33b7, 0x9fb, 0x0, 0x1);
        gbc.writeMem(0x87a8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x21c4);
        EXPECT(gbc.pc(), 0x87a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a8), 0xaa);
        // AA 037A
        gbc.setState(0x55e1, 0x70c0, 0xd970, 0x8941, 0x5004, 0x5b63, 0x0, 0x1);
        gbc.writeMem(0x55e1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x70c0);
        EXPECT(gbc.pc(), 0x55e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 037B
        gbc.setState(0x21aa, 0x8cfa, 0x8b50, 0xac3b, 0xd5b8, 0x8f, 0x1, 0x1);
        gbc.writeMem(0x21aa, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8cfa);
        EXPECT(gbc.pc(), 0x21ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 037C
        gbc.setState(0x1b9e, 0xae72, 0xc310, 0xaa49, 0xb355, 0x3116, 0x0, 0x1);
        gbc.writeMem(0x1b9e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xae72);
        EXPECT(gbc.pc(), 0x1b9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 037D
        gbc.setState(0x1e3a, 0x5ed8, 0x6600, 0x8060, 0xbb42, 0xde03, 0x0, 0x0);
        gbc.writeMem(0x1e3a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x5ed8);
        EXPECT(gbc.pc(), 0x1e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 037E
        gbc.setState(0xd577, 0xdc66, 0x8160, 0x4f99, 0xcdb1, 0xea24, 0x1, 0x0);
        gbc.writeMem(0xd577, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdc66);
        EXPECT(gbc.pc(), 0xd578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd577), 0xaa);
        // AA 037F
        gbc.setState(0xbf45, 0xc815, 0x2f70, 0x41ef, 0x42d0, 0x9fa6, 0x0, 0x0);
        gbc.writeMem(0xbf45, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xc815);
        EXPECT(gbc.pc(), 0xbf46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf45), 0xaa);
        // AA 0380
        gbc.setState(0x1805, 0x3693, 0x1780, 0x2c86, 0x8ded, 0xf685, 0x0, 0x1);
        gbc.writeMem(0x1805, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3693);
        EXPECT(gbc.pc(), 0x1806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0381
        gbc.setState(0xc047, 0x673, 0x4090, 0xd2fb, 0xeb6, 0xf0c4, 0x0, 0x0);
        gbc.writeMem(0xc047, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x673);
        EXPECT(gbc.pc(), 0xc048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc047), 0xaa);
        // AA 0382
        gbc.setState(0x42b8, 0x8179, 0x8020, 0xd13f, 0x8561, 0x77df, 0x1, 0x0);
        gbc.writeMem(0x42b8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8179);
        EXPECT(gbc.pc(), 0x42b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0383
        gbc.setState(0x38c, 0xa04e, 0x37c0, 0xb27e, 0x67c0, 0x4c95, 0x1, 0x1);
        gbc.writeMem(0x38c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa04e);
        EXPECT(gbc.pc(), 0x38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0384
        gbc.setState(0xa7d6, 0x3174, 0x86f0, 0x7665, 0xec12, 0x5552, 0x1, 0x0);
        gbc.writeMem(0xa7d6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3174);
        EXPECT(gbc.pc(), 0xa7d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d6), 0xaa);
        // AA 0385
        gbc.setState(0x9462, 0x3607, 0x3af0, 0x3c14, 0x6e71, 0xfaaf, 0x0, 0x1);
        gbc.writeMem(0x9462, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3607);
        EXPECT(gbc.pc(), 0x9463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9462), 0xaa);
        // AA 0386
        gbc.setState(0xaea1, 0x95ba, 0x5700, 0x3af1, 0x8773, 0x20f1, 0x0, 0x0);
        gbc.writeMem(0xaea1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x95ba);
        EXPECT(gbc.pc(), 0xaea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea1), 0xaa);
        // AA 0387
        gbc.setState(0x17b7, 0x7d37, 0xd90, 0x5ef5, 0x34c6, 0x8f76, 0x0, 0x0);
        gbc.writeMem(0x17b7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7d37);
        EXPECT(gbc.pc(), 0x17b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0388
        gbc.setState(0x2f3f, 0xacc0, 0x3330, 0xeb0c, 0x147e, 0x6fc9, 0x0, 0x0);
        gbc.writeMem(0x2f3f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xacc0);
        EXPECT(gbc.pc(), 0x2f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0389
        gbc.setState(0xe664, 0x7417, 0x3180, 0xc070, 0x7777, 0x3a74, 0x1, 0x0);
        gbc.writeMem(0xe664, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7417);
        EXPECT(gbc.pc(), 0xe665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe664), 0xaa);
        // AA 038B
        gbc.setState(0x8bf5, 0x870b, 0x3c80, 0x3ae, 0x6b21, 0x8c8c, 0x1, 0x1);
        gbc.writeMem(0x8bf5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x870b);
        EXPECT(gbc.pc(), 0x8bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf5), 0xaa);
        // AA 038C
        gbc.setState(0x5f90, 0x1be7, 0x8c70, 0x5ad2, 0xa66e, 0xea15, 0x0, 0x0);
        gbc.writeMem(0x5f90, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1be7);
        EXPECT(gbc.pc(), 0x5f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 038D
        gbc.setState(0x9981, 0x70a4, 0x5a90, 0x1f71, 0x46d0, 0x8bfc, 0x0, 0x0);
        gbc.writeMem(0x9981, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x70a4);
        EXPECT(gbc.pc(), 0x9982);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9981), 0xaa);
        // AA 038E
        gbc.setState(0xdc69, 0xf1b8, 0xdb00, 0xd6bf, 0x467d, 0xb6e7, 0x0, 0x1);
        gbc.writeMem(0xdc69, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf1b8);
        EXPECT(gbc.pc(), 0xdc6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc69), 0xaa);
        // AA 038F
        gbc.setState(0x99c4, 0x3e09, 0x6760, 0xaee2, 0xc81d, 0x3028, 0x1, 0x1);
        gbc.writeMem(0x99c4, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3e09);
        EXPECT(gbc.pc(), 0x99c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c4), 0xaa);
        // AA 0390
        gbc.setState(0x5f9e, 0xce09, 0x8c00, 0xcdeb, 0x403, 0x2fc, 0x0, 0x0);
        gbc.writeMem(0x5f9e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xce09);
        EXPECT(gbc.pc(), 0x5f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0391
        gbc.setState(0x1743, 0x1e7e, 0x9d90, 0x52f, 0xbbd7, 0x81d1, 0x0, 0x1);
        gbc.writeMem(0x1743, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1e7e);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0392
        gbc.setState(0x1e5c, 0xd793, 0xaea0, 0x144, 0xd2bc, 0x559f, 0x0, 0x1);
        gbc.writeMem(0x1e5c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd793);
        EXPECT(gbc.pc(), 0x1e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0393
        gbc.setState(0x2656, 0x7dbb, 0x1f0, 0x5e91, 0xef3a, 0x5d64, 0x0, 0x0);
        gbc.writeMem(0x2656, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7dbb);
        EXPECT(gbc.pc(), 0x2657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0394
        gbc.setState(0xa01a, 0xcc42, 0x2e40, 0x74ba, 0x1aa8, 0xec14, 0x0, 0x1);
        gbc.writeMem(0xa01a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcc42);
        EXPECT(gbc.pc(), 0xa01b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01a), 0xaa);
        // AA 0395
        gbc.setState(0xe6c6, 0x801c, 0x660, 0x17b2, 0x5cae, 0x2ee7, 0x1, 0x0);
        gbc.writeMem(0xe6c6, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x801c);
        EXPECT(gbc.pc(), 0xe6c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c6), 0xaa);
        // AA 0396
        gbc.setState(0x507e, 0x15fe, 0xcbe0, 0x3ed8, 0x3424, 0xa918, 0x0, 0x0);
        gbc.writeMem(0x507e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x15fe);
        EXPECT(gbc.pc(), 0x507f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 0397
        gbc.setState(0xc4c0, 0x585f, 0x2770, 0x5172, 0xacbf, 0x1dee, 0x1, 0x0);
        gbc.writeMem(0xc4c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x585f);
        EXPECT(gbc.pc(), 0xc4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c0), 0xaa);
        // AA 0398
        gbc.setState(0xbaff, 0x4c40, 0x1a40, 0xb9f9, 0xf328, 0x4678, 0x1, 0x0);
        gbc.writeMem(0xbaff, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4c40);
        EXPECT(gbc.pc(), 0xbb00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaff), 0xaa);
        // AA 0399
        gbc.setState(0xb0e0, 0x406e, 0x2670, 0x134c, 0x25e7, 0x5048, 0x1, 0x0);
        gbc.writeMem(0xb0e0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x406e);
        EXPECT(gbc.pc(), 0xb0e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e0), 0xaa);
        // AA 039A
        gbc.setState(0x920a, 0x277a, 0xe7b0, 0xce57, 0xfa6b, 0x8f66, 0x0, 0x1);
        gbc.writeMem(0x920a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x277a);
        EXPECT(gbc.pc(), 0x920b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920a), 0xaa);
        // AA 039B
        gbc.setState(0xa6f, 0xa2d7, 0xc620, 0x4d8a, 0x7a0e, 0xe5cc, 0x0, 0x0);
        gbc.writeMem(0xa6f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa2d7);
        EXPECT(gbc.pc(), 0xa70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 039C
        gbc.setState(0x68a, 0xd7bb, 0x9850, 0xc71, 0x3ce9, 0x2152, 0x0, 0x1);
        gbc.writeMem(0x68a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd7bb);
        EXPECT(gbc.pc(), 0x68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 039D
        gbc.setState(0xa14f, 0x821b, 0xea40, 0x1830, 0x5d44, 0x5aa9, 0x0, 0x0);
        gbc.writeMem(0xa14f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x821b);
        EXPECT(gbc.pc(), 0xa150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa14f), 0xaa);
        // AA 039E
        gbc.setState(0x6b9f, 0xc55b, 0x88b0, 0x9a4, 0xa873, 0xa353, 0x0, 0x1);
        gbc.writeMem(0x6b9f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc55b);
        EXPECT(gbc.pc(), 0x6ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 039F
        gbc.setState(0x5332, 0xcfce, 0x6880, 0x4723, 0x7061, 0x1ad8, 0x0, 0x1);
        gbc.writeMem(0x5332, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcfce);
        EXPECT(gbc.pc(), 0x5333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03A0
        gbc.setState(0x7a5c, 0x9431, 0x8eb0, 0x8d7, 0x49cf, 0xd571, 0x0, 0x1);
        gbc.writeMem(0x7a5c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9431);
        EXPECT(gbc.pc(), 0x7a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03A1
        gbc.setState(0xe592, 0x29c1, 0xb140, 0x2fbc, 0xbb61, 0x7cf7, 0x1, 0x1);
        gbc.writeMem(0xe592, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0xe593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe592), 0xaa);
        // AA 03A2
        gbc.setState(0xa0bd, 0x46fd, 0x4460, 0xff81, 0xdd65, 0xd5c7, 0x1, 0x1);
        gbc.writeMem(0xa0bd, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x46fd);
        EXPECT(gbc.pc(), 0xa0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0bd), 0xaa);
        // AA 03A3
        gbc.setState(0x2c4e, 0x9234, 0xe670, 0xa39, 0xc9a5, 0x4053, 0x0, 0x0);
        gbc.writeMem(0x2c4e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9234);
        EXPECT(gbc.pc(), 0x2c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03A5
        gbc.setState(0xe314, 0xa84b, 0xe320, 0xe35d, 0xe3c6, 0x33c, 0x1, 0x1);
        gbc.writeMem(0xe314, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa84b);
        EXPECT(gbc.pc(), 0xe315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe314), 0xaa);
        // AA 03A6
        gbc.setState(0xee61, 0xa9fb, 0xa60, 0x2a1a, 0x55e2, 0xad1d, 0x1, 0x1);
        gbc.writeMem(0xee61, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa9fb);
        EXPECT(gbc.pc(), 0xee62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee61), 0xaa);
        // AA 03A7
        gbc.setState(0xa555, 0x2a75, 0x75b0, 0xf83a, 0x8e4a, 0xe01e, 0x1, 0x0);
        gbc.writeMem(0xa555, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2a75);
        EXPECT(gbc.pc(), 0xa556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa555), 0xaa);
        // AA 03A8
        gbc.setState(0xd240, 0xcb65, 0xbf50, 0x6d64, 0x8671, 0xe44, 0x0, 0x0);
        gbc.writeMem(0xd240, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcb65);
        EXPECT(gbc.pc(), 0xd241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd240), 0xaa);
        // AA 03A9
        gbc.setState(0x6660, 0x72a8, 0xc750, 0xc3f7, 0x4363, 0x1b5f, 0x1, 0x1);
        gbc.writeMem(0x6660, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x72a8);
        EXPECT(gbc.pc(), 0x6661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03AA
        gbc.setState(0x5bed, 0xe050, 0x1f0, 0xd3ff, 0x20fb, 0x4851, 0x1, 0x1);
        gbc.writeMem(0x5bed, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe050);
        EXPECT(gbc.pc(), 0x5bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03AB
        gbc.setState(0x4199, 0x1c79, 0xb2e0, 0xc439, 0x2070, 0x898f, 0x0, 0x0);
        gbc.writeMem(0x4199, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1c79);
        EXPECT(gbc.pc(), 0x419a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03AC
        gbc.setState(0x6dc1, 0x2bae, 0x4f00, 0xeab2, 0x204b, 0x52f8, 0x1, 0x0);
        gbc.writeMem(0x6dc1, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2bae);
        EXPECT(gbc.pc(), 0x6dc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03AD
        gbc.setState(0x282d, 0x37b5, 0x9420, 0x5c72, 0x90e9, 0x9eb5, 0x1, 0x0);
        gbc.writeMem(0x282d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x37b5);
        EXPECT(gbc.pc(), 0x282e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B0
        gbc.setState(0x3b59, 0xf3cf, 0x4640, 0x6c02, 0xc05f, 0x1cd5, 0x0, 0x1);
        gbc.writeMem(0x3b59, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf3cf);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B1
        gbc.setState(0x343d, 0x700c, 0x2e70, 0xef98, 0x596e, 0x1acb, 0x1, 0x0);
        gbc.writeMem(0x343d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x700c);
        EXPECT(gbc.pc(), 0x343e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B2
        gbc.setState(0xdc9b, 0x22bf, 0xcc00, 0x8570, 0xd1c7, 0xfc56, 0x0, 0x0);
        gbc.writeMem(0xdc9b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x22bf);
        EXPECT(gbc.pc(), 0xdc9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc9b), 0xaa);
        // AA 03B3
        gbc.setState(0x9cfe, 0xbaf7, 0x3330, 0x7371, 0x9d17, 0x88b4, 0x1, 0x0);
        gbc.writeMem(0x9cfe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbaf7);
        EXPECT(gbc.pc(), 0x9cff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfe), 0xaa);
        // AA 03B4
        gbc.setState(0x4b5f, 0xcbff, 0x6160, 0xd0c, 0xf704, 0xf899, 0x1, 0x1);
        gbc.writeMem(0x4b5f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcbff);
        EXPECT(gbc.pc(), 0x4b60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B5
        gbc.setState(0x975e, 0xa07f, 0xf770, 0x6dc7, 0x770a, 0xb4e6, 0x1, 0x1);
        gbc.writeMem(0x975e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa07f);
        EXPECT(gbc.pc(), 0x975f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975e), 0xaa);
        // AA 03B6
        gbc.setState(0x1513, 0x6450, 0x4400, 0x7dbc, 0xf3ac, 0xdd7e, 0x1, 0x1);
        gbc.writeMem(0x1513, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6450);
        EXPECT(gbc.pc(), 0x1514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B7
        gbc.setState(0xe8ad, 0xd72, 0x5e90, 0x2c82, 0xb72b, 0xc1f3, 0x1, 0x0);
        gbc.writeMem(0xe8ad, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xd72);
        EXPECT(gbc.pc(), 0xe8ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ad), 0xaa);
        // AA 03B8
        gbc.setState(0x266e, 0x2b8, 0x5450, 0x85bc, 0x98fe, 0x759, 0x1, 0x0);
        gbc.writeMem(0x266e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x266f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03B9
        gbc.setState(0xbda7, 0xc73f, 0xd1d0, 0xe561, 0x800a, 0xc844, 0x0, 0x1);
        gbc.writeMem(0xbda7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc73f);
        EXPECT(gbc.pc(), 0xbda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda7), 0xaa);
        // AA 03BA
        gbc.setState(0xac7f, 0x7738, 0x95f0, 0xf3b8, 0xafd2, 0xcdcd, 0x0, 0x1);
        gbc.writeMem(0xac7f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7738);
        EXPECT(gbc.pc(), 0xac80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac7f), 0xaa);
        // AA 03BB
        gbc.setState(0xaa43, 0x4fc1, 0xbfd0, 0xad8d, 0x3eb2, 0x34a9, 0x0, 0x0);
        gbc.writeMem(0xaa43, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x4fc1);
        EXPECT(gbc.pc(), 0xaa44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa43), 0xaa);
        // AA 03BC
        gbc.setState(0xa2c5, 0xa942, 0xbd00, 0xab88, 0x446f, 0x29c6, 0x1, 0x0);
        gbc.writeMem(0xa2c5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa942);
        EXPECT(gbc.pc(), 0xa2c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c5), 0xaa);
        // AA 03BD
        gbc.setState(0xc6db, 0x4dc1, 0xa650, 0x3984, 0x7fcb, 0xda4e, 0x0, 0x0);
        gbc.writeMem(0xc6db, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4dc1);
        EXPECT(gbc.pc(), 0xc6dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6db), 0xaa);
        // AA 03BE
        gbc.setState(0xef90, 0xaf4e, 0xd020, 0xb4d6, 0xa5c, 0x692, 0x0, 0x1);
        gbc.writeMem(0xef90, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xaf4e);
        EXPECT(gbc.pc(), 0xef91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef90), 0xaa);
        // AA 03BF
        gbc.setState(0xd2a2, 0x447c, 0x29b0, 0x517d, 0x8c6e, 0x45ac, 0x0, 0x0);
        gbc.writeMem(0xd2a2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x447c);
        EXPECT(gbc.pc(), 0xd2a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a2), 0xaa);
        // AA 03C0
        gbc.setState(0xbb8d, 0xd74f, 0xe7b0, 0x6849, 0x60a, 0xb1dc, 0x1, 0x0);
        gbc.writeMem(0xbb8d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd74f);
        EXPECT(gbc.pc(), 0xbb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb8d), 0xaa);
        // AA 03C1
        gbc.setState(0x6cf, 0x1f59, 0x7730, 0xc9fe, 0xdf30, 0x1cb4, 0x1, 0x1);
        gbc.writeMem(0x6cf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1f59);
        EXPECT(gbc.pc(), 0x6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03C2
        gbc.setState(0xe3a2, 0xbad4, 0xdc60, 0x4127, 0x4f4e, 0x22a7, 0x1, 0x1);
        gbc.writeMem(0xe3a2, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xbad4);
        EXPECT(gbc.pc(), 0xe3a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a2), 0xaa);
        // AA 03C3
        gbc.setState(0xa3fe, 0x69ae, 0x9a50, 0x27b6, 0x8f39, 0xc549, 0x0, 0x1);
        gbc.writeMem(0xa3fe, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x69ae);
        EXPECT(gbc.pc(), 0xa3ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3fe), 0xaa);
        // AA 03C4
        gbc.setState(0xeb03, 0xc4cc, 0x9b30, 0x7d4e, 0x6bcd, 0x3e14, 0x1, 0x0);
        gbc.writeMem(0xeb03, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc4cc);
        EXPECT(gbc.pc(), 0xeb04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb03), 0xaa);
        // AA 03C5
        gbc.setState(0x5214, 0xdcba, 0xaaf0, 0x4e44, 0xa0c, 0x5520, 0x0, 0x0);
        gbc.writeMem(0x5214, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xdcba);
        EXPECT(gbc.pc(), 0x5215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03C6
        gbc.setState(0x588f, 0xf1fe, 0x1890, 0x1c30, 0xd7d9, 0x4466, 0x0, 0x0);
        gbc.writeMem(0x588f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf1fe);
        EXPECT(gbc.pc(), 0x5890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03C7
        gbc.setState(0xc8c, 0x5f1e, 0x7c40, 0x9ff5, 0x28a9, 0x4a38, 0x0, 0x0);
        gbc.writeMem(0xc8c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5f1e);
        EXPECT(gbc.pc(), 0xc8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03C8
        gbc.setState(0x20cf, 0x6262, 0xe70, 0x4e9f, 0xacc3, 0x95ca, 0x0, 0x0);
        gbc.writeMem(0x20cf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6262);
        EXPECT(gbc.pc(), 0x20d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03C9
        gbc.setState(0x308a, 0xb861, 0x65c0, 0x1c75, 0x13a, 0x3d20, 0x1, 0x1);
        gbc.writeMem(0x308a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb861);
        EXPECT(gbc.pc(), 0x308b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03CA
        gbc.setState(0x6ad7, 0x3f3c, 0xca70, 0x3c71, 0x3636, 0xfe9d, 0x0, 0x0);
        gbc.writeMem(0x6ad7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3f3c);
        EXPECT(gbc.pc(), 0x6ad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03CB
        gbc.setState(0xc8da, 0x229b, 0xb570, 0x686d, 0xc6f8, 0xe230, 0x0, 0x1);
        gbc.writeMem(0xc8da, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x229b);
        EXPECT(gbc.pc(), 0xc8db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8da), 0xaa);
        // AA 03CC
        gbc.setState(0x66df, 0x117c, 0x7130, 0x29c7, 0x126, 0xfde5, 0x0, 0x1);
        gbc.writeMem(0x66df, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x117c);
        EXPECT(gbc.pc(), 0x66e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03CD
        gbc.setState(0x14b5, 0xd22d, 0x5e80, 0xd058, 0xc62b, 0xb92f, 0x0, 0x1);
        gbc.writeMem(0x14b5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd22d);
        EXPECT(gbc.pc(), 0x14b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03CE
        gbc.setState(0x7222, 0xf8c3, 0x43d0, 0x20d8, 0xa301, 0x8ddd, 0x0, 0x1);
        gbc.writeMem(0x7222, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf8c3);
        EXPECT(gbc.pc(), 0x7223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03CF
        gbc.setState(0x753d, 0x3151, 0xd0b0, 0xdb1, 0xecd0, 0x1a31, 0x0, 0x1);
        gbc.writeMem(0x753d, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3151);
        EXPECT(gbc.pc(), 0x753e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D0
        gbc.setState(0xa383, 0xd030, 0x16b0, 0xb125, 0x8d1d, 0xf100, 0x0, 0x1);
        gbc.writeMem(0xa383, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd030);
        EXPECT(gbc.pc(), 0xa384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa383), 0xaa);
        // AA 03D1
        gbc.setState(0xd503, 0x70e7, 0xeb80, 0x8626, 0x1653, 0x2514, 0x0, 0x0);
        gbc.writeMem(0xd503, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x70e7);
        EXPECT(gbc.pc(), 0xd504);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd503), 0xaa);
        // AA 03D2
        gbc.setState(0x238f, 0x333f, 0x3710, 0x27b1, 0xac2d, 0x69df, 0x0, 0x0);
        gbc.writeMem(0x238f, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x333f);
        EXPECT(gbc.pc(), 0x2390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D3
        gbc.setState(0xc65e, 0x5d7a, 0xf220, 0x7e5a, 0xd99f, 0x7ea9, 0x0, 0x1);
        gbc.writeMem(0xc65e, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5d7a);
        EXPECT(gbc.pc(), 0xc65f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65e), 0xaa);
        // AA 03D4
        gbc.setState(0x6cac, 0xa7e7, 0x7040, 0x56d1, 0xb293, 0x332c, 0x0, 0x1);
        gbc.writeMem(0x6cac, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa7e7);
        EXPECT(gbc.pc(), 0x6cad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D5
        gbc.setState(0x5ce5, 0x879a, 0x8860, 0xdab7, 0xc71b, 0x8f6f, 0x1, 0x0);
        gbc.writeMem(0x5ce5, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x879a);
        EXPECT(gbc.pc(), 0x5ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D6
        gbc.setState(0x37cf, 0x2953, 0x8e50, 0xebdc, 0xfd81, 0x14fd, 0x0, 0x0);
        gbc.writeMem(0x37cf, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2953);
        EXPECT(gbc.pc(), 0x37d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D7
        gbc.setState(0x1f9c, 0xb73b, 0xc9e0, 0xebaf, 0x596c, 0xb03, 0x0, 0x1);
        gbc.writeMem(0x1f9c, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb73b);
        EXPECT(gbc.pc(), 0x1f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03D8
        gbc.setState(0xe5ab, 0xd126, 0x51b0, 0xd1d3, 0xd4f7, 0x9334, 0x0, 0x0);
        gbc.writeMem(0xe5ab, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd126);
        EXPECT(gbc.pc(), 0xe5ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ab), 0xaa);
        // AA 03D9
        gbc.setState(0x65b8, 0x8852, 0x2920, 0x5d66, 0x3af1, 0xadf4, 0x1, 0x1);
        gbc.writeMem(0x65b8, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8852);
        EXPECT(gbc.pc(), 0x65b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03DA
        gbc.setState(0xca54, 0x21a9, 0x8a30, 0x149, 0x7742, 0x3451, 0x0, 0x1);
        gbc.writeMem(0xca54, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x21a9);
        EXPECT(gbc.pc(), 0xca55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca54), 0xaa);
        // AA 03DC
        gbc.setState(0xad7, 0x285, 0x3000, 0x7ba5, 0xf91a, 0x28b2, 0x0, 0x1);
        gbc.writeMem(0xad7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x285);
        EXPECT(gbc.pc(), 0xad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03DD
        gbc.setState(0x57df, 0xae99, 0x68b0, 0xe11a, 0xd848, 0x816a, 0x0, 0x0);
        gbc.writeMem(0x57df, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xae99);
        EXPECT(gbc.pc(), 0x57e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03DE
        gbc.setState(0x1438, 0xb67b, 0x1b30, 0x274b, 0x9d81, 0x9c26, 0x0, 0x1);
        gbc.writeMem(0x1438, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb67b);
        EXPECT(gbc.pc(), 0x1439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03DF
        gbc.setState(0x6f00, 0xa8aa, 0x3870, 0xc3f3, 0xe6ff, 0x643, 0x1, 0x0);
        gbc.writeMem(0x6f00, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa8aa);
        EXPECT(gbc.pc(), 0x6f01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03E0
        gbc.setState(0x17c0, 0x2d8a, 0x9020, 0x59e4, 0xaada, 0xcba4, 0x1, 0x1);
        gbc.writeMem(0x17c0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2d8a);
        EXPECT(gbc.pc(), 0x17c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03E1
        gbc.setState(0xa9dc, 0xd9ad, 0x1770, 0x7926, 0xa570, 0x2191, 0x1, 0x1);
        gbc.writeMem(0xa9dc, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd9ad);
        EXPECT(gbc.pc(), 0xa9dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9dc), 0xaa);
        // AA 03E2
        gbc.setState(0xcf7a, 0xea53, 0xfb20, 0x9d21, 0x5ac8, 0x220a, 0x0, 0x0);
        gbc.writeMem(0xcf7a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xea53);
        EXPECT(gbc.pc(), 0xcf7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf7a), 0xaa);
        // AA 03E3
        gbc.setState(0x7aae, 0x53fe, 0x29f0, 0x865, 0x1e67, 0x86a4, 0x1, 0x1);
        gbc.writeMem(0x7aae, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x53fe);
        EXPECT(gbc.pc(), 0x7aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // AA 03E4
        gbc.setState(0xd61b, 0xa733, 0xf150, 0xe56a, 0x48b3, 0x89db, 0x0, 0x1);
        gbc.writeMem(0xd61b, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa733);
        EXPECT(gbc.pc(), 0xd61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd61b), 0xaa);
        // AA 03E6
        gbc.setState(0xb423, 0x9788, 0x2190, 0x9ae6, 0x7e1e, 0xc240, 0x0, 0x1);
        gbc.writeMem(0xb423, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9788);
        EXPECT(gbc.pc(), 0xb424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb423), 0xaa);
        // AA 03E7
        gbc.setState(0x99a, 0x2896, 0x7520, 0xd95c, 0x9f34, 0x6f6b, 0x1, 0x1);
        gbc.writeMem(0x99a, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2896);
        EXPECT(gbc.pc(), 0x99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
