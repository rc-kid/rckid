#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_fb)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_fb) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB FB 0000
        gbc.setState(0x6699, 0xa205, 0xf230, 0x7fc5, 0xf52a, 0x2266, 0x1, 0x0);
        gbc.writeMem(0x6699, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa205);
        EXPECT(gbc.pc(), 0x669b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0001
        gbc.setState(0xd1da, 0x1b7, 0x1170, 0xda, 0x73c, 0xceae, 0x0, 0x1);
        gbc.writeMem(0xd1da, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1b7);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1da), 0xcb);
        EXPECT(gbc.readMem(0xd1db), 0xfb);
        // CB FB 0002
        gbc.setState(0x5a9, 0x946f, 0x2e10, 0xb69a, 0xaede, 0x40c1, 0x1, 0x1);
        gbc.writeMem(0x5a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x946f);
        EXPECT(gbc.pc(), 0x5ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0003
        gbc.setState(0x79fd, 0xdf33, 0x2360, 0x9308, 0x6977, 0x79c0, 0x0, 0x0);
        gbc.writeMem(0x79fd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdf33);
        EXPECT(gbc.pc(), 0x79ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0004
        gbc.setState(0x2aff, 0xe151, 0xf940, 0xc24, 0x5d8c, 0x7e91, 0x1, 0x1);
        gbc.writeMem(0x2aff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe151);
        EXPECT(gbc.pc(), 0x2b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0005
        gbc.setState(0xec57, 0xeaed, 0x8de0, 0x8452, 0xa7b4, 0x9978, 0x0, 0x1);
        gbc.writeMem(0xec57, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xeaed);
        EXPECT(gbc.pc(), 0xec59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec57), 0xcb);
        EXPECT(gbc.readMem(0xec58), 0xfb);
        // CB FB 0006
        gbc.setState(0xef99, 0x7d4d, 0x82a0, 0xed6b, 0x377d, 0xbc8e, 0x0, 0x0);
        gbc.writeMem(0xef99, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7d4d);
        EXPECT(gbc.pc(), 0xef9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef99), 0xcb);
        EXPECT(gbc.readMem(0xef9a), 0xfb);
        // CB FB 0007
        gbc.setState(0x8d41, 0xd36c, 0xb40, 0xe0e5, 0xd81b, 0x34d4, 0x0, 0x1);
        gbc.writeMem(0x8d41, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd36c);
        EXPECT(gbc.pc(), 0x8d43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d41), 0xcb);
        EXPECT(gbc.readMem(0x8d42), 0xfb);
        // CB FB 0008
        gbc.setState(0x7ea3, 0xbb63, 0x6140, 0x13d5, 0xab86, 0x256e, 0x0, 0x1);
        gbc.writeMem(0x7ea3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbb63);
        EXPECT(gbc.pc(), 0x7ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0009
        gbc.setState(0x90de, 0x24c3, 0x6740, 0x499e, 0xb6db, 0x8ac1, 0x1, 0x1);
        gbc.writeMem(0x90de, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x24c3);
        EXPECT(gbc.pc(), 0x90e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90de), 0xcb);
        EXPECT(gbc.readMem(0x90df), 0xfb);
        // CB FB 000A
        gbc.setState(0x46ff, 0x921d, 0x8e80, 0x841d, 0x1a11, 0xb593, 0x1, 0x1);
        gbc.writeMem(0x46ff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x921d);
        EXPECT(gbc.pc(), 0x4701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 000B
        gbc.setState(0x26d3, 0xf2a, 0x4380, 0x1e05, 0xd9b3, 0x8dea, 0x1, 0x0);
        gbc.writeMem(0x26d3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf2a);
        EXPECT(gbc.pc(), 0x26d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 000C
        gbc.setState(0x459b, 0x7d05, 0x69b0, 0x9b9f, 0x43de, 0xfa5a, 0x1, 0x0);
        gbc.writeMem(0x459b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7d05);
        EXPECT(gbc.pc(), 0x459d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 000D
        gbc.setState(0x83c, 0x1cc4, 0x9210, 0x5dff, 0xb1d4, 0xd4d, 0x0, 0x0);
        gbc.writeMem(0x83c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1cc4);
        EXPECT(gbc.pc(), 0x83e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 000E
        gbc.setState(0xd46c, 0xda08, 0xcff0, 0xbcb, 0x1e5, 0xddd0, 0x1, 0x0);
        gbc.writeMem(0xd46c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xda08);
        EXPECT(gbc.pc(), 0xd46e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd46c), 0xcb);
        EXPECT(gbc.readMem(0xd46d), 0xfb);
        // CB FB 000F
        gbc.setState(0x7295, 0xf3c1, 0x6a60, 0x2188, 0xecae, 0xa38d, 0x0, 0x0);
        gbc.writeMem(0x7295, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf3c1);
        EXPECT(gbc.pc(), 0x7297);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0010
        gbc.setState(0x4f12, 0x5db1, 0x52c0, 0x639b, 0x5dfc, 0xebd1, 0x0, 0x0);
        gbc.writeMem(0x4f12, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5db1);
        EXPECT(gbc.pc(), 0x4f14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0011
        gbc.setState(0xbc1b, 0xd967, 0x42e0, 0xbb15, 0xad9, 0x804c, 0x1, 0x1);
        gbc.writeMem(0xbc1b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd967);
        EXPECT(gbc.pc(), 0xbc1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc1b), 0xcb);
        EXPECT(gbc.readMem(0xbc1c), 0xfb);
        // CB FB 0012
        gbc.setState(0x798f, 0x6be, 0xf5a0, 0x3b19, 0x3955, 0xfcf0, 0x1, 0x1);
        gbc.writeMem(0x798f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6be);
        EXPECT(gbc.pc(), 0x7991);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0014
        gbc.setState(0x55e, 0x3295, 0xeb00, 0x7329, 0xaa4b, 0x24da, 0x1, 0x1);
        gbc.writeMem(0x55e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3295);
        EXPECT(gbc.pc(), 0x560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0015
        gbc.setState(0x9e01, 0x9f20, 0x7710, 0x23bb, 0x4c24, 0x63bd, 0x1, 0x1);
        gbc.writeMem(0x9e01, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9f20);
        EXPECT(gbc.pc(), 0x9e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e01), 0xcb);
        EXPECT(gbc.readMem(0x9e02), 0xfb);
        // CB FB 0016
        gbc.setState(0xef00, 0xc095, 0x7670, 0xc422, 0xb586, 0xb908, 0x0, 0x0);
        gbc.writeMem(0xef00, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc095);
        EXPECT(gbc.pc(), 0xef02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef00), 0xcb);
        EXPECT(gbc.readMem(0xef01), 0xfb);
        // CB FB 0017
        gbc.setState(0x7aa3, 0x1371, 0x2de0, 0x73b, 0x30ad, 0x2c0c, 0x1, 0x0);
        gbc.writeMem(0x7aa3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1371);
        EXPECT(gbc.pc(), 0x7aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0018
        gbc.setState(0x2ab1, 0xb123, 0x4a10, 0x508b, 0x3e11, 0x31fd, 0x0, 0x1);
        gbc.writeMem(0x2ab1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb123);
        EXPECT(gbc.pc(), 0x2ab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0019
        gbc.setState(0x76ea, 0x88f6, 0xb400, 0x497, 0x1ee5, 0xcd04, 0x1, 0x1);
        gbc.writeMem(0x76ea, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x88f6);
        EXPECT(gbc.pc(), 0x76ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 001A
        gbc.setState(0x9256, 0xd115, 0x85d0, 0xbf4f, 0xa74f, 0x8084, 0x1, 0x0);
        gbc.writeMem(0x9256, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd115);
        EXPECT(gbc.pc(), 0x9258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9256), 0xcb);
        EXPECT(gbc.readMem(0x9257), 0xfb);
        // CB FB 001B
        gbc.setState(0x2742, 0x65d, 0x6950, 0xee0c, 0x9d99, 0xe03, 0x0, 0x0);
        gbc.writeMem(0x2742, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x65d);
        EXPECT(gbc.pc(), 0x2744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 001C
        gbc.setState(0x31b6, 0x8550, 0x1590, 0xb0eb, 0x2890, 0x50bf, 0x1, 0x1);
        gbc.writeMem(0x31b6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x8550);
        EXPECT(gbc.pc(), 0x31b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 001D
        gbc.setState(0x9756, 0x9bd9, 0x54d0, 0xe268, 0xa439, 0x7035, 0x0, 0x1);
        gbc.writeMem(0x9756, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9bd9);
        EXPECT(gbc.pc(), 0x9758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9756), 0xcb);
        EXPECT(gbc.readMem(0x9757), 0xfb);
        // CB FB 001E
        gbc.setState(0xba85, 0x34a9, 0x9d60, 0x8c71, 0x949c, 0x20d2, 0x0, 0x0);
        gbc.writeMem(0xba85, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x34a9);
        EXPECT(gbc.pc(), 0xba87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba85), 0xcb);
        EXPECT(gbc.readMem(0xba86), 0xfb);
        // CB FB 001F
        gbc.setState(0x7ef7, 0xf9c7, 0x2e20, 0x5d2, 0xc65e, 0xe91, 0x0, 0x0);
        gbc.writeMem(0x7ef7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf9c7);
        EXPECT(gbc.pc(), 0x7ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0020
        gbc.setState(0x47fb, 0x986d, 0xe680, 0xaa9e, 0xc14f, 0xdbba, 0x1, 0x0);
        gbc.writeMem(0x47fb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x986d);
        EXPECT(gbc.pc(), 0x47fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0021
        gbc.setState(0x982, 0xb6b1, 0x6d40, 0xe1c3, 0x1735, 0xc56c, 0x1, 0x0);
        gbc.writeMem(0x982, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb6b1);
        EXPECT(gbc.pc(), 0x984);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0022
        gbc.setState(0xb9be, 0xe16e, 0xad30, 0x91da, 0x8584, 0xb78f, 0x0, 0x1);
        gbc.writeMem(0xb9be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe16e);
        EXPECT(gbc.pc(), 0xb9c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9be), 0xcb);
        EXPECT(gbc.readMem(0xb9bf), 0xfb);
        // CB FB 0023
        gbc.setState(0xebaa, 0xf895, 0xa4a0, 0x9e62, 0x5a50, 0xd735, 0x0, 0x0);
        gbc.writeMem(0xebaa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf895);
        EXPECT(gbc.pc(), 0xebac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebaa), 0xcb);
        EXPECT(gbc.readMem(0xebab), 0xfb);
        // CB FB 0024
        gbc.setState(0x8b58, 0xbc69, 0xc250, 0xf7c8, 0x871d, 0x803f, 0x0, 0x0);
        gbc.writeMem(0x8b58, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbc69);
        EXPECT(gbc.pc(), 0x8b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b58), 0xcb);
        EXPECT(gbc.readMem(0x8b59), 0xfb);
        // CB FB 0025
        gbc.setState(0xac88, 0xc39e, 0x9c10, 0xbcae, 0xe507, 0x15d8, 0x0, 0x0);
        gbc.writeMem(0xac88, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc39e);
        EXPECT(gbc.pc(), 0xac8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac88), 0xcb);
        EXPECT(gbc.readMem(0xac89), 0xfb);
        // CB FB 0026
        gbc.setState(0x84e1, 0x7c5a, 0xc1a0, 0x1229, 0x2b89, 0x39b7, 0x1, 0x0);
        gbc.writeMem(0x84e1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7c5a);
        EXPECT(gbc.pc(), 0x84e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84e1), 0xcb);
        EXPECT(gbc.readMem(0x84e2), 0xfb);
        // CB FB 0027
        gbc.setState(0x6ee9, 0xc309, 0xa1e0, 0xace7, 0x292f, 0x76cd, 0x0, 0x1);
        gbc.writeMem(0x6ee9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc309);
        EXPECT(gbc.pc(), 0x6eeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0028
        gbc.setState(0x934e, 0x58cb, 0xdd00, 0x7278, 0x844, 0xdb87, 0x1, 0x0);
        gbc.writeMem(0x934e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x58cb);
        EXPECT(gbc.pc(), 0x9350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x934e), 0xcb);
        EXPECT(gbc.readMem(0x934f), 0xfb);
        // CB FB 0029
        gbc.setState(0x39b6, 0x31b1, 0xc0d0, 0xbf2e, 0xab07, 0x2a35, 0x0, 0x0);
        gbc.writeMem(0x39b6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x31b1);
        EXPECT(gbc.pc(), 0x39b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 002A
        gbc.setState(0x631d, 0x367a, 0x8d70, 0xc839, 0xee6b, 0xa4b9, 0x1, 0x1);
        gbc.writeMem(0x631d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x367a);
        EXPECT(gbc.pc(), 0x631f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 002B
        gbc.setState(0x11fe, 0x614f, 0xee90, 0xdd09, 0xda79, 0xde9a, 0x0, 0x0);
        gbc.writeMem(0x11fe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x614f);
        EXPECT(gbc.pc(), 0x1200);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 002C
        gbc.setState(0x67f5, 0x310, 0xd000, 0xf0b3, 0x2ca6, 0xcef1, 0x1, 0x0);
        gbc.writeMem(0x67f5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x310);
        EXPECT(gbc.pc(), 0x67f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 002D
        gbc.setState(0xd990, 0x72c5, 0x2240, 0xb8f8, 0x2eef, 0xf4a4, 0x0, 0x1);
        gbc.writeMem(0xd990, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x72c5);
        EXPECT(gbc.pc(), 0xd992);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd990), 0xcb);
        EXPECT(gbc.readMem(0xd991), 0xfb);
        // CB FB 002E
        gbc.setState(0x145, 0x525, 0x6ea0, 0xe18c, 0x11c8, 0x94ee, 0x1, 0x1);
        gbc.writeMem(0x145, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x525);
        EXPECT(gbc.pc(), 0x147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 002F
        gbc.setState(0xb588, 0xe97c, 0xb3d0, 0x36eb, 0x24d3, 0xcad3, 0x0, 0x1);
        gbc.writeMem(0xb588, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe97c);
        EXPECT(gbc.pc(), 0xb58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb588), 0xcb);
        EXPECT(gbc.readMem(0xb589), 0xfb);
        // CB FB 0030
        gbc.setState(0x4cb2, 0x7fae, 0x6e60, 0xab36, 0x647f, 0x91b4, 0x0, 0x1);
        gbc.writeMem(0x4cb2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x7fae);
        EXPECT(gbc.pc(), 0x4cb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0031
        gbc.setState(0xbbae, 0xd145, 0xcdd0, 0xa15e, 0x5fc7, 0xc70e, 0x0, 0x1);
        gbc.writeMem(0xbbae, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd145);
        EXPECT(gbc.pc(), 0xbbb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbae), 0xcb);
        EXPECT(gbc.readMem(0xbbaf), 0xfb);
        // CB FB 0032
        gbc.setState(0xe03f, 0x3e0e, 0x7f60, 0x2f68, 0x4b4, 0xc01, 0x0, 0x1);
        gbc.writeMem(0xe03f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3e0e);
        EXPECT(gbc.pc(), 0xe041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03f), 0xcb);
        EXPECT(gbc.readMem(0xe040), 0xfb);
        // CB FB 0033
        gbc.setState(0x371, 0xb36c, 0xcfe0, 0xbdf0, 0x2a57, 0xee2d, 0x0, 0x0);
        gbc.writeMem(0x371, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb36c);
        EXPECT(gbc.pc(), 0x373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0034
        gbc.setState(0xdf82, 0x83be, 0x63e0, 0x194c, 0x3416, 0x2572, 0x1, 0x0);
        gbc.writeMem(0xdf82, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x83be);
        EXPECT(gbc.pc(), 0xdf84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf82), 0xcb);
        EXPECT(gbc.readMem(0xdf83), 0xfb);
        // CB FB 0035
        gbc.setState(0x9275, 0xe2df, 0xbea0, 0x69e8, 0xf0a, 0x5e78, 0x0, 0x1);
        gbc.writeMem(0x9275, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe2df);
        EXPECT(gbc.pc(), 0x9277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9275), 0xcb);
        EXPECT(gbc.readMem(0x9276), 0xfb);
        // CB FB 0036
        gbc.setState(0xd600, 0x4d5, 0x3420, 0xbf2f, 0x376b, 0xec57, 0x0, 0x1);
        gbc.writeMem(0xd600, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4d5);
        EXPECT(gbc.pc(), 0xd602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd600), 0xcb);
        EXPECT(gbc.readMem(0xd601), 0xfb);
        // CB FB 0037
        gbc.setState(0x4bdc, 0x3e8a, 0x4140, 0x3cad, 0x19d5, 0x3bc7, 0x0, 0x0);
        gbc.writeMem(0x4bdc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3e8a);
        EXPECT(gbc.pc(), 0x4bde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0038
        gbc.setState(0x47fc, 0xf809, 0x5e70, 0x15da, 0x5e18, 0x5498, 0x1, 0x0);
        gbc.writeMem(0x47fc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf809);
        EXPECT(gbc.pc(), 0x47fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0039
        gbc.setState(0xeb55, 0xa55a, 0xa390, 0x3c17, 0x7f34, 0x6561, 0x1, 0x0);
        gbc.writeMem(0xeb55, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xa55a);
        EXPECT(gbc.pc(), 0xeb57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb55), 0xcb);
        EXPECT(gbc.readMem(0xeb56), 0xfb);
        // CB FB 003A
        gbc.setState(0x64a2, 0x23f2, 0xe370, 0x6a4d, 0x3db4, 0x5e27, 0x0, 0x1);
        gbc.writeMem(0x64a2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x23f2);
        EXPECT(gbc.pc(), 0x64a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 003B
        gbc.setState(0xca8a, 0x5a3d, 0x9020, 0x90c2, 0x6d11, 0xbf66, 0x0, 0x0);
        gbc.writeMem(0xca8a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5a3d);
        EXPECT(gbc.pc(), 0xca8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca8a), 0xcb);
        EXPECT(gbc.readMem(0xca8b), 0xfb);
        // CB FB 003C
        gbc.setState(0xda7c, 0xbcd7, 0x8be0, 0x95d9, 0x2df8, 0xf0ec, 0x0, 0x1);
        gbc.writeMem(0xda7c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbcd7);
        EXPECT(gbc.pc(), 0xda7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda7c), 0xcb);
        EXPECT(gbc.readMem(0xda7d), 0xfb);
        // CB FB 003D
        gbc.setState(0x310a, 0x82db, 0xfdf0, 0x89af, 0x8c1b, 0xcc31, 0x0, 0x1);
        gbc.writeMem(0x310a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x82db);
        EXPECT(gbc.pc(), 0x310c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 003E
        gbc.setState(0x9e87, 0x3536, 0xcc20, 0x9733, 0xecad, 0xd169, 0x1, 0x0);
        gbc.writeMem(0x9e87, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x3536);
        EXPECT(gbc.pc(), 0x9e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e87), 0xcb);
        EXPECT(gbc.readMem(0x9e88), 0xfb);
        // CB FB 003F
        gbc.setState(0xdd59, 0x6209, 0x3710, 0x38f1, 0x96d, 0x547a, 0x0, 0x1);
        gbc.writeMem(0xdd59, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6209);
        EXPECT(gbc.pc(), 0xdd5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd59), 0xcb);
        EXPECT(gbc.readMem(0xdd5a), 0xfb);
        // CB FB 0041
        gbc.setState(0xa04d, 0x7568, 0xfbf0, 0xec06, 0x2d9b, 0xaee2, 0x0, 0x0);
        gbc.writeMem(0xa04d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7568);
        EXPECT(gbc.pc(), 0xa04f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa04d), 0xcb);
        EXPECT(gbc.readMem(0xa04e), 0xfb);
        // CB FB 0042
        gbc.setState(0x370f, 0x38df, 0x4c30, 0x58f0, 0x369a, 0x6e07, 0x1, 0x0);
        gbc.writeMem(0x370f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x38df);
        EXPECT(gbc.pc(), 0x3711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0043
        gbc.setState(0x658b, 0x320c, 0x2c50, 0x78d2, 0x3d46, 0xeac0, 0x1, 0x0);
        gbc.writeMem(0x658b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x320c);
        EXPECT(gbc.pc(), 0x658d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0044
        gbc.setState(0xda83, 0x6ab2, 0xdda0, 0x3274, 0x1233, 0xc416, 0x0, 0x1);
        gbc.writeMem(0xda83, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6ab2);
        EXPECT(gbc.pc(), 0xda85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda83), 0xcb);
        EXPECT(gbc.readMem(0xda84), 0xfb);
        // CB FB 0045
        gbc.setState(0xa8da, 0xb1d, 0x85d0, 0xaaf3, 0x2c8e, 0x41fb, 0x1, 0x1);
        gbc.writeMem(0xa8da, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb1d);
        EXPECT(gbc.pc(), 0xa8dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8da), 0xcb);
        EXPECT(gbc.readMem(0xa8db), 0xfb);
        // CB FB 0046
        gbc.setState(0xe528, 0xf6ce, 0x4050, 0xe3a4, 0x8453, 0xc05d, 0x1, 0x0);
        gbc.writeMem(0xe528, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf6ce);
        EXPECT(gbc.pc(), 0xe52a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe528), 0xcb);
        EXPECT(gbc.readMem(0xe529), 0xfb);
        // CB FB 0047
        gbc.setState(0xa246, 0x6f35, 0xf5c0, 0xbefb, 0x4e4a, 0x4655, 0x0, 0x0);
        gbc.writeMem(0xa246, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6f35);
        EXPECT(gbc.pc(), 0xa248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa246), 0xcb);
        EXPECT(gbc.readMem(0xa247), 0xfb);
        // CB FB 0048
        gbc.setState(0xb6b1, 0xe946, 0x6b40, 0xd6d8, 0x6680, 0x4de, 0x1, 0x1);
        gbc.writeMem(0xb6b1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe946);
        EXPECT(gbc.pc(), 0xb6b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b1), 0xcb);
        EXPECT(gbc.readMem(0xb6b2), 0xfb);
        // CB FB 0049
        gbc.setState(0x9133, 0x4907, 0xc110, 0x3056, 0xbf1, 0x22c9, 0x1, 0x1);
        gbc.writeMem(0x9133, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4907);
        EXPECT(gbc.pc(), 0x9135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9133), 0xcb);
        EXPECT(gbc.readMem(0x9134), 0xfb);
        // CB FB 004A
        gbc.setState(0x496e, 0x2c68, 0x2eb0, 0x2d26, 0x8315, 0xd863, 0x0, 0x0);
        gbc.writeMem(0x496e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2c68);
        EXPECT(gbc.pc(), 0x4970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 004B
        gbc.setState(0x79fc, 0xf2d6, 0x8720, 0xaa0b, 0xbf46, 0xd589, 0x0, 0x1);
        gbc.writeMem(0x79fc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf2d6);
        EXPECT(gbc.pc(), 0x79fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 004C
        gbc.setState(0xba06, 0xa932, 0xa7d0, 0x4bc, 0xc8c8, 0x5f67, 0x1, 0x1);
        gbc.writeMem(0xba06, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xa932);
        EXPECT(gbc.pc(), 0xba08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba06), 0xcb);
        EXPECT(gbc.readMem(0xba07), 0xfb);
        // CB FB 004D
        gbc.setState(0xb78, 0xa712, 0x14d0, 0x6daf, 0xd705, 0x7e8f, 0x1, 0x1);
        gbc.writeMem(0xb78, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa712);
        EXPECT(gbc.pc(), 0xb7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 004E
        gbc.setState(0xa9a7, 0x1ecd, 0x3450, 0x7793, 0xfc25, 0xb79c, 0x0, 0x1);
        gbc.writeMem(0xa9a7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1ecd);
        EXPECT(gbc.pc(), 0xa9a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a7), 0xcb);
        EXPECT(gbc.readMem(0xa9a8), 0xfb);
        // CB FB 0050
        gbc.setState(0xdd72, 0x9bde, 0x6530, 0x4aff, 0x4127, 0xacf6, 0x0, 0x0);
        gbc.writeMem(0xdd72, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9bde);
        EXPECT(gbc.pc(), 0xdd74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd72), 0xcb);
        EXPECT(gbc.readMem(0xdd73), 0xfb);
        // CB FB 0051
        gbc.setState(0x75f0, 0xc690, 0x1010, 0xc97f, 0x6f57, 0x51d, 0x1, 0x1);
        gbc.writeMem(0x75f0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc690);
        EXPECT(gbc.pc(), 0x75f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0052
        gbc.setState(0x92c2, 0xf381, 0xc5f0, 0xd681, 0x240e, 0xf910, 0x1, 0x0);
        gbc.writeMem(0x92c2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf381);
        EXPECT(gbc.pc(), 0x92c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c2), 0xcb);
        EXPECT(gbc.readMem(0x92c3), 0xfb);
        // CB FB 0053
        gbc.setState(0x6194, 0x6c6e, 0x570, 0x987, 0xa3ad, 0x9df4, 0x0, 0x1);
        gbc.writeMem(0x6194, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6c6e);
        EXPECT(gbc.pc(), 0x6196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0054
        gbc.setState(0xb921, 0xbb46, 0xb2f0, 0xeb71, 0x4ab4, 0xdd54, 0x0, 0x0);
        gbc.writeMem(0xb921, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbb46);
        EXPECT(gbc.pc(), 0xb923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb921), 0xcb);
        EXPECT(gbc.readMem(0xb922), 0xfb);
        // CB FB 0055
        gbc.setState(0xce7f, 0x6996, 0x9360, 0xaee7, 0x28bd, 0x5bda, 0x0, 0x0);
        gbc.writeMem(0xce7f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6996);
        EXPECT(gbc.pc(), 0xce81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce7f), 0xcb);
        EXPECT(gbc.readMem(0xce80), 0xfb);
        // CB FB 0057
        gbc.setState(0xa4cc, 0x8a40, 0x61e0, 0x48c7, 0x7845, 0xdbb6, 0x0, 0x1);
        gbc.writeMem(0xa4cc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8a40);
        EXPECT(gbc.pc(), 0xa4ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cc), 0xcb);
        EXPECT(gbc.readMem(0xa4cd), 0xfb);
        // CB FB 0058
        gbc.setState(0x632, 0xa83f, 0x94c0, 0xbd0, 0xba01, 0x8cd2, 0x0, 0x0);
        gbc.writeMem(0x632, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa83f);
        EXPECT(gbc.pc(), 0x634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0059
        gbc.setState(0x202c, 0xcb24, 0x4640, 0x1c73, 0x8154, 0x5beb, 0x0, 0x1);
        gbc.writeMem(0x202c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcb24);
        EXPECT(gbc.pc(), 0x202e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 005A
        gbc.setState(0x510a, 0xa71f, 0x65a0, 0x78f, 0x532, 0xc00a, 0x0, 0x0);
        gbc.writeMem(0x510a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa71f);
        EXPECT(gbc.pc(), 0x510c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 005B
        gbc.setState(0xb0a6, 0xe38b, 0xc640, 0x231b, 0x1c19, 0xb9cb, 0x0, 0x1);
        gbc.writeMem(0xb0a6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe38b);
        EXPECT(gbc.pc(), 0xb0a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a6), 0xcb);
        EXPECT(gbc.readMem(0xb0a7), 0xfb);
        // CB FB 005C
        gbc.setState(0x5049, 0x47d5, 0x1920, 0x22df, 0x5e62, 0x3e7f, 0x0, 0x0);
        gbc.writeMem(0x5049, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x47d5);
        EXPECT(gbc.pc(), 0x504b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 005D
        gbc.setState(0x982e, 0x5938, 0x1c00, 0x5144, 0xf447, 0xe458, 0x1, 0x0);
        gbc.writeMem(0x982e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5938);
        EXPECT(gbc.pc(), 0x9830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x982e), 0xcb);
        EXPECT(gbc.readMem(0x982f), 0xfb);
        // CB FB 005E
        gbc.setState(0xec4d, 0x8f9d, 0x8150, 0xa50b, 0x69d7, 0xf4ec, 0x1, 0x1);
        gbc.writeMem(0xec4d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8f9d);
        EXPECT(gbc.pc(), 0xec4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec4d), 0xcb);
        EXPECT(gbc.readMem(0xec4e), 0xfb);
        // CB FB 005F
        gbc.setState(0xe83c, 0xed46, 0xe850, 0x7e35, 0x4965, 0xe4b8, 0x0, 0x1);
        gbc.writeMem(0xe83c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xed46);
        EXPECT(gbc.pc(), 0xe83e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe83c), 0xcb);
        EXPECT(gbc.readMem(0xe83d), 0xfb);
        // CB FB 0060
        gbc.setState(0x4b63, 0x34b, 0x4400, 0x3a07, 0xd2f9, 0xf37a, 0x1, 0x1);
        gbc.writeMem(0x4b63, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x34b);
        EXPECT(gbc.pc(), 0x4b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0061
        gbc.setState(0x9608, 0x420, 0xeda0, 0x3c27, 0x17ec, 0x407c, 0x1, 0x0);
        gbc.writeMem(0x9608, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x420);
        EXPECT(gbc.pc(), 0x960a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9608), 0xcb);
        EXPECT(gbc.readMem(0x9609), 0xfb);
        // CB FB 0062
        gbc.setState(0x7546, 0x33c2, 0x8d00, 0xbf00, 0x8be8, 0x71b, 0x0, 0x1);
        gbc.writeMem(0x7546, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x33c2);
        EXPECT(gbc.pc(), 0x7548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0063
        gbc.setState(0x4037, 0xe07f, 0x4460, 0x4ebb, 0xcfc0, 0xfeb1, 0x1, 0x0);
        gbc.writeMem(0x4037, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe07f);
        EXPECT(gbc.pc(), 0x4039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0064
        gbc.setState(0x3e65, 0xde04, 0x9fa0, 0xccca, 0x53b0, 0x1285, 0x1, 0x0);
        gbc.writeMem(0x3e65, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xde04);
        EXPECT(gbc.pc(), 0x3e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0065
        gbc.setState(0xe8e, 0x85ed, 0xc1f0, 0xa836, 0x7f2, 0x2ce9, 0x1, 0x0);
        gbc.writeMem(0xe8e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x85ed);
        EXPECT(gbc.pc(), 0xe90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0066
        gbc.setState(0x3667, 0x9b90, 0xffc0, 0x2abc, 0x4dd3, 0x9f57, 0x1, 0x1);
        gbc.writeMem(0x3667, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9b90);
        EXPECT(gbc.pc(), 0x3669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0067
        gbc.setState(0x750, 0x82b6, 0x5bf0, 0x78c6, 0xb626, 0x50c3, 0x1, 0x0);
        gbc.writeMem(0x750, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x82b6);
        EXPECT(gbc.pc(), 0x752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0068
        gbc.setState(0xd59f, 0xac39, 0xe60, 0x37af, 0xace, 0x2190, 0x0, 0x1);
        gbc.writeMem(0xd59f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xac39);
        EXPECT(gbc.pc(), 0xd5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd59f), 0xcb);
        EXPECT(gbc.readMem(0xd5a0), 0xfb);
        // CB FB 0069
        gbc.setState(0xafcc, 0x5b43, 0xe790, 0x4ae3, 0x830b, 0xe062, 0x0, 0x1);
        gbc.writeMem(0xafcc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5b43);
        EXPECT(gbc.pc(), 0xafce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafcc), 0xcb);
        EXPECT(gbc.readMem(0xafcd), 0xfb);
        // CB FB 006A
        gbc.setState(0x1325, 0x879a, 0xabc0, 0xdea6, 0xa6d6, 0xb7af, 0x0, 0x0);
        gbc.writeMem(0x1325, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x879a);
        EXPECT(gbc.pc(), 0x1327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 006B
        gbc.setState(0xb520, 0x9846, 0xf440, 0xa235, 0x3b8, 0xa292, 0x0, 0x1);
        gbc.writeMem(0xb520, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9846);
        EXPECT(gbc.pc(), 0xb522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb520), 0xcb);
        EXPECT(gbc.readMem(0xb521), 0xfb);
        // CB FB 006C
        gbc.setState(0x754d, 0xafd0, 0x71b0, 0xebfd, 0x93c3, 0x7897, 0x1, 0x0);
        gbc.writeMem(0x754d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xafd0);
        EXPECT(gbc.pc(), 0x754f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 006D
        gbc.setState(0x8243, 0x3635, 0xa4b0, 0xb271, 0xf657, 0xd476, 0x0, 0x1);
        gbc.writeMem(0x8243, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3635);
        EXPECT(gbc.pc(), 0x8245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8243), 0xcb);
        EXPECT(gbc.readMem(0x8244), 0xfb);
        // CB FB 006E
        gbc.setState(0x5578, 0x7435, 0x84d0, 0x48fa, 0x3597, 0x35a1, 0x0, 0x0);
        gbc.writeMem(0x5578, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7435);
        EXPECT(gbc.pc(), 0x557a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 006F
        gbc.setState(0x64ed, 0x73fa, 0xd140, 0xe770, 0x4009, 0x78c8, 0x1, 0x1);
        gbc.writeMem(0x64ed, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x73fa);
        EXPECT(gbc.pc(), 0x64ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0070
        gbc.setState(0xab07, 0x8c5d, 0x8b10, 0xbf8a, 0x2219, 0xa968, 0x1, 0x0);
        gbc.writeMem(0xab07, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8c5d);
        EXPECT(gbc.pc(), 0xab09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab07), 0xcb);
        EXPECT(gbc.readMem(0xab08), 0xfb);
        // CB FB 0071
        gbc.setState(0xa5f9, 0xfe45, 0x80d0, 0x5d58, 0x397d, 0xa721, 0x1, 0x1);
        gbc.writeMem(0xa5f9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xfe45);
        EXPECT(gbc.pc(), 0xa5fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f9), 0xcb);
        EXPECT(gbc.readMem(0xa5fa), 0xfb);
        // CB FB 0072
        gbc.setState(0x3c11, 0xc1f5, 0x6330, 0x87c8, 0xa8f, 0xfa08, 0x0, 0x0);
        gbc.writeMem(0x3c11, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc1f5);
        EXPECT(gbc.pc(), 0x3c13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0073
        gbc.setState(0xec2d, 0x76cf, 0xcb40, 0x9907, 0xb9c9, 0xc9e1, 0x0, 0x0);
        gbc.writeMem(0xec2d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x76cf);
        EXPECT(gbc.pc(), 0xec2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2d), 0xcb);
        EXPECT(gbc.readMem(0xec2e), 0xfb);
        // CB FB 0074
        gbc.setState(0x8411, 0x4327, 0xf540, 0x5d40, 0xf728, 0x8cd, 0x0, 0x1);
        gbc.writeMem(0x8411, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4327);
        EXPECT(gbc.pc(), 0x8413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8411), 0xcb);
        EXPECT(gbc.readMem(0x8412), 0xfb);
        // CB FB 0076
        gbc.setState(0xc32, 0x2db0, 0x5e00, 0xbebf, 0xdf0f, 0x248b, 0x1, 0x0);
        gbc.writeMem(0xc32, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2db0);
        EXPECT(gbc.pc(), 0xc34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0077
        gbc.setState(0xbbe6, 0x7942, 0x370, 0x3267, 0x1d17, 0xff69, 0x1, 0x0);
        gbc.writeMem(0xbbe6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7942);
        EXPECT(gbc.pc(), 0xbbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe6), 0xcb);
        EXPECT(gbc.readMem(0xbbe7), 0xfb);
        // CB FB 0078
        gbc.setState(0x940d, 0x64c8, 0x7ed0, 0xee9c, 0x4946, 0x2861, 0x1, 0x1);
        gbc.writeMem(0x940d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x64c8);
        EXPECT(gbc.pc(), 0x940f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940d), 0xcb);
        EXPECT(gbc.readMem(0x940e), 0xfb);
        // CB FB 0079
        gbc.setState(0x3a0e, 0x1d43, 0xfae0, 0xa651, 0x8b3a, 0x9a5b, 0x1, 0x0);
        gbc.writeMem(0x3a0e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1d43);
        EXPECT(gbc.pc(), 0x3a10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 007A
        gbc.setState(0x975a, 0xbeaa, 0xcf90, 0xd03a, 0xc91e, 0x2316, 0x0, 0x0);
        gbc.writeMem(0x975a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xbeaa);
        EXPECT(gbc.pc(), 0x975c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975a), 0xcb);
        EXPECT(gbc.readMem(0x975b), 0xfb);
        // CB FB 007B
        gbc.setState(0x67b4, 0x43fa, 0xf200, 0x6c9a, 0x9c4c, 0x3827, 0x1, 0x0);
        gbc.writeMem(0x67b4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x43fa);
        EXPECT(gbc.pc(), 0x67b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 007C
        gbc.setState(0x38e0, 0xc4f6, 0x1a60, 0x6227, 0x1937, 0xf4fb, 0x0, 0x0);
        gbc.writeMem(0x38e0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc4f6);
        EXPECT(gbc.pc(), 0x38e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 007D
        gbc.setState(0x54c9, 0x9e4c, 0xc0d0, 0x39d8, 0x3bda, 0xa5c6, 0x0, 0x0);
        gbc.writeMem(0x54c9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9e4c);
        EXPECT(gbc.pc(), 0x54cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 007E
        gbc.setState(0x772d, 0x1eb7, 0x87e0, 0xe1db, 0x8e00, 0xb200, 0x0, 0x1);
        gbc.writeMem(0x772d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1eb7);
        EXPECT(gbc.pc(), 0x772f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0080
        gbc.setState(0x9bdb, 0x2f7e, 0x7c20, 0x23ca, 0x20f5, 0x8433, 0x0, 0x1);
        gbc.writeMem(0x9bdb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2f7e);
        EXPECT(gbc.pc(), 0x9bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bdb), 0xcb);
        EXPECT(gbc.readMem(0x9bdc), 0xfb);
        // CB FB 0081
        gbc.setState(0x9789, 0x6805, 0x8310, 0x29c9, 0x1ff9, 0xa4f5, 0x1, 0x0);
        gbc.writeMem(0x9789, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6805);
        EXPECT(gbc.pc(), 0x978b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9789), 0xcb);
        EXPECT(gbc.readMem(0x978a), 0xfb);
        // CB FB 0083
        gbc.setState(0x2379, 0x6258, 0x5c00, 0x28c, 0xf4e0, 0xf7e8, 0x0, 0x0);
        gbc.writeMem(0x2379, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6258);
        EXPECT(gbc.pc(), 0x237b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0084
        gbc.setState(0xb415, 0x22fe, 0x76b0, 0x3749, 0xa151, 0x9b0e, 0x0, 0x0);
        gbc.writeMem(0xb415, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x22fe);
        EXPECT(gbc.pc(), 0xb417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb415), 0xcb);
        EXPECT(gbc.readMem(0xb416), 0xfb);
        // CB FB 0085
        gbc.setState(0xe580, 0xa461, 0xcf00, 0x61cd, 0x7ef0, 0xa4d6, 0x0, 0x0);
        gbc.writeMem(0xe580, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xa461);
        EXPECT(gbc.pc(), 0xe582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe580), 0xcb);
        EXPECT(gbc.readMem(0xe581), 0xfb);
        // CB FB 0086
        gbc.setState(0x2890, 0x641a, 0xb370, 0xe513, 0xd8b6, 0x8b6b, 0x0, 0x0);
        gbc.writeMem(0x2890, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x641a);
        EXPECT(gbc.pc(), 0x2892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0087
        gbc.setState(0x6b47, 0x8645, 0xaf60, 0x372b, 0x2479, 0xc2c6, 0x1, 0x1);
        gbc.writeMem(0x6b47, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8645);
        EXPECT(gbc.pc(), 0x6b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0088
        gbc.setState(0xc7ff, 0xc2d5, 0x8920, 0xa8d2, 0x8d01, 0x20e7, 0x0, 0x0);
        gbc.writeMem(0xc7ff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc2d5);
        EXPECT(gbc.pc(), 0xc801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ff), 0xcb);
        EXPECT(gbc.readMem(0xc800), 0xfb);
        // CB FB 0089
        gbc.setState(0x1919, 0x7545, 0x810, 0xd5ff, 0xa7ef, 0x1a82, 0x1, 0x1);
        gbc.writeMem(0x1919, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7545);
        EXPECT(gbc.pc(), 0x191b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 008A
        gbc.setState(0x24dd, 0x855a, 0x6cf0, 0xdaee, 0x3ddf, 0xde61, 0x0, 0x1);
        gbc.writeMem(0x24dd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x855a);
        EXPECT(gbc.pc(), 0x24df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 008B
        gbc.setState(0xdcf6, 0x74d2, 0x43f0, 0xb156, 0xddb4, 0x5b3b, 0x1, 0x0);
        gbc.writeMem(0xdcf6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x74d2);
        EXPECT(gbc.pc(), 0xdcf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcf6), 0xcb);
        EXPECT(gbc.readMem(0xdcf7), 0xfb);
        // CB FB 008D
        gbc.setState(0x2ca9, 0x7db7, 0xb90, 0x783, 0xbc2b, 0x7a66, 0x1, 0x1);
        gbc.writeMem(0x2ca9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7db7);
        EXPECT(gbc.pc(), 0x2cab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 008E
        gbc.setState(0x89b, 0x8db8, 0x8b70, 0xe810, 0xc4dc, 0x498d, 0x0, 0x1);
        gbc.writeMem(0x89b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8db8);
        EXPECT(gbc.pc(), 0x89d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 008F
        gbc.setState(0x3e9c, 0xf18b, 0x3500, 0x7171, 0xf6fc, 0x8fc7, 0x1, 0x1);
        gbc.writeMem(0x3e9c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf18b);
        EXPECT(gbc.pc(), 0x3e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0090
        gbc.setState(0x868b, 0xb84e, 0x2e60, 0xcadc, 0x747d, 0x1946, 0x0, 0x1);
        gbc.writeMem(0x868b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb84e);
        EXPECT(gbc.pc(), 0x868d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x868b), 0xcb);
        EXPECT(gbc.readMem(0x868c), 0xfb);
        // CB FB 0091
        gbc.setState(0xcd50, 0x9310, 0x32e0, 0x6533, 0xf47a, 0xe6ee, 0x0, 0x0);
        gbc.writeMem(0xcd50, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9310);
        EXPECT(gbc.pc(), 0xcd52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd50), 0xcb);
        EXPECT(gbc.readMem(0xcd51), 0xfb);
        // CB FB 0092
        gbc.setState(0x471b, 0xefd4, 0xa670, 0xa887, 0x1b4b, 0xb059, 0x0, 0x1);
        gbc.writeMem(0x471b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xefd4);
        EXPECT(gbc.pc(), 0x471d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0093
        gbc.setState(0x7df9, 0x4b37, 0xa180, 0xfc37, 0x2231, 0x8772, 0x0, 0x1);
        gbc.writeMem(0x7df9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4b37);
        EXPECT(gbc.pc(), 0x7dfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0094
        gbc.setState(0xc9c7, 0xe023, 0x5da0, 0x8ae0, 0xc4ff, 0x3e63, 0x1, 0x0);
        gbc.writeMem(0xc9c7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe023);
        EXPECT(gbc.pc(), 0xc9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c7), 0xcb);
        EXPECT(gbc.readMem(0xc9c8), 0xfb);
        // CB FB 0095
        gbc.setState(0x3720, 0x8d91, 0x4ed0, 0x40f5, 0x7950, 0xa5, 0x0, 0x1);
        gbc.writeMem(0x3720, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8d91);
        EXPECT(gbc.pc(), 0x3722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0096
        gbc.setState(0xee12, 0x3e9f, 0xe6a0, 0xefed, 0xc6aa, 0xcf88, 0x0, 0x0);
        gbc.writeMem(0xee12, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3e9f);
        EXPECT(gbc.pc(), 0xee14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee12), 0xcb);
        EXPECT(gbc.readMem(0xee13), 0xfb);
        // CB FB 0097
        gbc.setState(0xd4c6, 0x7009, 0x6f50, 0x4df5, 0xa1b8, 0x3ad, 0x1, 0x0);
        gbc.writeMem(0xd4c6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7009);
        EXPECT(gbc.pc(), 0xd4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c6), 0xcb);
        EXPECT(gbc.readMem(0xd4c7), 0xfb);
        // CB FB 0098
        gbc.setState(0xe13c, 0xdeb3, 0x1160, 0x15b4, 0x2efa, 0x475c, 0x0, 0x0);
        gbc.writeMem(0xe13c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdeb3);
        EXPECT(gbc.pc(), 0xe13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe13c), 0xcb);
        EXPECT(gbc.readMem(0xe13d), 0xfb);
        // CB FB 0099
        gbc.setState(0x9b7d, 0x29ed, 0xa6a0, 0xf4e1, 0xe97b, 0x6a0d, 0x0, 0x1);
        gbc.writeMem(0x9b7d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x29ed);
        EXPECT(gbc.pc(), 0x9b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b7d), 0xcb);
        EXPECT(gbc.readMem(0x9b7e), 0xfb);
        // CB FB 009A
        gbc.setState(0x8d59, 0x8af9, 0x4800, 0x5053, 0xa838, 0xe081, 0x0, 0x1);
        gbc.writeMem(0x8d59, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8af9);
        EXPECT(gbc.pc(), 0x8d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d59), 0xcb);
        EXPECT(gbc.readMem(0x8d5a), 0xfb);
        // CB FB 009B
        gbc.setState(0x1178, 0xac67, 0x8d10, 0x7fc, 0x293d, 0xc746, 0x0, 0x1);
        gbc.writeMem(0x1178, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xac67);
        EXPECT(gbc.pc(), 0x117a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 009C
        gbc.setState(0xba64, 0x67cc, 0x5a50, 0x16f2, 0xf59, 0x69f2, 0x1, 0x1);
        gbc.writeMem(0xba64, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x67cc);
        EXPECT(gbc.pc(), 0xba66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba64), 0xcb);
        EXPECT(gbc.readMem(0xba65), 0xfb);
        // CB FB 009D
        gbc.setState(0x9a35, 0x37da, 0xb030, 0x2acb, 0x39f1, 0x5186, 0x1, 0x0);
        gbc.writeMem(0x9a35, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x37da);
        EXPECT(gbc.pc(), 0x9a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a35), 0xcb);
        EXPECT(gbc.readMem(0x9a36), 0xfb);
        // CB FB 009E
        gbc.setState(0xcbbc, 0x238a, 0xc0b0, 0xae4, 0xbdc7, 0x3ec1, 0x0, 0x0);
        gbc.writeMem(0xcbbc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x238a);
        EXPECT(gbc.pc(), 0xcbbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbbc), 0xcb);
        EXPECT(gbc.readMem(0xcbbd), 0xfb);
        // CB FB 009F
        gbc.setState(0x765d, 0xa772, 0xc10, 0xc94a, 0x9a58, 0xfa16, 0x0, 0x0);
        gbc.writeMem(0x765d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xa772);
        EXPECT(gbc.pc(), 0x765f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00A0
        gbc.setState(0x3e45, 0xc834, 0xc2a0, 0x2391, 0x77ae, 0x1c39, 0x1, 0x0);
        gbc.writeMem(0x3e45, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc834);
        EXPECT(gbc.pc(), 0x3e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00A1
        gbc.setState(0x9189, 0x84c6, 0x39b0, 0x83ab, 0x40eb, 0xa525, 0x1, 0x0);
        gbc.writeMem(0x9189, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x84c6);
        EXPECT(gbc.pc(), 0x918b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9189), 0xcb);
        EXPECT(gbc.readMem(0x918a), 0xfb);
        // CB FB 00A2
        gbc.setState(0x5d4f, 0x1907, 0x94f0, 0x5780, 0xd42, 0xeb22, 0x1, 0x0);
        gbc.writeMem(0x5d4f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1907);
        EXPECT(gbc.pc(), 0x5d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00A3
        gbc.setState(0xd70e, 0x2c20, 0xce10, 0x9907, 0x16c4, 0xeb8c, 0x1, 0x0);
        gbc.writeMem(0xd70e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2c20);
        EXPECT(gbc.pc(), 0xd710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd70e), 0xcb);
        EXPECT(gbc.readMem(0xd70f), 0xfb);
        // CB FB 00A4
        gbc.setState(0x837a, 0xb62c, 0xfbd0, 0x2977, 0xd461, 0x4c51, 0x1, 0x0);
        gbc.writeMem(0x837a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb62c);
        EXPECT(gbc.pc(), 0x837c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837a), 0xcb);
        EXPECT(gbc.readMem(0x837b), 0xfb);
        // CB FB 00A5
        gbc.setState(0x289d, 0x1166, 0x4280, 0x33a8, 0x5b94, 0x7ba0, 0x0, 0x1);
        gbc.writeMem(0x289d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1166);
        EXPECT(gbc.pc(), 0x289f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00A6
        gbc.setState(0x67be, 0xd1b8, 0xa240, 0xb9b8, 0xea3d, 0x1ce0, 0x0, 0x0);
        gbc.writeMem(0x67be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd1b8);
        EXPECT(gbc.pc(), 0x67c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00A7
        gbc.setState(0xc87b, 0x45fc, 0x5d0, 0x8948, 0x3454, 0x443b, 0x1, 0x1);
        gbc.writeMem(0xc87b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x45fc);
        EXPECT(gbc.pc(), 0xc87d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc87b), 0xcb);
        EXPECT(gbc.readMem(0xc87c), 0xfb);
        // CB FB 00A8
        gbc.setState(0x196, 0xd308, 0x7fa0, 0xc246, 0xc967, 0x8f0, 0x0, 0x0);
        gbc.writeMem(0x196, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd308);
        EXPECT(gbc.pc(), 0x198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00A9
        gbc.setState(0x40a6, 0x566e, 0x8ed0, 0x434a, 0x3e50, 0x785d, 0x1, 0x0);
        gbc.writeMem(0x40a6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x566e);
        EXPECT(gbc.pc(), 0x40a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00AA
        gbc.setState(0x792d, 0xd662, 0xdb0, 0x77ec, 0x1027, 0x5925, 0x1, 0x0);
        gbc.writeMem(0x792d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd662);
        EXPECT(gbc.pc(), 0x792f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00AB
        gbc.setState(0xd06f, 0x371e, 0x9cd0, 0xee20, 0x8b84, 0x9bcc, 0x0, 0x0);
        gbc.writeMem(0xd06f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x371e);
        EXPECT(gbc.pc(), 0xd071);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd06f), 0xcb);
        EXPECT(gbc.readMem(0xd070), 0xfb);
        // CB FB 00AC
        gbc.setState(0xeaef, 0x1a1c, 0x9570, 0x913d, 0xa089, 0x227b, 0x1, 0x0);
        gbc.writeMem(0xeaef, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1a1c);
        EXPECT(gbc.pc(), 0xeaf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaef), 0xcb);
        EXPECT(gbc.readMem(0xeaf0), 0xfb);
        // CB FB 00AD
        gbc.setState(0xdd59, 0xcfe5, 0x1f0, 0x2064, 0x3d1a, 0x7e5f, 0x0, 0x0);
        gbc.writeMem(0xdd59, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xcfe5);
        EXPECT(gbc.pc(), 0xdd5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd59), 0xcb);
        EXPECT(gbc.readMem(0xdd5a), 0xfb);
        // CB FB 00AE
        gbc.setState(0xb706, 0xa4d9, 0x1210, 0xf1bc, 0x8d07, 0xb4cb, 0x1, 0x1);
        gbc.writeMem(0xb706, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa4d9);
        EXPECT(gbc.pc(), 0xb708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb706), 0xcb);
        EXPECT(gbc.readMem(0xb707), 0xfb);
        // CB FB 00AF
        gbc.setState(0x334b, 0x1920, 0xb320, 0x5eb1, 0x9775, 0x1ba5, 0x1, 0x0);
        gbc.writeMem(0x334b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1920);
        EXPECT(gbc.pc(), 0x334d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00B0
        gbc.setState(0x8fcf, 0xc752, 0x97b0, 0x4fe1, 0xf981, 0x1b7a, 0x1, 0x1);
        gbc.writeMem(0x8fcf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc752);
        EXPECT(gbc.pc(), 0x8fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fcf), 0xcb);
        EXPECT(gbc.readMem(0x8fd0), 0xfb);
        // CB FB 00B1
        gbc.setState(0x4576, 0x4035, 0x9cf0, 0x6dca, 0xd38e, 0xf1a8, 0x1, 0x0);
        gbc.writeMem(0x4576, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4035);
        EXPECT(gbc.pc(), 0x4578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00B2
        gbc.setState(0x3034, 0x28ed, 0x9a80, 0x7f10, 0x855, 0x92b3, 0x1, 0x0);
        gbc.writeMem(0x3034, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x28ed);
        EXPECT(gbc.pc(), 0x3036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00B3
        gbc.setState(0x71d7, 0x7fa8, 0xe3e0, 0xcdf5, 0x2da8, 0x6681, 0x0, 0x0);
        gbc.writeMem(0x71d7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7fa8);
        EXPECT(gbc.pc(), 0x71d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00B5
        gbc.setState(0x1575, 0xf990, 0xa360, 0xa9a, 0x6758, 0xf1e8, 0x0, 0x1);
        gbc.writeMem(0x1575, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf990);
        EXPECT(gbc.pc(), 0x1577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00B6
        gbc.setState(0xa9dd, 0xf290, 0x6f40, 0xe970, 0x6d20, 0x1e5d, 0x1, 0x0);
        gbc.writeMem(0xa9dd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf290);
        EXPECT(gbc.pc(), 0xa9df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9dd), 0xcb);
        EXPECT(gbc.readMem(0xa9de), 0xfb);
        // CB FB 00B7
        gbc.setState(0xfd4, 0x6d11, 0x8960, 0x3ce8, 0x28cf, 0xaf, 0x1, 0x1);
        gbc.writeMem(0xfd4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6d11);
        EXPECT(gbc.pc(), 0xfd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00B8
        gbc.setState(0x5e97, 0xe1a8, 0x250, 0x9638, 0xb054, 0xd6d7, 0x0, 0x1);
        gbc.writeMem(0x5e97, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe1a8);
        EXPECT(gbc.pc(), 0x5e99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00BA
        gbc.setState(0xadac, 0x75a3, 0x8b60, 0xc6ef, 0xc6da, 0x51a0, 0x1, 0x1);
        gbc.writeMem(0xadac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x75a3);
        EXPECT(gbc.pc(), 0xadae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadac), 0xcb);
        EXPECT(gbc.readMem(0xadad), 0xfb);
        // CB FB 00BB
        gbc.setState(0xdd71, 0xaac2, 0xc830, 0x3ed4, 0xfd51, 0x2d38, 0x1, 0x0);
        gbc.writeMem(0xdd71, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xaac2);
        EXPECT(gbc.pc(), 0xdd73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd71), 0xcb);
        EXPECT(gbc.readMem(0xdd72), 0xfb);
        // CB FB 00BC
        gbc.setState(0xe8c4, 0xe9b, 0xf7c0, 0x5e49, 0x66b5, 0xf45e, 0x0, 0x0);
        gbc.writeMem(0xe8c4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe9b);
        EXPECT(gbc.pc(), 0xe8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c4), 0xcb);
        EXPECT(gbc.readMem(0xe8c5), 0xfb);
        // CB FB 00BD
        gbc.setState(0x2792, 0x6822, 0x25d0, 0x9c0b, 0x21e9, 0x8d0e, 0x0, 0x1);
        gbc.writeMem(0x2792, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6822);
        EXPECT(gbc.pc(), 0x2794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00BE
        gbc.setState(0x8dc1, 0x412f, 0x4d40, 0x65ba, 0x2b7b, 0x18c5, 0x0, 0x0);
        gbc.writeMem(0x8dc1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x412f);
        EXPECT(gbc.pc(), 0x8dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc1), 0xcb);
        EXPECT(gbc.readMem(0x8dc2), 0xfb);
        // CB FB 00BF
        gbc.setState(0x12c8, 0x2b8, 0xec70, 0xbea1, 0xdb10, 0x84b6, 0x1, 0x0);
        gbc.writeMem(0x12c8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x12ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00C0
        gbc.setState(0x89fb, 0xfd16, 0xdc30, 0xc666, 0x49e2, 0xd17e, 0x0, 0x1);
        gbc.writeMem(0x89fb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfd16);
        EXPECT(gbc.pc(), 0x89fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89fb), 0xcb);
        EXPECT(gbc.readMem(0x89fc), 0xfb);
        // CB FB 00C1
        gbc.setState(0x1b70, 0xc42a, 0xa400, 0x7223, 0xbc5c, 0xc404, 0x1, 0x0);
        gbc.writeMem(0x1b70, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0x1b72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00C2
        gbc.setState(0x4907, 0x919e, 0x9a90, 0x6c12, 0x7317, 0x5d5, 0x1, 0x1);
        gbc.writeMem(0x4907, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x919e);
        EXPECT(gbc.pc(), 0x4909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00C3
        gbc.setState(0xbacd, 0xda36, 0xd110, 0x7af1, 0x9c90, 0xe99e, 0x1, 0x1);
        gbc.writeMem(0xbacd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xda36);
        EXPECT(gbc.pc(), 0xbacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbacd), 0xcb);
        EXPECT(gbc.readMem(0xbace), 0xfb);
        // CB FB 00C4
        gbc.setState(0x3b7c, 0x4757, 0x6460, 0xb532, 0x5dcf, 0x545f, 0x0, 0x1);
        gbc.writeMem(0x3b7c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4757);
        EXPECT(gbc.pc(), 0x3b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00C6
        gbc.setState(0x6603, 0x987e, 0xa000, 0x99ff, 0x4e96, 0x5316, 0x0, 0x0);
        gbc.writeMem(0x6603, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x987e);
        EXPECT(gbc.pc(), 0x6605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00C7
        gbc.setState(0x8ca7, 0x28d4, 0x9660, 0xd760, 0xd379, 0x1dac, 0x1, 0x1);
        gbc.writeMem(0x8ca7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x28d4);
        EXPECT(gbc.pc(), 0x8ca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca7), 0xcb);
        EXPECT(gbc.readMem(0x8ca8), 0xfb);
        // CB FB 00C8
        gbc.setState(0x8480, 0x8bbc, 0xe280, 0xd950, 0xe4e7, 0x4c32, 0x1, 0x1);
        gbc.writeMem(0x8480, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8bbc);
        EXPECT(gbc.pc(), 0x8482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8480), 0xcb);
        EXPECT(gbc.readMem(0x8481), 0xfb);
        // CB FB 00CA
        gbc.setState(0xa768, 0xb83f, 0xf8f0, 0x39e5, 0xf0ad, 0x3af1, 0x1, 0x1);
        gbc.writeMem(0xa768, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb83f);
        EXPECT(gbc.pc(), 0xa76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa768), 0xcb);
        EXPECT(gbc.readMem(0xa769), 0xfb);
        // CB FB 00CB
        gbc.setState(0xb7fb, 0xf661, 0x5a40, 0x2064, 0x367, 0x234, 0x0, 0x0);
        gbc.writeMem(0xb7fb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf661);
        EXPECT(gbc.pc(), 0xb7fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7fb), 0xcb);
        EXPECT(gbc.readMem(0xb7fc), 0xfb);
        // CB FB 00CC
        gbc.setState(0xc747, 0x5a4b, 0x9070, 0x2a16, 0x8e4b, 0x4cc4, 0x1, 0x0);
        gbc.writeMem(0xc747, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5a4b);
        EXPECT(gbc.pc(), 0xc749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc747), 0xcb);
        EXPECT(gbc.readMem(0xc748), 0xfb);
        // CB FB 00CD
        gbc.setState(0x859d, 0x854d, 0xbba0, 0xad6c, 0x2f36, 0x4e85, 0x0, 0x0);
        gbc.writeMem(0x859d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x854d);
        EXPECT(gbc.pc(), 0x859f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859d), 0xcb);
        EXPECT(gbc.readMem(0x859e), 0xfb);
        // CB FB 00CE
        gbc.setState(0x9a95, 0x9617, 0x1d40, 0xba18, 0x30be, 0xc88d, 0x0, 0x0);
        gbc.writeMem(0x9a95, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x9617);
        EXPECT(gbc.pc(), 0x9a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a95), 0xcb);
        EXPECT(gbc.readMem(0x9a96), 0xfb);
        // CB FB 00CF
        gbc.setState(0x23f6, 0xb88e, 0xfcc0, 0xd890, 0x9a38, 0xbcb0, 0x1, 0x0);
        gbc.writeMem(0x23f6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb88e);
        EXPECT(gbc.pc(), 0x23f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00D0
        gbc.setState(0xe24e, 0x80e1, 0x54b0, 0xdea1, 0xeee2, 0x3b28, 0x0, 0x0);
        gbc.writeMem(0xe24e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x80e1);
        EXPECT(gbc.pc(), 0xe250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe24e), 0xcb);
        EXPECT(gbc.readMem(0xe24f), 0xfb);
        // CB FB 00D1
        gbc.setState(0x58a5, 0xcb44, 0xc9f0, 0x2997, 0xecaa, 0x12f, 0x0, 0x0);
        gbc.writeMem(0x58a5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcb44);
        EXPECT(gbc.pc(), 0x58a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00D2
        gbc.setState(0x3e21, 0xf830, 0xf840, 0x1e03, 0xf020, 0xb1c5, 0x0, 0x1);
        gbc.writeMem(0x3e21, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf830);
        EXPECT(gbc.pc(), 0x3e23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00D3
        gbc.setState(0x1bbe, 0xfb2, 0xabb0, 0xd7b5, 0x1635, 0x840f, 0x1, 0x1);
        gbc.writeMem(0x1bbe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfb2);
        EXPECT(gbc.pc(), 0x1bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00D4
        gbc.setState(0x96b2, 0x3609, 0x7da0, 0x952b, 0x310b, 0xe31a, 0x1, 0x0);
        gbc.writeMem(0x96b2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x3609);
        EXPECT(gbc.pc(), 0x96b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96b2), 0xcb);
        EXPECT(gbc.readMem(0x96b3), 0xfb);
        // CB FB 00D5
        gbc.setState(0x53c1, 0xd0f9, 0x22e0, 0xb8c7, 0xa386, 0x59e2, 0x1, 0x0);
        gbc.writeMem(0x53c1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd0f9);
        EXPECT(gbc.pc(), 0x53c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00D6
        gbc.setState(0x3d8a, 0x432e, 0xd000, 0x2b61, 0x56b1, 0xbc37, 0x1, 0x1);
        gbc.writeMem(0x3d8a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x432e);
        EXPECT(gbc.pc(), 0x3d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00D7
        gbc.setState(0xed8b, 0x941f, 0x2c0, 0x9fb9, 0xb8c1, 0x1cf2, 0x1, 0x0);
        gbc.writeMem(0xed8b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x941f);
        EXPECT(gbc.pc(), 0xed8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8b), 0xcb);
        EXPECT(gbc.readMem(0xed8c), 0xfb);
        // CB FB 00D8
        gbc.setState(0xbe92, 0xc55d, 0xd0a0, 0x8b3b, 0x14f1, 0x85a5, 0x0, 0x0);
        gbc.writeMem(0xbe92, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc55d);
        EXPECT(gbc.pc(), 0xbe94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe92), 0xcb);
        EXPECT(gbc.readMem(0xbe93), 0xfb);
        // CB FB 00D9
        gbc.setState(0xd319, 0xc027, 0x1b50, 0xa9d1, 0x4014, 0x3f93, 0x0, 0x1);
        gbc.writeMem(0xd319, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc027);
        EXPECT(gbc.pc(), 0xd31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd319), 0xcb);
        EXPECT(gbc.readMem(0xd31a), 0xfb);
        // CB FB 00DA
        gbc.setState(0x6254, 0x15e0, 0xc6b0, 0x9d4, 0x5b24, 0x2515, 0x1, 0x1);
        gbc.writeMem(0x6254, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x15e0);
        EXPECT(gbc.pc(), 0x6256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00DB
        gbc.setState(0xa8f0, 0x3038, 0x3160, 0x1484, 0x56b9, 0x5dc9, 0x1, 0x0);
        gbc.writeMem(0xa8f0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3038);
        EXPECT(gbc.pc(), 0xa8f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f0), 0xcb);
        EXPECT(gbc.readMem(0xa8f1), 0xfb);
        // CB FB 00DC
        gbc.setState(0xe71b, 0xb21d, 0x35a0, 0x3b1f, 0xdee8, 0x58f5, 0x0, 0x0);
        gbc.writeMem(0xe71b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb21d);
        EXPECT(gbc.pc(), 0xe71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe71b), 0xcb);
        EXPECT(gbc.readMem(0xe71c), 0xfb);
        // CB FB 00DD
        gbc.setState(0xd0a4, 0xb10, 0x3b0, 0xcd36, 0x6478, 0xb6d9, 0x1, 0x1);
        gbc.writeMem(0xd0a4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb10);
        EXPECT(gbc.pc(), 0xd0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0a4), 0xcb);
        EXPECT(gbc.readMem(0xd0a5), 0xfb);
        // CB FB 00DE
        gbc.setState(0x98f5, 0x9688, 0x6d10, 0xc4d9, 0xa79f, 0x4b46, 0x1, 0x1);
        gbc.writeMem(0x98f5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9688);
        EXPECT(gbc.pc(), 0x98f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f5), 0xcb);
        EXPECT(gbc.readMem(0x98f6), 0xfb);
        // CB FB 00DF
        gbc.setState(0x256b, 0xe35, 0xca20, 0x8ce6, 0x7f76, 0xed60, 0x0, 0x0);
        gbc.writeMem(0x256b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe35);
        EXPECT(gbc.pc(), 0x256d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E0
        gbc.setState(0xbb9, 0xaaa9, 0x840, 0x35ca, 0xbb72, 0x9f8b, 0x0, 0x0);
        gbc.writeMem(0xbb9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaaa9);
        EXPECT(gbc.pc(), 0xbbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E1
        gbc.setState(0x2884, 0xb40f, 0x3b60, 0xe500, 0xc4bc, 0xe15c, 0x0, 0x0);
        gbc.writeMem(0x2884, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb40f);
        EXPECT(gbc.pc(), 0x2886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E2
        gbc.setState(0x2d04, 0xa15b, 0x3db0, 0x9f18, 0xf33e, 0x179c, 0x1, 0x1);
        gbc.writeMem(0x2d04, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa15b);
        EXPECT(gbc.pc(), 0x2d06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00E3
        gbc.setState(0x6f86, 0xf4fe, 0xedc0, 0x22f3, 0xec6d, 0x5988, 0x0, 0x1);
        gbc.writeMem(0x6f86, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf4fe);
        EXPECT(gbc.pc(), 0x6f88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E4
        gbc.setState(0x975f, 0x3005, 0x1e40, 0xdcc, 0xb78d, 0xbdc, 0x0, 0x1);
        gbc.writeMem(0x975f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3005);
        EXPECT(gbc.pc(), 0x9761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975f), 0xcb);
        EXPECT(gbc.readMem(0x9760), 0xfb);
        // CB FB 00E6
        gbc.setState(0x3b2c, 0x5c1a, 0x20a0, 0x45b7, 0x7876, 0x2da4, 0x0, 0x0);
        gbc.writeMem(0x3b2c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5c1a);
        EXPECT(gbc.pc(), 0x3b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E7
        gbc.setState(0x9185, 0x5348, 0x6fa0, 0x1e35, 0xc420, 0x2c23, 0x0, 0x1);
        gbc.writeMem(0x9185, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x5348);
        EXPECT(gbc.pc(), 0x9187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9185), 0xcb);
        EXPECT(gbc.readMem(0x9186), 0xfb);
        // CB FB 00E8
        gbc.setState(0x284e, 0x338a, 0xf260, 0x26a1, 0x5cd3, 0xda50, 0x1, 0x1);
        gbc.writeMem(0x284e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x338a);
        EXPECT(gbc.pc(), 0x2850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00E9
        gbc.setState(0x64dc, 0x6e5a, 0xdf10, 0x59d8, 0x8b61, 0x513e, 0x1, 0x1);
        gbc.writeMem(0x64dc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6e5a);
        EXPECT(gbc.pc(), 0x64de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00EA
        gbc.setState(0x8bff, 0xedaa, 0x53e0, 0xfba0, 0xdcc4, 0xf1bd, 0x1, 0x1);
        gbc.writeMem(0x8bff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xedaa);
        EXPECT(gbc.pc(), 0x8c01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bff), 0xcb);
        EXPECT(gbc.readMem(0x8c00), 0xfb);
        // CB FB 00EB
        gbc.setState(0xedb1, 0x2472, 0x1c70, 0x836, 0xd541, 0x1ccf, 0x1, 0x0);
        gbc.writeMem(0xedb1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2472);
        EXPECT(gbc.pc(), 0xedb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb1), 0xcb);
        EXPECT(gbc.readMem(0xedb2), 0xfb);
        // CB FB 00EC
        gbc.setState(0xb9bb, 0x9803, 0x5080, 0x7cf3, 0x2bea, 0xebcb, 0x0, 0x0);
        gbc.writeMem(0xb9bb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9803);
        EXPECT(gbc.pc(), 0xb9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9bb), 0xcb);
        EXPECT(gbc.readMem(0xb9bc), 0xfb);
        // CB FB 00ED
        gbc.setState(0xe05f, 0x84cf, 0x2ac0, 0x65a5, 0x3a09, 0x4f35, 0x0, 0x1);
        gbc.writeMem(0xe05f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x84cf);
        EXPECT(gbc.pc(), 0xe061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe05f), 0xcb);
        EXPECT(gbc.readMem(0xe060), 0xfb);
        // CB FB 00EE
        gbc.setState(0xba5e, 0x6700, 0x68a0, 0xcce9, 0xe82c, 0x92c0, 0x1, 0x1);
        gbc.writeMem(0xba5e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6700);
        EXPECT(gbc.pc(), 0xba60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba5e), 0xcb);
        EXPECT(gbc.readMem(0xba5f), 0xfb);
        // CB FB 00EF
        gbc.setState(0xbece, 0x50e3, 0x4260, 0xa227, 0x37c9, 0x64e, 0x1, 0x1);
        gbc.writeMem(0xbece, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x50e3);
        EXPECT(gbc.pc(), 0xbed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbece), 0xcb);
        EXPECT(gbc.readMem(0xbecf), 0xfb);
        // CB FB 00F0
        gbc.setState(0x39a5, 0x9636, 0x9830, 0xb6f, 0x87df, 0xddb8, 0x1, 0x1);
        gbc.writeMem(0x39a5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9636);
        EXPECT(gbc.pc(), 0x39a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00F1
        gbc.setState(0xd3e3, 0x4a6b, 0x51b0, 0xf2aa, 0x3b9b, 0xd3eb, 0x0, 0x1);
        gbc.writeMem(0xd3e3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4a6b);
        EXPECT(gbc.pc(), 0xd3e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3e3), 0xcb);
        EXPECT(gbc.readMem(0xd3e4), 0xfb);
        // CB FB 00F2
        gbc.setState(0x20fd, 0xb2, 0x7a70, 0x289f, 0x428f, 0xeeb6, 0x1, 0x0);
        gbc.writeMem(0x20fd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb2);
        EXPECT(gbc.pc(), 0x20ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00F3
        gbc.setState(0x5021, 0x2af, 0x540, 0x5a12, 0xc306, 0xe7eb, 0x1, 0x0);
        gbc.writeMem(0x5021, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2af);
        EXPECT(gbc.pc(), 0x5023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00F4
        gbc.setState(0x2ce1, 0xfc45, 0xfaf0, 0x364e, 0x303d, 0x3184, 0x0, 0x1);
        gbc.writeMem(0x2ce1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfc45);
        EXPECT(gbc.pc(), 0x2ce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00F5
        gbc.setState(0x1e36, 0x18f7, 0x57c0, 0x8d8b, 0x3309, 0x8ca3, 0x0, 0x0);
        gbc.writeMem(0x1e36, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x18f7);
        EXPECT(gbc.pc(), 0x1e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00F7
        gbc.setState(0xcaf0, 0x2507, 0x77a0, 0xb055, 0x664b, 0x325, 0x1, 0x1);
        gbc.writeMem(0xcaf0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2507);
        EXPECT(gbc.pc(), 0xcaf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf0), 0xcb);
        EXPECT(gbc.readMem(0xcaf1), 0xfb);
        // CB FB 00F8
        gbc.setState(0x3f49, 0x7f69, 0xe7c0, 0x6b55, 0x1903, 0x3608, 0x0, 0x0);
        gbc.writeMem(0x3f49, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7f69);
        EXPECT(gbc.pc(), 0x3f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00FA
        gbc.setState(0xa2b6, 0xb1af, 0x6e00, 0x2d25, 0x9e7a, 0x17d1, 0x0, 0x0);
        gbc.writeMem(0xa2b6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb1af);
        EXPECT(gbc.pc(), 0xa2b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b6), 0xcb);
        EXPECT(gbc.readMem(0xa2b7), 0xfb);
        // CB FB 00FB
        gbc.setState(0x81d9, 0xaa21, 0xb40, 0x11c4, 0xd9b2, 0x8377, 0x0, 0x1);
        gbc.writeMem(0x81d9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xaa21);
        EXPECT(gbc.pc(), 0x81db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d9), 0xcb);
        EXPECT(gbc.readMem(0x81da), 0xfb);
        // CB FB 00FC
        gbc.setState(0x10f2, 0xfa31, 0x4000, 0x8b9a, 0xa43a, 0x745a, 0x0, 0x1);
        gbc.writeMem(0x10f2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfa31);
        EXPECT(gbc.pc(), 0x10f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00FD
        gbc.setState(0x70b4, 0xb9d7, 0x1a40, 0x91bd, 0x9193, 0x646c, 0x0, 0x1);
        gbc.writeMem(0x70b4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb9d7);
        EXPECT(gbc.pc(), 0x70b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 00FE
        gbc.setState(0x1e8f, 0x699, 0x2710, 0x84db, 0xc8d7, 0xc93c, 0x1, 0x1);
        gbc.writeMem(0x1e8f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x699);
        EXPECT(gbc.pc(), 0x1e91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 00FF
        gbc.setState(0x26c9, 0x66d6, 0xe1c0, 0x5225, 0x7bcf, 0x7763, 0x1, 0x1);
        gbc.writeMem(0x26c9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x66d6);
        EXPECT(gbc.pc(), 0x26cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0100
        gbc.setState(0xafdf, 0xf62d, 0x16e0, 0xabf1, 0x28bc, 0x695a, 0x1, 0x0);
        gbc.writeMem(0xafdf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xf62d);
        EXPECT(gbc.pc(), 0xafe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafdf), 0xcb);
        EXPECT(gbc.readMem(0xafe0), 0xfb);
        // CB FB 0101
        gbc.setState(0xb3c1, 0xdbc9, 0x4850, 0x32e0, 0x717a, 0x76c3, 0x1, 0x0);
        gbc.writeMem(0xb3c1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdbc9);
        EXPECT(gbc.pc(), 0xb3c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c1), 0xcb);
        EXPECT(gbc.readMem(0xb3c2), 0xfb);
        // CB FB 0102
        gbc.setState(0x22e0, 0xfb36, 0xde10, 0x1ebe, 0x448b, 0x710, 0x1, 0x0);
        gbc.writeMem(0x22e0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfb36);
        EXPECT(gbc.pc(), 0x22e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0103
        gbc.setState(0xba65, 0x7b7e, 0xbf20, 0x69ee, 0xe519, 0x3531, 0x0, 0x1);
        gbc.writeMem(0xba65, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7b7e);
        EXPECT(gbc.pc(), 0xba67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba65), 0xcb);
        EXPECT(gbc.readMem(0xba66), 0xfb);
        // CB FB 0104
        gbc.setState(0x2ab1, 0x4567, 0x3340, 0x9d12, 0x9bc, 0xe1d4, 0x0, 0x0);
        gbc.writeMem(0x2ab1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4567);
        EXPECT(gbc.pc(), 0x2ab3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0105
        gbc.setState(0xbad1, 0xdf67, 0x7080, 0x6555, 0x3d38, 0x15de, 0x1, 0x0);
        gbc.writeMem(0xbad1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xdf67);
        EXPECT(gbc.pc(), 0xbad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad1), 0xcb);
        EXPECT(gbc.readMem(0xbad2), 0xfb);
        // CB FB 0106
        gbc.setState(0x8a13, 0x3ea, 0x7db0, 0x5a68, 0xbcd0, 0x5777, 0x1, 0x1);
        gbc.writeMem(0x8a13, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3ea);
        EXPECT(gbc.pc(), 0x8a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a13), 0xcb);
        EXPECT(gbc.readMem(0x8a14), 0xfb);
        // CB FB 0108
        gbc.setState(0x6282, 0x2425, 0x30a0, 0xec03, 0xb37f, 0xe228, 0x1, 0x1);
        gbc.writeMem(0x6282, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2425);
        EXPECT(gbc.pc(), 0x6284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0109
        gbc.setState(0xbe05, 0xaf4b, 0xbb50, 0x4ef1, 0xa8f1, 0x41, 0x0, 0x1);
        gbc.writeMem(0xbe05, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xaf4b);
        EXPECT(gbc.pc(), 0xbe07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe05), 0xcb);
        EXPECT(gbc.readMem(0xbe06), 0xfb);
        // CB FB 010A
        gbc.setState(0x1c76, 0x115c, 0xd9e0, 0x177a, 0xcc65, 0x5341, 0x1, 0x1);
        gbc.writeMem(0x1c76, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x115c);
        EXPECT(gbc.pc(), 0x1c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 010C
        gbc.setState(0x1de5, 0xaf4e, 0xc660, 0x14b9, 0x6291, 0xbaf7, 0x0, 0x0);
        gbc.writeMem(0x1de5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaf4e);
        EXPECT(gbc.pc(), 0x1de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 010D
        gbc.setState(0x223c, 0x978, 0x5110, 0x4558, 0x6f41, 0xe42b, 0x1, 0x1);
        gbc.writeMem(0x223c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x978);
        EXPECT(gbc.pc(), 0x223e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 010E
        gbc.setState(0x6ce8, 0x74b, 0x6d70, 0xa257, 0xc0c7, 0x291f, 0x0, 0x0);
        gbc.writeMem(0x6ce8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x74b);
        EXPECT(gbc.pc(), 0x6cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 010F
        gbc.setState(0x4a2, 0xa602, 0x9d0, 0xe73, 0xe1a6, 0xb5c0, 0x1, 0x0);
        gbc.writeMem(0x4a2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa602);
        EXPECT(gbc.pc(), 0x4a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0111
        gbc.setState(0x4a1f, 0xf27e, 0x7780, 0xa4c9, 0x30c1, 0x9955, 0x0, 0x1);
        gbc.writeMem(0x4a1f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf27e);
        EXPECT(gbc.pc(), 0x4a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0112
        gbc.setState(0xafc2, 0xf6aa, 0x8be0, 0x4e8a, 0x8f40, 0xdb60, 0x0, 0x0);
        gbc.writeMem(0xafc2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf6aa);
        EXPECT(gbc.pc(), 0xafc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc2), 0xcb);
        EXPECT(gbc.readMem(0xafc3), 0xfb);
        // CB FB 0113
        gbc.setState(0xa366, 0x45c2, 0x7a20, 0x664c, 0x383e, 0x4661, 0x1, 0x0);
        gbc.writeMem(0xa366, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x45c2);
        EXPECT(gbc.pc(), 0xa368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa366), 0xcb);
        EXPECT(gbc.readMem(0xa367), 0xfb);
        // CB FB 0114
        gbc.setState(0x7020, 0x8d73, 0xd280, 0x4507, 0xe413, 0x97b6, 0x1, 0x1);
        gbc.writeMem(0x7020, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8d73);
        EXPECT(gbc.pc(), 0x7022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0115
        gbc.setState(0x143b, 0x865c, 0x800, 0x76bd, 0x2fed, 0xe984, 0x1, 0x0);
        gbc.writeMem(0x143b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x865c);
        EXPECT(gbc.pc(), 0x143d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0116
        gbc.setState(0xa6be, 0x45dc, 0xc8a0, 0x3eaf, 0xc19a, 0x503, 0x1, 0x0);
        gbc.writeMem(0xa6be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x45dc);
        EXPECT(gbc.pc(), 0xa6c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6be), 0xcb);
        EXPECT(gbc.readMem(0xa6bf), 0xfb);
        // CB FB 0117
        gbc.setState(0x530c, 0x9491, 0x7f50, 0xad27, 0x377a, 0x8d6c, 0x0, 0x0);
        gbc.writeMem(0x530c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9491);
        EXPECT(gbc.pc(), 0x530e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0118
        gbc.setState(0xd6cc, 0x5007, 0x7840, 0xfb77, 0x908c, 0xe9f8, 0x0, 0x1);
        gbc.writeMem(0xd6cc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5007);
        EXPECT(gbc.pc(), 0xd6ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6cc), 0xcb);
        EXPECT(gbc.readMem(0xd6cd), 0xfb);
        // CB FB 011A
        gbc.setState(0x2da8, 0x879c, 0xb5b0, 0x548f, 0x886f, 0xcd36, 0x0, 0x1);
        gbc.writeMem(0x2da8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x879c);
        EXPECT(gbc.pc(), 0x2daa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 011B
        gbc.setState(0x552b, 0xb5e4, 0x11c0, 0x8aff, 0xa128, 0x4ba9, 0x0, 0x0);
        gbc.writeMem(0x552b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb5e4);
        EXPECT(gbc.pc(), 0x552d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 011D
        gbc.setState(0x2dfe, 0xa2f5, 0x6110, 0x366f, 0xc100, 0xee7c, 0x0, 0x1);
        gbc.writeMem(0x2dfe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa2f5);
        EXPECT(gbc.pc(), 0x2e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 011E
        gbc.setState(0x87be, 0xb7eb, 0xc0d0, 0xb1ed, 0x510f, 0x671f, 0x0, 0x1);
        gbc.writeMem(0x87be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb7eb);
        EXPECT(gbc.pc(), 0x87c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87be), 0xcb);
        EXPECT(gbc.readMem(0x87bf), 0xfb);
        // CB FB 011F
        gbc.setState(0xd6bc, 0x9367, 0x96a0, 0x35db, 0xedc8, 0xcbdd, 0x1, 0x1);
        gbc.writeMem(0xd6bc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9367);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bc), 0xcb);
        EXPECT(gbc.readMem(0xd6bd), 0xfb);
        // CB FB 0120
        gbc.setState(0xbba2, 0x9f5d, 0xdd50, 0x7969, 0x1f8e, 0x28fb, 0x0, 0x0);
        gbc.writeMem(0xbba2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9f5d);
        EXPECT(gbc.pc(), 0xbba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba2), 0xcb);
        EXPECT(gbc.readMem(0xbba3), 0xfb);
        // CB FB 0121
        gbc.setState(0x39c0, 0x2c6d, 0xe0, 0x6d5b, 0x3b5, 0xddb9, 0x0, 0x0);
        gbc.writeMem(0x39c0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2c6d);
        EXPECT(gbc.pc(), 0x39c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0122
        gbc.setState(0x4023, 0xa863, 0x65c0, 0x3608, 0x1834, 0xeef0, 0x0, 0x1);
        gbc.writeMem(0x4023, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa863);
        EXPECT(gbc.pc(), 0x4025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0123
        gbc.setState(0xd6a9, 0x781f, 0x5480, 0x16f5, 0x5ae4, 0xa4dc, 0x1, 0x1);
        gbc.writeMem(0xd6a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x781f);
        EXPECT(gbc.pc(), 0xd6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a9), 0xcb);
        EXPECT(gbc.readMem(0xd6aa), 0xfb);
        // CB FB 0124
        gbc.setState(0xc24, 0xff20, 0x3e20, 0x95b9, 0x1229, 0x9db5, 0x0, 0x0);
        gbc.writeMem(0xc24, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xff20);
        EXPECT(gbc.pc(), 0xc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0125
        gbc.setState(0x1880, 0x9ef8, 0xdac0, 0x7cc3, 0xc94, 0xa3e0, 0x0, 0x0);
        gbc.writeMem(0x1880, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9ef8);
        EXPECT(gbc.pc(), 0x1882);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0126
        gbc.setState(0xb533, 0xf87d, 0xa530, 0x5804, 0x10b2, 0x89dd, 0x0, 0x1);
        gbc.writeMem(0xb533, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf87d);
        EXPECT(gbc.pc(), 0xb535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb533), 0xcb);
        EXPECT(gbc.readMem(0xb534), 0xfb);
        // CB FB 0127
        gbc.setState(0xd496, 0xb9b2, 0x6410, 0xe5, 0xd837, 0xfcbc, 0x0, 0x1);
        gbc.writeMem(0xd496, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb9b2);
        EXPECT(gbc.pc(), 0xd498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd496), 0xcb);
        EXPECT(gbc.readMem(0xd497), 0xfb);
        // CB FB 0128
        gbc.setState(0xeb6c, 0x9f7c, 0xef10, 0x122a, 0xc796, 0xfbcf, 0x0, 0x1);
        gbc.writeMem(0xeb6c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9f7c);
        EXPECT(gbc.pc(), 0xeb6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb6c), 0xcb);
        EXPECT(gbc.readMem(0xeb6d), 0xfb);
        // CB FB 0129
        gbc.setState(0x76e7, 0xf7b0, 0x3fb0, 0xe3f, 0xb36, 0xf5d, 0x1, 0x1);
        gbc.writeMem(0x76e7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf7b0);
        EXPECT(gbc.pc(), 0x76e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 012A
        gbc.setState(0x4bdb, 0x2a4f, 0x2200, 0x50fd, 0x1f0c, 0x57bd, 0x0, 0x0);
        gbc.writeMem(0x4bdb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2a4f);
        EXPECT(gbc.pc(), 0x4bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 012B
        gbc.setState(0x6adf, 0x3337, 0x37e0, 0x6f80, 0x165f, 0x24d, 0x1, 0x1);
        gbc.writeMem(0x6adf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3337);
        EXPECT(gbc.pc(), 0x6ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 012C
        gbc.setState(0x4c69, 0x483f, 0xa610, 0x1b6b, 0x45a5, 0x7ddd, 0x1, 0x1);
        gbc.writeMem(0x4c69, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x483f);
        EXPECT(gbc.pc(), 0x4c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 012D
        gbc.setState(0x2499, 0xee8e, 0x16e0, 0x57ba, 0xee50, 0xd621, 0x1, 0x0);
        gbc.writeMem(0x2499, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xee8e);
        EXPECT(gbc.pc(), 0x249b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 012E
        gbc.setState(0xc45a, 0xb250, 0xfa0, 0x1e20, 0x92f7, 0x7d8c, 0x0, 0x0);
        gbc.writeMem(0xc45a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb250);
        EXPECT(gbc.pc(), 0xc45c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc45a), 0xcb);
        EXPECT(gbc.readMem(0xc45b), 0xfb);
        // CB FB 012F
        gbc.setState(0x8263, 0x39a8, 0xf340, 0xf9a7, 0x9871, 0x302f, 0x0, 0x1);
        gbc.writeMem(0x8263, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x39a8);
        EXPECT(gbc.pc(), 0x8265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8263), 0xcb);
        EXPECT(gbc.readMem(0x8264), 0xfb);
        // CB FB 0130
        gbc.setState(0xd5c5, 0x403f, 0x1bc0, 0xa8be, 0xbd83, 0xed8e, 0x1, 0x0);
        gbc.writeMem(0xd5c5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x403f);
        EXPECT(gbc.pc(), 0xd5c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c5), 0xcb);
        EXPECT(gbc.readMem(0xd5c6), 0xfb);
        // CB FB 0131
        gbc.setState(0x872, 0xa063, 0x69b0, 0x916, 0xaeb, 0xec1a, 0x1, 0x1);
        gbc.writeMem(0x872, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa063);
        EXPECT(gbc.pc(), 0x874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0132
        gbc.setState(0x316b, 0x670, 0xd000, 0x72c0, 0x46f, 0xd374, 0x0, 0x1);
        gbc.writeMem(0x316b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x670);
        EXPECT(gbc.pc(), 0x316d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0133
        gbc.setState(0xb305, 0xb4d3, 0xdbc0, 0x8b76, 0xe60e, 0x586f, 0x1, 0x1);
        gbc.writeMem(0xb305, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb4d3);
        EXPECT(gbc.pc(), 0xb307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb305), 0xcb);
        EXPECT(gbc.readMem(0xb306), 0xfb);
        // CB FB 0134
        gbc.setState(0x3f3e, 0x2b72, 0xb020, 0x40bf, 0xb606, 0x2804, 0x0, 0x0);
        gbc.writeMem(0x3f3e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2b72);
        EXPECT(gbc.pc(), 0x3f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0135
        gbc.setState(0x6d00, 0x90a3, 0x93d0, 0x93d3, 0x766c, 0x4180, 0x0, 0x1);
        gbc.writeMem(0x6d00, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x90a3);
        EXPECT(gbc.pc(), 0x6d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0136
        gbc.setState(0x8f1c, 0xa3e2, 0xdcd0, 0x2850, 0xe8ba, 0xa2cd, 0x1, 0x0);
        gbc.writeMem(0x8f1c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa3e2);
        EXPECT(gbc.pc(), 0x8f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f1c), 0xcb);
        EXPECT(gbc.readMem(0x8f1d), 0xfb);
        // CB FB 0137
        gbc.setState(0x2522, 0xfe15, 0x9380, 0xafa9, 0x24d9, 0x44d6, 0x1, 0x0);
        gbc.writeMem(0x2522, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfe15);
        EXPECT(gbc.pc(), 0x2524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0138
        gbc.setState(0x61b9, 0x13da, 0x9930, 0xfda2, 0x6081, 0x1539, 0x0, 0x0);
        gbc.writeMem(0x61b9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x13da);
        EXPECT(gbc.pc(), 0x61bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0139
        gbc.setState(0x7259, 0xa22, 0x2e80, 0x534d, 0x230e, 0xc383, 0x1, 0x1);
        gbc.writeMem(0x7259, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa22);
        EXPECT(gbc.pc(), 0x725b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 013A
        gbc.setState(0x1d12, 0x5d80, 0x9120, 0x89e0, 0xd30d, 0x19c4, 0x1, 0x0);
        gbc.writeMem(0x1d12, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5d80);
        EXPECT(gbc.pc(), 0x1d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 013B
        gbc.setState(0x21ac, 0xac2f, 0x4a60, 0xd1b0, 0xf4ad, 0x3b2e, 0x1, 0x0);
        gbc.writeMem(0x21ac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xac2f);
        EXPECT(gbc.pc(), 0x21ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 013C
        gbc.setState(0x389f, 0xce48, 0xc570, 0x152b, 0x1a9b, 0x67ed, 0x1, 0x0);
        gbc.writeMem(0x389f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0x38a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 013D
        gbc.setState(0xdedc, 0x21c3, 0x6240, 0x4cc6, 0xb295, 0x511, 0x0, 0x0);
        gbc.writeMem(0xdedc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x21c3);
        EXPECT(gbc.pc(), 0xdede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdedc), 0xcb);
        EXPECT(gbc.readMem(0xdedd), 0xfb);
        // CB FB 013E
        gbc.setState(0x613a, 0x3504, 0x63d0, 0xa71c, 0xcb13, 0xa4d4, 0x0, 0x0);
        gbc.writeMem(0x613a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3504);
        EXPECT(gbc.pc(), 0x613c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 013F
        gbc.setState(0x7d13, 0x291f, 0x4c00, 0xd8ad, 0xed92, 0x333d, 0x1, 0x1);
        gbc.writeMem(0x7d13, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x291f);
        EXPECT(gbc.pc(), 0x7d15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0140
        gbc.setState(0x5bb8, 0x4136, 0x5bf0, 0x3f5d, 0xfd50, 0xf0ac, 0x1, 0x0);
        gbc.writeMem(0x5bb8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4136);
        EXPECT(gbc.pc(), 0x5bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0141
        gbc.setState(0x286c, 0x155a, 0x51d0, 0x78f9, 0x641d, 0xa3c6, 0x1, 0x1);
        gbc.writeMem(0x286c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x155a);
        EXPECT(gbc.pc(), 0x286e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0142
        gbc.setState(0x6e86, 0x3eda, 0x23c0, 0x1e60, 0x59dd, 0x7fb5, 0x0, 0x1);
        gbc.writeMem(0x6e86, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x3eda);
        EXPECT(gbc.pc(), 0x6e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0143
        gbc.setState(0x5627, 0xb7d, 0x15a0, 0x1750, 0x4c68, 0xf21a, 0x0, 0x1);
        gbc.writeMem(0x5627, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb7d);
        EXPECT(gbc.pc(), 0x5629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0144
        gbc.setState(0xe878, 0x1b23, 0xbde0, 0xedab, 0x21fd, 0x231a, 0x1, 0x0);
        gbc.writeMem(0xe878, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1b23);
        EXPECT(gbc.pc(), 0xe87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe878), 0xcb);
        EXPECT(gbc.readMem(0xe879), 0xfb);
        // CB FB 0145
        gbc.setState(0x601d, 0xd222, 0x17e0, 0x731b, 0x955c, 0x1e8f, 0x0, 0x0);
        gbc.writeMem(0x601d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd222);
        EXPECT(gbc.pc(), 0x601f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0146
        gbc.setState(0x8a62, 0x803d, 0x6bc0, 0x8fb3, 0x78d9, 0xffda, 0x1, 0x0);
        gbc.writeMem(0x8a62, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x803d);
        EXPECT(gbc.pc(), 0x8a64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a62), 0xcb);
        EXPECT(gbc.readMem(0x8a63), 0xfb);
        // CB FB 0147
        gbc.setState(0x513e, 0xf700, 0x4210, 0xfe8c, 0x64bb, 0x60e8, 0x0, 0x0);
        gbc.writeMem(0x513e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf700);
        EXPECT(gbc.pc(), 0x5140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0148
        gbc.setState(0x18d1, 0x638a, 0xad00, 0x54cb, 0x899f, 0x904a, 0x1, 0x0);
        gbc.writeMem(0x18d1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x638a);
        EXPECT(gbc.pc(), 0x18d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 014A
        gbc.setState(0x4275, 0xf58a, 0x95d0, 0x9768, 0xbb34, 0x9d83, 0x0, 0x1);
        gbc.writeMem(0x4275, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf58a);
        EXPECT(gbc.pc(), 0x4277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 014B
        gbc.setState(0x2fee, 0x1958, 0x8d0, 0x96ff, 0xd408, 0x27e0, 0x0, 0x1);
        gbc.writeMem(0x2fee, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1958);
        EXPECT(gbc.pc(), 0x2ff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 014D
        gbc.setState(0xa5ec, 0xd7fc, 0xb240, 0x25db, 0xfaa3, 0xfc02, 0x1, 0x0);
        gbc.writeMem(0xa5ec, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd7fc);
        EXPECT(gbc.pc(), 0xa5ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ec), 0xcb);
        EXPECT(gbc.readMem(0xa5ed), 0xfb);
        // CB FB 014E
        gbc.setState(0x9e3c, 0xad93, 0x40a0, 0x767f, 0x29e8, 0xbf21, 0x1, 0x1);
        gbc.writeMem(0x9e3c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xad93);
        EXPECT(gbc.pc(), 0x9e3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e3c), 0xcb);
        EXPECT(gbc.readMem(0x9e3d), 0xfb);
        // CB FB 014F
        gbc.setState(0xd696, 0x52c7, 0x67b0, 0x743d, 0x76b0, 0x8553, 0x1, 0x0);
        gbc.writeMem(0xd696, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x52c7);
        EXPECT(gbc.pc(), 0xd698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd696), 0xcb);
        EXPECT(gbc.readMem(0xd697), 0xfb);
        // CB FB 0150
        gbc.setState(0xaa5f, 0xaf58, 0x2d10, 0xb45c, 0xb205, 0xffd3, 0x1, 0x1);
        gbc.writeMem(0xaa5f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaf58);
        EXPECT(gbc.pc(), 0xaa61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa5f), 0xcb);
        EXPECT(gbc.readMem(0xaa60), 0xfb);
        // CB FB 0152
        gbc.setState(0xa949, 0xf7ac, 0x5750, 0x1468, 0xb691, 0xdc9e, 0x0, 0x1);
        gbc.writeMem(0xa949, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf7ac);
        EXPECT(gbc.pc(), 0xa94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa949), 0xcb);
        EXPECT(gbc.readMem(0xa94a), 0xfb);
        // CB FB 0153
        gbc.setState(0xd47f, 0x5011, 0x2b10, 0x8e1, 0xfb79, 0xd8f2, 0x1, 0x1);
        gbc.writeMem(0xd47f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5011);
        EXPECT(gbc.pc(), 0xd481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47f), 0xcb);
        EXPECT(gbc.readMem(0xd480), 0xfb);
        // CB FB 0154
        gbc.setState(0x30d7, 0x712e, 0x5220, 0xf2d0, 0xcad3, 0xb06f, 0x0, 0x0);
        gbc.writeMem(0x30d7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x712e);
        EXPECT(gbc.pc(), 0x30d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0155
        gbc.setState(0xad8c, 0x7ef0, 0x6140, 0x922f, 0x5e16, 0xde81, 0x1, 0x1);
        gbc.writeMem(0xad8c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7ef0);
        EXPECT(gbc.pc(), 0xad8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad8c), 0xcb);
        EXPECT(gbc.readMem(0xad8d), 0xfb);
        // CB FB 0156
        gbc.setState(0x2fd7, 0xb2b7, 0x88d0, 0x13fc, 0x6871, 0xf659, 0x1, 0x0);
        gbc.writeMem(0x2fd7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb2b7);
        EXPECT(gbc.pc(), 0x2fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0157
        gbc.setState(0x1da4, 0x4046, 0xc330, 0xcf3, 0x9a78, 0x2eb8, 0x1, 0x1);
        gbc.writeMem(0x1da4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4046);
        EXPECT(gbc.pc(), 0x1da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0158
        gbc.setState(0x8884, 0x4ad0, 0x5e30, 0x7c5, 0x5a67, 0x44eb, 0x0, 0x0);
        gbc.writeMem(0x8884, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4ad0);
        EXPECT(gbc.pc(), 0x8886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8884), 0xcb);
        EXPECT(gbc.readMem(0x8885), 0xfb);
        // CB FB 0159
        gbc.setState(0x3217, 0x6691, 0x6800, 0xb65a, 0x7c13, 0xb6d8, 0x0, 0x0);
        gbc.writeMem(0x3217, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6691);
        EXPECT(gbc.pc(), 0x3219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 015A
        gbc.setState(0x21a7, 0x8abf, 0x36a0, 0x67a1, 0x3d1b, 0xaadf, 0x0, 0x0);
        gbc.writeMem(0x21a7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8abf);
        EXPECT(gbc.pc(), 0x21a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 015B
        gbc.setState(0xd66b, 0x8291, 0x7930, 0x51fc, 0xc14f, 0x51bc, 0x1, 0x1);
        gbc.writeMem(0xd66b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x8291);
        EXPECT(gbc.pc(), 0xd66d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd66b), 0xcb);
        EXPECT(gbc.readMem(0xd66c), 0xfb);
        // CB FB 015C
        gbc.setState(0x5b6e, 0xac9c, 0x2b40, 0x488, 0x711a, 0x4aa9, 0x1, 0x0);
        gbc.writeMem(0x5b6e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xac9c);
        EXPECT(gbc.pc(), 0x5b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 015D
        gbc.setState(0x77de, 0x390e, 0xe7c0, 0x7086, 0xc0c0, 0xac0b, 0x0, 0x0);
        gbc.writeMem(0x77de, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x390e);
        EXPECT(gbc.pc(), 0x77e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 015E
        gbc.setState(0x86a9, 0xf996, 0x5f00, 0xb48d, 0x443c, 0x5f42, 0x0, 0x0);
        gbc.writeMem(0x86a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf996);
        EXPECT(gbc.pc(), 0x86ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86a9), 0xcb);
        EXPECT(gbc.readMem(0x86aa), 0xfb);
        // CB FB 015F
        gbc.setState(0x9ddd, 0x9e51, 0xef90, 0x1556, 0xeddc, 0x592f, 0x1, 0x1);
        gbc.writeMem(0x9ddd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9e51);
        EXPECT(gbc.pc(), 0x9ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ddd), 0xcb);
        EXPECT(gbc.readMem(0x9dde), 0xfb);
        // CB FB 0161
        gbc.setState(0x529c, 0x430e, 0xffe0, 0x6dd2, 0x876f, 0x9caa, 0x1, 0x0);
        gbc.writeMem(0x529c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x430e);
        EXPECT(gbc.pc(), 0x529e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0162
        gbc.setState(0x63de, 0x751a, 0x6cb0, 0x1748, 0x9029, 0xb5b0, 0x1, 0x1);
        gbc.writeMem(0x63de, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x751a);
        EXPECT(gbc.pc(), 0x63e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0164
        gbc.setState(0x5f5b, 0x7f0d, 0xba40, 0x102c, 0xbbb4, 0x18d8, 0x1, 0x1);
        gbc.writeMem(0x5f5b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7f0d);
        EXPECT(gbc.pc(), 0x5f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0165
        gbc.setState(0xb50a, 0x22ec, 0x6e0, 0x4318, 0x6be2, 0xb8b5, 0x1, 0x1);
        gbc.writeMem(0xb50a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x22ec);
        EXPECT(gbc.pc(), 0xb50c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb50a), 0xcb);
        EXPECT(gbc.readMem(0xb50b), 0xfb);
        // CB FB 0166
        gbc.setState(0xa6af, 0xc136, 0x4a10, 0xa157, 0xb84a, 0xebb2, 0x1, 0x1);
        gbc.writeMem(0xa6af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc136);
        EXPECT(gbc.pc(), 0xa6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6af), 0xcb);
        EXPECT(gbc.readMem(0xa6b0), 0xfb);
        // CB FB 0167
        gbc.setState(0x7d21, 0x91e3, 0x2560, 0xecb1, 0x1365, 0x61b9, 0x0, 0x0);
        gbc.writeMem(0x7d21, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x91e3);
        EXPECT(gbc.pc(), 0x7d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0168
        gbc.setState(0x915f, 0xe3f0, 0x21a0, 0xa45e, 0x4f67, 0x4466, 0x0, 0x1);
        gbc.writeMem(0x915f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe3f0);
        EXPECT(gbc.pc(), 0x9161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915f), 0xcb);
        EXPECT(gbc.readMem(0x9160), 0xfb);
        // CB FB 0169
        gbc.setState(0xea78, 0x9a09, 0x6110, 0x4f0f, 0x67a8, 0x5d3, 0x1, 0x1);
        gbc.writeMem(0xea78, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9a09);
        EXPECT(gbc.pc(), 0xea7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea78), 0xcb);
        EXPECT(gbc.readMem(0xea79), 0xfb);
        // CB FB 016A
        gbc.setState(0x319, 0xa59d, 0x1010, 0xd81b, 0x2cc8, 0x4b91, 0x1, 0x0);
        gbc.writeMem(0x319, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa59d);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 016B
        gbc.setState(0x1319, 0x8332, 0x14d0, 0x437f, 0x46ee, 0xc409, 0x1, 0x0);
        gbc.writeMem(0x1319, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8332);
        EXPECT(gbc.pc(), 0x131b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 016C
        gbc.setState(0x9b75, 0x6808, 0x8e30, 0x76f1, 0xcec9, 0xf517, 0x1, 0x0);
        gbc.writeMem(0x9b75, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x6808);
        EXPECT(gbc.pc(), 0x9b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b75), 0xcb);
        EXPECT(gbc.readMem(0x9b76), 0xfb);
        // CB FB 016E
        gbc.setState(0xb497, 0xe07a, 0x58a0, 0x5e53, 0x3bc3, 0x120b, 0x0, 0x0);
        gbc.writeMem(0xb497, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe07a);
        EXPECT(gbc.pc(), 0xb499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb497), 0xcb);
        EXPECT(gbc.readMem(0xb498), 0xfb);
        // CB FB 016F
        gbc.setState(0x852a, 0xfba0, 0x9e10, 0x24d6, 0x2a5f, 0x8f19, 0x0, 0x1);
        gbc.writeMem(0x852a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfba0);
        EXPECT(gbc.pc(), 0x852c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852a), 0xcb);
        EXPECT(gbc.readMem(0x852b), 0xfb);
        // CB FB 0170
        gbc.setState(0x9a24, 0xae64, 0xe1a0, 0xd2bb, 0x2416, 0x4dd, 0x0, 0x0);
        gbc.writeMem(0x9a24, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xae64);
        EXPECT(gbc.pc(), 0x9a26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a24), 0xcb);
        EXPECT(gbc.readMem(0x9a25), 0xfb);
        // CB FB 0171
        gbc.setState(0x9534, 0x8980, 0x7b0, 0x3d6d, 0x7b38, 0xd70d, 0x0, 0x0);
        gbc.writeMem(0x9534, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8980);
        EXPECT(gbc.pc(), 0x9536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9534), 0xcb);
        EXPECT(gbc.readMem(0x9535), 0xfb);
        // CB FB 0172
        gbc.setState(0xc067, 0xfdff, 0x1e40, 0x434c, 0x855a, 0x3cc7, 0x1, 0x0);
        gbc.writeMem(0xc067, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfdff);
        EXPECT(gbc.pc(), 0xc069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc067), 0xcb);
        EXPECT(gbc.readMem(0xc068), 0xfb);
        // CB FB 0173
        gbc.setState(0xaaff, 0x5414, 0x2500, 0x40b3, 0x23cf, 0x91b9, 0x0, 0x1);
        gbc.writeMem(0xaaff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5414);
        EXPECT(gbc.pc(), 0xab01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaff), 0xcb);
        EXPECT(gbc.readMem(0xab00), 0xfb);
        // CB FB 0175
        gbc.setState(0xb297, 0x8063, 0xf380, 0x3712, 0xd1f6, 0x782c, 0x0, 0x0);
        gbc.writeMem(0xb297, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8063);
        EXPECT(gbc.pc(), 0xb299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb297), 0xcb);
        EXPECT(gbc.readMem(0xb298), 0xfb);
        // CB FB 0177
        gbc.setState(0x6f94, 0xb835, 0x6be0, 0x22e2, 0x349b, 0x8547, 0x0, 0x1);
        gbc.writeMem(0x6f94, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb835);
        EXPECT(gbc.pc(), 0x6f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0178
        gbc.setState(0x636b, 0x19f9, 0x95a0, 0x6a9d, 0xcf5d, 0x5d3b, 0x1, 0x1);
        gbc.writeMem(0x636b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x19f9);
        EXPECT(gbc.pc(), 0x636d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0179
        gbc.setState(0x3b7c, 0x780f, 0x8d20, 0x351d, 0x1624, 0x6b89, 0x0, 0x1);
        gbc.writeMem(0x3b7c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x780f);
        EXPECT(gbc.pc(), 0x3b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 017A
        gbc.setState(0x8b1d, 0xedfc, 0xae00, 0x736f, 0x8d7d, 0xd5ea, 0x1, 0x0);
        gbc.writeMem(0x8b1d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xedfc);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0xcb);
        EXPECT(gbc.readMem(0x8b1e), 0xfb);
        // CB FB 017B
        gbc.setState(0x2430, 0x2047, 0xb1e0, 0xc130, 0x9218, 0xa947, 0x0, 0x0);
        gbc.writeMem(0x2430, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2047);
        EXPECT(gbc.pc(), 0x2432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 017C
        gbc.setState(0x32ab, 0xe0bf, 0x45b0, 0x6b4f, 0x964b, 0x22a9, 0x0, 0x1);
        gbc.writeMem(0x32ab, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe0bf);
        EXPECT(gbc.pc(), 0x32ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 017D
        gbc.setState(0x8750, 0xe198, 0xb5a0, 0xe2f9, 0x18a1, 0xc2df, 0x0, 0x1);
        gbc.writeMem(0x8750, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe198);
        EXPECT(gbc.pc(), 0x8752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8750), 0xcb);
        EXPECT(gbc.readMem(0x8751), 0xfb);
        // CB FB 017E
        gbc.setState(0x5882, 0x5f03, 0xf040, 0xe508, 0x4ec9, 0xfa0e, 0x1, 0x0);
        gbc.writeMem(0x5882, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5f03);
        EXPECT(gbc.pc(), 0x5884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 017F
        gbc.setState(0x7825, 0x649d, 0x4400, 0xb3e6, 0x5097, 0x93ef, 0x1, 0x0);
        gbc.writeMem(0x7825, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x649d);
        EXPECT(gbc.pc(), 0x7827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0180
        gbc.setState(0x579, 0xdcba, 0x9330, 0x1127, 0xc7, 0x261b, 0x1, 0x1);
        gbc.writeMem(0x579, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xdcba);
        EXPECT(gbc.pc(), 0x57b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0181
        gbc.setState(0xdc06, 0xd04e, 0xc40, 0x2aba, 0x5aa4, 0xcf87, 0x1, 0x0);
        gbc.writeMem(0xdc06, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xd04e);
        EXPECT(gbc.pc(), 0xdc08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc06), 0xcb);
        EXPECT(gbc.readMem(0xdc07), 0xfb);
        // CB FB 0182
        gbc.setState(0x9892, 0xdd63, 0x63f0, 0x99d4, 0xd592, 0x3d51, 0x1, 0x1);
        gbc.writeMem(0x9892, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdd63);
        EXPECT(gbc.pc(), 0x9894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9892), 0xcb);
        EXPECT(gbc.readMem(0x9893), 0xfb);
        // CB FB 0183
        gbc.setState(0x217e, 0xbd34, 0x3f60, 0x300e, 0x3e1c, 0x2cfb, 0x1, 0x1);
        gbc.writeMem(0x217e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xbd34);
        EXPECT(gbc.pc(), 0x2180);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0184
        gbc.setState(0x8095, 0xc01a, 0x1340, 0x95c0, 0x449e, 0x3304, 0x1, 0x1);
        gbc.writeMem(0x8095, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc01a);
        EXPECT(gbc.pc(), 0x8097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8095), 0xcb);
        EXPECT(gbc.readMem(0x8096), 0xfb);
        // CB FB 0185
        gbc.setState(0x3898, 0xa53e, 0x7150, 0x5c40, 0xcc67, 0x5c0a, 0x0, 0x1);
        gbc.writeMem(0x3898, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa53e);
        EXPECT(gbc.pc(), 0x389a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0186
        gbc.setState(0xac76, 0xba33, 0x9c90, 0xf1b8, 0xf43d, 0x7fe7, 0x0, 0x1);
        gbc.writeMem(0xac76, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xba33);
        EXPECT(gbc.pc(), 0xac78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac76), 0xcb);
        EXPECT(gbc.readMem(0xac77), 0xfb);
        // CB FB 0187
        gbc.setState(0x66fd, 0xc1a1, 0x3040, 0xf007, 0xccd5, 0x5ef4, 0x0, 0x0);
        gbc.writeMem(0x66fd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc1a1);
        EXPECT(gbc.pc(), 0x66ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0188
        gbc.setState(0xb975, 0x120a, 0x9f80, 0x9183, 0x1e56, 0x9333, 0x1, 0x0);
        gbc.writeMem(0xb975, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x120a);
        EXPECT(gbc.pc(), 0xb977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb975), 0xcb);
        EXPECT(gbc.readMem(0xb976), 0xfb);
        // CB FB 0189
        gbc.setState(0x636a, 0x113a, 0x9ea0, 0xe885, 0x2605, 0x5a4c, 0x1, 0x0);
        gbc.writeMem(0x636a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x113a);
        EXPECT(gbc.pc(), 0x636c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 018A
        gbc.setState(0xb41b, 0x7e61, 0xed70, 0x2952, 0x23ca, 0xa86c, 0x1, 0x1);
        gbc.writeMem(0xb41b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x7e61);
        EXPECT(gbc.pc(), 0xb41d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb41b), 0xcb);
        EXPECT(gbc.readMem(0xb41c), 0xfb);
        // CB FB 018B
        gbc.setState(0x6c77, 0xae1e, 0x5500, 0x10e6, 0x6317, 0x2f0f, 0x1, 0x1);
        gbc.writeMem(0x6c77, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xae1e);
        EXPECT(gbc.pc(), 0x6c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 018C
        gbc.setState(0x4f03, 0x1025, 0x4300, 0xd1e2, 0x256, 0x106b, 0x0, 0x1);
        gbc.writeMem(0x4f03, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1025);
        EXPECT(gbc.pc(), 0x4f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 018D
        gbc.setState(0x6dd6, 0x29d9, 0x25e0, 0x7930, 0xd8af, 0x751, 0x1, 0x0);
        gbc.writeMem(0x6dd6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x29d9);
        EXPECT(gbc.pc(), 0x6dd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 018E
        gbc.setState(0x783c, 0x1ff6, 0x3160, 0xc726, 0x67df, 0x12ed, 0x0, 0x1);
        gbc.writeMem(0x783c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1ff6);
        EXPECT(gbc.pc(), 0x783e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 018F
        gbc.setState(0x690e, 0x12e5, 0xba50, 0x5160, 0xaa42, 0xea13, 0x0, 0x0);
        gbc.writeMem(0x690e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x12e5);
        EXPECT(gbc.pc(), 0x6910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0190
        gbc.setState(0x9bb4, 0xd0b8, 0xf510, 0x299b, 0xf8da, 0xf0e4, 0x0, 0x0);
        gbc.writeMem(0x9bb4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd0b8);
        EXPECT(gbc.pc(), 0x9bb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb4), 0xcb);
        EXPECT(gbc.readMem(0x9bb5), 0xfb);
        // CB FB 0191
        gbc.setState(0x297b, 0x6a3a, 0xd970, 0x1798, 0xeb59, 0xd410, 0x1, 0x0);
        gbc.writeMem(0x297b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6a3a);
        EXPECT(gbc.pc(), 0x297d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0192
        gbc.setState(0xc6a0, 0x9964, 0xf590, 0x4af8, 0xc2, 0xcfc7, 0x0, 0x0);
        gbc.writeMem(0xc6a0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9964);
        EXPECT(gbc.pc(), 0xc6a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a0), 0xcb);
        EXPECT(gbc.readMem(0xc6a1), 0xfb);
        // CB FB 0193
        gbc.setState(0xa535, 0x4d44, 0x3de0, 0x2662, 0xe577, 0xef68, 0x1, 0x1);
        gbc.writeMem(0xa535, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4d44);
        EXPECT(gbc.pc(), 0xa537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa535), 0xcb);
        EXPECT(gbc.readMem(0xa536), 0xfb);
        // CB FB 0194
        gbc.setState(0xd7e5, 0x336c, 0x8990, 0xdf74, 0xce59, 0xb92a, 0x0, 0x1);
        gbc.writeMem(0xd7e5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x336c);
        EXPECT(gbc.pc(), 0xd7e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7e5), 0xcb);
        EXPECT(gbc.readMem(0xd7e6), 0xfb);
        // CB FB 0195
        gbc.setState(0x19a7, 0xf267, 0xc570, 0x72e, 0x1ecc, 0x81b5, 0x1, 0x0);
        gbc.writeMem(0x19a7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf267);
        EXPECT(gbc.pc(), 0x19a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0196
        gbc.setState(0x697f, 0xb9, 0x3d30, 0x4cf0, 0x8404, 0x366f, 0x0, 0x1);
        gbc.writeMem(0x697f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb9);
        EXPECT(gbc.pc(), 0x6981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0197
        gbc.setState(0x2cce, 0xf801, 0xa90, 0xdd90, 0xe84, 0x60d8, 0x1, 0x1);
        gbc.writeMem(0x2cce, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf801);
        EXPECT(gbc.pc(), 0x2cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0198
        gbc.setState(0x9bda, 0x5ef5, 0xe9b0, 0x33e4, 0x6167, 0xb42d, 0x1, 0x0);
        gbc.writeMem(0x9bda, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5ef5);
        EXPECT(gbc.pc(), 0x9bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bda), 0xcb);
        EXPECT(gbc.readMem(0x9bdb), 0xfb);
        // CB FB 0199
        gbc.setState(0x5a03, 0xcc0c, 0x1f70, 0x31fb, 0x7f56, 0x9ebe, 0x1, 0x0);
        gbc.writeMem(0x5a03, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xcc0c);
        EXPECT(gbc.pc(), 0x5a05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 019A
        gbc.setState(0x2958, 0x4f6a, 0x2af0, 0xb775, 0x4923, 0x601, 0x1, 0x1);
        gbc.writeMem(0x2958, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4f6a);
        EXPECT(gbc.pc(), 0x295a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 019B
        gbc.setState(0xb2df, 0x89a0, 0xc60, 0x5cd6, 0x306c, 0x1bb, 0x1, 0x1);
        gbc.writeMem(0xb2df, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x89a0);
        EXPECT(gbc.pc(), 0xb2e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2df), 0xcb);
        EXPECT(gbc.readMem(0xb2e0), 0xfb);
        // CB FB 019C
        gbc.setState(0x75bf, 0x98dc, 0xcd60, 0x8744, 0x8dd7, 0xaa4a, 0x1, 0x0);
        gbc.writeMem(0x75bf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x98dc);
        EXPECT(gbc.pc(), 0x75c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 019D
        gbc.setState(0x9ef9, 0x4636, 0xb230, 0x37c6, 0x39b3, 0x5df0, 0x1, 0x0);
        gbc.writeMem(0x9ef9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4636);
        EXPECT(gbc.pc(), 0x9efb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef9), 0xcb);
        EXPECT(gbc.readMem(0x9efa), 0xfb);
        // CB FB 019E
        gbc.setState(0x1e9d, 0xfd4a, 0x11f0, 0x2c4a, 0x992b, 0xdbb2, 0x1, 0x1);
        gbc.writeMem(0x1e9d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfd4a);
        EXPECT(gbc.pc(), 0x1e9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01A0
        gbc.setState(0x43a2, 0xcaa0, 0xbfd0, 0xe4bc, 0xbfe2, 0x5d13, 0x0, 0x1);
        gbc.writeMem(0x43a2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xcaa0);
        EXPECT(gbc.pc(), 0x43a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01A1
        gbc.setState(0xdf6, 0x4134, 0x44a0, 0xc842, 0x30cb, 0xa6eb, 0x0, 0x0);
        gbc.writeMem(0xdf6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4134);
        EXPECT(gbc.pc(), 0xdf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01A3
        gbc.setState(0xbcd3, 0x2853, 0x4160, 0xc449, 0xbb6, 0x27bf, 0x1, 0x1);
        gbc.writeMem(0xbcd3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x2853);
        EXPECT(gbc.pc(), 0xbcd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd3), 0xcb);
        EXPECT(gbc.readMem(0xbcd4), 0xfb);
        // CB FB 01A4
        gbc.setState(0x9622, 0xbd33, 0x3cf0, 0x1f4e, 0x8e0, 0x5eb9, 0x1, 0x1);
        gbc.writeMem(0x9622, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbd33);
        EXPECT(gbc.pc(), 0x9624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9622), 0xcb);
        EXPECT(gbc.readMem(0x9623), 0xfb);
        // CB FB 01A5
        gbc.setState(0x82c8, 0xadce, 0x3230, 0xd4a2, 0x5e9f, 0xec6d, 0x0, 0x1);
        gbc.writeMem(0x82c8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xadce);
        EXPECT(gbc.pc(), 0x82ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82c8), 0xcb);
        EXPECT(gbc.readMem(0x82c9), 0xfb);
        // CB FB 01A6
        gbc.setState(0x7f88, 0xdd47, 0x740, 0xd877, 0x6a10, 0xac5c, 0x1, 0x0);
        gbc.writeMem(0x7f88, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xdd47);
        EXPECT(gbc.pc(), 0x7f8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01A7
        gbc.setState(0xba58, 0xbbfa, 0x8710, 0xf002, 0x7624, 0xc639, 0x0, 0x1);
        gbc.writeMem(0xba58, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbbfa);
        EXPECT(gbc.pc(), 0xba5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba58), 0xcb);
        EXPECT(gbc.readMem(0xba59), 0xfb);
        // CB FB 01A8
        gbc.setState(0x41a7, 0xe5c6, 0x5fb0, 0xf8e7, 0x661a, 0x7b33, 0x1, 0x1);
        gbc.writeMem(0x41a7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe5c6);
        EXPECT(gbc.pc(), 0x41a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01A9
        gbc.setState(0xe5b6, 0x91e, 0xb850, 0x3dc1, 0x6615, 0x12d0, 0x0, 0x1);
        gbc.writeMem(0xe5b6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x91e);
        EXPECT(gbc.pc(), 0xe5b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b6), 0xcb);
        EXPECT(gbc.readMem(0xe5b7), 0xfb);
        // CB FB 01AA
        gbc.setState(0x2aa6, 0x846b, 0xbb50, 0x8d09, 0xa386, 0xe32d, 0x1, 0x0);
        gbc.writeMem(0x2aa6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x846b);
        EXPECT(gbc.pc(), 0x2aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01AB
        gbc.setState(0x858a, 0x85dd, 0xec00, 0xdfb3, 0x83f2, 0xaee0, 0x1, 0x1);
        gbc.writeMem(0x858a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x85dd);
        EXPECT(gbc.pc(), 0x858c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858a), 0xcb);
        EXPECT(gbc.readMem(0x858b), 0xfb);
        // CB FB 01AD
        gbc.setState(0x79d, 0xfdd, 0x4740, 0x9cb0, 0xa158, 0x1f03, 0x0, 0x0);
        gbc.writeMem(0x79d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfdd);
        EXPECT(gbc.pc(), 0x79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01AE
        gbc.setState(0x6717, 0xfaac, 0x8450, 0xd02e, 0xf8b, 0x427d, 0x0, 0x0);
        gbc.writeMem(0x6717, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfaac);
        EXPECT(gbc.pc(), 0x6719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01AF
        gbc.setState(0x8006, 0xb3e, 0xc490, 0x8314, 0xe48b, 0xff48, 0x1, 0x1);
        gbc.writeMem(0x8006, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb3e);
        EXPECT(gbc.pc(), 0x8008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8006), 0xcb);
        EXPECT(gbc.readMem(0x8007), 0xfb);
        // CB FB 01B0
        gbc.setState(0x50d4, 0xe64, 0xf7f0, 0x8957, 0xc213, 0x569d, 0x0, 0x0);
        gbc.writeMem(0x50d4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe64);
        EXPECT(gbc.pc(), 0x50d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01B1
        gbc.setState(0x8066, 0x53e2, 0x96e0, 0xb224, 0xf2a, 0x5d31, 0x0, 0x1);
        gbc.writeMem(0x8066, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x53e2);
        EXPECT(gbc.pc(), 0x8068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8066), 0xcb);
        EXPECT(gbc.readMem(0x8067), 0xfb);
        // CB FB 01B2
        gbc.setState(0xe564, 0x6c64, 0xc8e0, 0x7f7d, 0xf791, 0x3b66, 0x0, 0x0);
        gbc.writeMem(0xe564, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6c64);
        EXPECT(gbc.pc(), 0xe566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe564), 0xcb);
        EXPECT(gbc.readMem(0xe565), 0xfb);
        // CB FB 01B3
        gbc.setState(0x8a62, 0x6549, 0xd150, 0xbf15, 0x662, 0xeff5, 0x0, 0x0);
        gbc.writeMem(0x8a62, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6549);
        EXPECT(gbc.pc(), 0x8a64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a62), 0xcb);
        EXPECT(gbc.readMem(0x8a63), 0xfb);
        // CB FB 01B4
        gbc.setState(0xc8a9, 0x1cb2, 0xfc70, 0x4936, 0xf4d5, 0x73b7, 0x1, 0x1);
        gbc.writeMem(0xc8a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1cb2);
        EXPECT(gbc.pc(), 0xc8ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a9), 0xcb);
        EXPECT(gbc.readMem(0xc8aa), 0xfb);
        // CB FB 01B5
        gbc.setState(0xe3a0, 0xeca, 0xa760, 0xb83a, 0xe0d5, 0x2beb, 0x0, 0x0);
        gbc.writeMem(0xe3a0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeca);
        EXPECT(gbc.pc(), 0xe3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a0), 0xcb);
        EXPECT(gbc.readMem(0xe3a1), 0xfb);
        // CB FB 01B6
        gbc.setState(0x718, 0x2dc0, 0x4a10, 0x78d2, 0x54d8, 0x4321, 0x1, 0x0);
        gbc.writeMem(0x718, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2dc0);
        EXPECT(gbc.pc(), 0x71a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01B7
        gbc.setState(0x3bd1, 0x1f40, 0xe8a0, 0x5d48, 0x9be5, 0xa475, 0x1, 0x0);
        gbc.writeMem(0x3bd1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1f40);
        EXPECT(gbc.pc(), 0x3bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01B8
        gbc.setState(0x3f76, 0xff98, 0x4ce0, 0x294a, 0xb0cf, 0x2b7c, 0x1, 0x0);
        gbc.writeMem(0x3f76, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xff98);
        EXPECT(gbc.pc(), 0x3f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01B9
        gbc.setState(0x2212, 0xc5fa, 0xbdb0, 0x39c6, 0x7c23, 0x759b, 0x0, 0x1);
        gbc.writeMem(0x2212, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc5fa);
        EXPECT(gbc.pc(), 0x2214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01BA
        gbc.setState(0x9da5, 0xaf99, 0xa930, 0x7eb0, 0xb449, 0xb7e0, 0x1, 0x1);
        gbc.writeMem(0x9da5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xaf99);
        EXPECT(gbc.pc(), 0x9da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9da5), 0xcb);
        EXPECT(gbc.readMem(0x9da6), 0xfb);
        // CB FB 01BB
        gbc.setState(0x1d0f, 0x2572, 0x5260, 0xbc5c, 0xc2e8, 0x9eed, 0x1, 0x0);
        gbc.writeMem(0x1d0f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2572);
        EXPECT(gbc.pc(), 0x1d11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01BC
        gbc.setState(0x71c9, 0x6076, 0x4090, 0x2dac, 0xd761, 0x2273, 0x0, 0x0);
        gbc.writeMem(0x71c9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6076);
        EXPECT(gbc.pc(), 0x71cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01BD
        gbc.setState(0x85f5, 0xe645, 0x2af0, 0x29a9, 0x596b, 0xa6c8, 0x1, 0x1);
        gbc.writeMem(0x85f5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe645);
        EXPECT(gbc.pc(), 0x85f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85f5), 0xcb);
        EXPECT(gbc.readMem(0x85f6), 0xfb);
        // CB FB 01BE
        gbc.setState(0xe047, 0x1d41, 0x4c40, 0x49d6, 0x9462, 0x543e, 0x0, 0x1);
        gbc.writeMem(0xe047, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1d41);
        EXPECT(gbc.pc(), 0xe049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe047), 0xcb);
        EXPECT(gbc.readMem(0xe048), 0xfb);
        // CB FB 01BF
        gbc.setState(0x9a4, 0xd471, 0x4890, 0xa07e, 0x81a7, 0x7c28, 0x0, 0x0);
        gbc.writeMem(0x9a4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd471);
        EXPECT(gbc.pc(), 0x9a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01C0
        gbc.setState(0x7be, 0x2d98, 0x1340, 0xb27b, 0x5b0c, 0x94ec, 0x0, 0x0);
        gbc.writeMem(0x7be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2d98);
        EXPECT(gbc.pc(), 0x7c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01C1
        gbc.setState(0x500e, 0xb461, 0xe330, 0xec4, 0x2070, 0x4b88, 0x0, 0x0);
        gbc.writeMem(0x500e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb461);
        EXPECT(gbc.pc(), 0x5010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01C2
        gbc.setState(0x9400, 0xa868, 0x8900, 0xf79, 0xd459, 0x99da, 0x0, 0x1);
        gbc.writeMem(0x9400, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa868);
        EXPECT(gbc.pc(), 0x9402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9400), 0xcb);
        EXPECT(gbc.readMem(0x9401), 0xfb);
        // CB FB 01C3
        gbc.setState(0xe7e7, 0x3d98, 0x2600, 0x6adb, 0x84c0, 0xa03, 0x0, 0x0);
        gbc.writeMem(0xe7e7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3d98);
        EXPECT(gbc.pc(), 0xe7e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7e7), 0xcb);
        EXPECT(gbc.readMem(0xe7e8), 0xfb);
        // CB FB 01C4
        gbc.setState(0xaa14, 0x7299, 0xe9c0, 0x5a08, 0x62e0, 0xf506, 0x1, 0x0);
        gbc.writeMem(0xaa14, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7299);
        EXPECT(gbc.pc(), 0xaa16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa14), 0xcb);
        EXPECT(gbc.readMem(0xaa15), 0xfb);
        // CB FB 01C5
        gbc.setState(0x2c74, 0x10e3, 0x9750, 0x161d, 0xd31b, 0x36ca, 0x0, 0x0);
        gbc.writeMem(0x2c74, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x10e3);
        EXPECT(gbc.pc(), 0x2c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01C6
        gbc.setState(0xa904, 0x1823, 0xb8d0, 0x323b, 0xc22b, 0xcd6b, 0x0, 0x1);
        gbc.writeMem(0xa904, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1823);
        EXPECT(gbc.pc(), 0xa906);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa904), 0xcb);
        EXPECT(gbc.readMem(0xa905), 0xfb);
        // CB FB 01C7
        gbc.setState(0xcd6b, 0x28dc, 0x5980, 0xccc, 0x2d31, 0x7709, 0x1, 0x1);
        gbc.writeMem(0xcd6b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x28dc);
        EXPECT(gbc.pc(), 0xcd6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd6b), 0xcb);
        EXPECT(gbc.readMem(0xcd6c), 0xfb);
        // CB FB 01C8
        gbc.setState(0xb79a, 0x3649, 0x4c60, 0x280f, 0xdde1, 0xaf53, 0x0, 0x1);
        gbc.writeMem(0xb79a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3649);
        EXPECT(gbc.pc(), 0xb79c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79a), 0xcb);
        EXPECT(gbc.readMem(0xb79b), 0xfb);
        // CB FB 01C9
        gbc.setState(0xb714, 0xeba, 0x3820, 0xf845, 0xf57b, 0x2807, 0x0, 0x0);
        gbc.writeMem(0xb714, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xeba);
        EXPECT(gbc.pc(), 0xb716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb714), 0xcb);
        EXPECT(gbc.readMem(0xb715), 0xfb);
        // CB FB 01CA
        gbc.setState(0x5bb0, 0xafd6, 0xd0, 0xdb18, 0xce38, 0x2485, 0x0, 0x1);
        gbc.writeMem(0x5bb0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xafd6);
        EXPECT(gbc.pc(), 0x5bb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01CB
        gbc.setState(0xd7a, 0xdc0a, 0x1e10, 0x6372, 0xe190, 0xaf6a, 0x1, 0x0);
        gbc.writeMem(0xd7a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdc0a);
        EXPECT(gbc.pc(), 0xd7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01CC
        gbc.setState(0x80af, 0x8593, 0x32c0, 0xa852, 0x3c32, 0x39cc, 0x1, 0x0);
        gbc.writeMem(0x80af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8593);
        EXPECT(gbc.pc(), 0x80b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80af), 0xcb);
        EXPECT(gbc.readMem(0x80b0), 0xfb);
        // CB FB 01CD
        gbc.setState(0x26c3, 0xb86e, 0xfba0, 0xae93, 0xafb5, 0xb5e6, 0x1, 0x0);
        gbc.writeMem(0x26c3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb86e);
        EXPECT(gbc.pc(), 0x26c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01CE
        gbc.setState(0x8923, 0xc2c2, 0x3220, 0xcdc3, 0x77fd, 0x379f, 0x0, 0x0);
        gbc.writeMem(0x8923, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc2c2);
        EXPECT(gbc.pc(), 0x8925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8923), 0xcb);
        EXPECT(gbc.readMem(0x8924), 0xfb);
        // CB FB 01CF
        gbc.setState(0x90f5, 0xaea5, 0x1be0, 0x1956, 0xc475, 0x9496, 0x0, 0x0);
        gbc.writeMem(0x90f5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xaea5);
        EXPECT(gbc.pc(), 0x90f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f5), 0xcb);
        EXPECT(gbc.readMem(0x90f6), 0xfb);
        // CB FB 01D0
        gbc.setState(0x901f, 0xc925, 0xf1f0, 0x27b, 0xc9b1, 0xb88, 0x1, 0x0);
        gbc.writeMem(0x901f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc925);
        EXPECT(gbc.pc(), 0x9021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901f), 0xcb);
        EXPECT(gbc.readMem(0x9020), 0xfb);
        // CB FB 01D1
        gbc.setState(0xc571, 0x5841, 0xbd30, 0x83d4, 0x7acb, 0x7421, 0x1, 0x1);
        gbc.writeMem(0xc571, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5841);
        EXPECT(gbc.pc(), 0xc573);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc571), 0xcb);
        EXPECT(gbc.readMem(0xc572), 0xfb);
        // CB FB 01D2
        gbc.setState(0x5ad5, 0x53c6, 0xa200, 0xca5b, 0x7786, 0xd4c7, 0x1, 0x1);
        gbc.writeMem(0x5ad5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x53c6);
        EXPECT(gbc.pc(), 0x5ad7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01D3
        gbc.setState(0x74d2, 0xa745, 0x1170, 0x3856, 0xb119, 0x4b2f, 0x1, 0x0);
        gbc.writeMem(0x74d2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa745);
        EXPECT(gbc.pc(), 0x74d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01D5
        gbc.setState(0x6cf, 0x85b3, 0x7d0, 0x48a7, 0xee11, 0xdc4b, 0x0, 0x1);
        gbc.writeMem(0x6cf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x85b3);
        EXPECT(gbc.pc(), 0x6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01D6
        gbc.setState(0x677a, 0xb12a, 0x8d40, 0xf3d1, 0xcae, 0xdf3f, 0x1, 0x1);
        gbc.writeMem(0x677a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb12a);
        EXPECT(gbc.pc(), 0x677c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01D7
        gbc.setState(0x7fb6, 0xa9a4, 0xcd80, 0x9799, 0xbeaf, 0x4ddb, 0x0, 0x0);
        gbc.writeMem(0x7fb6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa9a4);
        EXPECT(gbc.pc(), 0x7fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01D8
        gbc.setState(0x9a61, 0x529a, 0xa1d0, 0x24d2, 0x9d36, 0xe97a, 0x1, 0x1);
        gbc.writeMem(0x9a61, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x529a);
        EXPECT(gbc.pc(), 0x9a63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a61), 0xcb);
        EXPECT(gbc.readMem(0x9a62), 0xfb);
        // CB FB 01D9
        gbc.setState(0x5920, 0xc7ed, 0x9c70, 0xa774, 0x368b, 0x8832, 0x1, 0x1);
        gbc.writeMem(0x5920, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc7ed);
        EXPECT(gbc.pc(), 0x5922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01DB
        gbc.setState(0x613b, 0x37f4, 0x4cb0, 0x26c7, 0xd5b, 0x312d, 0x1, 0x0);
        gbc.writeMem(0x613b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x37f4);
        EXPECT(gbc.pc(), 0x613d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01DC
        gbc.setState(0xc871, 0xdeb5, 0xd160, 0xbe04, 0xeb91, 0xcd02, 0x0, 0x1);
        gbc.writeMem(0xc871, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdeb5);
        EXPECT(gbc.pc(), 0xc873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc871), 0xcb);
        EXPECT(gbc.readMem(0xc872), 0xfb);
        // CB FB 01DD
        gbc.setState(0x548e, 0x1798, 0xed80, 0x49bc, 0xbaf7, 0x5e53, 0x0, 0x1);
        gbc.writeMem(0x548e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1798);
        EXPECT(gbc.pc(), 0x5490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01DE
        gbc.setState(0xa0cc, 0xfb39, 0x1420, 0x46ef, 0x3f1c, 0x6e7d, 0x0, 0x1);
        gbc.writeMem(0xa0cc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfb39);
        EXPECT(gbc.pc(), 0xa0ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0cc), 0xcb);
        EXPECT(gbc.readMem(0xa0cd), 0xfb);
        // CB FB 01DF
        gbc.setState(0x524e, 0x2e12, 0xe440, 0x2ed6, 0x8f21, 0x951e, 0x1, 0x1);
        gbc.writeMem(0x524e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2e12);
        EXPECT(gbc.pc(), 0x5250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01E0
        gbc.setState(0xad94, 0x6789, 0xb610, 0x9f4, 0x8ea3, 0x50ea, 0x1, 0x0);
        gbc.writeMem(0xad94, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6789);
        EXPECT(gbc.pc(), 0xad96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad94), 0xcb);
        EXPECT(gbc.readMem(0xad95), 0xfb);
        // CB FB 01E1
        gbc.setState(0x677a, 0x519, 0x37a0, 0x4f34, 0xe031, 0x2aa0, 0x1, 0x1);
        gbc.writeMem(0x677a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x519);
        EXPECT(gbc.pc(), 0x677c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01E2
        gbc.setState(0x29b0, 0x6db9, 0x760, 0x36f3, 0xdb16, 0xbd9f, 0x1, 0x1);
        gbc.writeMem(0x29b0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6db9);
        EXPECT(gbc.pc(), 0x29b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01E3
        gbc.setState(0x7ea2, 0x5e3a, 0x7cf0, 0x6273, 0xdb76, 0xc5ed, 0x0, 0x0);
        gbc.writeMem(0x7ea2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5e3a);
        EXPECT(gbc.pc(), 0x7ea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01E4
        gbc.setState(0x9a0f, 0x15a0, 0x17d0, 0xe944, 0x51a5, 0x56f6, 0x0, 0x0);
        gbc.writeMem(0x9a0f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x15a0);
        EXPECT(gbc.pc(), 0x9a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a0f), 0xcb);
        EXPECT(gbc.readMem(0x9a10), 0xfb);
        // CB FB 01E6
        gbc.setState(0x783d, 0x4cc2, 0x2420, 0xed1f, 0xa465, 0xfd92, 0x0, 0x0);
        gbc.writeMem(0x783d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4cc2);
        EXPECT(gbc.pc(), 0x783f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01E7
        gbc.setState(0x2769, 0x9353, 0xa850, 0x2049, 0x88d8, 0x584b, 0x0, 0x0);
        gbc.writeMem(0x2769, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9353);
        EXPECT(gbc.pc(), 0x276b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01E8
        gbc.setState(0x5d91, 0x6e3c, 0xf020, 0x319e, 0xd116, 0xd1c8, 0x1, 0x0);
        gbc.writeMem(0x5d91, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6e3c);
        EXPECT(gbc.pc(), 0x5d93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01E9
        gbc.setState(0x952d, 0x7f7d, 0x23a0, 0x6da7, 0x7ed0, 0xb2ab, 0x0, 0x1);
        gbc.writeMem(0x952d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7f7d);
        EXPECT(gbc.pc(), 0x952f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x952d), 0xcb);
        EXPECT(gbc.readMem(0x952e), 0xfb);
        // CB FB 01EA
        gbc.setState(0xdf8f, 0x2c4b, 0xddf0, 0xc6f7, 0x4dc4, 0x52c2, 0x1, 0x1);
        gbc.writeMem(0xdf8f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2c4b);
        EXPECT(gbc.pc(), 0xdf91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8f), 0xcb);
        EXPECT(gbc.readMem(0xdf90), 0xfb);
        // CB FB 01EB
        gbc.setState(0x4bdf, 0xc31b, 0x2060, 0xb3f6, 0xa348, 0xfbae, 0x1, 0x1);
        gbc.writeMem(0x4bdf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc31b);
        EXPECT(gbc.pc(), 0x4be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01EC
        gbc.setState(0x17b4, 0x6ac2, 0xde40, 0x3c2a, 0xc01d, 0xea6, 0x0, 0x1);
        gbc.writeMem(0x17b4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6ac2);
        EXPECT(gbc.pc(), 0x17b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01ED
        gbc.setState(0xe8d9, 0x9eb3, 0xe7e0, 0x9fb0, 0x4495, 0xce16, 0x0, 0x1);
        gbc.writeMem(0xe8d9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9eb3);
        EXPECT(gbc.pc(), 0xe8db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d9), 0xcb);
        EXPECT(gbc.readMem(0xe8da), 0xfb);
        // CB FB 01EE
        gbc.setState(0x852f, 0xd8ef, 0x2d70, 0xfd41, 0xc994, 0x1002, 0x1, 0x1);
        gbc.writeMem(0x852f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd8ef);
        EXPECT(gbc.pc(), 0x8531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852f), 0xcb);
        EXPECT(gbc.readMem(0x8530), 0xfb);
        // CB FB 01EF
        gbc.setState(0xa418, 0xa202, 0x2f90, 0x42c8, 0x23f7, 0xd57, 0x0, 0x0);
        gbc.writeMem(0xa418, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa202);
        EXPECT(gbc.pc(), 0xa41a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa418), 0xcb);
        EXPECT(gbc.readMem(0xa419), 0xfb);
        // CB FB 01F1
        gbc.setState(0xd5ba, 0x113d, 0x3430, 0x9dab, 0xd88c, 0x644d, 0x0, 0x1);
        gbc.writeMem(0xd5ba, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x113d);
        EXPECT(gbc.pc(), 0xd5bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ba), 0xcb);
        EXPECT(gbc.readMem(0xd5bb), 0xfb);
        // CB FB 01F2
        gbc.setState(0x68af, 0x9988, 0x29a0, 0x3a8a, 0xf12c, 0x1d6e, 0x0, 0x1);
        gbc.writeMem(0x68af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9988);
        EXPECT(gbc.pc(), 0x68b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01F3
        gbc.setState(0xca07, 0x674d, 0x8d10, 0x1e96, 0xa5a9, 0x6524, 0x0, 0x1);
        gbc.writeMem(0xca07, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x674d);
        EXPECT(gbc.pc(), 0xca09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca07), 0xcb);
        EXPECT(gbc.readMem(0xca08), 0xfb);
        // CB FB 01F4
        gbc.setState(0x9e35, 0x1fb0, 0xbb50, 0x61b5, 0x17f0, 0x19b7, 0x0, 0x1);
        gbc.writeMem(0x9e35, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x1fb0);
        EXPECT(gbc.pc(), 0x9e37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e35), 0xcb);
        EXPECT(gbc.readMem(0x9e36), 0xfb);
        // CB FB 01F5
        gbc.setState(0xd529, 0xfbb6, 0xe390, 0x7ec5, 0x50c5, 0x72b4, 0x1, 0x1);
        gbc.writeMem(0xd529, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfbb6);
        EXPECT(gbc.pc(), 0xd52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd529), 0xcb);
        EXPECT(gbc.readMem(0xd52a), 0xfb);
        // CB FB 01F6
        gbc.setState(0xcecf, 0xba13, 0xd30, 0xddc2, 0xc12c, 0x1fcc, 0x0, 0x1);
        gbc.writeMem(0xcecf, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xba13);
        EXPECT(gbc.pc(), 0xced1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcecf), 0xcb);
        EXPECT(gbc.readMem(0xced0), 0xfb);
        // CB FB 01F7
        gbc.setState(0xcd02, 0xd2dd, 0x2480, 0x7c75, 0x7038, 0xd761, 0x0, 0x1);
        gbc.writeMem(0xcd02, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd2dd);
        EXPECT(gbc.pc(), 0xcd04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd02), 0xcb);
        EXPECT(gbc.readMem(0xcd03), 0xfb);
        // CB FB 01F8
        gbc.setState(0x564e, 0xec61, 0x8420, 0xb612, 0xc054, 0x5361, 0x0, 0x0);
        gbc.writeMem(0x564e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xec61);
        EXPECT(gbc.pc(), 0x5650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 01F9
        gbc.setState(0x17c6, 0x27e7, 0x7430, 0xe45c, 0xf88a, 0xd303, 0x1, 0x1);
        gbc.writeMem(0x17c6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x27e7);
        EXPECT(gbc.pc(), 0x17c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01FA
        gbc.setState(0xbf8b, 0x4769, 0x7300, 0x8bb5, 0xddb7, 0x9551, 0x1, 0x0);
        gbc.writeMem(0xbf8b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4769);
        EXPECT(gbc.pc(), 0xbf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8b), 0xcb);
        EXPECT(gbc.readMem(0xbf8c), 0xfb);
        // CB FB 01FB
        gbc.setState(0xa0ed, 0x1145, 0xf80, 0xf962, 0xffc6, 0x9003, 0x1, 0x0);
        gbc.writeMem(0xa0ed, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x1145);
        EXPECT(gbc.pc(), 0xa0ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ed), 0xcb);
        EXPECT(gbc.readMem(0xa0ee), 0xfb);
        // CB FB 01FC
        gbc.setState(0x5c00, 0x2b4f, 0x7490, 0xe3a0, 0x34bd, 0x3189, 0x1, 0x1);
        gbc.writeMem(0x5c00, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2b4f);
        EXPECT(gbc.pc(), 0x5c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01FD
        gbc.setState(0x8c1e, 0x459b, 0xb4e0, 0x891f, 0x82c2, 0xc08d, 0x0, 0x0);
        gbc.writeMem(0x8c1e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x459b);
        EXPECT(gbc.pc(), 0x8c20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c1e), 0xcb);
        EXPECT(gbc.readMem(0x8c1f), 0xfb);
        // CB FB 01FE
        gbc.setState(0x2639, 0x3983, 0x91f0, 0x8bdb, 0x25cc, 0xdfb8, 0x0, 0x0);
        gbc.writeMem(0x2639, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3983);
        EXPECT(gbc.pc(), 0x263b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 01FF
        gbc.setState(0x8afc, 0xbfe3, 0x8360, 0x3156, 0xa71b, 0x90e9, 0x1, 0x0);
        gbc.writeMem(0x8afc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbfe3);
        EXPECT(gbc.pc(), 0x8afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8afc), 0xcb);
        EXPECT(gbc.readMem(0x8afd), 0xfb);
        // CB FB 0200
        gbc.setState(0x131f, 0xabc4, 0xfca0, 0xbf2b, 0x8179, 0x66f0, 0x1, 0x0);
        gbc.writeMem(0x131f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xabc4);
        EXPECT(gbc.pc(), 0x1321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0201
        gbc.setState(0xdb99, 0xbd0f, 0x4a10, 0x1ab7, 0x7cf1, 0x3cd3, 0x1, 0x0);
        gbc.writeMem(0xdb99, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbd0f);
        EXPECT(gbc.pc(), 0xdb9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb99), 0xcb);
        EXPECT(gbc.readMem(0xdb9a), 0xfb);
        // CB FB 0202
        gbc.setState(0x2981, 0x47ae, 0x1a90, 0x3c9e, 0x1619, 0x9b6a, 0x0, 0x1);
        gbc.writeMem(0x2981, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x47ae);
        EXPECT(gbc.pc(), 0x2983);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0203
        gbc.setState(0xcf12, 0x3b92, 0xac40, 0x5fd0, 0x1ed8, 0x1443, 0x0, 0x0);
        gbc.writeMem(0xcf12, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3b92);
        EXPECT(gbc.pc(), 0xcf14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf12), 0xcb);
        EXPECT(gbc.readMem(0xcf13), 0xfb);
        // CB FB 0204
        gbc.setState(0xbcdb, 0x78bf, 0x2b10, 0x7a93, 0x74f3, 0xe87a, 0x1, 0x0);
        gbc.writeMem(0xbcdb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x78bf);
        EXPECT(gbc.pc(), 0xbcdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcdb), 0xcb);
        EXPECT(gbc.readMem(0xbcdc), 0xfb);
        // CB FB 0205
        gbc.setState(0x330b, 0x653b, 0x5570, 0x4ea0, 0x29b0, 0xce28, 0x1, 0x1);
        gbc.writeMem(0x330b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x653b);
        EXPECT(gbc.pc(), 0x330d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0206
        gbc.setState(0x7c26, 0xf2ae, 0xa380, 0x8c93, 0x5df, 0x2809, 0x1, 0x1);
        gbc.writeMem(0x7c26, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf2ae);
        EXPECT(gbc.pc(), 0x7c28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0207
        gbc.setState(0x79f7, 0xce93, 0x5820, 0xc6e1, 0xf103, 0x83ec, 0x0, 0x0);
        gbc.writeMem(0x79f7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xce93);
        EXPECT(gbc.pc(), 0x79f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0208
        gbc.setState(0x1a6a, 0x68c7, 0xdcc0, 0x684b, 0xd0ed, 0xad32, 0x0, 0x0);
        gbc.writeMem(0x1a6a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x68c7);
        EXPECT(gbc.pc(), 0x1a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0209
        gbc.setState(0x1629, 0x4040, 0x91d0, 0x336b, 0xc988, 0xfd47, 0x1, 0x0);
        gbc.writeMem(0x1629, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4040);
        EXPECT(gbc.pc(), 0x162b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 020A
        gbc.setState(0x7f6c, 0x53b4, 0xc6d0, 0x77ff, 0x17e4, 0x4426, 0x0, 0x1);
        gbc.writeMem(0x7f6c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x53b4);
        EXPECT(gbc.pc(), 0x7f6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 020B
        gbc.setState(0x2f1d, 0xef09, 0x3500, 0xaa8c, 0xdf7f, 0x8df5, 0x1, 0x1);
        gbc.writeMem(0x2f1d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xef09);
        EXPECT(gbc.pc(), 0x2f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 020C
        gbc.setState(0x4656, 0x79a9, 0x6110, 0x14d2, 0x35bc, 0x7f9, 0x1, 0x1);
        gbc.writeMem(0x4656, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x79a9);
        EXPECT(gbc.pc(), 0x4658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 020D
        gbc.setState(0x7c0b, 0x7ce3, 0xa7b0, 0xde87, 0xdbec, 0xd174, 0x0, 0x0);
        gbc.writeMem(0x7c0b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7ce3);
        EXPECT(gbc.pc(), 0x7c0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 020E
        gbc.setState(0x704c, 0x5217, 0x7930, 0xcce1, 0x8e82, 0x7fe1, 0x0, 0x0);
        gbc.writeMem(0x704c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5217);
        EXPECT(gbc.pc(), 0x704e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 020F
        gbc.setState(0xe228, 0x274a, 0x8720, 0x164d, 0xb4ef, 0x2e3f, 0x0, 0x1);
        gbc.writeMem(0xe228, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x274a);
        EXPECT(gbc.pc(), 0xe22a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe228), 0xcb);
        EXPECT(gbc.readMem(0xe229), 0xfb);
        // CB FB 0210
        gbc.setState(0x6325, 0x7ae2, 0x5be0, 0xb8b8, 0x570f, 0xffc2, 0x1, 0x1);
        gbc.writeMem(0x6325, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7ae2);
        EXPECT(gbc.pc(), 0x6327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0211
        gbc.setState(0x714a, 0xe6b0, 0x2960, 0x934e, 0xe1b7, 0xf69d, 0x0, 0x0);
        gbc.writeMem(0x714a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe6b0);
        EXPECT(gbc.pc(), 0x714c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0212
        gbc.setState(0x2dfe, 0x9ef0, 0x9f00, 0xeb8e, 0x561f, 0xd047, 0x0, 0x1);
        gbc.writeMem(0x2dfe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9ef0);
        EXPECT(gbc.pc(), 0x2e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0213
        gbc.setState(0x1495, 0xaef1, 0xfb30, 0xc863, 0x71aa, 0x3834, 0x0, 0x0);
        gbc.writeMem(0x1495, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xaef1);
        EXPECT(gbc.pc(), 0x1497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0214
        gbc.setState(0x17ce, 0x4897, 0xcf10, 0x7381, 0xe3c9, 0xe476, 0x0, 0x1);
        gbc.writeMem(0x17ce, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4897);
        EXPECT(gbc.pc(), 0x17d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0215
        gbc.setState(0xcbb, 0x111e, 0xa0e0, 0xe92c, 0xc456, 0xb5c6, 0x1, 0x0);
        gbc.writeMem(0xcbb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x111e);
        EXPECT(gbc.pc(), 0xcbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0217
        gbc.setState(0xacc5, 0x126f, 0xd0a0, 0xf598, 0x3c47, 0x8adc, 0x1, 0x0);
        gbc.writeMem(0xacc5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x126f);
        EXPECT(gbc.pc(), 0xacc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc5), 0xcb);
        EXPECT(gbc.readMem(0xacc6), 0xfb);
        // CB FB 0218
        gbc.setState(0xda13, 0x4955, 0xde30, 0xc31d, 0x61f0, 0xc98f, 0x0, 0x0);
        gbc.writeMem(0xda13, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4955);
        EXPECT(gbc.pc(), 0xda15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda13), 0xcb);
        EXPECT(gbc.readMem(0xda14), 0xfb);
        // CB FB 0219
        gbc.setState(0xd618, 0xe53f, 0xeba0, 0x8990, 0x9039, 0x52fd, 0x0, 0x0);
        gbc.writeMem(0xd618, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe53f);
        EXPECT(gbc.pc(), 0xd61a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd618), 0xcb);
        EXPECT(gbc.readMem(0xd619), 0xfb);
        // CB FB 021A
        gbc.setState(0xd099, 0xb305, 0xeeb0, 0x1c2c, 0x9010, 0x2abb, 0x1, 0x1);
        gbc.writeMem(0xd099, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb305);
        EXPECT(gbc.pc(), 0xd09b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd099), 0xcb);
        EXPECT(gbc.readMem(0xd09a), 0xfb);
        // CB FB 021B
        gbc.setState(0xf30, 0x6675, 0xc840, 0x926, 0x633b, 0xc389, 0x1, 0x0);
        gbc.writeMem(0xf30, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6675);
        EXPECT(gbc.pc(), 0xf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 021C
        gbc.setState(0xa928, 0xceb3, 0x25c0, 0x9202, 0x1468, 0x9377, 0x1, 0x0);
        gbc.writeMem(0xa928, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xceb3);
        EXPECT(gbc.pc(), 0xa92a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa928), 0xcb);
        EXPECT(gbc.readMem(0xa929), 0xfb);
        // CB FB 021E
        gbc.setState(0xa0, 0xf376, 0xcca0, 0x94d4, 0x6202, 0x269f, 0x0, 0x0);
        gbc.writeMem(0xa0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xf376);
        EXPECT(gbc.pc(), 0xa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 021F
        gbc.setState(0x9605, 0x49cc, 0x31a0, 0x6a3a, 0xb0e1, 0xc3ff, 0x0, 0x1);
        gbc.writeMem(0x9605, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x49cc);
        EXPECT(gbc.pc(), 0x9607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9605), 0xcb);
        EXPECT(gbc.readMem(0x9606), 0xfb);
        // CB FB 0220
        gbc.setState(0x779c, 0x921, 0x6d30, 0x4113, 0x7e86, 0x2f48, 0x0, 0x0);
        gbc.writeMem(0x779c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x921);
        EXPECT(gbc.pc(), 0x779e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0221
        gbc.setState(0x9cfa, 0x92be, 0xfe40, 0x6b78, 0x1096, 0x8a32, 0x0, 0x0);
        gbc.writeMem(0x9cfa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x92be);
        EXPECT(gbc.pc(), 0x9cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfa), 0xcb);
        EXPECT(gbc.readMem(0x9cfb), 0xfb);
        // CB FB 0222
        gbc.setState(0x49fb, 0xe434, 0xef80, 0x2c3d, 0xb98a, 0x4080, 0x1, 0x1);
        gbc.writeMem(0x49fb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe434);
        EXPECT(gbc.pc(), 0x49fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0223
        gbc.setState(0xe607, 0x1182, 0x5600, 0xa0e6, 0x3fe6, 0xc385, 0x0, 0x0);
        gbc.writeMem(0xe607, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1182);
        EXPECT(gbc.pc(), 0xe609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe607), 0xcb);
        EXPECT(gbc.readMem(0xe608), 0xfb);
        // CB FB 0224
        gbc.setState(0x80a3, 0xa41a, 0xe3e0, 0x6b9d, 0xca81, 0x58f0, 0x0, 0x0);
        gbc.writeMem(0x80a3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa41a);
        EXPECT(gbc.pc(), 0x80a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a3), 0xcb);
        EXPECT(gbc.readMem(0x80a4), 0xfb);
        // CB FB 0225
        gbc.setState(0xb59f, 0xc0ff, 0x6390, 0xbf4a, 0x24eb, 0x7252, 0x1, 0x0);
        gbc.writeMem(0xb59f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc0ff);
        EXPECT(gbc.pc(), 0xb5a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59f), 0xcb);
        EXPECT(gbc.readMem(0xb5a0), 0xfb);
        // CB FB 0226
        gbc.setState(0xe98e, 0xcedb, 0x45c0, 0x22bf, 0xf800, 0x743e, 0x0, 0x1);
        gbc.writeMem(0xe98e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xcedb);
        EXPECT(gbc.pc(), 0xe990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98e), 0xcb);
        EXPECT(gbc.readMem(0xe98f), 0xfb);
        // CB FB 0227
        gbc.setState(0x77b2, 0xc7d0, 0xddb0, 0xdc7c, 0xd7a5, 0x7da, 0x1, 0x1);
        gbc.writeMem(0x77b2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xc7d0);
        EXPECT(gbc.pc(), 0x77b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0229
        gbc.setState(0x42d8, 0x4bf1, 0x430, 0x3c8, 0x64c3, 0x7f18, 0x0, 0x1);
        gbc.writeMem(0x42d8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4bf1);
        EXPECT(gbc.pc(), 0x42da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 022B
        gbc.setState(0xd204, 0x5165, 0x9260, 0xe0b5, 0x3587, 0x4b6c, 0x0, 0x1);
        gbc.writeMem(0xd204, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5165);
        EXPECT(gbc.pc(), 0xd206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd204), 0xcb);
        EXPECT(gbc.readMem(0xd205), 0xfb);
        // CB FB 022D
        gbc.setState(0xaab, 0xed72, 0xf990, 0xe239, 0x5e08, 0x8e0, 0x1, 0x0);
        gbc.writeMem(0xaab, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xed72);
        EXPECT(gbc.pc(), 0xaad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 022E
        gbc.setState(0x2019, 0x2759, 0xb2e0, 0x97d5, 0xfc09, 0x2d8a, 0x1, 0x0);
        gbc.writeMem(0x2019, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2759);
        EXPECT(gbc.pc(), 0x201b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0230
        gbc.setState(0xd318, 0xae8c, 0xadc0, 0x7614, 0x1007, 0xd6a4, 0x1, 0x1);
        gbc.writeMem(0xd318, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xae8c);
        EXPECT(gbc.pc(), 0xd31a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd318), 0xcb);
        EXPECT(gbc.readMem(0xd319), 0xfb);
        // CB FB 0232
        gbc.setState(0xb666, 0x63ad, 0x2440, 0xc857, 0xda00, 0xe572, 0x0, 0x1);
        gbc.writeMem(0xb666, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x63ad);
        EXPECT(gbc.pc(), 0xb668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb666), 0xcb);
        EXPECT(gbc.readMem(0xb667), 0xfb);
        // CB FB 0233
        gbc.setState(0x8eec, 0x1979, 0xc970, 0xffae, 0x113c, 0x71e2, 0x1, 0x0);
        gbc.writeMem(0x8eec, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1979);
        EXPECT(gbc.pc(), 0x8eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eec), 0xcb);
        EXPECT(gbc.readMem(0x8eed), 0xfb);
        // CB FB 0234
        gbc.setState(0x5137, 0x23db, 0x4520, 0xb820, 0x6b82, 0xf70f, 0x1, 0x0);
        gbc.writeMem(0x5137, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x23db);
        EXPECT(gbc.pc(), 0x5139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0235
        gbc.setState(0x16d1, 0x9449, 0x6b20, 0xfb0, 0x28c8, 0xd671, 0x0, 0x0);
        gbc.writeMem(0x16d1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9449);
        EXPECT(gbc.pc(), 0x16d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0236
        gbc.setState(0x3b0a, 0xc81d, 0xf130, 0x9e5a, 0x847b, 0x293e, 0x1, 0x0);
        gbc.writeMem(0x3b0a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc81d);
        EXPECT(gbc.pc(), 0x3b0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0237
        gbc.setState(0x1b2d, 0xa230, 0xbab0, 0x35a9, 0x59af, 0xc48, 0x0, 0x1);
        gbc.writeMem(0x1b2d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa230);
        EXPECT(gbc.pc(), 0x1b2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0238
        gbc.setState(0x8cac, 0xa8f5, 0xed20, 0xdeb5, 0x70cd, 0x79b7, 0x0, 0x1);
        gbc.writeMem(0x8cac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa8f5);
        EXPECT(gbc.pc(), 0x8cae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cac), 0xcb);
        EXPECT(gbc.readMem(0x8cad), 0xfb);
        // CB FB 0239
        gbc.setState(0x965c, 0x2d30, 0xa130, 0x259e, 0x429c, 0x9b48, 0x0, 0x1);
        gbc.writeMem(0x965c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2d30);
        EXPECT(gbc.pc(), 0x965e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965c), 0xcb);
        EXPECT(gbc.readMem(0x965d), 0xfb);
        // CB FB 023A
        gbc.setState(0xae46, 0xfa60, 0x6660, 0xf94b, 0xf1a1, 0x423a, 0x0, 0x0);
        gbc.writeMem(0xae46, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xfa60);
        EXPECT(gbc.pc(), 0xae48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae46), 0xcb);
        EXPECT(gbc.readMem(0xae47), 0xfb);
        // CB FB 023B
        gbc.setState(0xaa56, 0xeb88, 0x8f40, 0x357, 0xddc8, 0xe194, 0x0, 0x1);
        gbc.writeMem(0xaa56, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xeb88);
        EXPECT(gbc.pc(), 0xaa58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa56), 0xcb);
        EXPECT(gbc.readMem(0xaa57), 0xfb);
        // CB FB 023C
        gbc.setState(0x1f8d, 0xe2ff, 0x12e0, 0x9c44, 0xaebe, 0x2448, 0x0, 0x0);
        gbc.writeMem(0x1f8d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe2ff);
        EXPECT(gbc.pc(), 0x1f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 023E
        gbc.setState(0x4cee, 0xffb9, 0x5490, 0x69d, 0xdbfa, 0x4678, 0x0, 0x1);
        gbc.writeMem(0x4cee, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xffb9);
        EXPECT(gbc.pc(), 0x4cf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 023F
        gbc.setState(0xce06, 0x6eb, 0x1470, 0xfc06, 0xf34c, 0xbb7c, 0x1, 0x1);
        gbc.writeMem(0xce06, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6eb);
        EXPECT(gbc.pc(), 0xce08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce06), 0xcb);
        EXPECT(gbc.readMem(0xce07), 0xfb);
        // CB FB 0240
        gbc.setState(0x6672, 0x616, 0x8d70, 0x512c, 0x21a6, 0x80c4, 0x0, 0x0);
        gbc.writeMem(0x6672, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x616);
        EXPECT(gbc.pc(), 0x6674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0241
        gbc.setState(0x8ec5, 0x3bfb, 0x6a60, 0xbf6f, 0x7ced, 0x645e, 0x0, 0x0);
        gbc.writeMem(0x8ec5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3bfb);
        EXPECT(gbc.pc(), 0x8ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec5), 0xcb);
        EXPECT(gbc.readMem(0x8ec6), 0xfb);
        // CB FB 0242
        gbc.setState(0xc1a8, 0xec66, 0x6770, 0x8c52, 0xd245, 0x8fc3, 0x1, 0x1);
        gbc.writeMem(0xc1a8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xec66);
        EXPECT(gbc.pc(), 0xc1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1a8), 0xcb);
        EXPECT(gbc.readMem(0xc1a9), 0xfb);
        // CB FB 0243
        gbc.setState(0xd4f6, 0xdc5a, 0xbbb0, 0xc493, 0xf965, 0x6dbf, 0x0, 0x1);
        gbc.writeMem(0xd4f6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdc5a);
        EXPECT(gbc.pc(), 0xd4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4f6), 0xcb);
        EXPECT(gbc.readMem(0xd4f7), 0xfb);
        // CB FB 0244
        gbc.setState(0xe07, 0x2cfc, 0xa840, 0xd565, 0x3d0b, 0x6ef8, 0x0, 0x0);
        gbc.writeMem(0xe07, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2cfc);
        EXPECT(gbc.pc(), 0xe09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0245
        gbc.setState(0x3765, 0x2ae8, 0x3f20, 0xf43f, 0xccad, 0xcfd, 0x0, 0x0);
        gbc.writeMem(0x3765, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2ae8);
        EXPECT(gbc.pc(), 0x3767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0246
        gbc.setState(0x9d66, 0x74c0, 0x44c0, 0x38d8, 0xc0f8, 0x9ed3, 0x1, 0x0);
        gbc.writeMem(0x9d66, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x74c0);
        EXPECT(gbc.pc(), 0x9d68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d66), 0xcb);
        EXPECT(gbc.readMem(0x9d67), 0xfb);
        // CB FB 0247
        gbc.setState(0xb9c7, 0x4eed, 0x8b60, 0x44ae, 0xca11, 0x691d, 0x1, 0x1);
        gbc.writeMem(0xb9c7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4eed);
        EXPECT(gbc.pc(), 0xb9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c7), 0xcb);
        EXPECT(gbc.readMem(0xb9c8), 0xfb);
        // CB FB 0248
        gbc.setState(0x8528, 0x5dd1, 0x5b80, 0xb973, 0x6428, 0x6aaa, 0x1, 0x0);
        gbc.writeMem(0x8528, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x5dd1);
        EXPECT(gbc.pc(), 0x852a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8528), 0xcb);
        EXPECT(gbc.readMem(0x8529), 0xfb);
        // CB FB 0249
        gbc.setState(0x8b3c, 0x1462, 0x3b50, 0x4fb1, 0x99d9, 0x9e74, 0x0, 0x0);
        gbc.writeMem(0x8b3c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1462);
        EXPECT(gbc.pc(), 0x8b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3c), 0xcb);
        EXPECT(gbc.readMem(0x8b3d), 0xfb);
        // CB FB 024A
        gbc.setState(0x1c47, 0xb741, 0xaca0, 0x20f0, 0x6747, 0x322a, 0x0, 0x1);
        gbc.writeMem(0x1c47, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb741);
        EXPECT(gbc.pc(), 0x1c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 024B
        gbc.setState(0x6d3e, 0x7c00, 0x1180, 0x9d38, 0x4221, 0xd4a8, 0x0, 0x1);
        gbc.writeMem(0x6d3e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7c00);
        EXPECT(gbc.pc(), 0x6d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 024C
        gbc.setState(0x1127, 0x858b, 0x9b0, 0xcfd3, 0x3f5f, 0xd1d3, 0x0, 0x0);
        gbc.writeMem(0x1127, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x858b);
        EXPECT(gbc.pc(), 0x1129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 024D
        gbc.setState(0x13af, 0x2e08, 0xb460, 0x6da8, 0x381a, 0x2a65, 0x0, 0x0);
        gbc.writeMem(0x13af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2e08);
        EXPECT(gbc.pc(), 0x13b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 024E
        gbc.setState(0x4f10, 0x8862, 0x8de0, 0x412f, 0x1f8e, 0xfb88, 0x1, 0x1);
        gbc.writeMem(0x4f10, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8862);
        EXPECT(gbc.pc(), 0x4f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 024F
        gbc.setState(0xe5b, 0xbfa5, 0x1130, 0x2be2, 0xb21, 0x1003, 0x0, 0x0);
        gbc.writeMem(0xe5b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbfa5);
        EXPECT(gbc.pc(), 0xe5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0250
        gbc.setState(0x26d7, 0xc4b2, 0xbe10, 0x24f7, 0xded8, 0x4a0a, 0x0, 0x0);
        gbc.writeMem(0x26d7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc4b2);
        EXPECT(gbc.pc(), 0x26d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0251
        gbc.setState(0x13a9, 0x5291, 0x7ea0, 0x380b, 0xdf3e, 0x90c5, 0x1, 0x0);
        gbc.writeMem(0x13a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5291);
        EXPECT(gbc.pc(), 0x13ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0253
        gbc.setState(0xdba7, 0x7546, 0x6b90, 0xb2d0, 0xbb22, 0x2054, 0x1, 0x0);
        gbc.writeMem(0xdba7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7546);
        EXPECT(gbc.pc(), 0xdba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdba7), 0xcb);
        EXPECT(gbc.readMem(0xdba8), 0xfb);
        // CB FB 0254
        gbc.setState(0x8cd1, 0x66b9, 0xac30, 0x1d46, 0xb2d5, 0x36c8, 0x1, 0x0);
        gbc.writeMem(0x8cd1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x66b9);
        EXPECT(gbc.pc(), 0x8cd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd1), 0xcb);
        EXPECT(gbc.readMem(0x8cd2), 0xfb);
        // CB FB 0255
        gbc.setState(0x5e28, 0xf85c, 0x7930, 0xd245, 0x7431, 0x938d, 0x0, 0x0);
        gbc.writeMem(0x5e28, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf85c);
        EXPECT(gbc.pc(), 0x5e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0256
        gbc.setState(0x648a, 0x8714, 0x9090, 0x1ab8, 0x9d40, 0x7df7, 0x1, 0x1);
        gbc.writeMem(0x648a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8714);
        EXPECT(gbc.pc(), 0x648c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0257
        gbc.setState(0x9885, 0x8e7e, 0x5220, 0xfd30, 0xdec7, 0x61a, 0x0, 0x1);
        gbc.writeMem(0x9885, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8e7e);
        EXPECT(gbc.pc(), 0x9887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9885), 0xcb);
        EXPECT(gbc.readMem(0x9886), 0xfb);
        // CB FB 0258
        gbc.setState(0xad4c, 0x5a13, 0xf040, 0x89fe, 0x75bc, 0x2fe9, 0x0, 0x1);
        gbc.writeMem(0xad4c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5a13);
        EXPECT(gbc.pc(), 0xad4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad4c), 0xcb);
        EXPECT(gbc.readMem(0xad4d), 0xfb);
        // CB FB 025A
        gbc.setState(0xaeb7, 0x8006, 0xb870, 0x716c, 0x681c, 0x9c, 0x0, 0x0);
        gbc.writeMem(0xaeb7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8006);
        EXPECT(gbc.pc(), 0xaeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb7), 0xcb);
        EXPECT(gbc.readMem(0xaeb8), 0xfb);
        // CB FB 025B
        gbc.setState(0x9e4d, 0xe287, 0xb280, 0x63f, 0x9954, 0x7799, 0x0, 0x0);
        gbc.writeMem(0x9e4d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe287);
        EXPECT(gbc.pc(), 0x9e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4d), 0xcb);
        EXPECT(gbc.readMem(0x9e4e), 0xfb);
        // CB FB 025C
        gbc.setState(0x602e, 0x33ba, 0x7ab0, 0x5a9, 0xa923, 0xfb4a, 0x1, 0x1);
        gbc.writeMem(0x602e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x33ba);
        EXPECT(gbc.pc(), 0x6030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 025D
        gbc.setState(0x42cd, 0x2292, 0x5ad0, 0xb06, 0x82ee, 0x3598, 0x0, 0x1);
        gbc.writeMem(0x42cd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2292);
        EXPECT(gbc.pc(), 0x42cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 025E
        gbc.setState(0x8f47, 0x2564, 0x4780, 0xa534, 0x5586, 0xd4ef, 0x1, 0x1);
        gbc.writeMem(0x8f47, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2564);
        EXPECT(gbc.pc(), 0x8f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f47), 0xcb);
        EXPECT(gbc.readMem(0x8f48), 0xfb);
        // CB FB 025F
        gbc.setState(0x94a7, 0x8cc, 0x33d0, 0x4b6c, 0x7817, 0x6c8, 0x0, 0x1);
        gbc.writeMem(0x94a7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8cc);
        EXPECT(gbc.pc(), 0x94a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a7), 0xcb);
        EXPECT(gbc.readMem(0x94a8), 0xfb);
        // CB FB 0260
        gbc.setState(0x8a46, 0x498a, 0xb430, 0x789a, 0xce64, 0x5bd, 0x0, 0x0);
        gbc.writeMem(0x8a46, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x498a);
        EXPECT(gbc.pc(), 0x8a48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a46), 0xcb);
        EXPECT(gbc.readMem(0x8a47), 0xfb);
        // CB FB 0261
        gbc.setState(0x6ec5, 0x314d, 0x3db0, 0x3b14, 0xc5, 0x4934, 0x1, 0x1);
        gbc.writeMem(0x6ec5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x314d);
        EXPECT(gbc.pc(), 0x6ec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0262
        gbc.setState(0xdc6f, 0x9686, 0x5900, 0xf2da, 0x228c, 0x1d1d, 0x0, 0x1);
        gbc.writeMem(0xdc6f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9686);
        EXPECT(gbc.pc(), 0xdc71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6f), 0xcb);
        EXPECT(gbc.readMem(0xdc70), 0xfb);
        // CB FB 0263
        gbc.setState(0xccc8, 0x9422, 0x3210, 0xad08, 0xb49, 0xfdcc, 0x0, 0x0);
        gbc.writeMem(0xccc8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9422);
        EXPECT(gbc.pc(), 0xccca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc8), 0xcb);
        EXPECT(gbc.readMem(0xccc9), 0xfb);
        // CB FB 0264
        gbc.setState(0x9e87, 0x11db, 0x8ed0, 0x2a43, 0x5fd2, 0x10cb, 0x1, 0x0);
        gbc.writeMem(0x9e87, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x11db);
        EXPECT(gbc.pc(), 0x9e89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e87), 0xcb);
        EXPECT(gbc.readMem(0x9e88), 0xfb);
        // CB FB 0265
        gbc.setState(0xea64, 0xf6b1, 0xb510, 0xb65a, 0xd400, 0x2e7c, 0x0, 0x0);
        gbc.writeMem(0xea64, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0xea66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea64), 0xcb);
        EXPECT(gbc.readMem(0xea65), 0xfb);
        // CB FB 0266
        gbc.setState(0xbd70, 0xf131, 0xc7d0, 0x9df5, 0x77ba, 0x26fe, 0x1, 0x0);
        gbc.writeMem(0xbd70, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf131);
        EXPECT(gbc.pc(), 0xbd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd70), 0xcb);
        EXPECT(gbc.readMem(0xbd71), 0xfb);
        // CB FB 0267
        gbc.setState(0x9987, 0x7848, 0x6790, 0x9287, 0x8e20, 0xe125, 0x0, 0x1);
        gbc.writeMem(0x9987, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7848);
        EXPECT(gbc.pc(), 0x9989);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9987), 0xcb);
        EXPECT(gbc.readMem(0x9988), 0xfb);
        // CB FB 0268
        gbc.setState(0x7dd4, 0x3fd3, 0x3a70, 0x6a23, 0xcd9a, 0x5ab9, 0x0, 0x0);
        gbc.writeMem(0x7dd4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3fd3);
        EXPECT(gbc.pc(), 0x7dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0269
        gbc.setState(0x5d48, 0x5085, 0xcae0, 0xfcdf, 0x7b28, 0x7478, 0x1, 0x1);
        gbc.writeMem(0x5d48, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5085);
        EXPECT(gbc.pc(), 0x5d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 026A
        gbc.setState(0x6667, 0xfa53, 0x3200, 0x19d5, 0x9f37, 0xd99e, 0x1, 0x1);
        gbc.writeMem(0x6667, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xfa53);
        EXPECT(gbc.pc(), 0x6669);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 026B
        gbc.setState(0x2486, 0xee9e, 0x44e0, 0x269b, 0xf8e3, 0x2927, 0x1, 0x1);
        gbc.writeMem(0x2486, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xee9e);
        EXPECT(gbc.pc(), 0x2488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 026C
        gbc.setState(0x5ac9, 0xad91, 0xbba0, 0xaee0, 0x1cd8, 0xa404, 0x0, 0x1);
        gbc.writeMem(0x5ac9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xad91);
        EXPECT(gbc.pc(), 0x5acb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 026D
        gbc.setState(0xe7b4, 0xf73d, 0xf1d0, 0xad6d, 0x1dcf, 0x2b59, 0x1, 0x0);
        gbc.writeMem(0xe7b4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf73d);
        EXPECT(gbc.pc(), 0xe7b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7b4), 0xcb);
        EXPECT(gbc.readMem(0xe7b5), 0xfb);
        // CB FB 026E
        gbc.setState(0xdca7, 0x15bd, 0xb2a0, 0xf399, 0x2f2a, 0x3d56, 0x0, 0x1);
        gbc.writeMem(0xdca7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x15bd);
        EXPECT(gbc.pc(), 0xdca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca7), 0xcb);
        EXPECT(gbc.readMem(0xdca8), 0xfb);
        // CB FB 026F
        gbc.setState(0x46be, 0xab23, 0xae80, 0x4fc9, 0x15e9, 0xaba3, 0x0, 0x0);
        gbc.writeMem(0x46be, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xab23);
        EXPECT(gbc.pc(), 0x46c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0270
        gbc.setState(0x19e6, 0x4342, 0xf0f0, 0x38e1, 0x13c7, 0x5b6a, 0x0, 0x0);
        gbc.writeMem(0x19e6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4342);
        EXPECT(gbc.pc(), 0x19e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0271
        gbc.setState(0x37bb, 0x9db5, 0x6a60, 0xbb55, 0x848d, 0x2438, 0x1, 0x0);
        gbc.writeMem(0x37bb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9db5);
        EXPECT(gbc.pc(), 0x37bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0272
        gbc.setState(0x5b89, 0x8395, 0x8dc0, 0x6ff8, 0x9161, 0xbb04, 0x1, 0x1);
        gbc.writeMem(0x5b89, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8395);
        EXPECT(gbc.pc(), 0x5b8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0273
        gbc.setState(0x4919, 0x2e69, 0x3330, 0x4ae5, 0x3963, 0x7ec6, 0x1, 0x0);
        gbc.writeMem(0x4919, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2e69);
        EXPECT(gbc.pc(), 0x491b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0275
        gbc.setState(0x60e7, 0x68d6, 0xee30, 0xcd7e, 0x98cf, 0x8b85, 0x1, 0x0);
        gbc.writeMem(0x60e7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x68d6);
        EXPECT(gbc.pc(), 0x60e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0276
        gbc.setState(0x1124, 0xe574, 0x51b0, 0xdb14, 0x7f5, 0x46e2, 0x1, 0x0);
        gbc.writeMem(0x1124, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xe574);
        EXPECT(gbc.pc(), 0x1126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0277
        gbc.setState(0xaeae, 0xa414, 0x5770, 0xe9c0, 0x91ab, 0xb406, 0x0, 0x0);
        gbc.writeMem(0xaeae, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa414);
        EXPECT(gbc.pc(), 0xaeb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeae), 0xcb);
        EXPECT(gbc.readMem(0xaeaf), 0xfb);
        // CB FB 0278
        gbc.setState(0x8724, 0xb6e8, 0x5600, 0xb217, 0x1737, 0xfe86, 0x0, 0x0);
        gbc.writeMem(0x8724, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb6e8);
        EXPECT(gbc.pc(), 0x8726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8724), 0xcb);
        EXPECT(gbc.readMem(0x8725), 0xfb);
        // CB FB 0279
        gbc.setState(0x2fc9, 0x5b9e, 0x3120, 0x4cc6, 0xa9a4, 0x668, 0x1, 0x1);
        gbc.writeMem(0x2fc9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5b9e);
        EXPECT(gbc.pc(), 0x2fcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 027A
        gbc.setState(0x4d42, 0x9614, 0x4450, 0xfd9b, 0xdf9f, 0xdf6d, 0x0, 0x1);
        gbc.writeMem(0x4d42, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9614);
        EXPECT(gbc.pc(), 0x4d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 027B
        gbc.setState(0x4ac8, 0x9ea7, 0x8650, 0x83d3, 0x9283, 0xf0e0, 0x0, 0x1);
        gbc.writeMem(0x4ac8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9ea7);
        EXPECT(gbc.pc(), 0x4aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 027C
        gbc.setState(0x2654, 0xee8, 0xbc90, 0x4aea, 0x8c08, 0xe0ff, 0x1, 0x1);
        gbc.writeMem(0x2654, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xee8);
        EXPECT(gbc.pc(), 0x2656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 027D
        gbc.setState(0x2ca1, 0x1680, 0x2030, 0xe287, 0x6978, 0xeea0, 0x0, 0x0);
        gbc.writeMem(0x2ca1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1680);
        EXPECT(gbc.pc(), 0x2ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 027E
        gbc.setState(0xa3f1, 0xb10f, 0x85e0, 0xa9e, 0xd490, 0xd299, 0x0, 0x0);
        gbc.writeMem(0xa3f1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb10f);
        EXPECT(gbc.pc(), 0xa3f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f1), 0xcb);
        EXPECT(gbc.readMem(0xa3f2), 0xfb);
        // CB FB 027F
        gbc.setState(0x4ced, 0x6407, 0xf550, 0x26ed, 0x5502, 0x7735, 0x1, 0x0);
        gbc.writeMem(0x4ced, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x6407);
        EXPECT(gbc.pc(), 0x4cef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0280
        gbc.setState(0x6c47, 0x32b9, 0xdac0, 0xbb8b, 0x4370, 0x31fc, 0x0, 0x0);
        gbc.writeMem(0x6c47, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x32b9);
        EXPECT(gbc.pc(), 0x6c49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0281
        gbc.setState(0x4eeb, 0xd123, 0x4770, 0x5cd5, 0x91b4, 0xdc39, 0x1, 0x0);
        gbc.writeMem(0x4eeb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd123);
        EXPECT(gbc.pc(), 0x4eed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0282
        gbc.setState(0x17a, 0xfc84, 0x64e0, 0x7588, 0x1005, 0x3e2c, 0x0, 0x0);
        gbc.writeMem(0x17a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfc84);
        EXPECT(gbc.pc(), 0x17c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0283
        gbc.setState(0x94a, 0x4369, 0xad80, 0x5a44, 0xdb70, 0x7ac0, 0x0, 0x1);
        gbc.writeMem(0x94a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4369);
        EXPECT(gbc.pc(), 0x94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0284
        gbc.setState(0x51af, 0xdeea, 0x2290, 0x239b, 0x1621, 0xf32d, 0x1, 0x0);
        gbc.writeMem(0x51af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xdeea);
        EXPECT(gbc.pc(), 0x51b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0285
        gbc.setState(0x2c6d, 0xc3c4, 0x47a0, 0xe132, 0xb11e, 0x3221, 0x1, 0x1);
        gbc.writeMem(0x2c6d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc3c4);
        EXPECT(gbc.pc(), 0x2c6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0286
        gbc.setState(0x1068, 0x3145, 0x5ae0, 0x54d8, 0x8eba, 0x4ea2, 0x1, 0x0);
        gbc.writeMem(0x1068, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x3145);
        EXPECT(gbc.pc(), 0x106a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0287
        gbc.setState(0x1b64, 0x34cc, 0x40c0, 0x43b6, 0xb8b5, 0xd638, 0x0, 0x0);
        gbc.writeMem(0x1b64, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x34cc);
        EXPECT(gbc.pc(), 0x1b66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0288
        gbc.setState(0xe98a, 0x780c, 0x3140, 0xdcf6, 0x7ad4, 0x8141, 0x1, 0x0);
        gbc.writeMem(0xe98a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x780c);
        EXPECT(gbc.pc(), 0xe98c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98a), 0xcb);
        EXPECT(gbc.readMem(0xe98b), 0xfb);
        // CB FB 0289
        gbc.setState(0x8a92, 0x2961, 0xa0c0, 0x3bb8, 0x9d1f, 0x491c, 0x0, 0x1);
        gbc.writeMem(0x8a92, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0x8a94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a92), 0xcb);
        EXPECT(gbc.readMem(0x8a93), 0xfb);
        // CB FB 028A
        gbc.setState(0x483d, 0x118, 0x5770, 0xc729, 0xc43e, 0x1c58, 0x1, 0x0);
        gbc.writeMem(0x483d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x118);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 028B
        gbc.setState(0xb79a, 0xaee3, 0xf8c0, 0x7eae, 0x7cde, 0x71b0, 0x1, 0x0);
        gbc.writeMem(0xb79a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xaee3);
        EXPECT(gbc.pc(), 0xb79c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79a), 0xcb);
        EXPECT(gbc.readMem(0xb79b), 0xfb);
        // CB FB 028C
        gbc.setState(0x9f0d, 0x6116, 0xe070, 0xd4af, 0xf78a, 0x60f, 0x0, 0x1);
        gbc.writeMem(0x9f0d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6116);
        EXPECT(gbc.pc(), 0x9f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f0d), 0xcb);
        EXPECT(gbc.readMem(0x9f0e), 0xfb);
        // CB FB 028D
        gbc.setState(0xc8e5, 0xd24d, 0xe850, 0x8aaf, 0x786, 0x8241, 0x1, 0x0);
        gbc.writeMem(0xc8e5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd24d);
        EXPECT(gbc.pc(), 0xc8e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8e5), 0xcb);
        EXPECT(gbc.readMem(0xc8e6), 0xfb);
        // CB FB 028E
        gbc.setState(0x9fcb, 0xf9d8, 0xa5b0, 0x765b, 0xf556, 0xaab0, 0x1, 0x1);
        gbc.writeMem(0x9fcb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf9d8);
        EXPECT(gbc.pc(), 0x9fcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fcb), 0xcb);
        EXPECT(gbc.readMem(0x9fcc), 0xfb);
        // CB FB 028F
        gbc.setState(0xb2f6, 0x20b1, 0x84c0, 0xe702, 0x531f, 0x9e46, 0x1, 0x1);
        gbc.writeMem(0xb2f6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x20b1);
        EXPECT(gbc.pc(), 0xb2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f6), 0xcb);
        EXPECT(gbc.readMem(0xb2f7), 0xfb);
        // CB FB 0290
        gbc.setState(0x2761, 0xdba5, 0xdda0, 0xf3fa, 0x2bb2, 0x61d3, 0x0, 0x1);
        gbc.writeMem(0x2761, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xdba5);
        EXPECT(gbc.pc(), 0x2763);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0291
        gbc.setState(0x84ba, 0x60, 0x8070, 0xb176, 0x5f18, 0x5eeb, 0x0, 0x1);
        gbc.writeMem(0x84ba, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x60);
        EXPECT(gbc.pc(), 0x84bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ba), 0xcb);
        EXPECT(gbc.readMem(0x84bb), 0xfb);
        // CB FB 0292
        gbc.setState(0x7e61, 0x9295, 0xd2c0, 0xc3f8, 0x3ad9, 0x65a0, 0x1, 0x0);
        gbc.writeMem(0x7e61, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9295);
        EXPECT(gbc.pc(), 0x7e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0293
        gbc.setState(0x45d, 0xa69d, 0x5330, 0xd2ab, 0x3383, 0xea0d, 0x0, 0x0);
        gbc.writeMem(0x45d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa69d);
        EXPECT(gbc.pc(), 0x45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0294
        gbc.setState(0xc86c, 0x6966, 0x4e40, 0xa8bd, 0x9aac, 0x868f, 0x1, 0x1);
        gbc.writeMem(0xc86c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6966);
        EXPECT(gbc.pc(), 0xc86e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc86c), 0xcb);
        EXPECT(gbc.readMem(0xc86d), 0xfb);
        // CB FB 0295
        gbc.setState(0x87f3, 0x8b68, 0x8450, 0x439a, 0xd3a0, 0x19c8, 0x0, 0x0);
        gbc.writeMem(0x87f3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8b68);
        EXPECT(gbc.pc(), 0x87f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f3), 0xcb);
        EXPECT(gbc.readMem(0x87f4), 0xfb);
        // CB FB 0297
        gbc.setState(0x73d, 0x9278, 0x9b00, 0x896f, 0xbbe5, 0xd833, 0x0, 0x0);
        gbc.writeMem(0x73d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9278);
        EXPECT(gbc.pc(), 0x73f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0298
        gbc.setState(0x6a7a, 0xdfcc, 0xf00, 0x49f8, 0x7d3c, 0x8d77, 0x0, 0x1);
        gbc.writeMem(0x6a7a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdfcc);
        EXPECT(gbc.pc(), 0x6a7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0299
        gbc.setState(0x8e5, 0xcae0, 0x2c00, 0x370e, 0xf60e, 0x5553, 0x1, 0x0);
        gbc.writeMem(0x8e5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xcae0);
        EXPECT(gbc.pc(), 0x8e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 029B
        gbc.setState(0x4eff, 0x65fa, 0xa710, 0xf3a7, 0xf25e, 0x7908, 0x1, 0x1);
        gbc.writeMem(0x4eff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x65fa);
        EXPECT(gbc.pc(), 0x4f01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 029C
        gbc.setState(0x5590, 0xf56a, 0x2020, 0xc4a1, 0x74b0, 0xd344, 0x0, 0x0);
        gbc.writeMem(0x5590, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf56a);
        EXPECT(gbc.pc(), 0x5592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 029D
        gbc.setState(0x4ec3, 0xdeec, 0x2cf0, 0x8814, 0x6826, 0x682, 0x1, 0x0);
        gbc.writeMem(0x4ec3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0x4ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 029E
        gbc.setState(0x9b0d, 0x5a28, 0x7940, 0xf94c, 0x1fff, 0xc770, 0x1, 0x0);
        gbc.writeMem(0x9b0d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5a28);
        EXPECT(gbc.pc(), 0x9b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b0d), 0xcb);
        EXPECT(gbc.readMem(0x9b0e), 0xfb);
        // CB FB 029F
        gbc.setState(0xdca5, 0xaf22, 0x9e30, 0x6e6f, 0x61fb, 0x4cbf, 0x0, 0x0);
        gbc.writeMem(0xdca5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xaf22);
        EXPECT(gbc.pc(), 0xdca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdca5), 0xcb);
        EXPECT(gbc.readMem(0xdca6), 0xfb);
        // CB FB 02A1
        gbc.setState(0xb83b, 0x2f8c, 0x8590, 0x2f7a, 0xf460, 0x5bc2, 0x0, 0x1);
        gbc.writeMem(0xb83b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2f8c);
        EXPECT(gbc.pc(), 0xb83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb83b), 0xcb);
        EXPECT(gbc.readMem(0xb83c), 0xfb);
        // CB FB 02A3
        gbc.setState(0xb7ab, 0x2c44, 0xd7b0, 0x4ed5, 0xce32, 0x9cea, 0x1, 0x1);
        gbc.writeMem(0xb7ab, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2c44);
        EXPECT(gbc.pc(), 0xb7ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ab), 0xcb);
        EXPECT(gbc.readMem(0xb7ac), 0xfb);
        // CB FB 02A4
        gbc.setState(0x9e20, 0xcf2c, 0x6b90, 0xc34e, 0xa186, 0x3ba9, 0x1, 0x1);
        gbc.writeMem(0x9e20, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xcf2c);
        EXPECT(gbc.pc(), 0x9e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e20), 0xcb);
        EXPECT(gbc.readMem(0x9e21), 0xfb);
        // CB FB 02A5
        gbc.setState(0xa771, 0xbe8a, 0x78d0, 0xfd38, 0x89f0, 0x3a2a, 0x1, 0x0);
        gbc.writeMem(0xa771, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbe8a);
        EXPECT(gbc.pc(), 0xa773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa771), 0xcb);
        EXPECT(gbc.readMem(0xa772), 0xfb);
        // CB FB 02A7
        gbc.setState(0x7a70, 0xeed, 0x9d20, 0x18c3, 0x9d8, 0x3c91, 0x1, 0x0);
        gbc.writeMem(0x7a70, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xeed);
        EXPECT(gbc.pc(), 0x7a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02A8
        gbc.setState(0x55ab, 0xcef0, 0x6f30, 0xba03, 0xd9fe, 0x853e, 0x1, 0x1);
        gbc.writeMem(0x55ab, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xcef0);
        EXPECT(gbc.pc(), 0x55ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02A9
        gbc.setState(0x8108, 0x6a0, 0x8be0, 0xb517, 0x4898, 0x89b1, 0x0, 0x1);
        gbc.writeMem(0x8108, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6a0);
        EXPECT(gbc.pc(), 0x810a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8108), 0xcb);
        EXPECT(gbc.readMem(0x8109), 0xfb);
        // CB FB 02AA
        gbc.setState(0xab9a, 0x77ac, 0x6e0, 0xb061, 0x52bf, 0xb6b9, 0x0, 0x0);
        gbc.writeMem(0xab9a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x77ac);
        EXPECT(gbc.pc(), 0xab9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9a), 0xcb);
        EXPECT(gbc.readMem(0xab9b), 0xfb);
        // CB FB 02AB
        gbc.setState(0xc4f8, 0xa0b8, 0xc9d0, 0xd6d0, 0x278e, 0xf303, 0x1, 0x1);
        gbc.writeMem(0xc4f8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa0b8);
        EXPECT(gbc.pc(), 0xc4fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f8), 0xcb);
        EXPECT(gbc.readMem(0xc4f9), 0xfb);
        // CB FB 02AC
        gbc.setState(0xbb26, 0x1bf4, 0xc080, 0x342b, 0xbf9d, 0x8ae0, 0x0, 0x1);
        gbc.writeMem(0xbb26, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1bf4);
        EXPECT(gbc.pc(), 0xbb28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb26), 0xcb);
        EXPECT(gbc.readMem(0xbb27), 0xfb);
        // CB FB 02AD
        gbc.setState(0xac84, 0x1256, 0xb760, 0x9c2c, 0x124, 0xe010, 0x1, 0x1);
        gbc.writeMem(0xac84, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1256);
        EXPECT(gbc.pc(), 0xac86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac84), 0xcb);
        EXPECT(gbc.readMem(0xac85), 0xfb);
        // CB FB 02AE
        gbc.setState(0xdb6c, 0x72ca, 0x1750, 0x744d, 0x332c, 0x35db, 0x1, 0x0);
        gbc.writeMem(0xdb6c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x72ca);
        EXPECT(gbc.pc(), 0xdb6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6c), 0xcb);
        EXPECT(gbc.readMem(0xdb6d), 0xfb);
        // CB FB 02AF
        gbc.setState(0xec3, 0x21f7, 0x3110, 0xaf96, 0x2e21, 0x538c, 0x0, 0x0);
        gbc.writeMem(0xec3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x21f7);
        EXPECT(gbc.pc(), 0xec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02B0
        gbc.setState(0x2ccb, 0xcdaf, 0xb660, 0x3a75, 0xb4d3, 0x29c3, 0x0, 0x1);
        gbc.writeMem(0x2ccb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcdaf);
        EXPECT(gbc.pc(), 0x2ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02B3
        gbc.setState(0x1845, 0x7464, 0xc7c0, 0x6e4, 0xe911, 0x591b, 0x0, 0x0);
        gbc.writeMem(0x1845, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7464);
        EXPECT(gbc.pc(), 0x1847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02B4
        gbc.setState(0x98c, 0x3d2b, 0x5940, 0x52a9, 0xc61b, 0xd242, 0x0, 0x0);
        gbc.writeMem(0x98c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3d2b);
        EXPECT(gbc.pc(), 0x98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02B5
        gbc.setState(0xcc8d, 0xd4da, 0xabd0, 0x9f11, 0xe0f, 0xed5a, 0x1, 0x1);
        gbc.writeMem(0xcc8d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd4da);
        EXPECT(gbc.pc(), 0xcc8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8d), 0xcb);
        EXPECT(gbc.readMem(0xcc8e), 0xfb);
        // CB FB 02B6
        gbc.setState(0x706a, 0x7931, 0xcec0, 0xa015, 0x119f, 0x6ce6, 0x1, 0x1);
        gbc.writeMem(0x706a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7931);
        EXPECT(gbc.pc(), 0x706c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02B7
        gbc.setState(0x504d, 0x1f38, 0x6300, 0xef34, 0x75c8, 0xd091, 0x1, 0x0);
        gbc.writeMem(0x504d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1f38);
        EXPECT(gbc.pc(), 0x504f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02B8
        gbc.setState(0xd815, 0xe78c, 0xaad0, 0x136a, 0xf583, 0x4da8, 0x0, 0x0);
        gbc.writeMem(0xd815, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe78c);
        EXPECT(gbc.pc(), 0xd817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd815), 0xcb);
        EXPECT(gbc.readMem(0xd816), 0xfb);
        // CB FB 02B9
        gbc.setState(0x8ecb, 0xf196, 0x200, 0x3595, 0xc4c2, 0x7600, 0x1, 0x1);
        gbc.writeMem(0x8ecb, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf196);
        EXPECT(gbc.pc(), 0x8ecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ecb), 0xcb);
        EXPECT(gbc.readMem(0x8ecc), 0xfb);
        // CB FB 02BA
        gbc.setState(0x60dc, 0x3218, 0x8230, 0x801, 0x6721, 0x75fd, 0x1, 0x1);
        gbc.writeMem(0x60dc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3218);
        EXPECT(gbc.pc(), 0x60de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02BB
        gbc.setState(0xd0c1, 0x3bb9, 0xfd40, 0x466c, 0xa344, 0xdd33, 0x0, 0x1);
        gbc.writeMem(0xd0c1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3bb9);
        EXPECT(gbc.pc(), 0xd0c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c1), 0xcb);
        EXPECT(gbc.readMem(0xd0c2), 0xfb);
        // CB FB 02BC
        gbc.setState(0x3312, 0xcf76, 0xabb0, 0xda92, 0x538f, 0x8f2d, 0x1, 0x0);
        gbc.writeMem(0x3312, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xcf76);
        EXPECT(gbc.pc(), 0x3314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02BD
        gbc.setState(0xc950, 0x54d8, 0x6f90, 0xb451, 0xd42e, 0x71a2, 0x0, 0x0);
        gbc.writeMem(0xc950, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x54d8);
        EXPECT(gbc.pc(), 0xc952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc950), 0xcb);
        EXPECT(gbc.readMem(0xc951), 0xfb);
        // CB FB 02BF
        gbc.setState(0x234f, 0xa40e, 0xa3d0, 0xbfff, 0xe295, 0x41, 0x1, 0x1);
        gbc.writeMem(0x234f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa40e);
        EXPECT(gbc.pc(), 0x2351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02C0
        gbc.setState(0xb899, 0x94ca, 0x6c20, 0x2e84, 0x22f8, 0xa95, 0x1, 0x0);
        gbc.writeMem(0xb899, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x94ca);
        EXPECT(gbc.pc(), 0xb89b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb899), 0xcb);
        EXPECT(gbc.readMem(0xb89a), 0xfb);
        // CB FB 02C1
        gbc.setState(0xca44, 0x73ea, 0xe030, 0x539e, 0xd3a3, 0x2c55, 0x1, 0x0);
        gbc.writeMem(0xca44, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x73ea);
        EXPECT(gbc.pc(), 0xca46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca44), 0xcb);
        EXPECT(gbc.readMem(0xca45), 0xfb);
        // CB FB 02C2
        gbc.setState(0x7a11, 0x4680, 0xae90, 0xa1f1, 0x21d6, 0xe289, 0x0, 0x1);
        gbc.writeMem(0x7a11, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4680);
        EXPECT(gbc.pc(), 0x7a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02C3
        gbc.setState(0x14b2, 0xc959, 0x2b80, 0x6c47, 0x4ce3, 0x1934, 0x0, 0x1);
        gbc.writeMem(0x14b2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc959);
        EXPECT(gbc.pc(), 0x14b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02C4
        gbc.setState(0x121f, 0x3a40, 0x7890, 0xe7a3, 0xd086, 0x2df9, 0x0, 0x1);
        gbc.writeMem(0x121f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3a40);
        EXPECT(gbc.pc(), 0x1221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02C5
        gbc.setState(0x1ba6, 0x8880, 0x58e0, 0xbe14, 0xad85, 0x602d, 0x0, 0x1);
        gbc.writeMem(0x1ba6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8880);
        EXPECT(gbc.pc(), 0x1ba8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02C6
        gbc.setState(0x3eec, 0xca0c, 0xd630, 0xdf8c, 0x6ad, 0x9f3e, 0x1, 0x0);
        gbc.writeMem(0x3eec, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xca0c);
        EXPECT(gbc.pc(), 0x3eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02C7
        gbc.setState(0x5227, 0xa0ab, 0x4a0, 0xd174, 0x7075, 0x1ed4, 0x1, 0x1);
        gbc.writeMem(0x5227, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa0ab);
        EXPECT(gbc.pc(), 0x5229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02C9
        gbc.setState(0x1298, 0xd3e7, 0x2250, 0x32e3, 0x7e59, 0x7248, 0x0, 0x1);
        gbc.writeMem(0x1298, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd3e7);
        EXPECT(gbc.pc(), 0x129a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02CA
        gbc.setState(0x6478, 0x4db6, 0x460, 0x372d, 0x1f71, 0x3572, 0x1, 0x1);
        gbc.writeMem(0x6478, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4db6);
        EXPECT(gbc.pc(), 0x647a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02CB
        gbc.setState(0xc12, 0xfae9, 0x1640, 0xd599, 0xf686, 0x4037, 0x0, 0x0);
        gbc.writeMem(0xc12, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfae9);
        EXPECT(gbc.pc(), 0xc14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02CC
        gbc.setState(0x8e19, 0xa46a, 0x64c0, 0x8c1, 0xbf7a, 0x93a2, 0x0, 0x0);
        gbc.writeMem(0x8e19, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xa46a);
        EXPECT(gbc.pc(), 0x8e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e19), 0xcb);
        EXPECT(gbc.readMem(0x8e1a), 0xfb);
        // CB FB 02CD
        gbc.setState(0xe878, 0x325e, 0xd450, 0x298c, 0xb739, 0x88a4, 0x1, 0x1);
        gbc.writeMem(0xe878, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x325e);
        EXPECT(gbc.pc(), 0xe87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe878), 0xcb);
        EXPECT(gbc.readMem(0xe879), 0xfb);
        // CB FB 02CF
        gbc.setState(0xc6df, 0xa4f3, 0x4220, 0x6664, 0x64ba, 0x7213, 0x0, 0x0);
        gbc.writeMem(0xc6df, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xa4f3);
        EXPECT(gbc.pc(), 0xc6e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6df), 0xcb);
        EXPECT(gbc.readMem(0xc6e0), 0xfb);
        // CB FB 02D0
        gbc.setState(0xc0ac, 0x450b, 0x6f80, 0x728, 0xeeaf, 0xf2e6, 0x0, 0x0);
        gbc.writeMem(0xc0ac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x450b);
        EXPECT(gbc.pc(), 0xc0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ac), 0xcb);
        EXPECT(gbc.readMem(0xc0ad), 0xfb);
        // CB FB 02D1
        gbc.setState(0xb67, 0x5bed, 0x70b0, 0xcb6e, 0x8fcd, 0x3dc3, 0x0, 0x1);
        gbc.writeMem(0xb67, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5bed);
        EXPECT(gbc.pc(), 0xb69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02D2
        gbc.setState(0x7a9e, 0x4f1f, 0x3dc0, 0x421d, 0xde30, 0x36ea, 0x1, 0x0);
        gbc.writeMem(0x7a9e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4f1f);
        EXPECT(gbc.pc(), 0x7aa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02D3
        gbc.setState(0x8525, 0xdaa1, 0x5920, 0x5218, 0x88b8, 0xcea5, 0x1, 0x0);
        gbc.writeMem(0x8525, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdaa1);
        EXPECT(gbc.pc(), 0x8527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8525), 0xcb);
        EXPECT(gbc.readMem(0x8526), 0xfb);
        // CB FB 02D4
        gbc.setState(0x4103, 0xda4f, 0xa210, 0x95da, 0xc873, 0xb1f8, 0x1, 0x0);
        gbc.writeMem(0x4103, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xda4f);
        EXPECT(gbc.pc(), 0x4105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02D5
        gbc.setState(0x238b, 0xb5d4, 0xf390, 0xd8e8, 0xef1b, 0x29d, 0x1, 0x1);
        gbc.writeMem(0x238b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb5d4);
        EXPECT(gbc.pc(), 0x238d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02D6
        gbc.setState(0x3984, 0x6536, 0x6500, 0x6f03, 0xdbe5, 0x73ff, 0x0, 0x0);
        gbc.writeMem(0x3984, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6536);
        EXPECT(gbc.pc(), 0x3986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02D7
        gbc.setState(0x49d4, 0xd470, 0xaf30, 0x20aa, 0xb687, 0x452, 0x0, 0x1);
        gbc.writeMem(0x49d4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd470);
        EXPECT(gbc.pc(), 0x49d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02D8
        gbc.setState(0x2dd7, 0x3f5, 0xd6e0, 0x4532, 0x5f06, 0xe10c, 0x1, 0x1);
        gbc.writeMem(0x2dd7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3f5);
        EXPECT(gbc.pc(), 0x2dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02D9
        gbc.setState(0xd62f, 0xcf33, 0x2fe0, 0x1823, 0x2b90, 0xf85d, 0x1, 0x0);
        gbc.writeMem(0xd62f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xcf33);
        EXPECT(gbc.pc(), 0xd631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd62f), 0xcb);
        EXPECT(gbc.readMem(0xd630), 0xfb);
        // CB FB 02DA
        gbc.setState(0x7946, 0x3bd7, 0xd690, 0x4d21, 0x63b0, 0x48f8, 0x0, 0x1);
        gbc.writeMem(0x7946, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3bd7);
        EXPECT(gbc.pc(), 0x7948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02DC
        gbc.setState(0x7e41, 0x6f96, 0x8fa0, 0xa7fd, 0x1a75, 0x1988, 0x1, 0x1);
        gbc.writeMem(0x7e41, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6f96);
        EXPECT(gbc.pc(), 0x7e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02DD
        gbc.setState(0x7319, 0xf553, 0x6770, 0x6677, 0xe585, 0xd560, 0x0, 0x0);
        gbc.writeMem(0x7319, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf553);
        EXPECT(gbc.pc(), 0x731b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02DF
        gbc.setState(0x68e0, 0xc8a5, 0xf20, 0xe1a4, 0x2a4a, 0x6ef4, 0x1, 0x1);
        gbc.writeMem(0x68e0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc8a5);
        EXPECT(gbc.pc(), 0x68e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02E1
        gbc.setState(0xd222, 0x720b, 0xac70, 0x8ef6, 0x5796, 0xfb7a, 0x0, 0x0);
        gbc.writeMem(0xd222, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x720b);
        EXPECT(gbc.pc(), 0xd224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd222), 0xcb);
        EXPECT(gbc.readMem(0xd223), 0xfb);
        // CB FB 02E2
        gbc.setState(0x6ac2, 0x9764, 0xfce0, 0xfbe4, 0x5ed8, 0x4df4, 0x1, 0x1);
        gbc.writeMem(0x6ac2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9764);
        EXPECT(gbc.pc(), 0x6ac4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02E3
        gbc.setState(0x4688, 0x36a8, 0xd730, 0x8d6a, 0xa057, 0xe475, 0x0, 0x1);
        gbc.writeMem(0x4688, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x36a8);
        EXPECT(gbc.pc(), 0x468a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02E4
        gbc.setState(0x5ce5, 0x72f9, 0x1ae0, 0xb07b, 0xb919, 0x740c, 0x1, 0x0);
        gbc.writeMem(0x5ce5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x72f9);
        EXPECT(gbc.pc(), 0x5ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02E5
        gbc.setState(0xc6ec, 0xd976, 0x4880, 0xd047, 0x2c68, 0x124e, 0x0, 0x1);
        gbc.writeMem(0xc6ec, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd976);
        EXPECT(gbc.pc(), 0xc6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ec), 0xcb);
        EXPECT(gbc.readMem(0xc6ed), 0xfb);
        // CB FB 02E6
        gbc.setState(0x47ea, 0x6523, 0xa5c0, 0x3ad1, 0xc0ad, 0xcefb, 0x1, 0x1);
        gbc.writeMem(0x47ea, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6523);
        EXPECT(gbc.pc(), 0x47ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02E7
        gbc.setState(0x4425, 0x1bd, 0x2c00, 0x24ce, 0xc48c, 0xab3a, 0x1, 0x0);
        gbc.writeMem(0x4425, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1bd);
        EXPECT(gbc.pc(), 0x4427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02E8
        gbc.setState(0x7587, 0xf02e, 0x6620, 0xee9, 0xebd, 0xa667, 0x1, 0x1);
        gbc.writeMem(0x7587, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf02e);
        EXPECT(gbc.pc(), 0x7589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02EA
        gbc.setState(0x9ea, 0x2670, 0x4360, 0x3e0f, 0x1132, 0x101f, 0x0, 0x1);
        gbc.writeMem(0x9ea, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2670);
        EXPECT(gbc.pc(), 0x9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02EB
        gbc.setState(0x6f9, 0x69d4, 0xd650, 0x97dd, 0xe5b8, 0x19f6, 0x0, 0x1);
        gbc.writeMem(0x6f9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x69d4);
        EXPECT(gbc.pc(), 0x6fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02EC
        gbc.setState(0x7280, 0x7a5b, 0xec30, 0x21bc, 0x52bd, 0xb70c, 0x1, 0x1);
        gbc.writeMem(0x7280, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7a5b);
        EXPECT(gbc.pc(), 0x7282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02ED
        gbc.setState(0x9e1f, 0x782a, 0x1590, 0xa0ff, 0x81fe, 0x2f75, 0x1, 0x1);
        gbc.writeMem(0x9e1f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x782a);
        EXPECT(gbc.pc(), 0x9e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e1f), 0xcb);
        EXPECT(gbc.readMem(0x9e20), 0xfb);
        // CB FB 02EE
        gbc.setState(0x57c8, 0xa71a, 0x3e40, 0xea45, 0xdab7, 0x189e, 0x0, 0x0);
        gbc.writeMem(0x57c8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa71a);
        EXPECT(gbc.pc(), 0x57ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02F0
        gbc.setState(0xa6b6, 0xec39, 0x92a0, 0x1d4, 0x919e, 0x5450, 0x0, 0x0);
        gbc.writeMem(0xa6b6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xec39);
        EXPECT(gbc.pc(), 0xa6b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b6), 0xcb);
        EXPECT(gbc.readMem(0xa6b7), 0xfb);
        // CB FB 02F1
        gbc.setState(0x532e, 0x60b7, 0xf370, 0x94b0, 0x2e49, 0xa243, 0x0, 0x1);
        gbc.writeMem(0x532e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x60b7);
        EXPECT(gbc.pc(), 0x5330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02F2
        gbc.setState(0x2279, 0x1ea9, 0xad80, 0xe019, 0x9834, 0x9472, 0x0, 0x0);
        gbc.writeMem(0x2279, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x1ea9);
        EXPECT(gbc.pc(), 0x227b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02F3
        gbc.setState(0xe493, 0x3953, 0x3b00, 0x635c, 0x75c1, 0xfba7, 0x0, 0x1);
        gbc.writeMem(0xe493, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x3953);
        EXPECT(gbc.pc(), 0xe495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe493), 0xcb);
        EXPECT(gbc.readMem(0xe494), 0xfb);
        // CB FB 02F4
        gbc.setState(0x32fe, 0xad44, 0x8aa0, 0x4337, 0x13e4, 0x5dab, 0x1, 0x0);
        gbc.writeMem(0x32fe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xad44);
        EXPECT(gbc.pc(), 0x3300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02F5
        gbc.setState(0xeabc, 0x8c55, 0xc580, 0x3401, 0x906a, 0xb1b5, 0x1, 0x1);
        gbc.writeMem(0xeabc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8c55);
        EXPECT(gbc.pc(), 0xeabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeabc), 0xcb);
        EXPECT(gbc.readMem(0xeabd), 0xfb);
        // CB FB 02F6
        gbc.setState(0xb402, 0x804c, 0x71e0, 0x1b6a, 0x64a8, 0x398a, 0x0, 0x0);
        gbc.writeMem(0xb402, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x804c);
        EXPECT(gbc.pc(), 0xb404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb402), 0xcb);
        EXPECT(gbc.readMem(0xb403), 0xfb);
        // CB FB 02F7
        gbc.setState(0x6d82, 0xa619, 0x6c30, 0x94af, 0x7a3f, 0x38d3, 0x1, 0x0);
        gbc.writeMem(0x6d82, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa619);
        EXPECT(gbc.pc(), 0x6d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 02F8
        gbc.setState(0xe641, 0x1c1, 0x550, 0x2730, 0xc61, 0xaead, 0x0, 0x0);
        gbc.writeMem(0xe641, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1c1);
        EXPECT(gbc.pc(), 0xe643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe641), 0xcb);
        EXPECT(gbc.readMem(0xe642), 0xfb);
        // CB FB 02F9
        gbc.setState(0xd788, 0x2344, 0xb3c0, 0xc66c, 0xd833, 0x8f6d, 0x1, 0x1);
        gbc.writeMem(0xd788, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2344);
        EXPECT(gbc.pc(), 0xd78a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd788), 0xcb);
        EXPECT(gbc.readMem(0xd789), 0xfb);
        // CB FB 02FA
        gbc.setState(0x5382, 0xe205, 0x7ca0, 0xa076, 0x77bb, 0xc223, 0x0, 0x0);
        gbc.writeMem(0x5382, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe205);
        EXPECT(gbc.pc(), 0x5384);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 02FB
        gbc.setState(0xa3d4, 0x3c5e, 0xcdd0, 0x97aa, 0x5bdf, 0x1dea, 0x0, 0x1);
        gbc.writeMem(0xa3d4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0xa3d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d4), 0xcb);
        EXPECT(gbc.readMem(0xa3d5), 0xfb);
        // CB FB 02FC
        gbc.setState(0x99dd, 0x5365, 0xcb90, 0x8abc, 0xabe2, 0xbb5, 0x1, 0x0);
        gbc.writeMem(0x99dd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5365);
        EXPECT(gbc.pc(), 0x99df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99dd), 0xcb);
        EXPECT(gbc.readMem(0x99de), 0xfb);
        // CB FB 02FD
        gbc.setState(0xa0ba, 0x1be0, 0xca10, 0xe93a, 0x9e39, 0xeb12, 0x1, 0x0);
        gbc.writeMem(0xa0ba, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1be0);
        EXPECT(gbc.pc(), 0xa0bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ba), 0xcb);
        EXPECT(gbc.readMem(0xa0bb), 0xfb);
        // CB FB 02FE
        gbc.setState(0x9610, 0x7e04, 0xf480, 0x7308, 0x8878, 0xcac9, 0x1, 0x0);
        gbc.writeMem(0x9610, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7e04);
        EXPECT(gbc.pc(), 0x9612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9610), 0xcb);
        EXPECT(gbc.readMem(0x9611), 0xfb);
        // CB FB 02FF
        gbc.setState(0x5249, 0x7d86, 0xb690, 0xc07b, 0x6a3c, 0xdbfc, 0x0, 0x0);
        gbc.writeMem(0x5249, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7d86);
        EXPECT(gbc.pc(), 0x524b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0300
        gbc.setState(0xa2a3, 0xab90, 0xc240, 0x87ab, 0x9efa, 0x1e13, 0x0, 0x0);
        gbc.writeMem(0xa2a3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xab90);
        EXPECT(gbc.pc(), 0xa2a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2a3), 0xcb);
        EXPECT(gbc.readMem(0xa2a4), 0xfb);
        // CB FB 0301
        gbc.setState(0x457b, 0xf8cc, 0xb980, 0xba76, 0xd805, 0xe5d4, 0x1, 0x1);
        gbc.writeMem(0x457b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf8cc);
        EXPECT(gbc.pc(), 0x457d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0302
        gbc.setState(0x4988, 0x91c0, 0x6500, 0x517b, 0x4f26, 0x7cc3, 0x0, 0x0);
        gbc.writeMem(0x4988, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x91c0);
        EXPECT(gbc.pc(), 0x498a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0304
        gbc.setState(0xa62, 0x261, 0xe3e0, 0x2d4d, 0x185c, 0xd87d, 0x0, 0x0);
        gbc.writeMem(0xa62, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x261);
        EXPECT(gbc.pc(), 0xa64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0305
        gbc.setState(0x2219, 0x8a37, 0x6ef0, 0x4cde, 0xa9a2, 0x5c08, 0x0, 0x1);
        gbc.writeMem(0x2219, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8a37);
        EXPECT(gbc.pc(), 0x221b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0306
        gbc.setState(0xead2, 0xdff7, 0x5e10, 0xdf89, 0x4ab6, 0xffed, 0x1, 0x1);
        gbc.writeMem(0xead2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdff7);
        EXPECT(gbc.pc(), 0xead4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead2), 0xcb);
        EXPECT(gbc.readMem(0xead3), 0xfb);
        // CB FB 0307
        gbc.setState(0xb56, 0xb741, 0xd620, 0x2ee7, 0xe143, 0x343c, 0x0, 0x0);
        gbc.writeMem(0xb56, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb741);
        EXPECT(gbc.pc(), 0xb58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0308
        gbc.setState(0x7dfa, 0xa555, 0xe10, 0xffcb, 0x3f13, 0x504d, 0x1, 0x0);
        gbc.writeMem(0x7dfa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa555);
        EXPECT(gbc.pc(), 0x7dfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0309
        gbc.setState(0x65ac, 0x327e, 0xcdc0, 0x55bb, 0x32a2, 0x3f42, 0x0, 0x0);
        gbc.writeMem(0x65ac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x327e);
        EXPECT(gbc.pc(), 0x65ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 030A
        gbc.setState(0x5e74, 0xa0bd, 0xf60, 0xf092, 0x97d9, 0xe78c, 0x0, 0x1);
        gbc.writeMem(0x5e74, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa0bd);
        EXPECT(gbc.pc(), 0x5e76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 030B
        gbc.setState(0xc003, 0x13d, 0x82d0, 0x7684, 0xc964, 0x5855, 0x0, 0x1);
        gbc.writeMem(0xc003, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x13d);
        EXPECT(gbc.pc(), 0xc005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc003), 0xcb);
        EXPECT(gbc.readMem(0xc004), 0xfb);
        // CB FB 030C
        gbc.setState(0xb2fe, 0x1712, 0xfa60, 0x8666, 0xe377, 0xad00, 0x0, 0x0);
        gbc.writeMem(0xb2fe, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1712);
        EXPECT(gbc.pc(), 0xb300);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2fe), 0xcb);
        EXPECT(gbc.readMem(0xb2ff), 0xfb);
        // CB FB 030D
        gbc.setState(0xabcd, 0x9fc0, 0x9020, 0xa1ad, 0x517d, 0x253c, 0x0, 0x0);
        gbc.writeMem(0xabcd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9fc0);
        EXPECT(gbc.pc(), 0xabcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabcd), 0xcb);
        EXPECT(gbc.readMem(0xabce), 0xfb);
        // CB FB 030E
        gbc.setState(0x4998, 0x796e, 0xe8e0, 0xfcf8, 0xa241, 0x7551, 0x0, 0x1);
        gbc.writeMem(0x4998, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x796e);
        EXPECT(gbc.pc(), 0x499a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 030F
        gbc.setState(0x2d69, 0xaea7, 0x500, 0x853f, 0x7ae9, 0x1543, 0x0, 0x1);
        gbc.writeMem(0x2d69, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xaea7);
        EXPECT(gbc.pc(), 0x2d6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0310
        gbc.setState(0x17e7, 0xc4d, 0x7df0, 0xa762, 0x29f5, 0x3acd, 0x0, 0x1);
        gbc.writeMem(0x17e7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc4d);
        EXPECT(gbc.pc(), 0x17e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0311
        gbc.setState(0x7d4e, 0x7b29, 0xd090, 0x601e, 0xd78c, 0x697e, 0x0, 0x0);
        gbc.writeMem(0x7d4e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7b29);
        EXPECT(gbc.pc(), 0x7d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0312
        gbc.setState(0x6b0b, 0xd7ef, 0x9590, 0x231b, 0x1d42, 0xa57a, 0x1, 0x1);
        gbc.writeMem(0x6b0b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd7ef);
        EXPECT(gbc.pc(), 0x6b0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0313
        gbc.setState(0x213c, 0x575e, 0x5cf0, 0x1cfd, 0xb175, 0x7183, 0x1, 0x0);
        gbc.writeMem(0x213c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x575e);
        EXPECT(gbc.pc(), 0x213e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0314
        gbc.setState(0x3e61, 0x508d, 0x66d0, 0xf951, 0x682a, 0x2b12, 0x1, 0x1);
        gbc.writeMem(0x3e61, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x508d);
        EXPECT(gbc.pc(), 0x3e63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0316
        gbc.setState(0x7361, 0x60ae, 0xc540, 0xed5c, 0x1056, 0xa312, 0x1, 0x1);
        gbc.writeMem(0x7361, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x60ae);
        EXPECT(gbc.pc(), 0x7363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0317
        gbc.setState(0x2f0b, 0x5c88, 0xbc10, 0x5485, 0xdd54, 0xb527, 0x0, 0x1);
        gbc.writeMem(0x2f0b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5c88);
        EXPECT(gbc.pc(), 0x2f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0318
        gbc.setState(0xd5dc, 0x9e80, 0xda0, 0x354c, 0x2e05, 0xeb5d, 0x1, 0x0);
        gbc.writeMem(0xd5dc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9e80);
        EXPECT(gbc.pc(), 0xd5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5dc), 0xcb);
        EXPECT(gbc.readMem(0xd5dd), 0xfb);
        // CB FB 0319
        gbc.setState(0x44ac, 0x722e, 0x6700, 0x9f29, 0x1957, 0x5be, 0x0, 0x0);
        gbc.writeMem(0x44ac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x722e);
        EXPECT(gbc.pc(), 0x44ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 031A
        gbc.setState(0x4cf0, 0xbb19, 0xc0b0, 0xa84f, 0x2ba5, 0x1ad2, 0x0, 0x1);
        gbc.writeMem(0x4cf0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xbb19);
        EXPECT(gbc.pc(), 0x4cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 031B
        gbc.setState(0x51f6, 0x1759, 0x71e0, 0x9410, 0x507c, 0xeeb2, 0x1, 0x1);
        gbc.writeMem(0x51f6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1759);
        EXPECT(gbc.pc(), 0x51f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 031D
        gbc.setState(0x158f, 0xf9ac, 0xc380, 0x4a59, 0xd19c, 0x562d, 0x0, 0x0);
        gbc.writeMem(0x158f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf9ac);
        EXPECT(gbc.pc(), 0x1591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 031E
        gbc.setState(0x906f, 0xd9bd, 0x3fd0, 0xa464, 0xbd83, 0xc0de, 0x1, 0x1);
        gbc.writeMem(0x906f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd9bd);
        EXPECT(gbc.pc(), 0x9071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x906f), 0xcb);
        EXPECT(gbc.readMem(0x9070), 0xfb);
        // CB FB 031F
        gbc.setState(0x33c5, 0xb65b, 0x9310, 0xe497, 0x2ab5, 0x99f9, 0x0, 0x1);
        gbc.writeMem(0x33c5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb65b);
        EXPECT(gbc.pc(), 0x33c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0320
        gbc.setState(0x84af, 0xc571, 0xfb10, 0x683e, 0x2288, 0xcbff, 0x0, 0x1);
        gbc.writeMem(0x84af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc571);
        EXPECT(gbc.pc(), 0x84b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84af), 0xcb);
        EXPECT(gbc.readMem(0x84b0), 0xfb);
        // CB FB 0321
        gbc.setState(0x88c2, 0x3a12, 0xa8b0, 0xc7d1, 0xb1a1, 0xa0bc, 0x1, 0x0);
        gbc.writeMem(0x88c2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3a12);
        EXPECT(gbc.pc(), 0x88c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88c2), 0xcb);
        EXPECT(gbc.readMem(0x88c3), 0xfb);
        // CB FB 0322
        gbc.setState(0x786b, 0xd570, 0xf240, 0x9deb, 0x4983, 0xa33f, 0x1, 0x1);
        gbc.writeMem(0x786b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd570);
        EXPECT(gbc.pc(), 0x786d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0323
        gbc.setState(0x2f9, 0xf603, 0x5b50, 0xbaf8, 0x65e3, 0x5c8a, 0x1, 0x0);
        gbc.writeMem(0x2f9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf603);
        EXPECT(gbc.pc(), 0x2fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0324
        gbc.setState(0x59fa, 0x7a9d, 0x2650, 0xb749, 0x6a86, 0x2a17, 0x0, 0x0);
        gbc.writeMem(0x59fa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7a9d);
        EXPECT(gbc.pc(), 0x59fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0325
        gbc.setState(0x4d2f, 0x7be9, 0xa440, 0xc73a, 0x7aae, 0x929e, 0x1, 0x0);
        gbc.writeMem(0x4d2f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x7be9);
        EXPECT(gbc.pc(), 0x4d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0327
        gbc.setState(0xd1b2, 0xa169, 0x1480, 0xb1d, 0x2b69, 0xc63b, 0x0, 0x0);
        gbc.writeMem(0xd1b2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa169);
        EXPECT(gbc.pc(), 0xd1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b2), 0xcb);
        EXPECT(gbc.readMem(0xd1b3), 0xfb);
        // CB FB 0329
        gbc.setState(0xbd94, 0x6613, 0xaf70, 0x683d, 0xbc69, 0xebc, 0x0, 0x0);
        gbc.writeMem(0xbd94, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6613);
        EXPECT(gbc.pc(), 0xbd96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd94), 0xcb);
        EXPECT(gbc.readMem(0xbd95), 0xfb);
        // CB FB 032A
        gbc.setState(0xa0fd, 0xd518, 0x3a20, 0xc5e4, 0x22af, 0xd07c, 0x0, 0x0);
        gbc.writeMem(0xa0fd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd518);
        EXPECT(gbc.pc(), 0xa0ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0fd), 0xcb);
        EXPECT(gbc.readMem(0xa0fe), 0xfb);
        // CB FB 032B
        gbc.setState(0x93a4, 0x4b5f, 0xfc0, 0x40b8, 0xcc8c, 0x136e, 0x1, 0x0);
        gbc.writeMem(0x93a4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4b5f);
        EXPECT(gbc.pc(), 0x93a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93a4), 0xcb);
        EXPECT(gbc.readMem(0x93a5), 0xfb);
        // CB FB 032C
        gbc.setState(0x5ea9, 0xf78c, 0x7100, 0x530c, 0x4fd4, 0xfb2e, 0x0, 0x0);
        gbc.writeMem(0x5ea9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf78c);
        EXPECT(gbc.pc(), 0x5eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 032D
        gbc.setState(0xe730, 0x5b76, 0x1d10, 0x5a8d, 0x44dc, 0x7254, 0x1, 0x0);
        gbc.writeMem(0xe730, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5b76);
        EXPECT(gbc.pc(), 0xe732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe730), 0xcb);
        EXPECT(gbc.readMem(0xe731), 0xfb);
        // CB FB 032E
        gbc.setState(0xe9de, 0xed4c, 0xad60, 0x3efd, 0x1e3f, 0x236f, 0x1, 0x1);
        gbc.writeMem(0xe9de, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xed4c);
        EXPECT(gbc.pc(), 0xe9e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9de), 0xcb);
        EXPECT(gbc.readMem(0xe9df), 0xfb);
        // CB FB 032F
        gbc.setState(0xc0d9, 0xd4ae, 0x2680, 0xb54d, 0x352a, 0xdc55, 0x0, 0x1);
        gbc.writeMem(0xc0d9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd4ae);
        EXPECT(gbc.pc(), 0xc0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d9), 0xcb);
        EXPECT(gbc.readMem(0xc0da), 0xfb);
        // CB FB 0330
        gbc.setState(0xa18, 0xb9d1, 0x2820, 0xd8f3, 0x48c9, 0x5dab, 0x0, 0x1);
        gbc.writeMem(0xa18, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb9d1);
        EXPECT(gbc.pc(), 0xa1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0332
        gbc.setState(0x6f22, 0x112c, 0xca0, 0x715b, 0x8153, 0x270, 0x0, 0x1);
        gbc.writeMem(0x6f22, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x112c);
        EXPECT(gbc.pc(), 0x6f24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0333
        gbc.setState(0xd1e9, 0x4e1, 0x8e70, 0xdd26, 0x937c, 0x3553, 0x0, 0x0);
        gbc.writeMem(0xd1e9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4e1);
        EXPECT(gbc.pc(), 0xd1eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e9), 0xcb);
        EXPECT(gbc.readMem(0xd1ea), 0xfb);
        // CB FB 0334
        gbc.setState(0x46b2, 0xf8bc, 0x4170, 0x2945, 0xe775, 0xbea5, 0x1, 0x0);
        gbc.writeMem(0x46b2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf8bc);
        EXPECT(gbc.pc(), 0x46b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0335
        gbc.setState(0xbc64, 0x8b11, 0x50, 0x271e, 0xeb53, 0xa50c, 0x0, 0x0);
        gbc.writeMem(0xbc64, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8b11);
        EXPECT(gbc.pc(), 0xbc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc64), 0xcb);
        EXPECT(gbc.readMem(0xbc65), 0xfb);
        // CB FB 0336
        gbc.setState(0x7735, 0x26fd, 0x2510, 0xd9aa, 0x810c, 0xc0bf, 0x0, 0x1);
        gbc.writeMem(0x7735, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x26fd);
        EXPECT(gbc.pc(), 0x7737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0337
        gbc.setState(0x5411, 0xe92c, 0x69e0, 0xa2c1, 0x9df6, 0xdf94, 0x0, 0x0);
        gbc.writeMem(0x5411, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe92c);
        EXPECT(gbc.pc(), 0x5413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0338
        gbc.setState(0xcf30, 0xa9ba, 0xb120, 0x1344, 0x3867, 0xdfea, 0x1, 0x1);
        gbc.writeMem(0xcf30, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa9ba);
        EXPECT(gbc.pc(), 0xcf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf30), 0xcb);
        EXPECT(gbc.readMem(0xcf31), 0xfb);
        // CB FB 0339
        gbc.setState(0xedb7, 0x726, 0x37b0, 0x2983, 0xa588, 0x7309, 0x0, 0x1);
        gbc.writeMem(0xedb7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x726);
        EXPECT(gbc.pc(), 0xedb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb7), 0xcb);
        EXPECT(gbc.readMem(0xedb8), 0xfb);
        // CB FB 033A
        gbc.setState(0x5b18, 0x31ed, 0x1e70, 0x249f, 0x77bc, 0x89c5, 0x0, 0x0);
        gbc.writeMem(0x5b18, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x31ed);
        EXPECT(gbc.pc(), 0x5b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 033B
        gbc.setState(0x132a, 0x315f, 0x9bf0, 0x1249, 0xd967, 0xbc, 0x0, 0x1);
        gbc.writeMem(0x132a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x315f);
        EXPECT(gbc.pc(), 0x132c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 033C
        gbc.setState(0x216d, 0xaa98, 0x4920, 0x3cc1, 0x623e, 0x8001, 0x0, 0x1);
        gbc.writeMem(0x216d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xaa98);
        EXPECT(gbc.pc(), 0x216f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 033D
        gbc.setState(0x97d8, 0x3d5e, 0xbb80, 0x6fd, 0xc7b4, 0x58bb, 0x1, 0x1);
        gbc.writeMem(0x97d8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3d5e);
        EXPECT(gbc.pc(), 0x97da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d8), 0xcb);
        EXPECT(gbc.readMem(0x97d9), 0xfb);
        // CB FB 033E
        gbc.setState(0x795f, 0xd7f5, 0x43e0, 0xaf27, 0x8494, 0x1e02, 0x1, 0x1);
        gbc.writeMem(0x795f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd7f5);
        EXPECT(gbc.pc(), 0x7961);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 033F
        gbc.setState(0x6b5a, 0x8653, 0x300, 0x4c0c, 0xb1b7, 0x1d19, 0x1, 0x0);
        gbc.writeMem(0x6b5a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8653);
        EXPECT(gbc.pc(), 0x6b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0340
        gbc.setState(0xcb6, 0x31a, 0x4010, 0x58e6, 0xa937, 0x5282, 0x1, 0x0);
        gbc.writeMem(0xcb6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x31a);
        EXPECT(gbc.pc(), 0xcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0341
        gbc.setState(0x3f17, 0xc166, 0x37d0, 0x5eca, 0x56cf, 0x1f85, 0x0, 0x0);
        gbc.writeMem(0x3f17, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc166);
        EXPECT(gbc.pc(), 0x3f19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0342
        gbc.setState(0x7c6e, 0xebf, 0x7d50, 0x7e45, 0xe7bd, 0x370f, 0x1, 0x1);
        gbc.writeMem(0x7c6e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xebf);
        EXPECT(gbc.pc(), 0x7c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0343
        gbc.setState(0xd547, 0xd553, 0x1c00, 0x19a3, 0x84f2, 0x45ea, 0x1, 0x0);
        gbc.writeMem(0xd547, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd553);
        EXPECT(gbc.pc(), 0xd549);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd547), 0xcb);
        EXPECT(gbc.readMem(0xd548), 0xfb);
        // CB FB 0344
        gbc.setState(0xb102, 0x7e38, 0xac70, 0xac18, 0xf298, 0x2ee4, 0x0, 0x0);
        gbc.writeMem(0xb102, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7e38);
        EXPECT(gbc.pc(), 0xb104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb102), 0xcb);
        EXPECT(gbc.readMem(0xb103), 0xfb);
        // CB FB 0345
        gbc.setState(0xd907, 0x73e2, 0x74e0, 0x5e4d, 0x1daa, 0xe8c1, 0x0, 0x1);
        gbc.writeMem(0xd907, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x73e2);
        EXPECT(gbc.pc(), 0xd909);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd907), 0xcb);
        EXPECT(gbc.readMem(0xd908), 0xfb);
        // CB FB 0346
        gbc.setState(0xae0f, 0xfea3, 0xf810, 0x5940, 0x778a, 0x96b1, 0x0, 0x0);
        gbc.writeMem(0xae0f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfea3);
        EXPECT(gbc.pc(), 0xae11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae0f), 0xcb);
        EXPECT(gbc.readMem(0xae10), 0xfb);
        // CB FB 0347
        gbc.setState(0x9c52, 0x35b5, 0xd150, 0x6746, 0xf259, 0x565a, 0x1, 0x0);
        gbc.writeMem(0x9c52, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x35b5);
        EXPECT(gbc.pc(), 0x9c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c52), 0xcb);
        EXPECT(gbc.readMem(0x9c53), 0xfb);
        // CB FB 0348
        gbc.setState(0x9d85, 0x2e77, 0x7ce0, 0x10ee, 0x1e83, 0x5c57, 0x1, 0x0);
        gbc.writeMem(0x9d85, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2e77);
        EXPECT(gbc.pc(), 0x9d87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d85), 0xcb);
        EXPECT(gbc.readMem(0x9d86), 0xfb);
        // CB FB 0349
        gbc.setState(0x93ae, 0xf45a, 0xfd60, 0x2884, 0xdb91, 0xdbb3, 0x0, 0x1);
        gbc.writeMem(0x93ae, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf45a);
        EXPECT(gbc.pc(), 0x93b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ae), 0xcb);
        EXPECT(gbc.readMem(0x93af), 0xfb);
        // CB FB 034A
        gbc.setState(0xdb0a, 0xc236, 0xa8a0, 0x3141, 0x9ac2, 0x6f06, 0x1, 0x0);
        gbc.writeMem(0xdb0a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc236);
        EXPECT(gbc.pc(), 0xdb0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0a), 0xcb);
        EXPECT(gbc.readMem(0xdb0b), 0xfb);
        // CB FB 034B
        gbc.setState(0x1ddc, 0x1aaf, 0x8db0, 0xcc42, 0x8182, 0x7aa2, 0x0, 0x1);
        gbc.writeMem(0x1ddc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1aaf);
        EXPECT(gbc.pc(), 0x1dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 034C
        gbc.setState(0x2e20, 0x3dd7, 0x33a0, 0xece6, 0x1be3, 0x735e, 0x1, 0x1);
        gbc.writeMem(0x2e20, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3dd7);
        EXPECT(gbc.pc(), 0x2e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 034D
        gbc.setState(0x7109, 0x4b8b, 0x6170, 0x937c, 0xfb32, 0x61e0, 0x0, 0x1);
        gbc.writeMem(0x7109, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4b8b);
        EXPECT(gbc.pc(), 0x710b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 034E
        gbc.setState(0x2ea5, 0xb34f, 0xbb80, 0x3a90, 0xce55, 0xc195, 0x1, 0x1);
        gbc.writeMem(0x2ea5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb34f);
        EXPECT(gbc.pc(), 0x2ea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 034F
        gbc.setState(0x16d9, 0x1049, 0xe460, 0x6151, 0x49cd, 0x51e5, 0x1, 0x0);
        gbc.writeMem(0x16d9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x1049);
        EXPECT(gbc.pc(), 0x16db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0350
        gbc.setState(0xc01c, 0x6564, 0x7720, 0x70e2, 0x4676, 0x7ee0, 0x0, 0x1);
        gbc.writeMem(0xc01c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x6564);
        EXPECT(gbc.pc(), 0xc01e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc01c), 0xcb);
        EXPECT(gbc.readMem(0xc01d), 0xfb);
        // CB FB 0351
        gbc.setState(0x6e0e, 0x37e5, 0x4720, 0xe4f9, 0xbe85, 0x9c4f, 0x0, 0x1);
        gbc.writeMem(0x6e0e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x37e5);
        EXPECT(gbc.pc(), 0x6e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0352
        gbc.setState(0x9b17, 0x84a8, 0xf3b0, 0xb6ff, 0x3c5a, 0xf717, 0x1, 0x0);
        gbc.writeMem(0x9b17, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x84a8);
        EXPECT(gbc.pc(), 0x9b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b17), 0xcb);
        EXPECT(gbc.readMem(0x9b18), 0xfb);
        // CB FB 0353
        gbc.setState(0xa913, 0x4ebf, 0xc6b0, 0xef95, 0xd9f0, 0x1ea2, 0x0, 0x0);
        gbc.writeMem(0xa913, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4ebf);
        EXPECT(gbc.pc(), 0xa915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa913), 0xcb);
        EXPECT(gbc.readMem(0xa914), 0xfb);
        // CB FB 0354
        gbc.setState(0x4009, 0x7d06, 0x1490, 0xac2e, 0xecc, 0xe9d4, 0x0, 0x1);
        gbc.writeMem(0x4009, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7d06);
        EXPECT(gbc.pc(), 0x400b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0355
        gbc.setState(0xc1ad, 0x332a, 0xe010, 0x2889, 0x4521, 0x9077, 0x0, 0x1);
        gbc.writeMem(0xc1ad, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x332a);
        EXPECT(gbc.pc(), 0xc1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ad), 0xcb);
        EXPECT(gbc.readMem(0xc1ae), 0xfb);
        // CB FB 0356
        gbc.setState(0x5ea7, 0x9d68, 0x8ec0, 0xfcc0, 0xbd4f, 0x9012, 0x1, 0x0);
        gbc.writeMem(0x5ea7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9d68);
        EXPECT(gbc.pc(), 0x5ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0357
        gbc.setState(0xa50d, 0x4c43, 0x9e30, 0x3068, 0xa147, 0xfa2b, 0x0, 0x1);
        gbc.writeMem(0xa50d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x4c43);
        EXPECT(gbc.pc(), 0xa50f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50d), 0xcb);
        EXPECT(gbc.readMem(0xa50e), 0xfb);
        // CB FB 0358
        gbc.setState(0x1071, 0x5c2, 0x6960, 0x9159, 0x7bc8, 0xfa0f, 0x0, 0x1);
        gbc.writeMem(0x1071, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5c2);
        EXPECT(gbc.pc(), 0x1073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0359
        gbc.setState(0x9bfa, 0x6555, 0xb0b0, 0xd406, 0x14ca, 0x923f, 0x1, 0x0);
        gbc.writeMem(0x9bfa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6555);
        EXPECT(gbc.pc(), 0x9bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfa), 0xcb);
        EXPECT(gbc.readMem(0x9bfb), 0xfb);
        // CB FB 035A
        gbc.setState(0x39b8, 0xc33f, 0x8360, 0x6425, 0x2b0f, 0xbcd1, 0x0, 0x1);
        gbc.writeMem(0x39b8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc33f);
        EXPECT(gbc.pc(), 0x39ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 035B
        gbc.setState(0xb30c, 0xcd7e, 0x1d80, 0xec08, 0xabdd, 0x3dd7, 0x1, 0x1);
        gbc.writeMem(0xb30c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xcd7e);
        EXPECT(gbc.pc(), 0xb30e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30c), 0xcb);
        EXPECT(gbc.readMem(0xb30d), 0xfb);
        // CB FB 035C
        gbc.setState(0x1a93, 0x3d56, 0xe7a0, 0x2704, 0x8ba1, 0x2ce3, 0x0, 0x0);
        gbc.writeMem(0x1a93, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x3d56);
        EXPECT(gbc.pc(), 0x1a95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 035D
        gbc.setState(0x8dd8, 0x2113, 0x4910, 0xa3cf, 0xae88, 0xf2b, 0x1, 0x1);
        gbc.writeMem(0x8dd8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2113);
        EXPECT(gbc.pc(), 0x8dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd8), 0xcb);
        EXPECT(gbc.readMem(0x8dd9), 0xfb);
        // CB FB 035E
        gbc.setState(0x320d, 0xb35c, 0x75b0, 0xcd3f, 0xc14a, 0x7335, 0x1, 0x1);
        gbc.writeMem(0x320d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb35c);
        EXPECT(gbc.pc(), 0x320f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 035F
        gbc.setState(0x3b80, 0xc9f0, 0xf060, 0x903, 0x591b, 0x15a4, 0x0, 0x1);
        gbc.writeMem(0x3b80, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc9f0);
        EXPECT(gbc.pc(), 0x3b82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0360
        gbc.setState(0xca9c, 0xd1a1, 0xa0b0, 0xdd48, 0x43b, 0xe70f, 0x0, 0x0);
        gbc.writeMem(0xca9c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd1a1);
        EXPECT(gbc.pc(), 0xca9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca9c), 0xcb);
        EXPECT(gbc.readMem(0xca9d), 0xfb);
        // CB FB 0361
        gbc.setState(0xbd36, 0x2a68, 0xf910, 0xa3f5, 0x6ab2, 0xf49e, 0x0, 0x1);
        gbc.writeMem(0xbd36, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2a68);
        EXPECT(gbc.pc(), 0xbd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd36), 0xcb);
        EXPECT(gbc.readMem(0xbd37), 0xfb);
        // CB FB 0362
        gbc.setState(0x1660, 0x28e3, 0x9480, 0x62df, 0x530b, 0xd663, 0x1, 0x1);
        gbc.writeMem(0x1660, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x28e3);
        EXPECT(gbc.pc(), 0x1662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0363
        gbc.setState(0x5f14, 0xe4ef, 0xea40, 0x866b, 0xfd6a, 0x190a, 0x1, 0x1);
        gbc.writeMem(0x5f14, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe4ef);
        EXPECT(gbc.pc(), 0x5f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0364
        gbc.setState(0x1cb1, 0xc698, 0x890, 0x4eaa, 0x1a47, 0x3e1d, 0x0, 0x1);
        gbc.writeMem(0x1cb1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xc698);
        EXPECT(gbc.pc(), 0x1cb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0365
        gbc.setState(0x295b, 0x81a4, 0xe930, 0x9f6e, 0x7e18, 0xc8be, 0x1, 0x0);
        gbc.writeMem(0x295b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x81a4);
        EXPECT(gbc.pc(), 0x295d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0366
        gbc.setState(0xe11c, 0xd72a, 0x200, 0xc0ec, 0xa027, 0x6d74, 0x1, 0x0);
        gbc.writeMem(0xe11c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd72a);
        EXPECT(gbc.pc(), 0xe11e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11c), 0xcb);
        EXPECT(gbc.readMem(0xe11d), 0xfb);
        // CB FB 0367
        gbc.setState(0xafa8, 0x2474, 0xd790, 0x1af2, 0xdf69, 0xe618, 0x0, 0x0);
        gbc.writeMem(0xafa8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2474);
        EXPECT(gbc.pc(), 0xafaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa8), 0xcb);
        EXPECT(gbc.readMem(0xafa9), 0xfb);
        // CB FB 0368
        gbc.setState(0x5c58, 0xa5dd, 0xd4b0, 0xe400, 0x2b82, 0x5403, 0x0, 0x1);
        gbc.writeMem(0x5c58, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa5dd);
        EXPECT(gbc.pc(), 0x5c5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 036A
        gbc.setState(0x9518, 0x77bf, 0x3990, 0x9886, 0x4eb9, 0x69d4, 0x1, 0x0);
        gbc.writeMem(0x9518, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x77bf);
        EXPECT(gbc.pc(), 0x951a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9518), 0xcb);
        EXPECT(gbc.readMem(0x9519), 0xfb);
        // CB FB 036B
        gbc.setState(0x87f5, 0x508a, 0xba90, 0x2da8, 0xb1ee, 0x3b13, 0x0, 0x0);
        gbc.writeMem(0x87f5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x508a);
        EXPECT(gbc.pc(), 0x87f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f5), 0xcb);
        EXPECT(gbc.readMem(0x87f6), 0xfb);
        // CB FB 036C
        gbc.setState(0x54af, 0xf758, 0x2ca0, 0x62a9, 0x2911, 0xeb17, 0x1, 0x1);
        gbc.writeMem(0x54af, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf758);
        EXPECT(gbc.pc(), 0x54b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 036D
        gbc.setState(0xeb2f, 0xbcb7, 0x3270, 0x1e5, 0xd7ab, 0x43ce, 0x0, 0x1);
        gbc.writeMem(0xeb2f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbcb7);
        EXPECT(gbc.pc(), 0xeb31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb2f), 0xcb);
        EXPECT(gbc.readMem(0xeb30), 0xfb);
        // CB FB 036E
        gbc.setState(0x3c3d, 0x35b0, 0xd4f0, 0xd336, 0xc00f, 0x6063, 0x1, 0x1);
        gbc.writeMem(0x3c3d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x35b0);
        EXPECT(gbc.pc(), 0x3c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 036F
        gbc.setState(0x3048, 0x1e53, 0xf040, 0xb65e, 0x81f3, 0xce28, 0x0, 0x0);
        gbc.writeMem(0x3048, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1e53);
        EXPECT(gbc.pc(), 0x304a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0370
        gbc.setState(0x8a6f, 0x7de1, 0x6da0, 0xc11e, 0xfc8b, 0xb089, 0x1, 0x1);
        gbc.writeMem(0x8a6f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7de1);
        EXPECT(gbc.pc(), 0x8a71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6f), 0xcb);
        EXPECT(gbc.readMem(0x8a70), 0xfb);
        // CB FB 0371
        gbc.setState(0x6817, 0x975, 0xd090, 0x7604, 0x4a8c, 0x1637, 0x0, 0x0);
        gbc.writeMem(0x6817, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x975);
        EXPECT(gbc.pc(), 0x6819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0372
        gbc.setState(0xcf2b, 0x8e94, 0x5bb0, 0xb195, 0xc982, 0xa339, 0x1, 0x0);
        gbc.writeMem(0xcf2b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8e94);
        EXPECT(gbc.pc(), 0xcf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2b), 0xcb);
        EXPECT(gbc.readMem(0xcf2c), 0xfb);
        // CB FB 0373
        gbc.setState(0x6624, 0x3e65, 0x6650, 0xfd08, 0xcd24, 0x698e, 0x0, 0x1);
        gbc.writeMem(0x6624, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3e65);
        EXPECT(gbc.pc(), 0x6626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0374
        gbc.setState(0x39d0, 0x8e53, 0xdc0, 0xd575, 0x3f54, 0x1c5b, 0x0, 0x0);
        gbc.writeMem(0x39d0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8e53);
        EXPECT(gbc.pc(), 0x39d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0375
        gbc.setState(0xa211, 0x3b4d, 0x73e0, 0xaffc, 0x8371, 0x54b4, 0x1, 0x0);
        gbc.writeMem(0xa211, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3b4d);
        EXPECT(gbc.pc(), 0xa213);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa211), 0xcb);
        EXPECT(gbc.readMem(0xa212), 0xfb);
        // CB FB 0376
        gbc.setState(0x5a8f, 0x6374, 0x6e0, 0xb2dd, 0xdc79, 0x4eaa, 0x0, 0x1);
        gbc.writeMem(0x5a8f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6374);
        EXPECT(gbc.pc(), 0x5a91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0377
        gbc.setState(0xd5e9, 0xd577, 0x3300, 0x5962, 0x7a32, 0x2646, 0x1, 0x0);
        gbc.writeMem(0xd5e9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd577);
        EXPECT(gbc.pc(), 0xd5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e9), 0xcb);
        EXPECT(gbc.readMem(0xd5ea), 0xfb);
        // CB FB 0378
        gbc.setState(0x1101, 0xf3c5, 0x9450, 0x6ebd, 0x3849, 0x5e4f, 0x0, 0x0);
        gbc.writeMem(0x1101, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf3c5);
        EXPECT(gbc.pc(), 0x1103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0379
        gbc.setState(0x359b, 0x99f7, 0x4560, 0x52a9, 0x3134, 0xd83c, 0x1, 0x0);
        gbc.writeMem(0x359b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0x359d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 037A
        gbc.setState(0xbabd, 0xb864, 0x5bb0, 0x68bf, 0x2ee9, 0xc2eb, 0x0, 0x1);
        gbc.writeMem(0xbabd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xb864);
        EXPECT(gbc.pc(), 0xbabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbabd), 0xcb);
        EXPECT(gbc.readMem(0xbabe), 0xfb);
        // CB FB 037B
        gbc.setState(0x7c4, 0x491d, 0xc2f0, 0x6d76, 0xa640, 0x136f, 0x1, 0x0);
        gbc.writeMem(0x7c4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x491d);
        EXPECT(gbc.pc(), 0x7c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 037D
        gbc.setState(0x41d6, 0xd684, 0x8370, 0x6d48, 0x440b, 0x8306, 0x1, 0x0);
        gbc.writeMem(0x41d6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd684);
        EXPECT(gbc.pc(), 0x41d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 037E
        gbc.setState(0x4b85, 0x55e1, 0xaf80, 0xac15, 0x1de6, 0x73ad, 0x1, 0x1);
        gbc.writeMem(0x4b85, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x55e1);
        EXPECT(gbc.pc(), 0x4b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 037F
        gbc.setState(0x59b4, 0x857e, 0x7a30, 0x168d, 0x4b01, 0x7f76, 0x0, 0x0);
        gbc.writeMem(0x59b4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x857e);
        EXPECT(gbc.pc(), 0x59b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0380
        gbc.setState(0xaa93, 0xb850, 0xe510, 0xf51b, 0x5916, 0xa5ce, 0x0, 0x0);
        gbc.writeMem(0xaa93, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb850);
        EXPECT(gbc.pc(), 0xaa95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa93), 0xcb);
        EXPECT(gbc.readMem(0xaa94), 0xfb);
        // CB FB 0381
        gbc.setState(0xacf1, 0x32ad, 0xeff0, 0x69a5, 0x2b62, 0x92e2, 0x1, 0x0);
        gbc.writeMem(0xacf1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x32ad);
        EXPECT(gbc.pc(), 0xacf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacf1), 0xcb);
        EXPECT(gbc.readMem(0xacf2), 0xfb);
        // CB FB 0382
        gbc.setState(0x3573, 0xec59, 0x2370, 0xf23, 0x5274, 0x896e, 0x1, 0x0);
        gbc.writeMem(0x3573, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xec59);
        EXPECT(gbc.pc(), 0x3575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0383
        gbc.setState(0x239e, 0x3c15, 0x14e0, 0x3dfe, 0x5535, 0x7418, 0x1, 0x1);
        gbc.writeMem(0x239e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x3c15);
        EXPECT(gbc.pc(), 0x23a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0385
        gbc.setState(0xd90c, 0x1eb8, 0xed40, 0x6380, 0x7386, 0x94eb, 0x1, 0x0);
        gbc.writeMem(0xd90c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1eb8);
        EXPECT(gbc.pc(), 0xd90e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90c), 0xcb);
        EXPECT(gbc.readMem(0xd90d), 0xfb);
        // CB FB 0386
        gbc.setState(0xc942, 0x54d, 0xf490, 0x80b8, 0xa6bb, 0xee08, 0x0, 0x1);
        gbc.writeMem(0xc942, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x54d);
        EXPECT(gbc.pc(), 0xc944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc942), 0xcb);
        EXPECT(gbc.readMem(0xc943), 0xfb);
        // CB FB 0387
        gbc.setState(0x1aae, 0x76df, 0x5900, 0xccdb, 0x1c4c, 0xa26, 0x1, 0x0);
        gbc.writeMem(0x1aae, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x76df);
        EXPECT(gbc.pc(), 0x1ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0388
        gbc.setState(0x8a66, 0x867d, 0x9e00, 0xfe6e, 0xbf22, 0xe414, 0x0, 0x0);
        gbc.writeMem(0x8a66, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x867d);
        EXPECT(gbc.pc(), 0x8a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a66), 0xcb);
        EXPECT(gbc.readMem(0x8a67), 0xfb);
        // CB FB 0389
        gbc.setState(0x32bd, 0xdff1, 0x96b0, 0x33c1, 0x5256, 0x63e7, 0x1, 0x0);
        gbc.writeMem(0x32bd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xdff1);
        EXPECT(gbc.pc(), 0x32bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 038A
        gbc.setState(0xa546, 0xb2ab, 0xc9c0, 0x54ec, 0xf380, 0xeb27, 0x1, 0x0);
        gbc.writeMem(0xa546, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb2ab);
        EXPECT(gbc.pc(), 0xa548);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa546), 0xcb);
        EXPECT(gbc.readMem(0xa547), 0xfb);
        // CB FB 038B
        gbc.setState(0x2cc5, 0x8fa3, 0x8090, 0xe80a, 0xe472, 0x2736, 0x0, 0x1);
        gbc.writeMem(0x2cc5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8fa3);
        EXPECT(gbc.pc(), 0x2cc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 038C
        gbc.setState(0x278b, 0x1741, 0xe710, 0x9f11, 0xfbf9, 0x956f, 0x0, 0x0);
        gbc.writeMem(0x278b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1741);
        EXPECT(gbc.pc(), 0x278d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 038D
        gbc.setState(0x1f0d, 0x283, 0xd80, 0x63c4, 0xd78a, 0xda09, 0x0, 0x1);
        gbc.writeMem(0x1f0d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x283);
        EXPECT(gbc.pc(), 0x1f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 038E
        gbc.setState(0x6bad, 0xf0e6, 0x9780, 0x8ec4, 0x4185, 0xcfb4, 0x0, 0x0);
        gbc.writeMem(0x6bad, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf0e6);
        EXPECT(gbc.pc(), 0x6baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 038F
        gbc.setState(0xa763, 0x65c8, 0xe210, 0x9f18, 0x2622, 0x47b0, 0x0, 0x0);
        gbc.writeMem(0xa763, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x65c8);
        EXPECT(gbc.pc(), 0xa765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa763), 0xcb);
        EXPECT(gbc.readMem(0xa764), 0xfb);
        // CB FB 0390
        gbc.setState(0xd400, 0xe985, 0x5610, 0x9c86, 0xcbcf, 0x6c63, 0x0, 0x0);
        gbc.writeMem(0xd400, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xe985);
        EXPECT(gbc.pc(), 0xd402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd400), 0xcb);
        EXPECT(gbc.readMem(0xd401), 0xfb);
        // CB FB 0391
        gbc.setState(0x98d7, 0xd28e, 0x9b20, 0x8f3b, 0x74db, 0x7716, 0x0, 0x0);
        gbc.writeMem(0x98d7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd28e);
        EXPECT(gbc.pc(), 0x98d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d7), 0xcb);
        EXPECT(gbc.readMem(0x98d8), 0xfb);
        // CB FB 0392
        gbc.setState(0x4b40, 0x74ff, 0xf830, 0x7761, 0x9bf7, 0x91a5, 0x0, 0x0);
        gbc.writeMem(0x4b40, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x74ff);
        EXPECT(gbc.pc(), 0x4b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0393
        gbc.setState(0xe3fa, 0x8cee, 0x9a0, 0x9462, 0x4744, 0xa5b0, 0x0, 0x1);
        gbc.writeMem(0xe3fa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8cee);
        EXPECT(gbc.pc(), 0xe3fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3fa), 0xcb);
        EXPECT(gbc.readMem(0xe3fb), 0xfb);
        // CB FB 0394
        gbc.setState(0x6f50, 0xbe3a, 0xc4f0, 0x142c, 0xdbad, 0x1ddf, 0x1, 0x0);
        gbc.writeMem(0x6f50, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbe3a);
        EXPECT(gbc.pc(), 0x6f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0395
        gbc.setState(0x5c05, 0x78c5, 0x43a0, 0x9b3, 0x994b, 0x7401, 0x0, 0x0);
        gbc.writeMem(0x5c05, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x78c5);
        EXPECT(gbc.pc(), 0x5c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 0396
        gbc.setState(0x758e, 0x249c, 0x3830, 0x8045, 0xc5f8, 0x9e5b, 0x1, 0x0);
        gbc.writeMem(0x758e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x249c);
        EXPECT(gbc.pc(), 0x7590);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 0397
        gbc.setState(0xa157, 0x21ff, 0x5ea0, 0xd1c0, 0x3c91, 0x1fbf, 0x1, 0x0);
        gbc.writeMem(0xa157, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x21ff);
        EXPECT(gbc.pc(), 0xa159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa157), 0xcb);
        EXPECT(gbc.readMem(0xa158), 0xfb);
        // CB FB 0398
        gbc.setState(0x9d81, 0xe7ae, 0x8dd0, 0x1e5f, 0x9a46, 0x1cb8, 0x1, 0x0);
        gbc.writeMem(0x9d81, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe7ae);
        EXPECT(gbc.pc(), 0x9d83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d81), 0xcb);
        EXPECT(gbc.readMem(0x9d82), 0xfb);
        // CB FB 0399
        gbc.setState(0x79aa, 0xee85, 0x8990, 0xe574, 0x2b92, 0x191, 0x1, 0x1);
        gbc.writeMem(0x79aa, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xee85);
        EXPECT(gbc.pc(), 0x79ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 039A
        gbc.setState(0x1fca, 0xb0e4, 0xa6c0, 0xde0f, 0x4fba, 0x4b5b, 0x1, 0x1);
        gbc.writeMem(0x1fca, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb0e4);
        EXPECT(gbc.pc(), 0x1fcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 039B
        gbc.setState(0x6a93, 0x6e3b, 0xd760, 0x1a4a, 0xff0, 0x9c9f, 0x1, 0x1);
        gbc.writeMem(0x6a93, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6e3b);
        EXPECT(gbc.pc(), 0x6a95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 039D
        gbc.setState(0xed2b, 0xd8, 0xbd00, 0x4c2d, 0xc1ea, 0x4714, 0x0, 0x1);
        gbc.writeMem(0xed2b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd8);
        EXPECT(gbc.pc(), 0xed2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed2b), 0xcb);
        EXPECT(gbc.readMem(0xed2c), 0xfb);
        // CB FB 039E
        gbc.setState(0xcf66, 0xe3ad, 0x6d0, 0xc943, 0x356f, 0x45dd, 0x1, 0x0);
        gbc.writeMem(0xcf66, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe3ad);
        EXPECT(gbc.pc(), 0xcf68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf66), 0xcb);
        EXPECT(gbc.readMem(0xcf67), 0xfb);
        // CB FB 039F
        gbc.setState(0xb5f6, 0xc4e2, 0xea50, 0xff60, 0x92f, 0x8e1f, 0x1, 0x0);
        gbc.writeMem(0xb5f6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xc4e2);
        EXPECT(gbc.pc(), 0xb5f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5f6), 0xcb);
        EXPECT(gbc.readMem(0xb5f7), 0xfb);
        // CB FB 03A0
        gbc.setState(0xcc5d, 0x1790, 0x4620, 0x1030, 0x2c05, 0xb345, 0x0, 0x1);
        gbc.writeMem(0xcc5d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1790);
        EXPECT(gbc.pc(), 0xcc5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc5d), 0xcb);
        EXPECT(gbc.readMem(0xcc5e), 0xfb);
        // CB FB 03A1
        gbc.setState(0x5564, 0x937c, 0x6640, 0x85c, 0x67, 0x55ef, 0x1, 0x1);
        gbc.writeMem(0x5564, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x937c);
        EXPECT(gbc.pc(), 0x5566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03A2
        gbc.setState(0x625b, 0xfe7b, 0xf7b0, 0xa68e, 0xe2e9, 0xcf3e, 0x1, 0x1);
        gbc.writeMem(0x625b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfe7b);
        EXPECT(gbc.pc(), 0x625d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03A3
        gbc.setState(0x6344, 0xbc05, 0x6ac0, 0xbbbd, 0xac97, 0x577c, 0x1, 0x1);
        gbc.writeMem(0x6344, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbc05);
        EXPECT(gbc.pc(), 0x6346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03A4
        gbc.setState(0xa02f, 0x90e7, 0xe510, 0xa328, 0x7e86, 0xa817, 0x0, 0x1);
        gbc.writeMem(0xa02f, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x90e7);
        EXPECT(gbc.pc(), 0xa031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa02f), 0xcb);
        EXPECT(gbc.readMem(0xa030), 0xfb);
        // CB FB 03A5
        gbc.setState(0x1c06, 0xf83f, 0x3dd0, 0x9a, 0x76d, 0x5bd, 0x1, 0x1);
        gbc.writeMem(0x1c06, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf83f);
        EXPECT(gbc.pc(), 0x1c08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03A7
        gbc.setState(0x37a9, 0x8564, 0x2a20, 0xf280, 0xb5db, 0x2099, 0x0, 0x1);
        gbc.writeMem(0x37a9, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x8564);
        EXPECT(gbc.pc(), 0x37ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03A8
        gbc.setState(0x8dc, 0x976, 0x1770, 0xd352, 0xc818, 0xc5a6, 0x1, 0x0);
        gbc.writeMem(0x8dc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x976);
        EXPECT(gbc.pc(), 0x8de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03A9
        gbc.setState(0x29f7, 0x74c, 0xcab0, 0x335f, 0x744a, 0x373e, 0x0, 0x1);
        gbc.writeMem(0x29f7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x74c);
        EXPECT(gbc.pc(), 0x29f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03AA
        gbc.setState(0x14ba, 0xcc91, 0x8580, 0xdea8, 0xe977, 0x78e1, 0x0, 0x1);
        gbc.writeMem(0x14ba, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xcc91);
        EXPECT(gbc.pc(), 0x14bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03AB
        gbc.setState(0x2523, 0x8a74, 0x1480, 0xc282, 0xafd6, 0x9c30, 0x0, 0x1);
        gbc.writeMem(0x2523, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8a74);
        EXPECT(gbc.pc(), 0x2525);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03AC
        gbc.setState(0x2ec6, 0xf4a5, 0xbb10, 0x8359, 0x3c6f, 0x3af9, 0x1, 0x1);
        gbc.writeMem(0x2ec6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xf4a5);
        EXPECT(gbc.pc(), 0x2ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03AE
        gbc.setState(0x2c76, 0x752f, 0xd660, 0xb644, 0x68ea, 0xe362, 0x1, 0x0);
        gbc.writeMem(0x2c76, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x752f);
        EXPECT(gbc.pc(), 0x2c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03AF
        gbc.setState(0xb000, 0x6b92, 0xf6c0, 0xf23b, 0xa268, 0xb48, 0x1, 0x1);
        gbc.writeMem(0xb000, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6b92);
        EXPECT(gbc.pc(), 0xb002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb000), 0xcb);
        EXPECT(gbc.readMem(0xb001), 0xfb);
        // CB FB 03B0
        gbc.setState(0x6c5e, 0xfc75, 0xfc0, 0x6a62, 0x1627, 0xbfdc, 0x1, 0x1);
        gbc.writeMem(0x6c5e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfc75);
        EXPECT(gbc.pc(), 0x6c60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03B1
        gbc.setState(0x766b, 0x4643, 0x7e30, 0x746b, 0xe838, 0xbc25, 0x0, 0x0);
        gbc.writeMem(0x766b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4643);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03B2
        gbc.setState(0x58a2, 0xfe1d, 0x7650, 0xa1be, 0x2962, 0xb0ae, 0x0, 0x1);
        gbc.writeMem(0x58a2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xfe1d);
        EXPECT(gbc.pc(), 0x58a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03B3
        gbc.setState(0xe5e5, 0x85d8, 0xd830, 0xe0d7, 0x43e3, 0x7744, 0x1, 0x0);
        gbc.writeMem(0xe5e5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x85d8);
        EXPECT(gbc.pc(), 0xe5e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e5), 0xcb);
        EXPECT(gbc.readMem(0xe5e6), 0xfb);
        // CB FB 03B4
        gbc.setState(0xa9dc, 0x3d65, 0x5800, 0x51b3, 0x62d8, 0xae09, 0x0, 0x1);
        gbc.writeMem(0xa9dc, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3d65);
        EXPECT(gbc.pc(), 0xa9de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9dc), 0xcb);
        EXPECT(gbc.readMem(0xa9dd), 0xfb);
        // CB FB 03B5
        gbc.setState(0xa9ac, 0x2c1b, 0x5980, 0x39ad, 0xb080, 0x676c, 0x0, 0x0);
        gbc.writeMem(0xa9ac, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2c1b);
        EXPECT(gbc.pc(), 0xa9ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ac), 0xcb);
        EXPECT(gbc.readMem(0xa9ad), 0xfb);
        // CB FB 03B6
        gbc.setState(0xc6ef, 0x6566, 0xa6b0, 0xb104, 0x8222, 0x14, 0x0, 0x0);
        gbc.writeMem(0xc6ef, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6566);
        EXPECT(gbc.pc(), 0xc6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ef), 0xcb);
        EXPECT(gbc.readMem(0xc6f0), 0xfb);
        // CB FB 03B7
        gbc.setState(0x638d, 0x20aa, 0xcbe0, 0xa3b0, 0x31ae, 0x959, 0x0, 0x1);
        gbc.writeMem(0x638d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x20aa);
        EXPECT(gbc.pc(), 0x638f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03B9
        gbc.setState(0xcff7, 0xc719, 0x21f0, 0x774c, 0xf76, 0xd575, 0x1, 0x0);
        gbc.writeMem(0xcff7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xc719);
        EXPECT(gbc.pc(), 0xcff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcff7), 0xcb);
        EXPECT(gbc.readMem(0xcff8), 0xfb);
        // CB FB 03BA
        gbc.setState(0xcd18, 0x5ac3, 0xa5e0, 0x25de, 0x5236, 0x67a1, 0x0, 0x0);
        gbc.writeMem(0xcd18, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5ac3);
        EXPECT(gbc.pc(), 0xcd1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd18), 0xcb);
        EXPECT(gbc.readMem(0xcd19), 0xfb);
        // CB FB 03BB
        gbc.setState(0x2ca2, 0xd9d8, 0xd4f0, 0x9936, 0x2c60, 0xe44c, 0x1, 0x1);
        gbc.writeMem(0x2ca2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd9d8);
        EXPECT(gbc.pc(), 0x2ca4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03BC
        gbc.setState(0x4912, 0x492, 0xb560, 0xfb42, 0x3868, 0xbbd0, 0x1, 0x0);
        gbc.writeMem(0x4912, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x492);
        EXPECT(gbc.pc(), 0x4914);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03BD
        gbc.setState(0x455b, 0x6db1, 0x4cd0, 0x9b70, 0xba1, 0x8226, 0x0, 0x1);
        gbc.writeMem(0x455b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6db1);
        EXPECT(gbc.pc(), 0x455d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03BE
        gbc.setState(0x56d7, 0x791d, 0xf390, 0x777b, 0xbe2c, 0x7a3e, 0x1, 0x0);
        gbc.writeMem(0x56d7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x791d);
        EXPECT(gbc.pc(), 0x56d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03BF
        gbc.setState(0x52ff, 0xdf14, 0xbd10, 0x44ff, 0x1b86, 0xa03b, 0x0, 0x1);
        gbc.writeMem(0x52ff, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdf14);
        EXPECT(gbc.pc(), 0x5301);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03C0
        gbc.setState(0x19b5, 0xc9ee, 0x1990, 0xf099, 0x508e, 0xb310, 0x0, 0x1);
        gbc.writeMem(0x19b5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc9ee);
        EXPECT(gbc.pc(), 0x19b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03C1
        gbc.setState(0xbab2, 0x8683, 0xb540, 0x9d9c, 0xddbc, 0x72e3, 0x1, 0x1);
        gbc.writeMem(0xbab2, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8683);
        EXPECT(gbc.pc(), 0xbab4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab2), 0xcb);
        EXPECT(gbc.readMem(0xbab3), 0xfb);
        // CB FB 03C2
        gbc.setState(0xdc72, 0xf9f8, 0x5750, 0x9380, 0x56d7, 0x346e, 0x1, 0x0);
        gbc.writeMem(0xdc72, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf9f8);
        EXPECT(gbc.pc(), 0xdc74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc72), 0xcb);
        EXPECT(gbc.readMem(0xdc73), 0xfb);
        // CB FB 03C3
        gbc.setState(0x7e30, 0x47d4, 0x5880, 0x6009, 0x4332, 0xd62e, 0x0, 0x0);
        gbc.writeMem(0x7e30, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x47d4);
        EXPECT(gbc.pc(), 0x7e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03C4
        gbc.setState(0xcec6, 0x7f9, 0xa670, 0x6354, 0xfe54, 0xf12c, 0x0, 0x0);
        gbc.writeMem(0xcec6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7f9);
        EXPECT(gbc.pc(), 0xcec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec6), 0xcb);
        EXPECT(gbc.readMem(0xcec7), 0xfb);
        // CB FB 03C5
        gbc.setState(0x9aa6, 0x125f, 0x5610, 0x64e, 0x937f, 0x3436, 0x0, 0x0);
        gbc.writeMem(0x9aa6, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x125f);
        EXPECT(gbc.pc(), 0x9aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa6), 0xcb);
        EXPECT(gbc.readMem(0x9aa7), 0xfb);
        // CB FB 03C7
        gbc.setState(0xea42, 0x197e, 0xede0, 0xff40, 0x13d0, 0xc877, 0x1, 0x1);
        gbc.writeMem(0xea42, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x197e);
        EXPECT(gbc.pc(), 0xea44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea42), 0xcb);
        EXPECT(gbc.readMem(0xea43), 0xfb);
        // CB FB 03C8
        gbc.setState(0xc9f7, 0x5b28, 0x8980, 0x1f88, 0x85db, 0xe6c0, 0x0, 0x1);
        gbc.writeMem(0xc9f7, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5b28);
        EXPECT(gbc.pc(), 0xc9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9f7), 0xcb);
        EXPECT(gbc.readMem(0xc9f8), 0xfb);
        // CB FB 03C9
        gbc.setState(0x4258, 0x42fa, 0x25b0, 0xc783, 0x1f4b, 0x4757, 0x1, 0x1);
        gbc.writeMem(0x4258, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x42fa);
        EXPECT(gbc.pc(), 0x425a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03CA
        gbc.setState(0x15a8, 0x3b06, 0x1d20, 0x5725, 0x77f1, 0xfaf6, 0x1, 0x1);
        gbc.writeMem(0x15a8, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3b06);
        EXPECT(gbc.pc(), 0x15aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03CB
        gbc.setState(0x1f1, 0x3a7b, 0x9f90, 0xa050, 0x9436, 0x67d1, 0x1, 0x1);
        gbc.writeMem(0x1f1, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3a7b);
        EXPECT(gbc.pc(), 0x1f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03CC
        gbc.setState(0xc395, 0xa40f, 0x9ea0, 0x376d, 0x9ac9, 0x8ecf, 0x0, 0x0);
        gbc.writeMem(0xc395, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa40f);
        EXPECT(gbc.pc(), 0xc397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc395), 0xcb);
        EXPECT(gbc.readMem(0xc396), 0xfb);
        // CB FB 03CE
        gbc.setState(0x398, 0x861a, 0xea0, 0x9997, 0x8c5b, 0x7022, 0x0, 0x1);
        gbc.writeMem(0x398, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x861a);
        EXPECT(gbc.pc(), 0x39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03CF
        gbc.setState(0xe093, 0x9740, 0x280, 0x3090, 0x9fe9, 0x7784, 0x0, 0x0);
        gbc.writeMem(0xe093, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9740);
        EXPECT(gbc.pc(), 0xe095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe093), 0xcb);
        EXPECT(gbc.readMem(0xe094), 0xfb);
        // CB FB 03D0
        gbc.setState(0x95c3, 0x1a2, 0x7af0, 0xa48d, 0x315d, 0x2d78, 0x0, 0x0);
        gbc.writeMem(0x95c3, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1a2);
        EXPECT(gbc.pc(), 0x95c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95c3), 0xcb);
        EXPECT(gbc.readMem(0x95c4), 0xfb);
        // CB FB 03D1
        gbc.setState(0x246e, 0x35d0, 0x6c90, 0xe028, 0x4383, 0xad1f, 0x0, 0x0);
        gbc.writeMem(0x246e, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x35d0);
        EXPECT(gbc.pc(), 0x2470);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03D2
        gbc.setState(0xde4a, 0xcf95, 0xa4c0, 0x982b, 0xd901, 0x9d6c, 0x1, 0x1);
        gbc.writeMem(0xde4a, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcf95);
        EXPECT(gbc.pc(), 0xde4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4a), 0xcb);
        EXPECT(gbc.readMem(0xde4b), 0xfb);
        // CB FB 03D3
        gbc.setState(0x8577, 0xb4d, 0xf990, 0x67f6, 0x20e, 0x26cf, 0x0, 0x1);
        gbc.writeMem(0x8577, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb4d);
        EXPECT(gbc.pc(), 0x8579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8577), 0xcb);
        EXPECT(gbc.readMem(0x8578), 0xfb);
        // CB FB 03D4
        gbc.setState(0x3317, 0xe319, 0x45f0, 0x56af, 0xd11a, 0x7909, 0x1, 0x1);
        gbc.writeMem(0x3317, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe319);
        EXPECT(gbc.pc(), 0x3319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03D5
        gbc.setState(0xc1b0, 0x5901, 0xa1e0, 0xa41, 0xc03f, 0x6077, 0x0, 0x0);
        gbc.writeMem(0xc1b0, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x5901);
        EXPECT(gbc.pc(), 0xc1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b0), 0xcb);
        EXPECT(gbc.readMem(0xc1b1), 0xfb);
        // CB FB 03D6
        gbc.setState(0x3d43, 0x3714, 0xd8c0, 0xb36b, 0x37bd, 0xb5fa, 0x1, 0x1);
        gbc.writeMem(0x3d43, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x3714);
        EXPECT(gbc.pc(), 0x3d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03D8
        gbc.setState(0x60dd, 0xc6b6, 0x7e00, 0xb822, 0x5e10, 0xf48d, 0x1, 0x1);
        gbc.writeMem(0x60dd, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc6b6);
        EXPECT(gbc.pc(), 0x60df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03D9
        gbc.setState(0x7e1d, 0xe685, 0x8700, 0x32c9, 0xaff1, 0xad4d, 0x1, 0x1);
        gbc.writeMem(0x7e1d, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe685);
        EXPECT(gbc.pc(), 0x7e1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03DA
        gbc.setState(0xdece, 0x1e4e, 0x3620, 0xfbda, 0x1e7e, 0x925c, 0x0, 0x0);
        gbc.writeMem(0xdece, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1e4e);
        EXPECT(gbc.pc(), 0xded0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdece), 0xcb);
        EXPECT(gbc.readMem(0xdecf), 0xfb);
        // CB FB 03DB
        gbc.setState(0x9335, 0xb732, 0xe710, 0xfc73, 0x48ef, 0xcdf4, 0x1, 0x0);
        gbc.writeMem(0x9335, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb732);
        EXPECT(gbc.pc(), 0x9337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9335), 0xcb);
        EXPECT(gbc.readMem(0x9336), 0xfb);
        // CB FB 03DC
        gbc.setState(0x714c, 0xdf8c, 0xb8d0, 0xcd46, 0xca78, 0xb594, 0x0, 0x0);
        gbc.writeMem(0x714c, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xdf8c);
        EXPECT(gbc.pc(), 0x714e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03DD
        gbc.setState(0x1d21, 0xc550, 0x3f40, 0x848b, 0x19b0, 0xc749, 0x1, 0x0);
        gbc.writeMem(0x1d21, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc550);
        EXPECT(gbc.pc(), 0x1d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03DE
        gbc.setState(0xe063, 0xc910, 0xb900, 0xe994, 0xf695, 0xfa44, 0x1, 0x0);
        gbc.writeMem(0xe063, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc910);
        EXPECT(gbc.pc(), 0xe065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe063), 0xcb);
        EXPECT(gbc.readMem(0xe064), 0xfb);
        // CB FB 03DF
        gbc.setState(0x916b, 0x6eb0, 0x71e0, 0xe6eb, 0xcb84, 0x7960, 0x0, 0x0);
        gbc.writeMem(0x916b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6eb0);
        EXPECT(gbc.pc(), 0x916d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916b), 0xcb);
        EXPECT(gbc.readMem(0x916c), 0xfb);
        // CB FB 03E1
        gbc.setState(0x7d4b, 0x5f71, 0xcf40, 0x650a, 0x817, 0xf3f4, 0x0, 0x0);
        gbc.writeMem(0x7d4b, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5f71);
        EXPECT(gbc.pc(), 0x7d4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03E2
        gbc.setState(0x39ee, 0x94d3, 0x5d60, 0x119f, 0xd3ac, 0x9bc0, 0x1, 0x0);
        gbc.writeMem(0x39ee, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x94d3);
        EXPECT(gbc.pc(), 0x39f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03E3
        gbc.setState(0x6def, 0x520a, 0x4f10, 0xdf2c, 0xdbb, 0xdf60, 0x0, 0x0);
        gbc.writeMem(0x6def, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x520a);
        EXPECT(gbc.pc(), 0x6df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03E4
        gbc.setState(0x3a95, 0x5857, 0x7590, 0x91e1, 0xd588, 0x2f1, 0x0, 0x1);
        gbc.writeMem(0x3a95, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5857);
        EXPECT(gbc.pc(), 0x3a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03E5
        gbc.setState(0x3ec4, 0xc9d8, 0x4ef0, 0x29fc, 0xf476, 0xc1f2, 0x1, 0x1);
        gbc.writeMem(0x3ec4, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc9d8);
        EXPECT(gbc.pc(), 0x3ec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB FB 03E6
        gbc.setState(0x5b44, 0xab41, 0x1aa0, 0xd0ff, 0x7396, 0x53d0, 0x0, 0x1);
        gbc.writeMem(0x5b44, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xab41);
        EXPECT(gbc.pc(), 0x5b46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB FB 03E7
        gbc.setState(0x40c5, 0x1cd9, 0x8180, 0xf350, 0x1888, 0xed6a, 0x0, 0x1);
        gbc.writeMem(0x40c5, { 0xcb, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1cd9);
        EXPECT(gbc.pc(), 0x40c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
