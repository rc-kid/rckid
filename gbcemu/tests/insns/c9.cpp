#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_c9)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_c9) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // C9 0000
        gbc.setState(0xb7f5, 0x9f4e, 0xb5d0, 0x30f8, 0x4cb8, 0xa904, 0x0, 0x1);
        gbc.writeMem(0x9f4e, { 0x7e, 0x3b });
        gbc.writeMem(0xb7f5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9f50);
        EXPECT(gbc.pc(), 0x3b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f4e), 0x7e);
        EXPECT(gbc.readMem(0x9f4f), 0x3b);
        EXPECT(gbc.readMem(0xb7f5), 0xc9);
        // C9 0001
        gbc.setState(0xee04, 0xed7f, 0xbfe0, 0x7342, 0x8a15, 0xb54b, 0x0, 0x1);
        gbc.writeMem(0xed7f, { 0x38, 0x2b });
        gbc.writeMem(0xee04, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xed81);
        EXPECT(gbc.pc(), 0x2b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed7f), 0x38);
        EXPECT(gbc.readMem(0xed80), 0x2b);
        EXPECT(gbc.readMem(0xee04), 0xc9);
        // C9 0002
        gbc.setState(0x526d, 0xd5d2, 0x8c90, 0xd9ac, 0xa150, 0xcae2, 0x1, 0x0);
        gbc.writeMem(0x526d, { 0xc9 });
        gbc.writeMem(0xd5d2, { 0xc8, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd5d4);
        EXPECT(gbc.pc(), 0x2cc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5d2), 0xc8);
        EXPECT(gbc.readMem(0xd5d3), 0x2c);
        // C9 0003
        gbc.setState(0xc089, 0xdb3a, 0xef60, 0x88f5, 0x4797, 0x7e8e, 0x1, 0x0);
        gbc.writeMem(0xc089, { 0xc9 });
        gbc.writeMem(0xdb3a, { 0xa4, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdb3c);
        EXPECT(gbc.pc(), 0xb0a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc089), 0xc9);
        EXPECT(gbc.readMem(0xdb3a), 0xa4);
        EXPECT(gbc.readMem(0xdb3b), 0xb0);
        // C9 0004
        gbc.setState(0xbd9c, 0xa2e2, 0x9410, 0xe21a, 0xd6dd, 0x6d45, 0x1, 0x1);
        gbc.writeMem(0xa2e2, { 0x67, 0x0 });
        gbc.writeMem(0xbd9c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa2e4);
        EXPECT(gbc.pc(), 0x67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2e2), 0x67);
        EXPECT(gbc.readMem(0xa2e3), 0x0);
        EXPECT(gbc.readMem(0xbd9c), 0xc9);
        // C9 0005
        gbc.setState(0xad08, 0x6c55, 0x6280, 0xe7ea, 0xbe40, 0x15e9, 0x1, 0x1);
        gbc.writeMem(0x6c55, { 0xa2, 0x15 });
        gbc.writeMem(0xad08, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6c57);
        EXPECT(gbc.pc(), 0x15a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad08), 0xc9);
        // C9 0006
        gbc.setState(0x729d, 0xd1cb, 0x71c0, 0xb34d, 0x2acf, 0xf849, 0x1, 0x1);
        gbc.writeMem(0x729d, { 0xc9 });
        gbc.writeMem(0xd1cb, { 0x89, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd1cd);
        EXPECT(gbc.pc(), 0x389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1cb), 0x89);
        EXPECT(gbc.readMem(0xd1cc), 0x3);
        // C9 0007
        gbc.setState(0x8f57, 0x62d6, 0x9a10, 0xc93b, 0xd2e0, 0x1df4, 0x0, 0x0);
        gbc.writeMem(0x62d6, { 0x49, 0x16 });
        gbc.writeMem(0x8f57, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x62d8);
        EXPECT(gbc.pc(), 0x1649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f57), 0xc9);
        // C9 0008
        gbc.setState(0x8eae, 0xc071, 0x6740, 0x69d7, 0xa68b, 0x8397, 0x1, 0x1);
        gbc.writeMem(0x8eae, { 0xc9 });
        gbc.writeMem(0xc071, { 0x5d, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc073);
        EXPECT(gbc.pc(), 0xbb5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eae), 0xc9);
        EXPECT(gbc.readMem(0xc071), 0x5d);
        EXPECT(gbc.readMem(0xc072), 0xbb);
        // C9 0009
        gbc.setState(0x249a, 0xd99d, 0x7260, 0x9f53, 0x8005, 0xe52a, 0x1, 0x1);
        gbc.writeMem(0x249a, { 0xc9 });
        gbc.writeMem(0xd99d, { 0x75, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd99f);
        EXPECT(gbc.pc(), 0xa675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd99d), 0x75);
        EXPECT(gbc.readMem(0xd99e), 0xa6);
        // C9 000A
        gbc.setState(0x3fd0, 0xf0b0, 0x45b0, 0x389a, 0x7ea, 0xd7a, 0x1, 0x0);
        gbc.writeMem(0x3fd0, { 0xc9 });
        gbc.writeMem(0xf0b0, { 0x1, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf0b2);
        EXPECT(gbc.pc(), 0xc901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf0b0), 0x1);
        EXPECT(gbc.readMem(0xf0b1), 0xc9);
        // C9 000B
        gbc.setState(0x4c2e, 0x9080, 0x6bd0, 0xa51f, 0x1cd7, 0xf427, 0x0, 0x1);
        gbc.writeMem(0x4c2e, { 0xc9 });
        gbc.writeMem(0x9080, { 0xab, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9082);
        EXPECT(gbc.pc(), 0x27ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9080), 0xab);
        EXPECT(gbc.readMem(0x9081), 0x27);
        // C9 000C
        gbc.setState(0x6134, 0x6a5c, 0x1840, 0xa926, 0xb6ec, 0x2ba, 0x0, 0x0);
        gbc.writeMem(0x6134, { 0xc9 });
        gbc.writeMem(0x6a5c, { 0xd8, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6a5e);
        EXPECT(gbc.pc(), 0x29d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 000D
        gbc.setState(0x8ff0, 0x8e30, 0x6b50, 0x5386, 0x4f88, 0x5470, 0x1, 0x0);
        gbc.writeMem(0x8e30, { 0x21, 0x22 });
        gbc.writeMem(0x8ff0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8e32);
        EXPECT(gbc.pc(), 0x2221);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e30), 0x21);
        EXPECT(gbc.readMem(0x8e31), 0x22);
        EXPECT(gbc.readMem(0x8ff0), 0xc9);
        // C9 000E
        gbc.setState(0xbf8a, 0x3fd1, 0xe340, 0xe22e, 0xd65d, 0xffb, 0x0, 0x1);
        gbc.writeMem(0x3fd1, { 0xd8, 0x73 });
        gbc.writeMem(0xbf8a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3fd3);
        EXPECT(gbc.pc(), 0x73d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8a), 0xc9);
        // C9 000F
        gbc.setState(0x1f83, 0x4244, 0x15f0, 0x6d2b, 0x3cb7, 0xa775, 0x0, 0x1);
        gbc.writeMem(0x1f83, { 0xc9 });
        gbc.writeMem(0x4244, { 0x10, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4246);
        EXPECT(gbc.pc(), 0x8710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0010
        gbc.setState(0x40bb, 0x87ca, 0xee00, 0x29a9, 0x728f, 0x42db, 0x0, 0x1);
        gbc.writeMem(0x40bb, { 0xc9 });
        gbc.writeMem(0x87ca, { 0x83, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x87cc);
        EXPECT(gbc.pc(), 0x1f83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ca), 0x83);
        EXPECT(gbc.readMem(0x87cb), 0x1f);
        // C9 0011
        gbc.setState(0x84ae, 0x3f1c, 0xb820, 0xfb2a, 0x5876, 0x34fe, 0x1, 0x0);
        gbc.writeMem(0x3f1c, { 0x1b, 0x95 });
        gbc.writeMem(0x84ae, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3f1e);
        EXPECT(gbc.pc(), 0x951b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ae), 0xc9);
        // C9 0012
        gbc.setState(0x8ca1, 0x5536, 0x3040, 0x5922, 0x3814, 0xd996, 0x0, 0x0);
        gbc.writeMem(0x5536, { 0x7a, 0x62 });
        gbc.writeMem(0x8ca1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5538);
        EXPECT(gbc.pc(), 0x627a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca1), 0xc9);
        // C9 0013
        gbc.setState(0x2ce7, 0xbcb7, 0x96b0, 0xf4dd, 0x4050, 0x95, 0x1, 0x1);
        gbc.writeMem(0x2ce7, { 0xc9 });
        gbc.writeMem(0xbcb7, { 0x6a, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xbcb9);
        EXPECT(gbc.pc(), 0x996a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb7), 0x6a);
        EXPECT(gbc.readMem(0xbcb8), 0x99);
        // C9 0014
        gbc.setState(0x161e, 0xe87b, 0x5870, 0xb9d6, 0x2586, 0xe6c3, 0x1, 0x1);
        gbc.writeMem(0x161e, { 0xc9 });
        gbc.writeMem(0xe87b, { 0xfc, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe87d);
        EXPECT(gbc.pc(), 0xe9fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe87b), 0xfc);
        EXPECT(gbc.readMem(0xe87c), 0xe9);
        // C9 0015
        gbc.setState(0x437e, 0xad4a, 0xad70, 0xb46, 0xb25c, 0x8018, 0x0, 0x0);
        gbc.writeMem(0x437e, { 0xc9 });
        gbc.writeMem(0xad4a, { 0xdc, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xad4c);
        EXPECT(gbc.pc(), 0xcdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4a), 0xdc);
        EXPECT(gbc.readMem(0xad4b), 0xc);
        // C9 0016
        gbc.setState(0xc7a3, 0x153c, 0xf050, 0x3a46, 0xa7f1, 0xcf25, 0x1, 0x0);
        gbc.writeMem(0x153c, { 0x41, 0x5 });
        gbc.writeMem(0xc7a3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x153e);
        EXPECT(gbc.pc(), 0x541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7a3), 0xc9);
        // C9 0018
        gbc.setState(0x52dd, 0x383e, 0xf820, 0x783a, 0x41dd, 0x53d4, 0x0, 0x1);
        gbc.writeMem(0x383e, { 0x1a, 0x64 });
        gbc.writeMem(0x52dd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3840);
        EXPECT(gbc.pc(), 0x641a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0019
        gbc.setState(0x2d08, 0xcfdc, 0x7e0, 0xc3e8, 0xe686, 0x8632, 0x0, 0x1);
        gbc.writeMem(0x2d08, { 0xc9 });
        gbc.writeMem(0xcfdc, { 0xc3, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xcfde);
        EXPECT(gbc.pc(), 0xdec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfdc), 0xc3);
        EXPECT(gbc.readMem(0xcfdd), 0xde);
        // C9 001A
        gbc.setState(0xb372, 0x6554, 0x4c10, 0xa490, 0x358d, 0xda89, 0x1, 0x0);
        gbc.writeMem(0x6554, { 0x59, 0x71 });
        gbc.writeMem(0xb372, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6556);
        EXPECT(gbc.pc(), 0x7159);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb372), 0xc9);
        // C9 001B
        gbc.setState(0x9784, 0x809d, 0xdaa0, 0x3afc, 0x98ad, 0xe700, 0x0, 0x1);
        gbc.writeMem(0x809d, { 0x5f, 0xac });
        gbc.writeMem(0x9784, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x809f);
        EXPECT(gbc.pc(), 0xac5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809d), 0x5f);
        EXPECT(gbc.readMem(0x809e), 0xac);
        EXPECT(gbc.readMem(0x9784), 0xc9);
        // C9 001C
        gbc.setState(0xbb82, 0x1aea, 0xfc50, 0xbd9a, 0x134a, 0x552d, 0x1, 0x1);
        gbc.writeMem(0x1aea, { 0x1e, 0x4c });
        gbc.writeMem(0xbb82, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1aec);
        EXPECT(gbc.pc(), 0x4c1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb82), 0xc9);
        // C9 001D
        gbc.setState(0xc0e, 0xe3b7, 0x7240, 0x9965, 0xc8c4, 0x5030, 0x0, 0x0);
        gbc.writeMem(0xc0e, { 0xc9 });
        gbc.writeMem(0xe3b7, { 0x78, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe3b9);
        EXPECT(gbc.pc(), 0x9078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b7), 0x78);
        EXPECT(gbc.readMem(0xe3b8), 0x90);
        // C9 001E
        gbc.setState(0x95f8, 0xeadd, 0xa870, 0xdf0e, 0x4cab, 0x8ca, 0x1, 0x1);
        gbc.writeMem(0x95f8, { 0xc9 });
        gbc.writeMem(0xeadd, { 0xa7, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xeadf);
        EXPECT(gbc.pc(), 0x48a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f8), 0xc9);
        EXPECT(gbc.readMem(0xeadd), 0xa7);
        EXPECT(gbc.readMem(0xeade), 0x48);
        // C9 001F
        gbc.setState(0x99a3, 0x110c, 0xbff0, 0xd9a9, 0x3383, 0x1547, 0x0, 0x1);
        gbc.writeMem(0x110c, { 0x2d, 0x6b });
        gbc.writeMem(0x99a3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x110e);
        EXPECT(gbc.pc(), 0x6b2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a3), 0xc9);
        // C9 0020
        gbc.setState(0x5b9d, 0xcbc, 0x5f0, 0xcab3, 0xd27a, 0x2733, 0x1, 0x1);
        gbc.writeMem(0xcbc, { 0xaa, 0x36 });
        gbc.writeMem(0x5b9d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xcbe);
        EXPECT(gbc.pc(), 0x36aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0021
        gbc.setState(0x83ec, 0xab48, 0x9720, 0x8f27, 0xbc91, 0x6ef8, 0x0, 0x1);
        gbc.writeMem(0x83ec, { 0xc9 });
        gbc.writeMem(0xab48, { 0xef, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xab4a);
        EXPECT(gbc.pc(), 0x42ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ec), 0xc9);
        EXPECT(gbc.readMem(0xab48), 0xef);
        EXPECT(gbc.readMem(0xab49), 0x42);
        // C9 0022
        gbc.setState(0xe743, 0xc1ed, 0xc6b0, 0x1c4e, 0xfeab, 0x156f, 0x1, 0x1);
        gbc.writeMem(0xc1ed, { 0xc5, 0x75 });
        gbc.writeMem(0xe743, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc1ef);
        EXPECT(gbc.pc(), 0x75c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1ed), 0xc5);
        EXPECT(gbc.readMem(0xc1ee), 0x75);
        EXPECT(gbc.readMem(0xe743), 0xc9);
        // C9 0023
        gbc.setState(0x429f, 0x574e, 0x4080, 0x1e36, 0xe090, 0xa6d9, 0x0, 0x1);
        gbc.writeMem(0x429f, { 0xc9 });
        gbc.writeMem(0x574e, { 0x77, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5750);
        EXPECT(gbc.pc(), 0x8877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0024
        gbc.setState(0x7ce6, 0x4672, 0x52e0, 0x8d8a, 0x3ab9, 0xafdf, 0x0, 0x0);
        gbc.writeMem(0x4672, { 0xd6, 0x44 });
        gbc.writeMem(0x7ce6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4674);
        EXPECT(gbc.pc(), 0x44d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0025
        gbc.setState(0xca96, 0x83a3, 0x3410, 0xd7e2, 0x77cc, 0x76ff, 0x0, 0x1);
        gbc.writeMem(0x83a3, { 0x31, 0x98 });
        gbc.writeMem(0xca96, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x83a5);
        EXPECT(gbc.pc(), 0x9831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83a3), 0x31);
        EXPECT(gbc.readMem(0x83a4), 0x98);
        EXPECT(gbc.readMem(0xca96), 0xc9);
        // C9 0026
        gbc.setState(0x3b16, 0xf5e7, 0xf180, 0x8454, 0xd212, 0xa7df, 0x0, 0x1);
        gbc.writeMem(0x3b16, { 0xc9 });
        gbc.writeMem(0xf5e7, { 0xce, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf5e9);
        EXPECT(gbc.pc(), 0x7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5e7), 0xce);
        EXPECT(gbc.readMem(0xf5e8), 0x7);
        // C9 0027
        gbc.setState(0x4af9, 0xe79e, 0x9320, 0x92dc, 0x807e, 0x6024, 0x1, 0x1);
        gbc.writeMem(0x4af9, { 0xc9 });
        gbc.writeMem(0xe79e, { 0x6c, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe7a0);
        EXPECT(gbc.pc(), 0x5e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe79e), 0x6c);
        EXPECT(gbc.readMem(0xe79f), 0x5e);
        // C9 0028
        gbc.setState(0x8f39, 0x790f, 0x4390, 0x6030, 0x8cb0, 0x3f4f, 0x1, 0x1);
        gbc.writeMem(0x790f, { 0x6e, 0x15 });
        gbc.writeMem(0x8f39, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7911);
        EXPECT(gbc.pc(), 0x156e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f39), 0xc9);
        // C9 0029
        gbc.setState(0x8323, 0x24f6, 0x6a10, 0x9f1c, 0xdaee, 0x47f2, 0x1, 0x1);
        gbc.writeMem(0x24f6, { 0x49, 0x2a });
        gbc.writeMem(0x8323, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x24f8);
        EXPECT(gbc.pc(), 0x2a49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8323), 0xc9);
        // C9 002A
        gbc.setState(0x90e, 0x7b9a, 0x6700, 0x1024, 0x879f, 0xdb49, 0x1, 0x0);
        gbc.writeMem(0x90e, { 0xc9 });
        gbc.writeMem(0x7b9a, { 0x14, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7b9c);
        EXPECT(gbc.pc(), 0x1514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 002B
        gbc.setState(0xc545, 0xb1d7, 0xe320, 0x84c5, 0x4385, 0xe969, 0x1, 0x0);
        gbc.writeMem(0xb1d7, { 0xe1, 0xbf });
        gbc.writeMem(0xc545, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb1d9);
        EXPECT(gbc.pc(), 0xbfe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1d7), 0xe1);
        EXPECT(gbc.readMem(0xb1d8), 0xbf);
        EXPECT(gbc.readMem(0xc545), 0xc9);
        // C9 002C
        gbc.setState(0x91a0, 0x96c8, 0x6670, 0x4324, 0x5b5a, 0xf196, 0x0, 0x0);
        gbc.writeMem(0x91a0, { 0xc9 });
        gbc.writeMem(0x96c8, { 0x8e, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x96ca);
        EXPECT(gbc.pc(), 0xa38e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a0), 0xc9);
        EXPECT(gbc.readMem(0x96c8), 0x8e);
        EXPECT(gbc.readMem(0x96c9), 0xa3);
        // C9 002D
        gbc.setState(0x2dce, 0xa6b0, 0xcf70, 0x1f8b, 0xc542, 0x6452, 0x0, 0x1);
        gbc.writeMem(0x2dce, { 0xc9 });
        gbc.writeMem(0xa6b0, { 0xb2, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa6b2);
        EXPECT(gbc.pc(), 0x15b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6b0), 0xb2);
        EXPECT(gbc.readMem(0xa6b1), 0x15);
        // C9 002E
        gbc.setState(0x1a02, 0x44ce, 0x3ee0, 0x43f8, 0x4219, 0xe1e7, 0x0, 0x1);
        gbc.writeMem(0x1a02, { 0xc9 });
        gbc.writeMem(0x44ce, { 0x84, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x44d0);
        EXPECT(gbc.pc(), 0x2a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 002F
        gbc.setState(0x2a32, 0x3c91, 0x3ce0, 0x9dda, 0x6f9c, 0x1577, 0x1, 0x1);
        gbc.writeMem(0x2a32, { 0xc9 });
        gbc.writeMem(0x3c91, { 0xbf, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3c93);
        EXPECT(gbc.pc(), 0xcbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0030
        gbc.setState(0xa7c, 0x921e, 0x6280, 0x65e7, 0x7e9, 0xdee7, 0x0, 0x0);
        gbc.writeMem(0xa7c, { 0xc9 });
        gbc.writeMem(0x921e, { 0x0, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9220);
        EXPECT(gbc.pc(), 0xe800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921e), 0x0);
        EXPECT(gbc.readMem(0x921f), 0xe8);
        // C9 0031
        gbc.setState(0x5035, 0x148, 0x6d90, 0x1c22, 0x9d5b, 0x9d1c, 0x1, 0x1);
        gbc.writeMem(0x148, { 0x4d, 0x14 });
        gbc.writeMem(0x5035, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x14a);
        EXPECT(gbc.pc(), 0x144d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0032
        gbc.setState(0x2f95, 0x4898, 0x64d0, 0xf028, 0xc1e5, 0x706f, 0x1, 0x1);
        gbc.writeMem(0x2f95, { 0xc9 });
        gbc.writeMem(0x4898, { 0xa9, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x489a);
        EXPECT(gbc.pc(), 0xc8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0033
        gbc.setState(0x3419, 0x82cf, 0xea30, 0xa934, 0xaeb8, 0x65d2, 0x1, 0x0);
        gbc.writeMem(0x3419, { 0xc9 });
        gbc.writeMem(0x82cf, { 0x1f, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x82d1);
        EXPECT(gbc.pc(), 0x331f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cf), 0x1f);
        EXPECT(gbc.readMem(0x82d0), 0x33);
        // C9 0034
        gbc.setState(0x1cea, 0x13c1, 0x27e0, 0x9caa, 0xef0a, 0x76ce, 0x0, 0x0);
        gbc.writeMem(0x13c1, { 0xe9, 0x5f });
        gbc.writeMem(0x1cea, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x13c3);
        EXPECT(gbc.pc(), 0x5fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0035
        gbc.setState(0x3102, 0x9345, 0x8b70, 0xd91, 0x5002, 0x9150, 0x0, 0x0);
        gbc.writeMem(0x3102, { 0xc9 });
        gbc.writeMem(0x9345, { 0x4a, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9347);
        EXPECT(gbc.pc(), 0x3e4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9345), 0x4a);
        EXPECT(gbc.readMem(0x9346), 0x3e);
        // C9 0036
        gbc.setState(0x199c, 0x4d31, 0xe2d0, 0x633f, 0x4409, 0x915e, 0x0, 0x0);
        gbc.writeMem(0x199c, { 0xc9 });
        gbc.writeMem(0x4d31, { 0xf8, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4d33);
        EXPECT(gbc.pc(), 0xaaf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0037
        gbc.setState(0x993f, 0xc51b, 0x8300, 0x2e59, 0x7955, 0xde45, 0x0, 0x1);
        gbc.writeMem(0x993f, { 0xc9 });
        gbc.writeMem(0xc51b, { 0xb3, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc51d);
        EXPECT(gbc.pc(), 0x5fb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993f), 0xc9);
        EXPECT(gbc.readMem(0xc51b), 0xb3);
        EXPECT(gbc.readMem(0xc51c), 0x5f);
        // C9 0038
        gbc.setState(0xdbc9, 0x10d9, 0xaf80, 0x57c, 0x7899, 0x5037, 0x0, 0x0);
        gbc.writeMem(0x10d9, { 0xcc, 0x61 });
        gbc.writeMem(0xdbc9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x10db);
        EXPECT(gbc.pc(), 0x61cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbc9), 0xc9);
        // C9 0039
        gbc.setState(0x518f, 0x7c55, 0x4370, 0x74bc, 0x29cc, 0x854f, 0x1, 0x1);
        gbc.writeMem(0x518f, { 0xc9 });
        gbc.writeMem(0x7c55, { 0x62, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7c57);
        EXPECT(gbc.pc(), 0x7062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 003A
        gbc.setState(0x25e0, 0x641d, 0xd3a0, 0xfd3, 0x669e, 0x3a48, 0x0, 0x1);
        gbc.writeMem(0x25e0, { 0xc9 });
        gbc.writeMem(0x641d, { 0xf7, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x641f);
        EXPECT(gbc.pc(), 0x27f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 003B
        gbc.setState(0x1b06, 0xb25f, 0xe730, 0x2e32, 0x65b1, 0x6010, 0x0, 0x1);
        gbc.writeMem(0x1b06, { 0xc9 });
        gbc.writeMem(0xb25f, { 0xd3, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb261);
        EXPECT(gbc.pc(), 0xe3d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb25f), 0xd3);
        EXPECT(gbc.readMem(0xb260), 0xe3);
        // C9 003C
        gbc.setState(0x55cd, 0x2f63, 0x2cc0, 0x2954, 0x4425, 0x172c, 0x1, 0x1);
        gbc.writeMem(0x2f63, { 0x3b, 0xce });
        gbc.writeMem(0x55cd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2f65);
        EXPECT(gbc.pc(), 0xce3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 003D
        gbc.setState(0x2178, 0xa149, 0x410, 0x35f2, 0x2452, 0x80a6, 0x1, 0x1);
        gbc.writeMem(0x2178, { 0xc9 });
        gbc.writeMem(0xa149, { 0x3b, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa14b);
        EXPECT(gbc.pc(), 0xe13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa149), 0x3b);
        EXPECT(gbc.readMem(0xa14a), 0xe1);
        // C9 003E
        gbc.setState(0x4be8, 0xdf85, 0xf1d0, 0xc956, 0x4d88, 0xc152, 0x0, 0x0);
        gbc.writeMem(0x4be8, { 0xc9 });
        gbc.writeMem(0xdf85, { 0xee, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdf87);
        EXPECT(gbc.pc(), 0x8bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf85), 0xee);
        EXPECT(gbc.readMem(0xdf86), 0x8b);
        // C9 003F
        gbc.setState(0xa29c, 0x4f7b, 0xdc0, 0x1f5, 0xd909, 0x9944, 0x0, 0x1);
        gbc.writeMem(0x4f7b, { 0xe7, 0x78 });
        gbc.writeMem(0xa29c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4f7d);
        EXPECT(gbc.pc(), 0x78e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa29c), 0xc9);
        // C9 0040
        gbc.setState(0x7946, 0x1af4, 0xa270, 0x416b, 0xf24b, 0xd6ec, 0x1, 0x0);
        gbc.writeMem(0x1af4, { 0x95, 0xc7 });
        gbc.writeMem(0x7946, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1af6);
        EXPECT(gbc.pc(), 0xc795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0041
        gbc.setState(0x1717, 0x1bab, 0xacd0, 0xabe6, 0xc443, 0x1d8e, 0x1, 0x0);
        gbc.writeMem(0x1717, { 0xc9 });
        gbc.writeMem(0x1bab, { 0x1b, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1bad);
        EXPECT(gbc.pc(), 0x271b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0042
        gbc.setState(0x929e, 0x554a, 0x40f0, 0xd92e, 0xfe69, 0x6e60, 0x0, 0x1);
        gbc.writeMem(0x554a, { 0xa1, 0x54 });
        gbc.writeMem(0x929e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x554c);
        EXPECT(gbc.pc(), 0x54a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x929e), 0xc9);
        // C9 0044
        gbc.setState(0x81b1, 0x9e5e, 0x7130, 0x1279, 0x38af, 0x223b, 0x0, 0x1);
        gbc.writeMem(0x81b1, { 0xc9 });
        gbc.writeMem(0x9e5e, { 0x9, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x9e60);
        EXPECT(gbc.pc(), 0xa409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81b1), 0xc9);
        EXPECT(gbc.readMem(0x9e5e), 0x9);
        EXPECT(gbc.readMem(0x9e5f), 0xa4);
        // C9 0045
        gbc.setState(0x5406, 0x2ea6, 0x1780, 0x49d5, 0xee72, 0x3d94, 0x1, 0x1);
        gbc.writeMem(0x2ea6, { 0x14, 0x15 });
        gbc.writeMem(0x5406, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2ea8);
        EXPECT(gbc.pc(), 0x1514);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0046
        gbc.setState(0x3ac, 0xf56b, 0xde0, 0x2f1, 0x7427, 0x4217, 0x1, 0x1);
        gbc.writeMem(0x3ac, { 0xc9 });
        gbc.writeMem(0xf56b, { 0x2d, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf56d);
        EXPECT(gbc.pc(), 0x942d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf56b), 0x2d);
        EXPECT(gbc.readMem(0xf56c), 0x94);
        // C9 0047
        gbc.setState(0x3ac5, 0x9b4b, 0x9400, 0xdd45, 0xe601, 0xed83, 0x1, 0x1);
        gbc.writeMem(0x3ac5, { 0xc9 });
        gbc.writeMem(0x9b4b, { 0x88, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9b4d);
        EXPECT(gbc.pc(), 0xc488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4b), 0x88);
        EXPECT(gbc.readMem(0x9b4c), 0xc4);
        // C9 0048
        gbc.setState(0xc467, 0x7080, 0x2c20, 0x9da3, 0x555b, 0x4d61, 0x1, 0x0);
        gbc.writeMem(0x7080, { 0xca, 0x1c });
        gbc.writeMem(0xc467, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7082);
        EXPECT(gbc.pc(), 0x1cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc467), 0xc9);
        // C9 0049
        gbc.setState(0x21f1, 0xbdf7, 0xf5f0, 0xe1c6, 0x3773, 0x8d83, 0x0, 0x0);
        gbc.writeMem(0x21f1, { 0xc9 });
        gbc.writeMem(0xbdf7, { 0xc8, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xbdf9);
        EXPECT(gbc.pc(), 0x29c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf7), 0xc8);
        EXPECT(gbc.readMem(0xbdf8), 0x29);
        // C9 004A
        gbc.setState(0xc046, 0xb3f9, 0xbb20, 0x3e7a, 0xb4a, 0x764e, 0x1, 0x0);
        gbc.writeMem(0xb3f9, { 0x21, 0xe6 });
        gbc.writeMem(0xc046, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb3fb);
        EXPECT(gbc.pc(), 0xe621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f9), 0x21);
        EXPECT(gbc.readMem(0xb3fa), 0xe6);
        EXPECT(gbc.readMem(0xc046), 0xc9);
        // C9 004B
        gbc.setState(0xc6ff, 0x1358, 0x910, 0xc741, 0x74ea, 0x3741, 0x1, 0x0);
        gbc.writeMem(0x1358, { 0x36, 0x87 });
        gbc.writeMem(0xc6ff, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x135a);
        EXPECT(gbc.pc(), 0x8736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6ff), 0xc9);
        // C9 004C
        gbc.setState(0xc03a, 0xa92e, 0xf0e0, 0x205d, 0xb191, 0x8676, 0x1, 0x0);
        gbc.writeMem(0xa92e, { 0xda, 0x99 });
        gbc.writeMem(0xc03a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa930);
        EXPECT(gbc.pc(), 0x99da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa92e), 0xda);
        EXPECT(gbc.readMem(0xa92f), 0x99);
        EXPECT(gbc.readMem(0xc03a), 0xc9);
        // C9 004D
        gbc.setState(0x19c0, 0x3129, 0x7a10, 0xf849, 0x3f91, 0x2c8a, 0x1, 0x1);
        gbc.writeMem(0x19c0, { 0xc9 });
        gbc.writeMem(0x3129, { 0x91, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x312b);
        EXPECT(gbc.pc(), 0x2d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 004E
        gbc.setState(0x862d, 0x943d, 0x1c00, 0x1f7a, 0x891d, 0xd8a4, 0x0, 0x1);
        gbc.writeMem(0x862d, { 0xc9 });
        gbc.writeMem(0x943d, { 0x26, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x943f);
        EXPECT(gbc.pc(), 0xa226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x862d), 0xc9);
        EXPECT(gbc.readMem(0x943d), 0x26);
        EXPECT(gbc.readMem(0x943e), 0xa2);
        // C9 004F
        gbc.setState(0x49a8, 0x4c87, 0x3b90, 0xb39e, 0x127d, 0x7cf9, 0x0, 0x1);
        gbc.writeMem(0x49a8, { 0xc9 });
        gbc.writeMem(0x4c87, { 0x85, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4c89);
        EXPECT(gbc.pc(), 0x3385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0050
        gbc.setState(0x7618, 0xe56e, 0xf520, 0x1e05, 0xcbfb, 0xf3f3, 0x1, 0x1);
        gbc.writeMem(0x7618, { 0xc9 });
        gbc.writeMem(0xe56e, { 0x70, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe570);
        EXPECT(gbc.pc(), 0x1f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe56e), 0x70);
        EXPECT(gbc.readMem(0xe56f), 0x1f);
        // C9 0051
        gbc.setState(0x7421, 0x9dfb, 0xe460, 0xba9e, 0xd157, 0x5ef7, 0x1, 0x0);
        gbc.writeMem(0x7421, { 0xc9 });
        gbc.writeMem(0x9dfb, { 0xce, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9dfd);
        EXPECT(gbc.pc(), 0xadce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dfb), 0xce);
        EXPECT(gbc.readMem(0x9dfc), 0xad);
        // C9 0052
        gbc.setState(0x1013, 0x8512, 0x13a0, 0xc4fb, 0xbefa, 0x2b1b, 0x1, 0x1);
        gbc.writeMem(0x1013, { 0xc9 });
        gbc.writeMem(0x8512, { 0x6a, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8514);
        EXPECT(gbc.pc(), 0x596a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8512), 0x6a);
        EXPECT(gbc.readMem(0x8513), 0x59);
        // C9 0053
        gbc.setState(0x7803, 0xbc40, 0x7e20, 0x4232, 0xd7ef, 0x657b, 0x1, 0x1);
        gbc.writeMem(0x7803, { 0xc9 });
        gbc.writeMem(0xbc40, { 0xef, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbc42);
        EXPECT(gbc.pc(), 0x69ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc40), 0xef);
        EXPECT(gbc.readMem(0xbc41), 0x69);
        // C9 0054
        gbc.setState(0x4657, 0x932c, 0x2410, 0x150e, 0xe71b, 0x125f, 0x1, 0x0);
        gbc.writeMem(0x4657, { 0xc9 });
        gbc.writeMem(0x932c, { 0xf6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x932e);
        EXPECT(gbc.pc(), 0x2ff6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932c), 0xf6);
        EXPECT(gbc.readMem(0x932d), 0x2f);
        // C9 0055
        gbc.setState(0x3a8f, 0x1464, 0x8410, 0x84da, 0x77d0, 0xd3e4, 0x0, 0x0);
        gbc.writeMem(0x1464, { 0xa9, 0x41 });
        gbc.writeMem(0x3a8f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1466);
        EXPECT(gbc.pc(), 0x41a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0056
        gbc.setState(0xe7a7, 0x2fcc, 0xbaa0, 0xfd9e, 0x79df, 0xae30, 0x1, 0x1);
        gbc.writeMem(0x2fcc, { 0xc0, 0x8d });
        gbc.writeMem(0xe7a7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x2fce);
        EXPECT(gbc.pc(), 0x8dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a7), 0xc9);
        // C9 0057
        gbc.setState(0xc4d0, 0x3fb2, 0x5420, 0x6a4, 0x74ef, 0x3b41, 0x0, 0x1);
        gbc.writeMem(0x3fb2, { 0x2, 0x77 });
        gbc.writeMem(0xc4d0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3fb4);
        EXPECT(gbc.pc(), 0x7702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d0), 0xc9);
        // C9 0058
        gbc.setState(0x6bdc, 0x7ef7, 0xd7a0, 0x3ac8, 0xb23d, 0x756a, 0x0, 0x0);
        gbc.writeMem(0x6bdc, { 0xc9 });
        gbc.writeMem(0x7ef7, { 0x95, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7ef9);
        EXPECT(gbc.pc(), 0x4895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0059
        gbc.setState(0xef0c, 0x1102, 0x4860, 0xc68, 0x863e, 0xbb97, 0x0, 0x0);
        gbc.writeMem(0x1102, { 0x5c, 0x4c });
        gbc.writeMem(0xef0c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1104);
        EXPECT(gbc.pc(), 0x4c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef0c), 0xc9);
        // C9 005A
        gbc.setState(0x3182, 0x490c, 0x2270, 0x18dc, 0x4555, 0xab0, 0x1, 0x0);
        gbc.writeMem(0x3182, { 0xc9 });
        gbc.writeMem(0x490c, { 0x55, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x490e);
        EXPECT(gbc.pc(), 0xbb55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 005B
        gbc.setState(0x70b8, 0xe0f4, 0xa5c0, 0xa918, 0xacd3, 0x149, 0x0, 0x0);
        gbc.writeMem(0x70b8, { 0xc9 });
        gbc.writeMem(0xe0f4, { 0xfc, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe0f6);
        EXPECT(gbc.pc(), 0xfffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0f4), 0xfc);
        EXPECT(gbc.readMem(0xe0f5), 0xff);
        // C9 005C
        gbc.setState(0x5e00, 0x5ae6, 0xf650, 0x57b0, 0x475d, 0xec00, 0x0, 0x1);
        gbc.writeMem(0x5ae6, { 0x5, 0xb0 });
        gbc.writeMem(0x5e00, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5ae8);
        EXPECT(gbc.pc(), 0xb005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 005D
        gbc.setState(0x1393, 0x4214, 0xd430, 0xa81b, 0x5767, 0x439c, 0x1, 0x1);
        gbc.writeMem(0x1393, { 0xc9 });
        gbc.writeMem(0x4214, { 0x42, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4216);
        EXPECT(gbc.pc(), 0xb142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 005E
        gbc.setState(0x5fb, 0xf903, 0xd980, 0x125c, 0x363f, 0xba27, 0x0, 0x1);
        gbc.writeMem(0x5fb, { 0xc9 });
        gbc.writeMem(0xf903, { 0x5, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xf905);
        EXPECT(gbc.pc(), 0x7d05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf903), 0x5);
        EXPECT(gbc.readMem(0xf904), 0x7d);
        // C9 005F
        gbc.setState(0xce4d, 0x42a3, 0xfe50, 0x6dd3, 0x159, 0x5738, 0x0, 0x0);
        gbc.writeMem(0x42a3, { 0x97, 0xe7 });
        gbc.writeMem(0xce4d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x42a5);
        EXPECT(gbc.pc(), 0xe797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4d), 0xc9);
        // C9 0060
        gbc.setState(0x5a4f, 0x8c7d, 0x5950, 0x3361, 0xd3c1, 0x15b3, 0x0, 0x0);
        gbc.writeMem(0x5a4f, { 0xc9 });
        gbc.writeMem(0x8c7d, { 0xe0, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8c7f);
        EXPECT(gbc.pc(), 0xafe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c7d), 0xe0);
        EXPECT(gbc.readMem(0x8c7e), 0xaf);
        // C9 0061
        gbc.setState(0x31a0, 0x9b7a, 0x6d50, 0x1963, 0x15f7, 0x39f4, 0x0, 0x1);
        gbc.writeMem(0x31a0, { 0xc9 });
        gbc.writeMem(0x9b7a, { 0xa0, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9b7c);
        EXPECT(gbc.pc(), 0xdaa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b7a), 0xa0);
        EXPECT(gbc.readMem(0x9b7b), 0xda);
        // C9 0062
        gbc.setState(0xaa35, 0x866a, 0xea60, 0xebef, 0x656d, 0x33cb, 0x0, 0x0);
        gbc.writeMem(0x866a, { 0xee, 0xe });
        gbc.writeMem(0xaa35, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x866c);
        EXPECT(gbc.pc(), 0xeee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866a), 0xee);
        EXPECT(gbc.readMem(0x866b), 0xe);
        EXPECT(gbc.readMem(0xaa35), 0xc9);
        // C9 0063
        gbc.setState(0xa24d, 0xd464, 0x5ea0, 0x1ee8, 0xedde, 0x6406, 0x0, 0x0);
        gbc.writeMem(0xa24d, { 0xc9 });
        gbc.writeMem(0xd464, { 0xf7, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd466);
        EXPECT(gbc.pc(), 0x22f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa24d), 0xc9);
        EXPECT(gbc.readMem(0xd464), 0xf7);
        EXPECT(gbc.readMem(0xd465), 0x22);
        // C9 0064
        gbc.setState(0x90fd, 0xdc24, 0xfa0, 0x8750, 0xc03f, 0xdce8, 0x0, 0x0);
        gbc.writeMem(0x90fd, { 0xc9 });
        gbc.writeMem(0xdc24, { 0x48, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xdc26);
        EXPECT(gbc.pc(), 0x5848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fd), 0xc9);
        EXPECT(gbc.readMem(0xdc24), 0x48);
        EXPECT(gbc.readMem(0xdc25), 0x58);
        // C9 0065
        gbc.setState(0x3af2, 0x49f5, 0x680, 0x313d, 0xf7e8, 0x37e3, 0x1, 0x0);
        gbc.writeMem(0x3af2, { 0xc9 });
        gbc.writeMem(0x49f5, { 0xf1, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x49f7);
        EXPECT(gbc.pc(), 0x77f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0066
        gbc.setState(0xb0a1, 0xfde1, 0x9dc0, 0xa58b, 0x5322, 0xb329, 0x0, 0x1);
        gbc.writeMem(0xb0a1, { 0xc9 });
        gbc.writeMem(0xfde1, { 0xa0, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfde3);
        EXPECT(gbc.pc(), 0xf5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a1), 0xc9);
        EXPECT(gbc.readMem(0xfde1), 0xa0);
        EXPECT(gbc.readMem(0xfde2), 0xf5);
        // C9 0068
        gbc.setState(0x920c, 0x61d5, 0xd760, 0x62b4, 0x6e39, 0xe318, 0x0, 0x0);
        gbc.writeMem(0x61d5, { 0xd4, 0x9c });
        gbc.writeMem(0x920c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x61d7);
        EXPECT(gbc.pc(), 0x9cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920c), 0xc9);
        // C9 0069
        gbc.setState(0xdb9d, 0x5324, 0xe220, 0xa354, 0xd74b, 0x891, 0x0, 0x0);
        gbc.writeMem(0x5324, { 0x2d, 0x85 });
        gbc.writeMem(0xdb9d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5326);
        EXPECT(gbc.pc(), 0x852d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9d), 0xc9);
        // C9 006A
        gbc.setState(0x61e, 0x96d4, 0x1820, 0x9629, 0x1c45, 0x535d, 0x0, 0x0);
        gbc.writeMem(0x61e, { 0xc9 });
        gbc.writeMem(0x96d4, { 0x9, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x96d6);
        EXPECT(gbc.pc(), 0x7509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d4), 0x9);
        EXPECT(gbc.readMem(0x96d5), 0x75);
        // C9 006B
        gbc.setState(0x9aa9, 0x3a28, 0xec80, 0x5149, 0x674b, 0xcc04, 0x0, 0x0);
        gbc.writeMem(0x3a28, { 0xa3, 0xd9 });
        gbc.writeMem(0x9aa9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3a2a);
        EXPECT(gbc.pc(), 0xd9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa9), 0xc9);
        // C9 006C
        gbc.setState(0x475d, 0xc630, 0x5320, 0x2fbb, 0x9ed2, 0x43b, 0x1, 0x1);
        gbc.writeMem(0x475d, { 0xc9 });
        gbc.writeMem(0xc630, { 0x7b, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc632);
        EXPECT(gbc.pc(), 0x647b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc630), 0x7b);
        EXPECT(gbc.readMem(0xc631), 0x64);
        // C9 006E
        gbc.setState(0x617d, 0x5a4d, 0xee0, 0x93a, 0x12f0, 0xb2b8, 0x0, 0x0);
        gbc.writeMem(0x5a4d, { 0x8b, 0xf0 });
        gbc.writeMem(0x617d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5a4f);
        EXPECT(gbc.pc(), 0xf08b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 006F
        gbc.setState(0xa341, 0x5754, 0xed10, 0xe418, 0xc270, 0xf74d, 0x1, 0x0);
        gbc.writeMem(0x5754, { 0x73, 0x6d });
        gbc.writeMem(0xa341, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5756);
        EXPECT(gbc.pc(), 0x6d73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa341), 0xc9);
        // C9 0070
        gbc.setState(0x8257, 0x27b2, 0x25e0, 0x6fb5, 0x90b4, 0x86fd, 0x0, 0x0);
        gbc.writeMem(0x27b2, { 0x61, 0xc4 });
        gbc.writeMem(0x8257, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x27b4);
        EXPECT(gbc.pc(), 0xc461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8257), 0xc9);
        // C9 0073
        gbc.setState(0xcc25, 0xb0d, 0xc760, 0xcb7a, 0xd46a, 0x5f0b, 0x1, 0x1);
        gbc.writeMem(0xb0d, { 0x12, 0xc });
        gbc.writeMem(0xcc25, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb0f);
        EXPECT(gbc.pc(), 0xc12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc25), 0xc9);
        // C9 0074
        gbc.setState(0x1673, 0xf503, 0xaa0, 0xaf8d, 0xdc88, 0xd7, 0x1, 0x0);
        gbc.writeMem(0x1673, { 0xc9 });
        gbc.writeMem(0xf503, { 0xd9, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf505);
        EXPECT(gbc.pc(), 0xb3d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf503), 0xd9);
        EXPECT(gbc.readMem(0xf504), 0xb3);
        // C9 0075
        gbc.setState(0xe750, 0xda3e, 0xfd0, 0x2507, 0x2909, 0x2cad, 0x1, 0x0);
        gbc.writeMem(0xda3e, { 0x90, 0x33 });
        gbc.writeMem(0xe750, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xda40);
        EXPECT(gbc.pc(), 0x3390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3e), 0x90);
        EXPECT(gbc.readMem(0xda3f), 0x33);
        EXPECT(gbc.readMem(0xe750), 0xc9);
        // C9 0076
        gbc.setState(0x911e, 0x4198, 0xd230, 0x44d7, 0xe470, 0xf792, 0x1, 0x0);
        gbc.writeMem(0x4198, { 0xcf, 0xe });
        gbc.writeMem(0x911e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x419a);
        EXPECT(gbc.pc(), 0xecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x911e), 0xc9);
        // C9 0077
        gbc.setState(0xcbfd, 0x2c30, 0xebc0, 0xe2d2, 0x3e52, 0xf4c2, 0x0, 0x0);
        gbc.writeMem(0x2c30, { 0x49, 0xaf });
        gbc.writeMem(0xcbfd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2c32);
        EXPECT(gbc.pc(), 0xaf49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfd), 0xc9);
        // C9 0079
        gbc.setState(0x39ff, 0x2df0, 0x16c0, 0xc4af, 0xd0f5, 0x96c0, 0x1, 0x0);
        gbc.writeMem(0x2df0, { 0x13, 0x9f });
        gbc.writeMem(0x39ff, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2df2);
        EXPECT(gbc.pc(), 0x9f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 007A
        gbc.setState(0x7b6f, 0x3235, 0x6c50, 0x36a2, 0x8627, 0xd361, 0x1, 0x0);
        gbc.writeMem(0x3235, { 0xfb, 0xdb });
        gbc.writeMem(0x7b6f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3237);
        EXPECT(gbc.pc(), 0xdbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 007B
        gbc.setState(0x7415, 0x64b2, 0x5050, 0x8630, 0xc0d7, 0x4961, 0x1, 0x1);
        gbc.writeMem(0x64b2, { 0xae, 0x83 });
        gbc.writeMem(0x7415, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0x83ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 007C
        gbc.setState(0x95dd, 0xca58, 0xee10, 0x553d, 0x73c2, 0xb72d, 0x1, 0x0);
        gbc.writeMem(0x95dd, { 0xc9 });
        gbc.writeMem(0xca58, { 0xa1, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xca5a);
        EXPECT(gbc.pc(), 0xa3a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95dd), 0xc9);
        EXPECT(gbc.readMem(0xca58), 0xa1);
        EXPECT(gbc.readMem(0xca59), 0xa3);
        // C9 007D
        gbc.setState(0xead6, 0xdeef, 0x9590, 0x2339, 0x3a4f, 0x8b6f, 0x1, 0x0);
        gbc.writeMem(0xdeef, { 0xc1, 0x6b });
        gbc.writeMem(0xead6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xdef1);
        EXPECT(gbc.pc(), 0x6bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeef), 0xc1);
        EXPECT(gbc.readMem(0xdef0), 0x6b);
        EXPECT(gbc.readMem(0xead6), 0xc9);
        // C9 007E
        gbc.setState(0x4b91, 0x77d6, 0xb000, 0xfd78, 0xb012, 0x337e, 0x1, 0x1);
        gbc.writeMem(0x4b91, { 0xc9 });
        gbc.writeMem(0x77d6, { 0x83, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x77d8);
        EXPECT(gbc.pc(), 0xa583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 007F
        gbc.setState(0xadd7, 0xa3fb, 0x56b0, 0xfebf, 0x7466, 0xd42d, 0x1, 0x0);
        gbc.writeMem(0xa3fb, { 0x7e, 0x86 });
        gbc.writeMem(0xadd7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa3fd);
        EXPECT(gbc.pc(), 0x867e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3fb), 0x7e);
        EXPECT(gbc.readMem(0xa3fc), 0x86);
        EXPECT(gbc.readMem(0xadd7), 0xc9);
        // C9 0080
        gbc.setState(0xc838, 0x2d6c, 0x430, 0x33a, 0xe5af, 0xd9bd, 0x1, 0x1);
        gbc.writeMem(0x2d6c, { 0xb3, 0x21 });
        gbc.writeMem(0xc838, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2d6e);
        EXPECT(gbc.pc(), 0x21b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc838), 0xc9);
        // C9 0081
        gbc.setState(0x1ccb, 0x2bd8, 0x9f60, 0x30cc, 0xbf0e, 0xa25e, 0x0, 0x1);
        gbc.writeMem(0x1ccb, { 0xc9 });
        gbc.writeMem(0x2bd8, { 0x5, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2bda);
        EXPECT(gbc.pc(), 0x1605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0082
        gbc.setState(0xab46, 0x4abd, 0x8df0, 0xf702, 0x34ee, 0x96ff, 0x1, 0x0);
        gbc.writeMem(0x4abd, { 0x62, 0x9b });
        gbc.writeMem(0xab46, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4abf);
        EXPECT(gbc.pc(), 0x9b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab46), 0xc9);
        // C9 0083
        gbc.setState(0xa5d2, 0x1176, 0x50c0, 0x2941, 0xb3f1, 0x7bcd, 0x0, 0x1);
        gbc.writeMem(0x1176, { 0xf5, 0x57 });
        gbc.writeMem(0xa5d2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1178);
        EXPECT(gbc.pc(), 0x57f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d2), 0xc9);
        // C9 0084
        gbc.setState(0x1240, 0xe888, 0x96d0, 0xaadb, 0xee6d, 0x1399, 0x1, 0x0);
        gbc.writeMem(0x1240, { 0xc9 });
        gbc.writeMem(0xe888, { 0xbd, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe88a);
        EXPECT(gbc.pc(), 0x31bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe888), 0xbd);
        EXPECT(gbc.readMem(0xe889), 0x31);
        // C9 0085
        gbc.setState(0x390b, 0xc30a, 0x4d0, 0x27b6, 0xf552, 0xc96f, 0x0, 0x0);
        gbc.writeMem(0x390b, { 0xc9 });
        gbc.writeMem(0xc30a, { 0x10, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc30c);
        EXPECT(gbc.pc(), 0x5c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc30a), 0x10);
        EXPECT(gbc.readMem(0xc30b), 0x5c);
        // C9 0086
        gbc.setState(0x11f8, 0xbf7a, 0xacb0, 0x6c67, 0x75f5, 0x351b, 0x0, 0x0);
        gbc.writeMem(0x11f8, { 0xc9 });
        gbc.writeMem(0xbf7a, { 0xcc, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbf7c);
        EXPECT(gbc.pc(), 0x4bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf7a), 0xcc);
        EXPECT(gbc.readMem(0xbf7b), 0x4b);
        // C9 0087
        gbc.setState(0x4b4f, 0x10c9, 0x6e80, 0x9ec1, 0x8e30, 0xbd2a, 0x1, 0x1);
        gbc.writeMem(0x10c9, { 0xb7, 0x1d });
        gbc.writeMem(0x4b4f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x10cb);
        EXPECT(gbc.pc(), 0x1db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0088
        gbc.setState(0x4e99, 0x73a3, 0x1da0, 0x7a55, 0xf53, 0x70ab, 0x1, 0x1);
        gbc.writeMem(0x4e99, { 0xc9 });
        gbc.writeMem(0x73a3, { 0xde, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x73a5);
        EXPECT(gbc.pc(), 0x80de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0089
        gbc.setState(0xa3d8, 0xc4e2, 0xd290, 0xeb78, 0x919d, 0x5bb1, 0x0, 0x1);
        gbc.writeMem(0xa3d8, { 0xc9 });
        gbc.writeMem(0xc4e2, { 0x1d, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc4e4);
        EXPECT(gbc.pc(), 0x521d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d8), 0xc9);
        EXPECT(gbc.readMem(0xc4e2), 0x1d);
        EXPECT(gbc.readMem(0xc4e3), 0x52);
        // C9 008A
        gbc.setState(0xc5de, 0x7d36, 0x60e0, 0xac77, 0x69cd, 0x9d79, 0x0, 0x0);
        gbc.writeMem(0x7d36, { 0x44, 0x63 });
        gbc.writeMem(0xc5de, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7d38);
        EXPECT(gbc.pc(), 0x6344);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5de), 0xc9);
        // C9 008B
        gbc.setState(0x60d3, 0x7ed3, 0x2620, 0xf01b, 0xaafd, 0x7840, 0x1, 0x0);
        gbc.writeMem(0x60d3, { 0xc9 });
        gbc.writeMem(0x7ed3, { 0xe7, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7ed5);
        EXPECT(gbc.pc(), 0x4ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 008C
        gbc.setState(0x5a0a, 0x74bb, 0xfec0, 0xc299, 0x83bf, 0x3f3a, 0x1, 0x1);
        gbc.writeMem(0x5a0a, { 0xc9 });
        gbc.writeMem(0x74bb, { 0xcf, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x74bd);
        EXPECT(gbc.pc(), 0x45cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 008D
        gbc.setState(0xe075, 0x9987, 0xe470, 0xc6ca, 0x8ce8, 0xf3e7, 0x1, 0x1);
        gbc.writeMem(0x9987, { 0x8e, 0xf7 });
        gbc.writeMem(0xe075, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9989);
        EXPECT(gbc.pc(), 0xf78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9987), 0x8e);
        EXPECT(gbc.readMem(0x9988), 0xf7);
        EXPECT(gbc.readMem(0xe075), 0xc9);
        // C9 008E
        gbc.setState(0xd7dc, 0x25a7, 0xcd00, 0xcb6d, 0xa7c4, 0xf59c, 0x1, 0x0);
        gbc.writeMem(0x25a7, { 0x78, 0x4b });
        gbc.writeMem(0xd7dc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x25a9);
        EXPECT(gbc.pc(), 0x4b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7dc), 0xc9);
        // C9 0090
        gbc.setState(0x852f, 0xfabb, 0xad60, 0xa825, 0xd5be, 0xe0, 0x1, 0x0);
        gbc.writeMem(0x852f, { 0xc9 });
        gbc.writeMem(0xfabb, { 0x32, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfabd);
        EXPECT(gbc.pc(), 0x5d32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x852f), 0xc9);
        EXPECT(gbc.readMem(0xfabb), 0x32);
        EXPECT(gbc.readMem(0xfabc), 0x5d);
        // C9 0091
        gbc.setState(0xd879, 0xff5e, 0x3c10, 0x8505, 0xc405, 0xa42f, 0x1, 0x0);
        gbc.writeMem(0xd879, { 0xc9 });
        gbc.writeMem(0xff5e, { 0x62, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xff60);
        EXPECT(gbc.pc(), 0x1162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd879), 0xc9);
        EXPECT(gbc.readMem(0xff5e), 0x62);
        EXPECT(gbc.readMem(0xff5f), 0x11);
        // C9 0092
        gbc.setState(0x12c, 0x9683, 0x7c30, 0xdb54, 0xfdfb, 0x5c73, 0x1, 0x0);
        gbc.writeMem(0x12c, { 0xc9 });
        gbc.writeMem(0x9683, { 0xed, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9685);
        EXPECT(gbc.pc(), 0xeed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9683), 0xed);
        EXPECT(gbc.readMem(0x9684), 0xe);
        // C9 0093
        gbc.setState(0xd840, 0xa34d, 0xd3a0, 0xddb8, 0x18f, 0xd429, 0x0, 0x0);
        gbc.writeMem(0xa34d, { 0x98, 0xb1 });
        gbc.writeMem(0xd840, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa34f);
        EXPECT(gbc.pc(), 0xb198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34d), 0x98);
        EXPECT(gbc.readMem(0xa34e), 0xb1);
        EXPECT(gbc.readMem(0xd840), 0xc9);
        // C9 0094
        gbc.setState(0x8d12, 0xf161, 0x6d90, 0xc58f, 0xe58a, 0xc186, 0x1, 0x0);
        gbc.writeMem(0x8d12, { 0xc9 });
        gbc.writeMem(0xf161, { 0xb0, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf163);
        EXPECT(gbc.pc(), 0xd4b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d12), 0xc9);
        EXPECT(gbc.readMem(0xf161), 0xb0);
        EXPECT(gbc.readMem(0xf162), 0xd4);
        // C9 0095
        gbc.setState(0x6ac1, 0xc540, 0x240, 0xe6b0, 0x6ca2, 0xbe0b, 0x1, 0x1);
        gbc.writeMem(0x6ac1, { 0xc9 });
        gbc.writeMem(0xc540, { 0x98, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc542);
        EXPECT(gbc.pc(), 0x8698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc540), 0x98);
        EXPECT(gbc.readMem(0xc541), 0x86);
        // C9 0096
        gbc.setState(0x118c, 0xde, 0xc3e0, 0xf8f7, 0x689b, 0xb6a9, 0x1, 0x1);
        gbc.writeMem(0xde, { 0xe0, 0xa });
        gbc.writeMem(0x118c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xe0);
        EXPECT(gbc.pc(), 0xae0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0097
        gbc.setState(0xd4b5, 0x9978, 0x49e0, 0x2caa, 0x8dd5, 0x1c27, 0x1, 0x1);
        gbc.writeMem(0x9978, { 0xbe, 0x8d });
        gbc.writeMem(0xd4b5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x997a);
        EXPECT(gbc.pc(), 0x8dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9978), 0xbe);
        EXPECT(gbc.readMem(0x9979), 0x8d);
        EXPECT(gbc.readMem(0xd4b5), 0xc9);
        // C9 0099
        gbc.setState(0xc5e6, 0xa435, 0xf8a0, 0x2c08, 0x8a27, 0x823f, 0x1, 0x0);
        gbc.writeMem(0xa435, { 0xcb, 0xd1 });
        gbc.writeMem(0xc5e6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa437);
        EXPECT(gbc.pc(), 0xd1cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa435), 0xcb);
        EXPECT(gbc.readMem(0xa436), 0xd1);
        EXPECT(gbc.readMem(0xc5e6), 0xc9);
        // C9 009A
        gbc.setState(0x46b5, 0x2070, 0x1b90, 0x73e, 0x3038, 0xb732, 0x1, 0x1);
        gbc.writeMem(0x2070, { 0xc4, 0x28 });
        gbc.writeMem(0x46b5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2072);
        EXPECT(gbc.pc(), 0x28c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 009B
        gbc.setState(0x7156, 0xe250, 0xdc40, 0x1e36, 0x4763, 0x39b8, 0x0, 0x0);
        gbc.writeMem(0x7156, { 0xc9 });
        gbc.writeMem(0xe250, { 0xe8, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe252);
        EXPECT(gbc.pc(), 0x39e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe250), 0xe8);
        EXPECT(gbc.readMem(0xe251), 0x39);
        // C9 009C
        gbc.setState(0x42a1, 0xc0ed, 0x40d0, 0xc37, 0x8a09, 0x38b3, 0x0, 0x1);
        gbc.writeMem(0x42a1, { 0xc9 });
        gbc.writeMem(0xc0ed, { 0xac, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0xb0ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0ed), 0xac);
        EXPECT(gbc.readMem(0xc0ee), 0xb0);
        // C9 009D
        gbc.setState(0xd1f3, 0x4e71, 0x35b0, 0x623, 0xf916, 0x3732, 0x1, 0x1);
        gbc.writeMem(0x4e71, { 0xe, 0x5f });
        gbc.writeMem(0xd1f3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4e73);
        EXPECT(gbc.pc(), 0x5f0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1f3), 0xc9);
        // C9 009E
        gbc.setState(0x155d, 0xbe23, 0x7980, 0x23b5, 0xb768, 0xe09c, 0x0, 0x1);
        gbc.writeMem(0x155d, { 0xc9 });
        gbc.writeMem(0xbe23, { 0x2d, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xbe25);
        EXPECT(gbc.pc(), 0xcf2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe23), 0x2d);
        EXPECT(gbc.readMem(0xbe24), 0xcf);
        // C9 009F
        gbc.setState(0x710, 0x55c4, 0xda50, 0x2918, 0x16c0, 0xb276, 0x1, 0x0);
        gbc.writeMem(0x710, { 0xc9 });
        gbc.writeMem(0x55c4, { 0x3a, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x55c6);
        EXPECT(gbc.pc(), 0x713a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00A0
        gbc.setState(0x21c8, 0x17c3, 0x7c50, 0xf818, 0xa3c4, 0x8728, 0x0, 0x0);
        gbc.writeMem(0x17c3, { 0x7b, 0xd3 });
        gbc.writeMem(0x21c8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x17c5);
        EXPECT(gbc.pc(), 0xd37b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00A1
        gbc.setState(0x4dcd, 0x17e, 0x73e0, 0x6ba0, 0xaa38, 0x1c34, 0x0, 0x0);
        gbc.writeMem(0x17e, { 0x85, 0x82 });
        gbc.writeMem(0x4dcd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x180);
        EXPECT(gbc.pc(), 0x8285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 00A2
        gbc.setState(0xa89c, 0xf1ab, 0xe370, 0xeb08, 0x2b6c, 0x9947, 0x1, 0x1);
        gbc.writeMem(0xa89c, { 0xc9 });
        gbc.writeMem(0xf1ab, { 0xc1, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xf1ad);
        EXPECT(gbc.pc(), 0x69c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89c), 0xc9);
        EXPECT(gbc.readMem(0xf1ab), 0xc1);
        EXPECT(gbc.readMem(0xf1ac), 0x69);
        // C9 00A4
        gbc.setState(0x7f80, 0x1ea2, 0x1070, 0x9ac0, 0x74c, 0xe884, 0x1, 0x1);
        gbc.writeMem(0x1ea2, { 0xac, 0x9e });
        gbc.writeMem(0x7f80, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1ea4);
        EXPECT(gbc.pc(), 0x9eac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00A5
        gbc.setState(0xa534, 0x2292, 0x240, 0x2ec4, 0x5147, 0x46c0, 0x0, 0x0);
        gbc.writeMem(0x2292, { 0xbc, 0x74 });
        gbc.writeMem(0xa534, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2294);
        EXPECT(gbc.pc(), 0x74bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa534), 0xc9);
        // C9 00A7
        gbc.setState(0xe7bd, 0x390, 0xe3e0, 0x34, 0xb5e1, 0xdd7f, 0x0, 0x1);
        gbc.writeMem(0x390, { 0x76, 0xb });
        gbc.writeMem(0xe7bd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x392);
        EXPECT(gbc.pc(), 0xb76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bd), 0xc9);
        // C9 00A8
        gbc.setState(0xbbc, 0x69a6, 0x1380, 0xa0c4, 0xcd73, 0xa7b, 0x1, 0x1);
        gbc.writeMem(0xbbc, { 0xc9 });
        gbc.writeMem(0x69a6, { 0x99, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x69a8);
        EXPECT(gbc.pc(), 0x3e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00A9
        gbc.setState(0x418e, 0x84dc, 0xbcb0, 0xc361, 0x9cf, 0xba1, 0x1, 0x1);
        gbc.writeMem(0x418e, { 0xc9 });
        gbc.writeMem(0x84dc, { 0xcd, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x84de);
        EXPECT(gbc.pc(), 0xe7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84dc), 0xcd);
        EXPECT(gbc.readMem(0x84dd), 0xe7);
        // C9 00AA
        gbc.setState(0x54e1, 0x82cc, 0x9c00, 0x73f2, 0x575e, 0x704, 0x0, 0x0);
        gbc.writeMem(0x54e1, { 0xc9 });
        gbc.writeMem(0x82cc, { 0x77, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x82ce);
        EXPECT(gbc.pc(), 0xb077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82cc), 0x77);
        EXPECT(gbc.readMem(0x82cd), 0xb0);
        // C9 00AB
        gbc.setState(0xa4b5, 0x2d6d, 0x94e0, 0x458b, 0x6e48, 0x86d2, 0x1, 0x0);
        gbc.writeMem(0x2d6d, { 0x21, 0x6f });
        gbc.writeMem(0xa4b5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2d6f);
        EXPECT(gbc.pc(), 0x6f21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b5), 0xc9);
        // C9 00AC
        gbc.setState(0x14de, 0xa690, 0x3f30, 0xe891, 0x1c4, 0x3f8e, 0x0, 0x1);
        gbc.writeMem(0x14de, { 0xc9 });
        gbc.writeMem(0xa690, { 0x8f, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa692);
        EXPECT(gbc.pc(), 0x478f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa690), 0x8f);
        EXPECT(gbc.readMem(0xa691), 0x47);
        // C9 00AD
        gbc.setState(0xec8c, 0x317f, 0xd1f0, 0x4085, 0x878, 0x28c7, 0x1, 0x0);
        gbc.writeMem(0x317f, { 0xea, 0x3d });
        gbc.writeMem(0xec8c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3181);
        EXPECT(gbc.pc(), 0x3dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec8c), 0xc9);
        // C9 00AE
        gbc.setState(0x705e, 0xfd64, 0x1eb0, 0x2335, 0xe2e0, 0xbb13, 0x0, 0x1);
        gbc.writeMem(0x705e, { 0xc9 });
        gbc.writeMem(0xfd64, { 0xc3, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfd66);
        EXPECT(gbc.pc(), 0x87c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd64), 0xc3);
        EXPECT(gbc.readMem(0xfd65), 0x87);
        // C9 00AF
        gbc.setState(0x4623, 0x4994, 0x3700, 0xafe, 0x363b, 0x54e1, 0x0, 0x0);
        gbc.writeMem(0x4623, { 0xc9 });
        gbc.writeMem(0x4994, { 0xa8, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4996);
        EXPECT(gbc.pc(), 0xb7a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00B0
        gbc.setState(0x7e5c, 0x5436, 0xca90, 0x580b, 0x2b69, 0x223b, 0x0, 0x0);
        gbc.writeMem(0x5436, { 0xfc, 0xa6 });
        gbc.writeMem(0x7e5c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5438);
        EXPECT(gbc.pc(), 0xa6fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00B1
        gbc.setState(0xc941, 0x676a, 0x8360, 0xa7d6, 0x142e, 0xe483, 0x0, 0x0);
        gbc.writeMem(0x676a, { 0x3a, 0x52 });
        gbc.writeMem(0xc941, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x676c);
        EXPECT(gbc.pc(), 0x523a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc941), 0xc9);
        // C9 00B2
        gbc.setState(0x2343, 0xba7f, 0x3a60, 0x8c4c, 0x61c5, 0xe66b, 0x0, 0x1);
        gbc.writeMem(0x2343, { 0xc9 });
        gbc.writeMem(0xba7f, { 0x4d, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xba81);
        EXPECT(gbc.pc(), 0x6a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7f), 0x4d);
        EXPECT(gbc.readMem(0xba80), 0x6a);
        // C9 00B4
        gbc.setState(0x974e, 0x53c7, 0x5190, 0x90ab, 0x8624, 0xf8cd, 0x1, 0x0);
        gbc.writeMem(0x53c7, { 0x86, 0xda });
        gbc.writeMem(0x974e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x53c9);
        EXPECT(gbc.pc(), 0xda86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x974e), 0xc9);
        // C9 00B5
        gbc.setState(0x9dd6, 0xd86, 0xa980, 0xc4aa, 0x318d, 0x42c3, 0x1, 0x1);
        gbc.writeMem(0xd86, { 0xd0, 0xbc });
        gbc.writeMem(0x9dd6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd88);
        EXPECT(gbc.pc(), 0xbcd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd6), 0xc9);
        // C9 00B6
        gbc.setState(0xa61, 0x5351, 0xfc40, 0x9761, 0xda49, 0x1aa0, 0x1, 0x0);
        gbc.writeMem(0xa61, { 0xc9 });
        gbc.writeMem(0x5351, { 0x2f, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5353);
        EXPECT(gbc.pc(), 0x762f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00B7
        gbc.setState(0x5934, 0x211, 0x9420, 0x6d26, 0x17cc, 0x6d19, 0x0, 0x1);
        gbc.writeMem(0x211, { 0xe4, 0xf2 });
        gbc.writeMem(0x5934, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x213);
        EXPECT(gbc.pc(), 0xf2e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 00B8
        gbc.setState(0x4709, 0x4316, 0x6090, 0x2177, 0xd56d, 0x6881, 0x1, 0x1);
        gbc.writeMem(0x4316, { 0x5a, 0x1b });
        gbc.writeMem(0x4709, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x4318);
        EXPECT(gbc.pc(), 0x1b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00B9
        gbc.setState(0xe419, 0xce62, 0x5a70, 0xedbe, 0x8709, 0x8fb7, 0x1, 0x0);
        gbc.writeMem(0xce62, { 0xfd, 0xa0 });
        gbc.writeMem(0xe419, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xce64);
        EXPECT(gbc.pc(), 0xa0fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce62), 0xfd);
        EXPECT(gbc.readMem(0xce63), 0xa0);
        EXPECT(gbc.readMem(0xe419), 0xc9);
        // C9 00BA
        gbc.setState(0x5d62, 0x2551, 0x9b70, 0x6d8c, 0x5474, 0x2a20, 0x0, 0x0);
        gbc.writeMem(0x2551, { 0x44, 0x38 });
        gbc.writeMem(0x5d62, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2553);
        EXPECT(gbc.pc(), 0x3844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00BB
        gbc.setState(0xb83f, 0xe596, 0x6300, 0x984f, 0x24ba, 0x5b27, 0x0, 0x0);
        gbc.writeMem(0xb83f, { 0xc9 });
        gbc.writeMem(0xe596, { 0xe5, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe598);
        EXPECT(gbc.pc(), 0xfae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb83f), 0xc9);
        EXPECT(gbc.readMem(0xe596), 0xe5);
        EXPECT(gbc.readMem(0xe597), 0xfa);
        // C9 00BC
        gbc.setState(0x53f3, 0xcc6b, 0xb7b0, 0x5426, 0x9905, 0x65b3, 0x0, 0x0);
        gbc.writeMem(0x53f3, { 0xc9 });
        gbc.writeMem(0xcc6b, { 0x45, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xcc6d);
        EXPECT(gbc.pc(), 0xcb45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6b), 0x45);
        EXPECT(gbc.readMem(0xcc6c), 0xcb);
        // C9 00BD
        gbc.setState(0xca5b, 0x7a88, 0x110, 0x55df, 0xfbeb, 0xb849, 0x1, 0x1);
        gbc.writeMem(0x7a88, { 0x4b, 0x39 });
        gbc.writeMem(0xca5b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7a8a);
        EXPECT(gbc.pc(), 0x394b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca5b), 0xc9);
        // C9 00BE
        gbc.setState(0x1c8f, 0xddd8, 0x2730, 0x3feb, 0xf94, 0x5585, 0x0, 0x0);
        gbc.writeMem(0x1c8f, { 0xc9 });
        gbc.writeMem(0xddd8, { 0x53, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xddda);
        EXPECT(gbc.pc(), 0xc353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddd8), 0x53);
        EXPECT(gbc.readMem(0xddd9), 0xc3);
        // C9 00BF
        gbc.setState(0x22d5, 0x4f20, 0xd400, 0x2b8a, 0x7431, 0x30b2, 0x0, 0x1);
        gbc.writeMem(0x22d5, { 0xc9 });
        gbc.writeMem(0x4f20, { 0xb9, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4f22);
        EXPECT(gbc.pc(), 0x2ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00C0
        gbc.setState(0x29f6, 0xb430, 0x9eb0, 0xc498, 0x70ee, 0x6954, 0x0, 0x0);
        gbc.writeMem(0x29f6, { 0xc9 });
        gbc.writeMem(0xb430, { 0x9, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb432);
        EXPECT(gbc.pc(), 0x3409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb430), 0x9);
        EXPECT(gbc.readMem(0xb431), 0x34);
        // C9 00C1
        gbc.setState(0xe3a6, 0x527a, 0x5ee0, 0x3243, 0x6970, 0x3a3f, 0x1, 0x0);
        gbc.writeMem(0x527a, { 0x6d, 0xec });
        gbc.writeMem(0xe3a6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x527c);
        EXPECT(gbc.pc(), 0xec6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a6), 0xc9);
        // C9 00C2
        gbc.setState(0x7028, 0x76db, 0x7570, 0xeb9b, 0x1b0b, 0x6d14, 0x1, 0x0);
        gbc.writeMem(0x7028, { 0xc9 });
        gbc.writeMem(0x76db, { 0xe7, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x76dd);
        EXPECT(gbc.pc(), 0x38e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00C3
        gbc.setState(0x78d0, 0xea26, 0xb600, 0x484c, 0xa8a5, 0xe777, 0x0, 0x0);
        gbc.writeMem(0x78d0, { 0xc9 });
        gbc.writeMem(0xea26, { 0x81, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xea28);
        EXPECT(gbc.pc(), 0x4381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea26), 0x81);
        EXPECT(gbc.readMem(0xea27), 0x43);
        // C9 00C4
        gbc.setState(0xdff9, 0x87bc, 0xb7d0, 0x68d0, 0xbadd, 0x804, 0x0, 0x1);
        gbc.writeMem(0x87bc, { 0xc6, 0xcc });
        gbc.writeMem(0xdff9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x87be);
        EXPECT(gbc.pc(), 0xccc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87bc), 0xc6);
        EXPECT(gbc.readMem(0x87bd), 0xcc);
        EXPECT(gbc.readMem(0xdff9), 0xc9);
        // C9 00C6
        gbc.setState(0xbfa1, 0xf568, 0xf4e0, 0x18e0, 0x216a, 0x22da, 0x1, 0x1);
        gbc.writeMem(0xbfa1, { 0xc9 });
        gbc.writeMem(0xf568, { 0x41, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf56a);
        EXPECT(gbc.pc(), 0xb741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfa1), 0xc9);
        EXPECT(gbc.readMem(0xf568), 0x41);
        EXPECT(gbc.readMem(0xf569), 0xb7);
        // C9 00C7
        gbc.setState(0x9e1b, 0x3200, 0xd4b0, 0x3a5b, 0xcb0c, 0xc8, 0x1, 0x0);
        gbc.writeMem(0x3200, { 0x10, 0xae });
        gbc.writeMem(0x9e1b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3202);
        EXPECT(gbc.pc(), 0xae10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e1b), 0xc9);
        // C9 00C8
        gbc.setState(0x35fa, 0xdae7, 0xdd0, 0xcce2, 0xb75d, 0x4b21, 0x0, 0x1);
        gbc.writeMem(0x35fa, { 0xc9 });
        gbc.writeMem(0xdae7, { 0x78, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdae9);
        EXPECT(gbc.pc(), 0x6078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae7), 0x78);
        EXPECT(gbc.readMem(0xdae8), 0x60);
        // C9 00C9
        gbc.setState(0x7e95, 0x1a6, 0x8550, 0x4f05, 0x9831, 0x46a9, 0x0, 0x0);
        gbc.writeMem(0x1a6, { 0xb6, 0x5 });
        gbc.writeMem(0x7e95, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1a8);
        EXPECT(gbc.pc(), 0x5b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00CA
        gbc.setState(0x8126, 0xbf17, 0xed30, 0xce22, 0x33b3, 0xd51f, 0x0, 0x1);
        gbc.writeMem(0x8126, { 0xc9 });
        gbc.writeMem(0xbf17, { 0xd7, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xbf19);
        EXPECT(gbc.pc(), 0x56d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8126), 0xc9);
        EXPECT(gbc.readMem(0xbf17), 0xd7);
        EXPECT(gbc.readMem(0xbf18), 0x56);
        // C9 00CB
        gbc.setState(0x2fc0, 0xd692, 0xb960, 0xf33, 0xe4f9, 0x1d02, 0x0, 0x0);
        gbc.writeMem(0x2fc0, { 0xc9 });
        gbc.writeMem(0xd692, { 0x56, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd694);
        EXPECT(gbc.pc(), 0x3656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd692), 0x56);
        EXPECT(gbc.readMem(0xd693), 0x36);
        // C9 00CC
        gbc.setState(0x7f2a, 0x2944, 0x3800, 0xa7ca, 0xbe5d, 0xee8c, 0x0, 0x1);
        gbc.writeMem(0x2944, { 0xeb, 0x55 });
        gbc.writeMem(0x7f2a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2946);
        EXPECT(gbc.pc(), 0x55eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00CD
        gbc.setState(0x7b64, 0xc696, 0xf3f0, 0x1fe1, 0x9d4c, 0xa0eb, 0x1, 0x1);
        gbc.writeMem(0x7b64, { 0xc9 });
        gbc.writeMem(0xc696, { 0x10, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc698);
        EXPECT(gbc.pc(), 0x4610);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc696), 0x10);
        EXPECT(gbc.readMem(0xc697), 0x46);
        // C9 00CE
        gbc.setState(0x9a46, 0x3920, 0xd9b0, 0x296c, 0xcf8, 0xc90a, 0x1, 0x1);
        gbc.writeMem(0x3920, { 0xd9, 0x75 });
        gbc.writeMem(0x9a46, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3922);
        EXPECT(gbc.pc(), 0x75d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a46), 0xc9);
        // C9 00CF
        gbc.setState(0x583a, 0xb17d, 0xd1f0, 0xb881, 0xf644, 0xd4fb, 0x0, 0x0);
        gbc.writeMem(0x583a, { 0xc9 });
        gbc.writeMem(0xb17d, { 0x7a, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb17f);
        EXPECT(gbc.pc(), 0xd57a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb17d), 0x7a);
        EXPECT(gbc.readMem(0xb17e), 0xd5);
        // C9 00D0
        gbc.setState(0x729b, 0x8875, 0x1770, 0xd288, 0xe2f7, 0xb11d, 0x0, 0x1);
        gbc.writeMem(0x729b, { 0xc9 });
        gbc.writeMem(0x8875, { 0x7c, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8877);
        EXPECT(gbc.pc(), 0x6d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8875), 0x7c);
        EXPECT(gbc.readMem(0x8876), 0x6d);
        // C9 00D1
        gbc.setState(0x8f0b, 0x5ae8, 0x880, 0x925f, 0x582e, 0x731a, 0x1, 0x0);
        gbc.writeMem(0x5ae8, { 0xe1, 0xa4 });
        gbc.writeMem(0x8f0b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5aea);
        EXPECT(gbc.pc(), 0xa4e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f0b), 0xc9);
        // C9 00D2
        gbc.setState(0x36e5, 0x6575, 0x5270, 0x9d0, 0xbd11, 0x8e78, 0x0, 0x1);
        gbc.writeMem(0x36e5, { 0xc9 });
        gbc.writeMem(0x6575, { 0xcc, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x6577);
        EXPECT(gbc.pc(), 0x82cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00D3
        gbc.setState(0x6dc8, 0xaba2, 0xd230, 0x6f7c, 0xc36a, 0x950e, 0x1, 0x0);
        gbc.writeMem(0x6dc8, { 0xc9 });
        gbc.writeMem(0xaba2, { 0x1f, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaba4);
        EXPECT(gbc.pc(), 0xe1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaba2), 0x1f);
        EXPECT(gbc.readMem(0xaba3), 0xe);
        // C9 00D4
        gbc.setState(0xa29f, 0x5acb, 0x5af0, 0x548, 0x38f3, 0xd7ab, 0x1, 0x0);
        gbc.writeMem(0x5acb, { 0x56, 0xc8 });
        gbc.writeMem(0xa29f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5acd);
        EXPECT(gbc.pc(), 0xc856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa29f), 0xc9);
        // C9 00D5
        gbc.setState(0x9587, 0x101a, 0x94b0, 0xc3b1, 0xfcd0, 0xfe6a, 0x0, 0x1);
        gbc.writeMem(0x101a, { 0x91, 0x83 });
        gbc.writeMem(0x9587, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x101c);
        EXPECT(gbc.pc(), 0x8391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9587), 0xc9);
        // C9 00D6
        gbc.setState(0x22c0, 0xb784, 0xd770, 0xd9af, 0x8604, 0x895b, 0x0, 0x0);
        gbc.writeMem(0x22c0, { 0xc9 });
        gbc.writeMem(0xb784, { 0x49, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb786);
        EXPECT(gbc.pc(), 0x7549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb784), 0x49);
        EXPECT(gbc.readMem(0xb785), 0x75);
        // C9 00D7
        gbc.setState(0xde93, 0xeca4, 0x2160, 0x8da9, 0x8af8, 0x8afc, 0x0, 0x0);
        gbc.writeMem(0xde93, { 0xc9 });
        gbc.writeMem(0xeca4, { 0xc8, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xeca6);
        EXPECT(gbc.pc(), 0x8dc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde93), 0xc9);
        EXPECT(gbc.readMem(0xeca4), 0xc8);
        EXPECT(gbc.readMem(0xeca5), 0x8d);
        // C9 00D8
        gbc.setState(0xc510, 0xcec1, 0xa1e0, 0x3a1, 0x19ba, 0xf177, 0x1, 0x1);
        gbc.writeMem(0xc510, { 0xc9 });
        gbc.writeMem(0xcec1, { 0x2a, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcec3);
        EXPECT(gbc.pc(), 0x202a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc510), 0xc9);
        EXPECT(gbc.readMem(0xcec1), 0x2a);
        EXPECT(gbc.readMem(0xcec2), 0x20);
        // C9 00D9
        gbc.setState(0x7566, 0xbb00, 0xc4f0, 0x5f8c, 0xaab4, 0xfde6, 0x0, 0x0);
        gbc.writeMem(0x7566, { 0xc9 });
        gbc.writeMem(0xbb00, { 0x30, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbb02);
        EXPECT(gbc.pc(), 0x4530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb00), 0x30);
        EXPECT(gbc.readMem(0xbb01), 0x45);
        // C9 00DB
        gbc.setState(0x49cf, 0x7093, 0x6c0, 0x15a3, 0xfffd, 0x19f2, 0x1, 0x0);
        gbc.writeMem(0x49cf, { 0xc9 });
        gbc.writeMem(0x7093, { 0x63, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7095);
        EXPECT(gbc.pc(), 0x8b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00DC
        gbc.setState(0xd9bf, 0x424f, 0x10f0, 0x414c, 0xabd3, 0xa99f, 0x0, 0x0);
        gbc.writeMem(0x424f, { 0x95, 0x62 });
        gbc.writeMem(0xd9bf, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4251);
        EXPECT(gbc.pc(), 0x6295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9bf), 0xc9);
        // C9 00DD
        gbc.setState(0xcf8f, 0x619c, 0xe490, 0x12b7, 0x58ea, 0xc0c0, 0x0, 0x0);
        gbc.writeMem(0x619c, { 0x70, 0x1 });
        gbc.writeMem(0xcf8f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x619e);
        EXPECT(gbc.pc(), 0x170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf8f), 0xc9);
        // C9 00DE
        gbc.setState(0xadd5, 0x2ce, 0x2590, 0x6cc9, 0x5e45, 0x6fb1, 0x1, 0x1);
        gbc.writeMem(0x2ce, { 0xee, 0xe1 });
        gbc.writeMem(0xadd5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2d0);
        EXPECT(gbc.pc(), 0xe1ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadd5), 0xc9);
        // C9 00DF
        gbc.setState(0x3265, 0x5fd, 0xeb10, 0x677f, 0x1829, 0x8d6, 0x0, 0x1);
        gbc.writeMem(0x5fd, { 0x2e, 0x17 });
        gbc.writeMem(0x3265, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x5ff);
        EXPECT(gbc.pc(), 0x172e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00E0
        gbc.setState(0x75bd, 0x965d, 0xe780, 0xcfcc, 0x216b, 0xa49c, 0x0, 0x0);
        gbc.writeMem(0x75bd, { 0xc9 });
        gbc.writeMem(0x965d, { 0x71, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x965f);
        EXPECT(gbc.pc(), 0x571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x965d), 0x71);
        EXPECT(gbc.readMem(0x965e), 0x5);
        // C9 00E1
        gbc.setState(0x729d, 0xc92f, 0x3520, 0xce4d, 0x42fa, 0x3822, 0x0, 0x0);
        gbc.writeMem(0x729d, { 0xc9 });
        gbc.writeMem(0xc92f, { 0x76, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc931);
        EXPECT(gbc.pc(), 0xce76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc92f), 0x76);
        EXPECT(gbc.readMem(0xc930), 0xce);
        // C9 00E2
        gbc.setState(0x19ac, 0xe11f, 0xa1a0, 0xe21d, 0x246e, 0x8216, 0x0, 0x0);
        gbc.writeMem(0x19ac, { 0xc9 });
        gbc.writeMem(0xe11f, { 0x3c, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe121);
        EXPECT(gbc.pc(), 0x1f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11f), 0x3c);
        EXPECT(gbc.readMem(0xe120), 0x1f);
        // C9 00E3
        gbc.setState(0xa648, 0x45c7, 0xf890, 0x9989, 0x790, 0x64da, 0x0, 0x1);
        gbc.writeMem(0x45c7, { 0xd, 0x9d });
        gbc.writeMem(0xa648, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x45c9);
        EXPECT(gbc.pc(), 0x9d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa648), 0xc9);
        // C9 00E5
        gbc.setState(0x649f, 0xa639, 0xd360, 0x6705, 0x3cb9, 0xe18d, 0x0, 0x0);
        gbc.writeMem(0x649f, { 0xc9 });
        gbc.writeMem(0xa639, { 0x80, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa63b);
        EXPECT(gbc.pc(), 0x7880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa639), 0x80);
        EXPECT(gbc.readMem(0xa63a), 0x78);
        // C9 00E6
        gbc.setState(0x32f1, 0x9cd4, 0xfd20, 0x1a48, 0xd9c6, 0x50c5, 0x1, 0x1);
        gbc.writeMem(0x32f1, { 0xc9 });
        gbc.writeMem(0x9cd4, { 0x8a, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9cd6);
        EXPECT(gbc.pc(), 0x6b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd4), 0x8a);
        EXPECT(gbc.readMem(0x9cd5), 0x6b);
        // C9 00E7
        gbc.setState(0x7964, 0x8807, 0x1430, 0x146d, 0x7f80, 0xd019, 0x0, 0x1);
        gbc.writeMem(0x7964, { 0xc9 });
        gbc.writeMem(0x8807, { 0xdb, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8809);
        EXPECT(gbc.pc(), 0x42db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8807), 0xdb);
        EXPECT(gbc.readMem(0x8808), 0x42);
        // C9 00E8
        gbc.setState(0x46c2, 0x525a, 0xa760, 0x5b81, 0xfce6, 0x992c, 0x0, 0x0);
        gbc.writeMem(0x46c2, { 0xc9 });
        gbc.writeMem(0x525a, { 0x9f, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x525c);
        EXPECT(gbc.pc(), 0xf59f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 00E9
        gbc.setState(0x1c2b, 0x25b7, 0xfad0, 0x6911, 0xbdc, 0x3c31, 0x1, 0x1);
        gbc.writeMem(0x1c2b, { 0xc9 });
        gbc.writeMem(0x25b7, { 0x97, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x25b9);
        EXPECT(gbc.pc(), 0xa797);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00EA
        gbc.setState(0xb7f7, 0x1ffe, 0xad0, 0xb4af, 0x6685, 0xbe80, 0x1, 0x0);
        gbc.writeMem(0x1ffe, { 0xda, 0xf0 });
        gbc.writeMem(0xb7f7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2000);
        EXPECT(gbc.pc(), 0xf0da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f7), 0xc9);
        // C9 00EB
        gbc.setState(0x57c5, 0xa61f, 0x7670, 0x5dd4, 0x8d13, 0xd384, 0x0, 0x1);
        gbc.writeMem(0x57c5, { 0xc9 });
        gbc.writeMem(0xa61f, { 0x23, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa621);
        EXPECT(gbc.pc(), 0xf423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa61f), 0x23);
        EXPECT(gbc.readMem(0xa620), 0xf4);
        // C9 00EC
        gbc.setState(0xdbdd, 0x9704, 0xb3d0, 0x8568, 0xfd13, 0xed, 0x1, 0x1);
        gbc.writeMem(0x9704, { 0x7c, 0xd9 });
        gbc.writeMem(0xdbdd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9706);
        EXPECT(gbc.pc(), 0xd97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9704), 0x7c);
        EXPECT(gbc.readMem(0x9705), 0xd9);
        EXPECT(gbc.readMem(0xdbdd), 0xc9);
        // C9 00ED
        gbc.setState(0x94fe, 0x73ae, 0x4bf0, 0xa3a, 0x1e99, 0x2459, 0x1, 0x1);
        gbc.writeMem(0x73ae, { 0x42, 0x1c });
        gbc.writeMem(0x94fe, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x73b0);
        EXPECT(gbc.pc(), 0x1c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94fe), 0xc9);
        // C9 00EE
        gbc.setState(0x52e1, 0x5137, 0x8770, 0x9f56, 0x28ad, 0x5cf8, 0x1, 0x0);
        gbc.writeMem(0x5137, { 0x2, 0xb7 });
        gbc.writeMem(0x52e1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5139);
        EXPECT(gbc.pc(), 0xb702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00EF
        gbc.setState(0x3d20, 0x3297, 0x4550, 0x304, 0xc258, 0x6d83, 0x0, 0x1);
        gbc.writeMem(0x3297, { 0xc9, 0x56 });
        gbc.writeMem(0x3d20, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3299);
        EXPECT(gbc.pc(), 0x56c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 00F0
        gbc.setState(0x1e7c, 0x2498, 0xc130, 0x3df9, 0x1fac, 0x9758, 0x0, 0x0);
        gbc.writeMem(0x1e7c, { 0xc9 });
        gbc.writeMem(0x2498, { 0x86, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x249a);
        EXPECT(gbc.pc(), 0xb786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 00F1
        gbc.setState(0x69bb, 0x109, 0xbee0, 0xdd81, 0xa05, 0xcde3, 0x0, 0x1);
        gbc.writeMem(0x109, { 0x2a, 0x8d });
        gbc.writeMem(0x69bb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x10b);
        EXPECT(gbc.pc(), 0x8d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 00F2
        gbc.setState(0x871f, 0x1865, 0x97a0, 0x1ae7, 0x1e11, 0x55b5, 0x1, 0x0);
        gbc.writeMem(0x1865, { 0xf7, 0x67 });
        gbc.writeMem(0x871f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1867);
        EXPECT(gbc.pc(), 0x67f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x871f), 0xc9);
        // C9 00F3
        gbc.setState(0xaa14, 0x7232, 0x7db0, 0xdc4, 0xba7, 0x2cae, 0x1, 0x1);
        gbc.writeMem(0x7232, { 0xe, 0x87 });
        gbc.writeMem(0xaa14, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7234);
        EXPECT(gbc.pc(), 0x870e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa14), 0xc9);
        // C9 00F4
        gbc.setState(0x1406, 0xf36c, 0xbd90, 0x1b20, 0xf4a3, 0x3bf8, 0x0, 0x0);
        gbc.writeMem(0x1406, { 0xc9 });
        gbc.writeMem(0xf36c, { 0x66, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf36e);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf36c), 0x66);
        EXPECT(gbc.readMem(0xf36d), 0xdc);
        // C9 00F6
        gbc.setState(0x64b2, 0x831e, 0xd560, 0x8ea1, 0x466c, 0x9b23, 0x1, 0x1);
        gbc.writeMem(0x64b2, { 0xc9 });
        gbc.writeMem(0x831e, { 0xd5, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8320);
        EXPECT(gbc.pc(), 0xf2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831e), 0xd5);
        EXPECT(gbc.readMem(0x831f), 0xf2);
        // C9 00F7
        gbc.setState(0x1af, 0x5b82, 0xf840, 0xb616, 0x8201, 0x2c20, 0x1, 0x0);
        gbc.writeMem(0x1af, { 0xc9 });
        gbc.writeMem(0x5b82, { 0x3c, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5b84);
        EXPECT(gbc.pc(), 0x683c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00F8
        gbc.setState(0xc76a, 0xfc3d, 0x52e0, 0x6563, 0xf915, 0xb85c, 0x0, 0x1);
        gbc.writeMem(0xc76a, { 0xc9 });
        gbc.writeMem(0xfc3d, { 0x13, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfc3f);
        EXPECT(gbc.pc(), 0x8113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc76a), 0xc9);
        EXPECT(gbc.readMem(0xfc3d), 0x13);
        EXPECT(gbc.readMem(0xfc3e), 0x81);
        // C9 00F9
        gbc.setState(0xb031, 0x65d3, 0xdd60, 0xa53b, 0xae91, 0xf97b, 0x0, 0x0);
        gbc.writeMem(0x65d3, { 0xc, 0xa });
        gbc.writeMem(0xb031, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x65d5);
        EXPECT(gbc.pc(), 0xa0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb031), 0xc9);
        // C9 00FA
        gbc.setState(0x569e, 0xaada, 0xf180, 0x2b52, 0xeb00, 0x2e33, 0x0, 0x0);
        gbc.writeMem(0x569e, { 0xc9 });
        gbc.writeMem(0xaada, { 0x29, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xaadc);
        EXPECT(gbc.pc(), 0xdf29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaada), 0x29);
        EXPECT(gbc.readMem(0xaadb), 0xdf);
        // C9 00FB
        gbc.setState(0x9fa9, 0x31e7, 0xad70, 0xf298, 0x82d3, 0x58dd, 0x0, 0x0);
        gbc.writeMem(0x31e7, { 0x50, 0xc4 });
        gbc.writeMem(0x9fa9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x31e9);
        EXPECT(gbc.pc(), 0xc450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fa9), 0xc9);
        // C9 00FC
        gbc.setState(0x7e6c, 0x2d74, 0x9100, 0x7778, 0xb4cd, 0xc255, 0x1, 0x0);
        gbc.writeMem(0x2d74, { 0x80, 0x27 });
        gbc.writeMem(0x7e6c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x2d76);
        EXPECT(gbc.pc(), 0x2780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00FD
        gbc.setState(0xd728, 0x49ea, 0xe1b0, 0x6781, 0x5855, 0x784e, 0x0, 0x0);
        gbc.writeMem(0x49ea, { 0xd8, 0xc1 });
        gbc.writeMem(0xd728, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x49ec);
        EXPECT(gbc.pc(), 0xc1d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd728), 0xc9);
        // C9 00FE
        gbc.setState(0x69b0, 0x54ed, 0x3a00, 0x7842, 0xd22d, 0x26b7, 0x0, 0x1);
        gbc.writeMem(0x54ed, { 0xe9, 0xe });
        gbc.writeMem(0x69b0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x54ef);
        EXPECT(gbc.pc(), 0xee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 00FF
        gbc.setState(0x1dd0, 0xf5f4, 0xa400, 0xf3eb, 0x95d2, 0x21d2, 0x1, 0x1);
        gbc.writeMem(0x1dd0, { 0xc9 });
        gbc.writeMem(0xf5f4, { 0xcc, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf5f6);
        EXPECT(gbc.pc(), 0xaccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5f4), 0xcc);
        EXPECT(gbc.readMem(0xf5f5), 0xac);
        // C9 0100
        gbc.setState(0x30c3, 0x2486, 0x56b0, 0x19dd, 0xd29b, 0x6640, 0x1, 0x1);
        gbc.writeMem(0x2486, { 0x1f, 0xa3 });
        gbc.writeMem(0x30c3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2488);
        EXPECT(gbc.pc(), 0xa31f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0101
        gbc.setState(0x8ec5, 0x13b6, 0xf250, 0x908f, 0x947, 0x8e8d, 0x0, 0x0);
        gbc.writeMem(0x13b6, { 0x30, 0xd5 });
        gbc.writeMem(0x8ec5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x13b8);
        EXPECT(gbc.pc(), 0xd530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ec5), 0xc9);
        // C9 0102
        gbc.setState(0x843, 0x44ec, 0x8530, 0xa766, 0x3933, 0xf2dd, 0x1, 0x0);
        gbc.writeMem(0x843, { 0xc9 });
        gbc.writeMem(0x44ec, { 0xe, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x44ee);
        EXPECT(gbc.pc(), 0x160e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0103
        gbc.setState(0x5a3, 0xc1fc, 0xfcf0, 0x1d36, 0xa2a2, 0x94f8, 0x0, 0x0);
        gbc.writeMem(0x5a3, { 0xc9 });
        gbc.writeMem(0xc1fc, { 0x47, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xc1fe);
        EXPECT(gbc.pc(), 0x3447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1fc), 0x47);
        EXPECT(gbc.readMem(0xc1fd), 0x34);
        // C9 0104
        gbc.setState(0xeed4, 0xce5f, 0xeac0, 0xa4a, 0xa617, 0x955a, 0x1, 0x0);
        gbc.writeMem(0xce5f, { 0x25, 0x19 });
        gbc.writeMem(0xeed4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xce61);
        EXPECT(gbc.pc(), 0x1925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce5f), 0x25);
        EXPECT(gbc.readMem(0xce60), 0x19);
        EXPECT(gbc.readMem(0xeed4), 0xc9);
        // C9 0105
        gbc.setState(0x45ba, 0x921c, 0x9620, 0x5060, 0xdb6f, 0x559a, 0x1, 0x0);
        gbc.writeMem(0x45ba, { 0xc9 });
        gbc.writeMem(0x921c, { 0xad, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x921e);
        EXPECT(gbc.pc(), 0xb6ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x921c), 0xad);
        EXPECT(gbc.readMem(0x921d), 0xb6);
        // C9 0106
        gbc.setState(0x1bac, 0x8e9b, 0x8390, 0x28cd, 0x62, 0x1a5, 0x0, 0x1);
        gbc.writeMem(0x1bac, { 0xc9 });
        gbc.writeMem(0x8e9b, { 0x7d, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8e9d);
        EXPECT(gbc.pc(), 0x317d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e9b), 0x7d);
        EXPECT(gbc.readMem(0x8e9c), 0x31);
        // C9 0107
        gbc.setState(0x5893, 0x48f3, 0x5230, 0x2783, 0x6a31, 0xb869, 0x0, 0x1);
        gbc.writeMem(0x48f3, { 0x3a, 0xa4 });
        gbc.writeMem(0x5893, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x48f5);
        EXPECT(gbc.pc(), 0xa43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0108
        gbc.setState(0x574, 0x42ed, 0xda90, 0x54d2, 0xba94, 0x8948, 0x1, 0x0);
        gbc.writeMem(0x574, { 0xc9 });
        gbc.writeMem(0x42ed, { 0xa3, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x42ef);
        EXPECT(gbc.pc(), 0xd9a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0109
        gbc.setState(0x8828, 0x8616, 0xf9f0, 0x84c6, 0xcca8, 0x890a, 0x0, 0x0);
        gbc.writeMem(0x8616, { 0xb6, 0xd7 });
        gbc.writeMem(0x8828, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8618);
        EXPECT(gbc.pc(), 0xd7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8616), 0xb6);
        EXPECT(gbc.readMem(0x8617), 0xd7);
        EXPECT(gbc.readMem(0x8828), 0xc9);
        // C9 010A
        gbc.setState(0x7e25, 0xd1b2, 0x3070, 0xc1e1, 0x83c2, 0x40b9, 0x0, 0x1);
        gbc.writeMem(0x7e25, { 0xc9 });
        gbc.writeMem(0xd1b2, { 0x3b, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd1b4);
        EXPECT(gbc.pc(), 0x3e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b2), 0x3b);
        EXPECT(gbc.readMem(0xd1b3), 0x3e);
        // C9 010B
        gbc.setState(0x2d23, 0x7519, 0xaff0, 0xe87a, 0xe490, 0xf199, 0x0, 0x0);
        gbc.writeMem(0x2d23, { 0xc9 });
        gbc.writeMem(0x7519, { 0xe5, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x751b);
        EXPECT(gbc.pc(), 0x7be5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 010C
        gbc.setState(0x75bc, 0x63a5, 0xb2e0, 0xeafd, 0x941e, 0x971e, 0x1, 0x0);
        gbc.writeMem(0x63a5, { 0x8f, 0x26 });
        gbc.writeMem(0x75bc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0x268f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 010D
        gbc.setState(0xaed0, 0xf528, 0xcc80, 0x343a, 0x6ac9, 0xc57f, 0x1, 0x0);
        gbc.writeMem(0xaed0, { 0xc9 });
        gbc.writeMem(0xf528, { 0x6d, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf52a);
        EXPECT(gbc.pc(), 0x416d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed0), 0xc9);
        EXPECT(gbc.readMem(0xf528), 0x6d);
        EXPECT(gbc.readMem(0xf529), 0x41);
        // C9 010E
        gbc.setState(0x7122, 0xaf5b, 0x1260, 0xd1dd, 0x340b, 0x776c, 0x1, 0x0);
        gbc.writeMem(0x7122, { 0xc9 });
        gbc.writeMem(0xaf5b, { 0xd2, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaf5d);
        EXPECT(gbc.pc(), 0xbdd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf5b), 0xd2);
        EXPECT(gbc.readMem(0xaf5c), 0xbd);
        // C9 010F
        gbc.setState(0x56e3, 0x80a6, 0xed70, 0xd8cb, 0x7acc, 0x93d2, 0x1, 0x1);
        gbc.writeMem(0x56e3, { 0xc9 });
        gbc.writeMem(0x80a6, { 0xe8, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x80a8);
        EXPECT(gbc.pc(), 0x4ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a6), 0xe8);
        EXPECT(gbc.readMem(0x80a7), 0x4c);
        // C9 0110
        gbc.setState(0x6414, 0xdd6c, 0x4ef0, 0x3b1, 0xf1a, 0x5637, 0x0, 0x1);
        gbc.writeMem(0x6414, { 0xc9 });
        gbc.writeMem(0xdd6c, { 0xd3, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdd6e);
        EXPECT(gbc.pc(), 0xe0d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd6c), 0xd3);
        EXPECT(gbc.readMem(0xdd6d), 0xe0);
        // C9 0111
        gbc.setState(0x6dd4, 0x65b5, 0x6850, 0x4fd3, 0xd87b, 0xbb70, 0x1, 0x1);
        gbc.writeMem(0x65b5, { 0x83, 0x18 });
        gbc.writeMem(0x6dd4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x65b7);
        EXPECT(gbc.pc(), 0x1883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0112
        gbc.setState(0x8d60, 0xbff4, 0x2e00, 0xdfa1, 0xed4e, 0x637b, 0x0, 0x0);
        gbc.writeMem(0x8d60, { 0xc9 });
        gbc.writeMem(0xbff4, { 0x52, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xbff6);
        EXPECT(gbc.pc(), 0x3352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d60), 0xc9);
        EXPECT(gbc.readMem(0xbff4), 0x52);
        EXPECT(gbc.readMem(0xbff5), 0x33);
        // C9 0113
        gbc.setState(0x7d21, 0x5bae, 0xfd50, 0x38b7, 0xe4, 0xae69, 0x0, 0x1);
        gbc.writeMem(0x5bae, { 0xdb, 0x4c });
        gbc.writeMem(0x7d21, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5bb0);
        EXPECT(gbc.pc(), 0x4cdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0114
        gbc.setState(0xee24, 0x160f, 0xb060, 0x3fd4, 0x9f8d, 0x4644, 0x1, 0x1);
        gbc.writeMem(0x160f, { 0xd0, 0x86 });
        gbc.writeMem(0xee24, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x1611);
        EXPECT(gbc.pc(), 0x86d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee24), 0xc9);
        // C9 0115
        gbc.setState(0x9769, 0xcaac, 0x2100, 0xcbc4, 0x8c84, 0x2c45, 0x1, 0x0);
        gbc.writeMem(0x9769, { 0xc9 });
        gbc.writeMem(0xcaac, { 0x56, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcaae);
        EXPECT(gbc.pc(), 0xb556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9769), 0xc9);
        EXPECT(gbc.readMem(0xcaac), 0x56);
        EXPECT(gbc.readMem(0xcaad), 0xb5);
        // C9 0116
        gbc.setState(0xb1d5, 0x805b, 0x2a90, 0x415f, 0x2a47, 0x6018, 0x1, 0x0);
        gbc.writeMem(0x805b, { 0xbe, 0xa });
        gbc.writeMem(0xb1d5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x805d);
        EXPECT(gbc.pc(), 0xabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x805b), 0xbe);
        EXPECT(gbc.readMem(0x805c), 0xa);
        EXPECT(gbc.readMem(0xb1d5), 0xc9);
        // C9 0117
        gbc.setState(0x4848, 0xe4e3, 0x6a70, 0xfab4, 0x7a05, 0x186f, 0x0, 0x1);
        gbc.writeMem(0x4848, { 0xc9 });
        gbc.writeMem(0xe4e3, { 0x61, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe4e5);
        EXPECT(gbc.pc(), 0x861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4e3), 0x61);
        EXPECT(gbc.readMem(0xe4e4), 0x8);
        // C9 0118
        gbc.setState(0x8dc7, 0x16fa, 0xb6c0, 0x9171, 0x6b9b, 0x63d8, 0x1, 0x1);
        gbc.writeMem(0x16fa, { 0xb7, 0x88 });
        gbc.writeMem(0x8dc7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x16fc);
        EXPECT(gbc.pc(), 0x88b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc7), 0xc9);
        // C9 0119
        gbc.setState(0x92c5, 0x33, 0x510, 0xd2af, 0x7987, 0xf612, 0x0, 0x1);
        gbc.writeMem(0x33, { 0xbb, 0x32 });
        gbc.writeMem(0x92c5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x35);
        EXPECT(gbc.pc(), 0x32bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c5), 0xc9);
        // C9 011A
        gbc.setState(0x69da, 0x8262, 0x8480, 0xb5e4, 0xd91, 0x9dee, 0x0, 0x0);
        gbc.writeMem(0x69da, { 0xc9 });
        gbc.writeMem(0x8262, { 0xd5, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8264);
        EXPECT(gbc.pc(), 0x14d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8262), 0xd5);
        EXPECT(gbc.readMem(0x8263), 0x14);
        // C9 011B
        gbc.setState(0xc332, 0xc49d, 0x5c80, 0x259e, 0xe06c, 0x3e27, 0x1, 0x0);
        gbc.writeMem(0xc332, { 0xc9 });
        gbc.writeMem(0xc49d, { 0x10, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc49f);
        EXPECT(gbc.pc(), 0x3b10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc332), 0xc9);
        EXPECT(gbc.readMem(0xc49d), 0x10);
        EXPECT(gbc.readMem(0xc49e), 0x3b);
        // C9 011C
        gbc.setState(0x666f, 0xd68a, 0xde00, 0x78b8, 0x9dfb, 0x7e89, 0x1, 0x0);
        gbc.writeMem(0x666f, { 0xc9 });
        gbc.writeMem(0xd68a, { 0xc7, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd68c);
        EXPECT(gbc.pc(), 0x42c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd68a), 0xc7);
        EXPECT(gbc.readMem(0xd68b), 0x42);
        // C9 011E
        gbc.setState(0x3734, 0x4698, 0x1b60, 0xdf2e, 0x3617, 0x7fb3, 0x1, 0x1);
        gbc.writeMem(0x3734, { 0xc9 });
        gbc.writeMem(0x4698, { 0x96, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x469a);
        EXPECT(gbc.pc(), 0x1696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 011F
        gbc.setState(0x6eb0, 0x168b, 0x4460, 0x9451, 0xa06a, 0x664d, 0x1, 0x0);
        gbc.writeMem(0x168b, { 0xd2, 0x2f });
        gbc.writeMem(0x6eb0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x168d);
        EXPECT(gbc.pc(), 0x2fd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0120
        gbc.setState(0xecac, 0xae2e, 0x8400, 0xda17, 0xe2c, 0xfa10, 0x1, 0x1);
        gbc.writeMem(0xae2e, { 0xe7, 0x25 });
        gbc.writeMem(0xecac, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xae30);
        EXPECT(gbc.pc(), 0x25e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae2e), 0xe7);
        EXPECT(gbc.readMem(0xae2f), 0x25);
        EXPECT(gbc.readMem(0xecac), 0xc9);
        // C9 0121
        gbc.setState(0xdff6, 0xe1e, 0x58e0, 0x94d7, 0x4856, 0xa596, 0x1, 0x1);
        gbc.writeMem(0xe1e, { 0x9d, 0x7b });
        gbc.writeMem(0xdff6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xe20);
        EXPECT(gbc.pc(), 0x7b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff6), 0xc9);
        // C9 0122
        gbc.setState(0xa3ab, 0xd148, 0x5210, 0xa362, 0x8e25, 0x8f94, 0x1, 0x1);
        gbc.writeMem(0xa3ab, { 0xc9 });
        gbc.writeMem(0xd148, { 0x4, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd14a);
        EXPECT(gbc.pc(), 0xde04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ab), 0xc9);
        EXPECT(gbc.readMem(0xd148), 0x4);
        EXPECT(gbc.readMem(0xd149), 0xde);
        // C9 0123
        gbc.setState(0x8248, 0xbf44, 0xb9c0, 0xa340, 0x9f99, 0xcc1c, 0x1, 0x1);
        gbc.writeMem(0x8248, { 0xc9 });
        gbc.writeMem(0xbf44, { 0x53, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xbf46);
        EXPECT(gbc.pc(), 0x7753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8248), 0xc9);
        EXPECT(gbc.readMem(0xbf44), 0x53);
        EXPECT(gbc.readMem(0xbf45), 0x77);
        // C9 0124
        gbc.setState(0x3208, 0x24cf, 0xcff0, 0x489a, 0x1e66, 0xcbe6, 0x0, 0x1);
        gbc.writeMem(0x24cf, { 0xc4, 0xee });
        gbc.writeMem(0x3208, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x24d1);
        EXPECT(gbc.pc(), 0xeec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0125
        gbc.setState(0x3660, 0x44e9, 0x7d00, 0x93be, 0xbfcb, 0x6975, 0x1, 0x0);
        gbc.writeMem(0x3660, { 0xc9 });
        gbc.writeMem(0x44e9, { 0x64, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x44eb);
        EXPECT(gbc.pc(), 0x3164);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0126
        gbc.setState(0x6c2a, 0xbb76, 0xd460, 0xdb61, 0xca9d, 0x5bd0, 0x1, 0x1);
        gbc.writeMem(0x6c2a, { 0xc9 });
        gbc.writeMem(0xbb76, { 0xf4, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xbb78);
        EXPECT(gbc.pc(), 0x4ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb76), 0xf4);
        EXPECT(gbc.readMem(0xbb77), 0x4e);
        // C9 0127
        gbc.setState(0xa610, 0xc107, 0xf870, 0x43d7, 0x482a, 0x7b20, 0x0, 0x0);
        gbc.writeMem(0xa610, { 0xc9 });
        gbc.writeMem(0xc107, { 0x54, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc109);
        EXPECT(gbc.pc(), 0xda54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa610), 0xc9);
        EXPECT(gbc.readMem(0xc107), 0x54);
        EXPECT(gbc.readMem(0xc108), 0xda);
        // C9 0128
        gbc.setState(0xaac7, 0x9ea3, 0x1a0, 0x3bd2, 0xdd58, 0x44ef, 0x1, 0x1);
        gbc.writeMem(0x9ea3, { 0xeb, 0xb5 });
        gbc.writeMem(0xaac7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9ea5);
        EXPECT(gbc.pc(), 0xb5eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea3), 0xeb);
        EXPECT(gbc.readMem(0x9ea4), 0xb5);
        EXPECT(gbc.readMem(0xaac7), 0xc9);
        // C9 0129
        gbc.setState(0x2585, 0xa9d4, 0x0, 0xe469, 0xd6ef, 0xfc95, 0x1, 0x0);
        gbc.writeMem(0x2585, { 0xc9 });
        gbc.writeMem(0xa9d4, { 0x69, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa9d6);
        EXPECT(gbc.pc(), 0x1469);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d4), 0x69);
        EXPECT(gbc.readMem(0xa9d5), 0x14);
        // C9 012A
        gbc.setState(0x9f13, 0x1b08, 0x4a40, 0x9673, 0xc5f8, 0x1983, 0x1, 0x0);
        gbc.writeMem(0x1b08, { 0x22, 0x63 });
        gbc.writeMem(0x9f13, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1b0a);
        EXPECT(gbc.pc(), 0x6322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f13), 0xc9);
        // C9 012C
        gbc.setState(0x6ed0, 0x5d7, 0xc130, 0x9b67, 0x1846, 0x81c9, 0x1, 0x0);
        gbc.writeMem(0x5d7, { 0xfe, 0xb4 });
        gbc.writeMem(0x6ed0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5d9);
        EXPECT(gbc.pc(), 0xb4fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 012E
        gbc.setState(0xb2c8, 0x4c64, 0x7690, 0xa736, 0x16a0, 0xe90b, 0x0, 0x1);
        gbc.writeMem(0x4c64, { 0xde, 0xab });
        gbc.writeMem(0xb2c8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4c66);
        EXPECT(gbc.pc(), 0xabde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c8), 0xc9);
        // C9 012F
        gbc.setState(0xb367, 0x7999, 0x3c50, 0x9129, 0xe339, 0x39c4, 0x0, 0x1);
        gbc.writeMem(0x7999, { 0xc9, 0x25 });
        gbc.writeMem(0xb367, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x799b);
        EXPECT(gbc.pc(), 0x25c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb367), 0xc9);
        // C9 0130
        gbc.setState(0xe535, 0xa2b8, 0x7f80, 0xceba, 0x30a1, 0x707d, 0x1, 0x1);
        gbc.writeMem(0xa2b8, { 0xc4, 0xb5 });
        gbc.writeMem(0xe535, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa2ba);
        EXPECT(gbc.pc(), 0xb5c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b8), 0xc4);
        EXPECT(gbc.readMem(0xa2b9), 0xb5);
        EXPECT(gbc.readMem(0xe535), 0xc9);
        // C9 0131
        gbc.setState(0x91a3, 0x4e81, 0xdbb0, 0xa50, 0xc15b, 0x8f2c, 0x1, 0x1);
        gbc.writeMem(0x4e81, { 0xf2, 0x8c });
        gbc.writeMem(0x91a3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4e83);
        EXPECT(gbc.pc(), 0x8cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a3), 0xc9);
        // C9 0132
        gbc.setState(0x224b, 0x7dbd, 0xef00, 0x2d73, 0x1858, 0xf5f0, 0x0, 0x1);
        gbc.writeMem(0x224b, { 0xc9 });
        gbc.writeMem(0x7dbd, { 0x1b, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7dbf);
        EXPECT(gbc.pc(), 0xff1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0133
        gbc.setState(0x8f85, 0x3d21, 0xcbe0, 0xd31e, 0xf0e5, 0x2b4, 0x1, 0x0);
        gbc.writeMem(0x3d21, { 0x88, 0xfb });
        gbc.writeMem(0x8f85, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3d23);
        EXPECT(gbc.pc(), 0xfb88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f85), 0xc9);
        // C9 0134
        gbc.setState(0xc957, 0x50c4, 0xa6c0, 0xafe9, 0x8dc7, 0x91c9, 0x1, 0x1);
        gbc.writeMem(0x50c4, { 0x99, 0x5a });
        gbc.writeMem(0xc957, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x50c6);
        EXPECT(gbc.pc(), 0x5a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc957), 0xc9);
        // C9 0135
        gbc.setState(0xca26, 0x1ad2, 0xdb80, 0x95ea, 0xd861, 0x9132, 0x1, 0x1);
        gbc.writeMem(0x1ad2, { 0x8c, 0xb6 });
        gbc.writeMem(0xca26, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1ad4);
        EXPECT(gbc.pc(), 0xb68c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca26), 0xc9);
        // C9 0136
        gbc.setState(0xbad3, 0xdd5f, 0x9a50, 0xb8f4, 0xddff, 0xf075, 0x1, 0x1);
        gbc.writeMem(0xbad3, { 0xc9 });
        gbc.writeMem(0xdd5f, { 0x3d, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xdd61);
        EXPECT(gbc.pc(), 0xc83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbad3), 0xc9);
        EXPECT(gbc.readMem(0xdd5f), 0x3d);
        EXPECT(gbc.readMem(0xdd60), 0xc8);
        // C9 0138
        gbc.setState(0x1180, 0xdb24, 0x3ca0, 0x602f, 0x5eb3, 0x7e31, 0x0, 0x1);
        gbc.writeMem(0x1180, { 0xc9 });
        gbc.writeMem(0xdb24, { 0x33, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xdb26);
        EXPECT(gbc.pc(), 0x6f33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb24), 0x33);
        EXPECT(gbc.readMem(0xdb25), 0x6f);
        // C9 0139
        gbc.setState(0xd171, 0x1c11, 0x4180, 0xc3de, 0x8636, 0x14e4, 0x1, 0x0);
        gbc.writeMem(0x1c11, { 0x35, 0xc7 });
        gbc.writeMem(0xd171, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1c13);
        EXPECT(gbc.pc(), 0xc735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd171), 0xc9);
        // C9 013A
        gbc.setState(0x428c, 0x64, 0xa0f0, 0x86c2, 0xcaa3, 0x10ee, 0x1, 0x1);
        gbc.writeMem(0x64, { 0x71, 0xd4 });
        gbc.writeMem(0x428c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x66);
        EXPECT(gbc.pc(), 0xd471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 013B
        gbc.setState(0x23a6, 0x9dc7, 0x3bf0, 0x2b14, 0x773c, 0xb683, 0x1, 0x0);
        gbc.writeMem(0x23a6, { 0xc9 });
        gbc.writeMem(0x9dc7, { 0x5e, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9dc9);
        EXPECT(gbc.pc(), 0xaa5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc7), 0x5e);
        EXPECT(gbc.readMem(0x9dc8), 0xaa);
        // C9 013C
        gbc.setState(0x7d13, 0x66d2, 0xd0b0, 0x683a, 0x1755, 0x48d0, 0x1, 0x1);
        gbc.writeMem(0x66d2, { 0x1c, 0x70 });
        gbc.writeMem(0x7d13, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x66d4);
        EXPECT(gbc.pc(), 0x701c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 013D
        gbc.setState(0xdd65, 0xcafb, 0x54a0, 0xeb89, 0x1ca0, 0x78e4, 0x1, 0x0);
        gbc.writeMem(0xcafb, { 0x2e, 0x81 });
        gbc.writeMem(0xdd65, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcafd);
        EXPECT(gbc.pc(), 0x812e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcafb), 0x2e);
        EXPECT(gbc.readMem(0xcafc), 0x81);
        EXPECT(gbc.readMem(0xdd65), 0xc9);
        // C9 013E
        gbc.setState(0x77bf, 0x4050, 0xaf30, 0x55b6, 0xf427, 0x64b9, 0x0, 0x0);
        gbc.writeMem(0x4050, { 0x2, 0xea });
        gbc.writeMem(0x77bf, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x4052);
        EXPECT(gbc.pc(), 0xea02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 013F
        gbc.setState(0xb06d, 0xff85, 0x9ad0, 0x7c6, 0x93f9, 0x6ab2, 0x1, 0x1);
        gbc.writeMem(0xb06d, { 0xc9 });
        gbc.writeMem(0xff85, { 0x9e, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xff87);
        EXPECT(gbc.pc(), 0x5e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb06d), 0xc9);
        EXPECT(gbc.readMem(0xff85), 0x9e);
        EXPECT(gbc.readMem(0xff86), 0x5e);
        // C9 0140
        gbc.setState(0x4fde, 0x273e, 0x6900, 0xe70b, 0x7d68, 0xc78d, 0x0, 0x1);
        gbc.writeMem(0x273e, { 0x22, 0xb1 });
        gbc.writeMem(0x4fde, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2740);
        EXPECT(gbc.pc(), 0xb122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0141
        gbc.setState(0x430e, 0xda3b, 0x6560, 0x9b97, 0xcf39, 0x21b4, 0x0, 0x0);
        gbc.writeMem(0x430e, { 0xc9 });
        gbc.writeMem(0xda3b, { 0x10, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xda3d);
        EXPECT(gbc.pc(), 0x4510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3b), 0x10);
        EXPECT(gbc.readMem(0xda3c), 0x45);
        // C9 0142
        gbc.setState(0x8ad3, 0xd27a, 0x4ca0, 0xaef8, 0x69ed, 0x9fad, 0x0, 0x1);
        gbc.writeMem(0x8ad3, { 0xc9 });
        gbc.writeMem(0xd27a, { 0x48, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd27c);
        EXPECT(gbc.pc(), 0x5e48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad3), 0xc9);
        EXPECT(gbc.readMem(0xd27a), 0x48);
        EXPECT(gbc.readMem(0xd27b), 0x5e);
        // C9 0143
        gbc.setState(0x7607, 0x3619, 0x60f0, 0xdf9e, 0xa8c6, 0x2f0c, 0x0, 0x0);
        gbc.writeMem(0x3619, { 0xfc, 0x14 });
        gbc.writeMem(0x7607, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x361b);
        EXPECT(gbc.pc(), 0x14fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0144
        gbc.setState(0xcc21, 0x4fc2, 0xca20, 0x46e8, 0x9c00, 0xd9db, 0x1, 0x1);
        gbc.writeMem(0x4fc2, { 0xa7, 0xd4 });
        gbc.writeMem(0xcc21, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4fc4);
        EXPECT(gbc.pc(), 0xd4a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc21), 0xc9);
        // C9 0145
        gbc.setState(0x6c21, 0xd7d6, 0x3100, 0xb1bd, 0xaee1, 0xfc7f, 0x0, 0x1);
        gbc.writeMem(0x6c21, { 0xc9 });
        gbc.writeMem(0xd7d6, { 0xdc, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd7d8);
        EXPECT(gbc.pc(), 0xc0dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d6), 0xdc);
        EXPECT(gbc.readMem(0xd7d7), 0xc0);
        // C9 0146
        gbc.setState(0x787b, 0x7df7, 0x2e70, 0x6b2c, 0xa8a0, 0x87e6, 0x1, 0x1);
        gbc.writeMem(0x787b, { 0xc9 });
        gbc.writeMem(0x7df7, { 0xf0, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7df9);
        EXPECT(gbc.pc(), 0x53f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0147
        gbc.setState(0xb887, 0xea98, 0xf0e0, 0x47bc, 0xad46, 0x7d34, 0x1, 0x0);
        gbc.writeMem(0xb887, { 0xc9 });
        gbc.writeMem(0xea98, { 0x67, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xea9a);
        EXPECT(gbc.pc(), 0x3e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb887), 0xc9);
        EXPECT(gbc.readMem(0xea98), 0x67);
        EXPECT(gbc.readMem(0xea99), 0x3e);
        // C9 0148
        gbc.setState(0xb0c5, 0xb449, 0xaf30, 0x69cc, 0x94a3, 0xf1b2, 0x0, 0x1);
        gbc.writeMem(0xb0c5, { 0xc9 });
        gbc.writeMem(0xb449, { 0xb5, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb44b);
        EXPECT(gbc.pc(), 0xcbb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0c5), 0xc9);
        EXPECT(gbc.readMem(0xb449), 0xb5);
        EXPECT(gbc.readMem(0xb44a), 0xcb);
        // C9 0149
        gbc.setState(0x9e49, 0x3f07, 0xfde0, 0xf13a, 0x773c, 0xf07b, 0x0, 0x0);
        gbc.writeMem(0x3f07, { 0xe7, 0xf2 });
        gbc.writeMem(0x9e49, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3f09);
        EXPECT(gbc.pc(), 0xf2e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e49), 0xc9);
        // C9 014A
        gbc.setState(0x5e9f, 0x557, 0x21f0, 0xd936, 0x5122, 0x43dd, 0x1, 0x1);
        gbc.writeMem(0x557, { 0x7a, 0x54 });
        gbc.writeMem(0x5e9f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x559);
        EXPECT(gbc.pc(), 0x547a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 014B
        gbc.setState(0x837e, 0x4d1f, 0x5f30, 0xf1d7, 0xa333, 0x37a4, 0x1, 0x1);
        gbc.writeMem(0x4d1f, { 0xeb, 0x7 });
        gbc.writeMem(0x837e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4d21);
        EXPECT(gbc.pc(), 0x7eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x837e), 0xc9);
        // C9 014C
        gbc.setState(0x2bec, 0x77b3, 0x1990, 0x8975, 0xe099, 0x9843, 0x1, 0x0);
        gbc.writeMem(0x2bec, { 0xc9 });
        gbc.writeMem(0x77b3, { 0x54, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x77b5);
        EXPECT(gbc.pc(), 0xee54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 014D
        gbc.setState(0xe0f0, 0x30c5, 0x9f10, 0x3a96, 0xea9a, 0xcf54, 0x0, 0x0);
        gbc.writeMem(0x30c5, { 0x52, 0xc });
        gbc.writeMem(0xe0f0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x30c7);
        EXPECT(gbc.pc(), 0xc52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0f0), 0xc9);
        // C9 014E
        gbc.setState(0x55b3, 0x85d8, 0x6ec0, 0x5c64, 0x9336, 0x3d67, 0x1, 0x1);
        gbc.writeMem(0x55b3, { 0xc9 });
        gbc.writeMem(0x85d8, { 0x2b, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x85da);
        EXPECT(gbc.pc(), 0x572b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d8), 0x2b);
        EXPECT(gbc.readMem(0x85d9), 0x57);
        // C9 014F
        gbc.setState(0x49a, 0xef49, 0x8300, 0x8abb, 0x74ab, 0x7691, 0x1, 0x0);
        gbc.writeMem(0x49a, { 0xc9 });
        gbc.writeMem(0xef49, { 0x12, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xef4b);
        EXPECT(gbc.pc(), 0x5f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef49), 0x12);
        EXPECT(gbc.readMem(0xef4a), 0x5f);
        // C9 0150
        gbc.setState(0x76c5, 0x3aec, 0x71e0, 0x31ad, 0xf077, 0xe698, 0x1, 0x1);
        gbc.writeMem(0x3aec, { 0x25, 0x70 });
        gbc.writeMem(0x76c5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3aee);
        EXPECT(gbc.pc(), 0x7025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0151
        gbc.setState(0xd91e, 0x9039, 0xdf80, 0xdd5b, 0xb565, 0x36b6, 0x1, 0x1);
        gbc.writeMem(0x9039, { 0xb4, 0x25 });
        gbc.writeMem(0xd91e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x903b);
        EXPECT(gbc.pc(), 0x25b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9039), 0xb4);
        EXPECT(gbc.readMem(0x903a), 0x25);
        EXPECT(gbc.readMem(0xd91e), 0xc9);
        // C9 0152
        gbc.setState(0x1626, 0x20e, 0xc2e0, 0x2ad6, 0xbe0f, 0x9bec, 0x0, 0x0);
        gbc.writeMem(0x20e, { 0xc6, 0x51 });
        gbc.writeMem(0x1626, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x210);
        EXPECT(gbc.pc(), 0x51c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0153
        gbc.setState(0x863e, 0xe871, 0xcc10, 0xf7b8, 0x81cd, 0x9bf3, 0x1, 0x0);
        gbc.writeMem(0x863e, { 0xc9 });
        gbc.writeMem(0xe871, { 0x7e, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe873);
        EXPECT(gbc.pc(), 0xa87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863e), 0xc9);
        EXPECT(gbc.readMem(0xe871), 0x7e);
        EXPECT(gbc.readMem(0xe872), 0xa8);
        // C9 0154
        gbc.setState(0x2d23, 0x1ca5, 0xe920, 0x8ec4, 0x6b36, 0xc85c, 0x1, 0x1);
        gbc.writeMem(0x1ca5, { 0xdd, 0xa8 });
        gbc.writeMem(0x2d23, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x1ca7);
        EXPECT(gbc.pc(), 0xa8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0155
        gbc.setState(0x426e, 0x990f, 0x8070, 0x113, 0x945d, 0xd24d, 0x0, 0x0);
        gbc.writeMem(0x426e, { 0xc9 });
        gbc.writeMem(0x990f, { 0x5e, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9911);
        EXPECT(gbc.pc(), 0xf85e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x990f), 0x5e);
        EXPECT(gbc.readMem(0x9910), 0xf8);
        // C9 0156
        gbc.setState(0x40cc, 0xcb32, 0x8c40, 0xf995, 0xe893, 0x8f18, 0x0, 0x0);
        gbc.writeMem(0x40cc, { 0xc9 });
        gbc.writeMem(0xcb32, { 0xc3, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xcb34);
        EXPECT(gbc.pc(), 0x5fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb32), 0xc3);
        EXPECT(gbc.readMem(0xcb33), 0x5f);
        // C9 0157
        gbc.setState(0x3709, 0x3142, 0x8ae0, 0xec24, 0x4d27, 0x75d8, 0x0, 0x0);
        gbc.writeMem(0x3142, { 0xd0, 0xaa });
        gbc.writeMem(0x3709, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3144);
        EXPECT(gbc.pc(), 0xaad0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0158
        gbc.setState(0x3b89, 0xd222, 0xac40, 0x851, 0x9637, 0x4567, 0x1, 0x0);
        gbc.writeMem(0x3b89, { 0xc9 });
        gbc.writeMem(0xd222, { 0x89, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd224);
        EXPECT(gbc.pc(), 0x2689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd222), 0x89);
        EXPECT(gbc.readMem(0xd223), 0x26);
        // C9 0159
        gbc.setState(0x87fc, 0x1dbb, 0x670, 0x2424, 0x82c9, 0xedae, 0x0, 0x0);
        gbc.writeMem(0x1dbb, { 0xb4, 0xe6 });
        gbc.writeMem(0x87fc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1dbd);
        EXPECT(gbc.pc(), 0xe6b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fc), 0xc9);
        // C9 015A
        gbc.setState(0x9bef, 0x6a16, 0x2460, 0xf649, 0xee11, 0x3ae2, 0x1, 0x0);
        gbc.writeMem(0x6a16, { 0xd1, 0x1b });
        gbc.writeMem(0x9bef, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6a18);
        EXPECT(gbc.pc(), 0x1bd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bef), 0xc9);
        // C9 015B
        gbc.setState(0x3a3, 0x3253, 0xb490, 0xd355, 0xf4d8, 0x4da0, 0x0, 0x1);
        gbc.writeMem(0x3a3, { 0xc9 });
        gbc.writeMem(0x3253, { 0x2d, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3255);
        EXPECT(gbc.pc(), 0x952d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 015C
        gbc.setState(0xdc6c, 0x2339, 0x4090, 0xb0ab, 0xf4af, 0xe9c3, 0x1, 0x0);
        gbc.writeMem(0x2339, { 0xd9, 0xe1 });
        gbc.writeMem(0xdc6c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x233b);
        EXPECT(gbc.pc(), 0xe1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc6c), 0xc9);
        // C9 015D
        gbc.setState(0x454a, 0xc668, 0xa0a0, 0xd287, 0xcc71, 0x1b59, 0x0, 0x1);
        gbc.writeMem(0x454a, { 0xc9 });
        gbc.writeMem(0xc668, { 0xda, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc66a);
        EXPECT(gbc.pc(), 0x69da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc668), 0xda);
        EXPECT(gbc.readMem(0xc669), 0x69);
        // C9 015E
        gbc.setState(0x3c0e, 0xddc5, 0xa7f0, 0xedc8, 0x4218, 0x8952, 0x1, 0x1);
        gbc.writeMem(0x3c0e, { 0xc9 });
        gbc.writeMem(0xddc5, { 0x2b, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xddc7);
        EXPECT(gbc.pc(), 0x5d2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc5), 0x2b);
        EXPECT(gbc.readMem(0xddc6), 0x5d);
        // C9 015F
        gbc.setState(0xded6, 0xc021, 0xaaf0, 0xfb09, 0x4024, 0xa1db, 0x0, 0x0);
        gbc.writeMem(0xc021, { 0x65, 0xd0 });
        gbc.writeMem(0xded6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc023);
        EXPECT(gbc.pc(), 0xd065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc021), 0x65);
        EXPECT(gbc.readMem(0xc022), 0xd0);
        EXPECT(gbc.readMem(0xded6), 0xc9);
        // C9 0160
        gbc.setState(0xba37, 0xc0ed, 0xeca0, 0x93e0, 0x7602, 0x3fd5, 0x0, 0x1);
        gbc.writeMem(0xba37, { 0xc9 });
        gbc.writeMem(0xc0ed, { 0xac, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc0ef);
        EXPECT(gbc.pc(), 0xb0ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba37), 0xc9);
        EXPECT(gbc.readMem(0xc0ed), 0xac);
        EXPECT(gbc.readMem(0xc0ee), 0xb0);
        // C9 0161
        gbc.setState(0x6264, 0xeea6, 0x71e0, 0xeeea, 0x684d, 0x565f, 0x1, 0x0);
        gbc.writeMem(0x6264, { 0xc9 });
        gbc.writeMem(0xeea6, { 0x4e, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xeea8);
        EXPECT(gbc.pc(), 0xb64e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea6), 0x4e);
        EXPECT(gbc.readMem(0xeea7), 0xb6);
        // C9 0162
        gbc.setState(0x9e73, 0x6ea2, 0xf5d0, 0x4f, 0x3ead, 0x6740, 0x0, 0x1);
        gbc.writeMem(0x6ea2, { 0xeb, 0xd1 });
        gbc.writeMem(0x9e73, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6ea4);
        EXPECT(gbc.pc(), 0xd1eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e73), 0xc9);
        // C9 0163
        gbc.setState(0x18b, 0x94c7, 0x3c10, 0x38d3, 0x3452, 0x3c6c, 0x1, 0x0);
        gbc.writeMem(0x18b, { 0xc9 });
        gbc.writeMem(0x94c7, { 0x63, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x94c9);
        EXPECT(gbc.pc(), 0xda63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c7), 0x63);
        EXPECT(gbc.readMem(0x94c8), 0xda);
        // C9 0164
        gbc.setState(0xd27b, 0xda98, 0x6690, 0x67b0, 0xe8bb, 0xe9e8, 0x1, 0x1);
        gbc.writeMem(0xd27b, { 0xc9 });
        gbc.writeMem(0xda98, { 0x16, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xda9a);
        EXPECT(gbc.pc(), 0x16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd27b), 0xc9);
        EXPECT(gbc.readMem(0xda98), 0x16);
        EXPECT(gbc.readMem(0xda99), 0x0);
        // C9 0165
        gbc.setState(0xd956, 0x71ef, 0x9fe0, 0x70dd, 0x9e05, 0x1cd5, 0x1, 0x1);
        gbc.writeMem(0x71ef, { 0x37, 0x3b });
        gbc.writeMem(0xd956, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x71f1);
        EXPECT(gbc.pc(), 0x3b37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd956), 0xc9);
        // C9 0166
        gbc.setState(0x969b, 0xd19b, 0xdf50, 0xe5cc, 0x1ba3, 0xf951, 0x1, 0x1);
        gbc.writeMem(0x969b, { 0xc9 });
        gbc.writeMem(0xd19b, { 0xcd, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd19d);
        EXPECT(gbc.pc(), 0xbecd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x969b), 0xc9);
        EXPECT(gbc.readMem(0xd19b), 0xcd);
        EXPECT(gbc.readMem(0xd19c), 0xbe);
        // C9 0167
        gbc.setState(0xecff, 0x3874, 0xbcc0, 0x2ff1, 0x91fe, 0x611, 0x1, 0x1);
        gbc.writeMem(0x3874, { 0x6a, 0x24 });
        gbc.writeMem(0xecff, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3876);
        EXPECT(gbc.pc(), 0x246a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecff), 0xc9);
        // C9 0168
        gbc.setState(0x4261, 0x53e0, 0xd400, 0x960c, 0xc125, 0xe6dc, 0x1, 0x0);
        gbc.writeMem(0x4261, { 0xc9 });
        gbc.writeMem(0x53e0, { 0xa7, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x53e2);
        EXPECT(gbc.pc(), 0xf5a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0169
        gbc.setState(0x8870, 0x2223, 0xbb00, 0xf95d, 0x9267, 0xc49e, 0x0, 0x0);
        gbc.writeMem(0x2223, { 0xf0, 0x3e });
        gbc.writeMem(0x8870, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2225);
        EXPECT(gbc.pc(), 0x3ef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8870), 0xc9);
        // C9 016B
        gbc.setState(0x19fe, 0x367c, 0x7c30, 0xb607, 0xc3c8, 0x29cd, 0x0, 0x0);
        gbc.writeMem(0x19fe, { 0xc9 });
        gbc.writeMem(0x367c, { 0xcd, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x367e);
        EXPECT(gbc.pc(), 0xf9cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 016C
        gbc.setState(0x3cc1, 0x1a14, 0x7da0, 0x8c7d, 0xa0e1, 0x8593, 0x1, 0x1);
        gbc.writeMem(0x1a14, { 0x7b, 0xa6 });
        gbc.writeMem(0x3cc1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1a16);
        EXPECT(gbc.pc(), 0xa67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 016D
        gbc.setState(0x1eae, 0x43df, 0x4cb0, 0x3d8f, 0x7667, 0x268c, 0x1, 0x1);
        gbc.writeMem(0x1eae, { 0xc9 });
        gbc.writeMem(0x43df, { 0x1f, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x43e1);
        EXPECT(gbc.pc(), 0xbd1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 016E
        gbc.setState(0xad06, 0x5ec3, 0x6df0, 0x25f3, 0x616b, 0xf46c, 0x0, 0x0);
        gbc.writeMem(0x5ec3, { 0xcf, 0x23 });
        gbc.writeMem(0xad06, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5ec5);
        EXPECT(gbc.pc(), 0x23cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad06), 0xc9);
        // C9 016F
        gbc.setState(0xaeff, 0xae62, 0x9a70, 0x79dd, 0xdf11, 0x2bab, 0x1, 0x1);
        gbc.writeMem(0xae62, { 0x45, 0x96 });
        gbc.writeMem(0xaeff, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xae64);
        EXPECT(gbc.pc(), 0x9645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae62), 0x45);
        EXPECT(gbc.readMem(0xae63), 0x96);
        EXPECT(gbc.readMem(0xaeff), 0xc9);
        // C9 0170
        gbc.setState(0xef65, 0x544a, 0x3660, 0x582c, 0x8bb0, 0x8967, 0x0, 0x0);
        gbc.writeMem(0x544a, { 0x99, 0x7 });
        gbc.writeMem(0xef65, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x544c);
        EXPECT(gbc.pc(), 0x799);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef65), 0xc9);
        // C9 0171
        gbc.setState(0xcd11, 0xd891, 0xb2d0, 0xc428, 0xb227, 0xf885, 0x1, 0x0);
        gbc.writeMem(0xcd11, { 0xc9 });
        gbc.writeMem(0xd891, { 0xc4, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd893);
        EXPECT(gbc.pc(), 0x49c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd11), 0xc9);
        EXPECT(gbc.readMem(0xd891), 0xc4);
        EXPECT(gbc.readMem(0xd892), 0x49);
        // C9 0172
        gbc.setState(0x232a, 0xb79e, 0x71c0, 0xde, 0x4136, 0xf35d, 0x0, 0x1);
        gbc.writeMem(0x232a, { 0xc9 });
        gbc.writeMem(0xb79e, { 0xd1, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb7a0);
        EXPECT(gbc.pc(), 0x91d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79e), 0xd1);
        EXPECT(gbc.readMem(0xb79f), 0x91);
        // C9 0173
        gbc.setState(0x2ffc, 0xa6a1, 0x98c0, 0x86d2, 0x582f, 0x94a1, 0x0, 0x1);
        gbc.writeMem(0x2ffc, { 0xc9 });
        gbc.writeMem(0xa6a1, { 0x9e, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa6a3);
        EXPECT(gbc.pc(), 0x5d9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a1), 0x9e);
        EXPECT(gbc.readMem(0xa6a2), 0x5d);
        // C9 0174
        gbc.setState(0xd46c, 0x5518, 0x4b20, 0x251d, 0xb787, 0x4e01, 0x1, 0x0);
        gbc.writeMem(0x5518, { 0xd3, 0xb1 });
        gbc.writeMem(0xd46c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x551a);
        EXPECT(gbc.pc(), 0xb1d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd46c), 0xc9);
        // C9 0175
        gbc.setState(0xda1e, 0x2999, 0x3290, 0x84c2, 0x8b56, 0xd658, 0x0, 0x1);
        gbc.writeMem(0x2999, { 0x70, 0x57 });
        gbc.writeMem(0xda1e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x299b);
        EXPECT(gbc.pc(), 0x5770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda1e), 0xc9);
        // C9 0176
        gbc.setState(0xaa0b, 0xb60f, 0xbdb0, 0x61f4, 0x679, 0xcfb5, 0x0, 0x0);
        gbc.writeMem(0xaa0b, { 0xc9 });
        gbc.writeMem(0xb60f, { 0x2f, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xb611);
        EXPECT(gbc.pc(), 0xd42f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa0b), 0xc9);
        EXPECT(gbc.readMem(0xb60f), 0x2f);
        EXPECT(gbc.readMem(0xb610), 0xd4);
        // C9 0177
        gbc.setState(0x5caa, 0xa56e, 0x3340, 0x45de, 0x2ae1, 0x8cba, 0x0, 0x1);
        gbc.writeMem(0x5caa, { 0xc9 });
        gbc.writeMem(0xa56e, { 0x32, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa570);
        EXPECT(gbc.pc(), 0x1a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa56e), 0x32);
        EXPECT(gbc.readMem(0xa56f), 0x1a);
        // C9 0178
        gbc.setState(0x1e97, 0xdb9a, 0xb020, 0xecc, 0x6bd2, 0x5dd4, 0x1, 0x1);
        gbc.writeMem(0x1e97, { 0xc9 });
        gbc.writeMem(0xdb9a, { 0x71, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdb9c);
        EXPECT(gbc.pc(), 0xa471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb9a), 0x71);
        EXPECT(gbc.readMem(0xdb9b), 0xa4);
        // C9 0179
        gbc.setState(0xac54, 0x44ca, 0x46d0, 0xd83c, 0xd7ad, 0xeb4c, 0x0, 0x0);
        gbc.writeMem(0x44ca, { 0xd3, 0x7e });
        gbc.writeMem(0xac54, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x44cc);
        EXPECT(gbc.pc(), 0x7ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac54), 0xc9);
        // C9 017A
        gbc.setState(0x31b7, 0xbb81, 0x7180, 0x9a54, 0x7141, 0x4566, 0x1, 0x0);
        gbc.writeMem(0x31b7, { 0xc9 });
        gbc.writeMem(0xbb81, { 0x3c, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xbb83);
        EXPECT(gbc.pc(), 0x733c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb81), 0x3c);
        EXPECT(gbc.readMem(0xbb82), 0x73);
        // C9 017C
        gbc.setState(0x9b82, 0x889a, 0x1960, 0xdac6, 0x42f, 0x1cc5, 0x1, 0x1);
        gbc.writeMem(0x889a, { 0xa2, 0x30 });
        gbc.writeMem(0x9b82, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x889c);
        EXPECT(gbc.pc(), 0x30a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x889a), 0xa2);
        EXPECT(gbc.readMem(0x889b), 0x30);
        EXPECT(gbc.readMem(0x9b82), 0xc9);
        // C9 017D
        gbc.setState(0x3e4d, 0x978e, 0x630, 0x8e5a, 0xf42e, 0x9994, 0x0, 0x0);
        gbc.writeMem(0x3e4d, { 0xc9 });
        gbc.writeMem(0x978e, { 0x28, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9790);
        EXPECT(gbc.pc(), 0x3d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978e), 0x28);
        EXPECT(gbc.readMem(0x978f), 0x3d);
        // C9 017E
        gbc.setState(0x7c77, 0x988, 0xec60, 0xc06b, 0x7127, 0x6356, 0x1, 0x0);
        gbc.writeMem(0x988, { 0xc3, 0xd9 });
        gbc.writeMem(0x7c77, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x98a);
        EXPECT(gbc.pc(), 0xd9c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 017F
        gbc.setState(0x45b6, 0x360e, 0xcd80, 0x7cb0, 0x5965, 0x9386, 0x0, 0x0);
        gbc.writeMem(0x360e, { 0x2a, 0x5e });
        gbc.writeMem(0x45b6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3610);
        EXPECT(gbc.pc(), 0x5e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0180
        gbc.setState(0xe93b, 0xd877, 0x4900, 0x826f, 0x4691, 0xdca, 0x0, 0x0);
        gbc.writeMem(0xd877, { 0xf8, 0xfc });
        gbc.writeMem(0xe93b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd879);
        EXPECT(gbc.pc(), 0xfcf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd877), 0xf8);
        EXPECT(gbc.readMem(0xd878), 0xfc);
        EXPECT(gbc.readMem(0xe93b), 0xc9);
        // C9 0181
        gbc.setState(0xb9d1, 0x2e78, 0x1d50, 0xcf91, 0xe8f1, 0x35b4, 0x1, 0x0);
        gbc.writeMem(0x2e78, { 0x98, 0xf6 });
        gbc.writeMem(0xb9d1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2e7a);
        EXPECT(gbc.pc(), 0xf698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d1), 0xc9);
        // C9 0182
        gbc.setState(0x8d24, 0x68e3, 0x2e00, 0xc248, 0x9d62, 0xabe5, 0x1, 0x0);
        gbc.writeMem(0x68e3, { 0x7, 0xab });
        gbc.writeMem(0x8d24, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x68e5);
        EXPECT(gbc.pc(), 0xab07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d24), 0xc9);
        // C9 0183
        gbc.setState(0xb259, 0xcd46, 0x7b30, 0x1dd3, 0xfb2e, 0x54b6, 0x1, 0x1);
        gbc.writeMem(0xb259, { 0xc9 });
        gbc.writeMem(0xcd46, { 0x19, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xcd48);
        EXPECT(gbc.pc(), 0xdc19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb259), 0xc9);
        EXPECT(gbc.readMem(0xcd46), 0x19);
        EXPECT(gbc.readMem(0xcd47), 0xdc);
        // C9 0184
        gbc.setState(0x6327, 0x4534, 0x8b60, 0xa840, 0xad55, 0x5d3f, 0x1, 0x1);
        gbc.writeMem(0x4534, { 0x90, 0x5b });
        gbc.writeMem(0x6327, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4536);
        EXPECT(gbc.pc(), 0x5b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0185
        gbc.setState(0x3183, 0x5783, 0x57c0, 0xa936, 0x5c98, 0xa63e, 0x1, 0x1);
        gbc.writeMem(0x3183, { 0xc9 });
        gbc.writeMem(0x5783, { 0x0, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5785);
        EXPECT(gbc.pc(), 0x900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0186
        gbc.setState(0x5657, 0x491e, 0xc5f0, 0xd8e9, 0x359d, 0xadd2, 0x1, 0x0);
        gbc.writeMem(0x491e, { 0x7c, 0x3d });
        gbc.writeMem(0x5657, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4920);
        EXPECT(gbc.pc(), 0x3d7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0187
        gbc.setState(0x623a, 0xea86, 0x7f40, 0x10fc, 0xbace, 0xe766, 0x0, 0x1);
        gbc.writeMem(0x623a, { 0xc9 });
        gbc.writeMem(0xea86, { 0xed, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xea88);
        EXPECT(gbc.pc(), 0x4fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea86), 0xed);
        EXPECT(gbc.readMem(0xea87), 0x4f);
        // C9 0188
        gbc.setState(0xa00e, 0x866c, 0xb1a0, 0xa5a1, 0xf6cf, 0x3b69, 0x1, 0x1);
        gbc.writeMem(0x866c, { 0xd9, 0xe6 });
        gbc.writeMem(0xa00e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x866e);
        EXPECT(gbc.pc(), 0xe6d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x866c), 0xd9);
        EXPECT(gbc.readMem(0x866d), 0xe6);
        EXPECT(gbc.readMem(0xa00e), 0xc9);
        // C9 0189
        gbc.setState(0x1752, 0x7fdf, 0xec0, 0x844d, 0x2525, 0x850f, 0x1, 0x1);
        gbc.writeMem(0x1752, { 0xc9 });
        gbc.writeMem(0x7fdf, { 0x62, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7fe1);
        EXPECT(gbc.pc(), 0x8d62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 018A
        gbc.setState(0x13f1, 0x1e6, 0x7ca0, 0xbc84, 0x6ebf, 0x3ca1, 0x0, 0x1);
        gbc.writeMem(0x1e6, { 0x4e, 0xb1 });
        gbc.writeMem(0x13f1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1e8);
        EXPECT(gbc.pc(), 0xb14e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 018B
        gbc.setState(0x5172, 0x3a9a, 0x42d0, 0xe2af, 0x6e60, 0xcd1e, 0x1, 0x0);
        gbc.writeMem(0x3a9a, { 0xc4, 0xec });
        gbc.writeMem(0x5172, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3a9c);
        EXPECT(gbc.pc(), 0xecc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 018C
        gbc.setState(0x4169, 0x99c5, 0x5af0, 0xdd57, 0xc253, 0x1919, 0x0, 0x1);
        gbc.writeMem(0x4169, { 0xc9 });
        gbc.writeMem(0x99c5, { 0x68, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x99c7);
        EXPECT(gbc.pc(), 0x4168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c5), 0x68);
        EXPECT(gbc.readMem(0x99c6), 0x41);
        // C9 018D
        gbc.setState(0x71b5, 0xd954, 0x2b60, 0x4f4, 0x2c0c, 0x4761, 0x0, 0x0);
        gbc.writeMem(0x71b5, { 0xc9 });
        gbc.writeMem(0xd954, { 0x49, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd956);
        EXPECT(gbc.pc(), 0x9b49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd954), 0x49);
        EXPECT(gbc.readMem(0xd955), 0x9b);
        // C9 018E
        gbc.setState(0xb905, 0xf54b, 0x11b0, 0x47ea, 0x3389, 0x4128, 0x1, 0x0);
        gbc.writeMem(0xb905, { 0xc9 });
        gbc.writeMem(0xf54b, { 0x79, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf54d);
        EXPECT(gbc.pc(), 0x9279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb905), 0xc9);
        EXPECT(gbc.readMem(0xf54b), 0x79);
        EXPECT(gbc.readMem(0xf54c), 0x92);
        // C9 018F
        gbc.setState(0xbc7d, 0x57e3, 0x6540, 0xc7cf, 0xb20b, 0x3f44, 0x0, 0x1);
        gbc.writeMem(0x57e3, { 0x22, 0xf4 });
        gbc.writeMem(0xbc7d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x57e5);
        EXPECT(gbc.pc(), 0xf422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc7d), 0xc9);
        // C9 0190
        gbc.setState(0x6e8e, 0xfe9d, 0x5f80, 0x130e, 0xc6c8, 0xc376, 0x0, 0x1);
        gbc.writeMem(0x6e8e, { 0xc9 });
        gbc.writeMem(0xfe9d, { 0xb9, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfe9f);
        EXPECT(gbc.pc(), 0x6db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe9d), 0xb9);
        EXPECT(gbc.readMem(0xfe9e), 0x6d);
        // C9 0191
        gbc.setState(0x1749, 0x50a4, 0x3160, 0x50af, 0x507a, 0x1330, 0x0, 0x1);
        gbc.writeMem(0x1749, { 0xc9 });
        gbc.writeMem(0x50a4, { 0xb9, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x50a6);
        EXPECT(gbc.pc(), 0x82b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0192
        gbc.setState(0x755d, 0xb253, 0x28d0, 0x85ce, 0xb1eb, 0x8a5d, 0x0, 0x1);
        gbc.writeMem(0x755d, { 0xc9 });
        gbc.writeMem(0xb253, { 0x36, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb255);
        EXPECT(gbc.pc(), 0x3036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb253), 0x36);
        EXPECT(gbc.readMem(0xb254), 0x30);
        // C9 0193
        gbc.setState(0x6f58, 0x2194, 0x6700, 0xe9d3, 0x7b5, 0xfb9a, 0x1, 0x0);
        gbc.writeMem(0x2194, { 0x3d, 0x66 });
        gbc.writeMem(0x6f58, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2196);
        EXPECT(gbc.pc(), 0x663d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0194
        gbc.setState(0x5c92, 0xff87, 0x4200, 0x3939, 0x6470, 0xb656, 0x0, 0x0);
        gbc.writeMem(0x5c92, { 0xc9 });
        gbc.writeMem(0xff87, { 0xb1, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xff89);
        EXPECT(gbc.pc(), 0x49b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff87), 0xb1);
        EXPECT(gbc.readMem(0xff88), 0x49);
        // C9 0195
        gbc.setState(0x5eef, 0xc293, 0x6890, 0xe9e4, 0x3663, 0x481a, 0x0, 0x0);
        gbc.writeMem(0x5eef, { 0xc9 });
        gbc.writeMem(0xc293, { 0x6d, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xc295);
        EXPECT(gbc.pc(), 0xf06d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc293), 0x6d);
        EXPECT(gbc.readMem(0xc294), 0xf0);
        // C9 0196
        gbc.setState(0xc2ec, 0x2ef3, 0x7b60, 0x8d67, 0x66ec, 0x996e, 0x1, 0x0);
        gbc.writeMem(0x2ef3, { 0x99, 0xaa });
        gbc.writeMem(0xc2ec, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2ef5);
        EXPECT(gbc.pc(), 0xaa99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ec), 0xc9);
        // C9 0197
        gbc.setState(0x91ae, 0xb3b5, 0x1b0, 0xd53c, 0x899a, 0x323f, 0x1, 0x1);
        gbc.writeMem(0x91ae, { 0xc9 });
        gbc.writeMem(0xb3b5, { 0x24, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb3b7);
        EXPECT(gbc.pc(), 0xd24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ae), 0xc9);
        EXPECT(gbc.readMem(0xb3b5), 0x24);
        EXPECT(gbc.readMem(0xb3b6), 0xd);
        // C9 0198
        gbc.setState(0xd708, 0xc22, 0x23f0, 0x672, 0xc5d9, 0x2069, 0x1, 0x0);
        gbc.writeMem(0xc22, { 0x8e, 0xab });
        gbc.writeMem(0xd708, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xc24);
        EXPECT(gbc.pc(), 0xab8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd708), 0xc9);
        // C9 0199
        gbc.setState(0x5595, 0x4e8b, 0x99c0, 0x2c52, 0xcbca, 0x173e, 0x0, 0x1);
        gbc.writeMem(0x4e8b, { 0x6c, 0x5c });
        gbc.writeMem(0x5595, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x4e8d);
        EXPECT(gbc.pc(), 0x5c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 019B
        gbc.setState(0x6c6c, 0xd2a9, 0x2a40, 0xd158, 0x35dc, 0x424a, 0x1, 0x0);
        gbc.writeMem(0x6c6c, { 0xc9 });
        gbc.writeMem(0xd2a9, { 0xd9, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd2ab);
        EXPECT(gbc.pc(), 0x79d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a9), 0xd9);
        EXPECT(gbc.readMem(0xd2aa), 0x79);
        // C9 019C
        gbc.setState(0xa30f, 0x22b1, 0x40a0, 0xa83a, 0xac62, 0x36a7, 0x1, 0x1);
        gbc.writeMem(0x22b1, { 0x75, 0x8 });
        gbc.writeMem(0xa30f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x22b3);
        EXPECT(gbc.pc(), 0x875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30f), 0xc9);
        // C9 019D
        gbc.setState(0xc166, 0xcd0f, 0xba90, 0x6db, 0x1c9f, 0xa7a7, 0x0, 0x1);
        gbc.writeMem(0xc166, { 0xc9 });
        gbc.writeMem(0xcd0f, { 0x69, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcd11);
        EXPECT(gbc.pc(), 0xee69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc166), 0xc9);
        EXPECT(gbc.readMem(0xcd0f), 0x69);
        EXPECT(gbc.readMem(0xcd10), 0xee);
        // C9 019E
        gbc.setState(0x638c, 0x785f, 0xc160, 0x449c, 0x2b5d, 0xf04e, 0x1, 0x1);
        gbc.writeMem(0x638c, { 0xc9 });
        gbc.writeMem(0x785f, { 0x63, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7861);
        EXPECT(gbc.pc(), 0x7563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 019F
        gbc.setState(0xc527, 0xe263, 0x2f60, 0x5647, 0x6865, 0xbae0, 0x1, 0x1);
        gbc.writeMem(0xc527, { 0xc9 });
        gbc.writeMem(0xe263, { 0x87, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe265);
        EXPECT(gbc.pc(), 0x7c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc527), 0xc9);
        EXPECT(gbc.readMem(0xe263), 0x87);
        EXPECT(gbc.readMem(0xe264), 0x7c);
        // C9 01A0
        gbc.setState(0x70c0, 0x23f4, 0xa520, 0x243a, 0xc0bf, 0x8aa5, 0x1, 0x1);
        gbc.writeMem(0x23f4, { 0x19, 0x38 });
        gbc.writeMem(0x70c0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x23f6);
        EXPECT(gbc.pc(), 0x3819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 01A1
        gbc.setState(0x106b, 0x2f15, 0x9030, 0x7e32, 0xdb2b, 0x558d, 0x0, 0x1);
        gbc.writeMem(0x106b, { 0xc9 });
        gbc.writeMem(0x2f15, { 0xbe, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2f17);
        EXPECT(gbc.pc(), 0x20be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01A2
        gbc.setState(0xc0e1, 0xf8a6, 0xe550, 0xdd5d, 0xad2c, 0xae7a, 0x1, 0x0);
        gbc.writeMem(0xc0e1, { 0xc9 });
        gbc.writeMem(0xf8a6, { 0x50, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf8a8);
        EXPECT(gbc.pc(), 0x4850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0e1), 0xc9);
        EXPECT(gbc.readMem(0xf8a6), 0x50);
        EXPECT(gbc.readMem(0xf8a7), 0x48);
        // C9 01A3
        gbc.setState(0x91b9, 0xd471, 0xa460, 0x81c6, 0xa61c, 0x19c8, 0x1, 0x1);
        gbc.writeMem(0x91b9, { 0xc9 });
        gbc.writeMem(0xd471, { 0xc0, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd473);
        EXPECT(gbc.pc(), 0x9bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b9), 0xc9);
        EXPECT(gbc.readMem(0xd471), 0xc0);
        EXPECT(gbc.readMem(0xd472), 0x9b);
        // C9 01A5
        gbc.setState(0xe5fd, 0xe6e8, 0x3ae0, 0x2d27, 0x34b9, 0xcec0, 0x0, 0x0);
        gbc.writeMem(0xe5fd, { 0xc9 });
        gbc.writeMem(0xe6e8, { 0xea, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe6ea);
        EXPECT(gbc.pc(), 0x80ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5fd), 0xc9);
        EXPECT(gbc.readMem(0xe6e8), 0xea);
        EXPECT(gbc.readMem(0xe6e9), 0x80);
        // C9 01A6
        gbc.setState(0xaa96, 0xce24, 0x2c60, 0x6609, 0xb599, 0xd38b, 0x1, 0x0);
        gbc.writeMem(0xaa96, { 0xc9 });
        gbc.writeMem(0xce24, { 0x84, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xce26);
        EXPECT(gbc.pc(), 0x3f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa96), 0xc9);
        EXPECT(gbc.readMem(0xce24), 0x84);
        EXPECT(gbc.readMem(0xce25), 0x3f);
        // C9 01A7
        gbc.setState(0x656c, 0xdae6, 0x9570, 0x162f, 0xf6ce, 0x680a, 0x1, 0x1);
        gbc.writeMem(0x656c, { 0xc9 });
        gbc.writeMem(0xdae6, { 0xef, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdae8);
        EXPECT(gbc.pc(), 0x78ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae6), 0xef);
        EXPECT(gbc.readMem(0xdae7), 0x78);
        // C9 01A8
        gbc.setState(0x55dd, 0xbcf9, 0xaa0, 0x3260, 0x8d8, 0xb3a9, 0x0, 0x1);
        gbc.writeMem(0x55dd, { 0xc9 });
        gbc.writeMem(0xbcf9, { 0x65, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbcfb);
        EXPECT(gbc.pc(), 0xae65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf9), 0x65);
        EXPECT(gbc.readMem(0xbcfa), 0xae);
        // C9 01A9
        gbc.setState(0x8b54, 0xfcfc, 0x9650, 0x1568, 0x4f58, 0xb60d, 0x1, 0x0);
        gbc.writeMem(0x8b54, { 0xc9 });
        gbc.writeMem(0xfcfc, { 0xb7, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xfcfe);
        EXPECT(gbc.pc(), 0xf6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b54), 0xc9);
        EXPECT(gbc.readMem(0xfcfc), 0xb7);
        EXPECT(gbc.readMem(0xfcfd), 0xf6);
        // C9 01AA
        gbc.setState(0x368f, 0x5f86, 0xc230, 0x4d19, 0x329e, 0x50c2, 0x1, 0x1);
        gbc.writeMem(0x368f, { 0xc9 });
        gbc.writeMem(0x5f86, { 0xa8, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5f88);
        EXPECT(gbc.pc(), 0x13a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01AB
        gbc.setState(0xa088, 0xa36c, 0x6e70, 0x3743, 0x614a, 0xb33d, 0x0, 0x1);
        gbc.writeMem(0xa088, { 0xc9 });
        gbc.writeMem(0xa36c, { 0x33, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa36e);
        EXPECT(gbc.pc(), 0xf833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa088), 0xc9);
        EXPECT(gbc.readMem(0xa36c), 0x33);
        EXPECT(gbc.readMem(0xa36d), 0xf8);
        // C9 01AC
        gbc.setState(0x4ce2, 0x1608, 0x6b90, 0x5685, 0x4960, 0xfe90, 0x1, 0x1);
        gbc.writeMem(0x1608, { 0xc1, 0xb2 });
        gbc.writeMem(0x4ce2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x160a);
        EXPECT(gbc.pc(), 0xb2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01AD
        gbc.setState(0xe49e, 0xf656, 0x29f0, 0xfcf0, 0x54d4, 0x2efe, 0x0, 0x0);
        gbc.writeMem(0xe49e, { 0xc9 });
        gbc.writeMem(0xf656, { 0x36, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf658);
        EXPECT(gbc.pc(), 0x7036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe49e), 0xc9);
        EXPECT(gbc.readMem(0xf656), 0x36);
        EXPECT(gbc.readMem(0xf657), 0x70);
        // C9 01AE
        gbc.setState(0x87b4, 0xddb4, 0xbd10, 0xecbe, 0x18a2, 0xd86f, 0x0, 0x1);
        gbc.writeMem(0x87b4, { 0xc9 });
        gbc.writeMem(0xddb4, { 0x1b, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xddb6);
        EXPECT(gbc.pc(), 0xf61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b4), 0xc9);
        EXPECT(gbc.readMem(0xddb4), 0x1b);
        EXPECT(gbc.readMem(0xddb5), 0xf6);
        // C9 01AF
        gbc.setState(0x81e1, 0xe00a, 0x76f0, 0x7c41, 0xc434, 0x67c4, 0x1, 0x0);
        gbc.writeMem(0x81e1, { 0xc9 });
        gbc.writeMem(0xe00a, { 0x77, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe00c);
        EXPECT(gbc.pc(), 0xa177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e1), 0xc9);
        EXPECT(gbc.readMem(0xe00a), 0x77);
        EXPECT(gbc.readMem(0xe00b), 0xa1);
        // C9 01B0
        gbc.setState(0xacc2, 0x98f7, 0xab70, 0x98d9, 0x9cbe, 0x1f81, 0x0, 0x0);
        gbc.writeMem(0x98f7, { 0xb, 0x25 });
        gbc.writeMem(0xacc2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x98f9);
        EXPECT(gbc.pc(), 0x250b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f7), 0xb);
        EXPECT(gbc.readMem(0x98f8), 0x25);
        EXPECT(gbc.readMem(0xacc2), 0xc9);
        // C9 01B2
        gbc.setState(0x71b2, 0xa35f, 0xa5f0, 0x932d, 0x7ff1, 0x94ae, 0x0, 0x1);
        gbc.writeMem(0x71b2, { 0xc9 });
        gbc.writeMem(0xa35f, { 0x18, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa361);
        EXPECT(gbc.pc(), 0x2d18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa35f), 0x18);
        EXPECT(gbc.readMem(0xa360), 0x2d);
        // C9 01B3
        gbc.setState(0x2fde, 0xaeb3, 0xce80, 0xea40, 0x4ae8, 0xc773, 0x1, 0x0);
        gbc.writeMem(0x2fde, { 0xc9 });
        gbc.writeMem(0xaeb3, { 0x7b, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaeb5);
        EXPECT(gbc.pc(), 0x257b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb3), 0x7b);
        EXPECT(gbc.readMem(0xaeb4), 0x25);
        // C9 01B4
        gbc.setState(0x22c2, 0x8280, 0x8ce0, 0x2f3c, 0x853f, 0x3e10, 0x1, 0x0);
        gbc.writeMem(0x22c2, { 0xc9 });
        gbc.writeMem(0x8280, { 0x13, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8282);
        EXPECT(gbc.pc(), 0xb813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8280), 0x13);
        EXPECT(gbc.readMem(0x8281), 0xb8);
        // C9 01B5
        gbc.setState(0x5bc9, 0xe68f, 0x1030, 0xa3c2, 0x42c2, 0x1e9d, 0x1, 0x1);
        gbc.writeMem(0x5bc9, { 0xc9 });
        gbc.writeMem(0xe68f, { 0xc7, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe691);
        EXPECT(gbc.pc(), 0x62c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68f), 0xc7);
        EXPECT(gbc.readMem(0xe690), 0x62);
        // C9 01B7
        gbc.setState(0x263, 0x6015, 0x4bc0, 0xf9b4, 0xf6ed, 0xdceb, 0x1, 0x1);
        gbc.writeMem(0x263, { 0xc9 });
        gbc.writeMem(0x6015, { 0x1d, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6017);
        EXPECT(gbc.pc(), 0xa51d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01B8
        gbc.setState(0x3144, 0x9c21, 0x7540, 0xd42c, 0x4733, 0xe320, 0x1, 0x0);
        gbc.writeMem(0x3144, { 0xc9 });
        gbc.writeMem(0x9c21, { 0x81, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9c23);
        EXPECT(gbc.pc(), 0xe481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c21), 0x81);
        EXPECT(gbc.readMem(0x9c22), 0xe4);
        // C9 01B9
        gbc.setState(0xe4ab, 0x5a50, 0x41e0, 0xe1dd, 0xb944, 0x8b18, 0x0, 0x0);
        gbc.writeMem(0x5a50, { 0xb3, 0x35 });
        gbc.writeMem(0xe4ab, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5a52);
        EXPECT(gbc.pc(), 0x35b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ab), 0xc9);
        // C9 01BA
        gbc.setState(0x5496, 0x99fb, 0xeb70, 0x1301, 0x9802, 0x95bd, 0x1, 0x1);
        gbc.writeMem(0x5496, { 0xc9 });
        gbc.writeMem(0x99fb, { 0x75, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x99fd);
        EXPECT(gbc.pc(), 0xac75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99fb), 0x75);
        EXPECT(gbc.readMem(0x99fc), 0xac);
        // C9 01BB
        gbc.setState(0x3d9e, 0x253b, 0x6650, 0x3c8c, 0xa3ec, 0xc7ef, 0x1, 0x0);
        gbc.writeMem(0x253b, { 0x1c, 0xa6 });
        gbc.writeMem(0x3d9e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x253d);
        EXPECT(gbc.pc(), 0xa61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01BC
        gbc.setState(0x7be, 0x607d, 0xfa70, 0xe5ed, 0x506e, 0xf4b0, 0x0, 0x1);
        gbc.writeMem(0x7be, { 0xc9 });
        gbc.writeMem(0x607d, { 0xc, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x607f);
        EXPECT(gbc.pc(), 0xcb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01BD
        gbc.setState(0xef8a, 0xc90b, 0x6e10, 0x61b8, 0xfae1, 0x8cc8, 0x1, 0x0);
        gbc.writeMem(0xc90b, { 0x36, 0xef });
        gbc.writeMem(0xef8a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xc90d);
        EXPECT(gbc.pc(), 0xef36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90b), 0x36);
        EXPECT(gbc.readMem(0xc90c), 0xef);
        EXPECT(gbc.readMem(0xef8a), 0xc9);
        // C9 01BE
        gbc.setState(0x81d0, 0x9bc2, 0x3810, 0x338b, 0x1cd2, 0x590a, 0x0, 0x0);
        gbc.writeMem(0x81d0, { 0xc9 });
        gbc.writeMem(0x9bc2, { 0xb0, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9bc4);
        EXPECT(gbc.pc(), 0x9b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81d0), 0xc9);
        EXPECT(gbc.readMem(0x9bc2), 0xb0);
        EXPECT(gbc.readMem(0x9bc3), 0x9);
        // C9 01BF
        gbc.setState(0x131a, 0xed68, 0x1530, 0x327b, 0x8136, 0x8831, 0x0, 0x0);
        gbc.writeMem(0x131a, { 0xc9 });
        gbc.writeMem(0xed68, { 0xc3, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xed6a);
        EXPECT(gbc.pc(), 0x51c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed68), 0xc3);
        EXPECT(gbc.readMem(0xed69), 0x51);
        // C9 01C0
        gbc.setState(0x9e76, 0x8280, 0xa5c0, 0x28d1, 0x890c, 0xcdb7, 0x1, 0x1);
        gbc.writeMem(0x8280, { 0x13, 0xb8 });
        gbc.writeMem(0x9e76, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8282);
        EXPECT(gbc.pc(), 0xb813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8280), 0x13);
        EXPECT(gbc.readMem(0x8281), 0xb8);
        EXPECT(gbc.readMem(0x9e76), 0xc9);
        // C9 01C1
        gbc.setState(0x957d, 0xf19a, 0xb300, 0xd213, 0x74d7, 0xfe6d, 0x1, 0x1);
        gbc.writeMem(0x957d, { 0xc9 });
        gbc.writeMem(0xf19a, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf19c);
        EXPECT(gbc.pc(), 0x5a38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x957d), 0xc9);
        EXPECT(gbc.readMem(0xf19a), 0x38);
        EXPECT(gbc.readMem(0xf19b), 0x5a);
        // C9 01C2
        gbc.setState(0xb79, 0x6ae9, 0x7ad0, 0xe8b2, 0x9c2d, 0x9b09, 0x1, 0x0);
        gbc.writeMem(0xb79, { 0xc9 });
        gbc.writeMem(0x6ae9, { 0x7f, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6aeb);
        EXPECT(gbc.pc(), 0x647f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01C3
        gbc.setState(0x949, 0x65f1, 0xf960, 0x5f00, 0x8d74, 0x774f, 0x0, 0x1);
        gbc.writeMem(0x949, { 0xc9 });
        gbc.writeMem(0x65f1, { 0xcc, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x65f3);
        EXPECT(gbc.pc(), 0xd3cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 01C4
        gbc.setState(0x95b, 0x4624, 0x1540, 0xb274, 0xa5e0, 0x4422, 0x1, 0x0);
        gbc.writeMem(0x95b, { 0xc9 });
        gbc.writeMem(0x4624, { 0x79, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x4626);
        EXPECT(gbc.pc(), 0x4679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01C5
        gbc.setState(0x5a1b, 0xa646, 0x1710, 0x10be, 0xb055, 0x9247, 0x0, 0x1);
        gbc.writeMem(0x5a1b, { 0xc9 });
        gbc.writeMem(0xa646, { 0xa, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa648);
        EXPECT(gbc.pc(), 0x400a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa646), 0xa);
        EXPECT(gbc.readMem(0xa647), 0x40);
        // C9 01C6
        gbc.setState(0x4b24, 0x2a4c, 0xeb10, 0x8319, 0x5a62, 0xf819, 0x1, 0x1);
        gbc.writeMem(0x2a4c, { 0x63, 0xa9 });
        gbc.writeMem(0x4b24, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2a4e);
        EXPECT(gbc.pc(), 0xa963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01C7
        gbc.setState(0x4870, 0x7c52, 0xd210, 0x82e, 0xcefa, 0x13a5, 0x0, 0x1);
        gbc.writeMem(0x4870, { 0xc9 });
        gbc.writeMem(0x7c52, { 0x5d, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7c54);
        EXPECT(gbc.pc(), 0x205d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01C9
        gbc.setState(0x23c6, 0x1d3f, 0x8450, 0x8156, 0xc6a3, 0x8bae, 0x0, 0x0);
        gbc.writeMem(0x1d3f, { 0xb3, 0x86 });
        gbc.writeMem(0x23c6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x1d41);
        EXPECT(gbc.pc(), 0x86b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01CA
        gbc.setState(0xd986, 0x66be, 0xdfc0, 0x2b0d, 0x5dd, 0x425e, 0x1, 0x0);
        gbc.writeMem(0x66be, { 0x47, 0x3e });
        gbc.writeMem(0xd986, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x66c0);
        EXPECT(gbc.pc(), 0x3e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd986), 0xc9);
        // C9 01CB
        gbc.setState(0x8247, 0x30b5, 0x6930, 0x344c, 0x2619, 0x652f, 0x1, 0x1);
        gbc.writeMem(0x30b5, { 0x42, 0xb5 });
        gbc.writeMem(0x8247, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x30b7);
        EXPECT(gbc.pc(), 0xb542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8247), 0xc9);
        // C9 01CC
        gbc.setState(0xb4bc, 0x1e77, 0x8800, 0xb233, 0xb139, 0x194, 0x0, 0x0);
        gbc.writeMem(0x1e77, { 0x8f, 0xd9 });
        gbc.writeMem(0xb4bc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1e79);
        EXPECT(gbc.pc(), 0xd98f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4bc), 0xc9);
        // C9 01CD
        gbc.setState(0x271a, 0xc7f3, 0xc640, 0x1c76, 0xb74, 0x9cb8, 0x1, 0x1);
        gbc.writeMem(0x271a, { 0xc9 });
        gbc.writeMem(0xc7f3, { 0xfc, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc7f5);
        EXPECT(gbc.pc(), 0x22fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f3), 0xfc);
        EXPECT(gbc.readMem(0xc7f4), 0x22);
        // C9 01CE
        gbc.setState(0x74a4, 0xe791, 0xc210, 0x58fa, 0xe4c6, 0xf6a8, 0x1, 0x1);
        gbc.writeMem(0x74a4, { 0xc9 });
        gbc.writeMem(0xe791, { 0x25, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe793);
        EXPECT(gbc.pc(), 0x7325);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe791), 0x25);
        EXPECT(gbc.readMem(0xe792), 0x73);
        // C9 01CF
        gbc.setState(0xb76, 0x6039, 0x2e10, 0xcb3b, 0xeba1, 0x4115, 0x0, 0x0);
        gbc.writeMem(0xb76, { 0xc9 });
        gbc.writeMem(0x6039, { 0xc8, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x603b);
        EXPECT(gbc.pc(), 0xe0c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01D0
        gbc.setState(0xd9c3, 0x7786, 0x7880, 0x379e, 0xada7, 0xa483, 0x0, 0x1);
        gbc.writeMem(0x7786, { 0x57, 0x92 });
        gbc.writeMem(0xd9c3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7788);
        EXPECT(gbc.pc(), 0x9257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c3), 0xc9);
        // C9 01D2
        gbc.setState(0x74f6, 0x3ad, 0xfaa0, 0xc230, 0x46c2, 0xde5b, 0x1, 0x0);
        gbc.writeMem(0x3ad, { 0xbf, 0xed });
        gbc.writeMem(0x74f6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3af);
        EXPECT(gbc.pc(), 0xedbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 01D3
        gbc.setState(0x17fa, 0x5957, 0x9990, 0x259c, 0x926e, 0xa68, 0x0, 0x1);
        gbc.writeMem(0x17fa, { 0xc9 });
        gbc.writeMem(0x5957, { 0x42, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5959);
        EXPECT(gbc.pc(), 0xd442);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01D4
        gbc.setState(0x31ac, 0x6467, 0x29b0, 0xa77d, 0xf7e6, 0x460b, 0x1, 0x1);
        gbc.writeMem(0x31ac, { 0xc9 });
        gbc.writeMem(0x6467, { 0x7d, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6469);
        EXPECT(gbc.pc(), 0xc67d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01D6
        gbc.setState(0x8251, 0x10d2, 0x2e50, 0xfbd1, 0xd77d, 0x8b58, 0x1, 0x0);
        gbc.writeMem(0x10d2, { 0x86, 0xdb });
        gbc.writeMem(0x8251, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x10d4);
        EXPECT(gbc.pc(), 0xdb86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8251), 0xc9);
        // C9 01D8
        gbc.setState(0x86e4, 0x21df, 0x4d80, 0x33c6, 0xec5b, 0xedcd, 0x0, 0x1);
        gbc.writeMem(0x21df, { 0xc1, 0x13 });
        gbc.writeMem(0x86e4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x21e1);
        EXPECT(gbc.pc(), 0x13c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e4), 0xc9);
        // C9 01D9
        gbc.setState(0x1c71, 0xd49d, 0x8c40, 0x4861, 0x50ea, 0x8d86, 0x1, 0x0);
        gbc.writeMem(0x1c71, { 0xc9 });
        gbc.writeMem(0xd49d, { 0xee, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd49f);
        EXPECT(gbc.pc(), 0x81ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd49d), 0xee);
        EXPECT(gbc.readMem(0xd49e), 0x81);
        // C9 01DA
        gbc.setState(0x5ff7, 0x896b, 0x30e0, 0x2695, 0x14b9, 0x2d, 0x0, 0x0);
        gbc.writeMem(0x5ff7, { 0xc9 });
        gbc.writeMem(0x896b, { 0x43, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x896d);
        EXPECT(gbc.pc(), 0xe743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x896b), 0x43);
        EXPECT(gbc.readMem(0x896c), 0xe7);
        // C9 01DB
        gbc.setState(0x9154, 0x5b6f, 0xb440, 0x861b, 0xae8e, 0x8565, 0x1, 0x1);
        gbc.writeMem(0x5b6f, { 0xaf, 0x14 });
        gbc.writeMem(0x9154, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5b71);
        EXPECT(gbc.pc(), 0x14af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9154), 0xc9);
        // C9 01DC
        gbc.setState(0x6b2c, 0xbe47, 0xf0b0, 0xf580, 0x4151, 0x1835, 0x1, 0x1);
        gbc.writeMem(0x6b2c, { 0xc9 });
        gbc.writeMem(0xbe47, { 0x14, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbe49);
        EXPECT(gbc.pc(), 0x3b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe47), 0x14);
        EXPECT(gbc.readMem(0xbe48), 0x3b);
        // C9 01DE
        gbc.setState(0x9b76, 0xc08d, 0x87f0, 0x2c2a, 0x61d1, 0xa6d2, 0x1, 0x0);
        gbc.writeMem(0x9b76, { 0xc9 });
        gbc.writeMem(0xc08d, { 0xa6, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xc08f);
        EXPECT(gbc.pc(), 0xd2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b76), 0xc9);
        EXPECT(gbc.readMem(0xc08d), 0xa6);
        EXPECT(gbc.readMem(0xc08e), 0xd2);
        // C9 01DF
        gbc.setState(0x4db7, 0xa43, 0x8aa0, 0xa23c, 0xfe6, 0xeafc, 0x1, 0x0);
        gbc.writeMem(0xa43, { 0x76, 0x82 });
        gbc.writeMem(0x4db7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xa45);
        EXPECT(gbc.pc(), 0x8276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 01E0
        gbc.setState(0x68f8, 0x4ae0, 0x2100, 0xdc83, 0x4586, 0xa993, 0x0, 0x0);
        gbc.writeMem(0x4ae0, { 0xfd, 0x6f });
        gbc.writeMem(0x68f8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4ae2);
        EXPECT(gbc.pc(), 0x6ffd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01E1
        gbc.setState(0x174e, 0xcc7b, 0x5b90, 0xb9b0, 0x5a2b, 0xd584, 0x0, 0x0);
        gbc.writeMem(0x174e, { 0xc9 });
        gbc.writeMem(0xcc7b, { 0x2c, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xcc7d);
        EXPECT(gbc.pc(), 0x392c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7b), 0x2c);
        EXPECT(gbc.readMem(0xcc7c), 0x39);
        // C9 01E2
        gbc.setState(0xb770, 0xf8cb, 0xf960, 0x2ae3, 0xe9a7, 0x5967, 0x1, 0x1);
        gbc.writeMem(0xb770, { 0xc9 });
        gbc.writeMem(0xf8cb, { 0x2a, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf8cd);
        EXPECT(gbc.pc(), 0x572a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb770), 0xc9);
        EXPECT(gbc.readMem(0xf8cb), 0x2a);
        EXPECT(gbc.readMem(0xf8cc), 0x57);
        // C9 01E3
        gbc.setState(0xd23, 0x55ad, 0xa220, 0x506, 0x95fe, 0x9b9d, 0x0, 0x0);
        gbc.writeMem(0xd23, { 0xc9 });
        gbc.writeMem(0x55ad, { 0x49, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x55af);
        EXPECT(gbc.pc(), 0xc549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 01E4
        gbc.setState(0xd063, 0xa5c1, 0x1520, 0x8480, 0x4557, 0x7d32, 0x1, 0x1);
        gbc.writeMem(0xa5c1, { 0x16, 0x79 });
        gbc.writeMem(0xd063, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa5c3);
        EXPECT(gbc.pc(), 0x7916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5c1), 0x16);
        EXPECT(gbc.readMem(0xa5c2), 0x79);
        EXPECT(gbc.readMem(0xd063), 0xc9);
        // C9 01E5
        gbc.setState(0x94da, 0xf7d0, 0xbf10, 0xc21b, 0xbcf7, 0x159, 0x0, 0x1);
        gbc.writeMem(0x94da, { 0xc9 });
        gbc.writeMem(0xf7d0, { 0x2a, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf7d2);
        EXPECT(gbc.pc(), 0x8d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94da), 0xc9);
        EXPECT(gbc.readMem(0xf7d0), 0x2a);
        EXPECT(gbc.readMem(0xf7d1), 0x8d);
        // C9 01E6
        gbc.setState(0x3df0, 0x41e1, 0x5190, 0x83ae, 0x4491, 0x5893, 0x1, 0x1);
        gbc.writeMem(0x3df0, { 0xc9 });
        gbc.writeMem(0x41e1, { 0xd7, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x41e3);
        EXPECT(gbc.pc(), 0xf4d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 01E7
        gbc.setState(0xb8e7, 0xadd0, 0x7290, 0x2007, 0x563d, 0x7c0f, 0x0, 0x1);
        gbc.writeMem(0xadd0, { 0x36, 0xca });
        gbc.writeMem(0xb8e7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xadd2);
        EXPECT(gbc.pc(), 0xca36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadd0), 0x36);
        EXPECT(gbc.readMem(0xadd1), 0xca);
        EXPECT(gbc.readMem(0xb8e7), 0xc9);
        // C9 01E8
        gbc.setState(0xe565, 0x88fe, 0xfc20, 0xd669, 0x13a2, 0x1948, 0x0, 0x0);
        gbc.writeMem(0x88fe, { 0xe8, 0x4e });
        gbc.writeMem(0xe565, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8900);
        EXPECT(gbc.pc(), 0x4ee8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88fe), 0xe8);
        EXPECT(gbc.readMem(0x88ff), 0x4e);
        EXPECT(gbc.readMem(0xe565), 0xc9);
        // C9 01E9
        gbc.setState(0x59c6, 0xbcb6, 0x6af0, 0xf705, 0xfec4, 0x7fc5, 0x1, 0x0);
        gbc.writeMem(0x59c6, { 0xc9 });
        gbc.writeMem(0xbcb6, { 0xa4, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xbcb8);
        EXPECT(gbc.pc(), 0x6aa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcb6), 0xa4);
        EXPECT(gbc.readMem(0xbcb7), 0x6a);
        // C9 01EA
        gbc.setState(0x1503, 0x82fd, 0xbcb0, 0xd73c, 0xb701, 0x78b9, 0x0, 0x0);
        gbc.writeMem(0x1503, { 0xc9 });
        gbc.writeMem(0x82fd, { 0x7a, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x82ff);
        EXPECT(gbc.pc(), 0x887a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fd), 0x7a);
        EXPECT(gbc.readMem(0x82fe), 0x88);
        // C9 01EB
        gbc.setState(0x1d03, 0x4f4c, 0xa800, 0xa032, 0x4bb, 0x3ae0, 0x1, 0x0);
        gbc.writeMem(0x1d03, { 0xc9 });
        gbc.writeMem(0x4f4c, { 0xce, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4f4e);
        EXPECT(gbc.pc(), 0xa9ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01EC
        gbc.setState(0x8c8, 0x94d2, 0x8050, 0xd1f6, 0xb71a, 0xe428, 0x0, 0x0);
        gbc.writeMem(0x8c8, { 0xc9 });
        gbc.writeMem(0x94d2, { 0xd0, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x94d4);
        EXPECT(gbc.pc(), 0xfcd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94d2), 0xd0);
        EXPECT(gbc.readMem(0x94d3), 0xfc);
        // C9 01ED
        gbc.setState(0xa4fb, 0x16ce, 0xcb10, 0x5691, 0xdd85, 0xfa27, 0x1, 0x0);
        gbc.writeMem(0x16ce, { 0x6d, 0x53 });
        gbc.writeMem(0xa4fb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x16d0);
        EXPECT(gbc.pc(), 0x536d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4fb), 0xc9);
        // C9 01EE
        gbc.setState(0x6f2, 0xd5d, 0x3170, 0x53, 0x57a4, 0xfb71, 0x1, 0x1);
        gbc.writeMem(0x6f2, { 0xc9 });
        gbc.writeMem(0xd5d, { 0x85, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd5f);
        EXPECT(gbc.pc(), 0x6d85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01EF
        gbc.setState(0x44bf, 0xa093, 0x3930, 0x8be2, 0xda5e, 0x53ab, 0x0, 0x1);
        gbc.writeMem(0x44bf, { 0xc9 });
        gbc.writeMem(0xa093, { 0x1, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa095);
        EXPECT(gbc.pc(), 0x2901);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa093), 0x1);
        EXPECT(gbc.readMem(0xa094), 0x29);
        // C9 01F0
        gbc.setState(0x876c, 0x7899, 0x8e0, 0xaa15, 0x92c1, 0xa9e9, 0x0, 0x0);
        gbc.writeMem(0x7899, { 0x38, 0xe4 });
        gbc.writeMem(0x876c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x789b);
        EXPECT(gbc.pc(), 0xe438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x876c), 0xc9);
        // C9 01F1
        gbc.setState(0x685d, 0xf29b, 0xf600, 0x1518, 0x4a14, 0xe7f, 0x1, 0x1);
        gbc.writeMem(0x685d, { 0xc9 });
        gbc.writeMem(0xf29b, { 0x88, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf29d);
        EXPECT(gbc.pc(), 0x7988);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf29b), 0x88);
        EXPECT(gbc.readMem(0xf29c), 0x79);
        // C9 01F2
        gbc.setState(0x99fb, 0x297e, 0x2930, 0x2251, 0x232c, 0x1285, 0x0, 0x1);
        gbc.writeMem(0x297e, { 0xee, 0x72 });
        gbc.writeMem(0x99fb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2980);
        EXPECT(gbc.pc(), 0x72ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99fb), 0xc9);
        // C9 01F3
        gbc.setState(0x25de, 0x76e3, 0xc900, 0xef9f, 0xcffe, 0xaeb2, 0x1, 0x0);
        gbc.writeMem(0x25de, { 0xc9 });
        gbc.writeMem(0x76e3, { 0x42, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x76e5);
        EXPECT(gbc.pc(), 0x4c42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01F4
        gbc.setState(0xca3e, 0x653e, 0xe1f0, 0xe989, 0x7b06, 0x6244, 0x0, 0x0);
        gbc.writeMem(0x653e, { 0x13, 0x58 });
        gbc.writeMem(0xca3e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x6540);
        EXPECT(gbc.pc(), 0x5813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca3e), 0xc9);
        // C9 01F5
        gbc.setState(0x8ab, 0x7814, 0x5f30, 0x680, 0x276f, 0xcae4, 0x1, 0x1);
        gbc.writeMem(0x8ab, { 0xc9 });
        gbc.writeMem(0x7814, { 0x4, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7816);
        EXPECT(gbc.pc(), 0xea04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01F6
        gbc.setState(0x2d4a, 0x6a93, 0x5bb0, 0xe6a5, 0x3cd2, 0x28aa, 0x0, 0x0);
        gbc.writeMem(0x2d4a, { 0xc9 });
        gbc.writeMem(0x6a93, { 0x80, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6a95);
        EXPECT(gbc.pc(), 0x7680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01F7
        gbc.setState(0xee1a, 0x756f, 0x7520, 0xf7fa, 0x6aec, 0xdd9a, 0x1, 0x1);
        gbc.writeMem(0x756f, { 0x3f, 0x4c });
        gbc.writeMem(0xee1a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7571);
        EXPECT(gbc.pc(), 0x4c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee1a), 0xc9);
        // C9 01F8
        gbc.setState(0xa17d, 0xf120, 0xada0, 0x3901, 0x9260, 0x42e3, 0x0, 0x0);
        gbc.writeMem(0xa17d, { 0xc9 });
        gbc.writeMem(0xf120, { 0x95, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf122);
        EXPECT(gbc.pc(), 0x9795);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17d), 0xc9);
        EXPECT(gbc.readMem(0xf120), 0x95);
        EXPECT(gbc.readMem(0xf121), 0x97);
        // C9 01F9
        gbc.setState(0xb20e, 0x4e88, 0x7aa0, 0x99fc, 0x176a, 0xb028, 0x1, 0x0);
        gbc.writeMem(0x4e88, { 0x42, 0x9f });
        gbc.writeMem(0xb20e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4e8a);
        EXPECT(gbc.pc(), 0x9f42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20e), 0xc9);
        // C9 01FA
        gbc.setState(0xe173, 0xa7ff, 0xf270, 0xca3, 0x5842, 0xe80a, 0x0, 0x0);
        gbc.writeMem(0xa7ff, { 0xb9, 0x54 });
        gbc.writeMem(0xe173, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa801);
        EXPECT(gbc.pc(), 0x54b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7ff), 0xb9);
        EXPECT(gbc.readMem(0xa800), 0x54);
        EXPECT(gbc.readMem(0xe173), 0xc9);
        // C9 01FB
        gbc.setState(0x2b5b, 0x118f, 0xf4f0, 0xad23, 0x26b7, 0x3b78, 0x1, 0x0);
        gbc.writeMem(0x118f, { 0x12, 0x93 });
        gbc.writeMem(0x2b5b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1191);
        EXPECT(gbc.pc(), 0x9312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 01FD
        gbc.setState(0x8ca4, 0xe488, 0x83a0, 0xba1d, 0xdefc, 0x5988, 0x1, 0x0);
        gbc.writeMem(0x8ca4, { 0xc9 });
        gbc.writeMem(0xe488, { 0x12, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe48a);
        EXPECT(gbc.pc(), 0x9212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca4), 0xc9);
        EXPECT(gbc.readMem(0xe488), 0x12);
        EXPECT(gbc.readMem(0xe489), 0x92);
        // C9 01FE
        gbc.setState(0x7bbb, 0x4eb9, 0xf800, 0xd97a, 0xc75b, 0x7378, 0x1, 0x1);
        gbc.writeMem(0x4eb9, { 0x21, 0x53 });
        gbc.writeMem(0x7bbb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4ebb);
        EXPECT(gbc.pc(), 0x5321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 01FF
        gbc.setState(0x3a73, 0xef9f, 0x3bf0, 0x51f2, 0xf693, 0x26fe, 0x1, 0x0);
        gbc.writeMem(0x3a73, { 0xc9 });
        gbc.writeMem(0xef9f, { 0x4f, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xefa1);
        EXPECT(gbc.pc(), 0x984f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef9f), 0x4f);
        EXPECT(gbc.readMem(0xefa0), 0x98);
        // C9 0200
        gbc.setState(0xc717, 0x28c3, 0x2df0, 0x2efe, 0xdcc0, 0x7efe, 0x0, 0x1);
        gbc.writeMem(0x28c3, { 0xd0, 0x17 });
        gbc.writeMem(0xc717, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x28c5);
        EXPECT(gbc.pc(), 0x17d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc717), 0xc9);
        // C9 0201
        gbc.setState(0x3732, 0x4bb6, 0x1170, 0xc2d2, 0x85f9, 0xe3bf, 0x0, 0x1);
        gbc.writeMem(0x3732, { 0xc9 });
        gbc.writeMem(0x4bb6, { 0x51, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4bb8);
        EXPECT(gbc.pc(), 0xf051);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0202
        gbc.setState(0x9109, 0xeb3, 0xbb40, 0xc89c, 0xf74b, 0xd6b, 0x1, 0x0);
        gbc.writeMem(0xeb3, { 0xc2, 0x3c });
        gbc.writeMem(0x9109, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xeb5);
        EXPECT(gbc.pc(), 0x3cc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9109), 0xc9);
        // C9 0203
        gbc.setState(0xc9e8, 0xcb3b, 0xa5f0, 0x82a3, 0xe44, 0xad4b, 0x1, 0x0);
        gbc.writeMem(0xc9e8, { 0xc9 });
        gbc.writeMem(0xcb3b, { 0x7d, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xcb3d);
        EXPECT(gbc.pc(), 0x887d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e8), 0xc9);
        EXPECT(gbc.readMem(0xcb3b), 0x7d);
        EXPECT(gbc.readMem(0xcb3c), 0x88);
        // C9 0204
        gbc.setState(0x84ac, 0xb6d2, 0xeb90, 0x1f4, 0xee17, 0x8d8b, 0x1, 0x1);
        gbc.writeMem(0x84ac, { 0xc9 });
        gbc.writeMem(0xb6d2, { 0x36, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb6d4);
        EXPECT(gbc.pc(), 0xdc36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ac), 0xc9);
        EXPECT(gbc.readMem(0xb6d2), 0x36);
        EXPECT(gbc.readMem(0xb6d3), 0xdc);
        // C9 0205
        gbc.setState(0x4627, 0x6029, 0xf680, 0xaed7, 0xa1dd, 0x889, 0x1, 0x1);
        gbc.writeMem(0x4627, { 0xc9 });
        gbc.writeMem(0x6029, { 0xda, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x602b);
        EXPECT(gbc.pc(), 0x1fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0206
        gbc.setState(0xc310, 0xdb9c, 0xe930, 0x6582, 0x612e, 0x5748, 0x0, 0x0);
        gbc.writeMem(0xc310, { 0xc9 });
        gbc.writeMem(0xdb9c, { 0xea, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xdb9e);
        EXPECT(gbc.pc(), 0x82ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc310), 0xc9);
        EXPECT(gbc.readMem(0xdb9c), 0xea);
        EXPECT(gbc.readMem(0xdb9d), 0x82);
        // C9 0208
        gbc.setState(0x8409, 0x49a1, 0x4810, 0xe6c0, 0x38ab, 0xbfba, 0x0, 0x1);
        gbc.writeMem(0x49a1, { 0x2f, 0x25 });
        gbc.writeMem(0x8409, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x49a3);
        EXPECT(gbc.pc(), 0x252f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8409), 0xc9);
        // C9 0209
        gbc.setState(0x781a, 0x46c5, 0xe620, 0x1f3c, 0x16d7, 0x6074, 0x0, 0x1);
        gbc.writeMem(0x46c5, { 0x16, 0x57 });
        gbc.writeMem(0x781a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x46c7);
        EXPECT(gbc.pc(), 0x5716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 020A
        gbc.setState(0xeff1, 0xe8f3, 0x81a0, 0x6c4d, 0x4c47, 0xb777, 0x0, 0x0);
        gbc.writeMem(0xe8f3, { 0x92, 0xa });
        gbc.writeMem(0xeff1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe8f5);
        EXPECT(gbc.pc(), 0xa92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f3), 0x92);
        EXPECT(gbc.readMem(0xe8f4), 0xa);
        EXPECT(gbc.readMem(0xeff1), 0xc9);
        // C9 020B
        gbc.setState(0xa0df, 0xf39a, 0xa290, 0xed55, 0xe04a, 0xb7bc, 0x1, 0x1);
        gbc.writeMem(0xa0df, { 0xc9 });
        gbc.writeMem(0xf39a, { 0xc3, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf39c);
        EXPECT(gbc.pc(), 0x63c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0df), 0xc9);
        EXPECT(gbc.readMem(0xf39a), 0xc3);
        EXPECT(gbc.readMem(0xf39b), 0x63);
        // C9 020C
        gbc.setState(0x614d, 0x5847, 0x7660, 0x404a, 0x3686, 0xb0eb, 0x1, 0x1);
        gbc.writeMem(0x5847, { 0xcb, 0x46 });
        gbc.writeMem(0x614d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5849);
        EXPECT(gbc.pc(), 0x46cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 020D
        gbc.setState(0x600d, 0xd1b1, 0xd690, 0x56c6, 0xd490, 0xafd0, 0x1, 0x1);
        gbc.writeMem(0x600d, { 0xc9 });
        gbc.writeMem(0xd1b1, { 0x7a, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd1b3);
        EXPECT(gbc.pc(), 0x3b7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1b1), 0x7a);
        EXPECT(gbc.readMem(0xd1b2), 0x3b);
        // C9 020F
        gbc.setState(0x94cb, 0x6b4c, 0xe9f0, 0x3105, 0xbc1, 0x657c, 0x0, 0x1);
        gbc.writeMem(0x6b4c, { 0x4a, 0xb9 });
        gbc.writeMem(0x94cb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6b4e);
        EXPECT(gbc.pc(), 0xb94a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94cb), 0xc9);
        // C9 0210
        gbc.setState(0x5728, 0x884b, 0x150, 0xb90a, 0x5a3a, 0x6e7, 0x1, 0x1);
        gbc.writeMem(0x5728, { 0xc9 });
        gbc.writeMem(0x884b, { 0xc3, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x884d);
        EXPECT(gbc.pc(), 0xcdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884b), 0xc3);
        EXPECT(gbc.readMem(0x884c), 0xcd);
        // C9 0211
        gbc.setState(0xbe04, 0x726c, 0x67b0, 0x36b6, 0x788e, 0xcf66, 0x0, 0x1);
        gbc.writeMem(0x726c, { 0xf5, 0xec });
        gbc.writeMem(0xbe04, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x726e);
        EXPECT(gbc.pc(), 0xecf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe04), 0xc9);
        // C9 0212
        gbc.setState(0x8295, 0xacb5, 0xe520, 0xc1c, 0x50c3, 0xe781, 0x1, 0x1);
        gbc.writeMem(0x8295, { 0xc9 });
        gbc.writeMem(0xacb5, { 0x74, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xacb7);
        EXPECT(gbc.pc(), 0xcf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8295), 0xc9);
        EXPECT(gbc.readMem(0xacb5), 0x74);
        EXPECT(gbc.readMem(0xacb6), 0xcf);
        // C9 0213
        gbc.setState(0x27a3, 0x8326, 0x6910, 0x85a, 0x148d, 0xbcd8, 0x1, 0x1);
        gbc.writeMem(0x27a3, { 0xc9 });
        gbc.writeMem(0x8326, { 0xb, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x8328);
        EXPECT(gbc.pc(), 0xf60b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8326), 0xb);
        EXPECT(gbc.readMem(0x8327), 0xf6);
        // C9 0214
        gbc.setState(0x98ef, 0x5cd9, 0xea50, 0xb342, 0xe12b, 0xdf8c, 0x0, 0x1);
        gbc.writeMem(0x5cd9, { 0xd0, 0x9c });
        gbc.writeMem(0x98ef, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5cdb);
        EXPECT(gbc.pc(), 0x9cd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ef), 0xc9);
        // C9 0215
        gbc.setState(0xa3, 0x5b4e, 0x6b20, 0x997e, 0x8b86, 0xf35e, 0x1, 0x1);
        gbc.writeMem(0xa3, { 0xc9 });
        gbc.writeMem(0x5b4e, { 0xfd, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5b50);
        EXPECT(gbc.pc(), 0xd3fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0216
        gbc.setState(0x3260, 0x29bf, 0x94f0, 0xc71, 0x55f1, 0xc232, 0x0, 0x1);
        gbc.writeMem(0x29bf, { 0x93, 0x4f });
        gbc.writeMem(0x3260, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0x4f93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0217
        gbc.setState(0x1c22, 0x8566, 0xe170, 0x197d, 0xb471, 0x4a91, 0x1, 0x1);
        gbc.writeMem(0x1c22, { 0xc9 });
        gbc.writeMem(0x8566, { 0x4f, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8568);
        EXPECT(gbc.pc(), 0x144f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8566), 0x4f);
        EXPECT(gbc.readMem(0x8567), 0x14);
        // C9 0218
        gbc.setState(0xcf20, 0x941f, 0x1fa0, 0x63e6, 0xf2db, 0xa03e, 0x1, 0x0);
        gbc.writeMem(0x941f, { 0x97, 0xd8 });
        gbc.writeMem(0xcf20, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9421);
        EXPECT(gbc.pc(), 0xd897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x941f), 0x97);
        EXPECT(gbc.readMem(0x9420), 0xd8);
        EXPECT(gbc.readMem(0xcf20), 0xc9);
        // C9 0219
        gbc.setState(0x2f59, 0x7890, 0xd950, 0x5644, 0x4e3c, 0x8506, 0x1, 0x1);
        gbc.writeMem(0x2f59, { 0xc9 });
        gbc.writeMem(0x7890, { 0x41, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7892);
        EXPECT(gbc.pc(), 0x1841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 021A
        gbc.setState(0x8a17, 0x414e, 0x8c90, 0x19ae, 0x5dca, 0x3230, 0x0, 0x1);
        gbc.writeMem(0x414e, { 0x1c, 0x18 });
        gbc.writeMem(0x8a17, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x4150);
        EXPECT(gbc.pc(), 0x181c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a17), 0xc9);
        // C9 021C
        gbc.setState(0x3a94, 0xc628, 0x94c0, 0xd4b7, 0x301f, 0xa779, 0x0, 0x0);
        gbc.writeMem(0x3a94, { 0xc9 });
        gbc.writeMem(0xc628, { 0x3f, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xc62a);
        EXPECT(gbc.pc(), 0x7b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc628), 0x3f);
        EXPECT(gbc.readMem(0xc629), 0x7b);
        // C9 021D
        gbc.setState(0x93d2, 0xd467, 0x1ae0, 0x876a, 0x852f, 0x6e38, 0x1, 0x0);
        gbc.writeMem(0x93d2, { 0xc9 });
        gbc.writeMem(0xd467, { 0x2a, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd469);
        EXPECT(gbc.pc(), 0xa02a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d2), 0xc9);
        EXPECT(gbc.readMem(0xd467), 0x2a);
        EXPECT(gbc.readMem(0xd468), 0xa0);
        // C9 021E
        gbc.setState(0x166, 0xd908, 0x3140, 0x6258, 0xec4, 0x7c36, 0x1, 0x1);
        gbc.writeMem(0x166, { 0xc9 });
        gbc.writeMem(0xd908, { 0xd4, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd90a);
        EXPECT(gbc.pc(), 0x44d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd908), 0xd4);
        EXPECT(gbc.readMem(0xd909), 0x44);
        // C9 021F
        gbc.setState(0x1a2a, 0x695, 0x2fb0, 0xfa6b, 0xfd24, 0x1712, 0x0, 0x0);
        gbc.writeMem(0x695, { 0x39, 0x68 });
        gbc.writeMem(0x1a2a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x697);
        EXPECT(gbc.pc(), 0x6839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0220
        gbc.setState(0xa038, 0x1403, 0xec20, 0xc80c, 0xa092, 0x2991, 0x0, 0x1);
        gbc.writeMem(0x1403, { 0xcd, 0x39 });
        gbc.writeMem(0xa038, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1405);
        EXPECT(gbc.pc(), 0x39cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa038), 0xc9);
        // C9 0221
        gbc.setState(0xe280, 0x1ee7, 0x6310, 0x5e8f, 0x30c7, 0xd533, 0x0, 0x1);
        gbc.writeMem(0x1ee7, { 0x4b, 0xc9 });
        gbc.writeMem(0xe280, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1ee9);
        EXPECT(gbc.pc(), 0xc94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe280), 0xc9);
        // C9 0222
        gbc.setState(0xeab9, 0x8f8e, 0x3a70, 0x99a6, 0xa9ca, 0x26e3, 0x1, 0x1);
        gbc.writeMem(0x8f8e, { 0x90, 0x4e });
        gbc.writeMem(0xeab9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8f90);
        EXPECT(gbc.pc(), 0x4e90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f8e), 0x90);
        EXPECT(gbc.readMem(0x8f8f), 0x4e);
        EXPECT(gbc.readMem(0xeab9), 0xc9);
        // C9 0223
        gbc.setState(0x976b, 0x7421, 0xac0, 0x5699, 0x813e, 0xf894, 0x0, 0x1);
        gbc.writeMem(0x7421, { 0x36, 0xbd });
        gbc.writeMem(0x976b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7423);
        EXPECT(gbc.pc(), 0xbd36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x976b), 0xc9);
        // C9 0224
        gbc.setState(0xb72e, 0xf62d, 0x2b80, 0xb58a, 0x1b22, 0xa039, 0x1, 0x0);
        gbc.writeMem(0xb72e, { 0xc9 });
        gbc.writeMem(0xf62d, { 0x94, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xf62f);
        EXPECT(gbc.pc(), 0xbd94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb72e), 0xc9);
        EXPECT(gbc.readMem(0xf62d), 0x94);
        EXPECT(gbc.readMem(0xf62e), 0xbd);
        // C9 0225
        gbc.setState(0xbd64, 0x24a7, 0xfbc0, 0xa675, 0xa18e, 0x6ddf, 0x0, 0x0);
        gbc.writeMem(0x24a7, { 0x44, 0x7f });
        gbc.writeMem(0xbd64, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x24a9);
        EXPECT(gbc.pc(), 0x7f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd64), 0xc9);
        // C9 0226
        gbc.setState(0xd487, 0x95b8, 0xa140, 0x74e4, 0x280d, 0x8f98, 0x0, 0x0);
        gbc.writeMem(0x95b8, { 0x4, 0x14 });
        gbc.writeMem(0xd487, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x95ba);
        EXPECT(gbc.pc(), 0x1404);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b8), 0x4);
        EXPECT(gbc.readMem(0x95b9), 0x14);
        EXPECT(gbc.readMem(0xd487), 0xc9);
        // C9 0227
        gbc.setState(0x3b68, 0x4258, 0x2690, 0x32f5, 0x70dc, 0xf90e, 0x1, 0x0);
        gbc.writeMem(0x3b68, { 0xc9 });
        gbc.writeMem(0x4258, { 0xdb, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x425a);
        EXPECT(gbc.pc(), 0x36db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0228
        gbc.setState(0xb7dc, 0x2a19, 0x2d80, 0xad3, 0x2298, 0x5183, 0x1, 0x1);
        gbc.writeMem(0x2a19, { 0x61, 0x46 });
        gbc.writeMem(0xb7dc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2a1b);
        EXPECT(gbc.pc(), 0x4661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7dc), 0xc9);
        // C9 0229
        gbc.setState(0x5201, 0x4a1b, 0xeb30, 0x87aa, 0xd1b2, 0xbdee, 0x1, 0x0);
        gbc.writeMem(0x4a1b, { 0xf0, 0x50 });
        gbc.writeMem(0x5201, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x4a1d);
        EXPECT(gbc.pc(), 0x50f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 022A
        gbc.setState(0x6c53, 0x62b, 0xf360, 0xfb19, 0x9f0, 0x9345, 0x1, 0x0);
        gbc.writeMem(0x62b, { 0x1, 0x8 });
        gbc.writeMem(0x6c53, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x62d);
        EXPECT(gbc.pc(), 0x801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 022B
        gbc.setState(0x807a, 0x776e, 0x370, 0x1ff8, 0xb755, 0x1e18, 0x1, 0x1);
        gbc.writeMem(0x776e, { 0x6c, 0x5c });
        gbc.writeMem(0x807a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7770);
        EXPECT(gbc.pc(), 0x5c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x807a), 0xc9);
        // C9 022C
        gbc.setState(0xc0f4, 0xbd43, 0xd740, 0x941d, 0x9435, 0x2059, 0x1, 0x0);
        gbc.writeMem(0xbd43, { 0xdb, 0xfc });
        gbc.writeMem(0xc0f4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbd45);
        EXPECT(gbc.pc(), 0xfcdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd43), 0xdb);
        EXPECT(gbc.readMem(0xbd44), 0xfc);
        EXPECT(gbc.readMem(0xc0f4), 0xc9);
        // C9 022D
        gbc.setState(0x1b97, 0x2dc1, 0x3800, 0xc53e, 0x21a8, 0x83f5, 0x0, 0x1);
        gbc.writeMem(0x1b97, { 0xc9 });
        gbc.writeMem(0x2dc1, { 0x35, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2dc3);
        EXPECT(gbc.pc(), 0x3f35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 022E
        gbc.setState(0xc252, 0xa7ed, 0xb9c0, 0x326d, 0x50c1, 0x472, 0x0, 0x1);
        gbc.writeMem(0xa7ed, { 0x77, 0xd2 });
        gbc.writeMem(0xc252, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa7ef);
        EXPECT(gbc.pc(), 0xd277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ed), 0x77);
        EXPECT(gbc.readMem(0xa7ee), 0xd2);
        EXPECT(gbc.readMem(0xc252), 0xc9);
        // C9 022F
        gbc.setState(0xc1dd, 0x639e, 0x8ad0, 0x51e8, 0x916, 0xb024, 0x1, 0x0);
        gbc.writeMem(0x639e, { 0xf, 0x71 });
        gbc.writeMem(0xc1dd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x63a0);
        EXPECT(gbc.pc(), 0x710f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1dd), 0xc9);
        // C9 0230
        gbc.setState(0xad6f, 0x8667, 0xeb60, 0xf2b5, 0xd67, 0xfe82, 0x1, 0x0);
        gbc.writeMem(0x8667, { 0xdc, 0x4 });
        gbc.writeMem(0xad6f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8669);
        EXPECT(gbc.pc(), 0x4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8667), 0xdc);
        EXPECT(gbc.readMem(0x8668), 0x4);
        EXPECT(gbc.readMem(0xad6f), 0xc9);
        // C9 0231
        gbc.setState(0xe80e, 0x7827, 0xc270, 0x3e66, 0x7f8e, 0x1c3c, 0x1, 0x1);
        gbc.writeMem(0x7827, { 0x22, 0x72 });
        gbc.writeMem(0xe80e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7829);
        EXPECT(gbc.pc(), 0x7222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe80e), 0xc9);
        // C9 0232
        gbc.setState(0xd9d9, 0xeb3f, 0xa110, 0x2aa9, 0xdfda, 0x4309, 0x0, 0x0);
        gbc.writeMem(0xd9d9, { 0xc9 });
        gbc.writeMem(0xeb3f, { 0x10, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xeb41);
        EXPECT(gbc.pc(), 0x4b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d9), 0xc9);
        EXPECT(gbc.readMem(0xeb3f), 0x10);
        EXPECT(gbc.readMem(0xeb40), 0x4b);
        // C9 0233
        gbc.setState(0x7c6f, 0xa676, 0x87c0, 0xb352, 0xa932, 0x4def, 0x1, 0x0);
        gbc.writeMem(0x7c6f, { 0xc9 });
        gbc.writeMem(0xa676, { 0x40, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa678);
        EXPECT(gbc.pc(), 0x8540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa676), 0x40);
        EXPECT(gbc.readMem(0xa677), 0x85);
        // C9 0234
        gbc.setState(0xe745, 0x15d1, 0x23d0, 0x2559, 0x224b, 0x6d6, 0x0, 0x1);
        gbc.writeMem(0x15d1, { 0xd9, 0x4f });
        gbc.writeMem(0xe745, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x15d3);
        EXPECT(gbc.pc(), 0x4fd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe745), 0xc9);
        // C9 0235
        gbc.setState(0xe697, 0x6732, 0x2ec0, 0x3247, 0xea7c, 0x5334, 0x1, 0x1);
        gbc.writeMem(0x6732, { 0x2c, 0x5d });
        gbc.writeMem(0xe697, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6734);
        EXPECT(gbc.pc(), 0x5d2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe697), 0xc9);
        // C9 0236
        gbc.setState(0xe043, 0x1f71, 0xe720, 0x7ef1, 0xa5d2, 0x28f3, 0x0, 0x1);
        gbc.writeMem(0x1f71, { 0x6d, 0x65 });
        gbc.writeMem(0xe043, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1f73);
        EXPECT(gbc.pc(), 0x656d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe043), 0xc9);
        // C9 0237
        gbc.setState(0xbfdb, 0xfed, 0x5030, 0xcf73, 0x9eec, 0x95e5, 0x0, 0x1);
        gbc.writeMem(0xfed, { 0xe1, 0x10 });
        gbc.writeMem(0xbfdb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfef);
        EXPECT(gbc.pc(), 0x10e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdb), 0xc9);
        // C9 0238
        gbc.setState(0xdb66, 0x1628, 0x1f80, 0xd7e3, 0xa1c6, 0xd6f5, 0x0, 0x0);
        gbc.writeMem(0x1628, { 0x14, 0xf7 });
        gbc.writeMem(0xdb66, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x162a);
        EXPECT(gbc.pc(), 0xf714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb66), 0xc9);
        // C9 0239
        gbc.setState(0xd8f5, 0x53fe, 0x3b20, 0x7560, 0xfcfa, 0x10e, 0x1, 0x1);
        gbc.writeMem(0x53fe, { 0x23, 0xd7 });
        gbc.writeMem(0xd8f5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5400);
        EXPECT(gbc.pc(), 0xd723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f5), 0xc9);
        // C9 023A
        gbc.setState(0x3e95, 0xab7, 0xd520, 0x126, 0x8171, 0x3737, 0x1, 0x0);
        gbc.writeMem(0xab7, { 0xe6, 0xb5 });
        gbc.writeMem(0x3e95, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xab9);
        EXPECT(gbc.pc(), 0xb5e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 023B
        gbc.setState(0x456f, 0xd01c, 0x8650, 0x7f5c, 0xd8e7, 0xd88c, 0x0, 0x0);
        gbc.writeMem(0x456f, { 0xc9 });
        gbc.writeMem(0xd01c, { 0xad, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd01e);
        EXPECT(gbc.pc(), 0xd1ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd01c), 0xad);
        EXPECT(gbc.readMem(0xd01d), 0xd1);
        // C9 023C
        gbc.setState(0x58e7, 0x412a, 0x3e80, 0xe13b, 0xbf6e, 0xdf76, 0x1, 0x0);
        gbc.writeMem(0x412a, { 0xf9, 0x94 });
        gbc.writeMem(0x58e7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x412c);
        EXPECT(gbc.pc(), 0x94f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 023D
        gbc.setState(0x64c5, 0xaba6, 0xfe30, 0x21d4, 0x97fa, 0xbb7c, 0x1, 0x1);
        gbc.writeMem(0x64c5, { 0xc9 });
        gbc.writeMem(0xaba6, { 0xa6, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xaba8);
        EXPECT(gbc.pc(), 0xfa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaba6), 0xa6);
        EXPECT(gbc.readMem(0xaba7), 0xf);
        // C9 023E
        gbc.setState(0xc1a8, 0x942, 0xf380, 0x7749, 0x273b, 0xd869, 0x0, 0x0);
        gbc.writeMem(0x942, { 0x4d, 0x5e });
        gbc.writeMem(0xc1a8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x944);
        EXPECT(gbc.pc(), 0x5e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a8), 0xc9);
        // C9 023F
        gbc.setState(0x5863, 0xfa79, 0x7400, 0x7eff, 0xeeea, 0x5df3, 0x1, 0x0);
        gbc.writeMem(0x5863, { 0xc9 });
        gbc.writeMem(0xfa79, { 0x94, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfa7b);
        EXPECT(gbc.pc(), 0xce94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa79), 0x94);
        EXPECT(gbc.readMem(0xfa7a), 0xce);
        // C9 0240
        gbc.setState(0x9430, 0x3199, 0x42f0, 0xf2a9, 0x8b83, 0x69c1, 0x0, 0x1);
        gbc.writeMem(0x3199, { 0xa8, 0xa3 });
        gbc.writeMem(0x9430, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x319b);
        EXPECT(gbc.pc(), 0xa3a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9430), 0xc9);
        // C9 0241
        gbc.setState(0x6f16, 0x15fb, 0x7f40, 0xf8d3, 0x3102, 0x422c, 0x1, 0x0);
        gbc.writeMem(0x15fb, { 0x7d, 0xc0 });
        gbc.writeMem(0x6f16, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x15fd);
        EXPECT(gbc.pc(), 0xc07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0242
        gbc.setState(0xd578, 0xb3dd, 0x40d0, 0x6c8d, 0x960b, 0xceff, 0x0, 0x0);
        gbc.writeMem(0xb3dd, { 0xc2, 0xbe });
        gbc.writeMem(0xd578, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb3df);
        EXPECT(gbc.pc(), 0xbec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3dd), 0xc2);
        EXPECT(gbc.readMem(0xb3de), 0xbe);
        EXPECT(gbc.readMem(0xd578), 0xc9);
        // C9 0243
        gbc.setState(0x3ad9, 0xb5f, 0x8bc0, 0x41c7, 0x4163, 0xf2c3, 0x0, 0x1);
        gbc.writeMem(0xb5f, { 0xfa, 0x51 });
        gbc.writeMem(0x3ad9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb61);
        EXPECT(gbc.pc(), 0x51fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0244
        gbc.setState(0xc3f7, 0xa70, 0x6c10, 0xbea4, 0x3eef, 0x9534, 0x0, 0x1);
        gbc.writeMem(0xa70, { 0x54, 0x45 });
        gbc.writeMem(0xc3f7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa72);
        EXPECT(gbc.pc(), 0x4554);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3f7), 0xc9);
        // C9 0245
        gbc.setState(0xa3bb, 0x935b, 0x5640, 0xdb12, 0x1388, 0x96ba, 0x0, 0x0);
        gbc.writeMem(0x935b, { 0xbb, 0xe0 });
        gbc.writeMem(0xa3bb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x935d);
        EXPECT(gbc.pc(), 0xe0bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935b), 0xbb);
        EXPECT(gbc.readMem(0x935c), 0xe0);
        EXPECT(gbc.readMem(0xa3bb), 0xc9);
        // C9 0246
        gbc.setState(0xa776, 0xb044, 0xbd00, 0xbd0e, 0x1c40, 0xb4de, 0x0, 0x0);
        gbc.writeMem(0xa776, { 0xc9 });
        gbc.writeMem(0xb044, { 0x7e, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb046);
        EXPECT(gbc.pc(), 0x5f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa776), 0xc9);
        EXPECT(gbc.readMem(0xb044), 0x7e);
        EXPECT(gbc.readMem(0xb045), 0x5f);
        // C9 0247
        gbc.setState(0x2a01, 0x5bfa, 0xd8d0, 0x41d1, 0x198d, 0xd4d4, 0x0, 0x1);
        gbc.writeMem(0x2a01, { 0xc9 });
        gbc.writeMem(0x5bfa, { 0x6e, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5bfc);
        EXPECT(gbc.pc(), 0x8d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0248
        gbc.setState(0xca42, 0x74bb, 0x8050, 0xdbc5, 0xdabd, 0xe6cb, 0x1, 0x1);
        gbc.writeMem(0x74bb, { 0xcf, 0x45 });
        gbc.writeMem(0xca42, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x74bd);
        EXPECT(gbc.pc(), 0x45cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca42), 0xc9);
        // C9 0249
        gbc.setState(0x86c0, 0xfdc1, 0x8a30, 0x1923, 0xccde, 0x8b2f, 0x0, 0x0);
        gbc.writeMem(0x86c0, { 0xc9 });
        gbc.writeMem(0xfdc1, { 0xe8, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xfdc3);
        EXPECT(gbc.pc(), 0xf8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c0), 0xc9);
        EXPECT(gbc.readMem(0xfdc1), 0xe8);
        EXPECT(gbc.readMem(0xfdc2), 0xf8);
        // C9 024A
        gbc.setState(0xa8df, 0xd8b5, 0xa8f0, 0x61f4, 0xa637, 0xcfae, 0x1, 0x1);
        gbc.writeMem(0xa8df, { 0xc9 });
        gbc.writeMem(0xd8b5, { 0x3c, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd8b7);
        EXPECT(gbc.pc(), 0x6a3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8df), 0xc9);
        EXPECT(gbc.readMem(0xd8b5), 0x3c);
        EXPECT(gbc.readMem(0xd8b6), 0x6a);
        // C9 024B
        gbc.setState(0x9c6b, 0x8fcb, 0xbf40, 0x7e79, 0xbf4d, 0x6c7f, 0x1, 0x1);
        gbc.writeMem(0x8fcb, { 0xd2, 0x20 });
        gbc.writeMem(0x9c6b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8fcd);
        EXPECT(gbc.pc(), 0x20d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fcb), 0xd2);
        EXPECT(gbc.readMem(0x8fcc), 0x20);
        EXPECT(gbc.readMem(0x9c6b), 0xc9);
        // C9 024C
        gbc.setState(0xd2f9, 0x12f6, 0x4b70, 0x9e1, 0x8120, 0x685d, 0x0, 0x1);
        gbc.writeMem(0x12f6, { 0xf3, 0x22 });
        gbc.writeMem(0xd2f9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x12f8);
        EXPECT(gbc.pc(), 0x22f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2f9), 0xc9);
        // C9 024D
        gbc.setState(0xd180, 0xe6fe, 0xdc00, 0x801e, 0x8af9, 0x199a, 0x1, 0x0);
        gbc.writeMem(0xd180, { 0xc9 });
        gbc.writeMem(0xe6fe, { 0x9c, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe700);
        EXPECT(gbc.pc(), 0x289c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd180), 0xc9);
        EXPECT(gbc.readMem(0xe6fe), 0x9c);
        EXPECT(gbc.readMem(0xe6ff), 0x28);
        // C9 024F
        gbc.setState(0x68e4, 0xa63d, 0x5aa0, 0xc603, 0x19be, 0x7c05, 0x0, 0x1);
        gbc.writeMem(0x68e4, { 0xc9 });
        gbc.writeMem(0xa63d, { 0xb2, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa63f);
        EXPECT(gbc.pc(), 0xab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63d), 0xb2);
        EXPECT(gbc.readMem(0xa63e), 0xa);
        // C9 0250
        gbc.setState(0x3719, 0xe24c, 0xe440, 0x5cb2, 0x1bbe, 0x3a6, 0x0, 0x1);
        gbc.writeMem(0x3719, { 0xc9 });
        gbc.writeMem(0xe24c, { 0xf2, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe24e);
        EXPECT(gbc.pc(), 0x1f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe24c), 0xf2);
        EXPECT(gbc.readMem(0xe24d), 0x1);
        // C9 0251
        gbc.setState(0xb872, 0x30e, 0x3790, 0x2c4f, 0x3e99, 0x76ff, 0x0, 0x1);
        gbc.writeMem(0x30e, { 0xb1, 0xa6 });
        gbc.writeMem(0xb872, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x310);
        EXPECT(gbc.pc(), 0xa6b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb872), 0xc9);
        // C9 0252
        gbc.setState(0xad0c, 0xf527, 0x8180, 0xcd4d, 0xe36d, 0xa404, 0x1, 0x1);
        gbc.writeMem(0xad0c, { 0xc9 });
        gbc.writeMem(0xf527, { 0x23, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf529);
        EXPECT(gbc.pc(), 0x6d23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0c), 0xc9);
        EXPECT(gbc.readMem(0xf527), 0x23);
        EXPECT(gbc.readMem(0xf528), 0x6d);
        // C9 0253
        gbc.setState(0xbe28, 0xef38, 0x2ab0, 0x3805, 0x1e87, 0x62eb, 0x0, 0x1);
        gbc.writeMem(0xbe28, { 0xc9 });
        gbc.writeMem(0xef38, { 0xab, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xef3a);
        EXPECT(gbc.pc(), 0x2cab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe28), 0xc9);
        EXPECT(gbc.readMem(0xef38), 0xab);
        EXPECT(gbc.readMem(0xef39), 0x2c);
        // C9 0254
        gbc.setState(0x3fc3, 0xdc1c, 0x4170, 0xb4a2, 0x869b, 0xe7b, 0x0, 0x0);
        gbc.writeMem(0x3fc3, { 0xc9 });
        gbc.writeMem(0xdc1c, { 0x5b, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdc1e);
        EXPECT(gbc.pc(), 0xd65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc1c), 0x5b);
        EXPECT(gbc.readMem(0xdc1d), 0xd6);
        // C9 0255
        gbc.setState(0xee42, 0x4eb0, 0x90d0, 0x2dda, 0x4ab4, 0xd191, 0x1, 0x1);
        gbc.writeMem(0x4eb0, { 0xf9, 0x13 });
        gbc.writeMem(0xee42, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4eb2);
        EXPECT(gbc.pc(), 0x13f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee42), 0xc9);
        // C9 0256
        gbc.setState(0x73a0, 0x3501, 0xb780, 0xa87, 0xa33f, 0x78b7, 0x1, 0x1);
        gbc.writeMem(0x3501, { 0x5, 0x3 });
        gbc.writeMem(0x73a0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3503);
        EXPECT(gbc.pc(), 0x305);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0257
        gbc.setState(0x9507, 0x29e1, 0x93d0, 0xbc70, 0x3540, 0x2c1b, 0x0, 0x0);
        gbc.writeMem(0x29e1, { 0xf5, 0x94 });
        gbc.writeMem(0x9507, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x29e3);
        EXPECT(gbc.pc(), 0x94f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9507), 0xc9);
        // C9 0258
        gbc.setState(0x8e95, 0x9e51, 0xe280, 0x447f, 0x530a, 0xba95, 0x1, 0x0);
        gbc.writeMem(0x8e95, { 0xc9 });
        gbc.writeMem(0x9e51, { 0x63, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9e53);
        EXPECT(gbc.pc(), 0xdf63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e95), 0xc9);
        EXPECT(gbc.readMem(0x9e51), 0x63);
        EXPECT(gbc.readMem(0x9e52), 0xdf);
        // C9 0259
        gbc.setState(0x33af, 0xde74, 0x46a0, 0x6e3a, 0x9aee, 0xf9d0, 0x0, 0x1);
        gbc.writeMem(0x33af, { 0xc9 });
        gbc.writeMem(0xde74, { 0x8e, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xde76);
        EXPECT(gbc.pc(), 0x428e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde74), 0x8e);
        EXPECT(gbc.readMem(0xde75), 0x42);
        // C9 025A
        gbc.setState(0xc55c, 0x1c90, 0xa380, 0xb65c, 0xbbab, 0x726b, 0x1, 0x0);
        gbc.writeMem(0x1c90, { 0xfb, 0xcb });
        gbc.writeMem(0xc55c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1c92);
        EXPECT(gbc.pc(), 0xcbfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc55c), 0xc9);
        // C9 025B
        gbc.setState(0xd0de, 0xf9eb, 0xc230, 0x64d6, 0x4f30, 0xeb38, 0x1, 0x1);
        gbc.writeMem(0xd0de, { 0xc9 });
        gbc.writeMem(0xf9eb, { 0x9d, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf9ed);
        EXPECT(gbc.pc(), 0xea9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0de), 0xc9);
        EXPECT(gbc.readMem(0xf9eb), 0x9d);
        EXPECT(gbc.readMem(0xf9ec), 0xea);
        // C9 025C
        gbc.setState(0x125, 0xdeea, 0xe460, 0x2c99, 0x6fc3, 0x5286, 0x0, 0x1);
        gbc.writeMem(0x125, { 0xc9 });
        gbc.writeMem(0xdeea, { 0x23, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0x9523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeea), 0x23);
        EXPECT(gbc.readMem(0xdeeb), 0x95);
        // C9 025D
        gbc.setState(0x7dbe, 0x2f30, 0xaab0, 0xaf81, 0x6b5, 0xc550, 0x1, 0x0);
        gbc.writeMem(0x2f30, { 0x6b, 0xe9 });
        gbc.writeMem(0x7dbe, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2f32);
        EXPECT(gbc.pc(), 0xe96b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 025E
        gbc.setState(0xc741, 0xb05, 0xafe0, 0xe998, 0x3100, 0xf087, 0x1, 0x1);
        gbc.writeMem(0xb05, { 0x8c, 0x61 });
        gbc.writeMem(0xc741, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb07);
        EXPECT(gbc.pc(), 0x618c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc741), 0xc9);
        // C9 025F
        gbc.setState(0x3e9e, 0xd592, 0x11c0, 0x7356, 0x2ac6, 0xbaa6, 0x0, 0x1);
        gbc.writeMem(0x3e9e, { 0xc9 });
        gbc.writeMem(0xd592, { 0x8c, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd594);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd592), 0x8c);
        EXPECT(gbc.readMem(0xd593), 0xe3);
        // C9 0260
        gbc.setState(0x77a2, 0xf485, 0x6c00, 0xc3a3, 0xdeb0, 0xf385, 0x0, 0x1);
        gbc.writeMem(0x77a2, { 0xc9 });
        gbc.writeMem(0xf485, { 0x0, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf487);
        EXPECT(gbc.pc(), 0x9500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf485), 0x0);
        EXPECT(gbc.readMem(0xf486), 0x95);
        // C9 0261
        gbc.setState(0xe0c8, 0x2ea9, 0xbe50, 0x5a56, 0x52c0, 0xa6b0, 0x0, 0x1);
        gbc.writeMem(0x2ea9, { 0x89, 0xf2 });
        gbc.writeMem(0xe0c8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2eab);
        EXPECT(gbc.pc(), 0xf289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0c8), 0xc9);
        // C9 0262
        gbc.setState(0xae51, 0x3283, 0xb700, 0xfeab, 0xdf1, 0xa515, 0x0, 0x0);
        gbc.writeMem(0x3283, { 0x2, 0x5f });
        gbc.writeMem(0xae51, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3285);
        EXPECT(gbc.pc(), 0x5f02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae51), 0xc9);
        // C9 0263
        gbc.setState(0x932f, 0x74e1, 0x28b0, 0x2482, 0x9146, 0x7145, 0x0, 0x1);
        gbc.writeMem(0x74e1, { 0x9a, 0x19 });
        gbc.writeMem(0x932f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x74e3);
        EXPECT(gbc.pc(), 0x199a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x932f), 0xc9);
        // C9 0264
        gbc.setState(0x8ee9, 0xc087, 0xd630, 0x4295, 0x292, 0xce9b, 0x0, 0x1);
        gbc.writeMem(0x8ee9, { 0xc9 });
        gbc.writeMem(0xc087, { 0x26, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc089);
        EXPECT(gbc.pc(), 0x9726);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee9), 0xc9);
        EXPECT(gbc.readMem(0xc087), 0x26);
        EXPECT(gbc.readMem(0xc088), 0x97);
        // C9 0265
        gbc.setState(0xbc26, 0xa9b4, 0xf580, 0x920b, 0x602f, 0x595, 0x0, 0x1);
        gbc.writeMem(0xa9b4, { 0x58, 0xe8 });
        gbc.writeMem(0xbc26, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa9b6);
        EXPECT(gbc.pc(), 0xe858);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b4), 0x58);
        EXPECT(gbc.readMem(0xa9b5), 0xe8);
        EXPECT(gbc.readMem(0xbc26), 0xc9);
        // C9 0266
        gbc.setState(0x39c8, 0x15c0, 0xd580, 0xb58b, 0x94cc, 0xbd71, 0x0, 0x0);
        gbc.writeMem(0x15c0, { 0xf8, 0x2b });
        gbc.writeMem(0x39c8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x15c2);
        EXPECT(gbc.pc(), 0x2bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0267
        gbc.setState(0xa9a4, 0x7861, 0x5640, 0xbb61, 0x2648, 0xd31f, 0x0, 0x0);
        gbc.writeMem(0x7861, { 0x77, 0xea });
        gbc.writeMem(0xa9a4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7863);
        EXPECT(gbc.pc(), 0xea77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a4), 0xc9);
        // C9 0268
        gbc.setState(0xc8bc, 0xf98e, 0x1080, 0x4fc4, 0xbb50, 0x2e12, 0x0, 0x1);
        gbc.writeMem(0xc8bc, { 0xc9 });
        gbc.writeMem(0xf98e, { 0xd0, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf990);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8bc), 0xc9);
        EXPECT(gbc.readMem(0xf98e), 0xd0);
        EXPECT(gbc.readMem(0xf98f), 0xaf);
        // C9 0269
        gbc.setState(0xbee3, 0x1013, 0x40e0, 0xf39f, 0x8c5c, 0x911e, 0x1, 0x1);
        gbc.writeMem(0x1013, { 0x90, 0x1f });
        gbc.writeMem(0xbee3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x1015);
        EXPECT(gbc.pc(), 0x1f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee3), 0xc9);
        // C9 026A
        gbc.setState(0xb1, 0x5e8e, 0x3440, 0xa84f, 0xfdce, 0xea78, 0x1, 0x0);
        gbc.writeMem(0xb1, { 0xc9 });
        gbc.writeMem(0x5e8e, { 0x5f, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5e90);
        EXPECT(gbc.pc(), 0xfe5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 026B
        gbc.setState(0xe04f, 0xd722, 0x43d0, 0x77a8, 0xb392, 0x15cb, 0x0, 0x0);
        gbc.writeMem(0xd722, { 0xfe, 0xa4 });
        gbc.writeMem(0xe04f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd724);
        EXPECT(gbc.pc(), 0xa4fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd722), 0xfe);
        EXPECT(gbc.readMem(0xd723), 0xa4);
        EXPECT(gbc.readMem(0xe04f), 0xc9);
        // C9 026D
        gbc.setState(0xa9fd, 0x6b80, 0x2be0, 0x6d24, 0xae8e, 0x2755, 0x1, 0x0);
        gbc.writeMem(0x6b80, { 0x57, 0x40 });
        gbc.writeMem(0xa9fd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6b82);
        EXPECT(gbc.pc(), 0x4057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9fd), 0xc9);
        // C9 026E
        gbc.setState(0xaf07, 0xf87e, 0x9ff0, 0x6ee6, 0x140d, 0xea12, 0x1, 0x0);
        gbc.writeMem(0xaf07, { 0xc9 });
        gbc.writeMem(0xf87e, { 0x13, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf880);
        EXPECT(gbc.pc(), 0x9913);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf07), 0xc9);
        EXPECT(gbc.readMem(0xf87e), 0x13);
        EXPECT(gbc.readMem(0xf87f), 0x99);
        // C9 026F
        gbc.setState(0x260a, 0x427c, 0xa8a0, 0xe7cf, 0x8ea8, 0x7fd1, 0x1, 0x1);
        gbc.writeMem(0x260a, { 0xc9 });
        gbc.writeMem(0x427c, { 0xcb, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x427e);
        EXPECT(gbc.pc(), 0xf8cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0270
        gbc.setState(0xa424, 0x4d2b, 0xad60, 0xfdf0, 0x86d3, 0x488e, 0x0, 0x0);
        gbc.writeMem(0x4d2b, { 0x1, 0x32 });
        gbc.writeMem(0xa424, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4d2d);
        EXPECT(gbc.pc(), 0x3201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa424), 0xc9);
        // C9 0271
        gbc.setState(0x7b9e, 0x2348, 0xd3e0, 0x143b, 0x6550, 0x72c6, 0x1, 0x1);
        gbc.writeMem(0x2348, { 0xe1, 0xf2 });
        gbc.writeMem(0x7b9e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x234a);
        EXPECT(gbc.pc(), 0xf2e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0272
        gbc.setState(0x9786, 0xb32, 0x110, 0xca77, 0xe778, 0xc7c1, 0x1, 0x1);
        gbc.writeMem(0xb32, { 0xba, 0x4f });
        gbc.writeMem(0x9786, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb34);
        EXPECT(gbc.pc(), 0x4fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9786), 0xc9);
        // C9 0273
        gbc.setState(0x700e, 0x7c8a, 0xf400, 0x5fa0, 0x1074, 0xfc7a, 0x0, 0x0);
        gbc.writeMem(0x700e, { 0xc9 });
        gbc.writeMem(0x7c8a, { 0x45, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7c8c);
        EXPECT(gbc.pc(), 0x7e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0274
        gbc.setState(0x8ad5, 0x9929, 0x1880, 0x39b7, 0x431c, 0x7e72, 0x0, 0x0);
        gbc.writeMem(0x8ad5, { 0xc9 });
        gbc.writeMem(0x9929, { 0x30, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x992b);
        EXPECT(gbc.pc(), 0xfb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad5), 0xc9);
        EXPECT(gbc.readMem(0x9929), 0x30);
        EXPECT(gbc.readMem(0x992a), 0xfb);
        // C9 0275
        gbc.setState(0x520c, 0x61db, 0x7440, 0xa56b, 0x402c, 0x82b0, 0x1, 0x0);
        gbc.writeMem(0x520c, { 0xc9 });
        gbc.writeMem(0x61db, { 0xa3, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x61dd);
        EXPECT(gbc.pc(), 0xc8a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0276
        gbc.setState(0x7a5, 0x9b95, 0x4cb0, 0x319e, 0xcfd6, 0x5c63, 0x1, 0x0);
        gbc.writeMem(0x7a5, { 0xc9 });
        gbc.writeMem(0x9b95, { 0xd3, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9b97);
        EXPECT(gbc.pc(), 0x91d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b95), 0xd3);
        EXPECT(gbc.readMem(0x9b96), 0x91);
        // C9 0277
        gbc.setState(0xe3b6, 0x2d90, 0x6d30, 0xf320, 0xf3da, 0xb7c8, 0x0, 0x0);
        gbc.writeMem(0x2d90, { 0xa9, 0x53 });
        gbc.writeMem(0xe3b6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2d92);
        EXPECT(gbc.pc(), 0x53a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3b6), 0xc9);
        // C9 0278
        gbc.setState(0x9b09, 0xe19b, 0xb1b0, 0x7496, 0xbe8e, 0x7eea, 0x0, 0x0);
        gbc.writeMem(0x9b09, { 0xc9 });
        gbc.writeMem(0xe19b, { 0xe0, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe19d);
        EXPECT(gbc.pc(), 0x63e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b09), 0xc9);
        EXPECT(gbc.readMem(0xe19b), 0xe0);
        EXPECT(gbc.readMem(0xe19c), 0x63);
        // C9 0279
        gbc.setState(0x54f1, 0xe9a9, 0x7da0, 0x6ecf, 0x9cf3, 0x41f6, 0x1, 0x1);
        gbc.writeMem(0x54f1, { 0xc9 });
        gbc.writeMem(0xe9a9, { 0x1e, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe9ab);
        EXPECT(gbc.pc(), 0x1d1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a9), 0x1e);
        EXPECT(gbc.readMem(0xe9aa), 0x1d);
        // C9 027A
        gbc.setState(0xabe3, 0xd9c1, 0x940, 0x22a5, 0x6686, 0x7be8, 0x0, 0x1);
        gbc.writeMem(0xabe3, { 0xc9 });
        gbc.writeMem(0xd9c1, { 0x2c, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd9c3);
        EXPECT(gbc.pc(), 0x702c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabe3), 0xc9);
        EXPECT(gbc.readMem(0xd9c1), 0x2c);
        EXPECT(gbc.readMem(0xd9c2), 0x70);
        // C9 027B
        gbc.setState(0x2c19, 0xab81, 0xec10, 0x3954, 0xb7dd, 0xc37c, 0x0, 0x0);
        gbc.writeMem(0x2c19, { 0xc9 });
        gbc.writeMem(0xab81, { 0x7d, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xab83);
        EXPECT(gbc.pc(), 0xbd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab81), 0x7d);
        EXPECT(gbc.readMem(0xab82), 0xbd);
        // C9 027C
        gbc.setState(0x9ce5, 0xb7bc, 0x2d30, 0x94e2, 0x25dc, 0x192a, 0x0, 0x0);
        gbc.writeMem(0x9ce5, { 0xc9 });
        gbc.writeMem(0xb7bc, { 0xb9, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb7be);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce5), 0xc9);
        EXPECT(gbc.readMem(0xb7bc), 0xb9);
        EXPECT(gbc.readMem(0xb7bd), 0x69);
        // C9 027D
        gbc.setState(0xa9e0, 0x2bdf, 0xcb20, 0x4bf8, 0x1f9b, 0x50d1, 0x0, 0x0);
        gbc.writeMem(0x2bdf, { 0xcb, 0x1 });
        gbc.writeMem(0xa9e0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2be1);
        EXPECT(gbc.pc(), 0x1cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e0), 0xc9);
        // C9 027E
        gbc.setState(0x989d, 0x9785, 0x2c50, 0xc065, 0x6090, 0x86c7, 0x1, 0x1);
        gbc.writeMem(0x9785, { 0x3d, 0xdc });
        gbc.writeMem(0x989d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9787);
        EXPECT(gbc.pc(), 0xdc3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9785), 0x3d);
        EXPECT(gbc.readMem(0x9786), 0xdc);
        EXPECT(gbc.readMem(0x989d), 0xc9);
        // C9 027F
        gbc.setState(0x2975, 0xa353, 0xa9a0, 0xfea3, 0x1128, 0xda25, 0x0, 0x0);
        gbc.writeMem(0x2975, { 0xc9 });
        gbc.writeMem(0xa353, { 0xe8, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa355);
        EXPECT(gbc.pc(), 0x4e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa353), 0xe8);
        EXPECT(gbc.readMem(0xa354), 0x4);
        // C9 0280
        gbc.setState(0x58c9, 0x185, 0x8ca0, 0x8f2e, 0xd5ac, 0x3462, 0x1, 0x1);
        gbc.writeMem(0x185, { 0x18, 0x2b });
        gbc.writeMem(0x58c9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x187);
        EXPECT(gbc.pc(), 0x2b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0281
        gbc.setState(0x2eeb, 0x148b, 0x8020, 0xda0e, 0xec0a, 0x108d, 0x0, 0x1);
        gbc.writeMem(0x148b, { 0xb2, 0x70 });
        gbc.writeMem(0x2eeb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x148d);
        EXPECT(gbc.pc(), 0x70b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0282
        gbc.setState(0x8e56, 0x7a2a, 0x6d70, 0x1727, 0xb684, 0x5701, 0x0, 0x1);
        gbc.writeMem(0x7a2a, { 0xb9, 0x59 });
        gbc.writeMem(0x8e56, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7a2c);
        EXPECT(gbc.pc(), 0x59b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e56), 0xc9);
        // C9 0283
        gbc.setState(0xa2f3, 0xf8f1, 0x7e50, 0xc8, 0x4792, 0x575b, 0x1, 0x1);
        gbc.writeMem(0xa2f3, { 0xc9 });
        gbc.writeMem(0xf8f1, { 0xd9, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf8f3);
        EXPECT(gbc.pc(), 0x90d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f3), 0xc9);
        EXPECT(gbc.readMem(0xf8f1), 0xd9);
        EXPECT(gbc.readMem(0xf8f2), 0x90);
        // C9 0284
        gbc.setState(0x1a2e, 0x2686, 0xd320, 0x834c, 0x7e0c, 0x5fe5, 0x1, 0x1);
        gbc.writeMem(0x1a2e, { 0xc9 });
        gbc.writeMem(0x2686, { 0xe3, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2688);
        EXPECT(gbc.pc(), 0x19e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0285
        gbc.setState(0x954e, 0xf4a4, 0xd900, 0xa16b, 0x974b, 0xc4bf, 0x1, 0x1);
        gbc.writeMem(0x954e, { 0xc9 });
        gbc.writeMem(0xf4a4, { 0xf, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf4a6);
        EXPECT(gbc.pc(), 0x2b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x954e), 0xc9);
        EXPECT(gbc.readMem(0xf4a4), 0xf);
        EXPECT(gbc.readMem(0xf4a5), 0x2b);
        // C9 0286
        gbc.setState(0x82bb, 0xf942, 0x6170, 0xe87e, 0x1ba7, 0xe3da, 0x1, 0x1);
        gbc.writeMem(0x82bb, { 0xc9 });
        gbc.writeMem(0xf942, { 0xa8, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf944);
        EXPECT(gbc.pc(), 0x3fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82bb), 0xc9);
        EXPECT(gbc.readMem(0xf942), 0xa8);
        EXPECT(gbc.readMem(0xf943), 0x3f);
        // C9 0287
        gbc.setState(0x521b, 0x51e0, 0x660, 0xd04d, 0x601b, 0x651f, 0x0, 0x1);
        gbc.writeMem(0x51e0, { 0xe4, 0x20 });
        gbc.writeMem(0x521b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x51e2);
        EXPECT(gbc.pc(), 0x20e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0288
        gbc.setState(0xc0cc, 0x1863, 0x4280, 0x31, 0x9c7a, 0xe491, 0x0, 0x1);
        gbc.writeMem(0x1863, { 0xd4, 0x7 });
        gbc.writeMem(0xc0cc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1865);
        EXPECT(gbc.pc(), 0x7d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0cc), 0xc9);
        // C9 0289
        gbc.setState(0xf00, 0xf64, 0xbe70, 0x9880, 0x7b34, 0x9d48, 0x1, 0x1);
        gbc.writeMem(0xf00, { 0xc9 });
        gbc.writeMem(0xf64, { 0xa1, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf66);
        EXPECT(gbc.pc(), 0x39a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 028A
        gbc.setState(0x5f22, 0x2239, 0xf10, 0x80f2, 0x5c0, 0x3ac8, 0x0, 0x1);
        gbc.writeMem(0x2239, { 0x90, 0x83 });
        gbc.writeMem(0x5f22, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x223b);
        EXPECT(gbc.pc(), 0x8390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 028B
        gbc.setState(0x4142, 0xa, 0x8400, 0x6520, 0xc4af, 0x4ceb, 0x0, 0x1);
        gbc.writeMem(0xa, { 0xba, 0x4c });
        gbc.writeMem(0x4142, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 028C
        gbc.setState(0x566d, 0xa045, 0xbe20, 0xcf85, 0xa702, 0x4d82, 0x1, 0x0);
        gbc.writeMem(0x566d, { 0xc9 });
        gbc.writeMem(0xa045, { 0xe0, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa047);
        EXPECT(gbc.pc(), 0xd8e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa045), 0xe0);
        EXPECT(gbc.readMem(0xa046), 0xd8);
        // C9 028D
        gbc.setState(0xd09c, 0x263a, 0xb460, 0xbaab, 0x6517, 0xd2fd, 0x0, 0x0);
        gbc.writeMem(0x263a, { 0x2e, 0xe5 });
        gbc.writeMem(0xd09c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x263c);
        EXPECT(gbc.pc(), 0xe52e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd09c), 0xc9);
        // C9 028F
        gbc.setState(0x3313, 0xc24c, 0x150, 0x3b20, 0xd7cc, 0x3d20, 0x0, 0x1);
        gbc.writeMem(0x3313, { 0xc9 });
        gbc.writeMem(0xc24c, { 0xe6, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xc24e);
        EXPECT(gbc.pc(), 0x57e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc24c), 0xe6);
        EXPECT(gbc.readMem(0xc24d), 0x57);
        // C9 0290
        gbc.setState(0xc3a2, 0x2597, 0xce80, 0x2dab, 0x57e, 0xf20d, 0x0, 0x0);
        gbc.writeMem(0x2597, { 0xd4, 0x59 });
        gbc.writeMem(0xc3a2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2599);
        EXPECT(gbc.pc(), 0x59d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a2), 0xc9);
        // C9 0291
        gbc.setState(0x6848, 0xa78d, 0x5540, 0x296a, 0xf103, 0xf04d, 0x0, 0x1);
        gbc.writeMem(0x6848, { 0xc9 });
        gbc.writeMem(0xa78d, { 0x70, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa78f);
        EXPECT(gbc.pc(), 0xd970);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa78d), 0x70);
        EXPECT(gbc.readMem(0xa78e), 0xd9);
        // C9 0292
        gbc.setState(0x2bd1, 0xc521, 0xf4a0, 0xd68e, 0xdeba, 0x9ed3, 0x1, 0x0);
        gbc.writeMem(0x2bd1, { 0xc9 });
        gbc.writeMem(0xc521, { 0xc2, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc523);
        EXPECT(gbc.pc(), 0x27c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc521), 0xc2);
        EXPECT(gbc.readMem(0xc522), 0x27);
        // C9 0293
        gbc.setState(0x11a3, 0xe70c, 0xb3c0, 0x1847, 0x32ec, 0xc729, 0x1, 0x1);
        gbc.writeMem(0x11a3, { 0xc9 });
        gbc.writeMem(0xe70c, { 0xc7, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe70e);
        EXPECT(gbc.pc(), 0x5ec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70c), 0xc7);
        EXPECT(gbc.readMem(0xe70d), 0x5e);
        // C9 0294
        gbc.setState(0xe48, 0x247e, 0x2420, 0xb592, 0xd108, 0xcaf5, 0x0, 0x0);
        gbc.writeMem(0xe48, { 0xc9 });
        gbc.writeMem(0x247e, { 0xfb, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2480);
        EXPECT(gbc.pc(), 0x51fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0295
        gbc.setState(0x6689, 0x9c3f, 0x3760, 0xae6f, 0xac3d, 0x40b4, 0x0, 0x1);
        gbc.writeMem(0x6689, { 0xc9 });
        gbc.writeMem(0x9c3f, { 0x1c, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x9c41);
        EXPECT(gbc.pc(), 0x7e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c3f), 0x1c);
        EXPECT(gbc.readMem(0x9c40), 0x7e);
        // C9 0296
        gbc.setState(0x9440, 0x2972, 0x87e0, 0x50c9, 0xe91e, 0xf438, 0x0, 0x0);
        gbc.writeMem(0x2972, { 0x2, 0xd6 });
        gbc.writeMem(0x9440, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2974);
        EXPECT(gbc.pc(), 0xd602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9440), 0xc9);
        // C9 0297
        gbc.setState(0x56f0, 0x2b6f, 0x15a0, 0x40ba, 0xf29d, 0xe38c, 0x0, 0x1);
        gbc.writeMem(0x2b6f, { 0x3f, 0x33 });
        gbc.writeMem(0x56f0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2b71);
        EXPECT(gbc.pc(), 0x333f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0298
        gbc.setState(0x42f9, 0xe3b3, 0x780, 0x206c, 0x7872, 0xa813, 0x0, 0x1);
        gbc.writeMem(0x42f9, { 0xc9 });
        gbc.writeMem(0xe3b3, { 0x36, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe3b5);
        EXPECT(gbc.pc(), 0xb236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b3), 0x36);
        EXPECT(gbc.readMem(0xe3b4), 0xb2);
        // C9 0299
        gbc.setState(0x2c00, 0x406f, 0x2c40, 0x184d, 0x329d, 0x46, 0x0, 0x1);
        gbc.writeMem(0x2c00, { 0xc9 });
        gbc.writeMem(0x406f, { 0x69, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4071);
        EXPECT(gbc.pc(), 0x9b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 029A
        gbc.setState(0xeaf3, 0x3e25, 0xd9e0, 0x79e8, 0xe1f9, 0x8371, 0x1, 0x0);
        gbc.writeMem(0x3e25, { 0x2a, 0x3e });
        gbc.writeMem(0xeaf3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3e27);
        EXPECT(gbc.pc(), 0x3e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaf3), 0xc9);
        // C9 029B
        gbc.setState(0x210a, 0x74e5, 0x2f40, 0x38a1, 0xd6be, 0x7bd2, 0x1, 0x1);
        gbc.writeMem(0x210a, { 0xc9 });
        gbc.writeMem(0x74e5, { 0x4c, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x74e7);
        EXPECT(gbc.pc(), 0x644c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 029C
        gbc.setState(0xb19d, 0x7cf0, 0xf210, 0xbdb5, 0xebaa, 0xd19, 0x0, 0x0);
        gbc.writeMem(0x7cf0, { 0x51, 0x5a });
        gbc.writeMem(0xb19d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7cf2);
        EXPECT(gbc.pc(), 0x5a51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb19d), 0xc9);
        // C9 029D
        gbc.setState(0xb0eb, 0x6e66, 0x2120, 0x29f3, 0x60ab, 0x21eb, 0x1, 0x0);
        gbc.writeMem(0x6e66, { 0x25, 0x60 });
        gbc.writeMem(0xb0eb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6e68);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0eb), 0xc9);
        // C9 029E
        gbc.setState(0x4742, 0xa199, 0xa1d0, 0xc1df, 0x8e36, 0x6832, 0x0, 0x1);
        gbc.writeMem(0x4742, { 0xc9 });
        gbc.writeMem(0xa199, { 0x7f, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa19b);
        EXPECT(gbc.pc(), 0xf37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa199), 0x7f);
        EXPECT(gbc.readMem(0xa19a), 0xf3);
        // C9 029F
        gbc.setState(0xaa8c, 0x126d, 0x6ff0, 0x3448, 0xae22, 0xd884, 0x1, 0x0);
        gbc.writeMem(0x126d, { 0x55, 0x87 });
        gbc.writeMem(0xaa8c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x126f);
        EXPECT(gbc.pc(), 0x8755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa8c), 0xc9);
        // C9 02A0
        gbc.setState(0xd96c, 0x4f09, 0x48b0, 0x38a, 0x86a8, 0x78ae, 0x0, 0x0);
        gbc.writeMem(0x4f09, { 0x34, 0x2b });
        gbc.writeMem(0xd96c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4f0b);
        EXPECT(gbc.pc(), 0x2b34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd96c), 0xc9);
        // C9 02A1
        gbc.setState(0x1013, 0x245b, 0x8bf0, 0xe543, 0x3923, 0xe7fd, 0x0, 0x1);
        gbc.writeMem(0x1013, { 0xc9 });
        gbc.writeMem(0x245b, { 0xfd, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x245d);
        EXPECT(gbc.pc(), 0xb4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02A2
        gbc.setState(0x7637, 0xaa9c, 0xd890, 0xf4ba, 0xda3e, 0x7891, 0x1, 0x1);
        gbc.writeMem(0x7637, { 0xc9 });
        gbc.writeMem(0xaa9c, { 0xec, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xaa9e);
        EXPECT(gbc.pc(), 0x83ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa9c), 0xec);
        EXPECT(gbc.readMem(0xaa9d), 0x83);
        // C9 02A3
        gbc.setState(0x8e07, 0x62d3, 0xce70, 0xae1b, 0x4d44, 0x590d, 0x1, 0x1);
        gbc.writeMem(0x62d3, { 0x83, 0x89 });
        gbc.writeMem(0x8e07, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x62d5);
        EXPECT(gbc.pc(), 0x8983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e07), 0xc9);
        // C9 02A4
        gbc.setState(0x8c2a, 0x5ff9, 0x6e70, 0xa7f6, 0xfd5b, 0xae0f, 0x0, 0x0);
        gbc.writeMem(0x5ff9, { 0x4b, 0x16 });
        gbc.writeMem(0x8c2a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5ffb);
        EXPECT(gbc.pc(), 0x164b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c2a), 0xc9);
        // C9 02A5
        gbc.setState(0x6944, 0x856c, 0x4870, 0x72cb, 0x991f, 0x88db, 0x1, 0x0);
        gbc.writeMem(0x6944, { 0xc9 });
        gbc.writeMem(0x856c, { 0x6b, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x856e);
        EXPECT(gbc.pc(), 0xb26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856c), 0x6b);
        EXPECT(gbc.readMem(0x856d), 0xb2);
        // C9 02A6
        gbc.setState(0xae7e, 0xd26e, 0x6560, 0x5683, 0xff2d, 0x7df7, 0x1, 0x0);
        gbc.writeMem(0xae7e, { 0xc9 });
        gbc.writeMem(0xd26e, { 0x9c, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd270);
        EXPECT(gbc.pc(), 0xed9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7e), 0xc9);
        EXPECT(gbc.readMem(0xd26e), 0x9c);
        EXPECT(gbc.readMem(0xd26f), 0xed);
        // C9 02A7
        gbc.setState(0x8a05, 0x2756, 0x9370, 0x93, 0x8295, 0xaadb, 0x0, 0x1);
        gbc.writeMem(0x2756, { 0x31, 0x1 });
        gbc.writeMem(0x8a05, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x2758);
        EXPECT(gbc.pc(), 0x131);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a05), 0xc9);
        // C9 02A8
        gbc.setState(0x668f, 0x224e, 0xab50, 0x42b2, 0x637c, 0x88e1, 0x1, 0x1);
        gbc.writeMem(0x224e, { 0xba, 0x78 });
        gbc.writeMem(0x668f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2250);
        EXPECT(gbc.pc(), 0x78ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02A9
        gbc.setState(0xc5ca, 0xa727, 0xf410, 0x777e, 0x4659, 0x300a, 0x0, 0x0);
        gbc.writeMem(0xa727, { 0xe9, 0x5d });
        gbc.writeMem(0xc5ca, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa729);
        EXPECT(gbc.pc(), 0x5de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa727), 0xe9);
        EXPECT(gbc.readMem(0xa728), 0x5d);
        EXPECT(gbc.readMem(0xc5ca), 0xc9);
        // C9 02AA
        gbc.setState(0xaae9, 0x72a8, 0x7ea0, 0x3318, 0x4db0, 0xa23d, 0x0, 0x0);
        gbc.writeMem(0x72a8, { 0xdf, 0x10 });
        gbc.writeMem(0xaae9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x72aa);
        EXPECT(gbc.pc(), 0x10df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae9), 0xc9);
        // C9 02AB
        gbc.setState(0x89ba, 0x79c2, 0xf2d0, 0x26f3, 0x5e11, 0x62df, 0x1, 0x0);
        gbc.writeMem(0x79c2, { 0x54, 0xc1 });
        gbc.writeMem(0x89ba, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x79c4);
        EXPECT(gbc.pc(), 0xc154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89ba), 0xc9);
        // C9 02AC
        gbc.setState(0xe039, 0x44e5, 0x510, 0x1cf, 0xd3c4, 0x4847, 0x0, 0x1);
        gbc.writeMem(0x44e5, { 0x35, 0xf4 });
        gbc.writeMem(0xe039, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x44e7);
        EXPECT(gbc.pc(), 0xf435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe039), 0xc9);
        // C9 02AD
        gbc.setState(0xadeb, 0xa607, 0x52a0, 0x4b74, 0x7b75, 0x6204, 0x1, 0x1);
        gbc.writeMem(0xa607, { 0x49, 0x24 });
        gbc.writeMem(0xadeb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa609);
        EXPECT(gbc.pc(), 0x2449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa607), 0x49);
        EXPECT(gbc.readMem(0xa608), 0x24);
        EXPECT(gbc.readMem(0xadeb), 0xc9);
        // C9 02AF
        gbc.setState(0x2427, 0x546d, 0x9090, 0xce31, 0x13bf, 0x57d8, 0x1, 0x1);
        gbc.writeMem(0x2427, { 0xc9 });
        gbc.writeMem(0x546d, { 0x7d, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x546f);
        EXPECT(gbc.pc(), 0xbf7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02B0
        gbc.setState(0x155d, 0xcfce, 0x5de0, 0xd0f0, 0xf96d, 0x18a0, 0x1, 0x1);
        gbc.writeMem(0x155d, { 0xc9 });
        gbc.writeMem(0xcfce, { 0x68, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xcfd0);
        EXPECT(gbc.pc(), 0x2368);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfce), 0x68);
        EXPECT(gbc.readMem(0xcfcf), 0x23);
        // C9 02B1
        gbc.setState(0x129c, 0x2480, 0x65d0, 0xe09f, 0xd80e, 0xb321, 0x0, 0x1);
        gbc.writeMem(0x129c, { 0xc9 });
        gbc.writeMem(0x2480, { 0xb9, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2482);
        EXPECT(gbc.pc(), 0xc1b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02B2
        gbc.setState(0x9d17, 0x600d, 0xe90, 0x6be7, 0xd3e8, 0x2eca, 0x1, 0x1);
        gbc.writeMem(0x600d, { 0x69, 0xef });
        gbc.writeMem(0x9d17, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x600f);
        EXPECT(gbc.pc(), 0xef69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d17), 0xc9);
        // C9 02B3
        gbc.setState(0xac23, 0x81c1, 0xa70, 0xa40f, 0x1239, 0xbb7d, 0x0, 0x1);
        gbc.writeMem(0x81c1, { 0x77, 0xc6 });
        gbc.writeMem(0xac23, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x81c3);
        EXPECT(gbc.pc(), 0xc677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c1), 0x77);
        EXPECT(gbc.readMem(0x81c2), 0xc6);
        EXPECT(gbc.readMem(0xac23), 0xc9);
        // C9 02B4
        gbc.setState(0x1efe, 0x36cf, 0x1e70, 0x633a, 0x72c, 0x3a6d, 0x1, 0x0);
        gbc.writeMem(0x1efe, { 0xc9 });
        gbc.writeMem(0x36cf, { 0x38, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x36d1);
        EXPECT(gbc.pc(), 0xa038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02B5
        gbc.setState(0x427, 0x56f, 0x5b80, 0x626, 0x261, 0x5f38, 0x0, 0x1);
        gbc.writeMem(0x427, { 0xc9 });
        gbc.writeMem(0x56f, { 0x76, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x571);
        EXPECT(gbc.pc(), 0x7376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 02B6
        gbc.setState(0xe99a, 0xe39, 0x9dc0, 0x2765, 0xc6c1, 0x466d, 0x1, 0x0);
        gbc.writeMem(0xe39, { 0x66, 0x6a });
        gbc.writeMem(0xe99a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe3b);
        EXPECT(gbc.pc(), 0x6a66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99a), 0xc9);
        // C9 02B7
        gbc.setState(0xb696, 0xfc3c, 0xfb40, 0x292f, 0xf088, 0xa1f5, 0x1, 0x1);
        gbc.writeMem(0xb696, { 0xc9 });
        gbc.writeMem(0xfc3c, { 0x59, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xfc3e);
        EXPECT(gbc.pc(), 0x1359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb696), 0xc9);
        EXPECT(gbc.readMem(0xfc3c), 0x59);
        EXPECT(gbc.readMem(0xfc3d), 0x13);
        // C9 02B8
        gbc.setState(0x4a77, 0x6ef, 0x3d00, 0xddf, 0x46f, 0x8beb, 0x0, 0x1);
        gbc.writeMem(0x6ef, { 0xfc, 0xdc });
        gbc.writeMem(0x4a77, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6f1);
        EXPECT(gbc.pc(), 0xdcfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 02B9
        gbc.setState(0x6981, 0x8b13, 0xa1a0, 0x798, 0x4432, 0x97f, 0x0, 0x0);
        gbc.writeMem(0x6981, { 0xc9 });
        gbc.writeMem(0x8b13, { 0xc7, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8b15);
        EXPECT(gbc.pc(), 0x2ac7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b13), 0xc7);
        EXPECT(gbc.readMem(0x8b14), 0x2a);
        // C9 02BA
        gbc.setState(0x7d17, 0xd531, 0x3ed0, 0x573a, 0xf91, 0x4d34, 0x1, 0x0);
        gbc.writeMem(0x7d17, { 0xc9 });
        gbc.writeMem(0xd531, { 0x4, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd533);
        EXPECT(gbc.pc(), 0x7604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd531), 0x4);
        EXPECT(gbc.readMem(0xd532), 0x76);
        // C9 02BB
        gbc.setState(0x2034, 0x9288, 0x7160, 0xd1b1, 0x9347, 0xac07, 0x1, 0x0);
        gbc.writeMem(0x2034, { 0xc9 });
        gbc.writeMem(0x9288, { 0x5a, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x928a);
        EXPECT(gbc.pc(), 0x855a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9288), 0x5a);
        EXPECT(gbc.readMem(0x9289), 0x85);
        // C9 02BC
        gbc.setState(0xede7, 0x395c, 0x80c0, 0x4290, 0x743a, 0xca5c, 0x0, 0x0);
        gbc.writeMem(0x395c, { 0x9c, 0xc8 });
        gbc.writeMem(0xede7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x395e);
        EXPECT(gbc.pc(), 0xc89c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xede7), 0xc9);
        // C9 02BD
        gbc.setState(0xcd5d, 0xdd14, 0x8350, 0xf734, 0x73f3, 0x2da4, 0x1, 0x1);
        gbc.writeMem(0xcd5d, { 0xc9 });
        gbc.writeMem(0xdd14, { 0x99, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xdd16);
        EXPECT(gbc.pc(), 0x9299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd5d), 0xc9);
        EXPECT(gbc.readMem(0xdd14), 0x99);
        EXPECT(gbc.readMem(0xdd15), 0x92);
        // C9 02BE
        gbc.setState(0x9b5c, 0xefee, 0xf80, 0xa5ff, 0xa65d, 0xedef, 0x1, 0x0);
        gbc.writeMem(0x9b5c, { 0xc9 });
        gbc.writeMem(0xefee, { 0x25, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xeff0);
        EXPECT(gbc.pc(), 0x3225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b5c), 0xc9);
        EXPECT(gbc.readMem(0xefee), 0x25);
        EXPECT(gbc.readMem(0xefef), 0x32);
        // C9 02BF
        gbc.setState(0x3998, 0x2bd5, 0x2db0, 0x2c66, 0x2008, 0xb79d, 0x1, 0x1);
        gbc.writeMem(0x2bd5, { 0x21, 0xa3 });
        gbc.writeMem(0x3998, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2bd7);
        EXPECT(gbc.pc(), 0xa321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02C0
        gbc.setState(0xa75c, 0x7b2b, 0x4d90, 0x38da, 0x85a1, 0xd2b2, 0x1, 0x1);
        gbc.writeMem(0x7b2b, { 0x18, 0xde });
        gbc.writeMem(0xa75c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7b2d);
        EXPECT(gbc.pc(), 0xde18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa75c), 0xc9);
        // C9 02C1
        gbc.setState(0xebc8, 0xaa29, 0x3f0, 0xc719, 0x2c30, 0x5e8a, 0x0, 0x1);
        gbc.writeMem(0xaa29, { 0xc0, 0x7 });
        gbc.writeMem(0xebc8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xaa2b);
        EXPECT(gbc.pc(), 0x7c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa29), 0xc0);
        EXPECT(gbc.readMem(0xaa2a), 0x7);
        EXPECT(gbc.readMem(0xebc8), 0xc9);
        // C9 02C2
        gbc.setState(0x3c79, 0x4b48, 0x55b0, 0xb137, 0x7a2a, 0x9da2, 0x1, 0x1);
        gbc.writeMem(0x3c79, { 0xc9 });
        gbc.writeMem(0x4b48, { 0x89, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4b4a);
        EXPECT(gbc.pc(), 0xde89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02C3
        gbc.setState(0x7321, 0x6fab, 0xe4a0, 0x7aba, 0x8d5f, 0xb032, 0x0, 0x1);
        gbc.writeMem(0x6fab, { 0x93, 0x42 });
        gbc.writeMem(0x7321, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6fad);
        EXPECT(gbc.pc(), 0x4293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 02C4
        gbc.setState(0x2ef0, 0x120e, 0x75b0, 0x2868, 0x9256, 0xc6ad, 0x1, 0x1);
        gbc.writeMem(0x120e, { 0x85, 0x94 });
        gbc.writeMem(0x2ef0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1210);
        EXPECT(gbc.pc(), 0x9485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02C5
        gbc.setState(0xe42, 0x8fb9, 0xf600, 0x5ff7, 0xe00a, 0x5736, 0x1, 0x0);
        gbc.writeMem(0xe42, { 0xc9 });
        gbc.writeMem(0x8fb9, { 0x71, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8fbb);
        EXPECT(gbc.pc(), 0xd871);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb9), 0x71);
        EXPECT(gbc.readMem(0x8fba), 0xd8);
        // C9 02C6
        gbc.setState(0x5c32, 0xeab0, 0xf3b0, 0x6862, 0xac2, 0x4ea7, 0x0, 0x1);
        gbc.writeMem(0x5c32, { 0xc9 });
        gbc.writeMem(0xeab0, { 0x33, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xeab2);
        EXPECT(gbc.pc(), 0xd133);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeab0), 0x33);
        EXPECT(gbc.readMem(0xeab1), 0xd1);
        // C9 02C7
        gbc.setState(0xc1f9, 0x341a, 0xdc30, 0x9089, 0x43fc, 0x77ba, 0x0, 0x0);
        gbc.writeMem(0x341a, { 0x3e, 0xac });
        gbc.writeMem(0xc1f9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x341c);
        EXPECT(gbc.pc(), 0xac3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1f9), 0xc9);
        // C9 02C8
        gbc.setState(0xa584, 0x10ec, 0x64f0, 0xdb26, 0xf9a7, 0x33d9, 0x0, 0x1);
        gbc.writeMem(0x10ec, { 0x76, 0x95 });
        gbc.writeMem(0xa584, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x10ee);
        EXPECT(gbc.pc(), 0x9576);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa584), 0xc9);
        // C9 02C9
        gbc.setState(0x49a6, 0x314b, 0x3a20, 0xbfc0, 0xe39, 0x41f8, 0x0, 0x0);
        gbc.writeMem(0x314b, { 0x6f, 0xed });
        gbc.writeMem(0x49a6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x314d);
        EXPECT(gbc.pc(), 0xed6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 02CA
        gbc.setState(0x9627, 0x5c13, 0x8950, 0xb83, 0x1c94, 0x936e, 0x1, 0x0);
        gbc.writeMem(0x5c13, { 0x3e, 0x12 });
        gbc.writeMem(0x9627, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5c15);
        EXPECT(gbc.pc(), 0x123e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9627), 0xc9);
        // C9 02CB
        gbc.setState(0x67e8, 0x63c1, 0x4d0, 0x8883, 0xaee, 0x731d, 0x1, 0x0);
        gbc.writeMem(0x63c1, { 0x13, 0x96 });
        gbc.writeMem(0x67e8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x63c3);
        EXPECT(gbc.pc(), 0x9613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02CC
        gbc.setState(0x180a, 0x9140, 0x1280, 0xcaec, 0x73fe, 0xa32b, 0x0, 0x0);
        gbc.writeMem(0x180a, { 0xc9 });
        gbc.writeMem(0x9140, { 0x16, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9142);
        EXPECT(gbc.pc(), 0xf616);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9140), 0x16);
        EXPECT(gbc.readMem(0x9141), 0xf6);
        // C9 02CD
        gbc.setState(0xe992, 0xec3c, 0xbaa0, 0xa4a7, 0x5bfc, 0x4040, 0x0, 0x1);
        gbc.writeMem(0xe992, { 0xc9 });
        gbc.writeMem(0xec3c, { 0xbc, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xec3e);
        EXPECT(gbc.pc(), 0x2cbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe992), 0xc9);
        EXPECT(gbc.readMem(0xec3c), 0xbc);
        EXPECT(gbc.readMem(0xec3d), 0x2c);
        // C9 02CE
        gbc.setState(0x99cd, 0xb86f, 0x90d0, 0x4ddd, 0x967e, 0x3488, 0x0, 0x0);
        gbc.writeMem(0x99cd, { 0xc9 });
        gbc.writeMem(0xb86f, { 0xdd, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb871);
        EXPECT(gbc.pc(), 0xc5dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99cd), 0xc9);
        EXPECT(gbc.readMem(0xb86f), 0xdd);
        EXPECT(gbc.readMem(0xb870), 0xc5);
        // C9 02CF
        gbc.setState(0xdd64, 0xd258, 0xc5e0, 0x4147, 0x4492, 0x4e37, 0x1, 0x1);
        gbc.writeMem(0xd258, { 0x59, 0xb2 });
        gbc.writeMem(0xdd64, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd25a);
        EXPECT(gbc.pc(), 0xb259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd258), 0x59);
        EXPECT(gbc.readMem(0xd259), 0xb2);
        EXPECT(gbc.readMem(0xdd64), 0xc9);
        // C9 02D0
        gbc.setState(0x4fa7, 0x5c4, 0x7890, 0x4ee5, 0xab4e, 0x1f84, 0x1, 0x1);
        gbc.writeMem(0x5c4, { 0x7f, 0x2e });
        gbc.writeMem(0x4fa7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5c6);
        EXPECT(gbc.pc(), 0x2e7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02D1
        gbc.setState(0x591e, 0x51bb, 0xfc00, 0x87cb, 0x4ff7, 0xc25c, 0x1, 0x1);
        gbc.writeMem(0x51bb, { 0x4c, 0x8b });
        gbc.writeMem(0x591e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x51bd);
        EXPECT(gbc.pc(), 0x8b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 02D2
        gbc.setState(0xde32, 0xcfd6, 0x41e0, 0x50e, 0x2f5a, 0xeb25, 0x1, 0x1);
        gbc.writeMem(0xcfd6, { 0x11, 0x91 });
        gbc.writeMem(0xde32, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcfd8);
        EXPECT(gbc.pc(), 0x9111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd6), 0x11);
        EXPECT(gbc.readMem(0xcfd7), 0x91);
        EXPECT(gbc.readMem(0xde32), 0xc9);
        // C9 02D3
        gbc.setState(0xef70, 0x2c5d, 0x3210, 0x26be, 0x58b7, 0xe3a3, 0x1, 0x1);
        gbc.writeMem(0x2c5d, { 0xf7, 0x1d });
        gbc.writeMem(0xef70, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2c5f);
        EXPECT(gbc.pc(), 0x1df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef70), 0xc9);
        // C9 02D4
        gbc.setState(0xef3a, 0x99b5, 0x1920, 0xa71b, 0x76a7, 0xbc9b, 0x1, 0x0);
        gbc.writeMem(0x99b5, { 0x4b, 0xc0 });
        gbc.writeMem(0xef3a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x99b7);
        EXPECT(gbc.pc(), 0xc04b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b5), 0x4b);
        EXPECT(gbc.readMem(0x99b6), 0xc0);
        EXPECT(gbc.readMem(0xef3a), 0xc9);
        // C9 02D5
        gbc.setState(0xabcb, 0x3f2a, 0xe740, 0x4919, 0xcd5b, 0x7a29, 0x1, 0x1);
        gbc.writeMem(0x3f2a, { 0x56, 0x34 });
        gbc.writeMem(0xabcb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3f2c);
        EXPECT(gbc.pc(), 0x3456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabcb), 0xc9);
        // C9 02D6
        gbc.setState(0xbe3d, 0x711a, 0xeb00, 0xe6ee, 0x50da, 0x9d24, 0x0, 0x1);
        gbc.writeMem(0x711a, { 0x34, 0xc3 });
        gbc.writeMem(0xbe3d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x711c);
        EXPECT(gbc.pc(), 0xc334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3d), 0xc9);
        // C9 02D7
        gbc.setState(0x3892, 0xa96d, 0x15b0, 0x465f, 0xbc4e, 0x1c1b, 0x1, 0x1);
        gbc.writeMem(0x3892, { 0xc9 });
        gbc.writeMem(0xa96d, { 0x7b, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa96f);
        EXPECT(gbc.pc(), 0x2f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa96d), 0x7b);
        EXPECT(gbc.readMem(0xa96e), 0x2f);
        // C9 02D9
        gbc.setState(0x1297, 0x996, 0x25b0, 0x1387, 0x3f99, 0xd33c, 0x1, 0x0);
        gbc.writeMem(0x996, { 0x3a, 0xc7 });
        gbc.writeMem(0x1297, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x998);
        EXPECT(gbc.pc(), 0xc73a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02DA
        gbc.setState(0x274, 0xc697, 0xa0, 0xaeb9, 0x3afd, 0x3222, 0x1, 0x0);
        gbc.writeMem(0x274, { 0xc9 });
        gbc.writeMem(0xc697, { 0x46, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xc699);
        EXPECT(gbc.pc(), 0x8d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc697), 0x46);
        EXPECT(gbc.readMem(0xc698), 0x8d);
        // C9 02DB
        gbc.setState(0xd95, 0xcdfb, 0xf6e0, 0x14cb, 0x359e, 0x1bae, 0x1, 0x0);
        gbc.writeMem(0xd95, { 0xc9 });
        gbc.writeMem(0xcdfb, { 0x5a, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcdfd);
        EXPECT(gbc.pc(), 0x2f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdfb), 0x5a);
        EXPECT(gbc.readMem(0xcdfc), 0x2f);
        // C9 02DC
        gbc.setState(0x90fe, 0xabf9, 0x2c40, 0x91c, 0xf982, 0xdb1c, 0x0, 0x1);
        gbc.writeMem(0x90fe, { 0xc9 });
        gbc.writeMem(0xabf9, { 0xaf, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xabfb);
        EXPECT(gbc.pc(), 0x82af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fe), 0xc9);
        EXPECT(gbc.readMem(0xabf9), 0xaf);
        EXPECT(gbc.readMem(0xabfa), 0x82);
        // C9 02DE
        gbc.setState(0x792a, 0xa9b0, 0xe3f0, 0x691f, 0xb48e, 0x99a9, 0x1, 0x0);
        gbc.writeMem(0x792a, { 0xc9 });
        gbc.writeMem(0xa9b0, { 0x6a, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa9b2);
        EXPECT(gbc.pc(), 0xaf6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b0), 0x6a);
        EXPECT(gbc.readMem(0xa9b1), 0xaf);
        // C9 02DF
        gbc.setState(0xa8d1, 0xb985, 0xf560, 0xea21, 0xd67d, 0xc821, 0x1, 0x0);
        gbc.writeMem(0xa8d1, { 0xc9 });
        gbc.writeMem(0xb985, { 0x30, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb987);
        EXPECT(gbc.pc(), 0x9630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d1), 0xc9);
        EXPECT(gbc.readMem(0xb985), 0x30);
        EXPECT(gbc.readMem(0xb986), 0x96);
        // C9 02E0
        gbc.setState(0xdeb1, 0xe64e, 0x7d60, 0x8bf9, 0xcfb6, 0x17e1, 0x0, 0x0);
        gbc.writeMem(0xdeb1, { 0xc9 });
        gbc.writeMem(0xe64e, { 0x7e, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe650);
        EXPECT(gbc.pc(), 0xc87e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb1), 0xc9);
        EXPECT(gbc.readMem(0xe64e), 0x7e);
        EXPECT(gbc.readMem(0xe64f), 0xc8);
        // C9 02E1
        gbc.setState(0xd8d1, 0x474d, 0xc100, 0x49c1, 0xa6a7, 0x461, 0x1, 0x0);
        gbc.writeMem(0x474d, { 0x64, 0x19 });
        gbc.writeMem(0xd8d1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x474f);
        EXPECT(gbc.pc(), 0x1964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d1), 0xc9);
        // C9 02E2
        gbc.setState(0xd19a, 0x547f, 0xd6f0, 0xd220, 0x56f5, 0xf887, 0x1, 0x0);
        gbc.writeMem(0x547f, { 0x49, 0x46 });
        gbc.writeMem(0xd19a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5481);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19a), 0xc9);
        // C9 02E4
        gbc.setState(0x8ea, 0x202e, 0xf30, 0xdc0b, 0xbf7b, 0xd59d, 0x0, 0x1);
        gbc.writeMem(0x8ea, { 0xc9 });
        gbc.writeMem(0x202e, { 0x71, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2030);
        EXPECT(gbc.pc(), 0xf171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02E5
        gbc.setState(0xd2fa, 0x74c2, 0xf9c0, 0x6d47, 0x366c, 0x57fb, 0x1, 0x1);
        gbc.writeMem(0x74c2, { 0x8, 0x91 });
        gbc.writeMem(0xd2fa, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x74c4);
        EXPECT(gbc.pc(), 0x9108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2fa), 0xc9);
        // C9 02E8
        gbc.setState(0xe5ed, 0xe5c1, 0x91d0, 0x24be, 0x9923, 0x690a, 0x0, 0x0);
        gbc.writeMem(0xe5c1, { 0x15, 0x79 });
        gbc.writeMem(0xe5ed, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe5c3);
        EXPECT(gbc.pc(), 0x7915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c1), 0x15);
        EXPECT(gbc.readMem(0xe5c2), 0x79);
        EXPECT(gbc.readMem(0xe5ed), 0xc9);
        // C9 02E9
        gbc.setState(0x9e55, 0x7a57, 0x250, 0xa650, 0x2e5e, 0xa2f5, 0x0, 0x1);
        gbc.writeMem(0x7a57, { 0xb8, 0xa9 });
        gbc.writeMem(0x9e55, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7a59);
        EXPECT(gbc.pc(), 0xa9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e55), 0xc9);
        // C9 02EA
        gbc.setState(0x3255, 0x50b1, 0xf720, 0xf89c, 0xe907, 0xd618, 0x1, 0x0);
        gbc.writeMem(0x3255, { 0xc9 });
        gbc.writeMem(0x50b1, { 0xec, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x50b3);
        EXPECT(gbc.pc(), 0xdaec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 02EC
        gbc.setState(0x2a1a, 0x8146, 0xeb50, 0x77ed, 0xfe31, 0xf2c9, 0x1, 0x1);
        gbc.writeMem(0x2a1a, { 0xc9 });
        gbc.writeMem(0x8146, { 0x6b, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8148);
        EXPECT(gbc.pc(), 0x106b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8146), 0x6b);
        EXPECT(gbc.readMem(0x8147), 0x10);
        // C9 02ED
        gbc.setState(0xb2d1, 0xf1d1, 0xaff0, 0x4020, 0x279e, 0xf279, 0x0, 0x0);
        gbc.writeMem(0xb2d1, { 0xc9 });
        gbc.writeMem(0xf1d1, { 0xc6, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf1d3);
        EXPECT(gbc.pc(), 0x44c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2d1), 0xc9);
        EXPECT(gbc.readMem(0xf1d1), 0xc6);
        EXPECT(gbc.readMem(0xf1d2), 0x44);
        // C9 02EE
        gbc.setState(0xb624, 0xcf81, 0x3f40, 0x116b, 0x87eb, 0x6ad8, 0x1, 0x1);
        gbc.writeMem(0xb624, { 0xc9 });
        gbc.writeMem(0xcf81, { 0x81, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcf83);
        EXPECT(gbc.pc(), 0xb681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb624), 0xc9);
        EXPECT(gbc.readMem(0xcf81), 0x81);
        EXPECT(gbc.readMem(0xcf82), 0xb6);
        // C9 02EF
        gbc.setState(0xc2e4, 0x5241, 0x3f50, 0x7a82, 0x8bdf, 0xae52, 0x1, 0x0);
        gbc.writeMem(0x5241, { 0xa8, 0x77 });
        gbc.writeMem(0xc2e4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5243);
        EXPECT(gbc.pc(), 0x77a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2e4), 0xc9);
        // C9 02F0
        gbc.setState(0xa928, 0xaafc, 0x7e00, 0xd89c, 0x2952, 0x1e46, 0x1, 0x1);
        gbc.writeMem(0xa928, { 0xc9 });
        gbc.writeMem(0xaafc, { 0x3c, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xaafe);
        EXPECT(gbc.pc(), 0xf33c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa928), 0xc9);
        EXPECT(gbc.readMem(0xaafc), 0x3c);
        EXPECT(gbc.readMem(0xaafd), 0xf3);
        // C9 02F2
        gbc.setState(0x7971, 0x5afe, 0x6a30, 0xe72d, 0x783b, 0xaa46, 0x1, 0x0);
        gbc.writeMem(0x5afe, { 0x5e, 0x28 });
        gbc.writeMem(0x7971, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5b00);
        EXPECT(gbc.pc(), 0x285e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 02F3
        gbc.setState(0x72d1, 0xbc9a, 0x5c00, 0x585e, 0x5c59, 0xe62e, 0x0, 0x1);
        gbc.writeMem(0x72d1, { 0xc9 });
        gbc.writeMem(0xbc9a, { 0xfc, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbc9c);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9a), 0xfc);
        EXPECT(gbc.readMem(0xbc9b), 0x78);
        // C9 02F4
        gbc.setState(0x3942, 0xe392, 0x73d0, 0x8233, 0x9799, 0x865, 0x0, 0x1);
        gbc.writeMem(0x3942, { 0xc9 });
        gbc.writeMem(0xe392, { 0x15, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe394);
        EXPECT(gbc.pc(), 0x7215);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe392), 0x15);
        EXPECT(gbc.readMem(0xe393), 0x72);
        // C9 02F6
        gbc.setState(0x402f, 0xac16, 0x8550, 0xf22f, 0x37b4, 0xca03, 0x1, 0x1);
        gbc.writeMem(0x402f, { 0xc9 });
        gbc.writeMem(0xac16, { 0x53, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xac18);
        EXPECT(gbc.pc(), 0x8e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac16), 0x53);
        EXPECT(gbc.readMem(0xac17), 0x8e);
        // C9 02F7
        gbc.setState(0xb4d8, 0xee5b, 0x8990, 0x338d, 0xd41b, 0x738, 0x1, 0x1);
        gbc.writeMem(0xb4d8, { 0xc9 });
        gbc.writeMem(0xee5b, { 0x9f, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xee5d);
        EXPECT(gbc.pc(), 0xa69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d8), 0xc9);
        EXPECT(gbc.readMem(0xee5b), 0x9f);
        EXPECT(gbc.readMem(0xee5c), 0xa6);
        // C9 02F8
        gbc.setState(0x22e8, 0x4a9, 0xb510, 0x4b78, 0x5cab, 0xce5e, 0x0, 0x0);
        gbc.writeMem(0x4a9, { 0xd1, 0x33 });
        gbc.writeMem(0x22e8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4ab);
        EXPECT(gbc.pc(), 0x33d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 02F9
        gbc.setState(0x8adc, 0x8519, 0x5960, 0xc19a, 0x7615, 0x5888, 0x0, 0x1);
        gbc.writeMem(0x8519, { 0xed, 0xbf });
        gbc.writeMem(0x8adc, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x851b);
        EXPECT(gbc.pc(), 0xbfed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8519), 0xed);
        EXPECT(gbc.readMem(0x851a), 0xbf);
        EXPECT(gbc.readMem(0x8adc), 0xc9);
        // C9 02FA
        gbc.setState(0xa7a0, 0x5c5b, 0x6850, 0x1092, 0x3d24, 0x10e0, 0x0, 0x1);
        gbc.writeMem(0x5c5b, { 0x4e, 0x49 });
        gbc.writeMem(0xa7a0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5c5d);
        EXPECT(gbc.pc(), 0x494e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a0), 0xc9);
        // C9 02FB
        gbc.setState(0xdc2e, 0x4405, 0xcf50, 0x32a7, 0xf3cf, 0x252e, 0x0, 0x0);
        gbc.writeMem(0x4405, { 0xac, 0xce });
        gbc.writeMem(0xdc2e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4407);
        EXPECT(gbc.pc(), 0xceac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2e), 0xc9);
        // C9 02FC
        gbc.setState(0x52ef, 0xaa65, 0x14e0, 0xbec5, 0x2111, 0xa383, 0x0, 0x0);
        gbc.writeMem(0x52ef, { 0xc9 });
        gbc.writeMem(0xaa65, { 0x10, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xaa67);
        EXPECT(gbc.pc(), 0x1110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa65), 0x10);
        EXPECT(gbc.readMem(0xaa66), 0x11);
        // C9 02FD
        gbc.setState(0x9d23, 0xb211, 0xfde0, 0x8734, 0x6e51, 0x695b, 0x1, 0x1);
        gbc.writeMem(0x9d23, { 0xc9 });
        gbc.writeMem(0xb211, { 0xfd, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb213);
        EXPECT(gbc.pc(), 0xe6fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d23), 0xc9);
        EXPECT(gbc.readMem(0xb211), 0xfd);
        EXPECT(gbc.readMem(0xb212), 0xe6);
        // C9 02FE
        gbc.setState(0xcfb6, 0xcf0, 0xfa80, 0x57a7, 0xb68, 0xd3c8, 0x0, 0x0);
        gbc.writeMem(0xcf0, { 0x47, 0xb0 });
        gbc.writeMem(0xcfb6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xcf2);
        EXPECT(gbc.pc(), 0xb047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb6), 0xc9);
        // C9 02FF
        gbc.setState(0x783e, 0x4701, 0xdc10, 0xd114, 0xcb3c, 0x4bf2, 0x1, 0x0);
        gbc.writeMem(0x4701, { 0x2, 0xff });
        gbc.writeMem(0x783e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4703);
        EXPECT(gbc.pc(), 0xff02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0300
        gbc.setState(0x588c, 0x4d5a, 0xd420, 0xd17f, 0x8c42, 0x2efd, 0x0, 0x0);
        gbc.writeMem(0x4d5a, { 0x74, 0x6a });
        gbc.writeMem(0x588c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4d5c);
        EXPECT(gbc.pc(), 0x6a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0301
        gbc.setState(0x2784, 0x800, 0x33e0, 0xda38, 0x7a2f, 0x31b8, 0x0, 0x1);
        gbc.writeMem(0x800, { 0x76, 0xea });
        gbc.writeMem(0x2784, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x802);
        EXPECT(gbc.pc(), 0xea76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0302
        gbc.setState(0xefa4, 0x84c5, 0xe360, 0xa3b1, 0x4b12, 0xdd4f, 0x1, 0x0);
        gbc.writeMem(0x84c5, { 0x3b, 0x2f });
        gbc.writeMem(0xefa4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x84c7);
        EXPECT(gbc.pc(), 0x2f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c5), 0x3b);
        EXPECT(gbc.readMem(0x84c6), 0x2f);
        EXPECT(gbc.readMem(0xefa4), 0xc9);
        // C9 0304
        gbc.setState(0x5ca8, 0xfb73, 0x1cf0, 0x7e85, 0xd9d9, 0xf3b2, 0x1, 0x1);
        gbc.writeMem(0x5ca8, { 0xc9 });
        gbc.writeMem(0xfb73, { 0xd, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfb75);
        EXPECT(gbc.pc(), 0xf0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb73), 0xd);
        EXPECT(gbc.readMem(0xfb74), 0xf);
        // C9 0305
        gbc.setState(0xd072, 0x51c6, 0xb7a0, 0xaa81, 0x1e75, 0x22a, 0x1, 0x0);
        gbc.writeMem(0x51c6, { 0xc9, 0x7e });
        gbc.writeMem(0xd072, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x51c8);
        EXPECT(gbc.pc(), 0x7ec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd072), 0xc9);
        // C9 0306
        gbc.setState(0x71b0, 0xeac0, 0xa7d0, 0xcc5b, 0xe22, 0x3bea, 0x1, 0x1);
        gbc.writeMem(0x71b0, { 0xc9 });
        gbc.writeMem(0xeac0, { 0x3b, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xeac2);
        EXPECT(gbc.pc(), 0x9f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac0), 0x3b);
        EXPECT(gbc.readMem(0xeac1), 0x9f);
        // C9 0307
        gbc.setState(0x25e7, 0x9c00, 0xa860, 0x488e, 0x4125, 0x5610, 0x1, 0x0);
        gbc.writeMem(0x25e7, { 0xc9 });
        gbc.writeMem(0x9c00, { 0x79, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9c02);
        EXPECT(gbc.pc(), 0xfa79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c00), 0x79);
        EXPECT(gbc.readMem(0x9c01), 0xfa);
        // C9 0308
        gbc.setState(0xb1c2, 0xb800, 0xa6c0, 0xbb7d, 0xfda6, 0xe148, 0x0, 0x1);
        gbc.writeMem(0xb1c2, { 0xc9 });
        gbc.writeMem(0xb800, { 0xa2, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xb802);
        EXPECT(gbc.pc(), 0x79a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c2), 0xc9);
        EXPECT(gbc.readMem(0xb800), 0xa2);
        EXPECT(gbc.readMem(0xb801), 0x79);
        // C9 0309
        gbc.setState(0xaf92, 0xb938, 0xc820, 0x5744, 0x9eff, 0x3d89, 0x1, 0x0);
        gbc.writeMem(0xaf92, { 0xc9 });
        gbc.writeMem(0xb938, { 0x2e, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb93a);
        EXPECT(gbc.pc(), 0x7b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf92), 0xc9);
        EXPECT(gbc.readMem(0xb938), 0x2e);
        EXPECT(gbc.readMem(0xb939), 0x7b);
        // C9 030A
        gbc.setState(0x602a, 0x7f85, 0xa750, 0x1352, 0x9787, 0x901, 0x0, 0x0);
        gbc.writeMem(0x602a, { 0xc9 });
        gbc.writeMem(0x7f85, { 0x8f, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7f87);
        EXPECT(gbc.pc(), 0xbd8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 030B
        gbc.setState(0x62b9, 0xe5b, 0x1fe0, 0x69a7, 0x77e1, 0x7155, 0x1, 0x1);
        gbc.writeMem(0xe5b, { 0x1b, 0x74 });
        gbc.writeMem(0x62b9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe5d);
        EXPECT(gbc.pc(), 0x741b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 030C
        gbc.setState(0xab79, 0xf658, 0x370, 0x43cf, 0xd4bc, 0xec23, 0x0, 0x1);
        gbc.writeMem(0xab79, { 0xc9 });
        gbc.writeMem(0xf658, { 0x1c, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf65a);
        EXPECT(gbc.pc(), 0x5e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab79), 0xc9);
        EXPECT(gbc.readMem(0xf658), 0x1c);
        EXPECT(gbc.readMem(0xf659), 0x5e);
        // C9 030D
        gbc.setState(0xa385, 0x16e2, 0x62b0, 0xa053, 0xe7b4, 0xfc8f, 0x0, 0x1);
        gbc.writeMem(0x16e2, { 0xa8, 0xc5 });
        gbc.writeMem(0xa385, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x16e4);
        EXPECT(gbc.pc(), 0xc5a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa385), 0xc9);
        // C9 030E
        gbc.setState(0xe470, 0x87e1, 0x9850, 0x6031, 0xfbd5, 0x39d4, 0x0, 0x0);
        gbc.writeMem(0x87e1, { 0x4f, 0xda });
        gbc.writeMem(0xe470, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x87e3);
        EXPECT(gbc.pc(), 0xda4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87e1), 0x4f);
        EXPECT(gbc.readMem(0x87e2), 0xda);
        EXPECT(gbc.readMem(0xe470), 0xc9);
        // C9 030F
        gbc.setState(0x11d9, 0xaf11, 0x56c0, 0x950b, 0xef39, 0xec8f, 0x0, 0x0);
        gbc.writeMem(0x11d9, { 0xc9 });
        gbc.writeMem(0xaf11, { 0x8e, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xaf13);
        EXPECT(gbc.pc(), 0x48e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf11), 0x8e);
        EXPECT(gbc.readMem(0xaf12), 0x4);
        // C9 0310
        gbc.setState(0xa519, 0x1e39, 0x3340, 0x6fae, 0x52a, 0x2995, 0x1, 0x0);
        gbc.writeMem(0x1e39, { 0xd4, 0x4b });
        gbc.writeMem(0xa519, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1e3b);
        EXPECT(gbc.pc(), 0x4bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa519), 0xc9);
        // C9 0311
        gbc.setState(0x5fe8, 0x2fae, 0x3360, 0xe2fe, 0x6ff0, 0x5a98, 0x0, 0x1);
        gbc.writeMem(0x2fae, { 0xc9, 0xc1 });
        gbc.writeMem(0x5fe8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2fb0);
        EXPECT(gbc.pc(), 0xc1c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0312
        gbc.setState(0x4a44, 0xc8cb, 0xbb80, 0xd578, 0xaa17, 0xb8ef, 0x1, 0x1);
        gbc.writeMem(0x4a44, { 0xc9 });
        gbc.writeMem(0xc8cb, { 0x8d, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc8cd);
        EXPECT(gbc.pc(), 0xaa8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8cb), 0x8d);
        EXPECT(gbc.readMem(0xc8cc), 0xaa);
        // C9 0313
        gbc.setState(0x58fe, 0x19a2, 0xfef0, 0x6634, 0xa8d2, 0x395, 0x1, 0x1);
        gbc.writeMem(0x19a2, { 0x71, 0xd4 });
        gbc.writeMem(0x58fe, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x19a4);
        EXPECT(gbc.pc(), 0xd471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0314
        gbc.setState(0xb5d1, 0xa2a6, 0xee50, 0x991f, 0xd778, 0x7665, 0x1, 0x1);
        gbc.writeMem(0xa2a6, { 0x9e, 0x92 });
        gbc.writeMem(0xb5d1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa2a8);
        EXPECT(gbc.pc(), 0x929e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a6), 0x9e);
        EXPECT(gbc.readMem(0xa2a7), 0x92);
        EXPECT(gbc.readMem(0xb5d1), 0xc9);
        // C9 0315
        gbc.setState(0x22bb, 0xf98d, 0x71e0, 0x4015, 0xa1cd, 0xfb91, 0x0, 0x0);
        gbc.writeMem(0x22bb, { 0xc9 });
        gbc.writeMem(0xf98d, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf98f);
        EXPECT(gbc.pc(), 0xd0d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf98d), 0xd6);
        EXPECT(gbc.readMem(0xf98e), 0xd0);
        // C9 0316
        gbc.setState(0x5e7e, 0xce2, 0x3800, 0x8575, 0x382, 0xedf7, 0x1, 0x0);
        gbc.writeMem(0xce2, { 0xfb, 0xd3 });
        gbc.writeMem(0x5e7e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xce4);
        EXPECT(gbc.pc(), 0xd3fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0317
        gbc.setState(0xa2e4, 0x8df2, 0xde70, 0xc1ab, 0x2ffe, 0xad91, 0x1, 0x0);
        gbc.writeMem(0x8df2, { 0x96, 0xca });
        gbc.writeMem(0xa2e4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8df4);
        EXPECT(gbc.pc(), 0xca96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df2), 0x96);
        EXPECT(gbc.readMem(0x8df3), 0xca);
        EXPECT(gbc.readMem(0xa2e4), 0xc9);
        // C9 0319
        gbc.setState(0x5cca, 0x7cbb, 0xdba0, 0xa9ef, 0xb64c, 0xb900, 0x0, 0x1);
        gbc.writeMem(0x5cca, { 0xc9 });
        gbc.writeMem(0x7cbb, { 0xeb, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7cbd);
        EXPECT(gbc.pc(), 0x8deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 031A
        gbc.setState(0xdaf2, 0x2b31, 0x17d0, 0xad42, 0xe7dd, 0x8ca5, 0x0, 0x0);
        gbc.writeMem(0x2b31, { 0x81, 0x97 });
        gbc.writeMem(0xdaf2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2b33);
        EXPECT(gbc.pc(), 0x9781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaf2), 0xc9);
        // C9 031D
        gbc.setState(0x78b6, 0x8cab, 0x79b0, 0xabfb, 0xd08b, 0x50fc, 0x0, 0x1);
        gbc.writeMem(0x78b6, { 0xc9 });
        gbc.writeMem(0x8cab, { 0xc5, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8cad);
        EXPECT(gbc.pc(), 0xe1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cab), 0xc5);
        EXPECT(gbc.readMem(0x8cac), 0xe1);
        // C9 031E
        gbc.setState(0x31de, 0x5f70, 0x6a40, 0xb238, 0x39c, 0xb77f, 0x0, 0x1);
        gbc.writeMem(0x31de, { 0xc9 });
        gbc.writeMem(0x5f70, { 0x27, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5f72);
        EXPECT(gbc.pc(), 0x9527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 031F
        gbc.setState(0xae62, 0x4e71, 0xf9a0, 0x1203, 0xebb, 0xc18b, 0x0, 0x0);
        gbc.writeMem(0x4e71, { 0xe, 0x5f });
        gbc.writeMem(0xae62, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4e73);
        EXPECT(gbc.pc(), 0x5f0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae62), 0xc9);
        // C9 0320
        gbc.setState(0x5bc3, 0x295f, 0x5690, 0x1b45, 0xeb2b, 0x9144, 0x1, 0x1);
        gbc.writeMem(0x295f, { 0x9b, 0xfe });
        gbc.writeMem(0x5bc3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2961);
        EXPECT(gbc.pc(), 0xfe9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0321
        gbc.setState(0x1c75, 0x1965, 0x6320, 0x9f4, 0x892d, 0x9fda, 0x0, 0x0);
        gbc.writeMem(0x1965, { 0xbb, 0xb6 });
        gbc.writeMem(0x1c75, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x1967);
        EXPECT(gbc.pc(), 0xb6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0322
        gbc.setState(0x250d, 0x17d6, 0xf640, 0x7697, 0x1f85, 0x19fd, 0x1, 0x1);
        gbc.writeMem(0x17d6, { 0xfe, 0x18 });
        gbc.writeMem(0x250d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x17d8);
        EXPECT(gbc.pc(), 0x18fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0323
        gbc.setState(0x6c92, 0x7f57, 0x110, 0xe5a8, 0x9359, 0xee98, 0x0, 0x0);
        gbc.writeMem(0x6c92, { 0xc9 });
        gbc.writeMem(0x7f57, { 0x4b, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7f59);
        EXPECT(gbc.pc(), 0x944b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0324
        gbc.setState(0x6b2e, 0xdbf3, 0xb0a0, 0x8e06, 0x4ff2, 0x30b3, 0x1, 0x0);
        gbc.writeMem(0x6b2e, { 0xc9 });
        gbc.writeMem(0xdbf3, { 0x67, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdbf5);
        EXPECT(gbc.pc(), 0xbe67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbf3), 0x67);
        EXPECT(gbc.readMem(0xdbf4), 0xbe);
        // C9 0325
        gbc.setState(0x6be0, 0x6cc, 0x9bd0, 0x6181, 0x1f76, 0x124, 0x1, 0x1);
        gbc.writeMem(0x6cc, { 0xee, 0xd4 });
        gbc.writeMem(0x6be0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6ce);
        EXPECT(gbc.pc(), 0xd4ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0326
        gbc.setState(0xc54d, 0x4150, 0x1420, 0xcdf8, 0x6c30, 0x933b, 0x0, 0x0);
        gbc.writeMem(0x4150, { 0xa9, 0x4c });
        gbc.writeMem(0xc54d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4152);
        EXPECT(gbc.pc(), 0x4ca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc54d), 0xc9);
        // C9 0327
        gbc.setState(0x1dfc, 0xd3d7, 0xd360, 0x3fd6, 0x915c, 0xb58a, 0x1, 0x0);
        gbc.writeMem(0x1dfc, { 0xc9 });
        gbc.writeMem(0xd3d7, { 0xfc, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd3d9);
        EXPECT(gbc.pc(), 0xdcfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3d7), 0xfc);
        EXPECT(gbc.readMem(0xd3d8), 0xdc);
        // C9 0328
        gbc.setState(0xde65, 0xecca, 0x2930, 0xf98b, 0xd837, 0x1a93, 0x0, 0x1);
        gbc.writeMem(0xde65, { 0xc9 });
        gbc.writeMem(0xecca, { 0xf9, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xeccc);
        EXPECT(gbc.pc(), 0xf0f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde65), 0xc9);
        EXPECT(gbc.readMem(0xecca), 0xf9);
        EXPECT(gbc.readMem(0xeccb), 0xf0);
        // C9 0329
        gbc.setState(0xe177, 0xccea, 0x4270, 0xe46b, 0x5db4, 0x2b1a, 0x0, 0x0);
        gbc.writeMem(0xccea, { 0x71, 0xcf });
        gbc.writeMem(0xe177, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xccec);
        EXPECT(gbc.pc(), 0xcf71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccea), 0x71);
        EXPECT(gbc.readMem(0xcceb), 0xcf);
        EXPECT(gbc.readMem(0xe177), 0xc9);
        // C9 032A
        gbc.setState(0xc404, 0x90af, 0x6930, 0xa643, 0x98d1, 0x8cd6, 0x1, 0x0);
        gbc.writeMem(0x90af, { 0x82, 0xc7 });
        gbc.writeMem(0xc404, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x90b1);
        EXPECT(gbc.pc(), 0xc782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90af), 0x82);
        EXPECT(gbc.readMem(0x90b0), 0xc7);
        EXPECT(gbc.readMem(0xc404), 0xc9);
        // C9 032B
        gbc.setState(0x15f1, 0xcbb2, 0xdec0, 0x68f3, 0x3d8, 0x2cdb, 0x1, 0x0);
        gbc.writeMem(0x15f1, { 0xc9 });
        gbc.writeMem(0xcbb2, { 0xff, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcbb4);
        EXPECT(gbc.pc(), 0xfdff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbb2), 0xff);
        EXPECT(gbc.readMem(0xcbb3), 0xfd);
        // C9 032C
        gbc.setState(0xbd80, 0x19c3, 0x9400, 0x10c6, 0x8b1d, 0x88df, 0x1, 0x1);
        gbc.writeMem(0x19c3, { 0xde, 0x92 });
        gbc.writeMem(0xbd80, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x19c5);
        EXPECT(gbc.pc(), 0x92de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd80), 0xc9);
        // C9 032D
        gbc.setState(0xb0b2, 0xcf9, 0xa3a0, 0xdf0a, 0xcf48, 0x7305, 0x0, 0x1);
        gbc.writeMem(0xcf9, { 0xe9, 0x38 });
        gbc.writeMem(0xb0b2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcfb);
        EXPECT(gbc.pc(), 0x38e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0b2), 0xc9);
        // C9 032E
        gbc.setState(0xb215, 0x6084, 0xe750, 0xa4de, 0xd079, 0xfd9, 0x1, 0x1);
        gbc.writeMem(0x6084, { 0xd6, 0x98 });
        gbc.writeMem(0xb215, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6086);
        EXPECT(gbc.pc(), 0x98d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb215), 0xc9);
        // C9 032F
        gbc.setState(0x4d73, 0x56e9, 0xc480, 0x2e78, 0x7525, 0xb3ca, 0x1, 0x1);
        gbc.writeMem(0x4d73, { 0xc9 });
        gbc.writeMem(0x56e9, { 0xee, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x56eb);
        EXPECT(gbc.pc(), 0x40ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0330
        gbc.setState(0xc79b, 0xb476, 0x4220, 0xf40e, 0xd50c, 0x8280, 0x0, 0x0);
        gbc.writeMem(0xb476, { 0x2d, 0x2 });
        gbc.writeMem(0xc79b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xb478);
        EXPECT(gbc.pc(), 0x22d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb476), 0x2d);
        EXPECT(gbc.readMem(0xb477), 0x2);
        EXPECT(gbc.readMem(0xc79b), 0xc9);
        // C9 0331
        gbc.setState(0xb118, 0x6387, 0x5010, 0xd385, 0xf068, 0xff3b, 0x1, 0x0);
        gbc.writeMem(0x6387, { 0xf2, 0x30 });
        gbc.writeMem(0xb118, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6389);
        EXPECT(gbc.pc(), 0x30f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb118), 0xc9);
        // C9 0332
        gbc.setState(0x3c11, 0xddbf, 0xba70, 0x4716, 0xb1d9, 0x9c19, 0x0, 0x1);
        gbc.writeMem(0x3c11, { 0xc9 });
        gbc.writeMem(0xddbf, { 0x20, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xddc1);
        EXPECT(gbc.pc(), 0x8920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddbf), 0x20);
        EXPECT(gbc.readMem(0xddc0), 0x89);
        // C9 0333
        gbc.setState(0x5692, 0xd528, 0x8370, 0xbf17, 0x2ce0, 0x9040, 0x1, 0x1);
        gbc.writeMem(0x5692, { 0xc9 });
        gbc.writeMem(0xd528, { 0xb4, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd52a);
        EXPECT(gbc.pc(), 0xa3b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd528), 0xb4);
        EXPECT(gbc.readMem(0xd529), 0xa3);
        // C9 0334
        gbc.setState(0x6337, 0x27cf, 0x3000, 0x88c8, 0x597a, 0x6fd1, 0x0, 0x1);
        gbc.writeMem(0x27cf, { 0xef, 0xec });
        gbc.writeMem(0x6337, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x27d1);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0335
        gbc.setState(0x74e2, 0x7d1c, 0xf070, 0xe23f, 0xe33a, 0xa10d, 0x1, 0x1);
        gbc.writeMem(0x74e2, { 0xc9 });
        gbc.writeMem(0x7d1c, { 0x24, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7d1e);
        EXPECT(gbc.pc(), 0x2624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0336
        gbc.setState(0x5512, 0x445b, 0x25f0, 0x51d7, 0x7115, 0x4d21, 0x1, 0x0);
        gbc.writeMem(0x445b, { 0x2f, 0x17 });
        gbc.writeMem(0x5512, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x445d);
        EXPECT(gbc.pc(), 0x172f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0337
        gbc.setState(0x5cf4, 0x80f, 0x2640, 0xd256, 0xbdee, 0xb336, 0x1, 0x1);
        gbc.writeMem(0x80f, { 0xd4, 0x23 });
        gbc.writeMem(0x5cf4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x811);
        EXPECT(gbc.pc(), 0x23d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0338
        gbc.setState(0xea2d, 0x96ba, 0x5200, 0xcd36, 0x2802, 0x6e82, 0x1, 0x1);
        gbc.writeMem(0x96ba, { 0x8c, 0xc8 });
        gbc.writeMem(0xea2d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x96bc);
        EXPECT(gbc.pc(), 0xc88c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ba), 0x8c);
        EXPECT(gbc.readMem(0x96bb), 0xc8);
        EXPECT(gbc.readMem(0xea2d), 0xc9);
        // C9 0339
        gbc.setState(0x1143, 0x819d, 0xd0, 0xe2bb, 0x547a, 0xc0d1, 0x1, 0x1);
        gbc.writeMem(0x1143, { 0xc9 });
        gbc.writeMem(0x819d, { 0xc8, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x819f);
        EXPECT(gbc.pc(), 0x37c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x819d), 0xc8);
        EXPECT(gbc.readMem(0x819e), 0x37);
        // C9 033A
        gbc.setState(0xa26a, 0xcaca, 0xbb20, 0xa225, 0x7384, 0x206f, 0x1, 0x0);
        gbc.writeMem(0xa26a, { 0xc9 });
        gbc.writeMem(0xcaca, { 0x73, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcacc);
        EXPECT(gbc.pc(), 0x8273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa26a), 0xc9);
        EXPECT(gbc.readMem(0xcaca), 0x73);
        EXPECT(gbc.readMem(0xcacb), 0x82);
        // C9 033B
        gbc.setState(0x265a, 0x5073, 0xac40, 0xc52b, 0x7195, 0x2e, 0x1, 0x0);
        gbc.writeMem(0x265a, { 0xc9 });
        gbc.writeMem(0x5073, { 0x3, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5075);
        EXPECT(gbc.pc(), 0x8f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 033C
        gbc.setState(0x9396, 0xc25a, 0x6ae0, 0x5faf, 0x33a4, 0xb27d, 0x0, 0x1);
        gbc.writeMem(0x9396, { 0xc9 });
        gbc.writeMem(0xc25a, { 0x5b, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc25c);
        EXPECT(gbc.pc(), 0x885b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9396), 0xc9);
        EXPECT(gbc.readMem(0xc25a), 0x5b);
        EXPECT(gbc.readMem(0xc25b), 0x88);
        // C9 033D
        gbc.setState(0x805a, 0x7f8c, 0xb610, 0x464a, 0xb8d1, 0x4112, 0x0, 0x0);
        gbc.writeMem(0x7f8c, { 0xfb, 0x30 });
        gbc.writeMem(0x805a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7f8e);
        EXPECT(gbc.pc(), 0x30fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x805a), 0xc9);
        // C9 033E
        gbc.setState(0x5ae3, 0x7c74, 0x3bd0, 0x1767, 0xc64, 0xcba6, 0x1, 0x1);
        gbc.writeMem(0x5ae3, { 0xc9 });
        gbc.writeMem(0x7c74, { 0xee, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x7c76);
        EXPECT(gbc.pc(), 0x30ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 033F
        gbc.setState(0x8486, 0xf877, 0x9970, 0x6035, 0x8f84, 0xe34f, 0x1, 0x0);
        gbc.writeMem(0x8486, { 0xc9 });
        gbc.writeMem(0xf877, { 0xb0, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf879);
        EXPECT(gbc.pc(), 0xe2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8486), 0xc9);
        EXPECT(gbc.readMem(0xf877), 0xb0);
        EXPECT(gbc.readMem(0xf878), 0xe2);
        // C9 0340
        gbc.setState(0x7717, 0x5131, 0x3040, 0x5de9, 0x68f7, 0x83a2, 0x1, 0x1);
        gbc.writeMem(0x5131, { 0x8c, 0x9b });
        gbc.writeMem(0x7717, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5133);
        EXPECT(gbc.pc(), 0x9b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0341
        gbc.setState(0xc38d, 0xe27b, 0xfc30, 0xd786, 0xb46f, 0xa7b8, 0x0, 0x1);
        gbc.writeMem(0xc38d, { 0xc9 });
        gbc.writeMem(0xe27b, { 0x9c, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe27d);
        EXPECT(gbc.pc(), 0x769c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38d), 0xc9);
        EXPECT(gbc.readMem(0xe27b), 0x9c);
        EXPECT(gbc.readMem(0xe27c), 0x76);
        // C9 0342
        gbc.setState(0x11c5, 0x6761, 0x1030, 0xe63c, 0x9c93, 0x9a6c, 0x0, 0x1);
        gbc.writeMem(0x11c5, { 0xc9 });
        gbc.writeMem(0x6761, { 0xb5, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6763);
        EXPECT(gbc.pc(), 0x93b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0343
        gbc.setState(0x27f2, 0x195c, 0x7b90, 0x7910, 0xec37, 0xddca, 0x0, 0x1);
        gbc.writeMem(0x195c, { 0x52, 0x54 });
        gbc.writeMem(0x27f2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x195e);
        EXPECT(gbc.pc(), 0x5452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0344
        gbc.setState(0xc25, 0x48ef, 0x7210, 0xd472, 0xba8d, 0xe124, 0x0, 0x0);
        gbc.writeMem(0xc25, { 0xc9 });
        gbc.writeMem(0x48ef, { 0x2a, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x48f1);
        EXPECT(gbc.pc(), 0x7a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0345
        gbc.setState(0x85a4, 0x487b, 0x4600, 0x1b82, 0x65b2, 0x2284, 0x0, 0x1);
        gbc.writeMem(0x487b, { 0x42, 0xe6 });
        gbc.writeMem(0x85a4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x487d);
        EXPECT(gbc.pc(), 0xe642);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85a4), 0xc9);
        // C9 0346
        gbc.setState(0x3a7d, 0x84f4, 0xa1e0, 0xa450, 0xae2a, 0x96a0, 0x0, 0x1);
        gbc.writeMem(0x3a7d, { 0xc9 });
        gbc.writeMem(0x84f4, { 0x1d, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x84f6);
        EXPECT(gbc.pc(), 0xd91d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f4), 0x1d);
        EXPECT(gbc.readMem(0x84f5), 0xd9);
        // C9 0347
        gbc.setState(0x9b8b, 0xb625, 0x9250, 0x9ad6, 0x5e66, 0x7244, 0x0, 0x0);
        gbc.writeMem(0x9b8b, { 0xc9 });
        gbc.writeMem(0xb625, { 0x6b, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb627);
        EXPECT(gbc.pc(), 0x496b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b8b), 0xc9);
        EXPECT(gbc.readMem(0xb625), 0x6b);
        EXPECT(gbc.readMem(0xb626), 0x49);
        // C9 0348
        gbc.setState(0x9a46, 0x33ce, 0x5230, 0x295f, 0x658b, 0x8d7f, 0x0, 0x1);
        gbc.writeMem(0x33ce, { 0x96, 0x7c });
        gbc.writeMem(0x9a46, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x33d0);
        EXPECT(gbc.pc(), 0x7c96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a46), 0xc9);
        // C9 0349
        gbc.setState(0x82ef, 0x2275, 0x8f10, 0x5dc2, 0x6d9f, 0xc5d8, 0x0, 0x0);
        gbc.writeMem(0x2275, { 0xe, 0x87 });
        gbc.writeMem(0x82ef, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2277);
        EXPECT(gbc.pc(), 0x870e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82ef), 0xc9);
        // C9 034A
        gbc.setState(0xe312, 0x3e6, 0xe60, 0xeea8, 0x66e3, 0x595e, 0x0, 0x1);
        gbc.writeMem(0x3e6, { 0xee, 0x85 });
        gbc.writeMem(0xe312, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3e8);
        EXPECT(gbc.pc(), 0x85ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe312), 0xc9);
        // C9 034B
        gbc.setState(0xd373, 0x2e68, 0x7ca0, 0x7a28, 0xe9, 0x5f44, 0x0, 0x0);
        gbc.writeMem(0x2e68, { 0xf2, 0xa5 });
        gbc.writeMem(0xd373, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2e6a);
        EXPECT(gbc.pc(), 0xa5f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd373), 0xc9);
        // C9 034C
        gbc.setState(0xd5e4, 0xefee, 0x1010, 0x3ae, 0x883, 0xfd3d, 0x1, 0x0);
        gbc.writeMem(0xd5e4, { 0xc9 });
        gbc.writeMem(0xefee, { 0x25, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xeff0);
        EXPECT(gbc.pc(), 0x3225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e4), 0xc9);
        EXPECT(gbc.readMem(0xefee), 0x25);
        EXPECT(gbc.readMem(0xefef), 0x32);
        // C9 034D
        gbc.setState(0x507e, 0x2881, 0x9200, 0x3252, 0x465b, 0xc8fc, 0x1, 0x0);
        gbc.writeMem(0x2881, { 0x96, 0xb6 });
        gbc.writeMem(0x507e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2883);
        EXPECT(gbc.pc(), 0xb696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 034E
        gbc.setState(0x32a0, 0xc887, 0xc610, 0x707d, 0x764c, 0x5def, 0x1, 0x1);
        gbc.writeMem(0x32a0, { 0xc9 });
        gbc.writeMem(0xc887, { 0xb5, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc889);
        EXPECT(gbc.pc(), 0x56b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc887), 0xb5);
        EXPECT(gbc.readMem(0xc888), 0x56);
        // C9 034F
        gbc.setState(0x2db1, 0xae1a, 0xbba0, 0xe831, 0xa84f, 0xd7a8, 0x1, 0x1);
        gbc.writeMem(0x2db1, { 0xc9 });
        gbc.writeMem(0xae1a, { 0x7a, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xae1c);
        EXPECT(gbc.pc(), 0xaa7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae1a), 0x7a);
        EXPECT(gbc.readMem(0xae1b), 0xaa);
        // C9 0350
        gbc.setState(0x5167, 0xfe27, 0x2690, 0x1e7e, 0x17c, 0x84ce, 0x0, 0x0);
        gbc.writeMem(0x5167, { 0xc9 });
        gbc.writeMem(0xfe27, { 0x9, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfe29);
        EXPECT(gbc.pc(), 0xce09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe27), 0x9);
        EXPECT(gbc.readMem(0xfe28), 0xce);
        // C9 0351
        gbc.setState(0x6417, 0xa291, 0x3680, 0x40e7, 0xea5f, 0xb8cc, 0x0, 0x1);
        gbc.writeMem(0x6417, { 0xc9 });
        gbc.writeMem(0xa291, { 0xd, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa293);
        EXPECT(gbc.pc(), 0x3a0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa291), 0xd);
        EXPECT(gbc.readMem(0xa292), 0x3a);
        // C9 0352
        gbc.setState(0x40ba, 0x8a80, 0xd4b0, 0xfa55, 0x92bd, 0xc785, 0x1, 0x0);
        gbc.writeMem(0x40ba, { 0xc9 });
        gbc.writeMem(0x8a80, { 0x9a, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8a82);
        EXPECT(gbc.pc(), 0x3b9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a80), 0x9a);
        EXPECT(gbc.readMem(0x8a81), 0x3b);
        // C9 0353
        gbc.setState(0x332, 0xf18d, 0x19a0, 0x4164, 0x1b7d, 0x2dbd, 0x1, 0x1);
        gbc.writeMem(0x332, { 0xc9 });
        gbc.writeMem(0xf18d, { 0x17, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xf18f);
        EXPECT(gbc.pc(), 0x9017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf18d), 0x17);
        EXPECT(gbc.readMem(0xf18e), 0x90);
        // C9 0354
        gbc.setState(0xd77a, 0x7510, 0x5e60, 0xb88a, 0xb8df, 0x385b, 0x1, 0x1);
        gbc.writeMem(0x7510, { 0x5b, 0x3e });
        gbc.writeMem(0xd77a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7512);
        EXPECT(gbc.pc(), 0x3e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77a), 0xc9);
        // C9 0355
        gbc.setState(0x8a38, 0xa827, 0xe500, 0x7da, 0x4dd5, 0x8b0b, 0x0, 0x0);
        gbc.writeMem(0x8a38, { 0xc9 });
        gbc.writeMem(0xa827, { 0xe3, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa829);
        EXPECT(gbc.pc(), 0x3ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a38), 0xc9);
        EXPECT(gbc.readMem(0xa827), 0xe3);
        EXPECT(gbc.readMem(0xa828), 0x3a);
        // C9 0356
        gbc.setState(0x57b, 0x2bf8, 0x3970, 0x7e1b, 0xc365, 0x2ad5, 0x0, 0x1);
        gbc.writeMem(0x57b, { 0xc9 });
        gbc.writeMem(0x2bf8, { 0x85, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2bfa);
        EXPECT(gbc.pc(), 0xa85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0358
        gbc.setState(0x9688, 0xb18f, 0x84b0, 0x7ba6, 0x57af, 0x61f5, 0x0, 0x1);
        gbc.writeMem(0x9688, { 0xc9 });
        gbc.writeMem(0xb18f, { 0x85, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb191);
        EXPECT(gbc.pc(), 0xc385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9688), 0xc9);
        EXPECT(gbc.readMem(0xb18f), 0x85);
        EXPECT(gbc.readMem(0xb190), 0xc3);
        // C9 0359
        gbc.setState(0xec8c, 0xac28, 0xa270, 0x1e18, 0x952f, 0xbf9a, 0x0, 0x0);
        gbc.writeMem(0xac28, { 0x7c, 0x55 });
        gbc.writeMem(0xec8c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xac2a);
        EXPECT(gbc.pc(), 0x557c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac28), 0x7c);
        EXPECT(gbc.readMem(0xac29), 0x55);
        EXPECT(gbc.readMem(0xec8c), 0xc9);
        // C9 035A
        gbc.setState(0x413e, 0xf8dc, 0x3c50, 0x2933, 0x1242, 0x86e, 0x0, 0x0);
        gbc.writeMem(0x413e, { 0xc9 });
        gbc.writeMem(0xf8dc, { 0xd9, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf8de);
        EXPECT(gbc.pc(), 0x9ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf8dc), 0xd9);
        EXPECT(gbc.readMem(0xf8dd), 0x9a);
        // C9 035B
        gbc.setState(0x8686, 0xed20, 0xcfb0, 0x4442, 0xd0aa, 0xee0b, 0x0, 0x0);
        gbc.writeMem(0x8686, { 0xc9 });
        gbc.writeMem(0xed20, { 0xd0, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xed22);
        EXPECT(gbc.pc(), 0xed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8686), 0xc9);
        EXPECT(gbc.readMem(0xed20), 0xd0);
        EXPECT(gbc.readMem(0xed21), 0xe);
        // C9 035C
        gbc.setState(0xb8b3, 0x4424, 0x5460, 0xac5a, 0x3de1, 0x8f58, 0x0, 0x0);
        gbc.writeMem(0x4424, { 0xa, 0x7f });
        gbc.writeMem(0xb8b3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4426);
        EXPECT(gbc.pc(), 0x7f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8b3), 0xc9);
        // C9 035D
        gbc.setState(0xad6, 0x511f, 0x6fe0, 0x913a, 0xbce3, 0xa864, 0x1, 0x0);
        gbc.writeMem(0xad6, { 0xc9 });
        gbc.writeMem(0x511f, { 0xc5, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5121);
        EXPECT(gbc.pc(), 0x57c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 035E
        gbc.setState(0x1daa, 0x6d, 0xa540, 0x4b9b, 0x86a, 0xaea2, 0x0, 0x0);
        gbc.writeMem(0x6d, { 0x13, 0x29 });
        gbc.writeMem(0x1daa, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6f);
        EXPECT(gbc.pc(), 0x2913);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 035F
        gbc.setState(0xd5e2, 0xdb58, 0x40, 0x848f, 0x44fd, 0x623b, 0x0, 0x1);
        gbc.writeMem(0xd5e2, { 0xc9 });
        gbc.writeMem(0xdb58, { 0xea, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdb5a);
        EXPECT(gbc.pc(), 0x17ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e2), 0xc9);
        EXPECT(gbc.readMem(0xdb58), 0xea);
        EXPECT(gbc.readMem(0xdb59), 0x17);
        // C9 0360
        gbc.setState(0x3f2e, 0x2959, 0x8e10, 0x2032, 0xda22, 0xcfc3, 0x1, 0x0);
        gbc.writeMem(0x2959, { 0x99, 0x3b });
        gbc.writeMem(0x3f2e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x295b);
        EXPECT(gbc.pc(), 0x3b99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0361
        gbc.setState(0x18ae, 0x1128, 0x55e0, 0x6270, 0x9c65, 0xabd, 0x0, 0x1);
        gbc.writeMem(0x1128, { 0xcd, 0xc6 });
        gbc.writeMem(0x18ae, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x112a);
        EXPECT(gbc.pc(), 0xc6cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0362
        gbc.setState(0x7ac, 0x400d, 0x6380, 0x56f0, 0xa9d2, 0x1257, 0x0, 0x1);
        gbc.writeMem(0x7ac, { 0xc9 });
        gbc.writeMem(0x400d, { 0xeb, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x400f);
        EXPECT(gbc.pc(), 0x62eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0363
        gbc.setState(0x1d35, 0xcc8e, 0x94c0, 0x9c0, 0x213b, 0xbeed, 0x1, 0x0);
        gbc.writeMem(0x1d35, { 0xc9 });
        gbc.writeMem(0xcc8e, { 0xf, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcc90);
        EXPECT(gbc.pc(), 0xd90f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8e), 0xf);
        EXPECT(gbc.readMem(0xcc8f), 0xd9);
        // C9 0364
        gbc.setState(0x68b2, 0x1c7e, 0xc9f0, 0xbf5f, 0x776b, 0xa283, 0x1, 0x0);
        gbc.writeMem(0x1c7e, { 0xad, 0x80 });
        gbc.writeMem(0x68b2, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1c80);
        EXPECT(gbc.pc(), 0x80ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0365
        gbc.setState(0x6810, 0x8448, 0x60a0, 0xfdea, 0xcfdf, 0x96a6, 0x0, 0x1);
        gbc.writeMem(0x6810, { 0xc9 });
        gbc.writeMem(0x8448, { 0x98, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x844a);
        EXPECT(gbc.pc(), 0x5498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8448), 0x98);
        EXPECT(gbc.readMem(0x8449), 0x54);
        // C9 0366
        gbc.setState(0x5ed9, 0x6024, 0xba10, 0xdc1f, 0x69db, 0x45bb, 0x1, 0x0);
        gbc.writeMem(0x5ed9, { 0xc9 });
        gbc.writeMem(0x6024, { 0x19, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6026);
        EXPECT(gbc.pc(), 0xcc19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 0367
        gbc.setState(0xd206, 0xaa43, 0xc1c0, 0x59ed, 0x32bd, 0x5d0c, 0x1, 0x1);
        gbc.writeMem(0xaa43, { 0x3, 0xe3 });
        gbc.writeMem(0xd206, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xaa45);
        EXPECT(gbc.pc(), 0xe303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa43), 0x3);
        EXPECT(gbc.readMem(0xaa44), 0xe3);
        EXPECT(gbc.readMem(0xd206), 0xc9);
        // C9 0368
        gbc.setState(0x371d, 0x9cfd, 0x3930, 0xa020, 0x35b, 0x90c9, 0x0, 0x1);
        gbc.writeMem(0x371d, { 0xc9 });
        gbc.writeMem(0x9cfd, { 0x63, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9cff);
        EXPECT(gbc.pc(), 0x5e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cfd), 0x63);
        EXPECT(gbc.readMem(0x9cfe), 0x5e);
        // C9 0369
        gbc.setState(0x4547, 0x7771, 0x15c0, 0x4bad, 0x875e, 0xc6fb, 0x0, 0x0);
        gbc.writeMem(0x4547, { 0xc9 });
        gbc.writeMem(0x7771, { 0xae, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7773);
        EXPECT(gbc.pc(), 0xacae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 036A
        gbc.setState(0xa5cd, 0x7918, 0xeca0, 0xe486, 0x54bd, 0xdb59, 0x0, 0x1);
        gbc.writeMem(0x7918, { 0xf8, 0xdc });
        gbc.writeMem(0xa5cd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x791a);
        EXPECT(gbc.pc(), 0xdcf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5cd), 0xc9);
        // C9 036B
        gbc.setState(0x87b6, 0x49ff, 0x9df0, 0xca47, 0xf1b5, 0x222d, 0x1, 0x0);
        gbc.writeMem(0x49ff, { 0xa7, 0x1f });
        gbc.writeMem(0x87b6, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4a01);
        EXPECT(gbc.pc(), 0x1fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87b6), 0xc9);
        // C9 036C
        gbc.setState(0xce3a, 0x86ac, 0x1ff0, 0x20b5, 0x8ef1, 0xda74, 0x1, 0x1);
        gbc.writeMem(0x86ac, { 0x1f, 0xbb });
        gbc.writeMem(0xce3a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x86ae);
        EXPECT(gbc.pc(), 0xbb1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86ac), 0x1f);
        EXPECT(gbc.readMem(0x86ad), 0xbb);
        EXPECT(gbc.readMem(0xce3a), 0xc9);
        // C9 036D
        gbc.setState(0xc704, 0x3d0d, 0x3040, 0x6102, 0x5ab4, 0xee74, 0x1, 0x1);
        gbc.writeMem(0x3d0d, { 0xaf, 0x89 });
        gbc.writeMem(0xc704, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3d0f);
        EXPECT(gbc.pc(), 0x89af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc704), 0xc9);
        // C9 036E
        gbc.setState(0xaf9, 0x1b8e, 0xfba0, 0xa534, 0x8a27, 0xade7, 0x0, 0x1);
        gbc.writeMem(0xaf9, { 0xc9 });
        gbc.writeMem(0x1b8e, { 0x7e, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1b90);
        EXPECT(gbc.pc(), 0x507e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 036F
        gbc.setState(0x7066, 0x3dea, 0x4720, 0x7947, 0xac68, 0x285, 0x0, 0x0);
        gbc.writeMem(0x3dea, { 0xb0, 0xcd });
        gbc.writeMem(0x7066, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3dec);
        EXPECT(gbc.pc(), 0xcdb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0370
        gbc.setState(0x48b3, 0x5f7d, 0x5b80, 0x5985, 0x12de, 0xf70e, 0x0, 0x1);
        gbc.writeMem(0x48b3, { 0xc9 });
        gbc.writeMem(0x5f7d, { 0x9b, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5f7f);
        EXPECT(gbc.pc(), 0xea9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0371
        gbc.setState(0x4099, 0x716a, 0xa7c0, 0xdec1, 0x84a4, 0x157, 0x1, 0x1);
        gbc.writeMem(0x4099, { 0xc9 });
        gbc.writeMem(0x716a, { 0xa4, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x716c);
        EXPECT(gbc.pc(), 0xa2a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0372
        gbc.setState(0xdc37, 0x2537, 0xb570, 0xb3e1, 0xcc19, 0x936e, 0x1, 0x0);
        gbc.writeMem(0x2537, { 0x6a, 0xe8 });
        gbc.writeMem(0xdc37, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2539);
        EXPECT(gbc.pc(), 0xe86a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc37), 0xc9);
        // C9 0373
        gbc.setState(0x60e0, 0x2776, 0x5b0, 0xdb58, 0xeaf4, 0x6538, 0x0, 0x0);
        gbc.writeMem(0x2776, { 0x67, 0xf6 });
        gbc.writeMem(0x60e0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2778);
        EXPECT(gbc.pc(), 0xf667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0374
        gbc.setState(0x39c7, 0xa6cc, 0x9eb0, 0x15f6, 0x66cc, 0x8b22, 0x0, 0x0);
        gbc.writeMem(0x39c7, { 0xc9 });
        gbc.writeMem(0xa6cc, { 0x83, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa6ce);
        EXPECT(gbc.pc(), 0x6883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6cc), 0x83);
        EXPECT(gbc.readMem(0xa6cd), 0x68);
        // C9 0376
        gbc.setState(0xa3cc, 0xcc1a, 0xeaf0, 0x724d, 0x91db, 0xf96c, 0x1, 0x0);
        gbc.writeMem(0xa3cc, { 0xc9 });
        gbc.writeMem(0xcc1a, { 0xa0, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcc1c);
        EXPECT(gbc.pc(), 0xc3a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3cc), 0xc9);
        EXPECT(gbc.readMem(0xcc1a), 0xa0);
        EXPECT(gbc.readMem(0xcc1b), 0xc3);
        // C9 0377
        gbc.setState(0xcdaf, 0xb11f, 0xcf60, 0x3d5f, 0x4dc0, 0xf4dc, 0x0, 0x1);
        gbc.writeMem(0xb11f, { 0xf, 0x6d });
        gbc.writeMem(0xcdaf, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xb121);
        EXPECT(gbc.pc(), 0x6d0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11f), 0xf);
        EXPECT(gbc.readMem(0xb120), 0x6d);
        EXPECT(gbc.readMem(0xcdaf), 0xc9);
        // C9 0378
        gbc.setState(0xdb46, 0xeb47, 0x1da0, 0x68a5, 0xf948, 0xbdbb, 0x0, 0x0);
        gbc.writeMem(0xdb46, { 0xc9 });
        gbc.writeMem(0xeb47, { 0x12, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xeb49);
        EXPECT(gbc.pc(), 0xa012);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb46), 0xc9);
        EXPECT(gbc.readMem(0xeb47), 0x12);
        EXPECT(gbc.readMem(0xeb48), 0xa0);
        // C9 0379
        gbc.setState(0x5b43, 0x9330, 0xb380, 0x3a51, 0x408f, 0xb1fe, 0x1, 0x0);
        gbc.writeMem(0x5b43, { 0xc9 });
        gbc.writeMem(0x9330, { 0x72, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9332);
        EXPECT(gbc.pc(), 0x6372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9330), 0x72);
        EXPECT(gbc.readMem(0x9331), 0x63);
        // C9 037A
        gbc.setState(0x1504, 0x2b47, 0xd150, 0x4fd1, 0x4f13, 0x7f90, 0x0, 0x0);
        gbc.writeMem(0x1504, { 0xc9 });
        gbc.writeMem(0x2b47, { 0x6c, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2b49);
        EXPECT(gbc.pc(), 0x7f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 037B
        gbc.setState(0xba25, 0x45a5, 0x2890, 0x1fd, 0xeb00, 0x9590, 0x0, 0x0);
        gbc.writeMem(0x45a5, { 0x46, 0x66 });
        gbc.writeMem(0xba25, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x45a7);
        EXPECT(gbc.pc(), 0x6646);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba25), 0xc9);
        // C9 037C
        gbc.setState(0x524e, 0x62c7, 0x22e0, 0xce42, 0xd2d9, 0x850f, 0x0, 0x1);
        gbc.writeMem(0x524e, { 0xc9 });
        gbc.writeMem(0x62c7, { 0xf2, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x62c9);
        EXPECT(gbc.pc(), 0xb1f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 037D
        gbc.setState(0x661a, 0x4340, 0x3f60, 0x94a7, 0x23f2, 0x9bc2, 0x0, 0x0);
        gbc.writeMem(0x4340, { 0x91, 0xa8 });
        gbc.writeMem(0x661a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4342);
        EXPECT(gbc.pc(), 0xa891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 037E
        gbc.setState(0xa31, 0x5292, 0x27b0, 0x17e1, 0x2a05, 0x64b5, 0x1, 0x0);
        gbc.writeMem(0xa31, { 0xc9 });
        gbc.writeMem(0x5292, { 0x50, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5294);
        EXPECT(gbc.pc(), 0x4850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 037F
        gbc.setState(0x8239, 0x1882, 0xd530, 0x6c2c, 0x2e0c, 0xf369, 0x0, 0x0);
        gbc.writeMem(0x1882, { 0xcb, 0x3 });
        gbc.writeMem(0x8239, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1884);
        EXPECT(gbc.pc(), 0x3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8239), 0xc9);
        // C9 0380
        gbc.setState(0xca2a, 0x4d40, 0xc4a0, 0x5f9, 0xe259, 0xc7ad, 0x0, 0x1);
        gbc.writeMem(0x4d40, { 0x73, 0x1b });
        gbc.writeMem(0xca2a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4d42);
        EXPECT(gbc.pc(), 0x1b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca2a), 0xc9);
        // C9 0381
        gbc.setState(0x3e3b, 0x805, 0x55f0, 0xda6a, 0x42c6, 0xdf0e, 0x0, 0x0);
        gbc.writeMem(0x805, { 0xf5, 0x3d });
        gbc.writeMem(0x3e3b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x807);
        EXPECT(gbc.pc(), 0x3df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0382
        gbc.setState(0xda9d, 0x2c6, 0x8900, 0xb396, 0x7972, 0x745f, 0x1, 0x1);
        gbc.writeMem(0x2c6, { 0xd5, 0x6b });
        gbc.writeMem(0xda9d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x2c8);
        EXPECT(gbc.pc(), 0x6bd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda9d), 0xc9);
        // C9 0383
        gbc.setState(0x7ceb, 0x5462, 0xa870, 0xa2ba, 0x592b, 0xfa3b, 0x1, 0x1);
        gbc.writeMem(0x5462, { 0x27, 0x33 });
        gbc.writeMem(0x7ceb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5464);
        EXPECT(gbc.pc(), 0x3327);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0384
        gbc.setState(0x1efe, 0x6c1, 0x330, 0x1db6, 0x622d, 0xeb5f, 0x1, 0x0);
        gbc.writeMem(0x6c1, { 0x24, 0xe7 });
        gbc.writeMem(0x1efe, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6c3);
        EXPECT(gbc.pc(), 0xe724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0385
        gbc.setState(0x6193, 0xa047, 0xcde0, 0x6f5e, 0xa7da, 0xe13e, 0x0, 0x0);
        gbc.writeMem(0x6193, { 0xc9 });
        gbc.writeMem(0xa047, { 0x82, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa049);
        EXPECT(gbc.pc(), 0xce82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa047), 0x82);
        EXPECT(gbc.readMem(0xa048), 0xce);
        // C9 0386
        gbc.setState(0x3b91, 0x7c6, 0x5500, 0xb8e6, 0x1025, 0x6c61, 0x0, 0x0);
        gbc.writeMem(0x7c6, { 0xa2, 0xc8 });
        gbc.writeMem(0x3b91, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7c8);
        EXPECT(gbc.pc(), 0xc8a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0387
        gbc.setState(0x551a, 0x2a1d, 0x4670, 0x8fdf, 0x7aa2, 0x8dc5, 0x1, 0x0);
        gbc.writeMem(0x2a1d, { 0x95, 0xb2 });
        gbc.writeMem(0x551a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2a1f);
        EXPECT(gbc.pc(), 0xb295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0388
        gbc.setState(0xe46c, 0xe618, 0x9320, 0xca87, 0xf0e0, 0x3897, 0x0, 0x0);
        gbc.writeMem(0xe46c, { 0xc9 });
        gbc.writeMem(0xe618, { 0x4a, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xe61a);
        EXPECT(gbc.pc(), 0x714a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe46c), 0xc9);
        EXPECT(gbc.readMem(0xe618), 0x4a);
        EXPECT(gbc.readMem(0xe619), 0x71);
        // C9 0389
        gbc.setState(0xc5ae, 0x5db, 0xb670, 0xcd5e, 0xccca, 0x3981, 0x1, 0x1);
        gbc.writeMem(0x5db, { 0x9, 0x42 });
        gbc.writeMem(0xc5ae, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5dd);
        EXPECT(gbc.pc(), 0x4209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ae), 0xc9);
        // C9 038A
        gbc.setState(0xa9fa, 0x746f, 0x8df0, 0x6259, 0x64a6, 0xb2c1, 0x1, 0x0);
        gbc.writeMem(0x746f, { 0xdd, 0x96 });
        gbc.writeMem(0xa9fa, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7471);
        EXPECT(gbc.pc(), 0x96dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9fa), 0xc9);
        // C9 038B
        gbc.setState(0xad2c, 0xd24, 0xdb30, 0xdc2f, 0x1447, 0xf7a5, 0x1, 0x1);
        gbc.writeMem(0xd24, { 0xa6, 0x8c });
        gbc.writeMem(0xad2c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd26);
        EXPECT(gbc.pc(), 0x8ca6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad2c), 0xc9);
        // C9 038C
        gbc.setState(0xa1d0, 0x88ff, 0x9d60, 0x124d, 0x9e06, 0x6c03, 0x1, 0x0);
        gbc.writeMem(0x88ff, { 0x4e, 0x17 });
        gbc.writeMem(0xa1d0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x8901);
        EXPECT(gbc.pc(), 0x174e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ff), 0x4e);
        EXPECT(gbc.readMem(0x8900), 0x17);
        EXPECT(gbc.readMem(0xa1d0), 0xc9);
        // C9 038D
        gbc.setState(0x555c, 0xaa32, 0xd190, 0x80b4, 0xb60b, 0xa187, 0x1, 0x0);
        gbc.writeMem(0x555c, { 0xc9 });
        gbc.writeMem(0xaa32, { 0xee, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xaa34);
        EXPECT(gbc.pc(), 0xe9ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa32), 0xee);
        EXPECT(gbc.readMem(0xaa33), 0xe9);
        // C9 038E
        gbc.setState(0xe834, 0xe77d, 0x9850, 0x9962, 0x8cbd, 0x2e85, 0x0, 0x0);
        gbc.writeMem(0xe77d, { 0x90, 0x46 });
        gbc.writeMem(0xe834, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe77f);
        EXPECT(gbc.pc(), 0x4690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe77d), 0x90);
        EXPECT(gbc.readMem(0xe77e), 0x46);
        EXPECT(gbc.readMem(0xe834), 0xc9);
        // C9 038F
        gbc.setState(0x9a62, 0xac6b, 0x2ac0, 0x1932, 0x9123, 0xc62d, 0x1, 0x0);
        gbc.writeMem(0x9a62, { 0xc9 });
        gbc.writeMem(0xac6b, { 0x71, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xac6d);
        EXPECT(gbc.pc(), 0x8671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a62), 0xc9);
        EXPECT(gbc.readMem(0xac6b), 0x71);
        EXPECT(gbc.readMem(0xac6c), 0x86);
        // C9 0390
        gbc.setState(0x31d2, 0x47b4, 0x7c70, 0x30dd, 0xbace, 0x8930, 0x1, 0x0);
        gbc.writeMem(0x31d2, { 0xc9 });
        gbc.writeMem(0x47b4, { 0x96, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x47b6);
        EXPECT(gbc.pc(), 0x6196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0391
        gbc.setState(0x55ee, 0x5be5, 0x5e60, 0x2355, 0xba80, 0x4ccf, 0x1, 0x0);
        gbc.writeMem(0x55ee, { 0xc9 });
        gbc.writeMem(0x5be5, { 0x5a, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5be7);
        EXPECT(gbc.pc(), 0x9c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0392
        gbc.setState(0x9c14, 0x7008, 0xe5b0, 0x7721, 0xf400, 0x6f2c, 0x1, 0x1);
        gbc.writeMem(0x7008, { 0x79, 0xfe });
        gbc.writeMem(0x9c14, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x700a);
        EXPECT(gbc.pc(), 0xfe79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c14), 0xc9);
        // C9 0393
        gbc.setState(0x4600, 0xbae0, 0xbc80, 0xe0f4, 0x9f4d, 0x84ef, 0x0, 0x1);
        gbc.writeMem(0x4600, { 0xc9 });
        gbc.writeMem(0xbae0, { 0x14, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbae2);
        EXPECT(gbc.pc(), 0xec14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae0), 0x14);
        EXPECT(gbc.readMem(0xbae1), 0xec);
        // C9 0394
        gbc.setState(0x6334, 0x3c0a, 0x9f00, 0x2ae, 0x6584, 0xd935, 0x1, 0x1);
        gbc.writeMem(0x3c0a, { 0xe1, 0xeb });
        gbc.writeMem(0x6334, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3c0c);
        EXPECT(gbc.pc(), 0xebe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 0395
        gbc.setState(0x2745, 0x3bff, 0x3a0, 0xdcc8, 0x32bf, 0xef32, 0x0, 0x1);
        gbc.writeMem(0x2745, { 0xc9 });
        gbc.writeMem(0x3bff, { 0x9b, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3c01);
        EXPECT(gbc.pc(), 0x9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 0396
        gbc.setState(0x49a0, 0x1db3, 0x2ff0, 0x3f12, 0x9f9a, 0x15dc, 0x0, 0x0);
        gbc.writeMem(0x1db3, { 0xee, 0xcc });
        gbc.writeMem(0x49a0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1db5);
        EXPECT(gbc.pc(), 0xccee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0397
        gbc.setState(0x50e, 0x6638, 0x7a70, 0xbb5a, 0x7e78, 0xc6a1, 0x0, 0x1);
        gbc.writeMem(0x50e, { 0xc9 });
        gbc.writeMem(0x6638, { 0x73, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x663a);
        EXPECT(gbc.pc(), 0xcb73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 0398
        gbc.setState(0x9a7b, 0xb2e0, 0x7f50, 0xbb0d, 0x2dcb, 0xb984, 0x1, 0x1);
        gbc.writeMem(0x9a7b, { 0xc9 });
        gbc.writeMem(0xb2e0, { 0xed, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb2e2);
        EXPECT(gbc.pc(), 0xeaed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a7b), 0xc9);
        EXPECT(gbc.readMem(0xb2e0), 0xed);
        EXPECT(gbc.readMem(0xb2e1), 0xea);
        // C9 0399
        gbc.setState(0x58fc, 0xc273, 0xbad0, 0xa755, 0x6944, 0xfc92, 0x1, 0x1);
        gbc.writeMem(0x58fc, { 0xc9 });
        gbc.writeMem(0xc273, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc275);
        EXPECT(gbc.pc(), 0x6038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc273), 0x38);
        EXPECT(gbc.readMem(0xc274), 0x60);
        // C9 039B
        gbc.setState(0x6b40, 0x5245, 0x1c10, 0x396, 0xea73, 0x94eb, 0x0, 0x0);
        gbc.writeMem(0x5245, { 0xf3, 0xd0 });
        gbc.writeMem(0x6b40, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5247);
        EXPECT(gbc.pc(), 0xd0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 039C
        gbc.setState(0x2c5e, 0x14f, 0x34a0, 0xaecd, 0x3b07, 0x3e05, 0x0, 0x0);
        gbc.writeMem(0x14f, { 0x4b, 0x3a });
        gbc.writeMem(0x2c5e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x151);
        EXPECT(gbc.pc(), 0x3a4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 039D
        gbc.setState(0xb99b, 0xa18b, 0x4140, 0x9007, 0x4e4a, 0xe83f, 0x1, 0x0);
        gbc.writeMem(0xa18b, { 0x3a, 0x68 });
        gbc.writeMem(0xb99b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa18d);
        EXPECT(gbc.pc(), 0x683a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa18b), 0x3a);
        EXPECT(gbc.readMem(0xa18c), 0x68);
        EXPECT(gbc.readMem(0xb99b), 0xc9);
        // C9 039E
        gbc.setState(0x5f48, 0x103a, 0xbad0, 0xe69, 0x3c5f, 0x6b6, 0x1, 0x1);
        gbc.writeMem(0x103a, { 0xb2, 0x22 });
        gbc.writeMem(0x5f48, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x103c);
        EXPECT(gbc.pc(), 0x22b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 039F
        gbc.setState(0x48c3, 0x30d6, 0xf700, 0xf89f, 0xe62c, 0x4060, 0x1, 0x0);
        gbc.writeMem(0x30d6, { 0x83, 0xc3 });
        gbc.writeMem(0x48c3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x30d8);
        EXPECT(gbc.pc(), 0xc383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03A0
        gbc.setState(0x8d5e, 0xad8a, 0xfd50, 0x38e9, 0x1e7, 0x8ce2, 0x1, 0x0);
        gbc.writeMem(0x8d5e, { 0xc9 });
        gbc.writeMem(0xad8a, { 0x85, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xad8c);
        EXPECT(gbc.pc(), 0x4985);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5e), 0xc9);
        EXPECT(gbc.readMem(0xad8a), 0x85);
        EXPECT(gbc.readMem(0xad8b), 0x49);
        // C9 03A1
        gbc.setState(0xb604, 0x894, 0xbcc0, 0xc76e, 0xd0a0, 0xd794, 0x0, 0x1);
        gbc.writeMem(0x894, { 0x1f, 0xff });
        gbc.writeMem(0xb604, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x896);
        EXPECT(gbc.pc(), 0xff1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb604), 0xc9);
        // C9 03A2
        gbc.setState(0x9809, 0x7805, 0xba80, 0x8d7a, 0x6d24, 0x69e3, 0x1, 0x0);
        gbc.writeMem(0x7805, { 0xe7, 0xfb });
        gbc.writeMem(0x9809, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7807);
        EXPECT(gbc.pc(), 0xfbe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9809), 0xc9);
        // C9 03A3
        gbc.setState(0x9364, 0x63f1, 0xa070, 0x3513, 0x7345, 0x7a53, 0x0, 0x1);
        gbc.writeMem(0x63f1, { 0xb, 0xde });
        gbc.writeMem(0x9364, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x63f3);
        EXPECT(gbc.pc(), 0xde0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9364), 0xc9);
        // C9 03A4
        gbc.setState(0xb03a, 0xa991, 0xc930, 0xf7eb, 0x1d2b, 0x4e5f, 0x1, 0x1);
        gbc.writeMem(0xa991, { 0x85, 0xeb });
        gbc.writeMem(0xb03a, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa993);
        EXPECT(gbc.pc(), 0xeb85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa991), 0x85);
        EXPECT(gbc.readMem(0xa992), 0xeb);
        EXPECT(gbc.readMem(0xb03a), 0xc9);
        // C9 03A5
        gbc.setState(0xdff4, 0x69ad, 0xf110, 0x6b50, 0xd4b4, 0xef73, 0x0, 0x0);
        gbc.writeMem(0x69ad, { 0x36, 0xc0 });
        gbc.writeMem(0xdff4, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x69af);
        EXPECT(gbc.pc(), 0xc036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdff4), 0xc9);
        // C9 03A6
        gbc.setState(0x4bef, 0xc85f, 0xfe0, 0x6f83, 0x145c, 0x2dbc, 0x0, 0x0);
        gbc.writeMem(0x4bef, { 0xc9 });
        gbc.writeMem(0xc85f, { 0x1a, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc861);
        EXPECT(gbc.pc(), 0x101a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc85f), 0x1a);
        EXPECT(gbc.readMem(0xc860), 0x10);
        // C9 03A7
        gbc.setState(0xe6d5, 0x552e, 0x4340, 0x7d7, 0x71d3, 0xf64, 0x0, 0x0);
        gbc.writeMem(0x552e, { 0xdd, 0xa2 });
        gbc.writeMem(0xe6d5, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5530);
        EXPECT(gbc.pc(), 0xa2dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6d5), 0xc9);
        // C9 03A8
        gbc.setState(0x5b12, 0x4b5a, 0x3f00, 0xefa8, 0x9549, 0x677f, 0x1, 0x1);
        gbc.writeMem(0x4b5a, { 0x8, 0x84 });
        gbc.writeMem(0x5b12, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4b5c);
        EXPECT(gbc.pc(), 0x8408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03A9
        gbc.setState(0x7be8, 0x540d, 0x9e40, 0xbac1, 0x5b7, 0x7807, 0x0, 0x1);
        gbc.writeMem(0x540d, { 0xc4, 0x23 });
        gbc.writeMem(0x7be8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x540f);
        EXPECT(gbc.pc(), 0x23c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03AB
        gbc.setState(0x59eb, 0x8fef, 0xdf0, 0x766e, 0x6640, 0x1074, 0x1, 0x0);
        gbc.writeMem(0x59eb, { 0xc9 });
        gbc.writeMem(0x8fef, { 0xde, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8ff1);
        EXPECT(gbc.pc(), 0x18de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fef), 0xde);
        EXPECT(gbc.readMem(0x8ff0), 0x18);
        // C9 03AC
        gbc.setState(0x3f18, 0x34e4, 0x3720, 0xdee5, 0x874f, 0x5a8a, 0x0, 0x0);
        gbc.writeMem(0x34e4, { 0x53, 0x29 });
        gbc.writeMem(0x3f18, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x34e6);
        EXPECT(gbc.pc(), 0x2953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03AD
        gbc.setState(0xcc6a, 0xe608, 0x3510, 0x8ec7, 0x1472, 0xf544, 0x1, 0x0);
        gbc.writeMem(0xcc6a, { 0xc9 });
        gbc.writeMem(0xe608, { 0x2a, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe60a);
        EXPECT(gbc.pc(), 0xef2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6a), 0xc9);
        EXPECT(gbc.readMem(0xe608), 0x2a);
        EXPECT(gbc.readMem(0xe609), 0xef);
        // C9 03AE
        gbc.setState(0x41c7, 0x712c, 0x8c50, 0xa030, 0x6d8e, 0xc47e, 0x0, 0x1);
        gbc.writeMem(0x41c7, { 0xc9 });
        gbc.writeMem(0x712c, { 0xa6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x712e);
        EXPECT(gbc.pc(), 0x6ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 03AF
        gbc.setState(0xa3cd, 0xe3a8, 0xd200, 0xbd04, 0xeab8, 0xce98, 0x0, 0x1);
        gbc.writeMem(0xa3cd, { 0xc9 });
        gbc.writeMem(0xe3a8, { 0xf2, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe3aa);
        EXPECT(gbc.pc(), 0x4ef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3cd), 0xc9);
        EXPECT(gbc.readMem(0xe3a8), 0xf2);
        EXPECT(gbc.readMem(0xe3a9), 0x4e);
        // C9 03B1
        gbc.setState(0xcf27, 0xf14e, 0x92b0, 0xb2c9, 0xeb5a, 0xc452, 0x1, 0x0);
        gbc.writeMem(0xcf27, { 0xc9 });
        gbc.writeMem(0xf14e, { 0x42, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf150);
        EXPECT(gbc.pc(), 0xd542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf27), 0xc9);
        EXPECT(gbc.readMem(0xf14e), 0x42);
        EXPECT(gbc.readMem(0xf14f), 0xd5);
        // C9 03B2
        gbc.setState(0xca3e, 0xff45, 0x7020, 0x59f4, 0x9878, 0xb96d, 0x0, 0x0);
        gbc.writeMem(0xca3e, { 0xc9 });
        gbc.writeMem(0xff45, { 0xd4, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xff47);
        EXPECT(gbc.pc(), 0xbcd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca3e), 0xc9);
        EXPECT(gbc.readMem(0xff45), 0xd4);
        EXPECT(gbc.readMem(0xff46), 0xbc);
        // C9 03B3
        gbc.setState(0x9aa0, 0x56d7, 0x2ff0, 0xec8a, 0x2e86, 0xdc8b, 0x1, 0x1);
        gbc.writeMem(0x56d7, { 0x94, 0x4a });
        gbc.writeMem(0x9aa0, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x56d9);
        EXPECT(gbc.pc(), 0x4a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9aa0), 0xc9);
        // C9 03B4
        gbc.setState(0x47a2, 0xaa6d, 0x9ab0, 0x6bb4, 0xf2dc, 0x8d3, 0x0, 0x1);
        gbc.writeMem(0x47a2, { 0xc9 });
        gbc.writeMem(0xaa6d, { 0x3a, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaa6f);
        EXPECT(gbc.pc(), 0xbe3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa6d), 0x3a);
        EXPECT(gbc.readMem(0xaa6e), 0xbe);
        // C9 03B5
        gbc.setState(0x429b, 0xf699, 0x78f0, 0x7e15, 0x81c2, 0x6c96, 0x0, 0x0);
        gbc.writeMem(0x429b, { 0xc9 });
        gbc.writeMem(0xf699, { 0x2b, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf69b);
        EXPECT(gbc.pc(), 0xf52b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf699), 0x2b);
        EXPECT(gbc.readMem(0xf69a), 0xf5);
        // C9 03B6
        gbc.setState(0x22ce, 0x9e48, 0xe270, 0x351b, 0x61ec, 0xb96c, 0x1, 0x0);
        gbc.writeMem(0x22ce, { 0xc9 });
        gbc.writeMem(0x9e48, { 0x96, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9e4a);
        EXPECT(gbc.pc(), 0x696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e48), 0x96);
        EXPECT(gbc.readMem(0x9e49), 0x6);
        // C9 03B7
        gbc.setState(0xa679, 0x4b33, 0x6670, 0xd922, 0x658c, 0x456d, 0x1, 0x0);
        gbc.writeMem(0x4b33, { 0xc, 0xb2 });
        gbc.writeMem(0xa679, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4b35);
        EXPECT(gbc.pc(), 0xb20c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa679), 0xc9);
        // C9 03B8
        gbc.setState(0xbafd, 0x2e2d, 0xe270, 0xf69b, 0x2eef, 0xab17, 0x0, 0x0);
        gbc.writeMem(0x2e2d, { 0x8d, 0x12 });
        gbc.writeMem(0xbafd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2e2f);
        EXPECT(gbc.pc(), 0x128d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbafd), 0xc9);
        // C9 03B9
        gbc.setState(0x5b14, 0x7ddf, 0x640, 0x794f, 0x7bb4, 0x38c0, 0x0, 0x1);
        gbc.writeMem(0x5b14, { 0xc9 });
        gbc.writeMem(0x7ddf, { 0x39, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7de1);
        EXPECT(gbc.pc(), 0xd439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03BA
        gbc.setState(0xe29c, 0x266a, 0x6fd0, 0x3baf, 0x4112, 0xe746, 0x1, 0x1);
        gbc.writeMem(0x266a, { 0xdc, 0xb7 });
        gbc.writeMem(0xe29c, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x266c);
        EXPECT(gbc.pc(), 0xb7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe29c), 0xc9);
        // C9 03BB
        gbc.setState(0x8061, 0x6b18, 0xdab0, 0xe340, 0x429a, 0xa8f8, 0x0, 0x1);
        gbc.writeMem(0x6b18, { 0x82, 0xe4 });
        gbc.writeMem(0x8061, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6b1a);
        EXPECT(gbc.pc(), 0xe482);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8061), 0xc9);
        // C9 03BC
        gbc.setState(0x45e9, 0x1a7f, 0x2760, 0x848e, 0x457, 0xa0fe, 0x0, 0x1);
        gbc.writeMem(0x1a7f, { 0x63, 0xd });
        gbc.writeMem(0x45e9, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1a81);
        EXPECT(gbc.pc(), 0xd63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03BD
        gbc.setState(0xee42, 0x7f52, 0x4ec0, 0x25cb, 0xda76, 0xe292, 0x0, 0x0);
        gbc.writeMem(0x7f52, { 0x34, 0x48 });
        gbc.writeMem(0xee42, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x7f54);
        EXPECT(gbc.pc(), 0x4834);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee42), 0xc9);
        // C9 03BE
        gbc.setState(0x1b54, 0x3421, 0x81e0, 0x3382, 0xd0ec, 0x825f, 0x1, 0x0);
        gbc.writeMem(0x1b54, { 0xc9 });
        gbc.writeMem(0x3421, { 0x90, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3423);
        EXPECT(gbc.pc(), 0x9390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03BF
        gbc.setState(0xd251, 0xbefd, 0x40, 0xa01b, 0xf1ad, 0xdc45, 0x1, 0x1);
        gbc.writeMem(0xbefd, { 0x7e, 0xf7 });
        gbc.writeMem(0xd251, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbeff);
        EXPECT(gbc.pc(), 0xf77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefd), 0x7e);
        EXPECT(gbc.readMem(0xbefe), 0xf7);
        EXPECT(gbc.readMem(0xd251), 0xc9);
        // C9 03C1
        gbc.setState(0x3823, 0x7aad, 0x97a0, 0x7a17, 0x5196, 0x47a0, 0x0, 0x0);
        gbc.writeMem(0x3823, { 0xc9 });
        gbc.writeMem(0x7aad, { 0xd1, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7aaf);
        EXPECT(gbc.pc(), 0x80d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03C2
        gbc.setState(0x5ee3, 0x1099, 0xb2b0, 0x4f46, 0x80ef, 0x1ca6, 0x0, 0x1);
        gbc.writeMem(0x1099, { 0xf2, 0x36 });
        gbc.writeMem(0x5ee3, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x109b);
        EXPECT(gbc.pc(), 0x36f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 03C3
        gbc.setState(0xecc1, 0x831b, 0x9960, 0xbee, 0x2b9f, 0x3624, 0x1, 0x1);
        gbc.writeMem(0x831b, { 0x1e, 0xe0 });
        gbc.writeMem(0xecc1, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x831d);
        EXPECT(gbc.pc(), 0xe01e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831b), 0x1e);
        EXPECT(gbc.readMem(0x831c), 0xe0);
        EXPECT(gbc.readMem(0xecc1), 0xc9);
        // C9 03C4
        gbc.setState(0x3418, 0x487f, 0x78e0, 0xfaf4, 0x282b, 0x467f, 0x1, 0x1);
        gbc.writeMem(0x3418, { 0xc9 });
        gbc.writeMem(0x487f, { 0x25, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x4881);
        EXPECT(gbc.pc(), 0x1925);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03C5
        gbc.setState(0x51f7, 0x4e0f, 0xfac0, 0xf558, 0x7fe3, 0xf202, 0x0, 0x0);
        gbc.writeMem(0x4e0f, { 0xa4, 0xee });
        gbc.writeMem(0x51f7, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4e11);
        EXPECT(gbc.pc(), 0xeea4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03C6
        gbc.setState(0x6ddd, 0x47b2, 0x7650, 0x2979, 0xecce, 0xf85f, 0x1, 0x0);
        gbc.writeMem(0x47b2, { 0xfe, 0x61 });
        gbc.writeMem(0x6ddd, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x47b4);
        EXPECT(gbc.pc(), 0x61fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 03C7
        gbc.setState(0x9716, 0xbe19, 0x2510, 0x65e3, 0xd8a2, 0xf994, 0x1, 0x0);
        gbc.writeMem(0x9716, { 0xc9 });
        gbc.writeMem(0xbe19, { 0x35, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xbe1b);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9716), 0xc9);
        EXPECT(gbc.readMem(0xbe19), 0x35);
        EXPECT(gbc.readMem(0xbe1a), 0x6e);
        // C9 03C8
        gbc.setState(0xd37b, 0x4056, 0xa750, 0xfce5, 0x10cb, 0x4fb5, 0x1, 0x1);
        gbc.writeMem(0x4056, { 0xe8, 0x8d });
        gbc.writeMem(0xd37b, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4058);
        EXPECT(gbc.pc(), 0x8de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd37b), 0xc9);
        // C9 03C9
        gbc.setState(0xce3, 0x553a, 0x42f0, 0xa637, 0xd0d2, 0x3e07, 0x1, 0x1);
        gbc.writeMem(0xce3, { 0xc9 });
        gbc.writeMem(0x553a, { 0x71, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x553c);
        EXPECT(gbc.pc(), 0xd71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 03CA
        gbc.setState(0x36e9, 0x7795, 0x1e00, 0xc69b, 0x7479, 0xdc50, 0x0, 0x0);
        gbc.writeMem(0x36e9, { 0xc9 });
        gbc.writeMem(0x7795, { 0x65, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7797);
        EXPECT(gbc.pc(), 0x6d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03CB
        gbc.setState(0x6874, 0x4aaa, 0x24c0, 0x8a87, 0xa196, 0x892f, 0x1, 0x1);
        gbc.writeMem(0x4aaa, { 0x44, 0x93 });
        gbc.writeMem(0x6874, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4aac);
        EXPECT(gbc.pc(), 0x9344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03CC
        gbc.setState(0x267, 0xc4ad, 0x76c0, 0x11c4, 0x4420, 0xee0b, 0x0, 0x0);
        gbc.writeMem(0x267, { 0xc9 });
        gbc.writeMem(0xc4ad, { 0xd3, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xc4af);
        EXPECT(gbc.pc(), 0xc2d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ad), 0xd3);
        EXPECT(gbc.readMem(0xc4ae), 0xc2);
        // C9 03CE
        gbc.setState(0x5aa9, 0xa076, 0xfea0, 0xc9ad, 0x71cf, 0x840e, 0x1, 0x0);
        gbc.writeMem(0x5aa9, { 0xc9 });
        gbc.writeMem(0xa076, { 0x94, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa078);
        EXPECT(gbc.pc(), 0x6f94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa076), 0x94);
        EXPECT(gbc.readMem(0xa077), 0x6f);
        // C9 03CF
        gbc.setState(0x7454, 0xdfa8, 0x5250, 0x8a6d, 0x6ff1, 0x6613, 0x0, 0x1);
        gbc.writeMem(0x7454, { 0xc9 });
        gbc.writeMem(0xdfa8, { 0xaa, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdfaa);
        EXPECT(gbc.pc(), 0xbaaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa8), 0xaa);
        EXPECT(gbc.readMem(0xdfa9), 0xba);
        // C9 03D0
        gbc.setState(0xc93f, 0x7e29, 0x3f90, 0x1087, 0x2d7d, 0x7cea, 0x0, 0x1);
        gbc.writeMem(0x7e29, { 0x35, 0x3c });
        gbc.writeMem(0xc93f, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7e2b);
        EXPECT(gbc.pc(), 0x3c35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93f), 0xc9);
        // C9 03D1
        gbc.setState(0x84be, 0xb704, 0xc510, 0x3a2d, 0xb26d, 0x6ff9, 0x1, 0x0);
        gbc.writeMem(0x84be, { 0xc9 });
        gbc.writeMem(0xb704, { 0xf3, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb706);
        EXPECT(gbc.pc(), 0x2df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84be), 0xc9);
        EXPECT(gbc.readMem(0xb704), 0xf3);
        EXPECT(gbc.readMem(0xb705), 0x2d);
        // C9 03D2
        gbc.setState(0x63fd, 0xe73e, 0xeae0, 0x1e6b, 0xf29d, 0x213, 0x0, 0x0);
        gbc.writeMem(0x63fd, { 0xc9 });
        gbc.writeMem(0xe73e, { 0x6e, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xe740);
        EXPECT(gbc.pc(), 0x766e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe73e), 0x6e);
        EXPECT(gbc.readMem(0xe73f), 0x76);
        // C9 03D3
        gbc.setState(0x5549, 0xb668, 0xf410, 0xa035, 0x8ba1, 0x83e2, 0x0, 0x1);
        gbc.writeMem(0x5549, { 0xc9 });
        gbc.writeMem(0xb668, { 0xfa, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xb66a);
        EXPECT(gbc.pc(), 0x21fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb668), 0xfa);
        EXPECT(gbc.readMem(0xb669), 0x21);
        // C9 03D4
        gbc.setState(0x638e, 0x212e, 0x1ad0, 0x86e4, 0xd790, 0x701d, 0x1, 0x1);
        gbc.writeMem(0x212e, { 0x2f, 0x55 });
        gbc.writeMem(0x638e, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2130);
        EXPECT(gbc.pc(), 0x552f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // C9 03D5
        gbc.setState(0x175f, 0xe491, 0x8280, 0x8788, 0x16de, 0xefe0, 0x0, 0x1);
        gbc.writeMem(0x175f, { 0xc9 });
        gbc.writeMem(0xe491, { 0x58, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe493);
        EXPECT(gbc.pc(), 0x9958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe491), 0x58);
        EXPECT(gbc.readMem(0xe492), 0x99);
        // C9 03D6
        gbc.setState(0x2bd9, 0x99ab, 0xed90, 0x42de, 0xe058, 0x957a, 0x0, 0x1);
        gbc.writeMem(0x2bd9, { 0xc9 });
        gbc.writeMem(0x99ab, { 0xcb, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x99ad);
        EXPECT(gbc.pc(), 0x6dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99ab), 0xcb);
        EXPECT(gbc.readMem(0x99ac), 0x6d);
        // C9 03D7
        gbc.setState(0x7238, 0x6fa7, 0x14a0, 0x6d48, 0xe8fe, 0x8f2f, 0x0, 0x1);
        gbc.writeMem(0x6fa7, { 0xe9, 0x2c });
        gbc.writeMem(0x7238, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6fa9);
        EXPECT(gbc.pc(), 0x2ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03D8
        gbc.setState(0xd023, 0xae0a, 0xbbd0, 0x5c9, 0x6e4d, 0xf5ad, 0x0, 0x1);
        gbc.writeMem(0xae0a, { 0xb9, 0x5c });
        gbc.writeMem(0xd023, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xae0c);
        EXPECT(gbc.pc(), 0x5cb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae0a), 0xb9);
        EXPECT(gbc.readMem(0xae0b), 0x5c);
        EXPECT(gbc.readMem(0xd023), 0xc9);
        // C9 03D9
        gbc.setState(0xc681, 0x6f5c, 0x1540, 0xcc5d, 0xf57c, 0x8cec, 0x1, 0x0);
        gbc.writeMem(0x6f5c, { 0x25, 0xbb });
        gbc.writeMem(0xc681, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6f5e);
        EXPECT(gbc.pc(), 0xbb25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc681), 0xc9);
        // C9 03DA
        gbc.setState(0x352e, 0xf698, 0x5ee0, 0xae4b, 0x9f9, 0xfe5f, 0x1, 0x1);
        gbc.writeMem(0x352e, { 0xc9 });
        gbc.writeMem(0xf698, { 0xa0, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xf69a);
        EXPECT(gbc.pc(), 0x2ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf698), 0xa0);
        EXPECT(gbc.readMem(0xf699), 0x2b);
        // C9 03DB
        gbc.setState(0x55ed, 0x5157, 0xb720, 0x7963, 0x1239, 0xd796, 0x1, 0x0);
        gbc.writeMem(0x5157, { 0x92, 0xb3 });
        gbc.writeMem(0x55ed, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x5159);
        EXPECT(gbc.pc(), 0xb392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03DC
        gbc.setState(0x96cb, 0x8125, 0x7ec0, 0x6bef, 0x4658, 0x9c24, 0x1, 0x0);
        gbc.writeMem(0x8125, { 0xdb, 0xbc });
        gbc.writeMem(0x96cb, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8127);
        EXPECT(gbc.pc(), 0xbcdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8125), 0xdb);
        EXPECT(gbc.readMem(0x8126), 0xbc);
        EXPECT(gbc.readMem(0x96cb), 0xc9);
        // C9 03DD
        gbc.setState(0x9efb, 0xd74b, 0xb320, 0x19ca, 0x968d, 0xe5a1, 0x0, 0x1);
        gbc.writeMem(0x9efb, { 0xc9 });
        gbc.writeMem(0xd74b, { 0xd5, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd74d);
        EXPECT(gbc.pc(), 0xa7d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9efb), 0xc9);
        EXPECT(gbc.readMem(0xd74b), 0xd5);
        EXPECT(gbc.readMem(0xd74c), 0xa7);
        // C9 03DE
        gbc.setState(0x1ebf, 0xc235, 0x94b0, 0x4795, 0xf9b8, 0x25ee, 0x0, 0x0);
        gbc.writeMem(0x1ebf, { 0xc9 });
        gbc.writeMem(0xc235, { 0xa, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc237);
        EXPECT(gbc.pc(), 0xff0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc235), 0xa);
        EXPECT(gbc.readMem(0xc236), 0xff);
        // C9 03DF
        gbc.setState(0x1071, 0x7640, 0x57b0, 0x7e9f, 0xec7c, 0xcefe, 0x0, 0x1);
        gbc.writeMem(0x1071, { 0xc9 });
        gbc.writeMem(0x7640, { 0xb5, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7642);
        EXPECT(gbc.pc(), 0x5fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // C9 03E0
        gbc.setState(0x8fdf, 0x1c44, 0x5450, 0x9d5d, 0x9917, 0x1374, 0x1, 0x1);
        gbc.writeMem(0x1c44, { 0xe6, 0x3d });
        gbc.writeMem(0x8fdf, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1c46);
        EXPECT(gbc.pc(), 0x3de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fdf), 0xc9);
        // C9 03E3
        gbc.setState(0x3a1c, 0x6244, 0x43e0, 0x283, 0x77e, 0x5bda, 0x0, 0x0);
        gbc.writeMem(0x3a1c, { 0xc9 });
        gbc.writeMem(0x6244, { 0x2e, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6246);
        EXPECT(gbc.pc(), 0x302e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03E4
        gbc.setState(0xc40, 0xbe98, 0x1b00, 0x8eb5, 0xfbae, 0x8ba9, 0x0, 0x1);
        gbc.writeMem(0xc40, { 0xc9 });
        gbc.writeMem(0xbe98, { 0x83, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbe9a);
        EXPECT(gbc.pc(), 0x2683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe98), 0x83);
        EXPECT(gbc.readMem(0xbe99), 0x26);
        // C9 03E5
        gbc.setState(0x698d, 0x7e, 0x2380, 0x76b3, 0xb4bd, 0x1ac2, 0x1, 0x0);
        gbc.writeMem(0x7e, { 0xbc, 0x95 });
        gbc.writeMem(0x698d, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x80);
        EXPECT(gbc.pc(), 0x95bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // C9 03E6
        gbc.setState(0x16b6, 0x17eb, 0x9760, 0x7146, 0xb088, 0x49a9, 0x0, 0x1);
        gbc.writeMem(0x16b6, { 0xc9 });
        gbc.writeMem(0x17eb, { 0xbd, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x17ed);
        EXPECT(gbc.pc(), 0xefbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // C9 03E7
        gbc.setState(0x16a8, 0x18fe, 0x90c0, 0x432b, 0xa528, 0xef, 0x1, 0x0);
        gbc.writeMem(0x16a8, { 0xc9 });
        gbc.writeMem(0x18fe, { 0x6b, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1900);
        EXPECT(gbc.pc(), 0x1a6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
