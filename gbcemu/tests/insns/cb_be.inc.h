    TEST(gbcemu, opcode_cb_be) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB BE 0000
        gbc.setState(0x8e1b, 0xb6d1, 0x75a0, 0x296e, 0x5934, 0x359d, 0x0, 0x1);
        gbc.writeMem(0x359d, { 0x6c });
        gbc.writeMem(0x8e1b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xb6d1, gbc.sp());
        EXPECT(0x8e1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e1b));
        EXPECT(0xbe, gbc.readMem(0x8e1c));
        // CB BE 0001
        gbc.setState(0x6f36, 0x1cd1, 0x4b90, 0x4065, 0xf1ce, 0x4f, 0x1, 0x1);
        gbc.writeMem(0x4f, { 0x32 });
        gbc.writeMem(0x6f36, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x1cd1, gbc.sp());
        EXPECT(0x6f38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0003
        gbc.setState(0x438a, 0xec1a, 0xf410, 0x1d25, 0x43ef, 0xa1fe, 0x1, 0x1);
        gbc.writeMem(0x438a, { 0xcb, 0xbe });
        gbc.writeMem(0xa1fe, { 0xf5 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xec1a, gbc.sp());
        EXPECT(0x438c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x75, gbc.readMem(0xa1fe));
        // CB BE 0004
        gbc.setState(0x61d7, 0x20a, 0x14c0, 0x9ec0, 0xfb23, 0xf919, 0x1, 0x0);
        gbc.writeMem(0x61d7, { 0xcb, 0xbe });
        gbc.writeMem(0xf919, { 0xa1 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x20a, gbc.sp());
        EXPECT(0x61d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xf919));
        // CB BE 0006
        gbc.setState(0x9696, 0x8e80, 0x39e0, 0xdfb, 0x4eee, 0xe5da, 0x1, 0x1);
        gbc.writeMem(0x9696, { 0xcb, 0xbe });
        gbc.writeMem(0xe5da, { 0xf });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x8e80, gbc.sp());
        EXPECT(0x9698, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9696));
        EXPECT(0xbe, gbc.readMem(0x9697));
        EXPECT(0xf, gbc.readMem(0xe5da));
        // CB BE 0008
        gbc.setState(0xaa4b, 0x2718, 0x5dc0, 0x37e, 0xc6c2, 0xa46d, 0x0, 0x1);
        gbc.writeMem(0xa46d, { 0xd5 });
        gbc.writeMem(0xaa4b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x2718, gbc.sp());
        EXPECT(0xaa4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x55, gbc.readMem(0xa46d));
        EXPECT(0xcb, gbc.readMem(0xaa4b));
        EXPECT(0xbe, gbc.readMem(0xaa4c));
        // CB BE 0009
        gbc.setState(0x7849, 0xd1b2, 0x5df0, 0xe4d4, 0xad37, 0x9de8, 0x0, 0x1);
        gbc.writeMem(0x7849, { 0xcb, 0xbe });
        gbc.writeMem(0x9de8, { 0x10 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xd1b2, gbc.sp());
        EXPECT(0x784b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0x9de8));
        // CB BE 000A
        gbc.setState(0x8d1c, 0x6859, 0xbd50, 0x106c, 0x663e, 0x90b, 0x1, 0x0);
        gbc.writeMem(0x90b, { 0x76 });
        gbc.writeMem(0x8d1c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x6859, gbc.sp());
        EXPECT(0x8d1e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d1c));
        EXPECT(0xbe, gbc.readMem(0x8d1d));
        // CB BE 000D
        gbc.setState(0x1899, 0x453a, 0x6c40, 0x21d7, 0x58fd, 0xeb72, 0x0, 0x0);
        gbc.writeMem(0x1899, { 0xcb, 0xbe });
        gbc.writeMem(0xeb72, { 0x52 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x453a, gbc.sp());
        EXPECT(0x189b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xeb72));
        // CB BE 0011
        gbc.setState(0x3504, 0x3d78, 0x9580, 0x4ebe, 0xcb62, 0x345b, 0x0, 0x1);
        gbc.writeMem(0x345b, { 0x14 });
        gbc.writeMem(0x3504, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x3d78, gbc.sp());
        EXPECT(0x3506, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0012
        gbc.setState(0xed12, 0x7c55, 0xd180, 0x29a3, 0xbe7f, 0xd8ff, 0x1, 0x0);
        gbc.writeMem(0xd8ff, { 0x5 });
        gbc.writeMem(0xed12, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x7c55, gbc.sp());
        EXPECT(0xed14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xd8ff));
        EXPECT(0xcb, gbc.readMem(0xed12));
        EXPECT(0xbe, gbc.readMem(0xed13));
        // CB BE 0013
        gbc.setState(0x5b05, 0xd57, 0x1e20, 0xdec5, 0x6369, 0x4ea3, 0x0, 0x1);
        gbc.writeMem(0x4ea3, { 0x60 });
        gbc.writeMem(0x5b05, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xd57, gbc.sp());
        EXPECT(0x5b07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0014
        gbc.setState(0xe7af, 0x356f, 0x7920, 0x3502, 0xad10, 0x5630, 0x0, 0x1);
        gbc.writeMem(0x5630, { 0x79 });
        gbc.writeMem(0xe7af, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x356f, gbc.sp());
        EXPECT(0xe7b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7af));
        EXPECT(0xbe, gbc.readMem(0xe7b0));
        // CB BE 0015
        gbc.setState(0xb586, 0xa257, 0x75e0, 0x225a, 0xb9ae, 0xba11, 0x1, 0x0);
        gbc.writeMem(0xb586, { 0xcb, 0xbe });
        gbc.writeMem(0xba11, { 0xae });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xa257, gbc.sp());
        EXPECT(0xb588, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb586));
        EXPECT(0xbe, gbc.readMem(0xb587));
        EXPECT(0x2e, gbc.readMem(0xba11));
        // CB BE 0016
        gbc.setState(0x7ec1, 0xc27a, 0xc260, 0x9e3d, 0x26e7, 0xc367, 0x1, 0x1);
        gbc.writeMem(0x7ec1, { 0xcb, 0xbe });
        gbc.writeMem(0xc367, { 0x85 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xc27a, gbc.sp());
        EXPECT(0x7ec3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xc367));
        // CB BE 0017
        gbc.setState(0xe0a3, 0x616d, 0x5d0, 0xc5f0, 0xb765, 0xccf6, 0x0, 0x0);
        gbc.writeMem(0xccf6, { 0x36 });
        gbc.writeMem(0xe0a3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x616d, gbc.sp());
        EXPECT(0xe0a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xccf6));
        EXPECT(0xcb, gbc.readMem(0xe0a3));
        EXPECT(0xbe, gbc.readMem(0xe0a4));
        // CB BE 001A
        gbc.setState(0xbc34, 0x3899, 0x8830, 0xe109, 0x8838, 0x6e3d, 0x0, 0x0);
        gbc.writeMem(0x6e3d, { 0x5d });
        gbc.writeMem(0xbc34, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x3899, gbc.sp());
        EXPECT(0xbc36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc34));
        EXPECT(0xbe, gbc.readMem(0xbc35));
        // CB BE 001B
        gbc.setState(0xe33e, 0xf647, 0xd3f0, 0xd2ea, 0x723f, 0xde7a, 0x0, 0x0);
        gbc.writeMem(0xde7a, { 0xbe });
        gbc.writeMem(0xe33e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xf647, gbc.sp());
        EXPECT(0xe340, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0xde7a));
        EXPECT(0xcb, gbc.readMem(0xe33e));
        EXPECT(0xbe, gbc.readMem(0xe33f));
        // CB BE 001C
        gbc.setState(0xf5f, 0x3991, 0x6de0, 0xe602, 0xca9a, 0x67cf, 0x0, 0x1);
        gbc.writeMem(0xf5f, { 0xcb, 0xbe });
        gbc.writeMem(0x67cf, { 0x1e });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x3991, gbc.sp());
        EXPECT(0xf61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 001D
        gbc.setState(0xc9cf, 0xc17c, 0xab40, 0xd8c6, 0xaf29, 0x899e, 0x1, 0x1);
        gbc.writeMem(0x899e, { 0x5f });
        gbc.writeMem(0xc9cf, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xc17c, gbc.sp());
        EXPECT(0xc9d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5f, gbc.readMem(0x899e));
        EXPECT(0xcb, gbc.readMem(0xc9cf));
        EXPECT(0xbe, gbc.readMem(0xc9d0));
        // CB BE 001F
        gbc.setState(0xb92c, 0xc3a9, 0x2830, 0x518, 0x97d3, 0xa147, 0x1, 0x0);
        gbc.writeMem(0xa147, { 0xf6 });
        gbc.writeMem(0xb92c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xc3a9, gbc.sp());
        EXPECT(0xb92e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0xa147));
        EXPECT(0xcb, gbc.readMem(0xb92c));
        EXPECT(0xbe, gbc.readMem(0xb92d));
        // CB BE 0020
        gbc.setState(0x222b, 0xf2a5, 0x6500, 0xc16f, 0x7722, 0x95cd, 0x0, 0x0);
        gbc.writeMem(0x222b, { 0xcb, 0xbe });
        gbc.writeMem(0x95cd, { 0xaa });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xf2a5, gbc.sp());
        EXPECT(0x222d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0x95cd));
        // CB BE 0021
        gbc.setState(0xbd9d, 0x3d87, 0x6930, 0x1460, 0x184b, 0xa700, 0x0, 0x1);
        gbc.writeMem(0xa700, { 0xc4 });
        gbc.writeMem(0xbd9d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x3d87, gbc.sp());
        EXPECT(0xbd9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xa700));
        EXPECT(0xcb, gbc.readMem(0xbd9d));
        EXPECT(0xbe, gbc.readMem(0xbd9e));
        // CB BE 0024
        gbc.setState(0x4af3, 0x15f7, 0x4920, 0xc57, 0x6337, 0xa937, 0x1, 0x0);
        gbc.writeMem(0x4af3, { 0xcb, 0xbe });
        gbc.writeMem(0xa937, { 0xc1 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x15f7, gbc.sp());
        EXPECT(0x4af5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0xa937));
        // CB BE 0025
        gbc.setState(0x4609, 0x6d7e, 0x84a0, 0xa062, 0x4cec, 0xa7d6, 0x1, 0x1);
        gbc.writeMem(0x4609, { 0xcb, 0xbe });
        gbc.writeMem(0xa7d6, { 0x65 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x6d7e, gbc.sp());
        EXPECT(0x460b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0xa7d6));
        // CB BE 0026
        gbc.setState(0x725b, 0x24e, 0xe840, 0xf8e2, 0xb9d6, 0xe987, 0x1, 0x1);
        gbc.writeMem(0x725b, { 0xcb, 0xbe });
        gbc.writeMem(0xe987, { 0x5 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x24e, gbc.sp());
        EXPECT(0x725d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xe987));
        // CB BE 0027
        gbc.setState(0x1be, 0x95da, 0x2250, 0x9ad4, 0x5d0f, 0x6d74, 0x1, 0x0);
        gbc.writeMem(0x1be, { 0xcb, 0xbe });
        gbc.writeMem(0x6d74, { 0x19 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x95da, gbc.sp());
        EXPECT(0x1c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0028
        gbc.setState(0xa8c1, 0x28b4, 0x7f10, 0x53bd, 0x8e5a, 0x2671, 0x1, 0x0);
        gbc.writeMem(0x2671, { 0x74 });
        gbc.writeMem(0xa8c1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x28b4, gbc.sp());
        EXPECT(0xa8c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8c1));
        EXPECT(0xbe, gbc.readMem(0xa8c2));
        // CB BE 0029
        gbc.setState(0x3e9f, 0x9804, 0x5290, 0x5a47, 0x8c80, 0xe214, 0x0, 0x1);
        gbc.writeMem(0x3e9f, { 0xcb, 0xbe });
        gbc.writeMem(0xe214, { 0xd0 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x9804, gbc.sp());
        EXPECT(0x3ea1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0xe214));
        // CB BE 002A
        gbc.setState(0x9eb, 0x1084, 0x4b40, 0xcb8c, 0xbf5e, 0xac15, 0x0, 0x0);
        gbc.writeMem(0x9eb, { 0xcb, 0xbe });
        gbc.writeMem(0xac15, { 0xe8 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x1084, gbc.sp());
        EXPECT(0x9ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xac15));
        // CB BE 002B
        gbc.setState(0xc9fe, 0xe77, 0xd2b0, 0x2729, 0x53e2, 0xec1d, 0x0, 0x1);
        gbc.writeMem(0xc9fe, { 0xcb, 0xbe });
        gbc.writeMem(0xec1d, { 0x35 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xe77, gbc.sp());
        EXPECT(0xca00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9fe));
        EXPECT(0xbe, gbc.readMem(0xc9ff));
        EXPECT(0x35, gbc.readMem(0xec1d));
        // CB BE 002C
        gbc.setState(0x3c58, 0x8117, 0x2db0, 0xac59, 0x7602, 0x88be, 0x0, 0x1);
        gbc.writeMem(0x3c58, { 0xcb, 0xbe });
        gbc.writeMem(0x88be, { 0xd7 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8117, gbc.sp());
        EXPECT(0x3c5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0x88be));
        // CB BE 002D
        gbc.setState(0x228c, 0x69d5, 0x690, 0x37bb, 0xce47, 0x466f, 0x0, 0x0);
        gbc.writeMem(0x228c, { 0xcb, 0xbe });
        gbc.writeMem(0x466f, { 0x70 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x69d5, gbc.sp());
        EXPECT(0x228e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 002E
        gbc.setState(0xa4e1, 0x42c5, 0xa160, 0x3da2, 0xf7ac, 0xfbf7, 0x0, 0x1);
        gbc.writeMem(0xa4e1, { 0xcb, 0xbe });
        gbc.writeMem(0xfbf7, { 0x7d });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x42c5, gbc.sp());
        EXPECT(0xa4e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4e1));
        EXPECT(0xbe, gbc.readMem(0xa4e2));
        EXPECT(0x7d, gbc.readMem(0xfbf7));
        // CB BE 0030
        gbc.setState(0xef29, 0x3315, 0xda80, 0xe688, 0xf48d, 0x559e, 0x0, 0x1);
        gbc.writeMem(0x559e, { 0x43 });
        gbc.writeMem(0xef29, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x3315, gbc.sp());
        EXPECT(0xef2b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef29));
        EXPECT(0xbe, gbc.readMem(0xef2a));
        // CB BE 0032
        gbc.setState(0x7443, 0x8907, 0x6b40, 0x910e, 0xa874, 0x79b1, 0x0, 0x0);
        gbc.writeMem(0x7443, { 0xcb, 0xbe });
        gbc.writeMem(0x79b1, { 0x37 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x8907, gbc.sp());
        EXPECT(0x7445, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0033
        gbc.setState(0xc11c, 0x6c5c, 0x5510, 0xfd, 0xb370, 0xf45e, 0x1, 0x0);
        gbc.writeMem(0xc11c, { 0xcb, 0xbe });
        gbc.writeMem(0xf45e, { 0x87 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x6c5c, gbc.sp());
        EXPECT(0xc11e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc11c));
        EXPECT(0xbe, gbc.readMem(0xc11d));
        EXPECT(0x7, gbc.readMem(0xf45e));
        // CB BE 0034
        gbc.setState(0x30b3, 0x6e3a, 0xa050, 0x4991, 0x82aa, 0x4cf1, 0x0, 0x0);
        gbc.writeMem(0x30b3, { 0xcb, 0xbe });
        gbc.writeMem(0x4cf1, { 0x4c });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x6e3a, gbc.sp());
        EXPECT(0x30b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0036
        gbc.setState(0x6b47, 0x166d, 0xbcb0, 0x2bfa, 0xe96f, 0xb66, 0x0, 0x1);
        gbc.writeMem(0xb66, { 0x13 });
        gbc.writeMem(0x6b47, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x166d, gbc.sp());
        EXPECT(0x6b49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0038
        gbc.setState(0x1858, 0x1c4, 0x6690, 0x2282, 0x947f, 0x915c, 0x1, 0x0);
        gbc.writeMem(0x1858, { 0xcb, 0xbe });
        gbc.writeMem(0x915c, { 0x84 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x1c4, gbc.sp());
        EXPECT(0x185a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0x915c));
        // CB BE 0039
        gbc.setState(0x7511, 0xaf26, 0x89a0, 0x4ce3, 0x7e1f, 0x9451, 0x1, 0x0);
        gbc.writeMem(0x7511, { 0xcb, 0xbe });
        gbc.writeMem(0x9451, { 0x5e });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xaf26, gbc.sp());
        EXPECT(0x7513, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0x9451));
        // CB BE 003A
        gbc.setState(0x8ab3, 0x3c9b, 0xf9a0, 0x4e81, 0x11c1, 0x47be, 0x1, 0x0);
        gbc.writeMem(0x47be, { 0x2d });
        gbc.writeMem(0x8ab3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x3c9b, gbc.sp());
        EXPECT(0x8ab5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ab3));
        EXPECT(0xbe, gbc.readMem(0x8ab4));
        // CB BE 003B
        gbc.setState(0x7316, 0x6632, 0x2c0, 0x658, 0x74cd, 0x40e4, 0x1, 0x0);
        gbc.writeMem(0x40e4, { 0x39 });
        gbc.writeMem(0x7316, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x6632, gbc.sp());
        EXPECT(0x7318, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 003C
        gbc.setState(0xb2cf, 0xdf51, 0x9e70, 0x2373, 0x73ba, 0xfc79, 0x1, 0x1);
        gbc.writeMem(0xb2cf, { 0xcb, 0xbe });
        gbc.writeMem(0xfc79, { 0x54 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xdf51, gbc.sp());
        EXPECT(0xb2d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb2cf));
        EXPECT(0xbe, gbc.readMem(0xb2d0));
        EXPECT(0x54, gbc.readMem(0xfc79));
        // CB BE 003D
        gbc.setState(0x13a4, 0x90b4, 0x5510, 0x5a7, 0x7e8, 0xaf80, 0x1, 0x0);
        gbc.writeMem(0x13a4, { 0xcb, 0xbe });
        gbc.writeMem(0xaf80, { 0x8d });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x90b4, gbc.sp());
        EXPECT(0x13a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xaf80));
        // CB BE 0040
        gbc.setState(0x33ef, 0xe041, 0xc390, 0x9503, 0x8b92, 0xd948, 0x0, 0x0);
        gbc.writeMem(0x33ef, { 0xcb, 0xbe });
        gbc.writeMem(0xd948, { 0xb });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xe041, gbc.sp());
        EXPECT(0x33f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xd948));
        // CB BE 0042
        gbc.setState(0x93d2, 0x9f05, 0x66e0, 0xbb27, 0xe13, 0x7cca, 0x0, 0x1);
        gbc.writeMem(0x7cca, { 0x1a });
        gbc.writeMem(0x93d2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x9f05, gbc.sp());
        EXPECT(0x93d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93d2));
        EXPECT(0xbe, gbc.readMem(0x93d3));
        // CB BE 0044
        gbc.setState(0x6df4, 0x27a8, 0x50c0, 0x198c, 0xced9, 0x56a6, 0x0, 0x0);
        gbc.writeMem(0x56a6, { 0x41 });
        gbc.writeMem(0x6df4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x27a8, gbc.sp());
        EXPECT(0x6df6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0045
        gbc.setState(0xc758, 0x6f6b, 0x8140, 0xbe9, 0x13de, 0x53db, 0x1, 0x1);
        gbc.writeMem(0x53db, { 0x19 });
        gbc.writeMem(0xc758, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x6f6b, gbc.sp());
        EXPECT(0xc75a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc758));
        EXPECT(0xbe, gbc.readMem(0xc759));
        // CB BE 0046
        gbc.setState(0x97ba, 0x48aa, 0xc9a0, 0x877, 0x2d29, 0x9549, 0x1, 0x1);
        gbc.writeMem(0x9549, { 0xe3 });
        gbc.writeMem(0x97ba, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x48aa, gbc.sp());
        EXPECT(0x97bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0x9549));
        EXPECT(0xcb, gbc.readMem(0x97ba));
        EXPECT(0xbe, gbc.readMem(0x97bb));
        // CB BE 0047
        gbc.setState(0xbdb0, 0x5cf4, 0xbcd0, 0x3ff4, 0x15cd, 0x6fbc, 0x0, 0x1);
        gbc.writeMem(0x6fbc, { 0x68 });
        gbc.writeMem(0xbdb0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x5cf4, gbc.sp());
        EXPECT(0xbdb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdb0));
        EXPECT(0xbe, gbc.readMem(0xbdb1));
        // CB BE 0048
        gbc.setState(0x20a4, 0xd8c6, 0x25b0, 0xc630, 0x5ffe, 0x8a5f, 0x1, 0x1);
        gbc.writeMem(0x20a4, { 0xcb, 0xbe });
        gbc.writeMem(0x8a5f, { 0x32 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xd8c6, gbc.sp());
        EXPECT(0x20a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0x8a5f));
        // CB BE 0049
        gbc.setState(0x4bc1, 0x6a94, 0x8c0, 0xcc21, 0xb689, 0xc58d, 0x1, 0x1);
        gbc.writeMem(0x4bc1, { 0xcb, 0xbe });
        gbc.writeMem(0xc58d, { 0x21 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x6a94, gbc.sp());
        EXPECT(0x4bc3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xc58d));
        // CB BE 004B
        gbc.setState(0xc707, 0x828, 0xea90, 0xbb2a, 0x810, 0x46df, 0x0, 0x1);
        gbc.writeMem(0x46df, { 0x39 });
        gbc.writeMem(0xc707, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x828, gbc.sp());
        EXPECT(0xc709, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc707));
        EXPECT(0xbe, gbc.readMem(0xc708));
        // CB BE 004C
        gbc.setState(0xca50, 0x155d, 0xc560, 0xc1ac, 0xf479, 0x9cd9, 0x0, 0x1);
        gbc.writeMem(0x9cd9, { 0x24 });
        gbc.writeMem(0xca50, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x155d, gbc.sp());
        EXPECT(0xca52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x9cd9));
        EXPECT(0xcb, gbc.readMem(0xca50));
        EXPECT(0xbe, gbc.readMem(0xca51));
        // CB BE 004D
        gbc.setState(0x78fe, 0xbd47, 0xd600, 0x4ac5, 0xb1c0, 0xda47, 0x0, 0x0);
        gbc.writeMem(0x78fe, { 0xcb, 0xbe });
        gbc.writeMem(0xda47, { 0xe9 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xbd47, gbc.sp());
        EXPECT(0x7900, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xda47));
        // CB BE 004E
        gbc.setState(0xe1fd, 0x2854, 0xb6f0, 0x865, 0x3b68, 0xe2f4, 0x1, 0x1);
        gbc.writeMem(0xe1fd, { 0xcb, 0xbe });
        gbc.writeMem(0xe2f4, { 0xa4 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x2854, gbc.sp());
        EXPECT(0xe1ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe1fd));
        EXPECT(0xbe, gbc.readMem(0xe1fe));
        EXPECT(0x24, gbc.readMem(0xe2f4));
        // CB BE 004F
        gbc.setState(0xa686, 0x6191, 0x1350, 0xb9eb, 0xeba4, 0x5c19, 0x1, 0x1);
        gbc.writeMem(0x5c19, { 0x62 });
        gbc.writeMem(0xa686, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x6191, gbc.sp());
        EXPECT(0xa688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa686));
        EXPECT(0xbe, gbc.readMem(0xa687));
        // CB BE 0054
        gbc.setState(0x7462, 0xbaf4, 0xab70, 0xf6c9, 0xca78, 0xc891, 0x0, 0x0);
        gbc.writeMem(0x7462, { 0xcb, 0xbe });
        gbc.writeMem(0xc891, { 0xac });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xbaf4, gbc.sp());
        EXPECT(0x7464, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xc891));
        // CB BE 0055
        gbc.setState(0x7493, 0x3224, 0xf400, 0xb8e5, 0x8f4b, 0x869c, 0x0, 0x0);
        gbc.writeMem(0x7493, { 0xcb, 0xbe });
        gbc.writeMem(0x869c, { 0x48 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x3224, gbc.sp());
        EXPECT(0x7495, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x48, gbc.readMem(0x869c));
        // CB BE 0056
        gbc.setState(0xaa3a, 0xa992, 0x59a0, 0x6490, 0xdf71, 0xab56, 0x1, 0x0);
        gbc.writeMem(0xaa3a, { 0xcb, 0xbe });
        gbc.writeMem(0xab56, { 0xae });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xa992, gbc.sp());
        EXPECT(0xaa3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa3a));
        EXPECT(0xbe, gbc.readMem(0xaa3b));
        EXPECT(0x2e, gbc.readMem(0xab56));
        // CB BE 0057
        gbc.setState(0x526b, 0xa9ee, 0x1bf0, 0xd506, 0xea99, 0x1b1a, 0x0, 0x1);
        gbc.writeMem(0x1b1a, { 0x6a });
        gbc.writeMem(0x526b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xa9ee, gbc.sp());
        EXPECT(0x526d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0059
        gbc.setState(0xc615, 0x57c9, 0x7530, 0x7f0, 0x7267, 0x7739, 0x0, 0x0);
        gbc.writeMem(0x7739, { 0x3 });
        gbc.writeMem(0xc615, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x57c9, gbc.sp());
        EXPECT(0xc617, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc615));
        EXPECT(0xbe, gbc.readMem(0xc616));
        // CB BE 005A
        gbc.setState(0x2c4, 0xd042, 0x75e0, 0x6f78, 0xab5, 0xc465, 0x0, 0x0);
        gbc.writeMem(0x2c4, { 0xcb, 0xbe });
        gbc.writeMem(0xc465, { 0x28 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xd042, gbc.sp());
        EXPECT(0x2c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0xc465));
        // CB BE 005D
        gbc.setState(0x7d5f, 0x4969, 0x8f60, 0x2a2b, 0xc7f9, 0xb53c, 0x0, 0x0);
        gbc.writeMem(0x7d5f, { 0xcb, 0xbe });
        gbc.writeMem(0xb53c, { 0xb });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x4969, gbc.sp());
        EXPECT(0x7d61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xb53c));
        // CB BE 005E
        gbc.setState(0xc17c, 0x41ce, 0xe630, 0xc461, 0x974c, 0xe45d, 0x0, 0x1);
        gbc.writeMem(0xc17c, { 0xcb, 0xbe });
        gbc.writeMem(0xe45d, { 0x29 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x41ce, gbc.sp());
        EXPECT(0xc17e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc17c));
        EXPECT(0xbe, gbc.readMem(0xc17d));
        EXPECT(0x29, gbc.readMem(0xe45d));
        // CB BE 005F
        gbc.setState(0xe61a, 0x8121, 0xc060, 0x1547, 0x32a5, 0x9f3e, 0x1, 0x0);
        gbc.writeMem(0x9f3e, { 0x90 });
        gbc.writeMem(0xe61a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x8121, gbc.sp());
        EXPECT(0xe61c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0x9f3e));
        EXPECT(0xcb, gbc.readMem(0xe61a));
        EXPECT(0xbe, gbc.readMem(0xe61b));
        // CB BE 0060
        gbc.setState(0xccae, 0xf017, 0xb300, 0x788d, 0x3a16, 0x6521, 0x0, 0x1);
        gbc.writeMem(0x6521, { 0x7 });
        gbc.writeMem(0xccae, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf017, gbc.sp());
        EXPECT(0xccb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccae));
        EXPECT(0xbe, gbc.readMem(0xccaf));
        // CB BE 0063
        gbc.setState(0x1e6f, 0x7a3a, 0xa140, 0xe81d, 0x950c, 0x393, 0x0, 0x0);
        gbc.writeMem(0x393, { 0x5d });
        gbc.writeMem(0x1e6f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x7a3a, gbc.sp());
        EXPECT(0x1e71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0064
        gbc.setState(0xb523, 0x413e, 0x4410, 0xcac7, 0x5131, 0xd54a, 0x0, 0x0);
        gbc.writeMem(0xb523, { 0xcb, 0xbe });
        gbc.writeMem(0xd54a, { 0xf6 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x413e, gbc.sp());
        EXPECT(0xb525, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb523));
        EXPECT(0xbe, gbc.readMem(0xb524));
        EXPECT(0x76, gbc.readMem(0xd54a));
        // CB BE 0065
        gbc.setState(0xe0f7, 0x83f8, 0x6720, 0xb702, 0x56e8, 0xf63a, 0x1, 0x0);
        gbc.writeMem(0xe0f7, { 0xcb, 0xbe });
        gbc.writeMem(0xf63a, { 0xff });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x83f8, gbc.sp());
        EXPECT(0xe0f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe0f7));
        EXPECT(0xbe, gbc.readMem(0xe0f8));
        EXPECT(0x7f, gbc.readMem(0xf63a));
        // CB BE 0067
        gbc.setState(0x5040, 0x6a39, 0x21f0, 0xd88f, 0xb620, 0x19ee, 0x0, 0x0);
        gbc.writeMem(0x19ee, { 0x0 });
        gbc.writeMem(0x5040, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x6a39, gbc.sp());
        EXPECT(0x5042, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0068
        gbc.setState(0xda69, 0xee22, 0xdaf0, 0x8afe, 0x38be, 0x806e, 0x0, 0x1);
        gbc.writeMem(0x806e, { 0xe0 });
        gbc.writeMem(0xda69, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xee22, gbc.sp());
        EXPECT(0xda6b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0x806e));
        EXPECT(0xcb, gbc.readMem(0xda69));
        EXPECT(0xbe, gbc.readMem(0xda6a));
        // CB BE 0069
        gbc.setState(0x1617, 0xce34, 0x81b0, 0x63db, 0xe079, 0x29e3, 0x1, 0x1);
        gbc.writeMem(0x1617, { 0xcb, 0xbe });
        gbc.writeMem(0x29e3, { 0x8 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xce34, gbc.sp());
        EXPECT(0x1619, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 006A
        gbc.setState(0x5493, 0x60f6, 0xb640, 0xa98e, 0x2117, 0xed9d, 0x0, 0x1);
        gbc.writeMem(0x5493, { 0xcb, 0xbe });
        gbc.writeMem(0xed9d, { 0x49 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x60f6, gbc.sp());
        EXPECT(0x5495, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x49, gbc.readMem(0xed9d));
        // CB BE 006B
        gbc.setState(0x3271, 0xbb99, 0xf600, 0x182a, 0xe50a, 0x85ea, 0x1, 0x0);
        gbc.writeMem(0x3271, { 0xcb, 0xbe });
        gbc.writeMem(0x85ea, { 0xe0 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xbb99, gbc.sp());
        EXPECT(0x3273, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0x85ea));
        // CB BE 006C
        gbc.setState(0x5fe1, 0xc6c, 0xb00, 0x9f87, 0xac1a, 0xf1fa, 0x0, 0x1);
        gbc.writeMem(0x5fe1, { 0xcb, 0xbe });
        gbc.writeMem(0xf1fa, { 0x37 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xc6c, gbc.sp());
        EXPECT(0x5fe3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0xf1fa));
        // CB BE 006E
        gbc.setState(0x4966, 0xdb9b, 0xe260, 0xa045, 0x5f18, 0x178f, 0x0, 0x1);
        gbc.writeMem(0x178f, { 0x68 });
        gbc.writeMem(0x4966, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xdb9b, gbc.sp());
        EXPECT(0x4968, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 006F
        gbc.setState(0x324f, 0xccc2, 0x4cb0, 0x9093, 0x4cb9, 0x2029, 0x1, 0x0);
        gbc.writeMem(0x2029, { 0x67 });
        gbc.writeMem(0x324f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xccc2, gbc.sp());
        EXPECT(0x3251, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0070
        gbc.setState(0xd21a, 0xcbfc, 0x3680, 0xbb19, 0xe55a, 0xdfa5, 0x1, 0x1);
        gbc.writeMem(0xd21a, { 0xcb, 0xbe });
        gbc.writeMem(0xdfa5, { 0x8f });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xcbfc, gbc.sp());
        EXPECT(0xd21c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd21a));
        EXPECT(0xbe, gbc.readMem(0xd21b));
        EXPECT(0xf, gbc.readMem(0xdfa5));
        // CB BE 0072
        gbc.setState(0xd80e, 0x78b0, 0x1300, 0x62c4, 0xde3e, 0x8457, 0x1, 0x1);
        gbc.writeMem(0x8457, { 0xf });
        gbc.writeMem(0xd80e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x78b0, gbc.sp());
        EXPECT(0xd810, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x8457));
        EXPECT(0xcb, gbc.readMem(0xd80e));
        EXPECT(0xbe, gbc.readMem(0xd80f));
        // CB BE 0074
        gbc.setState(0xe20a, 0x91bf, 0xbff0, 0x92ae, 0x71b, 0xb584, 0x0, 0x1);
        gbc.writeMem(0xb584, { 0x36 });
        gbc.writeMem(0xe20a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x91bf, gbc.sp());
        EXPECT(0xe20c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xb584));
        EXPECT(0xcb, gbc.readMem(0xe20a));
        EXPECT(0xbe, gbc.readMem(0xe20b));
        // CB BE 0075
        gbc.setState(0x62b1, 0x6cf7, 0xe090, 0x945, 0xf177, 0xa35b, 0x1, 0x1);
        gbc.writeMem(0x62b1, { 0xcb, 0xbe });
        gbc.writeMem(0xa35b, { 0xd2 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x6cf7, gbc.sp());
        EXPECT(0x62b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xa35b));
        // CB BE 0076
        gbc.setState(0x68a, 0x1751, 0x44d0, 0x42de, 0x9ade, 0x9ee2, 0x1, 0x1);
        gbc.writeMem(0x68a, { 0xcb, 0xbe });
        gbc.writeMem(0x9ee2, { 0x9c });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x1751, gbc.sp());
        EXPECT(0x68c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0x9ee2));
        // CB BE 0077
        gbc.setState(0xec03, 0x6d71, 0x9ad0, 0x455, 0x440e, 0xeb8, 0x1, 0x0);
        gbc.writeMem(0xeb8, { 0x3a });
        gbc.writeMem(0xec03, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x6d71, gbc.sp());
        EXPECT(0xec05, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec03));
        EXPECT(0xbe, gbc.readMem(0xec04));
        // CB BE 0078
        gbc.setState(0x6dbd, 0x6dcf, 0xc8f0, 0x46f7, 0x7f1c, 0xcf32, 0x0, 0x0);
        gbc.writeMem(0x6dbd, { 0xcb, 0xbe });
        gbc.writeMem(0xcf32, { 0x1 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x6dcf, gbc.sp());
        EXPECT(0x6dbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xcf32));
        // CB BE 0079
        gbc.setState(0x84cb, 0x7e2a, 0x640, 0x287c, 0x9101, 0x8f13, 0x0, 0x0);
        gbc.writeMem(0x84cb, { 0xcb, 0xbe });
        gbc.writeMem(0x8f13, { 0x30 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x7e2a, gbc.sp());
        EXPECT(0x84cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84cb));
        EXPECT(0xbe, gbc.readMem(0x84cc));
        EXPECT(0x30, gbc.readMem(0x8f13));
        // CB BE 007A
        gbc.setState(0xb717, 0x129d, 0x32c0, 0xc9a2, 0x7376, 0xe27f, 0x0, 0x0);
        gbc.writeMem(0xb717, { 0xcb, 0xbe });
        gbc.writeMem(0xe27f, { 0x46 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x129d, gbc.sp());
        EXPECT(0xb719, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb717));
        EXPECT(0xbe, gbc.readMem(0xb718));
        EXPECT(0x46, gbc.readMem(0xe27f));
        // CB BE 007B
        gbc.setState(0x2e5a, 0x340f, 0xc310, 0xb245, 0xffe0, 0x6c22, 0x1, 0x0);
        gbc.writeMem(0x2e5a, { 0xcb, 0xbe });
        gbc.writeMem(0x6c22, { 0x58 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x340f, gbc.sp());
        EXPECT(0x2e5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 007C
        gbc.setState(0xaeb3, 0xe9a9, 0x2400, 0x905b, 0x944e, 0xdd07, 0x1, 0x0);
        gbc.writeMem(0xaeb3, { 0xcb, 0xbe });
        gbc.writeMem(0xdd07, { 0xe7 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe9a9, gbc.sp());
        EXPECT(0xaeb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaeb3));
        EXPECT(0xbe, gbc.readMem(0xaeb4));
        EXPECT(0x67, gbc.readMem(0xdd07));
        // CB BE 007D
        gbc.setState(0x8e31, 0xd07, 0x7b20, 0xfb0c, 0x4d77, 0xf88e, 0x0, 0x1);
        gbc.writeMem(0x8e31, { 0xcb, 0xbe });
        gbc.writeMem(0xf88e, { 0x1d });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xd07, gbc.sp());
        EXPECT(0x8e33, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e31));
        EXPECT(0xbe, gbc.readMem(0x8e32));
        EXPECT(0x1d, gbc.readMem(0xf88e));
        // CB BE 007F
        gbc.setState(0x9044, 0x60b1, 0x1f90, 0xaafc, 0x9f08, 0x7052, 0x0, 0x1);
        gbc.writeMem(0x7052, { 0x17 });
        gbc.writeMem(0x9044, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x60b1, gbc.sp());
        EXPECT(0x9046, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9044));
        EXPECT(0xbe, gbc.readMem(0x9045));
        // CB BE 0081
        gbc.setState(0xa967, 0xdb, 0x56e0, 0x7cf2, 0xc4b1, 0xc8fe, 0x0, 0x0);
        gbc.writeMem(0xa967, { 0xcb, 0xbe });
        gbc.writeMem(0xc8fe, { 0xa });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xdb, gbc.sp());
        EXPECT(0xa969, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa967));
        EXPECT(0xbe, gbc.readMem(0xa968));
        EXPECT(0xa, gbc.readMem(0xc8fe));
        // CB BE 0082
        gbc.setState(0x5f15, 0x7b3e, 0x11d0, 0x286f, 0x753e, 0xd5d5, 0x0, 0x0);
        gbc.writeMem(0x5f15, { 0xcb, 0xbe });
        gbc.writeMem(0xd5d5, { 0x70 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x7b3e, gbc.sp());
        EXPECT(0x5f17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xd5d5));
        // CB BE 0083
        gbc.setState(0x328a, 0x789c, 0x8810, 0x6f23, 0xcaef, 0x23, 0x0, 0x0);
        gbc.writeMem(0x23, { 0x47 });
        gbc.writeMem(0x328a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x789c, gbc.sp());
        EXPECT(0x328c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0085
        gbc.setState(0x9747, 0x4413, 0x310, 0xc97f, 0x4dd6, 0xf733, 0x0, 0x1);
        gbc.writeMem(0x9747, { 0xcb, 0xbe });
        gbc.writeMem(0xf733, { 0x6 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x4413, gbc.sp());
        EXPECT(0x9749, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9747));
        EXPECT(0xbe, gbc.readMem(0x9748));
        EXPECT(0x6, gbc.readMem(0xf733));
        // CB BE 0087
        gbc.setState(0xc1df, 0x2e7, 0x780, 0xc6a2, 0x83f2, 0xbdc5, 0x0, 0x0);
        gbc.writeMem(0xbdc5, { 0x59 });
        gbc.writeMem(0xc1df, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x2e7, gbc.sp());
        EXPECT(0xc1e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0xbdc5));
        EXPECT(0xcb, gbc.readMem(0xc1df));
        EXPECT(0xbe, gbc.readMem(0xc1e0));
        // CB BE 0088
        gbc.setState(0x4142, 0x9f84, 0xcaf0, 0x6f82, 0x2591, 0x966c, 0x0, 0x1);
        gbc.writeMem(0x4142, { 0xcb, 0xbe });
        gbc.writeMem(0x966c, { 0xca });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x9f84, gbc.sp());
        EXPECT(0x4144, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0x966c));
        // CB BE 0089
        gbc.setState(0x40c9, 0x3b1b, 0xe520, 0x7046, 0x7605, 0xc854, 0x0, 0x1);
        gbc.writeMem(0x40c9, { 0xcb, 0xbe });
        gbc.writeMem(0xc854, { 0xad });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x3b1b, gbc.sp());
        EXPECT(0x40cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0xc854));
        // CB BE 008C
        gbc.setState(0x51a9, 0xc3a7, 0xeac0, 0xed91, 0xb70c, 0x5fb2, 0x1, 0x0);
        gbc.writeMem(0x51a9, { 0xcb, 0xbe });
        gbc.writeMem(0x5fb2, { 0x77 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xc3a7, gbc.sp());
        EXPECT(0x51ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 008D
        gbc.setState(0x75d2, 0x192a, 0xd1a0, 0x5df8, 0xff21, 0x1dab, 0x1, 0x1);
        gbc.writeMem(0x1dab, { 0x7d });
        gbc.writeMem(0x75d2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x192a, gbc.sp());
        EXPECT(0x75d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 008E
        gbc.setState(0x16c0, 0x840e, 0x16f0, 0x49a3, 0xe07e, 0xae1e, 0x0, 0x1);
        gbc.writeMem(0x16c0, { 0xcb, 0xbe });
        gbc.writeMem(0xae1e, { 0x1f });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x840e, gbc.sp());
        EXPECT(0x16c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0xae1e));
        // CB BE 0090
        gbc.setState(0x485f, 0xb0a6, 0x570, 0xc53b, 0xb509, 0x63a6, 0x1, 0x0);
        gbc.writeMem(0x485f, { 0xcb, 0xbe });
        gbc.writeMem(0x63a6, { 0x26 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xb0a6, gbc.sp());
        EXPECT(0x4861, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0092
        gbc.setState(0xce4f, 0x97ec, 0x5140, 0x6335, 0x329, 0xee34, 0x1, 0x0);
        gbc.writeMem(0xce4f, { 0xcb, 0xbe });
        gbc.writeMem(0xee34, { 0x5c });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x97ec, gbc.sp());
        EXPECT(0xce51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce4f));
        EXPECT(0xbe, gbc.readMem(0xce50));
        EXPECT(0x5c, gbc.readMem(0xee34));
        // CB BE 0093
        gbc.setState(0x2e7, 0x91a0, 0x9020, 0xe81f, 0xab48, 0xf2f4, 0x1, 0x1);
        gbc.writeMem(0x2e7, { 0xcb, 0xbe });
        gbc.writeMem(0xf2f4, { 0x44 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x91a0, gbc.sp());
        EXPECT(0x2e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xf2f4));
        // CB BE 0096
        gbc.setState(0x5028, 0x8e2e, 0x6690, 0xe42a, 0x4a, 0x1853, 0x1, 0x0);
        gbc.writeMem(0x1853, { 0xe });
        gbc.writeMem(0x5028, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8e2e, gbc.sp());
        EXPECT(0x502a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0097
        gbc.setState(0x1c0b, 0xfa96, 0xd40, 0x43fc, 0xd34b, 0x8c7e, 0x0, 0x0);
        gbc.writeMem(0x1c0b, { 0xcb, 0xbe });
        gbc.writeMem(0x8c7e, { 0xaf });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xfa96, gbc.sp());
        EXPECT(0x1c0d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0x8c7e));
        // CB BE 0098
        gbc.setState(0xe285, 0xe953, 0x21a0, 0x3194, 0xd0b, 0x85c9, 0x0, 0x0);
        gbc.writeMem(0x85c9, { 0x57 });
        gbc.writeMem(0xe285, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xe953, gbc.sp());
        EXPECT(0xe287, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0x85c9));
        EXPECT(0xcb, gbc.readMem(0xe285));
        EXPECT(0xbe, gbc.readMem(0xe286));
        // CB BE 0099
        gbc.setState(0x114d, 0x7a80, 0x8ef0, 0x76b7, 0xe9f4, 0xa1f6, 0x0, 0x0);
        gbc.writeMem(0x114d, { 0xcb, 0xbe });
        gbc.writeMem(0xa1f6, { 0xef });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x7a80, gbc.sp());
        EXPECT(0x114f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xa1f6));
        // CB BE 009A
        gbc.setState(0x805a, 0x5082, 0x3b40, 0xa565, 0xdc93, 0xcd83, 0x0, 0x1);
        gbc.writeMem(0x805a, { 0xcb, 0xbe });
        gbc.writeMem(0xcd83, { 0x9a });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x5082, gbc.sp());
        EXPECT(0x805c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x805a));
        EXPECT(0xbe, gbc.readMem(0x805b));
        EXPECT(0x1a, gbc.readMem(0xcd83));
        // CB BE 009B
        gbc.setState(0x5a94, 0xed2, 0x2120, 0x4ded, 0x8ddf, 0xcc45, 0x1, 0x0);
        gbc.writeMem(0x5a94, { 0xcb, 0xbe });
        gbc.writeMem(0xcc45, { 0xa6 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xed2, gbc.sp());
        EXPECT(0x5a96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xcc45));
        // CB BE 009C
        gbc.setState(0xc1e5, 0x6526, 0x2090, 0xaf64, 0x5335, 0x2fb4, 0x0, 0x0);
        gbc.writeMem(0x2fb4, { 0x5f });
        gbc.writeMem(0xc1e5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x6526, gbc.sp());
        EXPECT(0xc1e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1e5));
        EXPECT(0xbe, gbc.readMem(0xc1e6));
        // CB BE 009F
        gbc.setState(0x9165, 0x14f, 0xa280, 0xd01a, 0xf772, 0x36ce, 0x1, 0x1);
        gbc.writeMem(0x36ce, { 0x33 });
        gbc.writeMem(0x9165, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x14f, gbc.sp());
        EXPECT(0x9167, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9165));
        EXPECT(0xbe, gbc.readMem(0x9166));
        // CB BE 00A1
        gbc.setState(0xc96, 0x7c34, 0x7e10, 0xdbe4, 0xab9c, 0x7b41, 0x1, 0x0);
        gbc.writeMem(0xc96, { 0xcb, 0xbe });
        gbc.writeMem(0x7b41, { 0x1d });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x7c34, gbc.sp());
        EXPECT(0xc98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00A2
        gbc.setState(0x630d, 0x160d, 0x71d0, 0xe330, 0x2f78, 0xbbb1, 0x1, 0x0);
        gbc.writeMem(0x630d, { 0xcb, 0xbe });
        gbc.writeMem(0xbbb1, { 0xb2 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x160d, gbc.sp());
        EXPECT(0x630f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0xbbb1));
        // CB BE 00A3
        gbc.setState(0x5a3b, 0xbb39, 0x470, 0xb952, 0x920c, 0x5488, 0x1, 0x0);
        gbc.writeMem(0x5488, { 0x19 });
        gbc.writeMem(0x5a3b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xbb39, gbc.sp());
        EXPECT(0x5a3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00A4
        gbc.setState(0x5b5f, 0x16f3, 0xc310, 0xe422, 0x38ff, 0xc975, 0x0, 0x1);
        gbc.writeMem(0x5b5f, { 0xcb, 0xbe });
        gbc.writeMem(0xc975, { 0xbe });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x16f3, gbc.sp());
        EXPECT(0x5b61, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0xc975));
        // CB BE 00A5
        gbc.setState(0x56ec, 0x2b5d, 0x7850, 0xdb74, 0xe0d, 0x9371, 0x1, 0x1);
        gbc.writeMem(0x56ec, { 0xcb, 0xbe });
        gbc.writeMem(0x9371, { 0xc3 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x2b5d, gbc.sp());
        EXPECT(0x56ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0x9371));
        // CB BE 00A7
        gbc.setState(0x71d3, 0xd7c2, 0x7330, 0x81f3, 0xb757, 0x4557, 0x0, 0x0);
        gbc.writeMem(0x4557, { 0x3 });
        gbc.writeMem(0x71d3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xd7c2, gbc.sp());
        EXPECT(0x71d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00A8
        gbc.setState(0x3195, 0xd7ac, 0xff10, 0x2341, 0x963b, 0x2a54, 0x0, 0x1);
        gbc.writeMem(0x2a54, { 0x35 });
        gbc.writeMem(0x3195, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xd7ac, gbc.sp());
        EXPECT(0x3197, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00A9
        gbc.setState(0x1c82, 0x5d03, 0xd1d0, 0xba0, 0x85ab, 0xd3e6, 0x1, 0x1);
        gbc.writeMem(0x1c82, { 0xcb, 0xbe });
        gbc.writeMem(0xd3e6, { 0xd0 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5d03, gbc.sp());
        EXPECT(0x1c84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0xd3e6));
        // CB BE 00AA
        gbc.setState(0x627a, 0x864a, 0x1890, 0xe1af, 0x9758, 0xf393, 0x0, 0x0);
        gbc.writeMem(0x627a, { 0xcb, 0xbe });
        gbc.writeMem(0xf393, { 0x13 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x864a, gbc.sp());
        EXPECT(0x627c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0xf393));
        // CB BE 00AB
        gbc.setState(0x8ac0, 0x131d, 0x5410, 0x8080, 0x5684, 0xf823, 0x1, 0x1);
        gbc.writeMem(0x8ac0, { 0xcb, 0xbe });
        gbc.writeMem(0xf823, { 0x49 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x131d, gbc.sp());
        EXPECT(0x8ac2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ac0));
        EXPECT(0xbe, gbc.readMem(0x8ac1));
        EXPECT(0x49, gbc.readMem(0xf823));
        // CB BE 00AD
        gbc.setState(0x39ef, 0x1fa6, 0x59a0, 0xc648, 0x6bae, 0x29f6, 0x0, 0x1);
        gbc.writeMem(0x29f6, { 0x6c });
        gbc.writeMem(0x39ef, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x1fa6, gbc.sp());
        EXPECT(0x39f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 00AF
        gbc.setState(0x27be, 0xc177, 0xc9f0, 0xd409, 0x78f9, 0x2361, 0x0, 0x1);
        gbc.writeMem(0x2361, { 0x47 });
        gbc.writeMem(0x27be, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xc177, gbc.sp());
        EXPECT(0x27c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00B0
        gbc.setState(0x2701, 0x28fa, 0x1630, 0x8101, 0x259d, 0xec5f, 0x1, 0x0);
        gbc.writeMem(0x2701, { 0xcb, 0xbe });
        gbc.writeMem(0xec5f, { 0x6a });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x28fa, gbc.sp());
        EXPECT(0x2703, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xec5f));
        // CB BE 00B1
        gbc.setState(0xaa33, 0xe7a0, 0x960, 0x6abc, 0xfa0a, 0x19eb, 0x0, 0x1);
        gbc.writeMem(0x19eb, { 0x3c });
        gbc.writeMem(0xaa33, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xe7a0, gbc.sp());
        EXPECT(0xaa35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa33));
        EXPECT(0xbe, gbc.readMem(0xaa34));
        // CB BE 00B2
        gbc.setState(0x74b3, 0xad6e, 0xfa00, 0xb602, 0xaa1f, 0xa089, 0x0, 0x1);
        gbc.writeMem(0x74b3, { 0xcb, 0xbe });
        gbc.writeMem(0xa089, { 0x84 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xad6e, gbc.sp());
        EXPECT(0x74b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xa089));
        // CB BE 00B3
        gbc.setState(0x8d28, 0x6a4e, 0x7260, 0xb919, 0x1046, 0xe0c8, 0x1, 0x0);
        gbc.writeMem(0x8d28, { 0xcb, 0xbe });
        gbc.writeMem(0xe0c8, { 0xe4 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x6a4e, gbc.sp());
        EXPECT(0x8d2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d28));
        EXPECT(0xbe, gbc.readMem(0x8d29));
        EXPECT(0x64, gbc.readMem(0xe0c8));
        // CB BE 00B7
        gbc.setState(0x9c86, 0x2c7e, 0xbc20, 0x85c2, 0x8d8c, 0xd1df, 0x0, 0x0);
        gbc.writeMem(0x9c86, { 0xcb, 0xbe });
        gbc.writeMem(0xd1df, { 0xfb });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x2c7e, gbc.sp());
        EXPECT(0x9c88, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c86));
        EXPECT(0xbe, gbc.readMem(0x9c87));
        EXPECT(0x7b, gbc.readMem(0xd1df));
        // CB BE 00B8
        gbc.setState(0x8572, 0x3d62, 0x9cf0, 0xbac8, 0xfcf4, 0xf6e6, 0x1, 0x0);
        gbc.writeMem(0x8572, { 0xcb, 0xbe });
        gbc.writeMem(0xf6e6, { 0xd8 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3d62, gbc.sp());
        EXPECT(0x8574, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8572));
        EXPECT(0xbe, gbc.readMem(0x8573));
        EXPECT(0x58, gbc.readMem(0xf6e6));
        // CB BE 00B9
        gbc.setState(0x7058, 0x8b2d, 0xc9a0, 0x8e31, 0xb3aa, 0xa147, 0x0, 0x1);
        gbc.writeMem(0x7058, { 0xcb, 0xbe });
        gbc.writeMem(0xa147, { 0xf6 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x8b2d, gbc.sp());
        EXPECT(0x705a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0xa147));
        // CB BE 00BA
        gbc.setState(0x90c3, 0xdb44, 0xd9d0, 0x210, 0xaf98, 0x92a, 0x0, 0x1);
        gbc.writeMem(0x92a, { 0x1a });
        gbc.writeMem(0x90c3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xdb44, gbc.sp());
        EXPECT(0x90c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90c3));
        EXPECT(0xbe, gbc.readMem(0x90c4));
        // CB BE 00BB
        gbc.setState(0x70c6, 0xdefe, 0xbb50, 0x8f16, 0x7a2e, 0x35, 0x0, 0x0);
        gbc.writeMem(0x35, { 0x1 });
        gbc.writeMem(0x70c6, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xdefe, gbc.sp());
        EXPECT(0x70c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00BC
        gbc.setState(0xac71, 0x76a, 0xa130, 0x8a51, 0xb2b3, 0x2d3e, 0x1, 0x0);
        gbc.writeMem(0x2d3e, { 0x21 });
        gbc.writeMem(0xac71, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x76a, gbc.sp());
        EXPECT(0xac73, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac71));
        EXPECT(0xbe, gbc.readMem(0xac72));
        // CB BE 00BE
        gbc.setState(0xa2e3, 0x404f, 0x3060, 0xe8a4, 0x58d4, 0x9012, 0x1, 0x1);
        gbc.writeMem(0x9012, { 0xee });
        gbc.writeMem(0xa2e3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x404f, gbc.sp());
        EXPECT(0xa2e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0x9012));
        EXPECT(0xcb, gbc.readMem(0xa2e3));
        EXPECT(0xbe, gbc.readMem(0xa2e4));
        // CB BE 00BF
        gbc.setState(0xefa4, 0xee99, 0x8b50, 0xd5a6, 0xfa3, 0xb21c, 0x1, 0x0);
        gbc.writeMem(0xb21c, { 0x43 });
        gbc.writeMem(0xefa4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xee99, gbc.sp());
        EXPECT(0xefa6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xb21c));
        EXPECT(0xcb, gbc.readMem(0xefa4));
        EXPECT(0xbe, gbc.readMem(0xefa5));
        // CB BE 00C0
        gbc.setState(0x50cc, 0xb88a, 0x5cf0, 0xd2dd, 0x316e, 0x39a0, 0x1, 0x1);
        gbc.writeMem(0x39a0, { 0x2f });
        gbc.writeMem(0x50cc, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xb88a, gbc.sp());
        EXPECT(0x50ce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00C1
        gbc.setState(0xcd05, 0x6ba3, 0x99f0, 0x598a, 0x25ca, 0x5e7d, 0x0, 0x0);
        gbc.writeMem(0x5e7d, { 0x76 });
        gbc.writeMem(0xcd05, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x6ba3, gbc.sp());
        EXPECT(0xcd07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd05));
        EXPECT(0xbe, gbc.readMem(0xcd06));
        // CB BE 00C2
        gbc.setState(0x45db, 0xfa4c, 0x3be0, 0xa17d, 0x5949, 0xe944, 0x1, 0x1);
        gbc.writeMem(0x45db, { 0xcb, 0xbe });
        gbc.writeMem(0xe944, { 0x19 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xfa4c, gbc.sp());
        EXPECT(0x45dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x19, gbc.readMem(0xe944));
        // CB BE 00C3
        gbc.setState(0xdc3a, 0x9775, 0x3ef0, 0xde, 0xbba7, 0xbc2, 0x1, 0x0);
        gbc.writeMem(0xbc2, { 0x2a });
        gbc.writeMem(0xdc3a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x9775, gbc.sp());
        EXPECT(0xdc3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc3a));
        EXPECT(0xbe, gbc.readMem(0xdc3b));
        // CB BE 00C5
        gbc.setState(0x4efb, 0x521a, 0xf10, 0xf511, 0xd9d8, 0x4f24, 0x0, 0x1);
        gbc.writeMem(0x4efb, { 0xcb, 0xbe });
        gbc.writeMem(0x4f24, { 0x2 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x521a, gbc.sp());
        EXPECT(0x4efd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00C6
        gbc.setState(0x7938, 0x82f6, 0xdf70, 0x9208, 0x4e70, 0x4a82, 0x1, 0x1);
        gbc.writeMem(0x4a82, { 0x14 });
        gbc.writeMem(0x7938, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x82f6, gbc.sp());
        EXPECT(0x793a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00C7
        gbc.setState(0xe3ec, 0x7504, 0x8b10, 0xb500, 0xcb39, 0x39d7, 0x0, 0x1);
        gbc.writeMem(0x39d7, { 0x4c });
        gbc.writeMem(0xe3ec, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x7504, gbc.sp());
        EXPECT(0xe3ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe3ec));
        EXPECT(0xbe, gbc.readMem(0xe3ed));
        // CB BE 00CA
        gbc.setState(0xca28, 0xb3a4, 0x2170, 0x330b, 0x76c0, 0xd6f1, 0x1, 0x1);
        gbc.writeMem(0xca28, { 0xcb, 0xbe });
        gbc.writeMem(0xd6f1, { 0x9 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xb3a4, gbc.sp());
        EXPECT(0xca2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca28));
        EXPECT(0xbe, gbc.readMem(0xca29));
        EXPECT(0x9, gbc.readMem(0xd6f1));
        // CB BE 00CB
        gbc.setState(0x8687, 0x96f9, 0xae0, 0xef87, 0x364d, 0xacc6, 0x1, 0x0);
        gbc.writeMem(0x8687, { 0xcb, 0xbe });
        gbc.writeMem(0xacc6, { 0x1c });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x96f9, gbc.sp());
        EXPECT(0x8689, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8687));
        EXPECT(0xbe, gbc.readMem(0x8688));
        EXPECT(0x1c, gbc.readMem(0xacc6));
        // CB BE 00CC
        gbc.setState(0x7885, 0xc46b, 0x3960, 0x84ca, 0x9673, 0xdc59, 0x0, 0x0);
        gbc.writeMem(0x7885, { 0xcb, 0xbe });
        gbc.writeMem(0xdc59, { 0x46 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xc46b, gbc.sp());
        EXPECT(0x7887, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0xdc59));
        // CB BE 00CE
        gbc.setState(0x4528, 0x1ad7, 0xed20, 0x7443, 0xc248, 0xde84, 0x1, 0x1);
        gbc.writeMem(0x4528, { 0xcb, 0xbe });
        gbc.writeMem(0xde84, { 0xb6 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x1ad7, gbc.sp());
        EXPECT(0x452a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xde84));
        // CB BE 00CF
        gbc.setState(0xe453, 0xf587, 0x5dc0, 0x5625, 0x24a3, 0xfbc3, 0x1, 0x1);
        gbc.writeMem(0xe453, { 0xcb, 0xbe });
        gbc.writeMem(0xfbc3, { 0xfd });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf587, gbc.sp());
        EXPECT(0xe455, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe453));
        EXPECT(0xbe, gbc.readMem(0xe454));
        EXPECT(0x7d, gbc.readMem(0xfbc3));
        // CB BE 00D0
        gbc.setState(0x179, 0xb15a, 0x3f0, 0x6ee0, 0x47ae, 0xe981, 0x1, 0x1);
        gbc.writeMem(0x179, { 0xcb, 0xbe });
        gbc.writeMem(0xe981, { 0xcf });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xb15a, gbc.sp());
        EXPECT(0x17b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4f, gbc.readMem(0xe981));
        // CB BE 00D2
        gbc.setState(0x5ed5, 0x1f0f, 0x9d30, 0x9008, 0xdc6c, 0x847d, 0x1, 0x0);
        gbc.writeMem(0x5ed5, { 0xcb, 0xbe });
        gbc.writeMem(0x847d, { 0x32 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x1f0f, gbc.sp());
        EXPECT(0x5ed7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0x847d));
        // CB BE 00D3
        gbc.setState(0x7f30, 0xbf6e, 0x4650, 0x5f63, 0x265b, 0xe1b0, 0x1, 0x0);
        gbc.writeMem(0x7f30, { 0xcb, 0xbe });
        gbc.writeMem(0xe1b0, { 0x91 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xbf6e, gbc.sp());
        EXPECT(0x7f32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xe1b0));
        // CB BE 00D5
        gbc.setState(0x1612, 0x5e6b, 0x61f0, 0x17eb, 0xb479, 0xdbf, 0x1, 0x1);
        gbc.writeMem(0xdbf, { 0x3b });
        gbc.writeMem(0x1612, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x5e6b, gbc.sp());
        EXPECT(0x1614, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00D6
        gbc.setState(0x5305, 0x1561, 0xb8a0, 0xdfaf, 0x5ea, 0x24df, 0x0, 0x1);
        gbc.writeMem(0x24df, { 0x38 });
        gbc.writeMem(0x5305, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x1561, gbc.sp());
        EXPECT(0x5307, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 00D7
        gbc.setState(0x83b9, 0xaeac, 0x5cb0, 0xad, 0x81e4, 0xb88c, 0x0, 0x1);
        gbc.writeMem(0x83b9, { 0xcb, 0xbe });
        gbc.writeMem(0xb88c, { 0x74 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xaeac, gbc.sp());
        EXPECT(0x83bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x83b9));
        EXPECT(0xbe, gbc.readMem(0x83ba));
        EXPECT(0x74, gbc.readMem(0xb88c));
        // CB BE 00D8
        gbc.setState(0x52bc, 0xd157, 0xd370, 0xf792, 0x5d02, 0x680e, 0x1, 0x1);
        gbc.writeMem(0x52bc, { 0xcb, 0xbe });
        gbc.writeMem(0x680e, { 0x1f });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xd157, gbc.sp());
        EXPECT(0x52be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00DC
        gbc.setState(0x44c1, 0xabc5, 0xaff0, 0x5275, 0xf4, 0xbb50, 0x0, 0x1);
        gbc.writeMem(0x44c1, { 0xcb, 0xbe });
        gbc.writeMem(0xbb50, { 0x69 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xabc5, gbc.sp());
        EXPECT(0x44c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xbb50));
        // CB BE 00DD
        gbc.setState(0xec6, 0xe5d8, 0x9020, 0x16de, 0x68dc, 0xe225, 0x1, 0x1);
        gbc.writeMem(0xec6, { 0xcb, 0xbe });
        gbc.writeMem(0xe225, { 0x1e });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe5d8, gbc.sp());
        EXPECT(0xec8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1e, gbc.readMem(0xe225));
        // CB BE 00DE
        gbc.setState(0x49c3, 0x59c0, 0x7760, 0xfb72, 0xb77e, 0x92e8, 0x1, 0x1);
        gbc.writeMem(0x49c3, { 0xcb, 0xbe });
        gbc.writeMem(0x92e8, { 0xf0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x59c0, gbc.sp());
        EXPECT(0x49c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0x92e8));
        // CB BE 00DF
        gbc.setState(0x8882, 0xb293, 0x32d0, 0x8975, 0x2032, 0x1e56, 0x0, 0x0);
        gbc.writeMem(0x1e56, { 0x24 });
        gbc.writeMem(0x8882, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xb293, gbc.sp());
        EXPECT(0x8884, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8882));
        EXPECT(0xbe, gbc.readMem(0x8883));
        // CB BE 00E0
        gbc.setState(0xdde6, 0x6429, 0xc800, 0xdf18, 0x8797, 0xfb2, 0x0, 0x1);
        gbc.writeMem(0xfb2, { 0x52 });
        gbc.writeMem(0xdde6, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x6429, gbc.sp());
        EXPECT(0xdde8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdde6));
        EXPECT(0xbe, gbc.readMem(0xdde7));
        // CB BE 00E1
        gbc.setState(0x60f3, 0x7fc2, 0xf230, 0x97bb, 0xe9ab, 0x7141, 0x1, 0x1);
        gbc.writeMem(0x60f3, { 0xcb, 0xbe });
        gbc.writeMem(0x7141, { 0x7a });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x7fc2, gbc.sp());
        EXPECT(0x60f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00E2
        gbc.setState(0x8af3, 0x3ac0, 0xcc60, 0x4f92, 0x63d8, 0x1477, 0x1, 0x0);
        gbc.writeMem(0x1477, { 0x62 });
        gbc.writeMem(0x8af3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x3ac0, gbc.sp());
        EXPECT(0x8af5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8af3));
        EXPECT(0xbe, gbc.readMem(0x8af4));
        // CB BE 00E3
        gbc.setState(0x9b04, 0x2083, 0x2c80, 0x619b, 0x75ed, 0x6a15, 0x1, 0x0);
        gbc.writeMem(0x6a15, { 0x6 });
        gbc.writeMem(0x9b04, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x2083, gbc.sp());
        EXPECT(0x9b06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b04));
        EXPECT(0xbe, gbc.readMem(0x9b05));
        // CB BE 00E4
        gbc.setState(0xba9f, 0xcda6, 0xa5d0, 0x782d, 0x770c, 0xfab, 0x1, 0x0);
        gbc.writeMem(0xfab, { 0x24 });
        gbc.writeMem(0xba9f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xcda6, gbc.sp());
        EXPECT(0xbaa1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba9f));
        EXPECT(0xbe, gbc.readMem(0xbaa0));
        // CB BE 00E5
        gbc.setState(0x4230, 0xa3cd, 0x7710, 0xdac4, 0xf1c2, 0xf026, 0x1, 0x1);
        gbc.writeMem(0x4230, { 0xcb, 0xbe });
        gbc.writeMem(0xf026, { 0xea });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xa3cd, gbc.sp());
        EXPECT(0x4232, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xf026));
        // CB BE 00E6
        gbc.setState(0xa13a, 0x43a4, 0xe110, 0xe3f3, 0x8602, 0x8c1f, 0x0, 0x0);
        gbc.writeMem(0x8c1f, { 0x30 });
        gbc.writeMem(0xa13a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x43a4, gbc.sp());
        EXPECT(0xa13c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0x8c1f));
        EXPECT(0xcb, gbc.readMem(0xa13a));
        EXPECT(0xbe, gbc.readMem(0xa13b));
        // CB BE 00E7
        gbc.setState(0x46c4, 0x1f63, 0xafb0, 0xa266, 0xe096, 0xdc9d, 0x1, 0x1);
        gbc.writeMem(0x46c4, { 0xcb, 0xbe });
        gbc.writeMem(0xdc9d, { 0xfd });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x1f63, gbc.sp());
        EXPECT(0x46c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0xdc9d));
        // CB BE 00E8
        gbc.setState(0x5454, 0x9502, 0x9850, 0x845c, 0x10a6, 0xbefc, 0x0, 0x0);
        gbc.writeMem(0x5454, { 0xcb, 0xbe });
        gbc.writeMem(0xbefc, { 0x8 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x9502, gbc.sp());
        EXPECT(0x5456, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0xbefc));
        // CB BE 00E9
        gbc.setState(0x861b, 0xe6d9, 0x8b20, 0x7823, 0xf290, 0x8502, 0x1, 0x0);
        gbc.writeMem(0x8502, { 0xa8 });
        gbc.writeMem(0x861b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xe6d9, gbc.sp());
        EXPECT(0x861d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0x8502));
        EXPECT(0xcb, gbc.readMem(0x861b));
        EXPECT(0xbe, gbc.readMem(0x861c));
        // CB BE 00EA
        gbc.setState(0x66cf, 0xfed7, 0x8ca0, 0xa34c, 0xbb02, 0xaf78, 0x0, 0x0);
        gbc.writeMem(0x66cf, { 0xcb, 0xbe });
        gbc.writeMem(0xaf78, { 0x63 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0xfed7, gbc.sp());
        EXPECT(0x66d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xaf78));
        // CB BE 00EB
        gbc.setState(0xab2e, 0x8c5f, 0xd3d0, 0xd1bd, 0x1a60, 0xcf95, 0x0, 0x0);
        gbc.writeMem(0xab2e, { 0xcb, 0xbe });
        gbc.writeMem(0xcf95, { 0xf6 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x8c5f, gbc.sp());
        EXPECT(0xab30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab2e));
        EXPECT(0xbe, gbc.readMem(0xab2f));
        EXPECT(0x76, gbc.readMem(0xcf95));
        // CB BE 00EC
        gbc.setState(0xbb2a, 0xe4e9, 0x44f0, 0x98d3, 0x5337, 0xdbc, 0x1, 0x0);
        gbc.writeMem(0xdbc, { 0x75 });
        gbc.writeMem(0xbb2a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xe4e9, gbc.sp());
        EXPECT(0xbb2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb2a));
        EXPECT(0xbe, gbc.readMem(0xbb2b));
        // CB BE 00EF
        gbc.setState(0x84e9, 0xf602, 0x4200, 0x27d4, 0x94f6, 0x9fc3, 0x0, 0x1);
        gbc.writeMem(0x84e9, { 0xcb, 0xbe });
        gbc.writeMem(0x9fc3, { 0xa8 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf602, gbc.sp());
        EXPECT(0x84eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84e9));
        EXPECT(0xbe, gbc.readMem(0x84ea));
        EXPECT(0x28, gbc.readMem(0x9fc3));
        // CB BE 00F0
        gbc.setState(0x5006, 0x3dc7, 0x4650, 0xe4e, 0xdb65, 0xea8c, 0x0, 0x0);
        gbc.writeMem(0x5006, { 0xcb, 0xbe });
        gbc.writeMem(0xea8c, { 0xd2 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x3dc7, gbc.sp());
        EXPECT(0x5008, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xea8c));
        // CB BE 00F2
        gbc.setState(0x85ba, 0x431, 0xa7c0, 0x313d, 0x3094, 0x4af1, 0x1, 0x1);
        gbc.writeMem(0x4af1, { 0x51 });
        gbc.writeMem(0x85ba, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x431, gbc.sp());
        EXPECT(0x85bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85ba));
        EXPECT(0xbe, gbc.readMem(0x85bb));
        // CB BE 00F3
        gbc.setState(0x5648, 0xe3ec, 0x4340, 0x3f1e, 0xe856, 0xf584, 0x1, 0x1);
        gbc.writeMem(0x5648, { 0xcb, 0xbe });
        gbc.writeMem(0xf584, { 0x62 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xe3ec, gbc.sp());
        EXPECT(0x564a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xf584));
        // CB BE 00F4
        gbc.setState(0xad7d, 0xb7e3, 0x9770, 0x7b43, 0xfbf4, 0x8153, 0x1, 0x0);
        gbc.writeMem(0x8153, { 0x2f });
        gbc.writeMem(0xad7d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xb7e3, gbc.sp());
        EXPECT(0xad7f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0x8153));
        EXPECT(0xcb, gbc.readMem(0xad7d));
        EXPECT(0xbe, gbc.readMem(0xad7e));
        // CB BE 00F5
        gbc.setState(0x33b8, 0x13b7, 0x8aa0, 0x4257, 0x44e7, 0xa4ab, 0x0, 0x0);
        gbc.writeMem(0x33b8, { 0xcb, 0xbe });
        gbc.writeMem(0xa4ab, { 0xac });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x13b7, gbc.sp());
        EXPECT(0x33ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xa4ab));
        // CB BE 00F7
        gbc.setState(0x53f2, 0xa609, 0xc190, 0x2c7f, 0x8cb6, 0xfbd, 0x1, 0x0);
        gbc.writeMem(0xfbd, { 0x59 });
        gbc.writeMem(0x53f2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xa609, gbc.sp());
        EXPECT(0x53f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 00F8
        gbc.setState(0x1c33, 0x901e, 0x1690, 0x6d71, 0xf39, 0x9618, 0x0, 0x0);
        gbc.writeMem(0x1c33, { 0xcb, 0xbe });
        gbc.writeMem(0x9618, { 0x73 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x901e, gbc.sp());
        EXPECT(0x1c35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0x9618));
        // CB BE 00F9
        gbc.setState(0xa91a, 0xa039, 0xa240, 0x76a5, 0xc472, 0x9e0b, 0x1, 0x0);
        gbc.writeMem(0x9e0b, { 0x58 });
        gbc.writeMem(0xa91a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xa039, gbc.sp());
        EXPECT(0xa91c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0x9e0b));
        EXPECT(0xcb, gbc.readMem(0xa91a));
        EXPECT(0xbe, gbc.readMem(0xa91b));
        // CB BE 00FA
        gbc.setState(0xa9e7, 0x9377, 0x17e0, 0x4923, 0x6aff, 0x952b, 0x0, 0x0);
        gbc.writeMem(0x952b, { 0x7f });
        gbc.writeMem(0xa9e7, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x9377, gbc.sp());
        EXPECT(0xa9e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0x952b));
        EXPECT(0xcb, gbc.readMem(0xa9e7));
        EXPECT(0xbe, gbc.readMem(0xa9e8));
        // CB BE 00FC
        gbc.setState(0x8ab3, 0x51dc, 0xce30, 0xb585, 0xd6df, 0x9360, 0x1, 0x0);
        gbc.writeMem(0x8ab3, { 0xcb, 0xbe });
        gbc.writeMem(0x9360, { 0x43 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x51dc, gbc.sp());
        EXPECT(0x8ab5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ab3));
        EXPECT(0xbe, gbc.readMem(0x8ab4));
        EXPECT(0x43, gbc.readMem(0x9360));
        // CB BE 00FE
        gbc.setState(0x174a, 0x4ba7, 0x42a0, 0xfde1, 0x25f5, 0x9cd8, 0x1, 0x1);
        gbc.writeMem(0x174a, { 0xcb, 0xbe });
        gbc.writeMem(0x9cd8, { 0x69 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x4ba7, gbc.sp());
        EXPECT(0x174c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0x9cd8));
        // CB BE 00FF
        gbc.setState(0x1cf3, 0x2cc1, 0x5bf0, 0x619b, 0xbf0d, 0x7e7d, 0x0, 0x1);
        gbc.writeMem(0x1cf3, { 0xcb, 0xbe });
        gbc.writeMem(0x7e7d, { 0x38 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x2cc1, gbc.sp());
        EXPECT(0x1cf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0101
        gbc.setState(0x2d38, 0xd521, 0x9ad0, 0xbeb4, 0xa3d3, 0x7b9a, 0x0, 0x1);
        gbc.writeMem(0x2d38, { 0xcb, 0xbe });
        gbc.writeMem(0x7b9a, { 0x14 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xd521, gbc.sp());
        EXPECT(0x2d3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0103
        gbc.setState(0xeb43, 0xaaa1, 0x45a0, 0xa22d, 0x5445, 0x97e2, 0x0, 0x0);
        gbc.writeMem(0x97e2, { 0x88 });
        gbc.writeMem(0xeb43, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xaaa1, gbc.sp());
        EXPECT(0xeb45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0x97e2));
        EXPECT(0xcb, gbc.readMem(0xeb43));
        EXPECT(0xbe, gbc.readMem(0xeb44));
        // CB BE 0105
        gbc.setState(0xc96c, 0x5779, 0x8b80, 0x6500, 0xfba6, 0xb7ac, 0x1, 0x0);
        gbc.writeMem(0xb7ac, { 0x7 });
        gbc.writeMem(0xc96c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x5779, gbc.sp());
        EXPECT(0xc96e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0xb7ac));
        EXPECT(0xcb, gbc.readMem(0xc96c));
        EXPECT(0xbe, gbc.readMem(0xc96d));
        // CB BE 0106
        gbc.setState(0x145e, 0x676d, 0xc5e0, 0xc573, 0xe2fc, 0x9e1c, 0x1, 0x0);
        gbc.writeMem(0x145e, { 0xcb, 0xbe });
        gbc.writeMem(0x9e1c, { 0x30 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x676d, gbc.sp());
        EXPECT(0x1460, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0x9e1c));
        // CB BE 0107
        gbc.setState(0x57c7, 0xe619, 0x9df0, 0x5bc8, 0x849, 0xe558, 0x0, 0x0);
        gbc.writeMem(0x57c7, { 0xcb, 0xbe });
        gbc.writeMem(0xe558, { 0x16 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xe619, gbc.sp());
        EXPECT(0x57c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x16, gbc.readMem(0xe558));
        // CB BE 0108
        gbc.setState(0x6741, 0x2866, 0xffb0, 0x22b, 0x965e, 0xcc52, 0x1, 0x0);
        gbc.writeMem(0x6741, { 0xcb, 0xbe });
        gbc.writeMem(0xcc52, { 0xc3 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x2866, gbc.sp());
        EXPECT(0x6743, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xcc52));
        // CB BE 010A
        gbc.setState(0xc5d, 0xd167, 0x2b00, 0xe039, 0x49f4, 0xae96, 0x1, 0x0);
        gbc.writeMem(0xc5d, { 0xcb, 0xbe });
        gbc.writeMem(0xae96, { 0x97 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xd167, gbc.sp());
        EXPECT(0xc5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0xae96));
        // CB BE 010B
        gbc.setState(0x8ece, 0xd387, 0x7b70, 0x7e38, 0xe8fb, 0xf3e7, 0x0, 0x1);
        gbc.writeMem(0x8ece, { 0xcb, 0xbe });
        gbc.writeMem(0xf3e7, { 0x3c });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xd387, gbc.sp());
        EXPECT(0x8ed0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ece));
        EXPECT(0xbe, gbc.readMem(0x8ecf));
        EXPECT(0x3c, gbc.readMem(0xf3e7));
        // CB BE 010D
        gbc.setState(0x8c57, 0xacb0, 0xe800, 0x3a8b, 0xdf8d, 0xf65d, 0x0, 0x1);
        gbc.writeMem(0x8c57, { 0xcb, 0xbe });
        gbc.writeMem(0xf65d, { 0x75 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xacb0, gbc.sp());
        EXPECT(0x8c59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c57));
        EXPECT(0xbe, gbc.readMem(0x8c58));
        EXPECT(0x75, gbc.readMem(0xf65d));
        // CB BE 010F
        gbc.setState(0x4a2a, 0xc33d, 0x1ca0, 0x73f4, 0x80f0, 0x1103, 0x0, 0x1);
        gbc.writeMem(0x1103, { 0x4c });
        gbc.writeMem(0x4a2a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xc33d, gbc.sp());
        EXPECT(0x4a2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0110
        gbc.setState(0xcf57, 0x3e94, 0x1a0, 0x7320, 0x2c53, 0x45bf, 0x0, 0x0);
        gbc.writeMem(0x45bf, { 0x18 });
        gbc.writeMem(0xcf57, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x3e94, gbc.sp());
        EXPECT(0xcf59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf57));
        EXPECT(0xbe, gbc.readMem(0xcf58));
        // CB BE 0111
        gbc.setState(0xec3d, 0xf655, 0xe500, 0x16b0, 0x5ac2, 0xf490, 0x0, 0x0);
        gbc.writeMem(0xec3d, { 0xcb, 0xbe });
        gbc.writeMem(0xf490, { 0x42 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xf655, gbc.sp());
        EXPECT(0xec3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xec3d));
        EXPECT(0xbe, gbc.readMem(0xec3e));
        EXPECT(0x42, gbc.readMem(0xf490));
        // CB BE 0113
        gbc.setState(0xea80, 0x54e0, 0x2b00, 0x56e1, 0xe6bf, 0x8875, 0x0, 0x0);
        gbc.writeMem(0x8875, { 0x7c });
        gbc.writeMem(0xea80, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x54e0, gbc.sp());
        EXPECT(0xea82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0x8875));
        EXPECT(0xcb, gbc.readMem(0xea80));
        EXPECT(0xbe, gbc.readMem(0xea81));
        // CB BE 0114
        gbc.setState(0xddbd, 0xacd1, 0xdf0, 0xaa9, 0xce05, 0xbadc, 0x0, 0x1);
        gbc.writeMem(0xbadc, { 0xdb });
        gbc.writeMem(0xddbd, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xacd1, gbc.sp());
        EXPECT(0xddbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0xbadc));
        EXPECT(0xcb, gbc.readMem(0xddbd));
        EXPECT(0xbe, gbc.readMem(0xddbe));
        // CB BE 0115
        gbc.setState(0x1178, 0xf46a, 0xced0, 0xad82, 0x75eb, 0xbe52, 0x1, 0x1);
        gbc.writeMem(0x1178, { 0xcb, 0xbe });
        gbc.writeMem(0xbe52, { 0x70 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xf46a, gbc.sp());
        EXPECT(0x117a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xbe52));
        // CB BE 0116
        gbc.setState(0x8a88, 0x90c8, 0xf3b0, 0xcfd0, 0x8c01, 0x507f, 0x1, 0x1);
        gbc.writeMem(0x507f, { 0x20 });
        gbc.writeMem(0x8a88, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x90c8, gbc.sp());
        EXPECT(0x8a8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a88));
        EXPECT(0xbe, gbc.readMem(0x8a89));
        // CB BE 0118
        gbc.setState(0x9b5e, 0xffb3, 0xe460, 0xd368, 0x112b, 0xf6fc, 0x0, 0x0);
        gbc.writeMem(0x9b5e, { 0xcb, 0xbe });
        gbc.writeMem(0xf6fc, { 0x87 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xffb3, gbc.sp());
        EXPECT(0x9b60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b5e));
        EXPECT(0xbe, gbc.readMem(0x9b5f));
        EXPECT(0x7, gbc.readMem(0xf6fc));
        // CB BE 0119
        gbc.setState(0xce22, 0x472d, 0x1620, 0xb773, 0xbe8e, 0xa69e, 0x1, 0x1);
        gbc.writeMem(0xa69e, { 0x53 });
        gbc.writeMem(0xce22, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x472d, gbc.sp());
        EXPECT(0xce24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x53, gbc.readMem(0xa69e));
        EXPECT(0xcb, gbc.readMem(0xce22));
        EXPECT(0xbe, gbc.readMem(0xce23));
        // CB BE 011B
        gbc.setState(0x424e, 0xa512, 0x7970, 0x247d, 0x3ef6, 0x2efd, 0x1, 0x0);
        gbc.writeMem(0x2efd, { 0x1 });
        gbc.writeMem(0x424e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xa512, gbc.sp());
        EXPECT(0x4250, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 011E
        gbc.setState(0xed48, 0x6cc3, 0x5560, 0x5563, 0x55c9, 0x888e, 0x1, 0x0);
        gbc.writeMem(0x888e, { 0xd7 });
        gbc.writeMem(0xed48, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6cc3, gbc.sp());
        EXPECT(0xed4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0x888e));
        EXPECT(0xcb, gbc.readMem(0xed48));
        EXPECT(0xbe, gbc.readMem(0xed49));
        // CB BE 011F
        gbc.setState(0x8897, 0xf3b2, 0x94f0, 0x2a93, 0x7a24, 0xa9f2, 0x1, 0x1);
        gbc.writeMem(0x8897, { 0xcb, 0xbe });
        gbc.writeMem(0xa9f2, { 0x12 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf3b2, gbc.sp());
        EXPECT(0x8899, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8897));
        EXPECT(0xbe, gbc.readMem(0x8898));
        EXPECT(0x12, gbc.readMem(0xa9f2));
        // CB BE 0120
        gbc.setState(0xc67f, 0x8999, 0x4870, 0x29fe, 0x62b, 0x9a68, 0x0, 0x0);
        gbc.writeMem(0x9a68, { 0x7f });
        gbc.writeMem(0xc67f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x8999, gbc.sp());
        EXPECT(0xc681, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0x9a68));
        EXPECT(0xcb, gbc.readMem(0xc67f));
        EXPECT(0xbe, gbc.readMem(0xc680));
        // CB BE 0122
        gbc.setState(0x3d8a, 0x854, 0x6bf0, 0x26be, 0x3c16, 0xdd5f, 0x1, 0x0);
        gbc.writeMem(0x3d8a, { 0xcb, 0xbe });
        gbc.writeMem(0xdd5f, { 0x3d });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x854, gbc.sp());
        EXPECT(0x3d8c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xdd5f));
        // CB BE 0123
        gbc.setState(0x5d4, 0xac05, 0x4040, 0x3f6, 0xa315, 0xe618, 0x0, 0x0);
        gbc.writeMem(0x5d4, { 0xcb, 0xbe });
        gbc.writeMem(0xe618, { 0x4a });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xac05, gbc.sp());
        EXPECT(0x5d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xe618));
        // CB BE 0125
        gbc.setState(0xc99, 0x1216, 0xa380, 0x35c8, 0x6be3, 0xbf0, 0x0, 0x1);
        gbc.writeMem(0xbf0, { 0xf });
        gbc.writeMem(0xc99, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x1216, gbc.sp());
        EXPECT(0xc9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0126
        gbc.setState(0x4411, 0x7634, 0xb250, 0x5e1f, 0x3d38, 0xad92, 0x0, 0x1);
        gbc.writeMem(0x4411, { 0xcb, 0xbe });
        gbc.writeMem(0xad92, { 0x32 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x7634, gbc.sp());
        EXPECT(0x4413, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x32, gbc.readMem(0xad92));
        // CB BE 0127
        gbc.setState(0x7388, 0x3a9e, 0x9fc0, 0x2ee6, 0x1cc9, 0x82bf, 0x1, 0x0);
        gbc.writeMem(0x7388, { 0xcb, 0xbe });
        gbc.writeMem(0x82bf, { 0xe0 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x3a9e, gbc.sp());
        EXPECT(0x738a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0x82bf));
        // CB BE 0129
        gbc.setState(0x8178, 0xb43, 0x37a0, 0x8daf, 0xb986, 0x99ec, 0x0, 0x1);
        gbc.writeMem(0x8178, { 0xcb, 0xbe });
        gbc.writeMem(0x99ec, { 0x88 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xb43, gbc.sp());
        EXPECT(0x817a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8178));
        EXPECT(0xbe, gbc.readMem(0x8179));
        EXPECT(0x8, gbc.readMem(0x99ec));
        // CB BE 012B
        gbc.setState(0xdd78, 0xe6c8, 0xcab0, 0xd90b, 0xade8, 0x9f2d, 0x1, 0x0);
        gbc.writeMem(0x9f2d, { 0x31 });
        gbc.writeMem(0xdd78, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xe6c8, gbc.sp());
        EXPECT(0xdd7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0x9f2d));
        EXPECT(0xcb, gbc.readMem(0xdd78));
        EXPECT(0xbe, gbc.readMem(0xdd79));
        // CB BE 012C
        gbc.setState(0x71b8, 0x257, 0x37a0, 0xf779, 0xd06b, 0xb088, 0x0, 0x0);
        gbc.writeMem(0x71b8, { 0xcb, 0xbe });
        gbc.writeMem(0xb088, { 0xc1 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x257, gbc.sp());
        EXPECT(0x71ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x41, gbc.readMem(0xb088));
        // CB BE 012E
        gbc.setState(0x671b, 0x9330, 0x2cc0, 0x6250, 0x9710, 0xf5fb, 0x1, 0x1);
        gbc.writeMem(0x671b, { 0xcb, 0xbe });
        gbc.writeMem(0xf5fb, { 0x13 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x9330, gbc.sp());
        EXPECT(0x671d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0xf5fb));
        // CB BE 0130
        gbc.setState(0x9392, 0xdba6, 0x3e0, 0xc63, 0x4411, 0xba99, 0x0, 0x1);
        gbc.writeMem(0x9392, { 0xcb, 0xbe });
        gbc.writeMem(0xba99, { 0xb7 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xdba6, gbc.sp());
        EXPECT(0x9394, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9392));
        EXPECT(0xbe, gbc.readMem(0x9393));
        EXPECT(0x37, gbc.readMem(0xba99));
        // CB BE 0131
        gbc.setState(0xed9c, 0x6dd, 0xfaf0, 0x1125, 0xc04d, 0xbb80, 0x1, 0x1);
        gbc.writeMem(0xbb80, { 0xd1 });
        gbc.writeMem(0xed9c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x6dd, gbc.sp());
        EXPECT(0xed9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x51, gbc.readMem(0xbb80));
        EXPECT(0xcb, gbc.readMem(0xed9c));
        EXPECT(0xbe, gbc.readMem(0xed9d));
        // CB BE 0134
        gbc.setState(0x6187, 0x36ff, 0xf8f0, 0xdeae, 0xe033, 0x58f2, 0x1, 0x1);
        gbc.writeMem(0x58f2, { 0xd });
        gbc.writeMem(0x6187, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x36ff, gbc.sp());
        EXPECT(0x6189, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0138
        gbc.setState(0x2990, 0x8b64, 0x16d0, 0xe62b, 0x95bd, 0x379b, 0x0, 0x1);
        gbc.writeMem(0x2990, { 0xcb, 0xbe });
        gbc.writeMem(0x379b, { 0x0 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x8b64, gbc.sp());
        EXPECT(0x2992, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0139
        gbc.setState(0xc2a7, 0xb299, 0xded0, 0x16f2, 0x31bd, 0xfbbe, 0x0, 0x0);
        gbc.writeMem(0xc2a7, { 0xcb, 0xbe });
        gbc.writeMem(0xfbbe, { 0xc8 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb299, gbc.sp());
        EXPECT(0xc2a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2a7));
        EXPECT(0xbe, gbc.readMem(0xc2a8));
        EXPECT(0x48, gbc.readMem(0xfbbe));
        // CB BE 013A
        gbc.setState(0x3ed6, 0x4f49, 0x41e0, 0xfb6d, 0x1b98, 0x8be0, 0x1, 0x1);
        gbc.writeMem(0x3ed6, { 0xcb, 0xbe });
        gbc.writeMem(0x8be0, { 0xac });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x4f49, gbc.sp());
        EXPECT(0x3ed8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0x8be0));
        // CB BE 013B
        gbc.setState(0xa131, 0xac3d, 0xcfb0, 0x57b, 0xce62, 0xb60c, 0x0, 0x1);
        gbc.writeMem(0xa131, { 0xcb, 0xbe });
        gbc.writeMem(0xb60c, { 0xb0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xac3d, gbc.sp());
        EXPECT(0xa133, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa131));
        EXPECT(0xbe, gbc.readMem(0xa132));
        EXPECT(0x30, gbc.readMem(0xb60c));
        // CB BE 013D
        gbc.setState(0x8ea5, 0x2c58, 0x7e70, 0x67f2, 0x6dfe, 0xadbe, 0x1, 0x1);
        gbc.writeMem(0x8ea5, { 0xcb, 0xbe });
        gbc.writeMem(0xadbe, { 0x14 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x2c58, gbc.sp());
        EXPECT(0x8ea7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ea5));
        EXPECT(0xbe, gbc.readMem(0x8ea6));
        EXPECT(0x14, gbc.readMem(0xadbe));
        // CB BE 013E
        gbc.setState(0xc9d6, 0xde3f, 0x3d00, 0x5248, 0xa086, 0xcaeb, 0x1, 0x0);
        gbc.writeMem(0xc9d6, { 0xcb, 0xbe });
        gbc.writeMem(0xcaeb, { 0xc6 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xde3f, gbc.sp());
        EXPECT(0xc9d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9d6));
        EXPECT(0xbe, gbc.readMem(0xc9d7));
        EXPECT(0x46, gbc.readMem(0xcaeb));
        // CB BE 013F
        gbc.setState(0x5844, 0xf37d, 0x6900, 0xde63, 0x8369, 0xe053, 0x1, 0x1);
        gbc.writeMem(0x5844, { 0xcb, 0xbe });
        gbc.writeMem(0xe053, { 0x33 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xf37d, gbc.sp());
        EXPECT(0x5846, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x33, gbc.readMem(0xe053));
        // CB BE 0141
        gbc.setState(0x6a2a, 0xab6f, 0x1960, 0x335a, 0x4b1, 0xd7dc, 0x1, 0x1);
        gbc.writeMem(0x6a2a, { 0xcb, 0xbe });
        gbc.writeMem(0xd7dc, { 0xda });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xab6f, gbc.sp());
        EXPECT(0x6a2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5a, gbc.readMem(0xd7dc));
        // CB BE 0142
        gbc.setState(0x8989, 0x3a95, 0x6490, 0x4993, 0xa8d2, 0xd4fe, 0x0, 0x1);
        gbc.writeMem(0x8989, { 0xcb, 0xbe });
        gbc.writeMem(0xd4fe, { 0x46 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x3a95, gbc.sp());
        EXPECT(0x898b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8989));
        EXPECT(0xbe, gbc.readMem(0x898a));
        EXPECT(0x46, gbc.readMem(0xd4fe));
        // CB BE 0145
        gbc.setState(0x9e56, 0xd918, 0xdb90, 0x6100, 0x6d7c, 0x41bd, 0x1, 0x0);
        gbc.writeMem(0x41bd, { 0x2c });
        gbc.writeMem(0x9e56, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xd918, gbc.sp());
        EXPECT(0x9e58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e56));
        EXPECT(0xbe, gbc.readMem(0x9e57));
        // CB BE 0147
        gbc.setState(0xd7e6, 0x9820, 0x9c90, 0x1582, 0xca6c, 0xbb1f, 0x1, 0x1);
        gbc.writeMem(0xbb1f, { 0xe2 });
        gbc.writeMem(0xd7e6, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x9820, gbc.sp());
        EXPECT(0xd7e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xbb1f));
        EXPECT(0xcb, gbc.readMem(0xd7e6));
        EXPECT(0xbe, gbc.readMem(0xd7e7));
        // CB BE 0149
        gbc.setState(0x3f9a, 0x6fe7, 0xe9c0, 0x265d, 0x6e86, 0x8715, 0x0, 0x0);
        gbc.writeMem(0x3f9a, { 0xcb, 0xbe });
        gbc.writeMem(0x8715, { 0x60 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x6fe7, gbc.sp());
        EXPECT(0x3f9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x60, gbc.readMem(0x8715));
        // CB BE 014A
        gbc.setState(0x7eb9, 0x253f, 0x8770, 0xd42a, 0x4f77, 0xc649, 0x1, 0x0);
        gbc.writeMem(0x7eb9, { 0xcb, 0xbe });
        gbc.writeMem(0xc649, { 0xc6 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x253f, gbc.sp());
        EXPECT(0x7ebb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0xc649));
        // CB BE 014D
        gbc.setState(0x2014, 0xf528, 0xbc00, 0x9a7a, 0xf498, 0xcc6, 0x1, 0x1);
        gbc.writeMem(0xcc6, { 0x6c });
        gbc.writeMem(0x2014, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xf528, gbc.sp());
        EXPECT(0x2016, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 014E
        gbc.setState(0x3d20, 0xe5ce, 0x3ed0, 0xa53d, 0x7648, 0xbb4f, 0x1, 0x0);
        gbc.writeMem(0x3d20, { 0xcb, 0xbe });
        gbc.writeMem(0xbb4f, { 0x11 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xe5ce, gbc.sp());
        EXPECT(0x3d22, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xbb4f));
        // CB BE 0150
        gbc.setState(0x2f9d, 0xd9ef, 0x5890, 0x2c62, 0x71a, 0xeb6a, 0x0, 0x1);
        gbc.writeMem(0x2f9d, { 0xcb, 0xbe });
        gbc.writeMem(0xeb6a, { 0x48 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xd9ef, gbc.sp());
        EXPECT(0x2f9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x48, gbc.readMem(0xeb6a));
        // CB BE 0152
        gbc.setState(0xbe37, 0x327d, 0x8ec0, 0xab17, 0x514c, 0xbf4, 0x1, 0x0);
        gbc.writeMem(0xbf4, { 0x10 });
        gbc.writeMem(0xbe37, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x327d, gbc.sp());
        EXPECT(0xbe39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe37));
        EXPECT(0xbe, gbc.readMem(0xbe38));
        // CB BE 0153
        gbc.setState(0x44ec, 0x639b, 0xa9a0, 0xc366, 0x9c6f, 0x63cd, 0x1, 0x1);
        gbc.writeMem(0x44ec, { 0xcb, 0xbe });
        gbc.writeMem(0x63cd, { 0x3d });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x639b, gbc.sp());
        EXPECT(0x44ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0154
        gbc.setState(0x3d9e, 0x8255, 0xd190, 0xed2d, 0x416c, 0x3f3f, 0x0, 0x0);
        gbc.writeMem(0x3d9e, { 0xcb, 0xbe });
        gbc.writeMem(0x3f3f, { 0x8 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x8255, gbc.sp());
        EXPECT(0x3da0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0155
        gbc.setState(0x44ed, 0xf582, 0xd400, 0x2ec6, 0x5c82, 0xbd5c, 0x0, 0x0);
        gbc.writeMem(0x44ed, { 0xcb, 0xbe });
        gbc.writeMem(0xbd5c, { 0x82 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xf582, gbc.sp());
        EXPECT(0x44ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xbd5c));
        // CB BE 0157
        gbc.setState(0x6ba0, 0x6b7, 0x5980, 0x16ce, 0x22ee, 0x245d, 0x0, 0x1);
        gbc.writeMem(0x245d, { 0x14 });
        gbc.writeMem(0x6ba0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x6b7, gbc.sp());
        EXPECT(0x6ba2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0159
        gbc.setState(0xd352, 0x6106, 0xce70, 0x1b2d, 0x5212, 0x1753, 0x1, 0x1);
        gbc.writeMem(0x1753, { 0x2d });
        gbc.writeMem(0xd352, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x6106, gbc.sp());
        EXPECT(0xd354, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd352));
        EXPECT(0xbe, gbc.readMem(0xd353));
        // CB BE 015A
        gbc.setState(0xeb52, 0xc2ed, 0x3db0, 0xfc45, 0xd58a, 0xb327, 0x1, 0x1);
        gbc.writeMem(0xb327, { 0xe3 });
        gbc.writeMem(0xeb52, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xc2ed, gbc.sp());
        EXPECT(0xeb54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xb327));
        EXPECT(0xcb, gbc.readMem(0xeb52));
        EXPECT(0xbe, gbc.readMem(0xeb53));
        // CB BE 015C
        gbc.setState(0xd819, 0xd66, 0x68a0, 0x84c, 0x329c, 0xb1ac, 0x0, 0x1);
        gbc.writeMem(0xb1ac, { 0x88 });
        gbc.writeMem(0xd819, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd66, gbc.sp());
        EXPECT(0xd81b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0xb1ac));
        EXPECT(0xcb, gbc.readMem(0xd819));
        EXPECT(0xbe, gbc.readMem(0xd81a));
        // CB BE 015E
        gbc.setState(0x1be0, 0x9eef, 0xc1e0, 0x9d63, 0x4ad4, 0x6fb5, 0x0, 0x0);
        gbc.writeMem(0x1be0, { 0xcb, 0xbe });
        gbc.writeMem(0x6fb5, { 0x55 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x9eef, gbc.sp());
        EXPECT(0x1be2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 015F
        gbc.setState(0xec11, 0x1425, 0x910, 0x1909, 0xa3d3, 0xc628, 0x1, 0x1);
        gbc.writeMem(0xc628, { 0x3f });
        gbc.writeMem(0xec11, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x1425, gbc.sp());
        EXPECT(0xec13, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3f, gbc.readMem(0xc628));
        EXPECT(0xcb, gbc.readMem(0xec11));
        EXPECT(0xbe, gbc.readMem(0xec12));
        // CB BE 0160
        gbc.setState(0x15b3, 0x1509, 0x4740, 0x9bb7, 0x1127, 0xf818, 0x0, 0x0);
        gbc.writeMem(0x15b3, { 0xcb, 0xbe });
        gbc.writeMem(0xf818, { 0x9e });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x1509, gbc.sp());
        EXPECT(0x15b5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1e, gbc.readMem(0xf818));
        // CB BE 0163
        gbc.setState(0x765f, 0xe31a, 0xab20, 0x53bd, 0xa3ba, 0xb498, 0x0, 0x0);
        gbc.writeMem(0x765f, { 0xcb, 0xbe });
        gbc.writeMem(0xb498, { 0xf6 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe31a, gbc.sp());
        EXPECT(0x7661, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0xb498));
        // CB BE 0164
        gbc.setState(0x2c17, 0x5dd2, 0xd650, 0xed01, 0x1bf1, 0x9ea6, 0x1, 0x0);
        gbc.writeMem(0x2c17, { 0xcb, 0xbe });
        gbc.writeMem(0x9ea6, { 0xef });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x5dd2, gbc.sp());
        EXPECT(0x2c19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0x9ea6));
        // CB BE 0165
        gbc.setState(0xab43, 0x86aa, 0xf5d0, 0x1ff, 0x307f, 0xa7a9, 0x0, 0x0);
        gbc.writeMem(0xa7a9, { 0x52 });
        gbc.writeMem(0xab43, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x86aa, gbc.sp());
        EXPECT(0xab45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xa7a9));
        EXPECT(0xcb, gbc.readMem(0xab43));
        EXPECT(0xbe, gbc.readMem(0xab44));
        // CB BE 0166
        gbc.setState(0x7319, 0x5671, 0xba60, 0x2b01, 0x2cad, 0x3f51, 0x1, 0x1);
        gbc.writeMem(0x3f51, { 0x2 });
        gbc.writeMem(0x7319, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x5671, gbc.sp());
        EXPECT(0x731b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0167
        gbc.setState(0xed2b, 0x4043, 0x25c0, 0x52e3, 0x27b2, 0xddca, 0x1, 0x0);
        gbc.writeMem(0xddca, { 0x23 });
        gbc.writeMem(0xed2b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x4043, gbc.sp());
        EXPECT(0xed2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0xddca));
        EXPECT(0xcb, gbc.readMem(0xed2b));
        EXPECT(0xbe, gbc.readMem(0xed2c));
        // CB BE 0169
        gbc.setState(0xc5c2, 0xd851, 0xa410, 0xb373, 0x2f70, 0x87ac, 0x0, 0x1);
        gbc.writeMem(0x87ac, { 0xb });
        gbc.writeMem(0xc5c2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd851, gbc.sp());
        EXPECT(0xc5c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0x87ac));
        EXPECT(0xcb, gbc.readMem(0xc5c2));
        EXPECT(0xbe, gbc.readMem(0xc5c3));
        // CB BE 016A
        gbc.setState(0x8d3, 0xfb1f, 0x4a60, 0x6e93, 0xd718, 0xc29b, 0x0, 0x1);
        gbc.writeMem(0x8d3, { 0xcb, 0xbe });
        gbc.writeMem(0xc29b, { 0x75 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xfb1f, gbc.sp());
        EXPECT(0x8d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x75, gbc.readMem(0xc29b));
        // CB BE 016B
        gbc.setState(0xd367, 0x8b23, 0x8710, 0xf1c2, 0x14ec, 0xf707, 0x1, 0x0);
        gbc.writeMem(0xd367, { 0xcb, 0xbe });
        gbc.writeMem(0xf707, { 0xc5 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x8b23, gbc.sp());
        EXPECT(0xd369, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd367));
        EXPECT(0xbe, gbc.readMem(0xd368));
        EXPECT(0x45, gbc.readMem(0xf707));
        // CB BE 016C
        gbc.setState(0x3584, 0x601d, 0x3840, 0x8910, 0x803f, 0x8c30, 0x0, 0x0);
        gbc.writeMem(0x3584, { 0xcb, 0xbe });
        gbc.writeMem(0x8c30, { 0x73 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x601d, gbc.sp());
        EXPECT(0x3586, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0x8c30));
        // CB BE 016D
        gbc.setState(0x6998, 0xb195, 0x3f50, 0x34cd, 0x78a3, 0x8127, 0x1, 0x1);
        gbc.writeMem(0x6998, { 0xcb, 0xbe });
        gbc.writeMem(0x8127, { 0xed });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xb195, gbc.sp());
        EXPECT(0x699a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0x8127));
        // CB BE 016E
        gbc.setState(0x1d5b, 0x9b3d, 0xcc10, 0x10a8, 0x2fa1, 0xd5b6, 0x0, 0x1);
        gbc.writeMem(0x1d5b, { 0xcb, 0xbe });
        gbc.writeMem(0xd5b6, { 0x8f });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x9b3d, gbc.sp());
        EXPECT(0x1d5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xd5b6));
        // CB BE 016F
        gbc.setState(0xdd8c, 0x1a04, 0xac50, 0x4c2c, 0xf422, 0xea82, 0x1, 0x0);
        gbc.writeMem(0xdd8c, { 0xcb, 0xbe });
        gbc.writeMem(0xea82, { 0x32 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1a04, gbc.sp());
        EXPECT(0xdd8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd8c));
        EXPECT(0xbe, gbc.readMem(0xdd8d));
        EXPECT(0x32, gbc.readMem(0xea82));
        // CB BE 0171
        gbc.setState(0x3e48, 0xd4e1, 0x1700, 0xf97e, 0x20e, 0x84f9, 0x0, 0x0);
        gbc.writeMem(0x3e48, { 0xcb, 0xbe });
        gbc.writeMem(0x84f9, { 0xb9 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd4e1, gbc.sp());
        EXPECT(0x3e4a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0x84f9));
        // CB BE 0172
        gbc.setState(0x81f1, 0x6578, 0xf890, 0x134e, 0x9cfe, 0xfa6b, 0x0, 0x0);
        gbc.writeMem(0x81f1, { 0xcb, 0xbe });
        gbc.writeMem(0xfa6b, { 0x2e });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x6578, gbc.sp());
        EXPECT(0x81f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81f1));
        EXPECT(0xbe, gbc.readMem(0x81f2));
        EXPECT(0x2e, gbc.readMem(0xfa6b));
        // CB BE 0174
        gbc.setState(0xcc7b, 0xf5ee, 0x5db0, 0xb9cd, 0x6d6a, 0xc227, 0x1, 0x1);
        gbc.writeMem(0xc227, { 0x5e });
        gbc.writeMem(0xcc7b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xf5ee, gbc.sp());
        EXPECT(0xcc7d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0xc227));
        EXPECT(0xcb, gbc.readMem(0xcc7b));
        EXPECT(0xbe, gbc.readMem(0xcc7c));
        // CB BE 0175
        gbc.setState(0x8956, 0x70e5, 0x3ef0, 0x1da2, 0xf9ed, 0x7cd9, 0x0, 0x0);
        gbc.writeMem(0x7cd9, { 0x6e });
        gbc.writeMem(0x8956, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x70e5, gbc.sp());
        EXPECT(0x8958, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8956));
        EXPECT(0xbe, gbc.readMem(0x8957));
        // CB BE 0176
        gbc.setState(0x7954, 0x8eda, 0x62c0, 0xb1c7, 0x5621, 0x8fd9, 0x1, 0x0);
        gbc.writeMem(0x7954, { 0xcb, 0xbe });
        gbc.writeMem(0x8fd9, { 0x8b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x8eda, gbc.sp());
        EXPECT(0x7956, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0x8fd9));
        // CB BE 0177
        gbc.setState(0x50ed, 0x215e, 0x6b90, 0xf315, 0x68d6, 0x34d0, 0x1, 0x1);
        gbc.writeMem(0x34d0, { 0x33 });
        gbc.writeMem(0x50ed, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x215e, gbc.sp());
        EXPECT(0x50ef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0178
        gbc.setState(0x59cc, 0xf47f, 0x6990, 0x98bd, 0xa0c, 0xb649, 0x0, 0x0);
        gbc.writeMem(0x59cc, { 0xcb, 0xbe });
        gbc.writeMem(0xb649, { 0x4d });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xf47f, gbc.sp());
        EXPECT(0x59ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4d, gbc.readMem(0xb649));
        // CB BE 017C
        gbc.setState(0x71df, 0xaee9, 0x92b0, 0x133f, 0x62b3, 0xb892, 0x0, 0x0);
        gbc.writeMem(0x71df, { 0xcb, 0xbe });
        gbc.writeMem(0xb892, { 0x52 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xaee9, gbc.sp());
        EXPECT(0x71e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xb892));
        // CB BE 017D
        gbc.setState(0x1577, 0xc1bc, 0xf210, 0xf3f2, 0xd66d, 0xc7a3, 0x1, 0x0);
        gbc.writeMem(0x1577, { 0xcb, 0xbe });
        gbc.writeMem(0xc7a3, { 0xe6 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xc1bc, gbc.sp());
        EXPECT(0x1579, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xc7a3));
        // CB BE 0181
        gbc.setState(0x629b, 0x6500, 0xfc80, 0x1560, 0x6e60, 0xe7fe, 0x0, 0x0);
        gbc.writeMem(0x629b, { 0xcb, 0xbe });
        gbc.writeMem(0xe7fe, { 0xd });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x6500, gbc.sp());
        EXPECT(0x629d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xe7fe));
        // CB BE 0182
        gbc.setState(0x7ab5, 0xdfe3, 0x180, 0xd258, 0x1b2d, 0xc6e2, 0x0, 0x1);
        gbc.writeMem(0x7ab5, { 0xcb, 0xbe });
        gbc.writeMem(0xc6e2, { 0x55 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xdfe3, gbc.sp());
        EXPECT(0x7ab7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x55, gbc.readMem(0xc6e2));
        // CB BE 0183
        gbc.setState(0x5980, 0xc372, 0x6aa0, 0x88c8, 0xbb49, 0x5c2b, 0x1, 0x1);
        gbc.writeMem(0x5980, { 0xcb, 0xbe });
        gbc.writeMem(0x5c2b, { 0x6 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xc372, gbc.sp());
        EXPECT(0x5982, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0184
        gbc.setState(0x87f7, 0xbb39, 0x9cd0, 0x3064, 0xe670, 0xc7d3, 0x0, 0x1);
        gbc.writeMem(0x87f7, { 0xcb, 0xbe });
        gbc.writeMem(0xc7d3, { 0xc });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xbb39, gbc.sp());
        EXPECT(0x87f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87f7));
        EXPECT(0xbe, gbc.readMem(0x87f8));
        EXPECT(0xc, gbc.readMem(0xc7d3));
        // CB BE 0185
        gbc.setState(0x3653, 0x429, 0xdc60, 0xa793, 0xf79, 0x92ac, 0x0, 0x0);
        gbc.writeMem(0x3653, { 0xcb, 0xbe });
        gbc.writeMem(0x92ac, { 0xc3 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x429, gbc.sp());
        EXPECT(0x3655, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0x92ac));
        // CB BE 0186
        gbc.setState(0x118b, 0x3a5a, 0x2170, 0x1547, 0xcef3, 0x6e6, 0x0, 0x0);
        gbc.writeMem(0x6e6, { 0x2 });
        gbc.writeMem(0x118b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3a5a, gbc.sp());
        EXPECT(0x118d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0187
        gbc.setState(0x1f66, 0x60a9, 0x6e50, 0xf3bb, 0xebd9, 0xae8c, 0x1, 0x1);
        gbc.writeMem(0x1f66, { 0xcb, 0xbe });
        gbc.writeMem(0xae8c, { 0xbf });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x60a9, gbc.sp());
        EXPECT(0x1f68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3f, gbc.readMem(0xae8c));
        // CB BE 0188
        gbc.setState(0xdf0c, 0x5bdd, 0xf450, 0x2e48, 0x2122, 0xd442, 0x0, 0x1);
        gbc.writeMem(0xd442, { 0xe2 });
        gbc.writeMem(0xdf0c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x5bdd, gbc.sp());
        EXPECT(0xdf0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xd442));
        EXPECT(0xcb, gbc.readMem(0xdf0c));
        EXPECT(0xbe, gbc.readMem(0xdf0d));
        // CB BE 018B
        gbc.setState(0x395e, 0x811c, 0x1c40, 0x4e54, 0x5e40, 0x944c, 0x1, 0x1);
        gbc.writeMem(0x395e, { 0xcb, 0xbe });
        gbc.writeMem(0x944c, { 0x3d });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x811c, gbc.sp());
        EXPECT(0x3960, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0x944c));
        // CB BE 018C
        gbc.setState(0xa8ca, 0x3445, 0x2150, 0x587d, 0xa7ea, 0x9145, 0x1, 0x1);
        gbc.writeMem(0x9145, { 0xfd });
        gbc.writeMem(0xa8ca, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x3445, gbc.sp());
        EXPECT(0xa8cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0x9145));
        EXPECT(0xcb, gbc.readMem(0xa8ca));
        EXPECT(0xbe, gbc.readMem(0xa8cb));
        // CB BE 018D
        gbc.setState(0xe8d2, 0xdce9, 0x7a20, 0x8df8, 0xd626, 0xe113, 0x0, 0x1);
        gbc.writeMem(0xe113, { 0x98 });
        gbc.writeMem(0xe8d2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xdce9, gbc.sp());
        EXPECT(0xe8d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0xe113));
        EXPECT(0xcb, gbc.readMem(0xe8d2));
        EXPECT(0xbe, gbc.readMem(0xe8d3));
        // CB BE 018E
        gbc.setState(0xdad3, 0x7db7, 0xfa00, 0xb755, 0x31eb, 0xdbb0, 0x0, 0x0);
        gbc.writeMem(0xdad3, { 0xcb, 0xbe });
        gbc.writeMem(0xdbb0, { 0xc1 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x7db7, gbc.sp());
        EXPECT(0xdad5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdad3));
        EXPECT(0xbe, gbc.readMem(0xdad4));
        EXPECT(0x41, gbc.readMem(0xdbb0));
        // CB BE 018F
        gbc.setState(0xdb5e, 0x6e3d, 0xe1d0, 0x576b, 0x4749, 0xc06d, 0x0, 0x1);
        gbc.writeMem(0xc06d, { 0x86 });
        gbc.writeMem(0xdb5e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x6e3d, gbc.sp());
        EXPECT(0xdb60, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0xc06d));
        EXPECT(0xcb, gbc.readMem(0xdb5e));
        EXPECT(0xbe, gbc.readMem(0xdb5f));
        // CB BE 0190
        gbc.setState(0x14ba, 0xab14, 0xd4e0, 0x8447, 0x4120, 0x9848, 0x0, 0x1);
        gbc.writeMem(0x14ba, { 0xcb, 0xbe });
        gbc.writeMem(0x9848, { 0xd0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xab14, gbc.sp());
        EXPECT(0x14bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0x9848));
        // CB BE 0191
        gbc.setState(0xd2a8, 0x94aa, 0x97b0, 0x93bb, 0x3788, 0xbb73, 0x0, 0x1);
        gbc.writeMem(0xbb73, { 0xda });
        gbc.writeMem(0xd2a8, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x94aa, gbc.sp());
        EXPECT(0xd2aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5a, gbc.readMem(0xbb73));
        EXPECT(0xcb, gbc.readMem(0xd2a8));
        EXPECT(0xbe, gbc.readMem(0xd2a9));
        // CB BE 0193
        gbc.setState(0x2df1, 0x42f3, 0xda00, 0x7068, 0x58c2, 0x128c, 0x0, 0x0);
        gbc.writeMem(0x128c, { 0x3c });
        gbc.writeMem(0x2df1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x42f3, gbc.sp());
        EXPECT(0x2df3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0194
        gbc.setState(0x3b22, 0x4fe3, 0x5c00, 0xbe98, 0x9a96, 0x7a19, 0x1, 0x0);
        gbc.writeMem(0x3b22, { 0xcb, 0xbe });
        gbc.writeMem(0x7a19, { 0x41 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x4fe3, gbc.sp());
        EXPECT(0x3b24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0195
        gbc.setState(0x6b5a, 0xb270, 0x9fb0, 0xa5a6, 0x650f, 0x83ed, 0x0, 0x1);
        gbc.writeMem(0x6b5a, { 0xcb, 0xbe });
        gbc.writeMem(0x83ed, { 0x18 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xb270, gbc.sp());
        EXPECT(0x6b5c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0x83ed));
        // CB BE 0196
        gbc.setState(0xb43e, 0xb25c, 0x7d10, 0x50ef, 0xb7a0, 0xe50f, 0x0, 0x1);
        gbc.writeMem(0xb43e, { 0xcb, 0xbe });
        gbc.writeMem(0xe50f, { 0x3e });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xb25c, gbc.sp());
        EXPECT(0xb440, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb43e));
        EXPECT(0xbe, gbc.readMem(0xb43f));
        EXPECT(0x3e, gbc.readMem(0xe50f));
        // CB BE 0197
        gbc.setState(0xada5, 0xa13, 0x3be0, 0x83d6, 0xf305, 0xbe0a, 0x1, 0x0);
        gbc.writeMem(0xada5, { 0xcb, 0xbe });
        gbc.writeMem(0xbe0a, { 0xd2 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xa13, gbc.sp());
        EXPECT(0xada7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xada5));
        EXPECT(0xbe, gbc.readMem(0xada6));
        EXPECT(0x52, gbc.readMem(0xbe0a));
        // CB BE 0198
        gbc.setState(0x715, 0x12fc, 0x69a0, 0xd28, 0x9954, 0x8d40, 0x1, 0x0);
        gbc.writeMem(0x715, { 0xcb, 0xbe });
        gbc.writeMem(0x8d40, { 0x23 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x12fc, gbc.sp());
        EXPECT(0x717, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0x8d40));
        // CB BE 0199
        gbc.setState(0xbf90, 0xbd94, 0x8f70, 0xfdd3, 0xa768, 0x191d, 0x0, 0x1);
        gbc.writeMem(0x191d, { 0x4b });
        gbc.writeMem(0xbf90, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xbd94, gbc.sp());
        EXPECT(0xbf92, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf90));
        EXPECT(0xbe, gbc.readMem(0xbf91));
        // CB BE 019A
        gbc.setState(0xcbf0, 0xdf05, 0xdb60, 0xe7d5, 0xe2af, 0x7e43, 0x1, 0x0);
        gbc.writeMem(0x7e43, { 0x10 });
        gbc.writeMem(0xcbf0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xdf05, gbc.sp());
        EXPECT(0xcbf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbf0));
        EXPECT(0xbe, gbc.readMem(0xcbf1));
        // CB BE 019B
        gbc.setState(0x73aa, 0x8d5c, 0xf0b0, 0xb9eb, 0xa323, 0xa783, 0x1, 0x1);
        gbc.writeMem(0x73aa, { 0xcb, 0xbe });
        gbc.writeMem(0xa783, { 0xd6 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x8d5c, gbc.sp());
        EXPECT(0x73ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x56, gbc.readMem(0xa783));
        // CB BE 019C
        gbc.setState(0xb6ab, 0x12d9, 0xb6d0, 0xc19, 0xab7a, 0xbc32, 0x1, 0x1);
        gbc.writeMem(0xb6ab, { 0xcb, 0xbe });
        gbc.writeMem(0xbc32, { 0xec });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x12d9, gbc.sp());
        EXPECT(0xb6ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6ab));
        EXPECT(0xbe, gbc.readMem(0xb6ac));
        EXPECT(0x6c, gbc.readMem(0xbc32));
        // CB BE 019D
        gbc.setState(0xc21c, 0xc906, 0xc7e0, 0x6529, 0xce27, 0xabe, 0x0, 0x1);
        gbc.writeMem(0xabe, { 0x15 });
        gbc.writeMem(0xc21c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xc906, gbc.sp());
        EXPECT(0xc21e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc21c));
        EXPECT(0xbe, gbc.readMem(0xc21d));
        // CB BE 019E
        gbc.setState(0x3830, 0x642, 0xbd00, 0x2cd3, 0xeb5, 0x8638, 0x1, 0x1);
        gbc.writeMem(0x3830, { 0xcb, 0xbe });
        gbc.writeMem(0x8638, { 0x5c });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x642, gbc.sp());
        EXPECT(0x3832, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0x8638));
        // CB BE 019F
        gbc.setState(0xbe83, 0x230f, 0x2ce0, 0x6f5d, 0x119, 0x7570, 0x1, 0x1);
        gbc.writeMem(0x7570, { 0x4c });
        gbc.writeMem(0xbe83, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x230f, gbc.sp());
        EXPECT(0xbe85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe83));
        EXPECT(0xbe, gbc.readMem(0xbe84));
        // CB BE 01A0
        gbc.setState(0x32c1, 0xc401, 0xc8d0, 0x96c0, 0xc3b1, 0x1371, 0x1, 0x0);
        gbc.writeMem(0x1371, { 0x7f });
        gbc.writeMem(0x32c1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xc401, gbc.sp());
        EXPECT(0x32c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01A2
        gbc.setState(0xbebe, 0x63d0, 0x41b0, 0x7701, 0xda44, 0x9e42, 0x0, 0x0);
        gbc.writeMem(0x9e42, { 0xb });
        gbc.writeMem(0xbebe, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x63d0, gbc.sp());
        EXPECT(0xbec0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0x9e42));
        EXPECT(0xcb, gbc.readMem(0xbebe));
        EXPECT(0xbe, gbc.readMem(0xbebf));
        // CB BE 01A3
        gbc.setState(0xd1bc, 0x8cbc, 0x9220, 0xa5bf, 0xf770, 0x3be8, 0x0, 0x1);
        gbc.writeMem(0x3be8, { 0x2b });
        gbc.writeMem(0xd1bc, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x8cbc, gbc.sp());
        EXPECT(0xd1be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1bc));
        EXPECT(0xbe, gbc.readMem(0xd1bd));
        // CB BE 01A4
        gbc.setState(0xdf2b, 0x6157, 0xea0, 0x774, 0x38c2, 0x8f3e, 0x1, 0x0);
        gbc.writeMem(0x8f3e, { 0xe8 });
        gbc.writeMem(0xdf2b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x6157, gbc.sp());
        EXPECT(0xdf2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0x8f3e));
        EXPECT(0xcb, gbc.readMem(0xdf2b));
        EXPECT(0xbe, gbc.readMem(0xdf2c));
        // CB BE 01A6
        gbc.setState(0x12ab, 0x8fb3, 0xd6a0, 0x625f, 0x503c, 0xe23a, 0x1, 0x1);
        gbc.writeMem(0x12ab, { 0xcb, 0xbe });
        gbc.writeMem(0xe23a, { 0xbd });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x8fb3, gbc.sp());
        EXPECT(0x12ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xe23a));
        // CB BE 01A7
        gbc.setState(0x761c, 0xa42f, 0x13f0, 0x5303, 0x83ca, 0xf4b9, 0x0, 0x0);
        gbc.writeMem(0x761c, { 0xcb, 0xbe });
        gbc.writeMem(0xf4b9, { 0xfd });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xa42f, gbc.sp());
        EXPECT(0x761e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0xf4b9));
        // CB BE 01A8
        gbc.setState(0x3f1c, 0x9c4, 0xed20, 0x85c7, 0x7fb5, 0xcebf, 0x0, 0x1);
        gbc.writeMem(0x3f1c, { 0xcb, 0xbe });
        gbc.writeMem(0xcebf, { 0x64 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x9c4, gbc.sp());
        EXPECT(0x3f1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0xcebf));
        // CB BE 01A9
        gbc.setState(0x788d, 0xbbd3, 0xdf30, 0xd42a, 0x9ad5, 0xd4f4, 0x0, 0x1);
        gbc.writeMem(0x788d, { 0xcb, 0xbe });
        gbc.writeMem(0xd4f4, { 0x17 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xbbd3, gbc.sp());
        EXPECT(0x788f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0xd4f4));
        // CB BE 01AA
        gbc.setState(0x91f1, 0x7bb2, 0x2ea0, 0xdfcb, 0xe8a0, 0xada2, 0x0, 0x1);
        gbc.writeMem(0x91f1, { 0xcb, 0xbe });
        gbc.writeMem(0xada2, { 0x20 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x7bb2, gbc.sp());
        EXPECT(0x91f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91f1));
        EXPECT(0xbe, gbc.readMem(0x91f2));
        EXPECT(0x20, gbc.readMem(0xada2));
        // CB BE 01AB
        gbc.setState(0x2852, 0x8544, 0x6190, 0xbf1f, 0xa0a8, 0x2fdd, 0x1, 0x1);
        gbc.writeMem(0x2852, { 0xcb, 0xbe });
        gbc.writeMem(0x2fdd, { 0x62 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x8544, gbc.sp());
        EXPECT(0x2854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01AC
        gbc.setState(0xaa2, 0x79de, 0x4040, 0x16a4, 0xc6cf, 0x8934, 0x1, 0x0);
        gbc.writeMem(0xaa2, { 0xcb, 0xbe });
        gbc.writeMem(0x8934, { 0x86 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x79de, gbc.sp());
        EXPECT(0xaa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0x8934));
        // CB BE 01AE
        gbc.setState(0x408f, 0x21fe, 0xa7e0, 0x1ffe, 0xd579, 0xaf8a, 0x1, 0x0);
        gbc.writeMem(0x408f, { 0xcb, 0xbe });
        gbc.writeMem(0xaf8a, { 0xd3 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x21fe, gbc.sp());
        EXPECT(0x4091, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x53, gbc.readMem(0xaf8a));
        // CB BE 01AF
        gbc.setState(0xedeb, 0xa1e6, 0x79a0, 0xc0ac, 0xb31d, 0x3d71, 0x1, 0x1);
        gbc.writeMem(0x3d71, { 0x56 });
        gbc.writeMem(0xedeb, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xa1e6, gbc.sp());
        EXPECT(0xeded, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xedeb));
        EXPECT(0xbe, gbc.readMem(0xedec));
        // CB BE 01B0
        gbc.setState(0x3842, 0x45f6, 0x2160, 0x3366, 0x2e7d, 0x8fd6, 0x1, 0x0);
        gbc.writeMem(0x3842, { 0xcb, 0xbe });
        gbc.writeMem(0x8fd6, { 0x70 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x45f6, gbc.sp());
        EXPECT(0x3844, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0x8fd6));
        // CB BE 01B1
        gbc.setState(0x9bcc, 0xd88b, 0x87a0, 0x48de, 0x861c, 0xab03, 0x0, 0x1);
        gbc.writeMem(0x9bcc, { 0xcb, 0xbe });
        gbc.writeMem(0xab03, { 0xf4 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xd88b, gbc.sp());
        EXPECT(0x9bce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bcc));
        EXPECT(0xbe, gbc.readMem(0x9bcd));
        EXPECT(0x74, gbc.readMem(0xab03));
        // CB BE 01B2
        gbc.setState(0x3fcc, 0x15a5, 0x26e0, 0xc536, 0xd3e9, 0xc6e8, 0x0, 0x1);
        gbc.writeMem(0x3fcc, { 0xcb, 0xbe });
        gbc.writeMem(0xc6e8, { 0xf1 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x15a5, gbc.sp());
        EXPECT(0x3fce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0xc6e8));
        // CB BE 01B3
        gbc.setState(0x2694, 0xcb6f, 0x3590, 0x3b18, 0x88dc, 0x227a, 0x1, 0x0);
        gbc.writeMem(0x227a, { 0x5a });
        gbc.writeMem(0x2694, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xcb6f, gbc.sp());
        EXPECT(0x2696, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01B5
        gbc.setState(0xd820, 0x43a8, 0xffe0, 0x3b55, 0x5a59, 0xff45, 0x1, 0x1);
        gbc.writeMem(0xd820, { 0xcb, 0xbe });
        gbc.writeMem(0xff45, { 0xd4 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x43a8, gbc.sp());
        EXPECT(0xd822, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd820));
        EXPECT(0xbe, gbc.readMem(0xd821));
        EXPECT(0x54, gbc.readMem(0xff45));
        // CB BE 01B6
        gbc.setState(0x3cf, 0xe9e2, 0xa350, 0x73b0, 0x5861, 0x415f, 0x1, 0x1);
        gbc.writeMem(0x3cf, { 0xcb, 0xbe });
        gbc.writeMem(0x415f, { 0x12 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xe9e2, gbc.sp());
        EXPECT(0x3d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01B7
        gbc.setState(0x104a, 0xe505, 0x3350, 0x5c9c, 0x2ba8, 0xaf8d, 0x0, 0x0);
        gbc.writeMem(0x104a, { 0xcb, 0xbe });
        gbc.writeMem(0xaf8d, { 0xb });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xe505, gbc.sp());
        EXPECT(0x104c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xaf8d));
        // CB BE 01B8
        gbc.setState(0xd4f, 0x6cca, 0xb880, 0x2c68, 0x8e99, 0x112, 0x1, 0x1);
        gbc.writeMem(0x112, { 0x17 });
        gbc.writeMem(0xd4f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x6cca, gbc.sp());
        EXPECT(0xd51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01B9
        gbc.setState(0x628c, 0x8815, 0x2350, 0x50f6, 0xc713, 0xc6d6, 0x1, 0x1);
        gbc.writeMem(0x628c, { 0xcb, 0xbe });
        gbc.writeMem(0xc6d6, { 0x62 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x8815, gbc.sp());
        EXPECT(0x628e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xc6d6));
        // CB BE 01BA
        gbc.setState(0x4047, 0xbb50, 0x3930, 0x5b52, 0x518e, 0xa79d, 0x0, 0x0);
        gbc.writeMem(0x4047, { 0xcb, 0xbe });
        gbc.writeMem(0xa79d, { 0xec });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xbb50, gbc.sp());
        EXPECT(0x4049, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0xa79d));
        // CB BE 01BB
        gbc.setState(0xe6c3, 0xbb17, 0x2a0, 0x2721, 0x1bf6, 0x68e9, 0x1, 0x0);
        gbc.writeMem(0x68e9, { 0xb });
        gbc.writeMem(0xe6c3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xbb17, gbc.sp());
        EXPECT(0xe6c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe6c3));
        EXPECT(0xbe, gbc.readMem(0xe6c4));
        // CB BE 01BD
        gbc.setState(0x667f, 0x5211, 0xabd0, 0xb548, 0x57f6, 0xcbdb, 0x0, 0x0);
        gbc.writeMem(0x667f, { 0xcb, 0xbe });
        gbc.writeMem(0xcbdb, { 0x9d });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5211, gbc.sp());
        EXPECT(0x6681, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0xcbdb));
        // CB BE 01BE
        gbc.setState(0x32cb, 0xddf7, 0x2b50, 0x6c9, 0xaaa, 0x8801, 0x1, 0x1);
        gbc.writeMem(0x32cb, { 0xcb, 0xbe });
        gbc.writeMem(0x8801, { 0xbe });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xddf7, gbc.sp());
        EXPECT(0x32cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0x8801));
        // CB BE 01BF
        gbc.setState(0xdddc, 0x44b1, 0x42b0, 0xab21, 0xdb0d, 0xd4de, 0x1, 0x1);
        gbc.writeMem(0xd4de, { 0xd1 });
        gbc.writeMem(0xdddc, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x44b1, gbc.sp());
        EXPECT(0xddde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x51, gbc.readMem(0xd4de));
        EXPECT(0xcb, gbc.readMem(0xdddc));
        EXPECT(0xbe, gbc.readMem(0xdddd));
        // CB BE 01C1
        gbc.setState(0xd2a7, 0x2c52, 0xcca0, 0x735c, 0x4c6b, 0x9233, 0x0, 0x1);
        gbc.writeMem(0x9233, { 0x96 });
        gbc.writeMem(0xd2a7, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x2c52, gbc.sp());
        EXPECT(0xd2a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x16, gbc.readMem(0x9233));
        EXPECT(0xcb, gbc.readMem(0xd2a7));
        EXPECT(0xbe, gbc.readMem(0xd2a8));
        // CB BE 01C2
        gbc.setState(0xeeae, 0xb056, 0x30c0, 0x328a, 0xb4b, 0x30e0, 0x1, 0x0);
        gbc.writeMem(0x30e0, { 0x70 });
        gbc.writeMem(0xeeae, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xb056, gbc.sp());
        EXPECT(0xeeb0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeeae));
        EXPECT(0xbe, gbc.readMem(0xeeaf));
        // CB BE 01C5
        gbc.setState(0xa378, 0x1508, 0x1320, 0xd508, 0x48be, 0x1a0b, 0x1, 0x1);
        gbc.writeMem(0x1a0b, { 0xb });
        gbc.writeMem(0xa378, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x1508, gbc.sp());
        EXPECT(0xa37a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa378));
        EXPECT(0xbe, gbc.readMem(0xa379));
        // CB BE 01C7
        gbc.setState(0x6734, 0xf91, 0xa7b0, 0xc8c, 0x4a3, 0xb5be, 0x1, 0x1);
        gbc.writeMem(0x6734, { 0xcb, 0xbe });
        gbc.writeMem(0xb5be, { 0xf });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xf91, gbc.sp());
        EXPECT(0x6736, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xb5be));
        // CB BE 01C9
        gbc.setState(0x95a8, 0x1c9f, 0xd3f0, 0x870d, 0x1932, 0x505a, 0x0, 0x0);
        gbc.writeMem(0x505a, { 0x15 });
        gbc.writeMem(0x95a8, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x1c9f, gbc.sp());
        EXPECT(0x95aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95a8));
        EXPECT(0xbe, gbc.readMem(0x95a9));
        // CB BE 01CA
        gbc.setState(0x2699, 0x18a1, 0x4520, 0xe6c4, 0xedb0, 0xe8dc, 0x1, 0x0);
        gbc.writeMem(0x2699, { 0xcb, 0xbe });
        gbc.writeMem(0xe8dc, { 0x71 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x18a1, gbc.sp());
        EXPECT(0x269b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0xe8dc));
        // CB BE 01CB
        gbc.setState(0x26eb, 0x6207, 0x3b10, 0xded9, 0xc83d, 0xfb31, 0x0, 0x0);
        gbc.writeMem(0x26eb, { 0xcb, 0xbe });
        gbc.writeMem(0xfb31, { 0xeb });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x6207, gbc.sp());
        EXPECT(0x26ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xfb31));
        // CB BE 01CC
        gbc.setState(0x3c2b, 0x3d52, 0xdd30, 0xde6c, 0xd421, 0x9599, 0x0, 0x0);
        gbc.writeMem(0x3c2b, { 0xcb, 0xbe });
        gbc.writeMem(0x9599, { 0x9d });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x3d52, gbc.sp());
        EXPECT(0x3c2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0x9599));
        // CB BE 01CD
        gbc.setState(0x3036, 0xb986, 0x4750, 0xdda1, 0x3a54, 0xaabb, 0x1, 0x0);
        gbc.writeMem(0x3036, { 0xcb, 0xbe });
        gbc.writeMem(0xaabb, { 0xd7 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb986, gbc.sp());
        EXPECT(0x3038, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xaabb));
        // CB BE 01CE
        gbc.setState(0x4e84, 0x56dc, 0x2d90, 0x53b1, 0x33a9, 0x1824, 0x0, 0x1);
        gbc.writeMem(0x1824, { 0x0 });
        gbc.writeMem(0x4e84, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x56dc, gbc.sp());
        EXPECT(0x4e86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01CF
        gbc.setState(0xe3ae, 0xcd7, 0x26e0, 0x8e27, 0x3601, 0xb562, 0x1, 0x1);
        gbc.writeMem(0xb562, { 0xfa });
        gbc.writeMem(0xe3ae, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xcd7, gbc.sp());
        EXPECT(0xe3b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7a, gbc.readMem(0xb562));
        EXPECT(0xcb, gbc.readMem(0xe3ae));
        EXPECT(0xbe, gbc.readMem(0xe3af));
        // CB BE 01D0
        gbc.setState(0x5209, 0xcc80, 0xc4a0, 0x6f1d, 0x1a80, 0x8866, 0x0, 0x1);
        gbc.writeMem(0x5209, { 0xcb, 0xbe });
        gbc.writeMem(0x8866, { 0x1d });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xcc80, gbc.sp());
        EXPECT(0x520b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0x8866));
        // CB BE 01D1
        gbc.setState(0x7d3b, 0x23da, 0x6580, 0x7809, 0x2f4e, 0x2e30, 0x1, 0x0);
        gbc.writeMem(0x2e30, { 0x4a });
        gbc.writeMem(0x7d3b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x23da, gbc.sp());
        EXPECT(0x7d3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01D3
        gbc.setState(0xcb3, 0x4295, 0x580, 0x480a, 0x58c4, 0xc037, 0x1, 0x0);
        gbc.writeMem(0xcb3, { 0xcb, 0xbe });
        gbc.writeMem(0xc037, { 0xa });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x4295, gbc.sp());
        EXPECT(0xcb5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xc037));
        // CB BE 01D4
        gbc.setState(0x932, 0x429d, 0x3df0, 0x5c3c, 0xf5e9, 0xf5db, 0x0, 0x0);
        gbc.writeMem(0x932, { 0xcb, 0xbe });
        gbc.writeMem(0xf5db, { 0x1f });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x429d, gbc.sp());
        EXPECT(0x934, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0xf5db));
        // CB BE 01D5
        gbc.setState(0x8f08, 0x4101, 0x5e00, 0xf344, 0xa6cb, 0xf7ac, 0x0, 0x0);
        gbc.writeMem(0x8f08, { 0xcb, 0xbe });
        gbc.writeMem(0xf7ac, { 0x73 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x4101, gbc.sp());
        EXPECT(0x8f0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f08));
        EXPECT(0xbe, gbc.readMem(0x8f09));
        EXPECT(0x73, gbc.readMem(0xf7ac));
        // CB BE 01D6
        gbc.setState(0x12be, 0x586e, 0xf1d0, 0x6e53, 0x34ce, 0x2d80, 0x1, 0x0);
        gbc.writeMem(0x12be, { 0xcb, 0xbe });
        gbc.writeMem(0x2d80, { 0x6b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x586e, gbc.sp());
        EXPECT(0x12c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01D7
        gbc.setState(0xa2cb, 0xd420, 0xf420, 0xf134, 0xf9e4, 0x9870, 0x0, 0x1);
        gbc.writeMem(0x9870, { 0x1c });
        gbc.writeMem(0xa2cb, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd420, gbc.sp());
        EXPECT(0xa2cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0x9870));
        EXPECT(0xcb, gbc.readMem(0xa2cb));
        EXPECT(0xbe, gbc.readMem(0xa2cc));
        // CB BE 01D8
        gbc.setState(0xcd14, 0x3bb2, 0x2550, 0x11e3, 0xaac1, 0x1d00, 0x0, 0x1);
        gbc.writeMem(0x1d00, { 0x76 });
        gbc.writeMem(0xcd14, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x3bb2, gbc.sp());
        EXPECT(0xcd16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd14));
        EXPECT(0xbe, gbc.readMem(0xcd15));
        // CB BE 01D9
        gbc.setState(0xb56c, 0x8a88, 0x3f40, 0x9b78, 0x82f, 0x659, 0x1, 0x1);
        gbc.writeMem(0x659, { 0x18 });
        gbc.writeMem(0xb56c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x8a88, gbc.sp());
        EXPECT(0xb56e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb56c));
        EXPECT(0xbe, gbc.readMem(0xb56d));
        // CB BE 01DA
        gbc.setState(0x1e0c, 0x3f8b, 0x9bc0, 0xab95, 0xc74e, 0x62f3, 0x0, 0x1);
        gbc.writeMem(0x1e0c, { 0xcb, 0xbe });
        gbc.writeMem(0x62f3, { 0x7c });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x3f8b, gbc.sp());
        EXPECT(0x1e0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01DB
        gbc.setState(0x9819, 0x2f7d, 0xfcf0, 0xcaea, 0x8b33, 0x5a19, 0x0, 0x0);
        gbc.writeMem(0x5a19, { 0x61 });
        gbc.writeMem(0x9819, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x2f7d, gbc.sp());
        EXPECT(0x981b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9819));
        EXPECT(0xbe, gbc.readMem(0x981a));
        // CB BE 01DC
        gbc.setState(0x6ba2, 0x5b09, 0xa6b0, 0xebad, 0x8321, 0x8902, 0x0, 0x1);
        gbc.writeMem(0x6ba2, { 0xcb, 0xbe });
        gbc.writeMem(0x8902, { 0x7b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x5b09, gbc.sp());
        EXPECT(0x6ba4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7b, gbc.readMem(0x8902));
        // CB BE 01DE
        gbc.setState(0xc93f, 0x5f9c, 0x25e0, 0x7192, 0x1039, 0x8c81, 0x1, 0x0);
        gbc.writeMem(0x8c81, { 0x85 });
        gbc.writeMem(0xc93f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x5f9c, gbc.sp());
        EXPECT(0xc941, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x8c81));
        EXPECT(0xcb, gbc.readMem(0xc93f));
        EXPECT(0xbe, gbc.readMem(0xc940));
        // CB BE 01E0
        gbc.setState(0xb29d, 0xd283, 0xe460, 0xe71e, 0xbe4, 0xa94c, 0x0, 0x0);
        gbc.writeMem(0xa94c, { 0x20 });
        gbc.writeMem(0xb29d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xd283, gbc.sp());
        EXPECT(0xb29f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0xa94c));
        EXPECT(0xcb, gbc.readMem(0xb29d));
        EXPECT(0xbe, gbc.readMem(0xb29e));
        // CB BE 01E1
        gbc.setState(0x51d1, 0x6bf7, 0xe4f0, 0x1340, 0x434b, 0x628d, 0x0, 0x1);
        gbc.writeMem(0x51d1, { 0xcb, 0xbe });
        gbc.writeMem(0x628d, { 0x7b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x6bf7, gbc.sp());
        EXPECT(0x51d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01E3
        gbc.setState(0x6a68, 0xb466, 0xf2b0, 0xd3d8, 0x3a7, 0xf487, 0x0, 0x1);
        gbc.writeMem(0x6a68, { 0xcb, 0xbe });
        gbc.writeMem(0xf487, { 0xee });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xb466, gbc.sp());
        EXPECT(0x6a6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0xf487));
        // CB BE 01E4
        gbc.setState(0x3be7, 0xe58e, 0xc140, 0x8f00, 0x9618, 0xe9ca, 0x1, 0x1);
        gbc.writeMem(0x3be7, { 0xcb, 0xbe });
        gbc.writeMem(0xe9ca, { 0xa6 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xe58e, gbc.sp());
        EXPECT(0x3be9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xe9ca));
        // CB BE 01E5
        gbc.setState(0x9da3, 0x7752, 0x1780, 0x99f5, 0xdcbb, 0xf152, 0x1, 0x0);
        gbc.writeMem(0x9da3, { 0xcb, 0xbe });
        gbc.writeMem(0xf152, { 0xc5 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x7752, gbc.sp());
        EXPECT(0x9da5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9da3));
        EXPECT(0xbe, gbc.readMem(0x9da4));
        EXPECT(0x45, gbc.readMem(0xf152));
        // CB BE 01E6
        gbc.setState(0x633d, 0x3153, 0x1330, 0x4b93, 0xc7f5, 0x494d, 0x0, 0x0);
        gbc.writeMem(0x494d, { 0xd });
        gbc.writeMem(0x633d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x3153, gbc.sp());
        EXPECT(0x633f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01E7
        gbc.setState(0x5258, 0xb40b, 0x3620, 0x2507, 0x43ce, 0x9a0, 0x0, 0x1);
        gbc.writeMem(0x9a0, { 0x7 });
        gbc.writeMem(0x5258, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xb40b, gbc.sp());
        EXPECT(0x525a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01E9
        gbc.setState(0x70a6, 0x794a, 0x31c0, 0xdf75, 0x9ed9, 0xbac1, 0x1, 0x0);
        gbc.writeMem(0x70a6, { 0xcb, 0xbe });
        gbc.writeMem(0xbac1, { 0xfc });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x794a, gbc.sp());
        EXPECT(0x70a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0xbac1));
        // CB BE 01EA
        gbc.setState(0xb23, 0x1888, 0x2370, 0x66e5, 0x47f4, 0x9cae, 0x1, 0x1);
        gbc.writeMem(0xb23, { 0xcb, 0xbe });
        gbc.writeMem(0x9cae, { 0xc6 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x1888, gbc.sp());
        EXPECT(0xb25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0x9cae));
        // CB BE 01EB
        gbc.setState(0x7939, 0xcac7, 0x6750, 0x9fe3, 0x1e1e, 0x14b6, 0x0, 0x0);
        gbc.writeMem(0x14b6, { 0x5 });
        gbc.writeMem(0x7939, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xcac7, gbc.sp());
        EXPECT(0x793b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01EC
        gbc.setState(0xd7b3, 0x3ba9, 0x3f30, 0x3185, 0xf78a, 0xd62f, 0x1, 0x0);
        gbc.writeMem(0xd62f, { 0x67 });
        gbc.writeMem(0xd7b3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x3ba9, gbc.sp());
        EXPECT(0xd7b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0xd62f));
        EXPECT(0xcb, gbc.readMem(0xd7b3));
        EXPECT(0xbe, gbc.readMem(0xd7b4));
        // CB BE 01EE
        gbc.setState(0x17df, 0x5d46, 0xa760, 0xb14d, 0x7d62, 0x529d, 0x1, 0x1);
        gbc.writeMem(0x17df, { 0xcb, 0xbe });
        gbc.writeMem(0x529d, { 0x15 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x5d46, gbc.sp());
        EXPECT(0x17e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01EF
        gbc.setState(0x46f, 0x1b1f, 0x5ec0, 0xcedf, 0x12d7, 0x963e, 0x1, 0x0);
        gbc.writeMem(0x46f, { 0xcb, 0xbe });
        gbc.writeMem(0x963e, { 0xe });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x1b1f, gbc.sp());
        EXPECT(0x471, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0x963e));
        // CB BE 01F0
        gbc.setState(0xbe55, 0x5002, 0x3d70, 0x20b0, 0xb1a5, 0x228c, 0x0, 0x0);
        gbc.writeMem(0x228c, { 0x44 });
        gbc.writeMem(0xbe55, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x5002, gbc.sp());
        EXPECT(0xbe57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbe55));
        EXPECT(0xbe, gbc.readMem(0xbe56));
        // CB BE 01F1
        gbc.setState(0x9f, 0xf8, 0x7980, 0xe58b, 0x7e9d, 0x27ad, 0x0, 0x0);
        gbc.writeMem(0x9f, { 0xcb, 0xbe });
        gbc.writeMem(0x27ad, { 0x1a });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xf8, gbc.sp());
        EXPECT(0xa1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01F5
        gbc.setState(0x59ee, 0x4d91, 0xcc70, 0x51d6, 0xda14, 0x3c9d, 0x0, 0x1);
        gbc.writeMem(0x3c9d, { 0x26 });
        gbc.writeMem(0x59ee, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x4d91, gbc.sp());
        EXPECT(0x59f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01F6
        gbc.setState(0x5381, 0x9aec, 0xbd90, 0x94e3, 0xc020, 0x894, 0x0, 0x0);
        gbc.writeMem(0x894, { 0x1f });
        gbc.writeMem(0x5381, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x9aec, gbc.sp());
        EXPECT(0x5383, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01F7
        gbc.setState(0x7bf3, 0x13fb, 0x6000, 0x4489, 0x5f5a, 0x45bc, 0x0, 0x1);
        gbc.writeMem(0x45bc, { 0xb });
        gbc.writeMem(0x7bf3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x13fb, gbc.sp());
        EXPECT(0x7bf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 01F9
        gbc.setState(0x1b97, 0xb7d, 0x2ac0, 0x330c, 0x7605, 0x84df, 0x1, 0x1);
        gbc.writeMem(0x1b97, { 0xcb, 0xbe });
        gbc.writeMem(0x84df, { 0x47 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xb7d, gbc.sp());
        EXPECT(0x1b99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x47, gbc.readMem(0x84df));
        // CB BE 01FD
        gbc.setState(0x4c04, 0x61d8, 0x27d0, 0xc923, 0xf6a3, 0x1351, 0x1, 0x1);
        gbc.writeMem(0x1351, { 0x57 });
        gbc.writeMem(0x4c04, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x61d8, gbc.sp());
        EXPECT(0x4c06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 01FE
        gbc.setState(0xbaf, 0x3642, 0x3e0, 0x32cc, 0x20c9, 0xb42c, 0x0, 0x0);
        gbc.writeMem(0xbaf, { 0xcb, 0xbe });
        gbc.writeMem(0xb42c, { 0x92 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x3642, gbc.sp());
        EXPECT(0xbb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x12, gbc.readMem(0xb42c));
        // CB BE 01FF
        gbc.setState(0x1caa, 0x30c2, 0xde10, 0xdced, 0x3872, 0x20a2, 0x0, 0x0);
        gbc.writeMem(0x1caa, { 0xcb, 0xbe });
        gbc.writeMem(0x20a2, { 0x1a });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x30c2, gbc.sp());
        EXPECT(0x1cac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0200
        gbc.setState(0x7e18, 0xba29, 0x4f40, 0xa649, 0x1eaf, 0x82dd, 0x0, 0x1);
        gbc.writeMem(0x7e18, { 0xcb, 0xbe });
        gbc.writeMem(0x82dd, { 0xe9 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xba29, gbc.sp());
        EXPECT(0x7e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0x82dd));
        // CB BE 0202
        gbc.setState(0x28b9, 0xa888, 0xb950, 0xdc4a, 0xbd1c, 0xea36, 0x1, 0x0);
        gbc.writeMem(0x28b9, { 0xcb, 0xbe });
        gbc.writeMem(0xea36, { 0xad });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xa888, gbc.sp());
        EXPECT(0x28bb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0xea36));
        // CB BE 0205
        gbc.setState(0xd0d2, 0x33ef, 0x1e00, 0x108f, 0x4814, 0x1023, 0x0, 0x0);
        gbc.writeMem(0x1023, { 0x41 });
        gbc.writeMem(0xd0d2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x33ef, gbc.sp());
        EXPECT(0xd0d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0d2));
        EXPECT(0xbe, gbc.readMem(0xd0d3));
        // CB BE 0206
        gbc.setState(0xc773, 0xf260, 0x4ea0, 0x597d, 0xa450, 0xf68f, 0x1, 0x0);
        gbc.writeMem(0xc773, { 0xcb, 0xbe });
        gbc.writeMem(0xf68f, { 0x88 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xf260, gbc.sp());
        EXPECT(0xc775, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc773));
        EXPECT(0xbe, gbc.readMem(0xc774));
        EXPECT(0x8, gbc.readMem(0xf68f));
        // CB BE 0207
        gbc.setState(0xfbd, 0x4952, 0xcce0, 0x6ab7, 0x4d9e, 0xf50c, 0x0, 0x0);
        gbc.writeMem(0xfbd, { 0xcb, 0xbe });
        gbc.writeMem(0xf50c, { 0xd7 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x4952, gbc.sp());
        EXPECT(0xfbf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xf50c));
        // CB BE 0209
        gbc.setState(0x167c, 0xc631, 0x30c0, 0x1372, 0x5568, 0xbe77, 0x0, 0x0);
        gbc.writeMem(0x167c, { 0xcb, 0xbe });
        gbc.writeMem(0xbe77, { 0x1 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xc631, gbc.sp());
        EXPECT(0x167e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xbe77));
        // CB BE 020C
        gbc.setState(0x1a01, 0x664, 0x6130, 0x3fa2, 0xf861, 0xfb6c, 0x1, 0x1);
        gbc.writeMem(0x1a01, { 0xcb, 0xbe });
        gbc.writeMem(0xfb6c, { 0x11 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x664, gbc.sp());
        EXPECT(0x1a03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xfb6c));
        // CB BE 020F
        gbc.setState(0x709a, 0x82ec, 0x9820, 0x3774, 0x6172, 0x4b8d, 0x0, 0x0);
        gbc.writeMem(0x4b8d, { 0x28 });
        gbc.writeMem(0x709a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x82ec, gbc.sp());
        EXPECT(0x709c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0213
        gbc.setState(0x2b6c, 0xc9f3, 0xb880, 0xd555, 0x4440, 0xcc92, 0x1, 0x0);
        gbc.writeMem(0x2b6c, { 0xcb, 0xbe });
        gbc.writeMem(0xcc92, { 0xca });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xc9f3, gbc.sp());
        EXPECT(0x2b6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xcc92));
        // CB BE 0215
        gbc.setState(0xe195, 0xf28d, 0x7290, 0xda70, 0x5a46, 0x18bb, 0x1, 0x1);
        gbc.writeMem(0x18bb, { 0x3c });
        gbc.writeMem(0xe195, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xf28d, gbc.sp());
        EXPECT(0xe197, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe195));
        EXPECT(0xbe, gbc.readMem(0xe196));
        // CB BE 0216
        gbc.setState(0xb852, 0xb492, 0x69f0, 0x4faa, 0x64d7, 0x909d, 0x0, 0x0);
        gbc.writeMem(0x909d, { 0xd7 });
        gbc.writeMem(0xb852, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xb492, gbc.sp());
        EXPECT(0xb854, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0x909d));
        EXPECT(0xcb, gbc.readMem(0xb852));
        EXPECT(0xbe, gbc.readMem(0xb853));
        // CB BE 0217
        gbc.setState(0x8392, 0xae32, 0x4bf0, 0xf0e0, 0x6948, 0x2e92, 0x1, 0x0);
        gbc.writeMem(0x2e92, { 0x32 });
        gbc.writeMem(0x8392, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xae32, gbc.sp());
        EXPECT(0x8394, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8392));
        EXPECT(0xbe, gbc.readMem(0x8393));
        // CB BE 0218
        gbc.setState(0xc133, 0xb76a, 0xcd10, 0x4d61, 0xb9ce, 0x587d, 0x0, 0x1);
        gbc.writeMem(0x587d, { 0x45 });
        gbc.writeMem(0xc133, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xb76a, gbc.sp());
        EXPECT(0xc135, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc133));
        EXPECT(0xbe, gbc.readMem(0xc134));
        // CB BE 021A
        gbc.setState(0xbddf, 0xc28a, 0x7dd0, 0x9670, 0xbcc5, 0xca21, 0x0, 0x1);
        gbc.writeMem(0xbddf, { 0xcb, 0xbe });
        gbc.writeMem(0xca21, { 0xca });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xc28a, gbc.sp());
        EXPECT(0xbde1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbddf));
        EXPECT(0xbe, gbc.readMem(0xbde0));
        EXPECT(0x4a, gbc.readMem(0xca21));
        // CB BE 021B
        gbc.setState(0x3c08, 0xc61, 0xa020, 0xa774, 0xd1e2, 0x738f, 0x1, 0x0);
        gbc.writeMem(0x3c08, { 0xcb, 0xbe });
        gbc.writeMem(0x738f, { 0x3f });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xc61, gbc.sp());
        EXPECT(0x3c0a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 021C
        gbc.setState(0x589e, 0x3cf5, 0xc370, 0xd3d4, 0x8dba, 0xf6ba, 0x1, 0x0);
        gbc.writeMem(0x589e, { 0xcb, 0xbe });
        gbc.writeMem(0xf6ba, { 0x2f });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x3cf5, gbc.sp());
        EXPECT(0x58a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xf6ba));
        // CB BE 021D
        gbc.setState(0x53be, 0x50a9, 0xc8c0, 0xea7c, 0x898c, 0x5b7f, 0x1, 0x0);
        gbc.writeMem(0x53be, { 0xcb, 0xbe });
        gbc.writeMem(0x5b7f, { 0x4a });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x50a9, gbc.sp());
        EXPECT(0x53c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0220
        gbc.setState(0x5a59, 0xed3e, 0xf4a0, 0x62f4, 0x65b3, 0x4a49, 0x1, 0x1);
        gbc.writeMem(0x4a49, { 0x3d });
        gbc.writeMem(0x5a59, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xed3e, gbc.sp());
        EXPECT(0x5a5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0221
        gbc.setState(0xe353, 0x3377, 0xb670, 0x549, 0x7f2f, 0x6f8e, 0x0, 0x0);
        gbc.writeMem(0x6f8e, { 0x13 });
        gbc.writeMem(0xe353, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x3377, gbc.sp());
        EXPECT(0xe355, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe353));
        EXPECT(0xbe, gbc.readMem(0xe354));
        // CB BE 0222
        gbc.setState(0xc233, 0x6150, 0x5c90, 0xb3ff, 0xa756, 0x415a, 0x1, 0x0);
        gbc.writeMem(0x415a, { 0x7a });
        gbc.writeMem(0xc233, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x6150, gbc.sp());
        EXPECT(0xc235, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc233));
        EXPECT(0xbe, gbc.readMem(0xc234));
        // CB BE 0223
        gbc.setState(0xd1b3, 0x7eea, 0xcfa0, 0x8181, 0x313c, 0xd500, 0x1, 0x0);
        gbc.writeMem(0xd1b3, { 0xcb, 0xbe });
        gbc.writeMem(0xd500, { 0xdd });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x7eea, gbc.sp());
        EXPECT(0xd1b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1b3));
        EXPECT(0xbe, gbc.readMem(0xd1b4));
        EXPECT(0x5d, gbc.readMem(0xd500));
        // CB BE 0224
        gbc.setState(0xa89b, 0xd337, 0x5bb0, 0xafa5, 0x233f, 0xd71f, 0x1, 0x1);
        gbc.writeMem(0xa89b, { 0xcb, 0xbe });
        gbc.writeMem(0xd71f, { 0x7 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xd337, gbc.sp());
        EXPECT(0xa89d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa89b));
        EXPECT(0xbe, gbc.readMem(0xa89c));
        EXPECT(0x7, gbc.readMem(0xd71f));
        // CB BE 0225
        gbc.setState(0x3377, 0xee1, 0xb580, 0x6534, 0xa16d, 0x3817, 0x1, 0x0);
        gbc.writeMem(0x3377, { 0xcb, 0xbe });
        gbc.writeMem(0x3817, { 0x54 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xee1, gbc.sp());
        EXPECT(0x3379, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0226
        gbc.setState(0xd273, 0x2e4c, 0x8830, 0x4c3b, 0x5be2, 0xcb90, 0x0, 0x0);
        gbc.writeMem(0xcb90, { 0x29 });
        gbc.writeMem(0xd273, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x2e4c, gbc.sp());
        EXPECT(0xd275, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xcb90));
        EXPECT(0xcb, gbc.readMem(0xd273));
        EXPECT(0xbe, gbc.readMem(0xd274));
        // CB BE 0229
        gbc.setState(0x9228, 0xc795, 0xe2b0, 0xc8a, 0x5bb4, 0x56c0, 0x1, 0x1);
        gbc.writeMem(0x56c0, { 0x24 });
        gbc.writeMem(0x9228, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xc795, gbc.sp());
        EXPECT(0x922a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9228));
        EXPECT(0xbe, gbc.readMem(0x9229));
        // CB BE 022A
        gbc.setState(0xede6, 0xa815, 0x8800, 0xe284, 0xae9c, 0xc79c, 0x0, 0x0);
        gbc.writeMem(0xc79c, { 0x62 });
        gbc.writeMem(0xede6, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xa815, gbc.sp());
        EXPECT(0xede8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xc79c));
        EXPECT(0xcb, gbc.readMem(0xede6));
        EXPECT(0xbe, gbc.readMem(0xede7));
        // CB BE 022B
        gbc.setState(0x2b69, 0x952e, 0x8ec0, 0x5706, 0x2ffd, 0x8b73, 0x1, 0x0);
        gbc.writeMem(0x2b69, { 0xcb, 0xbe });
        gbc.writeMem(0x8b73, { 0xd3 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x952e, gbc.sp());
        EXPECT(0x2b6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x53, gbc.readMem(0x8b73));
        // CB BE 022C
        gbc.setState(0x78d4, 0x93f7, 0xec60, 0x20a3, 0xc906, 0x35b2, 0x0, 0x0);
        gbc.writeMem(0x35b2, { 0x8 });
        gbc.writeMem(0x78d4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x93f7, gbc.sp());
        EXPECT(0x78d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 022D
        gbc.setState(0x8968, 0xcbe2, 0x90c0, 0xdecf, 0x8c65, 0xd7bc, 0x0, 0x0);
        gbc.writeMem(0x8968, { 0xcb, 0xbe });
        gbc.writeMem(0xd7bc, { 0xa8 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xcbe2, gbc.sp());
        EXPECT(0x896a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8968));
        EXPECT(0xbe, gbc.readMem(0x8969));
        EXPECT(0x28, gbc.readMem(0xd7bc));
        // CB BE 022E
        gbc.setState(0x2f8a, 0x7bcb, 0xc6e0, 0x6aed, 0x8d82, 0xd540, 0x0, 0x1);
        gbc.writeMem(0x2f8a, { 0xcb, 0xbe });
        gbc.writeMem(0xd540, { 0x47 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x7bcb, gbc.sp());
        EXPECT(0x2f8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x47, gbc.readMem(0xd540));
        // CB BE 022F
        gbc.setState(0xa8f7, 0x7a50, 0x3690, 0x1435, 0xf790, 0xde77, 0x0, 0x0);
        gbc.writeMem(0xa8f7, { 0xcb, 0xbe });
        gbc.writeMem(0xde77, { 0x6c });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x7a50, gbc.sp());
        EXPECT(0xa8f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8f7));
        EXPECT(0xbe, gbc.readMem(0xa8f8));
        EXPECT(0x6c, gbc.readMem(0xde77));
        // CB BE 0230
        gbc.setState(0x65d3, 0xe26c, 0x63d0, 0xc694, 0x25cd, 0x9a68, 0x1, 0x1);
        gbc.writeMem(0x65d3, { 0xcb, 0xbe });
        gbc.writeMem(0x9a68, { 0x7f });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xe26c, gbc.sp());
        EXPECT(0x65d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0x9a68));
        // CB BE 0231
        gbc.setState(0x8b3c, 0x59ed, 0x53e0, 0x78d3, 0xc274, 0x799d, 0x1, 0x1);
        gbc.writeMem(0x799d, { 0x15 });
        gbc.writeMem(0x8b3c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x59ed, gbc.sp());
        EXPECT(0x8b3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b3c));
        EXPECT(0xbe, gbc.readMem(0x8b3d));
        // CB BE 0232
        gbc.setState(0xe3c1, 0x6da1, 0x16f0, 0x7539, 0xb5bc, 0xc3a4, 0x1, 0x0);
        gbc.writeMem(0xc3a4, { 0x2a });
        gbc.writeMem(0xe3c1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x6da1, gbc.sp());
        EXPECT(0xe3c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xc3a4));
        EXPECT(0xcb, gbc.readMem(0xe3c1));
        EXPECT(0xbe, gbc.readMem(0xe3c2));
        // CB BE 0233
        gbc.setState(0x37d8, 0x1eec, 0xdf10, 0x2299, 0xb782, 0x64e1, 0x1, 0x0);
        gbc.writeMem(0x37d8, { 0xcb, 0xbe });
        gbc.writeMem(0x64e1, { 0x3a });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x1eec, gbc.sp());
        EXPECT(0x37da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0234
        gbc.setState(0xe0c1, 0x8c18, 0xda00, 0xf5f3, 0xf97b, 0xb2ea, 0x1, 0x1);
        gbc.writeMem(0xb2ea, { 0x6f });
        gbc.writeMem(0xe0c1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x8c18, gbc.sp());
        EXPECT(0xe0c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xb2ea));
        EXPECT(0xcb, gbc.readMem(0xe0c1));
        EXPECT(0xbe, gbc.readMem(0xe0c2));
        // CB BE 0235
        gbc.setState(0xadd5, 0x3e75, 0x390, 0x7694, 0x2043, 0xeb14, 0x1, 0x1);
        gbc.writeMem(0xadd5, { 0xcb, 0xbe });
        gbc.writeMem(0xeb14, { 0x8c });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x3e75, gbc.sp());
        EXPECT(0xadd7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadd5));
        EXPECT(0xbe, gbc.readMem(0xadd6));
        EXPECT(0xc, gbc.readMem(0xeb14));
        // CB BE 0237
        gbc.setState(0x6b84, 0x71da, 0xcc10, 0x49b1, 0xf442, 0xa953, 0x0, 0x1);
        gbc.writeMem(0x6b84, { 0xcb, 0xbe });
        gbc.writeMem(0xa953, { 0x69 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x71da, gbc.sp());
        EXPECT(0x6b86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xa953));
        // CB BE 0238
        gbc.setState(0x5024, 0x49b9, 0x9810, 0xd9f3, 0xff3c, 0x2394, 0x1, 0x0);
        gbc.writeMem(0x2394, { 0x3 });
        gbc.writeMem(0x5024, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x49b9, gbc.sp());
        EXPECT(0x5026, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 023A
        gbc.setState(0xdf19, 0xd71e, 0x6630, 0xe064, 0xb501, 0xc86e, 0x1, 0x1);
        gbc.writeMem(0xc86e, { 0x0 });
        gbc.writeMem(0xdf19, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xd71e, gbc.sp());
        EXPECT(0xdf1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0xc86e));
        EXPECT(0xcb, gbc.readMem(0xdf19));
        EXPECT(0xbe, gbc.readMem(0xdf1a));
        // CB BE 023B
        gbc.setState(0x3411, 0x6f7, 0x1c90, 0x2fd5, 0x2a29, 0x8f0d, 0x1, 0x1);
        gbc.writeMem(0x3411, { 0xcb, 0xbe });
        gbc.writeMem(0x8f0d, { 0xe9 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x6f7, gbc.sp());
        EXPECT(0x3413, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0x8f0d));
        // CB BE 023C
        gbc.setState(0x2fe4, 0xb757, 0x9580, 0xd8fc, 0x8881, 0xf5f, 0x0, 0x1);
        gbc.writeMem(0xf5f, { 0x7c });
        gbc.writeMem(0x2fe4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb757, gbc.sp());
        EXPECT(0x2fe6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 023D
        gbc.setState(0x6bc7, 0xee32, 0xf840, 0xe24c, 0xb639, 0xa9a3, 0x1, 0x1);
        gbc.writeMem(0x6bc7, { 0xcb, 0xbe });
        gbc.writeMem(0xa9a3, { 0x5c });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xee32, gbc.sp());
        EXPECT(0x6bc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0xa9a3));
        // CB BE 0241
        gbc.setState(0x80a, 0x2267, 0x62f0, 0xdd5, 0xc77, 0x39fb, 0x0, 0x1);
        gbc.writeMem(0x80a, { 0xcb, 0xbe });
        gbc.writeMem(0x39fb, { 0x4 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x2267, gbc.sp());
        EXPECT(0x80c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0243
        gbc.setState(0x3ecc, 0x30d1, 0xe150, 0x84ba, 0xb0e5, 0x86aa, 0x1, 0x1);
        gbc.writeMem(0x3ecc, { 0xcb, 0xbe });
        gbc.writeMem(0x86aa, { 0x91 });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x30d1, gbc.sp());
        EXPECT(0x3ece, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0x86aa));
        // CB BE 0244
        gbc.setState(0xc308, 0xcc9a, 0x9d50, 0x8420, 0x45b5, 0x9a01, 0x1, 0x1);
        gbc.writeMem(0x9a01, { 0xf7 });
        gbc.writeMem(0xc308, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xcc9a, gbc.sp());
        EXPECT(0xc30a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0x9a01));
        EXPECT(0xcb, gbc.readMem(0xc308));
        EXPECT(0xbe, gbc.readMem(0xc309));
        // CB BE 0245
        gbc.setState(0xb4c5, 0xaec6, 0x5e90, 0x3ebf, 0xbab8, 0xe551, 0x1, 0x1);
        gbc.writeMem(0xb4c5, { 0xcb, 0xbe });
        gbc.writeMem(0xe551, { 0x42 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xaec6, gbc.sp());
        EXPECT(0xb4c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4c5));
        EXPECT(0xbe, gbc.readMem(0xb4c6));
        EXPECT(0x42, gbc.readMem(0xe551));
        // CB BE 0246
        gbc.setState(0x84fb, 0xd3d5, 0x92f0, 0xd824, 0x5dfe, 0xd82a, 0x0, 0x0);
        gbc.writeMem(0x84fb, { 0xcb, 0xbe });
        gbc.writeMem(0xd82a, { 0x1a });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xd3d5, gbc.sp());
        EXPECT(0x84fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84fb));
        EXPECT(0xbe, gbc.readMem(0x84fc));
        EXPECT(0x1a, gbc.readMem(0xd82a));
        // CB BE 0248
        gbc.setState(0x43c2, 0xc7d6, 0x5230, 0xaa69, 0x89fc, 0x94a7, 0x0, 0x1);
        gbc.writeMem(0x43c2, { 0xcb, 0xbe });
        gbc.writeMem(0x94a7, { 0xf4 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xc7d6, gbc.sp());
        EXPECT(0x43c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0x94a7));
        // CB BE 0249
        gbc.setState(0x57b2, 0x751b, 0x6bc0, 0x8733, 0x9e56, 0xc239, 0x0, 0x1);
        gbc.writeMem(0x57b2, { 0xcb, 0xbe });
        gbc.writeMem(0xc239, { 0x7f });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x751b, gbc.sp());
        EXPECT(0x57b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xc239));
        // CB BE 024A
        gbc.setState(0x4385, 0xe8f2, 0x770, 0xcf59, 0xc5ff, 0x8562, 0x1, 0x1);
        gbc.writeMem(0x4385, { 0xcb, 0xbe });
        gbc.writeMem(0x8562, { 0xe9 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xe8f2, gbc.sp());
        EXPECT(0x4387, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0x8562));
        // CB BE 024B
        gbc.setState(0x9d19, 0x7642, 0xf250, 0xc786, 0x2157, 0x4e41, 0x1, 0x1);
        gbc.writeMem(0x4e41, { 0x2e });
        gbc.writeMem(0x9d19, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x7642, gbc.sp());
        EXPECT(0x9d1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d19));
        EXPECT(0xbe, gbc.readMem(0x9d1a));
        // CB BE 024C
        gbc.setState(0x3dd7, 0xae88, 0xce40, 0xf72f, 0x6037, 0xbdf8, 0x1, 0x0);
        gbc.writeMem(0x3dd7, { 0xcb, 0xbe });
        gbc.writeMem(0xbdf8, { 0x29 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xae88, gbc.sp());
        EXPECT(0x3dd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xbdf8));
        // CB BE 024D
        gbc.setState(0x6828, 0x9bee, 0x2280, 0xc765, 0x942e, 0xe29f, 0x1, 0x0);
        gbc.writeMem(0x6828, { 0xcb, 0xbe });
        gbc.writeMem(0xe29f, { 0xac });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x9bee, gbc.sp());
        EXPECT(0x682a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xe29f));
        // CB BE 0251
        gbc.setState(0x938e, 0xb651, 0x5f0, 0xc472, 0xfc54, 0xca35, 0x0, 0x0);
        gbc.writeMem(0x938e, { 0xcb, 0xbe });
        gbc.writeMem(0xca35, { 0xff });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xb651, gbc.sp());
        EXPECT(0x9390, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x938e));
        EXPECT(0xbe, gbc.readMem(0x938f));
        EXPECT(0x7f, gbc.readMem(0xca35));
        // CB BE 0252
        gbc.setState(0x5a28, 0xaaae, 0x16b0, 0x9054, 0xc1e8, 0xcfc0, 0x0, 0x1);
        gbc.writeMem(0x5a28, { 0xcb, 0xbe });
        gbc.writeMem(0xcfc0, { 0x3e });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xaaae, gbc.sp());
        EXPECT(0x5a2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0xcfc0));
        // CB BE 0253
        gbc.setState(0x244d, 0x1b0c, 0xce50, 0x76ff, 0x493c, 0xf3, 0x1, 0x0);
        gbc.writeMem(0xf3, { 0x6c });
        gbc.writeMem(0x244d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x1b0c, gbc.sp());
        EXPECT(0x244f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0254
        gbc.setState(0xbc42, 0xfcba, 0xf360, 0xc065, 0x965a, 0x7bb1, 0x1, 0x1);
        gbc.writeMem(0x7bb1, { 0x79 });
        gbc.writeMem(0xbc42, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xfcba, gbc.sp());
        EXPECT(0xbc44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc42));
        EXPECT(0xbe, gbc.readMem(0xbc43));
        // CB BE 0256
        gbc.setState(0x7fab, 0xf569, 0x29e0, 0x6dde, 0x1bb4, 0x93c5, 0x0, 0x1);
        gbc.writeMem(0x7fab, { 0xcb, 0xbe });
        gbc.writeMem(0x93c5, { 0x9b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xf569, gbc.sp());
        EXPECT(0x7fad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x93c5));
        // CB BE 0257
        gbc.setState(0xcd0c, 0x2a08, 0xecd0, 0xc70d, 0x84e7, 0x66d1, 0x0, 0x1);
        gbc.writeMem(0x66d1, { 0x12 });
        gbc.writeMem(0xcd0c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x2a08, gbc.sp());
        EXPECT(0xcd0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd0c));
        EXPECT(0xbe, gbc.readMem(0xcd0d));
        // CB BE 0258
        gbc.setState(0xee24, 0x140, 0x37f0, 0xf1f6, 0x64fd, 0x3c06, 0x0, 0x0);
        gbc.writeMem(0x3c06, { 0x6c });
        gbc.writeMem(0xee24, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x140, gbc.sp());
        EXPECT(0xee26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee24));
        EXPECT(0xbe, gbc.readMem(0xee25));
        // CB BE 0259
        gbc.setState(0x360e, 0xf68e, 0x7640, 0xe37d, 0x23bf, 0x8967, 0x1, 0x0);
        gbc.writeMem(0x360e, { 0xcb, 0xbe });
        gbc.writeMem(0x8967, { 0x93 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xf68e, gbc.sp());
        EXPECT(0x3610, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0x8967));
        // CB BE 025A
        gbc.setState(0x47, 0x8e18, 0xb230, 0x4b4a, 0x776b, 0xc397, 0x1, 0x0);
        gbc.writeMem(0x47, { 0xcb, 0xbe });
        gbc.writeMem(0xc397, { 0xef });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x8e18, gbc.sp());
        EXPECT(0x49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0xc397));
        // CB BE 025B
        gbc.setState(0x4b8c, 0xc5aa, 0xd010, 0x188f, 0x1cc7, 0xc911, 0x0, 0x1);
        gbc.writeMem(0x4b8c, { 0xcb, 0xbe });
        gbc.writeMem(0xc911, { 0x1 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xc5aa, gbc.sp());
        EXPECT(0x4b8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xc911));
        // CB BE 025C
        gbc.setState(0xdc50, 0xd51d, 0x73c0, 0x3d9c, 0x7223, 0x9966, 0x0, 0x0);
        gbc.writeMem(0x9966, { 0x27 });
        gbc.writeMem(0xdc50, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xd51d, gbc.sp());
        EXPECT(0xdc52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0x9966));
        EXPECT(0xcb, gbc.readMem(0xdc50));
        EXPECT(0xbe, gbc.readMem(0xdc51));
        // CB BE 025E
        gbc.setState(0xe354, 0x3a8b, 0xa790, 0xd265, 0x619e, 0x7559, 0x0, 0x1);
        gbc.writeMem(0x7559, { 0x51 });
        gbc.writeMem(0xe354, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x3a8b, gbc.sp());
        EXPECT(0xe356, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe354));
        EXPECT(0xbe, gbc.readMem(0xe355));
        // CB BE 025F
        gbc.setState(0xcf5a, 0x54f1, 0xf2c0, 0x2625, 0x17bc, 0x9970, 0x1, 0x1);
        gbc.writeMem(0x9970, { 0xb4 });
        gbc.writeMem(0xcf5a, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x54f1, gbc.sp());
        EXPECT(0xcf5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0x9970));
        EXPECT(0xcb, gbc.readMem(0xcf5a));
        EXPECT(0xbe, gbc.readMem(0xcf5b));
        // CB BE 0261
        gbc.setState(0xd73, 0x1a03, 0x5d80, 0x4f2d, 0xf615, 0x9482, 0x0, 0x0);
        gbc.writeMem(0xd73, { 0xcb, 0xbe });
        gbc.writeMem(0x9482, { 0x8 });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x1a03, gbc.sp());
        EXPECT(0xd75, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0x9482));
        // CB BE 0262
        gbc.setState(0xaf7b, 0x748a, 0xdf80, 0x455a, 0xdbed, 0x9079, 0x0, 0x1);
        gbc.writeMem(0x9079, { 0x7f });
        gbc.writeMem(0xaf7b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x748a, gbc.sp());
        EXPECT(0xaf7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0x9079));
        EXPECT(0xcb, gbc.readMem(0xaf7b));
        EXPECT(0xbe, gbc.readMem(0xaf7c));
        // CB BE 0265
        gbc.setState(0x3b8, 0xf14, 0xea40, 0xa8d8, 0xad65, 0xfab8, 0x0, 0x0);
        gbc.writeMem(0x3b8, { 0xcb, 0xbe });
        gbc.writeMem(0xfab8, { 0x37 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xf14, gbc.sp());
        EXPECT(0x3ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0xfab8));
        // CB BE 0267
        gbc.setState(0x9a12, 0x7458, 0x5500, 0x4566, 0x908a, 0xa8a9, 0x1, 0x1);
        gbc.writeMem(0x9a12, { 0xcb, 0xbe });
        gbc.writeMem(0xa8a9, { 0x2f });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x7458, gbc.sp());
        EXPECT(0x9a14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a12));
        EXPECT(0xbe, gbc.readMem(0x9a13));
        EXPECT(0x2f, gbc.readMem(0xa8a9));
        // CB BE 0268
        gbc.setState(0xb04, 0xed22, 0x2dd0, 0xd086, 0xacf5, 0x31e3, 0x1, 0x1);
        gbc.writeMem(0xb04, { 0xcb, 0xbe });
        gbc.writeMem(0x31e3, { 0x5 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xed22, gbc.sp());
        EXPECT(0xb06, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0269
        gbc.setState(0x3acd, 0x6df7, 0xe0e0, 0xbac4, 0x7c0c, 0x6a9a, 0x1, 0x1);
        gbc.writeMem(0x3acd, { 0xcb, 0xbe });
        gbc.writeMem(0x6a9a, { 0x41 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x6df7, gbc.sp());
        EXPECT(0x3acf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 026A
        gbc.setState(0x14b6, 0x6251, 0xe3d0, 0xac9b, 0xf45f, 0x802e, 0x1, 0x1);
        gbc.writeMem(0x14b6, { 0xcb, 0xbe });
        gbc.writeMem(0x802e, { 0x4c });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x6251, gbc.sp());
        EXPECT(0x14b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4c, gbc.readMem(0x802e));
        // CB BE 026B
        gbc.setState(0xd93f, 0x146c, 0x6080, 0xb962, 0x223d, 0xfd12, 0x1, 0x1);
        gbc.writeMem(0xd93f, { 0xcb, 0xbe });
        gbc.writeMem(0xfd12, { 0xc4 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x146c, gbc.sp());
        EXPECT(0xd941, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd93f));
        EXPECT(0xbe, gbc.readMem(0xd940));
        EXPECT(0x44, gbc.readMem(0xfd12));
        // CB BE 026C
        gbc.setState(0x256b, 0x42f2, 0xb500, 0x3045, 0x58a0, 0x6822, 0x1, 0x0);
        gbc.writeMem(0x256b, { 0xcb, 0xbe });
        gbc.writeMem(0x6822, { 0x55 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x42f2, gbc.sp());
        EXPECT(0x256d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 026E
        gbc.setState(0x1dbd, 0x651a, 0x7560, 0xa5c4, 0xee36, 0xc879, 0x1, 0x0);
        gbc.writeMem(0x1dbd, { 0xcb, 0xbe });
        gbc.writeMem(0xc879, { 0x27 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x651a, gbc.sp());
        EXPECT(0x1dbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xc879));
        // CB BE 026F
        gbc.setState(0x7f03, 0x7bae, 0xa400, 0xbeb6, 0xb6f, 0x10b9, 0x0, 0x0);
        gbc.writeMem(0x10b9, { 0x72 });
        gbc.writeMem(0x7f03, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x7bae, gbc.sp());
        EXPECT(0x7f05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0270
        gbc.setState(0x93f4, 0x3eee, 0xea30, 0x5e10, 0x248a, 0xb729, 0x0, 0x1);
        gbc.writeMem(0x93f4, { 0xcb, 0xbe });
        gbc.writeMem(0xb729, { 0xae });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x3eee, gbc.sp());
        EXPECT(0x93f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93f4));
        EXPECT(0xbe, gbc.readMem(0x93f5));
        EXPECT(0x2e, gbc.readMem(0xb729));
        // CB BE 0271
        gbc.setState(0xc831, 0xe38c, 0xaa90, 0xf0a4, 0xff94, 0x18b9, 0x1, 0x0);
        gbc.writeMem(0x18b9, { 0x4a });
        gbc.writeMem(0xc831, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xe38c, gbc.sp());
        EXPECT(0xc833, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc831));
        EXPECT(0xbe, gbc.readMem(0xc832));
        // CB BE 0272
        gbc.setState(0xeb23, 0xbdf2, 0x2890, 0xe268, 0x9849, 0xfbbc, 0x1, 0x1);
        gbc.writeMem(0xeb23, { 0xcb, 0xbe });
        gbc.writeMem(0xfbbc, { 0xf0 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xbdf2, gbc.sp());
        EXPECT(0xeb25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb23));
        EXPECT(0xbe, gbc.readMem(0xeb24));
        EXPECT(0x70, gbc.readMem(0xfbbc));
        // CB BE 0274
        gbc.setState(0xdd2b, 0xd685, 0xf3d0, 0x9bb9, 0x4b25, 0xd02e, 0x1, 0x0);
        gbc.writeMem(0xd02e, { 0xbe });
        gbc.writeMem(0xdd2b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xd685, gbc.sp());
        EXPECT(0xdd2d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0xd02e));
        EXPECT(0xcb, gbc.readMem(0xdd2b));
        EXPECT(0xbe, gbc.readMem(0xdd2c));
        // CB BE 0276
        gbc.setState(0x71b5, 0xc9a, 0x2c10, 0xc85f, 0x2d84, 0x822, 0x0, 0x0);
        gbc.writeMem(0x822, { 0x45 });
        gbc.writeMem(0x71b5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xc9a, gbc.sp());
        EXPECT(0x71b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0277
        gbc.setState(0x7a99, 0xab85, 0x9200, 0xcefe, 0x59f4, 0xd828, 0x0, 0x0);
        gbc.writeMem(0x7a99, { 0xcb, 0xbe });
        gbc.writeMem(0xd828, { 0x57 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xab85, gbc.sp());
        EXPECT(0x7a9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xd828));
        // CB BE 0278
        gbc.setState(0x159c, 0x9559, 0x1a30, 0x4d42, 0x60fb, 0xee19, 0x0, 0x1);
        gbc.writeMem(0x159c, { 0xcb, 0xbe });
        gbc.writeMem(0xee19, { 0xac });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x9559, gbc.sp());
        EXPECT(0x159e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xee19));
        // CB BE 027C
        gbc.setState(0x8129, 0x1f0b, 0xc520, 0x2969, 0xc135, 0x72b7, 0x0, 0x1);
        gbc.writeMem(0x72b7, { 0x17 });
        gbc.writeMem(0x8129, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x1f0b, gbc.sp());
        EXPECT(0x812b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8129));
        EXPECT(0xbe, gbc.readMem(0x812a));
        // CB BE 027E
        gbc.setState(0xc8b3, 0x7ff3, 0xd060, 0xb7aa, 0x6c0b, 0x32c8, 0x1, 0x1);
        gbc.writeMem(0x32c8, { 0x4a });
        gbc.writeMem(0xc8b3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x7ff3, gbc.sp());
        EXPECT(0xc8b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8b3));
        EXPECT(0xbe, gbc.readMem(0xc8b4));
        // CB BE 027F
        gbc.setState(0x48ee, 0x1456, 0x9c90, 0x357, 0xf5b4, 0xd62b, 0x1, 0x0);
        gbc.writeMem(0x48ee, { 0xcb, 0xbe });
        gbc.writeMem(0xd62b, { 0xfa });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x1456, gbc.sp());
        EXPECT(0x48f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7a, gbc.readMem(0xd62b));
        // CB BE 0280
        gbc.setState(0x55f5, 0xe783, 0x1560, 0x6f54, 0xb24a, 0x2741, 0x1, 0x1);
        gbc.writeMem(0x2741, { 0x27 });
        gbc.writeMem(0x55f5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xe783, gbc.sp());
        EXPECT(0x55f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0281
        gbc.setState(0xae19, 0x5cec, 0x2d40, 0x44c9, 0xe28d, 0xb7a8, 0x1, 0x0);
        gbc.writeMem(0xae19, { 0xcb, 0xbe });
        gbc.writeMem(0xb7a8, { 0xee });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x5cec, gbc.sp());
        EXPECT(0xae1b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae19));
        EXPECT(0xbe, gbc.readMem(0xae1a));
        EXPECT(0x6e, gbc.readMem(0xb7a8));
        // CB BE 0282
        gbc.setState(0x4a50, 0x43ab, 0xd310, 0x381f, 0x2fd4, 0x2c56, 0x0, 0x0);
        gbc.writeMem(0x2c56, { 0x45 });
        gbc.writeMem(0x4a50, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x43ab, gbc.sp());
        EXPECT(0x4a52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0283
        gbc.setState(0xdfe9, 0x871b, 0x330, 0xf964, 0x4063, 0xe408, 0x1, 0x1);
        gbc.writeMem(0xdfe9, { 0xcb, 0xbe });
        gbc.writeMem(0xe408, { 0x2c });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x871b, gbc.sp());
        EXPECT(0xdfeb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdfe9));
        EXPECT(0xbe, gbc.readMem(0xdfea));
        EXPECT(0x2c, gbc.readMem(0xe408));
        // CB BE 0284
        gbc.setState(0x7a38, 0xd52d, 0x8520, 0xb6de, 0x1f43, 0x3128, 0x1, 0x1);
        gbc.writeMem(0x3128, { 0x53 });
        gbc.writeMem(0x7a38, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xd52d, gbc.sp());
        EXPECT(0x7a3a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0285
        gbc.setState(0xa9d0, 0xbe24, 0x16f0, 0x524b, 0x1391, 0xe5d1, 0x0, 0x0);
        gbc.writeMem(0xa9d0, { 0xcb, 0xbe });
        gbc.writeMem(0xe5d1, { 0x77 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xbe24, gbc.sp());
        EXPECT(0xa9d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9d0));
        EXPECT(0xbe, gbc.readMem(0xa9d1));
        EXPECT(0x77, gbc.readMem(0xe5d1));
        // CB BE 0286
        gbc.setState(0x6ddc, 0x1045, 0xc570, 0x792c, 0x744c, 0x235a, 0x1, 0x1);
        gbc.writeMem(0x235a, { 0x46 });
        gbc.writeMem(0x6ddc, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x1045, gbc.sp());
        EXPECT(0x6dde, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0287
        gbc.setState(0x756c, 0x5a9b, 0x2b60, 0xfa63, 0x5502, 0x9ee6, 0x1, 0x0);
        gbc.writeMem(0x756c, { 0xcb, 0xbe });
        gbc.writeMem(0x9ee6, { 0x74 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5a9b, gbc.sp());
        EXPECT(0x756e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0x9ee6));
        // CB BE 0288
        gbc.setState(0x2247, 0x118a, 0x5c70, 0x76b0, 0x4bc3, 0x9b28, 0x1, 0x1);
        gbc.writeMem(0x2247, { 0xcb, 0xbe });
        gbc.writeMem(0x9b28, { 0x6c });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x118a, gbc.sp());
        EXPECT(0x2249, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0x9b28));
        // CB BE 0289
        gbc.setState(0x988, 0x893d, 0x9900, 0x394a, 0x78d7, 0xa238, 0x1, 0x0);
        gbc.writeMem(0x988, { 0xcb, 0xbe });
        gbc.writeMem(0xa238, { 0x35 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x893d, gbc.sp());
        EXPECT(0x98a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0xa238));
        // CB BE 028A
        gbc.setState(0xc4f3, 0xdb29, 0xcbb0, 0xcd0d, 0x9dcf, 0xd695, 0x1, 0x1);
        gbc.writeMem(0xc4f3, { 0xcb, 0xbe });
        gbc.writeMem(0xd695, { 0x5b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xdb29, gbc.sp());
        EXPECT(0xc4f5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4f3));
        EXPECT(0xbe, gbc.readMem(0xc4f4));
        EXPECT(0x5b, gbc.readMem(0xd695));
        // CB BE 028B
        gbc.setState(0xdef9, 0xcef, 0x9c0, 0xa9e7, 0xce35, 0x540a, 0x0, 0x1);
        gbc.writeMem(0x540a, { 0x6c });
        gbc.writeMem(0xdef9, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xcef, gbc.sp());
        EXPECT(0xdefb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdef9));
        EXPECT(0xbe, gbc.readMem(0xdefa));
        // CB BE 028D
        gbc.setState(0x8a6, 0xbb4b, 0xf820, 0xe5cf, 0xa69e, 0x79ba, 0x0, 0x1);
        gbc.writeMem(0x8a6, { 0xcb, 0xbe });
        gbc.writeMem(0x79ba, { 0x73 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xbb4b, gbc.sp());
        EXPECT(0x8a8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 028E
        gbc.setState(0x7116, 0x861f, 0x1f50, 0x1f5a, 0xfe4d, 0x1431, 0x0, 0x1);
        gbc.writeMem(0x1431, { 0x39 });
        gbc.writeMem(0x7116, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x861f, gbc.sp());
        EXPECT(0x7118, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 028F
        gbc.setState(0x743b, 0x7238, 0x6e40, 0x1961, 0x420f, 0xdf8c, 0x0, 0x0);
        gbc.writeMem(0x743b, { 0xcb, 0xbe });
        gbc.writeMem(0xdf8c, { 0x19 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x7238, gbc.sp());
        EXPECT(0x743d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x19, gbc.readMem(0xdf8c));
        // CB BE 0290
        gbc.setState(0xb438, 0xf4c8, 0xef40, 0x2236, 0x8110, 0x395a, 0x1, 0x0);
        gbc.writeMem(0x395a, { 0x2e });
        gbc.writeMem(0xb438, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xf4c8, gbc.sp());
        EXPECT(0xb43a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb438));
        EXPECT(0xbe, gbc.readMem(0xb439));
        // CB BE 0292
        gbc.setState(0xe150, 0x9b48, 0xfad0, 0x8a24, 0x4736, 0xe3dc, 0x1, 0x1);
        gbc.writeMem(0xe150, { 0xcb, 0xbe });
        gbc.writeMem(0xe3dc, { 0xeb });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x9b48, gbc.sp());
        EXPECT(0xe152, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe150));
        EXPECT(0xbe, gbc.readMem(0xe151));
        EXPECT(0x6b, gbc.readMem(0xe3dc));
        // CB BE 0294
        gbc.setState(0x48a2, 0x682a, 0x6830, 0x4d95, 0xac3b, 0xca20, 0x1, 0x1);
        gbc.writeMem(0x48a2, { 0xcb, 0xbe });
        gbc.writeMem(0xca20, { 0x65 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x682a, gbc.sp());
        EXPECT(0x48a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0xca20));
        // CB BE 0295
        gbc.setState(0x4652, 0xdb5d, 0xd8b0, 0xbdad, 0xca9c, 0x7fff, 0x1, 0x0);
        gbc.writeMem(0x4652, { 0xcb, 0xbe });
        gbc.writeMem(0x7fff, { 0x26 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xdb5d, gbc.sp());
        EXPECT(0x4654, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0296
        gbc.setState(0x59a4, 0x61b4, 0xd1e0, 0x38be, 0x6c20, 0x2666, 0x1, 0x1);
        gbc.writeMem(0x2666, { 0x4b });
        gbc.writeMem(0x59a4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x61b4, gbc.sp());
        EXPECT(0x59a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0297
        gbc.setState(0x8ba5, 0x5a76, 0xdac0, 0xf1ab, 0x30b2, 0x72f5, 0x0, 0x1);
        gbc.writeMem(0x72f5, { 0x5b });
        gbc.writeMem(0x8ba5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x5a76, gbc.sp());
        EXPECT(0x8ba7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ba5));
        EXPECT(0xbe, gbc.readMem(0x8ba6));
        // CB BE 0298
        gbc.setState(0xaa6d, 0x739d, 0xe460, 0x3f7e, 0x4a13, 0x3606, 0x0, 0x1);
        gbc.writeMem(0x3606, { 0x6a });
        gbc.writeMem(0xaa6d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x739d, gbc.sp());
        EXPECT(0xaa6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa6d));
        EXPECT(0xbe, gbc.readMem(0xaa6e));
        // CB BE 0299
        gbc.setState(0x2199, 0x7c21, 0xcf60, 0xe951, 0xc8b5, 0x206a, 0x1, 0x0);
        gbc.writeMem(0x206a, { 0x43 });
        gbc.writeMem(0x2199, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x7c21, gbc.sp());
        EXPECT(0x219b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 029D
        gbc.setState(0xdab8, 0x1fcb, 0xbf60, 0xf23f, 0x3e14, 0x630a, 0x0, 0x0);
        gbc.writeMem(0x630a, { 0x19 });
        gbc.writeMem(0xdab8, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x1fcb, gbc.sp());
        EXPECT(0xdaba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdab8));
        EXPECT(0xbe, gbc.readMem(0xdab9));
        // CB BE 029E
        gbc.setState(0xcc6d, 0x98b2, 0xed60, 0xe675, 0xb4c8, 0x94d0, 0x1, 0x1);
        gbc.writeMem(0x94d0, { 0xce });
        gbc.writeMem(0xcc6d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x98b2, gbc.sp());
        EXPECT(0xcc6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0x94d0));
        EXPECT(0xcb, gbc.readMem(0xcc6d));
        EXPECT(0xbe, gbc.readMem(0xcc6e));
        // CB BE 029F
        gbc.setState(0x6774, 0xdcfa, 0x3e0, 0x3bd5, 0x4425, 0x97be, 0x1, 0x1);
        gbc.writeMem(0x6774, { 0xcb, 0xbe });
        gbc.writeMem(0x97be, { 0x52 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xdcfa, gbc.sp());
        EXPECT(0x6776, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0x97be));
        // CB BE 02A0
        gbc.setState(0x720d, 0xafb3, 0x7000, 0xc543, 0x1ce8, 0x47bc, 0x0, 0x1);
        gbc.writeMem(0x47bc, { 0x38 });
        gbc.writeMem(0x720d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0xafb3, gbc.sp());
        EXPECT(0x720f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 02A1
        gbc.setState(0xa2da, 0x8c96, 0x96d0, 0xbd5a, 0xdb48, 0x5661, 0x1, 0x0);
        gbc.writeMem(0x5661, { 0x7f });
        gbc.writeMem(0xa2da, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x8c96, gbc.sp());
        EXPECT(0xa2dc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa2da));
        EXPECT(0xbe, gbc.readMem(0xa2db));
        // CB BE 02A2
        gbc.setState(0xb41b, 0xbf20, 0xa800, 0x678, 0x2539, 0xc89f, 0x0, 0x0);
        gbc.writeMem(0xb41b, { 0xcb, 0xbe });
        gbc.writeMem(0xc89f, { 0x75 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xbf20, gbc.sp());
        EXPECT(0xb41d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb41b));
        EXPECT(0xbe, gbc.readMem(0xb41c));
        EXPECT(0x75, gbc.readMem(0xc89f));
        // CB BE 02A3
        gbc.setState(0x40f7, 0xd75c, 0x1ba0, 0x513c, 0x562c, 0xe5af, 0x0, 0x1);
        gbc.writeMem(0x40f7, { 0xcb, 0xbe });
        gbc.writeMem(0xe5af, { 0xfc });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd75c, gbc.sp());
        EXPECT(0x40f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0xe5af));
        // CB BE 02A5
        gbc.setState(0x27a4, 0x4c8a, 0x7800, 0xf55c, 0xaf02, 0x3d2, 0x0, 0x0);
        gbc.writeMem(0x3d2, { 0x4a });
        gbc.writeMem(0x27a4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x4c8a, gbc.sp());
        EXPECT(0x27a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 02A7
        gbc.setState(0x4a39, 0xbb, 0xd5e0, 0xface, 0xd911, 0x6925, 0x0, 0x0);
        gbc.writeMem(0x4a39, { 0xcb, 0xbe });
        gbc.writeMem(0x6925, { 0x6 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xbb, gbc.sp());
        EXPECT(0x4a3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 02A9
        gbc.setState(0x5501, 0xa32b, 0xd9e0, 0x17a5, 0xcdbe, 0xe9a8, 0x0, 0x0);
        gbc.writeMem(0x5501, { 0xcb, 0xbe });
        gbc.writeMem(0xe9a8, { 0xa1 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xa32b, gbc.sp());
        EXPECT(0x5503, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x21, gbc.readMem(0xe9a8));
        // CB BE 02AA
        gbc.setState(0xd377, 0xc2fd, 0x8430, 0xdf76, 0xf636, 0x90fa, 0x0, 0x1);
        gbc.writeMem(0x90fa, { 0xdb });
        gbc.writeMem(0xd377, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xc2fd, gbc.sp());
        EXPECT(0xd379, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0x90fa));
        EXPECT(0xcb, gbc.readMem(0xd377));
        EXPECT(0xbe, gbc.readMem(0xd378));
        // CB BE 02AB
        gbc.setState(0x9cd2, 0xdc03, 0x7760, 0xd1e, 0x736d, 0xe41b, 0x1, 0x1);
        gbc.writeMem(0x9cd2, { 0xcb, 0xbe });
        gbc.writeMem(0xe41b, { 0xd7 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xdc03, gbc.sp());
        EXPECT(0x9cd4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cd2));
        EXPECT(0xbe, gbc.readMem(0x9cd3));
        EXPECT(0x57, gbc.readMem(0xe41b));
        // CB BE 02AC
        gbc.setState(0xd57f, 0x1fad, 0x5c0, 0xc41d, 0x1d7c, 0x154c, 0x1, 0x0);
        gbc.writeMem(0x154c, { 0x23 });
        gbc.writeMem(0xd57f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x1fad, gbc.sp());
        EXPECT(0xd581, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd57f));
        EXPECT(0xbe, gbc.readMem(0xd580));
        // CB BE 02AD
        gbc.setState(0xef05, 0xc47a, 0x4ac0, 0xa3e5, 0xa8a2, 0xdee3, 0x0, 0x0);
        gbc.writeMem(0xdee3, { 0x98 });
        gbc.writeMem(0xef05, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc47a, gbc.sp());
        EXPECT(0xef07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x18, gbc.readMem(0xdee3));
        EXPECT(0xcb, gbc.readMem(0xef05));
        EXPECT(0xbe, gbc.readMem(0xef06));
        // CB BE 02AE
        gbc.setState(0x68d2, 0xfe95, 0x78a0, 0x58ac, 0xbc88, 0xfade, 0x0, 0x1);
        gbc.writeMem(0x68d2, { 0xcb, 0xbe });
        gbc.writeMem(0xfade, { 0x39 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xfe95, gbc.sp());
        EXPECT(0x68d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0xfade));
        // CB BE 02AF
        gbc.setState(0xcbdd, 0x86a, 0xaf50, 0xdea1, 0xa76f, 0x1b17, 0x1, 0x0);
        gbc.writeMem(0x1b17, { 0x66 });
        gbc.writeMem(0xcbdd, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x86a, gbc.sp());
        EXPECT(0xcbdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcbdd));
        EXPECT(0xbe, gbc.readMem(0xcbde));
        // CB BE 02B2
        gbc.setState(0xca87, 0x12dc, 0xa8b0, 0xe22, 0xdf6c, 0xffdf, 0x1, 0x1);
        gbc.writeMem(0xca87, { 0xcb, 0xbe });
        gbc.writeMem(0xffdf, { 0xd });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x12dc, gbc.sp());
        EXPECT(0xca89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca87));
        EXPECT(0xbe, gbc.readMem(0xca88));
        EXPECT(0xd, gbc.readMem(0xffdf));
        // CB BE 02B3
        gbc.setState(0x58fd, 0xb48b, 0x2e40, 0x86ba, 0x6c04, 0xd2bf, 0x1, 0x1);
        gbc.writeMem(0x58fd, { 0xcb, 0xbe });
        gbc.writeMem(0xd2bf, { 0x63 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xb48b, gbc.sp());
        EXPECT(0x58ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xd2bf));
        // CB BE 02B4
        gbc.setState(0x56ea, 0x4af5, 0x90e0, 0xc36d, 0xdeaf, 0xd290, 0x0, 0x0);
        gbc.writeMem(0x56ea, { 0xcb, 0xbe });
        gbc.writeMem(0xd290, { 0x36 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x4af5, gbc.sp());
        EXPECT(0x56ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xd290));
        // CB BE 02B5
        gbc.setState(0x2b45, 0xdf1f, 0xd90, 0xc445, 0x44df, 0x5fb0, 0x1, 0x1);
        gbc.writeMem(0x2b45, { 0xcb, 0xbe });
        gbc.writeMem(0x5fb0, { 0x40 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xdf1f, gbc.sp());
        EXPECT(0x2b47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02BB
        gbc.setState(0x6c90, 0x556b, 0x390, 0xdd5b, 0x424c, 0xb22a, 0x1, 0x0);
        gbc.writeMem(0x6c90, { 0xcb, 0xbe });
        gbc.writeMem(0xb22a, { 0x50 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x556b, gbc.sp());
        EXPECT(0x6c92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0xb22a));
        // CB BE 02BC
        gbc.setState(0x6ad, 0xd032, 0x2360, 0x7c7c, 0xdd5c, 0xfd7b, 0x0, 0x0);
        gbc.writeMem(0x6ad, { 0xcb, 0xbe });
        gbc.writeMem(0xfd7b, { 0x8d });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xd032, gbc.sp());
        EXPECT(0x6af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xfd7b));
        // CB BE 02BD
        gbc.setState(0x64e7, 0xa60a, 0x9120, 0xa86e, 0xfd43, 0x954c, 0x1, 0x1);
        gbc.writeMem(0x64e7, { 0xcb, 0xbe });
        gbc.writeMem(0x954c, { 0xe4 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xa60a, gbc.sp());
        EXPECT(0x64e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x954c));
        // CB BE 02BE
        gbc.setState(0x64ee, 0xeb67, 0x88d0, 0xbf2, 0x3d0d, 0x5ff9, 0x0, 0x0);
        gbc.writeMem(0x5ff9, { 0x4b });
        gbc.writeMem(0x64ee, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xeb67, gbc.sp());
        EXPECT(0x64f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02BF
        gbc.setState(0x5b8d, 0x9fe, 0x4f00, 0xfc6b, 0x1581, 0xbb92, 0x1, 0x0);
        gbc.writeMem(0x5b8d, { 0xcb, 0xbe });
        gbc.writeMem(0xbb92, { 0xbf });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9fe, gbc.sp());
        EXPECT(0x5b8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3f, gbc.readMem(0xbb92));
        // CB BE 02C0
        gbc.setState(0xc11f, 0x2d43, 0x7fb0, 0xdc95, 0x5620, 0x9c0d, 0x1, 0x0);
        gbc.writeMem(0x9c0d, { 0xc9 });
        gbc.writeMem(0xc11f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x2d43, gbc.sp());
        EXPECT(0xc121, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x49, gbc.readMem(0x9c0d));
        EXPECT(0xcb, gbc.readMem(0xc11f));
        EXPECT(0xbe, gbc.readMem(0xc120));
        // CB BE 02C1
        gbc.setState(0x44b8, 0xe5af, 0x4950, 0x15a3, 0xcbc6, 0xff27, 0x1, 0x0);
        gbc.writeMem(0x44b8, { 0xcb, 0xbe });
        gbc.writeMem(0xff27, { 0x3c });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xe5af, gbc.sp());
        EXPECT(0x44ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3c, gbc.readMem(0xff27));
        // CB BE 02C2
        gbc.setState(0x5a87, 0x9c94, 0xb240, 0xe076, 0xdb65, 0xaa8d, 0x1, 0x0);
        gbc.writeMem(0x5a87, { 0xcb, 0xbe });
        gbc.writeMem(0xaa8d, { 0x75 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9c94, gbc.sp());
        EXPECT(0x5a89, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x75, gbc.readMem(0xaa8d));
        // CB BE 02C3
        gbc.setState(0xbf6, 0x5c4f, 0xd290, 0xe65c, 0x1643, 0xa293, 0x0, 0x1);
        gbc.writeMem(0xbf6, { 0xcb, 0xbe });
        gbc.writeMem(0xa293, { 0x5d });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x5c4f, gbc.sp());
        EXPECT(0xbf8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0xa293));
        // CB BE 02C5
        gbc.setState(0x8724, 0x643, 0xca90, 0x9daf, 0x2d94, 0xbe45, 0x1, 0x1);
        gbc.writeMem(0x8724, { 0xcb, 0xbe });
        gbc.writeMem(0xbe45, { 0x79 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x643, gbc.sp());
        EXPECT(0x8726, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8724));
        EXPECT(0xbe, gbc.readMem(0x8725));
        EXPECT(0x79, gbc.readMem(0xbe45));
        // CB BE 02C6
        gbc.setState(0x354a, 0x906f, 0x2860, 0xca0c, 0xee0c, 0x8f0c, 0x0, 0x0);
        gbc.writeMem(0x354a, { 0xcb, 0xbe });
        gbc.writeMem(0x8f0c, { 0xfd });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x906f, gbc.sp());
        EXPECT(0x354c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0x8f0c));
        // CB BE 02C7
        gbc.setState(0xafb6, 0x85d3, 0xb7a0, 0xe718, 0xdce5, 0xd150, 0x0, 0x1);
        gbc.writeMem(0xafb6, { 0xcb, 0xbe });
        gbc.writeMem(0xd150, { 0xee });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x85d3, gbc.sp());
        EXPECT(0xafb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafb6));
        EXPECT(0xbe, gbc.readMem(0xafb7));
        EXPECT(0x6e, gbc.readMem(0xd150));
        // CB BE 02C9
        gbc.setState(0x570e, 0xa4bd, 0x200, 0x4411, 0x5cb4, 0xb6c2, 0x0, 0x1);
        gbc.writeMem(0x570e, { 0xcb, 0xbe });
        gbc.writeMem(0xb6c2, { 0xde });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xa4bd, gbc.sp());
        EXPECT(0x5710, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0xb6c2));
        // CB BE 02CA
        gbc.setState(0x960b, 0xf5f4, 0xda60, 0xd7, 0x6a39, 0x95fb, 0x0, 0x0);
        gbc.writeMem(0x95fb, { 0xf });
        gbc.writeMem(0x960b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xf5f4, gbc.sp());
        EXPECT(0x960d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x95fb));
        EXPECT(0xcb, gbc.readMem(0x960b));
        EXPECT(0xbe, gbc.readMem(0x960c));
        // CB BE 02CB
        gbc.setState(0x2e1c, 0x5e01, 0xed10, 0xdc2, 0x8b34, 0xfc11, 0x0, 0x1);
        gbc.writeMem(0x2e1c, { 0xcb, 0xbe });
        gbc.writeMem(0xfc11, { 0xa7 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x5e01, gbc.sp());
        EXPECT(0x2e1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xfc11));
        // CB BE 02CD
        gbc.setState(0xe5b4, 0xec46, 0x8930, 0x7626, 0x1dc9, 0x3430, 0x0, 0x0);
        gbc.writeMem(0x3430, { 0x70 });
        gbc.writeMem(0xe5b4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xec46, gbc.sp());
        EXPECT(0xe5b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5b4));
        EXPECT(0xbe, gbc.readMem(0xe5b5));
        // CB BE 02CE
        gbc.setState(0x9560, 0x7f9a, 0x3360, 0xc101, 0xdff5, 0x1e80, 0x1, 0x0);
        gbc.writeMem(0x1e80, { 0x12 });
        gbc.writeMem(0x9560, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x7f9a, gbc.sp());
        EXPECT(0x9562, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9560));
        EXPECT(0xbe, gbc.readMem(0x9561));
        // CB BE 02CF
        gbc.setState(0x600d, 0x5b6a, 0x6b50, 0x62ae, 0x777c, 0xa925, 0x0, 0x1);
        gbc.writeMem(0x600d, { 0xcb, 0xbe });
        gbc.writeMem(0xa925, { 0xdd });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x5b6a, gbc.sp());
        EXPECT(0x600f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0xa925));
        // CB BE 02D1
        gbc.setState(0x1368, 0x719c, 0xc0d0, 0xeb4f, 0xc2a7, 0x9b1e, 0x0, 0x1);
        gbc.writeMem(0x1368, { 0xcb, 0xbe });
        gbc.writeMem(0x9b1e, { 0x6b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x719c, gbc.sp());
        EXPECT(0x136a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0x9b1e));
        // CB BE 02D2
        gbc.setState(0xa032, 0x855a, 0x1b0, 0xda7a, 0x5508, 0x8f0b, 0x0, 0x1);
        gbc.writeMem(0x8f0b, { 0xa8 });
        gbc.writeMem(0xa032, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x855a, gbc.sp());
        EXPECT(0xa034, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0x8f0b));
        EXPECT(0xcb, gbc.readMem(0xa032));
        EXPECT(0xbe, gbc.readMem(0xa033));
        // CB BE 02D3
        gbc.setState(0x9b3f, 0x719, 0xb3a0, 0xa3c3, 0x12a4, 0x9158, 0x0, 0x0);
        gbc.writeMem(0x9158, { 0xb6 });
        gbc.writeMem(0x9b3f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x719, gbc.sp());
        EXPECT(0x9b41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0x9158));
        EXPECT(0xcb, gbc.readMem(0x9b3f));
        EXPECT(0xbe, gbc.readMem(0x9b40));
        // CB BE 02D5
        gbc.setState(0xbfcb, 0xd4ee, 0x5420, 0x69c4, 0xfe72, 0xa430, 0x1, 0x0);
        gbc.writeMem(0xa430, { 0x67 });
        gbc.writeMem(0xbfcb, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xd4ee, gbc.sp());
        EXPECT(0xbfcd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0xa430));
        EXPECT(0xcb, gbc.readMem(0xbfcb));
        EXPECT(0xbe, gbc.readMem(0xbfcc));
        // CB BE 02D7
        gbc.setState(0xa3bd, 0x4a8a, 0x2c90, 0x60c7, 0xd768, 0x2c1a, 0x1, 0x1);
        gbc.writeMem(0x2c1a, { 0x33 });
        gbc.writeMem(0xa3bd, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x4a8a, gbc.sp());
        EXPECT(0xa3bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3bd));
        EXPECT(0xbe, gbc.readMem(0xa3be));
        // CB BE 02DA
        gbc.setState(0xa0e8, 0x5c81, 0xf220, 0xb7b8, 0x4410, 0xf623, 0x0, 0x0);
        gbc.writeMem(0xa0e8, { 0xcb, 0xbe });
        gbc.writeMem(0xf623, { 0xd7 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x5c81, gbc.sp());
        EXPECT(0xa0ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa0e8));
        EXPECT(0xbe, gbc.readMem(0xa0e9));
        EXPECT(0x57, gbc.readMem(0xf623));
        // CB BE 02DD
        gbc.setState(0x71dd, 0xf696, 0x2d70, 0xbd0b, 0xa54f, 0xb301, 0x0, 0x0);
        gbc.writeMem(0x71dd, { 0xcb, 0xbe });
        gbc.writeMem(0xb301, { 0xaa });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xf696, gbc.sp());
        EXPECT(0x71df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xb301));
        // CB BE 02DF
        gbc.setState(0xb402, 0x7b48, 0x470, 0xbdd5, 0xc1c, 0xca3b, 0x0, 0x1);
        gbc.writeMem(0xb402, { 0xcb, 0xbe });
        gbc.writeMem(0xca3b, { 0x22 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x7b48, gbc.sp());
        EXPECT(0xb404, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb402));
        EXPECT(0xbe, gbc.readMem(0xb403));
        EXPECT(0x22, gbc.readMem(0xca3b));
        // CB BE 02E0
        gbc.setState(0xd85e, 0x7749, 0xd460, 0xd758, 0x4601, 0xc453, 0x1, 0x0);
        gbc.writeMem(0xc453, { 0x38 });
        gbc.writeMem(0xd85e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x7749, gbc.sp());
        EXPECT(0xd860, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x38, gbc.readMem(0xc453));
        EXPECT(0xcb, gbc.readMem(0xd85e));
        EXPECT(0xbe, gbc.readMem(0xd85f));
        // CB BE 02E1
        gbc.setState(0x82a8, 0x33b, 0x4aa0, 0x7d99, 0x3ad5, 0xaddf, 0x0, 0x0);
        gbc.writeMem(0x82a8, { 0xcb, 0xbe });
        gbc.writeMem(0xaddf, { 0xe6 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x33b, gbc.sp());
        EXPECT(0x82aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x82a8));
        EXPECT(0xbe, gbc.readMem(0x82a9));
        EXPECT(0x66, gbc.readMem(0xaddf));
        // CB BE 02E2
        gbc.setState(0x4cdd, 0x7680, 0xc0, 0x513e, 0x3848, 0x84c5, 0x1, 0x0);
        gbc.writeMem(0x4cdd, { 0xcb, 0xbe });
        gbc.writeMem(0x84c5, { 0x3b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x7680, gbc.sp());
        EXPECT(0x4cdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3b, gbc.readMem(0x84c5));
        // CB BE 02E4
        gbc.setState(0x45c4, 0xcfe7, 0xb950, 0x3d66, 0x279c, 0xe7b, 0x1, 0x1);
        gbc.writeMem(0xe7b, { 0x6b });
        gbc.writeMem(0x45c4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xcfe7, gbc.sp());
        EXPECT(0x45c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02E5
        gbc.setState(0x1e4e, 0x6a2b, 0x3d50, 0x7788, 0xae7c, 0x6df2, 0x0, 0x1);
        gbc.writeMem(0x1e4e, { 0xcb, 0xbe });
        gbc.writeMem(0x6df2, { 0x79 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x6a2b, gbc.sp());
        EXPECT(0x1e50, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02E6
        gbc.setState(0x39f1, 0xe31b, 0xf600, 0xa21b, 0x9f34, 0x5716, 0x1, 0x0);
        gbc.writeMem(0x39f1, { 0xcb, 0xbe });
        gbc.writeMem(0x5716, { 0x20 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xe31b, gbc.sp());
        EXPECT(0x39f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 02E7
        gbc.setState(0x2d3f, 0xe02f, 0xb470, 0x5e57, 0x41b2, 0xde07, 0x1, 0x1);
        gbc.writeMem(0x2d3f, { 0xcb, 0xbe });
        gbc.writeMem(0xde07, { 0xec });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xe02f, gbc.sp());
        EXPECT(0x2d41, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0xde07));
        // CB BE 02E8
        gbc.setState(0x60fa, 0x3f39, 0xf880, 0xd300, 0x7bb1, 0x1d34, 0x0, 0x1);
        gbc.writeMem(0x1d34, { 0xd });
        gbc.writeMem(0x60fa, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x3f39, gbc.sp());
        EXPECT(0x60fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 02E9
        gbc.setState(0x1047, 0x3869, 0xa550, 0x260a, 0x328d, 0x1da8, 0x0, 0x0);
        gbc.writeMem(0x1047, { 0xcb, 0xbe });
        gbc.writeMem(0x1da8, { 0x19 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x3869, gbc.sp());
        EXPECT(0x1049, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02EA
        gbc.setState(0x2517, 0xdf94, 0xad00, 0xe594, 0xf6ba, 0xd1bd, 0x1, 0x1);
        gbc.writeMem(0x2517, { 0xcb, 0xbe });
        gbc.writeMem(0xd1bd, { 0xf4 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xdf94, gbc.sp());
        EXPECT(0x2519, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0xd1bd));
        // CB BE 02EB
        gbc.setState(0x89d5, 0xd9c4, 0x6c90, 0x7339, 0x6596, 0xbaa0, 0x0, 0x0);
        gbc.writeMem(0x89d5, { 0xcb, 0xbe });
        gbc.writeMem(0xbaa0, { 0xbf });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd9c4, gbc.sp());
        EXPECT(0x89d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89d5));
        EXPECT(0xbe, gbc.readMem(0x89d6));
        EXPECT(0x3f, gbc.readMem(0xbaa0));
        // CB BE 02EC
        gbc.setState(0x9a9b, 0x940c, 0xae80, 0xb983, 0x7b4c, 0xf08f, 0x1, 0x1);
        gbc.writeMem(0x9a9b, { 0xcb, 0xbe });
        gbc.writeMem(0xf08f, { 0xb6 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x940c, gbc.sp());
        EXPECT(0x9a9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a9b));
        EXPECT(0xbe, gbc.readMem(0x9a9c));
        EXPECT(0x36, gbc.readMem(0xf08f));
        // CB BE 02ED
        gbc.setState(0x9f4d, 0xddf9, 0xe450, 0x5866, 0x3783, 0x150, 0x0, 0x0);
        gbc.writeMem(0x150, { 0x3a });
        gbc.writeMem(0x9f4d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xddf9, gbc.sp());
        EXPECT(0x9f4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f4d));
        EXPECT(0xbe, gbc.readMem(0x9f4e));
        // CB BE 02EF
        gbc.setState(0x11b8, 0x99ea, 0x4c0, 0x896a, 0xbe55, 0xfd62, 0x1, 0x0);
        gbc.writeMem(0x11b8, { 0xcb, 0xbe });
        gbc.writeMem(0xfd62, { 0x34 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x99ea, gbc.sp());
        EXPECT(0x11ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0xfd62));
        // CB BE 02F1
        gbc.setState(0x1450, 0xdad5, 0xbf50, 0x6dde, 0x41f3, 0xb6e3, 0x1, 0x0);
        gbc.writeMem(0x1450, { 0xcb, 0xbe });
        gbc.writeMem(0xb6e3, { 0x2a });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xdad5, gbc.sp());
        EXPECT(0x1452, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xb6e3));
        // CB BE 02F2
        gbc.setState(0x504d, 0xc3d4, 0x1cf0, 0xb101, 0x6719, 0x6c30, 0x0, 0x1);
        gbc.writeMem(0x504d, { 0xcb, 0xbe });
        gbc.writeMem(0x6c30, { 0x68 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xc3d4, gbc.sp());
        EXPECT(0x504f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02F3
        gbc.setState(0x8eba, 0xa31e, 0x70d0, 0x2841, 0x7b69, 0x91dd, 0x0, 0x0);
        gbc.writeMem(0x8eba, { 0xcb, 0xbe });
        gbc.writeMem(0x91dd, { 0x54 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xa31e, gbc.sp());
        EXPECT(0x8ebc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8eba));
        EXPECT(0xbe, gbc.readMem(0x8ebb));
        EXPECT(0x54, gbc.readMem(0x91dd));
        // CB BE 02F5
        gbc.setState(0xc8a8, 0xa352, 0xaca0, 0x7331, 0xc491, 0xc840, 0x1, 0x1);
        gbc.writeMem(0xc840, { 0x6 });
        gbc.writeMem(0xc8a8, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xa352, gbc.sp());
        EXPECT(0xc8aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0xc840));
        EXPECT(0xcb, gbc.readMem(0xc8a8));
        EXPECT(0xbe, gbc.readMem(0xc8a9));
        // CB BE 02F6
        gbc.setState(0xa9bb, 0xaba, 0x39b0, 0x206c, 0xc4a3, 0xb29a, 0x1, 0x1);
        gbc.writeMem(0xa9bb, { 0xcb, 0xbe });
        gbc.writeMem(0xb29a, { 0xe3 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xaba, gbc.sp());
        EXPECT(0xa9bd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa9bb));
        EXPECT(0xbe, gbc.readMem(0xa9bc));
        EXPECT(0x63, gbc.readMem(0xb29a));
        // CB BE 02F8
        gbc.setState(0xaeec, 0xc551, 0x250, 0xc698, 0xaa51, 0xafa6, 0x0, 0x0);
        gbc.writeMem(0xaeec, { 0xcb, 0xbe });
        gbc.writeMem(0xafa6, { 0x1c });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xc551, gbc.sp());
        EXPECT(0xaeee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaeec));
        EXPECT(0xbe, gbc.readMem(0xaeed));
        EXPECT(0x1c, gbc.readMem(0xafa6));
        // CB BE 02FB
        gbc.setState(0x8d63, 0xb467, 0x8520, 0x1fee, 0xee96, 0x73ad, 0x1, 0x1);
        gbc.writeMem(0x73ad, { 0x7c });
        gbc.writeMem(0x8d63, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xb467, gbc.sp());
        EXPECT(0x8d65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8d63));
        EXPECT(0xbe, gbc.readMem(0x8d64));
        // CB BE 02FC
        gbc.setState(0x32fe, 0xc5a1, 0x3ef0, 0x3526, 0xdf0d, 0x5ba, 0x0, 0x0);
        gbc.writeMem(0x5ba, { 0x2c });
        gbc.writeMem(0x32fe, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xc5a1, gbc.sp());
        EXPECT(0x3300, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 02FE
        gbc.setState(0x8505, 0x97ba, 0x4d60, 0x2641, 0xccb, 0x7ce0, 0x0, 0x1);
        gbc.writeMem(0x7ce0, { 0x1 });
        gbc.writeMem(0x8505, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x97ba, gbc.sp());
        EXPECT(0x8507, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8505));
        EXPECT(0xbe, gbc.readMem(0x8506));
        // CB BE 02FF
        gbc.setState(0x94f5, 0x9373, 0x1b20, 0x1e7f, 0x781b, 0x7e2c, 0x0, 0x0);
        gbc.writeMem(0x7e2c, { 0x3e });
        gbc.writeMem(0x94f5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x9373, gbc.sp());
        EXPECT(0x94f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94f5));
        EXPECT(0xbe, gbc.readMem(0x94f6));
        // CB BE 0301
        gbc.setState(0xde0, 0x3efe, 0x6970, 0x60b3, 0x8b33, 0x8439, 0x0, 0x1);
        gbc.writeMem(0xde0, { 0xcb, 0xbe });
        gbc.writeMem(0x8439, { 0x42 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x3efe, gbc.sp());
        EXPECT(0xde2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0x8439));
        // CB BE 0302
        gbc.setState(0x6659, 0xfdfd, 0x8410, 0x73e2, 0x6295, 0xd49d, 0x1, 0x0);
        gbc.writeMem(0x6659, { 0xcb, 0xbe });
        gbc.writeMem(0xd49d, { 0xee });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xfdfd, gbc.sp());
        EXPECT(0x665b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0xd49d));
        // CB BE 0303
        gbc.setState(0xec1f, 0x6674, 0x8c00, 0xf53e, 0x5c12, 0x9948, 0x1, 0x1);
        gbc.writeMem(0x9948, { 0x5d });
        gbc.writeMem(0xec1f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x6674, gbc.sp());
        EXPECT(0xec21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0x9948));
        EXPECT(0xcb, gbc.readMem(0xec1f));
        EXPECT(0xbe, gbc.readMem(0xec20));
        // CB BE 0304
        gbc.setState(0x4b7, 0xbaea, 0x1bc0, 0xbc79, 0x19cd, 0x4f74, 0x1, 0x1);
        gbc.writeMem(0x4b7, { 0xcb, 0xbe });
        gbc.writeMem(0x4f74, { 0x63 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xbaea, gbc.sp());
        EXPECT(0x4b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0305
        gbc.setState(0x914d, 0xb167, 0xda70, 0x98d, 0xe55e, 0xc9aa, 0x0, 0x1);
        gbc.writeMem(0x914d, { 0xcb, 0xbe });
        gbc.writeMem(0xc9aa, { 0xcf });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xb167, gbc.sp());
        EXPECT(0x914f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x914d));
        EXPECT(0xbe, gbc.readMem(0x914e));
        EXPECT(0x4f, gbc.readMem(0xc9aa));
        // CB BE 0306
        gbc.setState(0xd5ad, 0xa1ec, 0x20d0, 0x8e4f, 0xf5c5, 0xd781, 0x1, 0x0);
        gbc.writeMem(0xd5ad, { 0xcb, 0xbe });
        gbc.writeMem(0xd781, { 0x69 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xa1ec, gbc.sp());
        EXPECT(0xd5af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5ad));
        EXPECT(0xbe, gbc.readMem(0xd5ae));
        EXPECT(0x69, gbc.readMem(0xd781));
        // CB BE 0308
        gbc.setState(0xad5c, 0xe19, 0xa5c0, 0x7a6f, 0x2513, 0x7996, 0x0, 0x1);
        gbc.writeMem(0x7996, { 0x6d });
        gbc.writeMem(0xad5c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xe19, gbc.sp());
        EXPECT(0xad5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad5c));
        EXPECT(0xbe, gbc.readMem(0xad5d));
        // CB BE 0309
        gbc.setState(0x3935, 0x93e7, 0x38f0, 0xe440, 0x850a, 0xa0f4, 0x0, 0x1);
        gbc.writeMem(0x3935, { 0xcb, 0xbe });
        gbc.writeMem(0xa0f4, { 0x4a });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x93e7, gbc.sp());
        EXPECT(0x3937, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xa0f4));
        // CB BE 030A
        gbc.setState(0x1ba7, 0xf20a, 0xc990, 0x3f0a, 0x705e, 0x34be, 0x0, 0x1);
        gbc.writeMem(0x1ba7, { 0xcb, 0xbe });
        gbc.writeMem(0x34be, { 0xc });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xf20a, gbc.sp());
        EXPECT(0x1ba9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 030B
        gbc.setState(0x3730, 0x1fcf, 0xc10, 0x6576, 0xd947, 0x56d6, 0x1, 0x1);
        gbc.writeMem(0x3730, { 0xcb, 0xbe });
        gbc.writeMem(0x56d6, { 0x5a });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x1fcf, gbc.sp());
        EXPECT(0x3732, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 030C
        gbc.setState(0xe204, 0x6393, 0x4a00, 0x8d0f, 0x6cdf, 0x3904, 0x1, 0x1);
        gbc.writeMem(0x3904, { 0x18 });
        gbc.writeMem(0xe204, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x6393, gbc.sp());
        EXPECT(0xe206, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe204));
        EXPECT(0xbe, gbc.readMem(0xe205));
        // CB BE 030D
        gbc.setState(0xd18b, 0xaecc, 0xd160, 0xf276, 0xcf59, 0x1a7f, 0x0, 0x1);
        gbc.writeMem(0x1a7f, { 0x63 });
        gbc.writeMem(0xd18b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xaecc, gbc.sp());
        EXPECT(0xd18d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd18b));
        EXPECT(0xbe, gbc.readMem(0xd18c));
        // CB BE 030E
        gbc.setState(0x41c6, 0x510e, 0x97f0, 0x7074, 0x1601, 0xad17, 0x1, 0x1);
        gbc.writeMem(0x41c6, { 0xcb, 0xbe });
        gbc.writeMem(0xad17, { 0xb4 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x510e, gbc.sp());
        EXPECT(0x41c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0xad17));
        // CB BE 0310
        gbc.setState(0x2094, 0x4438, 0x1340, 0xc7f4, 0x475f, 0x32c1, 0x0, 0x1);
        gbc.writeMem(0x2094, { 0xcb, 0xbe });
        gbc.writeMem(0x32c1, { 0x0 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x4438, gbc.sp());
        EXPECT(0x2096, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0311
        gbc.setState(0xa916, 0x24fb, 0x83f0, 0xd4fb, 0x1316, 0x667f, 0x0, 0x1);
        gbc.writeMem(0x667f, { 0x8 });
        gbc.writeMem(0xa916, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x24fb, gbc.sp());
        EXPECT(0xa918, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa916));
        EXPECT(0xbe, gbc.readMem(0xa917));
        // CB BE 0312
        gbc.setState(0xa284, 0x818b, 0xc0, 0x834a, 0xcffd, 0x8844, 0x0, 0x0);
        gbc.writeMem(0x8844, { 0x7e });
        gbc.writeMem(0xa284, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x818b, gbc.sp());
        EXPECT(0xa286, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7e, gbc.readMem(0x8844));
        EXPECT(0xcb, gbc.readMem(0xa284));
        EXPECT(0xbe, gbc.readMem(0xa285));
        // CB BE 0314
        gbc.setState(0x26e, 0x810b, 0xe7e0, 0x6ea, 0x7849, 0x8ee8, 0x0, 0x1);
        gbc.writeMem(0x26e, { 0xcb, 0xbe });
        gbc.writeMem(0x8ee8, { 0x26 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x810b, gbc.sp());
        EXPECT(0x270, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0x8ee8));
        // CB BE 0315
        gbc.setState(0xc3eb, 0x172f, 0x1660, 0x2e05, 0xae50, 0xbcb7, 0x1, 0x1);
        gbc.writeMem(0xbcb7, { 0x6a });
        gbc.writeMem(0xc3eb, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x172f, gbc.sp());
        EXPECT(0xc3ed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xbcb7));
        EXPECT(0xcb, gbc.readMem(0xc3eb));
        EXPECT(0xbe, gbc.readMem(0xc3ec));
        // CB BE 0318
        gbc.setState(0xdc2c, 0x892a, 0x2ee0, 0xe29e, 0x2869, 0x73ce, 0x1, 0x1);
        gbc.writeMem(0x73ce, { 0x9 });
        gbc.writeMem(0xdc2c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x892a, gbc.sp());
        EXPECT(0xdc2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc2c));
        EXPECT(0xbe, gbc.readMem(0xdc2d));
        // CB BE 0319
        gbc.setState(0xde35, 0x260d, 0x79c0, 0x9d01, 0x9042, 0xa82e, 0x1, 0x1);
        gbc.writeMem(0xa82e, { 0x17 });
        gbc.writeMem(0xde35, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x260d, gbc.sp());
        EXPECT(0xde37, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0xa82e));
        EXPECT(0xcb, gbc.readMem(0xde35));
        EXPECT(0xbe, gbc.readMem(0xde36));
        // CB BE 031D
        gbc.setState(0x89d4, 0x1ef4, 0x2ae0, 0x6ccc, 0x8a4f, 0x7f67, 0x0, 0x0);
        gbc.writeMem(0x7f67, { 0x51 });
        gbc.writeMem(0x89d4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x1ef4, gbc.sp());
        EXPECT(0x89d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89d4));
        EXPECT(0xbe, gbc.readMem(0x89d5));
        // CB BE 031E
        gbc.setState(0xdc3f, 0xc4c9, 0xf460, 0xd74f, 0xd498, 0x7389, 0x0, 0x1);
        gbc.writeMem(0x7389, { 0x4d });
        gbc.writeMem(0xdc3f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xc4c9, gbc.sp());
        EXPECT(0xdc41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc3f));
        EXPECT(0xbe, gbc.readMem(0xdc40));
        // CB BE 031F
        gbc.setState(0x44c, 0xaade, 0xc950, 0x9e79, 0xfbe9, 0x4d4d, 0x0, 0x0);
        gbc.writeMem(0x44c, { 0xcb, 0xbe });
        gbc.writeMem(0x4d4d, { 0x43 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xaade, gbc.sp());
        EXPECT(0x44e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0320
        gbc.setState(0x2fa6, 0xdba6, 0x23e0, 0x3bf2, 0x5a53, 0x8666, 0x0, 0x0);
        gbc.writeMem(0x2fa6, { 0xcb, 0xbe });
        gbc.writeMem(0x8666, { 0x1f });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xdba6, gbc.sp());
        EXPECT(0x2fa8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0x8666));
        // CB BE 0321
        gbc.setState(0x7026, 0xbd0b, 0xf490, 0xc720, 0x6f62, 0xd7f3, 0x1, 0x1);
        gbc.writeMem(0x7026, { 0xcb, 0xbe });
        gbc.writeMem(0xd7f3, { 0x26 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xbd0b, gbc.sp());
        EXPECT(0x7028, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x26, gbc.readMem(0xd7f3));
        // CB BE 0322
        gbc.setState(0x14e2, 0xccb, 0x64b0, 0x9d1c, 0x281f, 0x9915, 0x0, 0x0);
        gbc.writeMem(0x14e2, { 0xcb, 0xbe });
        gbc.writeMem(0x9915, { 0x62 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xccb, gbc.sp());
        EXPECT(0x14e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0x9915));
        // CB BE 0323
        gbc.setState(0x5c45, 0x3d0c, 0xaa30, 0xbf2a, 0x8309, 0xb86e, 0x1, 0x0);
        gbc.writeMem(0x5c45, { 0xcb, 0xbe });
        gbc.writeMem(0xb86e, { 0x15 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x3d0c, gbc.sp());
        EXPECT(0x5c47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x15, gbc.readMem(0xb86e));
        // CB BE 0324
        gbc.setState(0xc235, 0x4a75, 0xa920, 0xe9eb, 0x5ee4, 0x153f, 0x1, 0x0);
        gbc.writeMem(0x153f, { 0x0 });
        gbc.writeMem(0xc235, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x4a75, gbc.sp());
        EXPECT(0xc237, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc235));
        EXPECT(0xbe, gbc.readMem(0xc236));
        // CB BE 0325
        gbc.setState(0xced4, 0xd78c, 0x44e0, 0x6254, 0xab0e, 0x3d63, 0x0, 0x1);
        gbc.writeMem(0x3d63, { 0x61 });
        gbc.writeMem(0xced4, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xd78c, gbc.sp());
        EXPECT(0xced6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xced4));
        EXPECT(0xbe, gbc.readMem(0xced5));
        // CB BE 0326
        gbc.setState(0x57, 0xb5e8, 0xeca0, 0x6492, 0x6afd, 0xdad, 0x1, 0x0);
        gbc.writeMem(0x57, { 0xcb, 0xbe });
        gbc.writeMem(0xdad, { 0x2b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xb5e8, gbc.sp());
        EXPECT(0x59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0327
        gbc.setState(0x86d7, 0x3b0, 0xd450, 0x3234, 0x791d, 0xbedb, 0x1, 0x1);
        gbc.writeMem(0x86d7, { 0xcb, 0xbe });
        gbc.writeMem(0xbedb, { 0xe7 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x3b0, gbc.sp());
        EXPECT(0x86d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86d7));
        EXPECT(0xbe, gbc.readMem(0x86d8));
        EXPECT(0x67, gbc.readMem(0xbedb));
        // CB BE 0328
        gbc.setState(0xb463, 0xc644, 0xee0, 0x686d, 0x2efe, 0xd0e0, 0x0, 0x1);
        gbc.writeMem(0xb463, { 0xcb, 0xbe });
        gbc.writeMem(0xd0e0, { 0x1f });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xc644, gbc.sp());
        EXPECT(0xb465, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb463));
        EXPECT(0xbe, gbc.readMem(0xb464));
        EXPECT(0x1f, gbc.readMem(0xd0e0));
        // CB BE 0329
        gbc.setState(0xe840, 0x86bc, 0x7fa0, 0xe409, 0xe52e, 0xf8f8, 0x1, 0x1);
        gbc.writeMem(0xe840, { 0xcb, 0xbe });
        gbc.writeMem(0xf8f8, { 0xed });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x86bc, gbc.sp());
        EXPECT(0xe842, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe840));
        EXPECT(0xbe, gbc.readMem(0xe841));
        EXPECT(0x6d, gbc.readMem(0xf8f8));
        // CB BE 032A
        gbc.setState(0xeb04, 0xd8e9, 0xbb40, 0x7efb, 0x46d2, 0x336e, 0x0, 0x1);
        gbc.writeMem(0x336e, { 0x68 });
        gbc.writeMem(0xeb04, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xd8e9, gbc.sp());
        EXPECT(0xeb06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb04));
        EXPECT(0xbe, gbc.readMem(0xeb05));
        // CB BE 032B
        gbc.setState(0x7bfc, 0xe63f, 0xdaf0, 0xa605, 0xe889, 0xa31c, 0x1, 0x1);
        gbc.writeMem(0x7bfc, { 0xcb, 0xbe });
        gbc.writeMem(0xa31c, { 0xe9 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xe63f, gbc.sp());
        EXPECT(0x7bfe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xa31c));
        // CB BE 032C
        gbc.setState(0xdaab, 0x508c, 0xc4f0, 0x429f, 0x5a73, 0xe98a, 0x0, 0x0);
        gbc.writeMem(0xdaab, { 0xcb, 0xbe });
        gbc.writeMem(0xe98a, { 0x41 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x508c, gbc.sp());
        EXPECT(0xdaad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaab));
        EXPECT(0xbe, gbc.readMem(0xdaac));
        EXPECT(0x41, gbc.readMem(0xe98a));
        // CB BE 032D
        gbc.setState(0xafa7, 0xb78f, 0xb550, 0xdcf7, 0x1f3a, 0xd7e7, 0x0, 0x1);
        gbc.writeMem(0xafa7, { 0xcb, 0xbe });
        gbc.writeMem(0xd7e7, { 0xe9 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xb78f, gbc.sp());
        EXPECT(0xafa9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xafa7));
        EXPECT(0xbe, gbc.readMem(0xafa8));
        EXPECT(0x69, gbc.readMem(0xd7e7));
        // CB BE 032E
        gbc.setState(0x8dbb, 0xf10d, 0x6fe0, 0xb2a7, 0xe613, 0x63c3, 0x1, 0x0);
        gbc.writeMem(0x63c3, { 0x51 });
        gbc.writeMem(0x8dbb, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf10d, gbc.sp());
        EXPECT(0x8dbd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8dbb));
        EXPECT(0xbe, gbc.readMem(0x8dbc));
        // CB BE 0331
        gbc.setState(0x4ddc, 0x24e9, 0xa70, 0x5021, 0x5c4b, 0x980d, 0x0, 0x1);
        gbc.writeMem(0x4ddc, { 0xcb, 0xbe });
        gbc.writeMem(0x980d, { 0xa4 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x24e9, gbc.sp());
        EXPECT(0x4dde, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x980d));
        // CB BE 0332
        gbc.setState(0x1c00, 0x43a1, 0x16a0, 0xf946, 0x12c4, 0xcb59, 0x1, 0x1);
        gbc.writeMem(0x1c00, { 0xcb, 0xbe });
        gbc.writeMem(0xcb59, { 0xc });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x43a1, gbc.sp());
        EXPECT(0x1c02, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xcb59));
        // CB BE 0333
        gbc.setState(0x9ff0, 0x3262, 0xa70, 0x226e, 0x27ea, 0x4d63, 0x0, 0x1);
        gbc.writeMem(0x4d63, { 0x1f });
        gbc.writeMem(0x9ff0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x3262, gbc.sp());
        EXPECT(0x9ff2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ff0));
        EXPECT(0xbe, gbc.readMem(0x9ff1));
        // CB BE 0334
        gbc.setState(0x6392, 0x74df, 0xcfa0, 0x66cf, 0x3278, 0x413d, 0x0, 0x1);
        gbc.writeMem(0x413d, { 0x60 });
        gbc.writeMem(0x6392, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x74df, gbc.sp());
        EXPECT(0x6394, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0335
        gbc.setState(0x944d, 0x543a, 0xf430, 0x832b, 0x5997, 0x91e3, 0x0, 0x1);
        gbc.writeMem(0x91e3, { 0x35 });
        gbc.writeMem(0x944d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x543a, gbc.sp());
        EXPECT(0x944f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x91e3));
        EXPECT(0xcb, gbc.readMem(0x944d));
        EXPECT(0xbe, gbc.readMem(0x944e));
        // CB BE 0338
        gbc.setState(0x371, 0x368f, 0x4c00, 0xae1e, 0x55ff, 0x5b96, 0x0, 0x1);
        gbc.writeMem(0x371, { 0xcb, 0xbe });
        gbc.writeMem(0x5b96, { 0x1d });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x368f, gbc.sp());
        EXPECT(0x373, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0339
        gbc.setState(0x3e62, 0xa84b, 0x8480, 0xa05a, 0x765b, 0x838a, 0x1, 0x1);
        gbc.writeMem(0x3e62, { 0xcb, 0xbe });
        gbc.writeMem(0x838a, { 0xa3 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xa84b, gbc.sp());
        EXPECT(0x3e64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0x838a));
        // CB BE 033B
        gbc.setState(0x4a22, 0xb010, 0xce0, 0xb5d4, 0x181, 0x2532, 0x0, 0x0);
        gbc.writeMem(0x2532, { 0x51 });
        gbc.writeMem(0x4a22, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xb010, gbc.sp());
        EXPECT(0x4a24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 033D
        gbc.setState(0xd057, 0x5b54, 0x8ff0, 0xf068, 0x812c, 0x6e35, 0x1, 0x0);
        gbc.writeMem(0x6e35, { 0x7a });
        gbc.writeMem(0xd057, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x5b54, gbc.sp());
        EXPECT(0xd059, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd057));
        EXPECT(0xbe, gbc.readMem(0xd058));
        // CB BE 033F
        gbc.setState(0x4155, 0x7c4e, 0x4d00, 0xb61d, 0x92a7, 0x8b26, 0x0, 0x0);
        gbc.writeMem(0x4155, { 0xcb, 0xbe });
        gbc.writeMem(0x8b26, { 0x6c });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x7c4e, gbc.sp());
        EXPECT(0x4157, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0x8b26));
        // CB BE 0340
        gbc.setState(0xa3b6, 0x9bb4, 0x77f0, 0x5a30, 0xfdf0, 0xd574, 0x0, 0x1);
        gbc.writeMem(0xa3b6, { 0xcb, 0xbe });
        gbc.writeMem(0xd574, { 0xe4 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x9bb4, gbc.sp());
        EXPECT(0xa3b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa3b6));
        EXPECT(0xbe, gbc.readMem(0xa3b7));
        EXPECT(0x64, gbc.readMem(0xd574));
        // CB BE 0343
        gbc.setState(0x41f2, 0xcfa, 0x16a0, 0x5449, 0xba79, 0xf3ad, 0x1, 0x1);
        gbc.writeMem(0x41f2, { 0xcb, 0xbe });
        gbc.writeMem(0xf3ad, { 0x4a });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xcfa, gbc.sp());
        EXPECT(0x41f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xf3ad));
        // CB BE 0344
        gbc.setState(0x65fe, 0x93c, 0xb50, 0x494c, 0xc8d0, 0x7381, 0x1, 0x1);
        gbc.writeMem(0x65fe, { 0xcb, 0xbe });
        gbc.writeMem(0x7381, { 0x39 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x93c, gbc.sp());
        EXPECT(0x6600, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0346
        gbc.setState(0x1a08, 0x236d, 0x4770, 0x9fd7, 0xb0aa, 0x2dca, 0x0, 0x1);
        gbc.writeMem(0x1a08, { 0xcb, 0xbe });
        gbc.writeMem(0x2dca, { 0x71 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x236d, gbc.sp());
        EXPECT(0x1a0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0347
        gbc.setState(0x5c47, 0x4a15, 0x8860, 0x5d64, 0x62b7, 0xc016, 0x0, 0x1);
        gbc.writeMem(0x5c47, { 0xcb, 0xbe });
        gbc.writeMem(0xc016, { 0x9 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x4a15, gbc.sp());
        EXPECT(0x5c49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0xc016));
        // CB BE 0348
        gbc.setState(0x972d, 0x1ab6, 0x50c0, 0xdd36, 0xb586, 0x2acb, 0x0, 0x1);
        gbc.writeMem(0x2acb, { 0x2e });
        gbc.writeMem(0x972d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x1ab6, gbc.sp());
        EXPECT(0x972f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x972d));
        EXPECT(0xbe, gbc.readMem(0x972e));
        // CB BE 034A
        gbc.setState(0x1504, 0x26b8, 0xe3f0, 0x14f8, 0x3db1, 0xdfda, 0x0, 0x0);
        gbc.writeMem(0x1504, { 0xcb, 0xbe });
        gbc.writeMem(0xdfda, { 0x3b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x26b8, gbc.sp());
        EXPECT(0x1506, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3b, gbc.readMem(0xdfda));
        // CB BE 034B
        gbc.setState(0xef4c, 0x69cd, 0x9c00, 0xfeee, 0x95f6, 0xf6b0, 0x1, 0x0);
        gbc.writeMem(0xef4c, { 0xcb, 0xbe });
        gbc.writeMem(0xf6b0, { 0x9c });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x69cd, gbc.sp());
        EXPECT(0xef4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef4c));
        EXPECT(0xbe, gbc.readMem(0xef4d));
        EXPECT(0x1c, gbc.readMem(0xf6b0));
        // CB BE 034C
        gbc.setState(0x491, 0xf104, 0xa100, 0xbf37, 0xe9fc, 0xec4b, 0x0, 0x0);
        gbc.writeMem(0x491, { 0xcb, 0xbe });
        gbc.writeMem(0xec4b, { 0x70 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf104, gbc.sp());
        EXPECT(0x493, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xec4b));
        // CB BE 034D
        gbc.setState(0x459, 0xcbe5, 0xd030, 0x61da, 0xf7f4, 0x81a3, 0x1, 0x1);
        gbc.writeMem(0x459, { 0xcb, 0xbe });
        gbc.writeMem(0x81a3, { 0x27 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xcbe5, gbc.sp());
        EXPECT(0x45b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0x81a3));
        // CB BE 034F
        gbc.setState(0xa8b1, 0xedda, 0x8730, 0xfaf, 0x3aa1, 0x7a74, 0x0, 0x1);
        gbc.writeMem(0x7a74, { 0x4d });
        gbc.writeMem(0xa8b1, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xedda, gbc.sp());
        EXPECT(0xa8b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8b1));
        EXPECT(0xbe, gbc.readMem(0xa8b2));
        // CB BE 0350
        gbc.setState(0xa59f, 0x3a72, 0x2610, 0x9249, 0x9d7e, 0x82bc, 0x1, 0x0);
        gbc.writeMem(0x82bc, { 0xd9 });
        gbc.writeMem(0xa59f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x3a72, gbc.sp());
        EXPECT(0xa5a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0x82bc));
        EXPECT(0xcb, gbc.readMem(0xa59f));
        EXPECT(0xbe, gbc.readMem(0xa5a0));
        // CB BE 0351
        gbc.setState(0x5f85, 0x9168, 0x4ec0, 0xc271, 0xee0, 0xb3d4, 0x0, 0x0);
        gbc.writeMem(0x5f85, { 0xcb, 0xbe });
        gbc.writeMem(0xb3d4, { 0xa8 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x9168, gbc.sp());
        EXPECT(0x5f87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0xb3d4));
        // CB BE 0352
        gbc.setState(0x324b, 0x647b, 0x7690, 0x8c84, 0x48c5, 0xa83d, 0x0, 0x0);
        gbc.writeMem(0x324b, { 0xcb, 0xbe });
        gbc.writeMem(0xa83d, { 0xd9 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x647b, gbc.sp());
        EXPECT(0x324d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x59, gbc.readMem(0xa83d));
        // CB BE 0353
        gbc.setState(0xc2c9, 0xb273, 0x8000, 0xc406, 0x1bdf, 0xf31a, 0x1, 0x1);
        gbc.writeMem(0xc2c9, { 0xcb, 0xbe });
        gbc.writeMem(0xf31a, { 0xcd });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xb273, gbc.sp());
        EXPECT(0xc2cb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2c9));
        EXPECT(0xbe, gbc.readMem(0xc2ca));
        EXPECT(0x4d, gbc.readMem(0xf31a));
        // CB BE 0354
        gbc.setState(0xa15d, 0xa0cd, 0x3660, 0x7eff, 0xd27a, 0x7024, 0x1, 0x1);
        gbc.writeMem(0x7024, { 0x61 });
        gbc.writeMem(0xa15d, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xa0cd, gbc.sp());
        EXPECT(0xa15f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa15d));
        EXPECT(0xbe, gbc.readMem(0xa15e));
        // CB BE 0355
        gbc.setState(0x5e18, 0xe1fb, 0x63a0, 0x3f32, 0xe6dc, 0xcbca, 0x0, 0x1);
        gbc.writeMem(0x5e18, { 0xcb, 0xbe });
        gbc.writeMem(0xcbca, { 0x65 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xe1fb, gbc.sp());
        EXPECT(0x5e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0xcbca));
        // CB BE 0357
        gbc.setState(0x4d6a, 0xc603, 0x3f40, 0xd01a, 0xa503, 0xb871, 0x1, 0x1);
        gbc.writeMem(0x4d6a, { 0xcb, 0xbe });
        gbc.writeMem(0xb871, { 0xaa });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xc603, gbc.sp());
        EXPECT(0x4d6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2a, gbc.readMem(0xb871));
        // CB BE 0359
        gbc.setState(0x6621, 0x9403, 0x9050, 0xa334, 0xc4f7, 0xc5c6, 0x0, 0x0);
        gbc.writeMem(0x6621, { 0xcb, 0xbe });
        gbc.writeMem(0xc5c6, { 0x40 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9403, gbc.sp());
        EXPECT(0x6623, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xc5c6));
        // CB BE 035A
        gbc.setState(0xca7d, 0x1226, 0x16a0, 0xc8d5, 0x65d2, 0xe473, 0x1, 0x1);
        gbc.writeMem(0xca7d, { 0xcb, 0xbe });
        gbc.writeMem(0xe473, { 0xaa });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x1226, gbc.sp());
        EXPECT(0xca7f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca7d));
        EXPECT(0xbe, gbc.readMem(0xca7e));
        EXPECT(0x2a, gbc.readMem(0xe473));
        // CB BE 035B
        gbc.setState(0xe474, 0xe170, 0x9910, 0xad63, 0xfef1, 0xb83f, 0x0, 0x1);
        gbc.writeMem(0xb83f, { 0x91 });
        gbc.writeMem(0xe474, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xe170, gbc.sp());
        EXPECT(0xe476, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xb83f));
        EXPECT(0xcb, gbc.readMem(0xe474));
        EXPECT(0xbe, gbc.readMem(0xe475));
        // CB BE 035C
        gbc.setState(0xd35, 0xb132, 0x66e0, 0xab24, 0x4e8e, 0x925e, 0x0, 0x1);
        gbc.writeMem(0xd35, { 0xcb, 0xbe });
        gbc.writeMem(0x925e, { 0xc5 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xb132, gbc.sp());
        EXPECT(0xd37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x45, gbc.readMem(0x925e));
        // CB BE 035D
        gbc.setState(0xef38, 0xaf0c, 0xde60, 0x6d08, 0x2a01, 0x8e0c, 0x0, 0x1);
        gbc.writeMem(0x8e0c, { 0xfc });
        gbc.writeMem(0xef38, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xaf0c, gbc.sp());
        EXPECT(0xef3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7c, gbc.readMem(0x8e0c));
        EXPECT(0xcb, gbc.readMem(0xef38));
        EXPECT(0xbe, gbc.readMem(0xef39));
        // CB BE 035E
        gbc.setState(0xd49e, 0xe68a, 0x4b60, 0xbfcd, 0xaa0, 0xf8c2, 0x0, 0x0);
        gbc.writeMem(0xd49e, { 0xcb, 0xbe });
        gbc.writeMem(0xf8c2, { 0x3d });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xe68a, gbc.sp());
        EXPECT(0xd4a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd49e));
        EXPECT(0xbe, gbc.readMem(0xd49f));
        EXPECT(0x3d, gbc.readMem(0xf8c2));
        // CB BE 035F
        gbc.setState(0x32e6, 0xed31, 0x9360, 0x67d5, 0x2b2b, 0x6e56, 0x1, 0x1);
        gbc.writeMem(0x32e6, { 0xcb, 0xbe });
        gbc.writeMem(0x6e56, { 0x44 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xed31, gbc.sp());
        EXPECT(0x32e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0361
        gbc.setState(0xed0c, 0xe20c, 0xda60, 0x5193, 0xe316, 0x18db, 0x1, 0x0);
        gbc.writeMem(0x18db, { 0x6d });
        gbc.writeMem(0xed0c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xe20c, gbc.sp());
        EXPECT(0xed0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed0c));
        EXPECT(0xbe, gbc.readMem(0xed0d));
        // CB BE 0362
        gbc.setState(0x607, 0xbd7a, 0x69d0, 0x864d, 0x5c81, 0xbdd2, 0x1, 0x0);
        gbc.writeMem(0x607, { 0xcb, 0xbe });
        gbc.writeMem(0xbdd2, { 0x45 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xbd7a, gbc.sp());
        EXPECT(0x609, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x45, gbc.readMem(0xbdd2));
        // CB BE 0365
        gbc.setState(0xba7e, 0x35a7, 0xf8d0, 0xd1e3, 0x9528, 0xc9d9, 0x1, 0x0);
        gbc.writeMem(0xba7e, { 0xcb, 0xbe });
        gbc.writeMem(0xc9d9, { 0xdb });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x35a7, gbc.sp());
        EXPECT(0xba80, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba7e));
        EXPECT(0xbe, gbc.readMem(0xba7f));
        EXPECT(0x5b, gbc.readMem(0xc9d9));
        // CB BE 0367
        gbc.setState(0xd49a, 0xe9b4, 0xfcc0, 0x6492, 0x9ebc, 0xe02a, 0x0, 0x0);
        gbc.writeMem(0xd49a, { 0xcb, 0xbe });
        gbc.writeMem(0xe02a, { 0xfb });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xe9b4, gbc.sp());
        EXPECT(0xd49c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd49a));
        EXPECT(0xbe, gbc.readMem(0xd49b));
        EXPECT(0x7b, gbc.readMem(0xe02a));
        // CB BE 0368
        gbc.setState(0xd19b, 0x3e8f, 0x3940, 0xb3f3, 0xe185, 0x2d70, 0x1, 0x1);
        gbc.writeMem(0x2d70, { 0x5d });
        gbc.writeMem(0xd19b, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x3e8f, gbc.sp());
        EXPECT(0xd19d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd19b));
        EXPECT(0xbe, gbc.readMem(0xd19c));
        // CB BE 0369
        gbc.setState(0x8c2c, 0x53bd, 0x9a20, 0xda9f, 0x5f89, 0xc74e, 0x1, 0x0);
        gbc.writeMem(0x8c2c, { 0xcb, 0xbe });
        gbc.writeMem(0xc74e, { 0xfa });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x53bd, gbc.sp());
        EXPECT(0x8c2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c2c));
        EXPECT(0xbe, gbc.readMem(0x8c2d));
        EXPECT(0x7a, gbc.readMem(0xc74e));
        // CB BE 036A
        gbc.setState(0x461, 0xb0a, 0x7700, 0xb0e2, 0xb8f9, 0xbf37, 0x0, 0x1);
        gbc.writeMem(0x461, { 0xcb, 0xbe });
        gbc.writeMem(0xbf37, { 0xca });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xb0a, gbc.sp());
        EXPECT(0x463, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xbf37));
        // CB BE 036B
        gbc.setState(0x66c, 0xdef9, 0xbbf0, 0xb3da, 0xfe5a, 0x69df, 0x1, 0x0);
        gbc.writeMem(0x66c, { 0xcb, 0xbe });
        gbc.writeMem(0x69df, { 0x7a });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xdef9, gbc.sp());
        EXPECT(0x66e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 036E
        gbc.setState(0x6cf9, 0x4491, 0xb060, 0xbf96, 0xa3cf, 0x3df, 0x1, 0x0);
        gbc.writeMem(0x3df, { 0x59 });
        gbc.writeMem(0x6cf9, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x4491, gbc.sp());
        EXPECT(0x6cfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 0371
        gbc.setState(0xb27, 0xd8e8, 0x2300, 0x4cb1, 0xd6e7, 0x9967, 0x0, 0x0);
        gbc.writeMem(0xb27, { 0xcb, 0xbe });
        gbc.writeMem(0x9967, { 0x5b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xd8e8, gbc.sp());
        EXPECT(0xb29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0x9967));
        // CB BE 0372
        gbc.setState(0xbbf0, 0x4d6d, 0x2a00, 0xb398, 0xbd8c, 0xc10a, 0x1, 0x0);
        gbc.writeMem(0xbbf0, { 0xcb, 0xbe });
        gbc.writeMem(0xc10a, { 0x4d });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x4d6d, gbc.sp());
        EXPECT(0xbbf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbf0));
        EXPECT(0xbe, gbc.readMem(0xbbf1));
        EXPECT(0x4d, gbc.readMem(0xc10a));
        // CB BE 0373
        gbc.setState(0x6a0c, 0xd4dc, 0x2cd0, 0x1a1b, 0x941, 0x3374, 0x1, 0x1);
        gbc.writeMem(0x3374, { 0x53 });
        gbc.writeMem(0x6a0c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xd4dc, gbc.sp());
        EXPECT(0x6a0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0377
        gbc.setState(0xa392, 0x78b6, 0x8f10, 0x9c54, 0x8f0e, 0xdd3b, 0x0, 0x0);
        gbc.writeMem(0xa392, { 0xcb, 0xbe });
        gbc.writeMem(0xdd3b, { 0x23 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x78b6, gbc.sp());
        EXPECT(0xa394, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa392));
        EXPECT(0xbe, gbc.readMem(0xa393));
        EXPECT(0x23, gbc.readMem(0xdd3b));
        // CB BE 0378
        gbc.setState(0xdc6f, 0x741e, 0x4820, 0x14, 0x32cb, 0xde67, 0x1, 0x0);
        gbc.writeMem(0xdc6f, { 0xcb, 0xbe });
        gbc.writeMem(0xde67, { 0x2 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x741e, gbc.sp());
        EXPECT(0xdc71, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc6f));
        EXPECT(0xbe, gbc.readMem(0xdc70));
        EXPECT(0x2, gbc.readMem(0xde67));
        // CB BE 037A
        gbc.setState(0x56eb, 0x9bd6, 0x22a0, 0x511a, 0xae8e, 0xa4e2, 0x0, 0x1);
        gbc.writeMem(0x56eb, { 0xcb, 0xbe });
        gbc.writeMem(0xa4e2, { 0xaf });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x9bd6, gbc.sp());
        EXPECT(0x56ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xa4e2));
        // CB BE 037C
        gbc.setState(0xc618, 0x1f, 0x6b30, 0x8678, 0xfa2b, 0x2989, 0x0, 0x1);
        gbc.writeMem(0x2989, { 0x26 });
        gbc.writeMem(0xc618, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x1f, gbc.sp());
        EXPECT(0xc61a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc618));
        EXPECT(0xbe, gbc.readMem(0xc619));
        // CB BE 037D
        gbc.setState(0x3f8, 0x5a08, 0xf4f0, 0x61d, 0xec54, 0xe6aa, 0x0, 0x0);
        gbc.writeMem(0x3f8, { 0xcb, 0xbe });
        gbc.writeMem(0xe6aa, { 0x97 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x5a08, gbc.sp());
        EXPECT(0x3fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0xe6aa));
        // CB BE 037E
        gbc.setState(0x20ae, 0xf0e7, 0xbb50, 0x7fe5, 0x93f5, 0xde14, 0x1, 0x0);
        gbc.writeMem(0x20ae, { 0xcb, 0xbe });
        gbc.writeMem(0xde14, { 0x10 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf0e7, gbc.sp());
        EXPECT(0x20b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0xde14));
        // CB BE 037F
        gbc.setState(0x29a3, 0xc52d, 0x32b0, 0x686a, 0x9b18, 0x14c5, 0x0, 0x0);
        gbc.writeMem(0x14c5, { 0x59 });
        gbc.writeMem(0x29a3, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xc52d, gbc.sp());
        EXPECT(0x29a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0380
        gbc.setState(0xdbf7, 0xda6b, 0x9e90, 0x2aa4, 0x53b1, 0xc457, 0x1, 0x1);
        gbc.writeMem(0xc457, { 0x10 });
        gbc.writeMem(0xdbf7, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xda6b, gbc.sp());
        EXPECT(0xdbf9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0xc457));
        EXPECT(0xcb, gbc.readMem(0xdbf7));
        EXPECT(0xbe, gbc.readMem(0xdbf8));
        // CB BE 0383
        gbc.setState(0x6b8f, 0xbcce, 0xf090, 0x2619, 0x48c8, 0xb5e2, 0x0, 0x1);
        gbc.writeMem(0x6b8f, { 0xcb, 0xbe });
        gbc.writeMem(0xb5e2, { 0x2c });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xbcce, gbc.sp());
        EXPECT(0x6b91, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xb5e2));
        // CB BE 0384
        gbc.setState(0x8ce2, 0xd7f5, 0x61d0, 0x28c9, 0x45bd, 0x5f7a, 0x1, 0x0);
        gbc.writeMem(0x5f7a, { 0x39 });
        gbc.writeMem(0x8ce2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xd7f5, gbc.sp());
        EXPECT(0x8ce4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ce2));
        EXPECT(0xbe, gbc.readMem(0x8ce3));
        // CB BE 0385
        gbc.setState(0x136c, 0x904b, 0x8bf0, 0x5fa4, 0xa120, 0x6316, 0x0, 0x1);
        gbc.writeMem(0x136c, { 0xcb, 0xbe });
        gbc.writeMem(0x6316, { 0x2b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x904b, gbc.sp());
        EXPECT(0x136e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 0386
        gbc.setState(0x2c34, 0x6b55, 0x95c0, 0x9ee8, 0x33ea, 0x9a79, 0x0, 0x1);
        gbc.writeMem(0x2c34, { 0xcb, 0xbe });
        gbc.writeMem(0x9a79, { 0x5 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x6b55, gbc.sp());
        EXPECT(0x2c36, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0x9a79));
        // CB BE 0388
        gbc.setState(0xbd9f, 0xece9, 0x97d0, 0xb1e5, 0x3ac3, 0xb5bb, 0x0, 0x0);
        gbc.writeMem(0xb5bb, { 0x2e });
        gbc.writeMem(0xbd9f, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xece9, gbc.sp());
        EXPECT(0xbda1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2e, gbc.readMem(0xb5bb));
        EXPECT(0xcb, gbc.readMem(0xbd9f));
        EXPECT(0xbe, gbc.readMem(0xbda0));
        // CB BE 0389
        gbc.setState(0xd5ec, 0xe51d, 0xc9d0, 0x9963, 0xdc28, 0x8157, 0x0, 0x0);
        gbc.writeMem(0x8157, { 0xf4 });
        gbc.writeMem(0xd5ec, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xe51d, gbc.sp());
        EXPECT(0xd5ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0x8157));
        EXPECT(0xcb, gbc.readMem(0xd5ec));
        EXPECT(0xbe, gbc.readMem(0xd5ed));
        // CB BE 038A
        gbc.setState(0xb217, 0x8613, 0x51f0, 0x322c, 0xd4bc, 0xf1c6, 0x1, 0x1);
        gbc.writeMem(0xb217, { 0xcb, 0xbe });
        gbc.writeMem(0xf1c6, { 0x86 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x8613, gbc.sp());
        EXPECT(0xb219, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb217));
        EXPECT(0xbe, gbc.readMem(0xb218));
        EXPECT(0x6, gbc.readMem(0xf1c6));
        // CB BE 038B
        gbc.setState(0x44bb, 0x5582, 0x5d80, 0xf45, 0x560a, 0x798b, 0x0, 0x1);
        gbc.writeMem(0x44bb, { 0xcb, 0xbe });
        gbc.writeMem(0x798b, { 0x5d });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x5582, gbc.sp());
        EXPECT(0x44bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 038C
        gbc.setState(0x9ead, 0x8d89, 0xa990, 0xe0cf, 0x90d5, 0x24de, 0x1, 0x0);
        gbc.writeMem(0x24de, { 0x7d });
        gbc.writeMem(0x9ead, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x8d89, gbc.sp());
        EXPECT(0x9eaf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ead));
        EXPECT(0xbe, gbc.readMem(0x9eae));
        // CB BE 038D
        gbc.setState(0x93c3, 0xdca5, 0x9910, 0x5494, 0xee7, 0xe9b2, 0x0, 0x0);
        gbc.writeMem(0x93c3, { 0xcb, 0xbe });
        gbc.writeMem(0xe9b2, { 0xa9 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xdca5, gbc.sp());
        EXPECT(0x93c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93c3));
        EXPECT(0xbe, gbc.readMem(0x93c4));
        EXPECT(0x29, gbc.readMem(0xe9b2));
        // CB BE 038E
        gbc.setState(0x22a0, 0x5898, 0x1840, 0xdb4, 0xd8dd, 0x9b48, 0x1, 0x1);
        gbc.writeMem(0x22a0, { 0xcb, 0xbe });
        gbc.writeMem(0x9b48, { 0x76 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x5898, gbc.sp());
        EXPECT(0x22a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0x9b48));
        // CB BE 038F
        gbc.setState(0x63e6, 0xd484, 0x38e0, 0x1b18, 0x92a1, 0x922b, 0x1, 0x1);
        gbc.writeMem(0x63e6, { 0xcb, 0xbe });
        gbc.writeMem(0x922b, { 0xab });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xd484, gbc.sp());
        EXPECT(0x63e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2b, gbc.readMem(0x922b));
        // CB BE 0390
        gbc.setState(0xbacb, 0xe3fd, 0x5050, 0x1028, 0x3e6d, 0xc8d2, 0x0, 0x0);
        gbc.writeMem(0xbacb, { 0xcb, 0xbe });
        gbc.writeMem(0xc8d2, { 0xab });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xe3fd, gbc.sp());
        EXPECT(0xbacd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbacb));
        EXPECT(0xbe, gbc.readMem(0xbacc));
        EXPECT(0x2b, gbc.readMem(0xc8d2));
        // CB BE 0392
        gbc.setState(0x5cf4, 0x93e9, 0x6de0, 0x8672, 0x6f74, 0xdb43, 0x0, 0x0);
        gbc.writeMem(0x5cf4, { 0xcb, 0xbe });
        gbc.writeMem(0xdb43, { 0xe3 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x93e9, gbc.sp());
        EXPECT(0x5cf6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xdb43));
        // CB BE 0393
        gbc.setState(0x9b6d, 0x71d5, 0xbe90, 0x5920, 0x6fd4, 0xd77b, 0x0, 0x1);
        gbc.writeMem(0x9b6d, { 0xcb, 0xbe });
        gbc.writeMem(0xd77b, { 0x0 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x71d5, gbc.sp());
        EXPECT(0x9b6f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b6d));
        EXPECT(0xbe, gbc.readMem(0x9b6e));
        EXPECT(0x0, gbc.readMem(0xd77b));
        // CB BE 0394
        gbc.setState(0xad27, 0x5531, 0xf390, 0x8f15, 0x364a, 0x1b6e, 0x1, 0x0);
        gbc.writeMem(0x1b6e, { 0x78 });
        gbc.writeMem(0xad27, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x5531, gbc.sp());
        EXPECT(0xad29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xad27));
        EXPECT(0xbe, gbc.readMem(0xad28));
        // CB BE 0396
        gbc.setState(0xc535, 0xdef1, 0x4d00, 0xa6b0, 0xdb18, 0xdd9, 0x1, 0x1);
        gbc.writeMem(0xdd9, { 0x48 });
        gbc.writeMem(0xc535, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xdef1, gbc.sp());
        EXPECT(0xc537, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc535));
        EXPECT(0xbe, gbc.readMem(0xc536));
        // CB BE 0397
        gbc.setState(0xb563, 0x660a, 0xad10, 0xa7bb, 0x154f, 0xe289, 0x1, 0x0);
        gbc.writeMem(0xb563, { 0xcb, 0xbe });
        gbc.writeMem(0xe289, { 0xf8 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x660a, gbc.sp());
        EXPECT(0xb565, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb563));
        EXPECT(0xbe, gbc.readMem(0xb564));
        EXPECT(0x78, gbc.readMem(0xe289));
        // CB BE 039A
        gbc.setState(0x7ab8, 0x50f2, 0x8990, 0x5b05, 0x5dc6, 0xafa1, 0x0, 0x1);
        gbc.writeMem(0x7ab8, { 0xcb, 0xbe });
        gbc.writeMem(0xafa1, { 0xcf });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x50f2, gbc.sp());
        EXPECT(0x7aba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4f, gbc.readMem(0xafa1));
        // CB BE 039C
        gbc.setState(0x2530, 0x2532, 0x5e00, 0x5a8c, 0x6723, 0xb8be, 0x0, 0x0);
        gbc.writeMem(0x2530, { 0xcb, 0xbe });
        gbc.writeMem(0xb8be, { 0xc });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x2532, gbc.sp());
        EXPECT(0x2532, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xb8be));
        // CB BE 039D
        gbc.setState(0xbd22, 0x866e, 0x9960, 0xee80, 0x738, 0x5689, 0x0, 0x0);
        gbc.writeMem(0x5689, { 0x23 });
        gbc.writeMem(0xbd22, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x866e, gbc.sp());
        EXPECT(0xbd24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbd22));
        EXPECT(0xbe, gbc.readMem(0xbd23));
        // CB BE 039E
        gbc.setState(0xd1a, 0x75c1, 0x6e30, 0x4bdd, 0xa24c, 0x31a1, 0x0, 0x0);
        gbc.writeMem(0xd1a, { 0xcb, 0xbe });
        gbc.writeMem(0x31a1, { 0x4a });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x75c1, gbc.sp());
        EXPECT(0xd1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 03A0
        gbc.setState(0x8efa, 0xaa7b, 0x6230, 0x81bb, 0xd05e, 0x98dd, 0x1, 0x1);
        gbc.writeMem(0x8efa, { 0xcb, 0xbe });
        gbc.writeMem(0x98dd, { 0x92 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xaa7b, gbc.sp());
        EXPECT(0x8efc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8efa));
        EXPECT(0xbe, gbc.readMem(0x8efb));
        EXPECT(0x12, gbc.readMem(0x98dd));
        // CB BE 03A1
        gbc.setState(0x4220, 0x6ead, 0x8e90, 0xa8f6, 0x2c66, 0xa725, 0x1, 0x0);
        gbc.writeMem(0x4220, { 0xcb, 0xbe });
        gbc.writeMem(0xa725, { 0xc });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x6ead, gbc.sp());
        EXPECT(0x4222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xa725));
        // CB BE 03A3
        gbc.setState(0x6869, 0x8e2e, 0x7a00, 0xd4d9, 0x3bb1, 0xa45d, 0x0, 0x0);
        gbc.writeMem(0x6869, { 0xcb, 0xbe });
        gbc.writeMem(0xa45d, { 0x58 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x8e2e, gbc.sp());
        EXPECT(0x686b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xa45d));
        // CB BE 03A4
        gbc.setState(0x1d32, 0x170e, 0xf1e0, 0x60a4, 0x6417, 0x8781, 0x0, 0x1);
        gbc.writeMem(0x1d32, { 0xcb, 0xbe });
        gbc.writeMem(0x8781, { 0x6d });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x170e, gbc.sp());
        EXPECT(0x1d34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0x8781));
        // CB BE 03A6
        gbc.setState(0x4e9c, 0xfc61, 0x2ba0, 0xf299, 0x6a15, 0xcc58, 0x0, 0x0);
        gbc.writeMem(0x4e9c, { 0xcb, 0xbe });
        gbc.writeMem(0xcc58, { 0xac });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xfc61, gbc.sp());
        EXPECT(0x4e9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xcc58));
        // CB BE 03A7
        gbc.setState(0x3768, 0xdccb, 0xced0, 0x3bf2, 0x274e, 0xba15, 0x0, 0x0);
        gbc.writeMem(0x3768, { 0xcb, 0xbe });
        gbc.writeMem(0xba15, { 0x58 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xdccb, gbc.sp());
        EXPECT(0x376a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xba15));
        // CB BE 03A9
        gbc.setState(0xdd40, 0x8189, 0xdb70, 0x7caf, 0x70b3, 0xc5e6, 0x1, 0x0);
        gbc.writeMem(0xc5e6, { 0x66 });
        gbc.writeMem(0xdd40, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x8189, gbc.sp());
        EXPECT(0xdd42, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xc5e6));
        EXPECT(0xcb, gbc.readMem(0xdd40));
        EXPECT(0xbe, gbc.readMem(0xdd41));
        // CB BE 03AA
        gbc.setState(0x9f1f, 0x8f8e, 0x4ad0, 0x3a8b, 0xca01, 0xd57e, 0x0, 0x1);
        gbc.writeMem(0x9f1f, { 0xcb, 0xbe });
        gbc.writeMem(0xd57e, { 0x92 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x8f8e, gbc.sp());
        EXPECT(0x9f21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f1f));
        EXPECT(0xbe, gbc.readMem(0x9f20));
        EXPECT(0x12, gbc.readMem(0xd57e));
        // CB BE 03AB
        gbc.setState(0x4ca5, 0xab8c, 0x6460, 0xad5f, 0x96fe, 0x9537, 0x0, 0x1);
        gbc.writeMem(0x4ca5, { 0xcb, 0xbe });
        gbc.writeMem(0x9537, { 0x64 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xab8c, gbc.sp());
        EXPECT(0x4ca7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x9537));
        // CB BE 03AD
        gbc.setState(0x299, 0x241f, 0x61e0, 0xf1c5, 0xda9f, 0xcd57, 0x1, 0x0);
        gbc.writeMem(0x299, { 0xcb, 0xbe });
        gbc.writeMem(0xcd57, { 0xb3 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x241f, gbc.sp());
        EXPECT(0x29b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x33, gbc.readMem(0xcd57));
        // CB BE 03AE
        gbc.setState(0x84d8, 0x8b2d, 0x7b0, 0xf8fb, 0xbc19, 0x9fe0, 0x0, 0x1);
        gbc.writeMem(0x84d8, { 0xcb, 0xbe });
        gbc.writeMem(0x9fe0, { 0xd });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x8b2d, gbc.sp());
        EXPECT(0x84da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84d8));
        EXPECT(0xbe, gbc.readMem(0x84d9));
        EXPECT(0xd, gbc.readMem(0x9fe0));
        // CB BE 03AF
        gbc.setState(0xbbec, 0x6fd9, 0x6f70, 0x7f27, 0x468b, 0xcf43, 0x0, 0x1);
        gbc.writeMem(0xbbec, { 0xcb, 0xbe });
        gbc.writeMem(0xcf43, { 0x28 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x6fd9, gbc.sp());
        EXPECT(0xbbee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbec));
        EXPECT(0xbe, gbc.readMem(0xbbed));
        EXPECT(0x28, gbc.readMem(0xcf43));
        // CB BE 03B0
        gbc.setState(0x9b25, 0xc0e9, 0x8ea0, 0x60c9, 0x956a, 0x9c84, 0x1, 0x0);
        gbc.writeMem(0x9b25, { 0xcb, 0xbe });
        gbc.writeMem(0x9c84, { 0x16 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xc0e9, gbc.sp());
        EXPECT(0x9b27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b25));
        EXPECT(0xbe, gbc.readMem(0x9b26));
        EXPECT(0x16, gbc.readMem(0x9c84));
        // CB BE 03B1
        gbc.setState(0xba05, 0xcbdf, 0xc1b0, 0xb063, 0xf3c5, 0x501, 0x0, 0x0);
        gbc.writeMem(0x501, { 0x61 });
        gbc.writeMem(0xba05, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xcbdf, gbc.sp());
        EXPECT(0xba07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba05));
        EXPECT(0xbe, gbc.readMem(0xba06));
        // CB BE 03B4
        gbc.setState(0x7b65, 0xbc37, 0xbf0, 0x3a30, 0x7ac9, 0x5996, 0x0, 0x1);
        gbc.writeMem(0x5996, { 0x77 });
        gbc.writeMem(0x7b65, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xbc37, gbc.sp());
        EXPECT(0x7b67, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 03B5
        gbc.setState(0x151f, 0x4aba, 0x7f40, 0xf4a3, 0x6ed6, 0x29b5, 0x0, 0x1);
        gbc.writeMem(0x151f, { 0xcb, 0xbe });
        gbc.writeMem(0x29b5, { 0x35 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x4aba, gbc.sp());
        EXPECT(0x1521, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 03B7
        gbc.setState(0xeaec, 0x9f53, 0xd620, 0xd2bf, 0x8c0f, 0x519b, 0x1, 0x1);
        gbc.writeMem(0x519b, { 0x33 });
        gbc.writeMem(0xeaec, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x9f53, gbc.sp());
        EXPECT(0xeaee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeaec));
        EXPECT(0xbe, gbc.readMem(0xeaed));
        // CB BE 03B8
        gbc.setState(0xe298, 0x177b, 0x2b10, 0x79b8, 0x967b, 0x9352, 0x1, 0x0);
        gbc.writeMem(0x9352, { 0xec });
        gbc.writeMem(0xe298, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x177b, gbc.sp());
        EXPECT(0xe29a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0x9352));
        EXPECT(0xcb, gbc.readMem(0xe298));
        EXPECT(0xbe, gbc.readMem(0xe299));
        // CB BE 03B9
        gbc.setState(0x932f, 0x7f28, 0x3e50, 0x3ab9, 0xf594, 0x9d86, 0x0, 0x1);
        gbc.writeMem(0x932f, { 0xcb, 0xbe });
        gbc.writeMem(0x9d86, { 0xca });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7f28, gbc.sp());
        EXPECT(0x9331, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x932f));
        EXPECT(0xbe, gbc.readMem(0x9330));
        EXPECT(0x4a, gbc.readMem(0x9d86));
        // CB BE 03BB
        gbc.setState(0x8811, 0x3c38, 0x6490, 0xf267, 0xc1dd, 0x4d59, 0x1, 0x1);
        gbc.writeMem(0x4d59, { 0x30 });
        gbc.writeMem(0x8811, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x3c38, gbc.sp());
        EXPECT(0x8813, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8811));
        EXPECT(0xbe, gbc.readMem(0x8812));
        // CB BE 03BC
        gbc.setState(0x6db, 0xd073, 0x6100, 0x9027, 0xb012, 0xba5b, 0x1, 0x1);
        gbc.writeMem(0x6db, { 0xcb, 0xbe });
        gbc.writeMem(0xba5b, { 0x2f });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xd073, gbc.sp());
        EXPECT(0x6dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xba5b));
        // CB BE 03BD
        gbc.setState(0xa789, 0x212, 0xe460, 0x9a33, 0xa640, 0x6dd9, 0x0, 0x1);
        gbc.writeMem(0x6dd9, { 0x5 });
        gbc.writeMem(0xa789, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x212, gbc.sp());
        EXPECT(0xa78b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa789));
        EXPECT(0xbe, gbc.readMem(0xa78a));
        // CB BE 03BE
        gbc.setState(0x2203, 0xd69d, 0x5260, 0x605e, 0xde59, 0x17e6, 0x0, 0x0);
        gbc.writeMem(0x17e6, { 0x7b });
        gbc.writeMem(0x2203, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xd69d, gbc.sp());
        EXPECT(0x2205, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 03BF
        gbc.setState(0x4973, 0xa686, 0x44c0, 0xe4d4, 0xfe3a, 0xa7ed, 0x0, 0x1);
        gbc.writeMem(0x4973, { 0xcb, 0xbe });
        gbc.writeMem(0xa7ed, { 0x77 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xa686, gbc.sp());
        EXPECT(0x4975, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xa7ed));
        // CB BE 03C0
        gbc.setState(0x538f, 0x6dea, 0x4040, 0x3d3a, 0xa583, 0x9d6b, 0x1, 0x0);
        gbc.writeMem(0x538f, { 0xcb, 0xbe });
        gbc.writeMem(0x9d6b, { 0x9d });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x6dea, gbc.sp());
        EXPECT(0x5391, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0x9d6b));
        // CB BE 03C1
        gbc.setState(0xee0e, 0x42a2, 0x5c20, 0x9119, 0x5b00, 0xc7c0, 0x0, 0x1);
        gbc.writeMem(0xc7c0, { 0x8e });
        gbc.writeMem(0xee0e, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x42a2, gbc.sp());
        EXPECT(0xee10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xc7c0));
        EXPECT(0xcb, gbc.readMem(0xee0e));
        EXPECT(0xbe, gbc.readMem(0xee0f));
        // CB BE 03C2
        gbc.setState(0xe2c5, 0xfbe8, 0xc0c0, 0xaeb2, 0xaf4f, 0x4689, 0x1, 0x0);
        gbc.writeMem(0x4689, { 0x44 });
        gbc.writeMem(0xe2c5, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xfbe8, gbc.sp());
        EXPECT(0xe2c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2c5));
        EXPECT(0xbe, gbc.readMem(0xe2c6));
        // CB BE 03C3
        gbc.setState(0xadb0, 0x3201, 0x20a0, 0x2aeb, 0x64d2, 0x88f8, 0x1, 0x1);
        gbc.writeMem(0x88f8, { 0x90 });
        gbc.writeMem(0xadb0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x3201, gbc.sp());
        EXPECT(0xadb2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0x88f8));
        EXPECT(0xcb, gbc.readMem(0xadb0));
        EXPECT(0xbe, gbc.readMem(0xadb1));
        // CB BE 03C4
        gbc.setState(0x3ad0, 0x333, 0xf70, 0x9746, 0x597d, 0xa6f8, 0x0, 0x0);
        gbc.writeMem(0x3ad0, { 0xcb, 0xbe });
        gbc.writeMem(0xa6f8, { 0x9f });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x333, gbc.sp());
        EXPECT(0x3ad2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1f, gbc.readMem(0xa6f8));
        // CB BE 03C7
        gbc.setState(0xa156, 0x223b, 0x6270, 0x2819, 0xd9fc, 0xbafc, 0x1, 0x0);
        gbc.writeMem(0xa156, { 0xcb, 0xbe });
        gbc.writeMem(0xbafc, { 0x65 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x223b, gbc.sp());
        EXPECT(0xa158, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa156));
        EXPECT(0xbe, gbc.readMem(0xa157));
        EXPECT(0x65, gbc.readMem(0xbafc));
        // CB BE 03C8
        gbc.setState(0xc7f, 0x33b0, 0x4630, 0x8c6, 0x8e6a, 0xf143, 0x0, 0x0);
        gbc.writeMem(0xc7f, { 0xcb, 0xbe });
        gbc.writeMem(0xf143, { 0x19 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x33b0, gbc.sp());
        EXPECT(0xc81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x19, gbc.readMem(0xf143));
        // CB BE 03C9
        gbc.setState(0x638d, 0x78f6, 0x9060, 0x79c4, 0x73be, 0xbcb5, 0x1, 0x0);
        gbc.writeMem(0x638d, { 0xcb, 0xbe });
        gbc.writeMem(0xbcb5, { 0x1 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x78f6, gbc.sp());
        EXPECT(0x638f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1, gbc.readMem(0xbcb5));
        // CB BE 03CA
        gbc.setState(0xd855, 0x44cc, 0x2980, 0x707d, 0x971c, 0xe181, 0x0, 0x1);
        gbc.writeMem(0xd855, { 0xcb, 0xbe });
        gbc.writeMem(0xe181, { 0xdb });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x44cc, gbc.sp());
        EXPECT(0xd857, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd855));
        EXPECT(0xbe, gbc.readMem(0xd856));
        EXPECT(0x5b, gbc.readMem(0xe181));
        // CB BE 03CB
        gbc.setState(0xd1f2, 0xee4f, 0xbdd0, 0x7fd, 0x52cf, 0x6788, 0x1, 0x1);
        gbc.writeMem(0x6788, { 0x11 });
        gbc.writeMem(0xd1f2, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xee4f, gbc.sp());
        EXPECT(0xd1f4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1f2));
        EXPECT(0xbe, gbc.readMem(0xd1f3));
        // CB BE 03CC
        gbc.setState(0x96b1, 0xefc0, 0x8910, 0x83ec, 0x9945, 0x9e91, 0x0, 0x0);
        gbc.writeMem(0x96b1, { 0xcb, 0xbe });
        gbc.writeMem(0x9e91, { 0x31 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xefc0, gbc.sp());
        EXPECT(0x96b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96b1));
        EXPECT(0xbe, gbc.readMem(0x96b2));
        EXPECT(0x31, gbc.readMem(0x9e91));
        // CB BE 03CF
        gbc.setState(0xbde9, 0x823f, 0xa990, 0x9fc6, 0x65f1, 0x86f4, 0x0, 0x1);
        gbc.writeMem(0x86f4, { 0x34 });
        gbc.writeMem(0xbde9, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x823f, gbc.sp());
        EXPECT(0xbdeb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0x86f4));
        EXPECT(0xcb, gbc.readMem(0xbde9));
        EXPECT(0xbe, gbc.readMem(0xbdea));
        // CB BE 03D0
        gbc.setState(0x1c80, 0x46a8, 0x5510, 0x5f53, 0x9169, 0x5d08, 0x0, 0x1);
        gbc.writeMem(0x1c80, { 0xcb, 0xbe });
        gbc.writeMem(0x5d08, { 0x52 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x46a8, gbc.sp());
        EXPECT(0x1c82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB BE 03D1
        gbc.setState(0x535d, 0x1f14, 0x490, 0x2a1c, 0x1de0, 0x9b33, 0x0, 0x1);
        gbc.writeMem(0x535d, { 0xcb, 0xbe });
        gbc.writeMem(0x9b33, { 0x89 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x1f14, gbc.sp());
        EXPECT(0x535f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0x9b33));
        // CB BE 03D2
        gbc.setState(0xa813, 0x8717, 0x6d40, 0xe9bf, 0x7bdb, 0x91ec, 0x0, 0x1);
        gbc.writeMem(0x91ec, { 0x77 });
        gbc.writeMem(0xa813, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x8717, gbc.sp());
        EXPECT(0xa815, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0x91ec));
        EXPECT(0xcb, gbc.readMem(0xa813));
        EXPECT(0xbe, gbc.readMem(0xa814));
        // CB BE 03D3
        gbc.setState(0x7832, 0x5329, 0x43f0, 0xe4b0, 0xc1af, 0x8409, 0x1, 0x1);
        gbc.writeMem(0x7832, { 0xcb, 0xbe });
        gbc.writeMem(0x8409, { 0xe4 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x5329, gbc.sp());
        EXPECT(0x7834, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0x8409));
        // CB BE 03D4
        gbc.setState(0x84ca, 0xa021, 0x72b0, 0xa93c, 0x1632, 0xdc0d, 0x0, 0x1);
        gbc.writeMem(0x84ca, { 0xcb, 0xbe });
        gbc.writeMem(0xdc0d, { 0xbb });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xa021, gbc.sp());
        EXPECT(0x84cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x84ca));
        EXPECT(0xbe, gbc.readMem(0x84cb));
        EXPECT(0x3b, gbc.readMem(0xdc0d));
        // CB BE 03D5
        gbc.setState(0xe61c, 0xdea9, 0xa1e0, 0x4141, 0xb401, 0x2e51, 0x0, 0x0);
        gbc.writeMem(0x2e51, { 0x3e });
        gbc.writeMem(0xe61c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0xdea9, gbc.sp());
        EXPECT(0xe61e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe61c));
        EXPECT(0xbe, gbc.readMem(0xe61d));
        // CB BE 03D6
        gbc.setState(0x97f0, 0x8804, 0xff00, 0x7df9, 0xf90e, 0x2969, 0x0, 0x1);
        gbc.writeMem(0x2969, { 0x37 });
        gbc.writeMem(0x97f0, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x7d, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x8804, gbc.sp());
        EXPECT(0x97f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x97f0));
        EXPECT(0xbe, gbc.readMem(0x97f1));
        // CB BE 03D7
        gbc.setState(0x7a47, 0x9b53, 0x9880, 0xa231, 0x8283, 0xe5e1, 0x0, 0x1);
        gbc.writeMem(0x7a47, { 0xcb, 0xbe });
        gbc.writeMem(0xe5e1, { 0x29 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x9b53, gbc.sp());
        EXPECT(0x7a49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xe5e1));
        // CB BE 03D8
        gbc.setState(0x4d9, 0x7217, 0xdd0, 0xe38d, 0xbbcc, 0xd176, 0x0, 0x0);
        gbc.writeMem(0x4d9, { 0xcb, 0xbe });
        gbc.writeMem(0xd176, { 0x58 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x7217, gbc.sp());
        EXPECT(0x4db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xd176));
        // CB BE 03DA
        gbc.setState(0x7380, 0xa0c5, 0xeb80, 0xd9dc, 0xbdbf, 0xe52d, 0x1, 0x0);
        gbc.writeMem(0x7380, { 0xcb, 0xbe });
        gbc.writeMem(0xe52d, { 0xe3 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xa0c5, gbc.sp());
        EXPECT(0x7382, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xe52d));
        // CB BE 03DB
        gbc.setState(0x21a1, 0x7e34, 0x74b0, 0x1544, 0x7b65, 0xaa12, 0x1, 0x0);
        gbc.writeMem(0x21a1, { 0xcb, 0xbe });
        gbc.writeMem(0xaa12, { 0xa2 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x7e34, gbc.sp());
        EXPECT(0x21a3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xaa12));
        // CB BE 03DC
        gbc.setState(0x99c8, 0x5c1, 0xb5e0, 0x268, 0xc9a9, 0xda00, 0x0, 0x1);
        gbc.writeMem(0x99c8, { 0xcb, 0xbe });
        gbc.writeMem(0xda00, { 0xa6 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x5c1, gbc.sp());
        EXPECT(0x99ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99c8));
        EXPECT(0xbe, gbc.readMem(0x99c9));
        EXPECT(0x26, gbc.readMem(0xda00));
        // CB BE 03DE
        gbc.setState(0x646f, 0x86fc, 0x4360, 0x19fb, 0xbb7e, 0xa1f7, 0x0, 0x1);
        gbc.writeMem(0x646f, { 0xcb, 0xbe });
        gbc.writeMem(0xa1f7, { 0x9d });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x86fc, gbc.sp());
        EXPECT(0x6471, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1d, gbc.readMem(0xa1f7));
        // CB BE 03DF
        gbc.setState(0x22c4, 0xc876, 0xf0a0, 0xe19f, 0x3280, 0x9c14, 0x1, 0x0);
        gbc.writeMem(0x22c4, { 0xcb, 0xbe });
        gbc.writeMem(0x9c14, { 0x5b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xc876, gbc.sp());
        EXPECT(0x22c6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0x9c14));
        // CB BE 03E0
        gbc.setState(0xcd6c, 0x6361, 0x5b0, 0x5ea1, 0x5dab, 0x3d2e, 0x1, 0x1);
        gbc.writeMem(0x3d2e, { 0x68 });
        gbc.writeMem(0xcd6c, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x6361, gbc.sp());
        EXPECT(0xcd6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd6c));
        EXPECT(0xbe, gbc.readMem(0xcd6d));
        // CB BE 03E1
        gbc.setState(0x3842, 0x30e9, 0x7ab0, 0x1bfb, 0x9212, 0xa666, 0x1, 0x0);
        gbc.writeMem(0x3842, { 0xcb, 0xbe });
        gbc.writeMem(0xa666, { 0xa5 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x30e9, gbc.sp());
        EXPECT(0x3844, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x25, gbc.readMem(0xa666));
        // CB BE 03E4
        gbc.setState(0xa7df, 0xf7bb, 0x5f60, 0x8ec1, 0x58d7, 0x8df8, 0x1, 0x1);
        gbc.writeMem(0x8df8, { 0x25 });
        gbc.writeMem(0xa7df, { 0xcb, 0xbe });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xf7bb, gbc.sp());
        EXPECT(0xa7e1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x25, gbc.readMem(0x8df8));
        EXPECT(0xcb, gbc.readMem(0xa7df));
        EXPECT(0xbe, gbc.readMem(0xa7e0));
        // CB BE 03E5
        gbc.setState(0x2480, 0x4e49, 0x7a40, 0x69d8, 0x8605, 0x3c2a, 0x0, 0x0);
        gbc.writeMem(0x2480, { 0xcb, 0xbe });
        gbc.writeMem(0x3c2a, { 0x1f });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x4e49, gbc.sp());
        EXPECT(0x2482, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB BE 03E6
        gbc.setState(0x3f9, 0x437f, 0xba30, 0xea26, 0xaac, 0xd2ac, 0x0, 0x1);
        gbc.writeMem(0x3f9, { 0xcb, 0xbe });
        gbc.writeMem(0xd2ac, { 0x30 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x437f, gbc.sp());
        EXPECT(0x3fb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xd2ac));
    }
