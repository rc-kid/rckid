#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_a8)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_a8) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB A8 0000
        gbc.setState(0x1361, 0xbbe2, 0x83a0, 0xdd50, 0x92ad, 0x5903, 0x0, 0x1);
        gbc.writeMem(0x1361, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbbe2);
        EXPECT(gbc.pc(), 0x1363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0001
        gbc.setState(0x6bb7, 0x4cf, 0x8d00, 0xfbaa, 0xab21, 0x2002, 0x0, 0x0);
        gbc.writeMem(0x6bb7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4cf);
        EXPECT(gbc.pc(), 0x6bb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0002
        gbc.setState(0x426e, 0x4227, 0x8750, 0x84c9, 0x263a, 0xa755, 0x0, 0x0);
        gbc.writeMem(0x426e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4227);
        EXPECT(gbc.pc(), 0x4270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0003
        gbc.setState(0x73cf, 0xd807, 0xdba0, 0x310, 0x555, 0x8e97, 0x1, 0x1);
        gbc.writeMem(0x73cf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xd807);
        EXPECT(gbc.pc(), 0x73d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0004
        gbc.setState(0x5f39, 0xd0d7, 0xa30, 0xbdf8, 0x1aa4, 0x8e4f, 0x0, 0x1);
        gbc.writeMem(0x5f39, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd0d7);
        EXPECT(gbc.pc(), 0x5f3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0005
        gbc.setState(0x8c58, 0x721f, 0x25c0, 0xaf9e, 0x976c, 0x4a91, 0x1, 0x0);
        gbc.writeMem(0x8c58, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x721f);
        EXPECT(gbc.pc(), 0x8c5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c58), 0xcb);
        EXPECT(gbc.readMem(0x8c59), 0xa8);
        // CB A8 0006
        gbc.setState(0x6, 0x858e, 0x62c0, 0xd693, 0x2ee5, 0x53ba, 0x1, 0x1);
        gbc.writeMem(0x6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x858e);
        EXPECT(gbc.pc(), 0x8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0007
        gbc.setState(0x45d4, 0x2e6e, 0x7480, 0x9162, 0xa57b, 0xa1d1, 0x0, 0x0);
        gbc.writeMem(0x45d4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2e6e);
        EXPECT(gbc.pc(), 0x45d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0008
        gbc.setState(0x68e1, 0x42fc, 0xab80, 0x6c84, 0x9435, 0x6a7c, 0x1, 0x0);
        gbc.writeMem(0x68e1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x42fc);
        EXPECT(gbc.pc(), 0x68e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0009
        gbc.setState(0x9af3, 0x4a10, 0x9610, 0xf1f9, 0x1e81, 0xb9d3, 0x0, 0x1);
        gbc.writeMem(0x9af3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0x9af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af3), 0xcb);
        EXPECT(gbc.readMem(0x9af4), 0xa8);
        // CB A8 000A
        gbc.setState(0x25a8, 0xadcc, 0xb250, 0x3417, 0xe150, 0xebcb, 0x1, 0x0);
        gbc.writeMem(0x25a8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xadcc);
        EXPECT(gbc.pc(), 0x25aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 000B
        gbc.setState(0x3e6e, 0xe34e, 0xc4d0, 0x2e53, 0xe3aa, 0x69f, 0x0, 0x0);
        gbc.writeMem(0x3e6e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe34e);
        EXPECT(gbc.pc(), 0x3e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 000C
        gbc.setState(0xc49b, 0x7ff2, 0xfe50, 0x3182, 0x4a88, 0x36d6, 0x0, 0x0);
        gbc.writeMem(0xc49b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7ff2);
        EXPECT(gbc.pc(), 0xc49d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc49b), 0xcb);
        EXPECT(gbc.readMem(0xc49c), 0xa8);
        // CB A8 000D
        gbc.setState(0x9ae1, 0x551e, 0x4790, 0x2c62, 0xcc21, 0xac78, 0x1, 0x1);
        gbc.writeMem(0x9ae1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x551e);
        EXPECT(gbc.pc(), 0x9ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae1), 0xcb);
        EXPECT(gbc.readMem(0x9ae2), 0xa8);
        // CB A8 000E
        gbc.setState(0xee, 0x61c9, 0x560, 0xd4cf, 0x6113, 0x93e0, 0x1, 0x0);
        gbc.writeMem(0xee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x61c9);
        EXPECT(gbc.pc(), 0xf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 000F
        gbc.setState(0x77e0, 0xd751, 0x5570, 0x30cf, 0x6597, 0xef3a, 0x0, 0x0);
        gbc.writeMem(0x77e0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd751);
        EXPECT(gbc.pc(), 0x77e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0010
        gbc.setState(0x2a40, 0x87e7, 0x5d40, 0xd42, 0xfc3b, 0xda41, 0x0, 0x1);
        gbc.writeMem(0x2a40, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x87e7);
        EXPECT(gbc.pc(), 0x2a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0011
        gbc.setState(0x403c, 0xd38a, 0x93d0, 0x47c2, 0x1d03, 0xf58d, 0x0, 0x1);
        gbc.writeMem(0x403c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd38a);
        EXPECT(gbc.pc(), 0x403e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0012
        gbc.setState(0xb2af, 0xa238, 0x7510, 0x6f3f, 0xa6c7, 0x2a9, 0x1, 0x0);
        gbc.writeMem(0xb2af, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa238);
        EXPECT(gbc.pc(), 0xb2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2af), 0xcb);
        EXPECT(gbc.readMem(0xb2b0), 0xa8);
        // CB A8 0013
        gbc.setState(0x732a, 0x52d9, 0xc460, 0x6795, 0xd94f, 0xef45, 0x1, 0x1);
        gbc.writeMem(0x732a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x52d9);
        EXPECT(gbc.pc(), 0x732c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0014
        gbc.setState(0xe9f8, 0xe58a, 0xdb80, 0x1000, 0x6360, 0xdf26, 0x1, 0x0);
        gbc.writeMem(0xe9f8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe58a);
        EXPECT(gbc.pc(), 0xe9fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9f8), 0xcb);
        EXPECT(gbc.readMem(0xe9f9), 0xa8);
        // CB A8 0015
        gbc.setState(0x3916, 0x481d, 0xb3b0, 0x4bb8, 0xc10e, 0x9c8e, 0x0, 0x1);
        gbc.writeMem(0x3916, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x481d);
        EXPECT(gbc.pc(), 0x3918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0016
        gbc.setState(0x619, 0xb860, 0xef90, 0x5f73, 0x1184, 0xe70b, 0x0, 0x1);
        gbc.writeMem(0x619, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb860);
        EXPECT(gbc.pc(), 0x61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0017
        gbc.setState(0x9ae0, 0x642b, 0xe9f0, 0xf0c4, 0xed4, 0x7663, 0x1, 0x1);
        gbc.writeMem(0x9ae0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x642b);
        EXPECT(gbc.pc(), 0x9ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae0), 0xcb);
        EXPECT(gbc.readMem(0x9ae1), 0xa8);
        // CB A8 0018
        gbc.setState(0x61bb, 0x238c, 0x190, 0x5169, 0xd620, 0xd8c2, 0x1, 0x1);
        gbc.writeMem(0x61bb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x238c);
        EXPECT(gbc.pc(), 0x61bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0019
        gbc.setState(0x5c8e, 0xce79, 0x11c0, 0xf51c, 0xb5ad, 0x8821, 0x0, 0x0);
        gbc.writeMem(0x5c8e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xce79);
        EXPECT(gbc.pc(), 0x5c90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 001A
        gbc.setState(0x2cf, 0xa1c6, 0xb6c0, 0xdc04, 0xa8eb, 0x5c94, 0x0, 0x0);
        gbc.writeMem(0x2cf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0x2d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 001B
        gbc.setState(0x99c, 0x709a, 0xef0, 0xa7c, 0xf031, 0x601b, 0x0, 0x0);
        gbc.writeMem(0x99c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x709a);
        EXPECT(gbc.pc(), 0x99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 001C
        gbc.setState(0x4c35, 0xc9f4, 0x82a0, 0x360c, 0x35eb, 0x6d39, 0x1, 0x1);
        gbc.writeMem(0x4c35, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc9f4);
        EXPECT(gbc.pc(), 0x4c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 001D
        gbc.setState(0x29e4, 0x3919, 0xac60, 0x1cec, 0x6182, 0x2162, 0x0, 0x1);
        gbc.writeMem(0x29e4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3919);
        EXPECT(gbc.pc(), 0x29e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 001E
        gbc.setState(0xc6a9, 0x749c, 0xe850, 0x764a, 0x42c, 0xcea2, 0x0, 0x0);
        gbc.writeMem(0xc6a9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x749c);
        EXPECT(gbc.pc(), 0xc6ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a9), 0xcb);
        EXPECT(gbc.readMem(0xc6aa), 0xa8);
        // CB A8 001F
        gbc.setState(0x399e, 0x6a06, 0xa530, 0x3c1c, 0xc91c, 0xac2a, 0x0, 0x0);
        gbc.writeMem(0x399e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6a06);
        EXPECT(gbc.pc(), 0x39a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0020
        gbc.setState(0x6a8d, 0xa44a, 0xfb80, 0x473e, 0x6b7a, 0x64fb, 0x1, 0x1);
        gbc.writeMem(0x6a8d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa44a);
        EXPECT(gbc.pc(), 0x6a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0021
        gbc.setState(0x6e8b, 0x4710, 0x80a0, 0x35ed, 0x8472, 0x3d2d, 0x0, 0x1);
        gbc.writeMem(0x6e8b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4710);
        EXPECT(gbc.pc(), 0x6e8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0022
        gbc.setState(0xa1c5, 0xb660, 0xb3d0, 0xd7cb, 0x6b63, 0x2a90, 0x0, 0x0);
        gbc.writeMem(0xa1c5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xb660);
        EXPECT(gbc.pc(), 0xa1c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c5), 0xcb);
        EXPECT(gbc.readMem(0xa1c6), 0xa8);
        // CB A8 0023
        gbc.setState(0x665, 0x1397, 0xff90, 0x13d0, 0xb8a6, 0x180e, 0x1, 0x1);
        gbc.writeMem(0x665, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1397);
        EXPECT(gbc.pc(), 0x667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0024
        gbc.setState(0xcc06, 0x5c3e, 0x1b60, 0x29b9, 0xd6be, 0xb51f, 0x0, 0x0);
        gbc.writeMem(0xcc06, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5c3e);
        EXPECT(gbc.pc(), 0xcc08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc06), 0xcb);
        EXPECT(gbc.readMem(0xcc07), 0xa8);
        // CB A8 0026
        gbc.setState(0x3fae, 0xd060, 0xa9c0, 0x7638, 0x69e7, 0x8907, 0x1, 0x1);
        gbc.writeMem(0x3fae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd060);
        EXPECT(gbc.pc(), 0x3fb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0027
        gbc.setState(0x14f8, 0xeaf, 0x9de0, 0x5653, 0x6bbc, 0x9f65, 0x0, 0x0);
        gbc.writeMem(0x14f8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xeaf);
        EXPECT(gbc.pc(), 0x14fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0028
        gbc.setState(0x1e54, 0xb7bb, 0xfbc0, 0x205a, 0x8257, 0x6ad4, 0x0, 0x0);
        gbc.writeMem(0x1e54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb7bb);
        EXPECT(gbc.pc(), 0x1e56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0029
        gbc.setState(0x35c2, 0x1efe, 0x5750, 0xa0e8, 0xcba7, 0xb289, 0x0, 0x0);
        gbc.writeMem(0x35c2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1efe);
        EXPECT(gbc.pc(), 0x35c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 002A
        gbc.setState(0xd9ed, 0xadef, 0x38d0, 0x1d0b, 0x64b3, 0x26df, 0x0, 0x1);
        gbc.writeMem(0xd9ed, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xadef);
        EXPECT(gbc.pc(), 0xd9ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ed), 0xcb);
        EXPECT(gbc.readMem(0xd9ee), 0xa8);
        // CB A8 002B
        gbc.setState(0x1ebe, 0x573d, 0x5020, 0x37ef, 0x1753, 0xd5c8, 0x1, 0x0);
        gbc.writeMem(0x1ebe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x573d);
        EXPECT(gbc.pc(), 0x1ec0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 002C
        gbc.setState(0xd41b, 0x9601, 0x5740, 0x4fd2, 0xf863, 0xc52d, 0x1, 0x1);
        gbc.writeMem(0xd41b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9601);
        EXPECT(gbc.pc(), 0xd41d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41b), 0xcb);
        EXPECT(gbc.readMem(0xd41c), 0xa8);
        // CB A8 002D
        gbc.setState(0x4eff, 0xcc43, 0xbb10, 0x8342, 0xd97e, 0x5d49, 0x0, 0x0);
        gbc.writeMem(0x4eff, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcc43);
        EXPECT(gbc.pc(), 0x4f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 002E
        gbc.setState(0xd2e5, 0xc851, 0x4a80, 0xd6a1, 0x3c2d, 0x6e97, 0x1, 0x0);
        gbc.writeMem(0xd2e5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc851);
        EXPECT(gbc.pc(), 0xd2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2e5), 0xcb);
        EXPECT(gbc.readMem(0xd2e6), 0xa8);
        // CB A8 002F
        gbc.setState(0xcd54, 0xa033, 0xb080, 0x9fd0, 0x828e, 0xef1e, 0x0, 0x1);
        gbc.writeMem(0xcd54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa033);
        EXPECT(gbc.pc(), 0xcd56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd54), 0xcb);
        EXPECT(gbc.readMem(0xcd55), 0xa8);
        // CB A8 0030
        gbc.setState(0x44b8, 0x2b39, 0xb290, 0x3938, 0x5f9c, 0x39c1, 0x0, 0x0);
        gbc.writeMem(0x44b8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2b39);
        EXPECT(gbc.pc(), 0x44ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0031
        gbc.setState(0x8ea4, 0x29b6, 0xe6e0, 0x490d, 0xed99, 0x2e6a, 0x0, 0x0);
        gbc.writeMem(0x8ea4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x29b6);
        EXPECT(gbc.pc(), 0x8ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ea4), 0xcb);
        EXPECT(gbc.readMem(0x8ea5), 0xa8);
        // CB A8 0032
        gbc.setState(0x22c6, 0x391d, 0xe230, 0xf158, 0x9fb1, 0x9e1f, 0x0, 0x0);
        gbc.writeMem(0x22c6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x391d);
        EXPECT(gbc.pc(), 0x22c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0033
        gbc.setState(0x32a5, 0x5bb8, 0x8030, 0xbc13, 0x5211, 0x35b0, 0x0, 0x1);
        gbc.writeMem(0x32a5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5bb8);
        EXPECT(gbc.pc(), 0x32a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0034
        gbc.setState(0x93c6, 0x3e25, 0x74b0, 0xbb63, 0x615d, 0xab1f, 0x1, 0x1);
        gbc.writeMem(0x93c6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3e25);
        EXPECT(gbc.pc(), 0x93c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c6), 0xcb);
        EXPECT(gbc.readMem(0x93c7), 0xa8);
        // CB A8 0035
        gbc.setState(0x42c6, 0xb303, 0x2470, 0x89ce, 0xa5fb, 0x2c9f, 0x0, 0x0);
        gbc.writeMem(0x42c6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xb303);
        EXPECT(gbc.pc(), 0x42c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0036
        gbc.setState(0x3f4d, 0x6c9e, 0x6b10, 0x3ac1, 0x4abe, 0xf595, 0x1, 0x1);
        gbc.writeMem(0x3f4d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6c9e);
        EXPECT(gbc.pc(), 0x3f4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0037
        gbc.setState(0x7702, 0x7260, 0xc240, 0xd48f, 0xb418, 0x2a8e, 0x1, 0x1);
        gbc.writeMem(0x7702, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7260);
        EXPECT(gbc.pc(), 0x7704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0038
        gbc.setState(0x44cf, 0x3cd, 0xf100, 0xb60e, 0xcb66, 0xcb2c, 0x1, 0x0);
        gbc.writeMem(0x44cf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3cd);
        EXPECT(gbc.pc(), 0x44d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0039
        gbc.setState(0x808f, 0x2586, 0xfa0, 0x67e8, 0xbd6f, 0x4d71, 0x1, 0x1);
        gbc.writeMem(0x808f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2586);
        EXPECT(gbc.pc(), 0x8091);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808f), 0xcb);
        EXPECT(gbc.readMem(0x8090), 0xa8);
        // CB A8 003A
        gbc.setState(0x8458, 0xb1b9, 0xcbb0, 0x63a, 0x584a, 0x96b3, 0x0, 0x0);
        gbc.writeMem(0x8458, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb1b9);
        EXPECT(gbc.pc(), 0x845a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8458), 0xcb);
        EXPECT(gbc.readMem(0x8459), 0xa8);
        // CB A8 003B
        gbc.setState(0xcc94, 0xa7c0, 0xab0, 0x2374, 0xd843, 0x52ff, 0x1, 0x0);
        gbc.writeMem(0xcc94, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa7c0);
        EXPECT(gbc.pc(), 0xcc96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc94), 0xcb);
        EXPECT(gbc.readMem(0xcc95), 0xa8);
        // CB A8 003C
        gbc.setState(0x875a, 0x2739, 0x9ad0, 0x35c3, 0x6f9a, 0xb693, 0x0, 0x1);
        gbc.writeMem(0x875a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2739);
        EXPECT(gbc.pc(), 0x875c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875a), 0xcb);
        EXPECT(gbc.readMem(0x875b), 0xa8);
        // CB A8 003D
        gbc.setState(0x400b, 0x3a6a, 0xb570, 0xd49d, 0xc5c6, 0x235b, 0x1, 0x1);
        gbc.writeMem(0x400b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x3a6a);
        EXPECT(gbc.pc(), 0x400d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 003F
        gbc.setState(0x31bd, 0x4f16, 0x3d60, 0xadd0, 0x77b6, 0xa959, 0x0, 0x0);
        gbc.writeMem(0x31bd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x4f16);
        EXPECT(gbc.pc(), 0x31bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0041
        gbc.setState(0xa752, 0x2500, 0xa350, 0xb297, 0xd73e, 0x3af2, 0x1, 0x0);
        gbc.writeMem(0xa752, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2500);
        EXPECT(gbc.pc(), 0xa754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa752), 0xcb);
        EXPECT(gbc.readMem(0xa753), 0xa8);
        // CB A8 0042
        gbc.setState(0xc0d9, 0x3ad1, 0x910, 0x6aa2, 0x6e1e, 0x211d, 0x1, 0x1);
        gbc.writeMem(0xc0d9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3ad1);
        EXPECT(gbc.pc(), 0xc0db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d9), 0xcb);
        EXPECT(gbc.readMem(0xc0da), 0xa8);
        // CB A8 0044
        gbc.setState(0x7864, 0x5474, 0x29a0, 0xc823, 0x1538, 0xe76b, 0x1, 0x0);
        gbc.writeMem(0x7864, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5474);
        EXPECT(gbc.pc(), 0x7866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0045
        gbc.setState(0x9e8a, 0x4a63, 0x5530, 0xddfc, 0x6a67, 0xb7fe, 0x1, 0x0);
        gbc.writeMem(0x9e8a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4a63);
        EXPECT(gbc.pc(), 0x9e8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e8a), 0xcb);
        EXPECT(gbc.readMem(0x9e8b), 0xa8);
        // CB A8 0046
        gbc.setState(0x3e5, 0xd166, 0x5500, 0x81e2, 0x85e6, 0xc1fe, 0x1, 0x1);
        gbc.writeMem(0x3e5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xd166);
        EXPECT(gbc.pc(), 0x3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0047
        gbc.setState(0x1ba3, 0x9f4c, 0x2a50, 0x5eb8, 0xc3ea, 0x194, 0x1, 0x0);
        gbc.writeMem(0x1ba3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9f4c);
        EXPECT(gbc.pc(), 0x1ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0048
        gbc.setState(0xec7, 0xb674, 0x4cc0, 0x360a, 0x8974, 0xd784, 0x0, 0x1);
        gbc.writeMem(0xec7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb674);
        EXPECT(gbc.pc(), 0xec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0049
        gbc.setState(0x3815, 0x94c1, 0x1200, 0x18b2, 0xd065, 0x6aa8, 0x1, 0x1);
        gbc.writeMem(0x3815, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x94c1);
        EXPECT(gbc.pc(), 0x3817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 004A
        gbc.setState(0x81eb, 0xdc33, 0xe710, 0x79ff, 0x2c97, 0x4d79, 0x1, 0x1);
        gbc.writeMem(0x81eb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdc33);
        EXPECT(gbc.pc(), 0x81ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81eb), 0xcb);
        EXPECT(gbc.readMem(0x81ec), 0xa8);
        // CB A8 004B
        gbc.setState(0xccc0, 0xec82, 0x8cc0, 0xa86, 0x6008, 0xb957, 0x1, 0x0);
        gbc.writeMem(0xccc0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xec82);
        EXPECT(gbc.pc(), 0xccc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc0), 0xcb);
        EXPECT(gbc.readMem(0xccc1), 0xa8);
        // CB A8 004C
        gbc.setState(0xaf9, 0x970f, 0x50b0, 0x1e46, 0x6d20, 0x6db7, 0x1, 0x1);
        gbc.writeMem(0xaf9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x970f);
        EXPECT(gbc.pc(), 0xafb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 004D
        gbc.setState(0xa9ad, 0x35db, 0xa520, 0x4dea, 0xa716, 0x1d07, 0x1, 0x0);
        gbc.writeMem(0xa9ad, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x35db);
        EXPECT(gbc.pc(), 0xa9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ad), 0xcb);
        EXPECT(gbc.readMem(0xa9ae), 0xa8);
        // CB A8 004E
        gbc.setState(0x6023, 0xc2f6, 0x4230, 0x6daa, 0x369c, 0xae29, 0x1, 0x1);
        gbc.writeMem(0x6023, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc2f6);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 004F
        gbc.setState(0xdbd0, 0xe301, 0xb8a0, 0x1881, 0x65e7, 0xb0a0, 0x1, 0x1);
        gbc.writeMem(0xdbd0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe301);
        EXPECT(gbc.pc(), 0xdbd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd0), 0xcb);
        EXPECT(gbc.readMem(0xdbd1), 0xa8);
        // CB A8 0050
        gbc.setState(0x40cd, 0x3e, 0x7b60, 0xe562, 0x6c03, 0x7b0c, 0x1, 0x0);
        gbc.writeMem(0x40cd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3e);
        EXPECT(gbc.pc(), 0x40cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0051
        gbc.setState(0x49e7, 0x991c, 0xeac0, 0xe720, 0xf094, 0x3274, 0x0, 0x1);
        gbc.writeMem(0x49e7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x991c);
        EXPECT(gbc.pc(), 0x49e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0052
        gbc.setState(0x1bb7, 0xa667, 0xf7f0, 0xe2ab, 0xba56, 0xd775, 0x0, 0x1);
        gbc.writeMem(0x1bb7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa667);
        EXPECT(gbc.pc(), 0x1bb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0053
        gbc.setState(0x1c1f, 0xa5a4, 0x5390, 0xe397, 0x29f6, 0x2924, 0x1, 0x1);
        gbc.writeMem(0x1c1f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa5a4);
        EXPECT(gbc.pc(), 0x1c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0054
        gbc.setState(0x85a5, 0x781b, 0x58d0, 0x6a30, 0x2f5d, 0xc6d8, 0x0, 0x0);
        gbc.writeMem(0x85a5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x781b);
        EXPECT(gbc.pc(), 0x85a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a5), 0xcb);
        EXPECT(gbc.readMem(0x85a6), 0xa8);
        // CB A8 0055
        gbc.setState(0xddba, 0x3c0d, 0xee70, 0x2d61, 0x2e76, 0xad58, 0x0, 0x0);
        gbc.writeMem(0xddba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3c0d);
        EXPECT(gbc.pc(), 0xddbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddba), 0xcb);
        EXPECT(gbc.readMem(0xddbb), 0xa8);
        // CB A8 0056
        gbc.setState(0x3f96, 0x21fb, 0x9dd0, 0x83ed, 0x114d, 0x823b, 0x0, 0x1);
        gbc.writeMem(0x3f96, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x21fb);
        EXPECT(gbc.pc(), 0x3f98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0057
        gbc.setState(0x4e29, 0x685a, 0x8d50, 0xd2fd, 0xa51b, 0x5b26, 0x0, 0x0);
        gbc.writeMem(0x4e29, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x685a);
        EXPECT(gbc.pc(), 0x4e2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0058
        gbc.setState(0x7e64, 0xee75, 0xe9c0, 0x613f, 0x795, 0xa717, 0x1, 0x0);
        gbc.writeMem(0x7e64, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xee75);
        EXPECT(gbc.pc(), 0x7e66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0059
        gbc.setState(0x7b18, 0xcae9, 0x77a0, 0x26c3, 0x2453, 0x7d0b, 0x1, 0x1);
        gbc.writeMem(0x7b18, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcae9);
        EXPECT(gbc.pc(), 0x7b1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 005A
        gbc.setState(0xc7bc, 0x1102, 0xf640, 0xa248, 0x1e0d, 0xc6b4, 0x1, 0x1);
        gbc.writeMem(0xc7bc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1102);
        EXPECT(gbc.pc(), 0xc7be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7bc), 0xcb);
        EXPECT(gbc.readMem(0xc7bd), 0xa8);
        // CB A8 005B
        gbc.setState(0x3514, 0x2a7, 0xff80, 0x5f9b, 0x408e, 0x7c6d, 0x1, 0x0);
        gbc.writeMem(0x3514, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2a7);
        EXPECT(gbc.pc(), 0x3516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 005D
        gbc.setState(0xe03b, 0xc309, 0x6b00, 0xc52f, 0x29a4, 0xfb8d, 0x1, 0x1);
        gbc.writeMem(0xe03b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc309);
        EXPECT(gbc.pc(), 0xe03d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03b), 0xcb);
        EXPECT(gbc.readMem(0xe03c), 0xa8);
        // CB A8 005E
        gbc.setState(0x13c, 0x8338, 0xb850, 0x32bf, 0x8dec, 0xf545, 0x0, 0x1);
        gbc.writeMem(0x13c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8338);
        EXPECT(gbc.pc(), 0x13e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 005F
        gbc.setState(0x603e, 0xdaa9, 0x2020, 0x2690, 0xddc, 0xf9a6, 0x0, 0x1);
        gbc.writeMem(0x603e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xdaa9);
        EXPECT(gbc.pc(), 0x6040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0060
        gbc.setState(0x4a9, 0x356f, 0x50f0, 0xd5c1, 0x5ffb, 0x1e58, 0x0, 0x0);
        gbc.writeMem(0x4a9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x356f);
        EXPECT(gbc.pc(), 0x4ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0061
        gbc.setState(0x81c, 0x827f, 0x1d20, 0x19d8, 0x990, 0xf541, 0x1, 0x0);
        gbc.writeMem(0x81c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x827f);
        EXPECT(gbc.pc(), 0x81e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0062
        gbc.setState(0x5ac0, 0xbc88, 0x3550, 0x1e04, 0xcc65, 0x54ce, 0x1, 0x1);
        gbc.writeMem(0x5ac0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbc88);
        EXPECT(gbc.pc(), 0x5ac2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0063
        gbc.setState(0x9f8e, 0x104c, 0x87f0, 0x6deb, 0xb73c, 0x67cc, 0x1, 0x1);
        gbc.writeMem(0x9f8e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x104c);
        EXPECT(gbc.pc(), 0x9f90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f8e), 0xcb);
        EXPECT(gbc.readMem(0x9f8f), 0xa8);
        // CB A8 0064
        gbc.setState(0x6b40, 0xcc78, 0x66b0, 0xa05c, 0x21ce, 0xc021, 0x1, 0x0);
        gbc.writeMem(0x6b40, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcc78);
        EXPECT(gbc.pc(), 0x6b42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0065
        gbc.setState(0x7fce, 0xdab3, 0x2440, 0x8dfc, 0x34c1, 0xfaaa, 0x1, 0x1);
        gbc.writeMem(0x7fce, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdab3);
        EXPECT(gbc.pc(), 0x7fd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0066
        gbc.setState(0xe38e, 0x34e9, 0x7060, 0xf955, 0xf91a, 0xaf69, 0x1, 0x0);
        gbc.writeMem(0xe38e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x34e9);
        EXPECT(gbc.pc(), 0xe390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38e), 0xcb);
        EXPECT(gbc.readMem(0xe38f), 0xa8);
        // CB A8 0067
        gbc.setState(0x93fd, 0x3d93, 0x3fc0, 0x92fc, 0x974d, 0xb064, 0x1, 0x1);
        gbc.writeMem(0x93fd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3d93);
        EXPECT(gbc.pc(), 0x93ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93fd), 0xcb);
        EXPECT(gbc.readMem(0x93fe), 0xa8);
        // CB A8 0068
        gbc.setState(0x8bbc, 0xae9f, 0x5f50, 0x6c9f, 0xd12f, 0x8661, 0x1, 0x0);
        gbc.writeMem(0x8bbc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xae9f);
        EXPECT(gbc.pc(), 0x8bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bbc), 0xcb);
        EXPECT(gbc.readMem(0x8bbd), 0xa8);
        // CB A8 0069
        gbc.setState(0xad10, 0xaae3, 0x94c0, 0x9688, 0x437c, 0x927b, 0x0, 0x0);
        gbc.writeMem(0xad10, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xaae3);
        EXPECT(gbc.pc(), 0xad12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad10), 0xcb);
        EXPECT(gbc.readMem(0xad11), 0xa8);
        // CB A8 006A
        gbc.setState(0xc65a, 0x93e8, 0xc360, 0x73f4, 0xf8e2, 0x741d, 0x0, 0x0);
        gbc.writeMem(0xc65a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x93e8);
        EXPECT(gbc.pc(), 0xc65c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65a), 0xcb);
        EXPECT(gbc.readMem(0xc65b), 0xa8);
        // CB A8 006B
        gbc.setState(0x327f, 0x11c, 0x4550, 0x112d, 0x725e, 0x5a7, 0x0, 0x0);
        gbc.writeMem(0x327f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x11c);
        EXPECT(gbc.pc(), 0x3281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 006C
        gbc.setState(0xc87c, 0x6864, 0x3e10, 0x895a, 0x41c6, 0x10ca, 0x1, 0x1);
        gbc.writeMem(0xc87c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6864);
        EXPECT(gbc.pc(), 0xc87e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc87c), 0xcb);
        EXPECT(gbc.readMem(0xc87d), 0xa8);
        // CB A8 006D
        gbc.setState(0xc5a2, 0xd6ca, 0x9f80, 0xeb75, 0xb2fe, 0xcc66, 0x1, 0x0);
        gbc.writeMem(0xc5a2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd6ca);
        EXPECT(gbc.pc(), 0xc5a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5a2), 0xcb);
        EXPECT(gbc.readMem(0xc5a3), 0xa8);
        // CB A8 006E
        gbc.setState(0x2e2c, 0xaff5, 0x11b0, 0xc617, 0xa9b3, 0x69f, 0x1, 0x1);
        gbc.writeMem(0x2e2c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xaff5);
        EXPECT(gbc.pc(), 0x2e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 006F
        gbc.setState(0x6c01, 0x970c, 0x2460, 0x9565, 0x9938, 0xd57a, 0x1, 0x1);
        gbc.writeMem(0x6c01, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x970c);
        EXPECT(gbc.pc(), 0x6c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0070
        gbc.setState(0x77d2, 0xb338, 0x70f0, 0x4db1, 0xbb2d, 0xfb55, 0x1, 0x1);
        gbc.writeMem(0x77d2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb338);
        EXPECT(gbc.pc(), 0x77d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0071
        gbc.setState(0x1265, 0x2668, 0x4b70, 0x95b, 0x46e7, 0xa245, 0x0, 0x1);
        gbc.writeMem(0x1265, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2668);
        EXPECT(gbc.pc(), 0x1267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0072
        gbc.setState(0x84dc, 0x64de, 0x5cc0, 0x46b5, 0x395b, 0x47cc, 0x1, 0x0);
        gbc.writeMem(0x84dc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x64de);
        EXPECT(gbc.pc(), 0x84de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84dc), 0xcb);
        EXPECT(gbc.readMem(0x84dd), 0xa8);
        // CB A8 0073
        gbc.setState(0x16e5, 0x3201, 0xbd50, 0xbe7f, 0x923e, 0xedd4, 0x1, 0x1);
        gbc.writeMem(0x16e5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3201);
        EXPECT(gbc.pc(), 0x16e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0074
        gbc.setState(0xd4fa, 0x8a43, 0x94f0, 0xdef4, 0x2421, 0x7837, 0x0, 0x0);
        gbc.writeMem(0xd4fa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8a43);
        EXPECT(gbc.pc(), 0xd4fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4fa), 0xcb);
        EXPECT(gbc.readMem(0xd4fb), 0xa8);
        // CB A8 0075
        gbc.setState(0x35f7, 0x7b32, 0x46c0, 0x3df, 0xf7f, 0xe9b5, 0x0, 0x1);
        gbc.writeMem(0x35f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7b32);
        EXPECT(gbc.pc(), 0x35f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0076
        gbc.setState(0x76e5, 0x98ca, 0x7de0, 0xd4a2, 0xec73, 0x5e39, 0x0, 0x1);
        gbc.writeMem(0x76e5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x98ca);
        EXPECT(gbc.pc(), 0x76e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0077
        gbc.setState(0xb4bb, 0x1a9b, 0x9a30, 0x2b97, 0xa7ad, 0x79dc, 0x0, 0x1);
        gbc.writeMem(0xb4bb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1a9b);
        EXPECT(gbc.pc(), 0xb4bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4bb), 0xcb);
        EXPECT(gbc.readMem(0xb4bc), 0xa8);
        // CB A8 0078
        gbc.setState(0x76c2, 0xa9fd, 0x9740, 0x2d28, 0x6f8e, 0xcf45, 0x0, 0x0);
        gbc.writeMem(0x76c2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa9fd);
        EXPECT(gbc.pc(), 0x76c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0079
        gbc.setState(0xc1b2, 0xd87f, 0x85a0, 0x27c4, 0x2d72, 0x349f, 0x0, 0x1);
        gbc.writeMem(0xc1b2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd87f);
        EXPECT(gbc.pc(), 0xc1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b2), 0xcb);
        EXPECT(gbc.readMem(0xc1b3), 0xa8);
        // CB A8 007A
        gbc.setState(0xca0a, 0xdbfb, 0x4730, 0xaff8, 0x3488, 0x3fa5, 0x1, 0x0);
        gbc.writeMem(0xca0a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdbfb);
        EXPECT(gbc.pc(), 0xca0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca0a), 0xcb);
        EXPECT(gbc.readMem(0xca0b), 0xa8);
        // CB A8 007B
        gbc.setState(0x684e, 0x8492, 0x79d0, 0x6e84, 0x8e73, 0xb881, 0x1, 0x1);
        gbc.writeMem(0x684e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8492);
        EXPECT(gbc.pc(), 0x6850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 007C
        gbc.setState(0x46f4, 0xf2f6, 0x8640, 0x6727, 0x8e2a, 0x2088, 0x1, 0x0);
        gbc.writeMem(0x46f4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf2f6);
        EXPECT(gbc.pc(), 0x46f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 007D
        gbc.setState(0x52f9, 0x9b4, 0xabb0, 0x50e7, 0x5c6, 0x272a, 0x1, 0x1);
        gbc.writeMem(0x52f9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x9b4);
        EXPECT(gbc.pc(), 0x52fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 007E
        gbc.setState(0xf65, 0x4ed8, 0x180, 0xd822, 0x8874, 0xab4d, 0x1, 0x0);
        gbc.writeMem(0xf65, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x4ed8);
        EXPECT(gbc.pc(), 0xf67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 007F
        gbc.setState(0x1b66, 0x877a, 0x3290, 0x8848, 0x6821, 0xe3af, 0x1, 0x0);
        gbc.writeMem(0x1b66, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x877a);
        EXPECT(gbc.pc(), 0x1b68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0080
        gbc.setState(0x7227, 0xaad8, 0x1a60, 0x32bc, 0x455e, 0x2ead, 0x0, 0x0);
        gbc.writeMem(0x7227, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xaad8);
        EXPECT(gbc.pc(), 0x7229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0081
        gbc.setState(0xa4c3, 0xf85e, 0x7d30, 0xd80a, 0xcfcf, 0x4a6f, 0x0, 0x0);
        gbc.writeMem(0xa4c3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf85e);
        EXPECT(gbc.pc(), 0xa4c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4c3), 0xcb);
        EXPECT(gbc.readMem(0xa4c4), 0xa8);
        // CB A8 0082
        gbc.setState(0x8aa5, 0x830e, 0x21d0, 0x1b3d, 0xd1a1, 0x19a0, 0x1, 0x1);
        gbc.writeMem(0x8aa5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x830e);
        EXPECT(gbc.pc(), 0x8aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aa5), 0xcb);
        EXPECT(gbc.readMem(0x8aa6), 0xa8);
        // CB A8 0083
        gbc.setState(0xe679, 0x797e, 0xe3e0, 0x7db9, 0x3a55, 0xb542, 0x1, 0x0);
        gbc.writeMem(0xe679, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x797e);
        EXPECT(gbc.pc(), 0xe67b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe679), 0xcb);
        EXPECT(gbc.readMem(0xe67a), 0xa8);
        // CB A8 0084
        gbc.setState(0xa220, 0x6cba, 0xce30, 0x4f69, 0x7ff0, 0x455b, 0x1, 0x0);
        gbc.writeMem(0xa220, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6cba);
        EXPECT(gbc.pc(), 0xa222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa220), 0xcb);
        EXPECT(gbc.readMem(0xa221), 0xa8);
        // CB A8 0085
        gbc.setState(0xadf0, 0x8ed1, 0x1900, 0x1b8c, 0x8667, 0x3ba5, 0x1, 0x1);
        gbc.writeMem(0xadf0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8ed1);
        EXPECT(gbc.pc(), 0xadf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf0), 0xcb);
        EXPECT(gbc.readMem(0xadf1), 0xa8);
        // CB A8 0086
        gbc.setState(0x876c, 0x1b58, 0xcf90, 0x26, 0xac31, 0x2947, 0x1, 0x0);
        gbc.writeMem(0x876c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1b58);
        EXPECT(gbc.pc(), 0x876e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x876c), 0xcb);
        EXPECT(gbc.readMem(0x876d), 0xa8);
        // CB A8 0087
        gbc.setState(0xdd8b, 0xc699, 0x7ad0, 0x1275, 0x13f5, 0x1973, 0x1, 0x0);
        gbc.writeMem(0xdd8b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc699);
        EXPECT(gbc.pc(), 0xdd8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd8b), 0xcb);
        EXPECT(gbc.readMem(0xdd8c), 0xa8);
        // CB A8 0089
        gbc.setState(0x56e5, 0xfc4, 0x12e0, 0x579b, 0xee78, 0xff43, 0x0, 0x0);
        gbc.writeMem(0x56e5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xfc4);
        EXPECT(gbc.pc(), 0x56e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 008A
        gbc.setState(0x82fd, 0x58dd, 0xbd30, 0x5b48, 0xf3a6, 0x80bc, 0x1, 0x0);
        gbc.writeMem(0x82fd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x58dd);
        EXPECT(gbc.pc(), 0x82ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fd), 0xcb);
        EXPECT(gbc.readMem(0x82fe), 0xa8);
        // CB A8 008B
        gbc.setState(0xba54, 0xcd30, 0xbdc0, 0x5319, 0x5846, 0x6b79, 0x0, 0x0);
        gbc.writeMem(0xba54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcd30);
        EXPECT(gbc.pc(), 0xba56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba54), 0xcb);
        EXPECT(gbc.readMem(0xba55), 0xa8);
        // CB A8 008C
        gbc.setState(0xc74e, 0xa49d, 0x8350, 0x1020, 0xb4e8, 0xf621, 0x0, 0x1);
        gbc.writeMem(0xc74e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa49d);
        EXPECT(gbc.pc(), 0xc750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc74e), 0xcb);
        EXPECT(gbc.readMem(0xc74f), 0xa8);
        // CB A8 008D
        gbc.setState(0xe34a, 0xfd1, 0x9af0, 0x6834, 0x29b5, 0x8e64, 0x1, 0x1);
        gbc.writeMem(0xe34a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfd1);
        EXPECT(gbc.pc(), 0xe34c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe34a), 0xcb);
        EXPECT(gbc.readMem(0xe34b), 0xa8);
        // CB A8 008E
        gbc.setState(0xdf28, 0xcc02, 0x8e0, 0x5284, 0xf4c9, 0xf90f, 0x0, 0x0);
        gbc.writeMem(0xdf28, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xcc02);
        EXPECT(gbc.pc(), 0xdf2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf28), 0xcb);
        EXPECT(gbc.readMem(0xdf29), 0xa8);
        // CB A8 008F
        gbc.setState(0x3e3f, 0x8350, 0xc0b0, 0xbcb9, 0x5b0f, 0x606b, 0x0, 0x1);
        gbc.writeMem(0x3e3f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8350);
        EXPECT(gbc.pc(), 0x3e41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0090
        gbc.setState(0xbdec, 0x190a, 0x6e50, 0xcac8, 0x35e8, 0xebe5, 0x1, 0x1);
        gbc.writeMem(0xbdec, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x190a);
        EXPECT(gbc.pc(), 0xbdee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdec), 0xcb);
        EXPECT(gbc.readMem(0xbded), 0xa8);
        // CB A8 0091
        gbc.setState(0xee24, 0x9595, 0x24b0, 0xb67, 0xc378, 0x2784, 0x0, 0x0);
        gbc.writeMem(0xee24, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9595);
        EXPECT(gbc.pc(), 0xee26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee24), 0xcb);
        EXPECT(gbc.readMem(0xee25), 0xa8);
        // CB A8 0092
        gbc.setState(0x44de, 0xb4e8, 0x4fd0, 0xa908, 0xd681, 0x9a5a, 0x1, 0x0);
        gbc.writeMem(0x44de, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb4e8);
        EXPECT(gbc.pc(), 0x44e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0093
        gbc.setState(0x951c, 0xbfe7, 0xd670, 0xa3, 0xbb9c, 0x9c7c, 0x1, 0x0);
        gbc.writeMem(0x951c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbfe7);
        EXPECT(gbc.pc(), 0x951e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x951c), 0xcb);
        EXPECT(gbc.readMem(0x951d), 0xa8);
        // CB A8 0094
        gbc.setState(0x4a50, 0x7739, 0x95f0, 0x5cd8, 0xacde, 0x1599, 0x0, 0x1);
        gbc.writeMem(0x4a50, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7739);
        EXPECT(gbc.pc(), 0x4a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0095
        gbc.setState(0x8e3, 0x6c4d, 0x36c0, 0xad74, 0x6659, 0xf15e, 0x1, 0x1);
        gbc.writeMem(0x8e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6c4d);
        EXPECT(gbc.pc(), 0x8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0096
        gbc.setState(0xd44f, 0x311b, 0x3c30, 0xad8a, 0x8d9e, 0x39fa, 0x0, 0x1);
        gbc.writeMem(0xd44f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x311b);
        EXPECT(gbc.pc(), 0xd451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd44f), 0xcb);
        EXPECT(gbc.readMem(0xd450), 0xa8);
        // CB A8 0098
        gbc.setState(0xb947, 0xe1a7, 0xfa80, 0xc2a6, 0x5b39, 0xcf38, 0x0, 0x0);
        gbc.writeMem(0xb947, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe1a7);
        EXPECT(gbc.pc(), 0xb949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb947), 0xcb);
        EXPECT(gbc.readMem(0xb948), 0xa8);
        // CB A8 0099
        gbc.setState(0xb3f4, 0xa2fb, 0xb530, 0xa66, 0x5cae, 0xca2e, 0x1, 0x1);
        gbc.writeMem(0xb3f4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa2fb);
        EXPECT(gbc.pc(), 0xb3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f4), 0xcb);
        EXPECT(gbc.readMem(0xb3f5), 0xa8);
        // CB A8 009A
        gbc.setState(0xb20d, 0x9676, 0x53b0, 0xbb84, 0x68a3, 0xa74c, 0x0, 0x1);
        gbc.writeMem(0xb20d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9676);
        EXPECT(gbc.pc(), 0xb20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb20d), 0xcb);
        EXPECT(gbc.readMem(0xb20e), 0xa8);
        // CB A8 009B
        gbc.setState(0x183d, 0x208a, 0xe140, 0xc422, 0xf5c6, 0x5154, 0x0, 0x1);
        gbc.writeMem(0x183d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x208a);
        EXPECT(gbc.pc(), 0x183f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 009C
        gbc.setState(0x445d, 0xeace, 0x880, 0xdb7e, 0x4f27, 0xc0d6, 0x0, 0x1);
        gbc.writeMem(0x445d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xeace);
        EXPECT(gbc.pc(), 0x445f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 009D
        gbc.setState(0xbc61, 0xc934, 0x36a0, 0x5d24, 0xe5f7, 0xd5d5, 0x1, 0x1);
        gbc.writeMem(0xbc61, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc934);
        EXPECT(gbc.pc(), 0xbc63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc61), 0xcb);
        EXPECT(gbc.readMem(0xbc62), 0xa8);
        // CB A8 009E
        gbc.setState(0xc9d1, 0x34e0, 0x1650, 0x830e, 0x3030, 0x53ea, 0x0, 0x0);
        gbc.writeMem(0xc9d1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x34e0);
        EXPECT(gbc.pc(), 0xc9d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9d1), 0xcb);
        EXPECT(gbc.readMem(0xc9d2), 0xa8);
        // CB A8 009F
        gbc.setState(0xd4a7, 0xd018, 0xd0d0, 0x78f3, 0x7d9f, 0x3a94, 0x0, 0x0);
        gbc.writeMem(0xd4a7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd018);
        EXPECT(gbc.pc(), 0xd4a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4a7), 0xcb);
        EXPECT(gbc.readMem(0xd4a8), 0xa8);
        // CB A8 00A0
        gbc.setState(0xcf7, 0x6399, 0x9780, 0x9e04, 0xece7, 0xb298, 0x1, 0x0);
        gbc.writeMem(0xcf7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6399);
        EXPECT(gbc.pc(), 0xcf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00A1
        gbc.setState(0x50b3, 0xb252, 0xf7f0, 0x53a7, 0x8931, 0x213f, 0x1, 0x1);
        gbc.writeMem(0x50b3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb252);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00A2
        gbc.setState(0x3b3d, 0xef1a, 0xcc20, 0xd818, 0x14a8, 0xe996, 0x0, 0x1);
        gbc.writeMem(0x3b3d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xef1a);
        EXPECT(gbc.pc(), 0x3b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00A3
        gbc.setState(0x8bba, 0xc4fe, 0xbe30, 0x93e3, 0x9ff7, 0xdbea, 0x1, 0x0);
        gbc.writeMem(0x8bba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc4fe);
        EXPECT(gbc.pc(), 0x8bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bba), 0xcb);
        EXPECT(gbc.readMem(0x8bbb), 0xa8);
        // CB A8 00A4
        gbc.setState(0x7ccb, 0xbaa5, 0x13a0, 0xa393, 0xd69b, 0x256c, 0x0, 0x0);
        gbc.writeMem(0x7ccb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xbaa5);
        EXPECT(gbc.pc(), 0x7ccd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00A5
        gbc.setState(0x6a74, 0xf8b0, 0xdb60, 0xa0e2, 0xf014, 0xd12e, 0x1, 0x0);
        gbc.writeMem(0x6a74, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf8b0);
        EXPECT(gbc.pc(), 0x6a76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00A6
        gbc.setState(0xe1e7, 0x9b3, 0x8b10, 0x163, 0x5aea, 0x3051, 0x1, 0x0);
        gbc.writeMem(0xe1e7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9b3);
        EXPECT(gbc.pc(), 0xe1e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e7), 0xcb);
        EXPECT(gbc.readMem(0xe1e8), 0xa8);
        // CB A8 00A7
        gbc.setState(0xd378, 0x97bf, 0xbd20, 0xfca, 0xaa15, 0xb3, 0x0, 0x0);
        gbc.writeMem(0xd378, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x97bf);
        EXPECT(gbc.pc(), 0xd37a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd378), 0xcb);
        EXPECT(gbc.readMem(0xd379), 0xa8);
        // CB A8 00A8
        gbc.setState(0xc05c, 0x83f2, 0x4e0, 0x1a9, 0x4a83, 0xf622, 0x0, 0x0);
        gbc.writeMem(0xc05c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x83f2);
        EXPECT(gbc.pc(), 0xc05e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05c), 0xcb);
        EXPECT(gbc.readMem(0xc05d), 0xa8);
        // CB A8 00A9
        gbc.setState(0xb9b3, 0xc756, 0xbd50, 0xca67, 0x2f80, 0x8d14, 0x0, 0x0);
        gbc.writeMem(0xb9b3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc756);
        EXPECT(gbc.pc(), 0xb9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b3), 0xcb);
        EXPECT(gbc.readMem(0xb9b4), 0xa8);
        // CB A8 00AB
        gbc.setState(0x4f10, 0xf74f, 0xcfe0, 0x9e8d, 0x2da2, 0x87eb, 0x1, 0x1);
        gbc.writeMem(0x4f10, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf74f);
        EXPECT(gbc.pc(), 0x4f12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00AC
        gbc.setState(0xe341, 0xbcad, 0x2470, 0x51c, 0xbe12, 0x5707, 0x1, 0x0);
        gbc.writeMem(0xe341, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbcad);
        EXPECT(gbc.pc(), 0xe343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe341), 0xcb);
        EXPECT(gbc.readMem(0xe342), 0xa8);
        // CB A8 00AD
        gbc.setState(0xdbee, 0xf302, 0x1100, 0x348, 0xd49d, 0x348b, 0x1, 0x1);
        gbc.writeMem(0xdbee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf302);
        EXPECT(gbc.pc(), 0xdbf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbee), 0xcb);
        EXPECT(gbc.readMem(0xdbef), 0xa8);
        // CB A8 00AE
        gbc.setState(0x8b2e, 0xfa5d, 0x9810, 0xd3ec, 0xeb45, 0x4100, 0x1, 0x1);
        gbc.writeMem(0x8b2e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfa5d);
        EXPECT(gbc.pc(), 0x8b30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b2e), 0xcb);
        EXPECT(gbc.readMem(0x8b2f), 0xa8);
        // CB A8 00AF
        gbc.setState(0xee1b, 0x9be1, 0x8460, 0xd20e, 0x8b09, 0x2108, 0x1, 0x1);
        gbc.writeMem(0xee1b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9be1);
        EXPECT(gbc.pc(), 0xee1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee1b), 0xcb);
        EXPECT(gbc.readMem(0xee1c), 0xa8);
        // CB A8 00B0
        gbc.setState(0x8be0, 0x382d, 0x8dc0, 0xb2c3, 0x95b7, 0x59ba, 0x0, 0x0);
        gbc.writeMem(0x8be0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x382d);
        EXPECT(gbc.pc(), 0x8be2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8be0), 0xcb);
        EXPECT(gbc.readMem(0x8be1), 0xa8);
        // CB A8 00B1
        gbc.setState(0xea2e, 0x2879, 0x9d40, 0xa98a, 0xf5bc, 0xc41d, 0x0, 0x1);
        gbc.writeMem(0xea2e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2879);
        EXPECT(gbc.pc(), 0xea30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea2e), 0xcb);
        EXPECT(gbc.readMem(0xea2f), 0xa8);
        // CB A8 00B2
        gbc.setState(0x6f4e, 0x385, 0x7640, 0x1ca6, 0xf981, 0x4f93, 0x0, 0x1);
        gbc.writeMem(0x6f4e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x385);
        EXPECT(gbc.pc(), 0x6f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00B3
        gbc.setState(0xdf3, 0xad1, 0xb7b0, 0xa8de, 0x5b55, 0xf21e, 0x1, 0x1);
        gbc.writeMem(0xdf3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xad1);
        EXPECT(gbc.pc(), 0xdf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00B4
        gbc.setState(0xb2af, 0x2fbf, 0xe360, 0x2047, 0xf95f, 0xdc10, 0x0, 0x0);
        gbc.writeMem(0xb2af, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x2fbf);
        EXPECT(gbc.pc(), 0xb2b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2af), 0xcb);
        EXPECT(gbc.readMem(0xb2b0), 0xa8);
        // CB A8 00B5
        gbc.setState(0x7601, 0x1911, 0x3600, 0x970b, 0x93f4, 0x1cd1, 0x0, 0x1);
        gbc.writeMem(0x7601, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1911);
        EXPECT(gbc.pc(), 0x7603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00B6
        gbc.setState(0x4afc, 0x6d53, 0x86d0, 0xd5e2, 0xe050, 0xa0ca, 0x1, 0x1);
        gbc.writeMem(0x4afc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6d53);
        EXPECT(gbc.pc(), 0x4afe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00B7
        gbc.setState(0x2da, 0xfa1, 0xca00, 0x8a17, 0xc892, 0xe0fe, 0x1, 0x1);
        gbc.writeMem(0x2da, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xfa1);
        EXPECT(gbc.pc(), 0x2dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00B8
        gbc.setState(0xebf6, 0x8652, 0xb6f0, 0x2216, 0x61c, 0xb030, 0x0, 0x0);
        gbc.writeMem(0xebf6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8652);
        EXPECT(gbc.pc(), 0xebf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebf6), 0xcb);
        EXPECT(gbc.readMem(0xebf7), 0xa8);
        // CB A8 00B9
        gbc.setState(0xb420, 0x6312, 0x8d0, 0x85e2, 0xd4aa, 0x42b, 0x0, 0x0);
        gbc.writeMem(0xb420, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6312);
        EXPECT(gbc.pc(), 0xb422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb420), 0xcb);
        EXPECT(gbc.readMem(0xb421), 0xa8);
        // CB A8 00BA
        gbc.setState(0x485e, 0x125d, 0x2c0, 0x35bb, 0x7484, 0xe016, 0x0, 0x0);
        gbc.writeMem(0x485e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x125d);
        EXPECT(gbc.pc(), 0x4860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00BB
        gbc.setState(0x55eb, 0x126, 0x3780, 0x20a6, 0x3b64, 0xcac9, 0x0, 0x1);
        gbc.writeMem(0x55eb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x126);
        EXPECT(gbc.pc(), 0x55ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00BC
        gbc.setState(0xc602, 0xcfe3, 0xded0, 0x2066, 0xcd1d, 0x56fd, 0x0, 0x0);
        gbc.writeMem(0xc602, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xcfe3);
        EXPECT(gbc.pc(), 0xc604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc602), 0xcb);
        EXPECT(gbc.readMem(0xc603), 0xa8);
        // CB A8 00BD
        gbc.setState(0xec0, 0xf222, 0x3100, 0xbf03, 0xe8, 0x2154, 0x1, 0x1);
        gbc.writeMem(0xec0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf222);
        EXPECT(gbc.pc(), 0xec2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00BE
        gbc.setState(0x6e98, 0x6102, 0xc7c0, 0xa70e, 0x9d56, 0xe25f, 0x0, 0x0);
        gbc.writeMem(0x6e98, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6102);
        EXPECT(gbc.pc(), 0x6e9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00BF
        gbc.setState(0x613, 0x1d36, 0x31b0, 0x6112, 0x6c61, 0x853f, 0x1, 0x0);
        gbc.writeMem(0x613, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x1d36);
        EXPECT(gbc.pc(), 0x615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00C0
        gbc.setState(0x5d0, 0x9753, 0xc0a0, 0x3d9b, 0x4974, 0xde05, 0x0, 0x1);
        gbc.writeMem(0x5d0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9753);
        EXPECT(gbc.pc(), 0x5d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00C2
        gbc.setState(0x9804, 0xdd78, 0x3430, 0x1cd4, 0x2d7a, 0x2bfa, 0x1, 0x0);
        gbc.writeMem(0x9804, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdd78);
        EXPECT(gbc.pc(), 0x9806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9804), 0xcb);
        EXPECT(gbc.readMem(0x9805), 0xa8);
        // CB A8 00C3
        gbc.setState(0xc96, 0xf33d, 0xdd30, 0x84a2, 0x294c, 0xd350, 0x1, 0x1);
        gbc.writeMem(0xc96, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf33d);
        EXPECT(gbc.pc(), 0xc98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00C4
        gbc.setState(0xe5e, 0xedd9, 0xdc0, 0x604c, 0x48cc, 0x2a85, 0x1, 0x0);
        gbc.writeMem(0xe5e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xedd9);
        EXPECT(gbc.pc(), 0xe60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00C5
        gbc.setState(0x2a50, 0x18be, 0x14b0, 0x6707, 0x5284, 0x34d1, 0x0, 0x0);
        gbc.writeMem(0x2a50, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x18be);
        EXPECT(gbc.pc(), 0x2a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00C6
        gbc.setState(0xe6b4, 0x6769, 0xdb70, 0xf642, 0xfda5, 0xcfe, 0x0, 0x1);
        gbc.writeMem(0xe6b4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x6769);
        EXPECT(gbc.pc(), 0xe6b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6b4), 0xcb);
        EXPECT(gbc.readMem(0xe6b5), 0xa8);
        // CB A8 00C7
        gbc.setState(0xdd95, 0x2cb7, 0xab50, 0xc3cb, 0x9395, 0xb93, 0x0, 0x1);
        gbc.writeMem(0xdd95, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x2cb7);
        EXPECT(gbc.pc(), 0xdd97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd95), 0xcb);
        EXPECT(gbc.readMem(0xdd96), 0xa8);
        // CB A8 00C8
        gbc.setState(0x65f, 0x45b4, 0x2300, 0x990c, 0xe561, 0xf9f5, 0x1, 0x1);
        gbc.writeMem(0x65f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x45b4);
        EXPECT(gbc.pc(), 0x661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00C9
        gbc.setState(0xd782, 0x2e13, 0x330, 0xdf08, 0xf1d5, 0xf3a6, 0x0, 0x0);
        gbc.writeMem(0xd782, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2e13);
        EXPECT(gbc.pc(), 0xd784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd782), 0xcb);
        EXPECT(gbc.readMem(0xd783), 0xa8);
        // CB A8 00CA
        gbc.setState(0xbe2e, 0x3cfd, 0xeb80, 0xfc0a, 0xe886, 0xcdd, 0x1, 0x0);
        gbc.writeMem(0xbe2e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3cfd);
        EXPECT(gbc.pc(), 0xbe30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe2e), 0xcb);
        EXPECT(gbc.readMem(0xbe2f), 0xa8);
        // CB A8 00CB
        gbc.setState(0x3882, 0x215a, 0x4d10, 0xbc23, 0xd935, 0x3512, 0x0, 0x1);
        gbc.writeMem(0x3882, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x215a);
        EXPECT(gbc.pc(), 0x3884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00CC
        gbc.setState(0x94b4, 0x6263, 0x4a60, 0x5fb, 0x480a, 0x340c, 0x0, 0x0);
        gbc.writeMem(0x94b4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6263);
        EXPECT(gbc.pc(), 0x94b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b4), 0xcb);
        EXPECT(gbc.readMem(0x94b5), 0xa8);
        // CB A8 00CD
        gbc.setState(0x79a0, 0x6c7d, 0x7d50, 0x7d74, 0x31cd, 0x7f5f, 0x0, 0x0);
        gbc.writeMem(0x79a0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x6c7d);
        EXPECT(gbc.pc(), 0x79a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00CE
        gbc.setState(0x24d, 0x28b4, 0xb800, 0xd5a9, 0xa5d7, 0xdc85, 0x0, 0x0);
        gbc.writeMem(0x24d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x28b4);
        EXPECT(gbc.pc(), 0x24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00CF
        gbc.setState(0x3811, 0xb5e6, 0x7670, 0xfa85, 0x7c29, 0xac03, 0x0, 0x1);
        gbc.writeMem(0x3811, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb5e6);
        EXPECT(gbc.pc(), 0x3813);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00D0
        gbc.setState(0xd311, 0x4c4b, 0x3690, 0x8178, 0x2306, 0xb272, 0x1, 0x0);
        gbc.writeMem(0xd311, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4c4b);
        EXPECT(gbc.pc(), 0xd313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd311), 0xcb);
        EXPECT(gbc.readMem(0xd312), 0xa8);
        // CB A8 00D1
        gbc.setState(0x857a, 0xeb03, 0xa4e0, 0x8159, 0x582, 0xfd6c, 0x1, 0x0);
        gbc.writeMem(0x857a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xeb03);
        EXPECT(gbc.pc(), 0x857c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x857a), 0xcb);
        EXPECT(gbc.readMem(0x857b), 0xa8);
        // CB A8 00D2
        gbc.setState(0x48e3, 0x7714, 0xc570, 0x3ec1, 0x1088, 0xf8f6, 0x1, 0x1);
        gbc.writeMem(0x48e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7714);
        EXPECT(gbc.pc(), 0x48e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00D3
        gbc.setState(0xe552, 0xde02, 0x8650, 0x1f4c, 0xe6e3, 0x11f3, 0x1, 0x1);
        gbc.writeMem(0xe552, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xde02);
        EXPECT(gbc.pc(), 0xe554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe552), 0xcb);
        EXPECT(gbc.readMem(0xe553), 0xa8);
        // CB A8 00D4
        gbc.setState(0x700c, 0x75c5, 0x7890, 0x1b31, 0xaa81, 0xac57, 0x1, 0x1);
        gbc.writeMem(0x700c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x75c5);
        EXPECT(gbc.pc(), 0x700e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00D5
        gbc.setState(0x6b61, 0xdd9f, 0xb620, 0xde02, 0x937f, 0x4c85, 0x1, 0x0);
        gbc.writeMem(0x6b61, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdd9f);
        EXPECT(gbc.pc(), 0x6b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00D6
        gbc.setState(0x38c1, 0xedb9, 0xb910, 0x15d, 0xf1ed, 0x8643, 0x1, 0x0);
        gbc.writeMem(0x38c1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xedb9);
        EXPECT(gbc.pc(), 0x38c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00D7
        gbc.setState(0x94c1, 0x95e6, 0xffa0, 0xbabe, 0xe351, 0x52e, 0x0, 0x0);
        gbc.writeMem(0x94c1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x95e6);
        EXPECT(gbc.pc(), 0x94c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c1), 0xcb);
        EXPECT(gbc.readMem(0x94c2), 0xa8);
        // CB A8 00D8
        gbc.setState(0x4ce2, 0x66e1, 0x40c0, 0x23c4, 0xf29f, 0x7765, 0x1, 0x0);
        gbc.writeMem(0x4ce2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x66e1);
        EXPECT(gbc.pc(), 0x4ce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00D9
        gbc.setState(0x86f1, 0x7c28, 0x6ca0, 0x9167, 0xfdd3, 0x2998, 0x0, 0x1);
        gbc.writeMem(0x86f1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7c28);
        EXPECT(gbc.pc(), 0x86f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f1), 0xcb);
        EXPECT(gbc.readMem(0x86f2), 0xa8);
        // CB A8 00DA
        gbc.setState(0x32c0, 0x1856, 0x4940, 0x11ca, 0x846, 0x8b43, 0x0, 0x1);
        gbc.writeMem(0x32c0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1856);
        EXPECT(gbc.pc(), 0x32c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00DB
        gbc.setState(0xc3ab, 0x7c93, 0x1c40, 0xcc5b, 0xd41d, 0xc499, 0x1, 0x0);
        gbc.writeMem(0xc3ab, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x7c93);
        EXPECT(gbc.pc(), 0xc3ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ab), 0xcb);
        EXPECT(gbc.readMem(0xc3ac), 0xa8);
        // CB A8 00DC
        gbc.setState(0xbe01, 0x2c68, 0x1820, 0x582e, 0x1129, 0xb97, 0x1, 0x1);
        gbc.writeMem(0xbe01, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2c68);
        EXPECT(gbc.pc(), 0xbe03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe01), 0xcb);
        EXPECT(gbc.readMem(0xbe02), 0xa8);
        // CB A8 00DE
        gbc.setState(0xd89d, 0x4209, 0xaa50, 0x51f3, 0x8de5, 0x5f24, 0x1, 0x0);
        gbc.writeMem(0xd89d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4209);
        EXPECT(gbc.pc(), 0xd89f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89d), 0xcb);
        EXPECT(gbc.readMem(0xd89e), 0xa8);
        // CB A8 00DF
        gbc.setState(0x5812, 0xbdb5, 0x8280, 0xd737, 0xf1e5, 0x8d8, 0x0, 0x1);
        gbc.writeMem(0x5812, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbdb5);
        EXPECT(gbc.pc(), 0x5814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00E0
        gbc.setState(0x4780, 0x22f0, 0x4720, 0x8cc3, 0xc4c8, 0xde39, 0x1, 0x0);
        gbc.writeMem(0x4780, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x22f0);
        EXPECT(gbc.pc(), 0x4782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00E1
        gbc.setState(0x3efc, 0x8e29, 0xc630, 0x3b73, 0x7cd3, 0xeaf4, 0x1, 0x1);
        gbc.writeMem(0x3efc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x8e29);
        EXPECT(gbc.pc(), 0x3efe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00E2
        gbc.setState(0xe324, 0x7490, 0xa4e0, 0xe5a8, 0x3bbe, 0x9f67, 0x1, 0x0);
        gbc.writeMem(0xe324, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7490);
        EXPECT(gbc.pc(), 0xe326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe324), 0xcb);
        EXPECT(gbc.readMem(0xe325), 0xa8);
        // CB A8 00E3
        gbc.setState(0x8822, 0xf01f, 0xa50, 0xfd9c, 0x1c8e, 0xa0d8, 0x1, 0x0);
        gbc.writeMem(0x8822, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf01f);
        EXPECT(gbc.pc(), 0x8824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8822), 0xcb);
        EXPECT(gbc.readMem(0x8823), 0xa8);
        // CB A8 00E4
        gbc.setState(0xe094, 0x245d, 0xe1b0, 0x3036, 0x53ce, 0x16a8, 0x1, 0x1);
        gbc.writeMem(0xe094, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x245d);
        EXPECT(gbc.pc(), 0xe096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe094), 0xcb);
        EXPECT(gbc.readMem(0xe095), 0xa8);
        // CB A8 00E5
        gbc.setState(0x458, 0xaaab, 0xbe20, 0xfab5, 0x92d2, 0xebf3, 0x1, 0x1);
        gbc.writeMem(0x458, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xaaab);
        EXPECT(gbc.pc(), 0x45a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00E6
        gbc.setState(0x8bf1, 0xdb0, 0x18d0, 0x687f, 0x328, 0x47af, 0x0, 0x0);
        gbc.writeMem(0x8bf1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdb0);
        EXPECT(gbc.pc(), 0x8bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bf1), 0xcb);
        EXPECT(gbc.readMem(0x8bf2), 0xa8);
        // CB A8 00E8
        gbc.setState(0x9ba9, 0xa630, 0x5e50, 0xf01a, 0x6536, 0x5d4e, 0x1, 0x0);
        gbc.writeMem(0x9ba9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa630);
        EXPECT(gbc.pc(), 0x9bab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba9), 0xcb);
        EXPECT(gbc.readMem(0x9baa), 0xa8);
        // CB A8 00E9
        gbc.setState(0x2fdf, 0x73fb, 0x35d0, 0xfb72, 0xddf8, 0x4591, 0x1, 0x1);
        gbc.writeMem(0x2fdf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x73fb);
        EXPECT(gbc.pc(), 0x2fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00EA
        gbc.setState(0x81f0, 0x47d1, 0x21b0, 0x5b0b, 0xaf42, 0x8dd6, 0x0, 0x1);
        gbc.writeMem(0x81f0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x47d1);
        EXPECT(gbc.pc(), 0x81f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81f0), 0xcb);
        EXPECT(gbc.readMem(0x81f1), 0xa8);
        // CB A8 00EB
        gbc.setState(0xaeaf, 0x941e, 0x1d70, 0x90a7, 0xecf3, 0xdbfc, 0x0, 0x1);
        gbc.writeMem(0xaeaf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x941e);
        EXPECT(gbc.pc(), 0xaeb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeaf), 0xcb);
        EXPECT(gbc.readMem(0xaeb0), 0xa8);
        // CB A8 00ED
        gbc.setState(0xa6c0, 0x4027, 0xd410, 0x8027, 0xaa8d, 0x4cc4, 0x0, 0x0);
        gbc.writeMem(0xa6c0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4027);
        EXPECT(gbc.pc(), 0xa6c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c0), 0xcb);
        EXPECT(gbc.readMem(0xa6c1), 0xa8);
        // CB A8 00EE
        gbc.setState(0xcd01, 0x91c5, 0xf9a0, 0xbd82, 0xcbd, 0xc8b6, 0x0, 0x1);
        gbc.writeMem(0xcd01, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x91c5);
        EXPECT(gbc.pc(), 0xcd03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd01), 0xcb);
        EXPECT(gbc.readMem(0xcd02), 0xa8);
        // CB A8 00EF
        gbc.setState(0x2130, 0x2f75, 0x2bb0, 0xc969, 0x3df7, 0x61ff, 0x0, 0x0);
        gbc.writeMem(0x2130, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2f75);
        EXPECT(gbc.pc(), 0x2132);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00F0
        gbc.setState(0xabd, 0x93b0, 0x2f10, 0x2e0e, 0xd036, 0x3d24, 0x0, 0x0);
        gbc.writeMem(0xabd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x93b0);
        EXPECT(gbc.pc(), 0xabf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00F1
        gbc.setState(0xe9b1, 0xe209, 0x790, 0x8471, 0xa8e6, 0xa1b8, 0x1, 0x1);
        gbc.writeMem(0xe9b1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe209);
        EXPECT(gbc.pc(), 0xe9b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b1), 0xcb);
        EXPECT(gbc.readMem(0xe9b2), 0xa8);
        // CB A8 00F2
        gbc.setState(0x8397, 0xe07e, 0x3360, 0xcaae, 0x6f3e, 0x4841, 0x0, 0x0);
        gbc.writeMem(0x8397, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe07e);
        EXPECT(gbc.pc(), 0x8399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8397), 0xcb);
        EXPECT(gbc.readMem(0x8398), 0xa8);
        // CB A8 00F3
        gbc.setState(0xc5c5, 0xbca2, 0x80a0, 0xa351, 0x4a68, 0x6c43, 0x0, 0x1);
        gbc.writeMem(0xc5c5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xbca2);
        EXPECT(gbc.pc(), 0xc5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5c5), 0xcb);
        EXPECT(gbc.readMem(0xc5c6), 0xa8);
        // CB A8 00F4
        gbc.setState(0x3a1c, 0xbaae, 0x6420, 0x410c, 0x881, 0xc3a8, 0x0, 0x0);
        gbc.writeMem(0x3a1c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xbaae);
        EXPECT(gbc.pc(), 0x3a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00F5
        gbc.setState(0xbefe, 0x7c9, 0xe260, 0x57a5, 0xb48a, 0xb688, 0x0, 0x1);
        gbc.writeMem(0xbefe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7c9);
        EXPECT(gbc.pc(), 0xbf00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefe), 0xcb);
        EXPECT(gbc.readMem(0xbeff), 0xa8);
        // CB A8 00F6
        gbc.setState(0xd02a, 0x3ecf, 0xbe20, 0xb25d, 0x1e44, 0xf92a, 0x0, 0x0);
        gbc.writeMem(0xd02a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3ecf);
        EXPECT(gbc.pc(), 0xd02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02a), 0xcb);
        EXPECT(gbc.readMem(0xd02b), 0xa8);
        // CB A8 00F7
        gbc.setState(0x4270, 0xaf90, 0x6dd0, 0x8b61, 0xab9d, 0xb8c5, 0x0, 0x0);
        gbc.writeMem(0x4270, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xaf90);
        EXPECT(gbc.pc(), 0x4272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00F8
        gbc.setState(0x71d4, 0xdbda, 0x3bb0, 0x9a88, 0x9a04, 0xa24e, 0x0, 0x1);
        gbc.writeMem(0x71d4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdbda);
        EXPECT(gbc.pc(), 0x71d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 00F9
        gbc.setState(0x71fb, 0xa6f3, 0xd960, 0xc6e9, 0x442a, 0x2e8, 0x1, 0x1);
        gbc.writeMem(0x71fb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa6f3);
        EXPECT(gbc.pc(), 0x71fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 00FA
        gbc.setState(0xd53e, 0x3445, 0xa180, 0x7f4, 0x86eb, 0x12b6, 0x1, 0x1);
        gbc.writeMem(0xd53e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3445);
        EXPECT(gbc.pc(), 0xd540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53e), 0xcb);
        EXPECT(gbc.readMem(0xd53f), 0xa8);
        // CB A8 00FB
        gbc.setState(0xd73f, 0x4236, 0xc100, 0xae63, 0xc376, 0x8cd3, 0x1, 0x0);
        gbc.writeMem(0xd73f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4236);
        EXPECT(gbc.pc(), 0xd741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73f), 0xcb);
        EXPECT(gbc.readMem(0xd740), 0xa8);
        // CB A8 00FC
        gbc.setState(0xc5ee, 0xc4e9, 0xf570, 0x2031, 0x41d5, 0x88c4, 0x1, 0x0);
        gbc.writeMem(0xc5ee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc4e9);
        EXPECT(gbc.pc(), 0xc5f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ee), 0xcb);
        EXPECT(gbc.readMem(0xc5ef), 0xa8);
        // CB A8 00FD
        gbc.setState(0xb632, 0xa566, 0x90c0, 0x97c7, 0x78d4, 0x46b0, 0x0, 0x0);
        gbc.writeMem(0xb632, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa566);
        EXPECT(gbc.pc(), 0xb634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb632), 0xcb);
        EXPECT(gbc.readMem(0xb633), 0xa8);
        // CB A8 00FE
        gbc.setState(0xcb8c, 0xfd24, 0x5320, 0x7cc3, 0xc1e3, 0xbca9, 0x1, 0x1);
        gbc.writeMem(0xcb8c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfd24);
        EXPECT(gbc.pc(), 0xcb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb8c), 0xcb);
        EXPECT(gbc.readMem(0xcb8d), 0xa8);
        // CB A8 00FF
        gbc.setState(0xeea9, 0x3573, 0xd860, 0xfd8e, 0xeef8, 0xc402, 0x0, 0x0);
        gbc.writeMem(0xeea9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3573);
        EXPECT(gbc.pc(), 0xeeab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea9), 0xcb);
        EXPECT(gbc.readMem(0xeeaa), 0xa8);
        // CB A8 0100
        gbc.setState(0xeb2d, 0x3afd, 0x32d0, 0x44ea, 0x8524, 0xf708, 0x0, 0x1);
        gbc.writeMem(0xeb2d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3afd);
        EXPECT(gbc.pc(), 0xeb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb2d), 0xcb);
        EXPECT(gbc.readMem(0xeb2e), 0xa8);
        // CB A8 0101
        gbc.setState(0x3f15, 0x3236, 0xad20, 0xc6d6, 0xcba, 0x6113, 0x1, 0x1);
        gbc.writeMem(0x3f15, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3236);
        EXPECT(gbc.pc(), 0x3f17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0102
        gbc.setState(0xd7bb, 0x9919, 0x6450, 0x3770, 0x4502, 0xc624, 0x0, 0x1);
        gbc.writeMem(0xd7bb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9919);
        EXPECT(gbc.pc(), 0xd7bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7bb), 0xcb);
        EXPECT(gbc.readMem(0xd7bc), 0xa8);
        // CB A8 0103
        gbc.setState(0x9afb, 0x8648, 0x33c0, 0xc45d, 0xa8e0, 0x8d2c, 0x0, 0x0);
        gbc.writeMem(0x9afb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x8648);
        EXPECT(gbc.pc(), 0x9afd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afb), 0xcb);
        EXPECT(gbc.readMem(0x9afc), 0xa8);
        // CB A8 0104
        gbc.setState(0xbbd8, 0xef7c, 0x93f0, 0x3dbd, 0x9b34, 0x61e0, 0x0, 0x1);
        gbc.writeMem(0xbbd8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xef7c);
        EXPECT(gbc.pc(), 0xbbda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd8), 0xcb);
        EXPECT(gbc.readMem(0xbbd9), 0xa8);
        // CB A8 0105
        gbc.setState(0xb64, 0xbf3d, 0xf810, 0x63e4, 0xdb9b, 0x8ce5, 0x0, 0x0);
        gbc.writeMem(0xb64, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbf3d);
        EXPECT(gbc.pc(), 0xb66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0106
        gbc.setState(0x5486, 0xba13, 0x5010, 0x65cd, 0xc6b3, 0xde19, 0x1, 0x1);
        gbc.writeMem(0x5486, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xba13);
        EXPECT(gbc.pc(), 0x5488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0107
        gbc.setState(0x9001, 0x2e26, 0xd370, 0x16b5, 0x4f63, 0x72ca, 0x0, 0x0);
        gbc.writeMem(0x9001, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2e26);
        EXPECT(gbc.pc(), 0x9003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9001), 0xcb);
        EXPECT(gbc.readMem(0x9002), 0xa8);
        // CB A8 0108
        gbc.setState(0x9ae3, 0x878f, 0x8ed0, 0x4c92, 0x12e4, 0x44bc, 0x1, 0x1);
        gbc.writeMem(0x9ae3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x878f);
        EXPECT(gbc.pc(), 0x9ae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae3), 0xcb);
        EXPECT(gbc.readMem(0x9ae4), 0xa8);
        // CB A8 0109
        gbc.setState(0x2ba5, 0xdf44, 0x2220, 0x2570, 0x9e4f, 0xa5e6, 0x1, 0x0);
        gbc.writeMem(0x2ba5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xdf44);
        EXPECT(gbc.pc(), 0x2ba7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 010A
        gbc.setState(0xbb0b, 0x5da6, 0x820, 0xa43c, 0xc688, 0xb90a, 0x1, 0x1);
        gbc.writeMem(0xbb0b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5da6);
        EXPECT(gbc.pc(), 0xbb0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb0b), 0xcb);
        EXPECT(gbc.readMem(0xbb0c), 0xa8);
        // CB A8 010B
        gbc.setState(0x2a64, 0x3125, 0xb410, 0x6a34, 0xd629, 0xb30c, 0x0, 0x1);
        gbc.writeMem(0x2a64, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3125);
        EXPECT(gbc.pc(), 0x2a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 010C
        gbc.setState(0x714a, 0x2ca2, 0x5470, 0x5506, 0x110b, 0xa848, 0x0, 0x1);
        gbc.writeMem(0x714a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2ca2);
        EXPECT(gbc.pc(), 0x714c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 010D
        gbc.setState(0xe7ad, 0xeec7, 0xf6d0, 0xa3c5, 0xc840, 0xa8ef, 0x1, 0x0);
        gbc.writeMem(0xe7ad, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xeec7);
        EXPECT(gbc.pc(), 0xe7af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ad), 0xcb);
        EXPECT(gbc.readMem(0xe7ae), 0xa8);
        // CB A8 010E
        gbc.setState(0xcaa4, 0x137, 0x1660, 0x46dd, 0x561b, 0xf890, 0x1, 0x1);
        gbc.writeMem(0xcaa4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x137);
        EXPECT(gbc.pc(), 0xcaa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaa4), 0xcb);
        EXPECT(gbc.readMem(0xcaa5), 0xa8);
        // CB A8 010F
        gbc.setState(0x738c, 0xc352, 0x28c0, 0xdc2a, 0x2cee, 0xb3c6, 0x1, 0x0);
        gbc.writeMem(0x738c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc352);
        EXPECT(gbc.pc(), 0x738e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0110
        gbc.setState(0x283f, 0x6630, 0x1cd0, 0xd4c1, 0xdea8, 0xf576, 0x0, 0x0);
        gbc.writeMem(0x283f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x6630);
        EXPECT(gbc.pc(), 0x2841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0111
        gbc.setState(0x605b, 0x164f, 0xb820, 0x7aa, 0xb541, 0x4c19, 0x1, 0x1);
        gbc.writeMem(0x605b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x164f);
        EXPECT(gbc.pc(), 0x605d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0112
        gbc.setState(0xec8a, 0x1314, 0x5590, 0x84c0, 0x281c, 0xcdfb, 0x0, 0x1);
        gbc.writeMem(0xec8a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1314);
        EXPECT(gbc.pc(), 0xec8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec8a), 0xcb);
        EXPECT(gbc.readMem(0xec8b), 0xa8);
        // CB A8 0113
        gbc.setState(0x8027, 0xa77e, 0x4c0, 0x14f8, 0x1ff6, 0x8d5b, 0x1, 0x1);
        gbc.writeMem(0x8027, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa77e);
        EXPECT(gbc.pc(), 0x8029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8027), 0xcb);
        EXPECT(gbc.readMem(0x8028), 0xa8);
        // CB A8 0114
        gbc.setState(0x3b6d, 0x3c6b, 0x98e0, 0xdb9b, 0x4c8c, 0xb2eb, 0x0, 0x1);
        gbc.writeMem(0x3b6d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3c6b);
        EXPECT(gbc.pc(), 0x3b6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0115
        gbc.setState(0x143b, 0xbe2e, 0xe590, 0xca5e, 0x28e2, 0xa699, 0x0, 0x0);
        gbc.writeMem(0x143b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbe2e);
        EXPECT(gbc.pc(), 0x143d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0116
        gbc.setState(0x1d0e, 0x6215, 0xb360, 0x147e, 0x2ca6, 0xb5e2, 0x1, 0x1);
        gbc.writeMem(0x1d0e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x6215);
        EXPECT(gbc.pc(), 0x1d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0118
        gbc.setState(0x39ba, 0x506c, 0xbd00, 0x8ebf, 0x945e, 0x7c8, 0x1, 0x1);
        gbc.writeMem(0x39ba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x506c);
        EXPECT(gbc.pc(), 0x39bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0119
        gbc.setState(0x3cdc, 0xac2f, 0x3b10, 0xe0a0, 0xd4ac, 0x4b93, 0x1, 0x1);
        gbc.writeMem(0x3cdc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xac2f);
        EXPECT(gbc.pc(), 0x3cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 011A
        gbc.setState(0x47d, 0xde5f, 0x3e30, 0xc5c0, 0xa3d2, 0xe336, 0x0, 0x1);
        gbc.writeMem(0x47d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xde5f);
        EXPECT(gbc.pc(), 0x47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 011B
        gbc.setState(0xddf1, 0xa040, 0xa5e0, 0xbf50, 0x3db6, 0x1b1d, 0x0, 0x1);
        gbc.writeMem(0xddf1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa040);
        EXPECT(gbc.pc(), 0xddf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddf1), 0xcb);
        EXPECT(gbc.readMem(0xddf2), 0xa8);
        // CB A8 011C
        gbc.setState(0xc676, 0xb16f, 0x3170, 0x6036, 0xac96, 0x3059, 0x0, 0x0);
        gbc.writeMem(0xc676, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb16f);
        EXPECT(gbc.pc(), 0xc678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc676), 0xcb);
        EXPECT(gbc.readMem(0xc677), 0xa8);
        // CB A8 011D
        gbc.setState(0x4a5e, 0x3657, 0xd680, 0x8737, 0x7675, 0x4885, 0x1, 0x0);
        gbc.writeMem(0x4a5e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3657);
        EXPECT(gbc.pc(), 0x4a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 011E
        gbc.setState(0xa17f, 0x1d02, 0xb380, 0x6c49, 0x1638, 0xc56, 0x0, 0x0);
        gbc.writeMem(0xa17f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1d02);
        EXPECT(gbc.pc(), 0xa181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17f), 0xcb);
        EXPECT(gbc.readMem(0xa180), 0xa8);
        // CB A8 011F
        gbc.setState(0x50ce, 0xbea5, 0x8e60, 0x70d0, 0xbba9, 0xf3af, 0x1, 0x0);
        gbc.writeMem(0x50ce, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xbea5);
        EXPECT(gbc.pc(), 0x50d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0120
        gbc.setState(0x63ae, 0xdacf, 0x20e0, 0x6c00, 0x8638, 0x866d, 0x1, 0x0);
        gbc.writeMem(0x63ae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xdacf);
        EXPECT(gbc.pc(), 0x63b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0121
        gbc.setState(0x752, 0x8b09, 0x7e60, 0x58e2, 0xe31c, 0xb3b9, 0x0, 0x0);
        gbc.writeMem(0x752, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x8b09);
        EXPECT(gbc.pc(), 0x754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0122
        gbc.setState(0xefa2, 0xd5bc, 0xc60, 0x29ce, 0xbe08, 0x78aa, 0x0, 0x0);
        gbc.writeMem(0xefa2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd5bc);
        EXPECT(gbc.pc(), 0xefa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa2), 0xcb);
        EXPECT(gbc.readMem(0xefa3), 0xa8);
        // CB A8 0124
        gbc.setState(0x3f34, 0xbddd, 0x19a0, 0xa613, 0x1ccd, 0x74ba, 0x0, 0x1);
        gbc.writeMem(0x3f34, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbddd);
        EXPECT(gbc.pc(), 0x3f36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0125
        gbc.setState(0xf39, 0x59f9, 0x9c0, 0x9a03, 0x9540, 0x2b33, 0x0, 0x1);
        gbc.writeMem(0xf39, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x59f9);
        EXPECT(gbc.pc(), 0xf3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0126
        gbc.setState(0x8916, 0x632c, 0x1170, 0xe338, 0x6534, 0x32f0, 0x1, 0x0);
        gbc.writeMem(0x8916, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x632c);
        EXPECT(gbc.pc(), 0x8918);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8916), 0xcb);
        EXPECT(gbc.readMem(0x8917), 0xa8);
        // CB A8 0127
        gbc.setState(0x194e, 0xd261, 0x3760, 0xb128, 0x8843, 0x8040, 0x1, 0x1);
        gbc.writeMem(0x194e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd261);
        EXPECT(gbc.pc(), 0x1950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0128
        gbc.setState(0xb776, 0x5723, 0x2f30, 0x6c4, 0x8f24, 0x9ab, 0x1, 0x1);
        gbc.writeMem(0xb776, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5723);
        EXPECT(gbc.pc(), 0xb778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb776), 0xcb);
        EXPECT(gbc.readMem(0xb777), 0xa8);
        // CB A8 0129
        gbc.setState(0x1a72, 0xc5e4, 0x1290, 0x9a8b, 0xa7fa, 0x3eb3, 0x0, 0x0);
        gbc.writeMem(0x1a72, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc5e4);
        EXPECT(gbc.pc(), 0x1a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 012A
        gbc.setState(0x3016, 0x98be, 0x6240, 0x37fa, 0xd2e5, 0x4dfa, 0x1, 0x0);
        gbc.writeMem(0x3016, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x98be);
        EXPECT(gbc.pc(), 0x3018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 012B
        gbc.setState(0xd0d0, 0x5b1f, 0x8a30, 0xed29, 0x8b28, 0xa64e, 0x0, 0x1);
        gbc.writeMem(0xd0d0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5b1f);
        EXPECT(gbc.pc(), 0xd0d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0d0), 0xcb);
        EXPECT(gbc.readMem(0xd0d1), 0xa8);
        // CB A8 012C
        gbc.setState(0x6208, 0x58e2, 0xd9a0, 0x317b, 0x96ad, 0x70d3, 0x0, 0x0);
        gbc.writeMem(0x6208, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x58e2);
        EXPECT(gbc.pc(), 0x620a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 012D
        gbc.setState(0x4970, 0x7bb7, 0x1620, 0xf8a4, 0x7f2, 0x1f68, 0x0, 0x1);
        gbc.writeMem(0x4970, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7bb7);
        EXPECT(gbc.pc(), 0x4972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 012E
        gbc.setState(0x16c9, 0x67d2, 0xca90, 0x2326, 0x1be4, 0x4828, 0x1, 0x1);
        gbc.writeMem(0x16c9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x67d2);
        EXPECT(gbc.pc(), 0x16cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 012F
        gbc.setState(0xb84a, 0xd03e, 0x3600, 0x774c, 0x4c98, 0xd98b, 0x0, 0x0);
        gbc.writeMem(0xb84a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd03e);
        EXPECT(gbc.pc(), 0xb84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84a), 0xcb);
        EXPECT(gbc.readMem(0xb84b), 0xa8);
        // CB A8 0130
        gbc.setState(0xe27b, 0x2e06, 0xf870, 0xa6e4, 0xcfe9, 0x4573, 0x0, 0x1);
        gbc.writeMem(0xe27b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2e06);
        EXPECT(gbc.pc(), 0xe27d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe27b), 0xcb);
        EXPECT(gbc.readMem(0xe27c), 0xa8);
        // CB A8 0131
        gbc.setState(0x3a5a, 0x31dd, 0x3cb0, 0xea0a, 0x85d4, 0x2ca7, 0x1, 0x0);
        gbc.writeMem(0x3a5a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x31dd);
        EXPECT(gbc.pc(), 0x3a5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0132
        gbc.setState(0x10a, 0x6eb7, 0xb8e0, 0xad78, 0x348, 0x9f49, 0x0, 0x0);
        gbc.writeMem(0x10a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6eb7);
        EXPECT(gbc.pc(), 0x10c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0133
        gbc.setState(0xc3e9, 0x1bc9, 0x380, 0xf223, 0x2f3f, 0xdd19, 0x1, 0x0);
        gbc.writeMem(0xc3e9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1bc9);
        EXPECT(gbc.pc(), 0xc3eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e9), 0xcb);
        EXPECT(gbc.readMem(0xc3ea), 0xa8);
        // CB A8 0134
        gbc.setState(0x80e3, 0xe73b, 0x8330, 0xccae, 0xb0a4, 0x3ce3, 0x1, 0x1);
        gbc.writeMem(0x80e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe73b);
        EXPECT(gbc.pc(), 0x80e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e3), 0xcb);
        EXPECT(gbc.readMem(0x80e4), 0xa8);
        // CB A8 0135
        gbc.setState(0x5f83, 0x164, 0x1b90, 0x557b, 0x18c3, 0x9254, 0x0, 0x1);
        gbc.writeMem(0x5f83, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x164);
        EXPECT(gbc.pc(), 0x5f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0136
        gbc.setState(0x57e, 0x36ab, 0xc510, 0x3f95, 0x11f7, 0x36e9, 0x1, 0x1);
        gbc.writeMem(0x57e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x36ab);
        EXPECT(gbc.pc(), 0x580);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0137
        gbc.setState(0x34b0, 0xed85, 0x4d70, 0x839e, 0xacaa, 0xc012, 0x1, 0x1);
        gbc.writeMem(0x34b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xed85);
        EXPECT(gbc.pc(), 0x34b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0138
        gbc.setState(0x1f36, 0x87e8, 0xba00, 0xf4ce, 0xc504, 0xffdb, 0x0, 0x1);
        gbc.writeMem(0x1f36, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x87e8);
        EXPECT(gbc.pc(), 0x1f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0139
        gbc.setState(0x2880, 0x8f6d, 0x6c80, 0x8cb0, 0x9b02, 0xcfd6, 0x1, 0x1);
        gbc.writeMem(0x2880, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8f6d);
        EXPECT(gbc.pc(), 0x2882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 013A
        gbc.setState(0x3f04, 0xc7b7, 0x8530, 0x7920, 0x8c90, 0x3a43, 0x1, 0x1);
        gbc.writeMem(0x3f04, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc7b7);
        EXPECT(gbc.pc(), 0x3f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 013B
        gbc.setState(0x31c8, 0x2631, 0x7070, 0x8396, 0x59f9, 0xe80f, 0x0, 0x0);
        gbc.writeMem(0x31c8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2631);
        EXPECT(gbc.pc(), 0x31ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 013C
        gbc.setState(0x1b6f, 0x608b, 0x2340, 0xccde, 0x5b68, 0x6ff5, 0x0, 0x1);
        gbc.writeMem(0x1b6f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x608b);
        EXPECT(gbc.pc(), 0x1b71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 013D
        gbc.setState(0xe189, 0x2be4, 0x6670, 0xa84c, 0xf402, 0x7a97, 0x0, 0x0);
        gbc.writeMem(0xe189, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2be4);
        EXPECT(gbc.pc(), 0xe18b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe189), 0xcb);
        EXPECT(gbc.readMem(0xe18a), 0xa8);
        // CB A8 013E
        gbc.setState(0xad33, 0x2e4e, 0x1900, 0xafa3, 0xbaa8, 0x877f, 0x0, 0x0);
        gbc.writeMem(0xad33, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2e4e);
        EXPECT(gbc.pc(), 0xad35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad33), 0xcb);
        EXPECT(gbc.readMem(0xad34), 0xa8);
        // CB A8 013F
        gbc.setState(0x28c9, 0xabe4, 0x4bb0, 0xe23d, 0x3670, 0xa29f, 0x0, 0x0);
        gbc.writeMem(0x28c9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xabe4);
        EXPECT(gbc.pc(), 0x28cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0140
        gbc.setState(0x95ec, 0x18cb, 0x7140, 0x8e41, 0xc9ef, 0x4812, 0x0, 0x1);
        gbc.writeMem(0x95ec, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x18cb);
        EXPECT(gbc.pc(), 0x95ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95ec), 0xcb);
        EXPECT(gbc.readMem(0x95ed), 0xa8);
        // CB A8 0141
        gbc.setState(0xa5b0, 0x8e99, 0x2c60, 0x46bf, 0xdc8b, 0x5115, 0x0, 0x0);
        gbc.writeMem(0xa5b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8e99);
        EXPECT(gbc.pc(), 0xa5b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b0), 0xcb);
        EXPECT(gbc.readMem(0xa5b1), 0xa8);
        // CB A8 0142
        gbc.setState(0xa7e7, 0x1551, 0x49e0, 0xeca7, 0xf454, 0xb9d0, 0x1, 0x1);
        gbc.writeMem(0xa7e7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1551);
        EXPECT(gbc.pc(), 0xa7e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e7), 0xcb);
        EXPECT(gbc.readMem(0xa7e8), 0xa8);
        // CB A8 0143
        gbc.setState(0xa2f6, 0x56a5, 0xd0b0, 0x35ed, 0x4f91, 0xf270, 0x1, 0x1);
        gbc.writeMem(0xa2f6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x56a5);
        EXPECT(gbc.pc(), 0xa2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f6), 0xcb);
        EXPECT(gbc.readMem(0xa2f7), 0xa8);
        // CB A8 0144
        gbc.setState(0x9e37, 0x8a38, 0x79f0, 0x4dcf, 0x86d2, 0x7093, 0x0, 0x1);
        gbc.writeMem(0x9e37, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x8a38);
        EXPECT(gbc.pc(), 0x9e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e37), 0xcb);
        EXPECT(gbc.readMem(0x9e38), 0xa8);
        // CB A8 0145
        gbc.setState(0x94e3, 0x9b20, 0xcb10, 0x68c6, 0xfdad, 0xf642, 0x1, 0x1);
        gbc.writeMem(0x94e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9b20);
        EXPECT(gbc.pc(), 0x94e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94e3), 0xcb);
        EXPECT(gbc.readMem(0x94e4), 0xa8);
        // CB A8 0147
        gbc.setState(0x2124, 0x1472, 0x7130, 0xca86, 0xb313, 0xf3f9, 0x0, 0x1);
        gbc.writeMem(0x2124, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1472);
        EXPECT(gbc.pc(), 0x2126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0148
        gbc.setState(0x7bee, 0x5bc, 0x6c80, 0x4ae9, 0x1e78, 0xad7a, 0x0, 0x1);
        gbc.writeMem(0x7bee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x5bc);
        EXPECT(gbc.pc(), 0x7bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0149
        gbc.setState(0x1ebf, 0xd533, 0x67a0, 0xb887, 0x9096, 0x21ab, 0x1, 0x0);
        gbc.writeMem(0x1ebf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd533);
        EXPECT(gbc.pc(), 0x1ec1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 014A
        gbc.setState(0x8e0c, 0x1958, 0x1cb0, 0xc94a, 0xde56, 0x8935, 0x0, 0x1);
        gbc.writeMem(0x8e0c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x1958);
        EXPECT(gbc.pc(), 0x8e0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e0c), 0xcb);
        EXPECT(gbc.readMem(0x8e0d), 0xa8);
        // CB A8 014B
        gbc.setState(0x980, 0xb735, 0x7f40, 0xf17a, 0xb374, 0x9d69, 0x1, 0x1);
        gbc.writeMem(0x980, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb735);
        EXPECT(gbc.pc(), 0x982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 014C
        gbc.setState(0x80b1, 0xfafe, 0x8840, 0x7043, 0xcd83, 0xacd, 0x0, 0x0);
        gbc.writeMem(0x80b1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfafe);
        EXPECT(gbc.pc(), 0x80b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b1), 0xcb);
        EXPECT(gbc.readMem(0x80b2), 0xa8);
        // CB A8 014D
        gbc.setState(0x4c19, 0x6739, 0xbcc0, 0xd94c, 0x8f7a, 0x2fa1, 0x0, 0x0);
        gbc.writeMem(0x4c19, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6739);
        EXPECT(gbc.pc(), 0x4c1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 014E
        gbc.setState(0xe511, 0xfc46, 0xdff0, 0x5c24, 0x8973, 0xe319, 0x1, 0x0);
        gbc.writeMem(0xe511, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfc46);
        EXPECT(gbc.pc(), 0xe513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe511), 0xcb);
        EXPECT(gbc.readMem(0xe512), 0xa8);
        // CB A8 0150
        gbc.setState(0x99c8, 0xf8de, 0x9f10, 0xa3fb, 0x80b9, 0xbcf4, 0x0, 0x0);
        gbc.writeMem(0x99c8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf8de);
        EXPECT(gbc.pc(), 0x99ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c8), 0xcb);
        EXPECT(gbc.readMem(0x99c9), 0xa8);
        // CB A8 0151
        gbc.setState(0xe7be, 0x46a4, 0xb0d0, 0x57f6, 0x8813, 0x3a33, 0x1, 0x0);
        gbc.writeMem(0xe7be, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x46a4);
        EXPECT(gbc.pc(), 0xe7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7be), 0xcb);
        EXPECT(gbc.readMem(0xe7bf), 0xa8);
        // CB A8 0152
        gbc.setState(0x606e, 0x14f7, 0xa910, 0xe671, 0xf7ad, 0x273f, 0x0, 0x0);
        gbc.writeMem(0x606e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x14f7);
        EXPECT(gbc.pc(), 0x6070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0153
        gbc.setState(0xd4ba, 0x9c00, 0xb710, 0xf9d7, 0x4345, 0x4777, 0x1, 0x0);
        gbc.writeMem(0xd4ba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9c00);
        EXPECT(gbc.pc(), 0xd4bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ba), 0xcb);
        EXPECT(gbc.readMem(0xd4bb), 0xa8);
        // CB A8 0154
        gbc.setState(0x9af2, 0xbd79, 0x73a0, 0xd966, 0x11d9, 0x2885, 0x1, 0x0);
        gbc.writeMem(0x9af2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbd79);
        EXPECT(gbc.pc(), 0x9af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af2), 0xcb);
        EXPECT(gbc.readMem(0x9af3), 0xa8);
        // CB A8 0155
        gbc.setState(0x6d5a, 0x5d64, 0xa810, 0x9e19, 0xc15e, 0xa5c8, 0x1, 0x0);
        gbc.writeMem(0x6d5a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5d64);
        EXPECT(gbc.pc(), 0x6d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0156
        gbc.setState(0x4d2b, 0xa02b, 0x9040, 0x9b06, 0x9d37, 0xc78d, 0x1, 0x1);
        gbc.writeMem(0x4d2b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa02b);
        EXPECT(gbc.pc(), 0x4d2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0158
        gbc.setState(0xca4a, 0xb5b9, 0xf270, 0x84be, 0x5273, 0x9a6f, 0x0, 0x0);
        gbc.writeMem(0xca4a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb5b9);
        EXPECT(gbc.pc(), 0xca4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca4a), 0xcb);
        EXPECT(gbc.readMem(0xca4b), 0xa8);
        // CB A8 0159
        gbc.setState(0x8190, 0x5813, 0xc0d0, 0xd43, 0x87f1, 0x1ad3, 0x0, 0x1);
        gbc.writeMem(0x8190, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5813);
        EXPECT(gbc.pc(), 0x8192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8190), 0xcb);
        EXPECT(gbc.readMem(0x8191), 0xa8);
        // CB A8 015B
        gbc.setState(0xa066, 0x3e96, 0x6520, 0x3ecc, 0xdcb1, 0x3e99, 0x0, 0x0);
        gbc.writeMem(0xa066, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3e96);
        EXPECT(gbc.pc(), 0xa068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa066), 0xcb);
        EXPECT(gbc.readMem(0xa067), 0xa8);
        // CB A8 015D
        gbc.setState(0x935f, 0x610d, 0x68e0, 0xc229, 0xe749, 0xfef9, 0x1, 0x1);
        gbc.writeMem(0x935f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x610d);
        EXPECT(gbc.pc(), 0x9361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935f), 0xcb);
        EXPECT(gbc.readMem(0x9360), 0xa8);
        // CB A8 015E
        gbc.setState(0x4b57, 0xd285, 0xa00, 0x45b1, 0x11e4, 0x5f6e, 0x1, 0x1);
        gbc.writeMem(0x4b57, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd285);
        EXPECT(gbc.pc(), 0x4b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 015F
        gbc.setState(0xcb5c, 0xeaeb, 0x7190, 0x4c7c, 0xcd51, 0xf80f, 0x1, 0x1);
        gbc.writeMem(0xcb5c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xeaeb);
        EXPECT(gbc.pc(), 0xcb5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb5c), 0xcb);
        EXPECT(gbc.readMem(0xcb5d), 0xa8);
        // CB A8 0161
        gbc.setState(0x319b, 0x3784, 0xa400, 0x5575, 0xf095, 0xa0ec, 0x1, 0x0);
        gbc.writeMem(0x319b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3784);
        EXPECT(gbc.pc(), 0x319d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0162
        gbc.setState(0x41ed, 0x6c56, 0x5f0, 0xf88, 0x971c, 0x78ec, 0x1, 0x1);
        gbc.writeMem(0x41ed, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6c56);
        EXPECT(gbc.pc(), 0x41ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0163
        gbc.setState(0x3068, 0x18a4, 0x9a80, 0x34f5, 0x3e88, 0x1d18, 0x1, 0x1);
        gbc.writeMem(0x3068, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x18a4);
        EXPECT(gbc.pc(), 0x306a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0165
        gbc.setState(0xb7f7, 0x5c7, 0xa130, 0x808b, 0xdc98, 0xe058, 0x1, 0x0);
        gbc.writeMem(0xb7f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5c7);
        EXPECT(gbc.pc(), 0xb7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f7), 0xcb);
        EXPECT(gbc.readMem(0xb7f8), 0xa8);
        // CB A8 0166
        gbc.setState(0x46f3, 0x8604, 0x5f60, 0x17f3, 0xc8b5, 0x164f, 0x0, 0x1);
        gbc.writeMem(0x46f3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8604);
        EXPECT(gbc.pc(), 0x46f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0167
        gbc.setState(0x42e6, 0x2cc1, 0x8d30, 0xbf30, 0x4cd9, 0xb6a, 0x0, 0x1);
        gbc.writeMem(0x42e6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2cc1);
        EXPECT(gbc.pc(), 0x42e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0168
        gbc.setState(0xe10d, 0xfa20, 0x2850, 0x2786, 0x8ec7, 0xc5e6, 0x0, 0x1);
        gbc.writeMem(0xe10d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfa20);
        EXPECT(gbc.pc(), 0xe10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10d), 0xcb);
        EXPECT(gbc.readMem(0xe10e), 0xa8);
        // CB A8 0169
        gbc.setState(0x57a2, 0x537d, 0x3cb0, 0x80d4, 0xe28, 0xf3ed, 0x1, 0x0);
        gbc.writeMem(0x57a2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x537d);
        EXPECT(gbc.pc(), 0x57a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 016B
        gbc.setState(0xbc64, 0x631a, 0xfd60, 0x7e9a, 0xdd25, 0x4f8f, 0x0, 0x1);
        gbc.writeMem(0xbc64, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x631a);
        EXPECT(gbc.pc(), 0xbc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc64), 0xcb);
        EXPECT(gbc.readMem(0xbc65), 0xa8);
        // CB A8 016C
        gbc.setState(0x4278, 0x9cda, 0x7710, 0x23a0, 0xc03f, 0x1c95, 0x1, 0x0);
        gbc.writeMem(0x4278, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9cda);
        EXPECT(gbc.pc(), 0x427a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 016E
        gbc.setState(0xad36, 0x85ac, 0xac90, 0xcf91, 0x23c8, 0xcdc6, 0x1, 0x0);
        gbc.writeMem(0xad36, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x85ac);
        EXPECT(gbc.pc(), 0xad38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad36), 0xcb);
        EXPECT(gbc.readMem(0xad37), 0xa8);
        // CB A8 016F
        gbc.setState(0x4ae6, 0x87a0, 0xb210, 0xc28e, 0x3a2b, 0xbb31, 0x1, 0x1);
        gbc.writeMem(0x4ae6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x87a0);
        EXPECT(gbc.pc(), 0x4ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0170
        gbc.setState(0x2311, 0xb3c1, 0xb190, 0x9005, 0x6f4d, 0x48f0, 0x1, 0x1);
        gbc.writeMem(0x2311, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb3c1);
        EXPECT(gbc.pc(), 0x2313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0171
        gbc.setState(0x3f66, 0x7a0c, 0x6eb0, 0x9132, 0xc1c9, 0xc8b5, 0x0, 0x0);
        gbc.writeMem(0x3f66, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0x3f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0172
        gbc.setState(0x5641, 0x33e6, 0xec90, 0xb756, 0xdec6, 0x14ff, 0x0, 0x0);
        gbc.writeMem(0x5641, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x33e6);
        EXPECT(gbc.pc(), 0x5643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0173
        gbc.setState(0x873f, 0x98dd, 0xb090, 0x83be, 0xcc38, 0xc9df, 0x1, 0x0);
        gbc.writeMem(0x873f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x98dd);
        EXPECT(gbc.pc(), 0x8741);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873f), 0xcb);
        EXPECT(gbc.readMem(0x8740), 0xa8);
        // CB A8 0174
        gbc.setState(0x5420, 0x5254, 0x9020, 0xa606, 0xd801, 0x19a2, 0x1, 0x1);
        gbc.writeMem(0x5420, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5254);
        EXPECT(gbc.pc(), 0x5422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0175
        gbc.setState(0xb36b, 0x14ab, 0x1430, 0xaa29, 0xb062, 0xafca, 0x1, 0x0);
        gbc.writeMem(0xb36b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x14ab);
        EXPECT(gbc.pc(), 0xb36d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36b), 0xcb);
        EXPECT(gbc.readMem(0xb36c), 0xa8);
        // CB A8 0176
        gbc.setState(0x6e34, 0x4082, 0xaa20, 0xbaca, 0x7181, 0xbfc4, 0x1, 0x0);
        gbc.writeMem(0x6e34, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4082);
        EXPECT(gbc.pc(), 0x6e36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0177
        gbc.setState(0x4bb0, 0x7412, 0x1890, 0x6a4a, 0x3d6d, 0xedd3, 0x0, 0x1);
        gbc.writeMem(0x4bb0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7412);
        EXPECT(gbc.pc(), 0x4bb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0178
        gbc.setState(0x3421, 0xdb95, 0xb820, 0xbdf1, 0xee48, 0x97ee, 0x0, 0x1);
        gbc.writeMem(0x3421, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdb95);
        EXPECT(gbc.pc(), 0x3423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0179
        gbc.setState(0xd745, 0x7f3b, 0x6f50, 0x9790, 0x6ebe, 0xe8f, 0x1, 0x1);
        gbc.writeMem(0xd745, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7f3b);
        EXPECT(gbc.pc(), 0xd747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd745), 0xcb);
        EXPECT(gbc.readMem(0xd746), 0xa8);
        // CB A8 017A
        gbc.setState(0xe5d0, 0x973c, 0x6ef0, 0x642a, 0x336d, 0x92a9, 0x1, 0x0);
        gbc.writeMem(0xe5d0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x973c);
        EXPECT(gbc.pc(), 0xe5d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d0), 0xcb);
        EXPECT(gbc.readMem(0xe5d1), 0xa8);
        // CB A8 017B
        gbc.setState(0x7e41, 0xd0b3, 0xfd20, 0x7c6f, 0xed33, 0x35e9, 0x0, 0x1);
        gbc.writeMem(0x7e41, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd0b3);
        EXPECT(gbc.pc(), 0x7e43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 017C
        gbc.setState(0xcc96, 0x5642, 0x7960, 0x9e1c, 0x9fd1, 0x830e, 0x0, 0x1);
        gbc.writeMem(0xcc96, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x5642);
        EXPECT(gbc.pc(), 0xcc98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc96), 0xcb);
        EXPECT(gbc.readMem(0xcc97), 0xa8);
        // CB A8 017D
        gbc.setState(0xbfb9, 0xdb6c, 0x40, 0x3434, 0xced3, 0x1afb, 0x0, 0x0);
        gbc.writeMem(0xbfb9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdb6c);
        EXPECT(gbc.pc(), 0xbfbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb9), 0xcb);
        EXPECT(gbc.readMem(0xbfba), 0xa8);
        // CB A8 017E
        gbc.setState(0x1935, 0xede5, 0xad20, 0x99ea, 0x7566, 0xd278, 0x0, 0x1);
        gbc.writeMem(0x1935, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xede5);
        EXPECT(gbc.pc(), 0x1937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 017F
        gbc.setState(0x1782, 0x5e1a, 0xfcd0, 0x7fbb, 0x69af, 0x4b3c, 0x0, 0x1);
        gbc.writeMem(0x1782, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5e1a);
        EXPECT(gbc.pc(), 0x1784);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0180
        gbc.setState(0xd3be, 0x6f5, 0x8fe0, 0x75b7, 0x12ce, 0x453f, 0x0, 0x0);
        gbc.writeMem(0xd3be, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6f5);
        EXPECT(gbc.pc(), 0xd3c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3be), 0xcb);
        EXPECT(gbc.readMem(0xd3bf), 0xa8);
        // CB A8 0181
        gbc.setState(0x1033, 0x9b1a, 0x7270, 0x6620, 0x8b2c, 0x168e, 0x1, 0x0);
        gbc.writeMem(0x1033, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9b1a);
        EXPECT(gbc.pc(), 0x1035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0182
        gbc.setState(0x1193, 0xcdff, 0xfa70, 0x493f, 0xbc1d, 0xa7f0, 0x0, 0x1);
        gbc.writeMem(0x1193, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcdff);
        EXPECT(gbc.pc(), 0x1195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0183
        gbc.setState(0x5812, 0x8ff5, 0x78b0, 0xcc6c, 0x8bec, 0x2c1d, 0x0, 0x0);
        gbc.writeMem(0x5812, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8ff5);
        EXPECT(gbc.pc(), 0x5814);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0184
        gbc.setState(0xe312, 0xf536, 0x63a0, 0x4f58, 0xeba9, 0x1815, 0x1, 0x0);
        gbc.writeMem(0xe312, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf536);
        EXPECT(gbc.pc(), 0xe314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe312), 0xcb);
        EXPECT(gbc.readMem(0xe313), 0xa8);
        // CB A8 0185
        gbc.setState(0xefa6, 0x9fbd, 0xa2c0, 0x674b, 0x9c46, 0x8e87, 0x0, 0x0);
        gbc.writeMem(0xefa6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9fbd);
        EXPECT(gbc.pc(), 0xefa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefa6), 0xcb);
        EXPECT(gbc.readMem(0xefa7), 0xa8);
        // CB A8 0186
        gbc.setState(0x9a7c, 0x3a86, 0x8b80, 0xe666, 0xa589, 0x14ae, 0x1, 0x1);
        gbc.writeMem(0x9a7c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3a86);
        EXPECT(gbc.pc(), 0x9a7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a7c), 0xcb);
        EXPECT(gbc.readMem(0x9a7d), 0xa8);
        // CB A8 0187
        gbc.setState(0xc471, 0x5996, 0x8bb0, 0x95a3, 0x8240, 0x5ff0, 0x0, 0x0);
        gbc.writeMem(0xc471, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5996);
        EXPECT(gbc.pc(), 0xc473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc471), 0xcb);
        EXPECT(gbc.readMem(0xc472), 0xa8);
        // CB A8 0188
        gbc.setState(0x880b, 0x7f3d, 0x3700, 0x9bee, 0x36e2, 0x9eb5, 0x0, 0x1);
        gbc.writeMem(0x880b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7f3d);
        EXPECT(gbc.pc(), 0x880d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880b), 0xcb);
        EXPECT(gbc.readMem(0x880c), 0xa8);
        // CB A8 0189
        gbc.setState(0x122d, 0x600c, 0x88d0, 0xb921, 0x83fc, 0x3221, 0x1, 0x0);
        gbc.writeMem(0x122d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x600c);
        EXPECT(gbc.pc(), 0x122f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 018A
        gbc.setState(0x405b, 0xd7db, 0x3110, 0xa336, 0x62c8, 0x2b72, 0x0, 0x0);
        gbc.writeMem(0x405b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd7db);
        EXPECT(gbc.pc(), 0x405d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 018B
        gbc.setState(0xefa6, 0xca94, 0x5a10, 0x579f, 0xa337, 0x23e5, 0x0, 0x1);
        gbc.writeMem(0xefa6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xca94);
        EXPECT(gbc.pc(), 0xefa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa6), 0xcb);
        EXPECT(gbc.readMem(0xefa7), 0xa8);
        // CB A8 018C
        gbc.setState(0x647f, 0x36e7, 0xd10, 0xc279, 0xe354, 0x93fc, 0x1, 0x0);
        gbc.writeMem(0x647f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x36e7);
        EXPECT(gbc.pc(), 0x6481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 018D
        gbc.setState(0xa45c, 0xfd79, 0xd9a0, 0xc69a, 0x8db0, 0x1b92, 0x0, 0x1);
        gbc.writeMem(0xa45c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfd79);
        EXPECT(gbc.pc(), 0xa45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45c), 0xcb);
        EXPECT(gbc.readMem(0xa45d), 0xa8);
        // CB A8 018E
        gbc.setState(0x4649, 0xdb1e, 0xf5a0, 0xfade, 0xd03, 0x230f, 0x0, 0x1);
        gbc.writeMem(0x4649, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xdb1e);
        EXPECT(gbc.pc(), 0x464b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 018F
        gbc.setState(0x34c6, 0x4c5e, 0x6bd0, 0xd697, 0xfc59, 0x6d18, 0x1, 0x0);
        gbc.writeMem(0x34c6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4c5e);
        EXPECT(gbc.pc(), 0x34c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0190
        gbc.setState(0x33a6, 0xaead, 0x0, 0x57fd, 0x9932, 0x9868, 0x1, 0x0);
        gbc.writeMem(0x33a6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xaead);
        EXPECT(gbc.pc(), 0x33a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0191
        gbc.setState(0x5a0e, 0x5dcc, 0xf750, 0x9f65, 0x12de, 0x7246, 0x0, 0x1);
        gbc.writeMem(0x5a0e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5dcc);
        EXPECT(gbc.pc(), 0x5a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0192
        gbc.setState(0x749b, 0xd3f5, 0xd9b0, 0xd2e2, 0xc769, 0x7fbe, 0x0, 0x0);
        gbc.writeMem(0x749b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd3f5);
        EXPECT(gbc.pc(), 0x749d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0193
        gbc.setState(0xd38e, 0xd683, 0x4220, 0x3b54, 0xfe08, 0x5a55, 0x0, 0x0);
        gbc.writeMem(0xd38e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xd683);
        EXPECT(gbc.pc(), 0xd390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38e), 0xcb);
        EXPECT(gbc.readMem(0xd38f), 0xa8);
        // CB A8 0194
        gbc.setState(0xeb0a, 0xf7c1, 0x1a10, 0x5441, 0x1b97, 0x6145, 0x0, 0x1);
        gbc.writeMem(0xeb0a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf7c1);
        EXPECT(gbc.pc(), 0xeb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb0a), 0xcb);
        EXPECT(gbc.readMem(0xeb0b), 0xa8);
        // CB A8 0195
        gbc.setState(0xe070, 0x5299, 0x11e0, 0xcd11, 0xad96, 0x5ec0, 0x0, 0x1);
        gbc.writeMem(0xe070, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5299);
        EXPECT(gbc.pc(), 0xe072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe070), 0xcb);
        EXPECT(gbc.readMem(0xe071), 0xa8);
        // CB A8 0196
        gbc.setState(0x56a1, 0x8370, 0x12e0, 0x791e, 0x74ac, 0x1a95, 0x1, 0x1);
        gbc.writeMem(0x56a1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8370);
        EXPECT(gbc.pc(), 0x56a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0197
        gbc.setState(0x68c6, 0xab52, 0x7bc0, 0xa92b, 0x6722, 0x1fe2, 0x1, 0x0);
        gbc.writeMem(0x68c6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xab52);
        EXPECT(gbc.pc(), 0x68c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0198
        gbc.setState(0x27bc, 0x28f8, 0x18e0, 0x1b1d, 0x82f2, 0xf2da, 0x1, 0x1);
        gbc.writeMem(0x27bc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x28f8);
        EXPECT(gbc.pc(), 0x27be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0199
        gbc.setState(0x69f, 0x6d81, 0x770, 0xfe1f, 0x61ea, 0x57dd, 0x0, 0x0);
        gbc.writeMem(0x69f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6d81);
        EXPECT(gbc.pc(), 0x6a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 019A
        gbc.setState(0x4dbe, 0x2c13, 0x4730, 0x7b61, 0xf09, 0xdb7, 0x0, 0x1);
        gbc.writeMem(0x4dbe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2c13);
        EXPECT(gbc.pc(), 0x4dc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 019B
        gbc.setState(0xa0fe, 0xe0b7, 0x99c0, 0x6b9b, 0x6400, 0x60ad, 0x1, 0x1);
        gbc.writeMem(0xa0fe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe0b7);
        EXPECT(gbc.pc(), 0xa100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0fe), 0xcb);
        EXPECT(gbc.readMem(0xa0ff), 0xa8);
        // CB A8 019C
        gbc.setState(0xee35, 0x277d, 0xf290, 0x6b0d, 0x47d8, 0xe0fc, 0x1, 0x1);
        gbc.writeMem(0xee35, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x277d);
        EXPECT(gbc.pc(), 0xee37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee35), 0xcb);
        EXPECT(gbc.readMem(0xee36), 0xa8);
        // CB A8 019D
        gbc.setState(0x96ad, 0xf711, 0x1dc0, 0xbb33, 0x9e4e, 0xc652, 0x1, 0x0);
        gbc.writeMem(0x96ad, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf711);
        EXPECT(gbc.pc(), 0x96af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ad), 0xcb);
        EXPECT(gbc.readMem(0x96ae), 0xa8);
        // CB A8 019E
        gbc.setState(0xcc74, 0xcdd4, 0x2fb0, 0xe455, 0x40d9, 0x596c, 0x0, 0x1);
        gbc.writeMem(0xcc74, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xcdd4);
        EXPECT(gbc.pc(), 0xcc76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc74), 0xcb);
        EXPECT(gbc.readMem(0xcc75), 0xa8);
        // CB A8 019F
        gbc.setState(0xd577, 0x5d6c, 0xeb90, 0xc6fa, 0xa707, 0x66f8, 0x1, 0x1);
        gbc.writeMem(0xd577, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5d6c);
        EXPECT(gbc.pc(), 0xd579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd577), 0xcb);
        EXPECT(gbc.readMem(0xd578), 0xa8);
        // CB A8 01A0
        gbc.setState(0x3ae5, 0x89a8, 0x9db0, 0xb42f, 0x3ec7, 0x868d, 0x0, 0x1);
        gbc.writeMem(0x3ae5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x89a8);
        EXPECT(gbc.pc(), 0x3ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01A1
        gbc.setState(0x19ab, 0x714a, 0x2da0, 0x1181, 0x3654, 0xb72f, 0x0, 0x0);
        gbc.writeMem(0x19ab, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x714a);
        EXPECT(gbc.pc(), 0x19ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01A2
        gbc.setState(0x8969, 0xa099, 0x85f0, 0x6ea8, 0xa82e, 0x6e45, 0x0, 0x0);
        gbc.writeMem(0x8969, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa099);
        EXPECT(gbc.pc(), 0x896b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8969), 0xcb);
        EXPECT(gbc.readMem(0x896a), 0xa8);
        // CB A8 01A3
        gbc.setState(0x7e6b, 0x37f3, 0xc8b0, 0x876a, 0x812c, 0x6190, 0x0, 0x0);
        gbc.writeMem(0x7e6b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x37f3);
        EXPECT(gbc.pc(), 0x7e6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01A4
        gbc.setState(0x87a6, 0x25e9, 0x1990, 0xd599, 0xcb32, 0x6335, 0x1, 0x1);
        gbc.writeMem(0x87a6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x25e9);
        EXPECT(gbc.pc(), 0x87a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a6), 0xcb);
        EXPECT(gbc.readMem(0x87a7), 0xa8);
        // CB A8 01A5
        gbc.setState(0xd1f, 0x97eb, 0x29e0, 0xf61d, 0xfb83, 0xa6ef, 0x0, 0x1);
        gbc.writeMem(0xd1f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x97eb);
        EXPECT(gbc.pc(), 0xd21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01A6
        gbc.setState(0x84d4, 0xa78b, 0xf3d0, 0x1adb, 0x4f9f, 0x2919, 0x1, 0x0);
        gbc.writeMem(0x84d4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa78b);
        EXPECT(gbc.pc(), 0x84d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d4), 0xcb);
        EXPECT(gbc.readMem(0x84d5), 0xa8);
        // CB A8 01A7
        gbc.setState(0x6070, 0xf74d, 0x2380, 0xdd02, 0x3f4a, 0xe703, 0x0, 0x0);
        gbc.writeMem(0x6070, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf74d);
        EXPECT(gbc.pc(), 0x6072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01A8
        gbc.setState(0xa2c0, 0x9ff0, 0xcf60, 0x19a8, 0xe302, 0xd58a, 0x1, 0x0);
        gbc.writeMem(0xa2c0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x9ff0);
        EXPECT(gbc.pc(), 0xa2c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c0), 0xcb);
        EXPECT(gbc.readMem(0xa2c1), 0xa8);
        // CB A8 01A9
        gbc.setState(0xe523, 0x5991, 0xd70, 0xb57e, 0x2b4b, 0x5d3e, 0x1, 0x1);
        gbc.writeMem(0xe523, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5991);
        EXPECT(gbc.pc(), 0xe525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe523), 0xcb);
        EXPECT(gbc.readMem(0xe524), 0xa8);
        // CB A8 01AA
        gbc.setState(0xc0b0, 0xd7c4, 0xba10, 0xd85c, 0xc1f8, 0x44c2, 0x0, 0x1);
        gbc.writeMem(0xc0b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd7c4);
        EXPECT(gbc.pc(), 0xc0b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0b0), 0xcb);
        EXPECT(gbc.readMem(0xc0b1), 0xa8);
        // CB A8 01AB
        gbc.setState(0x9d3b, 0x8338, 0xe3b0, 0xad41, 0x6ccb, 0x82ea, 0x1, 0x1);
        gbc.writeMem(0x9d3b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8338);
        EXPECT(gbc.pc(), 0x9d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d3b), 0xcb);
        EXPECT(gbc.readMem(0x9d3c), 0xa8);
        // CB A8 01AC
        gbc.setState(0x4b4d, 0xfd66, 0xf040, 0x6eb0, 0xffa3, 0xe03c, 0x0, 0x0);
        gbc.writeMem(0x4b4d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfd66);
        EXPECT(gbc.pc(), 0x4b4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01AD
        gbc.setState(0x140a, 0x5411, 0x57c0, 0xae8a, 0x59ef, 0x9049, 0x0, 0x1);
        gbc.writeMem(0x140a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5411);
        EXPECT(gbc.pc(), 0x140c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01AE
        gbc.setState(0x6aab, 0x1263, 0x4b40, 0xf7b2, 0x1685, 0xa3e3, 0x1, 0x0);
        gbc.writeMem(0x6aab, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1263);
        EXPECT(gbc.pc(), 0x6aad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01AF
        gbc.setState(0xab4d, 0x2ebc, 0x6890, 0xc83b, 0x9696, 0x81eb, 0x1, 0x1);
        gbc.writeMem(0xab4d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2ebc);
        EXPECT(gbc.pc(), 0xab4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab4d), 0xcb);
        EXPECT(gbc.readMem(0xab4e), 0xa8);
        // CB A8 01B0
        gbc.setState(0xd18b, 0xda17, 0x3440, 0x5c52, 0x3de7, 0xd8b8, 0x0, 0x0);
        gbc.writeMem(0xd18b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xda17);
        EXPECT(gbc.pc(), 0xd18d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd18b), 0xcb);
        EXPECT(gbc.readMem(0xd18c), 0xa8);
        // CB A8 01B2
        gbc.setState(0xa8be, 0xdd3a, 0xf990, 0xb268, 0xcf76, 0xddd6, 0x0, 0x1);
        gbc.writeMem(0xa8be, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xdd3a);
        EXPECT(gbc.pc(), 0xa8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8be), 0xcb);
        EXPECT(gbc.readMem(0xa8bf), 0xa8);
        // CB A8 01B3
        gbc.setState(0x540c, 0x2999, 0xcac0, 0x410e, 0x414a, 0x34a0, 0x0, 0x1);
        gbc.writeMem(0x540c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2999);
        EXPECT(gbc.pc(), 0x540e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01B4
        gbc.setState(0xdd38, 0xa9a1, 0x95f0, 0x7c36, 0x7041, 0xe18a, 0x0, 0x0);
        gbc.writeMem(0xdd38, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa9a1);
        EXPECT(gbc.pc(), 0xdd3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd38), 0xcb);
        EXPECT(gbc.readMem(0xdd39), 0xa8);
        // CB A8 01B5
        gbc.setState(0x7213, 0xa18c, 0x5bc0, 0x519d, 0x9937, 0xf357, 0x1, 0x0);
        gbc.writeMem(0x7213, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa18c);
        EXPECT(gbc.pc(), 0x7215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01B6
        gbc.setState(0x236c, 0x731f, 0x3ad0, 0x6593, 0x3c67, 0x6fc, 0x0, 0x0);
        gbc.writeMem(0x236c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x731f);
        EXPECT(gbc.pc(), 0x236e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01B7
        gbc.setState(0xab62, 0x2db, 0x9900, 0xe42a, 0x5725, 0xc41d, 0x1, 0x0);
        gbc.writeMem(0xab62, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2db);
        EXPECT(gbc.pc(), 0xab64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab62), 0xcb);
        EXPECT(gbc.readMem(0xab63), 0xa8);
        // CB A8 01B8
        gbc.setState(0x10aa, 0x565c, 0xc620, 0xd3c5, 0x2dd9, 0xffbd, 0x1, 0x0);
        gbc.writeMem(0x10aa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x565c);
        EXPECT(gbc.pc(), 0x10ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01B9
        gbc.setState(0xdf44, 0xf3cf, 0xf780, 0xee73, 0x6ad6, 0x8890, 0x0, 0x0);
        gbc.writeMem(0xdf44, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf3cf);
        EXPECT(gbc.pc(), 0xdf46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf44), 0xcb);
        EXPECT(gbc.readMem(0xdf45), 0xa8);
        // CB A8 01BA
        gbc.setState(0x433f, 0x8b9b, 0x1300, 0xbb52, 0xc42e, 0xb274, 0x0, 0x0);
        gbc.writeMem(0x433f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8b9b);
        EXPECT(gbc.pc(), 0x4341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01BB
        gbc.setState(0x6262, 0xcffc, 0x44e0, 0x38bb, 0xab82, 0xd546, 0x0, 0x0);
        gbc.writeMem(0x6262, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xcffc);
        EXPECT(gbc.pc(), 0x6264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01BC
        gbc.setState(0x8e21, 0x2829, 0x46b0, 0x3006, 0xe61c, 0x5a06, 0x1, 0x1);
        gbc.writeMem(0x8e21, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2829);
        EXPECT(gbc.pc(), 0x8e23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e21), 0xcb);
        EXPECT(gbc.readMem(0x8e22), 0xa8);
        // CB A8 01BD
        gbc.setState(0x8542, 0xd72a, 0x7ad0, 0xca, 0xf3ef, 0x50b8, 0x1, 0x1);
        gbc.writeMem(0x8542, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd72a);
        EXPECT(gbc.pc(), 0x8544);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8542), 0xcb);
        EXPECT(gbc.readMem(0x8543), 0xa8);
        // CB A8 01BE
        gbc.setState(0x4d22, 0x99fe, 0xbbd0, 0xf71a, 0x3904, 0xb903, 0x1, 0x1);
        gbc.writeMem(0x4d22, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x99fe);
        EXPECT(gbc.pc(), 0x4d24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01BF
        gbc.setState(0xe202, 0xfb67, 0x5090, 0xbd36, 0x1de0, 0x7f9c, 0x1, 0x1);
        gbc.writeMem(0xe202, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfb67);
        EXPECT(gbc.pc(), 0xe204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe202), 0xcb);
        EXPECT(gbc.readMem(0xe203), 0xa8);
        // CB A8 01C0
        gbc.setState(0x566c, 0x3e89, 0x1d40, 0xb613, 0x129d, 0xe323, 0x1, 0x0);
        gbc.writeMem(0x566c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3e89);
        EXPECT(gbc.pc(), 0x566e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01C1
        gbc.setState(0xa08d, 0x2cd8, 0xa800, 0xcfe0, 0xc8c3, 0x331c, 0x0, 0x0);
        gbc.writeMem(0xa08d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2cd8);
        EXPECT(gbc.pc(), 0xa08f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08d), 0xcb);
        EXPECT(gbc.readMem(0xa08e), 0xa8);
        // CB A8 01C2
        gbc.setState(0x81a6, 0x9d43, 0xe1b0, 0x1342, 0x3cde, 0xe2b6, 0x0, 0x0);
        gbc.writeMem(0x81a6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9d43);
        EXPECT(gbc.pc(), 0x81a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81a6), 0xcb);
        EXPECT(gbc.readMem(0x81a7), 0xa8);
        // CB A8 01C3
        gbc.setState(0xabfd, 0x7a13, 0xfdc0, 0x8ace, 0xd3e4, 0xc556, 0x0, 0x1);
        gbc.writeMem(0xabfd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7a13);
        EXPECT(gbc.pc(), 0xabff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfd), 0xcb);
        EXPECT(gbc.readMem(0xabfe), 0xa8);
        // CB A8 01C4
        gbc.setState(0xdb8f, 0x642e, 0x3250, 0x1df9, 0x326, 0xa705, 0x1, 0x1);
        gbc.writeMem(0xdb8f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x642e);
        EXPECT(gbc.pc(), 0xdb91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb8f), 0xcb);
        EXPECT(gbc.readMem(0xdb90), 0xa8);
        // CB A8 01C5
        gbc.setState(0x4934, 0xea55, 0x5d00, 0xc43b, 0x6b58, 0xe99c, 0x1, 0x0);
        gbc.writeMem(0x4934, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xea55);
        EXPECT(gbc.pc(), 0x4936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01C6
        gbc.setState(0xe295, 0x2149, 0xe8f0, 0x914, 0xe9ef, 0x4d25, 0x1, 0x0);
        gbc.writeMem(0xe295, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2149);
        EXPECT(gbc.pc(), 0xe297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe295), 0xcb);
        EXPECT(gbc.readMem(0xe296), 0xa8);
        // CB A8 01C7
        gbc.setState(0x6847, 0x6219, 0xcb70, 0x99ce, 0x6f08, 0x93f4, 0x0, 0x0);
        gbc.writeMem(0x6847, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6219);
        EXPECT(gbc.pc(), 0x6849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01C8
        gbc.setState(0xa82c, 0x7229, 0x6ec0, 0x4d66, 0x8ced, 0xe02d, 0x1, 0x0);
        gbc.writeMem(0xa82c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x7229);
        EXPECT(gbc.pc(), 0xa82e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82c), 0xcb);
        EXPECT(gbc.readMem(0xa82d), 0xa8);
        // CB A8 01C9
        gbc.setState(0xca7, 0x3639, 0xe950, 0xde69, 0xdea0, 0xc821, 0x0, 0x0);
        gbc.writeMem(0xca7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3639);
        EXPECT(gbc.pc(), 0xca9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01CA
        gbc.setState(0x5fa, 0xc8b5, 0x3520, 0xdfc5, 0xe57a, 0x2392, 0x0, 0x0);
        gbc.writeMem(0x5fa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc8b5);
        EXPECT(gbc.pc(), 0x5fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01CB
        gbc.setState(0x24a3, 0xbf5d, 0x5b40, 0x9224, 0x4f5, 0xfab8, 0x1, 0x1);
        gbc.writeMem(0x24a3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbf5d);
        EXPECT(gbc.pc(), 0x24a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01CC
        gbc.setState(0x64d5, 0x6bb4, 0xb70, 0xefd8, 0x1f86, 0x3523, 0x0, 0x1);
        gbc.writeMem(0x64d5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x6bb4);
        EXPECT(gbc.pc(), 0x64d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01CD
        gbc.setState(0x5d8e, 0x50c7, 0x4a00, 0x5e3b, 0xc669, 0x3aa6, 0x1, 0x0);
        gbc.writeMem(0x5d8e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x50c7);
        EXPECT(gbc.pc(), 0x5d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01CE
        gbc.setState(0x970d, 0x87c7, 0x35c0, 0xb2a4, 0x397e, 0x9c06, 0x1, 0x0);
        gbc.writeMem(0x970d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x87c7);
        EXPECT(gbc.pc(), 0x970f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x970d), 0xcb);
        EXPECT(gbc.readMem(0x970e), 0xa8);
        // CB A8 01CF
        gbc.setState(0x2c72, 0x7011, 0xdb40, 0x3695, 0xad62, 0xfa3b, 0x1, 0x0);
        gbc.writeMem(0x2c72, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x7011);
        EXPECT(gbc.pc(), 0x2c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01D0
        gbc.setState(0x1e7b, 0x6ef6, 0xe190, 0x1c04, 0x4f84, 0x36ac, 0x0, 0x0);
        gbc.writeMem(0x1e7b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6ef6);
        EXPECT(gbc.pc(), 0x1e7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01D1
        gbc.setState(0x69f7, 0x2f74, 0xa040, 0x5a1a, 0xcbc5, 0x762f, 0x0, 0x0);
        gbc.writeMem(0x69f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2f74);
        EXPECT(gbc.pc(), 0x69f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01D2
        gbc.setState(0x4247, 0x9d54, 0xbdd0, 0x922d, 0x9681, 0x13da, 0x0, 0x0);
        gbc.writeMem(0x4247, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9d54);
        EXPECT(gbc.pc(), 0x4249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01D3
        gbc.setState(0x6859, 0xe3b0, 0x8840, 0x8cba, 0x77fb, 0x4eff, 0x0, 0x1);
        gbc.writeMem(0x6859, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe3b0);
        EXPECT(gbc.pc(), 0x685b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01D4
        gbc.setState(0xe29c, 0xad7d, 0x2360, 0x95ff, 0x5f9d, 0xa612, 0x1, 0x0);
        gbc.writeMem(0xe29c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xad7d);
        EXPECT(gbc.pc(), 0xe29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe29c), 0xcb);
        EXPECT(gbc.readMem(0xe29d), 0xa8);
        // CB A8 01D5
        gbc.setState(0xc4fa, 0x76c6, 0x14d0, 0x1bf3, 0x1bed, 0xd00f, 0x1, 0x1);
        gbc.writeMem(0xc4fa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x76c6);
        EXPECT(gbc.pc(), 0xc4fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4fa), 0xcb);
        EXPECT(gbc.readMem(0xc4fb), 0xa8);
        // CB A8 01D6
        gbc.setState(0xb6f0, 0xd6f1, 0xe440, 0x12ca, 0xb792, 0xdbdd, 0x0, 0x0);
        gbc.writeMem(0xb6f0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd6f1);
        EXPECT(gbc.pc(), 0xb6f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6f0), 0xcb);
        EXPECT(gbc.readMem(0xb6f1), 0xa8);
        // CB A8 01D7
        gbc.setState(0x25fa, 0xe27b, 0xe720, 0x5ae9, 0xa889, 0x54bd, 0x0, 0x0);
        gbc.writeMem(0x25fa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe27b);
        EXPECT(gbc.pc(), 0x25fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01D8
        gbc.setState(0xb1bf, 0x69f3, 0x5040, 0xdded, 0xc3f0, 0x47c, 0x0, 0x1);
        gbc.writeMem(0xb1bf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x69f3);
        EXPECT(gbc.pc(), 0xb1c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1bf), 0xcb);
        EXPECT(gbc.readMem(0xb1c0), 0xa8);
        // CB A8 01D9
        gbc.setState(0xf1b, 0x952b, 0xd7c0, 0xea1e, 0x977e, 0x5034, 0x0, 0x0);
        gbc.writeMem(0xf1b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x952b);
        EXPECT(gbc.pc(), 0xf1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01DA
        gbc.setState(0x116f, 0x124c, 0xe490, 0x93e6, 0xf558, 0x7eb6, 0x1, 0x0);
        gbc.writeMem(0x116f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x124c);
        EXPECT(gbc.pc(), 0x1171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01DB
        gbc.setState(0xd8d2, 0x943f, 0x6dd0, 0x4807, 0xdafc, 0x4c4e, 0x1, 0x1);
        gbc.writeMem(0xd8d2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x943f);
        EXPECT(gbc.pc(), 0xd8d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8d2), 0xcb);
        EXPECT(gbc.readMem(0xd8d3), 0xa8);
        // CB A8 01DC
        gbc.setState(0x2a0f, 0x9e3c, 0x9640, 0xf5a8, 0xd916, 0x52e0, 0x0, 0x0);
        gbc.writeMem(0x2a0f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9e3c);
        EXPECT(gbc.pc(), 0x2a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01DD
        gbc.setState(0x8ae, 0x1d5c, 0x7e40, 0x3c06, 0x2cef, 0x5f74, 0x0, 0x1);
        gbc.writeMem(0x8ae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1d5c);
        EXPECT(gbc.pc(), 0x8b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01DE
        gbc.setState(0x5024, 0xec56, 0xeda0, 0xd77c, 0xe297, 0x1c92, 0x0, 0x1);
        gbc.writeMem(0x5024, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xec56);
        EXPECT(gbc.pc(), 0x5026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01DF
        gbc.setState(0x11ef, 0xfc93, 0x83a0, 0x176, 0xebdb, 0x4e92, 0x1, 0x0);
        gbc.writeMem(0x11ef, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfc93);
        EXPECT(gbc.pc(), 0x11f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01E0
        gbc.setState(0xb301, 0x3e30, 0x7220, 0x90fb, 0x6ef3, 0xeb39, 0x1, 0x1);
        gbc.writeMem(0xb301, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3e30);
        EXPECT(gbc.pc(), 0xb303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb301), 0xcb);
        EXPECT(gbc.readMem(0xb302), 0xa8);
        // CB A8 01E1
        gbc.setState(0xc266, 0x8986, 0x88d0, 0x5c26, 0xd67d, 0x361a, 0x1, 0x1);
        gbc.writeMem(0xc266, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x8986);
        EXPECT(gbc.pc(), 0xc268);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc266), 0xcb);
        EXPECT(gbc.readMem(0xc267), 0xa8);
        // CB A8 01E2
        gbc.setState(0x273, 0x9ff1, 0xb3c0, 0xa26c, 0x3b30, 0xd56f, 0x0, 0x1);
        gbc.writeMem(0x273, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9ff1);
        EXPECT(gbc.pc(), 0x275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01E3
        gbc.setState(0x8dc0, 0x1678, 0x9d90, 0xc0ae, 0x3005, 0x2618, 0x1, 0x1);
        gbc.writeMem(0x8dc0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1678);
        EXPECT(gbc.pc(), 0x8dc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc0), 0xcb);
        EXPECT(gbc.readMem(0x8dc1), 0xa8);
        // CB A8 01E4
        gbc.setState(0xe388, 0xa71d, 0x9890, 0xe257, 0x2fe7, 0x1d3c, 0x1, 0x1);
        gbc.writeMem(0xe388, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa71d);
        EXPECT(gbc.pc(), 0xe38a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe388), 0xcb);
        EXPECT(gbc.readMem(0xe389), 0xa8);
        // CB A8 01E5
        gbc.setState(0x9163, 0xc750, 0xc080, 0x87a0, 0x6194, 0xe984, 0x0, 0x0);
        gbc.writeMem(0x9163, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc750);
        EXPECT(gbc.pc(), 0x9165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9163), 0xcb);
        EXPECT(gbc.readMem(0x9164), 0xa8);
        // CB A8 01E6
        gbc.setState(0x2aef, 0x882f, 0x710, 0xa4f1, 0xdfad, 0x66d4, 0x0, 0x1);
        gbc.writeMem(0x2aef, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x882f);
        EXPECT(gbc.pc(), 0x2af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01E7
        gbc.setState(0x2441, 0x611a, 0x63f0, 0x69f, 0xa66e, 0x2be9, 0x1, 0x0);
        gbc.writeMem(0x2441, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x611a);
        EXPECT(gbc.pc(), 0x2443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01E8
        gbc.setState(0xc4ae, 0x3fae, 0x6d30, 0x30c7, 0x243d, 0xf837, 0x0, 0x1);
        gbc.writeMem(0xc4ae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3fae);
        EXPECT(gbc.pc(), 0xc4b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ae), 0xcb);
        EXPECT(gbc.readMem(0xc4af), 0xa8);
        // CB A8 01E9
        gbc.setState(0x3a2, 0x9b94, 0xd9e0, 0xdaae, 0x637d, 0xbf3a, 0x0, 0x0);
        gbc.writeMem(0x3a2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9b94);
        EXPECT(gbc.pc(), 0x3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01EA
        gbc.setState(0x9970, 0x7d4d, 0x4880, 0x4ea6, 0x4b08, 0x5aa, 0x1, 0x1);
        gbc.writeMem(0x9970, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7d4d);
        EXPECT(gbc.pc(), 0x9972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9970), 0xcb);
        EXPECT(gbc.readMem(0x9971), 0xa8);
        // CB A8 01EB
        gbc.setState(0x40ca, 0x6629, 0xe20, 0x515b, 0xc925, 0xe65b, 0x1, 0x0);
        gbc.writeMem(0x40ca, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6629);
        EXPECT(gbc.pc(), 0x40cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01EC
        gbc.setState(0x9799, 0x3671, 0x4730, 0xe587, 0x1b, 0xb142, 0x0, 0x1);
        gbc.writeMem(0x9799, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3671);
        EXPECT(gbc.pc(), 0x979b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9799), 0xcb);
        EXPECT(gbc.readMem(0x979a), 0xa8);
        // CB A8 01ED
        gbc.setState(0x7a6, 0xe75, 0x6ea0, 0xa7e8, 0x158, 0xca43, 0x1, 0x0);
        gbc.writeMem(0x7a6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe75);
        EXPECT(gbc.pc(), 0x7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01EE
        gbc.setState(0x2598, 0xdfe, 0x5860, 0xb5d7, 0xc549, 0x3495, 0x1, 0x0);
        gbc.writeMem(0x2598, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xdfe);
        EXPECT(gbc.pc(), 0x259a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01F1
        gbc.setState(0xa608, 0x22b5, 0x99c0, 0xa6f4, 0x6a16, 0xe269, 0x0, 0x0);
        gbc.writeMem(0xa608, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x22b5);
        EXPECT(gbc.pc(), 0xa60a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa608), 0xcb);
        EXPECT(gbc.readMem(0xa609), 0xa8);
        // CB A8 01F2
        gbc.setState(0xcf3f, 0xd917, 0xc920, 0x8a68, 0xb844, 0x18e, 0x1, 0x1);
        gbc.writeMem(0xcf3f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd917);
        EXPECT(gbc.pc(), 0xcf41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3f), 0xcb);
        EXPECT(gbc.readMem(0xcf40), 0xa8);
        // CB A8 01F3
        gbc.setState(0xe9b6, 0xbfa4, 0x7880, 0xc112, 0xfb50, 0xc6bb, 0x1, 0x1);
        gbc.writeMem(0xe9b6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xbfa4);
        EXPECT(gbc.pc(), 0xe9b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9b6), 0xcb);
        EXPECT(gbc.readMem(0xe9b7), 0xa8);
        // CB A8 01F4
        gbc.setState(0x8814, 0x2625, 0xc830, 0x1c2, 0x1d86, 0x7450, 0x0, 0x0);
        gbc.writeMem(0x8814, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2625);
        EXPECT(gbc.pc(), 0x8816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8814), 0xcb);
        EXPECT(gbc.readMem(0x8815), 0xa8);
        // CB A8 01F5
        gbc.setState(0x89bd, 0x2d5a, 0xd360, 0x464, 0x1fb5, 0x8d5d, 0x1, 0x1);
        gbc.writeMem(0x89bd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2d5a);
        EXPECT(gbc.pc(), 0x89bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89bd), 0xcb);
        EXPECT(gbc.readMem(0x89be), 0xa8);
        // CB A8 01F6
        gbc.setState(0x6b50, 0xbd00, 0x95a0, 0xa9e7, 0xaa6b, 0x33d9, 0x0, 0x1);
        gbc.writeMem(0x6b50, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xbd00);
        EXPECT(gbc.pc(), 0x6b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01F7
        gbc.setState(0xaa82, 0xbd7, 0x940, 0x4686, 0x6b34, 0xd6de, 0x0, 0x0);
        gbc.writeMem(0xaa82, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbd7);
        EXPECT(gbc.pc(), 0xaa84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa82), 0xcb);
        EXPECT(gbc.readMem(0xaa83), 0xa8);
        // CB A8 01F8
        gbc.setState(0x51c3, 0x3786, 0x68a0, 0x5c16, 0x481d, 0xe74a, 0x1, 0x0);
        gbc.writeMem(0x51c3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x3786);
        EXPECT(gbc.pc(), 0x51c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01F9
        gbc.setState(0x1110, 0x69a5, 0x3200, 0x10d6, 0x873b, 0x6162, 0x0, 0x1);
        gbc.writeMem(0x1110, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x69a5);
        EXPECT(gbc.pc(), 0x1112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01FA
        gbc.setState(0x7a0, 0x244c, 0xba20, 0x5f9d, 0x4e42, 0x7efd, 0x0, 0x0);
        gbc.writeMem(0x7a0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x244c);
        EXPECT(gbc.pc(), 0x7a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01FB
        gbc.setState(0xdcf, 0x7aa5, 0xf980, 0x62d2, 0xedb9, 0x20b2, 0x0, 0x1);
        gbc.writeMem(0xdcf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0xdd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01FC
        gbc.setState(0x6965, 0xd480, 0x3e50, 0x46b5, 0x386d, 0x71d3, 0x1, 0x0);
        gbc.writeMem(0x6965, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd480);
        EXPECT(gbc.pc(), 0x6967);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 01FD
        gbc.setState(0x7879, 0x549b, 0x7d00, 0x502f, 0x6ae1, 0x8209, 0x0, 0x0);
        gbc.writeMem(0x7879, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x549b);
        EXPECT(gbc.pc(), 0x787b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 01FE
        gbc.setState(0xedb0, 0xa314, 0x62d0, 0x7a27, 0x2d27, 0x9b8, 0x1, 0x1);
        gbc.writeMem(0xedb0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa314);
        EXPECT(gbc.pc(), 0xedb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb0), 0xcb);
        EXPECT(gbc.readMem(0xedb1), 0xa8);
        // CB A8 01FF
        gbc.setState(0x38f4, 0x751, 0xe5d0, 0x35b4, 0xd955, 0x6ec2, 0x0, 0x0);
        gbc.writeMem(0x38f4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x751);
        EXPECT(gbc.pc(), 0x38f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0200
        gbc.setState(0x6b02, 0x6cb6, 0xe650, 0x23b7, 0xcbb4, 0x42bd, 0x1, 0x0);
        gbc.writeMem(0x6b02, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6cb6);
        EXPECT(gbc.pc(), 0x6b04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0201
        gbc.setState(0x3e1b, 0xf198, 0xe000, 0xf905, 0x4afc, 0x4938, 0x1, 0x0);
        gbc.writeMem(0x3e1b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xf198);
        EXPECT(gbc.pc(), 0x3e1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0202
        gbc.setState(0x3c4a, 0x9f9f, 0xf570, 0x2c9a, 0x1eb0, 0xae89, 0x0, 0x1);
        gbc.writeMem(0x3c4a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9f9f);
        EXPECT(gbc.pc(), 0x3c4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0203
        gbc.setState(0x1e6e, 0x9c8c, 0x8a0, 0x45b0, 0xfb3e, 0x5283, 0x0, 0x1);
        gbc.writeMem(0x1e6e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9c8c);
        EXPECT(gbc.pc(), 0x1e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0204
        gbc.setState(0x4a45, 0x44d1, 0xdb40, 0x3044, 0xc175, 0xb83, 0x1, 0x0);
        gbc.writeMem(0x4a45, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x44d1);
        EXPECT(gbc.pc(), 0x4a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0205
        gbc.setState(0x55bd, 0x1477, 0x9e20, 0xa7fb, 0x648a, 0x8e0c, 0x1, 0x1);
        gbc.writeMem(0x55bd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1477);
        EXPECT(gbc.pc(), 0x55bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0206
        gbc.setState(0x51f4, 0x2ea9, 0x5600, 0x714, 0xce9c, 0x4a8c, 0x0, 0x0);
        gbc.writeMem(0x51f4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2ea9);
        EXPECT(gbc.pc(), 0x51f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0207
        gbc.setState(0xc5f7, 0x64a1, 0xb050, 0x4788, 0x8f4b, 0xe686, 0x1, 0x1);
        gbc.writeMem(0xc5f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x64a1);
        EXPECT(gbc.pc(), 0xc5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5f7), 0xcb);
        EXPECT(gbc.readMem(0xc5f8), 0xa8);
        // CB A8 0208
        gbc.setState(0xf7f, 0x73d3, 0x7c30, 0x5f72, 0xe24d, 0x9f9, 0x0, 0x1);
        gbc.writeMem(0xf7f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x73d3);
        EXPECT(gbc.pc(), 0xf81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0209
        gbc.setState(0x17a8, 0x1461, 0xe4e0, 0x412a, 0x7b45, 0x9475, 0x1, 0x0);
        gbc.writeMem(0x17a8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1461);
        EXPECT(gbc.pc(), 0x17aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 020A
        gbc.setState(0xc90d, 0xf698, 0x2ff0, 0x430, 0x4e31, 0x6913, 0x0, 0x1);
        gbc.writeMem(0xc90d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xf698);
        EXPECT(gbc.pc(), 0xc90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90d), 0xcb);
        EXPECT(gbc.readMem(0xc90e), 0xa8);
        // CB A8 020B
        gbc.setState(0xda6, 0x3a5, 0xc740, 0xcd6, 0xf34f, 0xbf1, 0x0, 0x0);
        gbc.writeMem(0xda6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3a5);
        EXPECT(gbc.pc(), 0xda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 020C
        gbc.setState(0xbb4f, 0xc213, 0x27a0, 0x262d, 0x7562, 0xef4a, 0x1, 0x0);
        gbc.writeMem(0xbb4f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc213);
        EXPECT(gbc.pc(), 0xbb51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4f), 0xcb);
        EXPECT(gbc.readMem(0xbb50), 0xa8);
        // CB A8 020D
        gbc.setState(0xae9e, 0x212a, 0x2c20, 0x179b, 0xcc34, 0x9b17, 0x1, 0x0);
        gbc.writeMem(0xae9e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x212a);
        EXPECT(gbc.pc(), 0xaea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9e), 0xcb);
        EXPECT(gbc.readMem(0xae9f), 0xa8);
        // CB A8 020E
        gbc.setState(0x121c, 0xc0c9, 0xcb20, 0x5b7d, 0xd616, 0x50d5, 0x1, 0x1);
        gbc.writeMem(0x121c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc0c9);
        EXPECT(gbc.pc(), 0x121e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 020F
        gbc.setState(0x4fee, 0xd30b, 0xa2a0, 0x2f2, 0x4174, 0x398f, 0x0, 0x0);
        gbc.writeMem(0x4fee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd30b);
        EXPECT(gbc.pc(), 0x4ff0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0210
        gbc.setState(0x846a, 0x3ca, 0xe0c0, 0x4491, 0x228e, 0x9ce0, 0x0, 0x0);
        gbc.writeMem(0x846a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3ca);
        EXPECT(gbc.pc(), 0x846c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x846a), 0xcb);
        EXPECT(gbc.readMem(0x846b), 0xa8);
        // CB A8 0212
        gbc.setState(0x6349, 0xaa0e, 0x7a80, 0xd21c, 0xead0, 0xa4bc, 0x1, 0x0);
        gbc.writeMem(0x6349, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xaa0e);
        EXPECT(gbc.pc(), 0x634b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0213
        gbc.setState(0x242a, 0x650c, 0xf890, 0x79da, 0xfdbe, 0x3e72, 0x0, 0x0);
        gbc.writeMem(0x242a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x650c);
        EXPECT(gbc.pc(), 0x242c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0214
        gbc.setState(0xe4db, 0x29d4, 0x5950, 0x6a51, 0x9eff, 0x56ef, 0x1, 0x0);
        gbc.writeMem(0xe4db, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x29d4);
        EXPECT(gbc.pc(), 0xe4dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4db), 0xcb);
        EXPECT(gbc.readMem(0xe4dc), 0xa8);
        // CB A8 0215
        gbc.setState(0x33dd, 0x7fd8, 0xb0c0, 0x4fa2, 0xe55c, 0x200b, 0x0, 0x0);
        gbc.writeMem(0x33dd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7fd8);
        EXPECT(gbc.pc(), 0x33df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0216
        gbc.setState(0xd541, 0x93f, 0x4690, 0xec50, 0x24cd, 0xd8e9, 0x1, 0x0);
        gbc.writeMem(0xd541, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x93f);
        EXPECT(gbc.pc(), 0xd543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd541), 0xcb);
        EXPECT(gbc.readMem(0xd542), 0xa8);
        // CB A8 0217
        gbc.setState(0x990d, 0x29b1, 0x1770, 0x7293, 0x951b, 0xe1d8, 0x0, 0x1);
        gbc.writeMem(0x990d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x29b1);
        EXPECT(gbc.pc(), 0x990f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x990d), 0xcb);
        EXPECT(gbc.readMem(0x990e), 0xa8);
        // CB A8 0218
        gbc.setState(0x76cc, 0xfefe, 0x3fa0, 0xba64, 0xf695, 0x5b8b, 0x0, 0x1);
        gbc.writeMem(0x76cc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xfefe);
        EXPECT(gbc.pc(), 0x76ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0219
        gbc.setState(0x2398, 0xc0e, 0xb0c0, 0x3aa2, 0x81af, 0x87a4, 0x1, 0x0);
        gbc.writeMem(0x2398, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc0e);
        EXPECT(gbc.pc(), 0x239a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 021A
        gbc.setState(0x6936, 0x4a74, 0x19f0, 0x3f36, 0xdbb4, 0x68be, 0x0, 0x0);
        gbc.writeMem(0x6936, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4a74);
        EXPECT(gbc.pc(), 0x6938);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 021B
        gbc.setState(0x7ed9, 0x4e1, 0x5fc0, 0x21d5, 0x2cae, 0xacc1, 0x0, 0x1);
        gbc.writeMem(0x7ed9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4e1);
        EXPECT(gbc.pc(), 0x7edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 021C
        gbc.setState(0x694, 0xd79b, 0xa7d0, 0xbd19, 0x653a, 0x61e0, 0x0, 0x1);
        gbc.writeMem(0x694, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd79b);
        EXPECT(gbc.pc(), 0x696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 021D
        gbc.setState(0x8728, 0xe0d9, 0x66a0, 0xba19, 0xb246, 0xdd45, 0x1, 0x0);
        gbc.writeMem(0x8728, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe0d9);
        EXPECT(gbc.pc(), 0x872a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8728), 0xcb);
        EXPECT(gbc.readMem(0x8729), 0xa8);
        // CB A8 021F
        gbc.setState(0x9468, 0xddec, 0x300, 0x2f48, 0x219d, 0x5ae7, 0x0, 0x1);
        gbc.writeMem(0x9468, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xddec);
        EXPECT(gbc.pc(), 0x946a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9468), 0xcb);
        EXPECT(gbc.readMem(0x9469), 0xa8);
        // CB A8 0220
        gbc.setState(0xef96, 0x9573, 0xacf0, 0x6f36, 0xc196, 0x2d5a, 0x1, 0x0);
        gbc.writeMem(0xef96, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9573);
        EXPECT(gbc.pc(), 0xef98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef96), 0xcb);
        EXPECT(gbc.readMem(0xef97), 0xa8);
        // CB A8 0221
        gbc.setState(0x71ef, 0x97cb, 0x37c0, 0x8246, 0x5de9, 0xc57d, 0x0, 0x0);
        gbc.writeMem(0x71ef, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x97cb);
        EXPECT(gbc.pc(), 0x71f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0222
        gbc.setState(0x3eb8, 0xe505, 0x7490, 0xe85d, 0x9de8, 0x56c4, 0x1, 0x1);
        gbc.writeMem(0x3eb8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xe505);
        EXPECT(gbc.pc(), 0x3eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0223
        gbc.setState(0x2ee6, 0xb873, 0xfca0, 0xc6a7, 0xd426, 0x43e6, 0x1, 0x0);
        gbc.writeMem(0x2ee6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb873);
        EXPECT(gbc.pc(), 0x2ee8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0224
        gbc.setState(0x6451, 0x16b7, 0x8ee0, 0x1bdf, 0xa6b2, 0x155b, 0x0, 0x0);
        gbc.writeMem(0x6451, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x16b7);
        EXPECT(gbc.pc(), 0x6453);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0225
        gbc.setState(0xc8a4, 0x73cc, 0xced0, 0x98aa, 0x8521, 0x2c7a, 0x0, 0x0);
        gbc.writeMem(0xc8a4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x73cc);
        EXPECT(gbc.pc(), 0xc8a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8a4), 0xcb);
        EXPECT(gbc.readMem(0xc8a5), 0xa8);
        // CB A8 0226
        gbc.setState(0x4fcc, 0x38b7, 0x3cc0, 0x6c72, 0xe020, 0x2912, 0x0, 0x1);
        gbc.writeMem(0x4fcc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x38b7);
        EXPECT(gbc.pc(), 0x4fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0227
        gbc.setState(0x6403, 0x8b4f, 0xd550, 0xec8b, 0x403b, 0x2b6, 0x0, 0x1);
        gbc.writeMem(0x6403, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8b4f);
        EXPECT(gbc.pc(), 0x6405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0228
        gbc.setState(0x244a, 0x766d, 0x16d0, 0x2110, 0x1bf0, 0x38b4, 0x0, 0x0);
        gbc.writeMem(0x244a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x766d);
        EXPECT(gbc.pc(), 0x244c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0229
        gbc.setState(0x2313, 0xd056, 0x6790, 0x3da7, 0x63b1, 0xa16f, 0x0, 0x0);
        gbc.writeMem(0x2313, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd056);
        EXPECT(gbc.pc(), 0x2315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 022A
        gbc.setState(0x775d, 0xcb26, 0x76e0, 0xfc69, 0x3cc6, 0x5287, 0x1, 0x0);
        gbc.writeMem(0x775d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xcb26);
        EXPECT(gbc.pc(), 0x775f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 022B
        gbc.setState(0x461e, 0xafff, 0xb4a0, 0xa4f3, 0x69ec, 0xf89b, 0x0, 0x0);
        gbc.writeMem(0x461e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xafff);
        EXPECT(gbc.pc(), 0x4620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 022C
        gbc.setState(0xce98, 0x9033, 0xfe60, 0x278f, 0xabe9, 0x1efb, 0x1, 0x1);
        gbc.writeMem(0xce98, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9033);
        EXPECT(gbc.pc(), 0xce9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce98), 0xcb);
        EXPECT(gbc.readMem(0xce99), 0xa8);
        // CB A8 022D
        gbc.setState(0xd8b0, 0xd826, 0xbc70, 0xc8e2, 0x2523, 0x42da, 0x0, 0x0);
        gbc.writeMem(0xd8b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd826);
        EXPECT(gbc.pc(), 0xd8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8b0), 0xcb);
        EXPECT(gbc.readMem(0xd8b1), 0xa8);
        // CB A8 022E
        gbc.setState(0x24f3, 0x7109, 0x5e0, 0x10e8, 0xc0c6, 0x4aea, 0x0, 0x1);
        gbc.writeMem(0x24f3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7109);
        EXPECT(gbc.pc(), 0x24f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 022F
        gbc.setState(0x30e8, 0x454, 0x3720, 0x426b, 0x7442, 0x6dbf, 0x1, 0x1);
        gbc.writeMem(0x30e8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x454);
        EXPECT(gbc.pc(), 0x30ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0230
        gbc.setState(0xa66b, 0xaf77, 0x44a0, 0x5165, 0xb773, 0x81ed, 0x1, 0x0);
        gbc.writeMem(0xa66b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xaf77);
        EXPECT(gbc.pc(), 0xa66d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66b), 0xcb);
        EXPECT(gbc.readMem(0xa66c), 0xa8);
        // CB A8 0231
        gbc.setState(0x573, 0xb0ce, 0xc7c0, 0xfff, 0x195c, 0xe9cb, 0x1, 0x0);
        gbc.writeMem(0x573, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb0ce);
        EXPECT(gbc.pc(), 0x575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0232
        gbc.setState(0x4e08, 0x952f, 0x1e40, 0x5b72, 0xc6d8, 0x5d14, 0x0, 0x0);
        gbc.writeMem(0x4e08, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x952f);
        EXPECT(gbc.pc(), 0x4e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0233
        gbc.setState(0x51df, 0x26ad, 0xfe10, 0x5057, 0x7e93, 0xee96, 0x0, 0x0);
        gbc.writeMem(0x51df, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x26ad);
        EXPECT(gbc.pc(), 0x51e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0234
        gbc.setState(0x985e, 0xf6ff, 0x27b0, 0x38db, 0x1483, 0x40f7, 0x0, 0x0);
        gbc.writeMem(0x985e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf6ff);
        EXPECT(gbc.pc(), 0x9860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x985e), 0xcb);
        EXPECT(gbc.readMem(0x985f), 0xa8);
        // CB A8 0235
        gbc.setState(0x6788, 0x3ffc, 0x3490, 0xb2b3, 0xd238, 0xa4a0, 0x1, 0x1);
        gbc.writeMem(0x6788, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x3ffc);
        EXPECT(gbc.pc(), 0x678a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0236
        gbc.setState(0x5be, 0xcf32, 0xbcf0, 0xfa63, 0xb900, 0x6d6, 0x1, 0x0);
        gbc.writeMem(0x5be, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xcf32);
        EXPECT(gbc.pc(), 0x5c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0237
        gbc.setState(0xd126, 0x95f8, 0x6a10, 0x353e, 0x6d79, 0xc0d, 0x1, 0x0);
        gbc.writeMem(0xd126, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x95f8);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd126), 0xcb);
        EXPECT(gbc.readMem(0xd127), 0xa8);
        // CB A8 0238
        gbc.setState(0xea14, 0xa340, 0x36b0, 0xc7a3, 0xa807, 0xae30, 0x1, 0x1);
        gbc.writeMem(0xea14, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa340);
        EXPECT(gbc.pc(), 0xea16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea14), 0xcb);
        EXPECT(gbc.readMem(0xea15), 0xa8);
        // CB A8 0239
        gbc.setState(0x277d, 0x208d, 0x8380, 0xa210, 0x3c27, 0xed26, 0x1, 0x0);
        gbc.writeMem(0x277d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x208d);
        EXPECT(gbc.pc(), 0x277f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 023A
        gbc.setState(0x1c36, 0xb438, 0x5d80, 0x9fe5, 0x6a33, 0x1fd1, 0x1, 0x1);
        gbc.writeMem(0x1c36, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb438);
        EXPECT(gbc.pc(), 0x1c38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 023B
        gbc.setState(0xa7d5, 0x6d65, 0x4b40, 0x5314, 0x8b3f, 0x1fc9, 0x0, 0x1);
        gbc.writeMem(0xa7d5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6d65);
        EXPECT(gbc.pc(), 0xa7d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d5), 0xcb);
        EXPECT(gbc.readMem(0xa7d6), 0xa8);
        // CB A8 023C
        gbc.setState(0xcaf7, 0x58f7, 0x4780, 0x3561, 0x1be, 0xc680, 0x0, 0x1);
        gbc.writeMem(0xcaf7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x58f7);
        EXPECT(gbc.pc(), 0xcaf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaf7), 0xcb);
        EXPECT(gbc.readMem(0xcaf8), 0xa8);
        // CB A8 023D
        gbc.setState(0x643a, 0x1fad, 0x73b0, 0x9e77, 0x27b5, 0x9568, 0x0, 0x0);
        gbc.writeMem(0x643a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1fad);
        EXPECT(gbc.pc(), 0x643c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 023E
        gbc.setState(0x1f5a, 0x10f3, 0x43e0, 0xaa2e, 0x6987, 0xc1cc, 0x1, 0x0);
        gbc.writeMem(0x1f5a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x10f3);
        EXPECT(gbc.pc(), 0x1f5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 023F
        gbc.setState(0x8a4, 0xa22a, 0xb9b0, 0x40e7, 0xf6f2, 0xbca6, 0x0, 0x1);
        gbc.writeMem(0x8a4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa22a);
        EXPECT(gbc.pc(), 0x8a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0240
        gbc.setState(0xdfe0, 0x481f, 0x4cb0, 0x4e5b, 0x5eab, 0xaadc, 0x0, 0x1);
        gbc.writeMem(0xdfe0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x481f);
        EXPECT(gbc.pc(), 0xdfe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe0), 0xcb);
        EXPECT(gbc.readMem(0xdfe1), 0xa8);
        // CB A8 0241
        gbc.setState(0x65ee, 0xd47c, 0x57d0, 0xf351, 0x8a79, 0xec1c, 0x1, 0x1);
        gbc.writeMem(0x65ee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xd47c);
        EXPECT(gbc.pc(), 0x65f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0242
        gbc.setState(0xdff1, 0x25c5, 0x5210, 0x1333, 0xc597, 0x117a, 0x1, 0x1);
        gbc.writeMem(0xdff1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x25c5);
        EXPECT(gbc.pc(), 0xdff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdff1), 0xcb);
        EXPECT(gbc.readMem(0xdff2), 0xa8);
        // CB A8 0243
        gbc.setState(0x380e, 0xbf23, 0x3bc0, 0x3f8f, 0x651c, 0xbc87, 0x0, 0x0);
        gbc.writeMem(0x380e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbf23);
        EXPECT(gbc.pc(), 0x3810);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0244
        gbc.setState(0xbae5, 0x35a5, 0xf20, 0x5a60, 0xa781, 0x5e1e, 0x1, 0x1);
        gbc.writeMem(0xbae5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x35a5);
        EXPECT(gbc.pc(), 0xbae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae5), 0xcb);
        EXPECT(gbc.readMem(0xbae6), 0xa8);
        // CB A8 0245
        gbc.setState(0xcc77, 0x8cda, 0x8800, 0xf030, 0xeb67, 0x3df9, 0x1, 0x1);
        gbc.writeMem(0xcc77, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8cda);
        EXPECT(gbc.pc(), 0xcc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc77), 0xcb);
        EXPECT(gbc.readMem(0xcc78), 0xa8);
        // CB A8 0246
        gbc.setState(0xe078, 0x2386, 0x4230, 0xb3f, 0x95b8, 0x5b78, 0x0, 0x0);
        gbc.writeMem(0xe078, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2386);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe078), 0xcb);
        EXPECT(gbc.readMem(0xe079), 0xa8);
        // CB A8 0247
        gbc.setState(0xedfd, 0x9bfd, 0x7aa0, 0x8494, 0x1d6, 0x4e65, 0x0, 0x1);
        gbc.writeMem(0xedfd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9bfd);
        EXPECT(gbc.pc(), 0xedff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedfd), 0xcb);
        EXPECT(gbc.readMem(0xedfe), 0xa8);
        // CB A8 0248
        gbc.setState(0xa5b9, 0xebf5, 0x75a0, 0x3152, 0x599d, 0xa043, 0x1, 0x1);
        gbc.writeMem(0xa5b9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xebf5);
        EXPECT(gbc.pc(), 0xa5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b9), 0xcb);
        EXPECT(gbc.readMem(0xa5ba), 0xa8);
        // CB A8 0249
        gbc.setState(0xb302, 0x57db, 0xd4b0, 0xb821, 0x10c7, 0xd9c6, 0x0, 0x1);
        gbc.writeMem(0xb302, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x57db);
        EXPECT(gbc.pc(), 0xb304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb302), 0xcb);
        EXPECT(gbc.readMem(0xb303), 0xa8);
        // CB A8 024B
        gbc.setState(0xba03, 0x9ce, 0x4a60, 0x835b, 0x43e1, 0xe338, 0x0, 0x0);
        gbc.writeMem(0xba03, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9ce);
        EXPECT(gbc.pc(), 0xba05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba03), 0xcb);
        EXPECT(gbc.readMem(0xba04), 0xa8);
        // CB A8 024C
        gbc.setState(0xd3a3, 0xc5cd, 0xe5e0, 0x995c, 0xb996, 0x22fa, 0x1, 0x1);
        gbc.writeMem(0xd3a3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc5cd);
        EXPECT(gbc.pc(), 0xd3a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a3), 0xcb);
        EXPECT(gbc.readMem(0xd3a4), 0xa8);
        // CB A8 024D
        gbc.setState(0x213e, 0x7165, 0xa850, 0xaed2, 0xd127, 0x9ac7, 0x1, 0x1);
        gbc.writeMem(0x213e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7165);
        EXPECT(gbc.pc(), 0x2140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 024E
        gbc.setState(0x8550, 0xf34c, 0x4860, 0x1503, 0xe6e0, 0x32bb, 0x1, 0x1);
        gbc.writeMem(0x8550, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf34c);
        EXPECT(gbc.pc(), 0x8552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8550), 0xcb);
        EXPECT(gbc.readMem(0x8551), 0xa8);
        // CB A8 024F
        gbc.setState(0x9476, 0xd836, 0x7020, 0x459c, 0x3dc1, 0xb7fa, 0x0, 0x1);
        gbc.writeMem(0x9476, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd836);
        EXPECT(gbc.pc(), 0x9478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9476), 0xcb);
        EXPECT(gbc.readMem(0x9477), 0xa8);
        // CB A8 0250
        gbc.setState(0xd14f, 0x8496, 0x4570, 0x7845, 0xf37, 0xc4cb, 0x0, 0x1);
        gbc.writeMem(0xd14f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8496);
        EXPECT(gbc.pc(), 0xd151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd14f), 0xcb);
        EXPECT(gbc.readMem(0xd150), 0xa8);
        // CB A8 0251
        gbc.setState(0x7126, 0xb87f, 0x6320, 0x5660, 0x8cb3, 0xd5d7, 0x1, 0x1);
        gbc.writeMem(0x7126, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb87f);
        EXPECT(gbc.pc(), 0x7128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0252
        gbc.setState(0xfeb, 0xf84c, 0xa210, 0x26f6, 0x37c7, 0xcddd, 0x1, 0x1);
        gbc.writeMem(0xfeb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf84c);
        EXPECT(gbc.pc(), 0xfed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0253
        gbc.setState(0x9a14, 0x43c2, 0x9da0, 0xa37e, 0xbac5, 0xc894, 0x1, 0x1);
        gbc.writeMem(0x9a14, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x43c2);
        EXPECT(gbc.pc(), 0x9a16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a14), 0xcb);
        EXPECT(gbc.readMem(0x9a15), 0xa8);
        // CB A8 0254
        gbc.setState(0xe0a7, 0xf302, 0xbc10, 0xb13c, 0x2cbf, 0x27e0, 0x0, 0x1);
        gbc.writeMem(0xe0a7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf302);
        EXPECT(gbc.pc(), 0xe0a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a7), 0xcb);
        EXPECT(gbc.readMem(0xe0a8), 0xa8);
        // CB A8 0255
        gbc.setState(0xe0c7, 0x2aa6, 0x4250, 0xd08b, 0x8059, 0x3101, 0x1, 0x0);
        gbc.writeMem(0xe0c7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2aa6);
        EXPECT(gbc.pc(), 0xe0c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0c7), 0xcb);
        EXPECT(gbc.readMem(0xe0c8), 0xa8);
        // CB A8 0256
        gbc.setState(0x8131, 0xe122, 0x25a0, 0x87db, 0x5cb2, 0xef1a, 0x1, 0x0);
        gbc.writeMem(0x8131, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe122);
        EXPECT(gbc.pc(), 0x8133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8131), 0xcb);
        EXPECT(gbc.readMem(0x8132), 0xa8);
        // CB A8 0257
        gbc.setState(0xdd07, 0xcf1f, 0x9340, 0x7e66, 0xaebd, 0x3739, 0x0, 0x1);
        gbc.writeMem(0xdd07, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcf1f);
        EXPECT(gbc.pc(), 0xdd09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd07), 0xcb);
        EXPECT(gbc.readMem(0xdd08), 0xa8);
        // CB A8 0258
        gbc.setState(0x42e2, 0xaffb, 0xfb20, 0x8fba, 0x6a48, 0xe98b, 0x1, 0x1);
        gbc.writeMem(0x42e2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaffb);
        EXPECT(gbc.pc(), 0x42e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0259
        gbc.setState(0x71ab, 0x38f1, 0x1e0, 0x9977, 0x734f, 0x7193, 0x1, 0x0);
        gbc.writeMem(0x71ab, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x38f1);
        EXPECT(gbc.pc(), 0x71ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 025A
        gbc.setState(0x8a90, 0x57cb, 0x6740, 0x60be, 0x6780, 0xcc1a, 0x1, 0x1);
        gbc.writeMem(0x8a90, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x57cb);
        EXPECT(gbc.pc(), 0x8a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a90), 0xcb);
        EXPECT(gbc.readMem(0x8a91), 0xa8);
        // CB A8 025C
        gbc.setState(0xd8dd, 0x5d3c, 0x5d50, 0x2d11, 0xbd60, 0xddea, 0x0, 0x1);
        gbc.writeMem(0xd8dd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5d3c);
        EXPECT(gbc.pc(), 0xd8df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8dd), 0xcb);
        EXPECT(gbc.readMem(0xd8de), 0xa8);
        // CB A8 025D
        gbc.setState(0x74b0, 0xe518, 0x7cd0, 0xa615, 0xb5c2, 0xd441, 0x0, 0x0);
        gbc.writeMem(0x74b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe518);
        EXPECT(gbc.pc(), 0x74b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 025E
        gbc.setState(0x8413, 0x5894, 0xbb40, 0x2fc2, 0x9890, 0x17dd, 0x0, 0x1);
        gbc.writeMem(0x8413, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5894);
        EXPECT(gbc.pc(), 0x8415);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8413), 0xcb);
        EXPECT(gbc.readMem(0x8414), 0xa8);
        // CB A8 025F
        gbc.setState(0xbfe4, 0x6a3e, 0xbef0, 0x58f6, 0x4001, 0x9f87, 0x0, 0x1);
        gbc.writeMem(0xbfe4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6a3e);
        EXPECT(gbc.pc(), 0xbfe6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfe4), 0xcb);
        EXPECT(gbc.readMem(0xbfe5), 0xa8);
        // CB A8 0260
        gbc.setState(0xb321, 0xfcb2, 0xbb00, 0x1693, 0x77d0, 0x6567, 0x0, 0x1);
        gbc.writeMem(0xb321, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfcb2);
        EXPECT(gbc.pc(), 0xb323);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb321), 0xcb);
        EXPECT(gbc.readMem(0xb322), 0xa8);
        // CB A8 0261
        gbc.setState(0xaaa4, 0x51f3, 0xd8e0, 0xa241, 0xa0e5, 0x1c05, 0x0, 0x1);
        gbc.writeMem(0xaaa4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x51f3);
        EXPECT(gbc.pc(), 0xaaa6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaa4), 0xcb);
        EXPECT(gbc.readMem(0xaaa5), 0xa8);
        // CB A8 0262
        gbc.setState(0x856, 0x5925, 0x4620, 0xc429, 0xef48, 0x469c, 0x1, 0x0);
        gbc.writeMem(0x856, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x5925);
        EXPECT(gbc.pc(), 0x858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0263
        gbc.setState(0x9d9, 0x8de6, 0xbc20, 0x657d, 0xdc9, 0xead4, 0x0, 0x0);
        gbc.writeMem(0x9d9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8de6);
        EXPECT(gbc.pc(), 0x9db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0264
        gbc.setState(0x5589, 0x87bc, 0x86a0, 0xe00c, 0xfc67, 0x305d, 0x0, 0x1);
        gbc.writeMem(0x5589, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x87bc);
        EXPECT(gbc.pc(), 0x558b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0265
        gbc.setState(0xcbfe, 0x9a0c, 0x55e0, 0xccbf, 0x46b0, 0x598, 0x0, 0x0);
        gbc.writeMem(0xcbfe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9a0c);
        EXPECT(gbc.pc(), 0xcc00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0xcb);
        EXPECT(gbc.readMem(0xcbff), 0xa8);
        // CB A8 0266
        gbc.setState(0x5da, 0xa666, 0x66b0, 0xefe7, 0xb722, 0xd98e, 0x1, 0x1);
        gbc.writeMem(0x5da, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa666);
        EXPECT(gbc.pc(), 0x5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0267
        gbc.setState(0x938, 0x382, 0x6690, 0x1fd2, 0x508, 0x1fb3, 0x1, 0x0);
        gbc.writeMem(0x938, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x382);
        EXPECT(gbc.pc(), 0x93a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0268
        gbc.setState(0xa7fc, 0x2e9b, 0xb250, 0x6f, 0xa748, 0x6757, 0x0, 0x1);
        gbc.writeMem(0xa7fc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2e9b);
        EXPECT(gbc.pc(), 0xa7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fc), 0xcb);
        EXPECT(gbc.readMem(0xa7fd), 0xa8);
        // CB A8 0269
        gbc.setState(0x2ab1, 0xb0d5, 0x2dc0, 0x339a, 0x1e7f, 0x90a8, 0x1, 0x0);
        gbc.writeMem(0x2ab1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb0d5);
        EXPECT(gbc.pc(), 0x2ab3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 026A
        gbc.setState(0x5258, 0xcfc4, 0x7540, 0x4ac6, 0xa514, 0xcd02, 0x0, 0x0);
        gbc.writeMem(0x5258, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcfc4);
        EXPECT(gbc.pc(), 0x525a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 026B
        gbc.setState(0xb2bd, 0x62df, 0xb680, 0xd13, 0x9a57, 0x947d, 0x1, 0x1);
        gbc.writeMem(0xb2bd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x62df);
        EXPECT(gbc.pc(), 0xb2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2bd), 0xcb);
        EXPECT(gbc.readMem(0xb2be), 0xa8);
        // CB A8 026D
        gbc.setState(0x7eb5, 0xb3ef, 0x5960, 0x7f7c, 0x4064, 0x4021, 0x0, 0x0);
        gbc.writeMem(0x7eb5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb3ef);
        EXPECT(gbc.pc(), 0x7eb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 026E
        gbc.setState(0x1abe, 0xfb47, 0x4ff0, 0x10ec, 0x48c3, 0x2db6, 0x0, 0x0);
        gbc.writeMem(0x1abe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfb47);
        EXPECT(gbc.pc(), 0x1ac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 026F
        gbc.setState(0x3d51, 0xffa2, 0xf110, 0xd925, 0x7b6b, 0x7aa3, 0x0, 0x0);
        gbc.writeMem(0x3d51, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xffa2);
        EXPECT(gbc.pc(), 0x3d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0270
        gbc.setState(0x9d06, 0xbfb3, 0xcc70, 0x8ec0, 0x1076, 0x9a97, 0x1, 0x1);
        gbc.writeMem(0x9d06, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xbfb3);
        EXPECT(gbc.pc(), 0x9d08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d06), 0xcb);
        EXPECT(gbc.readMem(0x9d07), 0xa8);
        // CB A8 0271
        gbc.setState(0x42b4, 0x182, 0x4c50, 0xa98c, 0x9558, 0xb176, 0x0, 0x1);
        gbc.writeMem(0x42b4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x182);
        EXPECT(gbc.pc(), 0x42b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0272
        gbc.setState(0x3c71, 0x321b, 0x18f0, 0x26e, 0x3ab0, 0x218d, 0x0, 0x0);
        gbc.writeMem(0x3c71, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x321b);
        EXPECT(gbc.pc(), 0x3c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0273
        gbc.setState(0x44fb, 0xefdd, 0x4010, 0x89ef, 0xce80, 0xcf03, 0x1, 0x1);
        gbc.writeMem(0x44fb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xefdd);
        EXPECT(gbc.pc(), 0x44fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0274
        gbc.setState(0x7e8a, 0x3fd6, 0xccf0, 0xcd35, 0xac65, 0x6865, 0x0, 0x1);
        gbc.writeMem(0x7e8a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x3fd6);
        EXPECT(gbc.pc(), 0x7e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0276
        gbc.setState(0x4722, 0xb38f, 0xe8c0, 0xc57a, 0xde85, 0x2ee1, 0x1, 0x0);
        gbc.writeMem(0x4722, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb38f);
        EXPECT(gbc.pc(), 0x4724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0277
        gbc.setState(0x6738, 0x1be, 0xae00, 0xa7a0, 0xbe3e, 0xe02c, 0x1, 0x0);
        gbc.writeMem(0x6738, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1be);
        EXPECT(gbc.pc(), 0x673a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0278
        gbc.setState(0x3425, 0xb563, 0xe50, 0x704f, 0xf968, 0xf76, 0x1, 0x0);
        gbc.writeMem(0x3425, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb563);
        EXPECT(gbc.pc(), 0x3427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0279
        gbc.setState(0x28c8, 0xfcad, 0x6480, 0x464c, 0x69d, 0x30b2, 0x0, 0x1);
        gbc.writeMem(0x28c8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfcad);
        EXPECT(gbc.pc(), 0x28ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 027A
        gbc.setState(0xbdf6, 0x3035, 0x8350, 0x6737, 0x4777, 0xc79, 0x0, 0x1);
        gbc.writeMem(0xbdf6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3035);
        EXPECT(gbc.pc(), 0xbdf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf6), 0xcb);
        EXPECT(gbc.readMem(0xbdf7), 0xa8);
        // CB A8 027B
        gbc.setState(0xefcd, 0x68e8, 0x7c40, 0x48f9, 0x8009, 0xc3f9, 0x0, 0x1);
        gbc.writeMem(0xefcd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x68e8);
        EXPECT(gbc.pc(), 0xefcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefcd), 0xcb);
        EXPECT(gbc.readMem(0xefce), 0xa8);
        // CB A8 027C
        gbc.setState(0xe556, 0x940d, 0xbcd0, 0x772f, 0x8421, 0xf11b, 0x1, 0x1);
        gbc.writeMem(0xe556, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x940d);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe556), 0xcb);
        EXPECT(gbc.readMem(0xe557), 0xa8);
        // CB A8 027D
        gbc.setState(0xa33d, 0x1716, 0x64f0, 0xae9f, 0x999, 0x6af9, 0x1, 0x0);
        gbc.writeMem(0xa33d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x1716);
        EXPECT(gbc.pc(), 0xa33f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa33d), 0xcb);
        EXPECT(gbc.readMem(0xa33e), 0xa8);
        // CB A8 027E
        gbc.setState(0x13d, 0xce50, 0xc3d0, 0xd3a1, 0x9d61, 0xf10, 0x0, 0x1);
        gbc.writeMem(0x13d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xce50);
        EXPECT(gbc.pc(), 0x13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 027F
        gbc.setState(0x6391, 0xcd0f, 0xf540, 0x266b, 0xabef, 0xb37a, 0x0, 0x0);
        gbc.writeMem(0x6391, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xcd0f);
        EXPECT(gbc.pc(), 0x6393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0280
        gbc.setState(0xc2ad, 0x4e5e, 0x89a0, 0x2ce9, 0xfecc, 0x1e2a, 0x0, 0x0);
        gbc.writeMem(0xc2ad, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4e5e);
        EXPECT(gbc.pc(), 0xc2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ad), 0xcb);
        EXPECT(gbc.readMem(0xc2ae), 0xa8);
        // CB A8 0281
        gbc.setState(0xc5fc, 0x923c, 0x9940, 0xc226, 0x5a0a, 0x3f72, 0x0, 0x0);
        gbc.writeMem(0xc5fc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x923c);
        EXPECT(gbc.pc(), 0xc5fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fc), 0xcb);
        EXPECT(gbc.readMem(0xc5fd), 0xa8);
        // CB A8 0282
        gbc.setState(0x50f7, 0x4b5b, 0x3140, 0x4b7, 0x27ba, 0x8b75, 0x0, 0x0);
        gbc.writeMem(0x50f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4b5b);
        EXPECT(gbc.pc(), 0x50f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0283
        gbc.setState(0xd58c, 0xfb5f, 0x9740, 0x6e7a, 0x83c3, 0x26f2, 0x0, 0x0);
        gbc.writeMem(0xd58c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xfb5f);
        EXPECT(gbc.pc(), 0xd58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd58c), 0xcb);
        EXPECT(gbc.readMem(0xd58d), 0xa8);
        // CB A8 0284
        gbc.setState(0x56e0, 0xbac, 0x62c0, 0xb9b2, 0x2f6a, 0x85db, 0x0, 0x0);
        gbc.writeMem(0x56e0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbac);
        EXPECT(gbc.pc(), 0x56e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0285
        gbc.setState(0xebe, 0x6e5f, 0x7490, 0xaddb, 0xef52, 0xbaf7, 0x0, 0x1);
        gbc.writeMem(0xebe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6e5f);
        EXPECT(gbc.pc(), 0xec0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0286
        gbc.setState(0x44c1, 0x94da, 0xc170, 0x3eb9, 0x4b2a, 0x26e7, 0x1, 0x1);
        gbc.writeMem(0x44c1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x94da);
        EXPECT(gbc.pc(), 0x44c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0287
        gbc.setState(0x92dc, 0xf46d, 0xc740, 0xbd3, 0xac66, 0x44dd, 0x0, 0x1);
        gbc.writeMem(0x92dc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf46d);
        EXPECT(gbc.pc(), 0x92de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92dc), 0xcb);
        EXPECT(gbc.readMem(0x92dd), 0xa8);
        // CB A8 0289
        gbc.setState(0x9d25, 0x96c6, 0x8210, 0x3968, 0xd7e9, 0xa296, 0x1, 0x0);
        gbc.writeMem(0x9d25, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x96c6);
        EXPECT(gbc.pc(), 0x9d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d25), 0xcb);
        EXPECT(gbc.readMem(0x9d26), 0xa8);
        // CB A8 028A
        gbc.setState(0xd1f7, 0xeed2, 0xa580, 0x8f37, 0x2f3, 0x607a, 0x0, 0x1);
        gbc.writeMem(0xd1f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xeed2);
        EXPECT(gbc.pc(), 0xd1f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f7), 0xcb);
        EXPECT(gbc.readMem(0xd1f8), 0xa8);
        // CB A8 028B
        gbc.setState(0x7b50, 0x1a2d, 0xf190, 0xe0b6, 0x8775, 0x2f7d, 0x1, 0x1);
        gbc.writeMem(0x7b50, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x1a2d);
        EXPECT(gbc.pc(), 0x7b52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 028C
        gbc.setState(0x6de8, 0xc37, 0x4690, 0xa16d, 0x37b4, 0xf273, 0x1, 0x0);
        gbc.writeMem(0x6de8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc37);
        EXPECT(gbc.pc(), 0x6dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 028D
        gbc.setState(0x899c, 0x36f1, 0xf9b0, 0x9020, 0x7488, 0xe137, 0x0, 0x1);
        gbc.writeMem(0x899c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x36f1);
        EXPECT(gbc.pc(), 0x899e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x899c), 0xcb);
        EXPECT(gbc.readMem(0x899d), 0xa8);
        // CB A8 028E
        gbc.setState(0xb61a, 0x9ab5, 0xff20, 0xf2b4, 0x9272, 0xd426, 0x1, 0x0);
        gbc.writeMem(0xb61a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9ab5);
        EXPECT(gbc.pc(), 0xb61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61a), 0xcb);
        EXPECT(gbc.readMem(0xb61b), 0xa8);
        // CB A8 028F
        gbc.setState(0x721, 0xf9e2, 0x1c90, 0x758c, 0x8ab9, 0xdd20, 0x0, 0x1);
        gbc.writeMem(0x721, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf9e2);
        EXPECT(gbc.pc(), 0x723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0290
        gbc.setState(0x1135, 0x2ff4, 0x36c0, 0x9a5, 0xf63, 0x3e24, 0x1, 0x0);
        gbc.writeMem(0x1135, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2ff4);
        EXPECT(gbc.pc(), 0x1137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0291
        gbc.setState(0x9786, 0x69e7, 0x5db0, 0x9b51, 0xf0aa, 0xf60e, 0x0, 0x0);
        gbc.writeMem(0x9786, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x69e7);
        EXPECT(gbc.pc(), 0x9788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9786), 0xcb);
        EXPECT(gbc.readMem(0x9787), 0xa8);
        // CB A8 0292
        gbc.setState(0xcf13, 0x58eb, 0xf740, 0xa9a3, 0xa641, 0xdf9c, 0x0, 0x0);
        gbc.writeMem(0xcf13, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x58eb);
        EXPECT(gbc.pc(), 0xcf15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf13), 0xcb);
        EXPECT(gbc.readMem(0xcf14), 0xa8);
        // CB A8 0293
        gbc.setState(0xb80b, 0xe686, 0x2cd0, 0x7b6e, 0xf607, 0xb37e, 0x1, 0x1);
        gbc.writeMem(0xb80b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe686);
        EXPECT(gbc.pc(), 0xb80d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80b), 0xcb);
        EXPECT(gbc.readMem(0xb80c), 0xa8);
        // CB A8 0295
        gbc.setState(0xe209, 0xa954, 0x54d0, 0xd223, 0x4af9, 0xb1dd, 0x0, 0x0);
        gbc.writeMem(0xe209, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa954);
        EXPECT(gbc.pc(), 0xe20b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe209), 0xcb);
        EXPECT(gbc.readMem(0xe20a), 0xa8);
        // CB A8 0296
        gbc.setState(0x1e7, 0xb714, 0x8ba0, 0xe4ec, 0x2820, 0x178, 0x0, 0x0);
        gbc.writeMem(0x1e7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xb714);
        EXPECT(gbc.pc(), 0x1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0297
        gbc.setState(0xa34a, 0x3db3, 0x5630, 0xc851, 0xd15d, 0x191b, 0x1, 0x1);
        gbc.writeMem(0xa34a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3db3);
        EXPECT(gbc.pc(), 0xa34c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa34a), 0xcb);
        EXPECT(gbc.readMem(0xa34b), 0xa8);
        // CB A8 0298
        gbc.setState(0xeb31, 0x620d, 0x2b40, 0xe964, 0x5183, 0x4e51, 0x1, 0x0);
        gbc.writeMem(0xeb31, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x620d);
        EXPECT(gbc.pc(), 0xeb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb31), 0xcb);
        EXPECT(gbc.readMem(0xeb32), 0xa8);
        // CB A8 0299
        gbc.setState(0x9e1c, 0x8d56, 0xc1a0, 0x2aee, 0x9def, 0xd280, 0x1, 0x1);
        gbc.writeMem(0x9e1c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8d56);
        EXPECT(gbc.pc(), 0x9e1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e1c), 0xcb);
        EXPECT(gbc.readMem(0x9e1d), 0xa8);
        // CB A8 029A
        gbc.setState(0xedbe, 0x66d1, 0xed20, 0x3f6a, 0x9570, 0x7fdd, 0x1, 0x0);
        gbc.writeMem(0xedbe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x66d1);
        EXPECT(gbc.pc(), 0xedc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedbe), 0xcb);
        EXPECT(gbc.readMem(0xedbf), 0xa8);
        // CB A8 029B
        gbc.setState(0x9a9f, 0xb38a, 0x9470, 0x751b, 0x9c9a, 0xe4fd, 0x1, 0x1);
        gbc.writeMem(0x9a9f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb38a);
        EXPECT(gbc.pc(), 0x9aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a9f), 0xcb);
        EXPECT(gbc.readMem(0x9aa0), 0xa8);
        // CB A8 029C
        gbc.setState(0x8f2f, 0x45de, 0x6410, 0x9466, 0xfd5, 0xce92, 0x1, 0x1);
        gbc.writeMem(0x8f2f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x45de);
        EXPECT(gbc.pc(), 0x8f31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f2f), 0xcb);
        EXPECT(gbc.readMem(0x8f30), 0xa8);
        // CB A8 029D
        gbc.setState(0x6338, 0xf4cf, 0x7b0, 0xfadd, 0xa119, 0xc7d9, 0x0, 0x1);
        gbc.writeMem(0x6338, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf4cf);
        EXPECT(gbc.pc(), 0x633a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 029E
        gbc.setState(0x6baf, 0x2aa3, 0xcc30, 0xdbf1, 0x8dc7, 0x63ac, 0x1, 0x0);
        gbc.writeMem(0x6baf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x2aa3);
        EXPECT(gbc.pc(), 0x6bb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 029F
        gbc.setState(0x6fe9, 0x9905, 0xdfd0, 0x7ef5, 0xe941, 0xadfd, 0x0, 0x1);
        gbc.writeMem(0x6fe9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9905);
        EXPECT(gbc.pc(), 0x6feb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02A0
        gbc.setState(0xc6a0, 0xec68, 0x40a0, 0xbe2f, 0x2fad, 0xb8e0, 0x1, 0x0);
        gbc.writeMem(0xc6a0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xec68);
        EXPECT(gbc.pc(), 0xc6a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a0), 0xcb);
        EXPECT(gbc.readMem(0xc6a1), 0xa8);
        // CB A8 02A1
        gbc.setState(0x332a, 0xfd4f, 0x3580, 0x4683, 0x4f24, 0xc6b, 0x1, 0x1);
        gbc.writeMem(0x332a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfd4f);
        EXPECT(gbc.pc(), 0x332c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02A2
        gbc.setState(0x7134, 0xcb09, 0x8880, 0x4546, 0xa6a, 0xa8ea, 0x0, 0x0);
        gbc.writeMem(0x7134, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xcb09);
        EXPECT(gbc.pc(), 0x7136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02A3
        gbc.setState(0x33f3, 0x1e45, 0x80c0, 0x29f2, 0xdc73, 0x346c, 0x0, 0x1);
        gbc.writeMem(0x33f3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1e45);
        EXPECT(gbc.pc(), 0x33f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02A4
        gbc.setState(0x56bd, 0xcb53, 0xc580, 0xaf7, 0x5784, 0x5390, 0x0, 0x0);
        gbc.writeMem(0x56bd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcb53);
        EXPECT(gbc.pc(), 0x56bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02A5
        gbc.setState(0x3a86, 0x3c48, 0x4cc0, 0xdca, 0x740f, 0xa8af, 0x0, 0x0);
        gbc.writeMem(0x3a86, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3c48);
        EXPECT(gbc.pc(), 0x3a88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02A6
        gbc.setState(0x61df, 0x19db, 0x7f90, 0xc7d3, 0xdc46, 0xadd, 0x1, 0x1);
        gbc.writeMem(0x61df, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x19db);
        EXPECT(gbc.pc(), 0x61e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02A7
        gbc.setState(0x1a2f, 0xeb23, 0x9370, 0x769, 0x365d, 0xbb2c, 0x1, 0x0);
        gbc.writeMem(0x1a2f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeb23);
        EXPECT(gbc.pc(), 0x1a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02A8
        gbc.setState(0xd353, 0xa0bb, 0x46d0, 0xccb7, 0xa5d2, 0x4b9e, 0x1, 0x1);
        gbc.writeMem(0xd353, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa0bb);
        EXPECT(gbc.pc(), 0xd355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd353), 0xcb);
        EXPECT(gbc.readMem(0xd354), 0xa8);
        // CB A8 02A9
        gbc.setState(0x5897, 0xd199, 0xfba0, 0xcb64, 0x9018, 0xe9b1, 0x1, 0x1);
        gbc.writeMem(0x5897, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd199);
        EXPECT(gbc.pc(), 0x5899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02AA
        gbc.setState(0xdc1a, 0x7b91, 0x2120, 0x1957, 0x211e, 0x7bea, 0x0, 0x0);
        gbc.writeMem(0xdc1a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7b91);
        EXPECT(gbc.pc(), 0xdc1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1a), 0xcb);
        EXPECT(gbc.readMem(0xdc1b), 0xa8);
        // CB A8 02AB
        gbc.setState(0x2302, 0xdd6, 0xbe60, 0xcb0b, 0x8d5c, 0x1470, 0x0, 0x1);
        gbc.writeMem(0x2302, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xdd6);
        EXPECT(gbc.pc(), 0x2304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02AC
        gbc.setState(0xbcdf, 0x8ced, 0xa640, 0x1d5f, 0x2491, 0x4181, 0x0, 0x0);
        gbc.writeMem(0xbcdf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8ced);
        EXPECT(gbc.pc(), 0xbce1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcdf), 0xcb);
        EXPECT(gbc.readMem(0xbce0), 0xa8);
        // CB A8 02AD
        gbc.setState(0x3ee1, 0x3601, 0x7830, 0xc094, 0x9fe9, 0x6c55, 0x0, 0x1);
        gbc.writeMem(0x3ee1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x3601);
        EXPECT(gbc.pc(), 0x3ee3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02AE
        gbc.setState(0x3d19, 0x3ed6, 0x6f90, 0x11ef, 0xd78c, 0xc74d, 0x1, 0x0);
        gbc.writeMem(0x3d19, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3ed6);
        EXPECT(gbc.pc(), 0x3d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02B1
        gbc.setState(0xde, 0x5802, 0x8250, 0x6567, 0x26e4, 0xeb91, 0x0, 0x1);
        gbc.writeMem(0xde, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x5802);
        EXPECT(gbc.pc(), 0xe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02B2
        gbc.setState(0xc9b6, 0xa822, 0xcbf0, 0x4149, 0x4adc, 0xff6c, 0x0, 0x1);
        gbc.writeMem(0xc9b6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa822);
        EXPECT(gbc.pc(), 0xc9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b6), 0xcb);
        EXPECT(gbc.readMem(0xc9b7), 0xa8);
        // CB A8 02B4
        gbc.setState(0x81c9, 0x1a3, 0x1a70, 0x381c, 0x6e79, 0xd2d4, 0x1, 0x0);
        gbc.writeMem(0x81c9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x1a3);
        EXPECT(gbc.pc(), 0x81cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c9), 0xcb);
        EXPECT(gbc.readMem(0x81ca), 0xa8);
        // CB A8 02B5
        gbc.setState(0x5e03, 0x7e0e, 0xe750, 0x7933, 0x643d, 0xd78a, 0x1, 0x0);
        gbc.writeMem(0x5e03, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x7e0e);
        EXPECT(gbc.pc(), 0x5e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02B6
        gbc.setState(0xdfa1, 0x1ae, 0x65f0, 0x4252, 0xc4d6, 0xf984, 0x1, 0x1);
        gbc.writeMem(0xdfa1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1ae);
        EXPECT(gbc.pc(), 0xdfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfa1), 0xcb);
        EXPECT(gbc.readMem(0xdfa2), 0xa8);
        // CB A8 02B8
        gbc.setState(0x2e7e, 0xd0f8, 0xacd0, 0x37a, 0xfe6, 0x9199, 0x0, 0x0);
        gbc.writeMem(0x2e7e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd0f8);
        EXPECT(gbc.pc(), 0x2e80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02B9
        gbc.setState(0xec37, 0xc47d, 0x3db0, 0x1ed1, 0x53de, 0xe99a, 0x0, 0x1);
        gbc.writeMem(0xec37, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc47d);
        EXPECT(gbc.pc(), 0xec39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec37), 0xcb);
        EXPECT(gbc.readMem(0xec38), 0xa8);
        // CB A8 02BA
        gbc.setState(0xb0fe, 0x7e99, 0x4be0, 0x63f9, 0x790c, 0x4a1f, 0x1, 0x1);
        gbc.writeMem(0xb0fe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7e99);
        EXPECT(gbc.pc(), 0xb100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0fe), 0xcb);
        EXPECT(gbc.readMem(0xb0ff), 0xa8);
        // CB A8 02BB
        gbc.setState(0xb727, 0x9c42, 0x2b10, 0x572f, 0xce69, 0x1f86, 0x1, 0x0);
        gbc.writeMem(0xb727, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9c42);
        EXPECT(gbc.pc(), 0xb729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb727), 0xcb);
        EXPECT(gbc.readMem(0xb728), 0xa8);
        // CB A8 02BC
        gbc.setState(0x6476, 0xe1b3, 0xf960, 0x6b84, 0x42e5, 0xe49c, 0x1, 0x1);
        gbc.writeMem(0x6476, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xe1b3);
        EXPECT(gbc.pc(), 0x6478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02BD
        gbc.setState(0xcdee, 0xa172, 0x4370, 0xff58, 0xbbda, 0xcb44, 0x0, 0x0);
        gbc.writeMem(0xcdee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xa172);
        EXPECT(gbc.pc(), 0xcdf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdee), 0xcb);
        EXPECT(gbc.readMem(0xcdef), 0xa8);
        // CB A8 02BE
        gbc.setState(0x4425, 0x61f4, 0xb8b0, 0x5ac4, 0x1aec, 0x710e, 0x0, 0x1);
        gbc.writeMem(0x4425, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x61f4);
        EXPECT(gbc.pc(), 0x4427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02C0
        gbc.setState(0x40e4, 0xdd62, 0x3df0, 0x394c, 0x76a, 0x1137, 0x1, 0x0);
        gbc.writeMem(0x40e4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdd62);
        EXPECT(gbc.pc(), 0x40e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02C1
        gbc.setState(0x822e, 0x5690, 0x2b40, 0xe779, 0xcb3f, 0xab6b, 0x0, 0x0);
        gbc.writeMem(0x822e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5690);
        EXPECT(gbc.pc(), 0x8230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x822e), 0xcb);
        EXPECT(gbc.readMem(0x822f), 0xa8);
        // CB A8 02C2
        gbc.setState(0x2675, 0x1615, 0x9110, 0xbe78, 0x88d6, 0xcba2, 0x1, 0x0);
        gbc.writeMem(0x2675, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x1615);
        EXPECT(gbc.pc(), 0x2677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02C3
        gbc.setState(0x590e, 0xd88, 0x2bc0, 0x1036, 0x9db4, 0x16fd, 0x0, 0x1);
        gbc.writeMem(0x590e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xd88);
        EXPECT(gbc.pc(), 0x5910);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02C4
        gbc.setState(0xb498, 0x7bf2, 0x7f60, 0x42fa, 0x2e65, 0xa0a4, 0x0, 0x0);
        gbc.writeMem(0xb498, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7bf2);
        EXPECT(gbc.pc(), 0xb49a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb498), 0xcb);
        EXPECT(gbc.readMem(0xb499), 0xa8);
        // CB A8 02C5
        gbc.setState(0x8552, 0x7591, 0x8e70, 0xa6c9, 0x466a, 0x732c, 0x1, 0x1);
        gbc.writeMem(0x8552, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7591);
        EXPECT(gbc.pc(), 0x8554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8552), 0xcb);
        EXPECT(gbc.readMem(0x8553), 0xa8);
        // CB A8 02C6
        gbc.setState(0xdda2, 0x3904, 0x3420, 0xef8c, 0x8807, 0x6078, 0x1, 0x0);
        gbc.writeMem(0xdda2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3904);
        EXPECT(gbc.pc(), 0xdda4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda2), 0xcb);
        EXPECT(gbc.readMem(0xdda3), 0xa8);
        // CB A8 02C7
        gbc.setState(0xc299, 0x17f2, 0x85e0, 0x4e58, 0x3941, 0x8459, 0x0, 0x0);
        gbc.writeMem(0xc299, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x17f2);
        EXPECT(gbc.pc(), 0xc29b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc299), 0xcb);
        EXPECT(gbc.readMem(0xc29a), 0xa8);
        // CB A8 02C8
        gbc.setState(0xec7a, 0x1b8d, 0xf2a0, 0x3758, 0x4867, 0x536f, 0x1, 0x0);
        gbc.writeMem(0xec7a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1b8d);
        EXPECT(gbc.pc(), 0xec7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7a), 0xcb);
        EXPECT(gbc.readMem(0xec7b), 0xa8);
        // CB A8 02C9
        gbc.setState(0x2b82, 0x450c, 0x210, 0xc88e, 0x434f, 0xdd0, 0x1, 0x0);
        gbc.writeMem(0x2b82, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x450c);
        EXPECT(gbc.pc(), 0x2b84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02CA
        gbc.setState(0x3e86, 0x7904, 0x80, 0x56ad, 0x5bc, 0x7e0, 0x0, 0x0);
        gbc.writeMem(0x3e86, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7904);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02CC
        gbc.setState(0xb02d, 0xe7d9, 0x9570, 0xec58, 0x6a8, 0xae9e, 0x0, 0x1);
        gbc.writeMem(0xb02d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xe7d9);
        EXPECT(gbc.pc(), 0xb02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02d), 0xcb);
        EXPECT(gbc.readMem(0xb02e), 0xa8);
        // CB A8 02CD
        gbc.setState(0xc335, 0x54a2, 0xe760, 0x90ee, 0x7e76, 0x397d, 0x1, 0x1);
        gbc.writeMem(0xc335, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x54a2);
        EXPECT(gbc.pc(), 0xc337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc335), 0xcb);
        EXPECT(gbc.readMem(0xc336), 0xa8);
        // CB A8 02CE
        gbc.setState(0x4d4f, 0x87c7, 0x5b70, 0xd6e0, 0x7f66, 0x6ca1, 0x1, 0x0);
        gbc.writeMem(0x4d4f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x87c7);
        EXPECT(gbc.pc(), 0x4d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02CF
        gbc.setState(0xcb90, 0xd2da, 0xdd40, 0x1d54, 0xa335, 0x94c1, 0x1, 0x0);
        gbc.writeMem(0xcb90, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd2da);
        EXPECT(gbc.pc(), 0xcb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb90), 0xcb);
        EXPECT(gbc.readMem(0xcb91), 0xa8);
        // CB A8 02D0
        gbc.setState(0x7c05, 0xf138, 0xe800, 0x9e9, 0xad2d, 0xa991, 0x1, 0x1);
        gbc.writeMem(0x7c05, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf138);
        EXPECT(gbc.pc(), 0x7c07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02D1
        gbc.setState(0x1cc, 0xe7ce, 0xf6c0, 0x1af7, 0x27c3, 0x9b3b, 0x1, 0x0);
        gbc.writeMem(0x1cc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe7ce);
        EXPECT(gbc.pc(), 0x1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02D2
        gbc.setState(0xb84b, 0xeff2, 0xc120, 0x8cf, 0x427c, 0xd06f, 0x1, 0x0);
        gbc.writeMem(0xb84b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xeff2);
        EXPECT(gbc.pc(), 0xb84d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84b), 0xcb);
        EXPECT(gbc.readMem(0xb84c), 0xa8);
        // CB A8 02D3
        gbc.setState(0xaa48, 0x4b03, 0x64e0, 0xb70f, 0x2b93, 0x5df5, 0x1, 0x1);
        gbc.writeMem(0xaa48, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4b03);
        EXPECT(gbc.pc(), 0xaa4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa48), 0xcb);
        EXPECT(gbc.readMem(0xaa49), 0xa8);
        // CB A8 02D4
        gbc.setState(0xb9b0, 0x6f79, 0x4ce0, 0xd64d, 0xf173, 0x2141, 0x0, 0x0);
        gbc.writeMem(0xb9b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6f79);
        EXPECT(gbc.pc(), 0xb9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b0), 0xcb);
        EXPECT(gbc.readMem(0xb9b1), 0xa8);
        // CB A8 02D5
        gbc.setState(0x58f2, 0x21ed, 0x8f20, 0xb5f4, 0x9eff, 0x9ffe, 0x1, 0x0);
        gbc.writeMem(0x58f2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x21ed);
        EXPECT(gbc.pc(), 0x58f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02D6
        gbc.setState(0xbefe, 0xae85, 0xc5a0, 0x267e, 0x9704, 0xfec5, 0x0, 0x0);
        gbc.writeMem(0xbefe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xae85);
        EXPECT(gbc.pc(), 0xbf00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefe), 0xcb);
        EXPECT(gbc.readMem(0xbeff), 0xa8);
        // CB A8 02D7
        gbc.setState(0x4a9a, 0x6f6d, 0x2d40, 0xc17a, 0x5bf3, 0x4466, 0x1, 0x0);
        gbc.writeMem(0x4a9a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6f6d);
        EXPECT(gbc.pc(), 0x4a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02D8
        gbc.setState(0xe5b1, 0xdd15, 0xb210, 0x215a, 0x8bbc, 0xb79d, 0x1, 0x0);
        gbc.writeMem(0xe5b1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xdd15);
        EXPECT(gbc.pc(), 0xe5b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5b1), 0xcb);
        EXPECT(gbc.readMem(0xe5b2), 0xa8);
        // CB A8 02D9
        gbc.setState(0xe6cf, 0x646f, 0xe8d0, 0xd3d0, 0x54ba, 0x48ce, 0x1, 0x0);
        gbc.writeMem(0xe6cf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x646f);
        EXPECT(gbc.pc(), 0xe6d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6cf), 0xcb);
        EXPECT(gbc.readMem(0xe6d0), 0xa8);
        // CB A8 02DB
        gbc.setState(0xb665, 0x1877, 0x2b20, 0x4829, 0x6616, 0xdd24, 0x1, 0x1);
        gbc.writeMem(0xb665, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1877);
        EXPECT(gbc.pc(), 0xb667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb665), 0xcb);
        EXPECT(gbc.readMem(0xb666), 0xa8);
        // CB A8 02DC
        gbc.setState(0x730c, 0xad37, 0x6d40, 0x636f, 0xd18b, 0xcd23, 0x1, 0x0);
        gbc.writeMem(0x730c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xad37);
        EXPECT(gbc.pc(), 0x730e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02DD
        gbc.setState(0x4f1d, 0xa33f, 0xfc80, 0xe34, 0x174e, 0xf12, 0x0, 0x1);
        gbc.writeMem(0x4f1d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa33f);
        EXPECT(gbc.pc(), 0x4f1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02DE
        gbc.setState(0x2b8e, 0x4e59, 0x6260, 0xb791, 0x1393, 0x7be1, 0x0, 0x1);
        gbc.writeMem(0x2b8e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4e59);
        EXPECT(gbc.pc(), 0x2b90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02DF
        gbc.setState(0xd90c, 0x6444, 0x5c80, 0x8e75, 0x56dd, 0x82b6, 0x0, 0x0);
        gbc.writeMem(0xd90c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6444);
        EXPECT(gbc.pc(), 0xd90e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90c), 0xcb);
        EXPECT(gbc.readMem(0xd90d), 0xa8);
        // CB A8 02E0
        gbc.setState(0xccef, 0x28c4, 0x2fe0, 0x3480, 0x59f9, 0xd153, 0x0, 0x0);
        gbc.writeMem(0xccef, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x28c4);
        EXPECT(gbc.pc(), 0xccf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccef), 0xcb);
        EXPECT(gbc.readMem(0xccf0), 0xa8);
        // CB A8 02E1
        gbc.setState(0xe15, 0xb182, 0x8350, 0xacb7, 0x2281, 0x8720, 0x1, 0x0);
        gbc.writeMem(0xe15, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb182);
        EXPECT(gbc.pc(), 0xe17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02E2
        gbc.setState(0xacb6, 0x7170, 0xef40, 0xb63d, 0x747c, 0x1101, 0x1, 0x1);
        gbc.writeMem(0xacb6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7170);
        EXPECT(gbc.pc(), 0xacb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacb6), 0xcb);
        EXPECT(gbc.readMem(0xacb7), 0xa8);
        // CB A8 02E3
        gbc.setState(0xc5dc, 0x36db, 0x8c30, 0xdee, 0x6d4e, 0xd42a, 0x1, 0x0);
        gbc.writeMem(0xc5dc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x36db);
        EXPECT(gbc.pc(), 0xc5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5dc), 0xcb);
        EXPECT(gbc.readMem(0xc5dd), 0xa8);
        // CB A8 02E4
        gbc.setState(0x1208, 0xf6e1, 0x87a0, 0xa4ed, 0xb28e, 0x4cd3, 0x1, 0x0);
        gbc.writeMem(0x1208, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf6e1);
        EXPECT(gbc.pc(), 0x120a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02E5
        gbc.setState(0x3642, 0x1fd7, 0xe0c0, 0xc6a9, 0x1b75, 0xffe, 0x1, 0x0);
        gbc.writeMem(0x3642, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1fd7);
        EXPECT(gbc.pc(), 0x3644);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02E6
        gbc.setState(0x9b29, 0x23db, 0xbd60, 0xb9fb, 0x71e8, 0xe5a5, 0x0, 0x1);
        gbc.writeMem(0x9b29, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x23db);
        EXPECT(gbc.pc(), 0x9b2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b29), 0xcb);
        EXPECT(gbc.readMem(0x9b2a), 0xa8);
        // CB A8 02E8
        gbc.setState(0x4d0a, 0x589b, 0x6770, 0xe7b8, 0x7be7, 0x692b, 0x1, 0x1);
        gbc.writeMem(0x4d0a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x589b);
        EXPECT(gbc.pc(), 0x4d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02E9
        gbc.setState(0x6b0a, 0xef76, 0x340, 0xd006, 0x1a35, 0xba4b, 0x0, 0x1);
        gbc.writeMem(0x6b0a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xef76);
        EXPECT(gbc.pc(), 0x6b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02EB
        gbc.setState(0xaa99, 0xd647, 0xded0, 0xb297, 0x7156, 0x6fc5, 0x0, 0x0);
        gbc.writeMem(0xaa99, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd647);
        EXPECT(gbc.pc(), 0xaa9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa99), 0xcb);
        EXPECT(gbc.readMem(0xaa9a), 0xa8);
        // CB A8 02EC
        gbc.setState(0xd549, 0x343d, 0xd4c0, 0xca47, 0x3f34, 0xc7f6, 0x1, 0x0);
        gbc.writeMem(0xd549, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x343d);
        EXPECT(gbc.pc(), 0xd54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd549), 0xcb);
        EXPECT(gbc.readMem(0xd54a), 0xa8);
        // CB A8 02ED
        gbc.setState(0xa54b, 0xe95f, 0xd4c0, 0xfcdc, 0x2749, 0x5b7e, 0x0, 0x0);
        gbc.writeMem(0xa54b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe95f);
        EXPECT(gbc.pc(), 0xa54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa54b), 0xcb);
        EXPECT(gbc.readMem(0xa54c), 0xa8);
        // CB A8 02EE
        gbc.setState(0xb5ff, 0xbc8b, 0xbbd0, 0xfff5, 0xd52b, 0x8c13, 0x0, 0x0);
        gbc.writeMem(0xb5ff, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbc8b);
        EXPECT(gbc.pc(), 0xb601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5ff), 0xcb);
        EXPECT(gbc.readMem(0xb600), 0xa8);
        // CB A8 02EF
        gbc.setState(0x69d, 0x727e, 0xfdb0, 0xa0b5, 0x5ec8, 0xe527, 0x1, 0x1);
        gbc.writeMem(0x69d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x727e);
        EXPECT(gbc.pc(), 0x69f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02F0
        gbc.setState(0x12, 0x3bed, 0xe290, 0x32dc, 0x8eb, 0xddf6, 0x1, 0x1);
        gbc.writeMem(0x12, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3bed);
        EXPECT(gbc.pc(), 0x14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02F1
        gbc.setState(0x7efb, 0xb1f3, 0x80e0, 0xf689, 0x8212, 0x5f76, 0x0, 0x1);
        gbc.writeMem(0x7efb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xb1f3);
        EXPECT(gbc.pc(), 0x7efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02F2
        gbc.setState(0x5f7c, 0x6302, 0x9000, 0x6438, 0xcff4, 0xfce3, 0x0, 0x0);
        gbc.writeMem(0x5f7c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6302);
        EXPECT(gbc.pc(), 0x5f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02F3
        gbc.setState(0x1d89, 0x8f4a, 0x3ee0, 0xc82f, 0x60c0, 0x27a4, 0x0, 0x1);
        gbc.writeMem(0x1d89, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8f4a);
        EXPECT(gbc.pc(), 0x1d8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02F4
        gbc.setState(0x2c39, 0x1e72, 0xef70, 0x40c, 0x9ba7, 0x6573, 0x0, 0x0);
        gbc.writeMem(0x2c39, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1e72);
        EXPECT(gbc.pc(), 0x2c3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02F5
        gbc.setState(0x74f5, 0xdd7b, 0x76f0, 0xd5da, 0xf8f0, 0x7ba1, 0x0, 0x0);
        gbc.writeMem(0x74f5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xdd7b);
        EXPECT(gbc.pc(), 0x74f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02F6
        gbc.setState(0x3a9a, 0x2bae, 0x7ee0, 0x5139, 0xaa61, 0xe25e, 0x1, 0x1);
        gbc.writeMem(0x3a9a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x2bae);
        EXPECT(gbc.pc(), 0x3a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02F7
        gbc.setState(0x11f7, 0xf6d9, 0xa0, 0xc90a, 0xb1f7, 0xfd8b, 0x1, 0x1);
        gbc.writeMem(0x11f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf6d9);
        EXPECT(gbc.pc(), 0x11f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02F8
        gbc.setState(0x72c8, 0x263a, 0x16b0, 0x108f, 0xe583, 0x1013, 0x1, 0x1);
        gbc.writeMem(0x72c8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x263a);
        EXPECT(gbc.pc(), 0x72ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02F9
        gbc.setState(0x56e0, 0x5fdd, 0x81c0, 0x56d9, 0x80bd, 0xc8a9, 0x1, 0x0);
        gbc.writeMem(0x56e0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5fdd);
        EXPECT(gbc.pc(), 0x56e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02FA
        gbc.setState(0x43ae, 0x3ebe, 0xb9a0, 0x10a1, 0xf1a6, 0x85ba, 0x0, 0x0);
        gbc.writeMem(0x43ae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3ebe);
        EXPECT(gbc.pc(), 0x43b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02FB
        gbc.setState(0x2059, 0x8a34, 0x6880, 0xaa68, 0x98b5, 0xdc6a, 0x0, 0x1);
        gbc.writeMem(0x2059, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8a34);
        EXPECT(gbc.pc(), 0x205b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02FC
        gbc.setState(0x25e3, 0xb00c, 0xd00, 0xdbf8, 0x9981, 0x9674, 0x1, 0x1);
        gbc.writeMem(0x25e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb00c);
        EXPECT(gbc.pc(), 0x25e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 02FD
        gbc.setState(0x87e9, 0xc776, 0x7ee0, 0xccf4, 0x39c5, 0xc265, 0x1, 0x0);
        gbc.writeMem(0x87e9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc776);
        EXPECT(gbc.pc(), 0x87eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e9), 0xcb);
        EXPECT(gbc.readMem(0x87ea), 0xa8);
        // CB A8 02FE
        gbc.setState(0x657a, 0x595, 0xa750, 0xd421, 0xd35c, 0xb92e, 0x0, 0x1);
        gbc.writeMem(0x657a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x595);
        EXPECT(gbc.pc(), 0x657c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 02FF
        gbc.setState(0x7e5c, 0x7a5b, 0xfd80, 0x4013, 0x5e9c, 0x6b80, 0x0, 0x1);
        gbc.writeMem(0x7e5c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7a5b);
        EXPECT(gbc.pc(), 0x7e5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0300
        gbc.setState(0xe4aa, 0xa004, 0x5df0, 0x7558, 0xf9c7, 0x8026, 0x0, 0x1);
        gbc.writeMem(0xe4aa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa004);
        EXPECT(gbc.pc(), 0xe4ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4aa), 0xcb);
        EXPECT(gbc.readMem(0xe4ab), 0xa8);
        // CB A8 0301
        gbc.setState(0x6af7, 0x78d9, 0x9970, 0x9de1, 0x3cd2, 0x7be1, 0x0, 0x0);
        gbc.writeMem(0x6af7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x78d9);
        EXPECT(gbc.pc(), 0x6af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0302
        gbc.setState(0x9c88, 0xdcd2, 0x7ec0, 0xd7e7, 0x11d1, 0x2b58, 0x1, 0x1);
        gbc.writeMem(0x9c88, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xdcd2);
        EXPECT(gbc.pc(), 0x9c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c88), 0xcb);
        EXPECT(gbc.readMem(0x9c89), 0xa8);
        // CB A8 0303
        gbc.setState(0x66af, 0x994d, 0xa4c0, 0xc4b4, 0x8a6a, 0x12f7, 0x1, 0x0);
        gbc.writeMem(0x66af, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x994d);
        EXPECT(gbc.pc(), 0x66b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0304
        gbc.setState(0xa18a, 0xfcf7, 0xee10, 0x8717, 0xb286, 0x521d, 0x1, 0x1);
        gbc.writeMem(0xa18a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfcf7);
        EXPECT(gbc.pc(), 0xa18c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa18a), 0xcb);
        EXPECT(gbc.readMem(0xa18b), 0xa8);
        // CB A8 0305
        gbc.setState(0xcd18, 0x8926, 0x65a0, 0x7af2, 0xc8d8, 0x13c7, 0x1, 0x0);
        gbc.writeMem(0xcd18, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8926);
        EXPECT(gbc.pc(), 0xcd1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd18), 0xcb);
        EXPECT(gbc.readMem(0xcd19), 0xa8);
        // CB A8 0306
        gbc.setState(0x1faf, 0xf38a, 0xadb0, 0xba24, 0x9ef2, 0x2e48, 0x0, 0x1);
        gbc.writeMem(0x1faf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf38a);
        EXPECT(gbc.pc(), 0x1fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0307
        gbc.setState(0x6d07, 0x5f57, 0x4b90, 0x48b8, 0x69d6, 0x95c0, 0x0, 0x1);
        gbc.writeMem(0x6d07, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5f57);
        EXPECT(gbc.pc(), 0x6d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0308
        gbc.setState(0xd1ec, 0x4f18, 0x8660, 0x2dd8, 0x71c4, 0xa9d3, 0x0, 0x0);
        gbc.writeMem(0xd1ec, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4f18);
        EXPECT(gbc.pc(), 0xd1ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1ec), 0xcb);
        EXPECT(gbc.readMem(0xd1ed), 0xa8);
        // CB A8 0309
        gbc.setState(0x22e2, 0xbe3d, 0xa830, 0x787, 0xfa1c, 0xa705, 0x1, 0x1);
        gbc.writeMem(0x22e2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbe3d);
        EXPECT(gbc.pc(), 0x22e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 030A
        gbc.setState(0xb9d5, 0xe811, 0x200, 0x2b32, 0xb833, 0xec2b, 0x1, 0x1);
        gbc.writeMem(0xb9d5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe811);
        EXPECT(gbc.pc(), 0xb9d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d5), 0xcb);
        EXPECT(gbc.readMem(0xb9d6), 0xa8);
        // CB A8 030C
        gbc.setState(0x82b7, 0x56eb, 0x17a0, 0x3a5b, 0xaf66, 0xb2b9, 0x1, 0x0);
        gbc.writeMem(0x82b7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x56eb);
        EXPECT(gbc.pc(), 0x82b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b7), 0xcb);
        EXPECT(gbc.readMem(0x82b8), 0xa8);
        // CB A8 030D
        gbc.setState(0x5cb6, 0xe8dc, 0xbfc0, 0x25f8, 0x8dbb, 0x95a4, 0x0, 0x0);
        gbc.writeMem(0x5cb6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0x5cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 030E
        gbc.setState(0xa9a4, 0x624e, 0x2ff0, 0xe721, 0xccd5, 0x2c53, 0x0, 0x1);
        gbc.writeMem(0xa9a4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x624e);
        EXPECT(gbc.pc(), 0xa9a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a4), 0xcb);
        EXPECT(gbc.readMem(0xa9a5), 0xa8);
        // CB A8 030F
        gbc.setState(0xa1ee, 0xf63a, 0xe2d0, 0xe1c0, 0x3653, 0x11db, 0x1, 0x0);
        gbc.writeMem(0xa1ee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf63a);
        EXPECT(gbc.pc(), 0xa1f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ee), 0xcb);
        EXPECT(gbc.readMem(0xa1ef), 0xa8);
        // CB A8 0310
        gbc.setState(0x2700, 0xdbb5, 0xbf60, 0x7223, 0xa8af, 0x5369, 0x1, 0x0);
        gbc.writeMem(0x2700, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdbb5);
        EXPECT(gbc.pc(), 0x2702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0311
        gbc.setState(0x60b7, 0xcb0e, 0x57d0, 0x758, 0x5045, 0x2ae2, 0x1, 0x1);
        gbc.writeMem(0x60b7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcb0e);
        EXPECT(gbc.pc(), 0x60b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0312
        gbc.setState(0x7490, 0x6031, 0x7c40, 0x9edd, 0x5c6d, 0x1c15, 0x0, 0x1);
        gbc.writeMem(0x7490, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6031);
        EXPECT(gbc.pc(), 0x7492);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0313
        gbc.setState(0x685c, 0xfd43, 0x47a0, 0xa125, 0xdb8c, 0x5925, 0x1, 0x0);
        gbc.writeMem(0x685c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfd43);
        EXPECT(gbc.pc(), 0x685e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0314
        gbc.setState(0x9a94, 0x2314, 0x7d50, 0x73d0, 0x3a3a, 0x1e9, 0x0, 0x0);
        gbc.writeMem(0x9a94, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2314);
        EXPECT(gbc.pc(), 0x9a96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a94), 0xcb);
        EXPECT(gbc.readMem(0x9a95), 0xa8);
        // CB A8 0315
        gbc.setState(0x1f95, 0xd0d7, 0xe0c0, 0x6569, 0x7a5a, 0x7e92, 0x0, 0x1);
        gbc.writeMem(0x1f95, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd0d7);
        EXPECT(gbc.pc(), 0x1f97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0317
        gbc.setState(0x6249, 0x44f0, 0x7440, 0x5ef3, 0x17b3, 0x2f97, 0x0, 0x0);
        gbc.writeMem(0x6249, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x44f0);
        EXPECT(gbc.pc(), 0x624b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0319
        gbc.setState(0xdb91, 0x7a18, 0x30, 0x258e, 0xa36f, 0x5bdb, 0x1, 0x0);
        gbc.writeMem(0xdb91, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7a18);
        EXPECT(gbc.pc(), 0xdb93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb91), 0xcb);
        EXPECT(gbc.readMem(0xdb92), 0xa8);
        // CB A8 031A
        gbc.setState(0x2ebb, 0xff2e, 0x2ab0, 0x6f55, 0x400b, 0x1c1e, 0x0, 0x1);
        gbc.writeMem(0x2ebb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xff2e);
        EXPECT(gbc.pc(), 0x2ebd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 031B
        gbc.setState(0x69e9, 0xef9a, 0x3be0, 0x83eb, 0xfc02, 0xa3d7, 0x0, 0x1);
        gbc.writeMem(0x69e9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xef9a);
        EXPECT(gbc.pc(), 0x69eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 031C
        gbc.setState(0x36e3, 0x2424, 0x170, 0x413a, 0xe650, 0x6950, 0x0, 0x1);
        gbc.writeMem(0x36e3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2424);
        EXPECT(gbc.pc(), 0x36e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 031D
        gbc.setState(0x3792, 0x5f10, 0xdd50, 0x2605, 0x2081, 0x55bf, 0x1, 0x1);
        gbc.writeMem(0x3792, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5f10);
        EXPECT(gbc.pc(), 0x3794);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 031E
        gbc.setState(0xb2cd, 0x71ff, 0xea70, 0xe541, 0xa7cf, 0x76e7, 0x1, 0x1);
        gbc.writeMem(0xb2cd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x71ff);
        EXPECT(gbc.pc(), 0xb2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2cd), 0xcb);
        EXPECT(gbc.readMem(0xb2ce), 0xa8);
        // CB A8 031F
        gbc.setState(0xe2a9, 0x25f2, 0x40f0, 0xc74b, 0xbec3, 0x24e, 0x0, 0x0);
        gbc.writeMem(0xe2a9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x25f2);
        EXPECT(gbc.pc(), 0xe2ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a9), 0xcb);
        EXPECT(gbc.readMem(0xe2aa), 0xa8);
        // CB A8 0320
        gbc.setState(0x31e8, 0x4fff, 0xe3b0, 0x9f68, 0xfd2c, 0x7d5f, 0x1, 0x0);
        gbc.writeMem(0x31e8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4fff);
        EXPECT(gbc.pc(), 0x31ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0321
        gbc.setState(0x7223, 0x4c7b, 0x3630, 0x33a8, 0x66c4, 0xf151, 0x1, 0x1);
        gbc.writeMem(0x7223, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4c7b);
        EXPECT(gbc.pc(), 0x7225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0322
        gbc.setState(0x9df4, 0x6107, 0xc9b0, 0xa840, 0xe55, 0xde5d, 0x1, 0x1);
        gbc.writeMem(0x9df4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6107);
        EXPECT(gbc.pc(), 0x9df6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df4), 0xcb);
        EXPECT(gbc.readMem(0x9df5), 0xa8);
        // CB A8 0323
        gbc.setState(0x8753, 0xd401, 0x5cb0, 0x8eaa, 0x4dc3, 0x5930, 0x1, 0x0);
        gbc.writeMem(0x8753, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd401);
        EXPECT(gbc.pc(), 0x8755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8753), 0xcb);
        EXPECT(gbc.readMem(0x8754), 0xa8);
        // CB A8 0324
        gbc.setState(0x567e, 0xd631, 0x6000, 0x1c01, 0xcec4, 0xcb81, 0x1, 0x1);
        gbc.writeMem(0x567e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd631);
        EXPECT(gbc.pc(), 0x5680);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0325
        gbc.setState(0x9d9d, 0xb219, 0x56e0, 0xf218, 0x7c7a, 0x1615, 0x0, 0x0);
        gbc.writeMem(0x9d9d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb219);
        EXPECT(gbc.pc(), 0x9d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d9d), 0xcb);
        EXPECT(gbc.readMem(0x9d9e), 0xa8);
        // CB A8 0326
        gbc.setState(0xcde7, 0xb205, 0xfe00, 0x9e49, 0xe9be, 0xd128, 0x0, 0x0);
        gbc.writeMem(0xcde7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb205);
        EXPECT(gbc.pc(), 0xcde9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde7), 0xcb);
        EXPECT(gbc.readMem(0xcde8), 0xa8);
        // CB A8 0327
        gbc.setState(0x9c24, 0xe54b, 0xe590, 0xc0f1, 0x447a, 0x3023, 0x0, 0x0);
        gbc.writeMem(0x9c24, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe54b);
        EXPECT(gbc.pc(), 0x9c26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c24), 0xcb);
        EXPECT(gbc.readMem(0x9c25), 0xa8);
        // CB A8 0328
        gbc.setState(0x1d7a, 0x1c11, 0xc1e0, 0x4b8c, 0x3f3b, 0x58c8, 0x0, 0x0);
        gbc.writeMem(0x1d7a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1c11);
        EXPECT(gbc.pc(), 0x1d7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0329
        gbc.setState(0x6a50, 0x2a15, 0x6b60, 0xef63, 0xcb7e, 0xb33d, 0x0, 0x0);
        gbc.writeMem(0x6a50, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2a15);
        EXPECT(gbc.pc(), 0x6a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 032A
        gbc.setState(0x6c48, 0x61cd, 0x1f30, 0x8084, 0xf7f1, 0xd8de, 0x1, 0x1);
        gbc.writeMem(0x6c48, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x61cd);
        EXPECT(gbc.pc(), 0x6c4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 032B
        gbc.setState(0x11b6, 0xc2f4, 0xc980, 0x6540, 0xa82a, 0x5b17, 0x1, 0x1);
        gbc.writeMem(0x11b6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc2f4);
        EXPECT(gbc.pc(), 0x11b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 032C
        gbc.setState(0x5a6, 0x6a35, 0x48d0, 0xf28d, 0x17bc, 0x7d7c, 0x0, 0x1);
        gbc.writeMem(0x5a6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6a35);
        EXPECT(gbc.pc(), 0x5a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 032E
        gbc.setState(0x1249, 0xb7c5, 0xb180, 0xe427, 0xafb3, 0x8192, 0x1, 0x0);
        gbc.writeMem(0x1249, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xb7c5);
        EXPECT(gbc.pc(), 0x124b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 032F
        gbc.setState(0xb9b3, 0xe0b, 0x4650, 0xe217, 0x4002, 0x4878, 0x0, 0x1);
        gbc.writeMem(0xb9b3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe0b);
        EXPECT(gbc.pc(), 0xb9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b3), 0xcb);
        EXPECT(gbc.readMem(0xb9b4), 0xa8);
        // CB A8 0330
        gbc.setState(0xbd73, 0xfad8, 0xb700, 0xc682, 0x2307, 0x4a4b, 0x0, 0x1);
        gbc.writeMem(0xbd73, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xfad8);
        EXPECT(gbc.pc(), 0xbd75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd73), 0xcb);
        EXPECT(gbc.readMem(0xbd74), 0xa8);
        // CB A8 0331
        gbc.setState(0xee10, 0x3de6, 0xd0e0, 0xda90, 0x41af, 0x6d5c, 0x0, 0x1);
        gbc.writeMem(0xee10, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3de6);
        EXPECT(gbc.pc(), 0xee12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee10), 0xcb);
        EXPECT(gbc.readMem(0xee11), 0xa8);
        // CB A8 0332
        gbc.setState(0x9d9d, 0x5604, 0x73f0, 0xafc5, 0xe6ff, 0xaa3f, 0x1, 0x0);
        gbc.writeMem(0x9d9d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5604);
        EXPECT(gbc.pc(), 0x9d9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9d), 0xcb);
        EXPECT(gbc.readMem(0x9d9e), 0xa8);
        // CB A8 0333
        gbc.setState(0xbbba, 0x3705, 0xed0, 0xebd1, 0x665c, 0xf550, 0x0, 0x1);
        gbc.writeMem(0xbbba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x3705);
        EXPECT(gbc.pc(), 0xbbbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbba), 0xcb);
        EXPECT(gbc.readMem(0xbbbb), 0xa8);
        // CB A8 0334
        gbc.setState(0x8ea7, 0xd8fa, 0x4290, 0xc9c3, 0x7325, 0xe9a3, 0x0, 0x0);
        gbc.writeMem(0x8ea7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd8fa);
        EXPECT(gbc.pc(), 0x8ea9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ea7), 0xcb);
        EXPECT(gbc.readMem(0x8ea8), 0xa8);
        // CB A8 0335
        gbc.setState(0xba90, 0x689d, 0x6740, 0x4d9c, 0x71bb, 0x938a, 0x1, 0x0);
        gbc.writeMem(0xba90, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x689d);
        EXPECT(gbc.pc(), 0xba92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba90), 0xcb);
        EXPECT(gbc.readMem(0xba91), 0xa8);
        // CB A8 0336
        gbc.setState(0x9c7c, 0xcc42, 0x3e30, 0x5350, 0xbfdb, 0xb46b, 0x0, 0x1);
        gbc.writeMem(0x9c7c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcc42);
        EXPECT(gbc.pc(), 0x9c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c7c), 0xcb);
        EXPECT(gbc.readMem(0x9c7d), 0xa8);
        // CB A8 0337
        gbc.setState(0x1ce3, 0x494b, 0xc2f0, 0x785c, 0x7e02, 0x8519, 0x0, 0x1);
        gbc.writeMem(0x1ce3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x494b);
        EXPECT(gbc.pc(), 0x1ce5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0338
        gbc.setState(0xe531, 0x3b54, 0x1360, 0xf958, 0x4ba2, 0x801, 0x0, 0x1);
        gbc.writeMem(0xe531, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3b54);
        EXPECT(gbc.pc(), 0xe533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe531), 0xcb);
        EXPECT(gbc.readMem(0xe532), 0xa8);
        // CB A8 0339
        gbc.setState(0xed2f, 0x5c9b, 0x4970, 0x1c02, 0x691c, 0xa84f, 0x0, 0x0);
        gbc.writeMem(0xed2f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5c9b);
        EXPECT(gbc.pc(), 0xed31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed2f), 0xcb);
        EXPECT(gbc.readMem(0xed30), 0xa8);
        // CB A8 033A
        gbc.setState(0xd6d3, 0x7a79, 0xa360, 0x24b5, 0xc38e, 0x419, 0x0, 0x1);
        gbc.writeMem(0xd6d3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7a79);
        EXPECT(gbc.pc(), 0xd6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d3), 0xcb);
        EXPECT(gbc.readMem(0xd6d4), 0xa8);
        // CB A8 033B
        gbc.setState(0xd972, 0x7731, 0x10e0, 0xfc0d, 0x4236, 0x1527, 0x1, 0x0);
        gbc.writeMem(0xd972, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7731);
        EXPECT(gbc.pc(), 0xd974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd972), 0xcb);
        EXPECT(gbc.readMem(0xd973), 0xa8);
        // CB A8 033C
        gbc.setState(0x1716, 0xc8b9, 0xa050, 0xf8f5, 0x41f0, 0x2bb8, 0x1, 0x0);
        gbc.writeMem(0x1716, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0x1718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 033D
        gbc.setState(0x34ac, 0x63ad, 0x3720, 0x4efd, 0x64b3, 0x72cf, 0x1, 0x1);
        gbc.writeMem(0x34ac, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x63ad);
        EXPECT(gbc.pc(), 0x34ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 033E
        gbc.setState(0x3394, 0x12af, 0x1c70, 0x7be6, 0xb00e, 0xe165, 0x0, 0x1);
        gbc.writeMem(0x3394, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x12af);
        EXPECT(gbc.pc(), 0x3396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 033F
        gbc.setState(0xb4a4, 0x28eb, 0xba0, 0x2787, 0xf200, 0xa26a, 0x1, 0x0);
        gbc.writeMem(0xb4a4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x28eb);
        EXPECT(gbc.pc(), 0xb4a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a4), 0xcb);
        EXPECT(gbc.readMem(0xb4a5), 0xa8);
        // CB A8 0340
        gbc.setState(0x1dc, 0x50af, 0xce40, 0x4387, 0xa137, 0xca19, 0x0, 0x1);
        gbc.writeMem(0x1dc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x50af);
        EXPECT(gbc.pc(), 0x1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0341
        gbc.setState(0x1257, 0xf1ba, 0x72f0, 0x12e5, 0xb8a4, 0x70b4, 0x0, 0x1);
        gbc.writeMem(0x1257, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf1ba);
        EXPECT(gbc.pc(), 0x1259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0342
        gbc.setState(0x5503, 0x25a6, 0x7b30, 0x39c2, 0x372, 0xa6ae, 0x0, 0x1);
        gbc.writeMem(0x5503, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x25a6);
        EXPECT(gbc.pc(), 0x5505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0343
        gbc.setState(0x9516, 0x30d5, 0xafd0, 0x6e95, 0xb97f, 0x5b32, 0x1, 0x1);
        gbc.writeMem(0x9516, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x30d5);
        EXPECT(gbc.pc(), 0x9518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9516), 0xcb);
        EXPECT(gbc.readMem(0x9517), 0xa8);
        // CB A8 0344
        gbc.setState(0xcfa1, 0xbc74, 0x6e50, 0x4f71, 0x6c1d, 0xdcb2, 0x1, 0x1);
        gbc.writeMem(0xcfa1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbc74);
        EXPECT(gbc.pc(), 0xcfa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa1), 0xcb);
        EXPECT(gbc.readMem(0xcfa2), 0xa8);
        // CB A8 0345
        gbc.setState(0x5d68, 0x1b64, 0x8f70, 0x5cb, 0x472, 0x8c, 0x1, 0x1);
        gbc.writeMem(0x5d68, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x1b64);
        EXPECT(gbc.pc(), 0x5d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0346
        gbc.setState(0xf14, 0x5471, 0xb8a0, 0x1b86, 0xbd1a, 0x2cde, 0x0, 0x1);
        gbc.writeMem(0xf14, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5471);
        EXPECT(gbc.pc(), 0xf16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0347
        gbc.setState(0x1d94, 0xb3f, 0x19a0, 0x8346, 0xfcaf, 0x1c31, 0x1, 0x1);
        gbc.writeMem(0x1d94, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb3f);
        EXPECT(gbc.pc(), 0x1d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0348
        gbc.setState(0x28cd, 0x7621, 0x95f0, 0x7a77, 0xeab, 0x72eb, 0x0, 0x0);
        gbc.writeMem(0x28cd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7621);
        EXPECT(gbc.pc(), 0x28cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0349
        gbc.setState(0x76fb, 0x7f85, 0x6270, 0x88b, 0x1a4c, 0x6cc0, 0x1, 0x0);
        gbc.writeMem(0x76fb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7f85);
        EXPECT(gbc.pc(), 0x76fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 034A
        gbc.setState(0x8e85, 0x5d45, 0xee10, 0xa841, 0xe84, 0x5dad, 0x1, 0x1);
        gbc.writeMem(0x8e85, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5d45);
        EXPECT(gbc.pc(), 0x8e87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e85), 0xcb);
        EXPECT(gbc.readMem(0x8e86), 0xa8);
        // CB A8 034B
        gbc.setState(0x273e, 0xe0fe, 0x9550, 0xf465, 0x9029, 0x64ee, 0x0, 0x0);
        gbc.writeMem(0x273e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe0fe);
        EXPECT(gbc.pc(), 0x2740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 034C
        gbc.setState(0x2add, 0xeb7e, 0xac0, 0x1ffd, 0xc695, 0x3939, 0x1, 0x0);
        gbc.writeMem(0x2add, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xeb7e);
        EXPECT(gbc.pc(), 0x2adf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 034D
        gbc.setState(0x322c, 0x3b01, 0x8c70, 0x52d4, 0x66c7, 0xe949, 0x0, 0x1);
        gbc.writeMem(0x322c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3b01);
        EXPECT(gbc.pc(), 0x322e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 034E
        gbc.setState(0x9dc5, 0x5f5d, 0x29b0, 0xf0b6, 0x1409, 0xef6d, 0x0, 0x1);
        gbc.writeMem(0x9dc5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5f5d);
        EXPECT(gbc.pc(), 0x9dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc5), 0xcb);
        EXPECT(gbc.readMem(0x9dc6), 0xa8);
        // CB A8 034F
        gbc.setState(0x79c8, 0xe559, 0x5e10, 0x472d, 0x7768, 0x9a8, 0x0, 0x1);
        gbc.writeMem(0x79c8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe559);
        EXPECT(gbc.pc(), 0x79ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0350
        gbc.setState(0xe651, 0x7bc8, 0xd3e0, 0x3795, 0xc1f5, 0xbb31, 0x0, 0x0);
        gbc.writeMem(0xe651, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7bc8);
        EXPECT(gbc.pc(), 0xe653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe651), 0xcb);
        EXPECT(gbc.readMem(0xe652), 0xa8);
        // CB A8 0351
        gbc.setState(0xa8e1, 0xc4f6, 0x78e0, 0x765, 0x6f3d, 0x9391, 0x1, 0x0);
        gbc.writeMem(0xa8e1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc4f6);
        EXPECT(gbc.pc(), 0xa8e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e1), 0xcb);
        EXPECT(gbc.readMem(0xa8e2), 0xa8);
        // CB A8 0352
        gbc.setState(0x2c54, 0x908a, 0x2830, 0xdee5, 0xc0ac, 0xfb8e, 0x1, 0x0);
        gbc.writeMem(0x2c54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x908a);
        EXPECT(gbc.pc(), 0x2c56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0353
        gbc.setState(0x204b, 0xaa68, 0x6370, 0xdb12, 0x8d04, 0x6595, 0x0, 0x0);
        gbc.writeMem(0x204b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaa68);
        EXPECT(gbc.pc(), 0x204d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0354
        gbc.setState(0xad69, 0xb37, 0xea10, 0xa896, 0x1f57, 0xa5fb, 0x1, 0x1);
        gbc.writeMem(0xad69, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb37);
        EXPECT(gbc.pc(), 0xad6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad69), 0xcb);
        EXPECT(gbc.readMem(0xad6a), 0xa8);
        // CB A8 0355
        gbc.setState(0x3520, 0x63a7, 0x6f30, 0x4b5b, 0xa45d, 0x3bf, 0x0, 0x1);
        gbc.writeMem(0x3520, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0x3522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0356
        gbc.setState(0x1b29, 0x480b, 0xf1b0, 0xa28e, 0x39d4, 0xeb70, 0x1, 0x1);
        gbc.writeMem(0x1b29, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x480b);
        EXPECT(gbc.pc(), 0x1b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0357
        gbc.setState(0x49d5, 0x2826, 0x6420, 0xf08d, 0xc3a8, 0xb18a, 0x0, 0x1);
        gbc.writeMem(0x49d5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x2826);
        EXPECT(gbc.pc(), 0x49d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0358
        gbc.setState(0x8410, 0x9ba3, 0x9310, 0x7a18, 0x5b66, 0xd385, 0x1, 0x0);
        gbc.writeMem(0x8410, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9ba3);
        EXPECT(gbc.pc(), 0x8412);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8410), 0xcb);
        EXPECT(gbc.readMem(0x8411), 0xa8);
        // CB A8 0359
        gbc.setState(0xd99a, 0x9218, 0xd550, 0xa5a, 0x3203, 0xbc6, 0x1, 0x1);
        gbc.writeMem(0xd99a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9218);
        EXPECT(gbc.pc(), 0xd99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd99a), 0xcb);
        EXPECT(gbc.readMem(0xd99b), 0xa8);
        // CB A8 035A
        gbc.setState(0x1cae, 0xacb1, 0x6930, 0xf09f, 0x530, 0xb682, 0x0, 0x0);
        gbc.writeMem(0x1cae, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xacb1);
        EXPECT(gbc.pc(), 0x1cb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 035B
        gbc.setState(0x37a2, 0xfd3d, 0x8b0, 0x5173, 0x3d58, 0xad1a, 0x1, 0x0);
        gbc.writeMem(0x37a2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfd3d);
        EXPECT(gbc.pc(), 0x37a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 035C
        gbc.setState(0x2309, 0x51b3, 0x14d0, 0x3907, 0x4b7c, 0x8e9d, 0x0, 0x1);
        gbc.writeMem(0x2309, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x51b3);
        EXPECT(gbc.pc(), 0x230b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 035D
        gbc.setState(0x6015, 0x1c9c, 0x10f0, 0x7b9b, 0x429e, 0x82ec, 0x1, 0x1);
        gbc.writeMem(0x6015, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1c9c);
        EXPECT(gbc.pc(), 0x6017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 035E
        gbc.setState(0x14b0, 0x620c, 0xe330, 0x50bf, 0xdd67, 0xa211, 0x0, 0x1);
        gbc.writeMem(0x14b0, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x620c);
        EXPECT(gbc.pc(), 0x14b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 035F
        gbc.setState(0x64f3, 0xe8a3, 0x4ec0, 0xab2d, 0x5132, 0x18bd, 0x0, 0x1);
        gbc.writeMem(0x64f3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe8a3);
        EXPECT(gbc.pc(), 0x64f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0360
        gbc.setState(0xef49, 0x638c, 0x73a0, 0x10a8, 0x9f25, 0xe77, 0x1, 0x0);
        gbc.writeMem(0xef49, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x638c);
        EXPECT(gbc.pc(), 0xef4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef49), 0xcb);
        EXPECT(gbc.readMem(0xef4a), 0xa8);
        // CB A8 0361
        gbc.setState(0x7fcf, 0xdde0, 0x760, 0x57db, 0x7a3, 0x57cd, 0x1, 0x1);
        gbc.writeMem(0x7fcf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdde0);
        EXPECT(gbc.pc(), 0x7fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0362
        gbc.setState(0x12cd, 0x9a61, 0x8e80, 0x3c89, 0x55c6, 0xf21a, 0x0, 0x0);
        gbc.writeMem(0x12cd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9a61);
        EXPECT(gbc.pc(), 0x12cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0363
        gbc.setState(0x82d, 0x4ecc, 0xdbc0, 0xf7f7, 0x6776, 0xbe6b, 0x0, 0x1);
        gbc.writeMem(0x82d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4ecc);
        EXPECT(gbc.pc(), 0x82f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0364
        gbc.setState(0x1c63, 0x32b9, 0x6270, 0xc98a, 0xaa28, 0xd053, 0x1, 0x0);
        gbc.writeMem(0x1c63, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x32b9);
        EXPECT(gbc.pc(), 0x1c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0365
        gbc.setState(0x29fb, 0xe430, 0x3a30, 0x1194, 0x5043, 0xfb3b, 0x1, 0x1);
        gbc.writeMem(0x29fb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe430);
        EXPECT(gbc.pc(), 0x29fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0366
        gbc.setState(0xe21c, 0xbf14, 0x76c0, 0xa125, 0x2389, 0x3ecc, 0x1, 0x1);
        gbc.writeMem(0xe21c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbf14);
        EXPECT(gbc.pc(), 0xe21e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe21c), 0xcb);
        EXPECT(gbc.readMem(0xe21d), 0xa8);
        // CB A8 0367
        gbc.setState(0x4f71, 0x7083, 0x8f40, 0xfa23, 0x718e, 0x2e46, 0x1, 0x0);
        gbc.writeMem(0x4f71, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7083);
        EXPECT(gbc.pc(), 0x4f73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0368
        gbc.setState(0x1d5e, 0x7ee8, 0xfcb0, 0xae4c, 0xb8b2, 0xce61, 0x1, 0x1);
        gbc.writeMem(0x1d5e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7ee8);
        EXPECT(gbc.pc(), 0x1d60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0369
        gbc.setState(0x3f62, 0xb97d, 0x9380, 0x33b7, 0x3e01, 0x15a, 0x0, 0x0);
        gbc.writeMem(0x3f62, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb97d);
        EXPECT(gbc.pc(), 0x3f64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 036A
        gbc.setState(0xd599, 0x413a, 0x2570, 0x1585, 0x4bc, 0x6d0, 0x0, 0x0);
        gbc.writeMem(0xd599, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x413a);
        EXPECT(gbc.pc(), 0xd59b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd599), 0xcb);
        EXPECT(gbc.readMem(0xd59a), 0xa8);
        // CB A8 036B
        gbc.setState(0xb7e1, 0x4748, 0x9010, 0xeaed, 0x84f5, 0x8f4f, 0x0, 0x1);
        gbc.writeMem(0xb7e1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4748);
        EXPECT(gbc.pc(), 0xb7e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7e1), 0xcb);
        EXPECT(gbc.readMem(0xb7e2), 0xa8);
        // CB A8 036C
        gbc.setState(0xa89e, 0xf172, 0x49d0, 0xa6bb, 0xea47, 0x4f12, 0x0, 0x0);
        gbc.writeMem(0xa89e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0xa8a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa89e), 0xcb);
        EXPECT(gbc.readMem(0xa89f), 0xa8);
        // CB A8 036D
        gbc.setState(0xc217, 0x5e14, 0x42d0, 0x627c, 0xaae7, 0x623c, 0x1, 0x0);
        gbc.writeMem(0xc217, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5e14);
        EXPECT(gbc.pc(), 0xc219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc217), 0xcb);
        EXPECT(gbc.readMem(0xc218), 0xa8);
        // CB A8 036E
        gbc.setState(0x30b5, 0xe6d6, 0x72d0, 0xf24, 0xcce8, 0x90ac, 0x1, 0x1);
        gbc.writeMem(0x30b5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe6d6);
        EXPECT(gbc.pc(), 0x30b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 036F
        gbc.setState(0x5603, 0xd19c, 0x16c0, 0x1553, 0x92b5, 0xece9, 0x0, 0x0);
        gbc.writeMem(0x5603, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd19c);
        EXPECT(gbc.pc(), 0x5605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0370
        gbc.setState(0x18b5, 0xa517, 0xfce0, 0xcfd2, 0xf877, 0x52a9, 0x0, 0x0);
        gbc.writeMem(0x18b5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa517);
        EXPECT(gbc.pc(), 0x18b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0372
        gbc.setState(0x1eb, 0x3f96, 0x9e00, 0x374c, 0x5bcc, 0xe852, 0x0, 0x1);
        gbc.writeMem(0x1eb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3f96);
        EXPECT(gbc.pc(), 0x1ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0373
        gbc.setState(0x3802, 0xbcc5, 0x89a0, 0xa3, 0xe980, 0xdd3e, 0x1, 0x0);
        gbc.writeMem(0x3802, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbcc5);
        EXPECT(gbc.pc(), 0x3804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0375
        gbc.setState(0x91cb, 0x5430, 0xa30, 0xa16d, 0x7a3c, 0xbfae, 0x1, 0x0);
        gbc.writeMem(0x91cb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5430);
        EXPECT(gbc.pc(), 0x91cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91cb), 0xcb);
        EXPECT(gbc.readMem(0x91cc), 0xa8);
        // CB A8 0376
        gbc.setState(0x88f, 0xa7a9, 0x9dd0, 0xf084, 0x3e0a, 0xaefe, 0x0, 0x1);
        gbc.writeMem(0x88f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xa7a9);
        EXPECT(gbc.pc(), 0x891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0377
        gbc.setState(0x9e54, 0x7c17, 0x4aa0, 0x250e, 0x2c8f, 0x4af1, 0x1, 0x0);
        gbc.writeMem(0x9e54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7c17);
        EXPECT(gbc.pc(), 0x9e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e54), 0xcb);
        EXPECT(gbc.readMem(0x9e55), 0xa8);
        // CB A8 0378
        gbc.setState(0xf44, 0x2963, 0x57f0, 0xc550, 0x1700, 0x265c, 0x0, 0x1);
        gbc.writeMem(0xf44, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2963);
        EXPECT(gbc.pc(), 0xf46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0379
        gbc.setState(0xc56, 0x2b94, 0xa670, 0xc295, 0x802e, 0x3681, 0x1, 0x0);
        gbc.writeMem(0xc56, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2b94);
        EXPECT(gbc.pc(), 0xc58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 037A
        gbc.setState(0x8f6c, 0xac31, 0x79a0, 0xb5c5, 0x7d0d, 0x6913, 0x1, 0x0);
        gbc.writeMem(0x8f6c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xac31);
        EXPECT(gbc.pc(), 0x8f6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f6c), 0xcb);
        EXPECT(gbc.readMem(0x8f6d), 0xa8);
        // CB A8 037B
        gbc.setState(0x802e, 0xc190, 0xf120, 0x2683, 0xf908, 0x3577, 0x1, 0x1);
        gbc.writeMem(0x802e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc190);
        EXPECT(gbc.pc(), 0x8030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x802e), 0xcb);
        EXPECT(gbc.readMem(0x802f), 0xa8);
        // CB A8 037D
        gbc.setState(0x375, 0xad29, 0xf30, 0x5bd3, 0x4df9, 0x1961, 0x0, 0x0);
        gbc.writeMem(0x375, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xad29);
        EXPECT(gbc.pc(), 0x377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 037E
        gbc.setState(0x500e, 0xe8bf, 0x3440, 0xc5df, 0x2e27, 0x6aa6, 0x1, 0x0);
        gbc.writeMem(0x500e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe8bf);
        EXPECT(gbc.pc(), 0x5010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 037F
        gbc.setState(0x13e8, 0xac37, 0x3c70, 0x40f1, 0x6c3d, 0xf85f, 0x1, 0x1);
        gbc.writeMem(0x13e8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xac37);
        EXPECT(gbc.pc(), 0x13ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0380
        gbc.setState(0x5b7e, 0xb591, 0x3b30, 0x8448, 0xa33b, 0x855c, 0x1, 0x1);
        gbc.writeMem(0x5b7e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb591);
        EXPECT(gbc.pc(), 0x5b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0381
        gbc.setState(0x99aa, 0x6f32, 0xbfe0, 0xc7, 0xfb, 0x59a, 0x1, 0x0);
        gbc.writeMem(0x99aa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6f32);
        EXPECT(gbc.pc(), 0x99ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99aa), 0xcb);
        EXPECT(gbc.readMem(0x99ab), 0xa8);
        // CB A8 0382
        gbc.setState(0x269a, 0x5181, 0xe470, 0x83b8, 0xb1a, 0xcb0, 0x0, 0x1);
        gbc.writeMem(0x269a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5181);
        EXPECT(gbc.pc(), 0x269c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0383
        gbc.setState(0x4578, 0x7543, 0x59b0, 0xe7af, 0x8afe, 0x5d0d, 0x0, 0x0);
        gbc.writeMem(0x4578, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x7543);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0384
        gbc.setState(0x7cf9, 0x458d, 0xd680, 0x816c, 0x589a, 0xacbc, 0x1, 0x1);
        gbc.writeMem(0x7cf9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x458d);
        EXPECT(gbc.pc(), 0x7cfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0385
        gbc.setState(0x2a0b, 0x4f58, 0xaf90, 0x96c5, 0x65e1, 0xfc48, 0x1, 0x1);
        gbc.writeMem(0x2a0b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4f58);
        EXPECT(gbc.pc(), 0x2a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0386
        gbc.setState(0x20cf, 0x335f, 0xf5c0, 0xfd5f, 0x9027, 0x49f0, 0x0, 0x1);
        gbc.writeMem(0x20cf, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x335f);
        EXPECT(gbc.pc(), 0x20d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0387
        gbc.setState(0xec62, 0xf025, 0x96c0, 0xb6, 0x85c, 0x80a7, 0x0, 0x0);
        gbc.writeMem(0xec62, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf025);
        EXPECT(gbc.pc(), 0xec64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec62), 0xcb);
        EXPECT(gbc.readMem(0xec63), 0xa8);
        // CB A8 0388
        gbc.setState(0x9ad, 0x6c0b, 0xc590, 0x53a5, 0xa835, 0xfc85, 0x1, 0x1);
        gbc.writeMem(0x9ad, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6c0b);
        EXPECT(gbc.pc(), 0x9af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0389
        gbc.setState(0x43ef, 0x63db, 0x6570, 0x14fd, 0xd781, 0x1cc5, 0x1, 0x1);
        gbc.writeMem(0x43ef, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x63db);
        EXPECT(gbc.pc(), 0x43f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 038A
        gbc.setState(0xc07d, 0xa690, 0x730, 0x7827, 0xb8c9, 0x1fad, 0x1, 0x0);
        gbc.writeMem(0xc07d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa690);
        EXPECT(gbc.pc(), 0xc07f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc07d), 0xcb);
        EXPECT(gbc.readMem(0xc07e), 0xa8);
        // CB A8 038B
        gbc.setState(0x4594, 0xdfdd, 0xf4a0, 0x83b4, 0x7084, 0xc30a, 0x0, 0x1);
        gbc.writeMem(0x4594, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xdfdd);
        EXPECT(gbc.pc(), 0x4596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 038C
        gbc.setState(0xe60a, 0x33ae, 0xf940, 0x309a, 0xf510, 0x28a5, 0x1, 0x1);
        gbc.writeMem(0xe60a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x33ae);
        EXPECT(gbc.pc(), 0xe60c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe60a), 0xcb);
        EXPECT(gbc.readMem(0xe60b), 0xa8);
        // CB A8 038D
        gbc.setState(0xccc8, 0xdd3e, 0x6760, 0xf1c, 0xb034, 0x55a9, 0x0, 0x1);
        gbc.writeMem(0xccc8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdd3e);
        EXPECT(gbc.pc(), 0xccca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccc8), 0xcb);
        EXPECT(gbc.readMem(0xccc9), 0xa8);
        // CB A8 038E
        gbc.setState(0x491c, 0x4248, 0x9ff0, 0xcac6, 0x1222, 0x6892, 0x1, 0x1);
        gbc.writeMem(0x491c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4248);
        EXPECT(gbc.pc(), 0x491e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 038F
        gbc.setState(0x40fb, 0x51ad, 0xfc90, 0xfac2, 0xca2e, 0x5c58, 0x0, 0x1);
        gbc.writeMem(0x40fb, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x51ad);
        EXPECT(gbc.pc(), 0x40fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 0390
        gbc.setState(0x4058, 0x107a, 0x7740, 0xbfad, 0x5fb8, 0x7756, 0x1, 0x1);
        gbc.writeMem(0x4058, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x107a);
        EXPECT(gbc.pc(), 0x405a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0391
        gbc.setState(0x27a3, 0xba5e, 0x8f60, 0xb8eb, 0x66d4, 0x897d, 0x1, 0x0);
        gbc.writeMem(0x27a3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xba5e);
        EXPECT(gbc.pc(), 0x27a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0393
        gbc.setState(0x4d6e, 0x241a, 0x20c0, 0x6a8f, 0xb688, 0xae32, 0x0, 0x1);
        gbc.writeMem(0x4d6e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x241a);
        EXPECT(gbc.pc(), 0x4d70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0394
        gbc.setState(0x2383, 0xd28d, 0x3ec0, 0x9acf, 0x3b43, 0x9ddf, 0x1, 0x1);
        gbc.writeMem(0x2383, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd28d);
        EXPECT(gbc.pc(), 0x2385);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0395
        gbc.setState(0x3113, 0xc37f, 0x3280, 0x8eb6, 0x803b, 0x9a5c, 0x0, 0x0);
        gbc.writeMem(0x3113, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xc37f);
        EXPECT(gbc.pc(), 0x3115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 0396
        gbc.setState(0xa7a3, 0x66b2, 0x57f0, 0x7cc1, 0x6aca, 0x78b0, 0x1, 0x0);
        gbc.writeMem(0xa7a3, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x66b2);
        EXPECT(gbc.pc(), 0xa7a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7a3), 0xcb);
        EXPECT(gbc.readMem(0xa7a4), 0xa8);
        // CB A8 0397
        gbc.setState(0xba83, 0x3b88, 0xc240, 0x6513, 0x96b2, 0xd2bf, 0x0, 0x1);
        gbc.writeMem(0xba83, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3b88);
        EXPECT(gbc.pc(), 0xba85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba83), 0xcb);
        EXPECT(gbc.readMem(0xba84), 0xa8);
        // CB A8 0399
        gbc.setState(0xda7a, 0xc, 0xecb0, 0x7cae, 0x5185, 0xe992, 0x0, 0x0);
        gbc.writeMem(0xda7a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc);
        EXPECT(gbc.pc(), 0xda7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda7a), 0xcb);
        EXPECT(gbc.readMem(0xda7b), 0xa8);
        // CB A8 039A
        gbc.setState(0x4a45, 0xfa24, 0xece0, 0x1f62, 0xc02d, 0xe19f, 0x0, 0x0);
        gbc.writeMem(0x4a45, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfa24);
        EXPECT(gbc.pc(), 0x4a47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 039B
        gbc.setState(0x958c, 0x5a75, 0xdd00, 0x9330, 0x8f64, 0x8006, 0x0, 0x1);
        gbc.writeMem(0x958c, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5a75);
        EXPECT(gbc.pc(), 0x958e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958c), 0xcb);
        EXPECT(gbc.readMem(0x958d), 0xa8);
        // CB A8 039C
        gbc.setState(0xd6f1, 0x898d, 0xaa30, 0x48d0, 0x11e1, 0x9051, 0x0, 0x0);
        gbc.writeMem(0xd6f1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x898d);
        EXPECT(gbc.pc(), 0xd6f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f1), 0xcb);
        EXPECT(gbc.readMem(0xd6f2), 0xa8);
        // CB A8 039D
        gbc.setState(0x303f, 0xfd25, 0xbb30, 0x15a8, 0xf28e, 0xd54a, 0x1, 0x0);
        gbc.writeMem(0x303f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfd25);
        EXPECT(gbc.pc(), 0x3041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 039E
        gbc.setState(0x106d, 0x701a, 0xcb60, 0xce3f, 0x2af1, 0x3d83, 0x0, 0x0);
        gbc.writeMem(0x106d, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x701a);
        EXPECT(gbc.pc(), 0x106f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 039F
        gbc.setState(0x4233, 0xfdd4, 0xd6a0, 0x473b, 0x75b7, 0x5f52, 0x0, 0x1);
        gbc.writeMem(0x4233, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xfdd4);
        EXPECT(gbc.pc(), 0x4235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03A0
        gbc.setState(0xd3fc, 0x5537, 0xe870, 0x7848, 0x2fb, 0x5c82, 0x0, 0x1);
        gbc.writeMem(0xd3fc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5537);
        EXPECT(gbc.pc(), 0xd3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3fc), 0xcb);
        EXPECT(gbc.readMem(0xd3fd), 0xa8);
        // CB A8 03A1
        gbc.setState(0x884e, 0xcf1, 0x110, 0x9d5f, 0x4dea, 0x1b1d, 0x1, 0x1);
        gbc.writeMem(0x884e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcf1);
        EXPECT(gbc.pc(), 0x8850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884e), 0xcb);
        EXPECT(gbc.readMem(0x884f), 0xa8);
        // CB A8 03A2
        gbc.setState(0x33ce, 0xb4c2, 0x62a0, 0xa4a5, 0xea00, 0x25dd, 0x1, 0x1);
        gbc.writeMem(0x33ce, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb4c2);
        EXPECT(gbc.pc(), 0x33d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03A3
        gbc.setState(0x5513, 0x787e, 0x9420, 0x175c, 0x2a84, 0x4b72, 0x1, 0x0);
        gbc.writeMem(0x5513, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x787e);
        EXPECT(gbc.pc(), 0x5515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03A4
        gbc.setState(0x71b5, 0x292f, 0xdb50, 0xc3af, 0x29a, 0x26cf, 0x1, 0x0);
        gbc.writeMem(0x71b5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x292f);
        EXPECT(gbc.pc(), 0x71b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03A6
        gbc.setState(0xe2d2, 0x9373, 0xd790, 0x1236, 0x5f8a, 0x94bd, 0x0, 0x1);
        gbc.writeMem(0xe2d2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9373);
        EXPECT(gbc.pc(), 0xe2d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2d2), 0xcb);
        EXPECT(gbc.readMem(0xe2d3), 0xa8);
        // CB A8 03A7
        gbc.setState(0x79f9, 0x750d, 0x26e0, 0x76b, 0xb1d9, 0x861d, 0x1, 0x0);
        gbc.writeMem(0x79f9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x750d);
        EXPECT(gbc.pc(), 0x79fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03A8
        gbc.setState(0x6d1e, 0xf013, 0x4860, 0x1a8b, 0x697c, 0x6050, 0x1, 0x0);
        gbc.writeMem(0x6d1e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf013);
        EXPECT(gbc.pc(), 0x6d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03A9
        gbc.setState(0x214b, 0x5995, 0xee90, 0x195d, 0x3f63, 0x62f5, 0x0, 0x1);
        gbc.writeMem(0x214b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5995);
        EXPECT(gbc.pc(), 0x214d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03AA
        gbc.setState(0xd7fa, 0x74f0, 0xd7c0, 0xd240, 0x4a31, 0x2b50, 0x0, 0x0);
        gbc.writeMem(0xd7fa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x74f0);
        EXPECT(gbc.pc(), 0xd7fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7fa), 0xcb);
        EXPECT(gbc.readMem(0xd7fb), 0xa8);
        // CB A8 03AB
        gbc.setState(0x8ddd, 0x9a13, 0xc8f0, 0xd1a5, 0x1dea, 0x29fc, 0x0, 0x1);
        gbc.writeMem(0x8ddd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9a13);
        EXPECT(gbc.pc(), 0x8ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ddd), 0xcb);
        EXPECT(gbc.readMem(0x8dde), 0xa8);
        // CB A8 03AC
        gbc.setState(0x3dd1, 0x7eed, 0xaf40, 0xc94d, 0x350a, 0x3fa, 0x0, 0x1);
        gbc.writeMem(0x3dd1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7eed);
        EXPECT(gbc.pc(), 0x3dd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03AD
        gbc.setState(0xa496, 0xc1fa, 0xad40, 0xa98e, 0x555c, 0x8aea, 0x0, 0x0);
        gbc.writeMem(0xa496, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc1fa);
        EXPECT(gbc.pc(), 0xa498);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa496), 0xcb);
        EXPECT(gbc.readMem(0xa497), 0xa8);
        // CB A8 03AE
        gbc.setState(0x3ec1, 0x167c, 0x4060, 0xc95, 0xa40d, 0x828c, 0x0, 0x1);
        gbc.writeMem(0x3ec1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x167c);
        EXPECT(gbc.pc(), 0x3ec3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03AF
        gbc.setState(0x81fd, 0xe9e8, 0xfdc0, 0xf684, 0x8aa6, 0x3c6a, 0x1, 0x0);
        gbc.writeMem(0x81fd, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe9e8);
        EXPECT(gbc.pc(), 0x81ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81fd), 0xcb);
        EXPECT(gbc.readMem(0x81fe), 0xa8);
        // CB A8 03B0
        gbc.setState(0xf89, 0x67e1, 0x4160, 0x62a5, 0x8f3, 0x5cd2, 0x0, 0x0);
        gbc.writeMem(0xf89, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x67e1);
        EXPECT(gbc.pc(), 0xf8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03B1
        gbc.setState(0x6857, 0xa56a, 0xeeb0, 0xdf95, 0x718c, 0x360e, 0x0, 0x1);
        gbc.writeMem(0x6857, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xa56a);
        EXPECT(gbc.pc(), 0x6859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03B2
        gbc.setState(0x5a41, 0x88d4, 0x7550, 0xf631, 0x1838, 0x8f81, 0x1, 0x0);
        gbc.writeMem(0x5a41, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x88d4);
        EXPECT(gbc.pc(), 0x5a43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03B3
        gbc.setState(0x1dfe, 0xf50, 0xb720, 0x8e1c, 0xd723, 0xb996, 0x1, 0x1);
        gbc.writeMem(0x1dfe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf50);
        EXPECT(gbc.pc(), 0x1e00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03B5
        gbc.setState(0x1b4b, 0x179f, 0x7260, 0xd45d, 0x9fcd, 0xf4ec, 0x0, 0x0);
        gbc.writeMem(0x1b4b, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x179f);
        EXPECT(gbc.pc(), 0x1b4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03B6
        gbc.setState(0x46a8, 0x5aad, 0x6a60, 0x691b, 0x66d3, 0x5463, 0x0, 0x0);
        gbc.writeMem(0x46a8, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5aad);
        EXPECT(gbc.pc(), 0x46aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03B7
        gbc.setState(0xdde4, 0xb766, 0x6950, 0xca2d, 0xf6a2, 0xf50, 0x1, 0x0);
        gbc.writeMem(0xdde4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xb766);
        EXPECT(gbc.pc(), 0xdde6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde4), 0xcb);
        EXPECT(gbc.readMem(0xdde5), 0xa8);
        // CB A8 03B8
        gbc.setState(0x5d54, 0x1624, 0x5670, 0x50c0, 0xe7fa, 0x11c9, 0x0, 0x1);
        gbc.writeMem(0x5d54, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1624);
        EXPECT(gbc.pc(), 0x5d56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03B9
        gbc.setState(0x856f, 0x8245, 0xb3b0, 0xe93a, 0xf89b, 0x12e3, 0x0, 0x0);
        gbc.writeMem(0x856f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8245);
        EXPECT(gbc.pc(), 0x8571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x856f), 0xcb);
        EXPECT(gbc.readMem(0x8570), 0xa8);
        // CB A8 03BA
        gbc.setState(0x159, 0x1e6, 0xc6e0, 0xad41, 0x47bb, 0x9975, 0x0, 0x0);
        gbc.writeMem(0x159, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x1e6);
        EXPECT(gbc.pc(), 0x15b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03BB
        gbc.setState(0xacea, 0x1f6c, 0x9740, 0xb20f, 0x8dd2, 0xbba1, 0x1, 0x0);
        gbc.writeMem(0xacea, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1f6c);
        EXPECT(gbc.pc(), 0xacec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacea), 0xcb);
        EXPECT(gbc.readMem(0xaceb), 0xa8);
        // CB A8 03BC
        gbc.setState(0x2aa, 0xb1d9, 0xaca0, 0x66d3, 0x741e, 0x8cc1, 0x0, 0x0);
        gbc.writeMem(0x2aa, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xb1d9);
        EXPECT(gbc.pc(), 0x2ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03BD
        gbc.setState(0x6f8e, 0x59eb, 0xbc0, 0x860a, 0xa37f, 0xea7e, 0x0, 0x1);
        gbc.writeMem(0x6f8e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x59eb);
        EXPECT(gbc.pc(), 0x6f90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03BE
        gbc.setState(0xcf0e, 0x614, 0x8610, 0x31a8, 0x2e92, 0xc97a, 0x1, 0x1);
        gbc.writeMem(0xcf0e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x614);
        EXPECT(gbc.pc(), 0xcf10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf0e), 0xcb);
        EXPECT(gbc.readMem(0xcf0f), 0xa8);
        // CB A8 03BF
        gbc.setState(0xcf70, 0x1aa1, 0xc3a0, 0x5703, 0xd852, 0x8699, 0x1, 0x1);
        gbc.writeMem(0xcf70, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1aa1);
        EXPECT(gbc.pc(), 0xcf72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf70), 0xcb);
        EXPECT(gbc.readMem(0xcf71), 0xa8);
        // CB A8 03C0
        gbc.setState(0xaee5, 0xb942, 0xe6f0, 0x58d2, 0x5d19, 0x81e7, 0x0, 0x1);
        gbc.writeMem(0xaee5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb942);
        EXPECT(gbc.pc(), 0xaee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee5), 0xcb);
        EXPECT(gbc.readMem(0xaee6), 0xa8);
        // CB A8 03C1
        gbc.setState(0xc9f7, 0xbd34, 0x1010, 0x1544, 0x735b, 0xbfb9, 0x1, 0x1);
        gbc.writeMem(0xc9f7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xbd34);
        EXPECT(gbc.pc(), 0xc9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9f7), 0xcb);
        EXPECT(gbc.readMem(0xc9f8), 0xa8);
        // CB A8 03C2
        gbc.setState(0x16ee, 0xbf7c, 0xd170, 0x1005, 0x8684, 0x4eb6, 0x1, 0x1);
        gbc.writeMem(0x16ee, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbf7c);
        EXPECT(gbc.pc(), 0x16f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03C3
        gbc.setState(0x6918, 0x5f99, 0x1670, 0xe886, 0x96eb, 0x3fac, 0x0, 0x1);
        gbc.writeMem(0x6918, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x5f99);
        EXPECT(gbc.pc(), 0x691a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03C4
        gbc.setState(0x6dd2, 0x8056, 0x5630, 0x675, 0x1e90, 0x417f, 0x0, 0x0);
        gbc.writeMem(0x6dd2, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8056);
        EXPECT(gbc.pc(), 0x6dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03C5
        gbc.setState(0x5782, 0xc88, 0x99d0, 0xf2c1, 0xcce8, 0xa706, 0x1, 0x1);
        gbc.writeMem(0x5782, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc88);
        EXPECT(gbc.pc(), 0x5784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03C6
        gbc.setState(0x133e, 0xd8b8, 0xa700, 0xe439, 0x3a6e, 0xbf3f, 0x0, 0x1);
        gbc.writeMem(0x133e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd8b8);
        EXPECT(gbc.pc(), 0x1340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03C7
        gbc.setState(0xec82, 0x8d92, 0x6420, 0x3059, 0xfcf9, 0x7074, 0x0, 0x1);
        gbc.writeMem(0xec82, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x8d92);
        EXPECT(gbc.pc(), 0xec84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec82), 0xcb);
        EXPECT(gbc.readMem(0xec83), 0xa8);
        // CB A8 03C8
        gbc.setState(0xbd48, 0x2f89, 0x59b0, 0xe6d1, 0x7f53, 0xcc9f, 0x0, 0x1);
        gbc.writeMem(0xbd48, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2f89);
        EXPECT(gbc.pc(), 0xbd4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd48), 0xcb);
        EXPECT(gbc.readMem(0xbd49), 0xa8);
        // CB A8 03C9
        gbc.setState(0x7a15, 0xce9d, 0x6d80, 0xda1e, 0xa249, 0xb21a, 0x1, 0x1);
        gbc.writeMem(0x7a15, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xce9d);
        EXPECT(gbc.pc(), 0x7a17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03CA
        gbc.setState(0x3ba, 0xb72e, 0x5990, 0x667d, 0xb35b, 0x26c4, 0x0, 0x1);
        gbc.writeMem(0x3ba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb72e);
        EXPECT(gbc.pc(), 0x3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03CB
        gbc.setState(0x9362, 0x7ddb, 0x2db0, 0xb92b, 0xfad, 0x8fc5, 0x0, 0x0);
        gbc.writeMem(0x9362, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7ddb);
        EXPECT(gbc.pc(), 0x9364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9362), 0xcb);
        EXPECT(gbc.readMem(0x9363), 0xa8);
        // CB A8 03CC
        gbc.setState(0x5d51, 0xbc7b, 0x60e0, 0x9fc0, 0x832c, 0xc418, 0x1, 0x0);
        gbc.writeMem(0x5d51, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xbc7b);
        EXPECT(gbc.pc(), 0x5d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03CD
        gbc.setState(0x4088, 0x25ba, 0xdf20, 0x8d96, 0xfe9c, 0x8882, 0x0, 0x1);
        gbc.writeMem(0x4088, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x25ba);
        EXPECT(gbc.pc(), 0x408a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03CE
        gbc.setState(0x1646, 0xa45e, 0x67e0, 0x1831, 0x9e1, 0xe687, 0x1, 0x0);
        gbc.writeMem(0x1646, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa45e);
        EXPECT(gbc.pc(), 0x1648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03CF
        gbc.setState(0xe957, 0x36b4, 0x9b40, 0x66e, 0xcb33, 0x56d, 0x0, 0x0);
        gbc.writeMem(0xe957, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x36b4);
        EXPECT(gbc.pc(), 0xe959);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe957), 0xcb);
        EXPECT(gbc.readMem(0xe958), 0xa8);
        // CB A8 03D0
        gbc.setState(0x2a30, 0xd6b4, 0x1520, 0x73d9, 0x1aa2, 0x7b26, 0x0, 0x0);
        gbc.writeMem(0x2a30, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd6b4);
        EXPECT(gbc.pc(), 0x2a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03D1
        gbc.setState(0xc3ba, 0x97d3, 0x5f60, 0xb46a, 0xaf3, 0xa730, 0x0, 0x0);
        gbc.writeMem(0xc3ba, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x97d3);
        EXPECT(gbc.pc(), 0xc3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ba), 0xcb);
        EXPECT(gbc.readMem(0xc3bb), 0xa8);
        // CB A8 03D2
        gbc.setState(0x2a1, 0x457e, 0x1450, 0x59fc, 0x2e8f, 0xcf04, 0x0, 0x1);
        gbc.writeMem(0x2a1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x457e);
        EXPECT(gbc.pc(), 0x2a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03D3
        gbc.setState(0xa7d1, 0x53b5, 0xad20, 0x50d5, 0xee3, 0xcebf, 0x0, 0x0);
        gbc.writeMem(0xa7d1, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x53b5);
        EXPECT(gbc.pc(), 0xa7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d1), 0xcb);
        EXPECT(gbc.readMem(0xa7d2), 0xa8);
        // CB A8 03D4
        gbc.setState(0x5cb6, 0xbadc, 0x1a80, 0x1a73, 0xd52c, 0x8e6e, 0x0, 0x0);
        gbc.writeMem(0x5cb6, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xbadc);
        EXPECT(gbc.pc(), 0x5cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03D5
        gbc.setState(0x9fc7, 0x69ab, 0x7050, 0xb8a1, 0x738f, 0xe84a, 0x1, 0x1);
        gbc.writeMem(0x9fc7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x69ab);
        EXPECT(gbc.pc(), 0x9fc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fc7), 0xcb);
        EXPECT(gbc.readMem(0x9fc8), 0xa8);
        // CB A8 03D6
        gbc.setState(0xb867, 0xe440, 0x28f0, 0x39c2, 0xaf, 0xfef4, 0x0, 0x1);
        gbc.writeMem(0xb867, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe440);
        EXPECT(gbc.pc(), 0xb869);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb867), 0xcb);
        EXPECT(gbc.readMem(0xb868), 0xa8);
        // CB A8 03D7
        gbc.setState(0x657f, 0xd327, 0xce10, 0xe694, 0x43fc, 0xe870, 0x1, 0x0);
        gbc.writeMem(0x657f, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd327);
        EXPECT(gbc.pc(), 0x6581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03D8
        gbc.setState(0xd9a7, 0xebd8, 0xc820, 0x27f7, 0x2ae0, 0x6f09, 0x1, 0x0);
        gbc.writeMem(0xd9a7, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xebd8);
        EXPECT(gbc.pc(), 0xd9a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a7), 0xcb);
        EXPECT(gbc.readMem(0xd9a8), 0xa8);
        // CB A8 03D9
        gbc.setState(0x57ea, 0x8e0a, 0xad0, 0xc179, 0xeee6, 0x128, 0x0, 0x0);
        gbc.writeMem(0x57ea, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x8e0a);
        EXPECT(gbc.pc(), 0x57ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03DA
        gbc.setState(0x5bb4, 0x3fc4, 0xce50, 0xcb09, 0x593b, 0x7079, 0x1, 0x1);
        gbc.writeMem(0x5bb4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x3fc4);
        EXPECT(gbc.pc(), 0x5bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03DB
        gbc.setState(0xbcbc, 0xf90e, 0xecc0, 0xdacd, 0xb36b, 0x9a48, 0x0, 0x0);
        gbc.writeMem(0xbcbc, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf90e);
        EXPECT(gbc.pc(), 0xbcbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcbc), 0xcb);
        EXPECT(gbc.readMem(0xbcbd), 0xa8);
        // CB A8 03DC
        gbc.setState(0x455a, 0xedd9, 0xc960, 0x5b43, 0x82c5, 0x979b, 0x0, 0x1);
        gbc.writeMem(0x455a, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xedd9);
        EXPECT(gbc.pc(), 0x455c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03DD
        gbc.setState(0xe8f4, 0x9b6c, 0xe0d0, 0xdb42, 0xaa6e, 0x8c45, 0x0, 0x0);
        gbc.writeMem(0xe8f4, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9b6c);
        EXPECT(gbc.pc(), 0xe8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8f4), 0xcb);
        EXPECT(gbc.readMem(0xe8f5), 0xa8);
        // CB A8 03DE
        gbc.setState(0x17ab, 0x4abc, 0x90, 0x9c56, 0x6038, 0x40cf, 0x0, 0x0);
        gbc.writeMem(0x17ab, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4abc);
        EXPECT(gbc.pc(), 0x17ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03DF
        gbc.setState(0xa242, 0x97ee, 0x9b10, 0x2446, 0xcbfd, 0x3a9d, 0x0, 0x0);
        gbc.writeMem(0xa242, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x97ee);
        EXPECT(gbc.pc(), 0xa244);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa242), 0xcb);
        EXPECT(gbc.readMem(0xa243), 0xa8);
        // CB A8 03E1
        gbc.setState(0xa04, 0x8fd, 0x7d00, 0x6e07, 0x450d, 0x2ba8, 0x0, 0x1);
        gbc.writeMem(0xa04, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8fd);
        EXPECT(gbc.pc(), 0xa06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03E2
        gbc.setState(0x8c93, 0xc4c5, 0xa80, 0x795a, 0xf665, 0xa67c, 0x1, 0x1);
        gbc.writeMem(0x8c93, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc4c5);
        EXPECT(gbc.pc(), 0x8c95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c93), 0xcb);
        EXPECT(gbc.readMem(0x8c94), 0xa8);
        // CB A8 03E3
        gbc.setState(0xc111, 0xc49c, 0x9020, 0xce74, 0xa078, 0x9841, 0x1, 0x0);
        gbc.writeMem(0xc111, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc49c);
        EXPECT(gbc.pc(), 0xc113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc111), 0xcb);
        EXPECT(gbc.readMem(0xc112), 0xa8);
        // CB A8 03E4
        gbc.setState(0x4bfe, 0x9e70, 0x32b0, 0x9fda, 0x88a1, 0x1025, 0x1, 0x0);
        gbc.writeMem(0x4bfe, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9e70);
        EXPECT(gbc.pc(), 0x4c00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A8 03E5
        gbc.setState(0x1d5, 0x7b91, 0xeca0, 0x3e7, 0xd52e, 0x5763, 0x0, 0x1);
        gbc.writeMem(0x1d5, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x7b91);
        EXPECT(gbc.pc(), 0x1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A8 03E6
        gbc.setState(0xc1a9, 0xf1f3, 0xbba0, 0x4d0, 0xb8ae, 0x3a3e, 0x0, 0x0);
        gbc.writeMem(0xc1a9, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf1f3);
        EXPECT(gbc.pc(), 0xc1ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a9), 0xcb);
        EXPECT(gbc.readMem(0xc1aa), 0xa8);
        // CB A8 03E7
        gbc.setState(0x269e, 0xab4d, 0x9cd0, 0x9363, 0x5036, 0xa024, 0x1, 0x0);
        gbc.writeMem(0x269e, { 0xcb, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xab4d);
        EXPECT(gbc.pc(), 0x26a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
