    TEST(gbcemu, opcode_22) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 22 0000
        gbc.setState(0xe81e, 0x57e7, 0xb230, 0x184, 0xd732, 0xeb0b, 0x0, 0x0);
        gbc.writeMem(0xe81e, { 0x22 });
        gbc.writeMem(0xeb0b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x57e7);
        EXPECT(gbc.pc(), 0xe81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe81e), 0x22);
        EXPECT(gbc.readMem(0xeb0b), 0xb2);
        // 22 0001
        gbc.setState(0xc8cf, 0x22b, 0x9190, 0x4964, 0x5519, 0x8536, 0x0, 0x1);
        gbc.writeMem(0x8536, { 0x0 });
        gbc.writeMem(0xc8cf, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x22b);
        EXPECT(gbc.pc(), 0xc8d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8536), 0x91);
        EXPECT(gbc.readMem(0xc8cf), 0x22);
        // 22 0002
        gbc.setState(0x15e4, 0xd2b8, 0xd640, 0xbc36, 0xccb7, 0x9790, 0x0, 0x0);
        gbc.writeMem(0x15e4, { 0x22 });
        gbc.writeMem(0x9790, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd2b8);
        EXPECT(gbc.pc(), 0x15e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9790), 0xd6);
        // 22 0004
        gbc.setState(0xed05, 0x9e4, 0xb980, 0x23e, 0x47da, 0xc31e, 0x1, 0x1);
        gbc.writeMem(0xc31e, { 0x0 });
        gbc.writeMem(0xed05, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9e4);
        EXPECT(gbc.pc(), 0xed06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31e), 0xb9);
        EXPECT(gbc.readMem(0xed05), 0x22);
        // 22 0005
        gbc.setState(0xeae4, 0x6017, 0x22d0, 0x7a3b, 0xddeb, 0xb39d, 0x1, 0x1);
        gbc.writeMem(0xb39d, { 0x0 });
        gbc.writeMem(0xeae4, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6017);
        EXPECT(gbc.pc(), 0xeae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb39d), 0x22);
        EXPECT(gbc.readMem(0xeae4), 0x22);
        // 22 0009
        gbc.setState(0x5d0f, 0x7db5, 0xa020, 0xc2b, 0x10cd, 0x86de, 0x0, 0x1);
        gbc.writeMem(0x5d0f, { 0x22 });
        gbc.writeMem(0x86de, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x7db5);
        EXPECT(gbc.pc(), 0x5d10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86de), 0xa0);
        // 22 000C
        gbc.setState(0x8dc, 0xff64, 0x1850, 0xd49d, 0x6712, 0xb98b, 0x1, 0x1);
        gbc.writeMem(0x8dc, { 0x22 });
        gbc.writeMem(0xb98b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xff64);
        EXPECT(gbc.pc(), 0x8dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98b), 0x18);
        // 22 000D
        gbc.setState(0x481b, 0xec0f, 0x69b0, 0x9a81, 0xad5, 0xefbe, 0x1, 0x1);
        gbc.writeMem(0x481b, { 0x22 });
        gbc.writeMem(0xefbe, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xec0f);
        EXPECT(gbc.pc(), 0x481c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefbe), 0x69);
        // 22 000E
        gbc.setState(0xdb8d, 0xe0d6, 0xb820, 0xb2a0, 0xcda, 0xaa98, 0x1, 0x1);
        gbc.writeMem(0xaa98, { 0x0 });
        gbc.writeMem(0xdb8d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe0d6);
        EXPECT(gbc.pc(), 0xdb8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa98), 0xb8);
        EXPECT(gbc.readMem(0xdb8d), 0x22);
        // 22 000F
        gbc.setState(0x7b68, 0x9fa4, 0x77a0, 0xd77e, 0x51cd, 0x86e6, 0x0, 0x0);
        gbc.writeMem(0x7b68, { 0x22 });
        gbc.writeMem(0x86e6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9fa4);
        EXPECT(gbc.pc(), 0x7b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e6), 0x77);
        // 22 0012
        gbc.setState(0x1eaa, 0x579, 0xc00, 0xd899, 0xe825, 0xff83, 0x0, 0x0);
        gbc.writeMem(0x1eaa, { 0x22 });
        gbc.writeMem(0xff83, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x579);
        EXPECT(gbc.pc(), 0x1eab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff83), 0xc);
        // 22 0013
        gbc.setState(0x28b1, 0xd831, 0x1190, 0xda20, 0xc833, 0x95a0, 0x0, 0x1);
        gbc.writeMem(0x28b1, { 0x22 });
        gbc.writeMem(0x95a0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd831);
        EXPECT(gbc.pc(), 0x28b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95a0), 0x11);
        // 22 0015
        gbc.setState(0x176d, 0x44b5, 0xfda0, 0x10df, 0x3cbf, 0xdfea, 0x1, 0x0);
        gbc.writeMem(0x176d, { 0x22 });
        gbc.writeMem(0xdfea, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x44b5);
        EXPECT(gbc.pc(), 0x176e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfea), 0xfd);
        // 22 0018
        gbc.setState(0xa72, 0x9bd7, 0xd130, 0xaa6b, 0x19e5, 0xed31, 0x1, 0x1);
        gbc.writeMem(0xa72, { 0x22 });
        gbc.writeMem(0xed31, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9bd7);
        EXPECT(gbc.pc(), 0xa73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed31), 0xd1);
        // 22 001D
        gbc.setState(0x4667, 0xd3d4, 0x6b00, 0x2ff4, 0xac7c, 0xaaf1, 0x1, 0x0);
        gbc.writeMem(0x4667, { 0x22 });
        gbc.writeMem(0xaaf1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd3d4);
        EXPECT(gbc.pc(), 0x4668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf1), 0x6b);
        // 22 001F
        gbc.setState(0x2985, 0xa5ad, 0x1e70, 0x2faf, 0x186e, 0xe6d0, 0x0, 0x0);
        gbc.writeMem(0x2985, { 0x22 });
        gbc.writeMem(0xe6d0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa5ad);
        EXPECT(gbc.pc(), 0x2986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d0), 0x1e);
        // 22 0022
        gbc.setState(0xb91d, 0xef27, 0x9830, 0x5719, 0xe55d, 0xb057, 0x1, 0x1);
        gbc.writeMem(0xb057, { 0x0 });
        gbc.writeMem(0xb91d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xef27);
        EXPECT(gbc.pc(), 0xb91e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb057), 0x98);
        EXPECT(gbc.readMem(0xb91d), 0x22);
        // 22 0025
        gbc.setState(0x2ca3, 0x1c43, 0x7890, 0xdd79, 0x6083, 0xacbe, 0x0, 0x1);
        gbc.writeMem(0x2ca3, { 0x22 });
        gbc.writeMem(0xacbe, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1c43);
        EXPECT(gbc.pc(), 0x2ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacbe), 0x78);
        // 22 0027
        gbc.setState(0x5e3e, 0x3e3d, 0xe090, 0xc751, 0x1c73, 0xca48, 0x1, 0x1);
        gbc.writeMem(0x5e3e, { 0x22 });
        gbc.writeMem(0xca48, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3e3d);
        EXPECT(gbc.pc(), 0x5e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca48), 0xe0);
        // 22 0029
        gbc.setState(0x393c, 0xf93c, 0x5de0, 0x1493, 0xbaa5, 0x915a, 0x1, 0x1);
        gbc.writeMem(0x393c, { 0x22 });
        gbc.writeMem(0x915a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf93c);
        EXPECT(gbc.pc(), 0x393d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x915a), 0x5d);
        // 22 002B
        gbc.setState(0x7a69, 0xf519, 0x6c00, 0x1ac3, 0x69f3, 0x8357, 0x1, 0x1);
        gbc.writeMem(0x7a69, { 0x22 });
        gbc.writeMem(0x8357, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf519);
        EXPECT(gbc.pc(), 0x7a6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8357), 0x6c);
        // 22 002D
        gbc.setState(0x6a68, 0xe06c, 0x3780, 0xa327, 0x3080, 0xaa8f, 0x0, 0x0);
        gbc.writeMem(0x6a68, { 0x22 });
        gbc.writeMem(0xaa8f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe06c);
        EXPECT(gbc.pc(), 0x6a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8f), 0x37);
        // 22 002E
        gbc.setState(0x11da, 0xd200, 0x9830, 0x6ef0, 0x808f, 0xd30b, 0x1, 0x1);
        gbc.writeMem(0x11da, { 0x22 });
        gbc.writeMem(0xd30b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd200);
        EXPECT(gbc.pc(), 0x11db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd30b), 0x98);
        // 22 002F
        gbc.setState(0x9fe2, 0xd257, 0x3680, 0x7a0c, 0x69f9, 0x8d17, 0x0, 0x0);
        gbc.writeMem(0x8d17, { 0x0 });
        gbc.writeMem(0x9fe2, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x9fe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d17), 0x36);
        EXPECT(gbc.readMem(0x9fe2), 0x22);
        // 22 0030
        gbc.setState(0xabe, 0x8731, 0xfda0, 0xe8f4, 0x6ee, 0x8cbd, 0x1, 0x0);
        gbc.writeMem(0xabe, { 0x22 });
        gbc.writeMem(0x8cbd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8731);
        EXPECT(gbc.pc(), 0xabf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cbd), 0xfd);
        // 22 0032
        gbc.setState(0x9dcf, 0x1818, 0xc070, 0x265c, 0x4e5a, 0xbcab, 0x0, 0x0);
        gbc.writeMem(0x9dcf, { 0x22 });
        gbc.writeMem(0xbcab, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1818);
        EXPECT(gbc.pc(), 0x9dd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dcf), 0x22);
        EXPECT(gbc.readMem(0xbcab), 0xc0);
        // 22 0034
        gbc.setState(0xaf63, 0xe9da, 0x8860, 0xad50, 0x4bc0, 0xe65e, 0x1, 0x1);
        gbc.writeMem(0xaf63, { 0x22 });
        gbc.writeMem(0xe65e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe9da);
        EXPECT(gbc.pc(), 0xaf64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf63), 0x22);
        EXPECT(gbc.readMem(0xe65e), 0x88);
        // 22 0035
        gbc.setState(0x5d9a, 0xbf8c, 0x8b0, 0xaa10, 0xdbc3, 0xd9e8, 0x0, 0x1);
        gbc.writeMem(0x5d9a, { 0x22 });
        gbc.writeMem(0xd9e8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbf8c);
        EXPECT(gbc.pc(), 0x5d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9e8), 0x8);
        // 22 0037
        gbc.setState(0x24ad, 0xab7b, 0xd050, 0x7514, 0x96b7, 0xf7a1, 0x1, 0x1);
        gbc.writeMem(0x24ad, { 0x22 });
        gbc.writeMem(0xf7a1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xab7b);
        EXPECT(gbc.pc(), 0x24ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf7a1), 0xd0);
        // 22 0039
        gbc.setState(0x20f0, 0x962e, 0xf8f0, 0x3ab, 0x6e11, 0xc508, 0x0, 0x1);
        gbc.writeMem(0x20f0, { 0x22 });
        gbc.writeMem(0xc508, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x962e);
        EXPECT(gbc.pc(), 0x20f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc508), 0xf8);
        // 22 003B
        gbc.setState(0xa046, 0x6bc9, 0x65b0, 0x6c7c, 0x7ee6, 0xc58a, 0x0, 0x1);
        gbc.writeMem(0xa046, { 0x22 });
        gbc.writeMem(0xc58a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6bc9);
        EXPECT(gbc.pc(), 0xa047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa046), 0x22);
        EXPECT(gbc.readMem(0xc58a), 0x65);
        // 22 003F
        gbc.setState(0x83c0, 0xe1cf, 0x8f00, 0xaa70, 0xddb4, 0x9375, 0x1, 0x1);
        gbc.writeMem(0x83c0, { 0x22 });
        gbc.writeMem(0x9375, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xe1cf);
        EXPECT(gbc.pc(), 0x83c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c0), 0x22);
        EXPECT(gbc.readMem(0x9375), 0x8f);
        // 22 0040
        gbc.setState(0x4fdf, 0xfded, 0x3d10, 0x933a, 0xd70f, 0xacd8, 0x0, 0x0);
        gbc.writeMem(0x4fdf, { 0x22 });
        gbc.writeMem(0xacd8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfded);
        EXPECT(gbc.pc(), 0x4fe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd8), 0x3d);
        // 22 0041
        gbc.setState(0x7ab0, 0xb9ce, 0x3bf0, 0xeda0, 0x33be, 0xc3c9, 0x0, 0x1);
        gbc.writeMem(0x7ab0, { 0x22 });
        gbc.writeMem(0xc3c9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb9ce);
        EXPECT(gbc.pc(), 0x7ab1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3c9), 0x3b);
        // 22 0044
        gbc.setState(0xccac, 0xc4b9, 0x9490, 0xc014, 0xe3d3, 0xe3db, 0x0, 0x1);
        gbc.writeMem(0xccac, { 0x22 });
        gbc.writeMem(0xe3db, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xc4b9);
        EXPECT(gbc.pc(), 0xccad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccac), 0x22);
        EXPECT(gbc.readMem(0xe3db), 0x94);
        // 22 0046
        gbc.setState(0x8361, 0x29b3, 0x6180, 0x89e4, 0x63c7, 0x8a14, 0x1, 0x1);
        gbc.writeMem(0x8361, { 0x22 });
        gbc.writeMem(0x8a14, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x29b3);
        EXPECT(gbc.pc(), 0x8362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8361), 0x22);
        EXPECT(gbc.readMem(0x8a14), 0x61);
        // 22 0048
        gbc.setState(0x213a, 0x24f, 0x27c0, 0x9918, 0xa955, 0xfc75, 0x1, 0x0);
        gbc.writeMem(0x213a, { 0x22 });
        gbc.writeMem(0xfc75, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x24f);
        EXPECT(gbc.pc(), 0x213b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc75), 0x27);
        // 22 004A
        gbc.setState(0xa5db, 0x1926, 0x6fe0, 0xb601, 0x6a2c, 0xefe1, 0x1, 0x0);
        gbc.writeMem(0xa5db, { 0x22 });
        gbc.writeMem(0xefe1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1926);
        EXPECT(gbc.pc(), 0xa5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5db), 0x22);
        EXPECT(gbc.readMem(0xefe1), 0x6f);
        // 22 004B
        gbc.setState(0x1f0c, 0x6ebd, 0x67b0, 0x8b91, 0xfb19, 0xb8ec, 0x0, 0x0);
        gbc.writeMem(0x1f0c, { 0x22 });
        gbc.writeMem(0xb8ec, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6ebd);
        EXPECT(gbc.pc(), 0x1f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ec), 0x67);
        // 22 0050
        gbc.setState(0x67de, 0x9b3b, 0x8830, 0x1d38, 0x1ffb, 0xaed6, 0x1, 0x0);
        gbc.writeMem(0x67de, { 0x22 });
        gbc.writeMem(0xaed6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9b3b);
        EXPECT(gbc.pc(), 0x67df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed6), 0x88);
        // 22 0052
        gbc.setState(0x958b, 0xf847, 0x5350, 0xdb6, 0x7b85, 0xbb6e, 0x0, 0x0);
        gbc.writeMem(0x958b, { 0x22 });
        gbc.writeMem(0xbb6e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf847);
        EXPECT(gbc.pc(), 0x958c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x958b), 0x22);
        EXPECT(gbc.readMem(0xbb6e), 0x53);
        // 22 0054
        gbc.setState(0xa076, 0x8b28, 0xe470, 0xed81, 0x61e2, 0xc11a, 0x0, 0x1);
        gbc.writeMem(0xa076, { 0x22 });
        gbc.writeMem(0xc11a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8b28);
        EXPECT(gbc.pc(), 0xa077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa076), 0x22);
        EXPECT(gbc.readMem(0xc11a), 0xe4);
        // 22 0055
        gbc.setState(0x9e4, 0xf59b, 0xe730, 0xc3f1, 0x64b3, 0xb440, 0x0, 0x1);
        gbc.writeMem(0x9e4, { 0x22 });
        gbc.writeMem(0xb440, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf59b);
        EXPECT(gbc.pc(), 0x9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb440), 0xe7);
        // 22 0058
        gbc.setState(0x34cd, 0x1091, 0xc910, 0x1b20, 0x23db, 0xfb91, 0x1, 0x0);
        gbc.writeMem(0x34cd, { 0x22 });
        gbc.writeMem(0xfb91, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x34ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfb91), 0xc9);
        // 22 005A
        gbc.setState(0x3037, 0xfa, 0xcf0, 0xc628, 0xc246, 0xc828, 0x1, 0x1);
        gbc.writeMem(0x3037, { 0x22 });
        gbc.writeMem(0xc828, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xfa);
        EXPECT(gbc.pc(), 0x3038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc828), 0xc);
        // 22 005C
        gbc.setState(0x5c8, 0xc9e0, 0x87d0, 0xaddb, 0xec67, 0xa43c, 0x1, 0x0);
        gbc.writeMem(0x5c8, { 0x22 });
        gbc.writeMem(0xa43c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xc9e0);
        EXPECT(gbc.pc(), 0x5c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa43c), 0x87);
        // 22 005D
        gbc.setState(0x1245, 0x3903, 0x18d0, 0xd84d, 0x1fdf, 0xc222, 0x0, 0x1);
        gbc.writeMem(0x1245, { 0x22 });
        gbc.writeMem(0xc222, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3903);
        EXPECT(gbc.pc(), 0x1246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc222), 0x18);
        // 22 005E
        gbc.setState(0x628, 0x574, 0x13f0, 0xab3, 0x1997, 0xab69, 0x0, 0x0);
        gbc.writeMem(0x628, { 0x22 });
        gbc.writeMem(0xab69, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x574);
        EXPECT(gbc.pc(), 0x629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab69), 0x13);
        // 22 0061
        gbc.setState(0x60ff, 0x5f0a, 0x5690, 0x4abe, 0xf698, 0x8600, 0x0, 0x0);
        gbc.writeMem(0x60ff, { 0x22 });
        gbc.writeMem(0x8600, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5f0a);
        EXPECT(gbc.pc(), 0x6100);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8600), 0x56);
        // 22 0063
        gbc.setState(0x3eb6, 0x9652, 0x2b50, 0x53c7, 0x2638, 0xfaab, 0x1, 0x1);
        gbc.writeMem(0x3eb6, { 0x22 });
        gbc.writeMem(0xfaab, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x9652);
        EXPECT(gbc.pc(), 0x3eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfaab), 0x2b);
        // 22 0068
        gbc.setState(0x9b9b, 0x2aac, 0x29c0, 0x75e3, 0x2940, 0xcec2, 0x1, 0x0);
        gbc.writeMem(0x9b9b, { 0x22 });
        gbc.writeMem(0xcec2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2aac);
        EXPECT(gbc.pc(), 0x9b9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b9b), 0x22);
        EXPECT(gbc.readMem(0xcec2), 0x29);
        // 22 006A
        gbc.setState(0x509a, 0x2566, 0x5b50, 0xfd0d, 0xd51d, 0xd2fc, 0x1, 0x1);
        gbc.writeMem(0x509a, { 0x22 });
        gbc.writeMem(0xd2fc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x2566);
        EXPECT(gbc.pc(), 0x509b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2fc), 0x5b);
        // 22 006C
        gbc.setState(0x2329, 0xf821, 0x3300, 0x6062, 0x9ed7, 0xe273, 0x0, 0x0);
        gbc.writeMem(0x2329, { 0x22 });
        gbc.writeMem(0xe273, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf821);
        EXPECT(gbc.pc(), 0x232a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe273), 0x33);
        // 22 006D
        gbc.setState(0x7b99, 0x6338, 0x5de0, 0xa6a, 0xc4be, 0x84dd, 0x0, 0x1);
        gbc.writeMem(0x7b99, { 0x22 });
        gbc.writeMem(0x84dd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6338);
        EXPECT(gbc.pc(), 0x7b9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84dd), 0x5d);
        // 22 006E
        gbc.setState(0x5834, 0x63a5, 0xdc70, 0x59a4, 0x4061, 0xe988, 0x0, 0x0);
        gbc.writeMem(0x5834, { 0x22 });
        gbc.writeMem(0xe988, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x63a5);
        EXPECT(gbc.pc(), 0x5835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe988), 0xdc);
        // 22 006F
        gbc.setState(0xb5d6, 0xe6d2, 0xd1c0, 0x20c4, 0x1c81, 0xfaa7, 0x0, 0x1);
        gbc.writeMem(0xb5d6, { 0x22 });
        gbc.writeMem(0xfaa7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe6d2);
        EXPECT(gbc.pc(), 0xb5d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d6), 0x22);
        EXPECT(gbc.readMem(0xfaa7), 0xd1);
        // 22 0070
        gbc.setState(0xe64a, 0x88f0, 0x8310, 0x3aa8, 0xcb02, 0xa245, 0x0, 0x1);
        gbc.writeMem(0xa245, { 0x0 });
        gbc.writeMem(0xe64a, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x88f0);
        EXPECT(gbc.pc(), 0xe64b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa245), 0x83);
        EXPECT(gbc.readMem(0xe64a), 0x22);
        // 22 0071
        gbc.setState(0xd26c, 0x431d, 0x79e0, 0x14bf, 0xaaba, 0x90e1, 0x1, 0x1);
        gbc.writeMem(0x90e1, { 0x0 });
        gbc.writeMem(0xd26c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x431d);
        EXPECT(gbc.pc(), 0xd26d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e1), 0x79);
        EXPECT(gbc.readMem(0xd26c), 0x22);
        // 22 0073
        gbc.setState(0x7da3, 0x9e0e, 0xe0d0, 0x9662, 0x4942, 0xcd88, 0x0, 0x0);
        gbc.writeMem(0x7da3, { 0x22 });
        gbc.writeMem(0xcd88, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9e0e);
        EXPECT(gbc.pc(), 0x7da4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd88), 0xe0);
        // 22 0075
        gbc.setState(0x1515, 0x5b97, 0x8cf0, 0xebfe, 0x7ea2, 0x9074, 0x1, 0x0);
        gbc.writeMem(0x1515, { 0x22 });
        gbc.writeMem(0x9074, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5b97);
        EXPECT(gbc.pc(), 0x1516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9074), 0x8c);
        // 22 0076
        gbc.setState(0x2151, 0x8a9f, 0xd1d0, 0xf678, 0x5f0b, 0x9bf4, 0x0, 0x0);
        gbc.writeMem(0x2151, { 0x22 });
        gbc.writeMem(0x9bf4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8a9f);
        EXPECT(gbc.pc(), 0x2152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bf4), 0xd1);
        // 22 0077
        gbc.setState(0x59aa, 0xb024, 0x31f0, 0xbfc, 0xd58e, 0x8500, 0x0, 0x0);
        gbc.writeMem(0x59aa, { 0x22 });
        gbc.writeMem(0x8500, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb024);
        EXPECT(gbc.pc(), 0x59ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8500), 0x31);
        // 22 0079
        gbc.setState(0x789b, 0x4c1c, 0x6740, 0xbb04, 0x6f3a, 0x94c7, 0x1, 0x1);
        gbc.writeMem(0x789b, { 0x22 });
        gbc.writeMem(0x94c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4c1c);
        EXPECT(gbc.pc(), 0x789c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c7), 0x67);
        // 22 007B
        gbc.setState(0xb3be, 0x5a0a, 0x7c10, 0x44b3, 0xcd17, 0xb737, 0x0, 0x0);
        gbc.writeMem(0xb3be, { 0x22 });
        gbc.writeMem(0xb737, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5a0a);
        EXPECT(gbc.pc(), 0xb3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3be), 0x22);
        EXPECT(gbc.readMem(0xb737), 0x7c);
        // 22 007C
        gbc.setState(0x824, 0x9d59, 0x8740, 0xaf87, 0x2320, 0xe244, 0x1, 0x0);
        gbc.writeMem(0x824, { 0x22 });
        gbc.writeMem(0xe244, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9d59);
        EXPECT(gbc.pc(), 0x825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe244), 0x87);
        // 22 007E
        gbc.setState(0xa016, 0xa6eb, 0xc920, 0x577a, 0xbc08, 0xde8b, 0x1, 0x0);
        gbc.writeMem(0xa016, { 0x22 });
        gbc.writeMem(0xde8b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa6eb);
        EXPECT(gbc.pc(), 0xa017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa016), 0x22);
        EXPECT(gbc.readMem(0xde8b), 0xc9);
        // 22 007F
        gbc.setState(0x8ef3, 0x98b9, 0x5df0, 0xd199, 0x75e0, 0x869f, 0x0, 0x1);
        gbc.writeMem(0x869f, { 0x0 });
        gbc.writeMem(0x8ef3, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x98b9);
        EXPECT(gbc.pc(), 0x8ef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x869f), 0x5d);
        EXPECT(gbc.readMem(0x8ef3), 0x22);
        // 22 0081
        gbc.setState(0xee98, 0xc68e, 0x2c0, 0x2909, 0x9bdd, 0x9bb8, 0x1, 0x0);
        gbc.writeMem(0x9bb8, { 0x0 });
        gbc.writeMem(0xee98, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc68e);
        EXPECT(gbc.pc(), 0xee99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bb8), 0x2);
        EXPECT(gbc.readMem(0xee98), 0x22);
        // 22 0084
        gbc.setState(0xafd0, 0x5dd8, 0xd140, 0x1602, 0x907f, 0xfce5, 0x1, 0x1);
        gbc.writeMem(0xafd0, { 0x22 });
        gbc.writeMem(0xfce5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5dd8);
        EXPECT(gbc.pc(), 0xafd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd0), 0x22);
        EXPECT(gbc.readMem(0xfce5), 0xd1);
        // 22 0086
        gbc.setState(0x8dd3, 0x6010, 0x61b0, 0x4679, 0x278b, 0xee15, 0x1, 0x1);
        gbc.writeMem(0x8dd3, { 0x22 });
        gbc.writeMem(0xee15, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x6010);
        EXPECT(gbc.pc(), 0x8dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd3), 0x22);
        EXPECT(gbc.readMem(0xee15), 0x61);
        // 22 0087
        gbc.setState(0x984b, 0x2d23, 0x9a80, 0x8c71, 0xaf65, 0xdf5a, 0x1, 0x1);
        gbc.writeMem(0x984b, { 0x22 });
        gbc.writeMem(0xdf5a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2d23);
        EXPECT(gbc.pc(), 0x984c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x984b), 0x22);
        EXPECT(gbc.readMem(0xdf5a), 0x9a);
        // 22 0089
        gbc.setState(0x9888, 0x512a, 0x1660, 0x9364, 0x3f3d, 0xd6c7, 0x0, 0x0);
        gbc.writeMem(0x9888, { 0x22 });
        gbc.writeMem(0xd6c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x512a);
        EXPECT(gbc.pc(), 0x9889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9888), 0x22);
        EXPECT(gbc.readMem(0xd6c7), 0x16);
        // 22 008A
        gbc.setState(0x25ac, 0xeeeb, 0xbec0, 0x3685, 0x89c1, 0x82e2, 0x1, 0x1);
        gbc.writeMem(0x25ac, { 0x22 });
        gbc.writeMem(0x82e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xeeeb);
        EXPECT(gbc.pc(), 0x25ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82e2), 0xbe);
        // 22 008C
        gbc.setState(0x388b, 0x37c4, 0x6b50, 0x5037, 0xf03f, 0xb6ab, 0x1, 0x0);
        gbc.writeMem(0x388b, { 0x22 });
        gbc.writeMem(0xb6ab, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x37c4);
        EXPECT(gbc.pc(), 0x388c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ab), 0x6b);
        // 22 008D
        gbc.setState(0x687f, 0x3e9a, 0xcdf0, 0xfacf, 0xa3fa, 0xc0d8, 0x0, 0x0);
        gbc.writeMem(0x687f, { 0x22 });
        gbc.writeMem(0xc0d8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3e9a);
        EXPECT(gbc.pc(), 0x6880);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d8), 0xcd);
        // 22 008F
        gbc.setState(0x57ab, 0x713f, 0x1d90, 0x30c8, 0x3fcc, 0xa72d, 0x0, 0x0);
        gbc.writeMem(0x57ab, { 0x22 });
        gbc.writeMem(0xa72d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x713f);
        EXPECT(gbc.pc(), 0x57ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa72d), 0x1d);
        // 22 0092
        gbc.setState(0xb7f5, 0xc34f, 0x2930, 0xdda, 0x4c91, 0x8216, 0x0, 0x0);
        gbc.writeMem(0x8216, { 0x0 });
        gbc.writeMem(0xb7f5, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc34f);
        EXPECT(gbc.pc(), 0xb7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8216), 0x29);
        EXPECT(gbc.readMem(0xb7f5), 0x22);
        // 22 0096
        gbc.setState(0xb2c0, 0xa847, 0x37a0, 0xe57c, 0xf8a, 0x9d38, 0x1, 0x1);
        gbc.writeMem(0x9d38, { 0x0 });
        gbc.writeMem(0xb2c0, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa847);
        EXPECT(gbc.pc(), 0xb2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d38), 0x37);
        EXPECT(gbc.readMem(0xb2c0), 0x22);
        // 22 009A
        gbc.setState(0x257d, 0xbb25, 0xff50, 0x1ae6, 0x53f1, 0xf6c0, 0x1, 0x0);
        gbc.writeMem(0x257d, { 0x22 });
        gbc.writeMem(0xf6c0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xbb25);
        EXPECT(gbc.pc(), 0x257e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6c0), 0xff);
        // 22 009B
        gbc.setState(0x47e4, 0xae8e, 0xcdb0, 0x7abf, 0x2cec, 0xe587, 0x0, 0x1);
        gbc.writeMem(0x47e4, { 0x22 });
        gbc.writeMem(0xe587, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xae8e);
        EXPECT(gbc.pc(), 0x47e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe587), 0xcd);
        // 22 009C
        gbc.setState(0x7559, 0x6293, 0xab70, 0xd9c2, 0x94b0, 0xbdec, 0x1, 0x1);
        gbc.writeMem(0x7559, { 0x22 });
        gbc.writeMem(0xbdec, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6293);
        EXPECT(gbc.pc(), 0x755a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdec), 0xab);
        // 22 00A0
        gbc.setState(0x77c5, 0xd47f, 0xe930, 0x78c2, 0x1ccb, 0xd56a, 0x1, 0x1);
        gbc.writeMem(0x77c5, { 0x22 });
        gbc.writeMem(0xd56a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd47f);
        EXPECT(gbc.pc(), 0x77c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd56a), 0xe9);
        // 22 00A3
        gbc.setState(0x5ed1, 0x2874, 0x36b0, 0x2478, 0xa3aa, 0x97d2, 0x0, 0x1);
        gbc.writeMem(0x5ed1, { 0x22 });
        gbc.writeMem(0x97d2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x2874);
        EXPECT(gbc.pc(), 0x5ed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d2), 0x36);
        // 22 00A5
        gbc.setState(0xa8d, 0xd5e6, 0xe660, 0x9264, 0x1900, 0xf9e2, 0x0, 0x0);
        gbc.writeMem(0xa8d, { 0x22 });
        gbc.writeMem(0xf9e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd5e6);
        EXPECT(gbc.pc(), 0xa8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9e2), 0xe6);
        // 22 00A6
        gbc.setState(0x6d4a, 0xf42b, 0x2940, 0xe146, 0x33a2, 0xc430, 0x1, 0x0);
        gbc.writeMem(0x6d4a, { 0x22 });
        gbc.writeMem(0xc430, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf42b);
        EXPECT(gbc.pc(), 0x6d4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc430), 0x29);
        // 22 00A7
        gbc.setState(0xb0e7, 0xa30a, 0x1fd0, 0x1f11, 0xecff, 0x85e7, 0x0, 0x1);
        gbc.writeMem(0x85e7, { 0x0 });
        gbc.writeMem(0xb0e7, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa30a);
        EXPECT(gbc.pc(), 0xb0e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e7), 0x1f);
        EXPECT(gbc.readMem(0xb0e7), 0x22);
        // 22 00A8
        gbc.setState(0x9b9a, 0x4fb3, 0x8690, 0x4b71, 0xf01d, 0x904f, 0x0, 0x0);
        gbc.writeMem(0x904f, { 0x0 });
        gbc.writeMem(0x9b9a, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4fb3);
        EXPECT(gbc.pc(), 0x9b9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x904f), 0x86);
        EXPECT(gbc.readMem(0x9b9a), 0x22);
        // 22 00A9
        gbc.setState(0xcaac, 0xd062, 0x2520, 0x8b62, 0x2409, 0x920c, 0x0, 0x0);
        gbc.writeMem(0x920c, { 0x0 });
        gbc.writeMem(0xcaac, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd062);
        EXPECT(gbc.pc(), 0xcaad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920c), 0x25);
        EXPECT(gbc.readMem(0xcaac), 0x22);
        // 22 00AA
        gbc.setState(0xefa1, 0x8bca, 0xba30, 0x4aaa, 0xf561, 0x8ac4, 0x1, 0x0);
        gbc.writeMem(0x8ac4, { 0x0 });
        gbc.writeMem(0xefa1, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8bca);
        EXPECT(gbc.pc(), 0xefa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac4), 0xba);
        EXPECT(gbc.readMem(0xefa1), 0x22);
        // 22 00AD
        gbc.setState(0x2717, 0x83ba, 0x2340, 0xdc43, 0xbf20, 0xa5e3, 0x1, 0x0);
        gbc.writeMem(0x2717, { 0x22 });
        gbc.writeMem(0xa5e3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x83ba);
        EXPECT(gbc.pc(), 0x2718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e3), 0x23);
        // 22 00AE
        gbc.setState(0xd86a, 0xf815, 0x77b0, 0xc99, 0xad96, 0x8b94, 0x0, 0x1);
        gbc.writeMem(0x8b94, { 0x0 });
        gbc.writeMem(0xd86a, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf815);
        EXPECT(gbc.pc(), 0xd86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b94), 0x77);
        EXPECT(gbc.readMem(0xd86a), 0x22);
        // 22 00B0
        gbc.setState(0x162e, 0x23d9, 0x1f20, 0xf3dd, 0xf771, 0x97d4, 0x1, 0x1);
        gbc.writeMem(0x162e, { 0x22 });
        gbc.writeMem(0x97d4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x23d9);
        EXPECT(gbc.pc(), 0x162f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d4), 0x1f);
        // 22 00B1
        gbc.setState(0x6f3b, 0x775a, 0x37d0, 0xf8b5, 0x9ecc, 0xffdb, 0x1, 0x0);
        gbc.writeMem(0x6f3b, { 0x22 });
        gbc.writeMem(0xffdb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x775a);
        EXPECT(gbc.pc(), 0x6f3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffdb), 0x37);
        // 22 00B2
        gbc.setState(0xc9a2, 0xbabe, 0x1840, 0xebc, 0xe41f, 0x8c9a, 0x0, 0x0);
        gbc.writeMem(0x8c9a, { 0x0 });
        gbc.writeMem(0xc9a2, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xbabe);
        EXPECT(gbc.pc(), 0xc9a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9a), 0x18);
        EXPECT(gbc.readMem(0xc9a2), 0x22);
        // 22 00BB
        gbc.setState(0x3c5c, 0xf7e7, 0x3ea0, 0xdb0b, 0xe05e, 0xad5f, 0x1, 0x0);
        gbc.writeMem(0x3c5c, { 0x22 });
        gbc.writeMem(0xad5f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf7e7);
        EXPECT(gbc.pc(), 0x3c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad5f), 0x3e);
        // 22 00BC
        gbc.setState(0x4be3, 0x78bc, 0x1d20, 0xc36b, 0xc549, 0xc31d, 0x0, 0x0);
        gbc.writeMem(0x4be3, { 0x22 });
        gbc.writeMem(0xc31d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x78bc);
        EXPECT(gbc.pc(), 0x4be4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31d), 0x1d);
        // 22 00BD
        gbc.setState(0xcbb4, 0xf041, 0xca20, 0xba44, 0xd935, 0x854d, 0x1, 0x0);
        gbc.writeMem(0x854d, { 0x0 });
        gbc.writeMem(0xcbb4, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xf041);
        EXPECT(gbc.pc(), 0xcbb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854d), 0xca);
        EXPECT(gbc.readMem(0xcbb4), 0x22);
        // 22 00C1
        gbc.setState(0x140b, 0xa53a, 0x57b0, 0xf348, 0xfd7a, 0xab8c, 0x1, 0x1);
        gbc.writeMem(0x140b, { 0x22 });
        gbc.writeMem(0xab8c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa53a);
        EXPECT(gbc.pc(), 0x140c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab8c), 0x57);
        // 22 00C2
        gbc.setState(0x4875, 0xcec1, 0x87c0, 0xaad2, 0xcb36, 0x9792, 0x0, 0x1);
        gbc.writeMem(0x4875, { 0x22 });
        gbc.writeMem(0x9792, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xcec1);
        EXPECT(gbc.pc(), 0x4876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9792), 0x87);
        // 22 00C3
        gbc.setState(0xdc13, 0x3372, 0x3220, 0xd6f0, 0x8e81, 0x9d73, 0x0, 0x1);
        gbc.writeMem(0x9d73, { 0x0 });
        gbc.writeMem(0xdc13, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3372);
        EXPECT(gbc.pc(), 0xdc14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d73), 0x32);
        EXPECT(gbc.readMem(0xdc13), 0x22);
        // 22 00C4
        gbc.setState(0x4f33, 0xbb0c, 0xf60, 0x2674, 0x6959, 0xf980, 0x1, 0x0);
        gbc.writeMem(0x4f33, { 0x22 });
        gbc.writeMem(0xf980, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbb0c);
        EXPECT(gbc.pc(), 0x4f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf980), 0xf);
        // 22 00C9
        gbc.setState(0x196b, 0xa6b6, 0x2fc0, 0xac99, 0x2c2f, 0xd741, 0x0, 0x1);
        gbc.writeMem(0x196b, { 0x22 });
        gbc.writeMem(0xd741, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xa6b6);
        EXPECT(gbc.pc(), 0x196c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd741), 0x2f);
        // 22 00CA
        gbc.setState(0x82b7, 0x8c4d, 0x22c0, 0x2f7c, 0xd473, 0x94ce, 0x0, 0x0);
        gbc.writeMem(0x82b7, { 0x22 });
        gbc.writeMem(0x94ce, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8c4d);
        EXPECT(gbc.pc(), 0x82b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b7), 0x22);
        EXPECT(gbc.readMem(0x94ce), 0x22);
        // 22 00CC
        gbc.setState(0x3ccd, 0xd454, 0xba10, 0x36b8, 0x3f90, 0xaed1, 0x0, 0x1);
        gbc.writeMem(0x3ccd, { 0x22 });
        gbc.writeMem(0xaed1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd454);
        EXPECT(gbc.pc(), 0x3cce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaed1), 0xba);
        // 22 00CD
        gbc.setState(0xb399, 0x95be, 0xe30, 0xb729, 0xd5e5, 0xac94, 0x1, 0x1);
        gbc.writeMem(0xac94, { 0x0 });
        gbc.writeMem(0xb399, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x95be);
        EXPECT(gbc.pc(), 0xb39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac94), 0xe);
        EXPECT(gbc.readMem(0xb399), 0x22);
        // 22 00D1
        gbc.setState(0x2cca, 0x3dd5, 0xd8d0, 0xb78e, 0x5e9c, 0xde73, 0x0, 0x1);
        gbc.writeMem(0x2cca, { 0x22 });
        gbc.writeMem(0xde73, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3dd5);
        EXPECT(gbc.pc(), 0x2ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde73), 0xd8);
        // 22 00D7
        gbc.setState(0x6e8f, 0xcc16, 0x34f0, 0x3be6, 0x8e6e, 0xaebb, 0x1, 0x0);
        gbc.writeMem(0x6e8f, { 0x22 });
        gbc.writeMem(0xaebb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xcc16);
        EXPECT(gbc.pc(), 0x6e90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaebb), 0x34);
        // 22 00D8
        gbc.setState(0xdc56, 0xa688, 0xeff0, 0x2305, 0x8118, 0x8b92, 0x0, 0x1);
        gbc.writeMem(0x8b92, { 0x0 });
        gbc.writeMem(0xdc56, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa688);
        EXPECT(gbc.pc(), 0xdc57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b92), 0xef);
        EXPECT(gbc.readMem(0xdc56), 0x22);
        // 22 00D9
        gbc.setState(0xa067, 0x7641, 0xa8e0, 0xffba, 0xc6f, 0xeb49, 0x0, 0x1);
        gbc.writeMem(0xa067, { 0x22 });
        gbc.writeMem(0xeb49, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7641);
        EXPECT(gbc.pc(), 0xa068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa067), 0x22);
        EXPECT(gbc.readMem(0xeb49), 0xa8);
        // 22 00DA
        gbc.setState(0x9f2d, 0x9299, 0xc50, 0x8e41, 0xa765, 0x9b5f, 0x0, 0x0);
        gbc.writeMem(0x9b5f, { 0x0 });
        gbc.writeMem(0x9f2d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9299);
        EXPECT(gbc.pc(), 0x9f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b5f), 0xc);
        EXPECT(gbc.readMem(0x9f2d), 0x22);
        // 22 00DB
        gbc.setState(0x854f, 0xd260, 0x13b0, 0x1340, 0xff9a, 0xf8d9, 0x1, 0x0);
        gbc.writeMem(0x854f, { 0x22 });
        gbc.writeMem(0xf8d9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xd260);
        EXPECT(gbc.pc(), 0x8550);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x854f), 0x22);
        EXPECT(gbc.readMem(0xf8d9), 0x13);
        // 22 00DE
        gbc.setState(0x4589, 0xca20, 0xbfa0, 0x873f, 0xb63a, 0xd73d, 0x1, 0x1);
        gbc.writeMem(0x4589, { 0x22 });
        gbc.writeMem(0xd73d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xca20);
        EXPECT(gbc.pc(), 0x458a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd73d), 0xbf);
        // 22 00DF
        gbc.setState(0xd761, 0x5e9, 0xd390, 0x8f6a, 0xa487, 0xbb41, 0x1, 0x1);
        gbc.writeMem(0xbb41, { 0x0 });
        gbc.writeMem(0xd761, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5e9);
        EXPECT(gbc.pc(), 0xd762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb41), 0xd3);
        EXPECT(gbc.readMem(0xd761), 0x22);
        // 22 00E0
        gbc.setState(0x63d6, 0xab68, 0x8700, 0x2a4c, 0x104, 0xdfdf, 0x1, 0x1);
        gbc.writeMem(0x63d6, { 0x22 });
        gbc.writeMem(0xdfdf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xab68);
        EXPECT(gbc.pc(), 0x63d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfdf), 0x87);
        // 22 00E1
        gbc.setState(0x33c6, 0x3c5e, 0x44c0, 0xca4d, 0xdf7d, 0xa41e, 0x0, 0x0);
        gbc.writeMem(0x33c6, { 0x22 });
        gbc.writeMem(0xa41e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0x33c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41e), 0x44);
        // 22 00E2
        gbc.setState(0x4490, 0x5630, 0xfde0, 0xbda6, 0xed8c, 0xe931, 0x0, 0x0);
        gbc.writeMem(0x4490, { 0x22 });
        gbc.writeMem(0xe931, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5630);
        EXPECT(gbc.pc(), 0x4491);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe931), 0xfd);
        // 22 00E6
        gbc.setState(0x4b21, 0x8993, 0x38c0, 0x7d45, 0x46bf, 0xad2f, 0x1, 0x0);
        gbc.writeMem(0x4b21, { 0x22 });
        gbc.writeMem(0xad2f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8993);
        EXPECT(gbc.pc(), 0x4b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2f), 0x38);
        // 22 00E7
        gbc.setState(0x9949, 0x3be1, 0x6f40, 0xafca, 0xa716, 0xe2db, 0x1, 0x0);
        gbc.writeMem(0x9949, { 0x22 });
        gbc.writeMem(0xe2db, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3be1);
        EXPECT(gbc.pc(), 0x994a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9949), 0x22);
        EXPECT(gbc.readMem(0xe2db), 0x6f);
        // 22 00E8
        gbc.setState(0x863c, 0xbac9, 0x9a10, 0xa827, 0x20a5, 0xe08c, 0x1, 0x1);
        gbc.writeMem(0x863c, { 0x22 });
        gbc.writeMem(0xe08c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbac9);
        EXPECT(gbc.pc(), 0x863d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863c), 0x22);
        EXPECT(gbc.readMem(0xe08c), 0x9a);
        // 22 00EA
        gbc.setState(0x7cc9, 0xce3d, 0x2670, 0xf3fc, 0x4fda, 0xb6b5, 0x1, 0x0);
        gbc.writeMem(0x7cc9, { 0x22 });
        gbc.writeMem(0xb6b5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xce3d);
        EXPECT(gbc.pc(), 0x7cca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6b5), 0x26);
        // 22 00EB
        gbc.setState(0x5d59, 0x32ac, 0x5c80, 0x461b, 0x21d4, 0xcef6, 0x0, 0x0);
        gbc.writeMem(0x5d59, { 0x22 });
        gbc.writeMem(0xcef6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x32ac);
        EXPECT(gbc.pc(), 0x5d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef6), 0x5c);
        // 22 00EC
        gbc.setState(0x600f, 0xcd52, 0x7f10, 0xa3d3, 0x974, 0xe011, 0x0, 0x1);
        gbc.writeMem(0x600f, { 0x22 });
        gbc.writeMem(0xe011, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xcd52);
        EXPECT(gbc.pc(), 0x6010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe011), 0x7f);
        // 22 00ED
        gbc.setState(0xe22a, 0x68d1, 0xbb70, 0x6edc, 0xe638, 0xe85c, 0x1, 0x1);
        gbc.writeMem(0xe22a, { 0x22 });
        gbc.writeMem(0xe85c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x68d1);
        EXPECT(gbc.pc(), 0xe22b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe22a), 0x22);
        EXPECT(gbc.readMem(0xe85c), 0xbb);
        // 22 00EE
        gbc.setState(0x4f82, 0xe2ec, 0xc7a0, 0x215f, 0x9e22, 0xe5a3, 0x1, 0x0);
        gbc.writeMem(0x4f82, { 0x22 });
        gbc.writeMem(0xe5a3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe2ec);
        EXPECT(gbc.pc(), 0x4f83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a3), 0xc7);
        // 22 00EF
        gbc.setState(0x172a, 0x4836, 0x6250, 0x34e6, 0x54a6, 0x8e4e, 0x1, 0x1);
        gbc.writeMem(0x172a, { 0x22 });
        gbc.writeMem(0x8e4e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4836);
        EXPECT(gbc.pc(), 0x172b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e4e), 0x62);
        // 22 00F0
        gbc.setState(0x55b8, 0x5af4, 0xbb70, 0x186f, 0x261a, 0xd29e, 0x1, 0x1);
        gbc.writeMem(0x55b8, { 0x22 });
        gbc.writeMem(0xd29e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x5af4);
        EXPECT(gbc.pc(), 0x55b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd29e), 0xbb);
        // 22 00F1
        gbc.setState(0x99eb, 0xafb6, 0x3b0, 0xd8b1, 0x3074, 0xedc3, 0x0, 0x1);
        gbc.writeMem(0x99eb, { 0x22 });
        gbc.writeMem(0xedc3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xafb6);
        EXPECT(gbc.pc(), 0x99ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99eb), 0x22);
        EXPECT(gbc.readMem(0xedc3), 0x3);
        // 22 00F3
        gbc.setState(0xb64c, 0x787d, 0xca50, 0x985c, 0x7024, 0xf15d, 0x0, 0x1);
        gbc.writeMem(0xb64c, { 0x22 });
        gbc.writeMem(0xf15d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x787d);
        EXPECT(gbc.pc(), 0xb64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb64c), 0x22);
        EXPECT(gbc.readMem(0xf15d), 0xca);
        // 22 00F4
        gbc.setState(0x2127, 0xc678, 0xfc60, 0xa658, 0x5162, 0x8b28, 0x0, 0x1);
        gbc.writeMem(0x2127, { 0x22 });
        gbc.writeMem(0x8b28, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc678);
        EXPECT(gbc.pc(), 0x2128);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b28), 0xfc);
        // 22 00F5
        gbc.setState(0xc1e5, 0xf8dc, 0x8fc0, 0x8e57, 0x890a, 0x8aa5, 0x0, 0x1);
        gbc.writeMem(0x8aa5, { 0x0 });
        gbc.writeMem(0xc1e5, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf8dc);
        EXPECT(gbc.pc(), 0xc1e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa5), 0x8f);
        EXPECT(gbc.readMem(0xc1e5), 0x22);
        // 22 00F6
        gbc.setState(0x1980, 0x8af4, 0xdcb0, 0xd9, 0x32c3, 0xcb00, 0x0, 0x0);
        gbc.writeMem(0x1980, { 0x22 });
        gbc.writeMem(0xcb00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x8af4);
        EXPECT(gbc.pc(), 0x1981);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb00), 0xdc);
        // 22 00F8
        gbc.setState(0x69c2, 0x51c9, 0x4470, 0x93df, 0xc138, 0xb46f, 0x1, 0x0);
        gbc.writeMem(0x69c2, { 0x22 });
        gbc.writeMem(0xb46f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x51c9);
        EXPECT(gbc.pc(), 0x69c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb46f), 0x44);
        // 22 00F9
        gbc.setState(0xa0e4, 0x4cf0, 0xead0, 0x9063, 0x4b02, 0xbc78, 0x0, 0x1);
        gbc.writeMem(0xa0e4, { 0x22 });
        gbc.writeMem(0xbc78, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4cf0);
        EXPECT(gbc.pc(), 0xa0e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e4), 0x22);
        EXPECT(gbc.readMem(0xbc78), 0xea);
        // 22 00FA
        gbc.setState(0x6fb6, 0x5458, 0x38a0, 0x3fa8, 0xf001, 0xe1c7, 0x1, 0x1);
        gbc.writeMem(0x6fb6, { 0x22 });
        gbc.writeMem(0xe1c7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5458);
        EXPECT(gbc.pc(), 0x6fb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1c7), 0x38);
        // 22 00FB
        gbc.setState(0x3dfc, 0xfc4e, 0x5c70, 0xf99e, 0x111e, 0x9024, 0x1, 0x0);
        gbc.writeMem(0x3dfc, { 0x22 });
        gbc.writeMem(0x9024, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfc4e);
        EXPECT(gbc.pc(), 0x3dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9024), 0x5c);
        // 22 00FD
        gbc.setState(0x8a6b, 0xef8, 0x8360, 0x7a39, 0x71e9, 0xe643, 0x0, 0x0);
        gbc.writeMem(0x8a6b, { 0x22 });
        gbc.writeMem(0xe643, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xef8);
        EXPECT(gbc.pc(), 0x8a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6b), 0x22);
        EXPECT(gbc.readMem(0xe643), 0x83);
        // 22 0101
        gbc.setState(0xbd99, 0xca36, 0xfd90, 0x30e7, 0xe1d7, 0xb089, 0x1, 0x1);
        gbc.writeMem(0xb089, { 0x0 });
        gbc.writeMem(0xbd99, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xca36);
        EXPECT(gbc.pc(), 0xbd9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb089), 0xfd);
        EXPECT(gbc.readMem(0xbd99), 0x22);
        // 22 0102
        gbc.setState(0x854b, 0xb4de, 0xc020, 0x89c9, 0x1bc, 0xdc5f, 0x0, 0x0);
        gbc.writeMem(0x854b, { 0x22 });
        gbc.writeMem(0xdc5f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb4de);
        EXPECT(gbc.pc(), 0x854c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x854b), 0x22);
        EXPECT(gbc.readMem(0xdc5f), 0xc0);
        // 22 0106
        gbc.setState(0x14e3, 0xaf54, 0xf010, 0x87d2, 0xa85, 0xecda, 0x1, 0x0);
        gbc.writeMem(0x14e3, { 0x22 });
        gbc.writeMem(0xecda, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xaf54);
        EXPECT(gbc.pc(), 0x14e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecda), 0xf0);
        // 22 0107
        gbc.setState(0xbf2c, 0x72b6, 0xc020, 0xedc4, 0xbb99, 0xc5c8, 0x1, 0x1);
        gbc.writeMem(0xbf2c, { 0x22 });
        gbc.writeMem(0xc5c8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x72b6);
        EXPECT(gbc.pc(), 0xbf2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf2c), 0x22);
        EXPECT(gbc.readMem(0xc5c8), 0xc0);
        // 22 0108
        gbc.setState(0x37d3, 0x8468, 0xa40, 0x5d56, 0xad38, 0xc03a, 0x0, 0x1);
        gbc.writeMem(0x37d3, { 0x22 });
        gbc.writeMem(0xc03a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x8468);
        EXPECT(gbc.pc(), 0x37d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc03a), 0xa);
        // 22 0109
        gbc.setState(0x3e70, 0x4a7f, 0xe360, 0x9098, 0xfaa8, 0x8d09, 0x0, 0x0);
        gbc.writeMem(0x3e70, { 0x22 });
        gbc.writeMem(0x8d09, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4a7f);
        EXPECT(gbc.pc(), 0x3e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d09), 0xe3);
        // 22 010D
        gbc.setState(0xd839, 0x193f, 0xef20, 0x24e6, 0x7a6f, 0x999f, 0x1, 0x1);
        gbc.writeMem(0x999f, { 0x0 });
        gbc.writeMem(0xd839, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x193f);
        EXPECT(gbc.pc(), 0xd83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x999f), 0xef);
        EXPECT(gbc.readMem(0xd839), 0x22);
        // 22 010E
        gbc.setState(0x6c4e, 0xe34c, 0x95e0, 0xec65, 0xd1f3, 0xe90f, 0x0, 0x0);
        gbc.writeMem(0x6c4e, { 0x22 });
        gbc.writeMem(0xe90f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe34c);
        EXPECT(gbc.pc(), 0x6c4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90f), 0x95);
        // 22 010F
        gbc.setState(0x572e, 0x561d, 0x6cd0, 0x6a01, 0xf6, 0xc7c0, 0x0, 0x1);
        gbc.writeMem(0x572e, { 0x22 });
        gbc.writeMem(0xc7c0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x561d);
        EXPECT(gbc.pc(), 0x572f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7c0), 0x6c);
        // 22 0110
        gbc.setState(0xb4ff, 0x1077, 0xc280, 0x1c14, 0x7c7, 0xc4bf, 0x0, 0x1);
        gbc.writeMem(0xb4ff, { 0x22 });
        gbc.writeMem(0xc4bf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x1077);
        EXPECT(gbc.pc(), 0xb500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ff), 0x22);
        EXPECT(gbc.readMem(0xc4bf), 0xc2);
        // 22 0115
        gbc.setState(0xc019, 0xf8f7, 0x93e0, 0x225a, 0xb10d, 0xeab3, 0x0, 0x1);
        gbc.writeMem(0xc019, { 0x22 });
        gbc.writeMem(0xeab3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf8f7);
        EXPECT(gbc.pc(), 0xc01a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc019), 0x22);
        EXPECT(gbc.readMem(0xeab3), 0x93);
        // 22 0117
        gbc.setState(0x8ae3, 0x39c2, 0x7ac0, 0x5be9, 0xe864, 0xa011, 0x1, 0x1);
        gbc.writeMem(0x8ae3, { 0x22 });
        gbc.writeMem(0xa011, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x39c2);
        EXPECT(gbc.pc(), 0x8ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae3), 0x22);
        EXPECT(gbc.readMem(0xa011), 0x7a);
        // 22 0119
        gbc.setState(0x7a38, 0x1f1d, 0xad10, 0x9501, 0xd65b, 0x9d5e, 0x1, 0x1);
        gbc.writeMem(0x7a38, { 0x22 });
        gbc.writeMem(0x9d5e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1f1d);
        EXPECT(gbc.pc(), 0x7a39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d5e), 0xad);
        // 22 0127
        gbc.setState(0x33c8, 0xc531, 0x2690, 0x9224, 0x3020, 0xf930, 0x0, 0x0);
        gbc.writeMem(0x33c8, { 0x22 });
        gbc.writeMem(0xf930, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc531);
        EXPECT(gbc.pc(), 0x33c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf930), 0x26);
        // 22 0128
        gbc.setState(0xbfb9, 0x4db, 0x4060, 0x23d4, 0xd5fc, 0xedbd, 0x1, 0x1);
        gbc.writeMem(0xbfb9, { 0x22 });
        gbc.writeMem(0xedbd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4db);
        EXPECT(gbc.pc(), 0xbfba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb9), 0x22);
        EXPECT(gbc.readMem(0xedbd), 0x40);
        // 22 0129
        gbc.setState(0x697d, 0x72ef, 0x1490, 0x14dd, 0x5964, 0xbdf2, 0x0, 0x1);
        gbc.writeMem(0x697d, { 0x22 });
        gbc.writeMem(0xbdf2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x72ef);
        EXPECT(gbc.pc(), 0x697e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf2), 0x14);
        // 22 012B
        gbc.setState(0xdf02, 0x831f, 0xf0a0, 0x3818, 0xd118, 0xde31, 0x0, 0x1);
        gbc.writeMem(0xde31, { 0x0 });
        gbc.writeMem(0xdf02, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x831f);
        EXPECT(gbc.pc(), 0xdf03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde31), 0xf0);
        EXPECT(gbc.readMem(0xdf02), 0x22);
        // 22 012C
        gbc.setState(0xbb8e, 0x6a99, 0xc8a0, 0x6dd8, 0xf916, 0x8f72, 0x1, 0x1);
        gbc.writeMem(0x8f72, { 0x0 });
        gbc.writeMem(0xbb8e, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6a99);
        EXPECT(gbc.pc(), 0xbb8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f72), 0xc8);
        EXPECT(gbc.readMem(0xbb8e), 0x22);
        // 22 012E
        gbc.setState(0x8b14, 0x41c3, 0x64d0, 0xe047, 0x20c7, 0xed8f, 0x0, 0x0);
        gbc.writeMem(0x8b14, { 0x22 });
        gbc.writeMem(0xed8f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x41c3);
        EXPECT(gbc.pc(), 0x8b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b14), 0x22);
        EXPECT(gbc.readMem(0xed8f), 0x64);
        // 22 0130
        gbc.setState(0x60b0, 0xee1c, 0x57a0, 0x7d8e, 0x4483, 0xaa93, 0x0, 0x1);
        gbc.writeMem(0x60b0, { 0x22 });
        gbc.writeMem(0xaa93, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xee1c);
        EXPECT(gbc.pc(), 0x60b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa93), 0x57);
        // 22 0131
        gbc.setState(0x85c7, 0x97be, 0x76a0, 0x888d, 0x5737, 0x991a, 0x0, 0x0);
        gbc.writeMem(0x85c7, { 0x22 });
        gbc.writeMem(0x991a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x97be);
        EXPECT(gbc.pc(), 0x85c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85c7), 0x22);
        EXPECT(gbc.readMem(0x991a), 0x76);
        // 22 0132
        gbc.setState(0x32ad, 0x1502, 0xe790, 0x4432, 0xcaf8, 0x956d, 0x1, 0x0);
        gbc.writeMem(0x32ad, { 0x22 });
        gbc.writeMem(0x956d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1502);
        EXPECT(gbc.pc(), 0x32ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x956d), 0xe7);
        // 22 0133
        gbc.setState(0x865, 0xa8ad, 0xfd20, 0xbf94, 0x9353, 0xccef, 0x0, 0x1);
        gbc.writeMem(0x865, { 0x22 });
        gbc.writeMem(0xccef, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa8ad);
        EXPECT(gbc.pc(), 0x866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccef), 0xfd);
        // 22 0134
        gbc.setState(0x8e93, 0x2a9, 0x80, 0x99d3, 0x65e6, 0x4a9b, 0x1, 0x0);
        gbc.writeMem(0x4a9b, { 0x0 });
        gbc.writeMem(0x8e93, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2a9);
        EXPECT(gbc.pc(), 0x8e94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e93), 0x22);
        // 22 0135
        gbc.setState(0x79e7, 0x8b84, 0x5bd0, 0x1557, 0x7116, 0xade5, 0x0, 0x1);
        gbc.writeMem(0x79e7, { 0x22 });
        gbc.writeMem(0xade5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8b84);
        EXPECT(gbc.pc(), 0x79e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade5), 0x5b);
        // 22 0138
        gbc.setState(0x59d1, 0xa8bf, 0x50e0, 0x5f9c, 0xd74b, 0xbcfc, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0x22 });
        gbc.writeMem(0xbcfc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa8bf);
        EXPECT(gbc.pc(), 0x59d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcfc), 0x50);
        // 22 0139
        gbc.setState(0x4df7, 0x5a49, 0x7a00, 0x57e0, 0x422b, 0xe44b, 0x1, 0x0);
        gbc.writeMem(0x4df7, { 0x22 });
        gbc.writeMem(0xe44b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5a49);
        EXPECT(gbc.pc(), 0x4df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44b), 0x7a);
        // 22 013A
        gbc.setState(0xd323, 0x5b93, 0xa60, 0xca, 0xa5b8, 0xa22d, 0x1, 0x0);
        gbc.writeMem(0xa22d, { 0x0 });
        gbc.writeMem(0xd323, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5b93);
        EXPECT(gbc.pc(), 0xd324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa22d), 0xa);
        EXPECT(gbc.readMem(0xd323), 0x22);
        // 22 013E
        gbc.setState(0x61a4, 0x8420, 0x2330, 0xad6c, 0xae9d, 0xb672, 0x0, 0x0);
        gbc.writeMem(0x61a4, { 0x22 });
        gbc.writeMem(0xb672, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8420);
        EXPECT(gbc.pc(), 0x61a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb672), 0x23);
        // 22 0140
        gbc.setState(0x90f2, 0x5b0f, 0x5600, 0xbd, 0x7af6, 0xc29f, 0x1, 0x0);
        gbc.writeMem(0x90f2, { 0x22 });
        gbc.writeMem(0xc29f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5b0f);
        EXPECT(gbc.pc(), 0x90f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f2), 0x22);
        EXPECT(gbc.readMem(0xc29f), 0x56);
        // 22 0141
        gbc.setState(0x52ad, 0x1a72, 0xb490, 0xbbdf, 0x820d, 0xc398, 0x1, 0x1);
        gbc.writeMem(0x52ad, { 0x22 });
        gbc.writeMem(0xc398, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1a72);
        EXPECT(gbc.pc(), 0x52ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc398), 0xb4);
        // 22 0142
        gbc.setState(0xa6d0, 0x6d1a, 0x1830, 0x1dec, 0x6e5f, 0xa6a5, 0x0, 0x0);
        gbc.writeMem(0xa6a5, { 0x0 });
        gbc.writeMem(0xa6d0, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x6d1a);
        EXPECT(gbc.pc(), 0xa6d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a5), 0x18);
        EXPECT(gbc.readMem(0xa6d0), 0x22);
        // 22 0143
        gbc.setState(0xc7c7, 0x786b, 0x60, 0xb0cd, 0x4642, 0x1d5e, 0x1, 0x0);
        gbc.writeMem(0x1d5e, { 0x0 });
        gbc.writeMem(0xc7c7, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x786b);
        EXPECT(gbc.pc(), 0xc7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c7), 0x22);
        // 22 0144
        gbc.setState(0x5d4b, 0xa5f4, 0x85a0, 0x2096, 0x7fe, 0xdaf2, 0x1, 0x0);
        gbc.writeMem(0x5d4b, { 0x22 });
        gbc.writeMem(0xdaf2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa5f4);
        EXPECT(gbc.pc(), 0x5d4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf2), 0x85);
        // 22 0146
        gbc.setState(0xb3c4, 0x2a16, 0x80f0, 0xa26b, 0xbffd, 0xcf01, 0x1, 0x1);
        gbc.writeMem(0xb3c4, { 0x22 });
        gbc.writeMem(0xcf01, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2a16);
        EXPECT(gbc.pc(), 0xb3c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c4), 0x22);
        EXPECT(gbc.readMem(0xcf01), 0x80);
        // 22 0147
        gbc.setState(0x8fe4, 0xf4e0, 0x4680, 0x854, 0xae84, 0xbda4, 0x1, 0x1);
        gbc.writeMem(0x8fe4, { 0x22 });
        gbc.writeMem(0xbda4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf4e0);
        EXPECT(gbc.pc(), 0x8fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe4), 0x22);
        EXPECT(gbc.readMem(0xbda4), 0x46);
        // 22 0149
        gbc.setState(0x3f58, 0xf49a, 0x3b0, 0x346, 0xe20, 0xa8ba, 0x1, 0x1);
        gbc.writeMem(0x3f58, { 0x22 });
        gbc.writeMem(0xa8ba, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf49a);
        EXPECT(gbc.pc(), 0x3f59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ba), 0x3);
        // 22 014C
        gbc.setState(0x7b9c, 0x3036, 0xa250, 0x8218, 0x99ad, 0xef77, 0x1, 0x1);
        gbc.writeMem(0x7b9c, { 0x22 });
        gbc.writeMem(0xef77, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x3036);
        EXPECT(gbc.pc(), 0x7b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef77), 0xa2);
        // 22 014D
        gbc.setState(0x364a, 0xf833, 0xa750, 0x8621, 0xd1c2, 0xf7d5, 0x1, 0x0);
        gbc.writeMem(0x364a, { 0x22 });
        gbc.writeMem(0xf7d5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf833);
        EXPECT(gbc.pc(), 0x364b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf7d5), 0xa7);
        // 22 014F
        gbc.setState(0xa35a, 0xc42a, 0x4540, 0xd12e, 0x19fa, 0xbf5e, 0x0, 0x1);
        gbc.writeMem(0xa35a, { 0x22 });
        gbc.writeMem(0xbf5e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc42a);
        EXPECT(gbc.pc(), 0xa35b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa35a), 0x22);
        EXPECT(gbc.readMem(0xbf5e), 0x45);
        // 22 0151
        gbc.setState(0x43a7, 0x5dbf, 0x7820, 0xc7e8, 0x377, 0xb747, 0x0, 0x1);
        gbc.writeMem(0x43a7, { 0x22 });
        gbc.writeMem(0xb747, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5dbf);
        EXPECT(gbc.pc(), 0x43a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb747), 0x78);
        // 22 0153
        gbc.setState(0x993b, 0x28b1, 0xfa70, 0xd4b2, 0xadc0, 0xd082, 0x1, 0x1);
        gbc.writeMem(0x993b, { 0x22 });
        gbc.writeMem(0xd082, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x28b1);
        EXPECT(gbc.pc(), 0x993c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993b), 0x22);
        EXPECT(gbc.readMem(0xd082), 0xfa);
        // 22 0156
        gbc.setState(0xa76, 0x4d43, 0x76d0, 0xb35d, 0x807a, 0xa1d3, 0x1, 0x0);
        gbc.writeMem(0xa76, { 0x22 });
        gbc.writeMem(0xa1d3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x4d43);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d3), 0x76);
        // 22 015A
        gbc.setState(0xbdfe, 0x6a9b, 0x5c20, 0x2275, 0x16a5, 0xb7e2, 0x0, 0x0);
        gbc.writeMem(0xb7e2, { 0x0 });
        gbc.writeMem(0xbdfe, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6a9b);
        EXPECT(gbc.pc(), 0xbdff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e2), 0x5c);
        EXPECT(gbc.readMem(0xbdfe), 0x22);
        // 22 015B
        gbc.setState(0xc643, 0x39af, 0x3810, 0xf8da, 0x6317, 0xf6e6, 0x0, 0x0);
        gbc.writeMem(0xc643, { 0x22 });
        gbc.writeMem(0xf6e6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x39af);
        EXPECT(gbc.pc(), 0xc644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc643), 0x22);
        EXPECT(gbc.readMem(0xf6e6), 0x38);
        // 22 015C
        gbc.setState(0x6ec, 0xe138, 0xc6b0, 0x80ea, 0xbdd7, 0xc7cd, 0x0, 0x1);
        gbc.writeMem(0x6ec, { 0x22 });
        gbc.writeMem(0xc7cd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe138);
        EXPECT(gbc.pc(), 0x6ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7cd), 0xc6);
        // 22 015E
        gbc.setState(0x5602, 0xf721, 0xaea0, 0x30af, 0x8a61, 0x8a8e, 0x1, 0x0);
        gbc.writeMem(0x5602, { 0x22 });
        gbc.writeMem(0x8a8e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xf721);
        EXPECT(gbc.pc(), 0x5603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8e), 0xae);
        // 22 0160
        gbc.setState(0xd031, 0x50c2, 0x5650, 0x5908, 0x17d2, 0x8855, 0x0, 0x1);
        gbc.writeMem(0x8855, { 0x0 });
        gbc.writeMem(0xd031, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x50c2);
        EXPECT(gbc.pc(), 0xd032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8855), 0x56);
        EXPECT(gbc.readMem(0xd031), 0x22);
        // 22 0164
        gbc.setState(0xc1d4, 0xb970, 0x3f60, 0x454c, 0xe14d, 0xc152, 0x0, 0x1);
        gbc.writeMem(0xc152, { 0x0 });
        gbc.writeMem(0xc1d4, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xb970);
        EXPECT(gbc.pc(), 0xc1d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc152), 0x3f);
        EXPECT(gbc.readMem(0xc1d4), 0x22);
        // 22 0165
        gbc.setState(0x661d, 0x82cb, 0x7220, 0xfc72, 0x3b47, 0xa3e9, 0x0, 0x1);
        gbc.writeMem(0x661d, { 0x22 });
        gbc.writeMem(0xa3e9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x82cb);
        EXPECT(gbc.pc(), 0x661e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e9), 0x72);
        // 22 0167
        gbc.setState(0x4c0, 0xb5a1, 0x9dc0, 0x24c3, 0x7a70, 0xe212, 0x0, 0x0);
        gbc.writeMem(0x4c0, { 0x22 });
        gbc.writeMem(0xe212, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb5a1);
        EXPECT(gbc.pc(), 0x4c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe212), 0x9d);
        // 22 0169
        gbc.setState(0x2eff, 0x1254, 0x4e0, 0xe7cf, 0xb0fe, 0xc980, 0x1, 0x1);
        gbc.writeMem(0x2eff, { 0x22 });
        gbc.writeMem(0xc980, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1254);
        EXPECT(gbc.pc(), 0x2f00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc980), 0x4);
        // 22 016A
        gbc.setState(0x176c, 0x16c7, 0xee50, 0x8a0e, 0x63ff, 0xf676, 0x0, 0x0);
        gbc.writeMem(0x176c, { 0x22 });
        gbc.writeMem(0xf676, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x16c7);
        EXPECT(gbc.pc(), 0x176d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf676), 0xee);
        // 22 016B
        gbc.setState(0x3d18, 0xa3bc, 0x9630, 0xddba, 0xc68a, 0xc026, 0x0, 0x0);
        gbc.writeMem(0x3d18, { 0x22 });
        gbc.writeMem(0xc026, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa3bc);
        EXPECT(gbc.pc(), 0x3d19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc026), 0x96);
        // 22 0171
        gbc.setState(0x93a, 0xf9fb, 0x5d10, 0x962a, 0xb6f3, 0xfaee, 0x0, 0x1);
        gbc.writeMem(0x93a, { 0x22 });
        gbc.writeMem(0xfaee, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xf9fb);
        EXPECT(gbc.pc(), 0x93b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfaee), 0x5d);
        // 22 0172
        gbc.setState(0x48e8, 0x3433, 0x6fe0, 0x758f, 0xa2c9, 0x86aa, 0x0, 0x0);
        gbc.writeMem(0x48e8, { 0x22 });
        gbc.writeMem(0x86aa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3433);
        EXPECT(gbc.pc(), 0x48e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86aa), 0x6f);
        // 22 0174
        gbc.setState(0xc904, 0x7882, 0x4e20, 0x1d33, 0x423d, 0xc75e, 0x1, 0x1);
        gbc.writeMem(0xc75e, { 0x0 });
        gbc.writeMem(0xc904, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7882);
        EXPECT(gbc.pc(), 0xc905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc75e), 0x4e);
        EXPECT(gbc.readMem(0xc904), 0x22);
        // 22 0175
        gbc.setState(0x31fa, 0xb4da, 0xd010, 0x7e5e, 0x1f68, 0xe6e4, 0x1, 0x1);
        gbc.writeMem(0x31fa, { 0x22 });
        gbc.writeMem(0xe6e4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb4da);
        EXPECT(gbc.pc(), 0x31fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6e4), 0xd0);
        // 22 0177
        gbc.setState(0x9b59, 0x6b12, 0xcad0, 0x96e6, 0x27f9, 0x836c, 0x1, 0x1);
        gbc.writeMem(0x836c, { 0x0 });
        gbc.writeMem(0x9b59, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6b12);
        EXPECT(gbc.pc(), 0x9b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x836c), 0xca);
        EXPECT(gbc.readMem(0x9b59), 0x22);
        // 22 017B
        gbc.setState(0xdc21, 0x9b88, 0xdb0, 0x6903, 0xaf1d, 0xcfa5, 0x0, 0x1);
        gbc.writeMem(0xcfa5, { 0x0 });
        gbc.writeMem(0xdc21, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9b88);
        EXPECT(gbc.pc(), 0xdc22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa5), 0xd);
        EXPECT(gbc.readMem(0xdc21), 0x22);
        // 22 017C
        gbc.setState(0x815f, 0xaf90, 0x3e0, 0x4f2b, 0x957d, 0xfbf3, 0x0, 0x1);
        gbc.writeMem(0x815f, { 0x22 });
        gbc.writeMem(0xfbf3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xaf90);
        EXPECT(gbc.pc(), 0x8160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815f), 0x22);
        EXPECT(gbc.readMem(0xfbf3), 0x3);
        // 22 017D
        gbc.setState(0x822f, 0xb8b2, 0x6a90, 0x15ce, 0xcf4d, 0xbe79, 0x0, 0x0);
        gbc.writeMem(0x822f, { 0x22 });
        gbc.writeMem(0xbe79, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb8b2);
        EXPECT(gbc.pc(), 0x8230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x822f), 0x22);
        EXPECT(gbc.readMem(0xbe79), 0x6a);
        // 22 017F
        gbc.setState(0x2fea, 0xfee7, 0x87b0, 0xe781, 0xaf4d, 0x945c, 0x1, 0x1);
        gbc.writeMem(0x2fea, { 0x22 });
        gbc.writeMem(0x945c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfee7);
        EXPECT(gbc.pc(), 0x2feb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945c), 0x87);
        // 22 0180
        gbc.setState(0x2663, 0xccc5, 0x1cd0, 0x6aad, 0x601d, 0xc34b, 0x0, 0x1);
        gbc.writeMem(0x2663, { 0x22 });
        gbc.writeMem(0xc34b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xccc5);
        EXPECT(gbc.pc(), 0x2664);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc34b), 0x1c);
        // 22 0181
        gbc.setState(0xe2f, 0xe700, 0x4b30, 0xc1b3, 0xe760, 0xa739, 0x1, 0x1);
        gbc.writeMem(0xe2f, { 0x22 });
        gbc.writeMem(0xa739, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe700);
        EXPECT(gbc.pc(), 0xe30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa739), 0x4b);
        // 22 0183
        gbc.setState(0x4882, 0xcec5, 0xd700, 0x81d, 0x1cca, 0xb325, 0x0, 0x0);
        gbc.writeMem(0x4882, { 0x22 });
        gbc.writeMem(0xb325, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcec5);
        EXPECT(gbc.pc(), 0x4883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb325), 0xd7);
        // 22 0190
        gbc.setState(0x2fd, 0xb0e2, 0xe290, 0xd4d5, 0x8b03, 0xac65, 0x1, 0x0);
        gbc.writeMem(0x2fd, { 0x22 });
        gbc.writeMem(0xac65, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb0e2);
        EXPECT(gbc.pc(), 0x2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac65), 0xe2);
        // 22 0191
        gbc.setState(0x349, 0xc2d4, 0x9360, 0xfce1, 0xe490, 0xd42d, 0x1, 0x0);
        gbc.writeMem(0x349, { 0x22 });
        gbc.writeMem(0xd42d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc2d4);
        EXPECT(gbc.pc(), 0x34a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd42d), 0x93);
        // 22 0192
        gbc.setState(0x26c0, 0x65e4, 0xccb0, 0x6b1c, 0xad2e, 0xf032, 0x0, 0x1);
        gbc.writeMem(0x26c0, { 0x22 });
        gbc.writeMem(0xf032, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x65e4);
        EXPECT(gbc.pc(), 0x26c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf032), 0xcc);
        // 22 019C
        gbc.setState(0xc825, 0x189e, 0xe960, 0x4e4, 0x909, 0xbac2, 0x0, 0x0);
        gbc.writeMem(0xbac2, { 0x0 });
        gbc.writeMem(0xc825, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x189e);
        EXPECT(gbc.pc(), 0xc826);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac2), 0xe9);
        EXPECT(gbc.readMem(0xc825), 0x22);
        // 22 019D
        gbc.setState(0x7de4, 0x351, 0x3500, 0x6f63, 0xce8c, 0x8af8, 0x0, 0x1);
        gbc.writeMem(0x7de4, { 0x22 });
        gbc.writeMem(0x8af8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x351);
        EXPECT(gbc.pc(), 0x7de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af8), 0x35);
        // 22 019E
        gbc.setState(0xbdcf, 0xcddf, 0xf9c0, 0xf1dc, 0x93b, 0xc981, 0x0, 0x0);
        gbc.writeMem(0xbdcf, { 0x22 });
        gbc.writeMem(0xc981, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xcddf);
        EXPECT(gbc.pc(), 0xbdd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdcf), 0x22);
        EXPECT(gbc.readMem(0xc981), 0xf9);
        // 22 01A2
        gbc.setState(0x94ca, 0xa305, 0x14b0, 0x5e8d, 0x5080, 0xb3fe, 0x0, 0x0);
        gbc.writeMem(0x94ca, { 0x22 });
        gbc.writeMem(0xb3fe, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa305);
        EXPECT(gbc.pc(), 0x94cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ca), 0x22);
        EXPECT(gbc.readMem(0xb3fe), 0x14);
        // 22 01A4
        gbc.setState(0x2ecf, 0x465c, 0x2c60, 0xdf01, 0xb32, 0xfca7, 0x1, 0x1);
        gbc.writeMem(0x2ecf, { 0x22 });
        gbc.writeMem(0xfca7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x465c);
        EXPECT(gbc.pc(), 0x2ed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfca7), 0x2c);
        // 22 01A5
        gbc.setState(0x3286, 0x8d7a, 0x5840, 0x621f, 0x9580, 0xf751, 0x1, 0x0);
        gbc.writeMem(0x3286, { 0x22 });
        gbc.writeMem(0xf751, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8d7a);
        EXPECT(gbc.pc(), 0x3287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf751), 0x58);
        // 22 01A8
        gbc.setState(0x24d0, 0x8d31, 0xb0e0, 0x8b8, 0x867, 0x82b7, 0x1, 0x0);
        gbc.writeMem(0x24d0, { 0x22 });
        gbc.writeMem(0x82b7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8d31);
        EXPECT(gbc.pc(), 0x24d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b7), 0xb0);
        // 22 01A9
        gbc.setState(0x5fb4, 0xcc8c, 0x76c0, 0x9a28, 0x112f, 0xb4f1, 0x0, 0x1);
        gbc.writeMem(0x5fb4, { 0x22 });
        gbc.writeMem(0xb4f1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xcc8c);
        EXPECT(gbc.pc(), 0x5fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f1), 0x76);
        // 22 01AE
        gbc.setState(0x2f87, 0x2104, 0x1d10, 0x3dc, 0xbef4, 0xb68a, 0x1, 0x1);
        gbc.writeMem(0x2f87, { 0x22 });
        gbc.writeMem(0xb68a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x2104);
        EXPECT(gbc.pc(), 0x2f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb68a), 0x1d);
        // 22 01B0
        gbc.setState(0x71bd, 0x269c, 0xd530, 0x3623, 0xae2a, 0xc743, 0x1, 0x0);
        gbc.writeMem(0x71bd, { 0x22 });
        gbc.writeMem(0xc743, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x269c);
        EXPECT(gbc.pc(), 0x71be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc743), 0xd5);
        // 22 01B4
        gbc.setState(0xcd50, 0x56e6, 0x8c80, 0x980e, 0x28dd, 0xd821, 0x0, 0x1);
        gbc.writeMem(0xcd50, { 0x22 });
        gbc.writeMem(0xd821, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x56e6);
        EXPECT(gbc.pc(), 0xcd51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd50), 0x22);
        EXPECT(gbc.readMem(0xd821), 0x8c);
        // 22 01B7
        gbc.setState(0xa421, 0x3ba3, 0xe2a0, 0xca65, 0x723d, 0x8657, 0x1, 0x1);
        gbc.writeMem(0x8657, { 0x0 });
        gbc.writeMem(0xa421, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3ba3);
        EXPECT(gbc.pc(), 0xa422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8657), 0xe2);
        EXPECT(gbc.readMem(0xa421), 0x22);
        // 22 01B8
        gbc.setState(0x1da4, 0x54b1, 0x7400, 0x9309, 0x7313, 0xd859, 0x1, 0x0);
        gbc.writeMem(0x1da4, { 0x22 });
        gbc.writeMem(0xd859, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x54b1);
        EXPECT(gbc.pc(), 0x1da5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd859), 0x74);
        // 22 01B9
        gbc.setState(0x196, 0x8074, 0x4020, 0x6dbc, 0x4453, 0xf49b, 0x1, 0x1);
        gbc.writeMem(0x196, { 0x22 });
        gbc.writeMem(0xf49b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8074);
        EXPECT(gbc.pc(), 0x197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf49b), 0x40);
        // 22 01BC
        gbc.setState(0x28b6, 0xf3df, 0x16c0, 0x221f, 0x7790, 0x8c61, 0x0, 0x1);
        gbc.writeMem(0x28b6, { 0x22 });
        gbc.writeMem(0x8c61, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf3df);
        EXPECT(gbc.pc(), 0x28b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c61), 0x16);
        // 22 01BF
        gbc.setState(0xca61, 0xf0ba, 0x1380, 0xdd81, 0x6755, 0xe4af, 0x1, 0x0);
        gbc.writeMem(0xca61, { 0x22 });
        gbc.writeMem(0xe4af, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf0ba);
        EXPECT(gbc.pc(), 0xca62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca61), 0x22);
        EXPECT(gbc.readMem(0xe4af), 0x13);
        // 22 01C0
        gbc.setState(0x239c, 0xf01f, 0xc9d0, 0x6d84, 0x109, 0x8964, 0x1, 0x0);
        gbc.writeMem(0x239c, { 0x22 });
        gbc.writeMem(0x8964, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf01f);
        EXPECT(gbc.pc(), 0x239d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8964), 0xc9);
        // 22 01C2
        gbc.setState(0x3a2a, 0xdc52, 0xd530, 0x2e1c, 0xc0bb, 0xedc4, 0x0, 0x0);
        gbc.writeMem(0x3a2a, { 0x22 });
        gbc.writeMem(0xedc4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xdc52);
        EXPECT(gbc.pc(), 0x3a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedc4), 0xd5);
        // 22 01C4
        gbc.setState(0xc839, 0xafe3, 0x2810, 0x123b, 0x7789, 0xb0ee, 0x1, 0x0);
        gbc.writeMem(0xb0ee, { 0x0 });
        gbc.writeMem(0xc839, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xafe3);
        EXPECT(gbc.pc(), 0xc83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ee), 0x28);
        EXPECT(gbc.readMem(0xc839), 0x22);
        // 22 01C5
        gbc.setState(0x290c, 0x67be, 0x6f10, 0xc59f, 0x1894, 0xbf5c, 0x0, 0x1);
        gbc.writeMem(0x290c, { 0x22 });
        gbc.writeMem(0xbf5c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x67be);
        EXPECT(gbc.pc(), 0x290d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5c), 0x6f);
        // 22 01C9
        gbc.setState(0x4980, 0xcc46, 0xd2e0, 0x3dca, 0x7144, 0xded4, 0x1, 0x1);
        gbc.writeMem(0x4980, { 0x22 });
        gbc.writeMem(0xded4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xcc46);
        EXPECT(gbc.pc(), 0x4981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xded4), 0xd2);
        // 22 01CA
        gbc.setState(0x72ec, 0x2b90, 0xfa90, 0xb3a, 0x1117, 0xa79b, 0x1, 0x1);
        gbc.writeMem(0x72ec, { 0x22 });
        gbc.writeMem(0xa79b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x2b90);
        EXPECT(gbc.pc(), 0x72ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79b), 0xfa);
        // 22 01CB
        gbc.setState(0xca67, 0xa898, 0x5a90, 0x65fa, 0x7292, 0xf7aa, 0x1, 0x0);
        gbc.writeMem(0xca67, { 0x22 });
        gbc.writeMem(0xf7aa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa898);
        EXPECT(gbc.pc(), 0xca68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca67), 0x22);
        EXPECT(gbc.readMem(0xf7aa), 0x5a);
        // 22 01CD
        gbc.setState(0x3579, 0x784c, 0xa780, 0xf8bc, 0x32f3, 0x8c3e, 0x1, 0x0);
        gbc.writeMem(0x3579, { 0x22 });
        gbc.writeMem(0x8c3e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x784c);
        EXPECT(gbc.pc(), 0x357a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3e), 0xa7);
        // 22 01CF
        gbc.setState(0xc33d, 0x6fa, 0x1a0, 0x14ca, 0xd370, 0xf821, 0x0, 0x0);
        gbc.writeMem(0xc33d, { 0x22 });
        gbc.writeMem(0xf821, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6fa);
        EXPECT(gbc.pc(), 0xc33e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33d), 0x22);
        EXPECT(gbc.readMem(0xf821), 0x1);
        // 22 01D2
        gbc.setState(0xdd73, 0x76cf, 0x89b0, 0x5602, 0xeeb4, 0xd61b, 0x0, 0x0);
        gbc.writeMem(0xd61b, { 0x0 });
        gbc.writeMem(0xdd73, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x76cf);
        EXPECT(gbc.pc(), 0xdd74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd61b), 0x89);
        EXPECT(gbc.readMem(0xdd73), 0x22);
        // 22 01D4
        gbc.setState(0x1c70, 0xdd4e, 0xcb20, 0xf20b, 0x257e, 0xc1b3, 0x1, 0x1);
        gbc.writeMem(0x1c70, { 0x22 });
        gbc.writeMem(0xc1b3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdd4e);
        EXPECT(gbc.pc(), 0x1c71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1b3), 0xcb);
        // 22 01D7
        gbc.setState(0x3614, 0xebe0, 0x95e0, 0x62cf, 0x5586, 0xea66, 0x1, 0x0);
        gbc.writeMem(0x3614, { 0x22 });
        gbc.writeMem(0xea66, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xebe0);
        EXPECT(gbc.pc(), 0x3615);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea66), 0x95);
        // 22 01D8
        gbc.setState(0xa4ec, 0x1692, 0xa700, 0xf127, 0x2972, 0xb11f, 0x1, 0x0);
        gbc.writeMem(0xa4ec, { 0x22 });
        gbc.writeMem(0xb11f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1692);
        EXPECT(gbc.pc(), 0xa4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ec), 0x22);
        EXPECT(gbc.readMem(0xb11f), 0xa7);
        // 22 01DC
        gbc.setState(0x34a9, 0x32f8, 0x74d0, 0x2df5, 0x8338, 0xdb71, 0x0, 0x0);
        gbc.writeMem(0x34a9, { 0x22 });
        gbc.writeMem(0xdb71, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x32f8);
        EXPECT(gbc.pc(), 0x34aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb71), 0x74);
        // 22 01DD
        gbc.setState(0x5ff0, 0xb3ef, 0x35f0, 0x4b5f, 0x723a, 0xfa64, 0x0, 0x1);
        gbc.writeMem(0x5ff0, { 0x22 });
        gbc.writeMem(0xfa64, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb3ef);
        EXPECT(gbc.pc(), 0x5ff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa64), 0x35);
        // 22 01DE
        gbc.setState(0x5be4, 0xf722, 0xfd00, 0x3e29, 0x3bf2, 0xd389, 0x1, 0x0);
        gbc.writeMem(0x5be4, { 0x22 });
        gbc.writeMem(0xd389, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf722);
        EXPECT(gbc.pc(), 0x5be5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd389), 0xfd);
        // 22 01E0
        gbc.setState(0xc3db, 0x11e7, 0xfce0, 0x6b50, 0xb764, 0xf2b1, 0x0, 0x0);
        gbc.writeMem(0xc3db, { 0x22 });
        gbc.writeMem(0xf2b1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x11e7);
        EXPECT(gbc.pc(), 0xc3dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3db), 0x22);
        EXPECT(gbc.readMem(0xf2b1), 0xfc);
        // 22 01E2
        gbc.setState(0x5255, 0x4b20, 0x7890, 0x53de, 0xa631, 0xfdcc, 0x1, 0x1);
        gbc.writeMem(0x5255, { 0x22 });
        gbc.writeMem(0xfdcc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4b20);
        EXPECT(gbc.pc(), 0x5256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfdcc), 0x78);
        // 22 01E3
        gbc.setState(0x4a7f, 0x877, 0xf5b0, 0x346b, 0x4d72, 0xd643, 0x1, 0x0);
        gbc.writeMem(0x4a7f, { 0x22 });
        gbc.writeMem(0xd643, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x877);
        EXPECT(gbc.pc(), 0x4a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd643), 0xf5);
        // 22 01EB
        gbc.setState(0xa796, 0xca66, 0x8c60, 0xde5a, 0xf88b, 0xd55f, 0x0, 0x0);
        gbc.writeMem(0xa796, { 0x22 });
        gbc.writeMem(0xd55f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xca66);
        EXPECT(gbc.pc(), 0xa797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa796), 0x22);
        EXPECT(gbc.readMem(0xd55f), 0x8c);
        // 22 01F4
        gbc.setState(0x65ab, 0x8997, 0x3d00, 0x50e0, 0x26f4, 0xb0f6, 0x1, 0x1);
        gbc.writeMem(0x65ab, { 0x22 });
        gbc.writeMem(0xb0f6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8997);
        EXPECT(gbc.pc(), 0x65ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f6), 0x3d);
        // 22 01F5
        gbc.setState(0x8dd6, 0xf921, 0xad20, 0x95a0, 0x542, 0xc662, 0x0, 0x1);
        gbc.writeMem(0x8dd6, { 0x22 });
        gbc.writeMem(0xc662, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf921);
        EXPECT(gbc.pc(), 0x8dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd6), 0x22);
        EXPECT(gbc.readMem(0xc662), 0xad);
        // 22 01F7
        gbc.setState(0x418, 0x5012, 0xcd70, 0xa877, 0x128d, 0xb209, 0x1, 0x1);
        gbc.writeMem(0x418, { 0x22 });
        gbc.writeMem(0xb209, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5012);
        EXPECT(gbc.pc(), 0x419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb209), 0xcd);
        // 22 01FB
        gbc.setState(0x4a6b, 0xd834, 0xa420, 0x63e7, 0x7745, 0xf34d, 0x1, 0x1);
        gbc.writeMem(0x4a6b, { 0x22 });
        gbc.writeMem(0xf34d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd834);
        EXPECT(gbc.pc(), 0x4a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf34d), 0xa4);
        // 22 01FC
        gbc.setState(0x56eb, 0xa6, 0xb7e0, 0xa43b, 0x64ee, 0x8402, 0x1, 0x0);
        gbc.writeMem(0x56eb, { 0x22 });
        gbc.writeMem(0x8402, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa6);
        EXPECT(gbc.pc(), 0x56ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8402), 0xb7);
        // 22 01FE
        gbc.setState(0xedba, 0x93a4, 0x6a30, 0x23bb, 0x371f, 0x8aed, 0x1, 0x1);
        gbc.writeMem(0x8aed, { 0x0 });
        gbc.writeMem(0xedba, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x93a4);
        EXPECT(gbc.pc(), 0xedbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aed), 0x6a);
        EXPECT(gbc.readMem(0xedba), 0x22);
        // 22 01FF
        gbc.setState(0xcf84, 0x8fd0, 0xf5e0, 0xfa6f, 0x647d, 0xc3b6, 0x1, 0x1);
        gbc.writeMem(0xc3b6, { 0x0 });
        gbc.writeMem(0xcf84, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8fd0);
        EXPECT(gbc.pc(), 0xcf85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3b6), 0xf5);
        EXPECT(gbc.readMem(0xcf84), 0x22);
        // 22 0201
        gbc.setState(0x25d1, 0x84c7, 0xcd00, 0x6b5, 0xaba5, 0xc618, 0x0, 0x0);
        gbc.writeMem(0x25d1, { 0x22 });
        gbc.writeMem(0xc618, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x84c7);
        EXPECT(gbc.pc(), 0x25d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc618), 0xcd);
        // 22 0204
        gbc.setState(0x18a2, 0x77a, 0xb710, 0x98c5, 0x7bd6, 0xd02d, 0x0, 0x0);
        gbc.writeMem(0x18a2, { 0x22 });
        gbc.writeMem(0xd02d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x77a);
        EXPECT(gbc.pc(), 0x18a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd02d), 0xb7);
        // 22 0205
        gbc.setState(0xc3f3, 0x7b6f, 0x99a0, 0xb364, 0x3f57, 0xfd47, 0x1, 0x0);
        gbc.writeMem(0xc3f3, { 0x22 });
        gbc.writeMem(0xfd47, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7b6f);
        EXPECT(gbc.pc(), 0xc3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f3), 0x22);
        EXPECT(gbc.readMem(0xfd47), 0x99);
        // 22 0207
        gbc.setState(0xa382, 0x35ca, 0x2720, 0xa052, 0x98d8, 0xafd4, 0x1, 0x0);
        gbc.writeMem(0xa382, { 0x22 });
        gbc.writeMem(0xafd4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x35ca);
        EXPECT(gbc.pc(), 0xa383);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa382), 0x22);
        EXPECT(gbc.readMem(0xafd4), 0x27);
        // 22 0208
        gbc.setState(0xde43, 0xb18c, 0xc410, 0xe054, 0xaed1, 0xa187, 0x1, 0x1);
        gbc.writeMem(0xa187, { 0x0 });
        gbc.writeMem(0xde43, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb18c);
        EXPECT(gbc.pc(), 0xde44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa187), 0xc4);
        EXPECT(gbc.readMem(0xde43), 0x22);
        // 22 0209
        gbc.setState(0x16ee, 0x6dde, 0x97c0, 0x2d0f, 0xbbd, 0x9909, 0x1, 0x0);
        gbc.writeMem(0x16ee, { 0x22 });
        gbc.writeMem(0x9909, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6dde);
        EXPECT(gbc.pc(), 0x16ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9909), 0x97);
        // 22 020B
        gbc.setState(0x70f, 0xa538, 0xc60, 0x816e, 0x5474, 0xf5f6, 0x0, 0x0);
        gbc.writeMem(0x70f, { 0x22 });
        gbc.writeMem(0xf5f6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa538);
        EXPECT(gbc.pc(), 0x710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5f6), 0xc);
        // 22 020E
        gbc.setState(0x9bc7, 0xf832, 0x7050, 0x9081, 0xbcdc, 0xe0bd, 0x0, 0x0);
        gbc.writeMem(0x9bc7, { 0x22 });
        gbc.writeMem(0xe0bd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf832);
        EXPECT(gbc.pc(), 0x9bc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bc7), 0x22);
        EXPECT(gbc.readMem(0xe0bd), 0x70);
        // 22 0210
        gbc.setState(0x39d, 0x237c, 0x6f0, 0x9299, 0x4101, 0xb749, 0x0, 0x0);
        gbc.writeMem(0x39d, { 0x22 });
        gbc.writeMem(0xb749, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x237c);
        EXPECT(gbc.pc(), 0x39e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb749), 0x6);
        // 22 0212
        gbc.setState(0x4004, 0xa4f3, 0x2e0, 0xabd3, 0x59f2, 0xb1ed, 0x0, 0x1);
        gbc.writeMem(0x4004, { 0x22 });
        gbc.writeMem(0xb1ed, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa4f3);
        EXPECT(gbc.pc(), 0x4005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ed), 0x2);
        // 22 0213
        gbc.setState(0xd650, 0x148f, 0xe700, 0xb6b0, 0x2497, 0x9248, 0x1, 0x0);
        gbc.writeMem(0x9248, { 0x0 });
        gbc.writeMem(0xd650, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x148f);
        EXPECT(gbc.pc(), 0xd651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9248), 0xe7);
        EXPECT(gbc.readMem(0xd650), 0x22);
        // 22 0214
        gbc.setState(0xcf4b, 0x8774, 0x30c0, 0x7c8c, 0xc498, 0xa77d, 0x0, 0x1);
        gbc.writeMem(0xa77d, { 0x0 });
        gbc.writeMem(0xcf4b, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8774);
        EXPECT(gbc.pc(), 0xcf4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa77d), 0x30);
        EXPECT(gbc.readMem(0xcf4b), 0x22);
        // 22 0215
        gbc.setState(0xd7dd, 0xaee7, 0xa660, 0xc336, 0xc68d, 0x95b7, 0x1, 0x0);
        gbc.writeMem(0x95b7, { 0x0 });
        gbc.writeMem(0xd7dd, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xaee7);
        EXPECT(gbc.pc(), 0xd7de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b7), 0xa6);
        EXPECT(gbc.readMem(0xd7dd), 0x22);
        // 22 0218
        gbc.setState(0x78e0, 0x97b3, 0x1580, 0xc355, 0xf208, 0x9df5, 0x0, 0x1);
        gbc.writeMem(0x78e0, { 0x22 });
        gbc.writeMem(0x9df5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x97b3);
        EXPECT(gbc.pc(), 0x78e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df5), 0x15);
        // 22 021B
        gbc.setState(0x2cf, 0x232b, 0x5af0, 0xb974, 0x112b, 0x80b2, 0x1, 0x1);
        gbc.writeMem(0x2cf, { 0x22 });
        gbc.writeMem(0x80b2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x232b);
        EXPECT(gbc.pc(), 0x2d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80b2), 0x5a);
        // 22 021E
        gbc.setState(0xa47, 0x78c, 0x2270, 0xc233, 0x6e5f, 0x85dc, 0x0, 0x0);
        gbc.writeMem(0xa47, { 0x22 });
        gbc.writeMem(0x85dc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x78c);
        EXPECT(gbc.pc(), 0xa48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85dc), 0x22);
        // 22 021F
        gbc.setState(0xada, 0x739e, 0x4850, 0x2e5c, 0xcc84, 0xe3db, 0x1, 0x1);
        gbc.writeMem(0xada, { 0x22 });
        gbc.writeMem(0xe3db, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x739e);
        EXPECT(gbc.pc(), 0xadb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3db), 0x48);
        // 22 0220
        gbc.setState(0x150b, 0x63f9, 0x7a80, 0x2158, 0x44e8, 0xc99e, 0x0, 0x0);
        gbc.writeMem(0x150b, { 0x22 });
        gbc.writeMem(0xc99e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x63f9);
        EXPECT(gbc.pc(), 0x150c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99e), 0x7a);
        // 22 0223
        gbc.setState(0x13b9, 0xbbbb, 0xd760, 0x4286, 0x5553, 0x9a13, 0x0, 0x1);
        gbc.writeMem(0x13b9, { 0x22 });
        gbc.writeMem(0x9a13, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbbbb);
        EXPECT(gbc.pc(), 0x13ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a13), 0xd7);
        // 22 0224
        gbc.setState(0x1ff0, 0x40fb, 0xfec0, 0x4f0e, 0x2460, 0xb11b, 0x0, 0x1);
        gbc.writeMem(0x1ff0, { 0x22 });
        gbc.writeMem(0xb11b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x40fb);
        EXPECT(gbc.pc(), 0x1ff1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb11b), 0xfe);
        // 22 0225
        gbc.setState(0xde5e, 0x9a31, 0x2330, 0x8a01, 0xf61e, 0xc2af, 0x0, 0x0);
        gbc.writeMem(0xc2af, { 0x0 });
        gbc.writeMem(0xde5e, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x9a31);
        EXPECT(gbc.pc(), 0xde5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2af), 0x23);
        EXPECT(gbc.readMem(0xde5e), 0x22);
        // 22 0227
        gbc.setState(0xb36f, 0x1b68, 0x4bd0, 0x66e4, 0xc487, 0xdb9a, 0x1, 0x1);
        gbc.writeMem(0xb36f, { 0x22 });
        gbc.writeMem(0xdb9a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1b68);
        EXPECT(gbc.pc(), 0xb370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb36f), 0x22);
        EXPECT(gbc.readMem(0xdb9a), 0x4b);
        // 22 022B
        gbc.setState(0xc979, 0x5a85, 0x26b0, 0x7238, 0x47d1, 0xa008, 0x1, 0x0);
        gbc.writeMem(0xa008, { 0x0 });
        gbc.writeMem(0xc979, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5a85);
        EXPECT(gbc.pc(), 0xc97a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa008), 0x26);
        EXPECT(gbc.readMem(0xc979), 0x22);
        // 22 022C
        gbc.setState(0x40de, 0x4242, 0xcf70, 0x13c0, 0x26c, 0xc185, 0x0, 0x0);
        gbc.writeMem(0x40de, { 0x22 });
        gbc.writeMem(0xc185, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4242);
        EXPECT(gbc.pc(), 0x40df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc185), 0xcf);
        // 22 022E
        gbc.setState(0xef9e, 0x41d0, 0xd960, 0xbb30, 0xf3fc, 0xa721, 0x0, 0x1);
        gbc.writeMem(0xa721, { 0x0 });
        gbc.writeMem(0xef9e, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x41d0);
        EXPECT(gbc.pc(), 0xef9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa721), 0xd9);
        EXPECT(gbc.readMem(0xef9e), 0x22);
        // 22 0231
        gbc.setState(0x9f17, 0x6253, 0xad90, 0xc40f, 0x4941, 0x88e5, 0x0, 0x1);
        gbc.writeMem(0x88e5, { 0x0 });
        gbc.writeMem(0x9f17, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6253);
        EXPECT(gbc.pc(), 0x9f18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88e5), 0xad);
        EXPECT(gbc.readMem(0x9f17), 0x22);
        // 22 0237
        gbc.setState(0x8fe0, 0xe8c2, 0x5030, 0x2cc, 0x134b, 0x909c, 0x1, 0x0);
        gbc.writeMem(0x8fe0, { 0x22 });
        gbc.writeMem(0x909c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe8c2);
        EXPECT(gbc.pc(), 0x8fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fe0), 0x22);
        EXPECT(gbc.readMem(0x909c), 0x50);
        // 22 023A
        gbc.setState(0xaf54, 0x6849, 0x7a30, 0x9af0, 0x1d8, 0xb764, 0x1, 0x1);
        gbc.writeMem(0xaf54, { 0x22 });
        gbc.writeMem(0xb764, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x6849);
        EXPECT(gbc.pc(), 0xaf55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf54), 0x22);
        EXPECT(gbc.readMem(0xb764), 0x7a);
        // 22 023B
        gbc.setState(0x2d50, 0xc695, 0x3490, 0x6064, 0xb3c5, 0xa281, 0x0, 0x0);
        gbc.writeMem(0x2d50, { 0x22 });
        gbc.writeMem(0xa281, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc695);
        EXPECT(gbc.pc(), 0x2d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa281), 0x34);
        // 22 023E
        gbc.setState(0x3ec8, 0x9004, 0x83a0, 0xb126, 0xf848, 0xfb7f, 0x0, 0x1);
        gbc.writeMem(0x3ec8, { 0x22 });
        gbc.writeMem(0xfb7f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9004);
        EXPECT(gbc.pc(), 0x3ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb7f), 0x83);
        // 22 0241
        gbc.setState(0x609f, 0x4101, 0x40, 0x9600, 0x1494, 0x2b2b, 0x1, 0x0);
        gbc.writeMem(0x2b2b, { 0x0 });
        gbc.writeMem(0x609f, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4101);
        EXPECT(gbc.pc(), 0x60a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 22 0243
        gbc.setState(0xa9de, 0x9bc4, 0xac0, 0x3463, 0xbf8b, 0xc696, 0x0, 0x0);
        gbc.writeMem(0xa9de, { 0x22 });
        gbc.writeMem(0xc696, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9bc4);
        EXPECT(gbc.pc(), 0xa9df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9de), 0x22);
        EXPECT(gbc.readMem(0xc696), 0xa);
        // 22 0245
        gbc.setState(0x3fe0, 0x3a06, 0x8060, 0xb255, 0x1637, 0x8e74, 0x1, 0x1);
        gbc.writeMem(0x3fe0, { 0x22 });
        gbc.writeMem(0x8e74, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3a06);
        EXPECT(gbc.pc(), 0x3fe1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e74), 0x80);
        // 22 0247
        gbc.setState(0xc26b, 0xbbab, 0xe7e0, 0xa557, 0xf2c1, 0xe8e4, 0x1, 0x0);
        gbc.writeMem(0xc26b, { 0x22 });
        gbc.writeMem(0xe8e4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xbbab);
        EXPECT(gbc.pc(), 0xc26c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc26b), 0x22);
        EXPECT(gbc.readMem(0xe8e4), 0xe7);
        // 22 0249
        gbc.setState(0x5b3c, 0x54bf, 0x58e0, 0x644b, 0xefce, 0x9f51, 0x0, 0x0);
        gbc.writeMem(0x5b3c, { 0x22 });
        gbc.writeMem(0x9f51, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x54bf);
        EXPECT(gbc.pc(), 0x5b3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f51), 0x58);
        // 22 024A
        gbc.setState(0x30a1, 0xc21a, 0x6ef0, 0x903e, 0x263, 0xede8, 0x1, 0x0);
        gbc.writeMem(0x30a1, { 0x22 });
        gbc.writeMem(0xede8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc21a);
        EXPECT(gbc.pc(), 0x30a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede8), 0x6e);
        // 22 024C
        gbc.setState(0xeffd, 0x2bcd, 0x8210, 0x18ef, 0x888, 0x876d, 0x1, 0x1);
        gbc.writeMem(0x876d, { 0x0 });
        gbc.writeMem(0xeffd, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x2bcd);
        EXPECT(gbc.pc(), 0xeffe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x876d), 0x82);
        EXPECT(gbc.readMem(0xeffd), 0x22);
        // 22 0252
        gbc.setState(0xea80, 0xeba5, 0x7ad0, 0x245a, 0xc227, 0xe09d, 0x0, 0x1);
        gbc.writeMem(0xe09d, { 0x0 });
        gbc.writeMem(0xea80, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xeba5);
        EXPECT(gbc.pc(), 0xea81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe09d), 0x7a);
        EXPECT(gbc.readMem(0xea80), 0x22);
        // 22 0258
        gbc.setState(0x877b, 0x29e9, 0xf0b0, 0xd656, 0x8cf7, 0xa83f, 0x1, 0x1);
        gbc.writeMem(0x877b, { 0x22 });
        gbc.writeMem(0xa83f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x29e9);
        EXPECT(gbc.pc(), 0x877c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x877b), 0x22);
        EXPECT(gbc.readMem(0xa83f), 0xf0);
        // 22 0259
        gbc.setState(0x8955, 0x3e9e, 0x80d0, 0x1071, 0x1066, 0xe26c, 0x1, 0x1);
        gbc.writeMem(0x8955, { 0x22 });
        gbc.writeMem(0xe26c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3e9e);
        EXPECT(gbc.pc(), 0x8956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8955), 0x22);
        EXPECT(gbc.readMem(0xe26c), 0x80);
        // 22 025A
        gbc.setState(0x70f2, 0xa513, 0x5b20, 0x5745, 0x7fe7, 0x8daf, 0x1, 0x0);
        gbc.writeMem(0x70f2, { 0x22 });
        gbc.writeMem(0x8daf, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa513);
        EXPECT(gbc.pc(), 0x70f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8daf), 0x5b);
        // 22 025B
        gbc.setState(0x66d0, 0xa1a9, 0x5820, 0xd3f7, 0x8846, 0xfb54, 0x0, 0x0);
        gbc.writeMem(0x66d0, { 0x22 });
        gbc.writeMem(0xfb54, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xa1a9);
        EXPECT(gbc.pc(), 0x66d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb54), 0x58);
        // 22 025C
        gbc.setState(0x6386, 0x7b0c, 0x7fa0, 0xaa5, 0x2d97, 0x97e2, 0x1, 0x1);
        gbc.writeMem(0x6386, { 0x22 });
        gbc.writeMem(0x97e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7b0c);
        EXPECT(gbc.pc(), 0x6387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e2), 0x7f);
        // 22 0260
        gbc.setState(0x2117, 0x3732, 0x910, 0xb5ae, 0x42b0, 0xbbfa, 0x0, 0x1);
        gbc.writeMem(0x2117, { 0x22 });
        gbc.writeMem(0xbbfa, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3732);
        EXPECT(gbc.pc(), 0x2118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbfa), 0x9);
        // 22 0262
        gbc.setState(0x92b0, 0xbf2a, 0x2f0, 0xe2ff, 0x36fe, 0xcd99, 0x1, 0x0);
        gbc.writeMem(0x92b0, { 0x22 });
        gbc.writeMem(0xcd99, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbf2a);
        EXPECT(gbc.pc(), 0x92b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92b0), 0x22);
        EXPECT(gbc.readMem(0xcd99), 0x2);
        // 22 0265
        gbc.setState(0x3a18, 0x3540, 0x86e0, 0xda1, 0x447d, 0x9f5b, 0x0, 0x1);
        gbc.writeMem(0x3a18, { 0x22 });
        gbc.writeMem(0x9f5b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3540);
        EXPECT(gbc.pc(), 0x3a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5b), 0x86);
        // 22 0268
        gbc.setState(0x6d66, 0xdb59, 0xda00, 0xfdd4, 0x5ade, 0x858a, 0x1, 0x0);
        gbc.writeMem(0x6d66, { 0x22 });
        gbc.writeMem(0x858a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xdb59);
        EXPECT(gbc.pc(), 0x6d67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858a), 0xda);
        // 22 026A
        gbc.setState(0xf71, 0xcfb1, 0xda20, 0x840a, 0x651e, 0xa1cd, 0x1, 0x1);
        gbc.writeMem(0xf71, { 0x22 });
        gbc.writeMem(0xa1cd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcfb1);
        EXPECT(gbc.pc(), 0xf72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1cd), 0xda);
        // 22 026F
        gbc.setState(0x3346, 0x9915, 0xd6d0, 0x3a63, 0xe0f2, 0xa09f, 0x1, 0x0);
        gbc.writeMem(0x3346, { 0x22 });
        gbc.writeMem(0xa09f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9915);
        EXPECT(gbc.pc(), 0x3347);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa09f), 0xd6);
        // 22 0273
        gbc.setState(0xe5dd, 0xcc75, 0x11b0, 0xee03, 0x6270, 0xa6c0, 0x0, 0x0);
        gbc.writeMem(0xa6c0, { 0x0 });
        gbc.writeMem(0xe5dd, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcc75);
        EXPECT(gbc.pc(), 0xe5de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6c0), 0x11);
        EXPECT(gbc.readMem(0xe5dd), 0x22);
        // 22 0275
        gbc.setState(0x1bf0, 0xfb29, 0xf4b0, 0xa81, 0x8d5, 0xaf3b, 0x1, 0x1);
        gbc.writeMem(0x1bf0, { 0x22 });
        gbc.writeMem(0xaf3b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfb29);
        EXPECT(gbc.pc(), 0x1bf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf3b), 0xf4);
        // 22 0276
        gbc.setState(0x31c6, 0x316b, 0x8660, 0x9e30, 0xba02, 0xdf8c, 0x1, 0x0);
        gbc.writeMem(0x31c6, { 0x22 });
        gbc.writeMem(0xdf8c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x316b);
        EXPECT(gbc.pc(), 0x31c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf8c), 0x86);
        // 22 0277
        gbc.setState(0x7404, 0x4d4e, 0x12a0, 0x6eaa, 0x7a48, 0x953e, 0x1, 0x0);
        gbc.writeMem(0x7404, { 0x22 });
        gbc.writeMem(0x953e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4d4e);
        EXPECT(gbc.pc(), 0x7405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x953e), 0x12);
        // 22 0279
        gbc.setState(0x2409, 0xc127, 0x8790, 0x1a79, 0x4bbd, 0xc028, 0x1, 0x0);
        gbc.writeMem(0x2409, { 0x22 });
        gbc.writeMem(0xc028, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc127);
        EXPECT(gbc.pc(), 0x240a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc028), 0x87);
        // 22 027A
        gbc.setState(0x4f02, 0xc832, 0xf6b0, 0xf433, 0x907d, 0xbda4, 0x0, 0x1);
        gbc.writeMem(0x4f02, { 0x22 });
        gbc.writeMem(0xbda4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc832);
        EXPECT(gbc.pc(), 0x4f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbda4), 0xf6);
        // 22 027B
        gbc.setState(0x3f33, 0x46f3, 0x2fa0, 0x50b9, 0xca6a, 0xa96d, 0x0, 0x0);
        gbc.writeMem(0x3f33, { 0x22 });
        gbc.writeMem(0xa96d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x46f3);
        EXPECT(gbc.pc(), 0x3f34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96d), 0x2f);
        // 22 027D
        gbc.setState(0x275a, 0xdfb0, 0x7f30, 0xf7c8, 0x5896, 0xc599, 0x0, 0x0);
        gbc.writeMem(0x275a, { 0x22 });
        gbc.writeMem(0xc599, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdfb0);
        EXPECT(gbc.pc(), 0x275b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc599), 0x7f);
        // 22 027E
        gbc.setState(0x27fa, 0x59ab, 0x83e0, 0xc28f, 0xcc3c, 0xca13, 0x0, 0x1);
        gbc.writeMem(0x27fa, { 0x22 });
        gbc.writeMem(0xca13, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x59ab);
        EXPECT(gbc.pc(), 0x27fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca13), 0x83);
        // 22 027F
        gbc.setState(0x3e4c, 0x31cb, 0x73f0, 0xdd72, 0x6b7b, 0xcf49, 0x0, 0x1);
        gbc.writeMem(0x3e4c, { 0x22 });
        gbc.writeMem(0xcf49, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x31cb);
        EXPECT(gbc.pc(), 0x3e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf49), 0x73);
        // 22 0280
        gbc.setState(0x42ab, 0xe7ad, 0x9180, 0xd96a, 0xbd4a, 0xa65b, 0x1, 0x0);
        gbc.writeMem(0x42ab, { 0x22 });
        gbc.writeMem(0xa65b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe7ad);
        EXPECT(gbc.pc(), 0x42ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa65b), 0x91);
        // 22 0282
        gbc.setState(0xc5a3, 0xa4f, 0x4a20, 0x41c2, 0xa82b, 0x91a9, 0x0, 0x0);
        gbc.writeMem(0x91a9, { 0x0 });
        gbc.writeMem(0xc5a3, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa4f);
        EXPECT(gbc.pc(), 0xc5a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a9), 0x4a);
        EXPECT(gbc.readMem(0xc5a3), 0x22);
        // 22 0286
        gbc.setState(0x4e6f, 0x7416, 0x89e0, 0x6aba, 0x20a1, 0xa5ec, 0x0, 0x1);
        gbc.writeMem(0x4e6f, { 0x22 });
        gbc.writeMem(0xa5ec, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7416);
        EXPECT(gbc.pc(), 0x4e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ec), 0x89);
        // 22 0288
        gbc.setState(0xc16f, 0xcee6, 0xe480, 0x2d31, 0x6cad, 0xd567, 0x1, 0x1);
        gbc.writeMem(0xc16f, { 0x22 });
        gbc.writeMem(0xd567, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcee6);
        EXPECT(gbc.pc(), 0xc170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16f), 0x22);
        EXPECT(gbc.readMem(0xd567), 0xe4);
        // 22 028C
        gbc.setState(0xaec8, 0x7ed7, 0x580, 0x6979, 0x41cf, 0xc303, 0x0, 0x1);
        gbc.writeMem(0xaec8, { 0x22 });
        gbc.writeMem(0xc303, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7ed7);
        EXPECT(gbc.pc(), 0xaec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec8), 0x22);
        EXPECT(gbc.readMem(0xc303), 0x5);
        // 22 028D
        gbc.setState(0xb172, 0xbb70, 0x2490, 0xd79e, 0x7b7c, 0xe526, 0x0, 0x0);
        gbc.writeMem(0xb172, { 0x22 });
        gbc.writeMem(0xe526, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbb70);
        EXPECT(gbc.pc(), 0xb173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb172), 0x22);
        EXPECT(gbc.readMem(0xe526), 0x24);
        // 22 0296
        gbc.setState(0x46cc, 0xdb9d, 0xcfb0, 0x22b2, 0xdfcf, 0xb3a9, 0x0, 0x0);
        gbc.writeMem(0x46cc, { 0x22 });
        gbc.writeMem(0xb3a9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdb9d);
        EXPECT(gbc.pc(), 0x46cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a9), 0xcf);
        // 22 0299
        gbc.setState(0x9b13, 0x4d6d, 0xbe20, 0xf233, 0x138d, 0xef83, 0x0, 0x1);
        gbc.writeMem(0x9b13, { 0x22 });
        gbc.writeMem(0xef83, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4d6d);
        EXPECT(gbc.pc(), 0x9b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b13), 0x22);
        EXPECT(gbc.readMem(0xef83), 0xbe);
        // 22 029A
        gbc.setState(0x928a, 0x7ea7, 0x4130, 0xbc13, 0x824c, 0xb25b, 0x1, 0x1);
        gbc.writeMem(0x928a, { 0x22 });
        gbc.writeMem(0xb25b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7ea7);
        EXPECT(gbc.pc(), 0x928b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x928a), 0x22);
        EXPECT(gbc.readMem(0xb25b), 0x41);
        // 22 029B
        gbc.setState(0xbab4, 0x6083, 0x3780, 0xa167, 0x7b0b, 0xdb27, 0x0, 0x1);
        gbc.writeMem(0xbab4, { 0x22 });
        gbc.writeMem(0xdb27, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0xbab5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab4), 0x22);
        EXPECT(gbc.readMem(0xdb27), 0x37);
        // 22 029C
        gbc.setState(0x892c, 0x175b, 0x8240, 0xf056, 0xe0bc, 0x872c, 0x1, 0x1);
        gbc.writeMem(0x872c, { 0x0 });
        gbc.writeMem(0x892c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x175b);
        EXPECT(gbc.pc(), 0x892d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x872c), 0x82);
        EXPECT(gbc.readMem(0x892c), 0x22);
        // 22 029E
        gbc.setState(0x3406, 0x3e5b, 0x8f20, 0xd24, 0x9b10, 0xc97d, 0x1, 0x0);
        gbc.writeMem(0x3406, { 0x22 });
        gbc.writeMem(0xc97d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3e5b);
        EXPECT(gbc.pc(), 0x3407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc97d), 0x8f);
        // 22 02A0
        gbc.setState(0x76d3, 0xcd78, 0x8370, 0xdf80, 0xfc63, 0xaec4, 0x1, 0x0);
        gbc.writeMem(0x76d3, { 0x22 });
        gbc.writeMem(0xaec4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcd78);
        EXPECT(gbc.pc(), 0x76d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec4), 0x83);
        // 22 02A6
        gbc.setState(0xd7ad, 0x8f4e, 0x3b10, 0x7322, 0xd003, 0xa91c, 0x1, 0x1);
        gbc.writeMem(0xa91c, { 0x0 });
        gbc.writeMem(0xd7ad, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8f4e);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa91c), 0x3b);
        EXPECT(gbc.readMem(0xd7ad), 0x22);
        // 22 02AA
        gbc.setState(0xfe3, 0x5dbd, 0xd220, 0x15b7, 0x4f6f, 0x8ff6, 0x1, 0x0);
        gbc.writeMem(0xfe3, { 0x22 });
        gbc.writeMem(0x8ff6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5dbd);
        EXPECT(gbc.pc(), 0xfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff6), 0xd2);
        // 22 02AB
        gbc.setState(0xd709, 0x1153, 0xfcf0, 0xe002, 0x2ecf, 0xfdf6, 0x0, 0x1);
        gbc.writeMem(0xd709, { 0x22 });
        gbc.writeMem(0xfdf6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1153);
        EXPECT(gbc.pc(), 0xd70a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd709), 0x22);
        EXPECT(gbc.readMem(0xfdf6), 0xfc);
        // 22 02AE
        gbc.setState(0x4a5f, 0xa091, 0x5700, 0xf7ca, 0x9d76, 0xba46, 0x1, 0x0);
        gbc.writeMem(0x4a5f, { 0x22 });
        gbc.writeMem(0xba46, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa091);
        EXPECT(gbc.pc(), 0x4a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba46), 0x57);
        // 22 02B2
        gbc.setState(0xd573, 0xa866, 0xaa60, 0x4fe, 0x1f9b, 0xd220, 0x1, 0x0);
        gbc.writeMem(0xd220, { 0x0 });
        gbc.writeMem(0xd573, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa866);
        EXPECT(gbc.pc(), 0xd574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd220), 0xaa);
        EXPECT(gbc.readMem(0xd573), 0x22);
        // 22 02B4
        gbc.setState(0x277f, 0x610d, 0xc290, 0xd4c6, 0x562f, 0xba6f, 0x1, 0x1);
        gbc.writeMem(0x277f, { 0x22 });
        gbc.writeMem(0xba6f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x610d);
        EXPECT(gbc.pc(), 0x2780);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba6f), 0xc2);
        // 22 02B5
        gbc.setState(0xafd3, 0x9008, 0x3ee0, 0xa945, 0x4fc4, 0xca51, 0x1, 0x0);
        gbc.writeMem(0xafd3, { 0x22 });
        gbc.writeMem(0xca51, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9008);
        EXPECT(gbc.pc(), 0xafd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd3), 0x22);
        EXPECT(gbc.readMem(0xca51), 0x3e);
        // 22 02B7
        gbc.setState(0xce4c, 0x6924, 0xf040, 0x5b8c, 0xe6cb, 0xe05a, 0x1, 0x0);
        gbc.writeMem(0xce4c, { 0x22 });
        gbc.writeMem(0xe05a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x6924);
        EXPECT(gbc.pc(), 0xce4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce4c), 0x22);
        EXPECT(gbc.readMem(0xe05a), 0xf0);
        // 22 02B9
        gbc.setState(0xcfe7, 0x4987, 0xca90, 0x9187, 0x5513, 0x9805, 0x1, 0x1);
        gbc.writeMem(0x9805, { 0x0 });
        gbc.writeMem(0xcfe7, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4987);
        EXPECT(gbc.pc(), 0xcfe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9805), 0xca);
        EXPECT(gbc.readMem(0xcfe7), 0x22);
        // 22 02BA
        gbc.setState(0xa66f, 0x13d6, 0xd680, 0x9d7, 0xd05e, 0xe564, 0x1, 0x0);
        gbc.writeMem(0xa66f, { 0x22 });
        gbc.writeMem(0xe564, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x13d6);
        EXPECT(gbc.pc(), 0xa670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66f), 0x22);
        EXPECT(gbc.readMem(0xe564), 0xd6);
        // 22 02BF
        gbc.setState(0xd551, 0x2dd4, 0x82b0, 0x4668, 0x731b, 0xd384, 0x0, 0x1);
        gbc.writeMem(0xd384, { 0x0 });
        gbc.writeMem(0xd551, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2dd4);
        EXPECT(gbc.pc(), 0xd552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd384), 0x82);
        EXPECT(gbc.readMem(0xd551), 0x22);
        // 22 02C2
        gbc.setState(0x5491, 0x5d73, 0x20c0, 0xa946, 0x8f1b, 0x9e00, 0x1, 0x1);
        gbc.writeMem(0x5491, { 0x22 });
        gbc.writeMem(0x9e00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5d73);
        EXPECT(gbc.pc(), 0x5492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e00), 0x20);
        // 22 02C3
        gbc.setState(0xe497, 0x52, 0x3de0, 0x6d82, 0xe1b1, 0xbdde, 0x1, 0x1);
        gbc.writeMem(0xbdde, { 0x0 });
        gbc.writeMem(0xe497, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x52);
        EXPECT(gbc.pc(), 0xe498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdde), 0x3d);
        EXPECT(gbc.readMem(0xe497), 0x22);
        // 22 02C5
        gbc.setState(0x41a, 0x83a9, 0xf6e0, 0x8d3f, 0x57d4, 0x9eb9, 0x1, 0x1);
        gbc.writeMem(0x41a, { 0x22 });
        gbc.writeMem(0x9eb9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x83a9);
        EXPECT(gbc.pc(), 0x41b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb9), 0xf6);
        // 22 02C6
        gbc.setState(0x9fac, 0xf41a, 0x2e60, 0x7b63, 0xec01, 0xaf76, 0x0, 0x1);
        gbc.writeMem(0x9fac, { 0x22 });
        gbc.writeMem(0xaf76, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf41a);
        EXPECT(gbc.pc(), 0x9fad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fac), 0x22);
        EXPECT(gbc.readMem(0xaf76), 0x2e);
        // 22 02C7
        gbc.setState(0x48be, 0x99f2, 0xb1d0, 0x6abf, 0xad83, 0xfac6, 0x1, 0x0);
        gbc.writeMem(0x48be, { 0x22 });
        gbc.writeMem(0xfac6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x99f2);
        EXPECT(gbc.pc(), 0x48bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfac6), 0xb1);
        // 22 02C9
        gbc.setState(0xad4e, 0x4b48, 0xbb0, 0x7d7a, 0xb203, 0x8ebe, 0x1, 0x1);
        gbc.writeMem(0x8ebe, { 0x0 });
        gbc.writeMem(0xad4e, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4b48);
        EXPECT(gbc.pc(), 0xad4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ebe), 0xb);
        EXPECT(gbc.readMem(0xad4e), 0x22);
        // 22 02CA
        gbc.setState(0x24bd, 0xc0ad, 0xf730, 0x8c00, 0xfce9, 0xfe65, 0x0, 0x0);
        gbc.writeMem(0x24bd, { 0x22 });
        gbc.writeMem(0xfe65, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc0ad);
        EXPECT(gbc.pc(), 0x24be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfe65), 0xf7);
        // 22 02CD
        gbc.setState(0xb0c3, 0xf5ff, 0x40, 0x30b6, 0xd762, 0x7c29, 0x1, 0x0);
        gbc.writeMem(0x7c29, { 0x0 });
        gbc.writeMem(0xb0c3, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf5ff);
        EXPECT(gbc.pc(), 0xb0c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0c3), 0x22);
        // 22 02D0
        gbc.setState(0x39c6, 0x5107, 0xe20, 0xbb3, 0x9c8a, 0xd860, 0x0, 0x0);
        gbc.writeMem(0x39c6, { 0x22 });
        gbc.writeMem(0xd860, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5107);
        EXPECT(gbc.pc(), 0x39c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd860), 0xe);
        // 22 02D1
        gbc.setState(0x2a20, 0x7163, 0x9a40, 0xa793, 0x1a7d, 0xe00a, 0x0, 0x1);
        gbc.writeMem(0x2a20, { 0x22 });
        gbc.writeMem(0xe00a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7163);
        EXPECT(gbc.pc(), 0x2a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00a), 0x9a);
        // 22 02D4
        gbc.setState(0xed79, 0xbc91, 0x68d0, 0x3ef0, 0xb063, 0xdae9, 0x1, 0x0);
        gbc.writeMem(0xdae9, { 0x0 });
        gbc.writeMem(0xed79, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xbc91);
        EXPECT(gbc.pc(), 0xed7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae9), 0x68);
        EXPECT(gbc.readMem(0xed79), 0x22);
        // 22 02D8
        gbc.setState(0xded8, 0xafea, 0x1d0, 0x99d2, 0x3778, 0xb137, 0x0, 0x0);
        gbc.writeMem(0xb137, { 0x0 });
        gbc.writeMem(0xded8, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xafea);
        EXPECT(gbc.pc(), 0xded9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb137), 0x1);
        EXPECT(gbc.readMem(0xded8), 0x22);
        // 22 02D9
        gbc.setState(0xd65f, 0xb21e, 0xb6f0, 0x756, 0x4df0, 0xacb7, 0x0, 0x0);
        gbc.writeMem(0xacb7, { 0x0 });
        gbc.writeMem(0xd65f, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb21e);
        EXPECT(gbc.pc(), 0xd660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb7), 0xb6);
        EXPECT(gbc.readMem(0xd65f), 0x22);
        // 22 02DA
        gbc.setState(0xa6cf, 0xd4c, 0xf8d0, 0x7406, 0xdd0b, 0xf0ac, 0x0, 0x0);
        gbc.writeMem(0xa6cf, { 0x22 });
        gbc.writeMem(0xf0ac, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd4c);
        EXPECT(gbc.pc(), 0xa6d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6cf), 0x22);
        EXPECT(gbc.readMem(0xf0ac), 0xf8);
        // 22 02DB
        gbc.setState(0x65fe, 0x759e, 0x3150, 0xee6, 0x711f, 0xde53, 0x0, 0x0);
        gbc.writeMem(0x65fe, { 0x22 });
        gbc.writeMem(0xde53, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x759e);
        EXPECT(gbc.pc(), 0x65ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde53), 0x31);
        // 22 02DC
        gbc.setState(0x720c, 0x6d69, 0xadc0, 0x6128, 0x73cb, 0xefeb, 0x0, 0x1);
        gbc.writeMem(0x720c, { 0x22 });
        gbc.writeMem(0xefeb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6d69);
        EXPECT(gbc.pc(), 0x720d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefeb), 0xad);
        // 22 02DE
        gbc.setState(0x4bca, 0x486c, 0x1c50, 0x5598, 0x30df, 0xee3b, 0x0, 0x1);
        gbc.writeMem(0x4bca, { 0x22 });
        gbc.writeMem(0xee3b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x486c);
        EXPECT(gbc.pc(), 0x4bcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3b), 0x1c);
        // 22 02DF
        gbc.setState(0x6e63, 0x8b06, 0x9fd0, 0xb2e, 0x356, 0xba67, 0x1, 0x0);
        gbc.writeMem(0x6e63, { 0x22 });
        gbc.writeMem(0xba67, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8b06);
        EXPECT(gbc.pc(), 0x6e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba67), 0x9f);
        // 22 02E0
        gbc.setState(0x1db5, 0x4c02, 0xf860, 0xe7fc, 0xa7d7, 0xaec9, 0x1, 0x0);
        gbc.writeMem(0x1db5, { 0x22 });
        gbc.writeMem(0xaec9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4c02);
        EXPECT(gbc.pc(), 0x1db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec9), 0xf8);
        // 22 02E1
        gbc.setState(0x3fd, 0xdaea, 0x9700, 0x4a42, 0xc54, 0xb717, 0x1, 0x1);
        gbc.writeMem(0x3fd, { 0x22 });
        gbc.writeMem(0xb717, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdaea);
        EXPECT(gbc.pc(), 0x3fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb717), 0x97);
        // 22 02E7
        gbc.setState(0x3b04, 0x34e4, 0x7fc0, 0xe882, 0xf235, 0xf89d, 0x0, 0x0);
        gbc.writeMem(0x3b04, { 0x22 });
        gbc.writeMem(0xf89d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x34e4);
        EXPECT(gbc.pc(), 0x3b05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf89d), 0x7f);
        // 22 02E9
        gbc.setState(0xdd30, 0x620e, 0xc630, 0xf6dc, 0x10a8, 0xe70a, 0x1, 0x1);
        gbc.writeMem(0xdd30, { 0x22 });
        gbc.writeMem(0xe70a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x620e);
        EXPECT(gbc.pc(), 0xdd31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd30), 0x22);
        EXPECT(gbc.readMem(0xe70a), 0xc6);
        // 22 02EA
        gbc.setState(0x285d, 0xcf1e, 0xecd0, 0x1de6, 0xd0b, 0xa9a6, 0x0, 0x0);
        gbc.writeMem(0x285d, { 0x22 });
        gbc.writeMem(0xa9a6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xcf1e);
        EXPECT(gbc.pc(), 0x285e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9a6), 0xec);
        // 22 02EB
        gbc.setState(0x69b8, 0xa33c, 0x470, 0x9ac0, 0x81f1, 0xe016, 0x0, 0x0);
        gbc.writeMem(0x69b8, { 0x22 });
        gbc.writeMem(0xe016, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa33c);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe016), 0x4);
        // 22 02EC
        gbc.setState(0xccb3, 0xfea4, 0xb290, 0x1fbd, 0x7f01, 0xae19, 0x1, 0x1);
        gbc.writeMem(0xae19, { 0x0 });
        gbc.writeMem(0xccb3, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xfea4);
        EXPECT(gbc.pc(), 0xccb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae19), 0xb2);
        EXPECT(gbc.readMem(0xccb3), 0x22);
        // 22 02EF
        gbc.setState(0x2174, 0x7016, 0x7750, 0x87e, 0x24e6, 0xb594, 0x1, 0x0);
        gbc.writeMem(0x2174, { 0x22 });
        gbc.writeMem(0xb594, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x7016);
        EXPECT(gbc.pc(), 0x2175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb594), 0x77);
        // 22 02F2
        gbc.setState(0x8b06, 0x4101, 0x4a30, 0xb145, 0x41e3, 0xcf8d, 0x0, 0x0);
        gbc.writeMem(0x8b06, { 0x22 });
        gbc.writeMem(0xcf8d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4101);
        EXPECT(gbc.pc(), 0x8b07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b06), 0x22);
        EXPECT(gbc.readMem(0xcf8d), 0x4a);
        // 22 02FA
        gbc.setState(0x7440, 0xa9af, 0x2f20, 0x929a, 0x824d, 0xfc98, 0x0, 0x1);
        gbc.writeMem(0x7440, { 0x22 });
        gbc.writeMem(0xfc98, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa9af);
        EXPECT(gbc.pc(), 0x7441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc98), 0x2f);
        // 22 02FB
        gbc.setState(0x302, 0x42ad, 0x94e0, 0x357e, 0x8c41, 0xb42b, 0x1, 0x1);
        gbc.writeMem(0x302, { 0x22 });
        gbc.writeMem(0xb42b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x42ad);
        EXPECT(gbc.pc(), 0x303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb42b), 0x94);
        // 22 02FD
        gbc.setState(0xa5b8, 0x1ecf, 0x2090, 0x6119, 0xdf30, 0xf8ac, 0x0, 0x1);
        gbc.writeMem(0xa5b8, { 0x22 });
        gbc.writeMem(0xf8ac, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1ecf);
        EXPECT(gbc.pc(), 0xa5b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5b8), 0x22);
        EXPECT(gbc.readMem(0xf8ac), 0x20);
        // 22 02FE
        gbc.setState(0x167c, 0xc983, 0x1df0, 0x268a, 0x81a0, 0xc035, 0x1, 0x1);
        gbc.writeMem(0x167c, { 0x22 });
        gbc.writeMem(0xc035, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc983);
        EXPECT(gbc.pc(), 0x167d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc035), 0x1d);
        // 22 02FF
        gbc.setState(0x73, 0xe5a6, 0x8890, 0x7bf9, 0x990, 0xd764, 0x1, 0x0);
        gbc.writeMem(0x73, { 0x22 });
        gbc.writeMem(0xd764, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe5a6);
        EXPECT(gbc.pc(), 0x74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd764), 0x88);
        // 22 0301
        gbc.setState(0x7f3a, 0x1fd6, 0x6d20, 0x3d57, 0x872c, 0xc940, 0x1, 0x0);
        gbc.writeMem(0x7f3a, { 0x22 });
        gbc.writeMem(0xc940, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1fd6);
        EXPECT(gbc.pc(), 0x7f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc940), 0x6d);
        // 22 0302
        gbc.setState(0x516b, 0x948b, 0x9ba0, 0x1749, 0x71d2, 0xca4c, 0x0, 0x1);
        gbc.writeMem(0x516b, { 0x22 });
        gbc.writeMem(0xca4c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x948b);
        EXPECT(gbc.pc(), 0x516c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca4c), 0x9b);
        // 22 0304
        gbc.setState(0x198, 0xbd40, 0x72a0, 0xb674, 0x8e5d, 0xd445, 0x1, 0x1);
        gbc.writeMem(0x198, { 0x22 });
        gbc.writeMem(0xd445, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbd40);
        EXPECT(gbc.pc(), 0x199);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd445), 0x72);
        // 22 0305
        gbc.setState(0xda00, 0xed0a, 0x2390, 0x8247, 0x9d3f, 0xbd6b, 0x0, 0x0);
        gbc.writeMem(0xbd6b, { 0x0 });
        gbc.writeMem(0xda00, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xed0a);
        EXPECT(gbc.pc(), 0xda01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd6b), 0x23);
        EXPECT(gbc.readMem(0xda00), 0x22);
        // 22 0306
        gbc.setState(0xd3c8, 0xd8f0, 0xb460, 0xe83d, 0xd5b, 0xa60b, 0x0, 0x1);
        gbc.writeMem(0xa60b, { 0x0 });
        gbc.writeMem(0xd3c8, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd8f0);
        EXPECT(gbc.pc(), 0xd3c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa60b), 0xb4);
        EXPECT(gbc.readMem(0xd3c8), 0x22);
        // 22 0308
        gbc.setState(0x295f, 0x96f2, 0x8020, 0x9786, 0x94bb, 0xe92a, 0x0, 0x0);
        gbc.writeMem(0x295f, { 0x22 });
        gbc.writeMem(0xe92a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x96f2);
        EXPECT(gbc.pc(), 0x2960);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe92a), 0x80);
        // 22 030C
        gbc.setState(0xe8b9, 0xf94e, 0xce90, 0xaa04, 0xe4c9, 0x852b, 0x0, 0x1);
        gbc.writeMem(0x852b, { 0x0 });
        gbc.writeMem(0xe8b9, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf94e);
        EXPECT(gbc.pc(), 0xe8ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852b), 0xce);
        EXPECT(gbc.readMem(0xe8b9), 0x22);
        // 22 030D
        gbc.setState(0xbc33, 0x22ca, 0xed70, 0x93c8, 0xba13, 0xe6bb, 0x1, 0x1);
        gbc.writeMem(0xbc33, { 0x22 });
        gbc.writeMem(0xe6bb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x22ca);
        EXPECT(gbc.pc(), 0xbc34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc33), 0x22);
        EXPECT(gbc.readMem(0xe6bb), 0xed);
        // 22 030E
        gbc.setState(0xeb27, 0xcb81, 0xde30, 0xb143, 0x79f5, 0x88bb, 0x1, 0x1);
        gbc.writeMem(0x88bb, { 0x0 });
        gbc.writeMem(0xeb27, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xcb81);
        EXPECT(gbc.pc(), 0xeb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88bb), 0xde);
        EXPECT(gbc.readMem(0xeb27), 0x22);
        // 22 030F
        gbc.setState(0x4939, 0xc99b, 0xa790, 0x426d, 0x1867, 0xea63, 0x0, 0x1);
        gbc.writeMem(0x4939, { 0x22 });
        gbc.writeMem(0xea63, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc99b);
        EXPECT(gbc.pc(), 0x493a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea63), 0xa7);
        // 22 0311
        gbc.setState(0xce06, 0x355c, 0x9280, 0xb1cf, 0x6a1e, 0xb62c, 0x1, 0x0);
        gbc.writeMem(0xb62c, { 0x0 });
        gbc.writeMem(0xce06, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x355c);
        EXPECT(gbc.pc(), 0xce07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb62c), 0x92);
        EXPECT(gbc.readMem(0xce06), 0x22);
        // 22 0312
        gbc.setState(0xbb37, 0x2631, 0xc170, 0xe77b, 0x5620, 0xf462, 0x0, 0x0);
        gbc.writeMem(0xbb37, { 0x22 });
        gbc.writeMem(0xf462, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2631);
        EXPECT(gbc.pc(), 0xbb38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb37), 0x22);
        EXPECT(gbc.readMem(0xf462), 0xc1);
        // 22 0313
        gbc.setState(0x2b17, 0x4cf, 0x5050, 0x1b63, 0xf1f4, 0xb80a, 0x0, 0x0);
        gbc.writeMem(0x2b17, { 0x22 });
        gbc.writeMem(0xb80a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4cf);
        EXPECT(gbc.pc(), 0x2b18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80a), 0x50);
        // 22 0314
        gbc.setState(0x6ccb, 0x4366, 0xdcd0, 0x73d8, 0x6bb5, 0x8398, 0x0, 0x1);
        gbc.writeMem(0x6ccb, { 0x22 });
        gbc.writeMem(0x8398, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4366);
        EXPECT(gbc.pc(), 0x6ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8398), 0xdc);
        // 22 0315
        gbc.setState(0xb0f3, 0xb54e, 0x6110, 0xfec7, 0x7951, 0xcf00, 0x0, 0x0);
        gbc.writeMem(0xb0f3, { 0x22 });
        gbc.writeMem(0xcf00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb54e);
        EXPECT(gbc.pc(), 0xb0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0f3), 0x22);
        EXPECT(gbc.readMem(0xcf00), 0x61);
        // 22 0317
        gbc.setState(0xd655, 0xe9e6, 0x94b0, 0xb77d, 0x2ab9, 0x8cea, 0x1, 0x0);
        gbc.writeMem(0x8cea, { 0x0 });
        gbc.writeMem(0xd655, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xe9e6);
        EXPECT(gbc.pc(), 0xd656);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cea), 0x94);
        EXPECT(gbc.readMem(0xd655), 0x22);
        // 22 0318
        gbc.setState(0xbe57, 0xedf2, 0xeff0, 0x4e5a, 0xed03, 0xc02d, 0x1, 0x1);
        gbc.writeMem(0xbe57, { 0x22 });
        gbc.writeMem(0xc02d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xedf2);
        EXPECT(gbc.pc(), 0xbe58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe57), 0x22);
        EXPECT(gbc.readMem(0xc02d), 0xef);
        // 22 031D
        gbc.setState(0xb914, 0xf9ef, 0x30d0, 0x3ca8, 0xec6e, 0xe044, 0x0, 0x0);
        gbc.writeMem(0xb914, { 0x22 });
        gbc.writeMem(0xe044, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf9ef);
        EXPECT(gbc.pc(), 0xb915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb914), 0x22);
        EXPECT(gbc.readMem(0xe044), 0x30);
        // 22 031E
        gbc.setState(0xd78d, 0x4ec, 0x7e30, 0xbc6f, 0x4a4c, 0xf829, 0x0, 0x0);
        gbc.writeMem(0xd78d, { 0x22 });
        gbc.writeMem(0xf829, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4ec);
        EXPECT(gbc.pc(), 0xd78e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd78d), 0x22);
        EXPECT(gbc.readMem(0xf829), 0x7e);
        // 22 031F
        gbc.setState(0xd1bb, 0x52a2, 0x6960, 0x71c9, 0x51df, 0xa159, 0x1, 0x1);
        gbc.writeMem(0xa159, { 0x0 });
        gbc.writeMem(0xd1bb, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x52a2);
        EXPECT(gbc.pc(), 0xd1bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa159), 0x69);
        EXPECT(gbc.readMem(0xd1bb), 0x22);
        // 22 0320
        gbc.setState(0xd831, 0x8cff, 0x9150, 0xf764, 0x3802, 0xb0cd, 0x0, 0x0);
        gbc.writeMem(0xb0cd, { 0x0 });
        gbc.writeMem(0xd831, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8cff);
        EXPECT(gbc.pc(), 0xd832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0cd), 0x91);
        EXPECT(gbc.readMem(0xd831), 0x22);
        // 22 0321
        gbc.setState(0x41ee, 0x2558, 0xfe80, 0x983c, 0xb29b, 0x9c40, 0x0, 0x0);
        gbc.writeMem(0x41ee, { 0x22 });
        gbc.writeMem(0x9c40, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2558);
        EXPECT(gbc.pc(), 0x41ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c40), 0xfe);
        // 22 0322
        gbc.setState(0x1c8, 0xb687, 0x33c0, 0xa87f, 0xb88c, 0xe00b, 0x1, 0x1);
        gbc.writeMem(0x1c8, { 0x22 });
        gbc.writeMem(0xe00b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb687);
        EXPECT(gbc.pc(), 0x1c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00b), 0x33);
        // 22 0324
        gbc.setState(0x94f3, 0x62f1, 0x34c0, 0x3b95, 0xb6ae, 0x8fda, 0x1, 0x1);
        gbc.writeMem(0x8fda, { 0x0 });
        gbc.writeMem(0x94f3, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x62f1);
        EXPECT(gbc.pc(), 0x94f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fda), 0x34);
        EXPECT(gbc.readMem(0x94f3), 0x22);
        // 22 0327
        gbc.setState(0x552a, 0xa55, 0x6950, 0xd533, 0x2904, 0xeb7c, 0x0, 0x1);
        gbc.writeMem(0x552a, { 0x22 });
        gbc.writeMem(0xeb7c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa55);
        EXPECT(gbc.pc(), 0x552b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb7c), 0x69);
        // 22 0328
        gbc.setState(0x1cdd, 0xdbe5, 0x9730, 0x78a3, 0xbe08, 0xa9c8, 0x0, 0x0);
        gbc.writeMem(0x1cdd, { 0x22 });
        gbc.writeMem(0xa9c8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdbe5);
        EXPECT(gbc.pc(), 0x1cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9c8), 0x97);
        // 22 032A
        gbc.setState(0x3b59, 0xa882, 0xcc50, 0x692e, 0xfbb3, 0xbdab, 0x0, 0x1);
        gbc.writeMem(0x3b59, { 0x22 });
        gbc.writeMem(0xbdab, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa882);
        EXPECT(gbc.pc(), 0x3b5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdab), 0xcc);
        // 22 0330
        gbc.setState(0xae02, 0x4dd3, 0xc270, 0xa5f2, 0x827d, 0xd32d, 0x1, 0x0);
        gbc.writeMem(0xae02, { 0x22 });
        gbc.writeMem(0xd32d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4dd3);
        EXPECT(gbc.pc(), 0xae03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae02), 0x22);
        EXPECT(gbc.readMem(0xd32d), 0xc2);
        // 22 0331
        gbc.setState(0x6ada, 0xa0cd, 0x0, 0x2890, 0x5d6e, 0xed25, 0x1, 0x0);
        gbc.writeMem(0x6ada, { 0x22 });
        gbc.writeMem(0xed25, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xa0cd);
        EXPECT(gbc.pc(), 0x6adb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed25), 0x0);
        // 22 0332
        gbc.setState(0x134b, 0x503e, 0x38e0, 0xad08, 0xa742, 0xf81f, 0x1, 0x1);
        gbc.writeMem(0x134b, { 0x22 });
        gbc.writeMem(0xf81f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x503e);
        EXPECT(gbc.pc(), 0x134c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf81f), 0x38);
        // 22 0333
        gbc.setState(0x6666, 0x4dd8, 0x7580, 0x4da, 0xac69, 0xc5f7, 0x1, 0x1);
        gbc.writeMem(0x6666, { 0x22 });
        gbc.writeMem(0xc5f7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4dd8);
        EXPECT(gbc.pc(), 0x6667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5f7), 0x75);
        // 22 0336
        gbc.setState(0x2ee4, 0x47af, 0x6690, 0xa881, 0xd858, 0x9032, 0x1, 0x1);
        gbc.writeMem(0x2ee4, { 0x22 });
        gbc.writeMem(0x9032, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x47af);
        EXPECT(gbc.pc(), 0x2ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9032), 0x66);
        // 22 0337
        gbc.setState(0xa354, 0x16e7, 0x920, 0x5821, 0x8a46, 0xf765, 0x0, 0x1);
        gbc.writeMem(0xa354, { 0x22 });
        gbc.writeMem(0xf765, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x16e7);
        EXPECT(gbc.pc(), 0xa355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa354), 0x22);
        EXPECT(gbc.readMem(0xf765), 0x9);
        // 22 0338
        gbc.setState(0x31c6, 0xb213, 0x5930, 0x855c, 0xc9fa, 0xcc51, 0x0, 0x1);
        gbc.writeMem(0x31c6, { 0x22 });
        gbc.writeMem(0xcc51, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb213);
        EXPECT(gbc.pc(), 0x31c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc51), 0x59);
        // 22 0339
        gbc.setState(0x99da, 0x7d68, 0xf530, 0x4d29, 0xf0fe, 0xb0f9, 0x1, 0x1);
        gbc.writeMem(0x99da, { 0x22 });
        gbc.writeMem(0xb0f9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7d68);
        EXPECT(gbc.pc(), 0x99db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99da), 0x22);
        EXPECT(gbc.readMem(0xb0f9), 0xf5);
        // 22 033F
        gbc.setState(0xb7fe, 0x19c8, 0x7220, 0x4d4, 0xf5b2, 0xa7ad, 0x1, 0x0);
        gbc.writeMem(0xa7ad, { 0x0 });
        gbc.writeMem(0xb7fe, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x19c8);
        EXPECT(gbc.pc(), 0xb7ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ad), 0x72);
        EXPECT(gbc.readMem(0xb7fe), 0x22);
        // 22 0340
        gbc.setState(0x4776, 0xaf18, 0xb0, 0x1c2, 0x5038, 0xc90e, 0x0, 0x1);
        gbc.writeMem(0x4776, { 0x22 });
        gbc.writeMem(0xc90e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xaf18);
        EXPECT(gbc.pc(), 0x4777);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90e), 0x0);
        // 22 0341
        gbc.setState(0x6cbf, 0xfee9, 0x2b90, 0xf0fe, 0xe4a5, 0xe582, 0x1, 0x1);
        gbc.writeMem(0x6cbf, { 0x22 });
        gbc.writeMem(0xe582, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xfee9);
        EXPECT(gbc.pc(), 0x6cc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe582), 0x2b);
        // 22 0342
        gbc.setState(0xe010, 0x4d12, 0x650, 0xf3b3, 0x129f, 0xcf3c, 0x0, 0x0);
        gbc.writeMem(0xcf3c, { 0x0 });
        gbc.writeMem(0xe010, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4d12);
        EXPECT(gbc.pc(), 0xe011);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf3c), 0x6);
        EXPECT(gbc.readMem(0xe010), 0x22);
        // 22 0343
        gbc.setState(0x51b2, 0xe2a5, 0x9950, 0x4ed, 0x7eb8, 0xbcc4, 0x1, 0x1);
        gbc.writeMem(0x51b2, { 0x22 });
        gbc.writeMem(0xbcc4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe2a5);
        EXPECT(gbc.pc(), 0x51b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc4), 0x99);
        // 22 0351
        gbc.setState(0xa078, 0x93e3, 0xe6c0, 0x32ed, 0x5038, 0xefb2, 0x1, 0x0);
        gbc.writeMem(0xa078, { 0x22 });
        gbc.writeMem(0xefb2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x93e3);
        EXPECT(gbc.pc(), 0xa079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa078), 0x22);
        EXPECT(gbc.readMem(0xefb2), 0xe6);
        // 22 0352
        gbc.setState(0xe041, 0x74d8, 0xe040, 0xb84c, 0xcf7f, 0x98be, 0x0, 0x0);
        gbc.writeMem(0x98be, { 0x0 });
        gbc.writeMem(0xe041, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x74d8);
        EXPECT(gbc.pc(), 0xe042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98be), 0xe0);
        EXPECT(gbc.readMem(0xe041), 0x22);
        // 22 0353
        gbc.setState(0x9a4b, 0xd9f7, 0x4a20, 0xf77f, 0xf2a3, 0xfb68, 0x0, 0x1);
        gbc.writeMem(0x9a4b, { 0x22 });
        gbc.writeMem(0xfb68, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd9f7);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a4b), 0x22);
        EXPECT(gbc.readMem(0xfb68), 0x4a);
        // 22 0354
        gbc.setState(0x1060, 0x80f0, 0x8720, 0x75b5, 0x6683, 0xe4b6, 0x0, 0x1);
        gbc.writeMem(0x1060, { 0x22 });
        gbc.writeMem(0xe4b6, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x80f0);
        EXPECT(gbc.pc(), 0x1061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b6), 0x87);
        // 22 0356
        gbc.setState(0x634f, 0x6389, 0xd390, 0xff38, 0xecb7, 0xe289, 0x0, 0x1);
        gbc.writeMem(0x634f, { 0x22 });
        gbc.writeMem(0xe289, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6389);
        EXPECT(gbc.pc(), 0x6350);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe289), 0xd3);
        // 22 0358
        gbc.setState(0x21df, 0x7c02, 0x40a0, 0xedfc, 0x6b40, 0x87e2, 0x1, 0x0);
        gbc.writeMem(0x21df, { 0x22 });
        gbc.writeMem(0x87e2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x7c02);
        EXPECT(gbc.pc(), 0x21e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e2), 0x40);
        // 22 0359
        gbc.setState(0xc51b, 0x7012, 0x4bb0, 0x95f1, 0xaf62, 0xcaec, 0x0, 0x0);
        gbc.writeMem(0xc51b, { 0x22 });
        gbc.writeMem(0xcaec, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7012);
        EXPECT(gbc.pc(), 0xc51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc51b), 0x22);
        EXPECT(gbc.readMem(0xcaec), 0x4b);
        // 22 035B
        gbc.setState(0x153b, 0x4a36, 0x4220, 0x26ee, 0xe57e, 0xd1cd, 0x1, 0x1);
        gbc.writeMem(0x153b, { 0x22 });
        gbc.writeMem(0xd1cd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x4a36);
        EXPECT(gbc.pc(), 0x153c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1cd), 0x42);
        // 22 035C
        gbc.setState(0x2944, 0x8689, 0x26e0, 0x3152, 0x9d1b, 0xeb72, 0x1, 0x0);
        gbc.writeMem(0x2944, { 0x22 });
        gbc.writeMem(0xeb72, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8689);
        EXPECT(gbc.pc(), 0x2945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb72), 0x26);
        // 22 0362
        gbc.setState(0x499b, 0xfc55, 0x9b20, 0xd7e5, 0xaf9d, 0x9636, 0x1, 0x0);
        gbc.writeMem(0x499b, { 0x22 });
        gbc.writeMem(0x9636, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfc55);
        EXPECT(gbc.pc(), 0x499c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9636), 0x9b);
        // 22 0363
        gbc.setState(0x9924, 0xb1a, 0x78f0, 0x40da, 0xf205, 0xe60d, 0x0, 0x1);
        gbc.writeMem(0x9924, { 0x22 });
        gbc.writeMem(0xe60d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb1a);
        EXPECT(gbc.pc(), 0x9925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9924), 0x22);
        EXPECT(gbc.readMem(0xe60d), 0x78);
        // 22 0366
        gbc.setState(0x92bb, 0xf24a, 0x4630, 0x5615, 0xfe8e, 0x87fc, 0x0, 0x0);
        gbc.writeMem(0x87fc, { 0x0 });
        gbc.writeMem(0x92bb, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf24a);
        EXPECT(gbc.pc(), 0x92bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fc), 0x46);
        EXPECT(gbc.readMem(0x92bb), 0x22);
        // 22 0367
        gbc.setState(0xc3ae, 0x5dc6, 0x29b0, 0xf70f, 0xc535, 0xa249, 0x1, 0x0);
        gbc.writeMem(0xa249, { 0x0 });
        gbc.writeMem(0xc3ae, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5dc6);
        EXPECT(gbc.pc(), 0xc3af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa249), 0x29);
        EXPECT(gbc.readMem(0xc3ae), 0x22);
        // 22 036A
        gbc.setState(0x4458, 0x414c, 0x390, 0xa261, 0xe172, 0x91ed, 0x0, 0x1);
        gbc.writeMem(0x4458, { 0x22 });
        gbc.writeMem(0x91ed, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x414c);
        EXPECT(gbc.pc(), 0x4459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91ed), 0x3);
        // 22 036E
        gbc.setState(0x40ba, 0x775e, 0xc4a0, 0x6f79, 0x3456, 0xf678, 0x1, 0x1);
        gbc.writeMem(0x40ba, { 0x22 });
        gbc.writeMem(0xf678, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x775e);
        EXPECT(gbc.pc(), 0x40bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf678), 0xc4);
        // 22 0371
        gbc.setState(0xa161, 0x3bad, 0x25b0, 0x87d7, 0x853a, 0xabfb, 0x0, 0x0);
        gbc.writeMem(0xa161, { 0x22 });
        gbc.writeMem(0xabfb, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3bad);
        EXPECT(gbc.pc(), 0xa162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa161), 0x22);
        EXPECT(gbc.readMem(0xabfb), 0x25);
        // 22 0373
        gbc.setState(0x58ca, 0xaac8, 0x1ce0, 0xccfe, 0xf875, 0xfb4c, 0x1, 0x1);
        gbc.writeMem(0x58ca, { 0x22 });
        gbc.writeMem(0xfb4c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xaac8);
        EXPECT(gbc.pc(), 0x58cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb4c), 0x1c);
        // 22 0374
        gbc.setState(0x4e, 0xcca9, 0x430, 0x1a76, 0xde0d, 0xe215, 0x1, 0x1);
        gbc.writeMem(0x4e, { 0x22 });
        gbc.writeMem(0xe215, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xcca9);
        EXPECT(gbc.pc(), 0x4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe215), 0x4);
        // 22 0375
        gbc.setState(0xee4c, 0x2cab, 0x53b0, 0x1833, 0x15a4, 0xa72d, 0x1, 0x0);
        gbc.writeMem(0xa72d, { 0x0 });
        gbc.writeMem(0xee4c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2cab);
        EXPECT(gbc.pc(), 0xee4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa72d), 0x53);
        EXPECT(gbc.readMem(0xee4c), 0x22);
        // 22 0376
        gbc.setState(0x1a35, 0x7a5, 0x63b0, 0x635a, 0xf4b1, 0x82e0, 0x0, 0x1);
        gbc.writeMem(0x1a35, { 0x22 });
        gbc.writeMem(0x82e0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7a5);
        EXPECT(gbc.pc(), 0x1a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82e0), 0x63);
        // 22 037E
        gbc.setState(0x7fa0, 0x2d78, 0xd570, 0xaed9, 0xaf8d, 0xdc74, 0x0, 0x1);
        gbc.writeMem(0x7fa0, { 0x22 });
        gbc.writeMem(0xdc74, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2d78);
        EXPECT(gbc.pc(), 0x7fa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc74), 0xd5);
        // 22 037F
        gbc.setState(0x88ab, 0xd7e7, 0xab50, 0xe4e7, 0x4adc, 0x92d3, 0x1, 0x0);
        gbc.writeMem(0x88ab, { 0x22 });
        gbc.writeMem(0x92d3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd7e7);
        EXPECT(gbc.pc(), 0x88ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ab), 0x22);
        EXPECT(gbc.readMem(0x92d3), 0xab);
        // 22 0383
        gbc.setState(0xa862, 0x486d, 0x8c50, 0x8e29, 0xfc71, 0xf1a9, 0x0, 0x1);
        gbc.writeMem(0xa862, { 0x22 });
        gbc.writeMem(0xf1a9, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x486d);
        EXPECT(gbc.pc(), 0xa863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa862), 0x22);
        EXPECT(gbc.readMem(0xf1a9), 0x8c);
        // 22 0384
        gbc.setState(0x763f, 0x6991, 0x92b0, 0x942f, 0xfde1, 0x8f89, 0x1, 0x0);
        gbc.writeMem(0x763f, { 0x22 });
        gbc.writeMem(0x8f89, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6991);
        EXPECT(gbc.pc(), 0x7640);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f89), 0x92);
        // 22 0385
        gbc.setState(0xeb11, 0x9abb, 0xeb80, 0x3f78, 0x3b04, 0xd1eb, 0x1, 0x1);
        gbc.writeMem(0xd1eb, { 0x0 });
        gbc.writeMem(0xeb11, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9abb);
        EXPECT(gbc.pc(), 0xeb12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1eb), 0xeb);
        EXPECT(gbc.readMem(0xeb11), 0x22);
        // 22 038C
        gbc.setState(0xed7, 0x6796, 0xed60, 0xf30e, 0xe931, 0xbfdd, 0x1, 0x0);
        gbc.writeMem(0xed7, { 0x22 });
        gbc.writeMem(0xbfdd, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6796);
        EXPECT(gbc.pc(), 0xed8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfdd), 0xed);
        // 22 038D
        gbc.setState(0x5f9b, 0x73d, 0xa4f0, 0x2992, 0x78f1, 0xe002, 0x0, 0x1);
        gbc.writeMem(0x5f9b, { 0x22 });
        gbc.writeMem(0xe002, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x73d);
        EXPECT(gbc.pc(), 0x5f9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe002), 0xa4);
        // 22 038E
        gbc.setState(0x2a1c, 0x2177, 0xa760, 0xb305, 0x99c8, 0xfa3a, 0x0, 0x0);
        gbc.writeMem(0x2a1c, { 0x22 });
        gbc.writeMem(0xfa3a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2177);
        EXPECT(gbc.pc(), 0x2a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa3a), 0xa7);
        // 22 038F
        gbc.setState(0xcf99, 0x5642, 0x6e70, 0x7c5f, 0xb5e7, 0xec28, 0x1, 0x1);
        gbc.writeMem(0xcf99, { 0x22 });
        gbc.writeMem(0xec28, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5642);
        EXPECT(gbc.pc(), 0xcf9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf99), 0x22);
        EXPECT(gbc.readMem(0xec28), 0x6e);
        // 22 0390
        gbc.setState(0xa35a, 0xaaca, 0x2080, 0x6240, 0xccc4, 0x86f5, 0x1, 0x0);
        gbc.writeMem(0x86f5, { 0x0 });
        gbc.writeMem(0xa35a, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xaaca);
        EXPECT(gbc.pc(), 0xa35b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f5), 0x20);
        EXPECT(gbc.readMem(0xa35a), 0x22);
        // 22 0392
        gbc.setState(0x94a8, 0x3015, 0xac00, 0x956b, 0x85c, 0xecf5, 0x0, 0x1);
        gbc.writeMem(0x94a8, { 0x22 });
        gbc.writeMem(0xecf5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3015);
        EXPECT(gbc.pc(), 0x94a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a8), 0x22);
        EXPECT(gbc.readMem(0xecf5), 0xac);
        // 22 0395
        gbc.setState(0x2cdf, 0x5667, 0xdf30, 0x6e5d, 0xe5e7, 0xe2b8, 0x0, 0x1);
        gbc.writeMem(0x2cdf, { 0x22 });
        gbc.writeMem(0xe2b8, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x5667);
        EXPECT(gbc.pc(), 0x2ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b8), 0xdf);
        // 22 0399
        gbc.setState(0x28ed, 0x4afe, 0x8e60, 0x1ce3, 0x84bd, 0xdaf3, 0x0, 0x1);
        gbc.writeMem(0x28ed, { 0x22 });
        gbc.writeMem(0xdaf3, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x4afe);
        EXPECT(gbc.pc(), 0x28ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaf3), 0x8e);
        // 22 039D
        gbc.setState(0x8f90, 0xd86f, 0xfb40, 0x46cc, 0x6a36, 0x919b, 0x1, 0x1);
        gbc.writeMem(0x8f90, { 0x22 });
        gbc.writeMem(0x919b, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd86f);
        EXPECT(gbc.pc(), 0x8f91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f90), 0x22);
        EXPECT(gbc.readMem(0x919b), 0xfb);
        // 22 039E
        gbc.setState(0xd6bd, 0x5828, 0x70c0, 0xa08, 0x7596, 0xf651, 0x1, 0x1);
        gbc.writeMem(0xd6bd, { 0x22 });
        gbc.writeMem(0xf651, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5828);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6bd), 0x22);
        EXPECT(gbc.readMem(0xf651), 0x70);
        // 22 03A0
        gbc.setState(0x8abf, 0x944f, 0x5bd0, 0xf781, 0x89cf, 0xa657, 0x0, 0x0);
        gbc.writeMem(0x8abf, { 0x22 });
        gbc.writeMem(0xa657, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x944f);
        EXPECT(gbc.pc(), 0x8ac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8abf), 0x22);
        EXPECT(gbc.readMem(0xa657), 0x5b);
        // 22 03A1
        gbc.setState(0xd77d, 0xa379, 0xdf70, 0xa585, 0x449c, 0xd044, 0x1, 0x0);
        gbc.writeMem(0xd044, { 0x0 });
        gbc.writeMem(0xd77d, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0xd77e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd044), 0xdf);
        EXPECT(gbc.readMem(0xd77d), 0x22);
        // 22 03A3
        gbc.setState(0x43ff, 0xa570, 0xa790, 0xd1a0, 0x6cbd, 0x93f0, 0x0, 0x0);
        gbc.writeMem(0x43ff, { 0x22 });
        gbc.writeMem(0x93f0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xa570);
        EXPECT(gbc.pc(), 0x4400);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f0), 0xa7);
        // 22 03A5
        gbc.setState(0x1d27, 0x2306, 0xd10, 0xb35, 0xa83c, 0xa713, 0x1, 0x1);
        gbc.writeMem(0x1d27, { 0x22 });
        gbc.writeMem(0xa713, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2306);
        EXPECT(gbc.pc(), 0x1d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa713), 0xd);
        // 22 03A8
        gbc.setState(0x30dd, 0x12f2, 0xe8f0, 0x40aa, 0x6570, 0xffda, 0x1, 0x1);
        gbc.writeMem(0x30dd, { 0x22 });
        gbc.writeMem(0xffda, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x12f2);
        EXPECT(gbc.pc(), 0x30de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xffda), 0xe8);
        // 22 03AA
        gbc.setState(0x772d, 0x65ea, 0xa6b0, 0x80b0, 0x1702, 0xf03a, 0x1, 0x0);
        gbc.writeMem(0x772d, { 0x22 });
        gbc.writeMem(0xf03a, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x65ea);
        EXPECT(gbc.pc(), 0x772e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf03a), 0xa6);
        // 22 03AC
        gbc.setState(0x1619, 0xeb36, 0x15c0, 0xfc91, 0x71b4, 0x8b75, 0x1, 0x1);
        gbc.writeMem(0x1619, { 0x22 });
        gbc.writeMem(0x8b75, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xeb36);
        EXPECT(gbc.pc(), 0x161a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b75), 0x15);
        // 22 03AD
        gbc.setState(0x86b2, 0x1ae6, 0x5e00, 0xd697, 0x9c70, 0xa1a0, 0x1, 0x1);
        gbc.writeMem(0x86b2, { 0x22 });
        gbc.writeMem(0xa1a0, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1ae6);
        EXPECT(gbc.pc(), 0x86b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b2), 0x22);
        EXPECT(gbc.readMem(0xa1a0), 0x5e);
        // 22 03AE
        gbc.setState(0x52d3, 0x82f0, 0x1ab0, 0x8e3f, 0x5d58, 0x9293, 0x0, 0x0);
        gbc.writeMem(0x52d3, { 0x22 });
        gbc.writeMem(0x9293, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x82f0);
        EXPECT(gbc.pc(), 0x52d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9293), 0x1a);
        // 22 03B0
        gbc.setState(0x7d63, 0x23b4, 0x320, 0x39fb, 0x40c, 0xb377, 0x1, 0x1);
        gbc.writeMem(0x7d63, { 0x22 });
        gbc.writeMem(0xb377, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x23b4);
        EXPECT(gbc.pc(), 0x7d64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb377), 0x3);
        // 22 03B1
        gbc.setState(0xd3a9, 0xb47b, 0xf1e0, 0x387c, 0xd698, 0x8973, 0x0, 0x0);
        gbc.writeMem(0x8973, { 0x0 });
        gbc.writeMem(0xd3a9, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xb47b);
        EXPECT(gbc.pc(), 0xd3aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8973), 0xf1);
        EXPECT(gbc.readMem(0xd3a9), 0x22);
        // 22 03B2
        gbc.setState(0x56a3, 0xf56d, 0x11d0, 0x73ed, 0xb6d9, 0x8fd7, 0x1, 0x1);
        gbc.writeMem(0x56a3, { 0x22 });
        gbc.writeMem(0x8fd7, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf56d);
        EXPECT(gbc.pc(), 0x56a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd7), 0x11);
        // 22 03B5
        gbc.setState(0x4701, 0xdd12, 0xedc0, 0xe7f2, 0x2409, 0x8871, 0x1, 0x1);
        gbc.writeMem(0x4701, { 0x22 });
        gbc.writeMem(0x8871, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xdd12);
        EXPECT(gbc.pc(), 0x4702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8871), 0xed);
        // 22 03B7
        gbc.setState(0x9a4b, 0x2a06, 0xf390, 0x16dd, 0x8778, 0xf41e, 0x1, 0x1);
        gbc.writeMem(0x9a4b, { 0x22 });
        gbc.writeMem(0xf41e, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2a06);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4b), 0x22);
        EXPECT(gbc.readMem(0xf41e), 0xf3);
        // 22 03B8
        gbc.setState(0x1b42, 0x3a36, 0xeda0, 0xb35f, 0x1e33, 0x96a4, 0x0, 0x1);
        gbc.writeMem(0x1b42, { 0x22 });
        gbc.writeMem(0x96a4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3a36);
        EXPECT(gbc.pc(), 0x1b43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a4), 0xed);
        // 22 03BB
        gbc.setState(0xb7f, 0x33f1, 0x37e0, 0x955a, 0xb568, 0xee00, 0x1, 0x1);
        gbc.writeMem(0xb7f, { 0x22 });
        gbc.writeMem(0xee00, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x33f1);
        EXPECT(gbc.pc(), 0xb80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee00), 0x37);
        // 22 03BC
        gbc.setState(0xda54, 0xa9d4, 0x3e10, 0xa4a5, 0xddfb, 0x9563, 0x1, 0x1);
        gbc.writeMem(0x9563, { 0x0 });
        gbc.writeMem(0xda54, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa9d4);
        EXPECT(gbc.pc(), 0xda55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9563), 0x3e);
        EXPECT(gbc.readMem(0xda54), 0x22);
        // 22 03BD
        gbc.setState(0x58df, 0x6ab3, 0xff20, 0xf64f, 0xa948, 0xbecc, 0x0, 0x0);
        gbc.writeMem(0x58df, { 0x22 });
        gbc.writeMem(0xbecc, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6ab3);
        EXPECT(gbc.pc(), 0x58e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecc), 0xff);
        // 22 03BE
        gbc.setState(0x4f04, 0x748c, 0x55d0, 0xd975, 0x7ee7, 0xc39d, 0x1, 0x1);
        gbc.writeMem(0x4f04, { 0x22 });
        gbc.writeMem(0xc39d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x748c);
        EXPECT(gbc.pc(), 0x4f05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc39d), 0x55);
        // 22 03BF
        gbc.setState(0x4e18, 0xdcf8, 0x78b0, 0x70a4, 0x7fcc, 0x8c5d, 0x1, 0x1);
        gbc.writeMem(0x4e18, { 0x22 });
        gbc.writeMem(0x8c5d, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xdcf8);
        EXPECT(gbc.pc(), 0x4e19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5d), 0x78);
        // 22 03C0
        gbc.setState(0x6a49, 0xd7a, 0x2f90, 0xc90f, 0x2635, 0xa957, 0x0, 0x1);
        gbc.writeMem(0x6a49, { 0x22 });
        gbc.writeMem(0xa957, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd7a);
        EXPECT(gbc.pc(), 0x6a4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa957), 0x2f);
        // 22 03C2
        gbc.setState(0x2027, 0x5ee9, 0x7b40, 0x12ed, 0x94e6, 0xb798, 0x1, 0x1);
        gbc.writeMem(0x2027, { 0x22 });
        gbc.writeMem(0xb798, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5ee9);
        EXPECT(gbc.pc(), 0x2028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb798), 0x7b);
        // 22 03C3
        gbc.setState(0xd150, 0x7f13, 0xadd0, 0x79c0, 0x2e74, 0xcf5f, 0x0, 0x1);
        gbc.writeMem(0xcf5f, { 0x0 });
        gbc.writeMem(0xd150, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7f13);
        EXPECT(gbc.pc(), 0xd151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5f), 0xad);
        EXPECT(gbc.readMem(0xd150), 0x22);
        // 22 03C4
        gbc.setState(0x66b6, 0xbe62, 0x5110, 0x5746, 0x8bf2, 0xdeb4, 0x0, 0x0);
        gbc.writeMem(0x66b6, { 0x22 });
        gbc.writeMem(0xdeb4, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xbe62);
        EXPECT(gbc.pc(), 0x66b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb4), 0x51);
        // 22 03C5
        gbc.setState(0x481d, 0x2716, 0xe9e0, 0xdeec, 0x1abd, 0x89e5, 0x0, 0x0);
        gbc.writeMem(0x481d, { 0x22 });
        gbc.writeMem(0x89e5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2716);
        EXPECT(gbc.pc(), 0x481e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e5), 0xe9);
        // 22 03CC
        gbc.setState(0x7918, 0x248b, 0x2140, 0x7633, 0x8cfa, 0xbcf2, 0x1, 0x1);
        gbc.writeMem(0x7918, { 0x22 });
        gbc.writeMem(0xbcf2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x248b);
        EXPECT(gbc.pc(), 0x7919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf2), 0x21);
        // 22 03D1
        gbc.setState(0xdc5b, 0xbd20, 0x86b0, 0xf313, 0x6712, 0xcc6c, 0x0, 0x0);
        gbc.writeMem(0xcc6c, { 0x0 });
        gbc.writeMem(0xdc5b, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbd20);
        EXPECT(gbc.pc(), 0xdc5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc6c), 0x86);
        EXPECT(gbc.readMem(0xdc5b), 0x22);
        // 22 03D5
        gbc.setState(0x72a0, 0xe699, 0xd130, 0x7b7e, 0xadf3, 0xe61f, 0x0, 0x1);
        gbc.writeMem(0x72a0, { 0x22 });
        gbc.writeMem(0xe61f, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe699);
        EXPECT(gbc.pc(), 0x72a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe61f), 0xd1);
        // 22 03DA
        gbc.setState(0x7548, 0x2004, 0x6ac0, 0x8895, 0x4e88, 0xd8f1, 0x0, 0x1);
        gbc.writeMem(0x7548, { 0x22 });
        gbc.writeMem(0xd8f1, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2004);
        EXPECT(gbc.pc(), 0x7549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f1), 0x6a);
        // 22 03DE
        gbc.setState(0x8023, 0x8fe3, 0x9d40, 0xb789, 0xe377, 0xafa2, 0x0, 0x0);
        gbc.writeMem(0x8023, { 0x22 });
        gbc.writeMem(0xafa2, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8fe3);
        EXPECT(gbc.pc(), 0x8024);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8023), 0x22);
        EXPECT(gbc.readMem(0xafa2), 0x9d);
        // 22 03E0
        gbc.setState(0x2b61, 0x5ce8, 0xe920, 0x73da, 0x1015, 0x95da, 0x0, 0x1);
        gbc.writeMem(0x2b61, { 0x22 });
        gbc.writeMem(0x95da, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5ce8);
        EXPECT(gbc.pc(), 0x2b62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95da), 0xe9);
        // 22 03E1
        gbc.setState(0x8549, 0x79db, 0xa520, 0xc63e, 0x6fcf, 0xf518, 0x0, 0x1);
        gbc.writeMem(0x8549, { 0x22 });
        gbc.writeMem(0xf518, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x79db);
        EXPECT(gbc.pc(), 0x854a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8549), 0x22);
        EXPECT(gbc.readMem(0xf518), 0xa5);
        // 22 03E2
        gbc.setState(0x3e9a, 0xa01a, 0x2b00, 0x8fd4, 0xa954, 0xcf4c, 0x1, 0x1);
        gbc.writeMem(0x3e9a, { 0x22 });
        gbc.writeMem(0xcf4c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa01a);
        EXPECT(gbc.pc(), 0x3e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf4c), 0x2b);
        // 22 03E3
        gbc.setState(0x26bc, 0x10bf, 0x9ec0, 0xef4e, 0xb221, 0x9ca5, 0x0, 0x0);
        gbc.writeMem(0x26bc, { 0x22 });
        gbc.writeMem(0x9ca5, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x10bf);
        EXPECT(gbc.pc(), 0x26bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca5), 0x9e);
    }
