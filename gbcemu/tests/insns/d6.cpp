#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_d6)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_d6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // D6 0000
        gbc.setState(0x938b, 0x247b, 0xbec0, 0x91f9, 0x5e28, 0xa119, 0x1, 0x1);
        gbc.writeMem(0x938b, { 0xd6, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x247b);
        EXPECT(gbc.pc(), 0x938d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x938b), 0xd6);
        EXPECT(gbc.readMem(0x938c), 0xbf);
        // D6 0001
        gbc.setState(0x7b98, 0xaa5c, 0x82c0, 0x85b4, 0xfe21, 0x7836, 0x0, 0x0);
        gbc.writeMem(0x7b98, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaa5c);
        EXPECT(gbc.pc(), 0x7b9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0002
        gbc.setState(0xa8a6, 0x7e16, 0x5f70, 0x12b8, 0x99c8, 0xa54b, 0x1, 0x1);
        gbc.writeMem(0xa8a6, { 0xd6, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x7e16);
        EXPECT(gbc.pc(), 0xa8a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a6), 0xd6);
        EXPECT(gbc.readMem(0xa8a7), 0x44);
        // D6 0003
        gbc.setState(0xeeeb, 0xe0a3, 0xb7f0, 0x8a14, 0x86a3, 0x2d18, 0x1, 0x0);
        gbc.writeMem(0xeeeb, { 0xd6, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe0a3);
        EXPECT(gbc.pc(), 0xeeed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeeb), 0xd6);
        EXPECT(gbc.readMem(0xeeec), 0xcf);
        // D6 0004
        gbc.setState(0x482a, 0x94b8, 0xc0a0, 0xc26a, 0x4213, 0x455, 0x0, 0x0);
        gbc.writeMem(0x482a, { 0xd6, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x94b8);
        EXPECT(gbc.pc(), 0x482c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0005
        gbc.setState(0xd720, 0xf2af, 0x1d20, 0xad04, 0xbcf5, 0x5389, 0x0, 0x1);
        gbc.writeMem(0xd720, { 0xd6, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf2af);
        EXPECT(gbc.pc(), 0xd722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd720), 0xd6);
        EXPECT(gbc.readMem(0xd721), 0x83);
        // D6 0006
        gbc.setState(0x502d, 0x7684, 0x4b30, 0x4ff8, 0x6020, 0x3448, 0x0, 0x0);
        gbc.writeMem(0x502d, { 0xd6, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7684);
        EXPECT(gbc.pc(), 0x502f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0007
        gbc.setState(0xcb3d, 0x19d0, 0xca20, 0x16e9, 0x9f37, 0xa233, 0x0, 0x0);
        gbc.writeMem(0xcb3d, { 0xd6, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x19d0);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb3d), 0xd6);
        EXPECT(gbc.readMem(0xcb3e), 0x51);
        // D6 0008
        gbc.setState(0x5001, 0x839c, 0xaa70, 0x1db, 0xe448, 0xfb11, 0x1, 0x0);
        gbc.writeMem(0x5001, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x839c);
        EXPECT(gbc.pc(), 0x5003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0009
        gbc.setState(0x54a3, 0x6a67, 0xe080, 0xe024, 0x99eb, 0xaa3e, 0x1, 0x0);
        gbc.writeMem(0x54a3, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6a67);
        EXPECT(gbc.pc(), 0x54a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 000A
        gbc.setState(0xb9, 0x6577, 0x76d0, 0x71c0, 0x5549, 0x6e07, 0x0, 0x0);
        gbc.writeMem(0xb9, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6577);
        EXPECT(gbc.pc(), 0xbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 000B
        gbc.setState(0x8f71, 0xc17f, 0x7af0, 0x6369, 0x835f, 0x8f71, 0x0, 0x0);
        gbc.writeMem(0x8f71, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc17f);
        EXPECT(gbc.pc(), 0x8f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f71), 0xd6);
        EXPECT(gbc.readMem(0x8f72), 0x47);
        // D6 000C
        gbc.setState(0xeb71, 0x7a7a, 0xf690, 0x64a3, 0x94db, 0x509d, 0x1, 0x0);
        gbc.writeMem(0xeb71, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7a7a);
        EXPECT(gbc.pc(), 0xeb73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb71), 0xd6);
        EXPECT(gbc.readMem(0xeb72), 0x52);
        // D6 000D
        gbc.setState(0xe51e, 0x3f73, 0x25a0, 0xe01b, 0x5aa5, 0x560, 0x0, 0x1);
        gbc.writeMem(0xe51e, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x3f73);
        EXPECT(gbc.pc(), 0xe520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe51e), 0xd6);
        EXPECT(gbc.readMem(0xe51f), 0x4a);
        // D6 000E
        gbc.setState(0xcae2, 0x7964, 0x20d0, 0x669d, 0x8eaa, 0xc51, 0x0, 0x1);
        gbc.writeMem(0xcae2, { 0xd6, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7964);
        EXPECT(gbc.pc(), 0xcae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcae2), 0xd6);
        EXPECT(gbc.readMem(0xcae3), 0x57);
        // D6 000F
        gbc.setState(0x4ed2, 0x7221, 0xd610, 0x7a58, 0xd5c, 0xa0e, 0x1, 0x0);
        gbc.writeMem(0x4ed2, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7221);
        EXPECT(gbc.pc(), 0x4ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0010
        gbc.setState(0x4b98, 0xed4d, 0x1970, 0xd370, 0x4d86, 0x204b, 0x0, 0x1);
        gbc.writeMem(0x4b98, { 0xd6, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xed4d);
        EXPECT(gbc.pc(), 0x4b9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0011
        gbc.setState(0xd860, 0x9f3b, 0xd2d0, 0xe7e1, 0xb9c9, 0x5e53, 0x1, 0x0);
        gbc.writeMem(0xd860, { 0xd6, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9f3b);
        EXPECT(gbc.pc(), 0xd862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd860), 0xd6);
        EXPECT(gbc.readMem(0xd861), 0x6b);
        // D6 0012
        gbc.setState(0x7906, 0x9e23, 0x1b00, 0x53c5, 0x6347, 0x32f0, 0x0, 0x0);
        gbc.writeMem(0x7906, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9e23);
        EXPECT(gbc.pc(), 0x7908);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0013
        gbc.setState(0x3ba0, 0x5109, 0x71c0, 0x673c, 0x46bd, 0x741e, 0x1, 0x0);
        gbc.writeMem(0x3ba0, { 0xd6, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5109);
        EXPECT(gbc.pc(), 0x3ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0014
        gbc.setState(0xc272, 0x7033, 0x4d20, 0x3c85, 0xd8ac, 0x3ed2, 0x1, 0x1);
        gbc.writeMem(0xc272, { 0xd6, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x7033);
        EXPECT(gbc.pc(), 0xc274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc272), 0xd6);
        EXPECT(gbc.readMem(0xc273), 0x38);
        // D6 0015
        gbc.setState(0x672e, 0xdb0f, 0x1990, 0x41ca, 0x43fe, 0x42a0, 0x0, 0x1);
        gbc.writeMem(0x672e, { 0xd6, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdb0f);
        EXPECT(gbc.pc(), 0x6730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0016
        gbc.setState(0x443f, 0xffc9, 0x18a0, 0x1df4, 0xf9d3, 0x4226, 0x1, 0x0);
        gbc.writeMem(0x443f, { 0xd6, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xffc9);
        EXPECT(gbc.pc(), 0x4441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0017
        gbc.setState(0xdcc0, 0x18db, 0x2b40, 0x4dba, 0x24ba, 0x2dca, 0x1, 0x0);
        gbc.writeMem(0xdcc0, { 0xd6, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x18db);
        EXPECT(gbc.pc(), 0xdcc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcc0), 0xd6);
        EXPECT(gbc.readMem(0xdcc1), 0x18);
        // D6 0018
        gbc.setState(0xb5ca, 0xa805, 0x56a0, 0xe721, 0x4210, 0xcf5b, 0x1, 0x0);
        gbc.writeMem(0xb5ca, { 0xd6, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa805);
        EXPECT(gbc.pc(), 0xb5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ca), 0xd6);
        EXPECT(gbc.readMem(0xb5cb), 0x17);
        // D6 0019
        gbc.setState(0x5a12, 0xf8fd, 0x7b90, 0x4030, 0x16ad, 0x1505, 0x0, 0x0);
        gbc.writeMem(0x5a12, { 0xd6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf8fd);
        EXPECT(gbc.pc(), 0x5a14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 001A
        gbc.setState(0x46f1, 0x346e, 0x6470, 0x876b, 0x8be2, 0xbba9, 0x1, 0x1);
        gbc.writeMem(0x46f1, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x346e);
        EXPECT(gbc.pc(), 0x46f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 001B
        gbc.setState(0xd881, 0x727e, 0xc940, 0x2d6f, 0xce8a, 0x1c88, 0x0, 0x0);
        gbc.writeMem(0xd881, { 0xd6, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x727e);
        EXPECT(gbc.pc(), 0xd883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd881), 0xd6);
        EXPECT(gbc.readMem(0xd882), 0xd2);
        // D6 001C
        gbc.setState(0xe194, 0x771a, 0x95b0, 0x9751, 0x5c66, 0x8ba4, 0x0, 0x0);
        gbc.writeMem(0xe194, { 0xd6, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x771a);
        EXPECT(gbc.pc(), 0xe196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe194), 0xd6);
        EXPECT(gbc.readMem(0xe195), 0xa6);
        // D6 001D
        gbc.setState(0x4da7, 0x7f7f, 0xc0b0, 0x1ee9, 0x8b9e, 0x13e4, 0x1, 0x0);
        gbc.writeMem(0x4da7, { 0xd6, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7f7f);
        EXPECT(gbc.pc(), 0x4da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 001E
        gbc.setState(0xe690, 0x94da, 0x7330, 0x903c, 0xd40d, 0x4f2b, 0x0, 0x1);
        gbc.writeMem(0xe690, { 0xd6, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x94da);
        EXPECT(gbc.pc(), 0xe692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe690), 0xd6);
        EXPECT(gbc.readMem(0xe691), 0x6a);
        // D6 001F
        gbc.setState(0x7859, 0x72da, 0x3a40, 0x5559, 0xd5a8, 0x717a, 0x1, 0x1);
        gbc.writeMem(0x7859, { 0xd6, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x72da);
        EXPECT(gbc.pc(), 0x785b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0020
        gbc.setState(0xbe36, 0xc869, 0x4e70, 0x75c4, 0x84d1, 0xb652, 0x1, 0x1);
        gbc.writeMem(0xbe36, { 0xd6, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc869);
        EXPECT(gbc.pc(), 0xbe38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe36), 0xd6);
        EXPECT(gbc.readMem(0xbe37), 0x22);
        // D6 0021
        gbc.setState(0xbc9f, 0x7e8f, 0xdf50, 0x202, 0x84ee, 0xbeb9, 0x1, 0x1);
        gbc.writeMem(0xbc9f, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7e8f);
        EXPECT(gbc.pc(), 0xbca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9f), 0xd6);
        EXPECT(gbc.readMem(0xbca0), 0x4c);
        // D6 0022
        gbc.setState(0xbf3b, 0xe4d3, 0x78d0, 0x34ba, 0x4bef, 0x5cc6, 0x0, 0x1);
        gbc.writeMem(0xbf3b, { 0xd6, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe4d3);
        EXPECT(gbc.pc(), 0xbf3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3b), 0xd6);
        EXPECT(gbc.readMem(0xbf3c), 0x5b);
        // D6 0023
        gbc.setState(0x9a3e, 0x680d, 0xf170, 0x7fd2, 0x4e6d, 0x190, 0x1, 0x1);
        gbc.writeMem(0x9a3e, { 0xd6, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x680d);
        EXPECT(gbc.pc(), 0x9a40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3e), 0xd6);
        EXPECT(gbc.readMem(0x9a3f), 0x81);
        // D6 0024
        gbc.setState(0x3bb5, 0xe5be, 0xe880, 0x3d6f, 0x60f9, 0x3d04, 0x1, 0x0);
        gbc.writeMem(0x3bb5, { 0xd6, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe5be);
        EXPECT(gbc.pc(), 0x3bb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0025
        gbc.setState(0xd19c, 0x774b, 0xe7e0, 0x2645, 0xea68, 0x729f, 0x0, 0x0);
        gbc.writeMem(0xd19c, { 0xd6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x774b);
        EXPECT(gbc.pc(), 0xd19e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19c), 0xd6);
        EXPECT(gbc.readMem(0xd19d), 0xb8);
        // D6 0026
        gbc.setState(0x73ee, 0xb099, 0xe140, 0xbc60, 0x1d0b, 0x53a, 0x1, 0x0);
        gbc.writeMem(0x73ee, { 0xd6, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb099);
        EXPECT(gbc.pc(), 0x73f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0027
        gbc.setState(0x25d4, 0x7b0e, 0xe770, 0x13f9, 0x4042, 0x1ec3, 0x0, 0x1);
        gbc.writeMem(0x25d4, { 0xd6, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7b0e);
        EXPECT(gbc.pc(), 0x25d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0028
        gbc.setState(0xc52f, 0x92a6, 0xc6d0, 0x4c73, 0xf748, 0x19c1, 0x1, 0x1);
        gbc.writeMem(0xc52f, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x92a6);
        EXPECT(gbc.pc(), 0xc531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc52f), 0xd6);
        EXPECT(gbc.readMem(0xc530), 0x16);
        // D6 0029
        gbc.setState(0xa3d7, 0x17a9, 0x9f10, 0x5712, 0xb5b8, 0xf7d, 0x0, 0x1);
        gbc.writeMem(0xa3d7, { 0xd6, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x17a9);
        EXPECT(gbc.pc(), 0xa3d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3d7), 0xd6);
        EXPECT(gbc.readMem(0xa3d8), 0x18);
        // D6 002A
        gbc.setState(0xd5df, 0x6498, 0xb480, 0xfeec, 0x1042, 0x635c, 0x1, 0x1);
        gbc.writeMem(0xd5df, { 0xd6, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6498);
        EXPECT(gbc.pc(), 0xd5e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5df), 0xd6);
        EXPECT(gbc.readMem(0xd5e0), 0x63);
        // D6 002B
        gbc.setState(0x6e80, 0x83a5, 0x1820, 0xb06e, 0xb420, 0xe87c, 0x0, 0x0);
        gbc.writeMem(0x6e80, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x83a5);
        EXPECT(gbc.pc(), 0x6e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 002C
        gbc.setState(0x6403, 0x1aab, 0xb1d0, 0x5fef, 0xab9f, 0xf750, 0x1, 0x1);
        gbc.writeMem(0x6403, { 0xd6, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x1aab);
        EXPECT(gbc.pc(), 0x6405);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 002D
        gbc.setState(0xc790, 0x7890, 0xc010, 0xa95, 0xba1a, 0xad0e, 0x0, 0x1);
        gbc.writeMem(0xc790, { 0xd6, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x7890);
        EXPECT(gbc.pc(), 0xc792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc790), 0xd6);
        EXPECT(gbc.readMem(0xc791), 0x5d);
        // D6 002E
        gbc.setState(0xc065, 0x3624, 0xf2d0, 0x619, 0xfdd9, 0xc20f, 0x0, 0x1);
        gbc.writeMem(0xc065, { 0xd6, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3624);
        EXPECT(gbc.pc(), 0xc067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc065), 0xd6);
        EXPECT(gbc.readMem(0xc066), 0x5b);
        // D6 002F
        gbc.setState(0x6a3e, 0x6b98, 0xf00, 0xde17, 0x23e8, 0xde9, 0x0, 0x0);
        gbc.writeMem(0x6a3e, { 0xd6, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6b98);
        EXPECT(gbc.pc(), 0x6a40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0030
        gbc.setState(0x70f1, 0xb678, 0x2280, 0xecb4, 0x2a1e, 0x4581, 0x0, 0x1);
        gbc.writeMem(0x70f1, { 0xd6, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb678);
        EXPECT(gbc.pc(), 0x70f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0031
        gbc.setState(0x6496, 0x7b45, 0xcce0, 0x20f0, 0xe51e, 0x6265, 0x1, 0x1);
        gbc.writeMem(0x6496, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7b45);
        EXPECT(gbc.pc(), 0x6498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0032
        gbc.setState(0x6632, 0x2b68, 0x94a0, 0x7b55, 0xa823, 0xb133, 0x0, 0x1);
        gbc.writeMem(0x6632, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2b68);
        EXPECT(gbc.pc(), 0x6634);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0034
        gbc.setState(0x5d8b, 0xd31d, 0xa20, 0x54af, 0xa09b, 0x169c, 0x0, 0x0);
        gbc.writeMem(0x5d8b, { 0xd6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd31d);
        EXPECT(gbc.pc(), 0x5d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0035
        gbc.setState(0x61c5, 0xd85c, 0x2030, 0x8ef3, 0xa309, 0xe036, 0x1, 0x0);
        gbc.writeMem(0x61c5, { 0xd6, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd85c);
        EXPECT(gbc.pc(), 0x61c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0036
        gbc.setState(0xd527, 0x671b, 0x9050, 0x501c, 0xb20c, 0x8d05, 0x1, 0x0);
        gbc.writeMem(0xd527, { 0xd6, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x671b);
        EXPECT(gbc.pc(), 0xd529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd527), 0xd6);
        EXPECT(gbc.readMem(0xd528), 0xb4);
        // D6 0037
        gbc.setState(0x5649, 0xcb8d, 0x92d0, 0x9aa, 0xf371, 0x96c5, 0x1, 0x0);
        gbc.writeMem(0x5649, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcb8d);
        EXPECT(gbc.pc(), 0x564b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0039
        gbc.setState(0x96cb, 0xf6b1, 0x2840, 0x2045, 0x803e, 0x6e5d, 0x0, 0x0);
        gbc.writeMem(0x96cb, { 0xd6, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0x96cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96cb), 0xd6);
        EXPECT(gbc.readMem(0x96cc), 0xf9);
        // D6 003A
        gbc.setState(0xad53, 0x578c, 0xe190, 0xdaf6, 0x3d84, 0xda58, 0x0, 0x1);
        gbc.writeMem(0xad53, { 0xd6, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x578c);
        EXPECT(gbc.pc(), 0xad55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad53), 0xd6);
        EXPECT(gbc.readMem(0xad54), 0x8);
        // D6 003B
        gbc.setState(0xe093, 0xd791, 0xc20, 0x277, 0x61a, 0x9994, 0x0, 0x1);
        gbc.writeMem(0xe093, { 0xd6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd791);
        EXPECT(gbc.pc(), 0xe095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe093), 0xd6);
        EXPECT(gbc.readMem(0xe094), 0xd3);
        // D6 003C
        gbc.setState(0xe9e4, 0xfb45, 0x27d0, 0x3a11, 0x19f9, 0x4dac, 0x0, 0x0);
        gbc.writeMem(0xe9e4, { 0xd6, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfb45);
        EXPECT(gbc.pc(), 0xe9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e4), 0xd6);
        EXPECT(gbc.readMem(0xe9e5), 0x73);
        // D6 003D
        gbc.setState(0x85ca, 0xda92, 0x6330, 0xa5a, 0x319b, 0x42d6, 0x0, 0x0);
        gbc.writeMem(0x85ca, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xda92);
        EXPECT(gbc.pc(), 0x85cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ca), 0xd6);
        EXPECT(gbc.readMem(0x85cb), 0xfb);
        // D6 003E
        gbc.setState(0xe91f, 0x1ee8, 0xa80, 0x9ad6, 0x5a2b, 0x6280, 0x1, 0x1);
        gbc.writeMem(0xe91f, { 0xd6, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1ee8);
        EXPECT(gbc.pc(), 0xe921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91f), 0xd6);
        EXPECT(gbc.readMem(0xe920), 0x51);
        // D6 003F
        gbc.setState(0x981c, 0xe257, 0xe7f0, 0x6cfb, 0xe172, 0x7ef7, 0x0, 0x1);
        gbc.writeMem(0x981c, { 0xd6, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe257);
        EXPECT(gbc.pc(), 0x981e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x981c), 0xd6);
        EXPECT(gbc.readMem(0x981d), 0xc3);
        // D6 0040
        gbc.setState(0x6b16, 0x409b, 0x2230, 0xdf6c, 0xad00, 0x100f, 0x1, 0x1);
        gbc.writeMem(0x6b16, { 0xd6, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x409b);
        EXPECT(gbc.pc(), 0x6b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0041
        gbc.setState(0xb6ba, 0x2ee7, 0x91b0, 0x268e, 0x8a5e, 0x9762, 0x1, 0x1);
        gbc.writeMem(0xb6ba, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2ee7);
        EXPECT(gbc.pc(), 0xb6bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ba), 0xd6);
        EXPECT(gbc.readMem(0xb6bb), 0xa4);
        // D6 0042
        gbc.setState(0x2180, 0x954c, 0xd910, 0x4fc8, 0x7773, 0x15ea, 0x1, 0x1);
        gbc.writeMem(0x2180, { 0xd6, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x954c);
        EXPECT(gbc.pc(), 0x2182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0043
        gbc.setState(0x4902, 0x9a1, 0x2490, 0x6b51, 0x74ba, 0xd1f2, 0x0, 0x1);
        gbc.writeMem(0x4902, { 0xd6, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9a1);
        EXPECT(gbc.pc(), 0x4904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0044
        gbc.setState(0x9ab0, 0x6421, 0x8ba0, 0xdd42, 0xcd5e, 0xe11, 0x0, 0x0);
        gbc.writeMem(0x9ab0, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6421);
        EXPECT(gbc.pc(), 0x9ab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ab0), 0xd6);
        EXPECT(gbc.readMem(0x9ab1), 0xd0);
        // D6 0045
        gbc.setState(0xddf1, 0x6f14, 0xdc90, 0x42e0, 0x82d9, 0x63aa, 0x1, 0x1);
        gbc.writeMem(0xddf1, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6f14);
        EXPECT(gbc.pc(), 0xddf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddf1), 0xd6);
        EXPECT(gbc.readMem(0xddf2), 0x69);
        // D6 0046
        gbc.setState(0x3eb8, 0x9b33, 0xbbe0, 0x7aee, 0x8b28, 0x3d2d, 0x0, 0x0);
        gbc.writeMem(0x3eb8, { 0xd6, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9b33);
        EXPECT(gbc.pc(), 0x3eba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0047
        gbc.setState(0x26c8, 0x9398, 0x7810, 0x14d, 0x3403, 0xf9fa, 0x0, 0x0);
        gbc.writeMem(0x26c8, { 0xd6, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9398);
        EXPECT(gbc.pc(), 0x26ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0048
        gbc.setState(0x3494, 0xdbec, 0xb6d0, 0x1a3e, 0x11bf, 0x7dcd, 0x0, 0x1);
        gbc.writeMem(0x3494, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xdbec);
        EXPECT(gbc.pc(), 0x3496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 004A
        gbc.setState(0x5677, 0xe7fd, 0x8210, 0xb904, 0x40fa, 0xb443, 0x0, 0x1);
        gbc.writeMem(0x5677, { 0xd6, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xe7fd);
        EXPECT(gbc.pc(), 0x5679);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 004B
        gbc.setState(0x7778, 0x6991, 0x7170, 0x5803, 0xaf67, 0x7e26, 0x0, 0x1);
        gbc.writeMem(0x7778, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x6991);
        EXPECT(gbc.pc(), 0x777a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 004C
        gbc.setState(0xc40f, 0x8528, 0x2cf0, 0xe83f, 0xbb31, 0xd190, 0x0, 0x1);
        gbc.writeMem(0xc40f, { 0xd6, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x8528);
        EXPECT(gbc.pc(), 0xc411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40f), 0xd6);
        EXPECT(gbc.readMem(0xc410), 0xf0);
        // D6 004D
        gbc.setState(0xd80b, 0x20ab, 0x5490, 0xb8ad, 0x2981, 0x21dc, 0x1, 0x1);
        gbc.writeMem(0xd80b, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x20ab);
        EXPECT(gbc.pc(), 0xd80d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd80b), 0xd6);
        EXPECT(gbc.readMem(0xd80c), 0xa);
        // D6 004E
        gbc.setState(0xe14, 0x4054, 0x6a60, 0x8f06, 0x79d8, 0x13f3, 0x1, 0x0);
        gbc.writeMem(0xe14, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4054);
        EXPECT(gbc.pc(), 0xe16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 004F
        gbc.setState(0xc9da, 0xd283, 0xb3b0, 0x5d1, 0xe4b8, 0xbc2f, 0x1, 0x0);
        gbc.writeMem(0xc9da, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd283);
        EXPECT(gbc.pc(), 0xc9dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9da), 0xd6);
        EXPECT(gbc.readMem(0xc9db), 0x1f);
        // D6 0050
        gbc.setState(0xc0d1, 0x6fe3, 0x60b0, 0x3a21, 0x9641, 0x3d71, 0x1, 0x0);
        gbc.writeMem(0xc0d1, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6fe3);
        EXPECT(gbc.pc(), 0xc0d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d1), 0xd6);
        EXPECT(gbc.readMem(0xc0d2), 0xb0);
        // D6 0051
        gbc.setState(0xa1be, 0x2ffd, 0x4d00, 0x3682, 0x9bfb, 0x92b, 0x0, 0x1);
        gbc.writeMem(0xa1be, { 0xd6, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2ffd);
        EXPECT(gbc.pc(), 0xa1c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1be), 0xd6);
        EXPECT(gbc.readMem(0xa1bf), 0x70);
        // D6 0052
        gbc.setState(0x5cf5, 0x50e3, 0x8c50, 0xc471, 0x2e9b, 0x44ca, 0x1, 0x0);
        gbc.writeMem(0x5cf5, { 0xd6, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x50e3);
        EXPECT(gbc.pc(), 0x5cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0053
        gbc.setState(0xafe2, 0x442c, 0x7f40, 0xd8d5, 0x3ca3, 0xb9e8, 0x1, 0x1);
        gbc.writeMem(0xafe2, { 0xd6, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x442c);
        EXPECT(gbc.pc(), 0xafe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe2), 0xd6);
        EXPECT(gbc.readMem(0xafe3), 0x18);
        // D6 0054
        gbc.setState(0x62e8, 0x7f9b, 0xf9c0, 0xd6e, 0x368d, 0x11eb, 0x1, 0x1);
        gbc.writeMem(0x62e8, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7f9b);
        EXPECT(gbc.pc(), 0x62ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0056
        gbc.setState(0x77c4, 0x2e07, 0xf7b0, 0x79ec, 0xec53, 0xe4d2, 0x0, 0x0);
        gbc.writeMem(0x77c4, { 0xd6, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2e07);
        EXPECT(gbc.pc(), 0x77c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0057
        gbc.setState(0x752e, 0xf5f, 0x57f0, 0xd6db, 0x4a7a, 0x5b11, 0x0, 0x0);
        gbc.writeMem(0x752e, { 0xd6, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf5f);
        EXPECT(gbc.pc(), 0x7530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0059
        gbc.setState(0x5d40, 0xd1cc, 0xa030, 0x1c24, 0x55ab, 0xd430, 0x0, 0x0);
        gbc.writeMem(0x5d40, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd1cc);
        EXPECT(gbc.pc(), 0x5d42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 005A
        gbc.setState(0x2024, 0x629a, 0xac20, 0xeef1, 0x62d3, 0xc461, 0x1, 0x0);
        gbc.writeMem(0x2024, { 0xd6, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x629a);
        EXPECT(gbc.pc(), 0x2026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 005B
        gbc.setState(0xdb2c, 0x8c9a, 0xe5a0, 0xfe6f, 0x8f0, 0xd35a, 0x1, 0x0);
        gbc.writeMem(0xdb2c, { 0xd6, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x8c9a);
        EXPECT(gbc.pc(), 0xdb2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb2c), 0xd6);
        EXPECT(gbc.readMem(0xdb2d), 0x77);
        // D6 005C
        gbc.setState(0xad11, 0x9fdc, 0x9760, 0xa498, 0x94d7, 0x930d, 0x1, 0x0);
        gbc.writeMem(0xad11, { 0xd6, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9fdc);
        EXPECT(gbc.pc(), 0xad13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad11), 0xd6);
        EXPECT(gbc.readMem(0xad12), 0xee);
        // D6 005D
        gbc.setState(0x573a, 0x2ac5, 0xa490, 0x3d2a, 0xc6ec, 0x787f, 0x0, 0x1);
        gbc.writeMem(0x573a, { 0xd6, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x2ac5);
        EXPECT(gbc.pc(), 0x573c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 005E
        gbc.setState(0x7a2a, 0x6633, 0xb9b0, 0x6ec9, 0xfa80, 0xbb1, 0x0, 0x1);
        gbc.writeMem(0x7a2a, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6633);
        EXPECT(gbc.pc(), 0x7a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 005F
        gbc.setState(0x366e, 0x46a6, 0x2800, 0xbbac, 0xde8d, 0x236e, 0x1, 0x0);
        gbc.writeMem(0x366e, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x46a6);
        EXPECT(gbc.pc(), 0x3670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0060
        gbc.setState(0xd785, 0x6ecc, 0xc130, 0x8607, 0xec86, 0x7cc2, 0x1, 0x0);
        gbc.writeMem(0xd785, { 0xd6, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6ecc);
        EXPECT(gbc.pc(), 0xd787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd785), 0xd6);
        EXPECT(gbc.readMem(0xd786), 0xb1);
        // D6 0061
        gbc.setState(0xabf6, 0x4cba, 0xaca0, 0x1d06, 0x9cfb, 0x275, 0x0, 0x0);
        gbc.writeMem(0xabf6, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4cba);
        EXPECT(gbc.pc(), 0xabf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf6), 0xd6);
        EXPECT(gbc.readMem(0xabf7), 0xf3);
        // D6 0062
        gbc.setState(0xc54c, 0x63ba, 0x3fe0, 0xf34f, 0xc071, 0x716e, 0x0, 0x0);
        gbc.writeMem(0xc54c, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x63ba);
        EXPECT(gbc.pc(), 0xc54e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54c), 0xd6);
        EXPECT(gbc.readMem(0xc54d), 0x4c);
        // D6 0063
        gbc.setState(0xc975, 0xb13f, 0xf5c0, 0x49b7, 0xa5f0, 0x1b7a, 0x0, 0x0);
        gbc.writeMem(0xc975, { 0xd6, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb13f);
        EXPECT(gbc.pc(), 0xc977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc975), 0xd6);
        EXPECT(gbc.readMem(0xc976), 0x5f);
        // D6 0065
        gbc.setState(0x4d81, 0x9fd8, 0xe130, 0xec75, 0x7946, 0x3463, 0x1, 0x1);
        gbc.writeMem(0x4d81, { 0xd6, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9fd8);
        EXPECT(gbc.pc(), 0x4d83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0066
        gbc.setState(0x2f76, 0x804f, 0x2d90, 0x30de, 0x6199, 0xb6d3, 0x1, 0x1);
        gbc.writeMem(0x2f76, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x804f);
        EXPECT(gbc.pc(), 0x2f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0067
        gbc.setState(0x1dc4, 0x3ac6, 0xa90, 0x6ab5, 0xb51f, 0xd899, 0x1, 0x0);
        gbc.writeMem(0x1dc4, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3ac6);
        EXPECT(gbc.pc(), 0x1dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0068
        gbc.setState(0x5a34, 0x54ef, 0xfc00, 0x9eac, 0x912c, 0x3662, 0x0, 0x1);
        gbc.writeMem(0x5a34, { 0xd6, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x54ef);
        EXPECT(gbc.pc(), 0x5a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0069
        gbc.setState(0x2d24, 0x8841, 0x8690, 0x842f, 0xf065, 0x14b8, 0x0, 0x0);
        gbc.writeMem(0x2d24, { 0xd6, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8841);
        EXPECT(gbc.pc(), 0x2d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 006B
        gbc.setState(0x3fbb, 0xdfe9, 0xb7a0, 0xee6a, 0xa3af, 0xb1a9, 0x1, 0x0);
        gbc.writeMem(0x3fbb, { 0xd6, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xdfe9);
        EXPECT(gbc.pc(), 0x3fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 006C
        gbc.setState(0x1b48, 0x2a36, 0xfa30, 0xdadf, 0x32de, 0x2862, 0x1, 0x0);
        gbc.writeMem(0x1b48, { 0xd6, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2a36);
        EXPECT(gbc.pc(), 0x1b4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 006D
        gbc.setState(0xc85c, 0x5eb1, 0x5a90, 0xadf, 0x553b, 0xae50, 0x1, 0x1);
        gbc.writeMem(0xc85c, { 0xd6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5eb1);
        EXPECT(gbc.pc(), 0xc85e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc85c), 0xd6);
        EXPECT(gbc.readMem(0xc85d), 0x25);
        // D6 006E
        gbc.setState(0x14e9, 0x24c5, 0x2c10, 0x41e3, 0x2531, 0x7d69, 0x1, 0x0);
        gbc.writeMem(0x14e9, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x24c5);
        EXPECT(gbc.pc(), 0x14eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0070
        gbc.setState(0x8583, 0x1848, 0xd690, 0x9cec, 0xd6c4, 0x122e, 0x1, 0x1);
        gbc.writeMem(0x8583, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1848);
        EXPECT(gbc.pc(), 0x8585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8583), 0xd6);
        EXPECT(gbc.readMem(0x8584), 0xd4);
        // D6 0071
        gbc.setState(0x3209, 0xaf8a, 0x7580, 0x74ac, 0x9f26, 0x56e9, 0x0, 0x0);
        gbc.writeMem(0x3209, { 0xd6, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaf8a);
        EXPECT(gbc.pc(), 0x320b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0072
        gbc.setState(0x6135, 0xc195, 0x5910, 0x53c7, 0x6033, 0xe592, 0x1, 0x1);
        gbc.writeMem(0x6135, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc195);
        EXPECT(gbc.pc(), 0x6137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0073
        gbc.setState(0x9d13, 0x9fd5, 0x63b0, 0x9377, 0x15bb, 0xdf4f, 0x0, 0x0);
        gbc.writeMem(0x9d13, { 0xd6, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9fd5);
        EXPECT(gbc.pc(), 0x9d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d13), 0xd6);
        EXPECT(gbc.readMem(0x9d14), 0xe0);
        // D6 0074
        gbc.setState(0xe82e, 0xcbbc, 0xc8f0, 0x86fc, 0x497, 0x5dc5, 0x1, 0x0);
        gbc.writeMem(0xe82e, { 0xd6, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcbbc);
        EXPECT(gbc.pc(), 0xe830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe82e), 0xd6);
        EXPECT(gbc.readMem(0xe82f), 0x3d);
        // D6 0075
        gbc.setState(0x8101, 0x7f82, 0xc500, 0xe137, 0xc094, 0xffb5, 0x1, 0x0);
        gbc.writeMem(0x8101, { 0xd6, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7f82);
        EXPECT(gbc.pc(), 0x8103);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8101), 0xd6);
        EXPECT(gbc.readMem(0x8102), 0x49);
        // D6 0076
        gbc.setState(0x911a, 0xe6c4, 0x8f90, 0x2c93, 0x3c02, 0x2bec, 0x0, 0x0);
        gbc.writeMem(0x911a, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe6c4);
        EXPECT(gbc.pc(), 0x911c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x911a), 0xd6);
        EXPECT(gbc.readMem(0x911b), 0x53);
        // D6 0077
        gbc.setState(0x5f87, 0x9b2e, 0x5670, 0x50e0, 0x1bdf, 0xee3d, 0x1, 0x0);
        gbc.writeMem(0x5f87, { 0xd6, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9b2e);
        EXPECT(gbc.pc(), 0x5f89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0078
        gbc.setState(0x5f20, 0x5075, 0x2e00, 0x47a1, 0xfdc3, 0x7816, 0x0, 0x0);
        gbc.writeMem(0x5f20, { 0xd6, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5075);
        EXPECT(gbc.pc(), 0x5f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0079
        gbc.setState(0xc920, 0xe635, 0xbf70, 0xbf7e, 0x5273, 0x9949, 0x1, 0x1);
        gbc.writeMem(0xc920, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe635);
        EXPECT(gbc.pc(), 0xc922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc920), 0xd6);
        EXPECT(gbc.readMem(0xc921), 0x52);
        // D6 007A
        gbc.setState(0xdd5, 0xea1f, 0x1eb0, 0xd3fd, 0x7bb9, 0x1afa, 0x0, 0x0);
        gbc.writeMem(0xdd5, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xea1f);
        EXPECT(gbc.pc(), 0xdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 007B
        gbc.setState(0xeced, 0x43e3, 0x70, 0x738a, 0x4590, 0xfed5, 0x1, 0x0);
        gbc.writeMem(0xeced, { 0xd6, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x43e3);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeced), 0xd6);
        EXPECT(gbc.readMem(0xecee), 0x4f);
        // D6 007C
        gbc.setState(0x48ca, 0xdb0a, 0x920, 0xc9af, 0x500e, 0x7273, 0x1, 0x1);
        gbc.writeMem(0x48ca, { 0xd6, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xdb0a);
        EXPECT(gbc.pc(), 0x48cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 007D
        gbc.setState(0xeea4, 0x7271, 0x52e0, 0x47b9, 0x659e, 0x5586, 0x0, 0x0);
        gbc.writeMem(0xeea4, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7271);
        EXPECT(gbc.pc(), 0xeea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeea4), 0xd6);
        EXPECT(gbc.readMem(0xeea5), 0x5);
        // D6 007E
        gbc.setState(0xa8ad, 0xd208, 0xbb80, 0xf8ff, 0x993f, 0x75a8, 0x1, 0x1);
        gbc.writeMem(0xa8ad, { 0xd6, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd208);
        EXPECT(gbc.pc(), 0xa8af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ad), 0xd6);
        EXPECT(gbc.readMem(0xa8ae), 0x78);
        // D6 007F
        gbc.setState(0x4eed, 0xa1b5, 0xbd20, 0x7eb9, 0xdfa4, 0xc4b8, 0x1, 0x1);
        gbc.writeMem(0x4eed, { 0xd6, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa1b5);
        EXPECT(gbc.pc(), 0x4eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0080
        gbc.setState(0x5e24, 0x5b34, 0xbf10, 0x9333, 0xc704, 0xab8f, 0x0, 0x0);
        gbc.writeMem(0x5e24, { 0xd6, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5b34);
        EXPECT(gbc.pc(), 0x5e26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0081
        gbc.setState(0xa8ae, 0x5fde, 0x68f0, 0x7b72, 0x5459, 0x932d, 0x0, 0x1);
        gbc.writeMem(0xa8ae, { 0xd6, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5fde);
        EXPECT(gbc.pc(), 0xa8b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ae), 0xd6);
        EXPECT(gbc.readMem(0xa8af), 0x19);
        // D6 0082
        gbc.setState(0xf0d, 0xee27, 0xd560, 0x92cf, 0xa903, 0x2963, 0x1, 0x0);
        gbc.writeMem(0xf0d, { 0xd6, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xee27);
        EXPECT(gbc.pc(), 0xf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0083
        gbc.setState(0x79d9, 0x5d2a, 0xccc0, 0xa3cf, 0x600c, 0x4798, 0x1, 0x1);
        gbc.writeMem(0x79d9, { 0xd6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5d2a);
        EXPECT(gbc.pc(), 0x79db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0084
        gbc.setState(0x1204, 0x9f, 0x6930, 0xc409, 0x785a, 0xbdfd, 0x0, 0x1);
        gbc.writeMem(0x1204, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9f);
        EXPECT(gbc.pc(), 0x1206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0085
        gbc.setState(0xb122, 0xb93b, 0xc780, 0x867, 0xe890, 0x1cff, 0x1, 0x0);
        gbc.writeMem(0xb122, { 0xd6, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb93b);
        EXPECT(gbc.pc(), 0xb124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb122), 0xd6);
        EXPECT(gbc.readMem(0xb123), 0xde);
        // D6 0086
        gbc.setState(0x94c3, 0x667, 0x27e0, 0x4e71, 0x76db, 0x3ba9, 0x0, 0x1);
        gbc.writeMem(0x94c3, { 0xd6, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x667);
        EXPECT(gbc.pc(), 0x94c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c3), 0xd6);
        EXPECT(gbc.readMem(0x94c4), 0xfd);
        // D6 0087
        gbc.setState(0x2d82, 0x807, 0x9920, 0x1d13, 0x8593, 0x2ee6, 0x1, 0x1);
        gbc.writeMem(0x2d82, { 0xd6, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x807);
        EXPECT(gbc.pc(), 0x2d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0088
        gbc.setState(0xd474, 0x15a1, 0x68c0, 0x5768, 0xed3b, 0x7808, 0x0, 0x1);
        gbc.writeMem(0xd474, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x15a1);
        EXPECT(gbc.pc(), 0xd476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd474), 0xd6);
        EXPECT(gbc.readMem(0xd475), 0x48);
        // D6 0089
        gbc.setState(0xafa7, 0x245e, 0xf980, 0xb2b5, 0x1d35, 0xbdf6, 0x0, 0x1);
        gbc.writeMem(0xafa7, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x245e);
        EXPECT(gbc.pc(), 0xafa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa7), 0xd6);
        EXPECT(gbc.readMem(0xafa8), 0xf3);
        // D6 008A
        gbc.setState(0x1c90, 0xd601, 0x9370, 0xf23a, 0xe411, 0xac75, 0x1, 0x1);
        gbc.writeMem(0x1c90, { 0xd6, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd601);
        EXPECT(gbc.pc(), 0x1c92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 008C
        gbc.setState(0xd240, 0xaf66, 0xe20, 0x5a1c, 0x32e6, 0xc42b, 0x0, 0x0);
        gbc.writeMem(0xd240, { 0xd6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaf66);
        EXPECT(gbc.pc(), 0xd242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd240), 0xd6);
        EXPECT(gbc.readMem(0xd241), 0x6);
        // D6 008D
        gbc.setState(0x50d4, 0x7153, 0x4430, 0xa9a8, 0xb01d, 0xa49b, 0x0, 0x1);
        gbc.writeMem(0x50d4, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7153);
        EXPECT(gbc.pc(), 0x50d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 008E
        gbc.setState(0xb043, 0xe4cc, 0x9260, 0x3618, 0x38cf, 0xe38d, 0x0, 0x1);
        gbc.writeMem(0xb043, { 0xd6, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe4cc);
        EXPECT(gbc.pc(), 0xb045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb043), 0xd6);
        EXPECT(gbc.readMem(0xb044), 0x7e);
        // D6 008F
        gbc.setState(0x109, 0x80f6, 0xde0, 0xb3c9, 0x531f, 0x2def, 0x0, 0x1);
        gbc.writeMem(0x109, { 0xd6, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x80f6);
        EXPECT(gbc.pc(), 0x10b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0090
        gbc.setState(0x9a4, 0xfd1, 0x18a0, 0x97dd, 0xa9b2, 0x7335, 0x0, 0x1);
        gbc.writeMem(0x9a4, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfd1);
        EXPECT(gbc.pc(), 0x9a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0091
        gbc.setState(0xbc23, 0x3c1d, 0x94f0, 0x3de1, 0xad39, 0x4604, 0x1, 0x0);
        gbc.writeMem(0xbc23, { 0xd6, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3c1d);
        EXPECT(gbc.pc(), 0xbc25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc23), 0xd6);
        EXPECT(gbc.readMem(0xbc24), 0xfe);
        // D6 0092
        gbc.setState(0x46c4, 0x27d6, 0x9590, 0x4cf4, 0x7397, 0x52b6, 0x0, 0x1);
        gbc.writeMem(0x46c4, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x27d6);
        EXPECT(gbc.pc(), 0x46c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0093
        gbc.setState(0x3093, 0x4607, 0x18a0, 0xd29e, 0x9789, 0x1579, 0x0, 0x1);
        gbc.writeMem(0x3093, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4607);
        EXPECT(gbc.pc(), 0x3095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0094
        gbc.setState(0x7a1e, 0x9fb9, 0x7500, 0xfbb6, 0x83f2, 0xff83, 0x1, 0x0);
        gbc.writeMem(0x7a1e, { 0xd6, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9fb9);
        EXPECT(gbc.pc(), 0x7a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0095
        gbc.setState(0x3ae0, 0x2aae, 0xe1b0, 0x2f6, 0x24b4, 0x7bd0, 0x0, 0x0);
        gbc.writeMem(0x3ae0, { 0xd6, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2aae);
        EXPECT(gbc.pc(), 0x3ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0096
        gbc.setState(0xe65, 0x6266, 0x63e0, 0xc55d, 0x1d90, 0x504f, 0x0, 0x0);
        gbc.writeMem(0xe65, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6266);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0097
        gbc.setState(0xa5b0, 0x6421, 0xd350, 0x4c6, 0xf458, 0x73f9, 0x1, 0x0);
        gbc.writeMem(0xa5b0, { 0xd6, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6421);
        EXPECT(gbc.pc(), 0xa5b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5b0), 0xd6);
        EXPECT(gbc.readMem(0xa5b1), 0x23);
        // D6 0098
        gbc.setState(0x138a, 0x1411, 0x43c0, 0xe8e0, 0xefb, 0x7793, 0x1, 0x0);
        gbc.writeMem(0x138a, { 0xd6, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1411);
        EXPECT(gbc.pc(), 0x138c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0099
        gbc.setState(0x494b, 0xd348, 0x5540, 0xf27e, 0xd9aa, 0x7416, 0x0, 0x0);
        gbc.writeMem(0x494b, { 0xd6, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd348);
        EXPECT(gbc.pc(), 0x494d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 009B
        gbc.setState(0x8c6f, 0x23bf, 0x2d40, 0x7423, 0x85e2, 0x6981, 0x0, 0x0);
        gbc.writeMem(0x8c6f, { 0xd6, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x23bf);
        EXPECT(gbc.pc(), 0x8c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c6f), 0xd6);
        EXPECT(gbc.readMem(0x8c70), 0x9c);
        // D6 009C
        gbc.setState(0x9af9, 0xaa0a, 0xe810, 0x9ddf, 0xceec, 0x1683, 0x0, 0x0);
        gbc.writeMem(0x9af9, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xaa0a);
        EXPECT(gbc.pc(), 0x9afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af9), 0xd6);
        EXPECT(gbc.readMem(0x9afa), 0xa);
        // D6 009D
        gbc.setState(0x53c4, 0x88, 0xb9b0, 0xa955, 0xa83d, 0x762e, 0x1, 0x0);
        gbc.writeMem(0x53c4, { 0xd6, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x88);
        EXPECT(gbc.pc(), 0x53c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 009E
        gbc.setState(0x2b3a, 0x508f, 0x3350, 0x7281, 0xb0fa, 0x6183, 0x0, 0x1);
        gbc.writeMem(0x2b3a, { 0xd6, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x508f);
        EXPECT(gbc.pc(), 0x2b3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 009F
        gbc.setState(0x316a, 0x14c6, 0x1dc0, 0xc65, 0xe5b0, 0xadd8, 0x1, 0x1);
        gbc.writeMem(0x316a, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x14c6);
        EXPECT(gbc.pc(), 0x316c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00A0
        gbc.setState(0x849, 0x7677, 0x4120, 0xa4e8, 0xd55e, 0x7db, 0x1, 0x0);
        gbc.writeMem(0x849, { 0xd6, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7677);
        EXPECT(gbc.pc(), 0x84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00A1
        gbc.setState(0x7785, 0xa9f0, 0xd1c0, 0xda35, 0x3031, 0xc994, 0x1, 0x1);
        gbc.writeMem(0x7785, { 0xd6, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xa9f0);
        EXPECT(gbc.pc(), 0x7787);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00A2
        gbc.setState(0xbece, 0xdf6a, 0x4b70, 0xa62f, 0xa638, 0xe921, 0x1, 0x1);
        gbc.writeMem(0xbece, { 0xd6, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdf6a);
        EXPECT(gbc.pc(), 0xbed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbece), 0xd6);
        EXPECT(gbc.readMem(0xbecf), 0x30);
        // D6 00A3
        gbc.setState(0xa59e, 0xca7c, 0xd740, 0x8660, 0x3e60, 0x4008, 0x0, 0x1);
        gbc.writeMem(0xa59e, { 0xd6, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xca7c);
        EXPECT(gbc.pc(), 0xa5a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59e), 0xd6);
        EXPECT(gbc.readMem(0xa59f), 0xc9);
        // D6 00A4
        gbc.setState(0x1184, 0xf35, 0xfd80, 0x5e67, 0x9ba2, 0x9649, 0x0, 0x1);
        gbc.writeMem(0x1184, { 0xd6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xf35);
        EXPECT(gbc.pc(), 0x1186);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00A5
        gbc.setState(0x8310, 0xe0f6, 0xa170, 0x8aea, 0xdfcc, 0x34fc, 0x1, 0x0);
        gbc.writeMem(0x8310, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe0f6);
        EXPECT(gbc.pc(), 0x8312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8310), 0xd6);
        EXPECT(gbc.readMem(0x8311), 0x36);
        // D6 00A6
        gbc.setState(0x6093, 0xef8, 0x5c90, 0x74ed, 0xba09, 0xe9a9, 0x0, 0x1);
        gbc.writeMem(0x6093, { 0xd6, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xef8);
        EXPECT(gbc.pc(), 0x6095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00A7
        gbc.setState(0x78e0, 0x7e27, 0xbcb0, 0x243c, 0xad9, 0x371a, 0x1, 0x1);
        gbc.writeMem(0x78e0, { 0xd6, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7e27);
        EXPECT(gbc.pc(), 0x78e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00A8
        gbc.setState(0xe5d1, 0x3f90, 0xbc70, 0x91ea, 0xca19, 0x8b98, 0x1, 0x0);
        gbc.writeMem(0xe5d1, { 0xd6, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3f90);
        EXPECT(gbc.pc(), 0xe5d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d1), 0xd6);
        EXPECT(gbc.readMem(0xe5d2), 0x97);
        // D6 00A9
        gbc.setState(0x68e1, 0x2950, 0x9600, 0xbdf0, 0xf5b5, 0xe5e4, 0x1, 0x0);
        gbc.writeMem(0x68e1, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2950);
        EXPECT(gbc.pc(), 0x68e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00AA
        gbc.setState(0xc41, 0x6721, 0x8f60, 0xd1cd, 0x9dca, 0x3b46, 0x1, 0x1);
        gbc.writeMem(0xc41, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6721);
        EXPECT(gbc.pc(), 0xc43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00AB
        gbc.setState(0x765b, 0x6c8b, 0x82d0, 0x3a82, 0x6646, 0x3d68, 0x1, 0x0);
        gbc.writeMem(0x765b, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6c8b);
        EXPECT(gbc.pc(), 0x765d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00AC
        gbc.setState(0x1d3b, 0x7316, 0xd6e0, 0x5bde, 0x7c78, 0x1d21, 0x1, 0x0);
        gbc.writeMem(0x1d3b, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7316);
        EXPECT(gbc.pc(), 0x1d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00AD
        gbc.setState(0x9d87, 0xebe4, 0x7860, 0x7584, 0xdf91, 0xcec3, 0x0, 0x1);
        gbc.writeMem(0x9d87, { 0xd6, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xebe4);
        EXPECT(gbc.pc(), 0x9d89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d87), 0xd6);
        EXPECT(gbc.readMem(0x9d88), 0x79);
        // D6 00AE
        gbc.setState(0xc0ca, 0x82ae, 0x8da0, 0x7795, 0x3336, 0x2285, 0x0, 0x1);
        gbc.writeMem(0xc0ca, { 0xd6, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x82ae);
        EXPECT(gbc.pc(), 0xc0cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ca), 0xd6);
        EXPECT(gbc.readMem(0xc0cb), 0x8d);
        // D6 00B0
        gbc.setState(0x731a, 0xad82, 0xd0a0, 0x5f82, 0x162b, 0xa99a, 0x1, 0x0);
        gbc.writeMem(0x731a, { 0xd6, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xad82);
        EXPECT(gbc.pc(), 0x731c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00B1
        gbc.setState(0x7e05, 0xe263, 0x6d50, 0xb442, 0x2dc3, 0xe57a, 0x1, 0x0);
        gbc.writeMem(0x7e05, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe263);
        EXPECT(gbc.pc(), 0x7e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00B2
        gbc.setState(0x32a6, 0x6d01, 0x1410, 0x98f8, 0xfbc9, 0x6a34, 0x1, 0x0);
        gbc.writeMem(0x32a6, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x6d01);
        EXPECT(gbc.pc(), 0x32a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00B3
        gbc.setState(0x6819, 0xff5a, 0x3ec0, 0x3c58, 0x489a, 0xc08f, 0x0, 0x1);
        gbc.writeMem(0x6819, { 0xd6, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xff5a);
        EXPECT(gbc.pc(), 0x681b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00B4
        gbc.setState(0xc61d, 0xb81a, 0xdc60, 0x32d5, 0xc147, 0xbd83, 0x0, 0x0);
        gbc.writeMem(0xc61d, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb81a);
        EXPECT(gbc.pc(), 0xc61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61d), 0xd6);
        EXPECT(gbc.readMem(0xc61e), 0xd4);
        // D6 00B5
        gbc.setState(0x1e10, 0x8795, 0xaa70, 0xd7be, 0x7de6, 0xf3b2, 0x0, 0x1);
        gbc.writeMem(0x1e10, { 0xd6, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8795);
        EXPECT(gbc.pc(), 0x1e12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00B6
        gbc.setState(0xaff3, 0x2ac9, 0x8b00, 0x42ad, 0xb441, 0xafda, 0x1, 0x0);
        gbc.writeMem(0xaff3, { 0xd6, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2ac9);
        EXPECT(gbc.pc(), 0xaff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff3), 0xd6);
        EXPECT(gbc.readMem(0xaff4), 0x76);
        // D6 00B7
        gbc.setState(0xd3d, 0xddf5, 0xa9f0, 0x9e1b, 0x277d, 0xefcf, 0x1, 0x1);
        gbc.writeMem(0xd3d, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xddf5);
        EXPECT(gbc.pc(), 0xd3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00B8
        gbc.setState(0x12d4, 0x733b, 0x7550, 0x944c, 0x403, 0x2fc3, 0x0, 0x0);
        gbc.writeMem(0x12d4, { 0xd6, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x733b);
        EXPECT(gbc.pc(), 0x12d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00B9
        gbc.setState(0xa70d, 0x1ef6, 0x3f30, 0x1d5e, 0xe891, 0x1dfc, 0x0, 0x1);
        gbc.writeMem(0xa70d, { 0xd6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1ef6);
        EXPECT(gbc.pc(), 0xa70f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa70d), 0xd6);
        EXPECT(gbc.readMem(0xa70e), 0x6c);
        // D6 00BA
        gbc.setState(0x176c, 0xb812, 0xba40, 0x887c, 0x9128, 0xe8e6, 0x0, 0x0);
        gbc.writeMem(0x176c, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb812);
        EXPECT(gbc.pc(), 0x176e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00BB
        gbc.setState(0x9e4b, 0x86f9, 0xdc50, 0x8204, 0xd6a2, 0xa4f0, 0x1, 0x0);
        gbc.writeMem(0x9e4b, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x86f9);
        EXPECT(gbc.pc(), 0x9e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4b), 0xd6);
        EXPECT(gbc.readMem(0x9e4c), 0x36);
        // D6 00BC
        gbc.setState(0xdc07, 0x3e0e, 0x3c00, 0xafe1, 0xe36f, 0xaa59, 0x0, 0x0);
        gbc.writeMem(0xdc07, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3e0e);
        EXPECT(gbc.pc(), 0xdc09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc07), 0xd6);
        EXPECT(gbc.readMem(0xdc08), 0x16);
        // D6 00BD
        gbc.setState(0x459a, 0x48e3, 0x7c80, 0xf0f4, 0xe6b5, 0xe9f1, 0x0, 0x0);
        gbc.writeMem(0x459a, { 0xd6, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x48e3);
        EXPECT(gbc.pc(), 0x459c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00BE
        gbc.setState(0x126a, 0x9919, 0xf890, 0x8a18, 0xacde, 0xae62, 0x1, 0x0);
        gbc.writeMem(0x126a, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9919);
        EXPECT(gbc.pc(), 0x126c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00BF
        gbc.setState(0xb3a9, 0xf22e, 0x5b90, 0x1abc, 0xcad5, 0x643a, 0x1, 0x0);
        gbc.writeMem(0xb3a9, { 0xd6, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf22e);
        EXPECT(gbc.pc(), 0xb3ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a9), 0xd6);
        EXPECT(gbc.readMem(0xb3aa), 0xdd);
        // D6 00C0
        gbc.setState(0x1483, 0x684, 0xe740, 0x2c07, 0x6151, 0xd261, 0x1, 0x0);
        gbc.writeMem(0x1483, { 0xd6, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x684);
        EXPECT(gbc.pc(), 0x1485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00C1
        gbc.setState(0xcb0f, 0x4037, 0x4320, 0x3bb7, 0x7737, 0x177c, 0x1, 0x0);
        gbc.writeMem(0xcb0f, { 0xd6, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4037);
        EXPECT(gbc.pc(), 0xcb11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb0f), 0xd6);
        EXPECT(gbc.readMem(0xcb10), 0xdf);
        // D6 00C2
        gbc.setState(0x50b9, 0xa3cb, 0xaa0, 0x9611, 0x4efe, 0x936, 0x0, 0x1);
        gbc.writeMem(0x50b9, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa3cb);
        EXPECT(gbc.pc(), 0x50bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00C3
        gbc.setState(0x6a6e, 0x5e26, 0x3820, 0xd558, 0x5914, 0xf1f0, 0x0, 0x0);
        gbc.writeMem(0x6a6e, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x5e26);
        EXPECT(gbc.pc(), 0x6a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00C4
        gbc.setState(0x4f47, 0x856f, 0x4870, 0xad71, 0xbc84, 0xce9a, 0x1, 0x1);
        gbc.writeMem(0x4f47, { 0xd6, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0x4f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00C5
        gbc.setState(0x3c31, 0x3297, 0x1030, 0xe816, 0xeba9, 0xd631, 0x0, 0x0);
        gbc.writeMem(0x3c31, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3297);
        EXPECT(gbc.pc(), 0x3c33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00C6
        gbc.setState(0x6e43, 0x3e44, 0xd530, 0xd9f7, 0x6fc7, 0xb267, 0x0, 0x1);
        gbc.writeMem(0x6e43, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3e44);
        EXPECT(gbc.pc(), 0x6e45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00C7
        gbc.setState(0x2e45, 0xc627, 0x5b00, 0xf24f, 0xf4a5, 0x1f37, 0x1, 0x0);
        gbc.writeMem(0x2e45, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc627);
        EXPECT(gbc.pc(), 0x2e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00C8
        gbc.setState(0x5950, 0x1351, 0x9d20, 0x5674, 0xcaf, 0xaafd, 0x0, 0x0);
        gbc.writeMem(0x5950, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1351);
        EXPECT(gbc.pc(), 0x5952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00C9
        gbc.setState(0xcd2c, 0x40ec, 0xb620, 0xd1d0, 0x57e6, 0x8379, 0x1, 0x0);
        gbc.writeMem(0xcd2c, { 0xd6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x40ec);
        EXPECT(gbc.pc(), 0xcd2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd2c), 0xd6);
        EXPECT(gbc.readMem(0xcd2d), 0x6c);
        // D6 00CA
        gbc.setState(0xc3c, 0x4091, 0xc830, 0xe05f, 0x5e77, 0xf198, 0x0, 0x0);
        gbc.writeMem(0xc3c, { 0xd6, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4091);
        EXPECT(gbc.pc(), 0xc3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00CB
        gbc.setState(0x5d34, 0xa3b5, 0x1e90, 0xa24a, 0xfbdd, 0xe556, 0x0, 0x1);
        gbc.writeMem(0x5d34, { 0xd6, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa3b5);
        EXPECT(gbc.pc(), 0x5d36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00CC
        gbc.setState(0x773e, 0x26e4, 0x86d0, 0x8c90, 0x810a, 0xead4, 0x1, 0x0);
        gbc.writeMem(0x773e, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x26e4);
        EXPECT(gbc.pc(), 0x7740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00CD
        gbc.setState(0xb64a, 0x7813, 0x1a80, 0xec67, 0x3b48, 0x9355, 0x0, 0x1);
        gbc.writeMem(0xb64a, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7813);
        EXPECT(gbc.pc(), 0xb64c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb64a), 0xd6);
        EXPECT(gbc.readMem(0xb64b), 0xa3);
        // D6 00CE
        gbc.setState(0x7354, 0xe28f, 0xa5c0, 0x3ae0, 0x8ebb, 0x378f, 0x0, 0x1);
        gbc.writeMem(0x7354, { 0xd6, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe28f);
        EXPECT(gbc.pc(), 0x7356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00CF
        gbc.setState(0xce60, 0xc670, 0x8c90, 0x5074, 0xb9b9, 0x1507, 0x0, 0x1);
        gbc.writeMem(0xce60, { 0xd6, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc670);
        EXPECT(gbc.pc(), 0xce62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce60), 0xd6);
        EXPECT(gbc.readMem(0xce61), 0xc8);
        // D6 00D0
        gbc.setState(0x9b03, 0x2cf2, 0x3c00, 0xb6e5, 0x161e, 0xa41e, 0x1, 0x1);
        gbc.writeMem(0x9b03, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2cf2);
        EXPECT(gbc.pc(), 0x9b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b03), 0xd6);
        EXPECT(gbc.readMem(0x9b04), 0xe7);
        // D6 00D1
        gbc.setState(0x8b63, 0x4d06, 0x2800, 0xe3ee, 0x8571, 0x8893, 0x0, 0x0);
        gbc.writeMem(0x8b63, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4d06);
        EXPECT(gbc.pc(), 0x8b65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b63), 0xd6);
        EXPECT(gbc.readMem(0x8b64), 0x3e);
        // D6 00D2
        gbc.setState(0x9182, 0xf581, 0x3bc0, 0x2f29, 0x5cbf, 0xb17a, 0x1, 0x1);
        gbc.writeMem(0x9182, { 0xd6, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xf581);
        EXPECT(gbc.pc(), 0x9184);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9182), 0xd6);
        EXPECT(gbc.readMem(0x9183), 0xab);
        // D6 00D3
        gbc.setState(0xe87a, 0xd5a3, 0xc3e0, 0x6f93, 0x7232, 0x4dbd, 0x1, 0x1);
        gbc.writeMem(0xe87a, { 0xd6, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd5a3);
        EXPECT(gbc.pc(), 0xe87c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe87a), 0xd6);
        EXPECT(gbc.readMem(0xe87b), 0xfc);
        // D6 00D4
        gbc.setState(0x8551, 0x99fd, 0x7370, 0xf53f, 0x3209, 0xd895, 0x1, 0x1);
        gbc.writeMem(0x8551, { 0xd6, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x99fd);
        EXPECT(gbc.pc(), 0x8553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8551), 0xd6);
        EXPECT(gbc.readMem(0x8552), 0xb4);
        // D6 00D5
        gbc.setState(0x7358, 0xce39, 0x25d0, 0x45f5, 0xea32, 0x97cf, 0x0, 0x1);
        gbc.writeMem(0x7358, { 0xd6, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xce39);
        EXPECT(gbc.pc(), 0x735a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00D6
        gbc.setState(0xbcda, 0xf3f9, 0xfd60, 0x8e9, 0xa182, 0xa311, 0x1, 0x1);
        gbc.writeMem(0xbcda, { 0xd6, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf3f9);
        EXPECT(gbc.pc(), 0xbcdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcda), 0xd6);
        EXPECT(gbc.readMem(0xbcdb), 0x5e);
        // D6 00D7
        gbc.setState(0x3bc4, 0x6f99, 0x4f50, 0x7c86, 0xb954, 0xe8f7, 0x0, 0x0);
        gbc.writeMem(0x3bc4, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6f99);
        EXPECT(gbc.pc(), 0x3bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00D8
        gbc.setState(0x128d, 0x64b0, 0xc3f0, 0xc3fc, 0xc640, 0x9d60, 0x1, 0x1);
        gbc.writeMem(0x128d, { 0xd6, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x64b0);
        EXPECT(gbc.pc(), 0x128f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00DA
        gbc.setState(0x3ce4, 0xa20c, 0xc270, 0x8f40, 0x386f, 0x3ef5, 0x0, 0x0);
        gbc.writeMem(0x3ce4, { 0xd6, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa20c);
        EXPECT(gbc.pc(), 0x3ce6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00DB
        gbc.setState(0x86d1, 0xb0a3, 0xa790, 0x9db1, 0x9c31, 0x8ce6, 0x1, 0x0);
        gbc.writeMem(0x86d1, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb0a3);
        EXPECT(gbc.pc(), 0x86d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d1), 0xd6);
        EXPECT(gbc.readMem(0x86d2), 0xae);
        // D6 00DC
        gbc.setState(0x1a8d, 0x878d, 0xf860, 0x3ef5, 0xfb40, 0xef07, 0x0, 0x1);
        gbc.writeMem(0x1a8d, { 0xd6, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x878d);
        EXPECT(gbc.pc(), 0x1a8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00DD
        gbc.setState(0xd0f7, 0xc3fe, 0xef0, 0x2054, 0x28e4, 0x93e0, 0x0, 0x1);
        gbc.writeMem(0xd0f7, { 0xd6, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc3fe);
        EXPECT(gbc.pc(), 0xd0f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0f7), 0xd6);
        EXPECT(gbc.readMem(0xd0f8), 0x86);
        // D6 00DE
        gbc.setState(0x4e65, 0x38d8, 0xcd40, 0x8447, 0x13ec, 0x82aa, 0x0, 0x0);
        gbc.writeMem(0x4e65, { 0xd6, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x38d8);
        EXPECT(gbc.pc(), 0x4e67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00DF
        gbc.setState(0xd466, 0xe6f5, 0x4e40, 0x390c, 0xbb99, 0xdfc1, 0x0, 0x0);
        gbc.writeMem(0xd466, { 0xd6, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe6f5);
        EXPECT(gbc.pc(), 0xd468);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd466), 0xd6);
        EXPECT(gbc.readMem(0xd467), 0x2a);
        // D6 00E0
        gbc.setState(0x7f4e, 0xaa87, 0x4330, 0x4cd2, 0x60e9, 0xd10d, 0x1, 0x0);
        gbc.writeMem(0x7f4e, { 0xd6, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaa87);
        EXPECT(gbc.pc(), 0x7f50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00E1
        gbc.setState(0x175c, 0x231a, 0x2820, 0xe2ff, 0x471c, 0x642f, 0x0, 0x1);
        gbc.writeMem(0x175c, { 0xd6, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x231a);
        EXPECT(gbc.pc(), 0x175e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00E2
        gbc.setState(0x9db, 0xa12e, 0x93f0, 0x37ab, 0x87ec, 0xea5d, 0x0, 0x0);
        gbc.writeMem(0x9db, { 0xd6, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa12e);
        EXPECT(gbc.pc(), 0x9dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00E4
        gbc.setState(0x9809, 0x7fb4, 0x1e50, 0x11ed, 0x4ca8, 0x217f, 0x0, 0x1);
        gbc.writeMem(0x9809, { 0xd6, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7fb4);
        EXPECT(gbc.pc(), 0x980b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9809), 0xd6);
        EXPECT(gbc.readMem(0x980a), 0x49);
        // D6 00E5
        gbc.setState(0x6, 0xf73e, 0x6da0, 0x9878, 0x58af, 0x7b3e, 0x0, 0x0);
        gbc.writeMem(0x6, { 0xd6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xf73e);
        EXPECT(gbc.pc(), 0x8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00E6
        gbc.setState(0x43a1, 0x586a, 0x16e0, 0xc6e, 0xf305, 0xe127, 0x0, 0x0);
        gbc.writeMem(0x43a1, { 0xd6, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x586a);
        EXPECT(gbc.pc(), 0x43a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00E7
        gbc.setState(0xb015, 0xcd1b, 0x61b0, 0xcda9, 0xe263, 0x9fff, 0x1, 0x1);
        gbc.writeMem(0xb015, { 0xd6, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xcd1b);
        EXPECT(gbc.pc(), 0xb017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb015), 0xd6);
        EXPECT(gbc.readMem(0xb016), 0xe0);
        // D6 00E8
        gbc.setState(0x1aff, 0xeb06, 0xb800, 0x1e66, 0x4a50, 0xda1, 0x1, 0x0);
        gbc.writeMem(0x1aff, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xeb06);
        EXPECT(gbc.pc(), 0x1b01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00EC
        gbc.setState(0x43b3, 0x9a79, 0xee30, 0x4068, 0xa4e6, 0x6308, 0x0, 0x1);
        gbc.writeMem(0x43b3, { 0xd6, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9a79);
        EXPECT(gbc.pc(), 0x43b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00ED
        gbc.setState(0x1270, 0xb4e2, 0x1850, 0x76e1, 0xc053, 0xc368, 0x0, 0x0);
        gbc.writeMem(0x1270, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb4e2);
        EXPECT(gbc.pc(), 0x1272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00EE
        gbc.setState(0x33d2, 0xc263, 0x31a0, 0x9049, 0xa2c8, 0xe03c, 0x0, 0x0);
        gbc.writeMem(0x33d2, { 0xd6, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc263);
        EXPECT(gbc.pc(), 0x33d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00EF
        gbc.setState(0x2899, 0x4419, 0x2de0, 0xd96c, 0x367d, 0xe055, 0x0, 0x1);
        gbc.writeMem(0x2899, { 0xd6, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4419);
        EXPECT(gbc.pc(), 0x289b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00F0
        gbc.setState(0xe28e, 0x133, 0x5800, 0xe60, 0xc6e0, 0x7316, 0x1, 0x1);
        gbc.writeMem(0xe28e, { 0xd6, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x133);
        EXPECT(gbc.pc(), 0xe290);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28e), 0xd6);
        EXPECT(gbc.readMem(0xe28f), 0xaa);
        // D6 00F1
        gbc.setState(0xecf0, 0xec3, 0x9950, 0xde11, 0x9bdf, 0x5825, 0x0, 0x1);
        gbc.writeMem(0xecf0, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xec3);
        EXPECT(gbc.pc(), 0xecf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecf0), 0xd6);
        EXPECT(gbc.readMem(0xecf1), 0xe7);
        // D6 00F2
        gbc.setState(0x6398, 0xb9c5, 0x33e0, 0xe238, 0x20b2, 0x7a89, 0x1, 0x0);
        gbc.writeMem(0x6398, { 0xd6, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb9c5);
        EXPECT(gbc.pc(), 0x639a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00F3
        gbc.setState(0x970, 0x35eb, 0x92c0, 0x3128, 0x3e28, 0xf708, 0x0, 0x1);
        gbc.writeMem(0x970, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x35eb);
        EXPECT(gbc.pc(), 0x972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00F4
        gbc.setState(0xd9c3, 0x5a2, 0xbfe0, 0xfa91, 0x8ceb, 0xa72e, 0x0, 0x1);
        gbc.writeMem(0xd9c3, { 0xd6, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5a2);
        EXPECT(gbc.pc(), 0xd9c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c3), 0xd6);
        EXPECT(gbc.readMem(0xd9c4), 0x3);
        // D6 00F5
        gbc.setState(0x48f1, 0xa24b, 0xa1a0, 0xcb14, 0xbe4e, 0x5a3b, 0x0, 0x1);
        gbc.writeMem(0x48f1, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa24b);
        EXPECT(gbc.pc(), 0x48f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00F6
        gbc.setState(0xcbd0, 0x81e6, 0xa050, 0x8999, 0xd3e6, 0xa9b6, 0x0, 0x0);
        gbc.writeMem(0xcbd0, { 0xd6, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x81e6);
        EXPECT(gbc.pc(), 0xcbd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd0), 0xd6);
        EXPECT(gbc.readMem(0xcbd1), 0x1);
        // D6 00F8
        gbc.setState(0x9e87, 0xbba1, 0xf8c0, 0x7650, 0x4a47, 0x6c78, 0x0, 0x1);
        gbc.writeMem(0x9e87, { 0xd6, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbba1);
        EXPECT(gbc.pc(), 0x9e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e87), 0xd6);
        EXPECT(gbc.readMem(0x9e88), 0xe4);
        // D6 00F9
        gbc.setState(0x382b, 0xbd30, 0x4e60, 0x3a83, 0x2b3e, 0x513e, 0x0, 0x0);
        gbc.writeMem(0x382b, { 0xd6, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xbd30);
        EXPECT(gbc.pc(), 0x382d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 00FA
        gbc.setState(0x8b20, 0x99cf, 0x4560, 0xa82a, 0x712d, 0xeffe, 0x0, 0x1);
        gbc.writeMem(0x8b20, { 0xd6, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x99cf);
        EXPECT(gbc.pc(), 0x8b22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b20), 0xd6);
        EXPECT(gbc.readMem(0x8b21), 0x7f);
        // D6 00FB
        gbc.setState(0x2ad7, 0x4eb, 0xc350, 0x34a4, 0x6047, 0x7a2, 0x0, 0x1);
        gbc.writeMem(0x2ad7, { 0xd6, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x4eb);
        EXPECT(gbc.pc(), 0x2ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 00FC
        gbc.setState(0xc1a, 0x60e7, 0x22e0, 0x990d, 0x1583, 0xc121, 0x0, 0x0);
        gbc.writeMem(0xc1a, { 0xd6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x60e7);
        EXPECT(gbc.pc(), 0xc1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 00FD
        gbc.setState(0xdda0, 0x4968, 0x78d0, 0x5471, 0xa157, 0xdf4e, 0x0, 0x1);
        gbc.writeMem(0xdda0, { 0xd6, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4968);
        EXPECT(gbc.pc(), 0xdda2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda0), 0xd6);
        EXPECT(gbc.readMem(0xdda1), 0xa2);
        // D6 00FE
        gbc.setState(0x5bf0, 0x94b2, 0xc8d0, 0x87c4, 0x779c, 0xd200, 0x1, 0x0);
        gbc.writeMem(0x5bf0, { 0xd6, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x94b2);
        EXPECT(gbc.pc(), 0x5bf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 00FF
        gbc.setState(0xc33d, 0xceb8, 0x4640, 0x4c18, 0x28f4, 0xdfa9, 0x0, 0x1);
        gbc.writeMem(0xc33d, { 0xd6, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xceb8);
        EXPECT(gbc.pc(), 0xc33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc33d), 0xd6);
        EXPECT(gbc.readMem(0xc33e), 0x72);
        // D6 0100
        gbc.setState(0x337b, 0x9e39, 0xf00, 0x9fc0, 0x6fde, 0xa65e, 0x1, 0x1);
        gbc.writeMem(0x337b, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9e39);
        EXPECT(gbc.pc(), 0x337d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0101
        gbc.setState(0xaf70, 0x9f99, 0x7e90, 0xa994, 0x218e, 0xc042, 0x1, 0x1);
        gbc.writeMem(0xaf70, { 0xd6, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9f99);
        EXPECT(gbc.pc(), 0xaf72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf70), 0xd6);
        EXPECT(gbc.readMem(0xaf71), 0x4e);
        // D6 0102
        gbc.setState(0xdaa4, 0x2626, 0x9880, 0x6d73, 0x408e, 0x6060, 0x1, 0x0);
        gbc.writeMem(0xdaa4, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2626);
        EXPECT(gbc.pc(), 0xdaa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaa4), 0xd6);
        EXPECT(gbc.readMem(0xdaa5), 0xc5);
        // D6 0103
        gbc.setState(0xa3b0, 0x561f, 0xf210, 0x7c1b, 0x2d6c, 0x310f, 0x1, 0x1);
        gbc.writeMem(0xa3b0, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x561f);
        EXPECT(gbc.pc(), 0xa3b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b0), 0xd6);
        EXPECT(gbc.readMem(0xa3b1), 0x53);
        // D6 0104
        gbc.setState(0xa34, 0x35bc, 0x7320, 0x1236, 0xe462, 0xc675, 0x0, 0x1);
        gbc.writeMem(0xa34, { 0xd6, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x35bc);
        EXPECT(gbc.pc(), 0xa36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0106
        gbc.setState(0x1ead, 0xd107, 0x6030, 0xc9ba, 0xac85, 0xa1ae, 0x1, 0x0);
        gbc.writeMem(0x1ead, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xd107);
        EXPECT(gbc.pc(), 0x1eaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0107
        gbc.setState(0x1872, 0x5462, 0x6e10, 0xe93, 0x6e45, 0x8244, 0x0, 0x0);
        gbc.writeMem(0x1872, { 0xd6, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5462);
        EXPECT(gbc.pc(), 0x1874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0108
        gbc.setState(0x8fa1, 0x5258, 0xced0, 0x30cc, 0xbd3d, 0x4744, 0x1, 0x0);
        gbc.writeMem(0x8fa1, { 0xd6, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5258);
        EXPECT(gbc.pc(), 0x8fa3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa1), 0xd6);
        EXPECT(gbc.readMem(0x8fa2), 0x4d);
        // D6 0109
        gbc.setState(0x2b60, 0xcd07, 0x8790, 0x2bb8, 0x1f6d, 0x1467, 0x0, 0x1);
        gbc.writeMem(0x2b60, { 0xd6, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xcd07);
        EXPECT(gbc.pc(), 0x2b62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 010A
        gbc.setState(0x6848, 0x610e, 0xae10, 0xc392, 0xe05f, 0x62af, 0x1, 0x1);
        gbc.writeMem(0x6848, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x610e);
        EXPECT(gbc.pc(), 0x684a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 010B
        gbc.setState(0xde6, 0x7b5a, 0xa130, 0x3abf, 0x7b50, 0xc957, 0x1, 0x1);
        gbc.writeMem(0xde6, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7b5a);
        EXPECT(gbc.pc(), 0xde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 010C
        gbc.setState(0x1a5a, 0x5b82, 0x150, 0x5a91, 0xd1b1, 0x6f66, 0x0, 0x1);
        gbc.writeMem(0x1a5a, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5b82);
        EXPECT(gbc.pc(), 0x1a5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 010D
        gbc.setState(0x16e, 0x2760, 0xfa90, 0xab3b, 0x9cdc, 0xf150, 0x0, 0x0);
        gbc.writeMem(0x16e, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2760);
        EXPECT(gbc.pc(), 0x170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 010E
        gbc.setState(0xcfa8, 0xde2b, 0xe210, 0xc024, 0x17ad, 0x9e4d, 0x1, 0x0);
        gbc.writeMem(0xcfa8, { 0xd6, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xde2b);
        EXPECT(gbc.pc(), 0xcfaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa8), 0xd6);
        EXPECT(gbc.readMem(0xcfa9), 0x7e);
        // D6 010F
        gbc.setState(0x16e, 0x9dbf, 0x6010, 0xee7, 0x147e, 0xb82f, 0x0, 0x0);
        gbc.writeMem(0x16e, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9dbf);
        EXPECT(gbc.pc(), 0x170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0110
        gbc.setState(0xa837, 0xb2af, 0x22c0, 0x16fb, 0x475b, 0x50f4, 0x0, 0x1);
        gbc.writeMem(0xa837, { 0xd6, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb2af);
        EXPECT(gbc.pc(), 0xa839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa837), 0xd6);
        EXPECT(gbc.readMem(0xa838), 0xcd);
        // D6 0111
        gbc.setState(0x3d2e, 0xd705, 0x7b70, 0x15d, 0xf64f, 0xd91f, 0x1, 0x0);
        gbc.writeMem(0x3d2e, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd705);
        EXPECT(gbc.pc(), 0x3d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0112
        gbc.setState(0x429d, 0x82b7, 0x11e0, 0x85b6, 0x27ed, 0x6030, 0x0, 0x0);
        gbc.writeMem(0x429d, { 0xd6, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x82b7);
        EXPECT(gbc.pc(), 0x429f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0113
        gbc.setState(0x2014, 0x273b, 0x8610, 0x83c2, 0x72b3, 0x8e5, 0x1, 0x1);
        gbc.writeMem(0x2014, { 0xd6, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x273b);
        EXPECT(gbc.pc(), 0x2016);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0115
        gbc.setState(0x6a97, 0x4652, 0x3270, 0xaf93, 0x2803, 0xc573, 0x1, 0x1);
        gbc.writeMem(0x6a97, { 0xd6, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4652);
        EXPECT(gbc.pc(), 0x6a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0116
        gbc.setState(0x3fd8, 0xb52f, 0x84a0, 0x9f93, 0x26c4, 0x1bb8, 0x0, 0x1);
        gbc.writeMem(0x3fd8, { 0xd6, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb52f);
        EXPECT(gbc.pc(), 0x3fda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0117
        gbc.setState(0xb293, 0x74cf, 0x7d0, 0x7f70, 0x9f18, 0x2a9d, 0x0, 0x1);
        gbc.writeMem(0xb293, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x74cf);
        EXPECT(gbc.pc(), 0xb295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb293), 0xd6);
        EXPECT(gbc.readMem(0xb294), 0x93);
        // D6 0118
        gbc.setState(0x8dee, 0x9e48, 0xb780, 0xc171, 0x30f1, 0x97a3, 0x0, 0x1);
        gbc.writeMem(0x8dee, { 0xd6, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9e48);
        EXPECT(gbc.pc(), 0x8df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dee), 0xd6);
        EXPECT(gbc.readMem(0x8def), 0xf9);
        // D6 0119
        gbc.setState(0xcb07, 0x8c40, 0x7680, 0xaa7e, 0xd2ab, 0x79fa, 0x1, 0x0);
        gbc.writeMem(0xcb07, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8c40);
        EXPECT(gbc.pc(), 0xcb09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb07), 0xd6);
        EXPECT(gbc.readMem(0xcb08), 0xe7);
        // D6 011A
        gbc.setState(0xe33b, 0x3708, 0x2490, 0x2eb, 0x157, 0xcc9a, 0x1, 0x1);
        gbc.writeMem(0xe33b, { 0xd6, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3708);
        EXPECT(gbc.pc(), 0xe33d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe33b), 0xd6);
        EXPECT(gbc.readMem(0xe33c), 0x21);
        // D6 011B
        gbc.setState(0x5df7, 0xd9f2, 0x38d0, 0xade0, 0x7773, 0xedd1, 0x0, 0x0);
        gbc.writeMem(0x5df7, { 0xd6, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd9f2);
        EXPECT(gbc.pc(), 0x5df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 011C
        gbc.setState(0x6cad, 0xd29e, 0x8d80, 0x100f, 0x4a80, 0xb73f, 0x1, 0x1);
        gbc.writeMem(0x6cad, { 0xd6, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xd29e);
        EXPECT(gbc.pc(), 0x6caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 011D
        gbc.setState(0x479b, 0xbaa9, 0xdb20, 0x40d9, 0x76ff, 0x42b6, 0x1, 0x1);
        gbc.writeMem(0x479b, { 0xd6, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xbaa9);
        EXPECT(gbc.pc(), 0x479d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 011E
        gbc.setState(0x8b28, 0x175d, 0xb2c0, 0x4182, 0xc361, 0xe3c, 0x0, 0x0);
        gbc.writeMem(0x8b28, { 0xd6, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x175d);
        EXPECT(gbc.pc(), 0x8b2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b28), 0xd6);
        EXPECT(gbc.readMem(0x8b29), 0xc8);
        // D6 011F
        gbc.setState(0x7add, 0x1caa, 0x3700, 0x5e9e, 0x1a31, 0x3307, 0x0, 0x0);
        gbc.writeMem(0x7add, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1caa);
        EXPECT(gbc.pc(), 0x7adf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0120
        gbc.setState(0xdce4, 0x8f4d, 0x5c20, 0xf5c8, 0xa673, 0xfdc7, 0x1, 0x1);
        gbc.writeMem(0xdce4, { 0xd6, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x8f4d);
        EXPECT(gbc.pc(), 0xdce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce4), 0xd6);
        EXPECT(gbc.readMem(0xdce5), 0x38);
        // D6 0121
        gbc.setState(0x57c1, 0x9066, 0xc0e0, 0xb706, 0x3b2c, 0x68e6, 0x1, 0x0);
        gbc.writeMem(0x57c1, { 0xd6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9066);
        EXPECT(gbc.pc(), 0x57c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0122
        gbc.setState(0x9e81, 0xb70, 0xdd90, 0x4184, 0x15e5, 0xcbf6, 0x0, 0x1);
        gbc.writeMem(0x9e81, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb70);
        EXPECT(gbc.pc(), 0x9e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e81), 0xd6);
        EXPECT(gbc.readMem(0x9e82), 0xb5);
        // D6 0123
        gbc.setState(0x1e64, 0x445e, 0xa310, 0xeae3, 0xf741, 0x75d8, 0x1, 0x1);
        gbc.writeMem(0x1e64, { 0xd6, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x445e);
        EXPECT(gbc.pc(), 0x1e66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0124
        gbc.setState(0xa7d, 0xc80d, 0x4a50, 0xbc38, 0x6d18, 0x7a95, 0x0, 0x1);
        gbc.writeMem(0xa7d, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc80d);
        EXPECT(gbc.pc(), 0xa7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0125
        gbc.setState(0x7a54, 0x1f8c, 0x4240, 0xe97b, 0xccdf, 0x6bdd, 0x1, 0x0);
        gbc.writeMem(0x7a54, { 0xd6, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1f8c);
        EXPECT(gbc.pc(), 0x7a56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0126
        gbc.setState(0xde25, 0xe96e, 0x63e0, 0x15db, 0x4ed5, 0xd515, 0x1, 0x1);
        gbc.writeMem(0xde25, { 0xd6, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xe96e);
        EXPECT(gbc.pc(), 0xde27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde25), 0xd6);
        EXPECT(gbc.readMem(0xde26), 0xc6);
        // D6 0127
        gbc.setState(0xabba, 0x8748, 0xddc0, 0xb440, 0x88dd, 0xe454, 0x1, 0x1);
        gbc.writeMem(0xabba, { 0xd6, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8748);
        EXPECT(gbc.pc(), 0xabbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabba), 0xd6);
        EXPECT(gbc.readMem(0xabbb), 0x90);
        // D6 0128
        gbc.setState(0x3a79, 0x705a, 0xcc50, 0x3fe6, 0xf649, 0xd3c3, 0x0, 0x0);
        gbc.writeMem(0x3a79, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x705a);
        EXPECT(gbc.pc(), 0x3a7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0129
        gbc.setState(0x150f, 0x8d1, 0x8920, 0x80, 0x5491, 0x2492, 0x0, 0x0);
        gbc.writeMem(0x150f, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8d1);
        EXPECT(gbc.pc(), 0x1511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 012A
        gbc.setState(0x7587, 0xb755, 0xd5a0, 0x5f1, 0xf406, 0xcf86, 0x0, 0x0);
        gbc.writeMem(0x7587, { 0xd6, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb755);
        EXPECT(gbc.pc(), 0x7589);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 012B
        gbc.setState(0x7f7f, 0x8be, 0xf430, 0xdc82, 0x9e62, 0x5b33, 0x0, 0x0);
        gbc.writeMem(0x7f7f, { 0xd6, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8be);
        EXPECT(gbc.pc(), 0x7f81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 012C
        gbc.setState(0xe17b, 0x1830, 0x63a0, 0x4424, 0x3f7, 0x878e, 0x1, 0x0);
        gbc.writeMem(0xe17b, { 0xd6, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1830);
        EXPECT(gbc.pc(), 0xe17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe17b), 0xd6);
        EXPECT(gbc.readMem(0xe17c), 0x65);
        // D6 012D
        gbc.setState(0xd2ef, 0xf1e5, 0xe150, 0x6f31, 0xac85, 0xe526, 0x0, 0x0);
        gbc.writeMem(0xd2ef, { 0xd6, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf1e5);
        EXPECT(gbc.pc(), 0xd2f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ef), 0xd6);
        EXPECT(gbc.readMem(0xd2f0), 0xc9);
        // D6 012E
        gbc.setState(0x7fec, 0x9b50, 0xc340, 0x6c91, 0x4738, 0x5ce, 0x1, 0x1);
        gbc.writeMem(0x7fec, { 0xd6, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9b50);
        EXPECT(gbc.pc(), 0x7fee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 012F
        gbc.setState(0x54b3, 0x97f8, 0x6dd0, 0x8ed6, 0xad0e, 0x6137, 0x1, 0x0);
        gbc.writeMem(0x54b3, { 0xd6, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x97f8);
        EXPECT(gbc.pc(), 0x54b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0130
        gbc.setState(0x8438, 0x642f, 0x2870, 0x32f4, 0x9746, 0x31eb, 0x0, 0x1);
        gbc.writeMem(0x8438, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x642f);
        EXPECT(gbc.pc(), 0x843a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8438), 0xd6);
        EXPECT(gbc.readMem(0x8439), 0x42);
        // D6 0131
        gbc.setState(0xaed8, 0xabce, 0xe060, 0x8cc, 0x54fa, 0xa6d9, 0x0, 0x1);
        gbc.writeMem(0xaed8, { 0xd6, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xabce);
        EXPECT(gbc.pc(), 0xaeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed8), 0xd6);
        EXPECT(gbc.readMem(0xaed9), 0x4e);
        // D6 0132
        gbc.setState(0x3ea9, 0xa597, 0xa650, 0x7302, 0x5920, 0xe5ce, 0x1, 0x1);
        gbc.writeMem(0x3ea9, { 0xd6, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa597);
        EXPECT(gbc.pc(), 0x3eab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0133
        gbc.setState(0x885b, 0x9f4a, 0x6990, 0x73b6, 0x8702, 0xd992, 0x1, 0x0);
        gbc.writeMem(0x885b, { 0xd6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9f4a);
        EXPECT(gbc.pc(), 0x885d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885b), 0xd6);
        EXPECT(gbc.readMem(0x885c), 0x6);
        // D6 0134
        gbc.setState(0x215d, 0x7bfd, 0x9010, 0xfd7e, 0x1887, 0x7ef5, 0x0, 0x0);
        gbc.writeMem(0x215d, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7bfd);
        EXPECT(gbc.pc(), 0x215f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0136
        gbc.setState(0x442f, 0x8491, 0xdc00, 0x74cc, 0x4faa, 0x1894, 0x1, 0x0);
        gbc.writeMem(0x442f, { 0xd6, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8491);
        EXPECT(gbc.pc(), 0x4431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0137
        gbc.setState(0x2334, 0xf86a, 0xb520, 0xd168, 0x89b5, 0x3103, 0x1, 0x0);
        gbc.writeMem(0x2334, { 0xd6, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xf86a);
        EXPECT(gbc.pc(), 0x2336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0138
        gbc.setState(0x85b8, 0xf468, 0xa8d0, 0xf79c, 0x29e0, 0x601a, 0x0, 0x1);
        gbc.writeMem(0x85b8, { 0xd6, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf468);
        EXPECT(gbc.pc(), 0x85ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b8), 0xd6);
        EXPECT(gbc.readMem(0x85b9), 0xba);
        // D6 0139
        gbc.setState(0xc664, 0xc63, 0xa780, 0x9987, 0xc331, 0xa886, 0x0, 0x1);
        gbc.writeMem(0xc664, { 0xd6, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc63);
        EXPECT(gbc.pc(), 0xc666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc664), 0xd6);
        EXPECT(gbc.readMem(0xc665), 0x7b);
        // D6 013B
        gbc.setState(0x8eea, 0xc81a, 0xfe40, 0xee13, 0x79ea, 0xd574, 0x0, 0x0);
        gbc.writeMem(0x8eea, { 0xd6, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc81a);
        EXPECT(gbc.pc(), 0x8eec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eea), 0xd6);
        EXPECT(gbc.readMem(0x8eeb), 0x60);
        // D6 013C
        gbc.setState(0x715e, 0x4a42, 0x2920, 0x847e, 0xc316, 0xcd38, 0x1, 0x1);
        gbc.writeMem(0x715e, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x4a42);
        EXPECT(gbc.pc(), 0x7160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 013D
        gbc.setState(0xdafd, 0x846a, 0x5580, 0xc537, 0xf524, 0x482d, 0x1, 0x0);
        gbc.writeMem(0xdafd, { 0xd6, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x846a);
        EXPECT(gbc.pc(), 0xdaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdafd), 0xd6);
        EXPECT(gbc.readMem(0xdafe), 0xf8);
        // D6 013E
        gbc.setState(0xa65f, 0x98d1, 0xb40, 0xd35f, 0xfa7b, 0x9bb2, 0x0, 0x0);
        gbc.writeMem(0xa65f, { 0xd6, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x98d1);
        EXPECT(gbc.pc(), 0xa661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa65f), 0xd6);
        EXPECT(gbc.readMem(0xa660), 0x4d);
        // D6 013F
        gbc.setState(0xdbcb, 0xf468, 0x2e0, 0x4267, 0xf4a2, 0x7635, 0x0, 0x0);
        gbc.writeMem(0xdbcb, { 0xd6, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf468);
        EXPECT(gbc.pc(), 0xdbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbcb), 0xd6);
        EXPECT(gbc.readMem(0xdbcc), 0x22);
        // D6 0140
        gbc.setState(0xc287, 0x8f12, 0xc170, 0xf702, 0x5a28, 0xad8b, 0x0, 0x0);
        gbc.writeMem(0xc287, { 0xd6, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8f12);
        EXPECT(gbc.pc(), 0xc289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc287), 0xd6);
        EXPECT(gbc.readMem(0xc288), 0x50);
        // D6 0141
        gbc.setState(0x7fe7, 0x3e43, 0x94f0, 0x66c1, 0xf2be, 0x753f, 0x0, 0x1);
        gbc.writeMem(0x7fe7, { 0xd6, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3e43);
        EXPECT(gbc.pc(), 0x7fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0142
        gbc.setState(0xefe8, 0xd31e, 0xeb80, 0x7c5f, 0x9bd9, 0xa0af, 0x1, 0x0);
        gbc.writeMem(0xefe8, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd31e);
        EXPECT(gbc.pc(), 0xefea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe8), 0xd6);
        EXPECT(gbc.readMem(0xefe9), 0xce);
        // D6 0143
        gbc.setState(0x5559, 0x12cd, 0x6380, 0xb41e, 0x63f, 0x177d, 0x0, 0x1);
        gbc.writeMem(0x5559, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x12cd);
        EXPECT(gbc.pc(), 0x555b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0144
        gbc.setState(0xc874, 0x37a0, 0xf340, 0x9933, 0xa9c, 0x7bb8, 0x1, 0x1);
        gbc.writeMem(0xc874, { 0xd6, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x37a0);
        EXPECT(gbc.pc(), 0xc876);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc874), 0xd6);
        EXPECT(gbc.readMem(0xc875), 0x73);
        // D6 0145
        gbc.setState(0x580c, 0xe80, 0xad10, 0x1ef8, 0x7d2c, 0x1069, 0x1, 0x0);
        gbc.writeMem(0x580c, { 0xd6, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe80);
        EXPECT(gbc.pc(), 0x580e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0146
        gbc.setState(0x4d9b, 0x7b84, 0x8300, 0x44b5, 0xb594, 0x8aa3, 0x0, 0x1);
        gbc.writeMem(0x4d9b, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7b84);
        EXPECT(gbc.pc(), 0x4d9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0147
        gbc.setState(0x4716, 0xa8ed, 0xf730, 0x58c7, 0xd347, 0x9a14, 0x0, 0x1);
        gbc.writeMem(0x4716, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa8ed);
        EXPECT(gbc.pc(), 0x4718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0148
        gbc.setState(0xe192, 0xf7e5, 0xbcc0, 0x51a4, 0x6e38, 0x207d, 0x0, 0x1);
        gbc.writeMem(0xe192, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf7e5);
        EXPECT(gbc.pc(), 0xe194);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe192), 0xd6);
        EXPECT(gbc.readMem(0xe193), 0x48);
        // D6 0149
        gbc.setState(0x1af8, 0x405d, 0x1040, 0xb388, 0xdd99, 0x2ab, 0x0, 0x0);
        gbc.writeMem(0x1af8, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x405d);
        EXPECT(gbc.pc(), 0x1afa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 014A
        gbc.setState(0x309e, 0x5bbb, 0x5040, 0x5e9a, 0xa288, 0xc9d8, 0x0, 0x0);
        gbc.writeMem(0x309e, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5bbb);
        EXPECT(gbc.pc(), 0x30a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 014B
        gbc.setState(0x5fdd, 0xb846, 0x4ac0, 0x60c9, 0x7040, 0x9da6, 0x1, 0x1);
        gbc.writeMem(0x5fdd, { 0xd6, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb846);
        EXPECT(gbc.pc(), 0x5fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 014C
        gbc.setState(0x12fb, 0x41a9, 0xe5d0, 0xda78, 0x11a, 0x991e, 0x1, 0x1);
        gbc.writeMem(0x12fb, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x41a9);
        EXPECT(gbc.pc(), 0x12fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 014D
        gbc.setState(0x2905, 0xb422, 0xc8d0, 0xb74b, 0x1aa5, 0xbedf, 0x1, 0x0);
        gbc.writeMem(0x2905, { 0xd6, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb422);
        EXPECT(gbc.pc(), 0x2907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 014E
        gbc.setState(0x57c8, 0x4d10, 0x36d0, 0x4fc0, 0x2a4d, 0xec3, 0x1, 0x1);
        gbc.writeMem(0x57c8, { 0xd6, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4d10);
        EXPECT(gbc.pc(), 0x57ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 014F
        gbc.setState(0xc29f, 0x6901, 0x4ca0, 0x2197, 0xf6d0, 0x33c8, 0x0, 0x1);
        gbc.writeMem(0xc29f, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6901);
        EXPECT(gbc.pc(), 0xc2a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc29f), 0xd6);
        EXPECT(gbc.readMem(0xc2a0), 0xbc);
        // D6 0150
        gbc.setState(0xd1da, 0x2508, 0xd1e0, 0x841, 0xad14, 0xbe5d, 0x0, 0x0);
        gbc.writeMem(0xd1da, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0xd1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1da), 0xd6);
        EXPECT(gbc.readMem(0xd1db), 0xaf);
        // D6 0151
        gbc.setState(0x119d, 0x1c54, 0xf00, 0xa259, 0x4dc, 0x5295, 0x1, 0x0);
        gbc.writeMem(0x119d, { 0xd6, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1c54);
        EXPECT(gbc.pc(), 0x119f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0152
        gbc.setState(0x364e, 0x4745, 0x1180, 0x723a, 0x189c, 0x453c, 0x1, 0x1);
        gbc.writeMem(0x364e, { 0xd6, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4745);
        EXPECT(gbc.pc(), 0x3650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0153
        gbc.setState(0x6d59, 0xb0bf, 0xd140, 0xd509, 0xb416, 0xf3b2, 0x0, 0x1);
        gbc.writeMem(0x6d59, { 0xd6, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb0bf);
        EXPECT(gbc.pc(), 0x6d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0154
        gbc.setState(0xd4fb, 0x1a5c, 0xd6d0, 0xbf5c, 0xdc49, 0x6f62, 0x0, 0x0);
        gbc.writeMem(0xd4fb, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1a5c);
        EXPECT(gbc.pc(), 0xd4fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4fb), 0xd6);
        EXPECT(gbc.readMem(0xd4fc), 0x47);
        // D6 0155
        gbc.setState(0xe7d5, 0x4f68, 0x7c0, 0x334e, 0xf7b9, 0xa816, 0x1, 0x1);
        gbc.writeMem(0xe7d5, { 0xd6, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4f68);
        EXPECT(gbc.pc(), 0xe7d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7d5), 0xd6);
        EXPECT(gbc.readMem(0xe7d6), 0x61);
        // D6 0156
        gbc.setState(0xcd42, 0xa523, 0x3510, 0xbba2, 0x8b00, 0xf7e8, 0x1, 0x0);
        gbc.writeMem(0xcd42, { 0xd6, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa523);
        EXPECT(gbc.pc(), 0xcd44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd42), 0xd6);
        EXPECT(gbc.readMem(0xcd43), 0x15);
        // D6 0157
        gbc.setState(0xba4e, 0xf1f5, 0x7190, 0xb0b2, 0xad6b, 0x4e0b, 0x1, 0x0);
        gbc.writeMem(0xba4e, { 0xd6, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf1f5);
        EXPECT(gbc.pc(), 0xba50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba4e), 0xd6);
        EXPECT(gbc.readMem(0xba4f), 0x1);
        // D6 0158
        gbc.setState(0xbcd0, 0x5969, 0x5210, 0xe4e9, 0xefce, 0x1eb2, 0x0, 0x1);
        gbc.writeMem(0xbcd0, { 0xd6, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5969);
        EXPECT(gbc.pc(), 0xbcd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd0), 0xd6);
        EXPECT(gbc.readMem(0xbcd1), 0x19);
        // D6 0159
        gbc.setState(0xe58b, 0xc237, 0xbb10, 0x975d, 0x779, 0x5b0d, 0x0, 0x0);
        gbc.writeMem(0xe58b, { 0xd6, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc237);
        EXPECT(gbc.pc(), 0xe58d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe58b), 0xd6);
        EXPECT(gbc.readMem(0xe58c), 0x3c);
        // D6 015A
        gbc.setState(0xb139, 0xdf91, 0xd610, 0x30ec, 0xcbeb, 0x8e8b, 0x1, 0x1);
        gbc.writeMem(0xb139, { 0xd6, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xdf91);
        EXPECT(gbc.pc(), 0xb13b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb139), 0xd6);
        EXPECT(gbc.readMem(0xb13a), 0x96);
        // D6 015B
        gbc.setState(0xb544, 0x27f6, 0x520, 0x370c, 0x866b, 0xf511, 0x0, 0x0);
        gbc.writeMem(0xb544, { 0xd6, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x27f6);
        EXPECT(gbc.pc(), 0xb546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb544), 0xd6);
        EXPECT(gbc.readMem(0xb545), 0x28);
        // D6 015C
        gbc.setState(0x2580, 0x84cf, 0xcc70, 0xf0f9, 0x612d, 0xd456, 0x1, 0x1);
        gbc.writeMem(0x2580, { 0xd6, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x84cf);
        EXPECT(gbc.pc(), 0x2582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 015D
        gbc.setState(0x3864, 0x2a66, 0x2ed0, 0x14a4, 0x8105, 0x1c02, 0x0, 0x0);
        gbc.writeMem(0x3864, { 0xd6, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2a66);
        EXPECT(gbc.pc(), 0x3866);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 015E
        gbc.setState(0x7e4f, 0x212b, 0xf970, 0x6dc6, 0x1521, 0xcf38, 0x1, 0x0);
        gbc.writeMem(0x7e4f, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x212b);
        EXPECT(gbc.pc(), 0x7e51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 015F
        gbc.setState(0x8638, 0xbc16, 0x1210, 0xf931, 0x11f2, 0x2606, 0x1, 0x0);
        gbc.writeMem(0x8638, { 0xd6, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0x863a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8638), 0xd6);
        EXPECT(gbc.readMem(0x8639), 0x87);
        // D6 0160
        gbc.setState(0x74fe, 0xc652, 0xa240, 0x3542, 0x59e0, 0xaffd, 0x0, 0x1);
        gbc.writeMem(0x74fe, { 0xd6, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc652);
        EXPECT(gbc.pc(), 0x7500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0161
        gbc.setState(0x4953, 0xea4c, 0x10, 0x9d6, 0x341b, 0xd4bb, 0x1, 0x0);
        gbc.writeMem(0x4953, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xea4c);
        EXPECT(gbc.pc(), 0x4955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0163
        gbc.setState(0xe519, 0x6bcc, 0x2840, 0xf4bc, 0x821e, 0x8369, 0x0, 0x0);
        gbc.writeMem(0xe519, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6bcc);
        EXPECT(gbc.pc(), 0xe51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe519), 0xd6);
        EXPECT(gbc.readMem(0xe51a), 0x10);
        // D6 0164
        gbc.setState(0x486d, 0xf544, 0x1b30, 0xed5, 0x882d, 0xf91d, 0x1, 0x1);
        gbc.writeMem(0x486d, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf544);
        EXPECT(gbc.pc(), 0x486f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0165
        gbc.setState(0x7059, 0xb688, 0xa40, 0x26a2, 0x1d63, 0xc07d, 0x1, 0x0);
        gbc.writeMem(0x7059, { 0xd6, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb688);
        EXPECT(gbc.pc(), 0x705b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0166
        gbc.setState(0xb41, 0x1d4, 0x3a40, 0x44de, 0x606b, 0xfa2b, 0x1, 0x1);
        gbc.writeMem(0xb41, { 0xd6, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1d4);
        EXPECT(gbc.pc(), 0xb43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0167
        gbc.setState(0x5b7f, 0xcda1, 0x5a0, 0x4552, 0xd20e, 0x11ce, 0x1, 0x0);
        gbc.writeMem(0x5b7f, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcda1);
        EXPECT(gbc.pc(), 0x5b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0168
        gbc.setState(0x1cc7, 0xfb56, 0x4930, 0x7cdc, 0x4630, 0xde6c, 0x1, 0x1);
        gbc.writeMem(0x1cc7, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfb56);
        EXPECT(gbc.pc(), 0x1cc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0169
        gbc.setState(0x73b5, 0x4343, 0x85a0, 0xc893, 0x3455, 0xc56a, 0x1, 0x0);
        gbc.writeMem(0x73b5, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4343);
        EXPECT(gbc.pc(), 0x73b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 016A
        gbc.setState(0xe533, 0xc35e, 0xa890, 0x6f0, 0x3c22, 0x9e25, 0x1, 0x1);
        gbc.writeMem(0xe533, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc35e);
        EXPECT(gbc.pc(), 0xe535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe533), 0xd6);
        EXPECT(gbc.readMem(0xe534), 0xf3);
        // D6 016B
        gbc.setState(0xb672, 0x88f4, 0xc930, 0x7f26, 0xf065, 0x407e, 0x1, 0x1);
        gbc.writeMem(0xb672, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x88f4);
        EXPECT(gbc.pc(), 0xb674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb672), 0xd6);
        EXPECT(gbc.readMem(0xb673), 0xf3);
        // D6 016C
        gbc.setState(0xb838, 0xa47f, 0x7870, 0x7b34, 0x1ab5, 0x1c4d, 0x1, 0x0);
        gbc.writeMem(0xb838, { 0xd6, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa47f);
        EXPECT(gbc.pc(), 0xb83a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb838), 0xd6);
        EXPECT(gbc.readMem(0xb839), 0x83);
        // D6 016D
        gbc.setState(0x59b2, 0xc2d5, 0x2350, 0x8ef5, 0xf6e4, 0xe47, 0x0, 0x0);
        gbc.writeMem(0x59b2, { 0xd6, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc2d5);
        EXPECT(gbc.pc(), 0x59b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 016F
        gbc.setState(0x4c75, 0x419d, 0xd5a0, 0x8477, 0xfb03, 0x7bc7, 0x0, 0x0);
        gbc.writeMem(0x4c75, { 0xd6, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x419d);
        EXPECT(gbc.pc(), 0x4c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0170
        gbc.setState(0x568e, 0x1dd7, 0xb90, 0xc7a1, 0xb717, 0xfe8e, 0x0, 0x1);
        gbc.writeMem(0x568e, { 0xd6, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1dd7);
        EXPECT(gbc.pc(), 0x5690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0171
        gbc.setState(0x3820, 0xff07, 0x3050, 0xe446, 0xc5ee, 0xfab5, 0x1, 0x0);
        gbc.writeMem(0x3820, { 0xd6, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xff07);
        EXPECT(gbc.pc(), 0x3822);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0172
        gbc.setState(0x4b7b, 0x2d38, 0x5840, 0xf0d3, 0x74bb, 0xd1f9, 0x0, 0x1);
        gbc.writeMem(0x4b7b, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x2d38);
        EXPECT(gbc.pc(), 0x4b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0173
        gbc.setState(0x2e7c, 0x99c7, 0xaff0, 0xed6b, 0x5180, 0x8731, 0x0, 0x0);
        gbc.writeMem(0x2e7c, { 0xd6, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x99c7);
        EXPECT(gbc.pc(), 0x2e7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0174
        gbc.setState(0x276a, 0x8991, 0xa10, 0x242c, 0x8ce3, 0x7cba, 0x0, 0x0);
        gbc.writeMem(0x276a, { 0xd6, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8991);
        EXPECT(gbc.pc(), 0x276c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0176
        gbc.setState(0x9343, 0xea2e, 0xc9c0, 0xc721, 0xc551, 0xf7fc, 0x1, 0x0);
        gbc.writeMem(0x9343, { 0xd6, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xea2e);
        EXPECT(gbc.pc(), 0x9345);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9343), 0xd6);
        EXPECT(gbc.readMem(0x9344), 0x9);
        // D6 0177
        gbc.setState(0xdff0, 0xeb78, 0xa1e0, 0x3639, 0xd51b, 0x420c, 0x0, 0x1);
        gbc.writeMem(0xdff0, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xeb78);
        EXPECT(gbc.pc(), 0xdff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdff0), 0xd6);
        EXPECT(gbc.readMem(0xdff1), 0xd9);
        // D6 0178
        gbc.setState(0x40b1, 0x12bc, 0x51c0, 0x1b57, 0x2550, 0x6df3, 0x1, 0x0);
        gbc.writeMem(0x40b1, { 0xd6, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x12bc);
        EXPECT(gbc.pc(), 0x40b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0179
        gbc.setState(0x560d, 0x302a, 0x4030, 0x2a75, 0xbc6c, 0x1e1a, 0x1, 0x1);
        gbc.writeMem(0x560d, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x302a);
        EXPECT(gbc.pc(), 0x560f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 017A
        gbc.setState(0xaec3, 0x424c, 0x24f0, 0x87ab, 0x328a, 0x23fc, 0x0, 0x1);
        gbc.writeMem(0xaec3, { 0xd6, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x424c);
        EXPECT(gbc.pc(), 0xaec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaec3), 0xd6);
        EXPECT(gbc.readMem(0xaec4), 0xe5);
        // D6 017B
        gbc.setState(0x95de, 0x93ff, 0xd0b0, 0x7250, 0xab36, 0x71ce, 0x1, 0x0);
        gbc.writeMem(0x95de, { 0xd6, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x93ff);
        EXPECT(gbc.pc(), 0x95e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95de), 0xd6);
        EXPECT(gbc.readMem(0x95df), 0x30);
        // D6 017C
        gbc.setState(0x573e, 0x263c, 0x6e20, 0x1f5, 0x5017, 0xd314, 0x1, 0x1);
        gbc.writeMem(0x573e, { 0xd6, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x263c);
        EXPECT(gbc.pc(), 0x5740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 017D
        gbc.setState(0x8c44, 0x6e7d, 0xd4b0, 0x2f7c, 0xae83, 0xfce8, 0x1, 0x0);
        gbc.writeMem(0x8c44, { 0xd6, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x8c46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c44), 0xd6);
        EXPECT(gbc.readMem(0x8c45), 0x72);
        // D6 017E
        gbc.setState(0xef4c, 0xcbd6, 0xa3f0, 0x473d, 0x7480, 0x9dee, 0x0, 0x0);
        gbc.writeMem(0xef4c, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xcbd6);
        EXPECT(gbc.pc(), 0xef4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef4c), 0xd6);
        EXPECT(gbc.readMem(0xef4d), 0xce);
        // D6 017F
        gbc.setState(0x41ff, 0x8b90, 0xca50, 0x237b, 0x7fde, 0x1f7e, 0x0, 0x0);
        gbc.writeMem(0x41ff, { 0xd6, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8b90);
        EXPECT(gbc.pc(), 0x4201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0180
        gbc.setState(0x993e, 0x3565, 0x1770, 0xac0e, 0xb541, 0x37c4, 0x1, 0x1);
        gbc.writeMem(0x993e, { 0xd6, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3565);
        EXPECT(gbc.pc(), 0x9940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993e), 0xd6);
        EXPECT(gbc.readMem(0x993f), 0xba);
        // D6 0181
        gbc.setState(0x6db1, 0xbcb9, 0xd460, 0xf9e, 0x2c01, 0x5e6, 0x0, 0x1);
        gbc.writeMem(0x6db1, { 0xd6, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xbcb9);
        EXPECT(gbc.pc(), 0x6db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0182
        gbc.setState(0x754a, 0x9d5b, 0xabe0, 0x9207, 0xac52, 0xb377, 0x1, 0x1);
        gbc.writeMem(0x754a, { 0xd6, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9d5b);
        EXPECT(gbc.pc(), 0x754c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0183
        gbc.setState(0x8d63, 0xbe46, 0x4460, 0x97c4, 0x9fef, 0x9498, 0x0, 0x1);
        gbc.writeMem(0x8d63, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xbe46);
        EXPECT(gbc.pc(), 0x8d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d63), 0xd6);
        EXPECT(gbc.readMem(0x8d64), 0x3e);
        // D6 0184
        gbc.setState(0x1d19, 0x5447, 0x7960, 0x1dea, 0x1ad3, 0xbfad, 0x1, 0x0);
        gbc.writeMem(0x1d19, { 0xd6, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5447);
        EXPECT(gbc.pc(), 0x1d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0185
        gbc.setState(0xcfaa, 0xa170, 0x6a90, 0xbc24, 0x6420, 0x8f37, 0x0, 0x1);
        gbc.writeMem(0xcfaa, { 0xd6, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa170);
        EXPECT(gbc.pc(), 0xcfac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfaa), 0xd6);
        EXPECT(gbc.readMem(0xcfab), 0x23);
        // D6 0186
        gbc.setState(0x5cc7, 0x2c07, 0x2760, 0x5a69, 0x5b0d, 0xd3a9, 0x0, 0x0);
        gbc.writeMem(0x5cc7, { 0xd6, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2c07);
        EXPECT(gbc.pc(), 0x5cc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0187
        gbc.setState(0x15ec, 0xd22c, 0x3e60, 0x3e97, 0x1fdc, 0xbd93, 0x1, 0x1);
        gbc.writeMem(0x15ec, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd22c);
        EXPECT(gbc.pc(), 0x15ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0188
        gbc.setState(0x1ea3, 0xd36e, 0x6f90, 0x6d6c, 0xddec, 0x5a6c, 0x1, 0x0);
        gbc.writeMem(0x1ea3, { 0xd6, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd36e);
        EXPECT(gbc.pc(), 0x1ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0189
        gbc.setState(0xefbf, 0x6d24, 0xc490, 0x10fe, 0x3b1a, 0xc64f, 0x0, 0x0);
        gbc.writeMem(0xefbf, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6d24);
        EXPECT(gbc.pc(), 0xefc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefbf), 0xd6);
        EXPECT(gbc.readMem(0xefc0), 0xfb);
        // D6 018A
        gbc.setState(0x284f, 0x3031, 0xe970, 0x9c5b, 0x98cd, 0xc20b, 0x0, 0x0);
        gbc.writeMem(0x284f, { 0xd6, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3031);
        EXPECT(gbc.pc(), 0x2851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 018B
        gbc.setState(0x6857, 0x99c9, 0xba60, 0xa0a6, 0x924, 0xfddc, 0x0, 0x0);
        gbc.writeMem(0x6857, { 0xd6, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x99c9);
        EXPECT(gbc.pc(), 0x6859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 018C
        gbc.setState(0xe8bf, 0x1be4, 0x92b0, 0x15fa, 0xc0f1, 0xf833, 0x1, 0x1);
        gbc.writeMem(0xe8bf, { 0xd6, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1be4);
        EXPECT(gbc.pc(), 0xe8c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8bf), 0xd6);
        EXPECT(gbc.readMem(0xe8c0), 0xea);
        // D6 018F
        gbc.setState(0x61cb, 0xc27e, 0xdd90, 0x1999, 0x9451, 0x1140, 0x1, 0x1);
        gbc.writeMem(0x61cb, { 0xd6, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc27e);
        EXPECT(gbc.pc(), 0x61cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0190
        gbc.setState(0x1ce7, 0x3132, 0xbfb0, 0x73e0, 0x7d8f, 0x2ac0, 0x1, 0x1);
        gbc.writeMem(0x1ce7, { 0xd6, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3132);
        EXPECT(gbc.pc(), 0x1ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0191
        gbc.setState(0xb2eb, 0x16d3, 0x35a0, 0x503, 0xd63e, 0xb7cc, 0x0, 0x1);
        gbc.writeMem(0xb2eb, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x16d3);
        EXPECT(gbc.pc(), 0xb2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2eb), 0xd6);
        EXPECT(gbc.readMem(0xb2ec), 0xe2);
        // D6 0192
        gbc.setState(0xc302, 0x1bc7, 0xfaf0, 0x1fa6, 0x3aa5, 0x4207, 0x1, 0x0);
        gbc.writeMem(0xc302, { 0xd6, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1bc7);
        EXPECT(gbc.pc(), 0xc304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc302), 0xd6);
        EXPECT(gbc.readMem(0xc303), 0x31);
        // D6 0193
        gbc.setState(0x2637, 0x3322, 0x6350, 0x4ea5, 0x6288, 0x9c53, 0x0, 0x0);
        gbc.writeMem(0x2637, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3322);
        EXPECT(gbc.pc(), 0x2639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0194
        gbc.setState(0x4dc5, 0xef9a, 0xb530, 0xefd6, 0x20c0, 0x2544, 0x0, 0x1);
        gbc.writeMem(0x4dc5, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xef9a);
        EXPECT(gbc.pc(), 0x4dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0195
        gbc.setState(0x9fba, 0xf595, 0xf2f0, 0xe1da, 0xf5a0, 0x1cb6, 0x1, 0x0);
        gbc.writeMem(0x9fba, { 0xd6, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf595);
        EXPECT(gbc.pc(), 0x9fbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fba), 0xd6);
        EXPECT(gbc.readMem(0x9fbb), 0x9c);
        // D6 0196
        gbc.setState(0xeef1, 0xb6ce, 0x6cf0, 0x95b2, 0xa946, 0x8524, 0x0, 0x0);
        gbc.writeMem(0xeef1, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb6ce);
        EXPECT(gbc.pc(), 0xeef3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef1), 0xd6);
        EXPECT(gbc.readMem(0xeef2), 0x93);
        // D6 0197
        gbc.setState(0x895a, 0xb202, 0x2d50, 0xaf25, 0x216c, 0xce65, 0x1, 0x1);
        gbc.writeMem(0x895a, { 0xd6, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb202);
        EXPECT(gbc.pc(), 0x895c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x895a), 0xd6);
        EXPECT(gbc.readMem(0x895b), 0x2);
        // D6 0198
        gbc.setState(0x102d, 0xf6bc, 0x69c0, 0x752d, 0xacb3, 0xb4c3, 0x0, 0x1);
        gbc.writeMem(0x102d, { 0xd6, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf6bc);
        EXPECT(gbc.pc(), 0x102f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0199
        gbc.setState(0x9653, 0x8182, 0xa4e0, 0x4572, 0x444a, 0xaa94, 0x0, 0x0);
        gbc.writeMem(0x9653, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8182);
        EXPECT(gbc.pc(), 0x9655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9653), 0xd6);
        EXPECT(gbc.readMem(0x9654), 0x10);
        // D6 019A
        gbc.setState(0xdd2b, 0xf992, 0x6440, 0x9180, 0x84, 0xd412, 0x1, 0x1);
        gbc.writeMem(0xdd2b, { 0xd6, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf992);
        EXPECT(gbc.pc(), 0xdd2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd2b), 0xd6);
        EXPECT(gbc.readMem(0xdd2c), 0xda);
        // D6 019C
        gbc.setState(0x726a, 0x5ab3, 0x1880, 0x788, 0x9028, 0xb7fc, 0x0, 0x0);
        gbc.writeMem(0x726a, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5ab3);
        EXPECT(gbc.pc(), 0x726c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 019D
        gbc.setState(0x66ec, 0x447d, 0x2d80, 0xaf6c, 0xfd2f, 0xde3f, 0x1, 0x0);
        gbc.writeMem(0x66ec, { 0xd6, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x447d);
        EXPECT(gbc.pc(), 0x66ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 019E
        gbc.setState(0x8781, 0x7d9b, 0x3410, 0xe14e, 0x56f0, 0x86e, 0x1, 0x0);
        gbc.writeMem(0x8781, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7d9b);
        EXPECT(gbc.pc(), 0x8783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8781), 0xd6);
        EXPECT(gbc.readMem(0x8782), 0xa4);
        // D6 019F
        gbc.setState(0xd6f3, 0x27e3, 0x3c10, 0x1ab3, 0x5fe9, 0x2140, 0x1, 0x1);
        gbc.writeMem(0xd6f3, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x27e3);
        EXPECT(gbc.pc(), 0xd6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6f3), 0xd6);
        EXPECT(gbc.readMem(0xd6f4), 0xe2);
        // D6 01A0
        gbc.setState(0x5725, 0xc19b, 0xdc60, 0xbe45, 0x3332, 0x14d1, 0x1, 0x0);
        gbc.writeMem(0x5725, { 0xd6, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc19b);
        EXPECT(gbc.pc(), 0x5727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01A1
        gbc.setState(0x87d7, 0x20c2, 0x8f30, 0x9f5e, 0x3eff, 0x36d8, 0x0, 0x1);
        gbc.writeMem(0x87d7, { 0xd6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x20c2);
        EXPECT(gbc.pc(), 0x87d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87d7), 0xd6);
        EXPECT(gbc.readMem(0x87d8), 0x3a);
        // D6 01A2
        gbc.setState(0xbb80, 0x2045, 0x7cf0, 0xc0aa, 0xf0be, 0x811b, 0x0, 0x1);
        gbc.writeMem(0xbb80, { 0xd6, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2045);
        EXPECT(gbc.pc(), 0xbb82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb80), 0xd6);
        EXPECT(gbc.readMem(0xbb81), 0x3c);
        // D6 01A3
        gbc.setState(0x671a, 0xda8b, 0x93c0, 0x2066, 0x3b63, 0xdba8, 0x0, 0x1);
        gbc.writeMem(0x671a, { 0xd6, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xda8b);
        EXPECT(gbc.pc(), 0x671c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01A4
        gbc.setState(0x8775, 0x9cb8, 0x8de0, 0xde66, 0xa0bc, 0xc353, 0x1, 0x0);
        gbc.writeMem(0x8775, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9cb8);
        EXPECT(gbc.pc(), 0x8777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8775), 0xd6);
        EXPECT(gbc.readMem(0x8776), 0x99);
        // D6 01A5
        gbc.setState(0xd8c2, 0xa65f, 0x2980, 0x1dc4, 0x2747, 0xfb25, 0x1, 0x1);
        gbc.writeMem(0xd8c2, { 0xd6, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xa65f);
        EXPECT(gbc.pc(), 0xd8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c2), 0xd6);
        EXPECT(gbc.readMem(0xd8c3), 0xf8);
        // D6 01A6
        gbc.setState(0x44b, 0x78d1, 0x5570, 0x8469, 0x7332, 0xa4da, 0x1, 0x0);
        gbc.writeMem(0x44b, { 0xd6, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x78d1);
        EXPECT(gbc.pc(), 0x44d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01A7
        gbc.setState(0x157, 0x6b1d, 0x3000, 0x34f2, 0x7acd, 0x6df0, 0x0, 0x0);
        gbc.writeMem(0x157, { 0xd6, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6b1d);
        EXPECT(gbc.pc(), 0x159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01A8
        gbc.setState(0xbb2b, 0xc8ef, 0x1d20, 0x9d45, 0xf9aa, 0x3243, 0x1, 0x1);
        gbc.writeMem(0xbb2b, { 0xd6, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc8ef);
        EXPECT(gbc.pc(), 0xbb2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb2b), 0xd6);
        EXPECT(gbc.readMem(0xbb2c), 0xcd);
        // D6 01A9
        gbc.setState(0xcb2c, 0x3b69, 0xd310, 0x899, 0xaa0a, 0x32bb, 0x0, 0x1);
        gbc.writeMem(0xcb2c, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3b69);
        EXPECT(gbc.pc(), 0xcb2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2c), 0xd6);
        EXPECT(gbc.readMem(0xcb2d), 0x1b);
        // D6 01AA
        gbc.setState(0xc089, 0x648, 0xda00, 0x660a, 0x3b54, 0xb9f4, 0x1, 0x1);
        gbc.writeMem(0xc089, { 0xd6, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x648);
        EXPECT(gbc.pc(), 0xc08b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc089), 0xd6);
        EXPECT(gbc.readMem(0xc08a), 0x11);
        // D6 01AB
        gbc.setState(0x4631, 0xb1c2, 0x3a10, 0x8ef8, 0x792e, 0xa958, 0x0, 0x0);
        gbc.writeMem(0x4631, { 0xd6, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb1c2);
        EXPECT(gbc.pc(), 0x4633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01AC
        gbc.setState(0x469c, 0xa5ea, 0xd270, 0xc84d, 0x52cb, 0x389e, 0x1, 0x0);
        gbc.writeMem(0x469c, { 0xd6, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa5ea);
        EXPECT(gbc.pc(), 0x469e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01AD
        gbc.setState(0xa2b8, 0x6ce0, 0x56c0, 0x3bcc, 0x5a5b, 0x612e, 0x1, 0x0);
        gbc.writeMem(0xa2b8, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6ce0);
        EXPECT(gbc.pc(), 0xa2ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2b8), 0xd6);
        EXPECT(gbc.readMem(0xa2b9), 0xb5);
        // D6 01AE
        gbc.setState(0xc596, 0x9103, 0xa880, 0x66ed, 0xa9d4, 0x553c, 0x0, 0x1);
        gbc.writeMem(0xc596, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9103);
        EXPECT(gbc.pc(), 0xc598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc596), 0xd6);
        EXPECT(gbc.readMem(0xc597), 0x47);
        // D6 01AF
        gbc.setState(0xd1fd, 0x918b, 0x8790, 0xcdc7, 0xb2f4, 0x515a, 0x0, 0x1);
        gbc.writeMem(0xd1fd, { 0xd6, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x918b);
        EXPECT(gbc.pc(), 0xd1ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1fd), 0xd6);
        EXPECT(gbc.readMem(0xd1fe), 0xf);
        // D6 01B0
        gbc.setState(0x1d15, 0xed5d, 0x41e0, 0x1fa4, 0x93ed, 0xcaa1, 0x0, 0x0);
        gbc.writeMem(0x1d15, { 0xd6, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xed5d);
        EXPECT(gbc.pc(), 0x1d17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01B1
        gbc.setState(0x4b1, 0xbba8, 0x2e70, 0xe1f0, 0x844e, 0x3ffc, 0x0, 0x0);
        gbc.writeMem(0x4b1, { 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xbba8);
        EXPECT(gbc.pc(), 0x4b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01B2
        gbc.setState(0x6e13, 0x6a27, 0x2100, 0x7f33, 0xe272, 0xe280, 0x0, 0x0);
        gbc.writeMem(0x6e13, { 0xd6, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6a27);
        EXPECT(gbc.pc(), 0x6e15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01B3
        gbc.setState(0xe0ac, 0xc842, 0x3690, 0xdc0b, 0x1a3c, 0xd5cd, 0x0, 0x1);
        gbc.writeMem(0xe0ac, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc842);
        EXPECT(gbc.pc(), 0xe0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ac), 0xd6);
        EXPECT(gbc.readMem(0xe0ad), 0x4c);
        // D6 01B4
        gbc.setState(0x85e8, 0xaf7a, 0x6c70, 0x6103, 0x8c21, 0xcebc, 0x1, 0x0);
        gbc.writeMem(0x85e8, { 0xd6, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xaf7a);
        EXPECT(gbc.pc(), 0x85ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85e8), 0xd6);
        EXPECT(gbc.readMem(0x85e9), 0x6e);
        // D6 01B5
        gbc.setState(0x2966, 0x1d74, 0xc480, 0x71b, 0xe68a, 0x7c06, 0x0, 0x1);
        gbc.writeMem(0x2966, { 0xd6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1d74);
        EXPECT(gbc.pc(), 0x2968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01B6
        gbc.setState(0x98c4, 0xe0f6, 0x2eb0, 0xe90a, 0x42b1, 0xfddc, 0x1, 0x0);
        gbc.writeMem(0x98c4, { 0xd6, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe0f6);
        EXPECT(gbc.pc(), 0x98c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c4), 0xd6);
        EXPECT(gbc.readMem(0x98c5), 0x4b);
        // D6 01B7
        gbc.setState(0xe4f3, 0xfbac, 0x3a20, 0xdca4, 0x26d4, 0x70a6, 0x1, 0x0);
        gbc.writeMem(0xe4f3, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xfbac);
        EXPECT(gbc.pc(), 0xe4f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f3), 0xd6);
        EXPECT(gbc.readMem(0xe4f4), 0x1f);
        // D6 01B8
        gbc.setState(0xe57a, 0x93f7, 0xf300, 0xb3bc, 0xfbea, 0x148f, 0x1, 0x1);
        gbc.writeMem(0xe57a, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x93f7);
        EXPECT(gbc.pc(), 0xe57c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57a), 0xd6);
        EXPECT(gbc.readMem(0xe57b), 0x99);
        // D6 01B9
        gbc.setState(0x315b, 0x2a8b, 0x83b0, 0xf55c, 0xee77, 0xd4ae, 0x1, 0x0);
        gbc.writeMem(0x315b, { 0xd6, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2a8b);
        EXPECT(gbc.pc(), 0x315d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01BA
        gbc.setState(0xe7b3, 0xb20, 0xd690, 0xc012, 0xe76f, 0x8e39, 0x1, 0x0);
        gbc.writeMem(0xe7b3, { 0xd6, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb20);
        EXPECT(gbc.pc(), 0xe7b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b3), 0xd6);
        EXPECT(gbc.readMem(0xe7b4), 0x26);
        // D6 01BB
        gbc.setState(0xbd14, 0xb559, 0xc540, 0xfc01, 0xcde, 0xfe3f, 0x1, 0x0);
        gbc.writeMem(0xbd14, { 0xd6, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb559);
        EXPECT(gbc.pc(), 0xbd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd14), 0xd6);
        EXPECT(gbc.readMem(0xbd15), 0x37);
        // D6 01BC
        gbc.setState(0x46e1, 0x5886, 0x3a80, 0x4991, 0x6b3e, 0xabe9, 0x1, 0x1);
        gbc.writeMem(0x46e1, { 0xd6, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5886);
        EXPECT(gbc.pc(), 0x46e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01BD
        gbc.setState(0x12f, 0x7add, 0x1970, 0x1742, 0xead2, 0xa725, 0x1, 0x1);
        gbc.writeMem(0x12f, { 0xd6, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7add);
        EXPECT(gbc.pc(), 0x131);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01BE
        gbc.setState(0xa799, 0x9434, 0x76a0, 0x8e0, 0xc9b4, 0x11ad, 0x1, 0x0);
        gbc.writeMem(0xa799, { 0xd6, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9434);
        EXPECT(gbc.pc(), 0xa79b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa799), 0xd6);
        EXPECT(gbc.readMem(0xa79a), 0xab);
        // D6 01BF
        gbc.setState(0x1304, 0x9878, 0xfe10, 0x24f8, 0x8e76, 0x78d2, 0x0, 0x1);
        gbc.writeMem(0x1304, { 0xd6, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9878);
        EXPECT(gbc.pc(), 0x1306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01C0
        gbc.setState(0x631a, 0xed4, 0x9d70, 0xcafd, 0xb486, 0x78c, 0x0, 0x1);
        gbc.writeMem(0x631a, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xed4);
        EXPECT(gbc.pc(), 0x631c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01C1
        gbc.setState(0x49f3, 0x9c40, 0xfce0, 0xa4f9, 0xa6bd, 0xe902, 0x1, 0x0);
        gbc.writeMem(0x49f3, { 0xd6, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9c40);
        EXPECT(gbc.pc(), 0x49f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01C3
        gbc.setState(0x7b6e, 0x8443, 0xd40, 0xa5d9, 0x9d53, 0xf081, 0x1, 0x0);
        gbc.writeMem(0x7b6e, { 0xd6, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8443);
        EXPECT(gbc.pc(), 0x7b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01C4
        gbc.setState(0xa343, 0x8d81, 0xba50, 0x9ded, 0xeeeb, 0x18b3, 0x0, 0x0);
        gbc.writeMem(0xa343, { 0xd6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x8d81);
        EXPECT(gbc.pc(), 0xa345);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa343), 0xd6);
        EXPECT(gbc.readMem(0xa344), 0x25);
        // D6 01C5
        gbc.setState(0x3688, 0xeb6e, 0x5630, 0xdb0b, 0xde1e, 0x6813, 0x0, 0x0);
        gbc.writeMem(0x3688, { 0xd6, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xeb6e);
        EXPECT(gbc.pc(), 0x368a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01C6
        gbc.setState(0x5a73, 0xa344, 0x2160, 0xb685, 0x65f, 0x445b, 0x1, 0x0);
        gbc.writeMem(0x5a73, { 0xd6, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa344);
        EXPECT(gbc.pc(), 0x5a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01C9
        gbc.setState(0xc0fd, 0x2486, 0xa650, 0xc7f8, 0x5b86, 0x4784, 0x0, 0x1);
        gbc.writeMem(0xc0fd, { 0xd6, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2486);
        EXPECT(gbc.pc(), 0xc0ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0fd), 0xd6);
        EXPECT(gbc.readMem(0xc0fe), 0xbc);
        // D6 01CA
        gbc.setState(0x5379, 0x36e0, 0x9dc0, 0xbb4f, 0x4e83, 0xa089, 0x0, 0x1);
        gbc.writeMem(0x5379, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x36e0);
        EXPECT(gbc.pc(), 0x537b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01CB
        gbc.setState(0x5e1f, 0xb9d9, 0x7b0, 0x7b50, 0xc7c, 0x1d8f, 0x1, 0x0);
        gbc.writeMem(0x5e1f, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb9d9);
        EXPECT(gbc.pc(), 0x5e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01CC
        gbc.setState(0x3235, 0x28fb, 0x34a0, 0xc359, 0x6a1f, 0xb16, 0x0, 0x0);
        gbc.writeMem(0x3235, { 0xd6, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x28fb);
        EXPECT(gbc.pc(), 0x3237);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01CD
        gbc.setState(0xd8c7, 0x6491, 0x40, 0x56cf, 0xaf52, 0x355, 0x1, 0x0);
        gbc.writeMem(0xd8c7, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6491);
        EXPECT(gbc.pc(), 0xd8c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c7), 0xd6);
        EXPECT(gbc.readMem(0xd8c8), 0xd5);
        // D6 01CE
        gbc.setState(0x2374, 0x1a9e, 0xf9e0, 0xbb97, 0xc974, 0xf229, 0x1, 0x1);
        gbc.writeMem(0x2374, { 0xd6, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1a9e);
        EXPECT(gbc.pc(), 0x2376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01CF
        gbc.setState(0xd88c, 0x5257, 0x6b30, 0xfdba, 0xa00b, 0xc3c5, 0x1, 0x0);
        gbc.writeMem(0xd88c, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5257);
        EXPECT(gbc.pc(), 0xd88e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88c), 0xd6);
        EXPECT(gbc.readMem(0xd88d), 0x10);
        // D6 01D0
        gbc.setState(0xd7f7, 0xd619, 0x82f0, 0x3775, 0x3677, 0xd9ad, 0x1, 0x1);
        gbc.writeMem(0xd7f7, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd619);
        EXPECT(gbc.pc(), 0xd7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f7), 0xd6);
        EXPECT(gbc.readMem(0xd7f8), 0x42);
        // D6 01D1
        gbc.setState(0xe315, 0x655b, 0x1a30, 0xec1e, 0x8efd, 0xf08e, 0x1, 0x0);
        gbc.writeMem(0xe315, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x655b);
        EXPECT(gbc.pc(), 0xe317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe315), 0xd6);
        EXPECT(gbc.readMem(0xe316), 0x2f);
        // D6 01D2
        gbc.setState(0xaaa7, 0x29e2, 0x5760, 0x1ceb, 0xc0df, 0x1d96, 0x0, 0x1);
        gbc.writeMem(0xaaa7, { 0xd6, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x29e2);
        EXPECT(gbc.pc(), 0xaaa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaa7), 0xd6);
        EXPECT(gbc.readMem(0xaaa8), 0xe9);
        // D6 01D4
        gbc.setState(0x2f03, 0xcbf9, 0x1e00, 0x6a68, 0x9fa7, 0x62de, 0x0, 0x0);
        gbc.writeMem(0x2f03, { 0xd6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcbf9);
        EXPECT(gbc.pc(), 0x2f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01D5
        gbc.setState(0xb655, 0xd4a9, 0xc490, 0x981b, 0x416a, 0x46d4, 0x0, 0x1);
        gbc.writeMem(0xb655, { 0xd6, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xd4a9);
        EXPECT(gbc.pc(), 0xb657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb655), 0xd6);
        EXPECT(gbc.readMem(0xb656), 0x7c);
        // D6 01D6
        gbc.setState(0x6017, 0x9323, 0x1d50, 0x2ef5, 0xeedc, 0x4ed7, 0x0, 0x1);
        gbc.writeMem(0x6017, { 0xd6, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x9323);
        EXPECT(gbc.pc(), 0x6019);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01D7
        gbc.setState(0xba41, 0xb309, 0x4f00, 0x4aa6, 0x918, 0x3bef, 0x0, 0x0);
        gbc.writeMem(0xba41, { 0xd6, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb309);
        EXPECT(gbc.pc(), 0xba43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba41), 0xd6);
        EXPECT(gbc.readMem(0xba42), 0x28);
        // D6 01D8
        gbc.setState(0x411f, 0xc0e, 0x8d30, 0x6871, 0x4519, 0xda00, 0x0, 0x0);
        gbc.writeMem(0x411f, { 0xd6, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc0e);
        EXPECT(gbc.pc(), 0x4121);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01D9
        gbc.setState(0x95fe, 0xaf96, 0x39f0, 0xfb50, 0xf94f, 0xcdb6, 0x1, 0x0);
        gbc.writeMem(0x95fe, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xaf96);
        EXPECT(gbc.pc(), 0x9600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95fe), 0xd6);
        EXPECT(gbc.readMem(0x95ff), 0x91);
        // D6 01DA
        gbc.setState(0x3636, 0xd8d9, 0x2760, 0x5a28, 0xc499, 0xa22, 0x0, 0x0);
        gbc.writeMem(0x3636, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd8d9);
        EXPECT(gbc.pc(), 0x3638);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01DB
        gbc.setState(0x9c13, 0x22b3, 0x1cf0, 0xe022, 0x9bd4, 0xa14a, 0x1, 0x1);
        gbc.writeMem(0x9c13, { 0xd6, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x22b3);
        EXPECT(gbc.pc(), 0x9c15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c13), 0xd6);
        EXPECT(gbc.readMem(0x9c14), 0x5b);
        // D6 01DC
        gbc.setState(0x370a, 0x606a, 0xbad0, 0x7eb, 0xabd1, 0x7e94, 0x0, 0x1);
        gbc.writeMem(0x370a, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x606a);
        EXPECT(gbc.pc(), 0x370c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01DD
        gbc.setState(0x4062, 0xedcb, 0xd30, 0xd4f2, 0xdc9f, 0x55f7, 0x0, 0x1);
        gbc.writeMem(0x4062, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xedcb);
        EXPECT(gbc.pc(), 0x4064);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01DE
        gbc.setState(0x201a, 0xd8dd, 0xfd50, 0x5f3a, 0xb161, 0xbc27, 0x1, 0x1);
        gbc.writeMem(0x201a, { 0xd6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd8dd);
        EXPECT(gbc.pc(), 0x201c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01DF
        gbc.setState(0xba93, 0xac62, 0xc210, 0x34d2, 0xd294, 0x81d8, 0x0, 0x1);
        gbc.writeMem(0xba93, { 0xd6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xac62);
        EXPECT(gbc.pc(), 0xba95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba93), 0xd6);
        EXPECT(gbc.readMem(0xba94), 0x3a);
        // D6 01E0
        gbc.setState(0xdf5, 0xde0f, 0xeab0, 0x4db4, 0x104d, 0xf2f, 0x0, 0x1);
        gbc.writeMem(0xdf5, { 0xd6, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xde0f);
        EXPECT(gbc.pc(), 0xdf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01E1
        gbc.setState(0xa8b, 0xcdbb, 0xe100, 0x1a10, 0xb6ad, 0x48e2, 0x0, 0x0);
        gbc.writeMem(0xa8b, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcdbb);
        EXPECT(gbc.pc(), 0xa8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01E2
        gbc.setState(0x3a60, 0xf2e3, 0xf6f0, 0x749e, 0xe1b4, 0xbf5e, 0x1, 0x0);
        gbc.writeMem(0x3a60, { 0xd6, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf2e3);
        EXPECT(gbc.pc(), 0x3a62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01E3
        gbc.setState(0x3512, 0x87b, 0x5b00, 0x4469, 0x5adb, 0xddb1, 0x0, 0x1);
        gbc.writeMem(0x3512, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x87b);
        EXPECT(gbc.pc(), 0x3514);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01E4
        gbc.setState(0xbe5e, 0xa9f0, 0x2710, 0x979f, 0xad57, 0x4bb1, 0x1, 0x0);
        gbc.writeMem(0xbe5e, { 0xd6, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa9f0);
        EXPECT(gbc.pc(), 0xbe60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe5e), 0xd6);
        EXPECT(gbc.readMem(0xbe5f), 0xe1);
        // D6 01E6
        gbc.setState(0xbb93, 0x17d9, 0xb960, 0xcff0, 0xb1e7, 0x3dd8, 0x1, 0x1);
        gbc.writeMem(0xbb93, { 0xd6, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x17d9);
        EXPECT(gbc.pc(), 0xbb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb93), 0xd6);
        EXPECT(gbc.readMem(0xbb94), 0x83);
        // D6 01E7
        gbc.setState(0xa27f, 0xc053, 0x61b0, 0xc461, 0x1a2e, 0xb554, 0x0, 0x1);
        gbc.writeMem(0xa27f, { 0xd6, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc053);
        EXPECT(gbc.pc(), 0xa281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa27f), 0xd6);
        EXPECT(gbc.readMem(0xa280), 0xca);
        // D6 01E8
        gbc.setState(0xd3a5, 0x33f8, 0x240, 0x2e4e, 0x359f, 0xe71a, 0x0, 0x0);
        gbc.writeMem(0xd3a5, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x33f8);
        EXPECT(gbc.pc(), 0xd3a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3a5), 0xd6);
        EXPECT(gbc.readMem(0xd3a6), 0xf7);
        // D6 01E9
        gbc.setState(0x5f49, 0xe9c6, 0xbae0, 0xfe55, 0x7668, 0x1db9, 0x1, 0x0);
        gbc.writeMem(0x5f49, { 0xd6, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe9c6);
        EXPECT(gbc.pc(), 0x5f4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 01EA
        gbc.setState(0xac26, 0x4629, 0x18b0, 0xdb6b, 0xaf58, 0xca3b, 0x0, 0x0);
        gbc.writeMem(0xac26, { 0xd6, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4629);
        EXPECT(gbc.pc(), 0xac28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac26), 0xd6);
        EXPECT(gbc.readMem(0xac27), 0x97);
        // D6 01EB
        gbc.setState(0xc92e, 0x3fd7, 0x2060, 0x9cec, 0xc0c, 0x718a, 0x0, 0x1);
        gbc.writeMem(0xc92e, { 0xd6, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3fd7);
        EXPECT(gbc.pc(), 0xc930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92e), 0xd6);
        EXPECT(gbc.readMem(0xc92f), 0x76);
        // D6 01ED
        gbc.setState(0x3f48, 0xdcbe, 0xfb10, 0xd34d, 0xdc31, 0x8eb2, 0x1, 0x1);
        gbc.writeMem(0x3f48, { 0xd6, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdcbe);
        EXPECT(gbc.pc(), 0x3f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01EE
        gbc.setState(0x8c90, 0x95df, 0xb640, 0xfe5b, 0xd81f, 0x4af3, 0x0, 0x1);
        gbc.writeMem(0x8c90, { 0xd6, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x95df);
        EXPECT(gbc.pc(), 0x8c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c90), 0xd6);
        EXPECT(gbc.readMem(0x8c91), 0x1a);
        // D6 01EF
        gbc.setState(0xdb4f, 0xcea0, 0xa310, 0x149f, 0xd057, 0xf63b, 0x0, 0x1);
        gbc.writeMem(0xdb4f, { 0xd6, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xcea0);
        EXPECT(gbc.pc(), 0xdb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb4f), 0xd6);
        EXPECT(gbc.readMem(0xdb50), 0xbe);
        // D6 01F0
        gbc.setState(0xaf50, 0x481d, 0x3b80, 0x1bdf, 0x5510, 0xa018, 0x1, 0x0);
        gbc.writeMem(0xaf50, { 0xd6, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x481d);
        EXPECT(gbc.pc(), 0xaf52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf50), 0xd6);
        EXPECT(gbc.readMem(0xaf51), 0xff);
        // D6 01F1
        gbc.setState(0x5527, 0xb25, 0xace0, 0xf11a, 0xb6ab, 0xc93e, 0x0, 0x0);
        gbc.writeMem(0x5527, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb25);
        EXPECT(gbc.pc(), 0x5529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01F2
        gbc.setState(0x4d4c, 0xd7fc, 0x47b0, 0x5c78, 0xc5b, 0x77ad, 0x1, 0x0);
        gbc.writeMem(0x4d4c, { 0xd6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd7fc);
        EXPECT(gbc.pc(), 0x4d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01F3
        gbc.setState(0xe384, 0x9786, 0x8bc0, 0x3e61, 0xb686, 0xbf94, 0x1, 0x1);
        gbc.writeMem(0xe384, { 0xd6, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x9786);
        EXPECT(gbc.pc(), 0xe386);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe384), 0xd6);
        EXPECT(gbc.readMem(0xe385), 0xa6);
        // D6 01F4
        gbc.setState(0xc0cd, 0xe8f4, 0x9880, 0xe57d, 0x2e6a, 0x36bf, 0x0, 0x0);
        gbc.writeMem(0xc0cd, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe8f4);
        EXPECT(gbc.pc(), 0xc0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0cd), 0xd6);
        EXPECT(gbc.readMem(0xc0ce), 0x52);
        // D6 01F5
        gbc.setState(0xe11c, 0x2457, 0xd1e0, 0x1a4c, 0x4989, 0x3eb2, 0x0, 0x1);
        gbc.writeMem(0xe11c, { 0xd6, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x2457);
        EXPECT(gbc.pc(), 0xe11e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe11c), 0xd6);
        EXPECT(gbc.readMem(0xe11d), 0xea);
        // D6 01F6
        gbc.setState(0x9ac, 0xc8b8, 0xdce0, 0xa157, 0x75a9, 0x9849, 0x1, 0x0);
        gbc.writeMem(0x9ac, { 0xd6, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc8b8);
        EXPECT(gbc.pc(), 0x9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01F8
        gbc.setState(0x2e9d, 0xfb1b, 0x3070, 0x638e, 0x2116, 0x1f06, 0x0, 0x0);
        gbc.writeMem(0x2e9d, { 0xd6, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xfb1b);
        EXPECT(gbc.pc(), 0x2e9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01F9
        gbc.setState(0xd85b, 0xcc0b, 0xf540, 0x15bc, 0x17a8, 0x2c97, 0x0, 0x0);
        gbc.writeMem(0xd85b, { 0xd6, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcc0b);
        EXPECT(gbc.pc(), 0xd85d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85b), 0xd6);
        EXPECT(gbc.readMem(0xd85c), 0x65);
        // D6 01FA
        gbc.setState(0x522, 0x9529, 0xc830, 0x54d4, 0x410b, 0xc938, 0x0, 0x1);
        gbc.writeMem(0x522, { 0xd6, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9529);
        EXPECT(gbc.pc(), 0x524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 01FB
        gbc.setState(0x9261, 0x9db3, 0x94e0, 0x659b, 0xfa80, 0x315d, 0x1, 0x1);
        gbc.writeMem(0x9261, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x9db3);
        EXPECT(gbc.pc(), 0x9263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9261), 0xd6);
        EXPECT(gbc.readMem(0x9262), 0x59);
        // D6 01FC
        gbc.setState(0x540a, 0x77bd, 0xe00, 0x3e4e, 0x597f, 0x786e, 0x1, 0x1);
        gbc.writeMem(0x540a, { 0xd6, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x77bd);
        EXPECT(gbc.pc(), 0x540c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 01FD
        gbc.setState(0x5b52, 0x9cd5, 0xe590, 0x1bad, 0xc91d, 0xc32, 0x1, 0x0);
        gbc.writeMem(0x5b52, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9cd5);
        EXPECT(gbc.pc(), 0x5b54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 01FE
        gbc.setState(0x1a06, 0x4d18, 0x8350, 0xe3bb, 0x4f6a, 0x65a5, 0x0, 0x1);
        gbc.writeMem(0x1a06, { 0xd6, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4d18);
        EXPECT(gbc.pc(), 0x1a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0200
        gbc.setState(0x2aa6, 0x166f, 0xf9f0, 0x23d3, 0x58a2, 0x89ff, 0x1, 0x1);
        gbc.writeMem(0x2aa6, { 0xd6, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x166f);
        EXPECT(gbc.pc(), 0x2aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0201
        gbc.setState(0x6697, 0x17d5, 0x92c0, 0x61f2, 0xb1cf, 0x9fba, 0x1, 0x1);
        gbc.writeMem(0x6697, { 0xd6, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x17d5);
        EXPECT(gbc.pc(), 0x6699);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0202
        gbc.setState(0x3cd4, 0x9a95, 0x7d70, 0x6d4, 0xc506, 0xb0c6, 0x0, 0x0);
        gbc.writeMem(0x3cd4, { 0xd6, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9a95);
        EXPECT(gbc.pc(), 0x3cd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0203
        gbc.setState(0xbf42, 0x393a, 0x2460, 0x2f36, 0x5525, 0xc821, 0x1, 0x0);
        gbc.writeMem(0xbf42, { 0xd6, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x393a);
        EXPECT(gbc.pc(), 0xbf44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf42), 0xd6);
        EXPECT(gbc.readMem(0xbf43), 0x3d);
        // D6 0204
        gbc.setState(0x6d86, 0xbb28, 0x81f0, 0x40d5, 0x4ad6, 0x13b3, 0x0, 0x1);
        gbc.writeMem(0x6d86, { 0xd6, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xbb28);
        EXPECT(gbc.pc(), 0x6d88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0205
        gbc.setState(0x9872, 0xb522, 0x4b20, 0xdcca, 0xc7ba, 0x762, 0x1, 0x0);
        gbc.writeMem(0x9872, { 0xd6, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb522);
        EXPECT(gbc.pc(), 0x9874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9872), 0xd6);
        EXPECT(gbc.readMem(0x9873), 0xc4);
        // D6 0207
        gbc.setState(0x8ff7, 0x16a2, 0xd840, 0x595a, 0x3fcc, 0x7dae, 0x1, 0x1);
        gbc.writeMem(0x8ff7, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x16a2);
        EXPECT(gbc.pc(), 0x8ff9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff7), 0xd6);
        EXPECT(gbc.readMem(0x8ff8), 0x36);
        // D6 0208
        gbc.setState(0x2f25, 0x4cd2, 0x2580, 0x5a7d, 0xfd31, 0x3204, 0x1, 0x1);
        gbc.writeMem(0x2f25, { 0xd6, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4cd2);
        EXPECT(gbc.pc(), 0x2f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0209
        gbc.setState(0x24a8, 0x33c2, 0xbf70, 0x8d79, 0x7fe1, 0x6d63, 0x1, 0x1);
        gbc.writeMem(0x24a8, { 0xd6, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x33c2);
        EXPECT(gbc.pc(), 0x24aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 020B
        gbc.setState(0x63ad, 0x9dea, 0xf910, 0x984b, 0x7ac6, 0xcb21, 0x0, 0x0);
        gbc.writeMem(0x63ad, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9dea);
        EXPECT(gbc.pc(), 0x63af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 020C
        gbc.setState(0x32c8, 0x9eae, 0xf170, 0xe16f, 0xda73, 0x8b84, 0x1, 0x0);
        gbc.writeMem(0x32c8, { 0xd6, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9eae);
        EXPECT(gbc.pc(), 0x32ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 020D
        gbc.setState(0x4c9b, 0x17f, 0x1a20, 0x31c3, 0x242f, 0xad6f, 0x0, 0x0);
        gbc.writeMem(0x4c9b, { 0xd6, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x17f);
        EXPECT(gbc.pc(), 0x4c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 020E
        gbc.setState(0xc935, 0x28c9, 0x71f0, 0x92c3, 0xfcfd, 0x82f, 0x0, 0x1);
        gbc.writeMem(0xc935, { 0xd6, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x28c9);
        EXPECT(gbc.pc(), 0xc937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc935), 0xd6);
        EXPECT(gbc.readMem(0xc936), 0xd7);
        // D6 020F
        gbc.setState(0x1857, 0xa4f2, 0xefb0, 0x6987, 0xb47b, 0x547e, 0x1, 0x0);
        gbc.writeMem(0x1857, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa4f2);
        EXPECT(gbc.pc(), 0x1859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0210
        gbc.setState(0x9e6a, 0x6a8, 0x70e0, 0x94cb, 0x78fd, 0x8d6a, 0x1, 0x1);
        gbc.writeMem(0x9e6a, { 0xd6, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6a8);
        EXPECT(gbc.pc(), 0x9e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e6a), 0xd6);
        EXPECT(gbc.readMem(0x9e6b), 0xde);
        // D6 0211
        gbc.setState(0xe02a, 0xa72a, 0xf780, 0xc1e2, 0x4ce3, 0x565c, 0x1, 0x0);
        gbc.writeMem(0xe02a, { 0xd6, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xa72a);
        EXPECT(gbc.pc(), 0xe02c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02a), 0xd6);
        EXPECT(gbc.readMem(0xe02b), 0x9b);
        // D6 0212
        gbc.setState(0xb44a, 0x7aa5, 0xea10, 0xeeaa, 0xf3eb, 0xd1e2, 0x1, 0x1);
        gbc.writeMem(0xb44a, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7aa5);
        EXPECT(gbc.pc(), 0xb44c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb44a), 0xd6);
        EXPECT(gbc.readMem(0xb44b), 0x16);
        // D6 0213
        gbc.setState(0x576b, 0x438e, 0x6480, 0x7832, 0x879d, 0x34b1, 0x0, 0x1);
        gbc.writeMem(0x576b, { 0xd6, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x438e);
        EXPECT(gbc.pc(), 0x576d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0215
        gbc.setState(0x8c6a, 0x2dd4, 0x2860, 0x9eb6, 0x7e5b, 0xa5ff, 0x0, 0x1);
        gbc.writeMem(0x8c6a, { 0xd6, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2dd4);
        EXPECT(gbc.pc(), 0x8c6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c6a), 0xd6);
        EXPECT(gbc.readMem(0x8c6b), 0x57);
        // D6 0216
        gbc.setState(0xbad6, 0xfa27, 0xde40, 0xca56, 0xe979, 0x51fb, 0x0, 0x0);
        gbc.writeMem(0xbad6, { 0xd6, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfa27);
        EXPECT(gbc.pc(), 0xbad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbad6), 0xd6);
        EXPECT(gbc.readMem(0xbad7), 0x26);
        // D6 0217
        gbc.setState(0x940f, 0x2988, 0xe4b0, 0x2c61, 0xd157, 0xfa03, 0x0, 0x0);
        gbc.writeMem(0x940f, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2988);
        EXPECT(gbc.pc(), 0x9411);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940f), 0xd6);
        EXPECT(gbc.readMem(0x9410), 0xf3);
        // D6 0218
        gbc.setState(0x9dd3, 0xab6b, 0xe620, 0xc912, 0x3598, 0x75f8, 0x0, 0x0);
        gbc.writeMem(0x9dd3, { 0xd6, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xab6b);
        EXPECT(gbc.pc(), 0x9dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd3), 0xd6);
        EXPECT(gbc.readMem(0x9dd4), 0x54);
        // D6 0219
        gbc.setState(0xa39d, 0x9811, 0x2710, 0x730f, 0x1152, 0x1e35, 0x0, 0x0);
        gbc.writeMem(0xa39d, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9811);
        EXPECT(gbc.pc(), 0xa39f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa39d), 0xd6);
        EXPECT(gbc.readMem(0xa39e), 0x42);
        // D6 021A
        gbc.setState(0x1d3b, 0xdc1c, 0xe080, 0x2dfc, 0xe704, 0xcc24, 0x1, 0x0);
        gbc.writeMem(0x1d3b, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdc1c);
        EXPECT(gbc.pc(), 0x1d3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 021B
        gbc.setState(0x752, 0xa812, 0xae60, 0x194b, 0xdbec, 0x4fc4, 0x0, 0x1);
        gbc.writeMem(0x752, { 0xd6, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa812);
        EXPECT(gbc.pc(), 0x754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 021C
        gbc.setState(0x6f2f, 0x56e, 0xd1e0, 0x25b3, 0x64c3, 0xa315, 0x0, 0x1);
        gbc.writeMem(0x6f2f, { 0xd6, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x56e);
        EXPECT(gbc.pc(), 0x6f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 021E
        gbc.setState(0x590c, 0x4af9, 0xfce0, 0x65db, 0xc7cf, 0x7f82, 0x1, 0x0);
        gbc.writeMem(0x590c, { 0xd6, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4af9);
        EXPECT(gbc.pc(), 0x590e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 021F
        gbc.setState(0xcdfb, 0xd940, 0x1770, 0xa582, 0x9c5f, 0x3047, 0x0, 0x1);
        gbc.writeMem(0xcdfb, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd940);
        EXPECT(gbc.pc(), 0xcdfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdfb), 0xd6);
        EXPECT(gbc.readMem(0xcdfc), 0x2f);
        // D6 0220
        gbc.setState(0x56d3, 0xd25c, 0xe270, 0x564, 0x943, 0x6833, 0x0, 0x1);
        gbc.writeMem(0x56d3, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd25c);
        EXPECT(gbc.pc(), 0x56d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0221
        gbc.setState(0xad80, 0xdc0b, 0x3c10, 0x9066, 0x3eff, 0xc4b1, 0x0, 0x0);
        gbc.writeMem(0xad80, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xdc0b);
        EXPECT(gbc.pc(), 0xad82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad80), 0xd6);
        EXPECT(gbc.readMem(0xad81), 0x1b);
        // D6 0222
        gbc.setState(0x4302, 0x7311, 0x66d0, 0x73cb, 0x17e7, 0xa46, 0x0, 0x1);
        gbc.writeMem(0x4302, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7311);
        EXPECT(gbc.pc(), 0x4304);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0223
        gbc.setState(0xc42, 0x875, 0x8eb0, 0xd895, 0x4ae5, 0xb757, 0x0, 0x0);
        gbc.writeMem(0xc42, { 0xd6, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x875);
        EXPECT(gbc.pc(), 0xc44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0224
        gbc.setState(0x75cd, 0xdacc, 0xfc00, 0x8168, 0xd8b7, 0x79fb, 0x0, 0x1);
        gbc.writeMem(0x75cd, { 0xd6, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xdacc);
        EXPECT(gbc.pc(), 0x75cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0225
        gbc.setState(0x87c8, 0xa394, 0x1e80, 0x3bfc, 0x239d, 0x1993, 0x0, 0x1);
        gbc.writeMem(0x87c8, { 0xd6, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa394);
        EXPECT(gbc.pc(), 0x87ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c8), 0xd6);
        EXPECT(gbc.readMem(0x87c9), 0xb9);
        // D6 0226
        gbc.setState(0x3180, 0x9555, 0x9bf0, 0x560a, 0xd037, 0x5659, 0x0, 0x1);
        gbc.writeMem(0x3180, { 0xd6, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9555);
        EXPECT(gbc.pc(), 0x3182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0227
        gbc.setState(0x498c, 0xcccf, 0x4600, 0xf761, 0x26da, 0x4896, 0x1, 0x0);
        gbc.writeMem(0x498c, { 0xd6, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xcccf);
        EXPECT(gbc.pc(), 0x498e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0228
        gbc.setState(0xb22c, 0x329c, 0xf7a0, 0xb073, 0xdb5c, 0x29d3, 0x0, 0x0);
        gbc.writeMem(0xb22c, { 0xd6, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x329c);
        EXPECT(gbc.pc(), 0xb22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22c), 0xd6);
        EXPECT(gbc.readMem(0xb22d), 0xb2);
        // D6 0229
        gbc.setState(0x69a6, 0x6981, 0xee90, 0x3391, 0x476b, 0x9552, 0x1, 0x0);
        gbc.writeMem(0x69a6, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6981);
        EXPECT(gbc.pc(), 0x69a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 022A
        gbc.setState(0x6ac4, 0x1ded, 0xc330, 0x1212, 0x4776, 0xba5, 0x0, 0x0);
        gbc.writeMem(0x6ac4, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1ded);
        EXPECT(gbc.pc(), 0x6ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 022C
        gbc.setState(0x2de4, 0xb3ab, 0x2d90, 0xeefe, 0x5bb8, 0xcd31, 0x1, 0x0);
        gbc.writeMem(0x2de4, { 0xd6, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb3ab);
        EXPECT(gbc.pc(), 0x2de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 022D
        gbc.setState(0x65cc, 0x136b, 0xe670, 0x42f8, 0x544a, 0xe1c3, 0x0, 0x1);
        gbc.writeMem(0x65cc, { 0xd6, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x136b);
        EXPECT(gbc.pc(), 0x65ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 022E
        gbc.setState(0x139c, 0xe29c, 0xf9c0, 0xd7ea, 0x6d73, 0x1e01, 0x1, 0x1);
        gbc.writeMem(0x139c, { 0xd6, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe29c);
        EXPECT(gbc.pc(), 0x139e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0230
        gbc.setState(0x310f, 0xcda7, 0x3450, 0xad21, 0x78e6, 0xa1c4, 0x1, 0x1);
        gbc.writeMem(0x310f, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcda7);
        EXPECT(gbc.pc(), 0x3111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0231
        gbc.setState(0x4f5f, 0x27b6, 0x5970, 0x9483, 0xb2fe, 0x671c, 0x0, 0x1);
        gbc.writeMem(0x4f5f, { 0xd6, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x27b6);
        EXPECT(gbc.pc(), 0x4f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0232
        gbc.setState(0x2d34, 0x3f46, 0x8870, 0x537e, 0x7400, 0x7919, 0x0, 0x1);
        gbc.writeMem(0x2d34, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3f46);
        EXPECT(gbc.pc(), 0x2d36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0233
        gbc.setState(0x3078, 0x700d, 0xae20, 0xa62b, 0x86f6, 0xd596, 0x0, 0x1);
        gbc.writeMem(0x3078, { 0xd6, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x700d);
        EXPECT(gbc.pc(), 0x307a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0234
        gbc.setState(0x83ab, 0x1534, 0x8860, 0xfb03, 0xb4a7, 0xa878, 0x1, 0x0);
        gbc.writeMem(0x83ab, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1534);
        EXPECT(gbc.pc(), 0x83ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ab), 0xd6);
        EXPECT(gbc.readMem(0x83ac), 0xb0);
        // D6 0235
        gbc.setState(0x2c4b, 0xdd69, 0x6270, 0x5de, 0xc16a, 0x7ef0, 0x1, 0x0);
        gbc.writeMem(0x2c4b, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xdd69);
        EXPECT(gbc.pc(), 0x2c4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0236
        gbc.setState(0x54d5, 0x516b, 0xed40, 0xb320, 0xaf4, 0x28ae, 0x1, 0x1);
        gbc.writeMem(0x54d5, { 0xd6, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x516b);
        EXPECT(gbc.pc(), 0x54d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0238
        gbc.setState(0xa229, 0xab5, 0x7e20, 0x8373, 0x48cd, 0x4b16, 0x0, 0x1);
        gbc.writeMem(0xa229, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xab5);
        EXPECT(gbc.pc(), 0xa22b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa229), 0xd6);
        EXPECT(gbc.readMem(0xa22a), 0x33);
        // D6 0239
        gbc.setState(0x50ab, 0x271a, 0xda90, 0x9a2d, 0x1450, 0xed08, 0x1, 0x0);
        gbc.writeMem(0x50ab, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x271a);
        EXPECT(gbc.pc(), 0x50ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 023A
        gbc.setState(0x77ea, 0x1916, 0x4d00, 0x4782, 0xe621, 0x7fdf, 0x0, 0x1);
        gbc.writeMem(0x77ea, { 0xd6, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1916);
        EXPECT(gbc.pc(), 0x77ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 023B
        gbc.setState(0xac10, 0xecd4, 0x6bc0, 0x27ba, 0x4c29, 0xcfca, 0x0, 0x0);
        gbc.writeMem(0xac10, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xecd4);
        EXPECT(gbc.pc(), 0xac12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac10), 0xd6);
        EXPECT(gbc.readMem(0xac11), 0x69);
        // D6 023C
        gbc.setState(0xbe9, 0x898e, 0x2b30, 0x67ad, 0xf306, 0x30ed, 0x0, 0x1);
        gbc.writeMem(0xbe9, { 0xd6, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x898e);
        EXPECT(gbc.pc(), 0xbeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 023D
        gbc.setState(0x327d, 0xd875, 0x2c0, 0x129d, 0x5495, 0x55d1, 0x0, 0x1);
        gbc.writeMem(0x327d, { 0xd6, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd875);
        EXPECT(gbc.pc(), 0x327f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 023E
        gbc.setState(0xb79c, 0x328a, 0xe800, 0x2cde, 0x5c70, 0x62ff, 0x0, 0x0);
        gbc.writeMem(0xb79c, { 0xd6, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x328a);
        EXPECT(gbc.pc(), 0xb79e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb79c), 0xd6);
        EXPECT(gbc.readMem(0xb79d), 0xcf);
        // D6 023F
        gbc.setState(0x557b, 0x3aa9, 0xb660, 0x9498, 0xb970, 0x400a, 0x0, 0x0);
        gbc.writeMem(0x557b, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3aa9);
        EXPECT(gbc.pc(), 0x557d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0240
        gbc.setState(0x5bb9, 0xa50b, 0x7510, 0x9ec5, 0xa058, 0x367c, 0x0, 0x0);
        gbc.writeMem(0x5bb9, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa50b);
        EXPECT(gbc.pc(), 0x5bbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0241
        gbc.setState(0x5a7c, 0x211d, 0xb660, 0x2394, 0x97d3, 0xcc20, 0x0, 0x1);
        gbc.writeMem(0x5a7c, { 0xd6, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x211d);
        EXPECT(gbc.pc(), 0x5a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0242
        gbc.setState(0x7b6e, 0x2261, 0x8500, 0x2218, 0x53ad, 0xc1e3, 0x1, 0x1);
        gbc.writeMem(0x7b6e, { 0xd6, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x2261);
        EXPECT(gbc.pc(), 0x7b70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0243
        gbc.setState(0x8dd4, 0x62c2, 0x9510, 0x2289, 0x1b53, 0x494e, 0x1, 0x1);
        gbc.writeMem(0x8dd4, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x62c2);
        EXPECT(gbc.pc(), 0x8dd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd4), 0xd6);
        EXPECT(gbc.readMem(0x8dd5), 0x84);
        // D6 0244
        gbc.setState(0x5984, 0xd6c4, 0x6160, 0x8568, 0xb83, 0xd4b0, 0x0, 0x1);
        gbc.writeMem(0x5984, { 0xd6, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd6c4);
        EXPECT(gbc.pc(), 0x5986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0245
        gbc.setState(0xeb67, 0xf4db, 0xb340, 0xb626, 0xe8a4, 0x565d, 0x1, 0x1);
        gbc.writeMem(0xeb67, { 0xd6, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf4db);
        EXPECT(gbc.pc(), 0xeb69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb67), 0xd6);
        EXPECT(gbc.readMem(0xeb68), 0xb3);
        // D6 0246
        gbc.setState(0xa9b0, 0xac44, 0x2e60, 0xa37b, 0xaac4, 0xebf1, 0x0, 0x0);
        gbc.writeMem(0xa9b0, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xac44);
        EXPECT(gbc.pc(), 0xa9b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9b0), 0xd6);
        EXPECT(gbc.readMem(0xa9b1), 0xaf);
        // D6 0247
        gbc.setState(0xda3e, 0x6be9, 0x6230, 0xa3b4, 0x2948, 0x7a32, 0x1, 0x0);
        gbc.writeMem(0xda3e, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6be9);
        EXPECT(gbc.pc(), 0xda40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3e), 0xd6);
        EXPECT(gbc.readMem(0xda3f), 0x33);
        // D6 0248
        gbc.setState(0x5c38, 0xf278, 0xc860, 0xf113, 0xa1fa, 0x7ee0, 0x0, 0x0);
        gbc.writeMem(0x5c38, { 0xd6, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf278);
        EXPECT(gbc.pc(), 0x5c3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0249
        gbc.setState(0x6cd2, 0xcae5, 0x1100, 0x8b3, 0x6d7b, 0xd7a0, 0x0, 0x0);
        gbc.writeMem(0x6cd2, { 0xd6, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xcae5);
        EXPECT(gbc.pc(), 0x6cd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 024A
        gbc.setState(0x6271, 0xa113, 0x5b50, 0xe44, 0xf97c, 0x268b, 0x0, 0x1);
        gbc.writeMem(0x6271, { 0xd6, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa113);
        EXPECT(gbc.pc(), 0x6273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 024B
        gbc.setState(0x36eb, 0x7108, 0x180, 0x9a8c, 0x14c7, 0x9df5, 0x1, 0x1);
        gbc.writeMem(0x36eb, { 0xd6, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7108);
        EXPECT(gbc.pc(), 0x36ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 024C
        gbc.setState(0xe75b, 0x1524, 0x5010, 0x59d0, 0x810b, 0x21bf, 0x1, 0x1);
        gbc.writeMem(0xe75b, { 0xd6, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x1524);
        EXPECT(gbc.pc(), 0xe75d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe75b), 0xd6);
        EXPECT(gbc.readMem(0xe75c), 0x12);
        // D6 024F
        gbc.setState(0x5c3e, 0x5e62, 0xc5a0, 0xbc18, 0x7c04, 0xdb43, 0x0, 0x0);
        gbc.writeMem(0x5c3e, { 0xd6, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5e62);
        EXPECT(gbc.pc(), 0x5c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0250
        gbc.setState(0x345c, 0xcb47, 0x6c80, 0x462e, 0x4e65, 0xeb7b, 0x0, 0x1);
        gbc.writeMem(0x345c, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xcb47);
        EXPECT(gbc.pc(), 0x345e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0251
        gbc.setState(0x4910, 0x3b8, 0x7320, 0x29ab, 0xaa4f, 0xd168, 0x1, 0x0);
        gbc.writeMem(0x4910, { 0xd6, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3b8);
        EXPECT(gbc.pc(), 0x4912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0252
        gbc.setState(0x3f36, 0x6349, 0x17c0, 0x7624, 0xd80b, 0xdfe9, 0x0, 0x0);
        gbc.writeMem(0x3f36, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6349);
        EXPECT(gbc.pc(), 0x3f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0253
        gbc.setState(0x2ae, 0x5e97, 0x9ef0, 0x24c7, 0xddf4, 0xb3ab, 0x0, 0x0);
        gbc.writeMem(0x2ae, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x5e97);
        EXPECT(gbc.pc(), 0x2b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0254
        gbc.setState(0x1997, 0xe5af, 0xa210, 0x102e, 0x3a6e, 0x4ea1, 0x0, 0x0);
        gbc.writeMem(0x1997, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe5af);
        EXPECT(gbc.pc(), 0x1999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0255
        gbc.setState(0x3ae5, 0x8020, 0x9fd0, 0x9983, 0xfe71, 0x45cc, 0x0, 0x0);
        gbc.writeMem(0x3ae5, { 0xd6, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8020);
        EXPECT(gbc.pc(), 0x3ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0256
        gbc.setState(0x5d3f, 0xe116, 0x22d0, 0xd05e, 0xa0d2, 0x6f51, 0x0, 0x1);
        gbc.writeMem(0x5d3f, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe116);
        EXPECT(gbc.pc(), 0x5d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0258
        gbc.setState(0x2494, 0x6289, 0xa5f0, 0xafb7, 0x78b0, 0x2fb0, 0x1, 0x1);
        gbc.writeMem(0x2494, { 0xd6, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6289);
        EXPECT(gbc.pc(), 0x2496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0259
        gbc.setState(0xde3f, 0x6fed, 0xec0, 0xc33f, 0x7ff4, 0x59ef, 0x1, 0x1);
        gbc.writeMem(0xde3f, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6fed);
        EXPECT(gbc.pc(), 0xde41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3f), 0xd6);
        EXPECT(gbc.readMem(0xde40), 0xad);
        // D6 025A
        gbc.setState(0x63da, 0xceaf, 0x9000, 0x2a30, 0xd551, 0x69b7, 0x1, 0x1);
        gbc.writeMem(0x63da, { 0xd6, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xceaf);
        EXPECT(gbc.pc(), 0x63dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 025B
        gbc.setState(0x2f10, 0x8ff3, 0x81e0, 0xe60d, 0x844b, 0x66a, 0x0, 0x1);
        gbc.writeMem(0x2f10, { 0xd6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x8ff3);
        EXPECT(gbc.pc(), 0x2f12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 025D
        gbc.setState(0x4e2a, 0x5d1c, 0x550, 0x442a, 0x3be4, 0x1b39, 0x0, 0x1);
        gbc.writeMem(0x4e2a, { 0xd6, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5d1c);
        EXPECT(gbc.pc(), 0x4e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 025E
        gbc.setState(0x8669, 0xe36b, 0xbdb0, 0x39e9, 0xe6e7, 0xde7c, 0x0, 0x0);
        gbc.writeMem(0x8669, { 0xd6, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe36b);
        EXPECT(gbc.pc(), 0x866b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8669), 0xd6);
        EXPECT(gbc.readMem(0x866a), 0xee);
        // D6 0260
        gbc.setState(0x9e6, 0x8005, 0xabb0, 0xea8c, 0xd506, 0x6e9d, 0x0, 0x0);
        gbc.writeMem(0x9e6, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8005);
        EXPECT(gbc.pc(), 0x9e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0261
        gbc.setState(0xecf, 0xed6e, 0x4080, 0x7d6, 0xe163, 0xe03, 0x1, 0x1);
        gbc.writeMem(0xecf, { 0xd6, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xed6e);
        EXPECT(gbc.pc(), 0xed1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0262
        gbc.setState(0x85bf, 0x1c22, 0x8d30, 0xed1b, 0x7f86, 0x1d4d, 0x1, 0x1);
        gbc.writeMem(0x85bf, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1c22);
        EXPECT(gbc.pc(), 0x85c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85bf), 0xd6);
        EXPECT(gbc.readMem(0x85c0), 0x69);
        // D6 0264
        gbc.setState(0x5fda, 0xc99d, 0xc720, 0x208b, 0x5a21, 0x9519, 0x1, 0x0);
        gbc.writeMem(0x5fda, { 0xd6, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc99d);
        EXPECT(gbc.pc(), 0x5fdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0265
        gbc.setState(0x46d2, 0xca5e, 0x68a0, 0x1e85, 0x6ab, 0x35c8, 0x1, 0x0);
        gbc.writeMem(0x46d2, { 0xd6, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xca5e);
        EXPECT(gbc.pc(), 0x46d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0266
        gbc.setState(0x6086, 0x5ea1, 0x2ef0, 0x2e0c, 0x4680, 0xa4f7, 0x0, 0x1);
        gbc.writeMem(0x6086, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5ea1);
        EXPECT(gbc.pc(), 0x6088);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0267
        gbc.setState(0x36e, 0x309b, 0x95f0, 0x8e9d, 0x37be, 0x973c, 0x1, 0x1);
        gbc.writeMem(0x36e, { 0xd6, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x309b);
        EXPECT(gbc.pc(), 0x370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0268
        gbc.setState(0x1f33, 0xbd61, 0xbbb0, 0xf715, 0x3694, 0x6d80, 0x1, 0x0);
        gbc.writeMem(0x1f33, { 0xd6, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbd61);
        EXPECT(gbc.pc(), 0x1f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0269
        gbc.setState(0x9df6, 0xdad, 0xcf30, 0x710b, 0x1bf3, 0xa12a, 0x0, 0x0);
        gbc.writeMem(0x9df6, { 0xd6, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdad);
        EXPECT(gbc.pc(), 0x9df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9df6), 0xd6);
        EXPECT(gbc.readMem(0x9df7), 0x40);
        // D6 026A
        gbc.setState(0x9d6c, 0xadde, 0x74e0, 0xb9b2, 0x27da, 0x82e5, 0x1, 0x1);
        gbc.writeMem(0x9d6c, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xadde);
        EXPECT(gbc.pc(), 0x9d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d6c), 0xd6);
        EXPECT(gbc.readMem(0x9d6d), 0xad);
        // D6 026B
        gbc.setState(0xe3c8, 0xe378, 0xe000, 0xca8e, 0x39ab, 0x3b1, 0x0, 0x0);
        gbc.writeMem(0xe3c8, { 0xd6, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe378);
        EXPECT(gbc.pc(), 0xe3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3c8), 0xd6);
        EXPECT(gbc.readMem(0xe3c9), 0x67);
        // D6 026C
        gbc.setState(0x2f31, 0xd446, 0x3a10, 0x845b, 0xb460, 0xb4dc, 0x0, 0x0);
        gbc.writeMem(0x2f31, { 0xd6, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xd446);
        EXPECT(gbc.pc(), 0x2f33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 026D
        gbc.setState(0xc650, 0xd6ab, 0x3da0, 0xadfb, 0x968e, 0x5aa0, 0x0, 0x0);
        gbc.writeMem(0xc650, { 0xd6, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd6ab);
        EXPECT(gbc.pc(), 0xc652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc650), 0xd6);
        EXPECT(gbc.readMem(0xc651), 0x62);
        // D6 026E
        gbc.setState(0x6fc3, 0xbfc3, 0xa850, 0x6039, 0x6e34, 0x8644, 0x0, 0x0);
        gbc.writeMem(0x6fc3, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbfc3);
        EXPECT(gbc.pc(), 0x6fc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 026F
        gbc.setState(0x7627, 0xade9, 0xe650, 0xe431, 0x4240, 0xd65d, 0x0, 0x0);
        gbc.writeMem(0x7627, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xade9);
        EXPECT(gbc.pc(), 0x7629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0270
        gbc.setState(0xe7df, 0x6dbf, 0x5f40, 0x7f62, 0xd36c, 0x6d5c, 0x0, 0x1);
        gbc.writeMem(0xe7df, { 0xd6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6dbf);
        EXPECT(gbc.pc(), 0xe7e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7df), 0xd6);
        EXPECT(gbc.readMem(0xe7e0), 0x6);
        // D6 0271
        gbc.setState(0x2538, 0xb46d, 0xb7e0, 0x2878, 0x3491, 0xd0dd, 0x1, 0x0);
        gbc.writeMem(0x2538, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb46d);
        EXPECT(gbc.pc(), 0x253a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0272
        gbc.setState(0xb5d3, 0x3935, 0xd120, 0xd43e, 0x8362, 0xd8ee, 0x0, 0x0);
        gbc.writeMem(0xb5d3, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x3935);
        EXPECT(gbc.pc(), 0xb5d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5d3), 0xd6);
        EXPECT(gbc.readMem(0xb5d4), 0x99);
        // D6 0273
        gbc.setState(0x4092, 0x257e, 0x1bd0, 0x6b71, 0xd3ad, 0xca2e, 0x1, 0x0);
        gbc.writeMem(0x4092, { 0xd6, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x257e);
        EXPECT(gbc.pc(), 0x4094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0274
        gbc.setState(0xe4b6, 0x7cb8, 0x7890, 0xd689, 0xfb08, 0xa6b1, 0x0, 0x1);
        gbc.writeMem(0xe4b6, { 0xd6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7cb8);
        EXPECT(gbc.pc(), 0xe4b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b6), 0xd6);
        EXPECT(gbc.readMem(0xe4b7), 0x46);
        // D6 0275
        gbc.setState(0x7d6d, 0xeb00, 0x4710, 0x3034, 0x4864, 0xde2c, 0x0, 0x0);
        gbc.writeMem(0x7d6d, { 0xd6, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeb00);
        EXPECT(gbc.pc(), 0x7d6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0276
        gbc.setState(0x1742, 0xd2b5, 0xa500, 0x8aa5, 0xb697, 0x7110, 0x1, 0x1);
        gbc.writeMem(0x1742, { 0xd6, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0x1744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0277
        gbc.setState(0xf1e, 0xf27d, 0x68b0, 0x1cc2, 0x9bff, 0x7c3a, 0x1, 0x0);
        gbc.writeMem(0xf1e, { 0xd6, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf27d);
        EXPECT(gbc.pc(), 0xf20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0278
        gbc.setState(0xe1fb, 0x2be9, 0x1710, 0xa194, 0x3105, 0xc77d, 0x0, 0x1);
        gbc.writeMem(0xe1fb, { 0xd6, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2be9);
        EXPECT(gbc.pc(), 0xe1fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1fb), 0xd6);
        EXPECT(gbc.readMem(0xe1fc), 0x75);
        // D6 0279
        gbc.setState(0x690d, 0x2c3a, 0x1da0, 0xb5fb, 0x21a4, 0x733b, 0x1, 0x0);
        gbc.writeMem(0x690d, { 0xd6, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2c3a);
        EXPECT(gbc.pc(), 0x690f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 027A
        gbc.setState(0x2e1f, 0xef20, 0xc530, 0x1c20, 0xd182, 0x2cc3, 0x0, 0x1);
        gbc.writeMem(0x2e1f, { 0xd6, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xef20);
        EXPECT(gbc.pc(), 0x2e21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 027B
        gbc.setState(0x5c23, 0x3cfa, 0x42f0, 0xb5f, 0xd77e, 0x9f7, 0x0, 0x1);
        gbc.writeMem(0x5c23, { 0xd6, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3cfa);
        EXPECT(gbc.pc(), 0x5c25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 027C
        gbc.setState(0x3c8d, 0xe818, 0x4990, 0xc55f, 0x921d, 0x7400, 0x0, 0x1);
        gbc.writeMem(0x3c8d, { 0xd6, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xe818);
        EXPECT(gbc.pc(), 0x3c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 027D
        gbc.setState(0xb66f, 0xe35f, 0x6a00, 0x1a03, 0x2453, 0xb987, 0x1, 0x1);
        gbc.writeMem(0xb66f, { 0xd6, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe35f);
        EXPECT(gbc.pc(), 0xb671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb66f), 0xd6);
        EXPECT(gbc.readMem(0xb670), 0x7);
        // D6 027F
        gbc.setState(0xa021, 0xd9fc, 0x17a0, 0xab7b, 0x7dba, 0x5ebc, 0x1, 0x0);
        gbc.writeMem(0xa021, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd9fc);
        EXPECT(gbc.pc(), 0xa023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa021), 0xd6);
        EXPECT(gbc.readMem(0xa022), 0xc5);
        // D6 0280
        gbc.setState(0xb91, 0xfb49, 0xc4f0, 0xb9eb, 0x8e85, 0x9492, 0x0, 0x0);
        gbc.writeMem(0xb91, { 0xd6, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfb49);
        EXPECT(gbc.pc(), 0xb93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0281
        gbc.setState(0x697, 0xec49, 0x6fc0, 0x3770, 0xcc17, 0xe51c, 0x1, 0x0);
        gbc.writeMem(0x697, { 0xd6, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xec49);
        EXPECT(gbc.pc(), 0x699);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0282
        gbc.setState(0x7ec, 0x22bb, 0xc940, 0x7c47, 0xf83, 0xb949, 0x0, 0x1);
        gbc.writeMem(0x7ec, { 0xd6, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x22bb);
        EXPECT(gbc.pc(), 0x7ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0283
        gbc.setState(0xa3f7, 0xd305, 0x8ae0, 0x440d, 0x23bb, 0xf29d, 0x1, 0x1);
        gbc.writeMem(0xa3f7, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd305);
        EXPECT(gbc.pc(), 0xa3f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f7), 0xd6);
        EXPECT(gbc.readMem(0xa3f8), 0x3b);
        // D6 0284
        gbc.setState(0x597c, 0x34b7, 0x9db0, 0x1ab7, 0xc4a, 0xef11, 0x0, 0x1);
        gbc.writeMem(0x597c, { 0xd6, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x34b7);
        EXPECT(gbc.pc(), 0x597e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0285
        gbc.setState(0xeef5, 0xa474, 0x9aa0, 0x629b, 0xb242, 0x779f, 0x0, 0x1);
        gbc.writeMem(0xeef5, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa474);
        EXPECT(gbc.pc(), 0xeef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef5), 0xd6);
        EXPECT(gbc.readMem(0xeef6), 0x39);
        // D6 0286
        gbc.setState(0x5ae2, 0x3799, 0xa650, 0x58f8, 0xf510, 0xab56, 0x1, 0x1);
        gbc.writeMem(0x5ae2, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3799);
        EXPECT(gbc.pc(), 0x5ae4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0287
        gbc.setState(0xddda, 0x42fa, 0xb280, 0xb0d2, 0x7b96, 0x42c9, 0x1, 0x1);
        gbc.writeMem(0xddda, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x42fa);
        EXPECT(gbc.pc(), 0xdddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddda), 0xd6);
        EXPECT(gbc.readMem(0xdddb), 0x39);
        // D6 0288
        gbc.setState(0xc523, 0xe780, 0x4a10, 0x41ef, 0x4913, 0xa439, 0x1, 0x1);
        gbc.writeMem(0xc523, { 0xd6, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe780);
        EXPECT(gbc.pc(), 0xc525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc523), 0xd6);
        EXPECT(gbc.readMem(0xc524), 0x95);
        // D6 0289
        gbc.setState(0x5f6d, 0x475d, 0xb3d0, 0x6972, 0x5177, 0xb7e7, 0x0, 0x0);
        gbc.writeMem(0x5f6d, { 0xd6, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x475d);
        EXPECT(gbc.pc(), 0x5f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 028A
        gbc.setState(0x241f, 0xc5de, 0xb170, 0x776a, 0xacca, 0xb1dd, 0x0, 0x0);
        gbc.writeMem(0x241f, { 0xd6, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc5de);
        EXPECT(gbc.pc(), 0x2421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 028B
        gbc.setState(0x5b09, 0xe093, 0x8190, 0x21d4, 0xf73, 0x53a2, 0x0, 0x0);
        gbc.writeMem(0x5b09, { 0xd6, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe093);
        EXPECT(gbc.pc(), 0x5b0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 028D
        gbc.setState(0xcbe6, 0xafb6, 0x96b0, 0x7a1d, 0x8f9c, 0x21cb, 0x0, 0x1);
        gbc.writeMem(0xcbe6, { 0xd6, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xafb6);
        EXPECT(gbc.pc(), 0xcbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe6), 0xd6);
        EXPECT(gbc.readMem(0xcbe7), 0x9b);
        // D6 028E
        gbc.setState(0x10ed, 0x6f8e, 0xba70, 0x3f2, 0x17c, 0xf647, 0x1, 0x0);
        gbc.writeMem(0x10ed, { 0xd6, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6f8e);
        EXPECT(gbc.pc(), 0x10ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0290
        gbc.setState(0x22e2, 0x22dd, 0x4c70, 0x3162, 0x559c, 0xe212, 0x0, 0x0);
        gbc.writeMem(0x22e2, { 0xd6, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x22dd);
        EXPECT(gbc.pc(), 0x22e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0291
        gbc.setState(0xe42c, 0x1868, 0xff00, 0x9c5, 0xc120, 0x6f2b, 0x0, 0x0);
        gbc.writeMem(0xe42c, { 0xd6, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1868);
        EXPECT(gbc.pc(), 0xe42e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42c), 0xd6);
        EXPECT(gbc.readMem(0xe42d), 0xcb);
        // D6 0292
        gbc.setState(0xb68, 0xc8fd, 0x9a00, 0x4693, 0xa51c, 0xd262, 0x1, 0x1);
        gbc.writeMem(0xb68, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xc8fd);
        EXPECT(gbc.pc(), 0xb6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0293
        gbc.setState(0xe975, 0xed35, 0x9480, 0x294e, 0x257a, 0x1132, 0x1, 0x0);
        gbc.writeMem(0xe975, { 0xd6, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xed35);
        EXPECT(gbc.pc(), 0xe977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe975), 0xd6);
        EXPECT(gbc.readMem(0xe976), 0x6e);
        // D6 0294
        gbc.setState(0x2fc8, 0x81c3, 0x64c0, 0x36a7, 0x160a, 0xd030, 0x1, 0x0);
        gbc.writeMem(0x2fc8, { 0xd6, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x81c3);
        EXPECT(gbc.pc(), 0x2fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0295
        gbc.setState(0x315f, 0xa41c, 0x8060, 0xbd51, 0x78d2, 0x82ce, 0x1, 0x0);
        gbc.writeMem(0x315f, { 0xd6, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa41c);
        EXPECT(gbc.pc(), 0x3161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0296
        gbc.setState(0x6842, 0x857a, 0x4630, 0xfaaa, 0x2916, 0xadf7, 0x0, 0x0);
        gbc.writeMem(0x6842, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x857a);
        EXPECT(gbc.pc(), 0x6844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0298
        gbc.setState(0x8e28, 0xc7c2, 0x8860, 0x17eb, 0x924b, 0x4fd, 0x0, 0x0);
        gbc.writeMem(0x8e28, { 0xd6, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc7c2);
        EXPECT(gbc.pc(), 0x8e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e28), 0xd6);
        EXPECT(gbc.readMem(0x8e29), 0x47);
        // D6 0299
        gbc.setState(0x1c0, 0xc78a, 0xf0e0, 0x400d, 0x4cb4, 0x4ffe, 0x1, 0x0);
        gbc.writeMem(0x1c0, { 0xd6, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc78a);
        EXPECT(gbc.pc(), 0x1c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 029A
        gbc.setState(0x789e, 0x963, 0x7780, 0x1113, 0x1acb, 0xd8be, 0x0, 0x0);
        gbc.writeMem(0x789e, { 0xd6, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x963);
        EXPECT(gbc.pc(), 0x78a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 029B
        gbc.setState(0x8923, 0x3ee4, 0xf920, 0xcce1, 0xf953, 0xfecc, 0x0, 0x1);
        gbc.writeMem(0x8923, { 0xd6, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3ee4);
        EXPECT(gbc.pc(), 0x8925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8923), 0xd6);
        EXPECT(gbc.readMem(0x8924), 0x37);
        // D6 029C
        gbc.setState(0x1598, 0x5521, 0x4d50, 0x8778, 0xe2be, 0xb118, 0x1, 0x0);
        gbc.writeMem(0x1598, { 0xd6, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5521);
        EXPECT(gbc.pc(), 0x159a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 029D
        gbc.setState(0x250e, 0xbc86, 0xd400, 0x6b84, 0x2a4c, 0xeace, 0x0, 0x1);
        gbc.writeMem(0x250e, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbc86);
        EXPECT(gbc.pc(), 0x2510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 029F
        gbc.setState(0xc56f, 0x5664, 0x3b30, 0xbdfc, 0x6b9e, 0x3420, 0x0, 0x1);
        gbc.writeMem(0xc56f, { 0xd6, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5664);
        EXPECT(gbc.pc(), 0xc571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56f), 0xd6);
        EXPECT(gbc.readMem(0xc570), 0xdd);
        // D6 02A0
        gbc.setState(0x585d, 0x98a8, 0xb100, 0x57af, 0x96e7, 0xf318, 0x0, 0x1);
        gbc.writeMem(0x585d, { 0xd6, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x98a8);
        EXPECT(gbc.pc(), 0x585f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02A1
        gbc.setState(0xcddf, 0xaecb, 0x3800, 0xc9d7, 0x41ac, 0x3139, 0x0, 0x0);
        gbc.writeMem(0xcddf, { 0xd6, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaecb);
        EXPECT(gbc.pc(), 0xcde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcddf), 0xd6);
        EXPECT(gbc.readMem(0xcde0), 0x7a);
        // D6 02A2
        gbc.setState(0x16d, 0x5aca, 0xef10, 0xf7ac, 0x3c99, 0xcbcc, 0x1, 0x1);
        gbc.writeMem(0x16d, { 0xd6, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5aca);
        EXPECT(gbc.pc(), 0x16f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02A3
        gbc.setState(0x1a39, 0xe8ee, 0x2660, 0x47c2, 0x569d, 0x3dae, 0x1, 0x1);
        gbc.writeMem(0x1a39, { 0xd6, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe8ee);
        EXPECT(gbc.pc(), 0x1a3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02A4
        gbc.setState(0xc9d6, 0x52ee, 0x5bd0, 0xa40f, 0x700, 0x53ee, 0x0, 0x0);
        gbc.writeMem(0xc9d6, { 0xd6, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x52ee);
        EXPECT(gbc.pc(), 0xc9d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d6), 0xd6);
        EXPECT(gbc.readMem(0xc9d7), 0x1d);
        // D6 02A5
        gbc.setState(0xc2ea, 0xc4ba, 0xf270, 0x148c, 0xb5c2, 0x55ec, 0x1, 0x1);
        gbc.writeMem(0xc2ea, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc4ba);
        EXPECT(gbc.pc(), 0xc2ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ea), 0xd6);
        EXPECT(gbc.readMem(0xc2eb), 0xe7);
        // D6 02A6
        gbc.setState(0x43c7, 0xd8c4, 0x7920, 0xee6a, 0xd051, 0xf8f7, 0x0, 0x1);
        gbc.writeMem(0x43c7, { 0xd6, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd8c4);
        EXPECT(gbc.pc(), 0x43c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02A7
        gbc.setState(0xb790, 0xd414, 0x5340, 0xedac, 0xc52, 0xefde, 0x1, 0x0);
        gbc.writeMem(0xb790, { 0xd6, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd414);
        EXPECT(gbc.pc(), 0xb792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb790), 0xd6);
        EXPECT(gbc.readMem(0xb791), 0x7a);
        // D6 02A8
        gbc.setState(0xe16c, 0x36b2, 0x54a0, 0xf0f9, 0x475f, 0xaacd, 0x0, 0x1);
        gbc.writeMem(0xe16c, { 0xd6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x36b2);
        EXPECT(gbc.pc(), 0xe16e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe16c), 0xd6);
        EXPECT(gbc.readMem(0xe16d), 0x6c);
        // D6 02A9
        gbc.setState(0xad00, 0x172b, 0xf700, 0xcd68, 0x1436, 0xea05, 0x1, 0x1);
        gbc.writeMem(0xad00, { 0xd6, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x172b);
        EXPECT(gbc.pc(), 0xad02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad00), 0xd6);
        EXPECT(gbc.readMem(0xad01), 0x94);
        // D6 02AA
        gbc.setState(0x5837, 0x7c68, 0xe110, 0x6b24, 0xbeef, 0xeb51, 0x0, 0x1);
        gbc.writeMem(0x5837, { 0xd6, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x7c68);
        EXPECT(gbc.pc(), 0x5839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02AB
        gbc.setState(0x6ee7, 0xe101, 0xb5e0, 0x6267, 0xb276, 0x493b, 0x1, 0x1);
        gbc.writeMem(0x6ee7, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe101);
        EXPECT(gbc.pc(), 0x6ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02AC
        gbc.setState(0x7042, 0x1351, 0x3530, 0x523c, 0x72bc, 0x94fe, 0x0, 0x0);
        gbc.writeMem(0x7042, { 0xd6, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1351);
        EXPECT(gbc.pc(), 0x7044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02AD
        gbc.setState(0x9767, 0x5096, 0x52c0, 0x7fe5, 0x3437, 0x386d, 0x1, 0x1);
        gbc.writeMem(0x9767, { 0xd6, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5096);
        EXPECT(gbc.pc(), 0x9769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9767), 0xd6);
        EXPECT(gbc.readMem(0x9768), 0x62);
        // D6 02AE
        gbc.setState(0x295b, 0x9ecc, 0x4d60, 0x214a, 0x292e, 0x49bc, 0x1, 0x0);
        gbc.writeMem(0x295b, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x9ecc);
        EXPECT(gbc.pc(), 0x295d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02B0
        gbc.setState(0x6841, 0xdc89, 0x6ee0, 0x4021, 0x2fb9, 0x9514, 0x1, 0x0);
        gbc.writeMem(0x6841, { 0xd6, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdc89);
        EXPECT(gbc.pc(), 0x6843);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02B1
        gbc.setState(0x5393, 0x1c45, 0xa610, 0x70c8, 0xbc81, 0x5ba9, 0x1, 0x0);
        gbc.writeMem(0x5393, { 0xd6, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1c45);
        EXPECT(gbc.pc(), 0x5395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02B2
        gbc.setState(0x79c8, 0x9eef, 0xcae0, 0xac77, 0x1c24, 0x848e, 0x0, 0x0);
        gbc.writeMem(0x79c8, { 0xd6, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9eef);
        EXPECT(gbc.pc(), 0x79ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02B3
        gbc.setState(0x75cc, 0x913c, 0x4780, 0x8d9d, 0xbf35, 0x47e6, 0x1, 0x0);
        gbc.writeMem(0x75cc, { 0xd6, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x913c);
        EXPECT(gbc.pc(), 0x75ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02B4
        gbc.setState(0xd9a8, 0x650e, 0x77d0, 0x5283, 0xc4e3, 0xbc50, 0x1, 0x0);
        gbc.writeMem(0xd9a8, { 0xd6, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x650e);
        EXPECT(gbc.pc(), 0xd9aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a8), 0xd6);
        EXPECT(gbc.readMem(0xd9a9), 0x4);
        // D6 02B5
        gbc.setState(0xc08, 0x6c0f, 0xe950, 0xbc67, 0xf7ed, 0x9577, 0x1, 0x1);
        gbc.writeMem(0xc08, { 0xd6, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6c0f);
        EXPECT(gbc.pc(), 0xc0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02B6
        gbc.setState(0x1cdd, 0x5dd3, 0xba20, 0x5cf1, 0xfac6, 0x131b, 0x1, 0x0);
        gbc.writeMem(0x1cdd, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5dd3);
        EXPECT(gbc.pc(), 0x1cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02B7
        gbc.setState(0x9b7f, 0x987e, 0x72d0, 0x15e8, 0x7fb3, 0x1513, 0x1, 0x0);
        gbc.writeMem(0x9b7f, { 0xd6, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x987e);
        EXPECT(gbc.pc(), 0x9b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b7f), 0xd6);
        EXPECT(gbc.readMem(0x9b80), 0xfd);
        // D6 02B8
        gbc.setState(0xa2, 0x1608, 0xe0e0, 0xcf21, 0xc018, 0x1ad3, 0x1, 0x1);
        gbc.writeMem(0xa2, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x1608);
        EXPECT(gbc.pc(), 0xa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02B9
        gbc.setState(0xd7c2, 0xe34, 0xca40, 0x9e92, 0x9c28, 0xd2c1, 0x1, 0x1);
        gbc.writeMem(0xd7c2, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe34);
        EXPECT(gbc.pc(), 0xd7c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7c2), 0xd6);
        EXPECT(gbc.readMem(0xd7c3), 0x5);
        // D6 02BA
        gbc.setState(0xdbab, 0xc417, 0xdb60, 0xe381, 0x7bcb, 0x799a, 0x0, 0x0);
        gbc.writeMem(0xdbab, { 0xd6, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xc417);
        EXPECT(gbc.pc(), 0xdbad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbab), 0xd6);
        EXPECT(gbc.readMem(0xdbac), 0x4b);
        // D6 02BB
        gbc.setState(0xefba, 0x2fa9, 0xb30, 0x7b35, 0x283d, 0xeac0, 0x0, 0x0);
        gbc.writeMem(0xefba, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2fa9);
        EXPECT(gbc.pc(), 0xefbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefba), 0xd6);
        EXPECT(gbc.readMem(0xefbb), 0x48);
        // D6 02BC
        gbc.setState(0x6e60, 0x406, 0x4070, 0x11a6, 0x5325, 0xeb82, 0x0, 0x0);
        gbc.writeMem(0x6e60, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x406);
        EXPECT(gbc.pc(), 0x6e62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02BD
        gbc.setState(0xf12, 0x2fd7, 0xf000, 0xea9, 0xff, 0x2668, 0x1, 0x0);
        gbc.writeMem(0xf12, { 0xd6, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2fd7);
        EXPECT(gbc.pc(), 0xf14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02BE
        gbc.setState(0x76f0, 0x7614, 0x5d00, 0x3a1c, 0xcb1e, 0xbc58, 0x0, 0x0);
        gbc.writeMem(0x76f0, { 0xd6, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7614);
        EXPECT(gbc.pc(), 0x76f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02BF
        gbc.setState(0xb424, 0xe97f, 0x3de0, 0x2709, 0xa5e, 0xf2ba, 0x1, 0x1);
        gbc.writeMem(0xb424, { 0xd6, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe97f);
        EXPECT(gbc.pc(), 0xb426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb424), 0xd6);
        EXPECT(gbc.readMem(0xb425), 0x9);
        // D6 02C0
        gbc.setState(0xd1dd, 0xd3b9, 0x75b0, 0xb6ef, 0xf6d0, 0xd13e, 0x0, 0x0);
        gbc.writeMem(0xd1dd, { 0xd6, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd3b9);
        EXPECT(gbc.pc(), 0xd1df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1dd), 0xd6);
        EXPECT(gbc.readMem(0xd1de), 0x90);
        // D6 02C1
        gbc.setState(0x5f19, 0xc05b, 0xb6b0, 0x8c2, 0xe5f7, 0xa888, 0x1, 0x0);
        gbc.writeMem(0x5f19, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc05b);
        EXPECT(gbc.pc(), 0x5f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02C2
        gbc.setState(0x85ad, 0xc05a, 0xcad0, 0xc8cf, 0xe09b, 0x3516, 0x0, 0x1);
        gbc.writeMem(0x85ad, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc05a);
        EXPECT(gbc.pc(), 0x85af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ad), 0xd6);
        EXPECT(gbc.readMem(0x85ae), 0xc5);
        // D6 02C3
        gbc.setState(0x5f75, 0xd034, 0xa4f0, 0xb3d3, 0x30c2, 0x39b4, 0x0, 0x0);
        gbc.writeMem(0x5f75, { 0xd6, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd034);
        EXPECT(gbc.pc(), 0x5f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02C4
        gbc.setState(0xa61b, 0x3484, 0x3270, 0xad22, 0x694b, 0xcd9c, 0x1, 0x1);
        gbc.writeMem(0xa61b, { 0xd6, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x3484);
        EXPECT(gbc.pc(), 0xa61d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa61b), 0xd6);
        EXPECT(gbc.readMem(0xa61c), 0x40);
        // D6 02C5
        gbc.setState(0x565e, 0x9cde, 0xa2d0, 0x6b2e, 0xcf56, 0xba1, 0x0, 0x0);
        gbc.writeMem(0x565e, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9cde);
        EXPECT(gbc.pc(), 0x5660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02C6
        gbc.setState(0xef6d, 0x9267, 0xd220, 0xe778, 0x1c74, 0xa514, 0x0, 0x1);
        gbc.writeMem(0xef6d, { 0xd6, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9267);
        EXPECT(gbc.pc(), 0xef6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6d), 0xd6);
        EXPECT(gbc.readMem(0xef6e), 0x97);
        // D6 02C7
        gbc.setState(0x6c01, 0xc871, 0x8300, 0x2a31, 0x4860, 0xf437, 0x0, 0x1);
        gbc.writeMem(0x6c01, { 0xd6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc871);
        EXPECT(gbc.pc(), 0x6c03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02C9
        gbc.setState(0x9458, 0x210c, 0xebd0, 0x3ad0, 0xf2ab, 0x260f, 0x0, 0x0);
        gbc.writeMem(0x9458, { 0xd6, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x210c);
        EXPECT(gbc.pc(), 0x945a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9458), 0xd6);
        EXPECT(gbc.readMem(0x9459), 0xe5);
        // D6 02CA
        gbc.setState(0xe20f, 0x2003, 0x8650, 0x760e, 0x2a59, 0xa23d, 0x0, 0x1);
        gbc.writeMem(0xe20f, { 0xd6, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2003);
        EXPECT(gbc.pc(), 0xe211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe20f), 0xd6);
        EXPECT(gbc.readMem(0xe210), 0x61);
        // D6 02CB
        gbc.setState(0x6476, 0x5b61, 0x9450, 0xf876, 0x8ee8, 0xc855, 0x0, 0x1);
        gbc.writeMem(0x6476, { 0xd6, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5b61);
        EXPECT(gbc.pc(), 0x6478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02CC
        gbc.setState(0x92ac, 0x9ff6, 0x66c0, 0xbc9c, 0xa23e, 0xa8d1, 0x1, 0x1);
        gbc.writeMem(0x92ac, { 0xd6, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9ff6);
        EXPECT(gbc.pc(), 0x92ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92ac), 0xd6);
        EXPECT(gbc.readMem(0x92ad), 0x7b);
        // D6 02CD
        gbc.setState(0xc688, 0xb15e, 0xa740, 0x480b, 0x3c56, 0xae23, 0x1, 0x0);
        gbc.writeMem(0xc688, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb15e);
        EXPECT(gbc.pc(), 0xc68a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc688), 0xd6);
        EXPECT(gbc.readMem(0xc689), 0xa3);
        // D6 02CE
        gbc.setState(0x660, 0x1b09, 0xef60, 0xfdae, 0x4c54, 0x559e, 0x0, 0x1);
        gbc.writeMem(0x660, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1b09);
        EXPECT(gbc.pc(), 0x662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02CF
        gbc.setState(0x35b9, 0x796d, 0x1ae0, 0x9928, 0xcca4, 0xbf20, 0x0, 0x1);
        gbc.writeMem(0x35b9, { 0xd6, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x796d);
        EXPECT(gbc.pc(), 0x35bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02D0
        gbc.setState(0xc97b, 0xdf33, 0xa2a0, 0x8b88, 0x48d9, 0x9385, 0x0, 0x0);
        gbc.writeMem(0xc97b, { 0xd6, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdf33);
        EXPECT(gbc.pc(), 0xc97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc97b), 0xd6);
        EXPECT(gbc.readMem(0xc97c), 0x6e);
        // D6 02D1
        gbc.setState(0x951e, 0xe28a, 0x1870, 0xe0d4, 0xd423, 0x3dbc, 0x0, 0x0);
        gbc.writeMem(0x951e, { 0xd6, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe28a);
        EXPECT(gbc.pc(), 0x9520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x951e), 0xd6);
        EXPECT(gbc.readMem(0x951f), 0x5a);
        // D6 02D2
        gbc.setState(0x7860, 0xebdc, 0xdbd0, 0xf4a6, 0x8083, 0x5c5a, 0x0, 0x1);
        gbc.writeMem(0x7860, { 0xd6, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xebdc);
        EXPECT(gbc.pc(), 0x7862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02D3
        gbc.setState(0xd7ac, 0x6103, 0xc2d0, 0x22e8, 0x1f95, 0x803d, 0x1, 0x0);
        gbc.writeMem(0xd7ac, { 0xd6, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6103);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ac), 0xd6);
        EXPECT(gbc.readMem(0xd7ad), 0xcb);
        // D6 02D4
        gbc.setState(0xd4ff, 0x62a, 0x64b0, 0xf2cf, 0x8e6c, 0x8de7, 0x0, 0x0);
        gbc.writeMem(0xd4ff, { 0xd6, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xd501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ff), 0xd6);
        EXPECT(gbc.readMem(0xd500), 0xdd);
        // D6 02D5
        gbc.setState(0x11b3, 0x5055, 0xf1c0, 0xac59, 0xb9f6, 0x12dc, 0x1, 0x0);
        gbc.writeMem(0x11b3, { 0xd6, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5055);
        EXPECT(gbc.pc(), 0x11b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02D6
        gbc.setState(0x660, 0x6d02, 0x11b0, 0xd172, 0xcfce, 0x423b, 0x1, 0x1);
        gbc.writeMem(0x660, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6d02);
        EXPECT(gbc.pc(), 0x662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02D7
        gbc.setState(0xa0da, 0x7f74, 0x89c0, 0x7c2, 0x2469, 0x37d0, 0x1, 0x1);
        gbc.writeMem(0xa0da, { 0xd6, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7f74);
        EXPECT(gbc.pc(), 0xa0dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0da), 0xd6);
        EXPECT(gbc.readMem(0xa0db), 0x78);
        // D6 02D8
        gbc.setState(0x1309, 0x2fdf, 0x7880, 0xa13a, 0x4d34, 0xeddf, 0x1, 0x1);
        gbc.writeMem(0x1309, { 0xd6, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2fdf);
        EXPECT(gbc.pc(), 0x130b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02DA
        gbc.setState(0x2c91, 0x4623, 0xfdc0, 0x51fb, 0xdc0f, 0x6a2e, 0x1, 0x1);
        gbc.writeMem(0x2c91, { 0xd6, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4623);
        EXPECT(gbc.pc(), 0x2c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02DB
        gbc.setState(0xa620, 0x6804, 0x7ea0, 0x4743, 0x29e9, 0x9e5e, 0x0, 0x0);
        gbc.writeMem(0xa620, { 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6804);
        EXPECT(gbc.pc(), 0xa622);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa620), 0xd6);
        EXPECT(gbc.readMem(0xa621), 0xc);
        // D6 02DC
        gbc.setState(0x9ce6, 0x9183, 0x2480, 0x6fc2, 0x7f0e, 0x791a, 0x1, 0x0);
        gbc.writeMem(0x9ce6, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9183);
        EXPECT(gbc.pc(), 0x9ce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce6), 0xd6);
        EXPECT(gbc.readMem(0x9ce7), 0x36);
        // D6 02DE
        gbc.setState(0x69a, 0xf681, 0x3bd0, 0x96be, 0xfc8d, 0x475d, 0x1, 0x0);
        gbc.writeMem(0x69a, { 0xd6, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf681);
        EXPECT(gbc.pc(), 0x69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02DF
        gbc.setState(0x91d0, 0xd581, 0xb820, 0xf4c0, 0x134b, 0xa133, 0x0, 0x1);
        gbc.writeMem(0x91d0, { 0xd6, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd581);
        EXPECT(gbc.pc(), 0x91d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91d0), 0xd6);
        EXPECT(gbc.readMem(0x91d1), 0x11);
        // D6 02E0
        gbc.setState(0xd71f, 0xba1b, 0x77e0, 0x6755, 0xb81d, 0x444d, 0x0, 0x1);
        gbc.writeMem(0xd71f, { 0xd6, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xba1b);
        EXPECT(gbc.pc(), 0xd721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd71f), 0xd6);
        EXPECT(gbc.readMem(0xd720), 0xc6);
        // D6 02E1
        gbc.setState(0x2cbf, 0xe7ed, 0x1e30, 0x5df5, 0x5b9a, 0x3902, 0x1, 0x1);
        gbc.writeMem(0x2cbf, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe7ed);
        EXPECT(gbc.pc(), 0x2cc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02E2
        gbc.setState(0x4052, 0x5cd, 0x6820, 0xd18b, 0xc79d, 0xc2a5, 0x0, 0x0);
        gbc.writeMem(0x4052, { 0xd6, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x5cd);
        EXPECT(gbc.pc(), 0x4054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02E4
        gbc.setState(0x79fb, 0x984e, 0x9d60, 0x6b7c, 0xf77e, 0xaaad, 0x0, 0x0);
        gbc.writeMem(0x79fb, { 0xd6, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x984e);
        EXPECT(gbc.pc(), 0x79fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02E5
        gbc.setState(0xa656, 0x53b8, 0x9710, 0xf7d3, 0x6ebe, 0x6404, 0x0, 0x0);
        gbc.writeMem(0xa656, { 0xd6, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x53b8);
        EXPECT(gbc.pc(), 0xa658);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa656), 0xd6);
        EXPECT(gbc.readMem(0xa657), 0x17);
        // D6 02E6
        gbc.setState(0x3d00, 0x914d, 0xd460, 0xc9d8, 0xe45a, 0xe172, 0x1, 0x1);
        gbc.writeMem(0x3d00, { 0xd6, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x914d);
        EXPECT(gbc.pc(), 0x3d02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02E7
        gbc.setState(0x6381, 0x9072, 0x4ef0, 0x1a54, 0x8470, 0xc514, 0x0, 0x0);
        gbc.writeMem(0x6381, { 0xd6, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9072);
        EXPECT(gbc.pc(), 0x6383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02E8
        gbc.setState(0xbb16, 0x3b89, 0x13f0, 0x7591, 0x72a7, 0x8a9f, 0x0, 0x1);
        gbc.writeMem(0xbb16, { 0xd6, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3b89);
        EXPECT(gbc.pc(), 0xbb18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb16), 0xd6);
        EXPECT(gbc.readMem(0xbb17), 0xe4);
        // D6 02E9
        gbc.setState(0xb525, 0xa799, 0x2b20, 0x5ed3, 0x42, 0x3d84, 0x0, 0x1);
        gbc.writeMem(0xb525, { 0xd6, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa799);
        EXPECT(gbc.pc(), 0xb527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb525), 0xd6);
        EXPECT(gbc.readMem(0xb526), 0x8a);
        // D6 02EA
        gbc.setState(0x27d, 0xcdb8, 0xb260, 0x5356, 0xbb78, 0xa903, 0x0, 0x0);
        gbc.writeMem(0x27d, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0x27f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02EB
        gbc.setState(0xee09, 0x60b6, 0xd4c0, 0xf58d, 0x6bb5, 0xecb7, 0x1, 0x1);
        gbc.writeMem(0xee09, { 0xd6, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x60b6);
        EXPECT(gbc.pc(), 0xee0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee09), 0xd6);
        EXPECT(gbc.readMem(0xee0a), 0xd2);
        // D6 02EC
        gbc.setState(0x42d8, 0xa118, 0x3e60, 0xfd35, 0xcb07, 0x76a9, 0x0, 0x0);
        gbc.writeMem(0x42d8, { 0xd6, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa118);
        EXPECT(gbc.pc(), 0x42da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 02ED
        gbc.setState(0xbd70, 0xdb92, 0x3e20, 0x9c, 0x5751, 0x51bd, 0x1, 0x1);
        gbc.writeMem(0xbd70, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xdb92);
        EXPECT(gbc.pc(), 0xbd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd70), 0xd6);
        EXPECT(gbc.readMem(0xbd71), 0xf7);
        // D6 02EE
        gbc.setState(0x642d, 0x16f1, 0x4bf0, 0x2e4f, 0xfafb, 0x7536, 0x1, 0x0);
        gbc.writeMem(0x642d, { 0xd6, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x16f1);
        EXPECT(gbc.pc(), 0x642f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02EF
        gbc.setState(0xd474, 0x8a46, 0xffd0, 0x423e, 0x31a7, 0xd396, 0x0, 0x1);
        gbc.writeMem(0xd474, { 0xd6, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8a46);
        EXPECT(gbc.pc(), 0xd476);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd474), 0xd6);
        EXPECT(gbc.readMem(0xd475), 0x48);
        // D6 02F0
        gbc.setState(0x83b, 0x6ae3, 0x9370, 0x1fd, 0x7176, 0xc0c, 0x0, 0x1);
        gbc.writeMem(0x83b, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6ae3);
        EXPECT(gbc.pc(), 0x83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 02F1
        gbc.setState(0xcd83, 0x3375, 0x78e0, 0x14e4, 0xc774, 0x9238, 0x1, 0x1);
        gbc.writeMem(0xcd83, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3375);
        EXPECT(gbc.pc(), 0xcd85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd83), 0xd6);
        EXPECT(gbc.readMem(0xcd84), 0x93);
        // D6 02F2
        gbc.setState(0xcbfe, 0xd3b, 0xacd0, 0x19dc, 0x6e24, 0x25f8, 0x1, 0x0);
        gbc.writeMem(0xcbfe, { 0xd6, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd3b);
        EXPECT(gbc.pc(), 0xcc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbfe), 0xd6);
        EXPECT(gbc.readMem(0xcbff), 0x65);
        // D6 02F3
        gbc.setState(0x38e1, 0xa95a, 0x9710, 0x7c82, 0xb2eb, 0x7fcf, 0x1, 0x1);
        gbc.writeMem(0x38e1, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa95a);
        EXPECT(gbc.pc(), 0x38e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02F5
        gbc.setState(0xb41b, 0x8a5c, 0x8690, 0xe719, 0xaa96, 0x3d1d, 0x0, 0x1);
        gbc.writeMem(0xb41b, { 0xd6, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8a5c);
        EXPECT(gbc.pc(), 0xb41d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41b), 0xd6);
        EXPECT(gbc.readMem(0xb41c), 0x58);
        // D6 02F7
        gbc.setState(0x2091, 0x764, 0x4b10, 0x8608, 0xea56, 0xb94b, 0x1, 0x1);
        gbc.writeMem(0x2091, { 0xd6, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x764);
        EXPECT(gbc.pc(), 0x2093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02F8
        gbc.setState(0xc0da, 0x7e6b, 0xe270, 0x484d, 0xe3cf, 0x8b0f, 0x0, 0x0);
        gbc.writeMem(0xc0da, { 0xd6, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7e6b);
        EXPECT(gbc.pc(), 0xc0dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0da), 0xd6);
        EXPECT(gbc.readMem(0xc0db), 0x62);
        // D6 02FA
        gbc.setState(0x332, 0xea18, 0xb7d0, 0x424, 0x9eab, 0x350a, 0x1, 0x1);
        gbc.writeMem(0x332, { 0xd6, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xea18);
        EXPECT(gbc.pc(), 0x334);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02FB
        gbc.setState(0xc54b, 0xc298, 0xbab0, 0xb8c3, 0x78b0, 0xe329, 0x1, 0x0);
        gbc.writeMem(0xc54b, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc298);
        EXPECT(gbc.pc(), 0xc54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc54b), 0xd6);
        EXPECT(gbc.readMem(0xc54c), 0x39);
        // D6 02FC
        gbc.setState(0xea28, 0x298e, 0x9510, 0xbacd, 0x434c, 0xe335, 0x1, 0x0);
        gbc.writeMem(0xea28, { 0xd6, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x298e);
        EXPECT(gbc.pc(), 0xea2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea28), 0xd6);
        EXPECT(gbc.readMem(0xea29), 0x85);
        // D6 02FD
        gbc.setState(0x1ff2, 0x3930, 0xf020, 0x3ff6, 0x7277, 0x6904, 0x0, 0x0);
        gbc.writeMem(0x1ff2, { 0xd6, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3930);
        EXPECT(gbc.pc(), 0x1ff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 02FE
        gbc.setState(0x3a92, 0xe4b, 0x30f0, 0x9b66, 0x294f, 0xb654, 0x1, 0x0);
        gbc.writeMem(0x3a92, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe4b);
        EXPECT(gbc.pc(), 0x3a94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 02FF
        gbc.setState(0xecdf, 0xae61, 0xa8f0, 0x880d, 0xc8b0, 0x3c76, 0x1, 0x0);
        gbc.writeMem(0xecdf, { 0xd6, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xae61);
        EXPECT(gbc.pc(), 0xece1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecdf), 0xd6);
        EXPECT(gbc.readMem(0xece0), 0x2e);
        // D6 0300
        gbc.setState(0x8f96, 0xa266, 0x3ea0, 0x212d, 0xb5b5, 0xa1b6, 0x1, 0x0);
        gbc.writeMem(0x8f96, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa266);
        EXPECT(gbc.pc(), 0x8f98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f96), 0xd6);
        EXPECT(gbc.readMem(0x8f97), 0xc5);
        // D6 0301
        gbc.setState(0x55a4, 0x2a78, 0x7990, 0x5d40, 0xa40f, 0x2cb1, 0x1, 0x1);
        gbc.writeMem(0x55a4, { 0xd6, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2a78);
        EXPECT(gbc.pc(), 0x55a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0302
        gbc.setState(0x3fed, 0x53bf, 0x7bb0, 0x7c1a, 0x46d3, 0x2b44, 0x1, 0x0);
        gbc.writeMem(0x3fed, { 0xd6, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x53bf);
        EXPECT(gbc.pc(), 0x3fef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0303
        gbc.setState(0x4905, 0x9a36, 0x8e10, 0x3425, 0xc8b0, 0x3993, 0x0, 0x0);
        gbc.writeMem(0x4905, { 0xd6, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9a36);
        EXPECT(gbc.pc(), 0x4907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0304
        gbc.setState(0x358b, 0x8c52, 0xbdf0, 0x7729, 0x6c86, 0xa243, 0x0, 0x0);
        gbc.writeMem(0x358b, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8c52);
        EXPECT(gbc.pc(), 0x358d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0305
        gbc.setState(0x8da7, 0x6d9e, 0xa630, 0x6dd9, 0xd876, 0x7361, 0x1, 0x0);
        gbc.writeMem(0x8da7, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6d9e);
        EXPECT(gbc.pc(), 0x8da9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8da7), 0xd6);
        EXPECT(gbc.readMem(0x8da8), 0xad);
        // D6 0306
        gbc.setState(0x643a, 0xcc37, 0xe360, 0xa9cc, 0x6303, 0xb885, 0x1, 0x1);
        gbc.writeMem(0x643a, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcc37);
        EXPECT(gbc.pc(), 0x643c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0307
        gbc.setState(0xcbc5, 0x220a, 0xbfc0, 0x2f30, 0xe281, 0xaf64, 0x0, 0x1);
        gbc.writeMem(0xcbc5, { 0xd6, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x220a);
        EXPECT(gbc.pc(), 0xcbc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc5), 0xd6);
        EXPECT(gbc.readMem(0xcbc6), 0x3);
        // D6 0308
        gbc.setState(0xb40b, 0x4e0b, 0x8c40, 0x3beb, 0x8701, 0x9709, 0x1, 0x0);
        gbc.writeMem(0xb40b, { 0xd6, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x4e0b);
        EXPECT(gbc.pc(), 0xb40d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb40b), 0xd6);
        EXPECT(gbc.readMem(0xb40c), 0xb6);
        // D6 0309
        gbc.setState(0xa5df, 0xb2d0, 0xd190, 0xdec2, 0xd898, 0x4a52, 0x1, 0x1);
        gbc.writeMem(0xa5df, { 0xd6, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb2d0);
        EXPECT(gbc.pc(), 0xa5e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5df), 0xd6);
        EXPECT(gbc.readMem(0xa5e0), 0x14);
        // D6 030A
        gbc.setState(0x3066, 0x6ec0, 0x7f00, 0x64c1, 0x826a, 0x24b2, 0x1, 0x1);
        gbc.writeMem(0x3066, { 0xd6, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6ec0);
        EXPECT(gbc.pc(), 0x3068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 030B
        gbc.setState(0xb6cd, 0xab3, 0xe940, 0xc7e6, 0xf81c, 0x1a26, 0x0, 0x0);
        gbc.writeMem(0xb6cd, { 0xd6, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xab3);
        EXPECT(gbc.pc(), 0xb6cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6cd), 0xd6);
        EXPECT(gbc.readMem(0xb6ce), 0xd9);
        // D6 030D
        gbc.setState(0xb621, 0x1e1f, 0x1020, 0xd406, 0x7501, 0x1a51, 0x1, 0x0);
        gbc.writeMem(0xb621, { 0xd6, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1e1f);
        EXPECT(gbc.pc(), 0xb623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb621), 0xd6);
        EXPECT(gbc.readMem(0xb622), 0xbd);
        // D6 030E
        gbc.setState(0xe554, 0x2155, 0xc120, 0xd23e, 0x1c25, 0x48a9, 0x1, 0x1);
        gbc.writeMem(0xe554, { 0xd6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2155);
        EXPECT(gbc.pc(), 0xe556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe554), 0xd6);
        EXPECT(gbc.readMem(0xe555), 0x43);
        // D6 030F
        gbc.setState(0xb7b, 0x7368, 0x13c0, 0x443b, 0x1666, 0x4117, 0x1, 0x1);
        gbc.writeMem(0xb7b, { 0xd6, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7368);
        EXPECT(gbc.pc(), 0xb7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0310
        gbc.setState(0xaac9, 0x3e94, 0xaa80, 0x1294, 0xfc53, 0x48ad, 0x0, 0x0);
        gbc.writeMem(0xaac9, { 0xd6, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3e94);
        EXPECT(gbc.pc(), 0xaacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac9), 0xd6);
        EXPECT(gbc.readMem(0xaaca), 0x2b);
        // D6 0311
        gbc.setState(0x303f, 0x4eea, 0xef0, 0xef57, 0xfe10, 0x3596, 0x1, 0x1);
        gbc.writeMem(0x303f, { 0xd6, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4eea);
        EXPECT(gbc.pc(), 0x3041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0312
        gbc.setState(0xc32d, 0xed9f, 0x3da0, 0x1da6, 0x7227, 0xc297, 0x0, 0x0);
        gbc.writeMem(0xc32d, { 0xd6, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xed9f);
        EXPECT(gbc.pc(), 0xc32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc32d), 0xd6);
        EXPECT(gbc.readMem(0xc32e), 0x9b);
        // D6 0313
        gbc.setState(0xd8ae, 0xef67, 0xd530, 0xf5, 0x56c4, 0xc2c1, 0x1, 0x0);
        gbc.writeMem(0xd8ae, { 0xd6, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xef67);
        EXPECT(gbc.pc(), 0xd8b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ae), 0xd6);
        EXPECT(gbc.readMem(0xd8af), 0x45);
        // D6 0314
        gbc.setState(0x6b00, 0x6eff, 0x50a0, 0x5ce2, 0xbc70, 0xfbcd, 0x1, 0x1);
        gbc.writeMem(0x6b00, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6eff);
        EXPECT(gbc.pc(), 0x6b02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0315
        gbc.setState(0x522f, 0x5083, 0xe10, 0x54a7, 0xdf82, 0x81bf, 0x1, 0x1);
        gbc.writeMem(0x522f, { 0xd6, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5083);
        EXPECT(gbc.pc(), 0x5231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0316
        gbc.setState(0x2979, 0xc4ba, 0xb2c0, 0x66fe, 0x8d9f, 0x863a, 0x1, 0x1);
        gbc.writeMem(0x2979, { 0xd6, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc4ba);
        EXPECT(gbc.pc(), 0x297b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0317
        gbc.setState(0x1a56, 0x4504, 0xa130, 0x7cc, 0x695a, 0xaf06, 0x1, 0x0);
        gbc.writeMem(0x1a56, { 0xd6, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4504);
        EXPECT(gbc.pc(), 0x1a58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0319
        gbc.setState(0x22f6, 0xe5d7, 0xd90, 0x96fe, 0xdf2, 0xa444, 0x1, 0x0);
        gbc.writeMem(0x22f6, { 0xd6, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe5d7);
        EXPECT(gbc.pc(), 0x22f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 031A
        gbc.setState(0x6c84, 0xede9, 0x8ed0, 0x7929, 0x49d, 0x47e1, 0x0, 0x0);
        gbc.writeMem(0x6c84, { 0xd6, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xede9);
        EXPECT(gbc.pc(), 0x6c86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 031B
        gbc.setState(0x8d89, 0xfd65, 0x3960, 0x3a01, 0xc710, 0xac3e, 0x1, 0x1);
        gbc.writeMem(0x8d89, { 0xd6, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xfd65);
        EXPECT(gbc.pc(), 0x8d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d89), 0xd6);
        EXPECT(gbc.readMem(0x8d8a), 0x79);
        // D6 031C
        gbc.setState(0x4a8b, 0xeb86, 0x22f0, 0xd3a3, 0xd0e2, 0x6bb7, 0x1, 0x1);
        gbc.writeMem(0x4a8b, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xeb86);
        EXPECT(gbc.pc(), 0x4a8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 031D
        gbc.setState(0x2029, 0x9e5b, 0x8740, 0xfe4c, 0xd3ef, 0x6ec7, 0x1, 0x1);
        gbc.writeMem(0x2029, { 0xd6, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9e5b);
        EXPECT(gbc.pc(), 0x202b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 031E
        gbc.setState(0x2668, 0x8145, 0x7af0, 0x6963, 0xd349, 0xb7d9, 0x0, 0x1);
        gbc.writeMem(0x2668, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x8145);
        EXPECT(gbc.pc(), 0x266a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 031F
        gbc.setState(0xab04, 0xb736, 0x9da0, 0x6b73, 0x21d0, 0xace, 0x1, 0x1);
        gbc.writeMem(0xab04, { 0xd6, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb736);
        EXPECT(gbc.pc(), 0xab06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab04), 0xd6);
        EXPECT(gbc.readMem(0xab05), 0x9d);
        // D6 0320
        gbc.setState(0x811d, 0x2f66, 0x5b50, 0x9187, 0xdaba, 0x83aa, 0x0, 0x0);
        gbc.writeMem(0x811d, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x2f66);
        EXPECT(gbc.pc(), 0x811f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811d), 0xd6);
        EXPECT(gbc.readMem(0x811e), 0x16);
        // D6 0321
        gbc.setState(0xc4b8, 0x20dd, 0x1310, 0xe6ae, 0xe7c6, 0x781f, 0x0, 0x1);
        gbc.writeMem(0xc4b8, { 0xd6, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x20dd);
        EXPECT(gbc.pc(), 0xc4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4b8), 0xd6);
        EXPECT(gbc.readMem(0xc4b9), 0x3a);
        // D6 0322
        gbc.setState(0x3cf5, 0xde9b, 0x3910, 0x6a29, 0x340f, 0x4646, 0x0, 0x1);
        gbc.writeMem(0x3cf5, { 0xd6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xde9b);
        EXPECT(gbc.pc(), 0x3cf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0323
        gbc.setState(0x9fe3, 0x4ab1, 0xb940, 0xf786, 0x6a69, 0x4075, 0x0, 0x0);
        gbc.writeMem(0x9fe3, { 0xd6, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4ab1);
        EXPECT(gbc.pc(), 0x9fe5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fe3), 0xd6);
        EXPECT(gbc.readMem(0x9fe4), 0x0);
        // D6 0324
        gbc.setState(0x74be, 0x44e9, 0xbd10, 0x619a, 0x9088, 0xf06e, 0x0, 0x0);
        gbc.writeMem(0x74be, { 0xd6, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x44e9);
        EXPECT(gbc.pc(), 0x74c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0325
        gbc.setState(0xa58, 0xfb71, 0xbed0, 0x75a4, 0xcb86, 0xaa09, 0x1, 0x1);
        gbc.writeMem(0xa58, { 0xd6, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xfb71);
        EXPECT(gbc.pc(), 0xa5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0326
        gbc.setState(0x9ae0, 0x49ce, 0xbad0, 0x4636, 0x1ab1, 0xe6c, 0x1, 0x1);
        gbc.writeMem(0x9ae0, { 0xd6, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x49ce);
        EXPECT(gbc.pc(), 0x9ae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae0), 0xd6);
        EXPECT(gbc.readMem(0x9ae1), 0x64);
        // D6 0327
        gbc.setState(0x7dfd, 0x3a3a, 0x88f0, 0x258d, 0x91f9, 0xa375, 0x0, 0x1);
        gbc.writeMem(0x7dfd, { 0xd6, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3a3a);
        EXPECT(gbc.pc(), 0x7dff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0328
        gbc.setState(0x5ab8, 0xdec0, 0x1300, 0x6ed3, 0xb59d, 0x7a03, 0x0, 0x0);
        gbc.writeMem(0x5ab8, { 0xd6, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdec0);
        EXPECT(gbc.pc(), 0x5aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0329
        gbc.setState(0x5d3e, 0xd506, 0x300, 0x7482, 0x850f, 0xb2b8, 0x0, 0x1);
        gbc.writeMem(0x5d3e, { 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd506);
        EXPECT(gbc.pc(), 0x5d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 032A
        gbc.setState(0x4d8d, 0xb49d, 0x3130, 0x32f3, 0x14f5, 0x1571, 0x1, 0x0);
        gbc.writeMem(0x4d8d, { 0xd6, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb49d);
        EXPECT(gbc.pc(), 0x4d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 032B
        gbc.setState(0x35c5, 0x6d33, 0x4a80, 0xe8d5, 0xc768, 0xd3ca, 0x0, 0x0);
        gbc.writeMem(0x35c5, { 0xd6, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6d33);
        EXPECT(gbc.pc(), 0x35c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 032C
        gbc.setState(0xefe6, 0x1f71, 0x3940, 0xb50e, 0x8ada, 0x6453, 0x1, 0x0);
        gbc.writeMem(0xefe6, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x1f71);
        EXPECT(gbc.pc(), 0xefe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe6), 0xd6);
        EXPECT(gbc.readMem(0xefe7), 0x1f);
        // D6 032D
        gbc.setState(0x3961, 0x1916, 0xd5e0, 0x9393, 0x5dbb, 0xcc10, 0x1, 0x1);
        gbc.writeMem(0x3961, { 0xd6, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x1916);
        EXPECT(gbc.pc(), 0x3963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 032E
        gbc.setState(0x3350, 0x9183, 0x38c0, 0x56f5, 0x33cf, 0xd937, 0x1, 0x0);
        gbc.writeMem(0x3350, { 0xd6, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9183);
        EXPECT(gbc.pc(), 0x3352);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 032F
        gbc.setState(0x7fea, 0xcf75, 0x3e90, 0xef13, 0xfe55, 0xa7eb, 0x1, 0x0);
        gbc.writeMem(0x7fea, { 0xd6, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcf75);
        EXPECT(gbc.pc(), 0x7fec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0330
        gbc.setState(0x2f4f, 0xbc57, 0xf050, 0xd598, 0x5e13, 0x9aef, 0x1, 0x0);
        gbc.writeMem(0x2f4f, { 0xd6, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbc57);
        EXPECT(gbc.pc(), 0x2f51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0331
        gbc.setState(0xe942, 0xd73c, 0x8f90, 0x34fd, 0x8f9a, 0x750f, 0x0, 0x1);
        gbc.writeMem(0xe942, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd73c);
        EXPECT(gbc.pc(), 0xe944);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe942), 0xd6);
        EXPECT(gbc.readMem(0xe943), 0xd0);
        // D6 0332
        gbc.setState(0x2adf, 0x6e26, 0xc2a0, 0x8165, 0x77fa, 0x595e, 0x1, 0x0);
        gbc.writeMem(0x2adf, { 0xd6, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6e26);
        EXPECT(gbc.pc(), 0x2ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0333
        gbc.setState(0x3f67, 0x5ccf, 0xd340, 0xd89c, 0xdcab, 0x6ded, 0x0, 0x0);
        gbc.writeMem(0x3f67, { 0xd6, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5ccf);
        EXPECT(gbc.pc(), 0x3f69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0334
        gbc.setState(0xe9d1, 0xaccd, 0xf610, 0x27a3, 0xee1c, 0xcca5, 0x0, 0x0);
        gbc.writeMem(0xe9d1, { 0xd6, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xaccd);
        EXPECT(gbc.pc(), 0xe9d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d1), 0xd6);
        EXPECT(gbc.readMem(0xe9d2), 0x88);
        // D6 0335
        gbc.setState(0x4298, 0xb07b, 0x8a70, 0x6323, 0x3db4, 0xe711, 0x1, 0x0);
        gbc.writeMem(0x4298, { 0xd6, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb07b);
        EXPECT(gbc.pc(), 0x429a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0336
        gbc.setState(0x5045, 0x777e, 0xcdb0, 0xa5cb, 0xfb16, 0x3920, 0x0, 0x1);
        gbc.writeMem(0x5045, { 0xd6, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x777e);
        EXPECT(gbc.pc(), 0x5047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0337
        gbc.setState(0xb9e7, 0x7ffd, 0x1a40, 0xeb5d, 0x73d8, 0x9171, 0x0, 0x1);
        gbc.writeMem(0xb9e7, { 0xd6, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7ffd);
        EXPECT(gbc.pc(), 0xb9e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e7), 0xd6);
        EXPECT(gbc.readMem(0xb9e8), 0xf5);
        // D6 0338
        gbc.setState(0x6a88, 0x828c, 0x88d0, 0xefb4, 0x583b, 0xbc5c, 0x1, 0x0);
        gbc.writeMem(0x6a88, { 0xd6, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x828c);
        EXPECT(gbc.pc(), 0x6a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0339
        gbc.setState(0x115e, 0x5402, 0x69b0, 0xa15c, 0xd1b, 0x441c, 0x0, 0x1);
        gbc.writeMem(0x115e, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5402);
        EXPECT(gbc.pc(), 0x1160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 033A
        gbc.setState(0x1364, 0xbdc4, 0x1790, 0xfbcc, 0x62cf, 0xa14f, 0x1, 0x0);
        gbc.writeMem(0x1364, { 0xd6, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xbdc4);
        EXPECT(gbc.pc(), 0x1366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 033B
        gbc.setState(0x46f2, 0x3b, 0x1e30, 0x2a14, 0xa30, 0xafc3, 0x1, 0x0);
        gbc.writeMem(0x46f2, { 0xd6, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3b);
        EXPECT(gbc.pc(), 0x46f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 033D
        gbc.setState(0xeed, 0xe1cc, 0x4540, 0x6d8f, 0x3089, 0xc295, 0x0, 0x1);
        gbc.writeMem(0xeed, { 0xd6, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe1cc);
        EXPECT(gbc.pc(), 0xeef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 033E
        gbc.setState(0xa1f0, 0x99d, 0x98d0, 0x9418, 0x78e1, 0x80df, 0x0, 0x0);
        gbc.writeMem(0xa1f0, { 0xd6, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x99d);
        EXPECT(gbc.pc(), 0xa1f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f0), 0xd6);
        EXPECT(gbc.readMem(0xa1f1), 0x7d);
        // D6 033F
        gbc.setState(0x71e6, 0xfbe0, 0x2330, 0x5c78, 0x8862, 0xdfb3, 0x0, 0x1);
        gbc.writeMem(0x71e6, { 0xd6, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xfbe0);
        EXPECT(gbc.pc(), 0x71e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0340
        gbc.setState(0xe5e9, 0xb04f, 0x3220, 0x706e, 0x56f7, 0x2887, 0x0, 0x1);
        gbc.writeMem(0xe5e9, { 0xd6, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb04f);
        EXPECT(gbc.pc(), 0xe5eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5e9), 0xd6);
        EXPECT(gbc.readMem(0xe5ea), 0xb7);
        // D6 0341
        gbc.setState(0x1fbf, 0x1005, 0xad50, 0xb847, 0x905c, 0x6b69, 0x0, 0x1);
        gbc.writeMem(0x1fbf, { 0xd6, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1005);
        EXPECT(gbc.pc(), 0x1fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0342
        gbc.setState(0x166f, 0xe79, 0x1000, 0x741a, 0xe17c, 0x8ead, 0x0, 0x0);
        gbc.writeMem(0x166f, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe79);
        EXPECT(gbc.pc(), 0x1671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0343
        gbc.setState(0xafbf, 0x8f90, 0xb890, 0x56a4, 0x1a1f, 0x8cb, 0x1, 0x1);
        gbc.writeMem(0xafbf, { 0xd6, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x8f90);
        EXPECT(gbc.pc(), 0xafc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbf), 0xd6);
        EXPECT(gbc.readMem(0xafc0), 0xe2);
        // D6 0344
        gbc.setState(0xee3a, 0x483d, 0x3010, 0x15ce, 0xa178, 0x9b0c, 0x1, 0x0);
        gbc.writeMem(0xee3a, { 0xd6, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x483d);
        EXPECT(gbc.pc(), 0xee3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee3a), 0xd6);
        EXPECT(gbc.readMem(0xee3b), 0xd7);
        // D6 0345
        gbc.setState(0x7a61, 0x5988, 0x14f0, 0xf944, 0xc75b, 0x50ce, 0x0, 0x0);
        gbc.writeMem(0x7a61, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x5988);
        EXPECT(gbc.pc(), 0x7a63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0346
        gbc.setState(0x54b, 0x9653, 0x7100, 0x1c0d, 0x4cd, 0x6413, 0x1, 0x1);
        gbc.writeMem(0x54b, { 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9653);
        EXPECT(gbc.pc(), 0x54d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0348
        gbc.setState(0x5665, 0xa737, 0xfc30, 0x492, 0x8dcf, 0xc48d, 0x1, 0x0);
        gbc.writeMem(0x5665, { 0xd6, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa737);
        EXPECT(gbc.pc(), 0x5667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0349
        gbc.setState(0x7111, 0x4ea3, 0xec60, 0xef93, 0x2b52, 0x2ccd, 0x1, 0x0);
        gbc.writeMem(0x7111, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4ea3);
        EXPECT(gbc.pc(), 0x7113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 034A
        gbc.setState(0x84fb, 0x48d1, 0xb3f0, 0x253b, 0x94bd, 0x1fd7, 0x0, 0x0);
        gbc.writeMem(0x84fb, { 0xd6, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x48d1);
        EXPECT(gbc.pc(), 0x84fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84fb), 0xd6);
        EXPECT(gbc.readMem(0x84fc), 0x71);
        // D6 034B
        gbc.setState(0x8653, 0xa50c, 0xd870, 0x7b7b, 0x9762, 0x7e73, 0x0, 0x0);
        gbc.writeMem(0x8653, { 0xd6, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa50c);
        EXPECT(gbc.pc(), 0x8655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8653), 0xd6);
        EXPECT(gbc.readMem(0x8654), 0xa9);
        // D6 034C
        gbc.setState(0x772, 0x4152, 0x32a0, 0x84b9, 0xbd1c, 0x38db, 0x0, 0x0);
        gbc.writeMem(0x772, { 0xd6, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4152);
        EXPECT(gbc.pc(), 0x774);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 034D
        gbc.setState(0x7eb7, 0xcf3d, 0xafd0, 0x93fb, 0xed14, 0x768d, 0x0, 0x0);
        gbc.writeMem(0x7eb7, { 0xd6, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xcf3d);
        EXPECT(gbc.pc(), 0x7eb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 034E
        gbc.setState(0xa5f1, 0xc520, 0x5190, 0x8e61, 0xeca4, 0xbc89, 0x1, 0x0);
        gbc.writeMem(0xa5f1, { 0xd6, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc520);
        EXPECT(gbc.pc(), 0xa5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5f1), 0xd6);
        EXPECT(gbc.readMem(0xa5f2), 0xe6);
        // D6 034F
        gbc.setState(0x39ef, 0x7681, 0x24b0, 0xb25a, 0x771b, 0x32ba, 0x1, 0x0);
        gbc.writeMem(0x39ef, { 0xd6, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x7681);
        EXPECT(gbc.pc(), 0x39f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0350
        gbc.setState(0x54fc, 0xf27, 0x3320, 0x8c63, 0x54e1, 0xb2b9, 0x1, 0x0);
        gbc.writeMem(0x54fc, { 0xd6, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf27);
        EXPECT(gbc.pc(), 0x54fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0351
        gbc.setState(0xcb93, 0x4fad, 0x5e90, 0x8b6d, 0x5a15, 0xc1bb, 0x1, 0x0);
        gbc.writeMem(0xcb93, { 0xd6, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4fad);
        EXPECT(gbc.pc(), 0xcb95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb93), 0xd6);
        EXPECT(gbc.readMem(0xcb94), 0x12);
        // D6 0352
        gbc.setState(0xd89, 0xbb0e, 0x3c40, 0xb27b, 0x6db7, 0x1047, 0x1, 0x1);
        gbc.writeMem(0xd89, { 0xd6, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xbb0e);
        EXPECT(gbc.pc(), 0xd8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0353
        gbc.setState(0x9ecc, 0xee63, 0x9fc0, 0xfe66, 0x36b5, 0x95b3, 0x0, 0x1);
        gbc.writeMem(0x9ecc, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xee63);
        EXPECT(gbc.pc(), 0x9ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ecc), 0xd6);
        EXPECT(gbc.readMem(0x9ecd), 0xaf);
        // D6 0354
        gbc.setState(0xb1ef, 0x51b0, 0xb9f0, 0x9830, 0x7476, 0x8018, 0x0, 0x1);
        gbc.writeMem(0xb1ef, { 0xd6, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x51b0);
        EXPECT(gbc.pc(), 0xb1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ef), 0xd6);
        EXPECT(gbc.readMem(0xb1f0), 0x22);
        // D6 0355
        gbc.setState(0x9564, 0x5695, 0x9c70, 0xa32a, 0x5bfd, 0x7199, 0x1, 0x0);
        gbc.writeMem(0x9564, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5695);
        EXPECT(gbc.pc(), 0x9566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9564), 0xd6);
        EXPECT(gbc.readMem(0x9565), 0x3b);
        // D6 0356
        gbc.setState(0x937b, 0xae82, 0xe690, 0xef84, 0x891d, 0x79e1, 0x1, 0x0);
        gbc.writeMem(0x937b, { 0xd6, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xae82);
        EXPECT(gbc.pc(), 0x937d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937b), 0xd6);
        EXPECT(gbc.readMem(0x937c), 0xc4);
        // D6 0358
        gbc.setState(0x1e39, 0x4b76, 0xfc90, 0xe2a6, 0x1098, 0x67f9, 0x1, 0x0);
        gbc.writeMem(0x1e39, { 0xd6, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4b76);
        EXPECT(gbc.pc(), 0x1e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0359
        gbc.setState(0xa37, 0x55d7, 0xa500, 0x268, 0x4e93, 0x89be, 0x1, 0x1);
        gbc.writeMem(0xa37, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x55d7);
        EXPECT(gbc.pc(), 0xa39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 035A
        gbc.setState(0x71dd, 0x26be, 0x46f0, 0x22aa, 0x49fc, 0xe1e9, 0x0, 0x1);
        gbc.writeMem(0x71dd, { 0xd6, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x26be);
        EXPECT(gbc.pc(), 0x71df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 035C
        gbc.setState(0x9933, 0x6fda, 0x2070, 0x5354, 0xfea5, 0x1a8a, 0x0, 0x1);
        gbc.writeMem(0x9933, { 0xd6, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6fda);
        EXPECT(gbc.pc(), 0x9935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9933), 0xd6);
        EXPECT(gbc.readMem(0x9934), 0xb7);
        // D6 035D
        gbc.setState(0x9d43, 0x6570, 0x6130, 0xb59, 0xe86d, 0x9b6d, 0x0, 0x0);
        gbc.writeMem(0x9d43, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6570);
        EXPECT(gbc.pc(), 0x9d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d43), 0xd6);
        EXPECT(gbc.readMem(0x9d44), 0x53);
        // D6 035E
        gbc.setState(0x8e14, 0x8690, 0x5950, 0x8dc4, 0xe5ff, 0xcf34, 0x1, 0x1);
        gbc.writeMem(0x8e14, { 0xd6, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8690);
        EXPECT(gbc.pc(), 0x8e16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e14), 0xd6);
        EXPECT(gbc.readMem(0x8e15), 0x84);
        // D6 035F
        gbc.setState(0x28c9, 0xfcb6, 0x3970, 0x3565, 0x7a88, 0x6f3c, 0x0, 0x0);
        gbc.writeMem(0x28c9, { 0xd6, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xfcb6);
        EXPECT(gbc.pc(), 0x28cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0360
        gbc.setState(0x5209, 0x5744, 0x71d0, 0x4475, 0x1447, 0x8949, 0x0, 0x1);
        gbc.writeMem(0x5209, { 0xd6, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5744);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0361
        gbc.setState(0x1aba, 0xe2ce, 0x32a0, 0xfbcd, 0x11dc, 0x5b59, 0x1, 0x0);
        gbc.writeMem(0x1aba, { 0xd6, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xe2ce);
        EXPECT(gbc.pc(), 0x1abc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0362
        gbc.setState(0x2060, 0x9650, 0x7d10, 0xbd2d, 0xa549, 0x967e, 0x0, 0x1);
        gbc.writeMem(0x2060, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9650);
        EXPECT(gbc.pc(), 0x2062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0363
        gbc.setState(0x527e, 0xb722, 0x3440, 0x2fac, 0xd127, 0x552a, 0x0, 0x1);
        gbc.writeMem(0x527e, { 0xd6, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb722);
        EXPECT(gbc.pc(), 0x5280);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0364
        gbc.setState(0x18e5, 0x7a3, 0xcff0, 0x450b, 0x6c63, 0xcd77, 0x1, 0x1);
        gbc.writeMem(0x18e5, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7a3);
        EXPECT(gbc.pc(), 0x18e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0365
        gbc.setState(0x7ab5, 0xaf9c, 0x5470, 0x68b1, 0x429b, 0xcc0e, 0x1, 0x1);
        gbc.writeMem(0x7ab5, { 0xd6, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xaf9c);
        EXPECT(gbc.pc(), 0x7ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0366
        gbc.setState(0x305, 0x41d2, 0x5090, 0xd22f, 0xcaa, 0x5c03, 0x1, 0x1);
        gbc.writeMem(0x305, { 0xd6, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x41d2);
        EXPECT(gbc.pc(), 0x307);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0367
        gbc.setState(0x5317, 0x61ca, 0xb250, 0xe496, 0x878d, 0x331, 0x0, 0x1);
        gbc.writeMem(0x5317, { 0xd6, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x61ca);
        EXPECT(gbc.pc(), 0x5319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0368
        gbc.setState(0xce9d, 0x63eb, 0xb040, 0x7e90, 0xaeef, 0x327a, 0x0, 0x1);
        gbc.writeMem(0xce9d, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x63eb);
        EXPECT(gbc.pc(), 0xce9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce9d), 0xd6);
        EXPECT(gbc.readMem(0xce9e), 0x36);
        // D6 036A
        gbc.setState(0x9ca6, 0x4571, 0xa4f0, 0xc440, 0x75ae, 0x9061, 0x1, 0x1);
        gbc.writeMem(0x9ca6, { 0xd6, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4571);
        EXPECT(gbc.pc(), 0x9ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca6), 0xd6);
        EXPECT(gbc.readMem(0x9ca7), 0xe6);
        // D6 036B
        gbc.setState(0x4d3b, 0x8bb5, 0xbf00, 0x8c06, 0xc4b7, 0x704a, 0x0, 0x0);
        gbc.writeMem(0x4d3b, { 0xd6, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x8bb5);
        EXPECT(gbc.pc(), 0x4d3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 036C
        gbc.setState(0xa3ad, 0x978b, 0xc6b0, 0x22d7, 0x3697, 0xd1f4, 0x0, 0x1);
        gbc.writeMem(0xa3ad, { 0xd6, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x978b);
        EXPECT(gbc.pc(), 0xa3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ad), 0xd6);
        EXPECT(gbc.readMem(0xa3ae), 0xa6);
        // D6 036D
        gbc.setState(0x5a42, 0xe9b3, 0xeb80, 0xe248, 0x8169, 0xbb39, 0x0, 0x0);
        gbc.writeMem(0x5a42, { 0xd6, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe9b3);
        EXPECT(gbc.pc(), 0x5a44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 036E
        gbc.setState(0xa657, 0x4b79, 0x5290, 0xcfe7, 0xc6db, 0x8fba, 0x1, 0x1);
        gbc.writeMem(0xa657, { 0xd6, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4b79);
        EXPECT(gbc.pc(), 0xa659);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa657), 0xd6);
        EXPECT(gbc.readMem(0xa658), 0x5c);
        // D6 036F
        gbc.setState(0xe72b, 0x8d21, 0xcad0, 0xa129, 0x3ce5, 0x3bd5, 0x1, 0x1);
        gbc.writeMem(0xe72b, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8d21);
        EXPECT(gbc.pc(), 0xe72d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe72b), 0xd6);
        EXPECT(gbc.readMem(0xe72c), 0xa3);
        // D6 0370
        gbc.setState(0x168d, 0x89a9, 0xa6f0, 0x39c7, 0xeb19, 0xd56, 0x1, 0x1);
        gbc.writeMem(0x168d, { 0xd6, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x89a9);
        EXPECT(gbc.pc(), 0x168f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0371
        gbc.setState(0x6263, 0xdda5, 0x17d0, 0xe548, 0x9c6e, 0x4522, 0x1, 0x0);
        gbc.writeMem(0x6263, { 0xd6, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdda5);
        EXPECT(gbc.pc(), 0x6265);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0372
        gbc.setState(0xb381, 0x917b, 0x5150, 0x3ce8, 0x4ceb, 0x16aa, 0x0, 0x0);
        gbc.writeMem(0xb381, { 0xd6, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x917b);
        EXPECT(gbc.pc(), 0xb383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb381), 0xd6);
        EXPECT(gbc.readMem(0xb382), 0x58);
        // D6 0373
        gbc.setState(0x8ffe, 0x2f7, 0xac60, 0x441, 0x1767, 0x61a0, 0x1, 0x0);
        gbc.writeMem(0x8ffe, { 0xd6, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2f7);
        EXPECT(gbc.pc(), 0x9000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ffe), 0xd6);
        EXPECT(gbc.readMem(0x8fff), 0xec);
        // D6 0374
        gbc.setState(0xa571, 0x5697, 0xc8b0, 0x3ff5, 0xf21d, 0xc6b5, 0x0, 0x0);
        gbc.writeMem(0xa571, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5697);
        EXPECT(gbc.pc(), 0xa573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa571), 0xd6);
        EXPECT(gbc.readMem(0xa572), 0xa);
        // D6 0375
        gbc.setState(0x4bbd, 0xaa, 0xf820, 0xedd4, 0x5b3, 0x15b4, 0x1, 0x1);
        gbc.writeMem(0x4bbd, { 0xd6, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xaa);
        EXPECT(gbc.pc(), 0x4bbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0376
        gbc.setState(0x653d, 0x9e28, 0xbe80, 0x5a67, 0x88dc, 0x7a7e, 0x0, 0x1);
        gbc.writeMem(0x653d, { 0xd6, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9e28);
        EXPECT(gbc.pc(), 0x653f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0377
        gbc.setState(0x105b, 0x33ae, 0x67b0, 0xf497, 0x9659, 0xa674, 0x1, 0x1);
        gbc.writeMem(0x105b, { 0xd6, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x33ae);
        EXPECT(gbc.pc(), 0x105d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0378
        gbc.setState(0x59ca, 0x49bd, 0x56a0, 0x7c35, 0x39f, 0x60f2, 0x0, 0x0);
        gbc.writeMem(0x59ca, { 0xd6, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x49bd);
        EXPECT(gbc.pc(), 0x59cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0379
        gbc.setState(0x72e3, 0x493e, 0xc1f0, 0x2c6c, 0x39fc, 0x9bb5, 0x1, 0x1);
        gbc.writeMem(0x72e3, { 0xd6, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x493e);
        EXPECT(gbc.pc(), 0x72e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 037A
        gbc.setState(0x2596, 0x1011, 0x5e60, 0x74d8, 0x43bd, 0x4c4d, 0x0, 0x0);
        gbc.writeMem(0x2596, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1011);
        EXPECT(gbc.pc(), 0x2598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 037B
        gbc.setState(0x271b, 0xa683, 0x580, 0x698f, 0x7526, 0x26b6, 0x1, 0x1);
        gbc.writeMem(0x271b, { 0xd6, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xa683);
        EXPECT(gbc.pc(), 0x271d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 037C
        gbc.setState(0x55c5, 0x5157, 0x5c10, 0x3698, 0x44d9, 0x5649, 0x0, 0x1);
        gbc.writeMem(0x55c5, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5157);
        EXPECT(gbc.pc(), 0x55c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 037D
        gbc.setState(0xb25d, 0x89b9, 0xb7e0, 0x8f1b, 0x3b0d, 0xfc99, 0x1, 0x0);
        gbc.writeMem(0xb25d, { 0xd6, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x89b9);
        EXPECT(gbc.pc(), 0xb25f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb25d), 0xd6);
        EXPECT(gbc.readMem(0xb25e), 0x6d);
        // D6 037E
        gbc.setState(0x5353, 0xe161, 0xee60, 0x2949, 0x6a07, 0xc548, 0x1, 0x1);
        gbc.writeMem(0x5353, { 0xd6, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe161);
        EXPECT(gbc.pc(), 0x5355);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 037F
        gbc.setState(0x1b20, 0xc6f9, 0xb6a0, 0x751c, 0x89, 0x9b8e, 0x0, 0x1);
        gbc.writeMem(0x1b20, { 0xd6, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc6f9);
        EXPECT(gbc.pc(), 0x1b22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0380
        gbc.setState(0xc384, 0xb100, 0xd680, 0xf46c, 0x6866, 0x3869, 0x0, 0x0);
        gbc.writeMem(0xc384, { 0xd6, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb100);
        EXPECT(gbc.pc(), 0xc386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc384), 0xd6);
        EXPECT(gbc.readMem(0xc385), 0xa1);
        // D6 0381
        gbc.setState(0x5853, 0xd6a8, 0x55d0, 0xd484, 0xc8d8, 0x99c6, 0x0, 0x0);
        gbc.writeMem(0x5853, { 0xd6, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd6a8);
        EXPECT(gbc.pc(), 0x5855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0382
        gbc.setState(0x18fe, 0x6109, 0x6ad0, 0x8c6c, 0xa3a2, 0xa23b, 0x1, 0x1);
        gbc.writeMem(0x18fe, { 0xd6, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6109);
        EXPECT(gbc.pc(), 0x1900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0383
        gbc.setState(0x7fd6, 0x8cf9, 0xfc40, 0xb8d9, 0xb8, 0xabce, 0x0, 0x1);
        gbc.writeMem(0x7fd6, { 0xd6, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8cf9);
        EXPECT(gbc.pc(), 0x7fd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0384
        gbc.setState(0x6c0d, 0x25, 0x6f60, 0x6194, 0xf068, 0x6849, 0x0, 0x1);
        gbc.writeMem(0x6c0d, { 0xd6, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x25);
        EXPECT(gbc.pc(), 0x6c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0385
        gbc.setState(0x76a9, 0xf815, 0x30, 0xbd74, 0x5bf3, 0x77f5, 0x1, 0x0);
        gbc.writeMem(0x76a9, { 0xd6, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf815);
        EXPECT(gbc.pc(), 0x76ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0386
        gbc.setState(0xa28b, 0x2180, 0x2cd0, 0xf8a7, 0xd55e, 0xdbd1, 0x1, 0x0);
        gbc.writeMem(0xa28b, { 0xd6, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2180);
        EXPECT(gbc.pc(), 0xa28d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa28b), 0xd6);
        EXPECT(gbc.readMem(0xa28c), 0x76);
        // D6 0387
        gbc.setState(0xa0fd, 0x2ec2, 0x1160, 0x5280, 0x1ed2, 0x9ff1, 0x0, 0x1);
        gbc.writeMem(0xa0fd, { 0xd6, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2ec2);
        EXPECT(gbc.pc(), 0xa0ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0fd), 0xd6);
        EXPECT(gbc.readMem(0xa0fe), 0x7c);
        // D6 0389
        gbc.setState(0xaae6, 0x17a1, 0xf6a0, 0x6a9c, 0xc5f1, 0xb080, 0x0, 0x0);
        gbc.writeMem(0xaae6, { 0xd6, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x17a1);
        EXPECT(gbc.pc(), 0xaae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaae6), 0xd6);
        EXPECT(gbc.readMem(0xaae7), 0xd6);
        // D6 038A
        gbc.setState(0x4a4e, 0x26f, 0xd680, 0x6706, 0xd11d, 0x53c6, 0x1, 0x1);
        gbc.writeMem(0x4a4e, { 0xd6, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x26f);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 038B
        gbc.setState(0xd8ad, 0x29a1, 0x89e0, 0x329d, 0x10ea, 0x9e40, 0x0, 0x0);
        gbc.writeMem(0xd8ad, { 0xd6, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x29a1);
        EXPECT(gbc.pc(), 0xd8af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ad), 0xd6);
        EXPECT(gbc.readMem(0xd8ae), 0x52);
        // D6 038C
        gbc.setState(0xea0c, 0x9519, 0xdde0, 0x241d, 0xd234, 0x3282, 0x1, 0x1);
        gbc.writeMem(0xea0c, { 0xd6, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9519);
        EXPECT(gbc.pc(), 0xea0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0c), 0xd6);
        EXPECT(gbc.readMem(0xea0d), 0x25);
        // D6 038D
        gbc.setState(0x7bf8, 0x7a85, 0xb1a0, 0x908c, 0xf59b, 0xd31d, 0x0, 0x0);
        gbc.writeMem(0x7bf8, { 0xd6, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7a85);
        EXPECT(gbc.pc(), 0x7bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 038E
        gbc.setState(0xc40f, 0x9500, 0x4db0, 0x279d, 0x6c9d, 0xbe4d, 0x1, 0x0);
        gbc.writeMem(0xc40f, { 0xd6, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9500);
        EXPECT(gbc.pc(), 0xc411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc40f), 0xd6);
        EXPECT(gbc.readMem(0xc410), 0xf0);
        // D6 038F
        gbc.setState(0xd6a8, 0xeafc, 0xb930, 0x199b, 0xa10a, 0xc92d, 0x1, 0x0);
        gbc.writeMem(0xd6a8, { 0xd6, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xeafc);
        EXPECT(gbc.pc(), 0xd6aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a8), 0xd6);
        EXPECT(gbc.readMem(0xd6a9), 0x97);
        // D6 0390
        gbc.setState(0x97cc, 0x3c1d, 0xdb0, 0x5de, 0x6b99, 0xf7f5, 0x0, 0x1);
        gbc.writeMem(0x97cc, { 0xd6, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x3c1d);
        EXPECT(gbc.pc(), 0x97ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97cc), 0xd6);
        EXPECT(gbc.readMem(0x97cd), 0xd7);
        // D6 0391
        gbc.setState(0x8320, 0x8073, 0x31a0, 0x62c3, 0x8d72, 0xab4e, 0x0, 0x0);
        gbc.writeMem(0x8320, { 0xd6, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8073);
        EXPECT(gbc.pc(), 0x8322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8320), 0xd6);
        EXPECT(gbc.readMem(0x8321), 0x16);
        // D6 0392
        gbc.setState(0x7369, 0xcc87, 0xddd0, 0x9542, 0x903d, 0x372a, 0x0, 0x0);
        gbc.writeMem(0x7369, { 0xd6, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xcc87);
        EXPECT(gbc.pc(), 0x736b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0393
        gbc.setState(0xeeb7, 0x4e58, 0x6e30, 0xf42c, 0x17f2, 0xd02, 0x1, 0x0);
        gbc.writeMem(0xeeb7, { 0xd6, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4e58);
        EXPECT(gbc.pc(), 0xeeb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeb7), 0xd6);
        EXPECT(gbc.readMem(0xeeb8), 0xa0);
        // D6 0394
        gbc.setState(0x3ec7, 0xf3dd, 0x38d0, 0x45f8, 0x57a4, 0x2396, 0x0, 0x1);
        gbc.writeMem(0x3ec7, { 0xd6, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf3dd);
        EXPECT(gbc.pc(), 0x3ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 0395
        gbc.setState(0x9389, 0xd156, 0xdd70, 0xa051, 0xe5ee, 0xd143, 0x1, 0x1);
        gbc.writeMem(0x9389, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd156);
        EXPECT(gbc.pc(), 0x938b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9389), 0xd6);
        EXPECT(gbc.readMem(0x938a), 0xf7);
        // D6 0396
        gbc.setState(0x146, 0x2f01, 0xd450, 0x4b2f, 0xc847, 0xeb9b, 0x1, 0x0);
        gbc.writeMem(0x146, { 0xd6, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2f01);
        EXPECT(gbc.pc(), 0x148);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 0397
        gbc.setState(0x3e5d, 0x91f, 0x2680, 0xd6d3, 0x192a, 0x5f03, 0x0, 0x1);
        gbc.writeMem(0x3e5d, { 0xd6, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x91f);
        EXPECT(gbc.pc(), 0x3e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 0398
        gbc.setState(0x7882, 0x69cb, 0xb490, 0x5df, 0x2cac, 0x8e3e, 0x0, 0x0);
        gbc.writeMem(0x7882, { 0xd6, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x69cb);
        EXPECT(gbc.pc(), 0x7884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 0399
        gbc.setState(0x64b, 0xbd71, 0x710, 0xbe7e, 0x6057, 0xffaa, 0x0, 0x0);
        gbc.writeMem(0x64b, { 0xd6, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbd71);
        EXPECT(gbc.pc(), 0x64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 039A
        gbc.setState(0x671f, 0xb6cb, 0x70d0, 0x12e1, 0x920b, 0x8af3, 0x0, 0x0);
        gbc.writeMem(0x671f, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb6cb);
        EXPECT(gbc.pc(), 0x6721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 039B
        gbc.setState(0xda4c, 0x56b5, 0x1520, 0x187c, 0xba06, 0xbb1f, 0x1, 0x1);
        gbc.writeMem(0xda4c, { 0xd6, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x56b5);
        EXPECT(gbc.pc(), 0xda4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda4c), 0xd6);
        EXPECT(gbc.readMem(0xda4d), 0x3b);
        // D6 039C
        gbc.setState(0x91db, 0xf85, 0xd400, 0xbad2, 0x55a5, 0x984b, 0x0, 0x1);
        gbc.writeMem(0x91db, { 0xd6, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf85);
        EXPECT(gbc.pc(), 0x91dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91db), 0xd6);
        EXPECT(gbc.readMem(0x91dc), 0xdc);
        // D6 039D
        gbc.setState(0xa2a, 0xb13e, 0x2e40, 0x23c2, 0xd3a8, 0xbfdb, 0x0, 0x1);
        gbc.writeMem(0xa2a, { 0xd6, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb13e);
        EXPECT(gbc.pc(), 0xa2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 039E
        gbc.setState(0x64c3, 0xd14a, 0x19b0, 0xc093, 0x56e0, 0xeff9, 0x1, 0x0);
        gbc.writeMem(0x64c3, { 0xd6, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd14a);
        EXPECT(gbc.pc(), 0x64c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 039F
        gbc.setState(0x560d, 0x2d74, 0x1bf0, 0xedb1, 0x8d52, 0xd023, 0x0, 0x1);
        gbc.writeMem(0x560d, { 0xd6, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2d74);
        EXPECT(gbc.pc(), 0x560f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03A0
        gbc.setState(0x3cd7, 0xdf15, 0xe170, 0x78e9, 0x68c0, 0x85ad, 0x0, 0x1);
        gbc.writeMem(0x3cd7, { 0xd6, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xdf15);
        EXPECT(gbc.pc(), 0x3cd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03A1
        gbc.setState(0x1fa9, 0xf17b, 0xb4d0, 0xb4dd, 0x603e, 0xde75, 0x1, 0x1);
        gbc.writeMem(0x1fa9, { 0xd6, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf17b);
        EXPECT(gbc.pc(), 0x1fab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03A2
        gbc.setState(0x585e, 0xf75, 0xe4a0, 0x2bf1, 0x874d, 0xff72, 0x0, 0x0);
        gbc.writeMem(0x585e, { 0xd6, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf75);
        EXPECT(gbc.pc(), 0x5860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03A3
        gbc.setState(0x324, 0x633c, 0x4b20, 0x95da, 0x4b36, 0xbeb7, 0x1, 0x1);
        gbc.writeMem(0x324, { 0xd6, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x633c);
        EXPECT(gbc.pc(), 0x326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03A4
        gbc.setState(0xd8d5, 0x4bc7, 0xdc30, 0x9691, 0x9c2b, 0x4677, 0x1, 0x0);
        gbc.writeMem(0xd8d5, { 0xd6, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x4bc7);
        EXPECT(gbc.pc(), 0xd8d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d5), 0xd6);
        EXPECT(gbc.readMem(0xd8d6), 0x6c);
        // D6 03A5
        gbc.setState(0x78e2, 0x786e, 0xfb40, 0xf7a6, 0xdb4d, 0x6cbc, 0x0, 0x0);
        gbc.writeMem(0x78e2, { 0xd6, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x786e);
        EXPECT(gbc.pc(), 0x78e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03A6
        gbc.setState(0x75d6, 0x709e, 0x4a20, 0x9fa2, 0xd37d, 0x8492, 0x0, 0x0);
        gbc.writeMem(0x75d6, { 0xd6, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x709e);
        EXPECT(gbc.pc(), 0x75d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03A7
        gbc.setState(0xa19, 0x80a8, 0xe790, 0x9264, 0x6160, 0x38fc, 0x1, 0x1);
        gbc.writeMem(0xa19, { 0xd6, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x80a8);
        EXPECT(gbc.pc(), 0xa1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03A8
        gbc.setState(0xb8e9, 0xb8e2, 0x97e0, 0x7022, 0x6d25, 0x1000, 0x0, 0x0);
        gbc.writeMem(0xb8e9, { 0xd6, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb8e2);
        EXPECT(gbc.pc(), 0xb8eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e9), 0xd6);
        EXPECT(gbc.readMem(0xb8ea), 0x8c);
        // D6 03A9
        gbc.setState(0x5589, 0xa9c2, 0x2cf0, 0x528, 0x739a, 0x4c77, 0x1, 0x0);
        gbc.writeMem(0x5589, { 0xd6, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa9c2);
        EXPECT(gbc.pc(), 0x558b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03AA
        gbc.setState(0x36fc, 0xdd64, 0x5af0, 0xd85, 0xe402, 0x914, 0x0, 0x1);
        gbc.writeMem(0x36fc, { 0xd6, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdd64);
        EXPECT(gbc.pc(), 0x36fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03AB
        gbc.setState(0xee10, 0x9cf9, 0xddc0, 0x8c2e, 0x3f33, 0xb901, 0x1, 0x1);
        gbc.writeMem(0xee10, { 0xd6, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9cf9);
        EXPECT(gbc.pc(), 0xee12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee10), 0xd6);
        EXPECT(gbc.readMem(0xee11), 0x2e);
        // D6 03AC
        gbc.setState(0x8609, 0xd9be, 0x61b0, 0xed03, 0xdcaf, 0xfbc1, 0x0, 0x1);
        gbc.writeMem(0x8609, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0x860b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8609), 0xd6);
        EXPECT(gbc.readMem(0x860a), 0x3e);
        // D6 03AD
        gbc.setState(0x3e3c, 0xc27c, 0x6f70, 0xca29, 0x9009, 0x638b, 0x0, 0x0);
        gbc.writeMem(0x3e3c, { 0xd6, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc27c);
        EXPECT(gbc.pc(), 0x3e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03AE
        gbc.setState(0xa674, 0xa04c, 0x6810, 0x4b89, 0xca22, 0xd9ff, 0x1, 0x1);
        gbc.writeMem(0xa674, { 0xd6, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa04c);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa674), 0xd6);
        EXPECT(gbc.readMem(0xa675), 0x9b);
        // D6 03B0
        gbc.setState(0x25d1, 0x47c1, 0xfa10, 0x3437, 0x7512, 0x78e, 0x0, 0x1);
        gbc.writeMem(0x25d1, { 0xd6, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x47c1);
        EXPECT(gbc.pc(), 0x25d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03B1
        gbc.setState(0x83d6, 0x17, 0xe7a0, 0x1940, 0x8dcf, 0x99b, 0x0, 0x1);
        gbc.writeMem(0x83d6, { 0xd6, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x17);
        EXPECT(gbc.pc(), 0x83d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d6), 0xd6);
        EXPECT(gbc.readMem(0x83d7), 0xa3);
        // D6 03B2
        gbc.setState(0x762b, 0x1061, 0xfdb0, 0x6dc2, 0x55e6, 0x72d1, 0x1, 0x0);
        gbc.writeMem(0x762b, { 0xd6, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1061);
        EXPECT(gbc.pc(), 0x762d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03B3
        gbc.setState(0xbc34, 0x833b, 0xb860, 0x36fc, 0xf20b, 0x22a5, 0x0, 0x0);
        gbc.writeMem(0xbc34, { 0xd6, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x833b);
        EXPECT(gbc.pc(), 0xbc36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc34), 0xd6);
        EXPECT(gbc.readMem(0xbc35), 0xb5);
        // D6 03B4
        gbc.setState(0x5e0b, 0xb8cd, 0x7d60, 0xf35f, 0xbd52, 0xa1c4, 0x0, 0x0);
        gbc.writeMem(0x5e0b, { 0xd6, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb8cd);
        EXPECT(gbc.pc(), 0x5e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03B5
        gbc.setState(0xdf8, 0xa5ca, 0x7e60, 0xebf5, 0xef14, 0xf8c0, 0x1, 0x0);
        gbc.writeMem(0xdf8, { 0xd6, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa5ca);
        EXPECT(gbc.pc(), 0xdfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03B6
        gbc.setState(0x624f, 0xf2c1, 0xfa70, 0x848d, 0x9485, 0x60fa, 0x1, 0x1);
        gbc.writeMem(0x624f, { 0xd6, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf2c1);
        EXPECT(gbc.pc(), 0x6251);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03B7
        gbc.setState(0xbd1c, 0xa203, 0xea70, 0xab59, 0x9ab3, 0x1a38, 0x0, 0x0);
        gbc.writeMem(0xbd1c, { 0xd6, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa203);
        EXPECT(gbc.pc(), 0xbd1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1c), 0xd6);
        EXPECT(gbc.readMem(0xbd1d), 0x5f);
        // D6 03B8
        gbc.setState(0x7dff, 0x58c4, 0xa990, 0xa91e, 0xe22d, 0xc4ad, 0x1, 0x1);
        gbc.writeMem(0x7dff, { 0xd6, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x58c4);
        EXPECT(gbc.pc(), 0x7e01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03B9
        gbc.setState(0xa5ea, 0x56ac, 0x70d0, 0x37cc, 0xaa2f, 0xcd92, 0x0, 0x0);
        gbc.writeMem(0xa5ea, { 0xd6, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x56ac);
        EXPECT(gbc.pc(), 0xa5ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ea), 0xd6);
        EXPECT(gbc.readMem(0xa5eb), 0x1e);
        // D6 03BA
        gbc.setState(0x9f8f, 0x3954, 0x67b0, 0x7b3, 0x8065, 0x1800, 0x0, 0x0);
        gbc.writeMem(0x9f8f, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3954);
        EXPECT(gbc.pc(), 0x9f91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f8f), 0xd6);
        EXPECT(gbc.readMem(0x9f90), 0xb0);
        // D6 03BB
        gbc.setState(0x230f, 0xe716, 0x5b40, 0x765b, 0xb57b, 0x6f3b, 0x0, 0x1);
        gbc.writeMem(0x230f, { 0xd6, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xe716);
        EXPECT(gbc.pc(), 0x2311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03BC
        gbc.setState(0xe946, 0x9df7, 0xa710, 0x6b23, 0xd66d, 0xf756, 0x1, 0x1);
        gbc.writeMem(0xe946, { 0xd6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9df7);
        EXPECT(gbc.pc(), 0xe948);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe946), 0xd6);
        EXPECT(gbc.readMem(0xe947), 0x43);
        // D6 03BD
        gbc.setState(0x53c2, 0xd9be, 0xa870, 0x4eda, 0xcdbb, 0xaa52, 0x1, 0x1);
        gbc.writeMem(0x53c2, { 0xd6, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd9be);
        EXPECT(gbc.pc(), 0x53c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03BE
        gbc.setState(0x7313, 0x56c0, 0x9590, 0x3928, 0xe29d, 0x8569, 0x0, 0x1);
        gbc.writeMem(0x7313, { 0xd6, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x56c0);
        EXPECT(gbc.pc(), 0x7315);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03BF
        gbc.setState(0xa80d, 0xeeff, 0x4cb0, 0xa9e1, 0x8ba9, 0x2b69, 0x1, 0x1);
        gbc.writeMem(0xa80d, { 0xd6, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xeeff);
        EXPECT(gbc.pc(), 0xa80f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa80d), 0xd6);
        EXPECT(gbc.readMem(0xa80e), 0xa2);
        // D6 03C0
        gbc.setState(0x3707, 0xe237, 0xe8c0, 0x93e, 0xde99, 0x8ddb, 0x0, 0x1);
        gbc.writeMem(0x3707, { 0xd6, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe237);
        EXPECT(gbc.pc(), 0x3709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03C1
        gbc.setState(0xef79, 0x4324, 0xd190, 0x8bcd, 0xc784, 0x3e70, 0x0, 0x1);
        gbc.writeMem(0xef79, { 0xd6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4324);
        EXPECT(gbc.pc(), 0xef7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef79), 0xd6);
        EXPECT(gbc.readMem(0xef7a), 0x46);
        // D6 03C2
        gbc.setState(0xc8bc, 0x5947, 0x23b0, 0xe7df, 0x408f, 0x9357, 0x0, 0x1);
        gbc.writeMem(0xc8bc, { 0xd6, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5947);
        EXPECT(gbc.pc(), 0xc8be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8bc), 0xd6);
        EXPECT(gbc.readMem(0xc8bd), 0x66);
        // D6 03C3
        gbc.setState(0xed07, 0x9035, 0x3dd0, 0xc90a, 0x10fe, 0x6ecf, 0x1, 0x1);
        gbc.writeMem(0xed07, { 0xd6, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9035);
        EXPECT(gbc.pc(), 0xed09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed07), 0xd6);
        EXPECT(gbc.readMem(0xed08), 0x54);
        // D6 03C4
        gbc.setState(0x2bd, 0x856f, 0xa40, 0x13c, 0x97b8, 0x54ce, 0x1, 0x1);
        gbc.writeMem(0x2bd, { 0xd6, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x856f);
        EXPECT(gbc.pc(), 0x2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03C5
        gbc.setState(0x40fa, 0x4fc7, 0xbea0, 0x6ad9, 0x2a87, 0x25ab, 0x1, 0x1);
        gbc.writeMem(0x40fa, { 0xd6, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4fc7);
        EXPECT(gbc.pc(), 0x40fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03C6
        gbc.setState(0x3dc8, 0x628d, 0x7560, 0x9bb1, 0x33ad, 0x49e3, 0x0, 0x0);
        gbc.writeMem(0x3dc8, { 0xd6, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x628d);
        EXPECT(gbc.pc(), 0x3dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03C7
        gbc.setState(0x727c, 0xfe2b, 0xe5f0, 0x83f8, 0x8730, 0x2633, 0x1, 0x0);
        gbc.writeMem(0x727c, { 0xd6, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfe2b);
        EXPECT(gbc.pc(), 0x727e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03C8
        gbc.setState(0x7fbf, 0x425c, 0xaad0, 0xdb98, 0x1443, 0xb63b, 0x0, 0x1);
        gbc.writeMem(0x7fbf, { 0xd6, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x425c);
        EXPECT(gbc.pc(), 0x7fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03C9
        gbc.setState(0x51df, 0x1f8e, 0x2c50, 0x8072, 0x1e30, 0xf14e, 0x0, 0x1);
        gbc.writeMem(0x51df, { 0xd6, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1f8e);
        EXPECT(gbc.pc(), 0x51e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03CA
        gbc.setState(0x23ba, 0x8045, 0x8120, 0x6188, 0xe99b, 0x6ee9, 0x1, 0x1);
        gbc.writeMem(0x23ba, { 0xd6, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8045);
        EXPECT(gbc.pc(), 0x23bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03CB
        gbc.setState(0x3340, 0xb6c7, 0xb6e0, 0x16ab, 0xbd8f, 0x3ad4, 0x1, 0x0);
        gbc.writeMem(0x3340, { 0xd6, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xb6c7);
        EXPECT(gbc.pc(), 0x3342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03CC
        gbc.setState(0xed8a, 0x9415, 0x81d0, 0x9e71, 0xc01e, 0xd5fe, 0x1, 0x0);
        gbc.writeMem(0xed8a, { 0xd6, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x9415);
        EXPECT(gbc.pc(), 0xed8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed8a), 0xd6);
        EXPECT(gbc.readMem(0xed8b), 0xdc);
        // D6 03CD
        gbc.setState(0x1160, 0xef1a, 0x1ba0, 0xaf4, 0x4cd8, 0x2dee, 0x1, 0x1);
        gbc.writeMem(0x1160, { 0xd6, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xef1a);
        EXPECT(gbc.pc(), 0x1162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03CE
        gbc.setState(0x9962, 0xd36b, 0x8620, 0x20bc, 0xbac5, 0xd298, 0x1, 0x0);
        gbc.writeMem(0x9962, { 0xd6, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd36b);
        EXPECT(gbc.pc(), 0x9964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9962), 0xd6);
        EXPECT(gbc.readMem(0x9963), 0x69);
        // D6 03CF
        gbc.setState(0x1de8, 0x2b09, 0xd190, 0x4998, 0xc2d8, 0x9ed1, 0x1, 0x0);
        gbc.writeMem(0x1de8, { 0xd6, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2b09);
        EXPECT(gbc.pc(), 0x1dea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03D0
        gbc.setState(0xa1fb, 0x85a2, 0x79d0, 0xf977, 0xaed6, 0xb7b2, 0x0, 0x1);
        gbc.writeMem(0xa1fb, { 0xd6, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x85a2);
        EXPECT(gbc.pc(), 0xa1fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1fb), 0xd6);
        EXPECT(gbc.readMem(0xa1fc), 0x14);
        // D6 03D1
        gbc.setState(0x5782, 0x30ce, 0x2c30, 0x6a50, 0x318b, 0xe07c, 0x1, 0x0);
        gbc.writeMem(0x5782, { 0xd6, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x30ce);
        EXPECT(gbc.pc(), 0x5784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // D6 03D2
        gbc.setState(0x31c, 0x664, 0x62e0, 0x323, 0x2ec, 0x77, 0x0, 0x1);
        gbc.writeMem(0x31c, { 0xd6, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x664);
        EXPECT(gbc.pc(), 0x31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03D3
        gbc.setState(0xd84f, 0x2de6, 0x4a0, 0x9b30, 0xefbb, 0x61f8, 0x0, 0x0);
        gbc.writeMem(0xd84f, { 0xd6, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2de6);
        EXPECT(gbc.pc(), 0xd851);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd84f), 0xd6);
        EXPECT(gbc.readMem(0xd850), 0x72);
        // D6 03D4
        gbc.setState(0x36cf, 0xeb42, 0x8420, 0x167a, 0x7672, 0xf07c, 0x0, 0x1);
        gbc.writeMem(0x36cf, { 0xd6, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xeb42);
        EXPECT(gbc.pc(), 0x36d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03D5
        gbc.setState(0xeab4, 0x14b4, 0xe080, 0x3662, 0x521c, 0x737c, 0x0, 0x1);
        gbc.writeMem(0xeab4, { 0xd6, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x14b4);
        EXPECT(gbc.pc(), 0xeab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab4), 0xd6);
        EXPECT(gbc.readMem(0xeab5), 0x17);
        // D6 03D6
        gbc.setState(0x5f6a, 0x9f70, 0x29a0, 0xdf6a, 0xafaa, 0x892d, 0x0, 0x1);
        gbc.writeMem(0x5f6a, { 0xd6, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9f70);
        EXPECT(gbc.pc(), 0x5f6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03D7
        gbc.setState(0xa877, 0x7b96, 0xcf80, 0x2021, 0xc5bd, 0xf3d5, 0x1, 0x1);
        gbc.writeMem(0xa877, { 0xd6, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7b96);
        EXPECT(gbc.pc(), 0xa879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa877), 0xd6);
        EXPECT(gbc.readMem(0xa878), 0x6b);
        // D6 03D8
        gbc.setState(0xc3a5, 0xf37f, 0x3fd0, 0xb1aa, 0xda63, 0xbdf4, 0x0, 0x0);
        gbc.writeMem(0xc3a5, { 0xd6, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf37f);
        EXPECT(gbc.pc(), 0xc3a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a5), 0xd6);
        EXPECT(gbc.readMem(0xc3a6), 0x39);
        // D6 03D9
        gbc.setState(0x2d09, 0x247a, 0xca00, 0x24f0, 0xebeb, 0xb837, 0x0, 0x0);
        gbc.writeMem(0x2d09, { 0xd6, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x247a);
        EXPECT(gbc.pc(), 0x2d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03DA
        gbc.setState(0x60fd, 0xbf9b, 0x82e0, 0x6ecc, 0xab7c, 0x22e8, 0x0, 0x0);
        gbc.writeMem(0x60fd, { 0xd6, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xbf9b);
        EXPECT(gbc.pc(), 0x60ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03DB
        gbc.setState(0xbafd, 0xcf4, 0x8b40, 0x2a87, 0x8415, 0x15a3, 0x1, 0x0);
        gbc.writeMem(0xbafd, { 0xd6, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xcf4);
        EXPECT(gbc.pc(), 0xbaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbafd), 0xd6);
        EXPECT(gbc.readMem(0xbafe), 0xa);
        // D6 03DC
        gbc.setState(0x94eb, 0x4156, 0x4d80, 0xed35, 0x737d, 0x404c, 0x0, 0x1);
        gbc.writeMem(0x94eb, { 0xd6, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x4156);
        EXPECT(gbc.pc(), 0x94ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94eb), 0xd6);
        EXPECT(gbc.readMem(0x94ec), 0x15);
        // D6 03DD
        gbc.setState(0x4d50, 0x792c, 0x8ba0, 0x87ad, 0x4cbe, 0x7d85, 0x1, 0x0);
        gbc.writeMem(0x4d50, { 0xd6, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x792c);
        EXPECT(gbc.pc(), 0x4d52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03DE
        gbc.setState(0x7cc4, 0xfc26, 0x7670, 0xa9e, 0x9ad5, 0x9cd, 0x1, 0x1);
        gbc.writeMem(0x7cc4, { 0xd6, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfc26);
        EXPECT(gbc.pc(), 0x7cc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // D6 03DF
        gbc.setState(0xa481, 0x62c, 0xe0b0, 0x764d, 0xf7e0, 0x3166, 0x0, 0x1);
        gbc.writeMem(0xa481, { 0xd6, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x62c);
        EXPECT(gbc.pc(), 0xa483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa481), 0xd6);
        EXPECT(gbc.readMem(0xa482), 0x8c);
        // D6 03E0
        gbc.setState(0x3487, 0x68be, 0x7de0, 0x663, 0x1c7c, 0x8b0f, 0x0, 0x0);
        gbc.writeMem(0x3487, { 0xd6, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x68be);
        EXPECT(gbc.pc(), 0x3489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // D6 03E1
        gbc.setState(0xa2c9, 0x7b5b, 0x5d50, 0x2e19, 0x1231, 0xf5c9, 0x0, 0x1);
        gbc.writeMem(0xa2c9, { 0xd6, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7b5b);
        EXPECT(gbc.pc(), 0xa2cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c9), 0xd6);
        EXPECT(gbc.readMem(0xa2ca), 0x1d);
        // D6 03E2
        gbc.setState(0xbc2d, 0x8b24, 0xcc50, 0x52bc, 0xf2b, 0xf084, 0x0, 0x1);
        gbc.writeMem(0xbc2d, { 0xd6, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8b24);
        EXPECT(gbc.pc(), 0xbc2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc2d), 0xd6);
        EXPECT(gbc.readMem(0xbc2e), 0xe0);
        // D6 03E4
        gbc.setState(0xde0f, 0xe9fe, 0xe090, 0x7e53, 0xa757, 0x2557, 0x1, 0x0);
        gbc.writeMem(0xde0f, { 0xd6, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe9fe);
        EXPECT(gbc.pc(), 0xde11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde0f), 0xd6);
        EXPECT(gbc.readMem(0xde10), 0x41);
        // D6 03E5
        gbc.setState(0xa08d, 0xb68a, 0x91e0, 0x5574, 0x7911, 0xabf, 0x1, 0x1);
        gbc.writeMem(0xa08d, { 0xd6, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb68a);
        EXPECT(gbc.pc(), 0xa08f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08d), 0xd6);
        EXPECT(gbc.readMem(0xa08e), 0x8e);
        // D6 03E6
        gbc.setState(0x4cb8, 0x352e, 0x5580, 0xbe92, 0xaedd, 0x7b30, 0x1, 0x1);
        gbc.writeMem(0x4cb8, { 0xd6, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x352e);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // D6 03E7
        gbc.setState(0x3980, 0x82b8, 0xdbb0, 0xed3c, 0x332c, 0xe624, 0x0, 0x0);
        gbc.writeMem(0x3980, { 0xd6, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x82b8);
        EXPECT(gbc.pc(), 0x3982);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
}
#endif
